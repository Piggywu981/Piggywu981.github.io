var vN=Object.defineProperty;var yN=(e,t,r)=>t in e?vN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var uo=(e,t,r)=>yN(e,typeof t!="symbol"?t+"":t,r);function mz(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const l=Object.getOwnPropertyDescriptor(n,i);l&&Object.defineProperty(e,i,l.get?l:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();var rC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function oc(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var gz={exports:{}},cx={},vz={exports:{}},qr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg=Symbol.for("react.element"),_N=Symbol.for("react.portal"),xN=Symbol.for("react.fragment"),bN=Symbol.for("react.strict_mode"),wN=Symbol.for("react.profiler"),SN=Symbol.for("react.provider"),CN=Symbol.for("react.context"),kN=Symbol.for("react.forward_ref"),TN=Symbol.for("react.suspense"),EN=Symbol.for("react.memo"),IN=Symbol.for("react.lazy"),rP=Symbol.iterator;function PN(e){return e===null||typeof e!="object"?null:(e=rP&&e[rP]||e["@@iterator"],typeof e=="function"?e:null)}var yz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_z=Object.assign,xz={};function Nf(e,t,r){this.props=e,this.context=t,this.refs=xz,this.updater=r||yz}Nf.prototype.isReactComponent={};Nf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Nf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bz(){}bz.prototype=Nf.prototype;function H2(e,t,r){this.props=e,this.context=t,this.refs=xz,this.updater=r||yz}var G2=H2.prototype=new bz;G2.constructor=H2;_z(G2,Nf.prototype);G2.isPureReactComponent=!0;var nP=Array.isArray,wz=Object.prototype.hasOwnProperty,W2={current:null},Sz={key:!0,ref:!0,__self:!0,__source:!0};function Cz(e,t,r){var n,i={},l=null,h=null;if(t!=null)for(n in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(l=""+t.key),t)wz.call(t,n)&&!Sz.hasOwnProperty(n)&&(i[n]=t[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var m=Array(s),y=0;y<s;y++)m[y]=arguments[y+2];i.children=m}if(e&&e.defaultProps)for(n in s=e.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:Hg,type:e,key:l,ref:h,props:i,_owner:W2.current}}function AN(e,t){return{$$typeof:Hg,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function q2(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hg}function RN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var iP=/\/+/g;function J1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?RN(""+e.key):t.toString(36)}function x0(e,t,r,n,i){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(l){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case Hg:case _N:h=!0}}if(h)return h=e,i=i(h),e=n===""?"."+J1(h,0):n,nP(i)?(r="",e!=null&&(r=e.replace(iP,"$&/")+"/"),x0(i,t,r,"",function(y){return y})):i!=null&&(q2(i)&&(i=AN(i,r+(!i.key||h&&h.key===i.key?"":(""+i.key).replace(iP,"$&/")+"/")+e)),t.push(i)),1;if(h=0,n=n===""?".":n+":",nP(e))for(var s=0;s<e.length;s++){l=e[s];var m=n+J1(l,s);h+=x0(l,t,r,m,i)}else if(m=PN(e),typeof m=="function")for(e=m.call(e),s=0;!(l=e.next()).done;)l=l.value,m=n+J1(l,s++),h+=x0(l,t,r,m,i);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function $y(e,t,r){if(e==null)return e;var n=[],i=0;return x0(e,n,"","",function(l){return t.call(r,l,i++)}),n}function DN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $o={current:null},b0={transition:null},MN={ReactCurrentDispatcher:$o,ReactCurrentBatchConfig:b0,ReactCurrentOwner:W2};function kz(){throw Error("act(...) is not supported in production builds of React.")}qr.Children={map:$y,forEach:function(e,t,r){$y(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return $y(e,function(){t++}),t},toArray:function(e){return $y(e,function(t){return t})||[]},only:function(e){if(!q2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};qr.Component=Nf;qr.Fragment=xN;qr.Profiler=wN;qr.PureComponent=H2;qr.StrictMode=bN;qr.Suspense=TN;qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MN;qr.act=kz;qr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=_z({},e.props),i=e.key,l=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,h=W2.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(m in t)wz.call(t,m)&&!Sz.hasOwnProperty(m)&&(n[m]=t[m]===void 0&&s!==void 0?s[m]:t[m])}var m=arguments.length-2;if(m===1)n.children=r;else if(1<m){s=Array(m);for(var y=0;y<m;y++)s[y]=arguments[y+2];n.children=s}return{$$typeof:Hg,type:e.type,key:i,ref:l,props:n,_owner:h}};qr.createContext=function(e){return e={$$typeof:CN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:SN,_context:e},e.Consumer=e};qr.createElement=Cz;qr.createFactory=function(e){var t=Cz.bind(null,e);return t.type=e,t};qr.createRef=function(){return{current:null}};qr.forwardRef=function(e){return{$$typeof:kN,render:e}};qr.isValidElement=q2;qr.lazy=function(e){return{$$typeof:IN,_payload:{_status:-1,_result:e},_init:DN}};qr.memo=function(e,t){return{$$typeof:EN,type:e,compare:t===void 0?null:t}};qr.startTransition=function(e){var t=b0.transition;b0.transition={};try{e()}finally{b0.transition=t}};qr.unstable_act=kz;qr.useCallback=function(e,t){return $o.current.useCallback(e,t)};qr.useContext=function(e){return $o.current.useContext(e)};qr.useDebugValue=function(){};qr.useDeferredValue=function(e){return $o.current.useDeferredValue(e)};qr.useEffect=function(e,t){return $o.current.useEffect(e,t)};qr.useId=function(){return $o.current.useId()};qr.useImperativeHandle=function(e,t,r){return $o.current.useImperativeHandle(e,t,r)};qr.useInsertionEffect=function(e,t){return $o.current.useInsertionEffect(e,t)};qr.useLayoutEffect=function(e,t){return $o.current.useLayoutEffect(e,t)};qr.useMemo=function(e,t){return $o.current.useMemo(e,t)};qr.useReducer=function(e,t,r){return $o.current.useReducer(e,t,r)};qr.useRef=function(e){return $o.current.useRef(e)};qr.useState=function(e){return $o.current.useState(e)};qr.useSyncExternalStore=function(e,t,r){return $o.current.useSyncExternalStore(e,t,r)};qr.useTransition=function(){return $o.current.useTransition()};qr.version="18.3.1";vz.exports=qr;var R=vz.exports;const ys=lx(R),nC=mz({__proto__:null,default:ys},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zN=R,LN=Symbol.for("react.element"),ON=Symbol.for("react.fragment"),$N=Object.prototype.hasOwnProperty,BN=zN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FN={key:!0,ref:!0,__self:!0,__source:!0};function Tz(e,t,r){var n,i={},l=null,h=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(h=t.ref);for(n in t)$N.call(t,n)&&!FN.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:LN,type:e,key:l,ref:h,props:i,_owner:BN.current}}cx.Fragment=ON;cx.jsx=Tz;cx.jsxs=Tz;gz.exports=cx;var H=gz.exports;const nm={grey:{50:"#FBFCFE",100:"#F0F4F8",200:"#DDE7EE",300:"#CDD7E1",400:"#9FA6AD",500:"#636B74",600:"#555E68",700:"#32383E",800:"#171A1C",900:"#0B0D0E"},blue:{50:"#EDF5FD",100:"#E3EFFB",200:"#C7DFF7",300:"#97C3F0",400:"#4393E4",500:"#0B6BCB",600:"#185EA5",700:"#12467B",800:"#0A2744",900:"#051423"},yellow:{50:"#FEFAF6",100:"#FDF0E1",200:"#FCE1C2",300:"#F3C896",400:"#EA9A3E",500:"#9A5B13",600:"#72430D",700:"#492B08",800:"#2E1B05",900:"#1D1002"},red:{50:"#FEF6F6",100:"#FCE4E4",200:"#F7C5C5",300:"#F09898",400:"#E47474",500:"#C41C1C",600:"#A51818",700:"#7D1212",800:"#430A0A",900:"#240505"},green:{50:"#F6FEF6",100:"#E3FBE3",200:"#C7F7C7",300:"#A1E8A1",400:"#51BC51",500:"#1F7A1F",600:"#136C13",700:"#0A470A",800:"#042F04",900:"#021D02"}},Gg="$$joy";function Zl(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const NN=Object.freeze(Object.defineProperty({__proto__:null,default:Zl},Symbol.toStringTag,{value:"Module"}));function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K.apply(null,arguments)}var jN=!1;function VN(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function UN(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var HN=function(){function e(r){var n=this;this._insertTag=function(i){var l;n.tags.length===0?n.insertionPoint?l=n.insertionPoint.nextSibling:n.prepend?l=n.container.firstChild:l=n.before:l=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,l),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!jN:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(UN(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var l=VN(i);try{l.insertRule(n,l.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e}(),mo="-ms-",e_="-moz-",dn="-webkit-",Ez="comm",Z2="rule",K2="decl",GN="@import",Iz="@keyframes",WN="@layer",qN=Math.abs,ux=String.fromCharCode,ZN=Object.assign;function KN(e,t){return Xi(e,0)^45?(((t<<2^Xi(e,0))<<2^Xi(e,1))<<2^Xi(e,2))<<2^Xi(e,3):0}function Pz(e){return e.trim()}function XN(e,t){return(e=t.exec(e))?e[0]:e}function hn(e,t,r){return e.replace(t,r)}function iC(e,t){return e.indexOf(t)}function Xi(e,t){return e.charCodeAt(t)|0}function eg(e,t,r){return e.slice(t,r)}function Ks(e){return e.length}function X2(e){return e.length}function By(e,t){return t.push(e),e}function YN(e,t){return e.map(t).join("")}var dx=1,mf=1,Az=0,ea=0,bi=0,jf="";function hx(e,t,r,n,i,l,h){return{value:e,root:t,parent:r,type:n,props:i,children:l,line:dx,column:mf,length:h,return:""}}function im(e,t){return ZN(hx("",null,null,"",null,null,0),e,{length:-e.length},t)}function JN(){return bi}function QN(){return bi=ea>0?Xi(jf,--ea):0,mf--,bi===10&&(mf=1,dx--),bi}function ya(){return bi=ea<Az?Xi(jf,ea++):0,mf++,bi===10&&(mf=1,dx++),bi}function el(){return Xi(jf,ea)}function w0(){return ea}function Wg(e,t){return eg(jf,e,t)}function tg(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Rz(e){return dx=mf=1,Az=Ks(jf=e),ea=0,[]}function Dz(e){return jf="",e}function S0(e){return Pz(Wg(ea-1,oC(e===91?e+2:e===40?e+1:e)))}function ej(e){for(;(bi=el())&&bi<33;)ya();return tg(e)>2||tg(bi)>3?"":" "}function tj(e,t){for(;--t&&ya()&&!(bi<48||bi>102||bi>57&&bi<65||bi>70&&bi<97););return Wg(e,w0()+(t<6&&el()==32&&ya()==32))}function oC(e){for(;ya();)switch(bi){case e:return ea;case 34:case 39:e!==34&&e!==39&&oC(bi);break;case 40:e===41&&oC(e);break;case 92:ya();break}return ea}function rj(e,t){for(;ya()&&e+bi!==57;)if(e+bi===84&&el()===47)break;return"/*"+Wg(t,ea-1)+"*"+ux(e===47?e:ya())}function nj(e){for(;!tg(el());)ya();return Wg(e,ea)}function ij(e){return Dz(C0("",null,null,null,[""],e=Rz(e),0,[0],e))}function C0(e,t,r,n,i,l,h,s,m){for(var y=0,S=0,T=h,I=0,D=0,F=0,V=1,Z=1,z=1,O=0,L="",te=i,j=l,$=n,J=L;Z;)switch(F=O,O=ya()){case 40:if(F!=108&&Xi(J,T-1)==58){iC(J+=hn(S0(O),"&","&\f"),"&\f")!=-1&&(z=-1);break}case 34:case 39:case 91:J+=S0(O);break;case 9:case 10:case 13:case 32:J+=ej(F);break;case 92:J+=tj(w0()-1,7);continue;case 47:switch(el()){case 42:case 47:By(oj(rj(ya(),w0()),t,r),m);break;default:J+="/"}break;case 123*V:s[y++]=Ks(J)*z;case 125*V:case 59:case 0:switch(O){case 0:case 125:Z=0;case 59+S:z==-1&&(J=hn(J,/\f/g,"")),D>0&&Ks(J)-T&&By(D>32?aP(J+";",n,r,T-1):aP(hn(J," ","")+";",n,r,T-2),m);break;case 59:J+=";";default:if(By($=oP(J,t,r,y,S,i,s,L,te=[],j=[],T),l),O===123)if(S===0)C0(J,t,$,$,te,l,T,s,j);else switch(I===99&&Xi(J,3)===110?100:I){case 100:case 108:case 109:case 115:C0(e,$,$,n&&By(oP(e,$,$,0,0,i,s,L,i,te=[],T),j),i,j,T,s,n?te:j);break;default:C0(J,$,$,$,[""],j,0,s,j)}}y=S=D=0,V=z=1,L=J="",T=h;break;case 58:T=1+Ks(J),D=F;default:if(V<1){if(O==123)--V;else if(O==125&&V++==0&&QN()==125)continue}switch(J+=ux(O),O*V){case 38:z=S>0?1:(J+="\f",-1);break;case 44:s[y++]=(Ks(J)-1)*z,z=1;break;case 64:el()===45&&(J+=S0(ya())),I=el(),S=T=Ks(L=J+=nj(w0())),O++;break;case 45:F===45&&Ks(J)==2&&(V=0)}}return l}function oP(e,t,r,n,i,l,h,s,m,y,S){for(var T=i-1,I=i===0?l:[""],D=X2(I),F=0,V=0,Z=0;F<n;++F)for(var z=0,O=eg(e,T+1,T=qN(V=h[F])),L=e;z<D;++z)(L=Pz(V>0?I[z]+" "+O:hn(O,/&\f/g,I[z])))&&(m[Z++]=L);return hx(e,t,r,i===0?Z2:s,m,y,S)}function oj(e,t,r){return hx(e,t,r,Ez,ux(JN()),eg(e,2,-2),0)}function aP(e,t,r,n){return hx(e,t,r,K2,eg(e,0,n),eg(e,n+1,-1),n)}function tf(e,t){for(var r="",n=X2(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function aj(e,t,r,n){switch(e.type){case WN:if(e.children.length)break;case GN:case K2:return e.return=e.return||e.value;case Ez:return"";case Iz:return e.return=e.value+"{"+tf(e.children,n)+"}";case Z2:e.value=e.props.join(",")}return Ks(r=tf(e.children,n))?e.return=e.value+"{"+r+"}":""}function sj(e){var t=X2(e);return function(r,n,i,l){for(var h="",s=0;s<t;s++)h+=e[s](r,n,i,l)||"";return h}}function lj(e){return function(t){t.root||(t=t.return)&&e(t)}}function Mz(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var cj=function(t,r,n){for(var i=0,l=0;i=l,l=el(),i===38&&l===12&&(r[n]=1),!tg(l);)ya();return Wg(t,ea)},uj=function(t,r){var n=-1,i=44;do switch(tg(i)){case 0:i===38&&el()===12&&(r[n]=1),t[n]+=cj(ea-1,r,n);break;case 2:t[n]+=S0(i);break;case 4:if(i===44){t[++n]=el()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=ux(i)}while(i=ya());return t},dj=function(t,r){return Dz(uj(Rz(t),r))},sP=new WeakMap,hj=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!sP.get(n))&&!i){sP.set(t,!0);for(var l=[],h=dj(r,l),s=n.props,m=0,y=0;m<h.length;m++)for(var S=0;S<s.length;S++,y++)t.props[y]=l[m]?h[m].replace(/&\f/g,s[S]):s[S]+" "+h[m]}}},fj=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function zz(e,t){switch(KN(e,t)){case 5103:return dn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return dn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return dn+e+e_+e+mo+e+e;case 6828:case 4268:return dn+e+mo+e+e;case 6165:return dn+e+mo+"flex-"+e+e;case 5187:return dn+e+hn(e,/(\w+).+(:[^]+)/,dn+"box-$1$2"+mo+"flex-$1$2")+e;case 5443:return dn+e+mo+"flex-item-"+hn(e,/flex-|-self/,"")+e;case 4675:return dn+e+mo+"flex-line-pack"+hn(e,/align-content|flex-|-self/,"")+e;case 5548:return dn+e+mo+hn(e,"shrink","negative")+e;case 5292:return dn+e+mo+hn(e,"basis","preferred-size")+e;case 6060:return dn+"box-"+hn(e,"-grow","")+dn+e+mo+hn(e,"grow","positive")+e;case 4554:return dn+hn(e,/([^-])(transform)/g,"$1"+dn+"$2")+e;case 6187:return hn(hn(hn(e,/(zoom-|grab)/,dn+"$1"),/(image-set)/,dn+"$1"),e,"")+e;case 5495:case 3959:return hn(e,/(image-set\([^]*)/,dn+"$1$`$1");case 4968:return hn(hn(e,/(.+:)(flex-)?(.*)/,dn+"box-pack:$3"+mo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+dn+e+e;case 4095:case 3583:case 4068:case 2532:return hn(e,/(.+)-inline(.+)/,dn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ks(e)-1-t>6)switch(Xi(e,t+1)){case 109:if(Xi(e,t+4)!==45)break;case 102:return hn(e,/(.+:)(.+)-([^]+)/,"$1"+dn+"$2-$3$1"+e_+(Xi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~iC(e,"stretch")?zz(hn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Xi(e,t+1)!==115)break;case 6444:switch(Xi(e,Ks(e)-3-(~iC(e,"!important")&&10))){case 107:return hn(e,":",":"+dn)+e;case 101:return hn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+dn+(Xi(e,14)===45?"inline-":"")+"box$3$1"+dn+"$2$3$1"+mo+"$2box$3")+e}break;case 5936:switch(Xi(e,t+11)){case 114:return dn+e+mo+hn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return dn+e+mo+hn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return dn+e+mo+hn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return dn+e+mo+e+e}return e}var pj=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case K2:t.return=zz(t.value,t.length);break;case Iz:return tf([im(t,{value:hn(t.value,"@","@"+dn)})],i);case Z2:if(t.length)return YN(t.props,function(l){switch(XN(l,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return tf([im(t,{props:[hn(l,/:(read-\w+)/,":"+e_+"$1")]})],i);case"::placeholder":return tf([im(t,{props:[hn(l,/:(plac\w+)/,":"+dn+"input-$1")]}),im(t,{props:[hn(l,/:(plac\w+)/,":"+e_+"$1")]}),im(t,{props:[hn(l,/:(plac\w+)/,mo+"input-$1")]})],i)}return""})}},mj=[pj],Lz=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(V){var Z=V.getAttribute("data-emotion");Z.indexOf(" ")!==-1&&(document.head.appendChild(V),V.setAttribute("data-s",""))})}var i=t.stylisPlugins||mj,l={},h,s=[];h=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(V){for(var Z=V.getAttribute("data-emotion").split(" "),z=1;z<Z.length;z++)l[Z[z]]=!0;s.push(V)});var m,y=[hj,fj];{var S,T=[aj,lj(function(V){S.insert(V)})],I=sj(y.concat(i,T)),D=function(Z){return tf(ij(Z),I)};m=function(Z,z,O,L){S=O,D(Z?Z+"{"+z.styles+"}":z.styles),L&&(F.inserted[z.name]=!0)}}var F={key:r,sheet:new HN({key:r,container:h,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:l,registered:{},insert:m};return F.sheet.hydrate(s),F},Oz={exports:{}},yn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fi=typeof Symbol=="function"&&Symbol.for,Y2=Fi?Symbol.for("react.element"):60103,J2=Fi?Symbol.for("react.portal"):60106,fx=Fi?Symbol.for("react.fragment"):60107,px=Fi?Symbol.for("react.strict_mode"):60108,mx=Fi?Symbol.for("react.profiler"):60114,gx=Fi?Symbol.for("react.provider"):60109,vx=Fi?Symbol.for("react.context"):60110,Q2=Fi?Symbol.for("react.async_mode"):60111,yx=Fi?Symbol.for("react.concurrent_mode"):60111,_x=Fi?Symbol.for("react.forward_ref"):60112,xx=Fi?Symbol.for("react.suspense"):60113,gj=Fi?Symbol.for("react.suspense_list"):60120,bx=Fi?Symbol.for("react.memo"):60115,wx=Fi?Symbol.for("react.lazy"):60116,vj=Fi?Symbol.for("react.block"):60121,yj=Fi?Symbol.for("react.fundamental"):60117,_j=Fi?Symbol.for("react.responder"):60118,xj=Fi?Symbol.for("react.scope"):60119;function Sa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Y2:switch(e=e.type,e){case Q2:case yx:case fx:case mx:case px:case xx:return e;default:switch(e=e&&e.$$typeof,e){case vx:case _x:case wx:case bx:case gx:return e;default:return t}}case J2:return t}}}function $z(e){return Sa(e)===yx}yn.AsyncMode=Q2;yn.ConcurrentMode=yx;yn.ContextConsumer=vx;yn.ContextProvider=gx;yn.Element=Y2;yn.ForwardRef=_x;yn.Fragment=fx;yn.Lazy=wx;yn.Memo=bx;yn.Portal=J2;yn.Profiler=mx;yn.StrictMode=px;yn.Suspense=xx;yn.isAsyncMode=function(e){return $z(e)||Sa(e)===Q2};yn.isConcurrentMode=$z;yn.isContextConsumer=function(e){return Sa(e)===vx};yn.isContextProvider=function(e){return Sa(e)===gx};yn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Y2};yn.isForwardRef=function(e){return Sa(e)===_x};yn.isFragment=function(e){return Sa(e)===fx};yn.isLazy=function(e){return Sa(e)===wx};yn.isMemo=function(e){return Sa(e)===bx};yn.isPortal=function(e){return Sa(e)===J2};yn.isProfiler=function(e){return Sa(e)===mx};yn.isStrictMode=function(e){return Sa(e)===px};yn.isSuspense=function(e){return Sa(e)===xx};yn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===fx||e===yx||e===mx||e===px||e===xx||e===gj||typeof e=="object"&&e!==null&&(e.$$typeof===wx||e.$$typeof===bx||e.$$typeof===gx||e.$$typeof===vx||e.$$typeof===_x||e.$$typeof===yj||e.$$typeof===_j||e.$$typeof===xj||e.$$typeof===vj)};yn.typeOf=Sa;Oz.exports=yn;var bj=Oz.exports,Bz=bj,wj={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Sj={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Fz={};Fz[Bz.ForwardRef]=wj;Fz[Bz.Memo]=Sj;var Cj=!0;function Nz(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var ek=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||Cj===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},tk=function(t,r,n){ek(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var l=r;do t.insert(r===l?"."+i:"",l,t.sheet,!0),l=l.next;while(l!==void 0)}};function kj(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Tj={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ej=/[A-Z]|^ms/g,Ij=/_EMO_([^_]+?)_([^]*?)_EMO_/g,jz=function(t){return t.charCodeAt(1)===45},lP=function(t){return t!=null&&typeof t!="boolean"},Q1=Mz(function(e){return jz(e)?e:e.replace(Ej,"-$&").toLowerCase()}),cP=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(Ij,function(n,i,l){return Xs={name:i,styles:l,next:Xs},i})}return Tj[t]!==1&&!jz(t)&&typeof r=="number"&&r!==0?r+"px":r};function rg(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return Xs={name:i.name,styles:i.styles,next:Xs},i.name;var l=r;if(l.styles!==void 0){var h=l.next;if(h!==void 0)for(;h!==void 0;)Xs={name:h.name,styles:h.styles,next:Xs},h=h.next;var s=l.styles+";";return s}return Pj(e,t,r)}case"function":{if(e!==void 0){var m=Xs,y=r(e);return Xs=m,rg(e,t,y)}break}}var S=r;if(t==null)return S;var T=t[S];return T!==void 0?T:S}function Pj(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=rg(e,t,r[i])+";";else for(var l in r){var h=r[l];if(typeof h!="object"){var s=h;t!=null&&t[s]!==void 0?n+=l+"{"+t[s]+"}":lP(s)&&(n+=Q1(l)+":"+cP(l,s)+";")}else if(Array.isArray(h)&&typeof h[0]=="string"&&(t==null||t[h[0]]===void 0))for(var m=0;m<h.length;m++)lP(h[m])&&(n+=Q1(l)+":"+cP(l,h[m])+";");else{var y=rg(e,t,h);switch(l){case"animation":case"animationName":{n+=Q1(l)+":"+y+";";break}default:n+=l+"{"+y+"}"}}}return n}var uP=/label:\s*([^\s;{]+)\s*(;|$)/g,Xs;function Sx(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";Xs=void 0;var l=e[0];if(l==null||l.raw===void 0)n=!1,i+=rg(r,t,l);else{var h=l;i+=h[0]}for(var s=1;s<e.length;s++)if(i+=rg(r,t,e[s]),n){var m=l;i+=m[s]}uP.lastIndex=0;for(var y="",S;(S=uP.exec(i))!==null;)y+="-"+S[1];var T=kj(i)+y;return{name:T,styles:i,next:Xs}}var Aj=function(t){return t()},Vz=nC.useInsertionEffect?nC.useInsertionEffect:!1,Uz=Vz||Aj,dP=Vz||R.useLayoutEffect,Rj=!1,Hz=R.createContext(typeof HTMLElement<"u"?Lz({key:"css"}):null),Dj=Hz.Provider,rk=function(t){return R.forwardRef(function(r,n){var i=R.useContext(Hz);return t(r,i,n)})},Vf=R.createContext({}),nk={}.hasOwnProperty,aC="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Mj=function(t,r){var n={};for(var i in r)nk.call(r,i)&&(n[i]=r[i]);return n[aC]=t,n},zj=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return ek(r,n,i),Uz(function(){return tk(r,n,i)}),null},Lj=rk(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var i=e[aC],l=[n],h="";typeof e.className=="string"?h=Nz(t.registered,l,e.className):e.className!=null&&(h=e.className+" ");var s=Sx(l,void 0,R.useContext(Vf));h+=t.key+"-"+s.name;var m={};for(var y in e)nk.call(e,y)&&y!=="css"&&y!==aC&&!Rj&&(m[y]=e[y]);return m.className=h,r&&(m.ref=r),R.createElement(R.Fragment,null,R.createElement(zj,{cache:t,serialized:s,isStringTag:typeof i=="string"}),R.createElement(i,m))}),Oj=Lj,ew={exports:{}},hP;function Gz(){return hP||(hP=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var l in i)({}).hasOwnProperty.call(i,l)&&(r[l]=i[l])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(ew)),ew.exports}Gz();var $j=function(t,r){var n=arguments;if(r==null||!nk.call(r,"css"))return R.createElement.apply(void 0,n);var i=n.length,l=new Array(i);l[0]=Oj,l[1]=Mj(t,r);for(var h=2;h<i;h++)l[h]=n[h];return R.createElement.apply(null,l)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})($j);var Bj=rk(function(e,t){var r=e.styles,n=Sx([r],void 0,R.useContext(Vf)),i=R.useRef();return dP(function(){var l=t.key+"-global",h=new t.sheet.constructor({key:l,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),s=!1,m=document.querySelector('style[data-emotion="'+l+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),m!==null&&(s=!0,m.setAttribute("data-emotion",l),h.hydrate([m])),i.current=[h,s],function(){h.flush()}},[t]),dP(function(){var l=i.current,h=l[0],s=l[1];if(s){l[1]=!1;return}if(n.next!==void 0&&tk(t,n.next,!0),h.tags.length){var m=h.tags[h.tags.length-1].nextElementSibling;h.before=m,h.flush()}t.insert("",n,h,!1)},[t,n.name]),null});function ik(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Sx(t)}function Wz(){var e=ik.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Fj=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Nj=Mz(function(e){return Fj.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),jj=Nj,Vj=function(t){return t!=="theme"},fP=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?jj:Vj},pP=function(t,r,n){var i;if(r){var l=r.shouldForwardProp;i=t.__emotion_forwardProp&&l?function(h){return t.__emotion_forwardProp(h)&&l(h)}:l}return typeof i!="function"&&n&&(i=t.__emotion_forwardProp),i},Uj=function(t){var r=t.cache,n=t.serialized,i=t.isStringTag;return ek(r,n,i),Uz(function(){return tk(r,n,i)}),null},Hj=function e(t,r){var n=t.__emotion_real===t,i=n&&t.__emotion_base||t,l,h;r!==void 0&&(l=r.label,h=r.target);var s=pP(t,r,n),m=s||fP(i),y=!m("as");return function(){var S=arguments,T=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(l!==void 0&&T.push("label:"+l+";"),S[0]==null||S[0].raw===void 0)T.push.apply(T,S);else{var I=S[0];T.push(I[0]);for(var D=S.length,F=1;F<D;F++)T.push(S[F],I[F])}var V=rk(function(Z,z,O){var L=y&&Z.as||i,te="",j=[],$=Z;if(Z.theme==null){$={};for(var J in Z)$[J]=Z[J];$.theme=R.useContext(Vf)}typeof Z.className=="string"?te=Nz(z.registered,j,Z.className):Z.className!=null&&(te=Z.className+" ");var ie=Sx(T.concat(j),z.registered,$);te+=z.key+"-"+ie.name,h!==void 0&&(te+=" "+h);var xe=y&&s===void 0?fP(L):m,ge={};for(var we in Z)y&&we==="as"||xe(we)&&(ge[we]=Z[we]);return ge.className=te,O&&(ge.ref=O),R.createElement(R.Fragment,null,R.createElement(Uj,{cache:z,serialized:ie,isStringTag:typeof L=="string"}),R.createElement(L,ge))});return V.displayName=l!==void 0?l:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",V.defaultProps=t.defaultProps,V.__emotion_real=V,V.__emotion_base=i,V.__emotion_styles=T,V.__emotion_forwardProp=s,Object.defineProperty(V,"toString",{value:function(){return"."+h}}),V.withComponent=function(Z,z){var O=e(Z,K({},r,z,{shouldForwardProp:pP(V,z,!0)}));return O.apply(void 0,T)},V}},Gj=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],sC=Hj.bind(null);Gj.forEach(function(e){sC[e]=sC(e)});let lC;typeof document=="object"&&(lC=Lz({key:"css",prepend:!0}));function Wj(e){const{injectFirst:t,children:r}=e;return t&&lC?H.jsx(Dj,{value:lC,children:r}):r}function qj(e){return e==null||Object.keys(e).length===0}function Om(e){const{styles:t,defaultTheme:r={}}=e,n=typeof t=="function"?i=>t(qj(i)?r:i):t;return H.jsx(Bj,{styles:n})}function ok(e,t){return sC(e,t)}const qz=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},Zj=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:Om,StyledEngineProvider:Wj,ThemeContext:Vf,css:ik,default:ok,internal_processStyles:qz,keyframes:Wz},Symbol.toStringTag,{value:"Module"}));function Ht(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function Bl(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Zz(e){if(R.isValidElement(e)||!Bl(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=Zz(e[r])}),t}function Si(e,t,r={clone:!0}){const n=r.clone?K({},e):e;return Bl(e)&&Bl(t)&&Object.keys(t).forEach(i=>{R.isValidElement(t[i])?n[i]=t[i]:Bl(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&Bl(e[i])?n[i]=Si(e[i],t[i],r):r.clone?n[i]=Bl(t[i])?Zz(t[i]):t[i]:n[i]=t[i]}),n}const Kj=Object.freeze(Object.defineProperty({__proto__:null,default:Si,isPlainObject:Bl},Symbol.toStringTag,{value:"Module"})),Xj=["values","unit","step"],Yj=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>K({},r,{[n.key]:n.val}),{})};function ak(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5}=e,i=Ht(e,Xj),l=Yj(t),h=Object.keys(l);function s(I){return`@media (min-width:${typeof t[I]=="number"?t[I]:I}${r})`}function m(I){return`@media (max-width:${(typeof t[I]=="number"?t[I]:I)-n/100}${r})`}function y(I,D){const F=h.indexOf(D);return`@media (min-width:${typeof t[I]=="number"?t[I]:I}${r}) and (max-width:${(F!==-1&&typeof t[h[F]]=="number"?t[h[F]]:D)-n/100}${r})`}function S(I){return h.indexOf(I)+1<h.length?y(I,h[h.indexOf(I)+1]):s(I)}function T(I){const D=h.indexOf(I);return D===0?s(h[1]):D===h.length-1?m(h[D]):y(I,h[h.indexOf(I)+1]).replace("@media","@media not all and")}return K({keys:h,values:l,up:s,down:m,between:y,only:S,not:T,unit:r},i)}const Jj={borderRadius:4};function $m(e,t){return t?Si(e,t,{clone:!1}):e}const sk={xs:0,sm:600,md:900,lg:1200,xl:1536},mP={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${sk[e]}px)`};function ks(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const l=n.breakpoints||mP;return t.reduce((h,s,m)=>(h[l.up(l.keys[m])]=r(t[m]),h),{})}if(typeof t=="object"){const l=n.breakpoints||mP;return Object.keys(t).reduce((h,s)=>{if(Object.keys(l.values||sk).indexOf(s)!==-1){const m=l.up(s);h[m]=r(t[s],s)}else{const m=s;h[m]=t[m]}return h},{})}return r(t)}function Kz(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((n,i)=>{const l=e.up(i);return n[l]={},n},{}))||{}}function Xz(e,t){return e.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},t)}function Qj(e,...t){const r=Kz(e),n=[r,...t].reduce((i,l)=>Si(i,l),{});return Xz(Object.keys(r),n)}function e6(e,t){if(typeof e!="object")return{};const r={},n=Object.keys(t);return Array.isArray(e)?n.forEach((i,l)=>{l<e.length&&(r[i]=!0)}):n.forEach(i=>{e[i]!=null&&(r[i]=!0)}),r}function tw({values:e,breakpoints:t,base:r}){const n=r||e6(e,t),i=Object.keys(n);if(i.length===0)return e;let l;return i.reduce((h,s,m)=>(Array.isArray(e)?(h[s]=e[m]!=null?e[m]:e[l],l=m):typeof e=="object"?(h[s]=e[s]!=null?e[s]:e[l],l=s):h[s]=e,h),{})}function xt(e){if(typeof e!="string")throw new Error(Zl(7));return e.charAt(0).toUpperCase()+e.slice(1)}const t6=Object.freeze(Object.defineProperty({__proto__:null,default:xt},Symbol.toStringTag,{value:"Module"}));function Xc(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((i,l)=>i&&i[l]?i[l]:null,e);if(n!=null)return n}return t.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,e)}function t_(e,t,r,n=r){let i;return typeof e=="function"?i=e(r):Array.isArray(e)?i=e[r]||n:i=Xc(e,r)||n,t&&(i=t(i,n,e)),i}function vi(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:i}=e,l=h=>{if(h[t]==null)return null;const s=h[t],m=h.theme,y=Xc(m,n)||{};return ks(h,s,T=>{let I=t_(y,i,T);return T===I&&typeof T=="string"&&(I=t_(y,i,`${t}${T==="default"?"":xt(T)}`,T)),r===!1?I:{[r]:I}})};return l.propTypes={},l.filterProps=[t],l}function r6(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const n6={m:"margin",p:"padding"},i6={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},gP={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},o6=r6(e=>{if(e.length>2)if(gP[e])e=gP[e];else return[e];const[t,r]=e.split(""),n=n6[t],i=i6[r]||"";return Array.isArray(i)?i.map(l=>n+l):[n+i]}),lk=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],ck=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...lk,...ck];function qg(e,t,r,n){var i;const l=(i=Xc(e,t,!1))!=null?i:r;return typeof l=="number"?h=>typeof h=="string"?h:l*h:Array.isArray(l)?h=>typeof h=="string"?h:l[h]:typeof l=="function"?l:()=>{}}function uk(e){return qg(e,"spacing",8)}function sd(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),n=e(r);return t>=0?n:typeof n=="number"?-n:`-${n}`}function a6(e,t){return r=>e.reduce((n,i)=>(n[i]=sd(t,r),n),{})}function s6(e,t,r,n){if(t.indexOf(r)===-1)return null;const i=o6(r),l=a6(i,n),h=e[r];return ks(e,h,l)}function Yz(e,t){const r=uk(e.theme);return Object.keys(e).map(n=>s6(e,t,n,r)).reduce($m,{})}function oi(e){return Yz(e,lk)}oi.propTypes={};oi.filterProps=lk;function ai(e){return Yz(e,ck)}ai.propTypes={};ai.filterProps=ck;function Jz(e=8){if(e.mui)return e;const t=uk({spacing:e}),r=(...n)=>(n.length===0?[1]:n).map(l=>{const h=t(l);return typeof h=="number"?`${h}px`:h}).join(" ");return r.mui=!0,r}function Cx(...e){const t=e.reduce((n,i)=>(i.filterProps.forEach(l=>{n[l]=i}),n),{}),r=n=>Object.keys(n).reduce((i,l)=>t[l]?$m(i,t[l](n)):i,{});return r.propTypes={},r.filterProps=e.reduce((n,i)=>n.concat(i.filterProps),[]),r}function $a(e){return typeof e!="number"?e:`${e}px solid`}function Ja(e,t){return vi({prop:e,themeKey:"borders",transform:t})}const l6=Ja("border",$a),c6=Ja("borderTop",$a),u6=Ja("borderRight",$a),d6=Ja("borderBottom",$a),h6=Ja("borderLeft",$a),f6=Ja("borderColor"),p6=Ja("borderTopColor"),m6=Ja("borderRightColor"),g6=Ja("borderBottomColor"),v6=Ja("borderLeftColor"),y6=Ja("outline",$a),_6=Ja("outlineColor"),kx=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=qg(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:sd(t,n)});return ks(e,e.borderRadius,r)}return null};kx.propTypes={};kx.filterProps=["borderRadius"];Cx(l6,c6,u6,d6,h6,f6,p6,m6,g6,v6,kx,y6,_6);const Tx=e=>{if(e.gap!==void 0&&e.gap!==null){const t=qg(e.theme,"spacing",8),r=n=>({gap:sd(t,n)});return ks(e,e.gap,r)}return null};Tx.propTypes={};Tx.filterProps=["gap"];const Ex=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=qg(e.theme,"spacing",8),r=n=>({columnGap:sd(t,n)});return ks(e,e.columnGap,r)}return null};Ex.propTypes={};Ex.filterProps=["columnGap"];const Ix=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=qg(e.theme,"spacing",8),r=n=>({rowGap:sd(t,n)});return ks(e,e.rowGap,r)}return null};Ix.propTypes={};Ix.filterProps=["rowGap"];const x6=vi({prop:"gridColumn"}),b6=vi({prop:"gridRow"}),w6=vi({prop:"gridAutoFlow"}),S6=vi({prop:"gridAutoColumns"}),C6=vi({prop:"gridAutoRows"}),k6=vi({prop:"gridTemplateColumns"}),T6=vi({prop:"gridTemplateRows"}),E6=vi({prop:"gridTemplateAreas"}),I6=vi({prop:"gridArea"});Cx(Tx,Ex,Ix,x6,b6,w6,S6,C6,k6,T6,E6,I6);function rf(e,t){return t==="grey"?t:e}const P6=vi({prop:"color",themeKey:"palette",transform:rf}),A6=vi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:rf}),R6=vi({prop:"backgroundColor",themeKey:"palette",transform:rf});Cx(P6,A6,R6);function ha(e){return e<=1&&e!==0?`${e*100}%`:e}const D6=vi({prop:"width",transform:ha}),dk=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var n,i;const l=((n=e.theme)==null||(n=n.breakpoints)==null||(n=n.values)==null?void 0:n[r])||sk[r];return l?((i=e.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${l}${e.theme.breakpoints.unit}`}:{maxWidth:l}:{maxWidth:ha(r)}};return ks(e,e.maxWidth,t)}return null};dk.filterProps=["maxWidth"];const M6=vi({prop:"minWidth",transform:ha}),z6=vi({prop:"height",transform:ha}),L6=vi({prop:"maxHeight",transform:ha}),O6=vi({prop:"minHeight",transform:ha});vi({prop:"size",cssProperty:"width",transform:ha});vi({prop:"size",cssProperty:"height",transform:ha});const $6=vi({prop:"boxSizing"});Cx(D6,dk,M6,z6,L6,O6,$6);const bd={border:{themeKey:"borders",transform:$a},borderTop:{themeKey:"borders",transform:$a},borderRight:{themeKey:"borders",transform:$a},borderBottom:{themeKey:"borders",transform:$a},borderLeft:{themeKey:"borders",transform:$a},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:$a},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:kx},color:{themeKey:"palette",transform:rf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:rf},backgroundColor:{themeKey:"palette",transform:rf},p:{style:ai},pt:{style:ai},pr:{style:ai},pb:{style:ai},pl:{style:ai},px:{style:ai},py:{style:ai},padding:{style:ai},paddingTop:{style:ai},paddingRight:{style:ai},paddingBottom:{style:ai},paddingLeft:{style:ai},paddingX:{style:ai},paddingY:{style:ai},paddingInline:{style:ai},paddingInlineStart:{style:ai},paddingInlineEnd:{style:ai},paddingBlock:{style:ai},paddingBlockStart:{style:ai},paddingBlockEnd:{style:ai},m:{style:oi},mt:{style:oi},mr:{style:oi},mb:{style:oi},ml:{style:oi},mx:{style:oi},my:{style:oi},margin:{style:oi},marginTop:{style:oi},marginRight:{style:oi},marginBottom:{style:oi},marginLeft:{style:oi},marginX:{style:oi},marginY:{style:oi},marginInline:{style:oi},marginInlineStart:{style:oi},marginInlineEnd:{style:oi},marginBlock:{style:oi},marginBlockStart:{style:oi},marginBlockEnd:{style:oi},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Tx},rowGap:{style:Ix},columnGap:{style:Ex},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ha},maxWidth:{style:dk},minWidth:{transform:ha},height:{transform:ha},maxHeight:{transform:ha},minHeight:{transform:ha},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function B6(...e){const t=e.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function F6(e,t){return typeof e=="function"?e(t):e}function Qz(){function e(r,n,i,l){const h={[r]:n,theme:i},s=l[r];if(!s)return{[r]:n};const{cssProperty:m=r,themeKey:y,transform:S,style:T}=s;if(n==null)return null;if(y==="typography"&&n==="inherit")return{[r]:n};const I=Xc(i,y)||{};return T?T(h):ks(h,n,F=>{let V=t_(I,S,F);return F===V&&typeof F=="string"&&(V=t_(I,S,`${r}${F==="default"?"":xt(F)}`,F)),m===!1?V:{[m]:V}})}function t(r){var n;const{sx:i,theme:l={}}=r||{};if(!i)return null;const h=(n=l.unstable_sxConfig)!=null?n:bd;function s(m){let y=m;if(typeof m=="function")y=m(l);else if(typeof m!="object")return m;if(!y)return null;const S=Kz(l.breakpoints),T=Object.keys(S);let I=S;return Object.keys(y).forEach(D=>{const F=F6(y[D],l);if(F!=null)if(typeof F=="object")if(h[D])I=$m(I,e(D,F,l,h));else{const V=ks({theme:l},F,Z=>({[D]:Z}));B6(V,F)?I[D]=t({sx:F,theme:l}):I=$m(I,V)}else I=$m(I,e(D,F,l,h))}),Xz(T,I)}return Array.isArray(i)?i.map(s):s(i)}return t}const ac=Qz();ac.filterProps=["sx"];function hk(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const N6=["breakpoints","palette","spacing","shape"];function Zg(e={},...t){const{breakpoints:r={},palette:n={},spacing:i,shape:l={}}=e,h=Ht(e,N6),s=ak(r),m=Jz(i);let y=Si({breakpoints:s,direction:"ltr",components:{},palette:K({mode:"light"},n),spacing:m,shape:K({},Jj,l)},h);return y.applyStyles=hk,y=t.reduce((S,T)=>Si(S,T),y),y.unstable_sxConfig=K({},bd,h==null?void 0:h.unstable_sxConfig),y.unstable_sx=function(T){return ac({sx:T,theme:this})},y}const j6=Object.freeze(Object.defineProperty({__proto__:null,default:Zg,private_createBreakpoints:ak,unstable_applyStyles:hk},Symbol.toStringTag,{value:"Module"}));function V6(e){return Object.keys(e).length===0}function eL(e=null){const t=R.useContext(Vf);return!t||V6(t)?e:t}const U6=Zg();function Px(e=U6){return eL(e)}function H6({styles:e,themeId:t,defaultTheme:r={}}){const n=Px(r),i=typeof e=="function"?e(t&&n[t]||n):e;return H.jsx(Om,{styles:i})}const G6=["sx"],W6=e=>{var t,r;const n={systemProps:{},otherProps:{}},i=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:bd;return Object.keys(e).forEach(l=>{i[l]?n.systemProps[l]=e[l]:n.otherProps[l]=e[l]}),n};function Ax(e){const{sx:t}=e,r=Ht(e,G6),{systemProps:n,otherProps:i}=W6(r);let l;return Array.isArray(t)?l=[n,...t]:typeof t=="function"?l=(...h)=>{const s=t(...h);return Bl(s)?K({},n,s):n}:l=K({},n,t),K({},i,{sx:l})}const q6=Object.freeze(Object.defineProperty({__proto__:null,default:ac,extendSxProp:Ax,unstable_createStyleFunctionSx:Qz,unstable_defaultSxConfig:bd},Symbol.toStringTag,{value:"Module"})),vP=e=>e,Z6=()=>{let e=vP;return{configure(t){e=t},generate(t){return e(t)},reset(){e=vP}}},tL=Z6();function rL(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=rL(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Gn(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=rL(e))&&(n&&(n+=" "),n+=t);return n}const K6=["className","component"];function X6(e={}){const{themeId:t,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:i}=e,l=ok("div",{shouldForwardProp:s=>s!=="theme"&&s!=="sx"&&s!=="as"})(ac);return R.forwardRef(function(m,y){const S=Px(r),T=Ax(m),{className:I,component:D="div"}=T,F=Ht(T,K6);return H.jsx(l,K({as:D,ref:y,className:Gn(I,i?i(n):n),theme:t&&S[t]||S},F))})}const nL={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Kg(e,t,r="Mui"){const n=nL[t];return n?`${r}-${n}`:`${tL.generate(e)}-${t}`}function Rx(e,t,r="Mui"){const n={};return t.forEach(i=>{n[i]=Kg(e,i,r)}),n}var iL={exports:{}},En={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fk=Symbol.for("react.transitional.element"),pk=Symbol.for("react.portal"),Dx=Symbol.for("react.fragment"),Mx=Symbol.for("react.strict_mode"),zx=Symbol.for("react.profiler"),Lx=Symbol.for("react.consumer"),Ox=Symbol.for("react.context"),$x=Symbol.for("react.forward_ref"),Bx=Symbol.for("react.suspense"),Fx=Symbol.for("react.suspense_list"),Nx=Symbol.for("react.memo"),jx=Symbol.for("react.lazy"),Y6=Symbol.for("react.offscreen"),J6=Symbol.for("react.client.reference");function Qa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case fk:switch(e=e.type,e){case Dx:case zx:case Mx:case Bx:case Fx:return e;default:switch(e=e&&e.$$typeof,e){case Ox:case $x:case jx:case Nx:return e;case Lx:return e;default:return t}}case pk:return t}}}En.ContextConsumer=Lx;En.ContextProvider=Ox;En.Element=fk;En.ForwardRef=$x;En.Fragment=Dx;En.Lazy=jx;En.Memo=Nx;En.Portal=pk;En.Profiler=zx;En.StrictMode=Mx;En.Suspense=Bx;En.SuspenseList=Fx;En.isContextConsumer=function(e){return Qa(e)===Lx};En.isContextProvider=function(e){return Qa(e)===Ox};En.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===fk};En.isForwardRef=function(e){return Qa(e)===$x};En.isFragment=function(e){return Qa(e)===Dx};En.isLazy=function(e){return Qa(e)===jx};En.isMemo=function(e){return Qa(e)===Nx};En.isPortal=function(e){return Qa(e)===pk};En.isProfiler=function(e){return Qa(e)===zx};En.isStrictMode=function(e){return Qa(e)===Mx};En.isSuspense=function(e){return Qa(e)===Bx};En.isSuspenseList=function(e){return Qa(e)===Fx};En.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Dx||e===zx||e===Mx||e===Bx||e===Fx||e===Y6||typeof e=="object"&&e!==null&&(e.$$typeof===jx||e.$$typeof===Nx||e.$$typeof===Ox||e.$$typeof===Lx||e.$$typeof===$x||e.$$typeof===J6||e.getModuleId!==void 0)};En.typeOf=Qa;iL.exports=En;var yP=iL.exports;const Q6=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function oL(e){const t=`${e}`.match(Q6);return t&&t[1]||""}function aL(e,t=""){return e.displayName||e.name||oL(e)||t}function _P(e,t,r){const n=aL(t);return e.displayName||(n!==""?`${r}(${n})`:r)}function eV(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return aL(e,"Component");if(typeof e=="object")switch(e.$$typeof){case yP.ForwardRef:return _P(e,e.render,"ForwardRef");case yP.Memo:return _P(e,e.type,"memo");default:return}}}const tV=Object.freeze(Object.defineProperty({__proto__:null,default:eV,getFunctionName:oL},Symbol.toStringTag,{value:"Module"})),rV=["ownerState"],nV=["variants"],iV=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function oV(e){return Object.keys(e).length===0}function aV(e){return typeof e=="string"&&e.charCodeAt(0)>96}function rw(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const sV=Zg(),lV=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Fy({defaultTheme:e,theme:t,themeId:r}){return oV(t)?e:t[r]||t}function cV(e){return e?(t,r)=>r[e]:null}function k0(e,t){let{ownerState:r}=t,n=Ht(t,rV);const i=typeof e=="function"?e(K({ownerState:r},n)):e;if(Array.isArray(i))return i.flatMap(l=>k0(l,K({ownerState:r},n)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:l=[]}=i;let s=Ht(i,nV);return l.forEach(m=>{let y=!0;typeof m.props=="function"?y=m.props(K({ownerState:r},n,r)):Object.keys(m.props).forEach(S=>{(r==null?void 0:r[S])!==m.props[S]&&n[S]!==m.props[S]&&(y=!1)}),y&&(Array.isArray(s)||(s=[s]),s.push(typeof m.style=="function"?m.style(K({ownerState:r},n,r)):m.style))}),s}return i}function sL(e={}){const{themeId:t,defaultTheme:r=sV,rootShouldForwardProp:n=rw,slotShouldForwardProp:i=rw}=e,l=h=>ac(K({},h,{theme:Fy(K({},h,{defaultTheme:r,themeId:t}))}));return l.__mui_systemSx=!0,(h,s={})=>{qz(h,j=>j.filter($=>!($!=null&&$.__mui_systemSx)));const{name:m,slot:y,skipVariantsResolver:S,skipSx:T,overridesResolver:I=cV(lV(y))}=s,D=Ht(s,iV),F=S!==void 0?S:y&&y!=="Root"&&y!=="root"||!1,V=T||!1;let Z,z=rw;y==="Root"||y==="root"?z=n:y?z=i:aV(h)&&(z=void 0);const O=ok(h,K({shouldForwardProp:z,label:Z},D)),L=j=>typeof j=="function"&&j.__emotion_real!==j||Bl(j)?$=>k0(j,K({},$,{theme:Fy({theme:$.theme,defaultTheme:r,themeId:t})})):j,te=(j,...$)=>{let J=L(j);const ie=$?$.map(L):[];m&&I&&ie.push(we=>{const Te=Fy(K({},we,{defaultTheme:r,themeId:t}));if(!Te.components||!Te.components[m]||!Te.components[m].styleOverrides)return null;const Pe=Te.components[m].styleOverrides,We={};return Object.entries(Pe).forEach(([De,Se])=>{We[De]=k0(Se,K({},we,{theme:Te}))}),I(we,We)}),m&&!F&&ie.push(we=>{var Te;const Pe=Fy(K({},we,{defaultTheme:r,themeId:t})),We=Pe==null||(Te=Pe.components)==null||(Te=Te[m])==null?void 0:Te.variants;return k0({variants:We},K({},we,{theme:Pe}))}),V||ie.push(l);const xe=ie.length-$.length;if(Array.isArray(j)&&xe>0){const we=new Array(xe).fill("");J=[...j,...we],J.raw=[...j.raw,...we]}const ge=O(J,...ie);return h.muiName&&(ge.muiName=h.muiName),ge};return O.withConfig&&(te.withConfig=O.withConfig),te}}const uV=sL();function r_(e,t){const r=K({},t);return Object.keys(e).forEach(n=>{if(n.toString().match(/^(components|slots)$/))r[n]=K({},e[n],r[n]);else if(n.toString().match(/^(componentsProps|slotProps)$/)){const i=e[n]||{},l=t[n];r[n]={},!l||!Object.keys(l)?r[n]=i:!i||!Object.keys(i)?r[n]=l:(r[n]=K({},l),Object.keys(i).forEach(h=>{r[n][h]=r_(i[h],l[h])}))}else r[n]===void 0&&(r[n]=e[n])}),r}function dV(e){const{theme:t,name:r,props:n}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?n:r_(t.components[r].defaultProps,n)}function lL({props:e,name:t,defaultTheme:r,themeId:n}){let i=Px(r);return n&&(i=i[n]||i),dV({theme:i,name:t,props:e})}const Kl=typeof window<"u"?R.useLayoutEffect:R.useEffect;function hV(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}const fV=Object.freeze(Object.defineProperty({__proto__:null,default:hV},Symbol.toStringTag,{value:"Module"}));function pV(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function cL(e){if(e.type)return e;if(e.charAt(0)==="#")return cL(pV(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(Zl(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(Zl(10,i))}else n=n.split(",");return n=n.map(l=>parseFloat(l)),{type:r,values:n,colorSpace:i}}const ju=e=>{const t=cL(e);return t.values.slice(0,3).map((r,n)=>t.type.indexOf("hsl")!==-1&&n!==0?`${r}%`:r).join(" ")};function xP(...e){return e.reduce((t,r)=>r==null?t:function(...i){t.apply(this,i),r.apply(this,i)},()=>{})}function mV(e,t=166){let r;function n(...i){const l=()=>{e.apply(this,i)};clearTimeout(r),r=setTimeout(l,t)}return n.clear=()=>{clearTimeout(r)},n}function Vx(e,t){var r,n;return R.isValidElement(e)&&t.indexOf((r=e.type.muiName)!=null?r:(n=e.type)==null||(n=n._payload)==null||(n=n.value)==null?void 0:n.muiName)!==-1}function tl(e){return e&&e.ownerDocument||document}function Xg(e){return tl(e).defaultView||window}function n_(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let bP=0;function gV(e){const[t,r]=R.useState(e),n=e||t;return R.useEffect(()=>{t==null&&(bP+=1,r(`mui-${bP}`))},[t]),n}const wP=nC.useId;function ta(e){if(wP!==void 0){const t=wP();return e??t}return gV(e)}function nf({controlled:e,default:t,name:r,state:n="value"}){const{current:i}=R.useRef(e!==void 0),[l,h]=R.useState(t),s=i?e:l,m=R.useCallback(y=>{i||h(y)},[]);return[s,m]}function Bc(e){const t=R.useRef(e);return Kl(()=>{t.current=e}),R.useRef((...r)=>(0,t.current)(...r)).current}function an(...e){return R.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{n_(r,t)})},e)}const SP={};function vV(e,t){const r=R.useRef(SP);return r.current===SP&&(r.current=e(t)),r}const yV=[];function _V(e){R.useEffect(e,yV)}class Yg{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new Yg}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function Tm(){const e=vV(Yg.create).current;return _V(e.disposeEffect),e}let Ux=!0,cC=!1;const xV=new Yg,bV={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function wV(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&bV[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function SV(e){e.metaKey||e.altKey||e.ctrlKey||(Ux=!0)}function nw(){Ux=!1}function CV(){this.visibilityState==="hidden"&&cC&&(Ux=!0)}function kV(e){e.addEventListener("keydown",SV,!0),e.addEventListener("mousedown",nw,!0),e.addEventListener("pointerdown",nw,!0),e.addEventListener("touchstart",nw,!0),e.addEventListener("visibilitychange",CV,!0)}function TV(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return Ux||wV(t)}function mk(){const e=R.useCallback(i=>{i!=null&&kV(i.ownerDocument)},[]),t=R.useRef(!1);function r(){return t.current?(cC=!0,xV.start(100,()=>{cC=!1}),t.current=!1,!0):!1}function n(i){return TV(i)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:n,onBlur:r,ref:e}}function EV(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const IV=e=>{const t=R.useRef({});return R.useEffect(()=>{t.current=e}),t.current},PV={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Nr(e,t,r=void 0){const n={};return Object.keys(e).forEach(i=>{n[i]=e[i].reduce((l,h)=>{if(h){const s=t(h);s!==""&&l.push(s),r&&r[h]&&l.push(r[h])}return l},[]).join(" ")}),n}function AV(e){return typeof e=="string"}function uL(e,t,r){return e===void 0||AV(e)?t:K({},t,{ownerState:K({},t.ownerState,r)})}function Qi(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{r[n]=e[n]}),r}function CP(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function dL(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:i,className:l}=e;if(!t){const D=Gn(r==null?void 0:r.className,l,i==null?void 0:i.className,n==null?void 0:n.className),F=K({},r==null?void 0:r.style,i==null?void 0:i.style,n==null?void 0:n.style),V=K({},r,i,n);return D.length>0&&(V.className=D),Object.keys(F).length>0&&(V.style=F),{props:V,internalRef:void 0}}const h=Qi(K({},i,n)),s=CP(n),m=CP(i),y=t(h),S=Gn(y==null?void 0:y.className,r==null?void 0:r.className,l,i==null?void 0:i.className,n==null?void 0:n.className),T=K({},y==null?void 0:y.style,r==null?void 0:r.style,i==null?void 0:i.style,n==null?void 0:n.style),I=K({},y,r,m,s);return S.length>0&&(I.className=S),Object.keys(T).length>0&&(I.style=T),{props:I,internalRef:y.ref}}function hL(e,t,r){return typeof e=="function"?e(t,r):e}const RV=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function fL(e){var t;const{elementType:r,externalSlotProps:n,ownerState:i,skipResolvingSlotProps:l=!1}=e,h=Ht(e,RV),s=l?{}:hL(n,i),{props:m,internalRef:y}=dL(K({},h,{externalSlotProps:s})),S=an(y,s==null?void 0:s.ref,(t=e.additionalProps)==null?void 0:t.ref);return uL(r,K({},m,{ref:S}),i)}function Jg(e){if(parseInt(R.version,10)>=19){var t;return(e==null||(t=e.props)==null?void 0:t.ref)||null}return(e==null?void 0:e.ref)||null}const pL=R.createContext(null);function gk(){return R.useContext(pL)}const DV=typeof Symbol=="function"&&Symbol.for,MV=DV?Symbol.for("mui.nested"):"__THEME_NESTED__";function zV(e,t){return typeof t=="function"?t(e):K({},e,t)}function LV(e){const{children:t,theme:r}=e,n=gk(),i=R.useMemo(()=>{const l=n===null?r:zV(n,r);return l!=null&&(l[MV]=n!==null),l},[r,n]);return H.jsx(pL.Provider,{value:i,children:t})}const OV=["value"],$V=R.createContext();function BV(e){let{value:t}=e,r=Ht(e,OV);return H.jsx($V.Provider,K({value:t??!0},r))}const mL=R.createContext(void 0);function FV({value:e,children:t}){return H.jsx(mL.Provider,{value:e,children:t})}function NV(e){const{theme:t,name:r,props:n}=e;if(!t||!t.components||!t.components[r])return n;const i=t.components[r];return i.defaultProps?r_(i.defaultProps,n):!i.styleOverrides&&!i.variants?r_(i,n):n}function jV({props:e,name:t}){const r=R.useContext(mL);return NV({props:e,name:t,theme:{components:r}})}const kP={};function TP(e,t,r,n=!1){return R.useMemo(()=>{const i=e&&t[e]||t;if(typeof r=="function"){const l=r(i),h=e?K({},t,{[e]:l}):l;return n?()=>h:h}return e?K({},t,{[e]:r}):K({},t,r)},[e,t,r,n])}function VV(e){const{children:t,theme:r,themeId:n}=e,i=eL(kP),l=gk()||kP,h=TP(n,i,r),s=TP(n,l,r,!0),m=h.direction==="rtl";return H.jsx(LV,{theme:s,children:H.jsx(Vf.Provider,{value:h,children:H.jsx(BV,{value:m,children:H.jsx(FV,{value:h==null?void 0:h.components,children:t})})})})}const vk="mode",yk="color-scheme",gL="data-color-scheme";function UV(e){const{defaultMode:t="light",defaultLightColorScheme:r="light",defaultDarkColorScheme:n="dark",modeStorageKey:i=vk,colorSchemeStorageKey:l=yk,attribute:h=gL,colorSchemeNode:s="document.documentElement",nonce:m}=e||{};return H.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?m:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${i}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${l}-dark') || '${n}';
    } else {
      colorScheme = localStorage.getItem('${l}-light') || '${r}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${l}-light') || '${r}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${l}-dark') || '${n}';
  }
  if (colorScheme) {
    ${s}.setAttribute('${h}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function EP(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function vL(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function HV(e){return vL(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function iw(e,t){if(typeof window>"u")return;let r;try{r=localStorage.getItem(e)||void 0,r||localStorage.setItem(e,t)}catch{}return r||t}function GV(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:n,supportedColorSchemes:i=[],modeStorageKey:l=vk,colorSchemeStorageKey:h=yk,storageWindow:s=typeof window>"u"?void 0:window}=e,m=i.join(","),[y,S]=R.useState(()=>{const Z=iw(l,t),z=iw(`${h}-light`,r),O=iw(`${h}-dark`,n);return{mode:Z,systemMode:EP(Z),lightColorScheme:z,darkColorScheme:O}}),T=HV(y),I=R.useCallback(Z=>{S(z=>{if(Z===z.mode)return z;const O=Z??t;try{localStorage.setItem(l,O)}catch{}return K({},z,{mode:O,systemMode:EP(O)})})},[l,t]),D=R.useCallback(Z=>{Z?typeof Z=="string"?Z&&!m.includes(Z)?console.error(`\`${Z}\` does not exist in \`theme.colorSchemes\`.`):S(z=>{const O=K({},z);return vL(z,L=>{try{localStorage.setItem(`${h}-${L}`,Z)}catch{}L==="light"&&(O.lightColorScheme=Z),L==="dark"&&(O.darkColorScheme=Z)}),O}):S(z=>{const O=K({},z),L=Z.light===null?r:Z.light,te=Z.dark===null?n:Z.dark;if(L)if(!m.includes(L))console.error(`\`${L}\` does not exist in \`theme.colorSchemes\`.`);else{O.lightColorScheme=L;try{localStorage.setItem(`${h}-light`,L)}catch{}}if(te)if(!m.includes(te))console.error(`\`${te}\` does not exist in \`theme.colorSchemes\`.`);else{O.darkColorScheme=te;try{localStorage.setItem(`${h}-dark`,te)}catch{}}return O}):S(z=>{try{localStorage.setItem(`${h}-light`,r),localStorage.setItem(`${h}-dark`,n)}catch{}return K({},z,{lightColorScheme:r,darkColorScheme:n})})},[m,h,r,n]),F=R.useCallback(Z=>{y.mode==="system"&&S(z=>{const O=Z!=null&&Z.matches?"dark":"light";return z.systemMode===O?z:K({},z,{systemMode:O})})},[y.mode]),V=R.useRef(F);return V.current=F,R.useEffect(()=>{const Z=(...O)=>V.current(...O),z=window.matchMedia("(prefers-color-scheme: dark)");return z.addListener(Z),Z(z),()=>{z.removeListener(Z)}},[]),R.useEffect(()=>{if(s){const Z=z=>{const O=z.newValue;typeof z.key=="string"&&z.key.startsWith(h)&&(!O||m.match(O))&&(z.key.endsWith("light")&&D({light:O}),z.key.endsWith("dark")&&D({dark:O})),z.key===l&&(!O||["light","dark","system"].includes(O))&&I(O||t)};return s.addEventListener("storage",Z),()=>{s.removeEventListener("storage",Z)}}},[D,I,l,h,m,t,s]),K({},y,{colorScheme:T,setMode:I,setColorScheme:D})}const WV=["colorSchemes","components","generateCssVars","cssVarPrefix"],qV="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function yL(e){const{themeId:t,theme:r={},attribute:n=gL,modeStorageKey:i=vk,colorSchemeStorageKey:l=yk,defaultMode:h="light",defaultColorScheme:s,disableTransitionOnChange:m=!1,resolveTheme:y,excludeVariablesFromRoot:S}=e;(!r.colorSchemes||typeof s=="string"&&!r.colorSchemes[s]||typeof s=="object"&&!r.colorSchemes[s==null?void 0:s.light]||typeof s=="object"&&!r.colorSchemes[s==null?void 0:s.dark])&&console.error(`MUI: \`${s}\` does not exist in \`theme.colorSchemes\`.`);const T=R.createContext(void 0),I=()=>{const z=R.useContext(T);if(!z)throw new Error(Zl(19));return z};function D(z){const{children:O,theme:L=r,modeStorageKey:te=i,colorSchemeStorageKey:j=l,attribute:$=n,defaultMode:J=h,defaultColorScheme:ie=s,disableTransitionOnChange:xe=m,storageWindow:ge=typeof window>"u"?void 0:window,documentNode:we=typeof document>"u"?void 0:document,colorSchemeNode:Te=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:Pe=":root",disableNestedContext:We=!1,disableStyleSheetGeneration:De=!1}=z,Se=R.useRef(!1),Fe=gk(),Ce=R.useContext(T),Ne=!!Ce&&!We,Ye=L[t],at=Ye||L,{colorSchemes:st={},components:Dt={},generateCssVars:St=()=>({vars:{},css:{}}),cssVarPrefix:$t}=at,Ct=Ht(at,WV),it=Object.keys(st),Ze=typeof ie=="string"?ie:ie.light,rt=typeof ie=="string"?ie:ie.dark,{mode:pt,setMode:sr,systemMode:rr,lightColorScheme:wr,darkColorScheme:Lr,colorScheme:nr,setColorScheme:Et}=GV({supportedColorSchemes:it,defaultLightColorScheme:Ze,defaultDarkColorScheme:rt,modeStorageKey:te,colorSchemeStorageKey:j,defaultMode:J,storageWindow:ge});let hr=pt,Gt=nr;Ne&&(hr=Ce.mode,Gt=Ce.colorScheme);const Dr=hr||(J==="system"?h:J),He=Gt||(Dr==="dark"?rt:Ze),{css:xr,vars:Tr}=St(),Jt=K({},Ct,{components:Dt,colorSchemes:st,cssVarPrefix:$t,vars:Tr,getColorSchemeSelector:Qt=>`[${$}="${Qt}"] &`}),or={},Cr={};Object.entries(st).forEach(([Qt,dr])=>{const{css:tn,vars:je}=St(Qt);Jt.vars=Si(Jt.vars,je),Qt===He&&(Object.keys(dr).forEach(bt=>{dr[bt]&&typeof dr[bt]=="object"?Jt[bt]=K({},Jt[bt],dr[bt]):Jt[bt]=dr[bt]}),Jt.palette&&(Jt.palette.colorScheme=Qt));const kt=typeof ie=="string"?ie:J==="dark"?ie.dark:ie.light;if(Qt===kt){if(S){const bt={};S($t).forEach(Ee=>{bt[Ee]=tn[Ee],delete tn[Ee]}),or[`[${$}="${Qt}"]`]=bt}or[`${Pe}, [${$}="${Qt}"]`]=tn}else Cr[`${Pe===":root"?"":Pe}[${$}="${Qt}"]`]=tn}),Jt.vars=Si(Jt.vars,Tr),R.useEffect(()=>{Gt&&Te&&Te.setAttribute($,Gt)},[Gt,$,Te]),R.useEffect(()=>{let Qt;if(xe&&Se.current&&we){const dr=we.createElement("style");dr.appendChild(we.createTextNode(qV)),we.head.appendChild(dr),window.getComputedStyle(we.body),Qt=setTimeout(()=>{we.head.removeChild(dr)},1)}return()=>{clearTimeout(Qt)}},[Gt,xe,we]),R.useEffect(()=>(Se.current=!0,()=>{Se.current=!1}),[]);const Mr=R.useMemo(()=>({allColorSchemes:it,colorScheme:Gt,darkColorScheme:Lr,lightColorScheme:wr,mode:hr,setColorScheme:Et,setMode:sr,systemMode:rr}),[it,Gt,Lr,wr,hr,Et,sr,rr]);let Sr=!0;(De||Ne&&(Fe==null?void 0:Fe.cssVarPrefix)===$t)&&(Sr=!1);const fr=H.jsxs(R.Fragment,{children:[Sr&&H.jsxs(R.Fragment,{children:[H.jsx(Om,{styles:{[Pe]:xr}}),H.jsx(Om,{styles:or}),H.jsx(Om,{styles:Cr})]}),H.jsx(VV,{themeId:Ye?t:void 0,theme:y?y(Jt):Jt,children:O})]});return Ne?fr:H.jsx(T.Provider,{value:Mr,children:fr})}const F=typeof s=="string"?s:s.light,V=typeof s=="string"?s:s.dark;return{CssVarsProvider:D,useColorScheme:I,getInitColorSchemeScript:z=>UV(K({attribute:n,colorSchemeStorageKey:l,defaultMode:h,defaultLightColorScheme:F,defaultDarkColorScheme:V,modeStorageKey:i},z))}}function Hx(e=""){function t(...n){if(!n.length)return"";const i=n[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...n.slice(1))})`:`, ${i}`}return(n,...i)=>`var(--${e?`${e}-`:""}${n}${t(...i)})`}const IP=(e,t,r,n=[])=>{let i=e;t.forEach((l,h)=>{h===t.length-1?Array.isArray(i)?i[Number(l)]=r:i&&typeof i=="object"&&(i[l]=r):i&&typeof i=="object"&&(i[l]||(i[l]=n.includes(l)?[]:{}),i=i[l])})},ZV=(e,t,r)=>{function n(i,l=[],h=[]){Object.entries(i).forEach(([s,m])=>{(!r||!r([...l,s]))&&m!=null&&(typeof m=="object"&&Object.keys(m).length>0?n(m,[...l,s],Array.isArray(m)?[...h,s]:h):t([...l,s],m,h))})}n(e)},KV=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function ow(e,t){const{prefix:r,shouldSkipGeneratingVar:n}=t||{},i={},l={},h={};return ZV(e,(s,m,y)=>{if((typeof m=="string"||typeof m=="number")&&(!n||!n(s,m))){const S=`--${r?`${r}-`:""}${s.join("-")}`;Object.assign(i,{[S]:KV(s,m)}),IP(l,s,`var(${S})`,y),IP(h,s,`var(${S}, ${m})`,y)}},s=>s[0]==="vars"),{css:i,vars:l,varsWithDefaults:h}}function ng(e){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ng(e)}function XV(e,t){if(ng(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ng(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function YV(e){var t=XV(e,"string");return ng(t)=="symbol"?t:t+""}const JV=["colorSchemes","components","defaultColorScheme"];function _L(e,t){const{colorSchemes:r={},defaultColorScheme:n="light"}=e,i=Ht(e,JV),{vars:l,css:h,varsWithDefaults:s}=ow(i,t);let m=s;const y={},{[n]:S}=r,T=Ht(r,[n].map(YV));if(Object.entries(T||{}).forEach(([D,F])=>{const{vars:V,css:Z,varsWithDefaults:z}=ow(F,t);m=Si(m,z),y[D]={css:Z,vars:V}}),S){const{css:D,vars:F,varsWithDefaults:V}=ow(S,t);m=Si(m,V),y[n]={css:D,vars:F}}return{vars:m,generateCssVars:D=>{var F;if(!D){var V;const z=K({},h);return{css:z,vars:l,selector:(t==null||(V=t.getSelector)==null?void 0:V.call(t,D,z))||":root"}}const Z=K({},y[D].css);return{css:Z,vars:y[D].vars,selector:(t==null||(F=t.getSelector)==null?void 0:F.call(t,D,Z))||":root"}}}}const QV=(e,t)=>e.filter(r=>t.includes(r)),e8=(e,t,r)=>{const n=e.keys[0];Array.isArray(t)?t.forEach((i,l)=>{r((h,s)=>{l<=e.keys.length-1&&(l===0?Object.assign(h,s):h[e.up(e.keys[l])]=s)},i)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:QV(e.keys,Object.keys(t))).forEach(l=>{if(e.keys.indexOf(l)!==-1){const h=t[l];h!==void 0&&r((s,m)=>{n===l?Object.assign(s,m):s[e.up(l)]=m},h)}}):(typeof t=="number"||typeof t=="string")&&r((i,l)=>{Object.assign(i,l)},t)},t8=["component","direction","spacing","divider","children","className","useFlexGap"],r8=Zg(),n8=uV("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function i8(e){return lL({props:e,name:"MuiStack",defaultTheme:r8})}function o8(e,t){const r=R.Children.toArray(e).filter(Boolean);return r.reduce((n,i,l)=>(n.push(i),l<r.length-1&&n.push(R.cloneElement(t,{key:`separator-${l}`})),n),[])}const a8=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],s8=({ownerState:e,theme:t})=>{let r=K({display:"flex",flexDirection:"column"},ks({theme:t},tw({values:e.direction,breakpoints:t.breakpoints.values}),n=>({flexDirection:n})));if(e.spacing){const n=uk(t),i=Object.keys(t.breakpoints.values).reduce((m,y)=>((typeof e.spacing=="object"&&e.spacing[y]!=null||typeof e.direction=="object"&&e.direction[y]!=null)&&(m[y]=!0),m),{}),l=tw({values:e.direction,base:i}),h=tw({values:e.spacing,base:i});typeof l=="object"&&Object.keys(l).forEach((m,y,S)=>{if(!l[m]){const I=y>0?l[S[y-1]]:"column";l[m]=I}}),r=Si(r,ks({theme:t},h,(m,y)=>e.useFlexGap?{gap:sd(n,m)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${a8(y?l[y]:e.direction)}`]:sd(n,m)}}))}return r=Qj(t.breakpoints,r),r};function l8(e={}){const{createStyledComponent:t=n8,useThemeProps:r=i8,componentName:n="MuiStack"}=e,i=()=>Nr({root:["root"]},m=>Kg(n,m),{}),l=t(s8);return R.forwardRef(function(m,y){const S=r(m),T=Ax(S),{component:I="div",direction:D="column",spacing:F=0,divider:V,children:Z,className:z,useFlexGap:O=!1}=T,L=Ht(T,t8),te={direction:D,spacing:F,useFlexGap:O},j=i();return H.jsx(l,K({as:I,ownerState:te,ref:y,className:Gn(j.root,z)},L,{children:V?o8(Z,V):Z}))})}const c8=K({},bd,{borderRadius:{themeKey:"radius"},boxShadow:{themeKey:"shadow"},fontFamily:{themeKey:"fontFamily"},fontSize:{themeKey:"fontSize"},fontWeight:{themeKey:"fontWeight"},letterSpacing:{themeKey:"letterSpacing"},lineHeight:{themeKey:"lineHeight"}});function u8(e){var t;return!!e[0].match(/^(typography|variants|breakpoints)$/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/^(mode)$/))||e[0]==="focus"&&e[1]!=="thickness"}const Zr=(e,t)=>Kg(e,t,"Mui"),Gr=(e,t)=>Rx(e,t,"Mui"),d8=e=>e&&typeof e=="object"&&Object.keys(e).some(t=>{var r;return(r=t.match)==null?void 0:r.call(t,/^(plain(Hover|Active|Disabled)?(Color|Bg)|outlined(Hover|Active|Disabled)?(Color|Border|Bg)|soft(Hover|Active|Disabled)?(Color|Bg)|solid(Hover|Active|Disabled)?(Color|Bg))$/)}),PP=(e,t,r)=>{t.includes("Color")&&(e.color=r),t.includes("Bg")&&(e.backgroundColor=r),t.includes("Border")&&(e.borderColor=r)},AP=(e,t,r)=>{const n={};return Object.entries(t||{}).forEach(([i,l])=>{if(i.match(new RegExp(`${e}(color|bg|border)`,"i"))&&l){const h=r?r(i):l;i.includes("Disabled")&&(n.pointerEvents="none",n.cursor="default",n["--Icon-color"]="currentColor"),i.match(/(Hover|Active|Disabled)/)||(n["--variant-borderWidth"]||(n["--variant-borderWidth"]="0px"),i.includes("Border")&&(n["--variant-borderWidth"]="1px",n.border="var(--variant-borderWidth) solid")),PP(n,i,h)}}),n},ho=(e,t)=>{let r={};{const{getCssVar:n,palette:i}=t;Object.entries(i).forEach(l=>{const[h,s]=l;d8(s)&&typeof s=="object"&&(r=K({},r,{[h]:AP(e,s,m=>`var(--variant-${m}, ${n(`palette-${h}-${m}`,i[h][m])})`)}))})}return r.context=AP(e,{plainColor:"var(--variant-plainColor)",plainHoverColor:"var(--variant-plainHoverColor)",plainHoverBg:"var(--variant-plainHoverBg)",plainActiveBg:"var(--variant-plainActiveBg)",plainDisabledColor:"var(--variant-plainDisabledColor)",outlinedColor:"var(--variant-outlinedColor)",outlinedBorder:"var(--variant-outlinedBorder)",outlinedHoverColor:"var(--variant-outlinedHoverColor)",outlinedHoverBorder:"var(--variant-outlinedHoverBorder)",outlinedHoverBg:"var(--variant-outlinedHoverBg)",outlinedActiveBg:"var(--variant-outlinedActiveBg)",outlinedDisabledColor:"var(--variant-outlinedDisabledColor)",outlinedDisabledBorder:"var(--variant-outlinedDisabledBorder)",softColor:"var(--variant-softColor)",softBg:"var(--variant-softBg)",softHoverColor:"var(--variant-softHoverColor)",softHoverBg:"var(--variant-softHoverBg)",softActiveBg:"var(--variant-softActiveBg)",softDisabledColor:"var(--variant-softDisabledColor)",softDisabledBg:"var(--variant-softDisabledBg)",solidColor:"var(--variant-solidColor)",solidBg:"var(--variant-solidBg)",solidHoverBg:"var(--variant-solidHoverBg)",solidActiveBg:"var(--variant-solidActiveBg)",solidDisabledColor:"var(--variant-solidDisabledColor)",solidDisabledBg:"var(--variant-solidDisabledBg)"}),r},h8=["cssVarPrefix","breakpoints","spacing","components","variants","shouldSkipGeneratingVar"],f8=["colorSchemes"],p8=(e="joy")=>Hx(e);function xL(e){var t,r,n,i,l,h,s,m,y,S;const T=e||{},{cssVarPrefix:I="joy",breakpoints:D,spacing:F,components:V,variants:Z,shouldSkipGeneratingVar:z=u8}=T,O=Ht(T,h8),L=p8(I),te={primary:nm.blue,neutral:nm.grey,danger:nm.red,success:nm.green,warning:nm.yellow,common:{white:"#FFF",black:"#000"}},j=Ze=>{var rt;const pt=Ze.split("-"),sr=pt[1],rr=pt[2];return L(Ze,(rt=te[sr])==null?void 0:rt[rr])},$=Ze=>({plainColor:j(`palette-${Ze}-500`),plainHoverBg:j(`palette-${Ze}-100`),plainActiveBg:j(`palette-${Ze}-200`),plainDisabledColor:j("palette-neutral-400"),outlinedColor:j(`palette-${Ze}-500`),outlinedBorder:j(`palette-${Ze}-300`),outlinedHoverBg:j(`palette-${Ze}-100`),outlinedActiveBg:j(`palette-${Ze}-200`),outlinedDisabledColor:j("palette-neutral-400"),outlinedDisabledBorder:j("palette-neutral-200"),softColor:j(`palette-${Ze}-700`),softBg:j(`palette-${Ze}-100`),softHoverBg:j(`palette-${Ze}-200`),softActiveColor:j(`palette-${Ze}-800`),softActiveBg:j(`palette-${Ze}-300`),softDisabledColor:j("palette-neutral-400"),softDisabledBg:j("palette-neutral-50"),solidColor:j("palette-common-white"),solidBg:j(`palette-${Ze}-500`),solidHoverBg:j(`palette-${Ze}-600`),solidActiveBg:j(`palette-${Ze}-700`),solidDisabledColor:j("palette-neutral-400"),solidDisabledBg:j("palette-neutral-100")}),J=Ze=>({plainColor:j(`palette-${Ze}-300`),plainHoverBg:j(`palette-${Ze}-800`),plainActiveBg:j(`palette-${Ze}-700`),plainDisabledColor:j("palette-neutral-500"),outlinedColor:j(`palette-${Ze}-200`),outlinedBorder:j(`palette-${Ze}-700`),outlinedHoverBg:j(`palette-${Ze}-800`),outlinedActiveBg:j(`palette-${Ze}-700`),outlinedDisabledColor:j("palette-neutral-500"),outlinedDisabledBorder:j("palette-neutral-800"),softColor:j(`palette-${Ze}-200`),softBg:j(`palette-${Ze}-800`),softHoverBg:j(`palette-${Ze}-700`),softActiveColor:j(`palette-${Ze}-100`),softActiveBg:j(`palette-${Ze}-600`),softDisabledColor:j("palette-neutral-500"),softDisabledBg:j("palette-neutral-800"),solidColor:j("palette-common-white"),solidBg:j(`palette-${Ze}-500`),solidHoverBg:j(`palette-${Ze}-600`),solidActiveBg:j(`palette-${Ze}-700`),solidDisabledColor:j("palette-neutral-500"),solidDisabledBg:j("palette-neutral-800")}),ie={palette:{mode:"light",primary:K({},te.primary,$("primary")),neutral:K({},te.neutral,$("neutral"),{plainColor:j("palette-neutral-700"),plainHoverColor:j("palette-neutral-900"),outlinedColor:j("palette-neutral-700")}),danger:K({},te.danger,$("danger")),success:K({},te.success,$("success")),warning:K({},te.warning,$("warning")),common:{white:"#FFF",black:"#000"},text:{primary:j("palette-neutral-800"),secondary:j("palette-neutral-700"),tertiary:j("palette-neutral-600"),icon:j("palette-neutral-500")},background:{body:j("palette-common-white"),surface:j("palette-neutral-50"),popup:j("palette-common-white"),level1:j("palette-neutral-100"),level2:j("palette-neutral-200"),level3:j("palette-neutral-300"),tooltip:j("palette-neutral-500"),backdrop:`rgba(${L("palette-neutral-darkChannel",ju(te.neutral[900]))} / 0.25)`},divider:`rgba(${L("palette-neutral-mainChannel",ju(te.neutral[500]))} / 0.2)`,focusVisible:j("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"21 21 21",shadowOpacity:"0.08"},xe={palette:{mode:"dark",primary:K({},te.primary,J("primary")),neutral:K({},te.neutral,J("neutral"),{plainColor:j("palette-neutral-300"),plainHoverColor:j("palette-neutral-300")}),danger:K({},te.danger,J("danger")),success:K({},te.success,J("success")),warning:K({},te.warning,J("warning")),common:{white:"#FFF",black:"#000"},text:{primary:j("palette-neutral-100"),secondary:j("palette-neutral-300"),tertiary:j("palette-neutral-400"),icon:j("palette-neutral-400")},background:{body:j("palette-common-black"),surface:j("palette-neutral-900"),popup:j("palette-common-black"),level1:j("palette-neutral-800"),level2:j("palette-neutral-700"),level3:j("palette-neutral-600"),tooltip:j("palette-neutral-600"),backdrop:`rgba(${L("palette-neutral-darkChannel",ju(te.neutral[50]))} / 0.25)`},divider:`rgba(${L("palette-neutral-mainChannel",ju(te.neutral[500]))} / 0.16)`,focusVisible:j("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"0 0 0",shadowOpacity:"0.6"},ge='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',we=K({body:`"Inter", ${L(`fontFamily-fallback, ${ge}`)}`,display:`"Inter", ${L(`fontFamily-fallback, ${ge}`)}`,code:"Source Code Pro,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace",fallback:ge},O.fontFamily),Te=K({sm:300,md:500,lg:600,xl:700},O.fontWeight),Pe=K({xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem",xl2:"1.5rem",xl3:"1.875rem",xl4:"2.25rem"},O.fontSize),We=K({xs:"1.33334",sm:"1.42858",md:"1.5",lg:"1.55556",xl:"1.66667"},O.lineHeight),De=(t=(r=O.colorSchemes)==null||(r=r.light)==null?void 0:r.shadowRing)!=null?t:ie.shadowRing,Se=(n=(i=O.colorSchemes)==null||(i=i.light)==null?void 0:i.shadowChannel)!=null?n:ie.shadowChannel,Fe=(l=(h=O.colorSchemes)==null||(h=h.light)==null?void 0:h.shadowOpacity)!=null?l:ie.shadowOpacity,Ce={colorSchemes:{light:ie,dark:xe},fontSize:Pe,fontFamily:we,fontWeight:Te,focus:{thickness:"2px",selector:`&.${Zr("","focusVisible")}, &:focus-visible`,default:{outlineOffset:`var(--focus-outline-offset, ${L("focus-thickness",(s=(m=O.focus)==null?void 0:m.thickness)!=null?s:"2px")})`,outline:`${L("focus-thickness",(y=(S=O.focus)==null?void 0:S.thickness)!=null?y:"2px")} solid ${L("palette-focusVisible",te.primary[500])}`}},lineHeight:We,radius:{xs:"2px",sm:"6px",md:"8px",lg:"12px",xl:"16px"},shadow:{xs:`${L("shadowRing",De)}, 0px 1px 2px 0px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)})`,sm:`${L("shadowRing",De)}, 0px 1px 2px 0px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)}), 0px 2px 4px 0px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)})`,md:`${L("shadowRing",De)}, 0px 2px 8px -2px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)}), 0px 6px 12px -2px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)})`,lg:`${L("shadowRing",De)}, 0px 2px 8px -2px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)}), 0px 12px 16px -4px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)})`,xl:`${L("shadowRing",De)}, 0px 2px 8px -2px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)}), 0px 20px 24px -4px rgba(${L("shadowChannel",Se)} / ${L("shadowOpacity",Fe)})`},zIndex:{badge:1,table:10,popup:1e3,modal:1300,snackbar:1400,tooltip:1500},typography:{h1:{fontFamily:L(`fontFamily-display, ${we.display}`),fontWeight:L(`fontWeight-xl, ${Te.xl}`),fontSize:L(`fontSize-xl4, ${Pe.xl4}`),lineHeight:L(`lineHeight-xs, ${We.xs}`),letterSpacing:"-0.025em",color:L(`palette-text-primary, ${ie.palette.text.primary}`)},h2:{fontFamily:L(`fontFamily-display, ${we.display}`),fontWeight:L(`fontWeight-xl, ${Te.xl}`),fontSize:L(`fontSize-xl3, ${Pe.xl3}`),lineHeight:L(`lineHeight-xs, ${We.xs}`),letterSpacing:"-0.025em",color:L(`palette-text-primary, ${ie.palette.text.primary}`)},h3:{fontFamily:L(`fontFamily-display, ${we.display}`),fontWeight:L(`fontWeight-lg, ${Te.lg}`),fontSize:L(`fontSize-xl2, ${Pe.xl2}`),lineHeight:L(`lineHeight-xs, ${We.xs}`),letterSpacing:"-0.025em",color:L(`palette-text-primary, ${ie.palette.text.primary}`)},h4:{fontFamily:L(`fontFamily-display, ${we.display}`),fontWeight:L(`fontWeight-lg, ${Te.lg}`),fontSize:L(`fontSize-xl, ${Pe.xl}`),lineHeight:L(`lineHeight-md, ${We.md}`),letterSpacing:"-0.025em",color:L(`palette-text-primary, ${ie.palette.text.primary}`)},"title-lg":{fontFamily:L(`fontFamily-body, ${we.body}`),fontWeight:L(`fontWeight-lg, ${Te.lg}`),fontSize:L(`fontSize-lg, ${Pe.lg}`),lineHeight:L(`lineHeight-xs, ${We.xs}`),color:L(`palette-text-primary, ${ie.palette.text.primary}`)},"title-md":{fontFamily:L(`fontFamily-body, ${we.body}`),fontWeight:L(`fontWeight-md, ${Te.md}`),fontSize:L(`fontSize-md, ${Pe.md}`),lineHeight:L(`lineHeight-md, ${We.md}`),color:L(`palette-text-primary, ${ie.palette.text.primary}`)},"title-sm":{fontFamily:L(`fontFamily-body, ${we.body}`),fontWeight:L(`fontWeight-md, ${Te.md}`),fontSize:L(`fontSize-sm, ${Pe.sm}`),lineHeight:L(`lineHeight-sm, ${We.sm}`),color:L(`palette-text-primary, ${ie.palette.text.primary}`)},"body-lg":{fontFamily:L(`fontFamily-body, ${we.body}`),fontSize:L(`fontSize-lg, ${Pe.lg}`),lineHeight:L(`lineHeight-md, ${We.md}`),color:L(`palette-text-secondary, ${ie.palette.text.secondary}`)},"body-md":{fontFamily:L(`fontFamily-body, ${we.body}`),fontSize:L(`fontSize-md, ${Pe.md}`),lineHeight:L(`lineHeight-md, ${We.md}`),color:L(`palette-text-secondary, ${ie.palette.text.secondary}`)},"body-sm":{fontFamily:L(`fontFamily-body, ${we.body}`),fontSize:L(`fontSize-sm, ${Pe.sm}`),lineHeight:L(`lineHeight-md, ${We.md}`),color:L(`palette-text-tertiary, ${ie.palette.text.tertiary}`)},"body-xs":{fontFamily:L(`fontFamily-body, ${we.body}`),fontWeight:L(`fontWeight-md, ${Te.md}`),fontSize:L(`fontSize-xs, ${Pe.xs}`),lineHeight:L(`lineHeight-md, ${We.md}`),color:L(`palette-text-tertiary, ${ie.palette.text.tertiary}`)}}},Ne=O?Si(Ce,O):Ce,{colorSchemes:Ye}=Ne,at=Ht(Ne,f8),st=K({colorSchemes:Ye},at,{breakpoints:ak(D??{}),components:Si({MuiSvgIcon:{defaultProps:{fontSize:"xl2"},styleOverrides:{root:({ownerState:Ze,theme:rt})=>{var pt;const sr=Ze.instanceFontSize;return K({margin:"var(--Icon-margin)"},Ze.fontSize&&Ze.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${rt.vars.fontSize[Ze.fontSize]})`},!Ze.htmlColor&&K({color:`var(--Icon-color, ${st.vars.palette.text.icon})`},Ze.color&&Ze.color!=="inherit"&&rt.vars.palette[Ze.color]&&{color:`rgba(${(pt=rt.vars.palette[Ze.color])==null?void 0:pt.mainChannel} / 1)`}),sr&&sr!=="inherit"&&{"--Icon-fontSize":rt.vars.fontSize[sr]})}}}},V),cssVarPrefix:I,getCssVar:L,spacing:Jz(F)});function Dt(Ze,rt){Object.keys(rt).forEach(pt=>{const sr={main:"500",light:"200",dark:"700"};Ze==="dark"&&(sr.main=400),!rt[pt].mainChannel&&rt[pt][sr.main]&&(rt[pt].mainChannel=ju(rt[pt][sr.main])),!rt[pt].lightChannel&&rt[pt][sr.light]&&(rt[pt].lightChannel=ju(rt[pt][sr.light])),!rt[pt].darkChannel&&rt[pt][sr.dark]&&(rt[pt].darkChannel=ju(rt[pt][sr.dark]))})}Object.entries(st.colorSchemes).forEach(([Ze,rt])=>{Dt(Ze,rt.palette)});const St={prefix:I,shouldSkipGeneratingVar:z},{vars:$t,generateCssVars:Ct}=_L(K({colorSchemes:Ye},at),St);st.vars=$t,st.generateCssVars=Ct,st.unstable_sxConfig=K({},c8,e==null?void 0:e.unstable_sxConfig),st.unstable_sx=function(rt){return ac({sx:rt,theme:this})},st.getColorSchemeSelector=Ze=>Ze==="light"?"&":`&[data-joy-color-scheme="${Ze}"], [data-joy-color-scheme="${Ze}"] &`;const it={getCssVar:L,palette:st.colorSchemes.light.palette};return st.variants=Si({plain:ho("plain",it),plainHover:ho("plainHover",it),plainActive:ho("plainActive",it),plainDisabled:ho("plainDisabled",it),outlined:ho("outlined",it),outlinedHover:ho("outlinedHover",it),outlinedActive:ho("outlinedActive",it),outlinedDisabled:ho("outlinedDisabled",it),soft:ho("soft",it),softHover:ho("softHover",it),softActive:ho("softActive",it),softDisabled:ho("softDisabled",it),solid:ho("solid",it),solidHover:ho("solidHover",it),solidActive:ho("solidActive",it),solidDisabled:ho("solidDisabled",it)},Z),st.palette=K({},st.colorSchemes.light.palette,{colorScheme:"light"}),st.shouldSkipGeneratingVar=z,st.applyStyles=hk,st}const Uf=xL(),om={attribute:"data-joy-color-scheme",colorSchemeStorageKey:"joy-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"joy-mode"},{CssVarsProvider:m8,useColorScheme:_k,getInitColorSchemeScript:Ade}=yL({themeId:Gg,theme:Uf,attribute:om.attribute,modeStorageKey:om.modeStorageKey,colorSchemeStorageKey:om.colorSchemeStorageKey,defaultColorScheme:{light:om.defaultLightColorScheme,dark:om.defaultDarkColorScheme}}),ft=sL({defaultTheme:Uf,themeId:Gg});function Kr({props:e,name:t}){return lL({props:e,name:t,defaultTheme:K({},Uf,{components:{}}),themeId:Gg})}function g8(e){return H.jsx(H6,K({},e,{defaultTheme:Uf,themeId:Gg}))}function RP(e,t,r=(n,i)=>n===i){return e.length===t.length&&e.every((n,i)=>r(n,t[i]))}const v8={disableDefaultClasses:!1},y8=R.createContext(v8);function _8(e){const{disableDefaultClasses:t}=R.useContext(y8);return r=>t?"":e(r)}function x8(e){const{rootElementName:t="",componentName:r}=e,[n,i]=R.useState(t.toUpperCase()),l=R.useCallback(h=>{var s;i((s=h==null?void 0:h.tagName)!=null?s:"")},[]);return[n,l]}const bL="base";function b8(e){return`${bL}--${e}`}function w8(e,t){return`${bL}-${e}-${t}`}function wL(e,t){const r=nL[t];return r?b8(r):w8(e,t)}function S8(e,t){const r={};return t.forEach(n=>{r[n]=wL(e,n)}),r}function Rs(e={}){const{disabled:t=!1,focusableWhenDisabled:r,href:n,rootRef:i,tabIndex:l,to:h,type:s,rootElementName:m}=e,y=R.useRef(null),[S,T]=R.useState(!1),{isFocusVisibleRef:I,onFocus:D,onBlur:F,ref:V}=mk(),[Z,z]=R.useState(!1);t&&!r&&Z&&z(!1),R.useEffect(()=>{I.current=Z},[Z,I]);const[O,L]=x8({rootElementName:m??(n||h?"a":void 0),componentName:"Button"}),te=De=>Se=>{var Fe;Z&&Se.preventDefault(),(Fe=De.onMouseLeave)==null||Fe.call(De,Se)},j=De=>Se=>{var Fe;F(Se),I.current===!1&&z(!1),(Fe=De.onBlur)==null||Fe.call(De,Se)},$=De=>Se=>{var Fe;if(y.current||(y.current=Se.currentTarget),D(Se),I.current===!0){var Ce;z(!0),(Ce=De.onFocusVisible)==null||Ce.call(De,Se)}(Fe=De.onFocus)==null||Fe.call(De,Se)},J=()=>{const De=y.current;return O==="BUTTON"||O==="INPUT"&&["button","submit","reset"].includes(De==null?void 0:De.type)||O==="A"&&(De==null?void 0:De.href)},ie=De=>Se=>{if(!t){var Fe;(Fe=De.onClick)==null||Fe.call(De,Se)}},xe=De=>Se=>{var Fe;t||(T(!0),document.addEventListener("mouseup",()=>{T(!1)},{once:!0})),(Fe=De.onMouseDown)==null||Fe.call(De,Se)},ge=De=>Se=>{var Fe;if((Fe=De.onKeyDown)==null||Fe.call(De,Se),!Se.defaultMuiPrevented&&(Se.target===Se.currentTarget&&!J()&&Se.key===" "&&Se.preventDefault(),Se.target===Se.currentTarget&&Se.key===" "&&!t&&T(!0),Se.target===Se.currentTarget&&!J()&&Se.key==="Enter"&&!t)){var Ce;(Ce=De.onClick)==null||Ce.call(De,Se),Se.preventDefault()}},we=De=>Se=>{var Fe;if(Se.target===Se.currentTarget&&T(!1),(Fe=De.onKeyUp)==null||Fe.call(De,Se),Se.target===Se.currentTarget&&!J()&&!t&&Se.key===" "&&!Se.defaultMuiPrevented){var Ce;(Ce=De.onClick)==null||Ce.call(De,Se)}},Te=an(L,i,V,y),Pe={};return l!==void 0&&(Pe.tabIndex=l),O==="BUTTON"?(Pe.type=s??"button",r?Pe["aria-disabled"]=t:Pe.disabled=t):O==="INPUT"?s&&["button","submit","reset"].includes(s)&&(r?Pe["aria-disabled"]=t:Pe.disabled=t):O!==""&&(!n&&!h&&(Pe.role="button",Pe.tabIndex=l??0),t&&(Pe["aria-disabled"]=t,Pe.tabIndex=r?l??0:-1)),{getRootProps:(De={})=>{const Se=K({},Qi(e),Qi(De)),Fe=K({type:s},Se,Pe,De,{onBlur:j(Se),onClick:ie(Se),onFocus:$(Se),onKeyDown:ge(Se),onKeyUp:we(Se),onMouseDown:xe(Se),onMouseLeave:te(Se),ref:Te});return delete Fe.onFocusVisible,Fe},focusVisible:Z,setFocusVisible:z,active:S,rootRef:Te}}const Gx=R.createContext(null);function C8(e,t){return e===t}const aw={},DP=()=>{};function uC(e,t){const r=K({},e);return Object.keys(t).forEach(n=>{t[n]!==void 0&&(r[n]=t[n])}),r}function k8(e){const{nextState:t,initialState:r,stateComparers:n,onStateChange:i,controlledProps:l,lastActionRef:h}=e,s=R.useRef(r);R.useEffect(()=>{if(h.current===null)return;const m=uC(s.current,l);Object.keys(t).forEach(y=>{var S;const T=(S=n[y])!=null?S:C8,I=t[y],D=m[y];if(D==null&&I!=null||D!=null&&I==null||D!=null&&I!=null&&!T(I,D)){var F,V;i==null||i((F=h.current.event)!=null?F:null,y,I,(V=h.current.type)!=null?V:"",t)}}),s.current=t,h.current=null},[s,t,h,i,n,l])}function SL(e){const t=R.useRef(null),{reducer:r,initialState:n,controlledProps:i=aw,stateComparers:l=aw,onStateChange:h=DP,actionContext:s,componentName:m=""}=e;R.useRef(i);const y=R.useCallback((D,F)=>{t.current=F;const V=uC(D,i);return r(V,F)},[i,r]),[S,T]=R.useReducer(y,n),I=R.useCallback(D=>{T(K({},D,{context:s}))},[s]);return k8({nextState:S,initialState:n,stateComparers:l??aw,onStateChange:h??DP,controlledProps:i,lastActionRef:t}),[uC(S,i),I]}const vs={blur:"dropdown:blur",escapeKeyDown:"dropdown:escapeKeyDown",toggle:"dropdown:toggle",open:"dropdown:open",close:"dropdown:close"};function T8(e,t){switch(t.type){case vs.blur:return{open:!1,changeReason:t.event};case vs.escapeKeyDown:return{open:!1,changeReason:t.event};case vs.toggle:return{open:!e.open,changeReason:t.event};case vs.open:return{open:!0,changeReason:t.event};case vs.close:return{open:!1,changeReason:t.event};default:throw new Error("Unhandled action")}}function E8(e={}){const{defaultOpen:t,onOpenChange:r,open:n,componentName:i="useDropdown"}=e,[l,h]=R.useState(""),[s,m]=R.useState(null),y=R.useRef(null),S=R.useCallback((V,Z,z,O)=>{Z==="open"&&(r==null||r(V,z)),y.current=O},[r]),T=R.useMemo(()=>n!==void 0?{open:n}:{},[n]),[I,D]=SL({controlledProps:T,initialState:t?{open:!0,changeReason:null}:{open:!1,changeReason:null},onStateChange:S,reducer:T8,componentName:i});return R.useEffect(()=>{!I.open&&y.current!==null&&y.current!==vs.blur&&(s==null||s.focus())},[I.open,s]),{contextValue:{state:I,dispatch:D,popupId:l,registerPopup:h,registerTrigger:m,triggerElement:s},open:I.open}}function I8(e){const{children:t,open:r,defaultOpen:n,onOpenChange:i}=e,{contextValue:l}=E8({defaultOpen:n,onOpenChange:i,open:r});return H.jsx(Gx.Provider,{value:l,children:t})}const P8=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function A8(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function R8(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=n=>e.ownerDocument.querySelector(`input[type="radio"]${n}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function D8(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||R8(e))}function M8(e){const t=[],r=[];return Array.from(e.querySelectorAll(P8)).forEach((n,i)=>{const l=A8(n);l===-1||!D8(n)||(l===0?t.push(n):r.push({documentOrder:i,tabIndex:l,node:n}))}),r.sort((n,i)=>n.tabIndex===i.tabIndex?n.documentOrder-i.documentOrder:n.tabIndex-i.tabIndex).map(n=>n.node).concat(t)}function z8(){return!0}function L8(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:n=!1,disableRestoreFocus:i=!1,getTabbable:l=M8,isEnabled:h=z8,open:s}=e,m=R.useRef(!1),y=R.useRef(null),S=R.useRef(null),T=R.useRef(null),I=R.useRef(null),D=R.useRef(!1),F=R.useRef(null),V=an(Jg(t),F),Z=R.useRef(null);R.useEffect(()=>{!s||!F.current||(D.current=!r)},[r,s]),R.useEffect(()=>{if(!s||!F.current)return;const L=tl(F.current);return F.current.contains(L.activeElement)||(F.current.hasAttribute("tabIndex")||F.current.setAttribute("tabIndex","-1"),D.current&&F.current.focus()),()=>{i||(T.current&&T.current.focus&&(m.current=!0,T.current.focus()),T.current=null)}},[s]),R.useEffect(()=>{if(!s||!F.current)return;const L=tl(F.current),te=J=>{Z.current=J,!(n||!h()||J.key!=="Tab")&&L.activeElement===F.current&&J.shiftKey&&(m.current=!0,S.current&&S.current.focus())},j=()=>{const J=F.current;if(J===null)return;if(!L.hasFocus()||!h()||m.current){m.current=!1;return}if(J.contains(L.activeElement)||n&&L.activeElement!==y.current&&L.activeElement!==S.current)return;if(L.activeElement!==I.current)I.current=null;else if(I.current!==null)return;if(!D.current)return;let ie=[];if((L.activeElement===y.current||L.activeElement===S.current)&&(ie=l(F.current)),ie.length>0){var xe,ge;const we=!!((xe=Z.current)!=null&&xe.shiftKey&&((ge=Z.current)==null?void 0:ge.key)==="Tab"),Te=ie[0],Pe=ie[ie.length-1];typeof Te!="string"&&typeof Pe!="string"&&(we?Pe.focus():Te.focus())}else J.focus()};L.addEventListener("focusin",j),L.addEventListener("keydown",te,!0);const $=setInterval(()=>{L.activeElement&&L.activeElement.tagName==="BODY"&&j()},50);return()=>{clearInterval($),L.removeEventListener("focusin",j),L.removeEventListener("keydown",te,!0)}},[r,n,i,h,s,l]);const z=L=>{T.current===null&&(T.current=L.relatedTarget),D.current=!0,I.current=L.target;const te=t.props.onFocus;te&&te(L)},O=L=>{T.current===null&&(T.current=L.relatedTarget),D.current=!0};return H.jsxs(R.Fragment,{children:[H.jsx("div",{tabIndex:s?0:-1,onFocus:O,ref:y,"data-testid":"sentinelStart"}),R.cloneElement(t,{ref:V,onFocus:z}),H.jsx("div",{tabIndex:s?0:-1,onFocus:O,ref:S,"data-testid":"sentinelEnd"})]})}const O8=R.createContext(void 0);function $8(){return R.useContext(O8)}function B8(e={}){const{defaultValue:t,disabled:r=!1,error:n=!1,onBlur:i,onChange:l,onFocus:h,required:s=!1,value:m,inputRef:y}=e,S=$8();let T,I,D,F,V;if(S){var Z,z,O;T=void 0,I=(Z=S.disabled)!=null?Z:!1,D=(z=S.error)!=null?z:!1,F=(O=S.required)!=null?O:!1,V=S.value}else T=t,I=r,D=n,F=s,V=m;const{current:L}=R.useRef(V!=null),te=R.useCallback(De=>{},[]),j=R.useRef(null),$=an(j,y,te),[J,ie]=R.useState(!1);R.useEffect(()=>{!S&&I&&J&&(ie(!1),i==null||i())},[S,I,J,i]);const xe=De=>Se=>{var Fe;if(S!=null&&S.disabled){Se.stopPropagation();return}if((Fe=De.onFocus)==null||Fe.call(De,Se),S&&S.onFocus){var Ce;S==null||(Ce=S.onFocus)==null||Ce.call(S)}else ie(!0)},ge=De=>Se=>{var Fe;(Fe=De.onBlur)==null||Fe.call(De,Se),S&&S.onBlur?S.onBlur():ie(!1)},we=De=>(Se,...Fe)=>{var Ce,Ne;if(!L&&(Se.target||j.current)==null)throw new Error(Zl(17));S==null||(Ce=S.onChange)==null||Ce.call(S,Se),(Ne=De.onChange)==null||Ne.call(De,Se,...Fe)},Te=De=>Se=>{var Fe;j.current&&Se.currentTarget===Se.target&&j.current.focus(),(Fe=De.onClick)==null||Fe.call(De,Se)};return{disabled:I,error:D,focused:J,formControlContext:S,getInputProps:(De={})=>{const Fe=K({},{onBlur:i,onChange:l,onFocus:h},Qi(De)),Ce=K({},Fe,{onBlur:ge(Fe),onChange:we(Fe),onFocus:xe(Fe)});return K({},Ce,{"aria-invalid":D||void 0,defaultValue:T,value:V,required:F,disabled:I},De,{ref:$},Ce)},getRootProps:(De={})=>{const Se=Qi(e,["onBlur","onChange","onFocus"]),Fe=K({},Se,Qi(De));return K({},De,Fe,{onClick:Te(Fe)})},inputRef:$,required:F,value:V}}const wn={blur:"list:blur",focus:"list:focus",itemClick:"list:itemClick",itemHover:"list:itemHover",itemsChange:"list:itemsChange",keyDown:"list:keyDown",resetHighlight:"list:resetHighlight",highlightLast:"list:highlightLast",textNavigation:"list:textNavigation",clearSelection:"list:clearSelection"};function F8(e,t,r,n,i,l){if(r.length===0||!n&&r.every((s,m)=>i(s,m)))return-1;let h=e;for(;;){if(!l&&t==="next"&&h===r.length||!l&&t==="previous"&&h===-1)return-1;if(n?!1:i(r[h],h))h+=t==="next"?1:-1,l&&(h=(h+r.length)%r.length);else return h}}function Li(e,t,r){var n;const{items:i,isItemDisabled:l,disableListWrap:h,disabledItemsFocusable:s,itemComparer:m,focusManagement:y}=r,S=y==="DOM"?0:-1,T=i.length-1,I=e==null?-1:i.findIndex(z=>m(z,e));let D,F,V=!h;switch(t){case"reset":if(S===-1)return null;D=0,F="next",V=!1;break;case"start":D=0,F="next",V=!1;break;case"end":D=T,F="previous",V=!1;break;default:{const z=I+t;z<0?!V&&I!==-1||Math.abs(t)>1?(D=0,F="next"):(D=T,F="previous"):z>T?!V||Math.abs(t)>1?(D=T,F="previous"):(D=0,F="next"):(D=z,F=t>=0?"next":"previous")}}const Z=F8(D,F,i,s,l,V);return Z===-1&&e!==null&&!l(e,I)?e:(n=i[Z])!=null?n:null}function N8(e,t,r,n){return r==="none"?[]:r==="single"?n(t[0],e)?t:[e]:t.some(i=>n(i,e))?t.filter(i=>!n(i,e)):[...t,e]}function xk(e,t,r){const{itemComparer:n,isItemDisabled:i,selectionMode:l,items:h}=r,{selectedValues:s}=t,m=h.findIndex(S=>n(e,S));if(i(e,m))return t;const y=N8(e,s,l,n);return K({},t,{selectedValues:y,highlightedValue:e})}function j8(e,t,r){const n=t.highlightedValue,{orientation:i,pageSize:l}=r;switch(e){case"Home":return K({},t,{highlightedValue:Li(n,"start",r)});case"End":return K({},t,{highlightedValue:Li(n,"end",r)});case"PageUp":return K({},t,{highlightedValue:Li(n,-l,r)});case"PageDown":return K({},t,{highlightedValue:Li(n,l,r)});case"ArrowUp":if(i!=="vertical")break;return K({},t,{highlightedValue:Li(n,-1,r)});case"ArrowDown":if(i!=="vertical")break;return K({},t,{highlightedValue:Li(n,1,r)});case"ArrowLeft":{if(i==="vertical")break;return K({},t,{highlightedValue:Li(n,i==="horizontal-ltr"?-1:1,r)})}case"ArrowRight":{if(i==="vertical")break;return K({},t,{highlightedValue:Li(n,i==="horizontal-ltr"?1:-1,r)})}case"Enter":case" ":return t.highlightedValue===null?t:xk(t.highlightedValue,t,r)}return t}function V8(e,t){return t.focusManagement==="DOM"?e:K({},e,{highlightedValue:null})}function U8(e,t,r){var n;const i=(n=r(e))==null?void 0:n.trim().toLowerCase();return!i||i.length===0?!1:i.indexOf(t)===0}function H8(e,t,r){const{items:n,isItemDisabled:i,disabledItemsFocusable:l,getItemAsString:h}=r,s=t.length>1;let m=s?e.highlightedValue:Li(e.highlightedValue,1,r);for(let y=0;y<n.length;y+=1){if(!m||!s&&e.highlightedValue===m)return e;if(U8(m,t,h)&&(!i(m,n.indexOf(m))||l))return K({},e,{highlightedValue:m});m=Li(m,1,r)}return e}function G8(e,t,r,n){var i;const{itemComparer:l,focusManagement:h}=n;let s=null;if(r.highlightedValue!=null){var m;s=(m=e.find(T=>l(T,r.highlightedValue)))!=null?m:null}else h==="DOM"&&t.length===0&&(s=Li(null,"reset",n));const S=((i=r.selectedValues)!=null?i:[]).filter(T=>e.some(I=>l(I,T)));return K({},r,{highlightedValue:s,selectedValues:S})}function W8(e,t){return K({},e,{highlightedValue:Li(null,"reset",t)})}function q8(e,t){return K({},e,{highlightedValue:Li(null,"end",t)})}function Z8(e,t){return K({},e,{selectedValues:[],highlightedValue:Li(null,"reset",t)})}function Wx(e,t){const{type:r,context:n}=t;switch(r){case wn.keyDown:return j8(t.key,e,n);case wn.itemClick:return xk(t.item,e,n);case wn.blur:return V8(e,n);case wn.textNavigation:return H8(e,t.searchString,n);case wn.itemsChange:return G8(t.items,t.previousItems,e,n);case wn.resetHighlight:return W8(e,n);case wn.highlightLast:return q8(e,n);case wn.clearSelection:return Z8(e,n);default:return e}}const K8=500;function X8(e){const t=R.useRef({searchString:"",lastTime:null});return R.useCallback(r=>{if(r.key.length===1&&r.key!==" "){const n=t.current,i=r.key.toLowerCase(),l=performance.now();n.searchString.length>0&&n.lastTime&&l-n.lastTime>K8?n.searchString=i:(n.searchString.length!==1||i!==n.searchString)&&(n.searchString+=i),n.lastTime=l,e(n.searchString,r)}},[e])}const MP={},Y8=()=>{},J8=(e,t)=>e===t,Q8=()=>!1,eU=e=>typeof e=="string"?e:String(e),tU=()=>({highlightedValue:null,selectedValues:[]});function bk(e){const{controlledProps:t=MP,disabledItemsFocusable:r=!1,disableListWrap:n=!1,focusManagement:i="activeDescendant",getInitialState:l=tU,getItemDomElement:h,getItemId:s,isItemDisabled:m=Q8,rootRef:y,onStateChange:S=Y8,items:T,itemComparer:I=J8,getItemAsString:D=eU,onChange:F,onHighlightChange:V,onItemsChange:Z,orientation:z="vertical",pageSize:O=5,reducerActionContext:L=MP,selectionMode:te="single",stateReducer:j,componentName:$="useList"}=e,J=R.useRef(null),ie=an(y,J),xe=R.useCallback((it,Ze,rt)=>{if(V==null||V(it,Ze,rt),i==="DOM"&&Ze!=null&&(rt===wn.itemClick||rt===wn.keyDown||rt===wn.textNavigation)){var pt;h==null||(pt=h(Ze))==null||pt.focus()}},[h,V,i]),ge=R.useMemo(()=>({highlightedValue:I,selectedValues:(it,Ze)=>RP(it,Ze,I)}),[I]),we=R.useCallback((it,Ze,rt,pt,sr)=>{switch(S==null||S(it,Ze,rt,pt,sr),Ze){case"highlightedValue":xe(it,rt,pt);break;case"selectedValues":F==null||F(it,rt,pt);break}},[xe,F,S]),Te=R.useMemo(()=>({disabledItemsFocusable:r,disableListWrap:n,focusManagement:i,isItemDisabled:m,itemComparer:I,items:T,getItemAsString:D,onHighlightChange:xe,orientation:z,pageSize:O,selectionMode:te,stateComparers:ge}),[r,n,i,m,I,T,D,xe,z,O,te,ge]),Pe=l(),We=j??Wx,De=R.useMemo(()=>K({},L,Te),[L,Te]),[Se,Fe]=SL({reducer:We,actionContext:De,initialState:Pe,controlledProps:t,stateComparers:ge,onStateChange:we,componentName:$}),{highlightedValue:Ce,selectedValues:Ne}=Se,Ye=X8((it,Ze)=>Fe({type:wn.textNavigation,event:Ze,searchString:it})),at=R.useRef([]);R.useEffect(()=>{RP(at.current,T,I)||(Fe({type:wn.itemsChange,event:null,items:T,previousItems:at.current}),at.current=T,Z==null||Z(T))},[T,I,Fe,Z]);const st=it=>Ze=>{var rt;if((rt=it.onKeyDown)==null||rt.call(it,Ze),Ze.defaultMuiPrevented)return;const pt=["Home","End","PageUp","PageDown"];z==="vertical"?pt.push("ArrowUp","ArrowDown"):pt.push("ArrowLeft","ArrowRight"),i==="activeDescendant"&&pt.push(" ","Enter"),pt.includes(Ze.key)&&Ze.preventDefault(),Fe({type:wn.keyDown,key:Ze.key,event:Ze}),Ye(Ze)},Dt=it=>Ze=>{var rt,pt;(rt=it.onBlur)==null||rt.call(it,Ze),!Ze.defaultMuiPrevented&&((pt=J.current)!=null&&pt.contains(Ze.relatedTarget)||Fe({type:wn.blur,event:Ze}))},St=(it={})=>{const Ze=Qi(it);return K({},it,{"aria-activedescendant":i==="activeDescendant"&&Ce!=null?s(Ce):void 0,tabIndex:i==="DOM"?-1:0,ref:ie},Ze,{onBlur:Dt(Ze),onKeyDown:st(Ze)})},$t=R.useCallback(it=>{const Ze=(Ne??[]).some(sr=>sr!=null&&I(it,sr)),rt=Ce!=null&&I(it,Ce);return{focusable:i==="DOM",highlighted:rt,selected:Ze}},[I,Ne,Ce,i]),Ct=R.useMemo(()=>({dispatch:Fe,getItemState:$t}),[Fe,$t]);return R.useDebugValue({state:Se}),{contextValue:Ct,dispatch:Fe,getRootProps:St,rootRef:ie,state:Se}}const lu=R.createContext(null);function wk(e){const{handlePointerOverEvents:t=!1,item:r}=e,n=R.useContext(lu);if(!n)throw new Error("useListItem must be used within a ListProvider");const{dispatch:i,getItemState:l}=n,{highlighted:h,selected:s,focusable:m}=l(r),y=R.useCallback(D=>F=>{var V;(V=D.onClick)==null||V.call(D,F),!F.defaultPrevented&&i({type:wn.itemClick,item:r,event:F})},[i,r]),S=R.useCallback(D=>F=>{var V;(V=D.onMouseOver)==null||V.call(D,F),!F.defaultPrevented&&i({type:wn.itemHover,item:r,event:F})},[i,r]);let T;return m&&(T=h?0:-1),{getRootProps:(D={})=>{const F=Qi(D);return K({},D,{onClick:y(F),onPointerOver:t?S(F):void 0,tabIndex:T})},highlighted:h,selected:s}}function rU(e,t){if(t.type===wn.itemHover)return K({},e,{highlightedValue:t.item});const r=Wx(e,t);if(r.highlightedValue===null&&t.context.items.length>0)return K({},r,{highlightedValue:t.context.items[0]});if(t.type===wn.keyDown&&t.event.key==="Escape")return K({},r,{open:!1});if(t.type===wn.blur){var n;if(!((n=t.context.listboxRef.current)!=null&&n.contains(t.event.relatedTarget))){var i,l;const h=(i=t.context.listboxRef.current)==null?void 0:i.getAttribute("id"),s=(l=t.event.relatedTarget)==null?void 0:l.getAttribute("aria-controls");return h&&s&&h===s?r:K({},r,{open:!1,highlightedValue:t.context.items[0]})}}return r}const Qg=R.createContext(null);function nU(e){const t=Array.from(e.keys()).map(r=>{const n=e.get(r);return{key:r,subitem:n}});return t.sort((r,n)=>{const i=r.subitem.ref.current,l=n.subitem.ref.current;return i===null||l===null||i===l?0:i.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}),new Map(t.map(r=>[r.key,r.subitem]))}function qx(){const[e,t]=R.useState(new Map),r=R.useRef(new Set),n=R.useCallback(function(y){r.current.delete(y),t(S=>{const T=new Map(S);return T.delete(y),T})},[]),i=R.useCallback(function(y,S){let T;return typeof y=="function"?T=y(r.current):T=y,r.current.add(T),t(I=>{const D=new Map(I);return D.set(T,S),D}),{id:T,deregister:()=>n(T)}},[n]),l=R.useMemo(()=>nU(e),[e]),h=R.useCallback(function(y){return Array.from(l.keys()).indexOf(y)},[l]);return{contextValue:R.useMemo(()=>({getItemIndex:h,registerItem:i,totalSubitemCount:e.size}),[h,i,e.size]),subitems:l}}function Zx(e,t){const r=R.useContext(Qg);if(r===null)throw new Error("useCompoundItem must be used within a useCompoundParent");const{registerItem:n}=r,[i,l]=R.useState(typeof e=="function"?void 0:e);return Kl(()=>{const{id:h,deregister:s}=n(e,t);return l(h),s},[n,t,e]),{id:i,index:i!==void 0?r.getItemIndex(i):-1,totalItemCount:r.totalSubitemCount}}function Xl(e,t){return function(n={}){const i=K({},n,e(n));return K({},i,t(i))}}const iU={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function oU(e={}){var t,r;const{listboxRef:n,onItemsChange:i,id:l,disabledItemsFocusable:h=!0,disableListWrap:s=!1,autoFocus:m=!0,componentName:y="useMenu"}=e,S=R.useRef(null),T=an(S,n),I=(t=ta(l))!=null?t:"",{state:{open:D,changeReason:F},dispatch:V,triggerElement:Z,registerPopup:z}=(r=R.useContext(Gx))!=null?r:iU,O=R.useRef(D),{subitems:L,contextValue:te}=qx(),j=R.useMemo(()=>Array.from(L.keys()),[L]),$=R.useCallback(Ne=>{var Ye,at;return Ne==null?null:(Ye=(at=L.get(Ne))==null?void 0:at.ref.current)!=null?Ye:null},[L]),J=R.useCallback(Ne=>{var Ye;return(L==null||(Ye=L.get(Ne))==null?void 0:Ye.disabled)||!1},[L]),ie=R.useCallback(Ne=>{var Ye,at;return((Ye=L.get(Ne))==null?void 0:Ye.label)||((at=L.get(Ne))==null||(at=at.ref.current)==null?void 0:at.innerText)},[L]),xe=R.useMemo(()=>({listboxRef:S}),[S]),{dispatch:ge,getRootProps:we,contextValue:Te,state:{highlightedValue:Pe},rootRef:We}=bk({disabledItemsFocusable:h,disableListWrap:s,focusManagement:"DOM",getItemDomElement:$,getInitialState:()=>({selectedValues:[],highlightedValue:null}),isItemDisabled:J,items:j,getItemAsString:ie,rootRef:T,onItemsChange:i,reducerActionContext:xe,selectionMode:"none",stateReducer:rU,componentName:y});Kl(()=>{z(I)},[I,z]),Kl(()=>{D&&(F==null?void 0:F.type)==="keydown"&&F.key==="ArrowUp"&&ge({type:wn.highlightLast,event:F})},[D,F,ge]),R.useEffect(()=>{if(D&&m&&Pe&&!O.current){var Ne;(Ne=L.get(Pe))==null||(Ne=Ne.ref)==null||(Ne=Ne.current)==null||Ne.focus()}},[D,m,Pe,L,j]),R.useEffect(()=>{var Ne;if((Ne=S.current)!=null&&Ne.contains(document.activeElement)&&Pe!==null){var Ye;L==null||(Ye=L.get(Pe))==null||(Ye=Ye.ref.current)==null||Ye.focus()}},[Pe,L]);const De=Ne=>Ye=>{var at,st;(at=Ne.onBlur)==null||at.call(Ne,Ye),!Ye.defaultMuiPrevented&&((st=S.current)!=null&&st.contains(Ye.relatedTarget)||Ye.relatedTarget===Z||V({type:vs.blur,event:Ye}))},Se=Ne=>Ye=>{var at;(at=Ne.onKeyDown)==null||at.call(Ne,Ye),!Ye.defaultMuiPrevented&&Ye.key==="Escape"&&V({type:vs.escapeKeyDown,event:Ye})},Fe=(Ne={})=>({onBlur:De(Ne),onKeyDown:Se(Ne)}),Ce=(Ne={})=>{const Ye=Xl(Fe,we),at=Qi(Ne);return K({},Ne,at,Ye(at),{id:I,role:"menu"})};return R.useDebugValue({subitems:L,highlightedValue:Pe}),{contextValue:K({},te,Te),dispatch:ge,getListboxProps:Ce,highlightedValue:Pe,listboxRef:We,menuItems:L,open:D,triggerElement:Z}}function aU(e){const{value:t,children:r}=e,{dispatch:n,getItemIndex:i,getItemState:l,registerItem:h,totalSubitemCount:s}=t,m=R.useMemo(()=>({dispatch:n,getItemState:l,getItemIndex:i}),[n,i,l]),y=R.useMemo(()=>({getItemIndex:i,registerItem:h,totalSubitemCount:s}),[h,i,s]);return H.jsx(Qg.Provider,{value:y,children:H.jsx(lu.Provider,{value:m,children:r})})}var CL={exports:{}},Ca={},kL={exports:{}},TL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ce,Ne){var Ye=Ce.length;Ce.push(Ne);e:for(;0<Ye;){var at=Ye-1>>>1,st=Ce[at];if(0<i(st,Ne))Ce[at]=Ne,Ce[Ye]=st,Ye=at;else break e}}function r(Ce){return Ce.length===0?null:Ce[0]}function n(Ce){if(Ce.length===0)return null;var Ne=Ce[0],Ye=Ce.pop();if(Ye!==Ne){Ce[0]=Ye;e:for(var at=0,st=Ce.length,Dt=st>>>1;at<Dt;){var St=2*(at+1)-1,$t=Ce[St],Ct=St+1,it=Ce[Ct];if(0>i($t,Ye))Ct<st&&0>i(it,$t)?(Ce[at]=it,Ce[Ct]=Ye,at=Ct):(Ce[at]=$t,Ce[St]=Ye,at=St);else if(Ct<st&&0>i(it,Ye))Ce[at]=it,Ce[Ct]=Ye,at=Ct;else break e}}return Ne}function i(Ce,Ne){var Ye=Ce.sortIndex-Ne.sortIndex;return Ye!==0?Ye:Ce.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var h=Date,s=h.now();e.unstable_now=function(){return h.now()-s}}var m=[],y=[],S=1,T=null,I=3,D=!1,F=!1,V=!1,Z=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(Ce){for(var Ne=r(y);Ne!==null;){if(Ne.callback===null)n(y);else if(Ne.startTime<=Ce)n(y),Ne.sortIndex=Ne.expirationTime,t(m,Ne);else break;Ne=r(y)}}function te(Ce){if(V=!1,L(Ce),!F)if(r(m)!==null)F=!0,Se(j);else{var Ne=r(y);Ne!==null&&Fe(te,Ne.startTime-Ce)}}function j(Ce,Ne){F=!1,V&&(V=!1,z(ie),ie=-1),D=!0;var Ye=I;try{for(L(Ne),T=r(m);T!==null&&(!(T.expirationTime>Ne)||Ce&&!we());){var at=T.callback;if(typeof at=="function"){T.callback=null,I=T.priorityLevel;var st=at(T.expirationTime<=Ne);Ne=e.unstable_now(),typeof st=="function"?T.callback=st:T===r(m)&&n(m),L(Ne)}else n(m);T=r(m)}if(T!==null)var Dt=!0;else{var St=r(y);St!==null&&Fe(te,St.startTime-Ne),Dt=!1}return Dt}finally{T=null,I=Ye,D=!1}}var $=!1,J=null,ie=-1,xe=5,ge=-1;function we(){return!(e.unstable_now()-ge<xe)}function Te(){if(J!==null){var Ce=e.unstable_now();ge=Ce;var Ne=!0;try{Ne=J(!0,Ce)}finally{Ne?Pe():($=!1,J=null)}}else $=!1}var Pe;if(typeof O=="function")Pe=function(){O(Te)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,De=We.port2;We.port1.onmessage=Te,Pe=function(){De.postMessage(null)}}else Pe=function(){Z(Te,0)};function Se(Ce){J=Ce,$||($=!0,Pe())}function Fe(Ce,Ne){ie=Z(function(){Ce(e.unstable_now())},Ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ce){Ce.callback=null},e.unstable_continueExecution=function(){F||D||(F=!0,Se(j))},e.unstable_forceFrameRate=function(Ce){0>Ce||125<Ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<Ce?Math.floor(1e3/Ce):5},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return r(m)},e.unstable_next=function(Ce){switch(I){case 1:case 2:case 3:var Ne=3;break;default:Ne=I}var Ye=I;I=Ne;try{return Ce()}finally{I=Ye}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ce,Ne){switch(Ce){case 1:case 2:case 3:case 4:case 5:break;default:Ce=3}var Ye=I;I=Ce;try{return Ne()}finally{I=Ye}},e.unstable_scheduleCallback=function(Ce,Ne,Ye){var at=e.unstable_now();switch(typeof Ye=="object"&&Ye!==null?(Ye=Ye.delay,Ye=typeof Ye=="number"&&0<Ye?at+Ye:at):Ye=at,Ce){case 1:var st=-1;break;case 2:st=250;break;case 5:st=1073741823;break;case 4:st=1e4;break;default:st=5e3}return st=Ye+st,Ce={id:S++,callback:Ne,priorityLevel:Ce,startTime:Ye,expirationTime:st,sortIndex:-1},Ye>at?(Ce.sortIndex=Ye,t(y,Ce),r(m)===null&&Ce===r(y)&&(V?(z(ie),ie=-1):V=!0,Fe(te,Ye-at))):(Ce.sortIndex=st,t(m,Ce),F||D||(F=!0,Se(j))),Ce},e.unstable_shouldYield=we,e.unstable_wrapCallback=function(Ce){var Ne=I;return function(){var Ye=I;I=Ne;try{return Ce.apply(this,arguments)}finally{I=Ye}}}})(TL);kL.exports=TL;var sU=kL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lU=R,ba=sU;function _t(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var EL=new Set,ig={};function wd(e,t){gf(e,t),gf(e+"Capture",t)}function gf(e,t){for(ig[e]=t,e=0;e<t.length;e++)EL.add(t[e])}var Yl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dC=Object.prototype.hasOwnProperty,cU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zP={},LP={};function uU(e){return dC.call(LP,e)?!0:dC.call(zP,e)?!1:cU.test(e)?LP[e]=!0:(zP[e]=!0,!1)}function dU(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function hU(e,t,r,n){if(t===null||typeof t>"u"||dU(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Bo(e,t,r,n,i,l,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=h}var to={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){to[e]=new Bo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];to[t]=new Bo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){to[e]=new Bo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){to[e]=new Bo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){to[e]=new Bo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){to[e]=new Bo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){to[e]=new Bo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){to[e]=new Bo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){to[e]=new Bo(e,5,!1,e.toLowerCase(),null,!1,!1)});var Sk=/[\-:]([a-z])/g;function Ck(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Sk,Ck);to[t]=new Bo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Sk,Ck);to[t]=new Bo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Sk,Ck);to[t]=new Bo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){to[e]=new Bo(e,1,!1,e.toLowerCase(),null,!1,!1)});to.xlinkHref=new Bo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){to[e]=new Bo(e,1,!1,e.toLowerCase(),null,!0,!0)});function kk(e,t,r,n){var i=to.hasOwnProperty(t)?to[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(hU(t,r,i,n)&&(r=null),n||i===null?uU(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var sc=lU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ny=Symbol.for("react.element"),Bh=Symbol.for("react.portal"),Fh=Symbol.for("react.fragment"),Tk=Symbol.for("react.strict_mode"),hC=Symbol.for("react.profiler"),IL=Symbol.for("react.provider"),PL=Symbol.for("react.context"),Ek=Symbol.for("react.forward_ref"),fC=Symbol.for("react.suspense"),pC=Symbol.for("react.suspense_list"),Ik=Symbol.for("react.memo"),Dc=Symbol.for("react.lazy"),AL=Symbol.for("react.offscreen"),OP=Symbol.iterator;function am(e){return e===null||typeof e!="object"?null:(e=OP&&e[OP]||e["@@iterator"],typeof e=="function"?e:null)}var ti=Object.assign,sw;function Em(e){if(sw===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);sw=t&&t[1]||""}return`
`+sw+e}var lw=!1;function cw(e,t){if(!e||lw)return"";lw=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var n=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){n=y}e.call(t.prototype)}else{try{throw Error()}catch(y){n=y}e()}}catch(y){if(y&&n&&typeof y.stack=="string"){for(var i=y.stack.split(`
`),l=n.stack.split(`
`),h=i.length-1,s=l.length-1;1<=h&&0<=s&&i[h]!==l[s];)s--;for(;1<=h&&0<=s;h--,s--)if(i[h]!==l[s]){if(h!==1||s!==1)do if(h--,s--,0>s||i[h]!==l[s]){var m=`
`+i[h].replace(" at new "," at ");return e.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",e.displayName)),m}while(1<=h&&0<=s);break}}}finally{lw=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Em(e):""}function fU(e){switch(e.tag){case 5:return Em(e.type);case 16:return Em("Lazy");case 13:return Em("Suspense");case 19:return Em("SuspenseList");case 0:case 2:case 15:return e=cw(e.type,!1),e;case 11:return e=cw(e.type.render,!1),e;case 1:return e=cw(e.type,!0),e;default:return""}}function mC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fh:return"Fragment";case Bh:return"Portal";case hC:return"Profiler";case Tk:return"StrictMode";case fC:return"Suspense";case pC:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case PL:return(e.displayName||"Context")+".Consumer";case IL:return(e._context.displayName||"Context")+".Provider";case Ek:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ik:return t=e.displayName||null,t!==null?t:mC(e.type)||"Memo";case Dc:t=e._payload,e=e._init;try{return mC(e(t))}catch{}}return null}function pU(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mC(t);case 8:return t===Tk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function RL(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function mU(e){var t=RL(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(h){n=""+h,l.call(this,h)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jy(e){e._valueTracker||(e._valueTracker=mU(e))}function DL(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=RL(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function i_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function gC(e,t){var r=t.checked;return ti({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function $P(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Yc(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ML(e,t){t=t.checked,t!=null&&kk(e,"checked",t,!1)}function vC(e,t){ML(e,t);var r=Yc(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yC(e,t.type,r):t.hasOwnProperty("defaultValue")&&yC(e,t.type,Yc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function BP(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function yC(e,t,r){(t!=="number"||i_(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Im=Array.isArray;function of(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Yc(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function _C(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_t(91));return ti({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function FP(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(_t(92));if(Im(r)){if(1<r.length)throw Error(_t(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Yc(r)}}function zL(e,t){var r=Yc(t.value),n=Yc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function NP(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function LL(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xC(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?LL(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vy,OL=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vy=Vy||document.createElement("div"),Vy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function og(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Bm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gU=["Webkit","ms","Moz","O"];Object.keys(Bm).forEach(function(e){gU.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bm[t]=Bm[e]})});function $L(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Bm.hasOwnProperty(e)&&Bm[e]?(""+t).trim():t+"px"}function BL(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=$L(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var vU=ti({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bC(e,t){if(t){if(vU[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_t(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_t(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_t(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_t(62))}}function wC(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var SC=null;function Pk(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var CC=null,af=null,sf=null;function jP(e){if(e=rv(e)){if(typeof CC!="function")throw Error(_t(280));var t=e.stateNode;t&&(t=Qx(t),CC(e.stateNode,e.type,t))}}function FL(e){af?sf?sf.push(e):sf=[e]:af=e}function NL(){if(af){var e=af,t=sf;if(sf=af=null,jP(e),t)for(e=0;e<t.length;e++)jP(t[e])}}function jL(e,t){return e(t)}function VL(){}var uw=!1;function UL(e,t,r){if(uw)return e(t,r);uw=!0;try{return jL(e,t,r)}finally{uw=!1,(af!==null||sf!==null)&&(VL(),NL())}}function ag(e,t){var r=e.stateNode;if(r===null)return null;var n=Qx(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(_t(231,t,typeof r));return r}var kC=!1;if(Yl)try{var sm={};Object.defineProperty(sm,"passive",{get:function(){kC=!0}}),window.addEventListener("test",sm,sm),window.removeEventListener("test",sm,sm)}catch{kC=!1}function yU(e,t,r,n,i,l,h,s,m){var y=Array.prototype.slice.call(arguments,3);try{t.apply(r,y)}catch(S){this.onError(S)}}var Fm=!1,o_=null,a_=!1,TC=null,_U={onError:function(e){Fm=!0,o_=e}};function xU(e,t,r,n,i,l,h,s,m){Fm=!1,o_=null,yU.apply(_U,arguments)}function bU(e,t,r,n,i,l,h,s,m){if(xU.apply(this,arguments),Fm){if(Fm){var y=o_;Fm=!1,o_=null}else throw Error(_t(198));a_||(a_=!0,TC=y)}}function Sd(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function HL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function VP(e){if(Sd(e)!==e)throw Error(_t(188))}function wU(e){var t=e.alternate;if(!t){if(t=Sd(e),t===null)throw Error(_t(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var l=i.alternate;if(l===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===r)return VP(i),e;if(l===n)return VP(i),t;l=l.sibling}throw Error(_t(188))}if(r.return!==n.return)r=i,n=l;else{for(var h=!1,s=i.child;s;){if(s===r){h=!0,r=i,n=l;break}if(s===n){h=!0,n=i,r=l;break}s=s.sibling}if(!h){for(s=l.child;s;){if(s===r){h=!0,r=l,n=i;break}if(s===n){h=!0,n=l,r=i;break}s=s.sibling}if(!h)throw Error(_t(189))}}if(r.alternate!==n)throw Error(_t(190))}if(r.tag!==3)throw Error(_t(188));return r.stateNode.current===r?e:t}function GL(e){return e=wU(e),e!==null?WL(e):null}function WL(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=WL(e);if(t!==null)return t;e=e.sibling}return null}var qL=ba.unstable_scheduleCallback,UP=ba.unstable_cancelCallback,SU=ba.unstable_shouldYield,CU=ba.unstable_requestPaint,gi=ba.unstable_now,kU=ba.unstable_getCurrentPriorityLevel,Ak=ba.unstable_ImmediatePriority,ZL=ba.unstable_UserBlockingPriority,s_=ba.unstable_NormalPriority,TU=ba.unstable_LowPriority,KL=ba.unstable_IdlePriority,Kx=null,rl=null;function EU(e){if(rl&&typeof rl.onCommitFiberRoot=="function")try{rl.onCommitFiberRoot(Kx,e,void 0,(e.current.flags&128)===128)}catch{}}var xs=Math.clz32?Math.clz32:AU,IU=Math.log,PU=Math.LN2;function AU(e){return e>>>=0,e===0?32:31-(IU(e)/PU|0)|0}var Uy=64,Hy=4194304;function Pm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function l_(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,l=e.pingedLanes,h=r&268435455;if(h!==0){var s=h&~i;s!==0?n=Pm(s):(l&=h,l!==0&&(n=Pm(l)))}else h=r&~i,h!==0?n=Pm(h):l!==0&&(n=Pm(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,l=t&-t,i>=l||i===16&&(l&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-xs(t),i=1<<r,n|=e[r],t&=~i;return n}function RU(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DU(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,l=e.pendingLanes;0<l;){var h=31-xs(l),s=1<<h,m=i[h];m===-1?(!(s&r)||s&n)&&(i[h]=RU(s,t)):m<=t&&(e.expiredLanes|=s),l&=~s}}function EC(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function XL(){var e=Uy;return Uy<<=1,!(Uy&4194240)&&(Uy=64),e}function dw(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ev(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xs(t),e[t]=r}function MU(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-xs(r),l=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~l}}function Rk(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-xs(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var vn=0;function YL(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var JL,Dk,QL,eO,tO,IC=!1,Gy=[],Vc=null,Uc=null,Hc=null,sg=new Map,lg=new Map,zc=[],zU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function HP(e,t){switch(e){case"focusin":case"focusout":Vc=null;break;case"dragenter":case"dragleave":Uc=null;break;case"mouseover":case"mouseout":Hc=null;break;case"pointerover":case"pointerout":sg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lg.delete(t.pointerId)}}function lm(e,t,r,n,i,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[i]},t!==null&&(t=rv(t),t!==null&&Dk(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function LU(e,t,r,n,i){switch(t){case"focusin":return Vc=lm(Vc,e,t,r,n,i),!0;case"dragenter":return Uc=lm(Uc,e,t,r,n,i),!0;case"mouseover":return Hc=lm(Hc,e,t,r,n,i),!0;case"pointerover":var l=i.pointerId;return sg.set(l,lm(sg.get(l)||null,e,t,r,n,i)),!0;case"gotpointercapture":return l=i.pointerId,lg.set(l,lm(lg.get(l)||null,e,t,r,n,i)),!0}return!1}function rO(e){var t=Xu(e.target);if(t!==null){var r=Sd(t);if(r!==null){if(t=r.tag,t===13){if(t=HL(r),t!==null){e.blockedOn=t,tO(e.priority,function(){QL(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function T0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=PC(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);SC=n,r.target.dispatchEvent(n),SC=null}else return t=rv(r),t!==null&&Dk(t),e.blockedOn=r,!1;t.shift()}return!0}function GP(e,t,r){T0(e)&&r.delete(t)}function OU(){IC=!1,Vc!==null&&T0(Vc)&&(Vc=null),Uc!==null&&T0(Uc)&&(Uc=null),Hc!==null&&T0(Hc)&&(Hc=null),sg.forEach(GP),lg.forEach(GP)}function cm(e,t){e.blockedOn===t&&(e.blockedOn=null,IC||(IC=!0,ba.unstable_scheduleCallback(ba.unstable_NormalPriority,OU)))}function cg(e){function t(i){return cm(i,e)}if(0<Gy.length){cm(Gy[0],e);for(var r=1;r<Gy.length;r++){var n=Gy[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Vc!==null&&cm(Vc,e),Uc!==null&&cm(Uc,e),Hc!==null&&cm(Hc,e),sg.forEach(t),lg.forEach(t),r=0;r<zc.length;r++)n=zc[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<zc.length&&(r=zc[0],r.blockedOn===null);)rO(r),r.blockedOn===null&&zc.shift()}var lf=sc.ReactCurrentBatchConfig,c_=!0;function $U(e,t,r,n){var i=vn,l=lf.transition;lf.transition=null;try{vn=1,Mk(e,t,r,n)}finally{vn=i,lf.transition=l}}function BU(e,t,r,n){var i=vn,l=lf.transition;lf.transition=null;try{vn=4,Mk(e,t,r,n)}finally{vn=i,lf.transition=l}}function Mk(e,t,r,n){if(c_){var i=PC(e,t,r,n);if(i===null)bw(e,t,n,u_,r),HP(e,n);else if(LU(i,e,t,r,n))n.stopPropagation();else if(HP(e,n),t&4&&-1<zU.indexOf(e)){for(;i!==null;){var l=rv(i);if(l!==null&&JL(l),l=PC(e,t,r,n),l===null&&bw(e,t,n,u_,r),l===i)break;i=l}i!==null&&n.stopPropagation()}else bw(e,t,n,null,r)}}var u_=null;function PC(e,t,r,n){if(u_=null,e=Pk(n),e=Xu(e),e!==null)if(t=Sd(e),t===null)e=null;else if(r=t.tag,r===13){if(e=HL(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return u_=e,null}function nO(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kU()){case Ak:return 1;case ZL:return 4;case s_:case TU:return 16;case KL:return 536870912;default:return 16}default:return 16}}var Fc=null,zk=null,E0=null;function iO(){if(E0)return E0;var e,t=zk,r=t.length,n,i="value"in Fc?Fc.value:Fc.textContent,l=i.length;for(e=0;e<r&&t[e]===i[e];e++);var h=r-e;for(n=1;n<=h&&t[r-n]===i[l-n];n++);return E0=i.slice(e,1<n?1-n:void 0)}function I0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wy(){return!0}function WP(){return!1}function ka(e){function t(r,n,i,l,h){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=l,this.target=h,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(r=e[s],this[s]=r?r(l):l[s]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Wy:WP,this.isPropagationStopped=WP,this}return ti(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Wy)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Wy)},persist:function(){},isPersistent:Wy}),t}var Hf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lk=ka(Hf),tv=ti({},Hf,{view:0,detail:0}),FU=ka(tv),hw,fw,um,Xx=ti({},tv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ok,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==um&&(um&&e.type==="mousemove"?(hw=e.screenX-um.screenX,fw=e.screenY-um.screenY):fw=hw=0,um=e),hw)},movementY:function(e){return"movementY"in e?e.movementY:fw}}),qP=ka(Xx),NU=ti({},Xx,{dataTransfer:0}),jU=ka(NU),VU=ti({},tv,{relatedTarget:0}),pw=ka(VU),UU=ti({},Hf,{animationName:0,elapsedTime:0,pseudoElement:0}),HU=ka(UU),GU=ti({},Hf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),WU=ka(GU),qU=ti({},Hf,{data:0}),ZP=ka(qU),ZU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YU(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=XU[e])?!!t[e]:!1}function Ok(){return YU}var JU=ti({},tv,{key:function(e){if(e.key){var t=ZU[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=I0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?KU[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ok,charCode:function(e){return e.type==="keypress"?I0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?I0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),QU=ka(JU),e9=ti({},Xx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KP=ka(e9),t9=ti({},tv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ok}),r9=ka(t9),n9=ti({},Hf,{propertyName:0,elapsedTime:0,pseudoElement:0}),i9=ka(n9),o9=ti({},Xx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),a9=ka(o9),s9=[9,13,27,32],$k=Yl&&"CompositionEvent"in window,Nm=null;Yl&&"documentMode"in document&&(Nm=document.documentMode);var l9=Yl&&"TextEvent"in window&&!Nm,oO=Yl&&(!$k||Nm&&8<Nm&&11>=Nm),XP=" ",YP=!1;function aO(e,t){switch(e){case"keyup":return s9.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nh=!1;function c9(e,t){switch(e){case"compositionend":return sO(t);case"keypress":return t.which!==32?null:(YP=!0,XP);case"textInput":return e=t.data,e===XP&&YP?null:e;default:return null}}function u9(e,t){if(Nh)return e==="compositionend"||!$k&&aO(e,t)?(e=iO(),E0=zk=Fc=null,Nh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oO&&t.locale!=="ko"?null:t.data;default:return null}}var d9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function JP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!d9[e.type]:t==="textarea"}function lO(e,t,r,n){FL(n),t=d_(t,"onChange"),0<t.length&&(r=new Lk("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var jm=null,ug=null;function h9(e){_O(e,0)}function Yx(e){var t=Uh(e);if(DL(t))return e}function f9(e,t){if(e==="change")return t}var cO=!1;if(Yl){var mw;if(Yl){var gw="oninput"in document;if(!gw){var QP=document.createElement("div");QP.setAttribute("oninput","return;"),gw=typeof QP.oninput=="function"}mw=gw}else mw=!1;cO=mw&&(!document.documentMode||9<document.documentMode)}function eA(){jm&&(jm.detachEvent("onpropertychange",uO),ug=jm=null)}function uO(e){if(e.propertyName==="value"&&Yx(ug)){var t=[];lO(t,ug,e,Pk(e)),UL(h9,t)}}function p9(e,t,r){e==="focusin"?(eA(),jm=t,ug=r,jm.attachEvent("onpropertychange",uO)):e==="focusout"&&eA()}function m9(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Yx(ug)}function g9(e,t){if(e==="click")return Yx(t)}function v9(e,t){if(e==="input"||e==="change")return Yx(t)}function y9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ts=typeof Object.is=="function"?Object.is:y9;function dg(e,t){if(Ts(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!dC.call(t,i)||!Ts(e[i],t[i]))return!1}return!0}function tA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rA(e,t){var r=tA(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tA(r)}}function dO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?dO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hO(){for(var e=window,t=i_();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=i_(e.document)}return t}function Bk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _9(e){var t=hO(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dO(r.ownerDocument.documentElement,r)){if(n!==null&&Bk(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,l=Math.min(n.start,i);n=n.end===void 0?l:Math.min(n.end,i),!e.extend&&l>n&&(i=n,n=l,l=i),i=rA(r,l);var h=rA(r,n);i&&h&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var x9=Yl&&"documentMode"in document&&11>=document.documentMode,jh=null,AC=null,Vm=null,RC=!1;function nA(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;RC||jh==null||jh!==i_(n)||(n=jh,"selectionStart"in n&&Bk(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Vm&&dg(Vm,n)||(Vm=n,n=d_(AC,"onSelect"),0<n.length&&(t=new Lk("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=jh)))}function qy(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Vh={animationend:qy("Animation","AnimationEnd"),animationiteration:qy("Animation","AnimationIteration"),animationstart:qy("Animation","AnimationStart"),transitionend:qy("Transition","TransitionEnd")},vw={},fO={};Yl&&(fO=document.createElement("div").style,"AnimationEvent"in window||(delete Vh.animationend.animation,delete Vh.animationiteration.animation,delete Vh.animationstart.animation),"TransitionEvent"in window||delete Vh.transitionend.transition);function Jx(e){if(vw[e])return vw[e];if(!Vh[e])return e;var t=Vh[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in fO)return vw[e]=t[r];return e}var pO=Jx("animationend"),mO=Jx("animationiteration"),gO=Jx("animationstart"),vO=Jx("transitionend"),yO=new Map,iA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cu(e,t){yO.set(e,t),wd(t,[e])}for(var yw=0;yw<iA.length;yw++){var _w=iA[yw],b9=_w.toLowerCase(),w9=_w[0].toUpperCase()+_w.slice(1);cu(b9,"on"+w9)}cu(pO,"onAnimationEnd");cu(mO,"onAnimationIteration");cu(gO,"onAnimationStart");cu("dblclick","onDoubleClick");cu("focusin","onFocus");cu("focusout","onBlur");cu(vO,"onTransitionEnd");gf("onMouseEnter",["mouseout","mouseover"]);gf("onMouseLeave",["mouseout","mouseover"]);gf("onPointerEnter",["pointerout","pointerover"]);gf("onPointerLeave",["pointerout","pointerover"]);wd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wd("onBeforeInput",["compositionend","keypress","textInput","paste"]);wd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Am="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S9=new Set("cancel close invalid load scroll toggle".split(" ").concat(Am));function oA(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,bU(n,t,void 0,e),e.currentTarget=null}function _O(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var h=n.length-1;0<=h;h--){var s=n[h],m=s.instance,y=s.currentTarget;if(s=s.listener,m!==l&&i.isPropagationStopped())break e;oA(i,s,y),l=m}else for(h=0;h<n.length;h++){if(s=n[h],m=s.instance,y=s.currentTarget,s=s.listener,m!==l&&i.isPropagationStopped())break e;oA(i,s,y),l=m}}}if(a_)throw e=TC,a_=!1,TC=null,e}function $n(e,t){var r=t[OC];r===void 0&&(r=t[OC]=new Set);var n=e+"__bubble";r.has(n)||(xO(t,e,2,!1),r.add(n))}function xw(e,t,r){var n=0;t&&(n|=4),xO(r,e,n,t)}var Zy="_reactListening"+Math.random().toString(36).slice(2);function hg(e){if(!e[Zy]){e[Zy]=!0,EL.forEach(function(r){r!=="selectionchange"&&(S9.has(r)||xw(r,!1,e),xw(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Zy]||(t[Zy]=!0,xw("selectionchange",!1,t))}}function xO(e,t,r,n){switch(nO(t)){case 1:var i=$U;break;case 4:i=BU;break;default:i=Mk}r=i.bind(null,t,r,e),i=void 0,!kC||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function bw(e,t,r,n,i){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var h=n.tag;if(h===3||h===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(h===4)for(h=n.return;h!==null;){var m=h.tag;if((m===3||m===4)&&(m=h.stateNode.containerInfo,m===i||m.nodeType===8&&m.parentNode===i))return;h=h.return}for(;s!==null;){if(h=Xu(s),h===null)return;if(m=h.tag,m===5||m===6){n=l=h;continue e}s=s.parentNode}}n=n.return}UL(function(){var y=l,S=Pk(r),T=[];e:{var I=yO.get(e);if(I!==void 0){var D=Lk,F=e;switch(e){case"keypress":if(I0(r)===0)break e;case"keydown":case"keyup":D=QU;break;case"focusin":F="focus",D=pw;break;case"focusout":F="blur",D=pw;break;case"beforeblur":case"afterblur":D=pw;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=qP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=jU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=r9;break;case pO:case mO:case gO:D=HU;break;case vO:D=i9;break;case"scroll":D=FU;break;case"wheel":D=a9;break;case"copy":case"cut":case"paste":D=WU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=KP}var V=(t&4)!==0,Z=!V&&e==="scroll",z=V?I!==null?I+"Capture":null:I;V=[];for(var O=y,L;O!==null;){L=O;var te=L.stateNode;if(L.tag===5&&te!==null&&(L=te,z!==null&&(te=ag(O,z),te!=null&&V.push(fg(O,te,L)))),Z)break;O=O.return}0<V.length&&(I=new D(I,F,null,r,S),T.push({event:I,listeners:V}))}}if(!(t&7)){e:{if(I=e==="mouseover"||e==="pointerover",D=e==="mouseout"||e==="pointerout",I&&r!==SC&&(F=r.relatedTarget||r.fromElement)&&(Xu(F)||F[Jl]))break e;if((D||I)&&(I=S.window===S?S:(I=S.ownerDocument)?I.defaultView||I.parentWindow:window,D?(F=r.relatedTarget||r.toElement,D=y,F=F?Xu(F):null,F!==null&&(Z=Sd(F),F!==Z||F.tag!==5&&F.tag!==6)&&(F=null)):(D=null,F=y),D!==F)){if(V=qP,te="onMouseLeave",z="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(V=KP,te="onPointerLeave",z="onPointerEnter",O="pointer"),Z=D==null?I:Uh(D),L=F==null?I:Uh(F),I=new V(te,O+"leave",D,r,S),I.target=Z,I.relatedTarget=L,te=null,Xu(S)===y&&(V=new V(z,O+"enter",F,r,S),V.target=L,V.relatedTarget=Z,te=V),Z=te,D&&F)t:{for(V=D,z=F,O=0,L=V;L;L=xh(L))O++;for(L=0,te=z;te;te=xh(te))L++;for(;0<O-L;)V=xh(V),O--;for(;0<L-O;)z=xh(z),L--;for(;O--;){if(V===z||z!==null&&V===z.alternate)break t;V=xh(V),z=xh(z)}V=null}else V=null;D!==null&&aA(T,I,D,V,!1),F!==null&&Z!==null&&aA(T,Z,F,V,!0)}}e:{if(I=y?Uh(y):window,D=I.nodeName&&I.nodeName.toLowerCase(),D==="select"||D==="input"&&I.type==="file")var j=f9;else if(JP(I))if(cO)j=v9;else{j=m9;var $=p9}else(D=I.nodeName)&&D.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(j=g9);if(j&&(j=j(e,y))){lO(T,j,r,S);break e}$&&$(e,I,y),e==="focusout"&&($=I._wrapperState)&&$.controlled&&I.type==="number"&&yC(I,"number",I.value)}switch($=y?Uh(y):window,e){case"focusin":(JP($)||$.contentEditable==="true")&&(jh=$,AC=y,Vm=null);break;case"focusout":Vm=AC=jh=null;break;case"mousedown":RC=!0;break;case"contextmenu":case"mouseup":case"dragend":RC=!1,nA(T,r,S);break;case"selectionchange":if(x9)break;case"keydown":case"keyup":nA(T,r,S)}var J;if($k)e:{switch(e){case"compositionstart":var ie="onCompositionStart";break e;case"compositionend":ie="onCompositionEnd";break e;case"compositionupdate":ie="onCompositionUpdate";break e}ie=void 0}else Nh?aO(e,r)&&(ie="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ie="onCompositionStart");ie&&(oO&&r.locale!=="ko"&&(Nh||ie!=="onCompositionStart"?ie==="onCompositionEnd"&&Nh&&(J=iO()):(Fc=S,zk="value"in Fc?Fc.value:Fc.textContent,Nh=!0)),$=d_(y,ie),0<$.length&&(ie=new ZP(ie,e,null,r,S),T.push({event:ie,listeners:$}),J?ie.data=J:(J=sO(r),J!==null&&(ie.data=J)))),(J=l9?c9(e,r):u9(e,r))&&(y=d_(y,"onBeforeInput"),0<y.length&&(S=new ZP("onBeforeInput","beforeinput",null,r,S),T.push({event:S,listeners:y}),S.data=J))}_O(T,t)})}function fg(e,t,r){return{instance:e,listener:t,currentTarget:r}}function d_(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,l=i.stateNode;i.tag===5&&l!==null&&(i=l,l=ag(e,r),l!=null&&n.unshift(fg(e,l,i)),l=ag(e,t),l!=null&&n.push(fg(e,l,i))),e=e.return}return n}function xh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function aA(e,t,r,n,i){for(var l=t._reactName,h=[];r!==null&&r!==n;){var s=r,m=s.alternate,y=s.stateNode;if(m!==null&&m===n)break;s.tag===5&&y!==null&&(s=y,i?(m=ag(r,l),m!=null&&h.unshift(fg(r,m,s))):i||(m=ag(r,l),m!=null&&h.push(fg(r,m,s)))),r=r.return}h.length!==0&&e.push({event:t,listeners:h})}var C9=/\r\n?/g,k9=/\u0000|\uFFFD/g;function sA(e){return(typeof e=="string"?e:""+e).replace(C9,`
`).replace(k9,"")}function Ky(e,t,r){if(t=sA(t),sA(e)!==t&&r)throw Error(_t(425))}function h_(){}var DC=null,MC=null;function zC(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var LC=typeof setTimeout=="function"?setTimeout:void 0,T9=typeof clearTimeout=="function"?clearTimeout:void 0,lA=typeof Promise=="function"?Promise:void 0,E9=typeof queueMicrotask=="function"?queueMicrotask:typeof lA<"u"?function(e){return lA.resolve(null).then(e).catch(I9)}:LC;function I9(e){setTimeout(function(){throw e})}function ww(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),cg(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);cg(t)}function Gc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function cA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Gf=Math.random().toString(36).slice(2),Ys="__reactFiber$"+Gf,pg="__reactProps$"+Gf,Jl="__reactContainer$"+Gf,OC="__reactEvents$"+Gf,P9="__reactListeners$"+Gf,A9="__reactHandles$"+Gf;function Xu(e){var t=e[Ys];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Jl]||r[Ys]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=cA(e);e!==null;){if(r=e[Ys])return r;e=cA(e)}return t}e=r,r=e.parentNode}return null}function rv(e){return e=e[Ys]||e[Jl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Uh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_t(33))}function Qx(e){return e[pg]||null}var $C=[],Hh=-1;function uu(e){return{current:e}}function Bn(e){0>Hh||(e.current=$C[Hh],$C[Hh]=null,Hh--)}function Dn(e,t){Hh++,$C[Hh]=e.current,e.current=t}var Jc={},xo=uu(Jc),Ko=uu(!1),ld=Jc;function vf(e,t){var r=e.type.contextTypes;if(!r)return Jc;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in r)i[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Xo(e){return e=e.childContextTypes,e!=null}function f_(){Bn(Ko),Bn(xo)}function uA(e,t,r){if(xo.current!==Jc)throw Error(_t(168));Dn(xo,t),Dn(Ko,r)}function bO(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(_t(108,pU(e)||"Unknown",i));return ti({},r,n)}function p_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jc,ld=xo.current,Dn(xo,e),Dn(Ko,Ko.current),!0}function dA(e,t,r){var n=e.stateNode;if(!n)throw Error(_t(169));r?(e=bO(e,t,ld),n.__reactInternalMemoizedMergedChildContext=e,Bn(Ko),Bn(xo),Dn(xo,e)):Bn(Ko),Dn(Ko,r)}var Ol=null,eb=!1,Sw=!1;function wO(e){Ol===null?Ol=[e]:Ol.push(e)}function R9(e){eb=!0,wO(e)}function du(){if(!Sw&&Ol!==null){Sw=!0;var e=0,t=vn;try{var r=Ol;for(vn=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ol=null,eb=!1}catch(i){throw Ol!==null&&(Ol=Ol.slice(e+1)),qL(Ak,du),i}finally{vn=t,Sw=!1}}return null}var Gh=[],Wh=0,m_=null,g_=0,Ba=[],Fa=0,cd=null,jl=1,Vl="";function Hu(e,t){Gh[Wh++]=g_,Gh[Wh++]=m_,m_=e,g_=t}function SO(e,t,r){Ba[Fa++]=jl,Ba[Fa++]=Vl,Ba[Fa++]=cd,cd=e;var n=jl;e=Vl;var i=32-xs(n)-1;n&=~(1<<i),r+=1;var l=32-xs(t)+i;if(30<l){var h=i-i%5;l=(n&(1<<h)-1).toString(32),n>>=h,i-=h,jl=1<<32-xs(t)+i|r<<i|n,Vl=l+e}else jl=1<<l|r<<i|n,Vl=e}function Fk(e){e.return!==null&&(Hu(e,1),SO(e,1,0))}function Nk(e){for(;e===m_;)m_=Gh[--Wh],Gh[Wh]=null,g_=Gh[--Wh],Gh[Wh]=null;for(;e===cd;)cd=Ba[--Fa],Ba[Fa]=null,Vl=Ba[--Fa],Ba[Fa]=null,jl=Ba[--Fa],Ba[Fa]=null}var _a=null,va=null,Hn=!1,gs=null;function CO(e,t){var r=Va(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function hA(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,_a=e,va=Gc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,_a=e,va=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=cd!==null?{id:jl,overflow:Vl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Va(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,_a=e,va=null,!0):!1;default:return!1}}function BC(e){return(e.mode&1)!==0&&(e.flags&128)===0}function FC(e){if(Hn){var t=va;if(t){var r=t;if(!hA(e,t)){if(BC(e))throw Error(_t(418));t=Gc(r.nextSibling);var n=_a;t&&hA(e,t)?CO(n,r):(e.flags=e.flags&-4097|2,Hn=!1,_a=e)}}else{if(BC(e))throw Error(_t(418));e.flags=e.flags&-4097|2,Hn=!1,_a=e}}}function fA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_a=e}function Xy(e){if(e!==_a)return!1;if(!Hn)return fA(e),Hn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!zC(e.type,e.memoizedProps)),t&&(t=va)){if(BC(e))throw kO(),Error(_t(418));for(;t;)CO(e,t),t=Gc(t.nextSibling)}if(fA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_t(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){va=Gc(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}va=null}}else va=_a?Gc(e.stateNode.nextSibling):null;return!0}function kO(){for(var e=va;e;)e=Gc(e.nextSibling)}function yf(){va=_a=null,Hn=!1}function jk(e){gs===null?gs=[e]:gs.push(e)}var D9=sc.ReactCurrentBatchConfig;function dm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(_t(309));var n=r.stateNode}if(!n)throw Error(_t(147,e));var i=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(h){var s=i.refs;h===null?delete s[l]:s[l]=h},t._stringRef=l,t)}if(typeof e!="string")throw Error(_t(284));if(!r._owner)throw Error(_t(290,e))}return e}function Yy(e,t){throw e=Object.prototype.toString.call(t),Error(_t(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pA(e){var t=e._init;return t(e._payload)}function TO(e){function t(z,O){if(e){var L=z.deletions;L===null?(z.deletions=[O],z.flags|=16):L.push(O)}}function r(z,O){if(!e)return null;for(;O!==null;)t(z,O),O=O.sibling;return null}function n(z,O){for(z=new Map;O!==null;)O.key!==null?z.set(O.key,O):z.set(O.index,O),O=O.sibling;return z}function i(z,O){return z=Kc(z,O),z.index=0,z.sibling=null,z}function l(z,O,L){return z.index=L,e?(L=z.alternate,L!==null?(L=L.index,L<O?(z.flags|=2,O):L):(z.flags|=2,O)):(z.flags|=1048576,O)}function h(z){return e&&z.alternate===null&&(z.flags|=2),z}function s(z,O,L,te){return O===null||O.tag!==6?(O=Aw(L,z.mode,te),O.return=z,O):(O=i(O,L),O.return=z,O)}function m(z,O,L,te){var j=L.type;return j===Fh?S(z,O,L.props.children,te,L.key):O!==null&&(O.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Dc&&pA(j)===O.type)?(te=i(O,L.props),te.ref=dm(z,O,L),te.return=z,te):(te=L0(L.type,L.key,L.props,null,z.mode,te),te.ref=dm(z,O,L),te.return=z,te)}function y(z,O,L,te){return O===null||O.tag!==4||O.stateNode.containerInfo!==L.containerInfo||O.stateNode.implementation!==L.implementation?(O=Rw(L,z.mode,te),O.return=z,O):(O=i(O,L.children||[]),O.return=z,O)}function S(z,O,L,te,j){return O===null||O.tag!==7?(O=td(L,z.mode,te,j),O.return=z,O):(O=i(O,L),O.return=z,O)}function T(z,O,L){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Aw(""+O,z.mode,L),O.return=z,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ny:return L=L0(O.type,O.key,O.props,null,z.mode,L),L.ref=dm(z,null,O),L.return=z,L;case Bh:return O=Rw(O,z.mode,L),O.return=z,O;case Dc:var te=O._init;return T(z,te(O._payload),L)}if(Im(O)||am(O))return O=td(O,z.mode,L,null),O.return=z,O;Yy(z,O)}return null}function I(z,O,L,te){var j=O!==null?O.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return j!==null?null:s(z,O,""+L,te);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Ny:return L.key===j?m(z,O,L,te):null;case Bh:return L.key===j?y(z,O,L,te):null;case Dc:return j=L._init,I(z,O,j(L._payload),te)}if(Im(L)||am(L))return j!==null?null:S(z,O,L,te,null);Yy(z,L)}return null}function D(z,O,L,te,j){if(typeof te=="string"&&te!==""||typeof te=="number")return z=z.get(L)||null,s(O,z,""+te,j);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Ny:return z=z.get(te.key===null?L:te.key)||null,m(O,z,te,j);case Bh:return z=z.get(te.key===null?L:te.key)||null,y(O,z,te,j);case Dc:var $=te._init;return D(z,O,L,$(te._payload),j)}if(Im(te)||am(te))return z=z.get(L)||null,S(O,z,te,j,null);Yy(O,te)}return null}function F(z,O,L,te){for(var j=null,$=null,J=O,ie=O=0,xe=null;J!==null&&ie<L.length;ie++){J.index>ie?(xe=J,J=null):xe=J.sibling;var ge=I(z,J,L[ie],te);if(ge===null){J===null&&(J=xe);break}e&&J&&ge.alternate===null&&t(z,J),O=l(ge,O,ie),$===null?j=ge:$.sibling=ge,$=ge,J=xe}if(ie===L.length)return r(z,J),Hn&&Hu(z,ie),j;if(J===null){for(;ie<L.length;ie++)J=T(z,L[ie],te),J!==null&&(O=l(J,O,ie),$===null?j=J:$.sibling=J,$=J);return Hn&&Hu(z,ie),j}for(J=n(z,J);ie<L.length;ie++)xe=D(J,z,ie,L[ie],te),xe!==null&&(e&&xe.alternate!==null&&J.delete(xe.key===null?ie:xe.key),O=l(xe,O,ie),$===null?j=xe:$.sibling=xe,$=xe);return e&&J.forEach(function(we){return t(z,we)}),Hn&&Hu(z,ie),j}function V(z,O,L,te){var j=am(L);if(typeof j!="function")throw Error(_t(150));if(L=j.call(L),L==null)throw Error(_t(151));for(var $=j=null,J=O,ie=O=0,xe=null,ge=L.next();J!==null&&!ge.done;ie++,ge=L.next()){J.index>ie?(xe=J,J=null):xe=J.sibling;var we=I(z,J,ge.value,te);if(we===null){J===null&&(J=xe);break}e&&J&&we.alternate===null&&t(z,J),O=l(we,O,ie),$===null?j=we:$.sibling=we,$=we,J=xe}if(ge.done)return r(z,J),Hn&&Hu(z,ie),j;if(J===null){for(;!ge.done;ie++,ge=L.next())ge=T(z,ge.value,te),ge!==null&&(O=l(ge,O,ie),$===null?j=ge:$.sibling=ge,$=ge);return Hn&&Hu(z,ie),j}for(J=n(z,J);!ge.done;ie++,ge=L.next())ge=D(J,z,ie,ge.value,te),ge!==null&&(e&&ge.alternate!==null&&J.delete(ge.key===null?ie:ge.key),O=l(ge,O,ie),$===null?j=ge:$.sibling=ge,$=ge);return e&&J.forEach(function(Te){return t(z,Te)}),Hn&&Hu(z,ie),j}function Z(z,O,L,te){if(typeof L=="object"&&L!==null&&L.type===Fh&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case Ny:e:{for(var j=L.key,$=O;$!==null;){if($.key===j){if(j=L.type,j===Fh){if($.tag===7){r(z,$.sibling),O=i($,L.props.children),O.return=z,z=O;break e}}else if($.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Dc&&pA(j)===$.type){r(z,$.sibling),O=i($,L.props),O.ref=dm(z,$,L),O.return=z,z=O;break e}r(z,$);break}else t(z,$);$=$.sibling}L.type===Fh?(O=td(L.props.children,z.mode,te,L.key),O.return=z,z=O):(te=L0(L.type,L.key,L.props,null,z.mode,te),te.ref=dm(z,O,L),te.return=z,z=te)}return h(z);case Bh:e:{for($=L.key;O!==null;){if(O.key===$)if(O.tag===4&&O.stateNode.containerInfo===L.containerInfo&&O.stateNode.implementation===L.implementation){r(z,O.sibling),O=i(O,L.children||[]),O.return=z,z=O;break e}else{r(z,O);break}else t(z,O);O=O.sibling}O=Rw(L,z.mode,te),O.return=z,z=O}return h(z);case Dc:return $=L._init,Z(z,O,$(L._payload),te)}if(Im(L))return F(z,O,L,te);if(am(L))return V(z,O,L,te);Yy(z,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,O!==null&&O.tag===6?(r(z,O.sibling),O=i(O,L),O.return=z,z=O):(r(z,O),O=Aw(L,z.mode,te),O.return=z,z=O),h(z)):r(z,O)}return Z}var _f=TO(!0),EO=TO(!1),v_=uu(null),y_=null,qh=null,Vk=null;function Uk(){Vk=qh=y_=null}function Hk(e){var t=v_.current;Bn(v_),e._currentValue=t}function NC(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function cf(e,t){y_=e,Vk=qh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Zo=!0),e.firstContext=null)}function qa(e){var t=e._currentValue;if(Vk!==e)if(e={context:e,memoizedValue:t,next:null},qh===null){if(y_===null)throw Error(_t(308));qh=e,y_.dependencies={lanes:0,firstContext:e}}else qh=qh.next=e;return t}var Yu=null;function Gk(e){Yu===null?Yu=[e]:Yu.push(e)}function IO(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Gk(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ql(e,n)}function Ql(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Mc=!1;function Wk(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Wc(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,nn&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ql(e,r)}return i=n.interleaved,i===null?(t.next=t,Gk(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ql(e,r)}function P0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Rk(e,r)}}function mA(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?i=l=h:l=l.next=h,r=r.next}while(r!==null);l===null?i=l=t:l=l.next=t}else i=l=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function __(e,t,r,n){var i=e.updateQueue;Mc=!1;var l=i.firstBaseUpdate,h=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var m=s,y=m.next;m.next=null,h===null?l=y:h.next=y,h=m;var S=e.alternate;S!==null&&(S=S.updateQueue,s=S.lastBaseUpdate,s!==h&&(s===null?S.firstBaseUpdate=y:s.next=y,S.lastBaseUpdate=m))}if(l!==null){var T=i.baseState;h=0,S=y=m=null,s=l;do{var I=s.lane,D=s.eventTime;if((n&I)===I){S!==null&&(S=S.next={eventTime:D,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var F=e,V=s;switch(I=t,D=r,V.tag){case 1:if(F=V.payload,typeof F=="function"){T=F.call(D,T,I);break e}T=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=V.payload,I=typeof F=="function"?F.call(D,T,I):F,I==null)break e;T=ti({},T,I);break e;case 2:Mc=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,I=i.effects,I===null?i.effects=[s]:I.push(s))}else D={eventTime:D,lane:I,tag:s.tag,payload:s.payload,callback:s.callback,next:null},S===null?(y=S=D,m=T):S=S.next=D,h|=I;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;I=s,s=I.next,I.next=null,i.lastBaseUpdate=I,i.shared.pending=null}}while(!0);if(S===null&&(m=T),i.baseState=m,i.firstBaseUpdate=y,i.lastBaseUpdate=S,t=i.shared.interleaved,t!==null){i=t;do h|=i.lane,i=i.next;while(i!==t)}else l===null&&(i.shared.lanes=0);dd|=h,e.lanes=h,e.memoizedState=T}}function gA(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(_t(191,i));i.call(n)}}}var nv={},nl=uu(nv),mg=uu(nv),gg=uu(nv);function Ju(e){if(e===nv)throw Error(_t(174));return e}function qk(e,t){switch(Dn(gg,t),Dn(mg,e),Dn(nl,nv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xC(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xC(t,e)}Bn(nl),Dn(nl,t)}function xf(){Bn(nl),Bn(mg),Bn(gg)}function AO(e){Ju(gg.current);var t=Ju(nl.current),r=xC(t,e.type);t!==r&&(Dn(mg,e),Dn(nl,r))}function Zk(e){mg.current===e&&(Bn(nl),Bn(mg))}var Jn=uu(0);function x_(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cw=[];function Kk(){for(var e=0;e<Cw.length;e++)Cw[e]._workInProgressVersionPrimary=null;Cw.length=0}var A0=sc.ReactCurrentDispatcher,kw=sc.ReactCurrentBatchConfig,ud=0,ei=null,Ei=null,Oi=null,b_=!1,Um=!1,vg=0,M9=0;function fo(){throw Error(_t(321))}function Xk(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ts(e[r],t[r]))return!1;return!0}function Yk(e,t,r,n,i,l){if(ud=l,ei=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A0.current=e===null||e.memoizedState===null?$9:B9,e=r(n,i),Um){l=0;do{if(Um=!1,vg=0,25<=l)throw Error(_t(301));l+=1,Oi=Ei=null,t.updateQueue=null,A0.current=F9,e=r(n,i)}while(Um)}if(A0.current=w_,t=Ei!==null&&Ei.next!==null,ud=0,Oi=Ei=ei=null,b_=!1,t)throw Error(_t(300));return e}function Jk(){var e=vg!==0;return vg=0,e}function Zs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oi===null?ei.memoizedState=Oi=e:Oi=Oi.next=e,Oi}function Za(){if(Ei===null){var e=ei.alternate;e=e!==null?e.memoizedState:null}else e=Ei.next;var t=Oi===null?ei.memoizedState:Oi.next;if(t!==null)Oi=t,Ei=e;else{if(e===null)throw Error(_t(310));Ei=e,e={memoizedState:Ei.memoizedState,baseState:Ei.baseState,baseQueue:Ei.baseQueue,queue:Ei.queue,next:null},Oi===null?ei.memoizedState=Oi=e:Oi=Oi.next=e}return Oi}function yg(e,t){return typeof t=="function"?t(e):t}function Tw(e){var t=Za(),r=t.queue;if(r===null)throw Error(_t(311));r.lastRenderedReducer=e;var n=Ei,i=n.baseQueue,l=r.pending;if(l!==null){if(i!==null){var h=i.next;i.next=l.next,l.next=h}n.baseQueue=i=l,r.pending=null}if(i!==null){l=i.next,n=n.baseState;var s=h=null,m=null,y=l;do{var S=y.lane;if((ud&S)===S)m!==null&&(m=m.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),n=y.hasEagerState?y.eagerState:e(n,y.action);else{var T={lane:S,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};m===null?(s=m=T,h=n):m=m.next=T,ei.lanes|=S,dd|=S}y=y.next}while(y!==null&&y!==l);m===null?h=n:m.next=s,Ts(n,t.memoizedState)||(Zo=!0),t.memoizedState=n,t.baseState=h,t.baseQueue=m,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do l=i.lane,ei.lanes|=l,dd|=l,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ew(e){var t=Za(),r=t.queue;if(r===null)throw Error(_t(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,l=t.memoizedState;if(i!==null){r.pending=null;var h=i=i.next;do l=e(l,h.action),h=h.next;while(h!==i);Ts(l,t.memoizedState)||(Zo=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function RO(){}function DO(e,t){var r=ei,n=Za(),i=t(),l=!Ts(n.memoizedState,i);if(l&&(n.memoizedState=i,Zo=!0),n=n.queue,Qk(LO.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||Oi!==null&&Oi.memoizedState.tag&1){if(r.flags|=2048,_g(9,zO.bind(null,r,n,i,t),void 0,null),$i===null)throw Error(_t(349));ud&30||MO(r,t,i)}return i}function MO(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ei.updateQueue,t===null?(t={lastEffect:null,stores:null},ei.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function zO(e,t,r,n){t.value=r,t.getSnapshot=n,OO(t)&&$O(e)}function LO(e,t,r){return r(function(){OO(t)&&$O(e)})}function OO(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ts(e,r)}catch{return!0}}function $O(e){var t=Ql(e,1);t!==null&&bs(t,e,1,-1)}function vA(e){var t=Zs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yg,lastRenderedState:e},t.queue=e,e=e.dispatch=O9.bind(null,ei,e),[t.memoizedState,e]}function _g(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ei.updateQueue,t===null?(t={lastEffect:null,stores:null},ei.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function BO(){return Za().memoizedState}function R0(e,t,r,n){var i=Zs();ei.flags|=e,i.memoizedState=_g(1|t,r,void 0,n===void 0?null:n)}function tb(e,t,r,n){var i=Za();n=n===void 0?null:n;var l=void 0;if(Ei!==null){var h=Ei.memoizedState;if(l=h.destroy,n!==null&&Xk(n,h.deps)){i.memoizedState=_g(t,r,l,n);return}}ei.flags|=e,i.memoizedState=_g(1|t,r,l,n)}function yA(e,t){return R0(8390656,8,e,t)}function Qk(e,t){return tb(2048,8,e,t)}function FO(e,t){return tb(4,2,e,t)}function NO(e,t){return tb(4,4,e,t)}function jO(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function VO(e,t,r){return r=r!=null?r.concat([e]):null,tb(4,4,jO.bind(null,t,e),r)}function eT(){}function UO(e,t){var r=Za();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Xk(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function HO(e,t){var r=Za();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Xk(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function GO(e,t,r){return ud&21?(Ts(r,t)||(r=XL(),ei.lanes|=r,dd|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Zo=!0),e.memoizedState=r)}function z9(e,t){var r=vn;vn=r!==0&&4>r?r:4,e(!0);var n=kw.transition;kw.transition={};try{e(!1),t()}finally{vn=r,kw.transition=n}}function WO(){return Za().memoizedState}function L9(e,t,r){var n=Zc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},qO(e))ZO(t,r);else if(r=IO(e,t,r,n),r!==null){var i=Lo();bs(r,e,n,i),KO(r,t,n)}}function O9(e,t,r){var n=Zc(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(qO(e))ZO(t,i);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var h=t.lastRenderedState,s=l(h,r);if(i.hasEagerState=!0,i.eagerState=s,Ts(s,h)){var m=t.interleaved;m===null?(i.next=i,Gk(t)):(i.next=m.next,m.next=i),t.interleaved=i;return}}catch{}finally{}r=IO(e,t,i,n),r!==null&&(i=Lo(),bs(r,e,n,i),KO(r,t,n))}}function qO(e){var t=e.alternate;return e===ei||t!==null&&t===ei}function ZO(e,t){Um=b_=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function KO(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Rk(e,r)}}var w_={readContext:qa,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},$9={readContext:qa,useCallback:function(e,t){return Zs().memoizedState=[e,t===void 0?null:t],e},useContext:qa,useEffect:yA,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,R0(4194308,4,jO.bind(null,t,e),r)},useLayoutEffect:function(e,t){return R0(4194308,4,e,t)},useInsertionEffect:function(e,t){return R0(4,2,e,t)},useMemo:function(e,t){var r=Zs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Zs();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=L9.bind(null,ei,e),[n.memoizedState,e]},useRef:function(e){var t=Zs();return e={current:e},t.memoizedState=e},useState:vA,useDebugValue:eT,useDeferredValue:function(e){return Zs().memoizedState=e},useTransition:function(){var e=vA(!1),t=e[0];return e=z9.bind(null,e[1]),Zs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ei,i=Zs();if(Hn){if(r===void 0)throw Error(_t(407));r=r()}else{if(r=t(),$i===null)throw Error(_t(349));ud&30||MO(n,t,r)}i.memoizedState=r;var l={value:r,getSnapshot:t};return i.queue=l,yA(LO.bind(null,n,l,e),[e]),n.flags|=2048,_g(9,zO.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=Zs(),t=$i.identifierPrefix;if(Hn){var r=Vl,n=jl;r=(n&~(1<<32-xs(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=vg++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=M9++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},B9={readContext:qa,useCallback:UO,useContext:qa,useEffect:Qk,useImperativeHandle:VO,useInsertionEffect:FO,useLayoutEffect:NO,useMemo:HO,useReducer:Tw,useRef:BO,useState:function(){return Tw(yg)},useDebugValue:eT,useDeferredValue:function(e){var t=Za();return GO(t,Ei.memoizedState,e)},useTransition:function(){var e=Tw(yg)[0],t=Za().memoizedState;return[e,t]},useMutableSource:RO,useSyncExternalStore:DO,useId:WO,unstable_isNewReconciler:!1},F9={readContext:qa,useCallback:UO,useContext:qa,useEffect:Qk,useImperativeHandle:VO,useInsertionEffect:FO,useLayoutEffect:NO,useMemo:HO,useReducer:Ew,useRef:BO,useState:function(){return Ew(yg)},useDebugValue:eT,useDeferredValue:function(e){var t=Za();return Ei===null?t.memoizedState=e:GO(t,Ei.memoizedState,e)},useTransition:function(){var e=Ew(yg)[0],t=Za().memoizedState;return[e,t]},useMutableSource:RO,useSyncExternalStore:DO,useId:WO,unstable_isNewReconciler:!1};function fs(e,t){if(e&&e.defaultProps){t=ti({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function jC(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ti({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var rb={isMounted:function(e){return(e=e._reactInternals)?Sd(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Lo(),i=Zc(e),l=Gl(n,i);l.payload=t,r!=null&&(l.callback=r),t=Wc(e,l,i),t!==null&&(bs(t,e,i,n),P0(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Lo(),i=Zc(e),l=Gl(n,i);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=Wc(e,l,i),t!==null&&(bs(t,e,i,n),P0(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Lo(),n=Zc(e),i=Gl(r,n);i.tag=2,t!=null&&(i.callback=t),t=Wc(e,i,n),t!==null&&(bs(t,e,n,r),P0(t,e,n))}};function _A(e,t,r,n,i,l,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,h):t.prototype&&t.prototype.isPureReactComponent?!dg(r,n)||!dg(i,l):!0}function XO(e,t,r){var n=!1,i=Jc,l=t.contextType;return typeof l=="object"&&l!==null?l=qa(l):(i=Xo(t)?ld:xo.current,n=t.contextTypes,l=(n=n!=null)?vf(e,i):Jc),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=rb,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=l),t}function xA(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&rb.enqueueReplaceState(t,t.state,null)}function VC(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Wk(e);var l=t.contextType;typeof l=="object"&&l!==null?i.context=qa(l):(l=Xo(t)?ld:xo.current,i.context=vf(e,l)),i.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(jC(e,t,l,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&rb.enqueueReplaceState(i,i.state,null),__(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function bf(e,t){try{var r="",n=t;do r+=fU(n),n=n.return;while(n);var i=r}catch(l){i=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:i,digest:null}}function Iw(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function UC(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var N9=typeof WeakMap=="function"?WeakMap:Map;function YO(e,t,r){r=Gl(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){C_||(C_=!0,QC=n),UC(e,t)},r}function JO(e,t,r){r=Gl(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){UC(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){UC(e,t),typeof n!="function"&&(qc===null?qc=new Set([this]):qc.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),r}function bA(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new N9;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=e7.bind(null,e,t,r),t.then(e,e))}function wA(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function SA(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Gl(-1,1),t.tag=2,Wc(r,t,1))),r.lanes|=1),e)}var j9=sc.ReactCurrentOwner,Zo=!1;function zo(e,t,r,n){t.child=e===null?EO(t,null,r,n):_f(t,e.child,r,n)}function CA(e,t,r,n,i){r=r.render;var l=t.ref;return cf(t,i),n=Yk(e,t,r,n,l,i),r=Jk(),e!==null&&!Zo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ec(e,t,i)):(Hn&&r&&Fk(t),t.flags|=1,zo(e,t,n,i),t.child)}function kA(e,t,r,n,i){if(e===null){var l=r.type;return typeof l=="function"&&!lT(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,QO(e,t,l,n,i)):(e=L0(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&i)){var h=l.memoizedProps;if(r=r.compare,r=r!==null?r:dg,r(h,n)&&e.ref===t.ref)return ec(e,t,i)}return t.flags|=1,e=Kc(l,n),e.ref=t.ref,e.return=t,t.child=e}function QO(e,t,r,n,i){if(e!==null){var l=e.memoizedProps;if(dg(l,n)&&e.ref===t.ref)if(Zo=!1,t.pendingProps=n=l,(e.lanes&i)!==0)e.flags&131072&&(Zo=!0);else return t.lanes=e.lanes,ec(e,t,i)}return HC(e,t,r,n,i)}function e$(e,t,r){var n=t.pendingProps,i=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dn(Kh,la),la|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Dn(Kh,la),la|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,Dn(Kh,la),la|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,Dn(Kh,la),la|=n;return zo(e,t,i,r),t.child}function t$(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function HC(e,t,r,n,i){var l=Xo(r)?ld:xo.current;return l=vf(t,l),cf(t,i),r=Yk(e,t,r,n,l,i),n=Jk(),e!==null&&!Zo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ec(e,t,i)):(Hn&&n&&Fk(t),t.flags|=1,zo(e,t,r,i),t.child)}function TA(e,t,r,n,i){if(Xo(r)){var l=!0;p_(t)}else l=!1;if(cf(t,i),t.stateNode===null)D0(e,t),XO(t,r,n),VC(t,r,n,i),n=!0;else if(e===null){var h=t.stateNode,s=t.memoizedProps;h.props=s;var m=h.context,y=r.contextType;typeof y=="object"&&y!==null?y=qa(y):(y=Xo(r)?ld:xo.current,y=vf(t,y));var S=r.getDerivedStateFromProps,T=typeof S=="function"||typeof h.getSnapshotBeforeUpdate=="function";T||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(s!==n||m!==y)&&xA(t,h,n,y),Mc=!1;var I=t.memoizedState;h.state=I,__(t,n,h,i),m=t.memoizedState,s!==n||I!==m||Ko.current||Mc?(typeof S=="function"&&(jC(t,r,S,n),m=t.memoizedState),(s=Mc||_A(t,r,s,n,I,m,y))?(T||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=m),h.props=n,h.state=m,h.context=y,n=s):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{h=t.stateNode,PO(e,t),s=t.memoizedProps,y=t.type===t.elementType?s:fs(t.type,s),h.props=y,T=t.pendingProps,I=h.context,m=r.contextType,typeof m=="object"&&m!==null?m=qa(m):(m=Xo(r)?ld:xo.current,m=vf(t,m));var D=r.getDerivedStateFromProps;(S=typeof D=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(s!==T||I!==m)&&xA(t,h,n,m),Mc=!1,I=t.memoizedState,h.state=I,__(t,n,h,i);var F=t.memoizedState;s!==T||I!==F||Ko.current||Mc?(typeof D=="function"&&(jC(t,r,D,n),F=t.memoizedState),(y=Mc||_A(t,r,y,n,I,F,m)||!1)?(S||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(n,F,m),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(n,F,m)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=F),h.props=n,h.state=F,h.context=m,n=y):(typeof h.componentDidUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),n=!1)}return GC(e,t,r,n,l,i)}function GC(e,t,r,n,i,l){t$(e,t);var h=(t.flags&128)!==0;if(!n&&!h)return i&&dA(t,r,!1),ec(e,t,l);n=t.stateNode,j9.current=t;var s=h&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&h?(t.child=_f(t,e.child,null,l),t.child=_f(t,null,s,l)):zo(e,t,s,l),t.memoizedState=n.state,i&&dA(t,r,!0),t.child}function r$(e){var t=e.stateNode;t.pendingContext?uA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&uA(e,t.context,!1),qk(e,t.containerInfo)}function EA(e,t,r,n,i){return yf(),jk(i),t.flags|=256,zo(e,t,r,n),t.child}var WC={dehydrated:null,treeContext:null,retryLane:0};function qC(e){return{baseLanes:e,cachePool:null,transitions:null}}function n$(e,t,r){var n=t.pendingProps,i=Jn.current,l=!1,h=(t.flags&128)!==0,s;if((s=h)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Dn(Jn,i&1),e===null)return FC(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=n.children,e=n.fallback,l?(n=t.mode,l=t.child,h={mode:"hidden",children:h},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=h):l=ob(h,n,0,null),e=td(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=qC(r),t.memoizedState=WC,e):tT(t,h));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return V9(e,t,h,n,s,i,r);if(l){l=n.fallback,h=t.mode,i=e.child,s=i.sibling;var m={mode:"hidden",children:n.children};return!(h&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=m,t.deletions=null):(n=Kc(i,m),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?l=Kc(s,l):(l=td(l,h,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,h=e.child.memoizedState,h=h===null?qC(r):{baseLanes:h.baseLanes|r,cachePool:null,transitions:h.transitions},l.memoizedState=h,l.childLanes=e.childLanes&~r,t.memoizedState=WC,n}return l=e.child,e=l.sibling,n=Kc(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function tT(e,t){return t=ob({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Jy(e,t,r,n){return n!==null&&jk(n),_f(t,e.child,null,r),e=tT(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function V9(e,t,r,n,i,l,h){if(r)return t.flags&256?(t.flags&=-257,n=Iw(Error(_t(422))),Jy(e,t,h,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,i=t.mode,n=ob({mode:"visible",children:n.children},i,0,null),l=td(l,i,h,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&_f(t,e.child,null,h),t.child.memoizedState=qC(h),t.memoizedState=WC,l);if(!(t.mode&1))return Jy(e,t,h,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,l=Error(_t(419)),n=Iw(l,n,void 0),Jy(e,t,h,n)}if(s=(h&e.childLanes)!==0,Zo||s){if(n=$i,n!==null){switch(h&-h){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|h)?0:i,i!==0&&i!==l.retryLane&&(l.retryLane=i,Ql(e,i),bs(n,e,i,-1))}return sT(),n=Iw(Error(_t(421))),Jy(e,t,h,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=t7.bind(null,e),i._reactRetry=t,null):(e=l.treeContext,va=Gc(i.nextSibling),_a=t,Hn=!0,gs=null,e!==null&&(Ba[Fa++]=jl,Ba[Fa++]=Vl,Ba[Fa++]=cd,jl=e.id,Vl=e.overflow,cd=t),t=tT(t,n.children),t.flags|=4096,t)}function IA(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),NC(e.return,t,r)}function Pw(e,t,r,n,i){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=i)}function i$(e,t,r){var n=t.pendingProps,i=n.revealOrder,l=n.tail;if(zo(e,t,n.children,r),n=Jn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&IA(e,r,t);else if(e.tag===19)IA(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Dn(Jn,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&x_(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Pw(t,!1,i,r,l);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&x_(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Pw(t,!0,r,null,l);break;case"together":Pw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function D0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ec(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),dd|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_t(153));if(t.child!==null){for(e=t.child,r=Kc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Kc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function U9(e,t,r){switch(t.tag){case 3:r$(t),yf();break;case 5:AO(t);break;case 1:Xo(t.type)&&p_(t);break;case 4:qk(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Dn(v_,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Dn(Jn,Jn.current&1),t.flags|=128,null):r&t.child.childLanes?n$(e,t,r):(Dn(Jn,Jn.current&1),e=ec(e,t,r),e!==null?e.sibling:null);Dn(Jn,Jn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return i$(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Dn(Jn,Jn.current),n)break;return null;case 22:case 23:return t.lanes=0,e$(e,t,r)}return ec(e,t,r)}var o$,ZC,a$,s$;o$=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ZC=function(){};a$=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Ju(nl.current);var l=null;switch(r){case"input":i=gC(e,i),n=gC(e,n),l=[];break;case"select":i=ti({},i,{value:void 0}),n=ti({},n,{value:void 0}),l=[];break;case"textarea":i=_C(e,i),n=_C(e,n),l=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=h_)}bC(r,n);var h;r=null;for(y in i)if(!n.hasOwnProperty(y)&&i.hasOwnProperty(y)&&i[y]!=null)if(y==="style"){var s=i[y];for(h in s)s.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(ig.hasOwnProperty(y)?l||(l=[]):(l=l||[]).push(y,null));for(y in n){var m=n[y];if(s=i!=null?i[y]:void 0,n.hasOwnProperty(y)&&m!==s&&(m!=null||s!=null))if(y==="style")if(s){for(h in s)!s.hasOwnProperty(h)||m&&m.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in m)m.hasOwnProperty(h)&&s[h]!==m[h]&&(r||(r={}),r[h]=m[h])}else r||(l||(l=[]),l.push(y,r)),r=m;else y==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,s=s?s.__html:void 0,m!=null&&s!==m&&(l=l||[]).push(y,m)):y==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(y,""+m):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(ig.hasOwnProperty(y)?(m!=null&&y==="onScroll"&&$n("scroll",e),l||s===m||(l=[])):(l=l||[]).push(y,m))}r&&(l=l||[]).push("style",r);var y=l;(t.updateQueue=y)&&(t.flags|=4)}};s$=function(e,t,r,n){r!==n&&(t.flags|=4)};function hm(e,t){if(!Hn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function po(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function H9(e,t,r){var n=t.pendingProps;switch(Nk(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return po(t),null;case 1:return Xo(t.type)&&f_(),po(t),null;case 3:return n=t.stateNode,xf(),Bn(Ko),Bn(xo),Kk(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Xy(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gs!==null&&(r2(gs),gs=null))),ZC(e,t),po(t),null;case 5:Zk(t);var i=Ju(gg.current);if(r=t.type,e!==null&&t.stateNode!=null)a$(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(_t(166));return po(t),null}if(e=Ju(nl.current),Xy(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[Ys]=t,n[pg]=l,e=(t.mode&1)!==0,r){case"dialog":$n("cancel",n),$n("close",n);break;case"iframe":case"object":case"embed":$n("load",n);break;case"video":case"audio":for(i=0;i<Am.length;i++)$n(Am[i],n);break;case"source":$n("error",n);break;case"img":case"image":case"link":$n("error",n),$n("load",n);break;case"details":$n("toggle",n);break;case"input":$P(n,l),$n("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},$n("invalid",n);break;case"textarea":FP(n,l),$n("invalid",n)}bC(r,l),i=null;for(var h in l)if(l.hasOwnProperty(h)){var s=l[h];h==="children"?typeof s=="string"?n.textContent!==s&&(l.suppressHydrationWarning!==!0&&Ky(n.textContent,s,e),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(l.suppressHydrationWarning!==!0&&Ky(n.textContent,s,e),i=["children",""+s]):ig.hasOwnProperty(h)&&s!=null&&h==="onScroll"&&$n("scroll",n)}switch(r){case"input":jy(n),BP(n,l,!0);break;case"textarea":jy(n),NP(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=h_)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{h=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=LL(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=h.createElement(r,{is:n.is}):(e=h.createElement(r),r==="select"&&(h=e,n.multiple?h.multiple=!0:n.size&&(h.size=n.size))):e=h.createElementNS(e,r),e[Ys]=t,e[pg]=n,o$(e,t,!1,!1),t.stateNode=e;e:{switch(h=wC(r,n),r){case"dialog":$n("cancel",e),$n("close",e),i=n;break;case"iframe":case"object":case"embed":$n("load",e),i=n;break;case"video":case"audio":for(i=0;i<Am.length;i++)$n(Am[i],e);i=n;break;case"source":$n("error",e),i=n;break;case"img":case"image":case"link":$n("error",e),$n("load",e),i=n;break;case"details":$n("toggle",e),i=n;break;case"input":$P(e,n),i=gC(e,n),$n("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=ti({},n,{value:void 0}),$n("invalid",e);break;case"textarea":FP(e,n),i=_C(e,n),$n("invalid",e);break;default:i=n}bC(r,i),s=i;for(l in s)if(s.hasOwnProperty(l)){var m=s[l];l==="style"?BL(e,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&OL(e,m)):l==="children"?typeof m=="string"?(r!=="textarea"||m!=="")&&og(e,m):typeof m=="number"&&og(e,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ig.hasOwnProperty(l)?m!=null&&l==="onScroll"&&$n("scroll",e):m!=null&&kk(e,l,m,h))}switch(r){case"input":jy(e),BP(e,n,!1);break;case"textarea":jy(e),NP(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Yc(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?of(e,!!n.multiple,l,!1):n.defaultValue!=null&&of(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=h_)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return po(t),null;case 6:if(e&&t.stateNode!=null)s$(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(_t(166));if(r=Ju(gg.current),Ju(nl.current),Xy(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ys]=t,(l=n.nodeValue!==r)&&(e=_a,e!==null))switch(e.tag){case 3:Ky(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ky(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ys]=t,t.stateNode=n}return po(t),null;case 13:if(Bn(Jn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Hn&&va!==null&&t.mode&1&&!(t.flags&128))kO(),yf(),t.flags|=98560,l=!1;else if(l=Xy(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(_t(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(_t(317));l[Ys]=t}else yf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;po(t),l=!1}else gs!==null&&(r2(gs),gs=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Jn.current&1?Pi===0&&(Pi=3):sT())),t.updateQueue!==null&&(t.flags|=4),po(t),null);case 4:return xf(),ZC(e,t),e===null&&hg(t.stateNode.containerInfo),po(t),null;case 10:return Hk(t.type._context),po(t),null;case 17:return Xo(t.type)&&f_(),po(t),null;case 19:if(Bn(Jn),l=t.memoizedState,l===null)return po(t),null;if(n=(t.flags&128)!==0,h=l.rendering,h===null)if(n)hm(l,!1);else{if(Pi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=x_(e),h!==null){for(t.flags|=128,hm(l,!1),n=h.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,h=l.alternate,h===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,e=h.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Dn(Jn,Jn.current&1|2),t.child}e=e.sibling}l.tail!==null&&gi()>wf&&(t.flags|=128,n=!0,hm(l,!1),t.lanes=4194304)}else{if(!n)if(e=x_(h),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),hm(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!Hn)return po(t),null}else 2*gi()-l.renderingStartTime>wf&&r!==1073741824&&(t.flags|=128,n=!0,hm(l,!1),t.lanes=4194304);l.isBackwards?(h.sibling=t.child,t.child=h):(r=l.last,r!==null?r.sibling=h:t.child=h,l.last=h)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=gi(),t.sibling=null,r=Jn.current,Dn(Jn,n?r&1|2:r&1),t):(po(t),null);case 22:case 23:return aT(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?la&1073741824&&(po(t),t.subtreeFlags&6&&(t.flags|=8192)):po(t),null;case 24:return null;case 25:return null}throw Error(_t(156,t.tag))}function G9(e,t){switch(Nk(t),t.tag){case 1:return Xo(t.type)&&f_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xf(),Bn(Ko),Bn(xo),Kk(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zk(t),null;case 13:if(Bn(Jn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_t(340));yf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Bn(Jn),null;case 4:return xf(),null;case 10:return Hk(t.type._context),null;case 22:case 23:return aT(),null;case 24:return null;default:return null}}var Qy=!1,vo=!1,W9=typeof WeakSet=="function"?WeakSet:Set,tr=null;function Zh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){si(e,t,n)}else r.current=null}function KC(e,t,r){try{r()}catch(n){si(e,t,n)}}var PA=!1;function q9(e,t){if(DC=c_,e=hO(),Bk(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var h=0,s=-1,m=-1,y=0,S=0,T=e,I=null;t:for(;;){for(var D;T!==r||i!==0&&T.nodeType!==3||(s=h+i),T!==l||n!==0&&T.nodeType!==3||(m=h+n),T.nodeType===3&&(h+=T.nodeValue.length),(D=T.firstChild)!==null;)I=T,T=D;for(;;){if(T===e)break t;if(I===r&&++y===i&&(s=h),I===l&&++S===n&&(m=h),(D=T.nextSibling)!==null)break;T=I,I=T.parentNode}T=D}r=s===-1||m===-1?null:{start:s,end:m}}else r=null}r=r||{start:0,end:0}}else r=null;for(MC={focusedElem:e,selectionRange:r},c_=!1,tr=t;tr!==null;)if(t=tr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,tr=e;else for(;tr!==null;){t=tr;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var V=F.memoizedProps,Z=F.memoizedState,z=t.stateNode,O=z.getSnapshotBeforeUpdate(t.elementType===t.type?V:fs(t.type,V),Z);z.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var L=t.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_t(163))}}catch(te){si(t,t.return,te)}if(e=t.sibling,e!==null){e.return=t.return,tr=e;break}tr=t.return}return F=PA,PA=!1,F}function Hm(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var l=i.destroy;i.destroy=void 0,l!==void 0&&KC(t,r,l)}i=i.next}while(i!==n)}}function nb(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function XC(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function l$(e){var t=e.alternate;t!==null&&(e.alternate=null,l$(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ys],delete t[pg],delete t[OC],delete t[P9],delete t[A9])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function c$(e){return e.tag===5||e.tag===3||e.tag===4}function AA(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||c$(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function YC(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=h_));else if(n!==4&&(e=e.child,e!==null))for(YC(e,t,r),e=e.sibling;e!==null;)YC(e,t,r),e=e.sibling}function JC(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(JC(e,t,r),e=e.sibling;e!==null;)JC(e,t,r),e=e.sibling}var Ki=null,ps=!1;function Pc(e,t,r){for(r=r.child;r!==null;)u$(e,t,r),r=r.sibling}function u$(e,t,r){if(rl&&typeof rl.onCommitFiberUnmount=="function")try{rl.onCommitFiberUnmount(Kx,r)}catch{}switch(r.tag){case 5:vo||Zh(r,t);case 6:var n=Ki,i=ps;Ki=null,Pc(e,t,r),Ki=n,ps=i,Ki!==null&&(ps?(e=Ki,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ki.removeChild(r.stateNode));break;case 18:Ki!==null&&(ps?(e=Ki,r=r.stateNode,e.nodeType===8?ww(e.parentNode,r):e.nodeType===1&&ww(e,r),cg(e)):ww(Ki,r.stateNode));break;case 4:n=Ki,i=ps,Ki=r.stateNode.containerInfo,ps=!0,Pc(e,t,r),Ki=n,ps=i;break;case 0:case 11:case 14:case 15:if(!vo&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var l=i,h=l.destroy;l=l.tag,h!==void 0&&(l&2||l&4)&&KC(r,t,h),i=i.next}while(i!==n)}Pc(e,t,r);break;case 1:if(!vo&&(Zh(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){si(r,t,s)}Pc(e,t,r);break;case 21:Pc(e,t,r);break;case 22:r.mode&1?(vo=(n=vo)||r.memoizedState!==null,Pc(e,t,r),vo=n):Pc(e,t,r);break;default:Pc(e,t,r)}}function RA(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new W9),t.forEach(function(n){var i=r7.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function us(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var l=e,h=t,s=h;e:for(;s!==null;){switch(s.tag){case 5:Ki=s.stateNode,ps=!1;break e;case 3:Ki=s.stateNode.containerInfo,ps=!0;break e;case 4:Ki=s.stateNode.containerInfo,ps=!0;break e}s=s.return}if(Ki===null)throw Error(_t(160));u$(l,h,i),Ki=null,ps=!1;var m=i.alternate;m!==null&&(m.return=null),i.return=null}catch(y){si(i,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)d$(t,e),t=t.sibling}function d$(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(us(t,e),Hs(e),n&4){try{Hm(3,e,e.return),nb(3,e)}catch(V){si(e,e.return,V)}try{Hm(5,e,e.return)}catch(V){si(e,e.return,V)}}break;case 1:us(t,e),Hs(e),n&512&&r!==null&&Zh(r,r.return);break;case 5:if(us(t,e),Hs(e),n&512&&r!==null&&Zh(r,r.return),e.flags&32){var i=e.stateNode;try{og(i,"")}catch(V){si(e,e.return,V)}}if(n&4&&(i=e.stateNode,i!=null)){var l=e.memoizedProps,h=r!==null?r.memoizedProps:l,s=e.type,m=e.updateQueue;if(e.updateQueue=null,m!==null)try{s==="input"&&l.type==="radio"&&l.name!=null&&ML(i,l),wC(s,h);var y=wC(s,l);for(h=0;h<m.length;h+=2){var S=m[h],T=m[h+1];S==="style"?BL(i,T):S==="dangerouslySetInnerHTML"?OL(i,T):S==="children"?og(i,T):kk(i,S,T,y)}switch(s){case"input":vC(i,l);break;case"textarea":zL(i,l);break;case"select":var I=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!l.multiple;var D=l.value;D!=null?of(i,!!l.multiple,D,!1):I!==!!l.multiple&&(l.defaultValue!=null?of(i,!!l.multiple,l.defaultValue,!0):of(i,!!l.multiple,l.multiple?[]:"",!1))}i[pg]=l}catch(V){si(e,e.return,V)}}break;case 6:if(us(t,e),Hs(e),n&4){if(e.stateNode===null)throw Error(_t(162));i=e.stateNode,l=e.memoizedProps;try{i.nodeValue=l}catch(V){si(e,e.return,V)}}break;case 3:if(us(t,e),Hs(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{cg(t.containerInfo)}catch(V){si(e,e.return,V)}break;case 4:us(t,e),Hs(e);break;case 13:us(t,e),Hs(e),i=e.child,i.flags&8192&&(l=i.memoizedState!==null,i.stateNode.isHidden=l,!l||i.alternate!==null&&i.alternate.memoizedState!==null||(iT=gi())),n&4&&RA(e);break;case 22:if(S=r!==null&&r.memoizedState!==null,e.mode&1?(vo=(y=vo)||S,us(t,e),vo=y):us(t,e),Hs(e),n&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!S&&e.mode&1)for(tr=e,S=e.child;S!==null;){for(T=tr=S;tr!==null;){switch(I=tr,D=I.child,I.tag){case 0:case 11:case 14:case 15:Hm(4,I,I.return);break;case 1:Zh(I,I.return);var F=I.stateNode;if(typeof F.componentWillUnmount=="function"){n=I,r=I.return;try{t=n,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch(V){si(n,r,V)}}break;case 5:Zh(I,I.return);break;case 22:if(I.memoizedState!==null){MA(T);continue}}D!==null?(D.return=I,tr=D):MA(T)}S=S.sibling}e:for(S=null,T=e;;){if(T.tag===5){if(S===null){S=T;try{i=T.stateNode,y?(l=i.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(s=T.stateNode,m=T.memoizedProps.style,h=m!=null&&m.hasOwnProperty("display")?m.display:null,s.style.display=$L("display",h))}catch(V){si(e,e.return,V)}}}else if(T.tag===6){if(S===null)try{T.stateNode.nodeValue=y?"":T.memoizedProps}catch(V){si(e,e.return,V)}}else if((T.tag!==22&&T.tag!==23||T.memoizedState===null||T===e)&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===e)break e;for(;T.sibling===null;){if(T.return===null||T.return===e)break e;S===T&&(S=null),T=T.return}S===T&&(S=null),T.sibling.return=T.return,T=T.sibling}}break;case 19:us(t,e),Hs(e),n&4&&RA(e);break;case 21:break;default:us(t,e),Hs(e)}}function Hs(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(c$(r)){var n=r;break e}r=r.return}throw Error(_t(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(og(i,""),n.flags&=-33);var l=AA(e);JC(e,l,i);break;case 3:case 4:var h=n.stateNode.containerInfo,s=AA(e);YC(e,s,h);break;default:throw Error(_t(161))}}catch(m){si(e,e.return,m)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Z9(e,t,r){tr=e,h$(e)}function h$(e,t,r){for(var n=(e.mode&1)!==0;tr!==null;){var i=tr,l=i.child;if(i.tag===22&&n){var h=i.memoizedState!==null||Qy;if(!h){var s=i.alternate,m=s!==null&&s.memoizedState!==null||vo;s=Qy;var y=vo;if(Qy=h,(vo=m)&&!y)for(tr=i;tr!==null;)h=tr,m=h.child,h.tag===22&&h.memoizedState!==null?zA(i):m!==null?(m.return=h,tr=m):zA(i);for(;l!==null;)tr=l,h$(l),l=l.sibling;tr=i,Qy=s,vo=y}DA(e)}else i.subtreeFlags&8772&&l!==null?(l.return=i,tr=l):DA(e)}}function DA(e){for(;tr!==null;){var t=tr;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:vo||nb(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!vo)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:fs(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&gA(t,l,n);break;case 3:var h=t.updateQueue;if(h!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}gA(t,h,r)}break;case 5:var s=t.stateNode;if(r===null&&t.flags&4){r=s;var m=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&r.focus();break;case"img":m.src&&(r.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var S=y.memoizedState;if(S!==null){var T=S.dehydrated;T!==null&&cg(T)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_t(163))}vo||t.flags&512&&XC(t)}catch(I){si(t,t.return,I)}}if(t===e){tr=null;break}if(r=t.sibling,r!==null){r.return=t.return,tr=r;break}tr=t.return}}function MA(e){for(;tr!==null;){var t=tr;if(t===e){tr=null;break}var r=t.sibling;if(r!==null){r.return=t.return,tr=r;break}tr=t.return}}function zA(e){for(;tr!==null;){var t=tr;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nb(4,t)}catch(m){si(t,r,m)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(m){si(t,i,m)}}var l=t.return;try{XC(t)}catch(m){si(t,l,m)}break;case 5:var h=t.return;try{XC(t)}catch(m){si(t,h,m)}}}catch(m){si(t,t.return,m)}if(t===e){tr=null;break}var s=t.sibling;if(s!==null){s.return=t.return,tr=s;break}tr=t.return}}var K9=Math.ceil,S_=sc.ReactCurrentDispatcher,rT=sc.ReactCurrentOwner,Ga=sc.ReactCurrentBatchConfig,nn=0,$i=null,wi=null,eo=0,la=0,Kh=uu(0),Pi=0,xg=null,dd=0,ib=0,nT=0,Gm=null,qo=null,iT=0,wf=1/0,Ll=null,C_=!1,QC=null,qc=null,e0=!1,Nc=null,k_=0,Wm=0,e2=null,M0=-1,z0=0;function Lo(){return nn&6?gi():M0!==-1?M0:M0=gi()}function Zc(e){return e.mode&1?nn&2&&eo!==0?eo&-eo:D9.transition!==null?(z0===0&&(z0=XL()),z0):(e=vn,e!==0||(e=window.event,e=e===void 0?16:nO(e.type)),e):1}function bs(e,t,r,n){if(50<Wm)throw Wm=0,e2=null,Error(_t(185));ev(e,r,n),(!(nn&2)||e!==$i)&&(e===$i&&(!(nn&2)&&(ib|=r),Pi===4&&Lc(e,eo)),Yo(e,n),r===1&&nn===0&&!(t.mode&1)&&(wf=gi()+500,eb&&du()))}function Yo(e,t){var r=e.callbackNode;DU(e,t);var n=l_(e,e===$i?eo:0);if(n===0)r!==null&&UP(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&UP(r),t===1)e.tag===0?R9(LA.bind(null,e)):wO(LA.bind(null,e)),E9(function(){!(nn&6)&&du()}),r=null;else{switch(YL(n)){case 1:r=Ak;break;case 4:r=ZL;break;case 16:r=s_;break;case 536870912:r=KL;break;default:r=s_}r=x$(r,f$.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function f$(e,t){if(M0=-1,z0=0,nn&6)throw Error(_t(327));var r=e.callbackNode;if(uf()&&e.callbackNode!==r)return null;var n=l_(e,e===$i?eo:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=T_(e,n);else{t=n;var i=nn;nn|=2;var l=m$();($i!==e||eo!==t)&&(Ll=null,wf=gi()+500,ed(e,t));do try{J9();break}catch(s){p$(e,s)}while(!0);Uk(),S_.current=l,nn=i,wi!==null?t=0:($i=null,eo=0,t=Pi)}if(t!==0){if(t===2&&(i=EC(e),i!==0&&(n=i,t=t2(e,i))),t===1)throw r=xg,ed(e,0),Lc(e,n),Yo(e,gi()),r;if(t===6)Lc(e,n);else{if(i=e.current.alternate,!(n&30)&&!X9(i)&&(t=T_(e,n),t===2&&(l=EC(e),l!==0&&(n=l,t=t2(e,l))),t===1))throw r=xg,ed(e,0),Lc(e,n),Yo(e,gi()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(_t(345));case 2:Gu(e,qo,Ll);break;case 3:if(Lc(e,n),(n&130023424)===n&&(t=iT+500-gi(),10<t)){if(l_(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Lo(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=LC(Gu.bind(null,e,qo,Ll),t);break}Gu(e,qo,Ll);break;case 4:if(Lc(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var h=31-xs(n);l=1<<h,h=t[h],h>i&&(i=h),n&=~l}if(n=i,n=gi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*K9(n/1960))-n,10<n){e.timeoutHandle=LC(Gu.bind(null,e,qo,Ll),n);break}Gu(e,qo,Ll);break;case 5:Gu(e,qo,Ll);break;default:throw Error(_t(329))}}}return Yo(e,gi()),e.callbackNode===r?f$.bind(null,e):null}function t2(e,t){var r=Gm;return e.current.memoizedState.isDehydrated&&(ed(e,t).flags|=256),e=T_(e,t),e!==2&&(t=qo,qo=r,t!==null&&r2(t)),e}function r2(e){qo===null?qo=e:qo.push.apply(qo,e)}function X9(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],l=i.getSnapshot;i=i.value;try{if(!Ts(l(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lc(e,t){for(t&=~nT,t&=~ib,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-xs(t),n=1<<r;e[r]=-1,t&=~n}}function LA(e){if(nn&6)throw Error(_t(327));uf();var t=l_(e,0);if(!(t&1))return Yo(e,gi()),null;var r=T_(e,t);if(e.tag!==0&&r===2){var n=EC(e);n!==0&&(t=n,r=t2(e,n))}if(r===1)throw r=xg,ed(e,0),Lc(e,t),Yo(e,gi()),r;if(r===6)throw Error(_t(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gu(e,qo,Ll),Yo(e,gi()),null}function oT(e,t){var r=nn;nn|=1;try{return e(t)}finally{nn=r,nn===0&&(wf=gi()+500,eb&&du())}}function hd(e){Nc!==null&&Nc.tag===0&&!(nn&6)&&uf();var t=nn;nn|=1;var r=Ga.transition,n=vn;try{if(Ga.transition=null,vn=1,e)return e()}finally{vn=n,Ga.transition=r,nn=t,!(nn&6)&&du()}}function aT(){la=Kh.current,Bn(Kh)}function ed(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,T9(r)),wi!==null)for(r=wi.return;r!==null;){var n=r;switch(Nk(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&f_();break;case 3:xf(),Bn(Ko),Bn(xo),Kk();break;case 5:Zk(n);break;case 4:xf();break;case 13:Bn(Jn);break;case 19:Bn(Jn);break;case 10:Hk(n.type._context);break;case 22:case 23:aT()}r=r.return}if($i=e,wi=e=Kc(e.current,null),eo=la=t,Pi=0,xg=null,nT=ib=dd=0,qo=Gm=null,Yu!==null){for(t=0;t<Yu.length;t++)if(r=Yu[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,l=r.pending;if(l!==null){var h=l.next;l.next=i,n.next=h}r.pending=n}Yu=null}return e}function p$(e,t){do{var r=wi;try{if(Uk(),A0.current=w_,b_){for(var n=ei.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}b_=!1}if(ud=0,Oi=Ei=ei=null,Um=!1,vg=0,rT.current=null,r===null||r.return===null){Pi=1,xg=t,wi=null;break}e:{var l=e,h=r.return,s=r,m=t;if(t=eo,s.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var y=m,S=s,T=S.tag;if(!(S.mode&1)&&(T===0||T===11||T===15)){var I=S.alternate;I?(S.updateQueue=I.updateQueue,S.memoizedState=I.memoizedState,S.lanes=I.lanes):(S.updateQueue=null,S.memoizedState=null)}var D=wA(h);if(D!==null){D.flags&=-257,SA(D,h,s,l,t),D.mode&1&&bA(l,y,t),t=D,m=y;var F=t.updateQueue;if(F===null){var V=new Set;V.add(m),t.updateQueue=V}else F.add(m);break e}else{if(!(t&1)){bA(l,y,t),sT();break e}m=Error(_t(426))}}else if(Hn&&s.mode&1){var Z=wA(h);if(Z!==null){!(Z.flags&65536)&&(Z.flags|=256),SA(Z,h,s,l,t),jk(bf(m,s));break e}}l=m=bf(m,s),Pi!==4&&(Pi=2),Gm===null?Gm=[l]:Gm.push(l),l=h;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var z=YO(l,m,t);mA(l,z);break e;case 1:s=m;var O=l.type,L=l.stateNode;if(!(l.flags&128)&&(typeof O.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(qc===null||!qc.has(L)))){l.flags|=65536,t&=-t,l.lanes|=t;var te=JO(l,s,t);mA(l,te);break e}}l=l.return}while(l!==null)}v$(r)}catch(j){t=j,wi===r&&r!==null&&(wi=r=r.return);continue}break}while(!0)}function m$(){var e=S_.current;return S_.current=w_,e===null?w_:e}function sT(){(Pi===0||Pi===3||Pi===2)&&(Pi=4),$i===null||!(dd&268435455)&&!(ib&268435455)||Lc($i,eo)}function T_(e,t){var r=nn;nn|=2;var n=m$();($i!==e||eo!==t)&&(Ll=null,ed(e,t));do try{Y9();break}catch(i){p$(e,i)}while(!0);if(Uk(),nn=r,S_.current=n,wi!==null)throw Error(_t(261));return $i=null,eo=0,Pi}function Y9(){for(;wi!==null;)g$(wi)}function J9(){for(;wi!==null&&!SU();)g$(wi)}function g$(e){var t=_$(e.alternate,e,la);e.memoizedProps=e.pendingProps,t===null?v$(e):wi=t,rT.current=null}function v$(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=G9(r,t),r!==null){r.flags&=32767,wi=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pi=6,wi=null;return}}else if(r=H9(r,t,la),r!==null){wi=r;return}if(t=t.sibling,t!==null){wi=t;return}wi=t=e}while(t!==null);Pi===0&&(Pi=5)}function Gu(e,t,r){var n=vn,i=Ga.transition;try{Ga.transition=null,vn=1,Q9(e,t,r,n)}finally{Ga.transition=i,vn=n}return null}function Q9(e,t,r,n){do uf();while(Nc!==null);if(nn&6)throw Error(_t(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(_t(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(MU(e,l),e===$i&&(wi=$i=null,eo=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||e0||(e0=!0,x$(s_,function(){return uf(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Ga.transition,Ga.transition=null;var h=vn;vn=1;var s=nn;nn|=4,rT.current=null,q9(e,r),d$(r,e),_9(MC),c_=!!DC,MC=DC=null,e.current=r,Z9(r),CU(),nn=s,vn=h,Ga.transition=l}else e.current=r;if(e0&&(e0=!1,Nc=e,k_=i),l=e.pendingLanes,l===0&&(qc=null),EU(r.stateNode),Yo(e,gi()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(C_)throw C_=!1,e=QC,QC=null,e;return k_&1&&e.tag!==0&&uf(),l=e.pendingLanes,l&1?e===e2?Wm++:(Wm=0,e2=e):Wm=0,du(),null}function uf(){if(Nc!==null){var e=YL(k_),t=Ga.transition,r=vn;try{if(Ga.transition=null,vn=16>e?16:e,Nc===null)var n=!1;else{if(e=Nc,Nc=null,k_=0,nn&6)throw Error(_t(331));var i=nn;for(nn|=4,tr=e.current;tr!==null;){var l=tr,h=l.child;if(tr.flags&16){var s=l.deletions;if(s!==null){for(var m=0;m<s.length;m++){var y=s[m];for(tr=y;tr!==null;){var S=tr;switch(S.tag){case 0:case 11:case 15:Hm(8,S,l)}var T=S.child;if(T!==null)T.return=S,tr=T;else for(;tr!==null;){S=tr;var I=S.sibling,D=S.return;if(l$(S),S===y){tr=null;break}if(I!==null){I.return=D,tr=I;break}tr=D}}}var F=l.alternate;if(F!==null){var V=F.child;if(V!==null){F.child=null;do{var Z=V.sibling;V.sibling=null,V=Z}while(V!==null)}}tr=l}}if(l.subtreeFlags&2064&&h!==null)h.return=l,tr=h;else e:for(;tr!==null;){if(l=tr,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Hm(9,l,l.return)}var z=l.sibling;if(z!==null){z.return=l.return,tr=z;break e}tr=l.return}}var O=e.current;for(tr=O;tr!==null;){h=tr;var L=h.child;if(h.subtreeFlags&2064&&L!==null)L.return=h,tr=L;else e:for(h=O;tr!==null;){if(s=tr,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:nb(9,s)}}catch(j){si(s,s.return,j)}if(s===h){tr=null;break e}var te=s.sibling;if(te!==null){te.return=s.return,tr=te;break e}tr=s.return}}if(nn=i,du(),rl&&typeof rl.onPostCommitFiberRoot=="function")try{rl.onPostCommitFiberRoot(Kx,e)}catch{}n=!0}return n}finally{vn=r,Ga.transition=t}}return!1}function OA(e,t,r){t=bf(r,t),t=YO(e,t,1),e=Wc(e,t,1),t=Lo(),e!==null&&(ev(e,1,t),Yo(e,t))}function si(e,t,r){if(e.tag===3)OA(e,e,r);else for(;t!==null;){if(t.tag===3){OA(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(qc===null||!qc.has(n))){e=bf(r,e),e=JO(t,e,1),t=Wc(t,e,1),e=Lo(),t!==null&&(ev(t,1,e),Yo(t,e));break}}t=t.return}}function e7(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Lo(),e.pingedLanes|=e.suspendedLanes&r,$i===e&&(eo&r)===r&&(Pi===4||Pi===3&&(eo&130023424)===eo&&500>gi()-iT?ed(e,0):nT|=r),Yo(e,t)}function y$(e,t){t===0&&(e.mode&1?(t=Hy,Hy<<=1,!(Hy&130023424)&&(Hy=4194304)):t=1);var r=Lo();e=Ql(e,t),e!==null&&(ev(e,t,r),Yo(e,r))}function t7(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),y$(e,r)}function r7(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(_t(314))}n!==null&&n.delete(t),y$(e,r)}var _$;_$=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ko.current)Zo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Zo=!1,U9(e,t,r);Zo=!!(e.flags&131072)}else Zo=!1,Hn&&t.flags&1048576&&SO(t,g_,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;D0(e,t),e=t.pendingProps;var i=vf(t,xo.current);cf(t,r),i=Yk(null,t,n,e,i,r);var l=Jk();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xo(n)?(l=!0,p_(t)):l=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Wk(t),i.updater=rb,t.stateNode=i,i._reactInternals=t,VC(t,n,e,r),t=GC(null,t,n,!0,l,r)):(t.tag=0,Hn&&l&&Fk(t),zo(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(D0(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=i7(n),e=fs(n,e),i){case 0:t=HC(null,t,n,e,r);break e;case 1:t=TA(null,t,n,e,r);break e;case 11:t=CA(null,t,n,e,r);break e;case 14:t=kA(null,t,n,fs(n.type,e),r);break e}throw Error(_t(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:fs(n,i),HC(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:fs(n,i),TA(e,t,n,i,r);case 3:e:{if(r$(t),e===null)throw Error(_t(387));n=t.pendingProps,l=t.memoizedState,i=l.element,PO(e,t),__(t,n,null,r);var h=t.memoizedState;if(n=h.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){i=bf(Error(_t(423)),t),t=EA(e,t,n,r,i);break e}else if(n!==i){i=bf(Error(_t(424)),t),t=EA(e,t,n,r,i);break e}else for(va=Gc(t.stateNode.containerInfo.firstChild),_a=t,Hn=!0,gs=null,r=EO(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(yf(),n===i){t=ec(e,t,r);break e}zo(e,t,n,r)}t=t.child}return t;case 5:return AO(t),e===null&&FC(t),n=t.type,i=t.pendingProps,l=e!==null?e.memoizedProps:null,h=i.children,zC(n,i)?h=null:l!==null&&zC(n,l)&&(t.flags|=32),t$(e,t),zo(e,t,h,r),t.child;case 6:return e===null&&FC(t),null;case 13:return n$(e,t,r);case 4:return qk(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=_f(t,null,n,r):zo(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:fs(n,i),CA(e,t,n,i,r);case 7:return zo(e,t,t.pendingProps,r),t.child;case 8:return zo(e,t,t.pendingProps.children,r),t.child;case 12:return zo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,l=t.memoizedProps,h=i.value,Dn(v_,n._currentValue),n._currentValue=h,l!==null)if(Ts(l.value,h)){if(l.children===i.children&&!Ko.current){t=ec(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var s=l.dependencies;if(s!==null){h=l.child;for(var m=s.firstContext;m!==null;){if(m.context===n){if(l.tag===1){m=Gl(-1,r&-r),m.tag=2;var y=l.updateQueue;if(y!==null){y=y.shared;var S=y.pending;S===null?m.next=m:(m.next=S.next,S.next=m),y.pending=m}}l.lanes|=r,m=l.alternate,m!==null&&(m.lanes|=r),NC(l.return,r,t),s.lanes|=r;break}m=m.next}}else if(l.tag===10)h=l.type===t.type?null:l.child;else if(l.tag===18){if(h=l.return,h===null)throw Error(_t(341));h.lanes|=r,s=h.alternate,s!==null&&(s.lanes|=r),NC(h,r,t),h=l.sibling}else h=l.child;if(h!==null)h.return=l;else for(h=l;h!==null;){if(h===t){h=null;break}if(l=h.sibling,l!==null){l.return=h.return,h=l;break}h=h.return}l=h}zo(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,cf(t,r),i=qa(i),n=n(i),t.flags|=1,zo(e,t,n,r),t.child;case 14:return n=t.type,i=fs(n,t.pendingProps),i=fs(n.type,i),kA(e,t,n,i,r);case 15:return QO(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:fs(n,i),D0(e,t),t.tag=1,Xo(n)?(e=!0,p_(t)):e=!1,cf(t,r),XO(t,n,i),VC(t,n,i,r),GC(null,t,n,!0,e,r);case 19:return i$(e,t,r);case 22:return e$(e,t,r)}throw Error(_t(156,t.tag))};function x$(e,t){return qL(e,t)}function n7(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Va(e,t,r,n){return new n7(e,t,r,n)}function lT(e){return e=e.prototype,!(!e||!e.isReactComponent)}function i7(e){if(typeof e=="function")return lT(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ek)return 11;if(e===Ik)return 14}return 2}function Kc(e,t){var r=e.alternate;return r===null?(r=Va(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function L0(e,t,r,n,i,l){var h=2;if(n=e,typeof e=="function")lT(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case Fh:return td(r.children,i,l,t);case Tk:h=8,i|=8;break;case hC:return e=Va(12,r,t,i|2),e.elementType=hC,e.lanes=l,e;case fC:return e=Va(13,r,t,i),e.elementType=fC,e.lanes=l,e;case pC:return e=Va(19,r,t,i),e.elementType=pC,e.lanes=l,e;case AL:return ob(r,i,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case IL:h=10;break e;case PL:h=9;break e;case Ek:h=11;break e;case Ik:h=14;break e;case Dc:h=16,n=null;break e}throw Error(_t(130,e==null?e:typeof e,""))}return t=Va(h,r,t,i),t.elementType=e,t.type=n,t.lanes=l,t}function td(e,t,r,n){return e=Va(7,e,n,t),e.lanes=r,e}function ob(e,t,r,n){return e=Va(22,e,n,t),e.elementType=AL,e.lanes=r,e.stateNode={isHidden:!1},e}function Aw(e,t,r){return e=Va(6,e,null,t),e.lanes=r,e}function Rw(e,t,r){return t=Va(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function o7(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dw(0),this.expirationTimes=dw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dw(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function cT(e,t,r,n,i,l,h,s,m){return e=new o7(e,t,r,s,m),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Va(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wk(l),e}function a7(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bh,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function b$(e){if(!e)return Jc;e=e._reactInternals;e:{if(Sd(e)!==e||e.tag!==1)throw Error(_t(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_t(171))}if(e.tag===1){var r=e.type;if(Xo(r))return bO(e,r,t)}return t}function w$(e,t,r,n,i,l,h,s,m){return e=cT(r,n,!0,e,i,l,h,s,m),e.context=b$(null),r=e.current,n=Lo(),i=Zc(r),l=Gl(n,i),l.callback=t??null,Wc(r,l,i),e.current.lanes=i,ev(e,i,n),Yo(e,n),e}function ab(e,t,r,n){var i=t.current,l=Lo(),h=Zc(i);return r=b$(r),t.context===null?t.context=r:t.pendingContext=r,t=Gl(l,h),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Wc(i,t,h),e!==null&&(bs(e,i,h,l),P0(e,i,h)),h}function E_(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $A(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function uT(e,t){$A(e,t),(e=e.alternate)&&$A(e,t)}var S$=typeof reportError=="function"?reportError:function(e){console.error(e)};function dT(e){this._internalRoot=e}sb.prototype.render=dT.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_t(409));ab(e,t,null,null)};sb.prototype.unmount=dT.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hd(function(){ab(null,e,null,null)}),t[Jl]=null}};function sb(e){this._internalRoot=e}sb.prototype.unstable_scheduleHydration=function(e){if(e){var t=eO();e={blockedOn:null,target:e,priority:t};for(var r=0;r<zc.length&&t!==0&&t<zc[r].priority;r++);zc.splice(r,0,e),r===0&&rO(e)}};function hT(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function lb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function BA(){}function s7(e,t,r,n,i){if(i){if(typeof n=="function"){var l=n;n=function(){var y=E_(h);l.call(y)}}var h=w$(t,n,e,0,null,!1,!1,"",BA);return e._reactRootContainer=h,e[Jl]=h.current,hg(e.nodeType===8?e.parentNode:e),hd(),h}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var y=E_(m);s.call(y)}}var m=cT(e,0,!1,null,null,!1,!1,"",BA);return e._reactRootContainer=m,e[Jl]=m.current,hg(e.nodeType===8?e.parentNode:e),hd(function(){ab(t,m,r,n)}),m}function cb(e,t,r,n,i){var l=r._reactRootContainer;if(l){var h=l;if(typeof i=="function"){var s=i;i=function(){var m=E_(h);s.call(m)}}ab(t,h,e,i)}else h=s7(r,t,e,i,n);return E_(h)}JL=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Pm(t.pendingLanes);r!==0&&(Rk(t,r|1),Yo(t,gi()),!(nn&6)&&(wf=gi()+500,du()))}break;case 13:hd(function(){var n=Ql(e,1);if(n!==null){var i=Lo();bs(n,e,1,i)}}),uT(e,1)}};Dk=function(e){if(e.tag===13){var t=Ql(e,134217728);if(t!==null){var r=Lo();bs(t,e,134217728,r)}uT(e,134217728)}};QL=function(e){if(e.tag===13){var t=Zc(e),r=Ql(e,t);if(r!==null){var n=Lo();bs(r,e,t,n)}uT(e,t)}};eO=function(){return vn};tO=function(e,t){var r=vn;try{return vn=e,t()}finally{vn=r}};CC=function(e,t,r){switch(t){case"input":if(vC(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Qx(n);if(!i)throw Error(_t(90));DL(n),vC(n,i)}}}break;case"textarea":zL(e,r);break;case"select":t=r.value,t!=null&&of(e,!!r.multiple,t,!1)}};jL=oT;VL=hd;var l7={usingClientEntryPoint:!1,Events:[rv,Uh,Qx,FL,NL,oT]},fm={findFiberByHostInstance:Xu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c7={bundleType:fm.bundleType,version:fm.version,rendererPackageName:fm.rendererPackageName,rendererConfig:fm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=GL(e),e===null?null:e.stateNode},findFiberByHostInstance:fm.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var t0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t0.isDisabled&&t0.supportsFiber)try{Kx=t0.inject(c7),rl=t0}catch{}}Ca.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l7;Ca.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hT(t))throw Error(_t(200));return a7(e,t,null,r)};Ca.createRoot=function(e,t){if(!hT(e))throw Error(_t(299));var r=!1,n="",i=S$;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=cT(e,1,!1,null,null,r,!1,n,i),e[Jl]=t.current,hg(e.nodeType===8?e.parentNode:e),new dT(t)};Ca.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_t(188)):(e=Object.keys(e).join(","),Error(_t(268,e)));return e=GL(t),e=e===null?null:e.stateNode,e};Ca.flushSync=function(e){return hd(e)};Ca.hydrate=function(e,t,r){if(!lb(t))throw Error(_t(200));return cb(null,e,t,!0,r)};Ca.hydrateRoot=function(e,t,r){if(!hT(e))throw Error(_t(405));var n=r!=null&&r.hydratedSources||null,i=!1,l="",h=S$;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),t=w$(t,null,e,1,r??null,i,!1,l,h),e[Jl]=t.current,hg(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new sb(t)};Ca.render=function(e,t,r){if(!lb(t))throw Error(_t(200));return cb(null,e,t,!1,r)};Ca.unmountComponentAtNode=function(e){if(!lb(e))throw Error(_t(40));return e._reactRootContainer?(hd(function(){cb(null,null,e,!1,function(){e._reactRootContainer=null,e[Jl]=null})}),!0):!1};Ca.unstable_batchedUpdates=oT;Ca.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!lb(r))throw Error(_t(200));if(e==null||e._reactInternals===void 0)throw Error(_t(38));return cb(e,t,r,!1,n)};Ca.version="18.3.1-next-f1338f8080-20240426";function C$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C$)}catch(e){console.error(e)}}C$(),CL.exports=Ca;var Cd=CL.exports;const r0=lx(Cd);function u7(e){return typeof e=="function"?e():e}const k$=R.forwardRef(function(t,r){const{children:n,container:i,disablePortal:l=!1}=t,[h,s]=R.useState(null),m=an(R.isValidElement(n)?Jg(n):null,r);if(Kl(()=>{l||s(u7(i)||document.body)},[i,l]),Kl(()=>{if(h&&!l)return n_(r,h),()=>{n_(r,null)}},[r,h,l]),l){if(R.isValidElement(n)){const y={ref:m};return R.cloneElement(n,y)}return H.jsx(R.Fragment,{children:n})}return H.jsx(R.Fragment,{children:h&&Cd.createPortal(n,h)})});function d7(e={}){const{disabled:t=!1,focusableWhenDisabled:r,rootRef:n}=e,i=R.useContext(Gx);if(i===null)throw new Error("useMenuButton: no menu context available.");const{state:l,dispatch:h,registerTrigger:s,popupId:m}=i,{getRootProps:y,rootRef:S,active:T}=Rs({disabled:t,focusableWhenDisabled:r,rootRef:n}),I=an(S,s),D=z=>O=>{var L;(L=z.onClick)==null||L.call(z,O),!O.defaultMuiPrevented&&h({type:vs.toggle,event:O})},F=z=>O=>{var L;(L=z.onKeyDown)==null||L.call(z,O),!O.defaultMuiPrevented&&(O.key==="ArrowDown"||O.key==="ArrowUp")&&(O.preventDefault(),h({type:vs.open,event:O}))},V=(z={})=>({onClick:D(z),onKeyDown:F(z)});return{active:T,getRootProps:(z={})=>{const O=Qi(z),L=Xl(V,y);return K({"aria-haspopup":"menu","aria-expanded":l.open,"aria-controls":m},z,O,L(O),{tabIndex:0,ref:I})},open:l.open,rootRef:I}}function h7(e){return`menu-item-${e.size}`}const f7={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function p7(e){var t;const{disabled:r=!1,id:n,rootRef:i,label:l,disableFocusOnHover:h=!1}=e,s=ta(n),m=R.useRef(null),y=R.useMemo(()=>({disabled:r,id:s??"",label:l,ref:m}),[r,s,l]),{dispatch:S}=(t=R.useContext(Gx))!=null?t:f7,{getRootProps:T,highlighted:I}=wk({item:s,handlePointerOverEvents:!h}),{index:D,totalItemCount:F}=Zx(s??h7,y),{getRootProps:V,focusVisible:Z,rootRef:z}=Rs({disabled:r,focusableWhenDisabled:!0}),O=an(z,i,m);R.useDebugValue({id:s,highlighted:I,disabled:r,label:l});const L=$=>J=>{var ie;(ie=$.onClick)==null||ie.call($,J),!J.defaultMuiPrevented&&S({type:vs.close,event:J})},te=($={})=>K({},$,{onClick:L($)});function j($={}){const J=Qi($),ie=Xl(te,Xl(V,T));return K({},$,J,ie(J),{id:s,ref:O,role:"menuitem"})}return s===void 0?{getRootProps:j,disabled:!1,focusVisible:Z,highlighted:!1,index:-1,totalItemCount:0,rootRef:O}:{getRootProps:j,disabled:r,focusVisible:Z,highlighted:I,index:D,totalItemCount:F,rootRef:O}}function m7(e){const t=R.useContext(lu);if(!t)throw new Error("MenuItem: ListContext was not found.");const r=ta(e),{getItemState:n,dispatch:i}=t;let l;r!=null?l=n(r):l={focusable:!0,highlighted:!1,selected:!1};const{highlighted:h,selected:s,focusable:m}=l,y=R.useCallback(T=>{if(T!==r)throw new Error(["Base UI MenuItem: Tried to access the state of another MenuItem.",`itemValue: ${T} | id: ${r}`,"This is unsupported when the MenuItem uses the MenuItemContextStabilizer as a performance optimization."].join("/n"));return{highlighted:h,selected:s,focusable:m}},[h,s,m,r]);return{contextValue:R.useMemo(()=>({dispatch:i,getItemState:y}),[i,y]),id:r}}function g7(e){const t=tl(e);return t.body===e?Xg(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function qm(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function FA(e){return parseInt(Xg(e).getComputedStyle(e).paddingRight,10)||0}function v7(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,n=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||n}function NA(e,t,r,n,i){const l=[t,r,...n];[].forEach.call(e.children,h=>{const s=l.indexOf(h)===-1,m=!v7(h);s&&m&&qm(h,i)})}function Dw(e,t){let r=-1;return e.some((n,i)=>t(n)?(r=i,!0):!1),r}function y7(e,t){const r=[],n=e.container;if(!t.disableScrollLock){if(g7(n)){const h=EV(tl(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${FA(n)+h}px`;const s=tl(n).querySelectorAll(".mui-fixed");[].forEach.call(s,m=>{r.push({value:m.style.paddingRight,property:"padding-right",el:m}),m.style.paddingRight=`${FA(m)+h}px`})}let l;if(n.parentNode instanceof DocumentFragment)l=tl(n).body;else{const h=n.parentElement,s=Xg(n);l=(h==null?void 0:h.nodeName)==="HTML"&&s.getComputedStyle(h).overflowY==="scroll"?h:n}r.push({value:l.style.overflow,property:"overflow",el:l},{value:l.style.overflowX,property:"overflow-x",el:l},{value:l.style.overflowY,property:"overflow-y",el:l}),l.style.overflow="hidden"}return()=>{r.forEach(({value:l,el:h,property:s})=>{l?h.style.setProperty(s,l):h.style.removeProperty(s)})}}function _7(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class x7{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,r){let n=this.modals.indexOf(t);if(n!==-1)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&qm(t.modalRef,!1);const i=_7(r);NA(r,t.mount,t.modalRef,i,!0);const l=Dw(this.containers,h=>h.container===r);return l!==-1?(this.containers[l].modals.push(t),n):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:i}),n)}mount(t,r){const n=Dw(this.containers,l=>l.modals.indexOf(t)!==-1),i=this.containers[n];i.restore||(i.restore=y7(i,r))}remove(t,r=!0){const n=this.modals.indexOf(t);if(n===-1)return n;const i=Dw(this.containers,h=>h.modals.indexOf(t)!==-1),l=this.containers[i];if(l.modals.splice(l.modals.indexOf(t),1),this.modals.splice(n,1),l.modals.length===0)l.restore&&l.restore(),t.modalRef&&qm(t.modalRef,r),NA(l.container,t.mount,t.modalRef,l.hiddenSiblings,!1),this.containers.splice(i,1);else{const h=l.modals[l.modals.length-1];h.modalRef&&qm(h.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function b7(e){return typeof e=="function"?e():e}function w7(e){return e?e.props.hasOwnProperty("in"):!1}const S7=new x7;function C7(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:n=!1,manager:i=S7,closeAfterTransition:l=!1,onTransitionEnter:h,onTransitionExited:s,children:m,onClose:y,open:S,rootRef:T}=e,I=R.useRef({}),D=R.useRef(null),F=R.useRef(null),V=an(F,T),[Z,z]=R.useState(!S),O=w7(m);let L=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(L=!1);const te=()=>tl(D.current),j=()=>(I.current.modalRef=F.current,I.current.mount=D.current,I.current),$=()=>{i.mount(j(),{disableScrollLock:n}),F.current&&(F.current.scrollTop=0)},J=Bc(()=>{const Se=b7(t)||te().body;i.add(j(),Se),F.current&&$()}),ie=R.useCallback(()=>i.isTopModal(j()),[i]),xe=Bc(Se=>{D.current=Se,Se&&(S&&ie()?$():F.current&&qm(F.current,L))}),ge=R.useCallback(()=>{i.remove(j(),L)},[L,i]);R.useEffect(()=>()=>{ge()},[ge]),R.useEffect(()=>{S?J():(!O||!l)&&ge()},[S,ge,O,l,J]);const we=Se=>Fe=>{var Ce;(Ce=Se.onKeyDown)==null||Ce.call(Se,Fe),!(Fe.key!=="Escape"||Fe.which===229||!ie())&&(r||(Fe.stopPropagation(),y&&y(Fe,"escapeKeyDown")))},Te=Se=>Fe=>{var Ce;(Ce=Se.onClick)==null||Ce.call(Se,Fe),Fe.target===Fe.currentTarget&&y&&y(Fe,"backdropClick")};return{getRootProps:(Se={})=>{const Fe=Qi(e);delete Fe.onTransitionEnter,delete Fe.onTransitionExited;const Ce=K({},Fe,Se);return K({role:"presentation"},Ce,{onKeyDown:we(Ce),ref:V})},getBackdropProps:(Se={})=>{const Fe=Se;return K({"aria-hidden":!0},Fe,{onClick:Te(Fe),open:S})},getTransitionProps:()=>{const Se=()=>{z(!1),h&&h()},Fe=()=>{z(!0),s&&s(),l&&ge()};return{onEnter:xP(Se,m==null?void 0:m.props.onEnter),onExited:xP(Fe,m==null?void 0:m.props.onExited)}},rootRef:V,portalRef:xe,isTopModal:ie,exited:Z,hasTransition:O}}function k7(e){const{value:t,label:r,disabled:n,rootRef:i,id:l}=e,{getRootProps:h,highlighted:s,selected:m}=wk({item:t}),{getRootProps:y,rootRef:S}=Rs({disabled:n,focusableWhenDisabled:!0}),T=ta(l),I=R.useRef(null),D=R.useMemo(()=>({disabled:n,label:r,value:t,ref:I,id:T}),[n,r,t,T]),{index:F}=Zx(t,D),V=an(i,I,S),Z=O=>L=>{var te;(te=O.onKeyDown)==null||te.call(O,L),!L.defaultMuiPrevented&&[" ","Enter"].includes(L.key)&&(L.defaultMuiPrevented=!0)},z=(O={})=>({onKeyDown:Z(O)});return{getRootProps:(O={})=>{const L=Qi(O),te=Xl(h,Xl(y,z));return K({},O,L,te(L),{id:T,ref:V,role:"option","aria-selected":m})},highlighted:s,index:F,selected:m,rootRef:V}}function T7(e){const t=R.useContext(lu);if(!t)throw new Error("Option: ListContext was not found.");const{getItemState:r,dispatch:n}=t,{highlighted:i,selected:l,focusable:h}=r(e),s=R.useCallback(y=>{if(y!==e)throw new Error(["Base UI Option: Tried to access the state of another Option.","This is unsupported when the Option uses the OptionContextStabilizer as a performance optimization."].join("/n"));return{highlighted:i,selected:l,focusable:h}},[i,l,h,e]);return{contextValue:R.useMemo(()=>({dispatch:n,getItemState:s}),[n,s])}}var Jo="top",Ka="bottom",Xa="right",Qo="left",fT="auto",iv=[Jo,Ka,Xa,Qo],Sf="start",bg="end",E7="clippingParents",T$="viewport",pm="popper",I7="reference",jA=iv.reduce(function(e,t){return e.concat([t+"-"+Sf,t+"-"+bg])},[]),E$=[].concat(iv,[fT]).reduce(function(e,t){return e.concat([t,t+"-"+Sf,t+"-"+bg])},[]),P7="beforeRead",A7="read",R7="afterRead",D7="beforeMain",M7="main",z7="afterMain",L7="beforeWrite",O7="write",$7="afterWrite",B7=[P7,A7,R7,D7,M7,z7,L7,O7,$7];function ul(e){return e?(e.nodeName||"").toLowerCase():null}function wa(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function fd(e){var t=wa(e).Element;return e instanceof t||e instanceof Element}function Wa(e){var t=wa(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function pT(e){if(typeof ShadowRoot>"u")return!1;var t=wa(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function F7(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},i=t.attributes[r]||{},l=t.elements[r];!Wa(l)||!ul(l)||(Object.assign(l.style,n),Object.keys(i).forEach(function(h){var s=i[h];s===!1?l.removeAttribute(h):l.setAttribute(h,s===!0?"":s)}))})}function N7(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var i=t.elements[n],l=t.attributes[n]||{},h=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),s=h.reduce(function(m,y){return m[y]="",m},{});!Wa(i)||!ul(i)||(Object.assign(i.style,s),Object.keys(l).forEach(function(m){i.removeAttribute(m)}))})}}const j7={name:"applyStyles",enabled:!0,phase:"write",fn:F7,effect:N7,requires:["computeStyles"]};function il(e){return e.split("-")[0]}var rd=Math.max,I_=Math.min,Cf=Math.round;function n2(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function I$(){return!/^((?!chrome|android).)*safari/i.test(n2())}function kf(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),i=1,l=1;t&&Wa(e)&&(i=e.offsetWidth>0&&Cf(n.width)/e.offsetWidth||1,l=e.offsetHeight>0&&Cf(n.height)/e.offsetHeight||1);var h=fd(e)?wa(e):window,s=h.visualViewport,m=!I$()&&r,y=(n.left+(m&&s?s.offsetLeft:0))/i,S=(n.top+(m&&s?s.offsetTop:0))/l,T=n.width/i,I=n.height/l;return{width:T,height:I,top:S,right:y+T,bottom:S+I,left:y,x:y,y:S}}function mT(e){var t=kf(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function P$(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&pT(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function tc(e){return wa(e).getComputedStyle(e)}function V7(e){return["table","td","th"].indexOf(ul(e))>=0}function hu(e){return((fd(e)?e.ownerDocument:e.document)||window.document).documentElement}function ub(e){return ul(e)==="html"?e:e.assignedSlot||e.parentNode||(pT(e)?e.host:null)||hu(e)}function VA(e){return!Wa(e)||tc(e).position==="fixed"?null:e.offsetParent}function U7(e){var t=/firefox/i.test(n2()),r=/Trident/i.test(n2());if(r&&Wa(e)){var n=tc(e);if(n.position==="fixed")return null}var i=ub(e);for(pT(i)&&(i=i.host);Wa(i)&&["html","body"].indexOf(ul(i))<0;){var l=tc(i);if(l.transform!=="none"||l.perspective!=="none"||l.contain==="paint"||["transform","perspective"].indexOf(l.willChange)!==-1||t&&l.willChange==="filter"||t&&l.filter&&l.filter!=="none")return i;i=i.parentNode}return null}function ov(e){for(var t=wa(e),r=VA(e);r&&V7(r)&&tc(r).position==="static";)r=VA(r);return r&&(ul(r)==="html"||ul(r)==="body"&&tc(r).position==="static")?t:r||U7(e)||t}function gT(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Zm(e,t,r){return rd(e,I_(t,r))}function H7(e,t,r){var n=Zm(e,t,r);return n>r?r:n}function A$(){return{top:0,right:0,bottom:0,left:0}}function R$(e){return Object.assign({},A$(),e)}function D$(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var G7=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,R$(typeof t!="number"?t:D$(t,iv))};function W7(e){var t,r=e.state,n=e.name,i=e.options,l=r.elements.arrow,h=r.modifiersData.popperOffsets,s=il(r.placement),m=gT(s),y=[Qo,Xa].indexOf(s)>=0,S=y?"height":"width";if(!(!l||!h)){var T=G7(i.padding,r),I=mT(l),D=m==="y"?Jo:Qo,F=m==="y"?Ka:Xa,V=r.rects.reference[S]+r.rects.reference[m]-h[m]-r.rects.popper[S],Z=h[m]-r.rects.reference[m],z=ov(l),O=z?m==="y"?z.clientHeight||0:z.clientWidth||0:0,L=V/2-Z/2,te=T[D],j=O-I[S]-T[F],$=O/2-I[S]/2+L,J=Zm(te,$,j),ie=m;r.modifiersData[n]=(t={},t[ie]=J,t.centerOffset=J-$,t)}}function q7(e){var t=e.state,r=e.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||P$(t.elements.popper,i)&&(t.elements.arrow=i))}const Z7={name:"arrow",enabled:!0,phase:"main",fn:W7,effect:q7,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Tf(e){return e.split("-")[1]}var K7={top:"auto",right:"auto",bottom:"auto",left:"auto"};function X7(e,t){var r=e.x,n=e.y,i=t.devicePixelRatio||1;return{x:Cf(r*i)/i||0,y:Cf(n*i)/i||0}}function UA(e){var t,r=e.popper,n=e.popperRect,i=e.placement,l=e.variation,h=e.offsets,s=e.position,m=e.gpuAcceleration,y=e.adaptive,S=e.roundOffsets,T=e.isFixed,I=h.x,D=I===void 0?0:I,F=h.y,V=F===void 0?0:F,Z=typeof S=="function"?S({x:D,y:V}):{x:D,y:V};D=Z.x,V=Z.y;var z=h.hasOwnProperty("x"),O=h.hasOwnProperty("y"),L=Qo,te=Jo,j=window;if(y){var $=ov(r),J="clientHeight",ie="clientWidth";if($===wa(r)&&($=hu(r),tc($).position!=="static"&&s==="absolute"&&(J="scrollHeight",ie="scrollWidth")),$=$,i===Jo||(i===Qo||i===Xa)&&l===bg){te=Ka;var xe=T&&$===j&&j.visualViewport?j.visualViewport.height:$[J];V-=xe-n.height,V*=m?1:-1}if(i===Qo||(i===Jo||i===Ka)&&l===bg){L=Xa;var ge=T&&$===j&&j.visualViewport?j.visualViewport.width:$[ie];D-=ge-n.width,D*=m?1:-1}}var we=Object.assign({position:s},y&&K7),Te=S===!0?X7({x:D,y:V},wa(r)):{x:D,y:V};if(D=Te.x,V=Te.y,m){var Pe;return Object.assign({},we,(Pe={},Pe[te]=O?"0":"",Pe[L]=z?"0":"",Pe.transform=(j.devicePixelRatio||1)<=1?"translate("+D+"px, "+V+"px)":"translate3d("+D+"px, "+V+"px, 0)",Pe))}return Object.assign({},we,(t={},t[te]=O?V+"px":"",t[L]=z?D+"px":"",t.transform="",t))}function Y7(e){var t=e.state,r=e.options,n=r.gpuAcceleration,i=n===void 0?!0:n,l=r.adaptive,h=l===void 0?!0:l,s=r.roundOffsets,m=s===void 0?!0:s,y={placement:il(t.placement),variation:Tf(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,UA(Object.assign({},y,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:h,roundOffsets:m})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,UA(Object.assign({},y,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:m})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const J7={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Y7,data:{}};var n0={passive:!0};function Q7(e){var t=e.state,r=e.instance,n=e.options,i=n.scroll,l=i===void 0?!0:i,h=n.resize,s=h===void 0?!0:h,m=wa(t.elements.popper),y=[].concat(t.scrollParents.reference,t.scrollParents.popper);return l&&y.forEach(function(S){S.addEventListener("scroll",r.update,n0)}),s&&m.addEventListener("resize",r.update,n0),function(){l&&y.forEach(function(S){S.removeEventListener("scroll",r.update,n0)}),s&&m.removeEventListener("resize",r.update,n0)}}const eH={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Q7,data:{}};var tH={left:"right",right:"left",bottom:"top",top:"bottom"};function O0(e){return e.replace(/left|right|bottom|top/g,function(t){return tH[t]})}var rH={start:"end",end:"start"};function HA(e){return e.replace(/start|end/g,function(t){return rH[t]})}function vT(e){var t=wa(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function yT(e){return kf(hu(e)).left+vT(e).scrollLeft}function nH(e,t){var r=wa(e),n=hu(e),i=r.visualViewport,l=n.clientWidth,h=n.clientHeight,s=0,m=0;if(i){l=i.width,h=i.height;var y=I$();(y||!y&&t==="fixed")&&(s=i.offsetLeft,m=i.offsetTop)}return{width:l,height:h,x:s+yT(e),y:m}}function iH(e){var t,r=hu(e),n=vT(e),i=(t=e.ownerDocument)==null?void 0:t.body,l=rd(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),h=rd(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-n.scrollLeft+yT(e),m=-n.scrollTop;return tc(i||r).direction==="rtl"&&(s+=rd(r.clientWidth,i?i.clientWidth:0)-l),{width:l,height:h,x:s,y:m}}function _T(e){var t=tc(e),r=t.overflow,n=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function M$(e){return["html","body","#document"].indexOf(ul(e))>=0?e.ownerDocument.body:Wa(e)&&_T(e)?e:M$(ub(e))}function Km(e,t){var r;t===void 0&&(t=[]);var n=M$(e),i=n===((r=e.ownerDocument)==null?void 0:r.body),l=wa(n),h=i?[l].concat(l.visualViewport||[],_T(n)?n:[]):n,s=t.concat(h);return i?s:s.concat(Km(ub(h)))}function i2(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function oH(e,t){var r=kf(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function GA(e,t,r){return t===T$?i2(nH(e,r)):fd(t)?oH(t,r):i2(iH(hu(e)))}function aH(e){var t=Km(ub(e)),r=["absolute","fixed"].indexOf(tc(e).position)>=0,n=r&&Wa(e)?ov(e):e;return fd(n)?t.filter(function(i){return fd(i)&&P$(i,n)&&ul(i)!=="body"}):[]}function sH(e,t,r,n){var i=t==="clippingParents"?aH(e):[].concat(t),l=[].concat(i,[r]),h=l[0],s=l.reduce(function(m,y){var S=GA(e,y,n);return m.top=rd(S.top,m.top),m.right=I_(S.right,m.right),m.bottom=I_(S.bottom,m.bottom),m.left=rd(S.left,m.left),m},GA(e,h,n));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function z$(e){var t=e.reference,r=e.element,n=e.placement,i=n?il(n):null,l=n?Tf(n):null,h=t.x+t.width/2-r.width/2,s=t.y+t.height/2-r.height/2,m;switch(i){case Jo:m={x:h,y:t.y-r.height};break;case Ka:m={x:h,y:t.y+t.height};break;case Xa:m={x:t.x+t.width,y:s};break;case Qo:m={x:t.x-r.width,y:s};break;default:m={x:t.x,y:t.y}}var y=i?gT(i):null;if(y!=null){var S=y==="y"?"height":"width";switch(l){case Sf:m[y]=m[y]-(t[S]/2-r[S]/2);break;case bg:m[y]=m[y]+(t[S]/2-r[S]/2);break}}return m}function wg(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=n===void 0?e.placement:n,l=r.strategy,h=l===void 0?e.strategy:l,s=r.boundary,m=s===void 0?E7:s,y=r.rootBoundary,S=y===void 0?T$:y,T=r.elementContext,I=T===void 0?pm:T,D=r.altBoundary,F=D===void 0?!1:D,V=r.padding,Z=V===void 0?0:V,z=R$(typeof Z!="number"?Z:D$(Z,iv)),O=I===pm?I7:pm,L=e.rects.popper,te=e.elements[F?O:I],j=sH(fd(te)?te:te.contextElement||hu(e.elements.popper),m,S,h),$=kf(e.elements.reference),J=z$({reference:$,element:L,strategy:"absolute",placement:i}),ie=i2(Object.assign({},L,J)),xe=I===pm?ie:$,ge={top:j.top-xe.top+z.top,bottom:xe.bottom-j.bottom+z.bottom,left:j.left-xe.left+z.left,right:xe.right-j.right+z.right},we=e.modifiersData.offset;if(I===pm&&we){var Te=we[i];Object.keys(ge).forEach(function(Pe){var We=[Xa,Ka].indexOf(Pe)>=0?1:-1,De=[Jo,Ka].indexOf(Pe)>=0?"y":"x";ge[Pe]+=Te[De]*We})}return ge}function lH(e,t){t===void 0&&(t={});var r=t,n=r.placement,i=r.boundary,l=r.rootBoundary,h=r.padding,s=r.flipVariations,m=r.allowedAutoPlacements,y=m===void 0?E$:m,S=Tf(n),T=S?s?jA:jA.filter(function(F){return Tf(F)===S}):iv,I=T.filter(function(F){return y.indexOf(F)>=0});I.length===0&&(I=T);var D=I.reduce(function(F,V){return F[V]=wg(e,{placement:V,boundary:i,rootBoundary:l,padding:h})[il(V)],F},{});return Object.keys(D).sort(function(F,V){return D[F]-D[V]})}function cH(e){if(il(e)===fT)return[];var t=O0(e);return[HA(e),t,HA(t)]}function uH(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var i=r.mainAxis,l=i===void 0?!0:i,h=r.altAxis,s=h===void 0?!0:h,m=r.fallbackPlacements,y=r.padding,S=r.boundary,T=r.rootBoundary,I=r.altBoundary,D=r.flipVariations,F=D===void 0?!0:D,V=r.allowedAutoPlacements,Z=t.options.placement,z=il(Z),O=z===Z,L=m||(O||!F?[O0(Z)]:cH(Z)),te=[Z].concat(L).reduce(function(St,$t){return St.concat(il($t)===fT?lH(t,{placement:$t,boundary:S,rootBoundary:T,padding:y,flipVariations:F,allowedAutoPlacements:V}):$t)},[]),j=t.rects.reference,$=t.rects.popper,J=new Map,ie=!0,xe=te[0],ge=0;ge<te.length;ge++){var we=te[ge],Te=il(we),Pe=Tf(we)===Sf,We=[Jo,Ka].indexOf(Te)>=0,De=We?"width":"height",Se=wg(t,{placement:we,boundary:S,rootBoundary:T,altBoundary:I,padding:y}),Fe=We?Pe?Xa:Qo:Pe?Ka:Jo;j[De]>$[De]&&(Fe=O0(Fe));var Ce=O0(Fe),Ne=[];if(l&&Ne.push(Se[Te]<=0),s&&Ne.push(Se[Fe]<=0,Se[Ce]<=0),Ne.every(function(St){return St})){xe=we,ie=!1;break}J.set(we,Ne)}if(ie)for(var Ye=F?3:1,at=function($t){var Ct=te.find(function(it){var Ze=J.get(it);if(Ze)return Ze.slice(0,$t).every(function(rt){return rt})});if(Ct)return xe=Ct,"break"},st=Ye;st>0;st--){var Dt=at(st);if(Dt==="break")break}t.placement!==xe&&(t.modifiersData[n]._skip=!0,t.placement=xe,t.reset=!0)}}const dH={name:"flip",enabled:!0,phase:"main",fn:uH,requiresIfExists:["offset"],data:{_skip:!1}};function WA(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function qA(e){return[Jo,Xa,Ka,Qo].some(function(t){return e[t]>=0})}function hH(e){var t=e.state,r=e.name,n=t.rects.reference,i=t.rects.popper,l=t.modifiersData.preventOverflow,h=wg(t,{elementContext:"reference"}),s=wg(t,{altBoundary:!0}),m=WA(h,n),y=WA(s,i,l),S=qA(m),T=qA(y);t.modifiersData[r]={referenceClippingOffsets:m,popperEscapeOffsets:y,isReferenceHidden:S,hasPopperEscaped:T},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":S,"data-popper-escaped":T})}const fH={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hH};function pH(e,t,r){var n=il(e),i=[Qo,Jo].indexOf(n)>=0?-1:1,l=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,h=l[0],s=l[1];return h=h||0,s=(s||0)*i,[Qo,Xa].indexOf(n)>=0?{x:s,y:h}:{x:h,y:s}}function mH(e){var t=e.state,r=e.options,n=e.name,i=r.offset,l=i===void 0?[0,0]:i,h=E$.reduce(function(S,T){return S[T]=pH(T,t.rects,l),S},{}),s=h[t.placement],m=s.x,y=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=m,t.modifiersData.popperOffsets.y+=y),t.modifiersData[n]=h}const gH={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:mH};function vH(e){var t=e.state,r=e.name;t.modifiersData[r]=z$({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const yH={name:"popperOffsets",enabled:!0,phase:"read",fn:vH,data:{}};function _H(e){return e==="x"?"y":"x"}function xH(e){var t=e.state,r=e.options,n=e.name,i=r.mainAxis,l=i===void 0?!0:i,h=r.altAxis,s=h===void 0?!1:h,m=r.boundary,y=r.rootBoundary,S=r.altBoundary,T=r.padding,I=r.tether,D=I===void 0?!0:I,F=r.tetherOffset,V=F===void 0?0:F,Z=wg(t,{boundary:m,rootBoundary:y,padding:T,altBoundary:S}),z=il(t.placement),O=Tf(t.placement),L=!O,te=gT(z),j=_H(te),$=t.modifiersData.popperOffsets,J=t.rects.reference,ie=t.rects.popper,xe=typeof V=="function"?V(Object.assign({},t.rects,{placement:t.placement})):V,ge=typeof xe=="number"?{mainAxis:xe,altAxis:xe}:Object.assign({mainAxis:0,altAxis:0},xe),we=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Te={x:0,y:0};if($){if(l){var Pe,We=te==="y"?Jo:Qo,De=te==="y"?Ka:Xa,Se=te==="y"?"height":"width",Fe=$[te],Ce=Fe+Z[We],Ne=Fe-Z[De],Ye=D?-ie[Se]/2:0,at=O===Sf?J[Se]:ie[Se],st=O===Sf?-ie[Se]:-J[Se],Dt=t.elements.arrow,St=D&&Dt?mT(Dt):{width:0,height:0},$t=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:A$(),Ct=$t[We],it=$t[De],Ze=Zm(0,J[Se],St[Se]),rt=L?J[Se]/2-Ye-Ze-Ct-ge.mainAxis:at-Ze-Ct-ge.mainAxis,pt=L?-J[Se]/2+Ye+Ze+it+ge.mainAxis:st+Ze+it+ge.mainAxis,sr=t.elements.arrow&&ov(t.elements.arrow),rr=sr?te==="y"?sr.clientTop||0:sr.clientLeft||0:0,wr=(Pe=we==null?void 0:we[te])!=null?Pe:0,Lr=Fe+rt-wr-rr,nr=Fe+pt-wr,Et=Zm(D?I_(Ce,Lr):Ce,Fe,D?rd(Ne,nr):Ne);$[te]=Et,Te[te]=Et-Fe}if(s){var hr,Gt=te==="x"?Jo:Qo,Dr=te==="x"?Ka:Xa,He=$[j],xr=j==="y"?"height":"width",Tr=He+Z[Gt],Jt=He-Z[Dr],or=[Jo,Qo].indexOf(z)!==-1,Cr=(hr=we==null?void 0:we[j])!=null?hr:0,Mr=or?Tr:He-J[xr]-ie[xr]-Cr+ge.altAxis,Sr=or?He+J[xr]+ie[xr]-Cr-ge.altAxis:Jt,fr=D&&or?H7(Mr,He,Sr):Zm(D?Mr:Tr,He,D?Sr:Jt);$[j]=fr,Te[j]=fr-He}t.modifiersData[n]=Te}}const bH={name:"preventOverflow",enabled:!0,phase:"main",fn:xH,requiresIfExists:["offset"]};function wH(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function SH(e){return e===wa(e)||!Wa(e)?vT(e):wH(e)}function CH(e){var t=e.getBoundingClientRect(),r=Cf(t.width)/e.offsetWidth||1,n=Cf(t.height)/e.offsetHeight||1;return r!==1||n!==1}function kH(e,t,r){r===void 0&&(r=!1);var n=Wa(t),i=Wa(t)&&CH(t),l=hu(t),h=kf(e,i,r),s={scrollLeft:0,scrollTop:0},m={x:0,y:0};return(n||!n&&!r)&&((ul(t)!=="body"||_T(l))&&(s=SH(t)),Wa(t)?(m=kf(t,!0),m.x+=t.clientLeft,m.y+=t.clientTop):l&&(m.x=yT(l))),{x:h.left+s.scrollLeft-m.x,y:h.top+s.scrollTop-m.y,width:h.width,height:h.height}}function TH(e){var t=new Map,r=new Set,n=[];e.forEach(function(l){t.set(l.name,l)});function i(l){r.add(l.name);var h=[].concat(l.requires||[],l.requiresIfExists||[]);h.forEach(function(s){if(!r.has(s)){var m=t.get(s);m&&i(m)}}),n.push(l)}return e.forEach(function(l){r.has(l.name)||i(l)}),n}function EH(e){var t=TH(e);return B7.reduce(function(r,n){return r.concat(t.filter(function(i){return i.phase===n}))},[])}function IH(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function PH(e){var t=e.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var ZA={placement:"bottom",modifiers:[],strategy:"absolute"};function KA(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function AH(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,i=t.defaultOptions,l=i===void 0?ZA:i;return function(s,m,y){y===void 0&&(y=l);var S={placement:"bottom",orderedModifiers:[],options:Object.assign({},ZA,l),modifiersData:{},elements:{reference:s,popper:m},attributes:{},styles:{}},T=[],I=!1,D={state:S,setOptions:function(z){var O=typeof z=="function"?z(S.options):z;V(),S.options=Object.assign({},l,S.options,O),S.scrollParents={reference:fd(s)?Km(s):s.contextElement?Km(s.contextElement):[],popper:Km(m)};var L=EH(PH([].concat(n,S.options.modifiers)));return S.orderedModifiers=L.filter(function(te){return te.enabled}),F(),D.update()},forceUpdate:function(){if(!I){var z=S.elements,O=z.reference,L=z.popper;if(KA(O,L)){S.rects={reference:kH(O,ov(L),S.options.strategy==="fixed"),popper:mT(L)},S.reset=!1,S.placement=S.options.placement,S.orderedModifiers.forEach(function(ge){return S.modifiersData[ge.name]=Object.assign({},ge.data)});for(var te=0;te<S.orderedModifiers.length;te++){if(S.reset===!0){S.reset=!1,te=-1;continue}var j=S.orderedModifiers[te],$=j.fn,J=j.options,ie=J===void 0?{}:J,xe=j.name;typeof $=="function"&&(S=$({state:S,options:ie,name:xe,instance:D})||S)}}}},update:IH(function(){return new Promise(function(Z){D.forceUpdate(),Z(S)})}),destroy:function(){V(),I=!0}};if(!KA(s,m))return D;D.setOptions(y).then(function(Z){!I&&y.onFirstUpdate&&y.onFirstUpdate(Z)});function F(){S.orderedModifiers.forEach(function(Z){var z=Z.name,O=Z.options,L=O===void 0?{}:O,te=Z.effect;if(typeof te=="function"){var j=te({state:S,name:z,instance:D,options:L}),$=function(){};T.push(j||$)}})}function V(){T.forEach(function(Z){return Z()}),T=[]}return D}}var RH=[eH,yH,J7,j7,gH,dH,bH,Z7,fH],DH=AH({defaultModifiers:RH});const L$="Popper";function MH(e){return wL(L$,e)}S8(L$,["root"]);const zH=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],LH=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function OH(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function o2(e){return typeof e=="function"?e():e}function $H(e){return e.nodeType!==void 0}const BH=()=>Nr({root:["root"]},_8(MH)),FH={},NH=R.forwardRef(function(t,r){var n;const{anchorEl:i,children:l,direction:h,disablePortal:s,modifiers:m,open:y,placement:S,popperOptions:T,popperRef:I,slotProps:D={},slots:F={},TransitionProps:V}=t,Z=Ht(t,zH),z=R.useRef(null),O=an(z,r),L=R.useRef(null),te=an(L,I),j=R.useRef(te);Kl(()=>{j.current=te},[te]),R.useImperativeHandle(I,()=>L.current,[]);const $=OH(S,h),[J,ie]=R.useState($),[xe,ge]=R.useState(o2(i));R.useEffect(()=>{L.current&&L.current.forceUpdate()}),R.useEffect(()=>{i&&ge(o2(i))},[i]),Kl(()=>{if(!xe||!y)return;const De=Ce=>{ie(Ce.placement)};let Se=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Ce})=>{De(Ce)}}];m!=null&&(Se=Se.concat(m)),T&&T.modifiers!=null&&(Se=Se.concat(T.modifiers));const Fe=DH(xe,z.current,K({placement:$},T,{modifiers:Se}));return j.current(Fe),()=>{Fe.destroy(),j.current(null)}},[xe,s,m,y,T,$]);const we={placement:J};V!==null&&(we.TransitionProps=V);const Te=BH(),Pe=(n=F.root)!=null?n:"div",We=fL({elementType:Pe,externalSlotProps:D.root,externalForwardedProps:Z,additionalProps:{role:"tooltip",ref:O},ownerState:t,className:Te.root});return H.jsx(Pe,K({},We,{children:typeof l=="function"?l(we):l}))}),db=R.forwardRef(function(t,r){const{anchorEl:n,children:i,container:l,direction:h="ltr",disablePortal:s=!1,keepMounted:m=!1,modifiers:y,open:S,placement:T="bottom",popperOptions:I=FH,popperRef:D,style:F,transition:V=!1,slotProps:Z={},slots:z={}}=t,O=Ht(t,LH),[L,te]=R.useState(!0),j=()=>{te(!1)},$=()=>{te(!0)};if(!m&&!S&&(!V||L))return null;let J;if(l)J=l;else if(n){const ge=o2(n);J=ge&&$H(ge)?tl(ge).body:tl(null).body}const ie=!S&&m&&(!V||L)?"none":void 0,xe=V?{in:S,onEnter:j,onExited:$}:void 0;return H.jsx(k$,{disablePortal:s,container:J,children:H.jsx(NH,K({anchorEl:n,direction:h,disablePortal:s,modifiers:y,ref:r,open:V?!L:S,placement:T,popperOptions:I,popperRef:D,slotProps:Z,slots:z},O,{style:K({position:"fixed",top:0,left:0,display:ie},F),TransitionProps:xe,children:i}))})}),P_={buttonClick:"buttonClick",browserAutoFill:"browserAutoFill"},jH=e=>{const{label:t,value:r}=e;return typeof t=="string"?t:typeof r=="string"?r:String(e)};function VH(e,t){const{open:r}=e,{context:{selectionMode:n}}=t;if(t.type===P_.buttonClick){var i;const m=(i=e.selectedValues[0])!=null?i:Li(null,"start",t.context);return K({},e,{open:!r,highlightedValue:r?null:m})}if(t.type===P_.browserAutoFill)return xk(t.item,e,t.context);const l=Wx(e,t);switch(t.type){case wn.keyDown:if(e.open){if(t.event.key==="Escape")return K({},l,{open:!1})}else{if(t.event.key==="ArrowDown"){var h;return K({},e,{open:!0,highlightedValue:(h=e.selectedValues[0])!=null?h:Li(null,"start",t.context)})}if(t.event.key==="ArrowUp"){var s;return K({},e,{open:!0,highlightedValue:(s=e.selectedValues[0])!=null?s:Li(null,"end",t.context)})}}break;case wn.itemClick:if(n==="single")return K({},l,{open:!1});break;case wn.blur:return K({},l,{open:!1});default:return l}return l}function UH(e){return Array.isArray(e)?e.length===0?"":JSON.stringify(e.map(t=>t.value)):(e==null?void 0:e.value)==null?"":typeof e.value=="string"||typeof e.value=="number"?e.value:JSON.stringify(e.value)}function HH(e){const{areOptionsEqual:t,buttonRef:r,defaultOpen:n=!1,defaultValue:i,disabled:l=!1,listboxId:h,listboxRef:s,multiple:m=!1,name:y,required:S,onChange:T,onHighlightChange:I,onOpenChange:D,open:F,options:V,getOptionAsString:Z=jH,getSerializedValue:z=UH,value:O,componentName:L="useSelect"}=e,te=R.useRef(null),j=an(r,te),$=R.useRef(null),J=ta(h);let ie;O===void 0&&i===void 0?ie=[]:i!==void 0&&(m?ie=i:ie=i==null?[]:[i]);const xe=R.useMemo(()=>{if(O!==void 0)return m?O:O==null?[]:[O]},[O,m]),{subitems:ge,contextValue:we}=qx(),Te=R.useMemo(()=>V!=null?new Map(V.map((je,kt)=>[je.value,{value:je.value,label:je.label,disabled:je.disabled,ref:R.createRef(),id:`${J}_${kt}`}])):ge,[V,ge,J]),Pe=an(s,$),{getRootProps:We,active:De,focusVisible:Se,rootRef:Fe}=Rs({disabled:l,rootRef:j}),Ce=R.useMemo(()=>Array.from(Te.keys()),[Te]),Ne=R.useCallback(je=>{if(t!==void 0){const kt=Ce.find(bt=>t(bt,je));return Te.get(kt)}return Te.get(je)},[Te,t,Ce]),Ye=R.useCallback(je=>{var kt;const bt=Ne(je);return(kt=bt==null?void 0:bt.disabled)!=null?kt:!1},[Ne]),at=R.useCallback(je=>{const kt=Ne(je);return kt?Z(kt):""},[Ne,Z]),st=R.useMemo(()=>({selectedValues:xe,open:F}),[xe,F]),Dt=R.useCallback(je=>{var kt;return(kt=Te.get(je))==null?void 0:kt.id},[Te]),St=R.useCallback((je,kt)=>{if(m)T==null||T(je,kt);else{var bt;T==null||T(je,(bt=kt[0])!=null?bt:null)}},[m,T]),$t=R.useCallback((je,kt)=>{I==null||I(je,kt??null)},[I]),Ct=R.useCallback((je,kt,bt)=>{if(kt==="open"&&(D==null||D(bt),bt===!1&&(je==null?void 0:je.type)!=="blur")){var Ee;(Ee=te.current)==null||Ee.focus()}},[D]),it=R.useCallback(je=>{var kt,bt;return je==null?null:(kt=(bt=ge.get(je))==null?void 0:bt.ref.current)!=null?kt:null},[ge]),Ze={getInitialState:()=>{var je;return{highlightedValue:null,selectedValues:(je=ie)!=null?je:[],open:n}},getItemId:Dt,controlledProps:st,focusManagement:"DOM",getItemDomElement:it,itemComparer:t,isItemDisabled:Ye,rootRef:Pe,onChange:St,onHighlightChange:$t,onStateChange:Ct,reducerActionContext:R.useMemo(()=>({multiple:m}),[m]),items:Ce,getItemAsString:at,selectionMode:m?"multiple":"single",stateReducer:VH,componentName:L},{dispatch:rt,getRootProps:pt,contextValue:sr,state:{open:rr,highlightedValue:wr,selectedValues:Lr},rootRef:nr}=bk(Ze),Et=R.useRef(rr);Kl(()=>{if(rr&&wr!==null){var je;const kt=(je=Ne(wr))==null?void 0:je.ref;if(!$.current||!(kt!=null&&kt.current))return;Et.current||kt.current.focus({preventScroll:!0});const bt=$.current.getBoundingClientRect(),Ee=kt.current.getBoundingClientRect();Ee.top<bt.top?$.current.scrollTop-=bt.top-Ee.top:Ee.bottom>bt.bottom&&($.current.scrollTop+=Ee.bottom-bt.bottom)}},[rr,wr,Ne]);const hr=R.useCallback(je=>Ne(je),[Ne]),Gt=je=>kt=>{var bt;if(je==null||(bt=je.onClick)==null||bt.call(je,kt),!kt.defaultMuiPrevented){const Ee={type:P_.buttonClick,event:kt};rt(Ee)}},Dr=je=>kt=>{var bt;(bt=je.onKeyDown)==null||bt.call(je,kt),!kt.defaultMuiPrevented&&(kt.key==="ArrowDown"||kt.key==="ArrowUp")&&(kt.preventDefault(),rt({type:wn.keyDown,key:kt.key,event:kt}))},He=(je={})=>({onClick:Gt(je),onKeyDown:Dr(je)}),xr=(je={})=>K({},je,He(je),{role:"combobox","aria-expanded":rr,"aria-controls":J}),Tr=(je={})=>{const kt=Qi(je),bt=Xl(xr,We);return K({},je,bt(kt))},Jt=je=>kt=>{var bt,Ee;(bt=je.onBlur)==null||bt.call(je,kt),!kt.defaultMuiPrevented&&((Ee=$.current)!=null&&Ee.contains(kt.relatedTarget)||kt.relatedTarget===te.current)&&(kt.defaultMuiPrevented=!0)},or=(je={})=>({onBlur:Jt(je)}),Cr=(je={})=>{const kt=Qi(je),bt=Xl(or,pt);return K({id:J,role:"listbox","aria-multiselectable":m?"true":void 0},je,bt(kt))};R.useDebugValue({selectedOptions:Lr,highlightedOption:wr,open:rr});const Mr=R.useMemo(()=>K({},sr,we),[sr,we]);let Sr;e.multiple?Sr=Lr:Sr=Lr.length>0?Lr[0]:null;let fr;if(m)fr=Sr.map(je=>hr(je)).filter(je=>je!==void 0);else{var Qt;fr=(Qt=hr(Sr))!=null?Qt:null}const dr=je=>kt=>{var bt;if(je==null||(bt=je.onChange)==null||bt.call(je,kt),kt.defaultMuiPrevented)return;const Ee=Te.get(kt.target.value);kt.target.value===""?rt({type:wn.clearSelection}):Ee!==void 0&&rt({type:P_.browserAutoFill,item:Ee.value,event:kt})};return{buttonActive:De,buttonFocusVisible:Se,buttonRef:Fe,contextValue:Mr,disabled:l,dispatch:rt,getButtonProps:Tr,getHiddenInputProps:(je={})=>{const kt=Qi(je);return K({name:y,tabIndex:-1,"aria-hidden":!0,required:S?!0:void 0,value:z(fr),style:PV},je,{onChange:dr(kt)})},getListboxProps:Cr,getOptionMetadata:hr,listboxRef:nr,open:rr,options:Ce,value:Sr,highlightedOption:wr}}function GH(e){const{value:t,children:r}=e,{dispatch:n,getItemIndex:i,getItemState:l,registerItem:h,totalSubitemCount:s}=t,m=R.useMemo(()=>({dispatch:n,getItemState:l,getItemIndex:i}),[n,i,l]),y=R.useMemo(()=>({getItemIndex:i,registerItem:h,totalSubitemCount:s}),[h,i,s]);return H.jsx(Qg.Provider,{value:y,children:H.jsx(lu.Provider,{value:m,children:r})})}function WH(e){const{checked:t,defaultChecked:r,disabled:n,onBlur:i,onChange:l,onFocus:h,onFocusVisible:s,readOnly:m,required:y}=e,[S,T]=nf({controlled:t,default:!!r,name:"Switch",state:"checked"}),I=ie=>xe=>{var ge;xe.nativeEvent.defaultPrevented||(T(xe.target.checked),l==null||l(xe),(ge=ie.onChange)==null||ge.call(ie,xe))},{isFocusVisibleRef:D,onBlur:F,onFocus:V,ref:Z}=mk(),[z,O]=R.useState(!1);n&&z&&O(!1),R.useEffect(()=>{D.current=z},[z,D]);const L=R.useRef(null),te=ie=>xe=>{var ge;L.current||(L.current=xe.currentTarget),V(xe),D.current===!0&&(O(!0),s==null||s(xe)),h==null||h(xe),(ge=ie.onFocus)==null||ge.call(ie,xe)},j=ie=>xe=>{var ge;F(xe),D.current===!1&&O(!1),i==null||i(xe),(ge=ie.onBlur)==null||ge.call(ie,xe)},$=an(Z,L);return{checked:S,disabled:!!n,focusVisible:z,getInputProps:(ie={})=>K({checked:t,defaultChecked:r,disabled:n,readOnly:m,ref:$,required:y,type:"checkbox",role:"switch","aria-checked":t},ie,{onChange:I(ie),onFocus:te(ie),onBlur:j(ie)}),inputRef:$,readOnly:!!m}}function qH(e){const{value:t,defaultValue:r,onChange:n,orientation:i="horizontal",direction:l="ltr",selectionFollowsFocus:h=!1}=e,[s,m]=nf({controlled:t,default:r,name:"Tabs",state:"value"}),y=R.useCallback((Z,z)=>{m(z),n==null||n(Z,z)},[n,m]),{subitems:S,contextValue:T}=qx(),I=R.useRef(()=>{}),D=R.useCallback(Z=>{var z;return(z=S.get(Z))==null?void 0:z.id},[S]),F=R.useCallback(Z=>I.current(Z),[]),V=R.useCallback(Z=>{I.current=Z},[]);return{contextValue:K({direction:l,getTabId:F,getTabPanelId:D,onSelected:y,orientation:i,registerTabIdLookup:V,selectionFollowsFocus:h,value:s},T)}}const O$=R.createContext(null);function hb(){const e=R.useContext(O$);if(e==null)throw new Error("No TabsContext provided");return e}function ZH(e){const{value:t,children:r}=e,{direction:n,getItemIndex:i,onSelected:l,orientation:h,registerItem:s,registerTabIdLookup:m,selectionFollowsFocus:y,totalSubitemCount:S,value:T,getTabId:I,getTabPanelId:D}=t,F=R.useMemo(()=>({getItemIndex:i,registerItem:s,totalSubitemCount:S}),[s,i,S]),V=R.useMemo(()=>({direction:n,getTabId:I,getTabPanelId:D,onSelected:l,orientation:h,registerTabIdLookup:m,selectionFollowsFocus:y,value:T}),[n,I,D,l,h,m,y,T]);return H.jsx(Qg.Provider,{value:F,children:H.jsx(O$.Provider,{value:V,children:r})})}function KH(e){return e.size}function XH(e){const{value:t,id:r,rootRef:n}=e,i=hb();if(i===null)throw new Error("No TabContext provided");const{value:l,getTabId:h}=i,s=ta(r),m=R.useRef(null),y=an(m,n),S=R.useMemo(()=>({id:s,ref:m}),[s]),{id:T}=Zx(t??KH,S),I=T!==l,D=T!==void 0?h(T):void 0;return{hidden:I,getRootProps:(V={})=>K({"aria-labelledby":D??void 0,hidden:I,id:s??void 0},V,{ref:y}),rootRef:y}}const $$={valueChange:"valueChange"};function YH(e,t){if(t.type===$$.valueChange)return K({},e,{highlightedValue:t.value});const r=Wx(e,t),{context:{selectionFollowsFocus:n}}=t;if(t.type===wn.itemsChange){if(r.selectedValues.length>0)return K({},r,{highlightedValue:r.selectedValues[0]});Li(null,"reset",t.context)}return n&&r.highlightedValue!=null?K({},r,{selectedValues:[r.highlightedValue]}):r}function JH(e){var t;const{rootRef:r}=e,{direction:n="ltr",onSelected:i,orientation:l="horizontal",value:h,registerTabIdLookup:s,selectionFollowsFocus:m}=hb(),{subitems:y,contextValue:S}=qx(),T=R.useCallback(we=>{var Te;return(Te=y.get(we))==null?void 0:Te.id},[y]);s(T);const I=R.useMemo(()=>Array.from(y.keys()),[y]),D=R.useCallback(we=>{var Te,Pe;return we==null?null:(Te=(Pe=y.get(we))==null?void 0:Pe.ref.current)!=null?Te:null},[y]),F=n==="rtl";let V;l==="vertical"?V="vertical":V=F?"horizontal-rtl":"horizontal-ltr";const Z=R.useCallback((we,Te)=>{var Pe;i(we,(Pe=Te[0])!=null?Pe:null)},[i]),z=R.useMemo(()=>h===void 0?{}:h!=null?{selectedValues:[h]}:{selectedValues:[]},[h]),O=R.useCallback(we=>{var Te,Pe;return(Te=(Pe=y.get(we))==null?void 0:Pe.disabled)!=null?Te:!1},[y]),{contextValue:L,dispatch:te,getRootProps:j,state:{highlightedValue:$,selectedValues:J},rootRef:ie}=bk({controlledProps:z,disabledItemsFocusable:!m,focusManagement:"DOM",getItemDomElement:D,isItemDisabled:O,items:I,rootRef:r,onChange:Z,orientation:V,reducerActionContext:R.useMemo(()=>({selectionFollowsFocus:m||!1}),[m]),selectionMode:"single",stateReducer:YH});R.useEffect(()=>{h!==void 0&&h!=null&&te({type:$$.valueChange,value:h})},[te,h]);const xe=(we={})=>K({},we,j(we),{"aria-orientation":l==="vertical"?"vertical":void 0,role:"tablist"});return{contextValue:R.useMemo(()=>K({},S,L),[S,L]),dispatch:te,getRootProps:xe,highlightedValue:$,isRtl:F,orientation:l,rootRef:ie,selectedValue:(t=J[0])!=null?t:null}}function QH(e){const{value:t,children:r}=e,{dispatch:n,getItemIndex:i,getItemState:l,registerItem:h,totalSubitemCount:s}=t,m=R.useMemo(()=>({dispatch:n,getItemState:l,getItemIndex:i}),[n,i,l]),y=R.useMemo(()=>({getItemIndex:i,registerItem:h,totalSubitemCount:s}),[h,i,s]);return H.jsx(Qg.Provider,{value:y,children:H.jsx(lu.Provider,{value:m,children:r})})}function eG(e){return e.size}function tG(e){const{value:t,rootRef:r,disabled:n=!1,id:i}=e,l=R.useRef(null),h=ta(i),{value:s,selectionFollowsFocus:m,getTabPanelId:y}=hb(),S=R.useMemo(()=>({disabled:n,ref:l,id:h}),[n,l,h]),{id:T,index:I,totalItemCount:D}=Zx(t??eG,S),{getRootProps:F,highlighted:V,selected:Z}=wk({item:T}),{getRootProps:z,rootRef:O,active:L,focusVisible:te,setFocusVisible:j}=Rs({disabled:n,focusableWhenDisabled:!m,type:"button"}),$=an(l,r,O),J=T!==void 0?y(T):void 0;return{getRootProps:(xe={})=>{const ge=Qi(xe),we=Xl(F,z);return K({},xe,we(ge),{role:"tab","aria-controls":J,"aria-selected":Z,id:h,ref:$})},active:L,focusVisible:te,highlighted:V,index:I,rootRef:$,selected:Z||T===s,setFocusVisible:j,totalTabsCount:D}}function XA(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function xT(e={}){const{ignoreAccents:t=!0,ignoreCase:r=!0,limit:n,matchFrom:i="any",stringify:l,trim:h=!1}=e;return(s,{inputValue:m,getOptionLabel:y})=>{let S=h?m.trim():m;r&&(S=S.toLowerCase()),t&&(S=XA(S));const T=S?s.filter(I=>{let D=(l||y)(I);return r&&(D=D.toLowerCase()),t&&(D=XA(D)),i==="start"?D.indexOf(S)===0:D.indexOf(S)>-1}):s;return typeof n=="number"?T.slice(0,n):T}}function i0(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return-1}const rG=xT(),YA=5,nG=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))},iG=[];function oG(e){const{unstable_isActiveElementInListbox:t=nG,unstable_classNamePrefix:r="Mui",autoComplete:n=!1,autoHighlight:i=!1,autoSelect:l=!1,blurOnSelect:h=!1,clearOnBlur:s=!e.freeSolo,clearOnEscape:m=!1,componentName:y="useAutocomplete",defaultValue:S=e.multiple?iG:null,disableClearable:T=!1,disableCloseOnSelect:I=!1,disabled:D,disabledItemsFocusable:F=!1,disableListWrap:V=!1,filterOptions:Z=rG,filterSelectedOptions:z=!1,freeSolo:O=!1,getOptionDisabled:L,getOptionKey:te,getOptionLabel:j=Oe=>{var $e;return($e=Oe.label)!=null?$e:Oe},groupBy:$,handleHomeEndKeys:J=!e.freeSolo,id:ie,includeInputInList:xe=!1,inputValue:ge,isOptionEqualToValue:we=(Oe,$e)=>Oe===$e,multiple:Te=!1,onChange:Pe,onClose:We,onHighlightChange:De,onInputChange:Se,onOpen:Fe,open:Ce,openOnFocus:Ne=!1,options:Ye,readOnly:at=!1,selectOnFocus:st=!e.freeSolo,value:Dt}=e,St=ta(ie);let $t=j;$t=Oe=>{const $e=j(Oe);return typeof $e!="string"?String($e):$e};const Ct=R.useRef(!1),it=R.useRef(!0),Ze=R.useRef(null),rt=R.useRef(null),[pt,sr]=R.useState(null),[rr,wr]=R.useState(-1),Lr=i?0:-1,nr=R.useRef(Lr),[Et,hr]=nf({controlled:Dt,default:S,name:y}),[Gt,Dr]=nf({controlled:ge,default:"",name:y,state:"inputValue"}),[He,xr]=R.useState(!1),Tr=R.useCallback((Oe,$e)=>{if(!(Te?Et.length<$e.length:$e!==null)&&!s)return;let ht;if(Te)ht="";else if($e==null)ht="";else{const zt=$t($e);ht=typeof zt=="string"?zt:""}Gt!==ht&&(Dr(ht),Se&&Se(Oe,ht,"reset"))},[$t,Gt,Te,Se,Dr,s,Et]),[Jt,or]=nf({controlled:Ce,default:!1,name:y,state:"open"}),[Cr,Mr]=R.useState(!0),Sr=!Te&&Et!=null&&Gt===$t(Et),fr=Jt&&!at,Qt=fr?Z(Ye.filter(Oe=>!(z&&(Te?Et:[Et]).some($e=>$e!==null&&we(Oe,$e)))),{inputValue:Sr&&Cr?"":Gt,getOptionLabel:$t}):[],dr=IV({filteredOptions:Qt,value:Et,inputValue:Gt});R.useEffect(()=>{const Oe=Et!==dr.value;He&&!Oe||O&&!Oe||Tr(null,Et)},[Et,Tr,He,dr.value,O]);const tn=Jt&&Qt.length>0&&!at,je=Bc(Oe=>{Oe===-1?Ze.current.focus():pt.querySelector(`[data-tag-index="${Oe}"]`).focus()});R.useEffect(()=>{Te&&rr>Et.length-1&&(wr(-1),je(-1))},[Et,Te,rr,je]);function kt(Oe,$e){if(!rt.current||Oe<0||Oe>=Qt.length)return-1;let tt=Oe;for(;;){const ht=rt.current.querySelector(`[data-option-index="${tt}"]`),zt=F?!1:!ht||ht.disabled||ht.getAttribute("aria-disabled")==="true";if(ht&&ht.hasAttribute("tabindex")&&!zt)return tt;if($e==="next"?tt=(tt+1)%Qt.length:tt=(tt-1+Qt.length)%Qt.length,tt===Oe)return-1}}const bt=Bc(({event:Oe,index:$e,reason:tt="auto"})=>{if(nr.current=$e,$e===-1?Ze.current.removeAttribute("aria-activedescendant"):Ze.current.setAttribute("aria-activedescendant",`${St}-option-${$e}`),De&&De(Oe,$e===-1?null:Qt[$e],tt),!rt.current)return;const ht=rt.current.querySelector(`[role="option"].${r}-focused`);ht&&(ht.classList.remove(`${r}-focused`),ht.classList.remove(`${r}-focusVisible`));let zt=rt.current;if(rt.current.getAttribute("role")!=="listbox"&&(zt=rt.current.parentElement.querySelector('[role="listbox"]')),!zt)return;if($e===-1){zt.scrollTop=0;return}const pr=rt.current.querySelector(`[data-option-index="${$e}"]`);if(pr&&(pr.classList.add(`${r}-focused`),tt==="keyboard"&&pr.classList.add(`${r}-focusVisible`),zt.scrollHeight>zt.clientHeight&&tt!=="mouse"&&tt!=="touch")){const ir=pr,jr=zt.clientHeight+zt.scrollTop,pn=ir.offsetTop+ir.offsetHeight;pn>jr?zt.scrollTop=pn-zt.clientHeight:ir.offsetTop-ir.offsetHeight*($?1.3:0)<zt.scrollTop&&(zt.scrollTop=ir.offsetTop-ir.offsetHeight*($?1.3:0))}}),Ee=Bc(({event:Oe,diff:$e,direction:tt="next",reason:ht="auto"})=>{if(!fr)return;const pr=kt((()=>{const ir=Qt.length-1;if($e==="reset")return Lr;if($e==="start")return 0;if($e==="end")return ir;const jr=nr.current+$e;return jr<0?jr===-1&&xe?-1:V&&nr.current!==-1||Math.abs($e)>1?0:ir:jr>ir?jr===ir+1&&xe?-1:V||Math.abs($e)>1?ir:0:jr})(),tt);if(bt({index:pr,reason:ht,event:Oe}),n&&$e!=="reset")if(pr===-1)Ze.current.value=Gt;else{const ir=$t(Qt[pr]);Ze.current.value=ir,ir.toLowerCase().indexOf(Gt.toLowerCase())===0&&Gt.length>0&&Ze.current.setSelectionRange(Gt.length,ir.length)}}),Ve=()=>{const Oe=($e,tt)=>{const ht=$e?$t($e):"",zt=tt?$t(tt):"";return ht===zt};if(nr.current!==-1&&dr.filteredOptions&&dr.filteredOptions.length!==Qt.length&&dr.inputValue===Gt&&(Te?Et.length===dr.value.length&&dr.value.every(($e,tt)=>$t(Et[tt])===$t($e)):Oe(dr.value,Et))){const $e=dr.filteredOptions[nr.current];if($e)return i0(Qt,tt=>$t(tt)===$t($e))}return-1},Xe=R.useCallback(()=>{if(!fr)return;const Oe=Ve();if(Oe!==-1){nr.current=Oe;return}const $e=Te?Et[0]:Et;if(Qt.length===0||$e==null){Ee({diff:"reset"});return}if(rt.current){if($e!=null){const tt=Qt[nr.current];if(Te&&tt&&i0(Et,zt=>we(tt,zt))!==-1)return;const ht=i0(Qt,zt=>we(zt,$e));ht===-1?Ee({diff:"reset"}):bt({index:ht});return}if(nr.current>=Qt.length-1){bt({index:Qt.length-1});return}bt({index:nr.current})}},[Qt.length,Te?!1:Et,z,Ee,bt,fr,Gt,Te]),Tt=Bc(Oe=>{n_(rt,Oe),Oe&&Xe()});R.useEffect(()=>{Xe()},[Xe]);const gt=Oe=>{Jt||(or(!0),Mr(!0),Fe&&Fe(Oe))},Rt=(Oe,$e)=>{Jt&&(or(!1),We&&We(Oe,$e))},vr=(Oe,$e,tt,ht)=>{if(Te){if(Et.length===$e.length&&Et.every((zt,pr)=>zt===$e[pr]))return}else if(Et===$e)return;Pe&&Pe(Oe,$e,tt,ht),hr($e)},Bt=R.useRef(!1),mr=(Oe,$e,tt="selectOption",ht="options")=>{let zt=tt,pr=$e;if(Te){pr=Array.isArray(Et)?Et.slice():[];const ir=i0(pr,jr=>we($e,jr));ir===-1?pr.push($e):ht!=="freeSolo"&&(pr.splice(ir,1),zt="removeOption")}Tr(Oe,pr),vr(Oe,pr,zt,{option:$e}),!I&&(!Oe||!Oe.ctrlKey&&!Oe.metaKey)&&Rt(Oe,zt),(h===!0||h==="touch"&&Bt.current||h==="mouse"&&!Bt.current)&&Ze.current.blur()};function ue(Oe,$e){if(Oe===-1)return-1;let tt=Oe;for(;;){if($e==="next"&&tt===Et.length||$e==="previous"&&tt===-1)return-1;const ht=pt.querySelector(`[data-tag-index="${tt}"]`);if(!ht||!ht.hasAttribute("tabindex")||ht.disabled||ht.getAttribute("aria-disabled")==="true")tt+=$e==="next"?1:-1;else return tt}}const Y=(Oe,$e)=>{if(!Te)return;Gt===""&&Rt(Oe,"toggleInput");let tt=rr;rr===-1?Gt===""&&$e==="previous"&&(tt=Et.length-1):(tt+=$e==="next"?1:-1,tt<0&&(tt=0),tt===Et.length&&(tt=-1)),tt=ue(tt,$e),wr(tt),je(tt)},Q=Oe=>{Ct.current=!0,Dr(""),Se&&Se(Oe,"","clear"),vr(Oe,Te?[]:null,"clear")},N=Oe=>$e=>{if(Oe.onKeyDown&&Oe.onKeyDown($e),!$e.defaultMuiPrevented&&(rr!==-1&&["ArrowLeft","ArrowRight"].indexOf($e.key)===-1&&(wr(-1),je(-1)),$e.which!==229))switch($e.key){case"Home":fr&&J&&($e.preventDefault(),Ee({diff:"start",direction:"next",reason:"keyboard",event:$e}));break;case"End":fr&&J&&($e.preventDefault(),Ee({diff:"end",direction:"previous",reason:"keyboard",event:$e}));break;case"PageUp":$e.preventDefault(),Ee({diff:-YA,direction:"previous",reason:"keyboard",event:$e}),gt($e);break;case"PageDown":$e.preventDefault(),Ee({diff:YA,direction:"next",reason:"keyboard",event:$e}),gt($e);break;case"ArrowDown":$e.preventDefault(),Ee({diff:1,direction:"next",reason:"keyboard",event:$e}),gt($e);break;case"ArrowUp":$e.preventDefault(),Ee({diff:-1,direction:"previous",reason:"keyboard",event:$e}),gt($e);break;case"ArrowLeft":Y($e,"previous");break;case"ArrowRight":Y($e,"next");break;case"Enter":if(nr.current!==-1&&fr){const tt=Qt[nr.current],ht=L?L(tt):!1;if($e.preventDefault(),ht)return;mr($e,tt,"selectOption"),n&&Ze.current.setSelectionRange(Ze.current.value.length,Ze.current.value.length)}else O&&Gt!==""&&Sr===!1&&(Te&&$e.preventDefault(),mr($e,Gt,"createOption","freeSolo"));break;case"Escape":fr?($e.preventDefault(),$e.stopPropagation(),Rt($e,"escape")):m&&(Gt!==""||Te&&Et.length>0)&&($e.preventDefault(),$e.stopPropagation(),Q($e));break;case"Backspace":if(Te&&!at&&Gt===""&&Et.length>0){const tt=rr===-1?Et.length-1:rr,ht=Et.slice();ht.splice(tt,1),vr($e,ht,"removeOption",{option:Et[tt]})}break;case"Delete":if(Te&&!at&&Gt===""&&Et.length>0&&rr!==-1){const tt=rr,ht=Et.slice();ht.splice(tt,1),vr($e,ht,"removeOption",{option:Et[tt]})}break}},X=Oe=>{xr(!0),Ne&&!Ct.current&&gt(Oe)},re=Oe=>{if(t(rt)){Ze.current.focus();return}xr(!1),it.current=!0,Ct.current=!1,l&&nr.current!==-1&&fr?mr(Oe,Qt[nr.current],"blur"):l&&O&&Gt!==""?mr(Oe,Gt,"blur","freeSolo"):s&&Tr(Oe,Et),Rt(Oe,"blur")},he=Oe=>{const $e=Oe.target.value;Gt!==$e&&(Dr($e),Mr(!1),Se&&Se(Oe,$e,"input")),$e===""?!T&&!Te&&vr(Oe,null,"clear"):gt(Oe)},pe=Oe=>{const $e=Number(Oe.currentTarget.getAttribute("data-option-index"));nr.current!==$e&&bt({event:Oe,index:$e,reason:"mouse"})},se=Oe=>{bt({event:Oe,index:Number(Oe.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Bt.current=!0},_e=Oe=>{const $e=Number(Oe.currentTarget.getAttribute("data-option-index"));mr(Oe,Qt[$e],"selectOption"),Bt.current=!1},Ae=Oe=>$e=>{const tt=Et.slice();tt.splice(Oe,1),vr($e,tt,"removeOption",{option:Et[Oe]})},Le=Oe=>{Jt?Rt(Oe,"toggleInput"):gt(Oe)},Re=Oe=>{Oe.currentTarget.contains(Oe.target)&&Oe.target.getAttribute("id")!==St&&Oe.preventDefault()},ot=Oe=>{Oe.currentTarget.contains(Oe.target)&&(Ze.current.focus(),st&&it.current&&Ze.current.selectionEnd-Ze.current.selectionStart===0&&Ze.current.select(),it.current=!1)},dt=Oe=>{!D&&(Gt===""||!Jt)&&Le(Oe)};let ut=O&&Gt.length>0;ut=ut||(Te?Et.length>0:Et!==null);let It=Qt;return $&&(It=Qt.reduce((Oe,$e,tt)=>{const ht=$($e);return Oe.length>0&&Oe[Oe.length-1].group===ht?Oe[Oe.length-1].options.push($e):Oe.push({key:tt,index:tt,group:ht,options:[$e]}),Oe},[])),D&&He&&re(),{getRootProps:(Oe={})=>K({"aria-owns":tn?`${St}-listbox`:null},Oe,{onKeyDown:N(Oe),onMouseDown:Re,onClick:ot}),getInputLabelProps:()=>({id:`${St}-label`,htmlFor:St}),getInputProps:()=>({id:St,value:Gt,onBlur:re,onFocus:X,onChange:he,onMouseDown:dt,"aria-activedescendant":fr?"":null,"aria-autocomplete":n?"both":"list","aria-controls":tn?`${St}-listbox`:void 0,"aria-expanded":tn,autoComplete:"off",ref:Ze,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:D}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:Q}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Le}),getTagProps:({index:Oe})=>K({key:Oe,"data-tag-index":Oe,tabIndex:-1},!at&&{onDelete:Ae(Oe)}),getListboxProps:()=>({role:"listbox",id:`${St}-listbox`,"aria-labelledby":`${St}-label`,ref:Tt,onMouseDown:Oe=>{Oe.preventDefault()}}),getOptionProps:({index:Oe,option:$e})=>{var tt;const ht=(Te?Et:[Et]).some(pr=>pr!=null&&we($e,pr)),zt=L?L($e):!1;return{key:(tt=te==null?void 0:te($e))!=null?tt:$t($e),tabIndex:-1,role:"option",id:`${St}-option-${Oe}`,onMouseMove:pe,onClick:_e,onTouchStart:se,"data-option-index":Oe,"aria-disabled":zt,"aria-selected":ht}},id:St,inputValue:Gt,value:Et,dirty:ut,expanded:fr&&pt,popupOpen:fr,focused:He||rr!==-1,anchorEl:pt,setAnchorEl:sr,focusedTag:rr,groupedOptions:It}}const aG=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],sG=["component","slots","slotProps"],lG=["component"];function Ft(e,t){const{className:r,elementType:n,ownerState:i,externalForwardedProps:l,getSlotOwnerState:h,internalForwardedProps:s}=t,m=Ht(t,aG),{component:y,slots:S={[e]:void 0},slotProps:T={[e]:void 0}}=l,I=Ht(l,sG),D=S[e]||n,F=hL(T[e],i),V=dL(K({className:r},m,{externalForwardedProps:e==="root"?I:void 0,externalSlotProps:F})),{props:{component:Z},internalRef:z}=V,O=Ht(V.props,lG),L=an(z,F==null?void 0:F.ref,t.ref),te=h?h(O):{},j=K({},i,te),$=e==="root"?Z||y:Z,J=uL(D,K({},e==="root"&&!y&&!S[e]&&s,e!=="root"&&!S[e]&&s,O,$&&{as:$},{ref:L}),j);return Object.keys(te).forEach(ie=>{delete J[ie]}),[D,J]}function cG(e){return Zr("MuiListItem",e)}const A_=Gr("MuiListItem",["root","startAction","endAction","nested","nesting","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]),R_=R.createContext(!1),kd=R.createContext(!1),B$=R.createContext(!1),bT=R.createContext(void 0),F$=R.createContext(void 0),fb=R.createContext(void 0),uG=["component","className","children","nested","sticky","variant","color","startAction","endAction","role","slots","slotProps"],dG=e=>{const{sticky:t,nested:r,nesting:n,variant:i,color:l}=e,h={root:["root",r&&"nested",n&&"nesting",t&&"sticky",l&&`color${xt(l)}`,i&&`variant${xt(i)}`],startAction:["startAction"],endAction:["endAction"]};return Nr(h,cG,{})},hG=ft("li")(({theme:e,ownerState:t})=>{var r;return[!t.nested&&{"--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItemButton-marginBlock":"calc(-1 * var(--ListItem-paddingY))",alignItems:"center",gap:"var(--ListItem-gap)",marginInline:"var(--ListItem-marginInline)"},t.nested&&{"--NestedList-marginRight":"calc(-1 * var(--ListItem-paddingRight))","--NestedList-marginLeft":"calc(-1 * var(--ListItem-paddingLeft))","--NestedListItem-paddingLeft":"calc(var(--ListItem-paddingLeft) + var(--List-nestedInsetStart))","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItem-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))",flexDirection:"column"},K({"--unstable_actionRadius":"calc(var(--ListItem-radius) - var(--variant-borderWidth, 0px))"},t.startAction&&{"--unstable_startActionWidth":"2rem"},t.endAction&&{"--unstable_endActionWidth":"2.5rem"},{boxSizing:"border-box",borderRadius:"var(--ListItem-radius)",display:"var(--_ListItem-display)","&:not([hidden])":{"--_ListItem-display":"var(--_List-markerDisplay, flex)"},flex:"none",listStyleType:"var(--_List-markerType, disc)",position:"relative",paddingBlockStart:t.nested?0:"var(--ListItem-paddingY)",paddingBlockEnd:t.nested?0:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)"},t["data-first-child"]===void 0&&K({},t.row?{marginInlineStart:"var(--List-gap)"}:{marginBlockStart:"var(--List-gap)"}),t.row&&t.wrap&&{marginInlineStart:"var(--List-gap)",marginBlockStart:"var(--List-gap)"},{minBlockSize:"var(--ListItem-minHeight)"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:`var(--ListItem-stickyBackground, ${e.vars.palette.background.body})`},{[`.${A_.nested} > &`]:{"--_ListItem-display":"flex"}}),(r=e.variants[t.variant])==null?void 0:r[t.color]]}),fG=ft(hG,{name:"JoyListItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),pG=ft("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",left:0,transform:"translate(var(--ListItem-startActionTranslateX), -50%)",zIndex:1})),mG=ft("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",right:0,transform:"translate(var(--ListItem-endActionTranslateX), -50%)"})),lc=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyListItem"}),i=R.useContext(fb),l=R.useContext(bT),h=R.useContext(kd),s=R.useContext(B$),m=R.useContext(R_),{component:y,className:S,children:T,nested:I=!1,sticky:D=!1,variant:F="plain",color:V="neutral",startAction:Z,endAction:z,role:O,slots:L={},slotProps:te={}}=n,j=Ht(n,uG),[$,J]=R.useState(""),[ie,xe]=(l==null?void 0:l.split(":"))||["",""],ge=y||(ie&&!ie.match(/^(ul|ol|menu)$/)?"div":void 0);let we=i==="menu"?"none":void 0;l&&(we={menu:"none",menubar:"none",group:"presentation"}[xe]),O&&(we=O);const Te=K({},n,{sticky:D,startAction:Z,endAction:z,row:h,wrap:s,variant:F,color:V,nesting:m,nested:I,component:ge,role:we}),Pe=dG(Te),We=K({},j,{component:ge,slots:L,slotProps:te}),[De,Se]=Ft("root",{additionalProps:{role:we},ref:r,className:Gn(Pe.root,S),elementType:fG,externalForwardedProps:We,ownerState:Te}),[Fe,Ce]=Ft("startAction",{className:Pe.startAction,elementType:pG,externalForwardedProps:We,ownerState:Te}),[Ne,Ye]=Ft("endAction",{className:Pe.endAction,elementType:mG,externalForwardedProps:We,ownerState:Te});return H.jsx(F$.Provider,{value:J,children:H.jsx(R_.Provider,{value:I?$||!0:!1,children:H.jsxs(De,K({},Se,{children:[Z&&H.jsx(Fe,K({},Ce,{children:Z})),R.Children.map(T,(at,st)=>{var Dt;return R.isValidElement(at)?R.cloneElement(at,K({},st===0&&{"data-first-child":""},Vx(at,["ListItem"])&&{component:((Dt=at.props)==null?void 0:Dt.component)||"div"})):at}),z&&H.jsx(Ne,K({},Ye,{children:z}))]}))})})});lc.muiName="ListItem";const pb={"--NestedList-marginRight":"0px","--NestedList-marginLeft":"0px","--NestedListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px"};function av(e){const{children:t,nested:r,row:n=!1,wrap:i=!1}=e,l=H.jsx(kd.Provider,{value:n,children:H.jsx(B$.Provider,{value:i,children:R.Children.map(t,(h,s)=>R.isValidElement(h)?R.cloneElement(h,K({},s===0&&{"data-first-child":""},s===R.Children.count(t)-1&&{"data-last-child":""})):h)})});return r===void 0?l:H.jsx(R_.Provider,{value:r,children:l})}const Td=({theme:e,ownerState:t},r)=>{let n={};function i(l){if(typeof l=="function"){const h=l(e);i(h)}else Array.isArray(l)?l.forEach(h=>{typeof h!="boolean"&&i(h)}):typeof l=="object"&&(n=K({},n,l))}return t.sx&&(i(t.sx),r.forEach(l=>{const h=n[l];if(typeof h=="string"||typeof h=="number")if(l==="borderRadius")if(typeof h=="number")n[l]=`${h}px`;else{var s;n[l]=((s=e.vars)==null?void 0:s.radius[h])||h}else["p","padding","m","margin"].indexOf(l)!==-1&&typeof h=="number"?n[l]=e.spacing(h):n[l]=h;else typeof h=="function"?n[l]=h(e):n[l]=void 0})),n};function gG(e){return Zr("MuiList",e)}const vG=Gr("MuiList",["root","nesting","scoped","sizeSm","sizeMd","sizeLg","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","horizontal","vertical"]),yG=R.createContext(void 0),_G=["component","className","children","size","orientation","wrap","variant","color","role","slots","slotProps"],xG=e=>{const{variant:t,color:r,size:n,nesting:i,orientation:l,instanceSize:h}=e,s={root:["root",l,t&&`variant${xt(t)}`,r&&`color${xt(r)}`,!h&&!i&&n&&`size${xt(n)}`,h&&`size${xt(h)}`,i&&"nesting"]};return Nr(s,gG,{})},sv=ft("ul")(({theme:e,ownerState:t})=>{var r;const{p:n,padding:i,borderRadius:l}=Td({theme:e,ownerState:t},["p","padding","borderRadius"]);function h(s){return s==="sm"?{"--ListDivider-gap":"0.25rem","--ListItem-minHeight":"2rem","--ListItem-paddingY":"3px","--ListItem-paddingX":t.marker?"3px":"0.5rem","--ListItem-gap":"0.5rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.5rem":"2rem","--Icon-fontSize":e.vars.fontSize.lg}:s==="md"?{"--ListDivider-gap":"0.375rem","--ListItem-minHeight":"2.25rem","--ListItem-paddingY":"0.25rem","--ListItem-paddingX":t.marker?"0.25rem":"0.75rem","--ListItem-gap":"0.625rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.75rem":"2.5rem","--Icon-fontSize":e.vars.fontSize.xl}:s==="lg"?{"--ListDivider-gap":"0.5rem","--ListItem-minHeight":"2.75rem","--ListItem-paddingY":"0.375rem","--ListItem-paddingX":t.marker?"0.5rem":"1rem","--ListItem-gap":"0.75rem","--ListItemDecorator-size":t.orientation==="horizontal"?"2.25rem":"3rem","--Icon-fontSize":e.vars.fontSize.xl2}:{}}return[t.nesting&&K({},h(t.instanceSize),{"--ListItem-paddingRight":"var(--ListItem-paddingX)","--ListItem-paddingLeft":"var(--NestedListItem-paddingLeft)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px",padding:0},t.marker&&{paddingInlineStart:"calc(3ch - var(--_List-markerDeduct, 0px))"},{marginInlineStart:"var(--NestedList-marginLeft)",marginInlineEnd:"var(--NestedList-marginRight)",marginBlockStart:"var(--List-gap)",marginBlockEnd:"initial"}),!t.nesting&&K({},h(t.size),{"--List-gap":"0px","--List-nestedInsetStart":"0px","--ListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItem-paddingRight":"var(--ListItem-paddingX)"},t.marker&&{"--_List-markerDeduct":"1ch"},{"--unstable_List-childRadius":"calc(max(var(--List-radius) - var(--List-padding), min(var(--List-padding) / 2, var(--List-radius) / 2)) - var(--variant-borderWidth, 0px))","--ListItem-radius":"var(--unstable_List-childRadius)","--ListItem-startActionTranslateX":"calc(0.5 * var(--ListItem-paddingLeft))","--ListItem-endActionTranslateX":"calc(-0.5 * var(--ListItem-paddingRight))",margin:"initial"},e.typography[`body-${t.size}`],t.orientation==="horizontal"?K({},t.wrap?{padding:"var(--List-padding)",marginInlineStart:"calc(-1 * var(--List-gap))",marginBlockStart:"calc(-1 * var(--List-gap))"}:{paddingInline:"var(--List-padding, var(--ListDivider-gap))",paddingBlock:"var(--List-padding)"}):{paddingBlock:"var(--List-padding, var(--ListDivider-gap))",paddingInline:"var(--List-padding)"},t.marker&&{paddingInlineStart:"3ch"}),K({boxSizing:"border-box",borderRadius:"var(--List-radius)",listStyle:"none",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},t.wrap&&{flexWrap:"wrap"},t.marker&&{"--_List-markerDisplay":"list-item","--_List-markerType":t.marker,lineHeight:"calc(var(--ListItem-minHeight) - 2 * var(--ListItem-paddingY))"},{flexGrow:1,position:"relative"},(r=e.variants[t.variant])==null?void 0:r[t.color],{"--unstable_List-borderWidth":"var(--variant-borderWidth, 0px)"},l!==void 0&&{"--List-radius":l},n!==void 0&&{"--List-padding":n},i!==void 0&&{"--List-padding":i})]}),bG=ft(sv,{name:"JoyList",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Ed=R.forwardRef(function(t,r){var n;const i=R.useContext(R_),l=R.useContext(fb),h=R.useContext(yG),s=Kr({props:t,name:"JoyList"}),{component:m,className:y,children:S,size:T,orientation:I="vertical",wrap:D=!1,variant:F="plain",color:V="neutral",role:Z,slots:z={},slotProps:O={}}=s,L=Ht(s,_G),te=T||((n=t.size)!=null?n:"md");let j;l&&(j="group"),h&&(j="presentation"),Z&&(j=Z);const $=K({},s,{instanceSize:t.size,size:te,nesting:i,orientation:I,wrap:D,variant:F,color:V,role:j}),J=xG($),ie=K({},L,{component:m,slots:z,slotProps:O}),[xe,ge]=Ft("root",{ref:r,className:Gn(J.root,y),elementType:bG,externalForwardedProps:ie,ownerState:$,additionalProps:{as:m,role:j,"aria-labelledby":typeof i=="string"?i:void 0}});return H.jsx(xe,K({},ge,{children:H.jsx(bT.Provider,{value:`${typeof m=="string"?m:""}:${j||""}`,children:H.jsx(av,{row:I==="horizontal",wrap:D,children:S})})}))});function wG(e){return Zr("MuiListItemButton",e)}const $0=Gr("MuiListItemButton",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","variantPlain","variantSoft","variantOutlined","variantSolid"]),mb=R.createContext("horizontal"),SG=["children","className","action","component","orientation","role","selected","color","variant","slots","slotProps"],CG=e=>{const{color:t,disabled:r,focusVisible:n,focusVisibleClassName:i,selected:l,variant:h}=e,s={root:["root",r&&"disabled",n&&"focusVisible",t&&`color${xt(t)}`,l&&"selected",h&&`variant${xt(h)}`]},m=Nr(s,wG,{});return n&&i&&(m.root+=` ${i}`),m},lv=ft("div")(({theme:e,ownerState:t})=>{var r,n,i,l,h,s;return K({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",font:"inherit",display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"stretch",gap:"var(--ListItem-gap)"},t.orientation==="vertical"&&{flexDirection:"column",justifyContent:"center"},{textAlign:"initial",textDecoration:"initial",backgroundColor:"initial",cursor:"pointer",marginInline:"var(--ListItemButton-marginInline)",marginBlock:"var(--ListItemButton-marginBlock)"},t["data-first-child"]===void 0&&{marginInlineStart:t.row?"var(--List-gap)":void 0,marginBlockStart:t.row?void 0:"var(--List-gap)"},{paddingBlock:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px))",paddingInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItem-startActionWidth, var(--unstable_startActionWidth, 0px)))",paddingInlineEnd:"calc(var(--ListItem-paddingRight) + var(--ListItem-endActionWidth, var(--unstable_endActionWidth, 0px)))",minBlockSize:"var(--ListItem-minHeight)",border:"1px solid transparent",borderRadius:"var(--ListItem-radius)",flex:"var(--unstable_ListItem-flex, none)",fontSize:"inherit",lineHeight:"inherit",minInlineSize:0,[e.focus.selector]:K({},e.focus.default,{zIndex:1})},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:active":(n=e.variants[`${t.variant}Active`])==null?void 0:n[t.color],[`.${A_.root} > &`]:{"--unstable_ListItem-flex":"1 0 0%"},[`&.${$0.selected}`]:K({},(i=e.variants[`${t.variant}Active`])==null?void 0:i[t.color],{"--Icon-color":"currentColor"}),[`&:not(.${$0.selected}, [aria-selected="true"])`]:{"&:hover":(l=e.variants[`${t.variant}Hover`])==null?void 0:l[t.color],"&:active":(h=e.variants[`${t.variant}Active`])==null?void 0:h[t.color]},[`&.${$0.disabled}`]:K({},(s=e.variants[`${t.variant}Disabled`])==null?void 0:s[t.color])})}),kG=ft(lv,{name:"JoyListItemButton",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>K({},!e.row&&{[`&.${$0.selected}`]:{fontWeight:t.vars.fontWeight.md}})),N$=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyListItemButton"}),i=R.useContext(kd),{children:l,className:h,action:s,component:m="div",orientation:y="horizontal",role:S,selected:T=!1,color:I="neutral",variant:D="plain",slots:F={},slotProps:V={}}=n,Z=Ht(n,SG),z=R.useRef(null),O=an(z,r),{focusVisible:L,setFocusVisible:te,getRootProps:j}=Rs(K({},n,{rootRef:O}));R.useImperativeHandle(s,()=>({focusVisible:()=>{var we;te(!0),(we=z.current)==null||we.focus()}}),[te]);const $=K({},n,{component:m,color:I,focusVisible:L,orientation:y,row:i,selected:T,variant:D}),J=CG($),ie=K({},Z,{component:m,slots:F,slotProps:V}),[xe,ge]=Ft("root",{ref:r,className:Gn(J.root,h),elementType:kG,externalForwardedProps:ie,ownerState:$,getSlotProps:j});return H.jsx(mb.Provider,{value:y,children:H.jsx(xe,K({},ge,{role:S??ge.role,children:l}))})});function TG(e){return Zr("MuiSvgIcon",e)}Gr("MuiSvgIcon",["root","colorInherit","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","fontSizeInherit","fontSizeXs","fontSizeSm","fontSizeMd","fontSizeLg","fontSizeXl","fontSizeXl2","fontSizeXl3","fontSizeXl4","sizeSm","sizeMd","sizeLg"]);const EG=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox","size","slots","slotProps"],IG=e=>{const{color:t,size:r,fontSize:n}=e,i={root:["root",t&&t!=="inherit"&&`color${xt(t)}`,r&&`size${xt(r)}`,n&&`fontSize${xt(n)}`]};return Nr(i,TG,{})},JA={sm:"xl",md:"xl2",lg:"xl3"},PG=ft("svg",{name:"JoySvgIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return K({},t.instanceSize&&{"--Icon-fontSize":e.vars.fontSize[JA[t.instanceSize]]},t.instanceFontSize&&t.instanceFontSize!=="inherit"&&{"--Icon-fontSize":e.vars.fontSize[t.instanceFontSize]},{userSelect:"none",margin:"var(--Icon-margin)",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,fontSize:`var(--Icon-fontSize, ${e.vars.fontSize[JA[t.size]]||"unset"})`},t.fontSize&&t.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${e.fontSize[t.fontSize]})`},!t.htmlColor&&K({color:`var(--Icon-color, ${e.vars.palette.text.icon})`},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&e.vars.palette[t.color]&&{color:`rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1)`}))}),QA=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoySvgIcon"}),{children:i,className:l,color:h,component:s="svg",fontSize:m,htmlColor:y,inheritViewBox:S=!1,titleAccess:T,viewBox:I="0 0 24 24",size:D="md",slots:F={},slotProps:V={}}=n,Z=Ht(n,EG),z=R.isValidElement(i)&&i.type==="svg",O=K({},n,{color:h,component:s,size:D,instanceSize:t.size,fontSize:m,instanceFontSize:t.fontSize,inheritViewBox:S,viewBox:I,hasSvgAsChild:z}),L=IG(O),te=K({},Z,{component:s,slots:F,slotProps:V}),[j,$]=Ft("root",{ref:r,className:Gn(L.root,l),elementType:PG,externalForwardedProps:te,ownerState:O,additionalProps:K({color:y,focusable:!1},T&&{role:"img"},!T&&{"aria-hidden":!0},!S&&{viewBox:I},z&&i.props)});return H.jsxs(j,K({},$,{children:[z?i.props.children:i,T?H.jsx("title",{children:T}):null]}))});function Wf(e,t){function r(n,i){return H.jsx(QA,K({"data-testid":`${t}Icon`,ref:i},n,{children:e}))}return r.muiName=QA.muiName,R.memo(R.forwardRef(r))}const wT=e=>t=>`--${e?`${e}-`:""}${t.replace(/^--/,"")}`,Ef="data-skip-inverted-colors",j$=`& :not([${Ef}], [${Ef}] *)`,V$=e=>{var t,r,n,i,l,h,s,m,y,S,T,I,D,F,V,Z,z,O,L,te,j,$;const J=wT(e.cssVarPrefix);return{"--variant-plainColor":"var(--variant-plainColor) !important","--variant-plainHoverColor":"var(--variant-plainHoverColor) !important","--variant-plainHoverBg":"var(--variant-plainHoverBg) !important","--variant-plainActiveBg":"var(--variant-plainActiveBg) !important","--variant-plainDisabledColor":"var(--variant-plainDisabledColor) !important","--variant-outlinedColor":"var(--variant-outlinedColor) !important","--variant-outlinedBorder":"var(--variant-outlinedBorder) !important","--variant-outlinedHoverColor":"var(--variant-outlinedHoverColor) !important","--variant-outlinedHoverBorder":"var(--variant-outlinedHoverBorder) !important","--variant-outlinedHoverBg":"var(--variant-outlinedHoverBg) !important","--variant-outlinedActiveBg":"var(--variant-outlinedActiveBg) !important","--variant-outlinedDisabledColor":"var(--variant-outlinedDisabledColor) !important","--variant-outlinedDisabledBorder":"var(--variant-outlinedDisabledBorder) !important","--variant-softColor":"var(--variant-softColor) !important","--variant-softHoverColor":"var(--variant-softHoverColor) !important","--variant-softBg":"var(--variant-softBg) !important","--variant-softHoverBg":"var(--variant-softHoverBg) !important","--variant-softActiveBg":"var(--variant-softActiveBg) !important","--variant-softActiveColor":"var(--variant-softActiveColor) !important","--variant-softDisabledColor":"var(--variant-softDisabledColor) !important","--variant-softDisabledBg":"var(--variant-softDisabledBg) !important","--variant-solidColor":"var(--variant-solidColor) !important","--variant-solidBg":"var(--variant-solidBg) !important","--variant-solidHoverBg":"var(--variant-solidHoverBg) !important","--variant-solidActiveBg":"var(--variant-solidActiveBg) !important","--variant-solidDisabledColor":"var(--variant-solidDisabledColor) !important","--variant-solidDisabledBg":"var(--variant-solidDisabledBg) !important","--Badge-ringColor":"var(--Badge-ringColor) !important",colorScheme:"unset",[e.getColorSchemeSelector("light")]:{[J("--palette-focusVisible")]:`${(t=e.colorSchemes.light)==null?void 0:t.palette.focusVisible} !important`,[J("--palette-background-body")]:`${(r=e.colorSchemes.light)==null?void 0:r.palette.background.body} !important`,[J("--palette-background-surface")]:`${(n=e.colorSchemes.light)==null?void 0:n.palette.background.surface} !important`,[J("--palette-background-popup")]:`${(i=e.colorSchemes.light)==null?void 0:i.palette.background.popup} !important`,[J("--palette-background-level1")]:`${(l=e.colorSchemes.light)==null?void 0:l.palette.background.level1} !important`,[J("--palette-background-level2")]:`${(h=e.colorSchemes.light)==null?void 0:h.palette.background.level2} !important`,[J("--palette-background-level3")]:`${(s=e.colorSchemes.light)==null?void 0:s.palette.background.level3} !important`,[J("--palette-text-primary")]:`${(m=e.colorSchemes.light)==null?void 0:m.palette.text.primary} !important`,[J("--palette-text-secondary")]:`${(y=e.colorSchemes.light)==null?void 0:y.palette.text.secondary} !important`,[J("--palette-text-tertiary")]:`${(S=e.colorSchemes.light)==null?void 0:S.palette.text.tertiary} !important`,[J("--palette-divider")]:`${(T=e.colorSchemes.light)==null?void 0:T.palette.divider} !important`},[e.getColorSchemeSelector("dark")]:{[J("--palette-focusVisible")]:`${(I=e.colorSchemes.dark)==null?void 0:I.palette.focusVisible} !important`,[J("--palette-background-body")]:`${(D=e.colorSchemes.dark)==null?void 0:D.palette.background.body} !important`,[J("--palette-background-surface")]:`${(F=e.colorSchemes.dark)==null?void 0:F.palette.background.surface} !important`,[J("--palette-background-popup")]:`${(V=e.colorSchemes.dark)==null?void 0:V.palette.background.popup} !important`,[J("--palette-background-level1")]:`${(Z=e.colorSchemes.dark)==null?void 0:Z.palette.background.level1} !important`,[J("--palette-background-level2")]:`${(z=e.colorSchemes.dark)==null?void 0:z.palette.background.level2} !important`,[J("--palette-background-level3")]:`${(O=e.colorSchemes.dark)==null?void 0:O.palette.background.level3} !important`,[J("--palette-text-primary")]:`${(L=e.colorSchemes.dark)==null?void 0:L.palette.text.primary} !important`,[J("--palette-text-secondary")]:`${(te=e.colorSchemes.dark)==null?void 0:te.palette.text.secondary} !important`,[J("--palette-text-tertiary")]:`${(j=e.colorSchemes.dark)==null?void 0:j.palette.text.tertiary} !important`,[J("--palette-divider")]:`${($=e.colorSchemes.dark)==null?void 0:$.palette.divider} !important`}}};function AG(e){return e.theme!==void 0}const gb=e=>t=>{const r=AG(t)?t.theme:t,n=Hx(r.cssVarPrefix),i=wT(r.cssVarPrefix),l=h=>{const s=h.split("-");return n(h,r.palette[s[1]][s[2]])};return{[j$]:{"--Badge-ringColor":l(`palette-${e}-solidBg`),"--Icon-color":"currentColor",[`${r.getColorSchemeSelector("light")}, ${r.getColorSchemeSelector("dark")}`]:{colorScheme:"dark",[i("--palette-focusVisible")]:l(`palette-${e}-200`),[i("--palette-background-body")]:"rgba(0 0 0 / 0.1)",[i("--palette-background-surface")]:"rgba(0 0 0 / 0.06)",[i("--palette-background-popup")]:l(`palette-${e}-700`),[i("--palette-background-level1")]:`rgba(${l(`palette-${e}-darkChannel`)} / 0.2)`,[i("--palette-background-level2")]:`rgba(${l(`palette-${e}-darkChannel`)} / 0.36)`,[i("--palette-background-level3")]:`rgba(${l(`palette-${e}-darkChannel`)} / 0.6)`,[i("--palette-text-primary")]:l("palette-common-white"),[i("--palette-text-secondary")]:l(`palette-${e}-200`),[i("--palette-text-tertiary")]:l(`palette-${e}-300`),[i("--palette-text-icon")]:l(`palette-${e}-200`),[i("--palette-divider")]:`rgba(${l(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainColor":l(`palette-${e}-50`),"--variant-plainHoverColor":"#fff","--variant-plainHoverBg":`rgba(${l(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${l(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${l(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedColor":l(`palette-${e}-50`),"--variant-outlinedBorder":`rgba(${l(`palette-${e}-lightChannel`)} / 0.5)`,"--variant-outlinedHoverColor":"#fff","--variant-outlinedHoverBorder":l(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${l(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${l(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${l(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":"rgba(255 255 255 / 0.2)","--variant-softColor":l("palette-common-white"),"--variant-softHoverColor":l("palette-common-white"),"--variant-softBg":`rgba(${l(`palette-${e}-lightChannel`)} / 0.24)`,"--variant-softHoverBg":`rgba(${l(`palette-${e}-lightChannel`)} / 0.36)`,"--variant-softActiveBg":`rgba(${l(`palette-${e}-lightChannel`)} / 0.16)`,"--variant-softActiveColor":"#fff","--variant-softDisabledColor":`rgba(${l(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${l(`palette-${e}-lightChannel`)} / 0.1)`,"--variant-solidColor":l(`palette-${e}-${e==="neutral"?"600":"500"}`),"--variant-solidBg":l("palette-common-white"),"--variant-solidHoverBg":l("palette-common-white"),"--variant-solidActiveBg":l(`palette-${e}-100`),"--variant-solidDisabledColor":`rgba(${l(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${l(`palette-${e}-lightChannel`)} / 0.1)`}},[`&, & [${Ef}]`]:V$(r)}},vb=e=>t=>{const{theme:r=t}=t,n=Hx(r.cssVarPrefix),i=wT(r.cssVarPrefix),l=h=>{const s=h.split("-");return n(h,r.palette[s[1]][s[2]])};return{[j$]:{"--Badge-ringColor":l(`palette-${e}-softBg`),"--Icon-color":"currentColor",[r.getColorSchemeSelector("dark")]:{[i("--palette-focusVisible")]:l(`palette-${e}-300`),[i("--palette-background-body")]:`rgba(${l(`palette-${e}-mainChannel`)} / 0.1)`,[i("--palette-background-surface")]:`rgba(${l(`palette-${e}-mainChannel`)} / 0.08)`,[i("--palette-background-level1")]:`rgba(${l(`palette-${e}-mainChannel`)} / 0.2)`,[i("--palette-background-level2")]:`rgba(${l(`palette-${e}-mainChannel`)} / 0.4)`,[i("--palette-background-level3")]:`rgba(${l(`palette-${e}-mainChannel`)} / 0.6)`,[i("--palette-text-primary")]:l(`palette-${e}-100`),[i("--palette-text-secondary")]:`rgba(${l(`palette-${e}-lightChannel`)} / 0.72)`,[i("--palette-text-tertiary")]:`rgba(${l(`palette-${e}-lightChannel`)} / 0.6)`,[i("--palette-text-icon")]:`rgba(${l(`palette-${e}-lightChannel`)} / 0.6)`,[i("--palette-divider")]:`rgba(${l(`palette-${e}-lightChannel`)} / 0.2)`,"--variant-plainColor":`rgba(${l(`palette-${e}-lightChannel`)} / 1)`,"--variant-plainHoverColor":l(`palette-${e}-50`),"--variant-plainHoverBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-plainActiveBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${l(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedColor":`rgba(${l(`palette-${e}-lightChannel`)} / 1)`,"--variant-outlinedHoverColor":l(`palette-${e}-50`),"--variant-outlinedBg":"initial","--variant-outlinedBorder":`rgba(${l(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverBorder":l(`palette-${e}-600`),"--variant-outlinedHoverBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-outlinedActiveBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${l(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":`rgba(${l(`palette-${e}-mainChannel`)} / 0.2)`,"--variant-softColor":l(`palette-${e}-200`),"--variant-softBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-softHoverColor":"#fff","--variant-softHoverBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-softActiveBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.48)`,"--variant-softDisabledColor":`rgba(${l(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-solidColor":"#fff","--variant-solidBg":l(`palette-${e}-500`),"--variant-solidHoverColor":"#fff","--variant-solidHoverBg":l(`palette-${e}-600`),"--variant-solidActiveBg":l(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${l(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.12)`},[r.getColorSchemeSelector("light")]:{[i("--palette-focusVisible")]:l(`palette-${e}-500`),[i("--palette-background-body")]:`rgba(${l(`palette-${e}-mainChannel`)} / 0.1)`,[i("--palette-background-surface")]:`rgba(${l(`palette-${e}-mainChannel`)} / 0.08)`,[i("--palette-background-level1")]:`rgba(${l(`palette-${e}-mainChannel`)} / 0.2)`,[i("--palette-background-level2")]:`rgba(${l(`palette-${e}-mainChannel`)} / 0.32)`,[i("--palette-background-level3")]:`rgba(${l(`palette-${e}-mainChannel`)} / 0.48)`,[i("--palette-text-primary")]:l(`palette-${e}-700`),[i("--palette-text-secondary")]:`rgba(${l(`palette-${e}-darkChannel`)} / 0.8)`,[i("--palette-text-tertiary")]:`rgba(${l(`palette-${e}-darkChannel`)} / 0.68)`,[i("--palette-text-icon")]:l(`palette-${e}-500`),[i("--palette-divider")]:`rgba(${l(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainColor":`rgba(${l(`palette-${e}-darkChannel`)} / 0.8)`,"--variant-plainHoverColor":`rgba(${l(`palette-${e}-darkChannel`)} / 1)`,"--variant-plainHoverBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-plainDisabledColor":`rgba(${l(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedColor":`rgba(${l(`palette-${e}-mainChannel`)} / 1)`,"--variant-outlinedBorder":`rgba(${l(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverColor":l(`palette-${e}-600`),"--variant-outlinedHoverBorder":l(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-outlinedDisabledColor":`rgba(${l(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedDisabledBorder":`rgba(${l(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-softColor":l(`palette-${e}-600`),"--variant-softBg":`rgba(${l(`palette-${e}-lightChannel`)} / 0.8)`,"--variant-softHoverColor":l(`palette-${e}-700`),"--variant-softHoverBg":l(`palette-${e}-200`),"--variant-softActiveBg":l(`palette-${e}-300`),"--variant-softDisabledColor":`rgba(${l(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-softDisabledBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.08)`,"--variant-solidColor":l("palette-common-white"),"--variant-solidBg":l(`palette-${e}-${e==="neutral"?"700":"500"}`),"--variant-solidHoverColor":l("palette-common-white"),"--variant-solidHoverBg":l(`palette-${e}-600`),"--variant-solidActiveBg":l(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${l(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-solidDisabledBg":`rgba(${l(`palette-${e}-mainChannel`)} / 0.08)`}},[`&, & [${Ef}]`]:V$(r)}},U$=Wf(H.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),RG=Wf(H.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),H$=R.createContext(void 0);function Wu(e,t){let r=t,n=e;return e==="outlined"&&(r="neutral",n="plain"),e==="plain"&&(r="neutral"),{variant:n,color:r}}function yb(e,t,r=!1){const n=R.useContext(H$),[i,l]=typeof n=="string"?n.split(":"):[],h=Wu(i||void 0,l||void 0);return h.variant=e||h.variant,h.color=t||(r?l:h.color),h}function _b({children:e,color:t,variant:r}){return H.jsx(H$.Provider,{value:`${r||""}:${t||""}`,children:e})}function DG(e){return Zr("MuiIconButton",e)}const eR=Gr("MuiIconButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","loading","loadingIndicator"]),xb=R.createContext({}),G$=R.createContext(void 0);function MG(e){return Zr("MuiCircularProgress",e)}Gr("MuiCircularProgress",["root","determinate","svg","track","progress","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);let zG=e=>e,tR;const LG=["color","backgroundColor"],OG=["children","className","color","size","variant","thickness","determinate","value","component","slots","slotProps"],$G=Wz({"0%":{transform:"rotate(-90deg)"},"100%":{transform:"rotate(270deg)"}}),BG=e=>{const{determinate:t,color:r,variant:n,size:i}=e,l={root:["root",t&&"determinate",r&&`color${xt(r)}`,n&&`variant${xt(n)}`,i&&`size${xt(i)}`],svg:["svg"],track:["track"],progress:["progress"]};return Nr(l,MG,{})};function bh(e,t){return`var(--CircularProgress-${e}Thickness, var(--CircularProgress-thickness, ${t}))`}const FG=ft("span",{name:"JoyCircularProgress",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,n,i,l;const h=((r=t.variants[e.variant])==null?void 0:r[e.color])||{},{color:s,backgroundColor:m}=h,y=Ht(h,LG);return K({"--Icon-fontSize":"calc(0.4 * var(--_root-size))","--CircularProgress-trackColor":m,"--CircularProgress-progressColor":s,"--CircularProgress-percent":e.value,"--CircularProgress-linecap":"round"},e.size==="sm"&&{"--_root-size":"var(--CircularProgress-size, 24px)","--_track-thickness":bh("track","3px"),"--_progress-thickness":bh("progress","3px")},e.instanceSize==="sm"&&{"--CircularProgress-size":"24px"},e.size==="md"&&{"--_track-thickness":bh("track","6px"),"--_progress-thickness":bh("progress","6px"),"--_root-size":"var(--CircularProgress-size, 40px)"},e.instanceSize==="md"&&{"--CircularProgress-size":"40px"},e.size==="lg"&&{"--_track-thickness":bh("track","8px"),"--_progress-thickness":bh("progress","8px"),"--_root-size":"var(--CircularProgress-size, 64px)"},e.instanceSize==="lg"&&{"--CircularProgress-size":"64px"},e.thickness&&{"--_track-thickness":`${e.thickness}px`,"--_progress-thickness":`${e.thickness}px`},{"--_thickness-diff":"calc(var(--_track-thickness) - var(--_progress-thickness))","--_inner-size":"calc(var(--_root-size) - 2 * var(--variant-borderWidth, 0px))","--_outlined-inset":"max(var(--_track-thickness), var(--_progress-thickness))",width:"var(--_root-size)",height:"var(--_root-size)",borderRadius:"var(--_root-size)",margin:"var(--CircularProgress-margin)",boxSizing:"border-box",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0,position:"relative",color:s},e.children&&{fontFamily:t.vars.fontFamily.body,fontWeight:t.vars.fontWeight.md,fontSize:"calc(0.2 * var(--_root-size))"},y,e.variant==="outlined"&&{"&::before":K({content:'""',display:"block",position:"absolute",borderRadius:"inherit",top:"var(--_outlined-inset)",left:"var(--_outlined-inset)",right:"var(--_outlined-inset)",bottom:"var(--_outlined-inset)"},y)},e.variant==="soft"&&{"--CircularProgress-trackColor":t.variants.soft.neutral.backgroundColor,"--CircularProgress-progressColor":(n=t.variants.solid)==null?void 0:n[e.color].backgroundColor},e.variant==="solid"&&{"--CircularProgress-trackColor":(i=t.variants.softHover)==null?void 0:i[e.color].backgroundColor,"--CircularProgress-progressColor":(l=t.variants.solid)==null?void 0:l[e.color].backgroundColor})}),NG=ft("svg",{name:"JoyCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({width:"inherit",height:"inherit",display:"inherit",boxSizing:"inherit",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))"}),jG=ft("circle",{name:"JoyCircularProgress",slot:"track",overridesResolver:(e,t)=>t.track})({cx:"50%",cy:"50%",r:"calc(var(--_inner-size) / 2 - var(--_track-thickness) / 2 + min(0px, var(--_thickness-diff) / 2))",fill:"transparent",strokeWidth:"var(--_track-thickness)",stroke:"var(--CircularProgress-trackColor)"}),VG=ft("circle",{name:"JoyCircularProgress",slot:"progress",overridesResolver:(e,t)=>t.progress})({"--_progress-radius":"calc(var(--_inner-size) / 2 - var(--_progress-thickness) / 2 - max(0px, var(--_thickness-diff) / 2))","--_progress-length":"calc(2 * 3.1415926535 * var(--_progress-radius))",cx:"50%",cy:"50%",r:"var(--_progress-radius)",fill:"transparent",strokeWidth:"var(--_progress-thickness)",stroke:"var(--CircularProgress-progressColor)",strokeLinecap:"var(--CircularProgress-linecap, round)",strokeDasharray:"var(--_progress-length)",strokeDashoffset:"calc(var(--_progress-length) - var(--CircularProgress-percent) * var(--_progress-length) / 100)",transformOrigin:"center",transform:"rotate(-90deg)"},({ownerState:e})=>!e.determinate&&ik(tR||(tR=zG`
      animation: var(--CircularProgress-circulation, 0.8s linear 0s infinite normal none running)
        ${0};
    `),$G)),cv=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyCircularProgress"}),{children:i,className:l,color:h="primary",size:s="md",variant:m="soft",thickness:y,determinate:S=!1,value:T=S?0:25,component:I,slots:D={},slotProps:F={}}=n,V=Ht(n,OG),Z=K({},n,{color:h,size:s,variant:m,thickness:y,value:T,determinate:S,instanceSize:t.size}),z=BG(Z),O=K({},V,{component:I,slots:D,slotProps:F}),[L,te]=Ft("root",{ref:r,className:Gn(z.root,l),elementType:FG,externalForwardedProps:O,ownerState:Z,additionalProps:K({role:"progressbar",style:{"--CircularProgress-percent":T}},T&&S&&{"aria-valuenow":Math.round(typeof T=="number"?T:Number(T||0))})}),[j,$]=Ft("svg",{className:z.svg,elementType:NG,externalForwardedProps:O,ownerState:Z}),[J,ie]=Ft("track",{className:z.track,elementType:jG,externalForwardedProps:O,ownerState:Z}),[xe,ge]=Ft("progress",{className:z.progress,elementType:VG,externalForwardedProps:O,ownerState:Z});return H.jsxs(L,K({},te,{children:[H.jsxs(j,K({},$,{children:[H.jsx(J,K({},ie)),H.jsx(xe,K({},ge))]})),i]}))}),UG=["children","action","component","color","disabled","variant","loading","loadingIndicator","size","slots","slotProps"],HG=e=>{const{color:t,disabled:r,focusVisible:n,focusVisibleClassName:i,size:l,variant:h,loading:s}=e,m={root:["root",r&&"disabled",n&&"focusVisible",h&&`variant${xt(h)}`,t&&`color${xt(t)}`,l&&`size${xt(l)}`,s&&"loading"],loadingIndicator:["loadingIndicator"]},y=Nr(m,DG,{});return n&&i&&(y.root+=` ${i}`),y},uv=ft("button")(({theme:e,ownerState:t})=>{var r,n,i,l;return[K({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.instanceSize&&{"--IconButton-size":{sm:"2rem",md:"2.25rem",lg:"2.75rem"}[t.instanceSize]},t.size==="sm"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.6)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px"},t.size==="md"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.25rem) / 1.5)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2.25rem)",minHeight:"var(--IconButton-size, 2.25rem)",fontSize:e.vars.fontSize.md,paddingInline:"0.25rem"},t.size==="lg"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.75rem) / 1.571)","--CircularProgress-size":"28px","--CircularProgress-thickness":"4px",minWidth:"var(--IconButton-size, 2.75rem)",minHeight:"var(--IconButton-size, 2.75rem)",fontSize:e.vars.fontSize.lg,paddingInline:"0.375rem"},{WebkitTapHighlightColor:"transparent",paddingBlock:0,fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.md,margin:"var(--IconButton-margin)",borderRadius:`var(--IconButton-radius, ${e.vars.radius.sm})`,border:"none",boxSizing:"border-box",backgroundColor:"transparent",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",[e.focus.selector]:K({"--Icon-color":"currentColor"},e.focus.default)}),K({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":K({"--Icon-color":"currentColor"},(n=e.variants[`${t.variant}Hover`])==null?void 0:n[t.color])},'&:active, &[aria-pressed="true"]':K({"--Icon-color":"currentColor"},(i=e.variants[`${t.variant}Active`])==null?void 0:i[t.color]),"&:disabled":(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color]})]}),GG=ft(uv,{name:"JoyIconButton",slot:"Root",overridesResolver:(e,t)=>t.root})({}),WG=ft("span",{name:"JoyIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e,ownerState:t})=>{var r,n;return K({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(n=e.variants[`${t.variant}Disabled`])==null||(n=n[t.color])==null?void 0:n.color})}),Qc=R.forwardRef(function(t,r){var n;const i=Kr({props:t,name:"JoyIconButton"}),{children:l,action:h,component:s="button",color:m="neutral",disabled:y,variant:S="plain",loading:T=!1,loadingIndicator:I,size:D="md",slots:F={},slotProps:V={}}=i,Z=Ht(i,UG),z=R.useContext(xb),O=R.useContext(G$),L=t.variant||z.variant||S,te=t.size||z.size||D,j=t.color||z.color||m,$=(n=t.loading||t.disabled)!=null?n:z.disabled||T||y,J=R.useRef(null),ie=an(J,r),{focusVisible:xe,setFocusVisible:ge,getRootProps:we}=Rs(K({},i,{disabled:$,rootRef:ie})),Te=I??H.jsx(cv,{color:j,thickness:{sm:2,md:3,lg:4}[te]||3});R.useImperativeHandle(h,()=>({focusVisible:()=>{var st;ge(!0),(st=J.current)==null||st.focus()}}),[ge]);const Pe=K({},i,{component:s,color:j,disabled:$,variant:L,loading:T,size:te,focusVisible:xe,instanceSize:t.size}),We=HG(Pe),De=st=>{var Dt;let St=i.onClick;if(typeof V.root=="function"?St=V.root(Pe).onClick:V.root&&(St=V.root.onClick),(Dt=St)==null||Dt(st),O){var $t;($t=O.onClick)==null||$t.call(O,st,i.value)}};let Se=i["aria-pressed"];typeof V.root=="function"?Se=V.root(Pe)["aria-pressed"]:V.root&&(Se=V.root["aria-pressed"]),O!=null&&O.value&&(Array.isArray(O.value)?Se=O.value.indexOf(i.value)!==-1:Se=O.value===i.value);const Fe=K({},Z,{component:s,slots:F,slotProps:V}),[Ce,Ne]=Ft("root",{ref:r,className:We.root,elementType:GG,getSlotProps:we,externalForwardedProps:Fe,ownerState:Pe,additionalProps:{onClick:De,"aria-pressed":Se}}),[Ye,at]=Ft("loadingIndicator",{className:We.loadingIndicator,elementType:WG,externalForwardedProps:Fe,ownerState:Pe});return H.jsx(Ce,K({},Ne,{children:T?H.jsx(Ye,K({},at,{children:Te})):l}))});Qc.muiName="IconButton";function qG(e){return Zr("MuiChip",e)}const a2=Gr("MuiChip",["root","clickable","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","disabled","endDecorator","focusVisible","label","labelSm","labelMd","labelLg","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantSolid","variantSoft","variantOutlined"]),W$=R.createContext({disabled:void 0,variant:void 0,color:void 0}),ZG=["children","className","color","onClick","disabled","size","variant","startDecorator","endDecorator","component","slots","slotProps"],KG=e=>{const{disabled:t,size:r,color:n,clickable:i,variant:l,focusVisible:h}=e,s={root:["root",t&&"disabled",n&&`color${xt(n)}`,r&&`size${xt(r)}`,l&&`variant${xt(l)}`,i&&"clickable"],action:["action",t&&"disabled",h&&"focusVisible"],label:["label",r&&`label${xt(r)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Nr(s,qG,{})},XG=ft("div",{name:"JoyChip",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,n,i;const l=(r=e.variants[t.variant])==null?void 0:r[t.color],{borderRadius:h}=Td({theme:e,ownerState:t},["borderRadius"]);return[K({"--Chip-decoratorChildOffset":"min(calc(var(--Chip-paddingInline) - (var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2), var(--Chip-paddingInline))","--Chip-decoratorChildRadius":"max(var(--_Chip-radius) - var(--variant-borderWidth, 0px) - var(--_Chip-paddingBlock), min(var(--_Chip-paddingBlock) + var(--variant-borderWidth, 0px), var(--_Chip-radius) / 2))","--Chip-deleteRadius":"var(--Chip-decoratorChildRadius)","--Chip-deleteSize":"var(--Chip-decoratorChildHeight)","--Avatar-radius":"var(--Chip-decoratorChildRadius)","--Avatar-size":"var(--Chip-decoratorChildHeight)","--Icon-margin":"initial","--Icon-color":"currentColor","--unstable_actionRadius":"var(--_Chip-radius)"},t.size==="sm"&&{"--Chip-paddingInline":"0.375rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.sm,"--_Chip-minHeight":"var(--Chip-minHeight, 1.25rem)",gap:"3px"},t.size==="md"&&{"--Chip-paddingInline":"0.5rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.25rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.md,"--_Chip-minHeight":"var(--Chip-minHeight, 1.5rem)",gap:"0.25rem"},t.size==="lg"&&{"--Chip-paddingInline":"0.75rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.375rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.lg,"--_Chip-minHeight":"var(--Chip-minHeight, 1.75rem)",gap:"0.375rem"},{"--_Chip-radius":"var(--Chip-radius, 1.5rem)","--_Chip-paddingBlock":"max((var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2, 0px)",minHeight:"var(--_Chip-minHeight)",maxWidth:"max-content",paddingInline:"var(--Chip-paddingInline)",borderRadius:"var(--_Chip-radius)",position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",verticalAlign:"middle",boxSizing:"border-box"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[t.size]}`],{fontWeight:e.vars.fontWeight.md,[`&.${a2.disabled}`]:{color:(n=e.variants[`${t.variant}Disabled`])==null||(n=n[t.color])==null?void 0:n.color}}),...t.clickable?[{"--variant-borderWidth":"0px",color:l==null?void 0:l.color}]:[K({backgroundColor:e.vars.palette.background.surface},l,{[`&.${a2.disabled}`]:(i=e.variants[`${t.variant}Disabled`])==null?void 0:i[t.color]})],h!==void 0&&{"--_Chip-radius":h}]}),YG=ft("span",{name:"JoyChip",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>K({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",order:1,minInlineSize:0,flexGrow:1},e.clickable&&{zIndex:1,pointerEvents:"none"})),JG=ft("button",{name:"JoyChip",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,n,i,l;return[{"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,position:"absolute",zIndex:0,top:0,left:0,bottom:0,right:0,width:"100%",border:"none",cursor:"pointer",padding:"initial",margin:"initial",backgroundColor:"initial",textDecoration:"none",borderRadius:"inherit",[e.focus.selector]:e.focus.default},K({backgroundColor:e.vars.palette.background.surface},(r=e.variants[t.variant])==null?void 0:r[t.color]),{"&:hover":{"@media (hover: hover)":(n=e.variants[`${t.variant}Hover`])==null?void 0:n[t.color]}},{"&:active":(i=e.variants[`${t.variant}Active`])==null?void 0:i[t.color]},{[`&.${a2.disabled}`]:(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color]}]}),QG=ft("span",{name:"JoyChip",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Avatar-marginInlineStart":"calc(var(--Chip-decoratorChildOffset) * -1)","--IconButton-margin":"0 calc(-1 * var(--Chip-paddingInline) / 3) 0 calc(var(--Chip-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Chip-paddingInline) / -4)",display:"inherit",order:0,zIndex:1,pointerEvents:"none"}),eW=ft("span",{name:"JoyChip",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--IconButton-margin":"0 calc(var(--Chip-decoratorChildOffset) * -1) 0 calc(-1 * var(--Chip-paddingInline) / 3)","--Icon-margin":"0 calc(var(--Chip-paddingInline) / -4) 0 0",display:"inherit",order:2,zIndex:1,pointerEvents:"none"}),tW=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyChip"}),{children:i,className:l,color:h="neutral",onClick:s,disabled:m=!1,size:y="md",variant:S="soft",startDecorator:T,endDecorator:I,component:D,slots:F={},slotProps:V={}}=n,Z=Ht(n,ZG),z=!!s||!!V.action,O=K({},n,{disabled:m,size:y,color:h,variant:S,clickable:z,focusVisible:!1}),L=typeof V.action=="function"?V.action(O):V.action,te=R.useRef(null),{focusVisible:j,getRootProps:$}=Rs(K({},L,{disabled:m,rootRef:te}));O.focusVisible=j;const J=KG(O),ie=K({},Z,{component:D,slots:F,slotProps:V}),[xe,ge]=Ft("root",{ref:r,className:Gn(J.root,l),elementType:XG,externalForwardedProps:ie,ownerState:O}),[we,Te]=Ft("label",{className:J.label,elementType:YG,externalForwardedProps:ie,ownerState:O}),Pe=ta(Te.id),[We,De]=Ft("action",{className:J.action,elementType:JG,externalForwardedProps:ie,ownerState:O,getSlotProps:$,additionalProps:{"aria-labelledby":Pe,as:L==null?void 0:L.component,onClick:s}}),[Se,Fe]=Ft("startDecorator",{className:J.startDecorator,elementType:QG,externalForwardedProps:ie,ownerState:O}),[Ce,Ne]=Ft("endDecorator",{className:J.endDecorator,elementType:eW,externalForwardedProps:ie,ownerState:O}),Ye=R.useMemo(()=>({disabled:m}),[m]);return H.jsx(W$.Provider,{value:Ye,children:H.jsx(_b,{variant:S,color:h,children:H.jsxs(xe,K({},ge,{children:[z&&H.jsx(We,K({},De)),H.jsx(we,K({},Te,{id:Pe,children:i})),T&&H.jsx(Se,K({},Fe,{children:T})),I&&H.jsx(Ce,K({},Ne,{children:I}))]}))})})}),rW=Wf(H.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Cancel");function nW(e){return Zr("MuiChipDelete",e)}Gr("MuiChipDelete",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSolid","variantSoft","variantOutlined"]);var rR;const iW=["children","variant","color","disabled","onKeyDown","onDelete","onClick","component","slots","slotProps"],oW=["onDelete"],aW=e=>{const{focusVisible:t,variant:r,color:n,disabled:i}=e,l={root:["root",i&&"disabled",t&&"focusVisible",r&&`variant${xt(r)}`,n&&`color${xt(n)}`]};return Nr(l,nW,{})},sW=ft(uv,{name:"JoyChipDelete",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({"--IconButton-size":"var(--Chip-deleteSize, 2rem)","--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.3)",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px",pointerEvents:"visible",borderRadius:"var(--Chip-deleteRadius, 50%)",zIndex:1,padding:0})),lW=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyChipDelete"}),{children:i,variant:l="plain",color:h="neutral",disabled:s,onKeyDown:m,onDelete:y,onClick:S,component:T,slots:I={},slotProps:D={}}=n,F=Ht(n,iW),V=R.useContext(W$),{variant:Z=l,color:z=h}=yb(t.variant,t.color,!0),O=t.color||z,L=s??V.disabled,te=R.useRef(null),j=an(te,r),{focusVisible:$,getRootProps:J}=Rs(K({},n,{disabled:L,rootRef:j})),ie=K({},n,{disabled:L,variant:Z,color:O,focusVisible:$}),xe=aW(ie),ge=K({},F,{component:T,slots:I,slotProps:D}),we=Se=>{!L&&y&&y(Se),S&&S(Se)},Te=Se=>{["Backspace","Enter","Delete"].includes(Se.key)&&(Se.preventDefault(),!L&&y&&y(Se)),m&&m(Se)},[Pe,We]=Ft("root",{ref:r,elementType:sW,getSlotProps:J,externalForwardedProps:ge,ownerState:ie,additionalProps:{as:T,onKeyDown:Te,onClick:we},className:xe.root}),De=Ht(We,oW);return H.jsx(Pe,K({},De,{children:i??(rR||(rR=H.jsx(rW,{})))}))});function cW(e){return Zr("MuiInput",e)}const q$=Gr("MuiInput",["root","input","formControl","focused","disabled","error","adornedStart","adornedEnd","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid","fullWidth","startDecorator","endDecorator"]),bb=R.createContext(void 0),uW=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoFocus","className","defaultValue","disabled","disabledInProp","error","id","name","onClick","onChange","onKeyDown","onKeyUp","onFocus","onBlur","placeholder","readOnly","required","type","value"];function dW(e,t){var r;const n=R.useContext(bb),{"aria-describedby":i,"aria-label":l,"aria-labelledby":h,autoComplete:s,autoFocus:m,className:y,defaultValue:S,disabled:T,disabledInProp:I,error:D,id:F,name:V,onClick:Z,onChange:z,onKeyDown:O,onKeyUp:L,onFocus:te,onBlur:j,placeholder:$,readOnly:J,required:ie,type:xe,value:ge}=e,we=Ht(e,uW),{getRootProps:Te,getInputProps:Pe,focused:We,error:De,disabled:Se}=B8({disabled:(r=I??(n==null?void 0:n.disabled))!=null?r:T,defaultValue:S,error:D,onBlur:j,onClick:Z,onChange:z,onFocus:te,required:ie??(n==null?void 0:n.required),value:ge}),Fe={[t.disabled]:Se,[t.error]:De,[t.focused]:We,[t.formControl]:!!n,[y]:y},Ce={[t.disabled]:Se};return K({formControl:n,propsToForward:{"aria-describedby":i,"aria-label":l,"aria-labelledby":h,autoComplete:s,autoFocus:m,disabled:Se,id:F,onKeyDown:O,onKeyUp:L,name:V,placeholder:$,readOnly:J,type:xe},rootStateClasses:Fe,inputStateClasses:Ce,getRootProps:Te,getInputProps:Pe,focused:We,error:De,disabled:Se},we)}const hW=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","fullWidth","size","color","variant","startDecorator","endDecorator","component","slots","slotProps"],fW=e=>{const{disabled:t,fullWidth:r,variant:n,color:i,size:l}=e,h={root:["root",t&&"disabled",r&&"fullWidth",n&&`variant${xt(n)}`,i&&`color${xt(i)}`,l&&`size${xt(l)}`],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Nr(h,cW,{})},Z$=ft("div")(({theme:e,ownerState:t})=>{var r,n,i,l,h,s;const m=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color];return[K({"--Input-radius":e.vars.radius.sm,"--Input-gap":"0.5rem","--Input-placeholderColor":"inherit","--Input-placeholderOpacity":.64,"--Input-decoratorColor":e.vars.palette.text.icon,"--Input-focused":"0","--Input-focusedThickness":e.vars.focus.thickness,"--Input-focusedHighlight":(n=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:n[500],[`&:not([${Ef}])`]:K({},t.instanceColor&&{"--_Input-focusedHighlight":(i=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:i[500]},{"--Input-focusedHighlight":`var(--_Input-focusedHighlight, ${e.vars.palette.focusVisible})`})},t.size==="sm"&&{"--Input-minHeight":"2rem","--Input-paddingInline":"0.5rem","--Input-decoratorChildHeight":"min(1.5rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Input-minHeight":"2.25rem","--Input-paddingInline":"0.75rem","--Input-decoratorChildHeight":"min(1.75rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Input-minHeight":"2.75rem","--Input-paddingInline":"1rem","--Input-gap":"0.75rem","--Input-decoratorChildHeight":"min(2.25rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Input-decoratorChildOffset":"min(calc(var(--Input-paddingInline) - (var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2), var(--Input-paddingInline))","--_Input-paddingBlock":"max((var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2, 0px)","--Input-decoratorChildRadius":"max(var(--Input-radius) - var(--variant-borderWidth, 0px) - var(--_Input-paddingBlock), min(var(--_Input-paddingBlock) + var(--variant-borderWidth, 0px), var(--Input-radius) / 2))","--Button-minHeight":"var(--Input-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Input-decoratorChildHeight)","--Button-radius":"var(--Input-decoratorChildRadius)","--IconButton-radius":"var(--Input-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Input-minHeight)"},t.fullWidth&&{width:"100%"},{cursor:"text",position:"relative",display:"flex",paddingInline:"var(--Input-paddingInline)",borderRadius:"var(--Input-radius)"},e.typography[`body-${t.size}`],m,{backgroundColor:(l=m==null?void 0:m.backgroundColor)!=null?l:e.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Input-focusedInset, inset) 0 0 0 calc(var(--Input-focused) * var(--Input-focusedThickness)) var(--Input-focusedHighlight)"}}),{"&:hover":K({},(h=e.variants[`${t.variant}Hover`])==null?void 0:h[t.color],{backgroundColor:null}),[`&.${q$.disabled}`]:(s=e.variants[`${t.variant}Disabled`])==null?void 0:s[t.color],"&:focus-within::before":{"--Input-focused":"1"}}]}),K$=ft("input")(({ownerState:e})=>({border:"none",minWidth:0,outline:0,padding:0,flex:1,color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",textOverflow:"ellipsis","&:-webkit-autofill":K({paddingInline:"var(--Input-paddingInline)"},!e.startDecorator&&{marginInlineStart:"calc(-1 * var(--Input-paddingInline))",paddingInlineStart:"var(--Input-paddingInline)",borderTopLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"},!e.endDecorator&&{marginInlineEnd:"calc(-1 * var(--Input-paddingInline))",paddingInlineEnd:"var(--Input-paddingInline)",borderTopRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"}),"&::-webkit-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"}})),X$=ft("div")({"--Button-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Input-paddingInline) / -4)",display:"inherit",alignItems:"center",paddingBlock:"var(--unstable_InputPaddingBlock)",flexWrap:"wrap",marginInlineEnd:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),Y$=ft("div")({"--Button-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Input-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",marginInlineStart:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),pW=ft(Z$,{name:"JoyInput",slot:"Root",overridesResolver:(e,t)=>t.root})({}),mW=ft(K$,{name:"JoyInput",slot:"Input",overridesResolver:(e,t)=>t.input})({}),gW=ft(X$,{name:"JoyInput",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),vW=ft(Y$,{name:"JoyInput",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({}),yW=R.forwardRef(function(t,r){var n,i,l,h,s,m;const y=Kr({props:t,name:"JoyInput"}),S=dW(K({},y,{disabledInProp:t.disabled}),q$),{propsToForward:T,rootStateClasses:I,inputStateClasses:D,getRootProps:F,getInputProps:V,formControl:Z,focused:z,error:O=!1,disabled:L,fullWidth:te=!1,size:j="md",color:$="neutral",variant:J="outlined",startDecorator:ie,endDecorator:xe,component:ge,slots:we={},slotProps:Te={}}=S,Pe=Ht(S,hW),We=(n=(i=t.error)!=null?i:Z==null?void 0:Z.error)!=null?n:O,De=(l=(h=t.size)!=null?h:Z==null?void 0:Z.size)!=null?l:j,Se=(s=t.color)!=null?s:We?"danger":(m=Z==null?void 0:Z.color)!=null?m:$,Fe=K({instanceColor:We?"danger":t.color},y,{fullWidth:te,color:Se,disabled:L,error:We,focused:z,size:De,variant:J}),Ce=fW(Fe),Ne=K({},Pe,{component:ge,slots:we,slotProps:Te}),[Ye,at]=Ft("root",{ref:r,className:[Ce.root,I],elementType:pW,getSlotProps:F,externalForwardedProps:Ne,ownerState:Fe}),[st,Dt]=Ft("input",K({},Z&&{additionalProps:{id:Z.htmlFor,"aria-describedby":Z["aria-describedby"]}},{className:[Ce.input,D],elementType:mW,getSlotProps:V,internalForwardedProps:T,externalForwardedProps:Ne,ownerState:Fe})),[St,$t]=Ft("startDecorator",{className:Ce.startDecorator,elementType:gW,externalForwardedProps:Ne,ownerState:Fe}),[Ct,it]=Ft("endDecorator",{className:Ce.endDecorator,elementType:vW,externalForwardedProps:Ne,ownerState:Fe});return H.jsxs(Ye,K({},at,{children:[ie&&H.jsx(St,K({},$t,{children:ie})),H.jsx(st,K({},Dt)),xe&&H.jsx(Ct,K({},it,{children:xe}))]}))});function _W(e){return Zr("MuiListSubheader",e)}Gr("MuiListSubheader",["root","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const xW=["component","className","children","id","sticky","variant","color","slots","slotProps"],bW=e=>{const{variant:t,color:r,sticky:n}=e,i={root:["root",n&&"sticky",r&&`color${xt(r)}`,t&&`variant${xt(t)}`]};return Nr(i,_W,{})},wW=ft("div",{name:"JoyListSubheader",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,n;return K({boxSizing:"border-box",display:"flex",alignItems:"center",marginInline:"var(--ListItem-marginInline)",paddingBlock:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)",minBlockSize:"var(--ListItem-minHeight)"},e.typography["body-xs"],{fontSize:"max(0.75em, 0.625rem)",textTransform:"uppercase",letterSpacing:"0.1em"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:"var(--ListItem-stickyBackground)"},{color:t.color?`var(--_Link-color, rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1))`:e.vars.palette.text.tertiary},t.instanceColor&&{[`&:not([${Ef}])`]:{"--_Link-color":e.vars.palette.text.secondary}},(n=e.variants[t.variant])==null?void 0:n[t.color])}),SW=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyListSubheader"}),{component:i,className:l,children:h,id:s,sticky:m=!1,variant:y,color:S,slots:T={},slotProps:I={}}=n,D=Ht(n,xW),F=ta(s),V=R.useContext(F$);R.useEffect(()=>{V&&V(F||"")},[V,F]);const Z=K({instanceColor:t.color},n,{id:F,sticky:m,variant:y,color:y?S??"neutral":S}),z=bW(Z),O=K({},D,{component:i,slots:T,slotProps:I}),[L,te]=Ft("root",{ref:r,className:Gn(z.root,l),elementType:wW,externalForwardedProps:O,ownerState:Z,additionalProps:{as:i,id:F}});return H.jsx(L,K({},te,{children:h}))});function CW(e){return Zr("MuiAutocomplete",e)}const Oc=Gr("MuiAutocomplete",["root","wrapper","input","startDecorator","endDecorator","formControl","focused","disabled","error","multiple","limitTag","hasPopupIcon","hasClearIcon","clearIndicator","popupIndicator","popupIndicatorOpen","listbox","option","loading","noOptions","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]),J$=ft(sv)(({theme:e,ownerState:t})=>{var r;const n=(r=e.variants[t.variant])==null?void 0:r[t.color];return K({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(n==null?void 0:n.backgroundColor)||(n==null?void 0:n.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},pb,{boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`},!(n!=null&&n.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},{zIndex:e.vars.zIndex.popup,overflow:"auto",maxHeight:"40vh",position:"relative","&:empty":{visibility:"hidden"},[`& .${A_.nested}, & .${A_.nested} .${vG.root}`]:{position:"initial"}})});ft(J$,{name:"JoyAutocompleteListbox",slot:"Root",overridesResolver:(e,t)=>t.root})({});function kW(e){return Zr("MuiAutocompleteOption",e)}Gr("MuiAutocompleteOption",["root","focused","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const TW=["children","component","color","variant","className","slots","slotProps"],EW=e=>{const{color:t,variant:r}=e,n={root:["root",t&&`color${xt(t)}`,r&&`variant${xt(r)}`]};return Nr(n,kW,{})},Q$=ft(lv)(({theme:e,ownerState:t})=>{var r,n;return{'&[aria-disabled="true"]':(r=e.variants[`${t.variant}Disabled`])==null?void 0:r[t.color],'&[aria-selected="true"]':K({},(n=e.variants[`${t.variant}Active`])==null?void 0:n[t.color],{fontWeight:e.vars.fontWeight.md})}}),IW=ft(Q$,{name:"JoyAutocompleteOption",slot:"Root",overridesResolver:(e,t)=>t.root})({}),PW=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyAutocompleteOption"}),{children:i,component:l="li",color:h="neutral",variant:s="plain",className:m,slots:y={},slotProps:S={}}=n,T=Ht(n,TW),{variant:I=s,color:D=h}=yb(t.variant,t.color),F=K({},n,{component:l,color:D,variant:I}),V=EW(F),Z=K({},T,{component:l,slots:y,slotProps:S}),[z,O]=Ft("root",{ref:r,className:Gn(V.root,m),elementType:IW,externalForwardedProps:Z,ownerState:F,additionalProps:{as:l,role:"option"}});return H.jsx(z,K({},O,{children:i}))});var nR,iR;const AW=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoHighlight","autoSelect","autoFocus","blurOnSelect","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","defaultValue","disableCloseOnSelect","disabledItemsFocusable","disableListWrap","disableClearable","disabled","endDecorator","error","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","handleHomeEndKeys","includeInputInList","isOptionEqualToValue","groupBy","id","inputValue","limitTags","loading","loadingText","multiple","name","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","placeholder","popupIcon","readOnly","renderGroup","renderOption","renderTags","required","type","startDecorator","size","color","variant","value","component","selectOnFocus","slots","slotProps"],RW=["onDelete"],DW=["key"],MW=["onBlur","onFocus","onMouseDown"],zW=["key"],LW=e=>e.current!==null&&e.current.contains(document.activeElement),OW=e=>{var t;return(t=e.label)!=null?t:e},$W=e=>`+${e}`,BW=e=>H.jsxs(lc,{nested:!0,children:[H.jsx(SW,{sticky:!0,children:e.group}),H.jsx(Ed,{children:e.children})]},e.key),FW=e=>{const{disabled:t,focused:r,hasClearIcon:n,hasPopupIcon:i,popupOpen:l,variant:h,color:s,size:m,multiple:y}=e,S={root:["root",r&&"focused",n&&"hasClearIcon",i&&"hasPopupIcon",h&&`variant${xt(h)}`,s&&`color${xt(s)}`,m&&`size${xt(m)}`],wrapper:["wrapper",y&&"multiple"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",l&&"popupIndicatorOpen",t&&"disabled"],listbox:["listbox"],option:["option"],loading:["loading"],noOptions:["noOptions"],limitTag:["limitTag"]};return Nr(S,CW,{})},NW=ft(Z$,{name:"JoyAutocomplete",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({},e.size==="sm"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="md"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="lg"&&{"--Autocomplete-wrapperGap":"4px"},{"@media (pointer: fine)":{[`&:hover .${Oc.clearIndicator}`]:{visibility:"visible"}}},e.multiple&&!e.startDecorator&&{paddingInlineStart:0})),jW=ft("div",{name:"JoyAutocomplete",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>({flex:1,minWidth:0,display:"flex",alignItems:"center",flexWrap:"wrap",gap:"var(--Autocomplete-wrapperGap)",[`&.${Oc.multiple}`]:K({paddingBlock:"var(--Autocomplete-wrapperGap)"},!e.startDecorator&&{paddingInlineStart:"var(--Autocomplete-wrapperGap)"},!e.endDecorator&&{paddingInlineEnd:"var(--Autocomplete-wrapperGap)"})})),VW=ft(K$,{name:"JoyAutocomplete",slot:"Input",overridesResolver:(e,t)=>t.input})(({ownerState:e})=>K({minWidth:30,minHeight:"var(--Chip-minHeight)"},e.multiple&&{marginInlineStart:"calc(var(--Autocomplete-wrapperGap) * 2.5)"})),UW=ft(X$,{name:"JoyAutocomplete",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),HW=ft(Y$,{name:"JoyAutocomplete",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})(({ownerState:e})=>K({},(e.hasClearIcon||e.hasPopupIcon)&&{"--Button-margin":"0px","--IconButton-margin":"0px","--Icon-margin":"0px"})),GW=ft(uv,{name:"JoyAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})(({ownerState:e})=>K({alignSelf:"center"},!e.hasPopupIcon&&{marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)"},{marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",visibility:e.focused?"visible":"hidden"})),WW=ft(uv,{name:"JoyAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>t.popupIndicator})({alignSelf:"center",marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)",[`&.${Oc.popupIndicatorOpen}`]:{transform:"rotate(180deg)","--Icon-color":"currentColor"}}),qW=ft(J$,{name:"JoyAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`})),ZW=ft(Q$,{name:"JoyAutocomplete",slot:"Option",overridesResolver:(e,t)=>t.option})({}),KW=ft(lc,{name:"JoyAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),XW=ft(lc,{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),YW=ft("div",{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})({marginInlineStart:"calc(var(--Input-paddingInline) / 2)",marginBlockStart:"var(--_Input-paddingBlock)"}),D_=R.forwardRef(function(t,r){var n,i,l,h,s,m,y;const S=Kr({props:t,name:"JoyAutocomplete"}),{"aria-describedby":T,"aria-label":I,"aria-labelledby":D,autoFocus:F,clearIcon:V=nR||(nR=H.jsx(U$,{fontSize:"md"})),clearText:Z="Clear",closeText:z="Close",disableClearable:O=!1,disabled:L,endDecorator:te,error:j=!1,forcePopupIcon:$="auto",freeSolo:J=!1,getLimitTagsText:ie=$W,getOptionLabel:xe=OW,groupBy:ge,id:we,limitTags:Te=-1,loading:Pe=!1,loadingText:We="Loading…",multiple:De=!1,name:Se,noOptionsText:Fe="No options",openText:Ce="Open",placeholder:Ne,popupIcon:Ye=iR||(iR=H.jsx(RG,{})),readOnly:at=!1,renderGroup:st=BW,renderOption:Dt,renderTags:St,required:$t,type:Ct,startDecorator:it,size:Ze="md",color:rt="neutral",variant:pt="outlined",component:sr,slots:rr={},slotProps:wr={}}=S,Lr=Ht(S,AW),nr=R.useContext(bb),Et=(n=(i=t.error)!=null?i:nr==null?void 0:nr.error)!=null?n:j,hr=(l=(h=t.size)!=null?h:nr==null?void 0:nr.size)!=null?l:Ze,Gt=(s=t.color)!=null?s:Et?"danger":(m=nr==null?void 0:nr.color)!=null?m:rt,Dr=(y=L??(nr==null?void 0:nr.disabled))!=null?y:!1,{getRootProps:He,getInputProps:xr,getPopupIndicatorProps:Tr,getClearProps:Jt,getTagProps:or,getListboxProps:Cr,getOptionProps:Mr,value:Sr,dirty:fr,popupOpen:Qt,focused:dr,focusedTag:tn,anchorEl:je,setAnchorEl:kt,inputValue:bt,groupedOptions:Ee}=oG(K({},S,{id:we??(nr==null?void 0:nr.htmlFor),componentName:"Autocomplete",unstable_classNamePrefix:"Mui",unstable_isActiveElementInListbox:LW})),{onMouseDown:Ve}=xr(),{onClick:Xe}=He(),Tt=!O&&!Dr&&fr&&!at,gt=(!J||$===!0)&&$!==!1,Rt=K({instanceColor:t.color},S,{value:Sr,disabled:Dr,focused:dr,getOptionLabel:xe,hasOptions:!!Ee.length,hasClearIcon:Tt,hasPopupIcon:gt,inputFocused:tn===-1,popupOpen:Qt,size:hr,color:Gt,variant:pt}),vr=FW(Rt),Bt=K({},Lr,{component:sr,slots:rr,slotProps:wr});let mr;if(De&&Sr.length>0){const Wt=Ur=>{const Wr=or(Ur),{onDelete:Ni}=Wr,Wn=Ht(Wr,RW);return K({disabled:Dr,size:hr,onClick:Ni},Wn)};St?mr=St(Sr,Wt,Rt):mr=Sr.map((Ur,Wr)=>{const Ni=Wt({index:Wr}),{key:Wn}=Ni,qn=Ht(Ni,DW);return H.jsx(tW,{size:hr,variant:"soft",color:"neutral",endDecorator:H.jsx(lW,K({},qn),Wn),sx:{minWidth:0},children:xe(Ur)},Wr)})}const ue=an(r,kt),Y={[Oc.disabled]:Dr,[Oc.error]:Et,[Oc.focused]:dr,[Oc.formControl]:!!nr},[Q,N]=Ft("root",{ref:ue,className:[vr.root,Y],elementType:NW,externalForwardedProps:Bt,ownerState:Rt,getSlotProps:He,additionalProps:{onClick:Wt=>{Xe&&Xe(Wt),Wt.currentTarget===Wt.target&&Ve&&Ve(Wt)}}}),[X,re]=Ft("wrapper",{className:vr.wrapper,elementType:jW,externalForwardedProps:Bt,ownerState:Rt}),he={[Oc.disabled]:Dr},[pe,se]=Ft("input",{className:[vr.input,he],elementType:VW,getSlotProps:Wt=>{const Ur=xr(),{onBlur:Wr,onFocus:Ni,onMouseDown:Wn}=Ur,qn=Ht(Ur,MW);return K({},qn,{onBlur:Co=>{var ji;Wr==null||Wr(Co),(ji=Wt.onBlur)==null||ji.call(Wt,Co)},onFocus:Co=>{var ji;Ni==null||Ni(Co),(ji=Wt.onFocus)==null||ji.call(Wt,Co)},onMouseDown:Co=>{var ji;Wn==null||Wn(Co),(ji=Wt.onMouseDown)==null||ji.call(Wt,Co)}})},externalForwardedProps:Bt,ownerState:Rt,additionalProps:{autoFocus:F,placeholder:Ne,name:Se,readOnly:at,disabled:Dr,required:$t??(nr==null?void 0:nr.required),type:Ct,"aria-invalid":Et||void 0,"aria-label":I,"aria-labelledby":D,"aria-describedby":T??(nr==null?void 0:nr["aria-describedby"])}}),[_e,Ae]=Ft("startDecorator",{className:vr.startDecorator,elementType:UW,externalForwardedProps:Bt,ownerState:Rt}),[Le,Re]=Ft("endDecorator",{className:vr.endDecorator,elementType:HW,externalForwardedProps:Bt,ownerState:Rt}),[ot,dt]=Ft("clearIndicator",{className:vr.clearIndicator,elementType:GW,getSlotProps:Jt,externalForwardedProps:Bt,ownerState:Rt,getSlotOwnerState:Wt=>({size:Wt.size||hr,variant:Wt.variant||Wu(pt,Gt).variant||"plain",color:Wt.color||Wu(pt,Gt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{"aria-label":Z,title:Z}}),[ut,It]=Ft("popupIndicator",{className:vr.popupIndicator,elementType:WW,getSlotProps:Tr,externalForwardedProps:Bt,ownerState:Rt,getSlotOwnerState:Wt=>({size:Wt.size||hr,variant:Wt.variant||Wu(pt,Gt).variant||"plain",color:Wt.color||Wu(pt,Gt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{disabled:Dr,"aria-label":Qt?z:Ce,title:Qt?z:Ce,type:"button"}}),[Oe,$e]=Ft("listbox",{className:vr.listbox,elementType:qW,getSlotProps:Cr,externalForwardedProps:Bt,ownerState:Rt,getSlotOwnerState:Wt=>({size:Wt.size||hr,variant:Wt.variant||pt,color:Wt.color||Gt,disableColorInversion:!Wt.disablePortal}),additionalProps:{anchorEl:je,open:Qt,style:je?{width:je.clientWidth}:{}}}),[tt,ht]=Ft("loading",{className:vr.loading,elementType:KW,externalForwardedProps:Bt,ownerState:Rt}),[zt,pr]=Ft("noOptions",{className:vr.noOptions,elementType:XW,externalForwardedProps:Bt,ownerState:Rt,additionalProps:{role:"presentation",onMouseDown:Wt=>{Wt.preventDefault()}}}),[ir,jr]=Ft("limitTag",{className:vr.limitTag,elementType:YW,externalForwardedProps:Bt,ownerState:Rt});if(Te>-1&&Array.isArray(mr)){const Wt=mr.length-Te;!dr&&Wt>0&&(mr=mr.splice(0,Te),mr.push(H.jsx(ir,K({},jr,{children:ie(Wt)}),mr.length)))}const[pn,Fn]=Ft("option",{className:vr.option,elementType:ZW,externalForwardedProps:Bt,ownerState:Rt,getSlotOwnerState:Wt=>({variant:Wt.variant||Wu(pt,Gt).variant||"plain",color:Wt.color||Wu(pt,Gt).color||"neutral",disableColorInversion:!$e.disablePortal}),additionalProps:{as:"li"}}),So=Dt||((Wt,Ur)=>{const{key:Wr}=Wt,Ni=Ht(Wt,zW);return H.jsx(pn,K({},Ni,{children:xe(Ur)}),Wr)}),Vr=(Wt,Ur)=>{const Wr=Mr({option:Wt,index:Ur});return So(K({},Fn,Wr),Wt,{selected:!!Wr["aria-selected"],inputValue:bt,ownerState:Rt})},ri=R.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...$e.modifiers||[]],[$e.modifiers]);let Or=null;if(je){var No;Or=H.jsx(_b,{variant:pt,color:Gt,children:H.jsx(av,{nested:!0,children:H.jsxs(Oe,K({},$e,{className:Gn($e.className),modifiers:ri},!((No=S.slots)!=null&&No.listbox)&&{as:db,slots:{root:$e.as||"ul"}},{children:[Ee.map((Wt,Ur)=>{if(ge){const Wr=Wt;return st({key:String(Wr.key),group:Wr.group,children:Wr.options.map((Ni,Wn)=>Vr(Ni,Wr.index+Wn))})}return Vr(Wt,Ur)}),Pe&&Ee.length===0?H.jsx(tt,K({},ht,{children:We})):null,Ee.length===0&&!J&&!Pe?H.jsx(zt,K({},pr,{children:Fe})):null]}))})})}return H.jsxs(R.Fragment,{children:[H.jsxs(Q,K({},N,{children:[it&&H.jsx(_e,K({},Ae,{children:it})),H.jsxs(X,K({},re,{children:[mr,H.jsx(pe,K({},se))]})),te&&H.jsx(Le,K({},Re,{children:te})),Tt?H.jsx(ot,K({},dt,{children:V})):null,gt?H.jsx(ut,K({},It,{children:Ye})):null]})),Or]})}),JW=Rx("MuiBox",["root"]),rc=X6({themeId:Gg,defaultTheme:Uf,defaultClassName:JW.root,generateClassName:tL.generate});function QW(e){return Zr("MuiTypography",e)}Gr("MuiTypography",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","noWrap","gutterBottom","startDecorator","endDecorator","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const eq=["color","textColor"],tq=["component","gutterBottom","noWrap","level","levelMapping","children","endDecorator","startDecorator","variant","slots","slotProps"],s2=R.createContext(!1),rq=R.createContext(!1),nq=e=>{const{gutterBottom:t,noWrap:r,level:n,color:i,variant:l}=e,h={root:["root",n,t&&"gutterBottom",r&&"noWrap",i&&`color${xt(i)}`,l&&`variant${xt(l)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Nr(h,QW,{})},iq=ft("span",{name:"JoyTypography",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),oq=ft("span",{name:"JoyTypography",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),aq=ft("span",{name:"JoyTypography",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,n,i,l,h;const s=t.level!=="inherit"?(r=e.typography[t.level])==null?void 0:r.lineHeight:"1";return K({"--Icon-fontSize":`calc(1em * ${s})`},t.color&&{"--Icon-color":"currentColor"},{margin:"var(--Typography-margin, 0px)"},t.nesting?{display:"inline"}:K({display:"block"},t.unstable_hasSkeleton&&{position:"relative"}),(t.startDecorator||t.endDecorator)&&K({display:"flex",alignItems:"center"},t.nesting&&K({display:"inline-flex"},t.startDecorator&&{verticalAlign:"bottom"})),t.level&&t.level!=="inherit"&&e.typography[t.level],{fontSize:`var(--Typography-fontSize, ${t.level&&t.level!=="inherit"&&(n=(i=e.typography[t.level])==null?void 0:i.fontSize)!=null?n:"inherit"})`},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.color&&{color:`var(--variant-plainColor, rgba(${(l=e.vars.palette[t.color])==null?void 0:l.mainChannel} / 1))`},t.variant&&K({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"},(h=e.variants[t.variant])==null?void 0:h[t.color]))}),oR={h1:"h1",h2:"h2",h3:"h3",h4:"h4","title-lg":"p","title-md":"p","title-sm":"p","body-lg":"p","body-md":"p","body-sm":"p","body-xs":"span",inherit:"p"},Qn=R.forwardRef(function(t,r){var n;const i=Kr({props:t,name:"JoyTypography"}),{color:l,textColor:h}=i,s=Ht(i,eq),m=R.useContext(s2),y=R.useContext(rq),S=Ax(K({},s,{color:h})),{component:T,gutterBottom:I=!1,noWrap:D=!1,level:F="body-md",levelMapping:V=oR,children:Z,endDecorator:z,startDecorator:O,variant:L,slots:te={},slotProps:j={}}=S,$=Ht(S,tq),J=(n=t.color)!=null?n:L?l??"neutral":l,ie=m||y?t.level||"inherit":F,xe=Vx(Z,["Skeleton"]),ge=T||(m?"span":V[ie]||oR[ie]||"span"),we=K({},S,{level:ie,component:ge,color:J,gutterBottom:I,noWrap:D,nesting:m,variant:L,unstable_hasSkeleton:xe}),Te=nq(we),Pe=K({},$,{component:ge,slots:te,slotProps:j}),[We,De]=Ft("root",{ref:r,className:Te.root,elementType:aq,externalForwardedProps:Pe,ownerState:we}),[Se,Fe]=Ft("startDecorator",{className:Te.startDecorator,elementType:iq,externalForwardedProps:Pe,ownerState:we}),[Ce,Ne]=Ft("endDecorator",{className:Te.endDecorator,elementType:oq,externalForwardedProps:Pe,ownerState:we});return H.jsx(s2.Provider,{value:!0,children:H.jsxs(We,K({},De,{children:[O&&H.jsx(Se,K({},Fe,{children:O})),xe?R.cloneElement(Z,{variant:Z.props.variant||"inline"}):Z,z&&H.jsx(Ce,K({},Ne,{children:z}))]}))})});Qn.muiName="Typography";function sq(e){return Zr("MuiButton",e)}const M_=Gr("MuiButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]),lq=["children","action","color","variant","size","fullWidth","startDecorator","endDecorator","loading","loadingPosition","loadingIndicator","disabled","component","slots","slotProps"],cq=e=>{const{color:t,disabled:r,focusVisible:n,focusVisibleClassName:i,fullWidth:l,size:h,variant:s,loading:m}=e,y={root:["root",r&&"disabled",n&&"focusVisible",l&&"fullWidth",s&&`variant${xt(s)}`,t&&`color${xt(t)}`,h&&`size${xt(h)}`,m&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]},S=Nr(y,sq,{});return n&&i&&(S.root+=` ${i}`),S},uq=ft("span",{name:"JoyButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),dq=ft("span",{name:"JoyButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),hq=ft("span",{name:"JoyButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,n;return K({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(n=e.variants[`${t.variant}Disabled`])==null||(n=n[t.color])==null?void 0:n.color})}),e5=({theme:e,ownerState:t})=>{var r,n,i,l;return[K({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.size==="sm"&&{"--Icon-fontSize":e.vars.fontSize.lg,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.375rem",minHeight:"var(--Button-minHeight, 2rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.25rem)",paddingInline:"0.75rem"},t.size==="md"&&{"--Icon-fontSize":e.vars.fontSize.xl,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.5rem",minHeight:"var(--Button-minHeight, 2.25rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.375rem)",paddingInline:"1rem"},t.size==="lg"&&{"--Icon-fontSize":e.vars.fontSize.xl2,"--CircularProgress-size":"28px","--CircularProgress-thickness":"4px","--Button-gap":"0.75rem",minHeight:"var(--Button-minHeight, 2.75rem)",fontSize:e.vars.fontSize.md,paddingBlock:"var(--Button-paddingBlock, 0.5rem)",paddingInline:"1.5rem"},{WebkitTapHighlightColor:"transparent",boxSizing:"border-box",borderRadius:`var(--Button-radius, ${e.vars.radius.sm})`,margin:"var(--Button-margin)",border:"none",backgroundColor:"transparent",cursor:"pointer",userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",textDecoration:"none",fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.lg,lineHeight:e.vars.lineHeight.md},t.fullWidth&&{width:"100%"},{[e.focus.selector]:e.focus.default}),K({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":(n=e.variants[`${t.variant}Hover`])==null?void 0:n[t.color]},'&:active, &[aria-pressed="true"]':(i=e.variants[`${t.variant}Active`])==null?void 0:i[t.color],[`&.${M_.disabled}`]:(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color]},t.loadingPosition==="center"&&{[`&.${M_.loading}`]:{color:"transparent"}})]},fq=ft("button",{name:"JoyButton",slot:"Root",overridesResolver:(e,t)=>t.root})(e5),If=R.forwardRef(function(t,r){var n;const i=Kr({props:t,name:"JoyButton"}),{children:l,action:h,color:s="primary",variant:m="solid",size:y="md",fullWidth:S=!1,startDecorator:T,endDecorator:I,loading:D=!1,loadingPosition:F="center",loadingIndicator:V,disabled:Z,component:z,slots:O={},slotProps:L={}}=i,te=Ht(i,lq),j=R.useContext(xb),$=R.useContext(G$),J=t.variant||j.variant||m,ie=t.size||j.size||y,xe=t.color||j.color||s,ge=(n=t.loading||t.disabled)!=null?n:j.disabled||D||Z,we=R.useRef(null),Te=an(we,r),{focusVisible:Pe,setFocusVisible:We,getRootProps:De}=Rs(K({},i,{disabled:ge,rootRef:Te})),Se=V??H.jsx(cv,{color:xe,thickness:{sm:2,md:3,lg:4}[ie]||3});R.useImperativeHandle(h,()=>({focusVisible:()=>{var pt;We(!0),(pt=we.current)==null||pt.focus()}}),[We]);const Fe=K({},i,{color:xe,fullWidth:S,variant:J,size:ie,focusVisible:Pe,loading:D,loadingPosition:F,disabled:ge}),Ce=cq(Fe),Ne=pt=>{var sr;let rr=i.onClick;if(typeof L.root=="function"?rr=L.root(Fe).onClick:L.root&&(rr=L.root.onClick),(sr=rr)==null||sr(pt),$){var wr;(wr=$.onClick)==null||wr.call($,pt,i.value)}};let Ye=i["aria-pressed"];typeof L.root=="function"?Ye=L.root(Fe)["aria-pressed"]:L.root&&(Ye=L.root["aria-pressed"]),$!=null&&$.value&&(Array.isArray($.value)?Ye=$.value.indexOf(i.value)!==-1:Ye=$.value===i.value);const at=K({},te,{component:z,slots:O,slotProps:L}),[st,Dt]=Ft("root",{ref:r,className:Ce.root,elementType:fq,externalForwardedProps:at,getSlotProps:De,ownerState:Fe,additionalProps:{onClick:Ne,"aria-pressed":Ye}}),[St,$t]=Ft("startDecorator",{className:Ce.startDecorator,elementType:uq,externalForwardedProps:at,ownerState:Fe}),[Ct,it]=Ft("endDecorator",{className:Ce.endDecorator,elementType:dq,externalForwardedProps:at,ownerState:Fe}),[Ze,rt]=Ft("loadingIndicatorCenter",{className:Ce.loadingIndicatorCenter,elementType:hq,externalForwardedProps:at,ownerState:Fe});return H.jsxs(st,K({},Dt,{children:[(T||D&&F==="start")&&H.jsx(St,K({},$t,{children:D&&F==="start"?Se:T})),l,D&&F==="center"&&H.jsx(Ze,K({},rt,{children:Se})),(I||D&&F==="end")&&H.jsx(Ct,K({},it,{children:D&&F==="end"?Se:I}))]}))});If.muiName="Button";function pq(e){return Zr("MuiButtonGroup",e)}Gr("MuiButtonGroup",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]);const mq=["buttonFlex","className","component","disabled","size","color","variant","children","orientation","slots","slotProps","spacing"],gq=e=>{const{size:t,variant:r,color:n,orientation:i}=e,l={root:["root",i,r&&`variant${xt(r)}`,n&&`color${xt(n)}`,t&&`size${xt(t)}`]};return Nr(l,pq,{})},vq=ft("div")(({theme:e,ownerState:t})=>{var r,n,i;const{borderRadius:l}=Td({theme:e,ownerState:t},["borderRadius"]),h=t.orientation==="vertical"?"var(--ButtonGroup-radius) var(--ButtonGroup-radius) var(--unstable_childRadius) var(--unstable_childRadius)":"var(--ButtonGroup-radius) var(--unstable_childRadius) var(--unstable_childRadius) var(--ButtonGroup-radius)",s=t.orientation==="vertical"?"var(--unstable_childRadius) var(--unstable_childRadius) var(--ButtonGroup-radius) var(--ButtonGroup-radius)":"var(--unstable_childRadius) var(--ButtonGroup-radius) var(--ButtonGroup-radius) var(--unstable_childRadius)",m=t.orientation==="vertical"?"calc(var(--ButtonGroup-separatorSize) * -1) 0 0 0":"0 0 0 calc(var(--ButtonGroup-separatorSize) * -1)",y={};e8(e.breakpoints,t.spacing,(D,F)=>{if(F!==null){var V;D(y,{"--ButtonGroup-connected":F.toString().match(/^0(?!\.)/)?"1":"0",gap:typeof F=="string"?F:(V=e.spacing)==null?void 0:V.call(e,F)})}});const S=(r=e.variants.outlined)==null?void 0:r[t.color],T=(n=e.variants.outlinedDisabled)==null?void 0:n[t.color],I=(i=e.variants.outlinedHover)==null?void 0:i[t.color];return[K({"--ButtonGroup-separatorSize":t.variant==="outlined"?"1px":"calc(var(--ButtonGroup-connected) * 1px)","--ButtonGroup-separatorColor":S==null?void 0:S.borderColor,"--ButtonGroup-radius":e.vars.radius.sm,"--Divider-inset":"0.5rem","--unstable_childRadius":"calc((1 - var(--ButtonGroup-connected)) * var(--ButtonGroup-radius) - var(--variant-borderWidth, 0px))"},y,{display:"flex",borderRadius:"var(--ButtonGroup-radius)",flexDirection:t.orientation==="vertical"?"column":"row","& > [data-first-child]":K({"--Button-radius":h,"--IconButton-radius":h},t.orientation==="horizontal"&&{borderRight:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"},t.orientation==="vertical"&&{borderBottom:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"}),"& > :not([data-first-child]):not([data-last-child]):not(:only-child)":K({"--Button-radius":"var(--unstable_childRadius)","--IconButton-radius":"var(--unstable_childRadius)",borderRadius:"var(--unstable_childRadius)"},t.orientation==="horizontal"&&{borderLeft:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)",borderRight:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"},t.orientation==="vertical"&&{borderTop:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)",borderBottom:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"}),"& > [data-last-child]":K({"--Button-radius":s,"--IconButton-radius":s},t.orientation==="horizontal"&&{borderLeft:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"},t.orientation==="vertical"&&{borderTop:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"}),"& > :only-child":{"--Button-radius":"var(--ButtonGroup-radius)","--IconButton-radius":"var(--ButtonGroup-radius)"},"& > :not([data-first-child]):not(:only-child)":{"--Button-margin":m,"--IconButton-margin":m},[`& .${M_.root}, & .${eR.root}`]:K({"&:not(:disabled)":{zIndex:1},"&:disabled":{"--ButtonGroup-separatorColor":T==null?void 0:T.borderColor}},t.variant==="outlined"&&{"&:hover":{"--ButtonGroup-separatorColor":I==null?void 0:I.borderColor}},{[`&:hover, ${e.focus.selector}`]:{zIndex:2}})},t.buttonFlex&&{[`& > *:not(.${eR.root})`]:{flex:t.buttonFlex},[`& > :not(button) > .${M_.root}`]:{width:"100%"}}),l!==void 0&&{"--ButtonGroup-radius":l}]}),yq=ft(vq,{name:"JoyButtonGroup",slot:"Root",overridesResolver:(e,t)=>t.root})({}),_q=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyButtonGroup"}),{buttonFlex:i,className:l,component:h="div",disabled:s=!1,size:m="md",color:y="neutral",variant:S="outlined",children:T,orientation:I="horizontal",slots:D={},slotProps:F={},spacing:V=0}=n,Z=Ht(n,mq),z=K({},n,{buttonFlex:i,color:y,component:h,orientation:I,spacing:V,size:m,variant:S}),O=gq(z),L=K({},Z,{component:h,slots:D,slotProps:F}),[te,j]=Ft("root",{ref:r,className:Gn(O.root,l),elementType:yq,externalForwardedProps:L,additionalProps:{role:"group"},ownerState:z}),$=R.useMemo(()=>({variant:S,color:y,size:m,disabled:s}),[S,y,m,s]);return H.jsx(te,K({},j,{children:H.jsx(xb.Provider,{value:$,children:R.Children.map(T,(J,ie)=>{if(!R.isValidElement(J))return J;const xe={};if(Vx(J,["Divider"])){var ge,we;const Te=J.props;xe.inset=(ge=Te==null?void 0:Te.inset)!=null?ge:"context";const Pe=I==="vertical"?"horizontal":"vertical";xe.orientation=(we=Te==null?void 0:Te.orientation)!=null?we:Pe,xe.role="presentation",xe.component="span"}return R.Children.count(T)>1&&(ie===0&&(xe["data-first-child"]=""),ie===R.Children.count(T)-1&&(xe["data-last-child"]="")),R.cloneElement(J,xe)})})}))});function xq(e){return Zr("MuiCard",e)}Gr("MuiCard",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]);const bq=["className","color","component","invertedColors","size","variant","children","orientation","slots","slotProps"],wq=e=>{const{size:t,variant:r,color:n,orientation:i}=e,l={root:["root",i,r&&`variant${xt(r)}`,n&&`color${xt(n)}`,t&&`size${xt(t)}`]};return Nr(l,xq,{})},Sq=ft("div")(({theme:e,ownerState:t})=>{var r;const{p:n,padding:i,borderRadius:l}=Td({theme:e,ownerState:t},["p","padding","borderRadius"]);return[K({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--Card-childRadius":"max((var(--Card-radius) - var(--variant-borderWidth, 0px)) - var(--Card-padding), min(var(--Card-padding) / 2, (var(--Card-radius) - var(--variant-borderWidth, 0px)) / 2))","--AspectRatio-radius":"var(--Card-childRadius)","--unstable_actionMargin":"calc(-1 * var(--variant-borderWidth, 0px))","--unstable_actionRadius":"var(--Card-radius)","--CardCover-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--CardOverflow-offset":"calc(-1 * var(--Card-padding))","--CardOverflow-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--Divider-inset":"calc(-1 * var(--Card-padding))"},t.size==="sm"&&{"--Card-radius":e.vars.radius.sm,"--Card-padding":"0.625rem",gap:"0.5rem"},t.size==="md"&&{"--Card-radius":e.vars.radius.md,"--Card-padding":"1rem",gap:"0.75rem 1rem"},t.size==="lg"&&{"--Card-radius":e.vars.radius.lg,"--Card-padding":"1.5rem",gap:"1rem 1.5rem"},{padding:"var(--Card-padding)",borderRadius:"var(--Card-radius)",backgroundColor:e.vars.palette.background.surface,position:"relative",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},e.typography[`body-${t.size}`],t.variant==="solid"&&t.color&&t.invertedColors&&gb(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&vb(t.color)(e),(r=e.variants[t.variant])==null?void 0:r[t.color]),n!==void 0&&{"--Card-padding":n},i!==void 0&&{"--Card-padding":i},l!==void 0&&{"--Card-radius":l}]}),Cq=ft(Sq,{name:"JoyCard",slot:"Root",overridesResolver:(e,t)=>t.root})({}),kq=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyCard"}),{className:i,color:l="neutral",component:h="div",invertedColors:s=!1,size:m="md",variant:y="outlined",children:S,orientation:T="vertical",slots:I={},slotProps:D={}}=n,F=Ht(n,bq),V=K({},n,{color:l,component:h,orientation:T,size:m,variant:y,invertedColors:s}),Z=wq(V),z=K({},F,{component:h,slots:I,slotProps:D}),[O,L]=Ft("root",{ref:r,className:Gn(Z.root,i),elementType:Cq,externalForwardedProps:z,ownerState:V});return H.jsx(O,K({},L,{children:R.Children.map(S,(te,j)=>{if(!R.isValidElement(te))return te;const $={};if(Vx(te,["Divider"])){var J,ie;const xe=te.props;$.inset=(J=xe==null?void 0:xe.inset)!=null?J:"context";const ge=T==="vertical"?"horizontal":"vertical";$.orientation=(ie=xe==null?void 0:xe.orientation)!=null?ie:ge}return j===0&&($["data-first-child"]=""),j===R.Children.count(S)-1&&($["data-last-child"]=""),R.cloneElement(te,$)})}))}),t5=Gr("MuiCardOverflow",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);function Tq(e){return Zr("MuiDivider",e)}Gr("MuiDivider",["root","horizontal","vertical","insetContext","insetNone"]);const r5=ft("div")(({ownerState:e})=>({display:"flex",flexDirection:e.orientation==="horizontal"?"row":"column",flex:9999,zIndex:1,columnGap:"var(--Card-padding)",rowGap:"max(2px, calc(0.1875 * var(--Card-padding)))",padding:"var(--unstable_padding)",[`.${t5.root} > &`]:{"--unstable_padding":"calc(var(--Card-padding) * 0.75) 0px"}}));ft(r5,{name:"JoyCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({});const Eq=Gr("MuiModalDialog",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","layoutCenter","layoutFullscreen"]);function Iq(e){return Zr("MuiCheckbox",e)}const nd=Gr("MuiCheckbox",["root","checkbox","action","input","label","checked","disabled","focusVisible","indeterminate","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid"]),Pq=Wf(H.jsx("path",{d:"M9 16.17 5.53 12.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L9 16.17z"}),"Check"),Aq=Wf(H.jsx("path",{d:"M19 13H5c-.55 0-1-.45-1-1s.45-1 1-1h14c.55 0 1 .45 1 1s-.45 1-1 1z"}),"HorizontalRule"),Rq=["checked","uncheckedIcon","checkedIcon","label","defaultChecked","disabled","disableIcon","overlay","id","indeterminate","indeterminateIcon","name","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","value","color","variant","size","component","slots","slotProps"],Dq=e=>{const{checked:t,disabled:r,disableIcon:n,focusVisible:i,color:l,variant:h,size:s,indeterminate:m}=e,y={root:["root",t&&"checked",r&&"disabled",i&&"focusVisible",h&&`variant${xt(h)}`,l&&`color${xt(l)}`,s&&`size${xt(s)}`],checkbox:["checkbox",t&&"checked",m&&"indeterminate",r&&"disabled"],action:["action",t&&"checked",n&&r&&"disabled",i&&"focusVisible"],input:["input"],label:["label"]};return Nr(y,Iq,{})},Mq=ft("span",{name:"JoyCheckbox",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,n,i;return K({"--Icon-fontSize":"var(--Checkbox-size)"},e.size==="sm"&&{"--Checkbox-size":"1rem","& ~ *":{"--FormHelperText-margin":"0 0 0 1.5rem"},fontSize:t.vars.fontSize.sm,gap:"var(--Checkbox-gap, 0.5rem)"},e.size==="md"&&{"--Checkbox-size":"1.25rem","& ~ *":{"--FormHelperText-margin":"0.25rem 0 0 1.875rem"},fontSize:t.vars.fontSize.md,gap:"var(--Checkbox-gap, 0.625rem)"},e.size==="lg"&&{"--Checkbox-size":"1.5rem","& ~ *":{"--FormHelperText-margin":"0.375rem 0 0 2.25rem"},fontSize:t.vars.fontSize.lg,gap:"var(--Checkbox-gap, 0.75rem)"},{position:e.overlay?"initial":"relative",display:"inline-flex",fontFamily:t.vars.fontFamily.body,lineHeight:"var(--Checkbox-size)",color:t.vars.palette.text.primary,[`&.${nd.disabled}`]:{color:(r=t.variants.plainDisabled)==null||(r=r[e.color])==null?void 0:r.color}},e.disableIcon&&{color:(n=t.variants[e.variant])==null||(n=n[e.color])==null?void 0:n.color,[`&.${nd.disabled}`]:{color:(i=t.variants[`${e.variant}Disabled`])==null||(i=i[e.color])==null?void 0:i.color}})}),zq=ft("span",{name:"JoyCheckbox",slot:"Checkbox",overridesResolver:(e,t)=>t.checkbox})(({theme:e,ownerState:t})=>{var r,n,i,l,h;const s=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color];return[K({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,boxSizing:"border-box",borderRadius:`min(${e.vars.radius.sm}, 0.25rem)`,width:"var(--Checkbox-size)",height:"var(--Checkbox-size)",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0},t.disableIcon&&{display:"contents"},{[`&.${nd.checked}, &.${nd.indeterminate}`]:{"--Icon-color":"currentColor"}}),...t.disableIcon?[]:[K({},s,{backgroundColor:(n=s==null?void 0:s.backgroundColor)!=null?n:e.vars.palette.background.surface}),{"&:hover":{"@media (hover: hover)":(i=e.variants[`${t.variant}Hover`])==null?void 0:i[t.color]}},{"&:active":(l=e.variants[`${t.variant}Active`])==null?void 0:l[t.color]},{[`&.${nd.disabled}`]:(h=e.variants[`${t.variant}Disabled`])==null?void 0:h[t.color]}]]}),Lq=ft("span",{name:"JoyCheckbox",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,n,i,l;return[{borderRadius:`var(--Checkbox-actionRadius, ${t.overlay?"var(--unstable_actionRadius, inherit)":"inherit"})`,textAlign:"left",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",zIndex:1,[e.focus.selector]:e.focus.default},...t.disableIcon?[(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":(n=e.variants[`${t.variant}Hover`])==null?void 0:n[t.color]},{"&:active":(i=e.variants[`${t.variant}Active`])==null?void 0:i[t.color]},{[`&.${nd.disabled}`]:(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color]}]:[]]}),Oq=ft("input",{name:"JoyCheckbox",slot:"Input",overridesResolver:(e,t)=>t.input})(()=>({margin:0,opacity:0,position:"absolute",width:"100%",height:"100%",cursor:"pointer"})),$q=ft("label",{name:"JoyCheckbox",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>K({flex:1,minWidth:0},e.disableIcon&&{zIndex:1,pointerEvents:"none"})),Bq=H.jsx(Pq,{}),Fq=H.jsx(Aq,{}),Pf=R.forwardRef(function(t,r){var n,i,l,h,s;const m=Kr({props:t,name:"JoyCheckbox"}),{checked:y,uncheckedIcon:S,checkedIcon:T=Bq,label:I,defaultChecked:D,disabled:F,disableIcon:V=!1,overlay:Z,id:z,indeterminate:O=!1,indeterminateIcon:L=Fq,name:te,onBlur:j,onChange:$,onFocus:J,onFocusVisible:ie,readOnly:xe,required:ge,value:we,color:Te,variant:Pe,size:We="md",component:De,slots:Se={},slotProps:Fe={}}=m,Ce=Ht(m,Rq),Ne=R.useContext(bb),Ye=(n=(i=t.disabled)!=null?i:Ne==null?void 0:Ne.disabled)!=null?n:F,at=(l=(h=t.size)!=null?h:Ne==null?void 0:Ne.size)!=null?l:We,st=ta(z??(Ne==null?void 0:Ne.htmlFor)),Dt={checked:y,defaultChecked:D,disabled:Ye,onBlur:j,onChange:$,onFocus:J,onFocusVisible:ie},{getInputProps:St,checked:$t,disabled:Ct,focusVisible:it}=WH(Dt),Ze=$t||O,sr=Ze?Pe||"solid":Pe||"outlined",rr=t.color||(Ne!=null&&Ne.error?"danger":(s=Ne==null?void 0:Ne.color)!=null?s:Te),nr=K({},m,{checked:$t,disabled:Ct,disableIcon:V,overlay:Z,focusVisible:it,color:Ze?rr||"primary":rr||"neutral",variant:sr,size:at}),Et=Dq(nr),hr=K({},Ce,{component:De,slots:Se,slotProps:Fe}),[Gt,Dr]=Ft("root",{ref:r,className:Et.root,elementType:Mq,externalForwardedProps:hr,ownerState:nr}),[He,xr]=Ft("checkbox",{className:Et.checkbox,elementType:zq,externalForwardedProps:hr,ownerState:nr}),[Tr,Jt]=Ft("action",{className:Et.action,elementType:Lq,externalForwardedProps:hr,ownerState:nr}),[or,Cr]=Ft("input",{additionalProps:K({id:st,name:te,value:we,readOnly:xe,role:void 0,required:ge??(Ne==null?void 0:Ne.required),"aria-describedby":Ne==null?void 0:Ne["aria-describedby"]},O&&{"aria-checked":"mixed"}),className:Et.input,elementType:Oq,externalForwardedProps:hr,getSlotProps:St,ownerState:nr}),[Mr,Sr]=Ft("label",{additionalProps:{htmlFor:st},className:Et.label,elementType:$q,externalForwardedProps:hr,ownerState:nr});let fr=S;return V?fr=null:O?fr=L:$t&&(fr=T),H.jsxs(Gt,K({},Dr,{children:[H.jsxs(He,K({},xr,{children:[H.jsx(Tr,K({},Jt,{children:H.jsx(or,K({},Cr))})),fr]})),I&&H.jsx(s2.Provider,{value:!0,children:H.jsx(Mr,K({},Sr,{children:I}))})]}))});function Nq(e){const{children:t,disableColorScheme:r=!1}=e;return H.jsxs(R.Fragment,{children:[H.jsx(g8,{styles:n=>{var i,l;const h={};r||Object.entries(n.colorSchemes).forEach(([m,y])=>{var S;h[n.getColorSchemeSelector(m).replace(/\s*&/,"")]={colorScheme:(S=y.palette)==null?void 0:S.mode}});const s=(i=(l=n.components)==null||(l=l.JoyTypography)==null||(l=l.defaultProps)==null?void 0:l.level)!=null?i:"body-md";return K({html:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:n.vars.fontWeight.lg},body:K({margin:0,color:n.vars.palette.text.primary,fontFamily:n.vars.fontFamily.body},n.typography[s],{backgroundColor:n.vars.palette.background.body,"@media print":{backgroundColor:n.vars.palette.common.white},"&::backdrop":{backgroundColor:n.vars.palette.background.backdrop}})},h)},defaultTheme:Uf}),t]})}function jq(e){return Zr("MuiDialogContent",e)}Gr("MuiDialogContent",["root"]);const wb=R.createContext(void 0);function Vq(e){return Zr("MuiDialogTitle",e)}const n5=Gr("MuiDialogTitle",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),Uq=["component","children","orientation","slots","slotProps"],Hq=()=>Nr({root:["root"]},jq,{}),Gq=ft(r5,{name:"JoyDialogContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({color:`var(--DialogContent-color, ${e.vars.palette.text.tertiary})`,overflow:"auto",margin:"var(--unstable_DialogContent-margin)",[`.${Eq.root} > .${n5.root} + &`]:{"--unstable_DialogContent-margin":"-0.375em 0 0 0"}})),i5=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyDialogContent"}),i=R.useContext(wb),{component:l="div",children:h,orientation:s="vertical",slots:m={},slotProps:y={}}=n,S=Ht(n,Uq),T=K({},S,{component:l,slots:m,slotProps:y}),I=K({},n,{component:l,orientation:s}),D=Hq(),[F,V]=Ft("root",{ref:r,className:D.root,elementType:Gq,externalForwardedProps:T,ownerState:I,additionalProps:{id:i==null?void 0:i.describedBy}});return H.jsx(F,K({},V,{children:h}))}),ST=R.createContext(void 0),Wq=["component","children","variant","color","level","slots","slotProps"],qq=e=>{const{level:t,color:r,variant:n}=e,i={root:["root",t,r&&`color${xt(r)}`,n&&`variant${xt(n)}`]};return Nr(i,Vq,{})},Zq=ft("h2",{name:"JoyDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,n;const i=t.level!=="inherit"?(r=e.typography[t.level])==null?void 0:r.lineHeight:"1";return K({"--Icon-fontSize":`calc(1em * ${i})`},t.color&&{"--Icon-color":"currentColor"},{display:"flex",gap:"clamp(4px, 0.375em, 0.75rem)",margin:"var(--unstable_DialogTitle-margin, 0px)"},t.level&&t.level!=="inherit"&&e.typography[t.level],{color:"inherit"},t.variant&&K({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},(n=e.variants[t.variant])==null?void 0:n[t.color]),{[`.${t5.root} > &`]:{"--unstable_DialogTitle-margin":"var(--Card-padding) 0"}})}),Kq={sm:"title-md",md:"title-lg",lg:"h4"},o5=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyDialogTitle"}),i=R.useContext(ST),l=R.useContext(wb),{component:h="h2",children:s,variant:m,color:y,level:S=Kq[i||"md"],slots:T={},slotProps:I={}}=n,D=Ht(n,Wq),F=t.color||(m?y??"neutral":y),V=K({},D,{component:h,slots:T,slotProps:I}),Z=K({},n,{component:h,color:F,variant:m,level:S}),z=qq(Z),[O,L]=Ft("root",{ref:r,className:z.root,elementType:Zq,externalForwardedProps:V,ownerState:Z,additionalProps:{id:l==null?void 0:l.labelledBy}});return H.jsx(O,K({},L,{children:s}))}),Xq=["className","children","component","inset","orientation","role","slots","slotProps"],Yq=e=>{const{orientation:t,inset:r}=e,n={root:["root",t,r&&`inset${xt(r)}`]};return Nr(n,Tq,{})},a5=ft("hr",{name:"JoyDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>K({"--Divider-thickness":"1px","--Divider-lineColor":e.vars.palette.divider},t.inset==="none"&&{"--_Divider-inset":"0px"},t.inset==="context"&&{"--_Divider-inset":"var(--Divider-inset, 0px)"},{margin:"initial",marginInline:t.orientation==="vertical"?"initial":"var(--_Divider-inset)",marginBlock:t.orientation==="vertical"?"var(--_Divider-inset)":"initial",position:"relative",alignSelf:"stretch",flexShrink:0},t.children?K({"--Divider-gap":e.spacing(1),"--Divider-childPosition":"50%",display:"flex",flexDirection:t.orientation==="vertical"?"column":"row",alignItems:"center",whiteSpace:"nowrap",textAlign:"center",border:0},e.typography["body-sm"],{"&::before, &::after":{position:"relative",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)",backgroundColor:"var(--Divider-lineColor)",content:'""'},"&::before":{marginInlineEnd:t.orientation==="vertical"?"initial":"min(var(--Divider-childPosition) * 999, var(--Divider-gap))",marginBlockEnd:t.orientation==="vertical"?"min(var(--Divider-childPosition) * 999, var(--Divider-gap))":"initial",flexBasis:"var(--Divider-childPosition)"},"&::after":{marginInlineStart:t.orientation==="vertical"?"initial":"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))",marginBlockStart:t.orientation==="vertical"?"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))":"initial",flexBasis:"calc(100% - var(--Divider-childPosition))"}}):{border:"none",listStyle:"none",backgroundColor:"var(--Divider-lineColor)",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)"})),Sb=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyDivider"}),{className:i,children:l,component:h=l!=null?"div":"hr",inset:s,orientation:m="horizontal",role:y=h!=="hr"?"separator":void 0,slots:S={},slotProps:T={}}=n,I=Ht(n,Xq),D=K({},n,{inset:s,role:y,orientation:m,component:h}),F=Yq(D),V=K({},I,{component:h,slots:S,slotProps:T}),[Z,z]=Ft("root",{ref:r,className:Gn(F.root,i),elementType:a5,externalForwardedProps:V,ownerState:D,additionalProps:K({as:h,role:y},y==="separator"&&m==="vertical"&&{"aria-orientation":"vertical"})});return H.jsx(Z,K({},z,{children:l}))});Sb.muiName="Divider";const s5=R.createContext(void 0),l5=ft("div")(({ownerState:e,theme:t})=>K({"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`,'& ~ [role="listbox"]':{"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`},position:"fixed",zIndex:t.vars.zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&{visibility:"hidden"}));ft(l5,{name:"JoyModal",slot:"Root",overridesResolver:(e,t)=>t.root})({});const c5=ft("div")(({theme:e})=>({zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:e.vars.palette.background.backdrop,WebkitTapHighlightColor:"transparent",backdropFilter:"blur(8px)"}));ft(c5,{name:"JoyModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({});function Jq(e){return Zr("MuiDrawer",e)}Gr("MuiDrawer",["root","hidden","backdrop","content","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const Qq=["children","anchor","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","color","variant","invertedColors","size","onClose","onKeyDown","open","component","slots","slotProps"],eZ=e=>{const{open:t,variant:r,color:n,size:i}=e,l={root:["root",!t&&"hidden",r&&`variant${xt(r)}`,n&&`color${xt(n)}`,i&&`size${xt(i)}`],backdrop:["backdrop"],content:["content"]};return Nr(l,Jq,{})},tZ=ft(l5,{name:"JoyDrawer",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({"--Drawer-transitionDuration":"0.3s","--Drawer-transitionFunction":"ease","--ModalClose-radius":"max((var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) - var(--ModalClose-inset), min(var(--ModalClose-inset) / 2, (var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) / 2))"},e.size==="sm"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(350px, 30%, 100%)","--Drawer-horizontalSize":"clamp(256px, 20%, 100%)","--Drawer-titleMargin":"0.625rem 0.75rem calc(0.625rem / 2)"},e.size==="md"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(400px, 45%, 100%)","--Drawer-horizontalSize":"clamp(300px, 30%, 100%)","--Drawer-titleMargin":"0.75rem 0.75rem calc(0.75rem / 2)"},e.size==="lg"&&{"--ModalClose-inset":"0.75rem","--Drawer-verticalSize":"clamp(500px, 60%, 100%)","--Drawer-horizontalSize":"clamp(440px, 60%, 100%)","--Drawer-titleMargin":"1rem 1rem calc(1rem / 2)"},{transitionProperty:"visibility",transitionDelay:e.open?"0s":"var(--Drawer-transitionDuration)"},!e.open&&{visibility:"hidden"})),rZ=ft(c5,{name:"JoyDrawer",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})(({ownerState:e})=>({opacity:e.open?1:0,transition:"opacity var(--Drawer-transitionDuration) ease-in-out"})),nZ=ft("div",{name:"JoyDrawer",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>{var r;return K({},e.typography[`body-${t.size}`],{boxShadow:e.shadow.md,backgroundColor:e.vars.palette.background.surface,outline:0,display:"flex",flexDirection:"column",position:"fixed",boxSizing:"border-box",overflow:"auto"},t.anchor==="left"&&{top:0,left:0,transform:t.open?"translateX(0)":"translateX(-100%)"},t.anchor==="right"&&{top:0,right:0,transform:t.open?"translateX(0)":"translateX(100%)"},t.anchor==="top"&&{top:0,transform:t.open?"translateY(0)":"translateY(-100%)"},t.anchor==="bottom"&&{bottom:0,transform:t.open?"translateY(0)":"translateY(100%)"},{height:t.anchor.match(/(left|right)/)?"100%":"min(100vh, var(--Drawer-verticalSize))",width:t.anchor.match(/(top|bottom)/)?"100vw":"min(100vw, var(--Drawer-horizontalSize))",transition:"transform var(--Drawer-transitionDuration) var(--Drawer-transitionFunction)"},t.variant==="solid"&&t.color&&t.invertedColors&&gb(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&vb(t.color)(e),(r=e.variants[t.variant])==null?void 0:r[t.color],{[`& > .${n5.root}`]:{"--unstable_DialogTitle-margin":"var(--Drawer-titleMargin)"}})}),u5=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyDrawer"}),{children:i,anchor:l="left",container:h,disableAutoFocus:s=!1,disableEnforceFocus:m=!1,disableEscapeKeyDown:y=!1,disablePortal:S=!1,disableRestoreFocus:T=!1,disableScrollLock:I=!1,hideBackdrop:D=!1,color:F="neutral",variant:V="plain",invertedColors:Z=!1,size:z="md",onClose:O,open:L,component:te,slots:j={},slotProps:$={}}=n,J=Ht(n,Qq),ie=K({},n,{anchor:l,disableAutoFocus:s,disableEnforceFocus:m,disableEscapeKeyDown:y,disablePortal:S,disableRestoreFocus:T,disableScrollLock:I,hideBackdrop:D,invertedColors:Z,color:F,variant:V,size:z}),{getRootProps:xe,getBackdropProps:ge,rootRef:we,portalRef:Te,isTopModal:Pe}=C7(K({},ie,{rootRef:r,children:null})),We=eZ(ie),De=K({},J,{component:te,slots:j,slotProps:$}),Se=ta(),Fe=ta(),Ce=R.useMemo(()=>({variant:V,color:F,labelledBy:Se,describedBy:Fe}),[F,V,Se,Fe]),[Ne,Ye]=Ft("root",{ref:we,className:We.root,elementType:tZ,externalForwardedProps:De,getSlotProps:xe,ownerState:ie}),[at,st]=Ft("backdrop",{className:We.backdrop,elementType:rZ,externalForwardedProps:De,getSlotProps:ge,ownerState:ie}),[Dt,St]=Ft("content",{className:We.content,elementType:nZ,additionalProps:{tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":Se,"aria-describedby":Fe},externalForwardedProps:De,ownerState:ie});return H.jsx(s5.Provider,{value:O,children:H.jsx(ST.Provider,{value:z,children:H.jsx(wb.Provider,{value:Ce,children:H.jsx(k$,{ref:Te,container:h,disablePortal:S,children:H.jsxs(Ne,K({},Ye,{children:[D?null:H.jsx(at,K({},st)),H.jsx(L8,{disableEnforceFocus:m,disableAutoFocus:s,disableRestoreFocus:T,isEnabled:Pe,open:L,children:H.jsx(Dt,K({},St,{children:i}))})]}))})})})})});function iZ(e){return Zr("MuiListDivider",e)}Gr("MuiListDivider",["root","insetGutter","insetStartDecorator","insetStartContent","horizontal","vertical"]);const oZ=["component","role","className","children","inset","orientation","slots","slotProps"],aZ=e=>{const{orientation:t,inset:r}=e,n={root:["root",t,r&&r!=="context"&&`inset${xt(r)}`]};return Nr(n,iZ,{})},sZ=ft(a5,{name:"JoyListDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({},e.inset==="context"&&{"--Divider-inset":"calc(-1 * var(--List-padding))"},e.row&&K({marginInline:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginBlock:"var(--ListItem-paddingY)"},e["data-first-child"]===void 0&&{marginInlineStart:"calc(var(--List-gap) + var(--ListDivider-gap))"}),!e.row&&K({},e["data-first-child"]===void 0&&{marginBlockStart:"calc(var(--List-gap) + var(--ListDivider-gap))"},{marginBlockEnd:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginInlineStart:"var(--ListItem-paddingLeft)",marginInlineEnd:"var(--ListItem-paddingRight)"},e.inset==="startDecorator"&&{marginInlineStart:"var(--ListItem-paddingLeft)"},e.inset==="startContent"&&{marginInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItemDecorator-size))"}))),Cb=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyListDivider"}),i=R.useContext(kd),l=R.useContext(bT),{component:h,role:s,className:m,children:y,inset:S="context",orientation:T,slots:I={},slotProps:D={}}=n,F=Ht(n,oZ),[V]=(l==null?void 0:l.split(":"))||["",""],Z=h||(V&&!V.match(/^(ul|ol|menu)$/)?"div":"li"),z=s||(Z==="li"?"separator":void 0),O=T||(i?"vertical":"horizontal"),L=K({},n,{inset:S,row:i,orientation:O,component:Z,role:z}),te=aZ(L),j=K({},F,{component:Z,slots:I,slotProps:D}),[$,J]=Ft("root",{ref:r,className:Gn(te.root,m),elementType:sZ,externalForwardedProps:j,ownerState:L,additionalProps:K({as:Z,role:z},z==="separator"&&O==="vertical"&&{"aria-orientation":"vertical"})});return H.jsx($,K({},J,{children:y}))});function lZ(e){return Zr("MuiListItemContent",e)}Gr("MuiListItemContent",["root"]);const cZ=["component","className","children","slots","slotProps"],uZ=()=>Nr({root:["root"]},lZ,{}),dZ=ft("div",{name:"JoyListItemContent",slot:"Root",overridesResolver:(e,t)=>t.root})({flex:"1 1 auto",minWidth:0}),hZ=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyListItemContent"}),{component:i,className:l,children:h,slots:s={},slotProps:m={}}=n,y=Ht(n,cZ),S=K({},n),T=uZ(),I=K({},y,{component:i,slots:s,slotProps:m}),[D,F]=Ft("root",{ref:r,className:Gn(T.root,l),elementType:dZ,externalForwardedProps:I,ownerState:S});return H.jsx(D,K({},F,{children:h}))});function fZ(e){return Zr("MuiListItemDecorator",e)}Gr("MuiListItemDecorator",["root"]);const pZ=["component","className","children","slots","slotProps"],mZ=()=>Nr({root:["root"]},fZ,{}),gZ=ft("span",{name:"JoyListItemDecorator",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>K({boxSizing:"border-box",display:"inline-flex",alignItems:`var(--unstable_ListItemDecorator-alignItems, ${e.parentOrientation==="horizontal"?"center":"initial"})`},e.parentOrientation==="horizontal"?{minInlineSize:"var(--ListItemDecorator-size)",marginInlineEnd:"calc(-1 * var(--ListItem-gap))"}:{minBlockSize:"var(--ListItemDecorator-size)",justifyContent:"center",marginBlockEnd:"calc(-1 * var(--ListItem-gap))"})),B0=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyListItemDecorator"}),{component:i,className:l,children:h,slots:s={},slotProps:m={}}=n,y=Ht(n,pZ),S=R.useContext(mb),T=K({parentOrientation:S},n),I=mZ(),D=K({},y,{component:i,slots:s,slotProps:m}),[F,V]=Ft("root",{ref:r,className:Gn(I.root,l),elementType:gZ,externalForwardedProps:D,ownerState:T});return H.jsx(F,K({},V,{children:h}))});function vZ(e){return Zr("MuiMenu",e)}Gr("MuiMenu",["root","listbox","expanded","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const yZ=["actions","children","color","component","disablePortal","keepMounted","id","invertedColors","onItemsChange","modifiers","variant","size","slots","slotProps"],_Z=e=>{const{open:t,variant:r,color:n,size:i}=e,l={root:["root",t&&"expanded",r&&`variant${xt(r)}`,n&&`color${xt(n)}`,i&&`size${xt(i)}`],listbox:["listbox"]};return Nr(l,vZ,{})},aR=ft(sv,{name:"JoyMenu",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,n;const i=(r=e.variants[t.variant])==null?void 0:r[t.color];return[K({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(i==null?void 0:i.backgroundColor)||(i==null?void 0:i.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},pb,{borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,boxShadow:e.shadow.md,overflow:"auto",zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(i!=null&&i.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},t.variant==="solid"&&t.color&&t.invertedColors&&gb(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&vb(t.color)(e),(n=e.variants[t.variant])==null?void 0:n[t.color])]}),xZ=R.forwardRef(function(t,r){var n;const i=Kr({props:t,name:"JoyMenu"}),{actions:l,children:h,color:s="neutral",component:m,disablePortal:y=!1,keepMounted:S=!1,id:T,invertedColors:I=!1,onItemsChange:D,modifiers:F,variant:V="outlined",size:Z="md",slots:z={},slotProps:O={}}=i,L=Ht(i,yZ),{contextValue:te,getListboxProps:j,dispatch:$,open:J,triggerElement:ie}=oU({onItemsChange:D,id:T,listboxRef:r});R.useImperativeHandle(l,()=>({dispatch:$,resetHighlight:()=>$({type:wn.resetHighlight,event:null})}),[$]);const xe=K({},i,{disablePortal:y,invertedColors:I,color:s,variant:V,size:Z,open:J,nesting:!1,row:!1}),ge=_Z(xe),we=K({},L,{component:m,slots:z,slotProps:O}),Te=R.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...F||[]],[F]),Pe=fL({elementType:aR,getSlotProps:j,externalForwardedProps:we,externalSlotProps:{},ownerState:xe,additionalProps:{anchorEl:ie,open:J&&ie!==null,disablePortal:y,keepMounted:S,modifiers:Te},className:ge.root});return H.jsx(aR,K({},Pe,!((n=i.slots)!=null&&n.root)&&{as:db,slots:{root:m||"ul"}},{children:H.jsx(aU,{value:te,children:H.jsx(_b,{variant:I?void 0:V,color:s,children:H.jsx(fb.Provider,{value:"menu",children:H.jsx(av,{nested:!0,children:h})})})})}))});function bZ(e){return Zr("MuiMenuButton",e)}Gr("MuiMenuButton",["root","colorPrimary","colorNeutral","colorDanger","colorInfo","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]);const wZ=["children","color","component","disabled","endDecorator","loading","loadingPosition","loadingIndicator","size","slotProps","slots","startDecorator","variant"],SZ=e=>{const{color:t,disabled:r,fullWidth:n,size:i,variant:l,loading:h}=e,s={root:["root",r&&"disabled",n&&"fullWidth",l&&`variant${xt(l)}`,t&&`color${xt(t)}`,i&&`size${xt(i)}`,h&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]};return Nr(s,bZ,{})},CZ=ft("button",{name:"JoyMenuButton",slot:"Root",overridesResolver:(e,t)=>t.root})(e5),kZ=ft("span",{name:"JoyMenuButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),TZ=ft("span",{name:"JoyMenuButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),EZ=ft("span",{name:"JoyMenuButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,n;return K({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(n=e.variants[`${t.variant}Disabled`])==null||(n=n[t.color])==null?void 0:n.color})}),IZ=R.forwardRef(function(t,r){var n;const i=Kr({props:t,name:"JoyMenuButton"}),{children:l,color:h="neutral",component:s,disabled:m=!1,endDecorator:y,loading:S=!1,loadingPosition:T="center",loadingIndicator:I,size:D="md",slotProps:F={},slots:V={},startDecorator:Z,variant:z="outlined"}=i,O=Ht(i,wZ),L=R.useContext(xb),te=t.variant||L.variant||z,j=t.size||L.size||D,$=(n=t.disabled)!=null?n:L.disabled||m||S,{getRootProps:J,open:ie,active:xe}=d7({rootRef:r,disabled:$}),ge=I??H.jsx(cv,{color:h,thickness:{sm:2,md:3,lg:4}[j]||3}),we=K({},i,{active:xe,color:h,disabled:$,open:ie,size:j,variant:te}),Te=SZ(we),Pe=K({},O,{component:s,slots:V,slotProps:F}),[We,De]=Ft("root",{elementType:CZ,getSlotProps:J,externalForwardedProps:Pe,ref:r,ownerState:we,className:Te.root}),[Se,Fe]=Ft("startDecorator",{className:Te.startDecorator,elementType:kZ,externalForwardedProps:Pe,ownerState:we}),[Ce,Ne]=Ft("endDecorator",{className:Te.endDecorator,elementType:TZ,externalForwardedProps:Pe,ownerState:we}),[Ye,at]=Ft("loadingIndicatorCenter",{className:Te.loadingIndicatorCenter,elementType:EZ,externalForwardedProps:Pe,ownerState:we});return H.jsxs(We,K({},De,{children:[(Z||S&&T==="start")&&H.jsx(Se,K({},Fe,{children:S&&T==="start"?ge:Z})),l,S&&T==="center"&&H.jsx(Ye,K({},at,{children:ge})),(y||S&&T==="end")&&H.jsx(Ce,K({},Ne,{children:S&&T==="end"?ge:y}))]}))});function PZ(e){return Zr("MuiMenuItem",e)}Gr("MuiMenuItem",["root","focusVisible","disabled","selected","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const AZ=["children","disabled","component","selected","color","orientation","variant","slots","slotProps","id"],RZ=e=>{const{focusVisible:t,disabled:r,selected:n,color:i,variant:l}=e,h={root:["root",t&&"focusVisible",r&&"disabled",n&&"selected",i&&`color${xt(i)}`,l&&`variant${xt(l)}`]};return Nr(h,PZ,{})},DZ=ft(lv,{name:"JoyMenuItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),MZ=R.memo(R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyMenuItem"}),i=R.useContext(kd),{children:l,disabled:h=!1,component:s="li",selected:m=!1,color:y="neutral",orientation:S="horizontal",variant:T="plain",slots:I={},slotProps:D={},id:F}=n,V=Ht(n,AZ),{variant:Z=T,color:z=y}=yb(t.variant,t.color),{getRootProps:O,disabled:L,focusVisible:te}=p7({id:F,disabled:h,rootRef:r}),j=K({},n,{component:s,color:z,disabled:L,focusVisible:te,orientation:S,selected:m,row:i,variant:Z}),$=RZ(j),J=K({},V,{component:s,slots:I,slotProps:D}),[ie,xe]=Ft("root",{ref:r,elementType:DZ,getSlotProps:O,externalForwardedProps:J,className:$.root,ownerState:j});return H.jsx(mb.Provider,{value:S,children:H.jsx(ie,K({},xe,{children:l}))})})),Mw=R.forwardRef(function(t,r){const{contextValue:n,id:i}=m7(t.id);return H.jsx(lu.Provider,{value:n,children:H.jsx(MZ,K({},t,{id:i,ref:r}))})});function zZ(e){return Zr("MuiModalClose",e)}Gr("MuiModalClose",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);var sR;const LZ=["component","color","variant","size","onClick","slots","slotProps"],OZ=e=>{const{variant:t,color:r,disabled:n,focusVisible:i,size:l}=e,h={root:["root",n&&"disabled",i&&"focusVisible",t&&`variant${xt(t)}`,r&&`color${xt(r)}`,l&&`size${xt(l)}`]};return Nr(h,zZ,{})},$Z=ft(uv,{name:"JoyModalClose",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r;return K({},e.size==="sm"&&{"--IconButton-size":"1.75rem"},e.size==="md"&&{"--IconButton-size":"2rem"},e.size==="lg"&&{"--IconButton-size":"2.25rem"},{position:"absolute",zIndex:1,top:"var(--ModalClose-inset, 0.625rem)",right:"var(--ModalClose-inset, 0.625rem)",borderRadius:`var(--ModalClose-radius, ${t.vars.radius.sm})`},!((r=t.variants[e.variant])!=null&&(r=r[e.color])!=null&&r.backgroundColor)&&{color:t.vars.palette.text.secondary})}),BZ={plain:"plain",outlined:"plain",soft:"soft",solid:"solid"},d5=R.forwardRef(function(t,r){var n,i,l,h,s,m;const y=Kr({props:t,name:"JoyModalClose"}),{component:S="button",color:T="neutral",variant:I="plain",size:D="md",onClick:F,slots:V={},slotProps:Z={}}=y,z=Ht(y,LZ),O=R.useContext(s5),L=R.useContext(wb),te=(n=(i=t.variant)!=null?i:BZ[L==null?void 0:L.variant])!=null?n:I,j=(l=(h=t.color)!=null?h:L==null?void 0:L.color)!=null?l:T,$=R.useContext(ST),J=(s=(m=t.size)!=null?m:$)!=null?s:D,{focusVisible:ie,getRootProps:xe}=Rs(K({},y,{rootRef:r})),ge=K({},y,{color:j,component:S,variant:te,size:J,focusVisible:ie}),we=OZ(ge),[Te,Pe]=Ft("root",{ref:r,elementType:$Z,getSlotProps:xe,externalForwardedProps:K({onClick:We=>{O==null||O(We,"closeClick"),F==null||F(We)}},z,{component:S,slots:V,slotProps:Z}),className:we.root,ownerState:ge});return H.jsx(Te,K({},Pe,{children:sR||(sR=H.jsx(U$,{}))}))});function FZ(e){return Zr("MuiOption",e)}const NZ=Gr("MuiOption",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","highlighted","variantPlain","variantSoft","variantOutlined","variantSolid"]),jZ=["component","children","disabled","value","label","variant","color","slots","slotProps"],VZ=e=>{const{disabled:t,highlighted:r,selected:n}=e;return Nr({root:["root",t&&"disabled",r&&"highlighted",n&&"selected"]},FZ,{})},UZ=ft(lv,{name:"JoyOption",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;const n=(r=e.variants[`${t.variant}Hover`])==null?void 0:r[t.color];return{[`&.${NZ.highlighted}:not([aria-selected="true"])`]:{backgroundColor:n==null?void 0:n.backgroundColor}}}),HZ=R.memo(R.forwardRef(function(t,r){var n;const i=Kr({props:t,name:"JoyOption"}),{component:l="li",children:h,disabled:s=!1,value:m,label:y,variant:S="plain",color:T="neutral",slots:I={},slotProps:D={}}=i,F=Ht(i,jZ),V=R.useContext(kd),{variant:Z=S,color:z=T}=yb(t.variant,t.color),O=R.useRef(null),L=an(O,r),te=y??(typeof h=="string"?h:(n=O.current)==null?void 0:n.innerText),{getRootProps:j,selected:$,highlighted:J,index:ie}=k7({disabled:s,label:te,value:m,rootRef:L}),xe=K({},i,{disabled:s,selected:$,highlighted:J,index:ie,component:l,variant:Z,color:z,row:V}),ge=VZ(xe),we=K({},F,{component:l,slots:I,slotProps:D}),[Te,Pe]=Ft("root",{ref:r,getSlotProps:j,elementType:UZ,externalForwardedProps:we,className:ge.root,ownerState:xe});return H.jsx(Te,K({},Pe,{children:h}))})),GZ=R.forwardRef(function(t,r){const{contextValue:n}=T7(t.value);return H.jsx(lu.Provider,{value:n,children:H.jsx(HZ,K({},t,{ref:r}))})}),WZ=Wf(H.jsx("path",{d:"m12 5.83 2.46 2.46c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 3.7a.9959.9959 0 0 0-1.41 0L8.12 6.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 5.83zm0 12.34-2.46-2.46a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l3.17 3.18c.39.39 1.02.39 1.41 0l3.17-3.17c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L12 18.17z"}),"Unfold");function qZ(e){return Zr("MuiSelect",e)}const df=Gr("MuiSelect",["root","button","indicator","startDecorator","endDecorator","popper","listbox","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","focusVisible","disabled","expanded","multiple"]);var lR;const ZZ=["action","autoFocus","children","defaultValue","defaultListboxOpen","disabled","getSerializedValue","placeholder","listboxId","listboxOpen","onChange","onListboxOpenChange","onClose","renderValue","required","value","size","variant","color","startDecorator","endDecorator","indicator","aria-describedby","aria-label","aria-labelledby","id","name","multiple","slots","slotProps"];function KZ(e){var t;return Array.isArray(e)?H.jsx(R.Fragment,{children:e.map(r=>r.label).join(", ")}):(t=e==null?void 0:e.label)!=null?t:""}const XZ=[{name:"offset",options:{offset:[0,4]}},{name:"equalWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`}}],YZ=e=>{const{color:t,disabled:r,focusVisible:n,size:i,variant:l,open:h,multiple:s}=e,m={root:["root",r&&"disabled",n&&"focusVisible",h&&"expanded",l&&`variant${xt(l)}`,t&&`color${xt(t)}`,i&&`size${xt(i)}`,s&&"multiple"],button:["button"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],indicator:["indicator",h&&"expanded"],listbox:["listbox",h&&"expanded",r&&"disabled"]};return Nr(m,qZ,{})},JZ=ft("div",{name:"JoySelect",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,n,i,l,h;const s=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color],{borderRadius:m}=Td({theme:e,ownerState:t},["borderRadius"]);return[K({"--Select-radius":e.vars.radius.sm,"--Select-gap":"0.5rem","--Select-placeholderOpacity":.64,"--Select-decoratorColor":e.vars.palette.text.icon,"--Select-focusedThickness":e.vars.focus.thickness,"--Select-focusedHighlight":(n=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:n[500],'&:not([data-inverted-colors="false"])':K({},t.instanceColor&&{"--_Select-focusedHighlight":(i=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:i[500]},{"--Select-focusedHighlight":e.vars.palette.focusVisible}),"--Select-indicatorColor":s!=null&&s.backgroundColor?s==null?void 0:s.color:e.vars.palette.text.tertiary},t.size==="sm"&&{"--Select-minHeight":"2rem","--Select-paddingInline":"0.5rem","--Select-decoratorChildHeight":"min(1.5rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Select-minHeight":"2.25rem","--Select-paddingInline":"0.75rem","--Select-decoratorChildHeight":"min(1.75rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Select-minHeight":"2.75rem","--Select-paddingInline":"1rem","--Select-decoratorChildHeight":"min(2.375rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Select-decoratorChildOffset":"min(calc(var(--Select-paddingInline) - (var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2), var(--Select-paddingInline))","--_Select-paddingBlock":"max((var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2, 0px)","--Select-decoratorChildRadius":"max(var(--Select-radius) - var(--variant-borderWidth, 0px) - var(--_Select-paddingBlock), min(var(--_Select-paddingBlock) + var(--variant-borderWidth, 0px), var(--Select-radius) / 2))","--Button-minHeight":"var(--Select-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Select-decoratorChildHeight)","--Button-radius":"var(--Select-decoratorChildRadius)","--IconButton-radius":"var(--Select-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Select-minHeight)",position:"relative",display:"flex",alignItems:"center",borderRadius:"var(--Select-radius)",cursor:"pointer"},!(s!=null&&s.backgroundColor)&&{backgroundColor:e.vars.palette.background.surface},t.size&&{paddingBlock:{sm:2,md:3,lg:4}[t.size]},{paddingInline:"var(--Select-paddingInline)"},e.typography[`body-${t.size}`],s,{"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)"},[`&.${df.focusVisible}`]:{"--Select-indicatorColor":s==null?void 0:s.color,"&::before":{boxShadow:"inset 0 0 0 var(--Select-focusedThickness) var(--Select-focusedHighlight)"}},[`&.${df.disabled}`]:{"--Select-indicatorColor":"inherit"}}),{"&:hover":(l=e.variants[`${t.variant}Hover`])==null?void 0:l[t.color],[`&.${df.disabled}`]:(h=e.variants[`${t.variant}Disabled`])==null?void 0:h[t.color]},m!==void 0&&{"--Select-radius":m}]}),QZ=ft("button",{name:"JoySelect",slot:"Button",overridesResolver:(e,t)=>t.button})(({ownerState:e})=>K({border:0,outline:0,background:"none",padding:0,fontSize:"inherit",color:"inherit",alignSelf:"stretch",display:"flex",alignItems:"center",flex:1,fontFamily:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden"},(e.value===null||e.value===void 0)&&{opacity:"var(--Select-placeholderOpacity)"},{"&::before":{content:'""',display:"block",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",borderRadius:"var(--Select-radius)"}})),eK=ft(sv,{name:"JoySelect",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e,ownerState:t})=>{var r;const n=(r=e.variants[t.variant])==null?void 0:r[t.color];return K({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(n==null?void 0:n.backgroundColor)||(n==null?void 0:n.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},pb,{minWidth:"max-content",maxHeight:"44vh",overflow:"auto",outline:0,boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(n!=null&&n.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup})}),tK=ft("span",{name:"JoySelect",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Button-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Select-paddingInline) / -4)",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineEnd:"var(--Select-gap)"}),rK=ft("span",{name:"JoySelect",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Button-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Select-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineStart:"var(--Select-gap)"}),nK=ft("span",{name:"JoySelect",slot:"Indicator"})(({ownerState:e,theme:t})=>K({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.lg},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.xl},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl2},{"--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,display:"inherit",alignItems:"center",marginInlineStart:"var(--Select-gap)",marginInlineEnd:"calc(var(--Select-paddingInline) / -4)",[`.${df.endDecorator} + &`]:{marginInlineStart:"calc(var(--Select-gap) / 2)"},[`&.${df.expanded}, .${df.disabled} > &`]:{"--Icon-color":"currentColor"}})),iK=R.forwardRef(function(t,r){var n,i,l,h,s,m,y;const S=Kr({props:t,name:"JoySelect"}),T=S,{action:I,autoFocus:D,children:F,defaultValue:V,defaultListboxOpen:Z=!1,disabled:z,getSerializedValue:O,placeholder:L,listboxId:te,listboxOpen:j,onChange:$,onListboxOpenChange:J,onClose:ie,renderValue:xe,required:ge=!1,value:we,size:Te="md",variant:Pe="outlined",color:We="neutral",startDecorator:De,endDecorator:Se,indicator:Fe=lR||(lR=H.jsx(WZ,{})),"aria-describedby":Ce,"aria-label":Ne,"aria-labelledby":Ye,id:at,name:st,multiple:Dt=!1,slots:St={},slotProps:$t={}}=T,Ct=Ht(T,ZZ),it=R.useContext(bb),Ze=(n=(i=t.disabled)!=null?i:it==null?void 0:it.disabled)!=null?n:z,rt=(l=(h=t.size)!=null?h:it==null?void 0:it.size)!=null?l:Te,pt=(s=t.color)!=null?s:it!=null&&it.error?"danger":(m=it==null?void 0:it.color)!=null?m:We,sr=xe??KZ,[rr,wr]=R.useState(null),Lr=R.useRef(null),nr=R.useRef(null),Et=an(r,Lr);R.useImperativeHandle(I,()=>({focusVisible:()=>{var Q;(Q=nr.current)==null||Q.focus()}}),[]),R.useEffect(()=>{wr(Lr.current)},[]),R.useEffect(()=>{D&&nr.current.focus()},[D]);const hr=R.useCallback(Q=>{J==null||J(Q),Q||ie==null||ie()},[ie,J]),{buttonActive:Gt,buttonFocusVisible:Dr,contextValue:He,disabled:xr,getButtonProps:Tr,getListboxProps:Jt,getHiddenInputProps:or,getOptionMetadata:Cr,open:Mr,value:Sr}=HH({buttonRef:nr,defaultOpen:Z,defaultValue:V,disabled:Ze,getSerializedValue:O,listboxId:te,multiple:Dt,name:st,required:ge,onChange:$,onOpenChange:hr,open:j,value:we}),fr=K({},S,{active:Gt,defaultListboxOpen:Z,disabled:xr,focusVisible:Dr,open:Mr,renderValue:sr,value:Sr,size:rt,variant:Pe,color:pt}),Qt=YZ(fr),dr=K({},Ct,{slots:St,slotProps:$t}),tn=R.useMemo(()=>{let Q;if(Dt)Q=Sr.map(X=>Cr(X)).filter(X=>X!==void 0);else{var N;Q=(N=Cr(Sr))!=null?N:null}return Q},[Cr,Sr,Dt]),[je,kt]=Ft("root",{ref:Et,className:Qt.root,elementType:JZ,externalForwardedProps:dr,ownerState:fr}),[bt,Ee]=Ft("button",{additionalProps:{"aria-describedby":Ce??(it==null?void 0:it["aria-describedby"]),"aria-label":Ne,"aria-labelledby":Ye??(it==null?void 0:it.labelId),"aria-required":ge?"true":void 0,id:at??(it==null?void 0:it.htmlFor),name:st},className:Qt.button,elementType:QZ,externalForwardedProps:dr,getSlotProps:Tr,ownerState:fr}),[Ve,Xe]=Ft("listbox",{additionalProps:{anchorEl:rr,open:Mr,placement:"bottom",keepMounted:!0},className:Qt.listbox,elementType:eK,externalForwardedProps:dr,getSlotProps:Jt,ownerState:K({},fr,{nesting:!1,row:!1,wrap:!1}),getSlotOwnerState:Q=>({size:Q.size||rt,variant:Q.variant||Pe,color:Q.color||(Q.disablePortal?pt:We),disableColorInversion:!Q.disablePortal})}),[Tt,gt]=Ft("startDecorator",{className:Qt.startDecorator,elementType:tK,externalForwardedProps:dr,ownerState:fr}),[Rt,vr]=Ft("endDecorator",{className:Qt.endDecorator,elementType:rK,externalForwardedProps:dr,ownerState:fr}),[Bt,mr]=Ft("indicator",{className:Qt.indicator,elementType:nK,externalForwardedProps:dr,ownerState:fr}),ue=R.useMemo(()=>[...XZ,...Xe.modifiers||[]],[Xe.modifiers]);let Y=L;return(Array.isArray(tn)&&tn.length>0||!Array.isArray(tn)&&tn)&&(Y=sr(tn)),H.jsxs(R.Fragment,{children:[H.jsxs(je,K({},kt,{children:[De&&H.jsx(Tt,K({},gt,{children:De})),H.jsx(bt,K({},Ee,{children:Y})),Se&&H.jsx(Rt,K({},vr,{children:Se})),Fe&&H.jsx(Bt,K({},mr,{children:Fe})),H.jsx("input",K({},or()))]})),rr&&H.jsx(Ve,K({},Xe,{className:Gn(Xe.className),modifiers:ue},!((y=S.slots)!=null&&y.listbox)&&{as:db,slots:{root:Xe.as||"ul"}},{children:H.jsx(GH,{value:He,children:H.jsx(_b,{variant:Pe,color:We,children:H.jsx(fb.Provider,{value:"select",children:H.jsx(av,{nested:!0,children:F})})})})}))]})});function oK(e){return Zr("MuiSheet",e)}Gr("MuiSheet",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const aK=["className","color","component","variant","invertedColors","slots","slotProps"],sK=e=>{const{variant:t,color:r}=e,n={root:["root",t&&`variant${xt(t)}`,r&&`color${xt(r)}`]};return Nr(n,oK,{})},lK=ft("div",{name:"JoySheet",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,n;const i=(r=e.variants[t.variant])==null?void 0:r[t.color],{borderRadius:l,bgcolor:h,backgroundColor:s,background:m}=Td({theme:e,ownerState:t},["borderRadius","bgcolor","backgroundColor","background"]),y=Xc(e,`palette.${h}`)||h||Xc(e,`palette.${s}`)||s||m||(i==null?void 0:i.backgroundColor)||(i==null?void 0:i.background)||e.vars.palette.background.surface;return[K({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--ListItem-stickyBackground":y==="transparent"?"initial":y,"--Sheet-background":y==="transparent"?"initial":y},l!==void 0&&{"--List-radius":`calc(${l} - var(--variant-borderWidth, 0px))`,"--unstable_actionRadius":`calc(${l} - var(--variant-borderWidth, 0px))`},{backgroundColor:e.vars.palette.background.surface,position:"relative"}),K({},e.typography["body-md"],t.variant==="solid"&&t.color&&t.invertedColors&&gb(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&vb(t.color)(e),(n=e.variants[t.variant])==null?void 0:n[t.color],i)]}),kb=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoySheet"}),{className:i,color:l="neutral",component:h="div",variant:s="plain",invertedColors:m=!1,slots:y={},slotProps:S={}}=n,T=Ht(n,aK),I=K({},n,{color:l,component:h,invertedColors:m,variant:s}),D=sK(I),F=K({},T,{component:h,slots:y,slotProps:S}),[V,Z]=Ft("root",{ref:r,className:Gn(D.root,i),elementType:lK,externalForwardedProps:F,ownerState:I});return H.jsx(V,K({},Z))}),yo=l8({createStyledComponent:ft("div",{name:"JoyStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>Kr({props:e,name:"JoyStack"})});function cK(e){return Zr("MuiTab",e)}const uK=Gr("MuiTab",["root","disabled","focusVisible","selected","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),dK=["action","children","value","disabled","onChange","onClick","onFocus","component","orientation","variant","color","disableIndicator","indicatorPlacement","indicatorInset","slots","slotProps"],hK=e=>{const{selected:t,disabled:r,focusVisible:n,variant:i,color:l,orientation:h}=e,s={root:["root",h,r&&"disabled",n&&"focusVisible",t&&"selected",i&&`variant${xt(i)}`,l&&`color${xt(l)}`]};return Nr(s,cK,{})},fK=ft(lv,{name:"JoyTab",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>[{flex:"initial",justifyContent:e.row?"center":"initial","--unstable_ListItemDecorator-alignItems":"center","--unstable_offset":"min(calc(-1 * var(--variant-borderWidth, 0px)), -1px)"},!e.disableIndicator&&{'&[aria-selected="true"]':{"--Tab-indicatorColor":"currentColor",zIndex:1},"&::after":{content:'""',display:"block",position:"absolute",margin:"auto",background:"var(--Tab-indicatorColor)",borderRadius:"var(--Tab-indicatorRadius)"}},!e.disableIndicator&&e.indicatorPlacement==="bottom"&&{paddingBottom:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",bottom:"calc(-1px - var(--unstable_TabList-underlineBottom, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="top"&&{paddingTop:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",top:"calc(-1px - var(--unstable_TabList-underlineTop, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="right"&&{paddingRight:"calc(var(--ListItem-paddingRight) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",right:"calc(-1px - var(--unstable_TabList-underlineRight, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="left"&&{paddingLeft:"calc(var(--ListItem-paddingLeft) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",left:"calc(-1px - var(--unstable_TabList-underlineLeft, 0px))"}}]),zw=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyTab"}),i=R.useContext(kd),{action:l,children:h,disabled:s=!1,component:m="button",orientation:y="horizontal",variant:S="plain",color:T="neutral",disableIndicator:I=!1,indicatorPlacement:D=i?"bottom":"right",indicatorInset:F=!1,slots:V={},slotProps:Z={}}=n,z=Ht(n,dK),O=R.useRef(null),L=an(O,r),{active:te,focusVisible:j,setFocusVisible:$,selected:J,getRootProps:ie}=tG(K({},n,{rootRef:L}));R.useImperativeHandle(l,()=>({focusVisible:()=>{$(!0),O.current.focus()}}),[$]);const xe=K({},n,{disableIndicator:I,indicatorPlacement:D,indicatorInset:F,orientation:y,row:i,active:te,focusVisible:j,disabled:s,selected:J,variant:S,color:T}),ge=hK(xe),we=K({},z,{component:m,slots:V,slotProps:Z}),[Te,Pe]=Ft("root",{ref:r,elementType:fK,getSlotProps:ie,externalForwardedProps:we,ownerState:xe,className:ge.root});return H.jsx(mb.Provider,{value:y,children:H.jsx(Te,K({},Pe,{children:h}))})}),CT=R.createContext("md");function pK(e){return Zr("MuiTabList",e)}Gr("MuiTabList",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const mK=["component","children","variant","color","size","disableUnderline","underlinePlacement","tabFlex","sticky","slots","slotProps"],gK=e=>{const{orientation:t,size:r,variant:n,color:i}=e,l={root:["root",t,n&&`variant${xt(n)}`,i&&`color${xt(i)}`,r&&`size${xt(r)}`]};return Nr(l,pK,{})},vK=ft(sv,{name:"JoyTabList",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;const n=(r=e.variants[t.variant])==null?void 0:r[t.color];return K({"--List-gap":"0px","--ListDivider-gap":"0px","--ListItem-paddingX":"var(--Tabs-spacing)","--ListItem-gap":"0.375rem","--unstable_TabList-hasUnderline":t.disableUnderline?"var(--unknown,)":"initial"},pb,{flexGrow:"initial",flexDirection:t.orientation==="vertical"?"column":"row",borderRadius:"var(--List-radius, 0px)",padding:"var(--List-padding, 0px)",zIndex:1},t.sticky&&{position:"sticky",top:t.sticky==="top"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",bottom:t.sticky==="bottom"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",backgroundColor:(n==null?void 0:n.backgroundColor)||`var(--TabList-stickyBackground, ${e.vars.palette.background.body})`},!t.disableUnderline&&K({},t.underlinePlacement==="bottom"&&{"--unstable_TabList-underlineBottom":"1px",paddingBottom:1,boxShadow:`inset 0 -1px ${e.vars.palette.divider}`},t.underlinePlacement==="top"&&{"--unstable_TabList-underlineTop":"1px",paddingTop:1,boxShadow:`inset 0 1px ${e.vars.palette.divider}`},t.underlinePlacement==="right"&&{"--unstable_TabList-underlineRight":"1px",paddingRight:1,boxShadow:`inset -1px 0 ${e.vars.palette.divider}`},t.underlinePlacement==="left"&&{"--unstable_TabList-underlineLeft":"1px",paddingLeft:1,boxShadow:`inset 1px 0 ${e.vars.palette.divider}`}),t.tabFlex&&{[`& .${uK.root}`]:{flex:t.tabFlex}})}),yK=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyTabList"}),i=R.useContext(CT),{isRtl:l,orientation:h,getRootProps:s,contextValue:m}=JH({rootRef:r}),{component:y="div",children:S,variant:T="plain",color:I="neutral",size:D,disableUnderline:F=!1,underlinePlacement:V=h==="horizontal"?"bottom":"right",tabFlex:Z,sticky:z,slots:O={},slotProps:L={}}=n,te=Ht(n,mK),$=K({},n,{isRtl:l,orientation:h,variant:T,color:I,size:D??i,sticky:z,tabFlex:Z,nesting:!1,disableUnderline:F,underlinePlacement:V}),J=gK($),ie=K({},te,{component:y,slots:O,slotProps:L}),[xe,ge]=Ft("root",{ref:r,elementType:vK,getSlotProps:s,externalForwardedProps:ie,ownerState:$,className:J.root});return H.jsx(xe,K({},ge,{children:H.jsx(QH,{value:m,children:H.jsx(av,{row:h==="horizontal",nested:!0,children:S})})}))});function _K(e){return Zr("MuiTabPanel",e)}Gr("MuiTabPanel",["root","hidden","sizeSm","sizeMd","sizeLg","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const xK=["children","value","component","color","variant","size","slots","slotProps","keepMounted"],bK=e=>{const{hidden:t,size:r,variant:n,color:i,orientation:l}=e,h={root:["root",t&&"hidden",r&&`size${xt(r)}`,l,n&&`variant${xt(n)}`,i&&`color${xt(i)}`,r&&`size${xt(r)}`]};return Nr(h,_K,{})},wK=ft("div",{name:"JoyTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return K({display:t.hidden?"none":"block",padding:"var(--Tabs-spacing)",flexGrow:1,fontFamily:e.vars.fontFamily.body},e.typography[`body-${t.size}`],(r=e.variants[t.variant])==null?void 0:r[t.color])}),Lw=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyTabPanel"}),{orientation:i}=hb()||{orientation:"horizontal"},l=R.useContext(CT),{children:h,value:s=0,component:m,color:y="neutral",variant:S="plain",size:T,slots:I={},slotProps:D={},keepMounted:F=!1}=n,V=Ht(n,xK),{hidden:Z,getRootProps:z}=XH(K({},n,{value:s})),L=K({},n,{orientation:i,hidden:Z,size:T??l,color:y,variant:S}),te=bK(L),j=K({},V,{component:m,slots:I,slotProps:D}),[$,J]=Ft("root",{ref:r,elementType:wK,getSlotProps:z,externalForwardedProps:j,additionalProps:{role:"tabpanel",ref:r,as:m},ownerState:L,className:te.root});return F?H.jsx($,K({},J,{children:h})):H.jsx($,K({},J,{children:!Z&&h}))});function SK(e){return Zr("MuiTabs",e)}Gr("MuiTabs",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const CK=["children","value","defaultValue","orientation","direction","component","onChange","selectionFollowsFocus","variant","color","size","slots","slotProps"],kK=e=>{const{orientation:t,variant:r,color:n,size:i}=e,l={root:["root",t,r&&`variant${xt(r)}`,n&&`color${xt(n)}`,i&&`size${xt(i)}`]};return Nr(l,SK,{})},TK=ft("div",{name:"JoyTabs",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,n;const i=(r=t.variants[e.variant])==null?void 0:r[e.color],{bgcolor:l,backgroundColor:h,background:s,p:m,padding:y}=Td({theme:t,ownerState:e},["bgcolor","backgroundColor","background","p","padding"]),S=Xc(t,`palette.${l}`)||l||Xc(t,`palette.${h}`)||h||s||(i==null?void 0:i.backgroundColor)||(i==null?void 0:i.background)||t.vars.palette.background.surface;return K({},e.size==="sm"&&{"--Tabs-spacing":"0.75rem"},e.size==="md"&&{"--Tabs-spacing":"1rem"},e.size==="lg"&&{"--Tabs-spacing":"1.25rem"},{"--Tab-indicatorThickness":"2px","--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,"--TabList-stickyBackground":S==="transparent"?"initial":S,display:"flex",flexDirection:"column"},e.orientation==="vertical"&&{flexDirection:"row"},{backgroundColor:t.vars.palette.background.surface,position:"relative"},t.typography[`body-${e.size}`],(n=t.variants[e.variant])==null?void 0:n[e.color],m!==void 0&&{"--Tabs-padding":m},y!==void 0&&{"--Tabs-padding":y})}),cR=R.forwardRef(function(t,r){const n=Kr({props:t,name:"JoyTabs"}),{children:i,value:l,defaultValue:h,orientation:s="horizontal",direction:m="ltr",component:y,variant:S="plain",color:T="neutral",size:I="md",slots:D={},slotProps:F={}}=n,V=Ht(n,CK),Z=h||(l===void 0?0:void 0),{contextValue:z}=qH(K({},n,{orientation:s,defaultValue:Z})),O=K({},n,{orientation:s,direction:m,variant:S,color:T,size:I}),L=kK(O),te=K({},V,{component:y,slots:D,slotProps:F}),[j,$]=Ft("root",{ref:r,elementType:TK,externalForwardedProps:te,additionalProps:{ref:r,as:y},ownerState:O,className:L.root});return H.jsx(j,K({},$,{children:H.jsx(ZH,{value:z,children:H.jsx(CT.Provider,{value:I,children:i})})}))});function EK(e){return Zr("MuiTooltip",e)}Gr("MuiTooltip",["root","tooltipArrow","arrow","touch","placementLeft","placementRight","placementTop","placementBottom","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);const IK=["children","className","component","arrow","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","disablePortal","direction","keepMounted","modifiers","placement","title","color","variant","size","slots","slotProps"],PK=e=>{const{arrow:t,variant:r,color:n,size:i,placement:l,touch:h}=e,s={root:["root",t&&"tooltipArrow",h&&"touch",i&&`size${xt(i)}`,n&&`color${xt(n)}`,r&&`variant${xt(r)}`,`tooltipPlacement${xt(l.split("-")[0])}`],arrow:["arrow"]};return Nr(s,EK,{})},AK=ft("div",{name:"JoyTooltip",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,n,i;const l=(r=t.variants[e.variant])==null?void 0:r[e.color];return K({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.md,"--Tooltip-arrowSize":"8px",padding:t.spacing(.25,.625)},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.lg,"--Tooltip-arrowSize":"10px",padding:t.spacing(.5,.75)},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl,"--Tooltip-arrowSize":"12px",padding:t.spacing(.75,1)},{zIndex:t.vars.zIndex.tooltip,borderRadius:t.vars.radius.sm,boxShadow:t.shadow.sm,wordWrap:"break-word",position:"relative"},e.disableInteractive&&{pointerEvents:"none"},t.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[e.size]}`],l,!l.backgroundColor&&{backgroundColor:t.vars.palette.background.surface},{"&::before":{content:'""',display:"block",position:"absolute",width:(n=e.placement)!=null&&n.match(/(top|bottom)/)?"100%":"calc(10px + var(--variant-borderWidth, 0px))",height:(i=e.placement)!=null&&i.match(/(top|bottom)/)?"calc(10px + var(--variant-borderWidth, 0px))":"100%"},'&[data-popper-placement*="bottom"]::before':{top:0,left:0,transform:"translateY(-100%)"},'&[data-popper-placement*="left"]::before':{top:0,right:0,transform:"translateX(100%)"},'&[data-popper-placement*="right"]::before':{top:0,left:0,transform:"translateX(-100%)"},'&[data-popper-placement*="top"]::before':{bottom:0,left:0,transform:"translateY(100%)"}})}),RK=ft("span",{name:"JoyTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e,ownerState:t})=>{var r,n,i;const l=(r=e.variants[t.variant])==null?void 0:r[t.color];return{"--unstable_Tooltip-arrowRotation":0,width:"var(--Tooltip-arrowSize)",height:"var(--Tooltip-arrowSize)",boxSizing:"border-box","&::before":{content:'""',display:"block",position:"absolute",width:0,height:0,border:"calc(var(--Tooltip-arrowSize) / 2) solid",borderLeftColor:"transparent",borderBottomColor:"transparent",borderTopColor:(n=l==null?void 0:l.backgroundColor)!=null?n:e.vars.palette.background.surface,borderRightColor:(i=l==null?void 0:l.backgroundColor)!=null?i:e.vars.palette.background.surface,borderRadius:"0px 2px 0px 0px",boxShadow:`var(--variant-borderWidth, 0px) calc(-1 * var(--variant-borderWidth, 0px)) 0px 0px ${l.borderColor}`,transformOrigin:"center center",transform:"rotate(calc(-45deg + 90deg * var(--unstable_Tooltip-arrowRotation)))"},'[data-popper-placement*="bottom"] &':{top:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="top"] &':{"--unstable_Tooltip-arrowRotation":2,bottom:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="left"] &':{"--unstable_Tooltip-arrowRotation":1,right:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="right"] &':{"--unstable_Tooltip-arrowRotation":3,left:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"}}});let o0=!1;const uR=new Yg;let mm={x:0,y:0};function dR(e,t){return r=>{t&&t(r),e(r)}}function hR(e,t){return(r,...n)=>{t&&t(r,...n),e(r,...n)}}const DK=R.forwardRef(function(t,r){var n;const i=Kr({props:t,name:"JoyTooltip"}),{children:l,className:h,component:s,arrow:m=!1,describeChild:y=!1,disableFocusListener:S=!1,disableHoverListener:T=!1,disableInteractive:I=!1,disableTouchListener:D=!1,enterDelay:F=100,enterNextDelay:V=0,enterTouchDelay:Z=700,followCursor:z=!1,id:O,leaveDelay:L=0,leaveTouchDelay:te=1500,onClose:j,onOpen:$,open:J,disablePortal:ie,direction:xe,keepMounted:ge,modifiers:we,placement:Te="bottom",title:Pe,color:We="neutral",variant:De="solid",size:Se="md",slots:Fe={},slotProps:Ce={}}=i,Ne=Ht(i,IK),[Ye,at]=R.useState(),[st,Dt]=R.useState(null),St=R.useRef(!1),$t=I||z,Ct=Tm(),it=Tm(),Ze=Tm(),rt=Tm(),[pt,sr]=nf({controlled:J,default:!1,name:"Tooltip",state:"open"});let rr=pt;const wr=ta(O),Lr=R.useRef(void 0),nr=Bc(()=>{Lr.current!==void 0&&(document.body.style.WebkitUserSelect=Lr.current,Lr.current=void 0),rt.clear()});R.useEffect(()=>nr,[nr]);const Et=N=>{uR.clear(),o0=!0,sr(!0),$&&!rr&&$(N)},hr=Bc(N=>{uR.start(800+L,()=>{o0=!1}),sr(!1),j&&rr&&j(N),Ct.start(150,()=>{St.current=!1})}),Gt=N=>{St.current&&N.type!=="touchstart"||(Ye&&Ye.removeAttribute("title"),it.clear(),Ze.clear(),F||o0&&V?it.start(o0?V:F,()=>{Et(N)}):Et(N))},Dr=N=>{it.clear(),Ze.start(L,()=>{hr(N)})},{isFocusVisibleRef:He,onBlur:xr,onFocus:Tr,ref:Jt}=mk(),[,or]=R.useState(!1),Cr=N=>{xr(N),He.current===!1&&(or(!1),Dr(N))},Mr=N=>{Ye||at(N.currentTarget),Tr(N),He.current===!0&&(or(!0),Gt(N))},Sr=N=>{St.current=!0;const X=l.props;X.onTouchStart&&X.onTouchStart(N)},fr=N=>{Sr(N),Ze.clear(),Ct.clear(),nr(),Lr.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",rt.start(Z,()=>{document.body.style.WebkitUserSelect=Lr.current,Gt(N)})},Qt=N=>{l.props.onTouchEnd&&l.props.onTouchEnd(N),nr(),Ze.start(te,()=>{hr(N)})};R.useEffect(()=>{if(!rr)return;function N(X){(X.key==="Escape"||X.key==="Esc")&&hr(X)}return document.addEventListener("keydown",N),()=>{document.removeEventListener("keydown",N)}},[hr,rr]);const dr=an(at,r),tn=an(Jt,dr),je=an(Jg(l),tn);typeof Pe!="number"&&!Pe&&(rr=!1);const kt=R.useRef(null),bt=N=>{const X=l.props;X.onMouseMove&&X.onMouseMove(N),mm={x:N.clientX,y:N.clientY},kt.current&&kt.current.update()},Ee={},Ve=typeof Pe=="string";y?(Ee.title=!rr&&Ve&&!T?Pe:null,Ee["aria-describedby"]=rr?wr:null):(Ee["aria-label"]=Ve?Pe:null,Ee["aria-labelledby"]=rr&&!Ve?wr:null);const Xe=K({},Ee,Ne,{component:s},l.props,{className:Gn(h,l.props.className),onTouchStart:Sr,ref:je},z?{onMouseMove:bt}:{}),Tt={};D||(Xe.onTouchStart=fr,Xe.onTouchEnd=Qt),T||(Xe.onMouseOver=dR(Gt,Xe.onMouseOver),Xe.onMouseLeave=dR(Dr,Xe.onMouseLeave),$t||(Tt.onMouseOver=Gt,Tt.onMouseLeave=Dr)),S||(Xe.onFocus=hR(Mr,Xe.onFocus),Xe.onBlur=hR(Cr,Xe.onBlur),$t||(Tt.onFocus=Mr,Tt.onBlur=Cr));const gt=K({},i,{arrow:m,disableInteractive:$t,placement:Te,touch:St.current,color:We,variant:De,size:Se}),Rt=PK(gt),vr=K({},Ne,{component:s,slots:Fe,slotProps:Ce}),Bt=R.useMemo(()=>[{name:"arrow",enabled:!!st,options:{element:st,padding:6}},{name:"offset",options:{offset:[0,10]}},...we||[]],[st,we]),[mr,ue]=Ft("root",{additionalProps:K({id:wr,popperRef:kt,placement:Te,anchorEl:z?{getBoundingClientRect:()=>({top:mm.y,left:mm.x,right:mm.x,bottom:mm.y,width:0,height:0})}:Ye,open:Ye?rr:!1,disablePortal:ie,keepMounted:ge,direction:xe,modifiers:Bt},Tt),ref:null,className:Rt.root,elementType:AK,externalForwardedProps:vr,ownerState:gt}),[Y,Q]=Ft("arrow",{ref:Dt,className:Rt.arrow,elementType:RK,externalForwardedProps:vr,ownerState:gt});return H.jsxs(R.Fragment,{children:[R.isValidElement(l)&&R.cloneElement(l,Xe),H.jsxs(mr,K({},ue,!((n=i.slots)!=null&&n.root)&&{as:db,slots:{root:s||"div"}},{children:[Pe,m?H.jsx(Y,K({},Q)):null]}))]})}),Tb="$$material";function MK(e,t){return K({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var yi={},h5={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(h5);var f5=h5.exports;const zK=oc(NN),LK=oc(fV);var p5=f5;Object.defineProperty(yi,"__esModule",{value:!0});yi.alpha=y5;yi.blend=KK;yi.colorChannel=void 0;var OK=yi.darken=TT;yi.decomposeColor=Ya;yi.emphasize=_5;var $K=yi.getContrastRatio=HK;yi.getLuminance=z_;yi.hexToRgb=m5;var BK=yi.hslToRgb=v5,FK=yi.lighten=ET,a0=yi.private_safeAlpha=GK,Xh=yi.private_safeColorChannel=void 0,kn=yi.private_safeDarken=WK,s0=yi.private_safeEmphasize=ZK,Tn=yi.private_safeLighten=qK;yi.recomposeColor=qf;yi.rgbToHex=UK;var fR=p5(zK),NK=p5(LK);function kT(e,t=0,r=1){return(0,NK.default)(e,t,r)}function m5(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function jK(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function Ya(e){if(e.type)return e;if(e.charAt(0)==="#")return Ya(m5(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error((0,fR.default)(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,fR.default)(10,i))}else n=n.split(",");return n=n.map(l=>parseFloat(l)),{type:r,values:n,colorSpace:i}}const g5=e=>{const t=Ya(e);return t.values.slice(0,3).map((r,n)=>t.type.indexOf("hsl")!==-1&&n!==0?`${r}%`:r).join(" ")};yi.colorChannel=g5;const VK=(e,t)=>{try{return g5(e)}catch{return e}};Xh=yi.private_safeColorChannel=VK;function qf(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.indexOf("rgb")!==-1?n=n.map((i,l)=>l<3?parseInt(i,10):i):t.indexOf("hsl")!==-1&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.indexOf("color")!==-1?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function UK(e){if(e.indexOf("#")===0)return e;const{values:t}=Ya(e);return`#${t.map((r,n)=>jK(n===3?Math.round(255*r):r)).join("")}`}function v5(e){e=Ya(e);const{values:t}=e,r=t[0],n=t[1]/100,i=t[2]/100,l=n*Math.min(i,1-i),h=(y,S=(y+r/30)%12)=>i-l*Math.max(Math.min(S-3,9-S,1),-1);let s="rgb";const m=[Math.round(h(0)*255),Math.round(h(8)*255),Math.round(h(4)*255)];return e.type==="hsla"&&(s+="a",m.push(t[3])),qf({type:s,values:m})}function z_(e){e=Ya(e);let t=e.type==="hsl"||e.type==="hsla"?Ya(v5(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function HK(e,t){const r=z_(e),n=z_(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function y5(e,t){return e=Ya(e),t=kT(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,qf(e)}function GK(e,t,r){try{return y5(e,t)}catch{return e}}function TT(e,t){if(e=Ya(e),t=kT(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return qf(e)}function WK(e,t,r){try{return TT(e,t)}catch{return e}}function ET(e,t){if(e=Ya(e),t=kT(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return qf(e)}function qK(e,t,r){try{return ET(e,t)}catch{return e}}function _5(e,t=.15){return z_(e)>.5?TT(e,t):ET(e,t)}function ZK(e,t,r){try{return _5(e,t)}catch{return e}}function KK(e,t,r,n=1){const i=(m,y)=>Math.round((m**(1/n)*(1-r)+y**(1/n)*r)**n),l=Ya(e),h=Ya(t),s=[i(l.values[0],h.values[0]),i(l.values[1],h.values[1]),i(l.values[2],h.values[2])];return qf({type:"rgb",values:s})}const Sg={black:"#000",white:"#fff"},XK={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},wh={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Sh={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},gm={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Ch={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},kh={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Th={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},YK=["mode","contrastThreshold","tonalOffset"],pR={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Sg.white,default:Sg.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Ow={text:{primary:Sg.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Sg.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function mR(e,t,r,n){const i=n.light||n,l=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=FK(e.main,i):t==="dark"&&(e.dark=OK(e.main,l)))}function JK(e="light"){return e==="dark"?{main:Ch[200],light:Ch[50],dark:Ch[400]}:{main:Ch[700],light:Ch[400],dark:Ch[800]}}function QK(e="light"){return e==="dark"?{main:wh[200],light:wh[50],dark:wh[400]}:{main:wh[500],light:wh[300],dark:wh[700]}}function eX(e="light"){return e==="dark"?{main:Sh[500],light:Sh[300],dark:Sh[700]}:{main:Sh[700],light:Sh[400],dark:Sh[800]}}function tX(e="light"){return e==="dark"?{main:kh[400],light:kh[300],dark:kh[700]}:{main:kh[700],light:kh[500],dark:kh[900]}}function rX(e="light"){return e==="dark"?{main:Th[400],light:Th[300],dark:Th[700]}:{main:Th[800],light:Th[500],dark:Th[900]}}function nX(e="light"){return e==="dark"?{main:gm[400],light:gm[300],dark:gm[700]}:{main:"#ed6c02",light:gm[500],dark:gm[900]}}function iX(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2}=e,i=Ht(e,YK),l=e.primary||JK(t),h=e.secondary||QK(t),s=e.error||eX(t),m=e.info||tX(t),y=e.success||rX(t),S=e.warning||nX(t);function T(V){return $K(V,Ow.text.primary)>=r?Ow.text.primary:pR.text.primary}const I=({color:V,name:Z,mainShade:z=500,lightShade:O=300,darkShade:L=700})=>{if(V=K({},V),!V.main&&V[z]&&(V.main=V[z]),!V.hasOwnProperty("main"))throw new Error(Zl(11,Z?` (${Z})`:"",z));if(typeof V.main!="string")throw new Error(Zl(12,Z?` (${Z})`:"",JSON.stringify(V.main)));return mR(V,"light",O,n),mR(V,"dark",L,n),V.contrastText||(V.contrastText=T(V.main)),V},D={dark:Ow,light:pR};return Si(K({common:K({},Sg),mode:t,primary:I({color:l,name:"primary"}),secondary:I({color:h,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:I({color:s,name:"error"}),warning:I({color:S,name:"warning"}),info:I({color:m,name:"info"}),success:I({color:y,name:"success"}),grey:XK,contrastThreshold:r,getContrastText:T,augmentColor:I,tonalOffset:n},D[t]),i)}const oX=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function aX(e){return Math.round(e*1e5)/1e5}const gR={textTransform:"uppercase"},vR='"Roboto", "Helvetica", "Arial", sans-serif';function x5(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:n=vR,fontSize:i=14,fontWeightLight:l=300,fontWeightRegular:h=400,fontWeightMedium:s=500,fontWeightBold:m=700,htmlFontSize:y=16,allVariants:S,pxToRem:T}=r,I=Ht(r,oX),D=i/14,F=T||(z=>`${z/y*D}rem`),V=(z,O,L,te,j)=>K({fontFamily:n,fontWeight:z,fontSize:F(O),lineHeight:L},n===vR?{letterSpacing:`${aX(te/O)}em`}:{},j,S),Z={h1:V(l,96,1.167,-1.5),h2:V(l,60,1.2,-.5),h3:V(h,48,1.167,0),h4:V(h,34,1.235,.25),h5:V(h,24,1.334,0),h6:V(s,20,1.6,.15),subtitle1:V(h,16,1.75,.15),subtitle2:V(s,14,1.57,.1),body1:V(h,16,1.5,.15),body2:V(h,14,1.43,.15),button:V(s,14,1.75,.4,gR),caption:V(h,12,1.66,.4),overline:V(h,12,2.66,1,gR),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Si(K({htmlFontSize:y,pxToRem:F,fontFamily:n,fontSize:i,fontWeightLight:l,fontWeightRegular:h,fontWeightMedium:s,fontWeightBold:m},Z),I,{clone:!1})}const sX=.2,lX=.14,cX=.12;function Un(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${sX})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${lX})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${cX})`].join(",")}const uX=["none",Un(0,2,1,-1,0,1,1,0,0,1,3,0),Un(0,3,1,-2,0,2,2,0,0,1,5,0),Un(0,3,3,-2,0,3,4,0,0,1,8,0),Un(0,2,4,-1,0,4,5,0,0,1,10,0),Un(0,3,5,-1,0,5,8,0,0,1,14,0),Un(0,3,5,-1,0,6,10,0,0,1,18,0),Un(0,4,5,-2,0,7,10,1,0,2,16,1),Un(0,5,5,-3,0,8,10,1,0,3,14,2),Un(0,5,6,-3,0,9,12,1,0,3,16,2),Un(0,6,6,-3,0,10,14,1,0,4,18,3),Un(0,6,7,-4,0,11,15,1,0,4,20,3),Un(0,7,8,-4,0,12,17,2,0,5,22,4),Un(0,7,8,-4,0,13,19,2,0,5,24,4),Un(0,7,9,-4,0,14,21,2,0,5,26,4),Un(0,8,9,-5,0,15,22,2,0,6,28,5),Un(0,8,10,-5,0,16,24,2,0,6,30,5),Un(0,8,11,-5,0,17,26,2,0,6,32,5),Un(0,9,11,-5,0,18,28,2,0,7,34,6),Un(0,9,12,-6,0,19,29,2,0,7,36,6),Un(0,10,13,-6,0,20,31,3,0,8,38,7),Un(0,10,13,-6,0,21,33,3,0,8,40,7),Un(0,10,14,-6,0,22,35,3,0,8,42,7),Un(0,11,14,-7,0,23,36,3,0,9,44,8),Un(0,11,15,-7,0,24,38,3,0,9,46,8)],dX=["duration","easing","delay"],hX={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},b5={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function yR(e){return`${Math.round(e)}ms`}function fX(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function pX(e){const t=K({},hX,e.easing),r=K({},b5,e.duration);return K({getAutoHeightDuration:fX,create:(i=["all"],l={})=>{const{duration:h=r.standard,easing:s=t.easeInOut,delay:m=0}=l;return Ht(l,dX),(Array.isArray(i)?i:[i]).map(y=>`${y} ${typeof h=="string"?h:yR(h)} ${s} ${typeof m=="string"?m:yR(m)}`).join(",")}},e,{easing:t,duration:r})}const mX={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},gX=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function l2(e={},...t){const{mixins:r={},palette:n={},transitions:i={},typography:l={}}=e,h=Ht(e,gX);if(e.vars)throw new Error(Zl(18));const s=iX(n),m=Zg(e);let y=Si(m,{mixins:MK(m.breakpoints,r),palette:s,shadows:uX.slice(),typography:x5(s,l),transitions:pX(i),zIndex:K({},mX)});return y=Si(y,h),y=t.reduce((S,T)=>Si(S,T),y),y.unstable_sxConfig=K({},bd,h==null?void 0:h.unstable_sxConfig),y.unstable_sx=function(T){return ac({sx:T,theme:this})},y}const w5=l2();function IT(){const e=Px(w5);return e[Tb]||e}var dv={},$w={exports:{}},_R;function vX(){return _R||(_R=1,function(e){function t(r,n){if(r==null)return{};var i={};for(var l in r)if({}.hasOwnProperty.call(r,l)){if(n.includes(l))continue;i[l]=r[l]}return i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}($w)),$w.exports}const yX=oc(Zj),_X=oc(Kj),xX=oc(t6),bX=oc(tV),wX=oc(j6),SX=oc(q6);var Zf=f5;Object.defineProperty(dv,"__esModule",{value:!0});var CX=dv.default=$X;dv.shouldForwardProp=F0;dv.systemDefaultTheme=void 0;var La=Zf(Gz()),c2=Zf(vX()),xR=RX(yX),kX=_X;Zf(xX);Zf(bX);var TX=Zf(wX),EX=Zf(SX);const IX=["ownerState"],PX=["variants"],AX=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function S5(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(S5=function(n){return n?r:t})(e)}function RX(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=S5(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(l!=="default"&&Object.prototype.hasOwnProperty.call(e,l)){var h=i?Object.getOwnPropertyDescriptor(e,l):null;h&&(h.get||h.set)?Object.defineProperty(n,l,h):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}function DX(e){return Object.keys(e).length===0}function MX(e){return typeof e=="string"&&e.charCodeAt(0)>96}function F0(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const zX=dv.systemDefaultTheme=(0,TX.default)(),LX=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function l0({defaultTheme:e,theme:t,themeId:r}){return DX(t)?e:t[r]||t}function OX(e){return e?(t,r)=>r[e]:null}function N0(e,t){let{ownerState:r}=t,n=(0,c2.default)(t,IX);const i=typeof e=="function"?e((0,La.default)({ownerState:r},n)):e;if(Array.isArray(i))return i.flatMap(l=>N0(l,(0,La.default)({ownerState:r},n)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:l=[]}=i;let s=(0,c2.default)(i,PX);return l.forEach(m=>{let y=!0;typeof m.props=="function"?y=m.props((0,La.default)({ownerState:r},n,r)):Object.keys(m.props).forEach(S=>{(r==null?void 0:r[S])!==m.props[S]&&n[S]!==m.props[S]&&(y=!1)}),y&&(Array.isArray(s)||(s=[s]),s.push(typeof m.style=="function"?m.style((0,La.default)({ownerState:r},n,r)):m.style))}),s}return i}function $X(e={}){const{themeId:t,defaultTheme:r=zX,rootShouldForwardProp:n=F0,slotShouldForwardProp:i=F0}=e,l=h=>(0,EX.default)((0,La.default)({},h,{theme:l0((0,La.default)({},h,{defaultTheme:r,themeId:t}))}));return l.__mui_systemSx=!0,(h,s={})=>{(0,xR.internal_processStyles)(h,j=>j.filter($=>!($!=null&&$.__mui_systemSx)));const{name:m,slot:y,skipVariantsResolver:S,skipSx:T,overridesResolver:I=OX(LX(y))}=s,D=(0,c2.default)(s,AX),F=S!==void 0?S:y&&y!=="Root"&&y!=="root"||!1,V=T||!1;let Z,z=F0;y==="Root"||y==="root"?z=n:y?z=i:MX(h)&&(z=void 0);const O=(0,xR.default)(h,(0,La.default)({shouldForwardProp:z,label:Z},D)),L=j=>typeof j=="function"&&j.__emotion_real!==j||(0,kX.isPlainObject)(j)?$=>N0(j,(0,La.default)({},$,{theme:l0({theme:$.theme,defaultTheme:r,themeId:t})})):j,te=(j,...$)=>{let J=L(j);const ie=$?$.map(L):[];m&&I&&ie.push(we=>{const Te=l0((0,La.default)({},we,{defaultTheme:r,themeId:t}));if(!Te.components||!Te.components[m]||!Te.components[m].styleOverrides)return null;const Pe=Te.components[m].styleOverrides,We={};return Object.entries(Pe).forEach(([De,Se])=>{We[De]=N0(Se,(0,La.default)({},we,{theme:Te}))}),I(we,We)}),m&&!F&&ie.push(we=>{var Te;const Pe=l0((0,La.default)({},we,{defaultTheme:r,themeId:t})),We=Pe==null||(Te=Pe.components)==null||(Te=Te[m])==null?void 0:Te.variants;return N0({variants:We},(0,La.default)({},we,{theme:Pe}))}),V||ie.push(l);const xe=ie.length-$.length;if(Array.isArray(j)&&xe>0){const we=new Array(xe).fill("");J=[...j,...we],J.raw=[...j.raw,...we]}const ge=O(J,...ie);return h.muiName&&(ge.muiName=h.muiName),ge};return O.withConfig&&(te.withConfig=O.withConfig),te}}function BX(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const FX=e=>BX(e)&&e!=="classes",Eb=CX({themeId:Tb,defaultTheme:w5,rootShouldForwardProp:FX});function NX(e){var t;return!!e[0].match(/(cssVarPrefix|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const jX=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},VX=["colorSchemes","cssVarPrefix","shouldSkipGeneratingVar"],UX=["palette"],HX=[...Array(25)].map((e,t)=>{if(t===0)return;const r=jX(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function GX(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function Qe(e,t,r){!e[t]&&r&&(e[t]=r)}function Rm(e){return!e||!e.startsWith("hsl")?e:BK(e)}function Rl(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Xh(Rm(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}const Gs=e=>{try{return e()}catch{}},WX=(e="mui")=>Hx(e);function C5(e={},...t){var r,n,i,l,h,s;const{colorSchemes:m={},cssVarPrefix:y="mui",shouldSkipGeneratingVar:S=NX}=e,T=Ht(e,VX),I=WX(y),D=l2(K({},T,m.light&&{palette:(r=m.light)==null?void 0:r.palette})),{palette:F}=D,V=Ht(D,UX),{palette:Z}=l2({palette:K({mode:"dark"},(n=m.dark)==null?void 0:n.palette)});let z=K({},V,{cssVarPrefix:y,getCssVar:I,colorSchemes:K({},m,{light:K({},m.light,{palette:F,opacity:K({inputPlaceholder:.42,inputUnderline:.42,switchTrackDisabled:.12,switchTrack:.38},(i=m.light)==null?void 0:i.opacity),overlays:((l=m.light)==null?void 0:l.overlays)||[]}),dark:K({},m.dark,{palette:Z,opacity:K({inputPlaceholder:.5,inputUnderline:.7,switchTrackDisabled:.2,switchTrack:.3},(h=m.dark)==null?void 0:h.opacity),overlays:((s=m.dark)==null?void 0:s.overlays)||HX})})});Object.keys(z.colorSchemes).forEach(j=>{const $=z.colorSchemes[j].palette,J=ie=>{const xe=ie.split("-"),ge=xe[1],we=xe[2];return I(ie,$[ge][we])};if(j==="light"?(Qe($.common,"background","#fff"),Qe($.common,"onBackground","#000")):(Qe($.common,"background","#000"),Qe($.common,"onBackground","#fff")),GX($,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),j==="light"){Qe($.Alert,"errorColor",kn($.error.light,.6)),Qe($.Alert,"infoColor",kn($.info.light,.6)),Qe($.Alert,"successColor",kn($.success.light,.6)),Qe($.Alert,"warningColor",kn($.warning.light,.6)),Qe($.Alert,"errorFilledBg",J("palette-error-main")),Qe($.Alert,"infoFilledBg",J("palette-info-main")),Qe($.Alert,"successFilledBg",J("palette-success-main")),Qe($.Alert,"warningFilledBg",J("palette-warning-main")),Qe($.Alert,"errorFilledColor",Gs(()=>F.getContrastText($.error.main))),Qe($.Alert,"infoFilledColor",Gs(()=>F.getContrastText($.info.main))),Qe($.Alert,"successFilledColor",Gs(()=>F.getContrastText($.success.main))),Qe($.Alert,"warningFilledColor",Gs(()=>F.getContrastText($.warning.main))),Qe($.Alert,"errorStandardBg",Tn($.error.light,.9)),Qe($.Alert,"infoStandardBg",Tn($.info.light,.9)),Qe($.Alert,"successStandardBg",Tn($.success.light,.9)),Qe($.Alert,"warningStandardBg",Tn($.warning.light,.9)),Qe($.Alert,"errorIconColor",J("palette-error-main")),Qe($.Alert,"infoIconColor",J("palette-info-main")),Qe($.Alert,"successIconColor",J("palette-success-main")),Qe($.Alert,"warningIconColor",J("palette-warning-main")),Qe($.AppBar,"defaultBg",J("palette-grey-100")),Qe($.Avatar,"defaultBg",J("palette-grey-400")),Qe($.Button,"inheritContainedBg",J("palette-grey-300")),Qe($.Button,"inheritContainedHoverBg",J("palette-grey-A100")),Qe($.Chip,"defaultBorder",J("palette-grey-400")),Qe($.Chip,"defaultAvatarColor",J("palette-grey-700")),Qe($.Chip,"defaultIconColor",J("palette-grey-700")),Qe($.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Qe($.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Qe($.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Qe($.LinearProgress,"primaryBg",Tn($.primary.main,.62)),Qe($.LinearProgress,"secondaryBg",Tn($.secondary.main,.62)),Qe($.LinearProgress,"errorBg",Tn($.error.main,.62)),Qe($.LinearProgress,"infoBg",Tn($.info.main,.62)),Qe($.LinearProgress,"successBg",Tn($.success.main,.62)),Qe($.LinearProgress,"warningBg",Tn($.warning.main,.62)),Qe($.Skeleton,"bg",`rgba(${J("palette-text-primaryChannel")} / 0.11)`),Qe($.Slider,"primaryTrack",Tn($.primary.main,.62)),Qe($.Slider,"secondaryTrack",Tn($.secondary.main,.62)),Qe($.Slider,"errorTrack",Tn($.error.main,.62)),Qe($.Slider,"infoTrack",Tn($.info.main,.62)),Qe($.Slider,"successTrack",Tn($.success.main,.62)),Qe($.Slider,"warningTrack",Tn($.warning.main,.62));const ie=s0($.background.default,.8);Qe($.SnackbarContent,"bg",ie),Qe($.SnackbarContent,"color",Gs(()=>F.getContrastText(ie))),Qe($.SpeedDialAction,"fabHoverBg",s0($.background.paper,.15)),Qe($.StepConnector,"border",J("palette-grey-400")),Qe($.StepContent,"border",J("palette-grey-400")),Qe($.Switch,"defaultColor",J("palette-common-white")),Qe($.Switch,"defaultDisabledColor",J("palette-grey-100")),Qe($.Switch,"primaryDisabledColor",Tn($.primary.main,.62)),Qe($.Switch,"secondaryDisabledColor",Tn($.secondary.main,.62)),Qe($.Switch,"errorDisabledColor",Tn($.error.main,.62)),Qe($.Switch,"infoDisabledColor",Tn($.info.main,.62)),Qe($.Switch,"successDisabledColor",Tn($.success.main,.62)),Qe($.Switch,"warningDisabledColor",Tn($.warning.main,.62)),Qe($.TableCell,"border",Tn(a0($.divider,1),.88)),Qe($.Tooltip,"bg",a0($.grey[700],.92))}else{Qe($.Alert,"errorColor",Tn($.error.light,.6)),Qe($.Alert,"infoColor",Tn($.info.light,.6)),Qe($.Alert,"successColor",Tn($.success.light,.6)),Qe($.Alert,"warningColor",Tn($.warning.light,.6)),Qe($.Alert,"errorFilledBg",J("palette-error-dark")),Qe($.Alert,"infoFilledBg",J("palette-info-dark")),Qe($.Alert,"successFilledBg",J("palette-success-dark")),Qe($.Alert,"warningFilledBg",J("palette-warning-dark")),Qe($.Alert,"errorFilledColor",Gs(()=>Z.getContrastText($.error.dark))),Qe($.Alert,"infoFilledColor",Gs(()=>Z.getContrastText($.info.dark))),Qe($.Alert,"successFilledColor",Gs(()=>Z.getContrastText($.success.dark))),Qe($.Alert,"warningFilledColor",Gs(()=>Z.getContrastText($.warning.dark))),Qe($.Alert,"errorStandardBg",kn($.error.light,.9)),Qe($.Alert,"infoStandardBg",kn($.info.light,.9)),Qe($.Alert,"successStandardBg",kn($.success.light,.9)),Qe($.Alert,"warningStandardBg",kn($.warning.light,.9)),Qe($.Alert,"errorIconColor",J("palette-error-main")),Qe($.Alert,"infoIconColor",J("palette-info-main")),Qe($.Alert,"successIconColor",J("palette-success-main")),Qe($.Alert,"warningIconColor",J("palette-warning-main")),Qe($.AppBar,"defaultBg",J("palette-grey-900")),Qe($.AppBar,"darkBg",J("palette-background-paper")),Qe($.AppBar,"darkColor",J("palette-text-primary")),Qe($.Avatar,"defaultBg",J("palette-grey-600")),Qe($.Button,"inheritContainedBg",J("palette-grey-800")),Qe($.Button,"inheritContainedHoverBg",J("palette-grey-700")),Qe($.Chip,"defaultBorder",J("palette-grey-700")),Qe($.Chip,"defaultAvatarColor",J("palette-grey-300")),Qe($.Chip,"defaultIconColor",J("palette-grey-300")),Qe($.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Qe($.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Qe($.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Qe($.LinearProgress,"primaryBg",kn($.primary.main,.5)),Qe($.LinearProgress,"secondaryBg",kn($.secondary.main,.5)),Qe($.LinearProgress,"errorBg",kn($.error.main,.5)),Qe($.LinearProgress,"infoBg",kn($.info.main,.5)),Qe($.LinearProgress,"successBg",kn($.success.main,.5)),Qe($.LinearProgress,"warningBg",kn($.warning.main,.5)),Qe($.Skeleton,"bg",`rgba(${J("palette-text-primaryChannel")} / 0.13)`),Qe($.Slider,"primaryTrack",kn($.primary.main,.5)),Qe($.Slider,"secondaryTrack",kn($.secondary.main,.5)),Qe($.Slider,"errorTrack",kn($.error.main,.5)),Qe($.Slider,"infoTrack",kn($.info.main,.5)),Qe($.Slider,"successTrack",kn($.success.main,.5)),Qe($.Slider,"warningTrack",kn($.warning.main,.5));const ie=s0($.background.default,.98);Qe($.SnackbarContent,"bg",ie),Qe($.SnackbarContent,"color",Gs(()=>Z.getContrastText(ie))),Qe($.SpeedDialAction,"fabHoverBg",s0($.background.paper,.15)),Qe($.StepConnector,"border",J("palette-grey-600")),Qe($.StepContent,"border",J("palette-grey-600")),Qe($.Switch,"defaultColor",J("palette-grey-300")),Qe($.Switch,"defaultDisabledColor",J("palette-grey-600")),Qe($.Switch,"primaryDisabledColor",kn($.primary.main,.55)),Qe($.Switch,"secondaryDisabledColor",kn($.secondary.main,.55)),Qe($.Switch,"errorDisabledColor",kn($.error.main,.55)),Qe($.Switch,"infoDisabledColor",kn($.info.main,.55)),Qe($.Switch,"successDisabledColor",kn($.success.main,.55)),Qe($.Switch,"warningDisabledColor",kn($.warning.main,.55)),Qe($.TableCell,"border",kn(a0($.divider,1),.68)),Qe($.Tooltip,"bg",a0($.grey[700],.92))}Rl($.background,"default"),Rl($.background,"paper"),Rl($.common,"background"),Rl($.common,"onBackground"),Rl($,"divider"),Object.keys($).forEach(ie=>{const xe=$[ie];xe&&typeof xe=="object"&&(xe.main&&Qe($[ie],"mainChannel",Xh(Rm(xe.main))),xe.light&&Qe($[ie],"lightChannel",Xh(Rm(xe.light))),xe.dark&&Qe($[ie],"darkChannel",Xh(Rm(xe.dark))),xe.contrastText&&Qe($[ie],"contrastTextChannel",Xh(Rm(xe.contrastText))),ie==="text"&&(Rl($[ie],"primary"),Rl($[ie],"secondary")),ie==="action"&&(xe.active&&Rl($[ie],"active"),xe.selected&&Rl($[ie],"selected")))})}),z=t.reduce((j,$)=>Si(j,$),z);const O={prefix:y,shouldSkipGeneratingVar:S},{vars:L,generateCssVars:te}=_L(z,O);return z.vars=L,z.generateCssVars=te,z.shouldSkipGeneratingVar=S,z.unstable_sxConfig=K({},bd,T==null?void 0:T.unstable_sxConfig),z.unstable_sx=function($){return ac({sx:$,theme:this})},z}const qX=e=>[...[...Array(24)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r+1}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],vm={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},ZX=C5(),{CssVarsProvider:KX,useColorScheme:Rde,getInitColorSchemeScript:Dde}=yL({themeId:Tb,theme:ZX,attribute:vm.attribute,colorSchemeStorageKey:vm.colorSchemeStorageKey,modeStorageKey:vm.modeStorageKey,defaultColorScheme:{light:vm.defaultLightColorScheme,dark:vm.defaultDarkColorScheme},resolveTheme:e=>{const t=K({},e,{typography:x5(e.palette,e.typography)});return t.unstable_sx=function(n){return ac({sx:n,theme:this})},t},excludeVariablesFromRoot:qX});function XX(e){return e}function YX(e){return e.length===0?XX:e.length===1?e[0]:function(r){return e.reduce((n,i)=>i(n),r)}}function k5(e){const t={subscribe(r){let n=null,i=!1,l=!1,h=!1;function s(){if(n===null){h=!0;return}l||(l=!0,typeof n=="function"?n():n&&n.unsubscribe())}return n=e({next(m){var y;i||(y=r.next)==null||y.call(r,m)},error(m){var y;i||(i=!0,(y=r.error)==null||y.call(r,m),s())},complete(){var m;i||(i=!0,(m=r.complete)==null||m.call(r),s())}}),h&&s(),{unsubscribe:s}},pipe(...r){return YX(r)(t)}};return t}function JX(e){return t=>{let r=0,n=null;const i=[];function l(){n||(n=t.subscribe({next(s){var m;for(const y of i)(m=y.next)==null||m.call(y,s)},error(s){var m;for(const y of i)(m=y.error)==null||m.call(y,s)},complete(){var s;for(const m of i)(s=m.complete)==null||s.call(m)}}))}function h(){if(r===0&&n){const s=n;n=null,s.unsubscribe()}}return{subscribe(s){return r++,i.push(s),l(),{unsubscribe(){r--,h();const m=i.findIndex(y=>y===s);m>-1&&i.splice(m,1)}}}}}}class PT extends Error{constructor(t){super(t),this.name="ObservableAbortError",Object.setPrototypeOf(this,PT.prototype)}}function QX(e){let t;return{promise:new Promise((n,i)=>{let l=!1;function h(){l||(l=!0,i(new PT("This operation was aborted.")),s.unsubscribe())}const s=e.subscribe({next(m){l=!0,n(m),h()},error(m){l=!0,i(m),h()},complete(){l=!0,h()}});t=h}),abort:t}}function eY(e){return k5(t=>{function r(i=0,l=e.op){const h=e.links[i];if(!h)throw new Error("No more links to execute - did you forget to add an ending link?");return h({op:l,next(m){return r(i+1,m)}})}return r().subscribe(t)})}function T5(e){const t=Object.create(null);for(const r in e){const n=e[r];t[n]=r}return t}const E5={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099};T5(E5);T5(E5);const I5=()=>{};function P5(e,t){return new Proxy(I5,{get(n,i){if(!(typeof i!="string"||i==="then"))return P5(e,[...t,i])},apply(n,i,l){const h=t[t.length-1]==="apply";return e({args:h?l.length>=2?l[1]:[]:l,path:h?t.slice(0,-1):t})}})}const tY=e=>P5(e,[]),rY=e=>new Proxy(I5,{get(t,r){if(!(typeof r!="string"||r==="then"))return e(r)}});function nY(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}class iY extends Error{}function oY(e){if(e instanceof Error)return e;const t=typeof e;if(!(t==="undefined"||t==="function"||e===null)){if(t!=="object")return new Error(String(e));if(nY(e)){const r=new iY;for(const n in e)r[n]=e[n];return r}}}function L_(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}function aY(e,t){if("error"in e){const n=t.transformer.deserialize(e.error);return{ok:!1,error:{...e,error:n}}}return{ok:!0,result:{...e.result,...(!e.result.type||e.result.type==="data")&&{type:"data",data:t.transformer.deserialize(e.result.data)}}}}class Bw extends Error{constructor(){super("Unable to transform response from server")}}function sY(e,t){let r;try{r=aY(e,t)}catch{throw new Bw}if(!r.ok&&(!L_(r.error.error)||typeof r.error.error.code!="number"))throw new Bw;if(r.ok&&!L_(r.result))throw new Bw;return r}function lY(e){return e instanceof Ul||e instanceof Error&&e.name==="TRPCClientError"}function cY(e){return L_(e)&&L_(e.error)&&typeof e.error.code=="number"&&typeof e.error.message=="string"}class Ul extends Error{static from(t,r={}){const n=t;return lY(n)?(r.meta&&(n.meta={...n.meta,...r.meta}),n):cY(n)?new Ul(n.error.message,{...r,result:n}):n instanceof Error?new Ul(n.message,{...r,cause:oY(n)}):new Ul("Unknown error",{...r,cause:n})}constructor(t,r){var i,l;const n=r==null?void 0:r.cause;super(t,{cause:n}),this.meta=r==null?void 0:r.meta,this.cause=n,this.shape=(i=r==null?void 0:r.result)==null?void 0:i.error,this.data=(l=r==null?void 0:r.result)==null?void 0:l.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,Ul.prototype)}}/* istanbul ignore next -- @preserve */const uY=e=>e===0?0:Math.min(1e3*2**e,3e4);function dY(e){const{url:t,WebSocket:r=WebSocket,retryDelayMs:n=uY,onOpen:i,onClose:l}=e;/* istanbul ignore next -- @preserve */if(!r)throw new Error("No WebSocket implementation found - you probably don't want to use this on the server, but if you do you need to pass a `WebSocket`-ponyfill");let h=[];const s=Object.create(null);let m=0,y=null,S=null,T=te(),I="connecting";function D(){I!=="open"||y||(y=setTimeout(()=>{y=null,h.length===1?T.send(JSON.stringify(h.pop())):T.send(JSON.stringify(h)),h=[]}))}function F(){if(S!==null||I==="closed")return;const $=n(m++);Z($)}function V(){I="connecting";const $=T;T=te(),z($)}function Z($){S||(I="connecting",S=setTimeout(V,$))}function z($){Object.values(s).some(ie=>ie.ws===$)||$.close()}function O(){Object.values(s).forEach($=>{$.type==="subscription"&&$.callbacks.complete()})}function L($){h.some(J=>J.id===$.op.id)||j($.op,$.callbacks)}function te(){const $=typeof t=="function"?t():t,J=new r($);clearTimeout(S),S=null,J.addEventListener("open",()=>{/* istanbul ignore next -- @preserve */J===T&&(m=0,I="open",i==null||i(),D())}),J.addEventListener("error",()=>{J===T&&F()});const ie=ge=>{if(ge.method==="reconnect"&&J===T){I==="open"&&(l==null||l()),V();for(const we of Object.values(s))we.type==="subscription"&&L(we)}},xe=ge=>{var Te,Pe;const we=ge.id!==null&&s[ge.id];if(we){if((Pe=(Te=we.callbacks).next)==null||Pe.call(Te,ge),we.ws!==T&&J===T){const We=we.ws;we.ws=T,z(We)}"result"in ge&&ge.result.type==="stopped"&&J===T&&we.callbacks.complete()}};return J.addEventListener("message",({data:ge})=>{const we=JSON.parse(ge);"method"in we?ie(we):xe(we),(J!==T||I==="closed")&&z(J)}),J.addEventListener("close",({code:ge})=>{var we,Te,Pe,We;I==="open"&&(l==null||l({code:ge})),T===J&&F();for(const[De,Se]of Object.entries(s))if(Se.ws===J){if(I==="closed"){delete s[De],(Te=(we=Se.callbacks).complete)==null||Te.call(we);continue}Se.type==="subscription"?L(Se):(delete s[De],(We=(Pe=Se.callbacks).error)==null||We.call(Pe,Ul.from(new AT("WebSocket closed prematurely"))))}}),J}function j($,J){const{type:ie,input:xe,path:ge,id:we}=$,Te={id:we,method:ie,params:{input:xe,path:ge}};return s[we]={ws:T,type:ie,callbacks:J,op:$},h.push(Te),D(),()=>{var We,De;const Pe=(We=s[we])==null?void 0:We.callbacks;delete s[we],h=h.filter(Se=>Se.id!==we),(De=Pe==null?void 0:Pe.complete)==null||De.call(Pe),T.readyState===r.OPEN&&$.type==="subscription"&&(h.push({id:we,method:"subscription.stop"}),D())}}return{close:()=>{I="closed",l==null||l(),O(),z(T),clearTimeout(S),S=null},request:j,getConnection(){return T}}}class AT extends Error{constructor(t){super(t),this.name="TRPCWebSocketClosedError",Object.setPrototypeOf(this,AT.prototype)}}function hY(e){return t=>{const{client:r}=e;return({op:n})=>k5(i=>{const{type:l,path:h,id:s,context:m}=n,y=t.transformer.serialize(n.input),S=r.request({type:l,path:h,input:y,id:s,context:m},{error(T){i.error(T),S()},complete(){i.complete()},next(T){const I=sY(T,t);if(!I.ok){i.error(Ul.from(I.error));return}i.next({result:I.result}),n.type!=="subscription"&&(S(),i.complete())}});return()=>{S()}})}}class fY{$request({type:t,input:r,path:n,context:i={}}){return eY({links:this.links,op:{id:++this.requestId,type:t,path:n,input:r,context:i}}).pipe(JX())}requestAsPromise(t){const r=this.$request(t),{promise:n,abort:i}=QX(r);return new Promise((h,s)=>{var m;(m=t.signal)==null||m.addEventListener("abort",i),n.then(y=>{h(y.result.data)}).catch(y=>{s(Ul.from(y))})})}query(t,r,n){return this.requestAsPromise({type:"query",path:t,input:r,context:n==null?void 0:n.context,signal:n==null?void 0:n.signal})}mutation(t,r,n){return this.requestAsPromise({type:"mutation",path:t,input:r,context:n==null?void 0:n.context,signal:n==null?void 0:n.signal})}subscription(t,r,n){return this.$request({type:"subscription",path:t,input:r,context:n==null?void 0:n.context}).subscribe({next(l){var h,s,m;l.result.type==="started"?(h=n.onStarted)==null||h.call(n):l.result.type==="stopped"?(s=n.onStopped)==null||s.call(n):(m=n.onData)==null||m.call(n,l.result.data)},error(l){var h;(h=n.onError)==null||h.call(n,l)},complete(){var l;(l=n.onComplete)==null||l.call(n)}})}constructor(t){this.requestId=0;const r=(()=>{const n=t.transformer;return n?"input"in n?t.transformer:{input:n,output:n}:{input:{serialize:i=>i,deserialize:i=>i},output:{serialize:i=>i,deserialize:i=>i}}})();this.runtime={transformer:{serialize:n=>r.input.serialize(n),deserialize:n=>r.output.deserialize(n)},combinedTransformer:r},this.links=t.links.map(n=>n(this.runtime))}}const pY={query:"query",mutate:"mutation",subscribe:"subscription"},mY=e=>pY[e];function gY(e){return rY(t=>e.hasOwnProperty(t)?e[t]:t==="__untypedClient"?e:tY(({path:r,args:n})=>{const i=[t,...r],l=mY(i.pop()),h=i.join(".");return e[l](h,...n)}))}function vY(e){const t=new fY(e);return gY(t)}function A5(e){return jV(e)}function yY(e){return Kg("MuiSvgIcon",e)}Rx("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const _Y=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],xY=e=>{const{color:t,fontSize:r,classes:n}=e,i={root:["root",t!=="inherit"&&`color${xt(t)}`,`fontSize${xt(r)}`]};return Nr(i,yY,n)},bY=Eb("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${xt(r.color)}`],t[`fontSize${xt(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,n,i,l,h,s,m,y,S,T,I,D,F;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(n=r.create)==null?void 0:n.call(r,"fill",{duration:(i=e.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((l=e.typography)==null||(h=l.pxToRem)==null?void 0:h.call(l,20))||"1.25rem",medium:((s=e.typography)==null||(m=s.pxToRem)==null?void 0:m.call(s,24))||"1.5rem",large:((y=e.typography)==null||(S=y.pxToRem)==null?void 0:S.call(y,35))||"2.1875rem"}[t.fontSize],color:(T=(I=(e.vars||e).palette)==null||(I=I[t.color])==null?void 0:I.main)!=null?T:{action:(D=(e.vars||e).palette)==null||(D=D.action)==null?void 0:D.active,disabled:(F=(e.vars||e).palette)==null||(F=F.action)==null?void 0:F.disabled,inherit:void 0}[t.color]}}),u2=R.forwardRef(function(t,r){const n=A5({props:t,name:"MuiSvgIcon"}),{children:i,className:l,color:h="inherit",component:s="svg",fontSize:m="medium",htmlColor:y,inheritViewBox:S=!1,titleAccess:T,viewBox:I="0 0 24 24"}=n,D=Ht(n,_Y),F=R.isValidElement(i)&&i.type==="svg",V=K({},n,{color:h,component:s,fontSize:m,instanceFontSize:t.fontSize,inheritViewBox:S,viewBox:I,hasSvgAsChild:F}),Z={};S||(Z.viewBox=I);const z=xY(V);return H.jsxs(bY,K({as:s,className:Gn(z.root,l),focusable:"false",color:y,"aria-hidden":T?void 0:!0,role:T?"img":void 0,ref:r},Z,D,F&&i.props,{ownerState:V,children:[F?i.props.children:i,T?H.jsx("title",{children:T}):null]}))});u2.muiName="SvgIcon";function _i(e,t){function r(n,i){return H.jsx(u2,K({"data-testid":`${t}Icon`,ref:i},n,{children:e}))}return r.muiName=u2.muiName,R.memo(R.forwardRef(r))}const wY=_i(H.jsx("path",{d:"m9.78 11.16-1.42 1.42c-.68-.69-1.34-1.58-1.79-2.94l1.94-.49c.32.89.77 1.5 1.27 2.01M11 6 7 2 3 6h3.02c.02.81.08 1.54.19 2.17l1.94-.49C8.08 7.2 8.03 6.63 8.02 6zm10 0-4-4-4 4h2.99c-.1 3.68-1.28 4.75-2.54 5.88-.5.44-1.01.92-1.45 1.55-.34-.49-.73-.88-1.13-1.24L9.46 13.6c.93.85 1.54 1.54 1.54 3.4v5h2v-5c0-2.02.71-2.66 1.79-3.63 1.38-1.24 3.08-2.78 3.2-7.37z"}),"AltRoute"),SY=_i(H.jsx("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNew"),CY=_i(H.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness6"),kY=_i(H.jsx("path",{d:"M10.85 12.65h2.3L12 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM14.3 16l-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9z"}),"BrightnessAuto"),TY=_i(H.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"BrightnessHigh"),EY=_i(H.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6"}),"BrightnessLow"),IY=_i(H.jsx("path",{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4"}),"Build"),PY=_i(H.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),AY=_i(H.jsx("path",{d:"m21.41 10.59-7.99-8c-.78-.78-2.05-.78-2.83 0l-8.01 8c-.78.78-.78 2.05 0 2.83l8.01 8c.78.78 2.05.78 2.83 0l7.99-8c.79-.79.79-2.05 0-2.83M13.5 14.5V12H10v3H8v-4c0-.55.45-1 1-1h4.5V7.5L17 11z"}),"Directions"),R5=_i(H.jsx("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEvents"),RY=_i(H.jsx("path",{d:"M7 13c1.66 0 3-1.34 3-3S8.66 7 7 7s-3 1.34-3 3 1.34 3 3 3m12-6h-8v7H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4"}),"Hotel"),DY=_i(H.jsx("path",{d:"m16 5-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2"}),"IosShare"),MY=_i(H.jsx("path",{d:"M19 5v14H5V5zm1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt"),zY=_i(H.jsx("path",{d:"m19.77 7.23.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-.69-.28-1.32-.73-1.77M12 10H6V5h6zm6 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"LocalGasStation"),LY=_i(H.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"LocalShipping"),D5=_i(H.jsx("path",{d:"M15 11V5l-3-3-3 3v2H3v14h18V11zm-8 8H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm6 8h-2v-2h2zm0-4h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm6 12h-2v-2h2zm0-4h-2v-2h2z"}),"LocationCity"),OY=_i(H.jsx("path",{d:"M12 2 4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"}),"Navigation"),$Y=_i(H.jsx("path",{d:"m12 7.27 4.28 10.43-3.47-1.53-.81-.36-.81.36-3.47 1.53zM12 2 4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"}),"NavigationOutlined"),BY=_i([H.jsx("circle",{cx:"10",cy:"8",r:"4"},"0"),H.jsx("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99m9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"PersonSearch"),FY=_i(H.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),NY=_i(H.jsx("path",{d:"m20.55 5.22-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.15.55L3.46 5.22C3.17 5.57 3 6.01 3 6.5V19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.49-.17-.93-.45-1.28M12 9.5l5.5 5.5H14v2h-4v-2H6.5zM5.12 5l.82-1h12l.93 1z"}),"Unarchive");function d2(e,t){return d2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},d2(e,t)}function jY(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,d2(e,t)}const bR={disabled:!1},M5=ys.createContext(null);var VY=function(t){return t.scrollTop},Dm="unmounted",qu="exited",Zu="entering",zh="entered",h2="exiting",Ds=function(e){jY(t,e);function t(n,i){var l;l=e.call(this,n,i)||this;var h=i,s=h&&!h.isMounting?n.enter:n.appear,m;return l.appearStatus=null,n.in?s?(m=qu,l.appearStatus=Zu):m=zh:n.unmountOnExit||n.mountOnEnter?m=Dm:m=qu,l.state={status:m},l.nextCallback=null,l}t.getDerivedStateFromProps=function(i,l){var h=i.in;return h&&l.status===Dm?{status:qu}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var l=null;if(i!==this.props){var h=this.state.status;this.props.in?h!==Zu&&h!==zh&&(l=Zu):(h===Zu||h===zh)&&(l=h2)}this.updateStatus(!1,l)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,l,h,s;return l=h=s=i,i!=null&&typeof i!="number"&&(l=i.exit,h=i.enter,s=i.appear!==void 0?i.appear:h),{exit:l,enter:h,appear:s}},r.updateStatus=function(i,l){if(i===void 0&&(i=!1),l!==null)if(this.cancelNextCallback(),l===Zu){if(this.props.unmountOnExit||this.props.mountOnEnter){var h=this.props.nodeRef?this.props.nodeRef.current:r0.findDOMNode(this);h&&VY(h)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===qu&&this.setState({status:Dm})},r.performEnter=function(i){var l=this,h=this.props.enter,s=this.context?this.context.isMounting:i,m=this.props.nodeRef?[s]:[r0.findDOMNode(this),s],y=m[0],S=m[1],T=this.getTimeouts(),I=s?T.appear:T.enter;if(!i&&!h||bR.disabled){this.safeSetState({status:zh},function(){l.props.onEntered(y)});return}this.props.onEnter(y,S),this.safeSetState({status:Zu},function(){l.props.onEntering(y,S),l.onTransitionEnd(I,function(){l.safeSetState({status:zh},function(){l.props.onEntered(y,S)})})})},r.performExit=function(){var i=this,l=this.props.exit,h=this.getTimeouts(),s=this.props.nodeRef?void 0:r0.findDOMNode(this);if(!l||bR.disabled){this.safeSetState({status:qu},function(){i.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:h2},function(){i.props.onExiting(s),i.onTransitionEnd(h.exit,function(){i.safeSetState({status:qu},function(){i.props.onExited(s)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,l){l=this.setNextCallback(l),this.setState(i,l)},r.setNextCallback=function(i){var l=this,h=!0;return this.nextCallback=function(s){h&&(h=!1,l.nextCallback=null,i(s))},this.nextCallback.cancel=function(){h=!1},this.nextCallback},r.onTransitionEnd=function(i,l){this.setNextCallback(l);var h=this.props.nodeRef?this.props.nodeRef.current:r0.findDOMNode(this),s=i==null&&!this.props.addEndListener;if(!h||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var m=this.props.nodeRef?[this.nextCallback]:[h,this.nextCallback],y=m[0],S=m[1];this.props.addEndListener(y,S)}i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var i=this.state.status;if(i===Dm)return null;var l=this.props,h=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var s=Ht(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ys.createElement(M5.Provider,{value:null},typeof h=="function"?h(i,s):ys.cloneElement(ys.Children.only(h),s))},t}(ys.Component);Ds.contextType=M5;Ds.propTypes={};function Eh(){}Ds.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Eh,onEntering:Eh,onEntered:Eh,onExit:Eh,onExiting:Eh,onExited:Eh};Ds.UNMOUNTED=Dm;Ds.EXITED=qu;Ds.ENTERING=Zu;Ds.ENTERED=zh;Ds.EXITING=h2;const z5=e=>e.scrollTop;function Af(e,t){var r,n;const{timeout:i,easing:l,style:h={}}=e;return{duration:(r=h.transitionDuration)!=null?r:typeof i=="number"?i:i[t.mode]||0,easing:(n=h.transitionTimingFunction)!=null?n:typeof l=="object"?l[t.mode]:l,delay:h.transitionDelay}}function UY(e){return Kg("MuiCollapse",e)}Rx("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const HY=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],GY=e=>{const{orientation:t,classes:r}=e,n={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return Nr(n,UY,r)},WY=Eb("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.state==="entered"&&t.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>K({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&K({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),qY=Eb("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>K({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),ZY=Eb("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>K({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),RT=R.forwardRef(function(t,r){const n=A5({props:t,name:"MuiCollapse"}),{addEndListener:i,children:l,className:h,collapsedSize:s="0px",component:m,easing:y,in:S,onEnter:T,onEntered:I,onEntering:D,onExit:F,onExited:V,onExiting:Z,orientation:z="vertical",style:O,timeout:L=b5.standard,TransitionComponent:te=Ds}=n,j=Ht(n,HY),$=K({},n,{orientation:z,collapsedSize:s}),J=GY($),ie=IT(),xe=Tm(),ge=R.useRef(null),we=R.useRef(),Te=typeof s=="number"?`${s}px`:s,Pe=z==="horizontal",We=Pe?"width":"height",De=R.useRef(null),Se=an(r,De),Fe=Ct=>it=>{if(Ct){const Ze=De.current;it===void 0?Ct(Ze):Ct(Ze,it)}},Ce=()=>ge.current?ge.current[Pe?"clientWidth":"clientHeight"]:0,Ne=Fe((Ct,it)=>{ge.current&&Pe&&(ge.current.style.position="absolute"),Ct.style[We]=Te,T&&T(Ct,it)}),Ye=Fe((Ct,it)=>{const Ze=Ce();ge.current&&Pe&&(ge.current.style.position="");const{duration:rt,easing:pt}=Af({style:O,timeout:L,easing:y},{mode:"enter"});if(L==="auto"){const sr=ie.transitions.getAutoHeightDuration(Ze);Ct.style.transitionDuration=`${sr}ms`,we.current=sr}else Ct.style.transitionDuration=typeof rt=="string"?rt:`${rt}ms`;Ct.style[We]=`${Ze}px`,Ct.style.transitionTimingFunction=pt,D&&D(Ct,it)}),at=Fe((Ct,it)=>{Ct.style[We]="auto",I&&I(Ct,it)}),st=Fe(Ct=>{Ct.style[We]=`${Ce()}px`,F&&F(Ct)}),Dt=Fe(V),St=Fe(Ct=>{const it=Ce(),{duration:Ze,easing:rt}=Af({style:O,timeout:L,easing:y},{mode:"exit"});if(L==="auto"){const pt=ie.transitions.getAutoHeightDuration(it);Ct.style.transitionDuration=`${pt}ms`,we.current=pt}else Ct.style.transitionDuration=typeof Ze=="string"?Ze:`${Ze}ms`;Ct.style[We]=Te,Ct.style.transitionTimingFunction=rt,Z&&Z(Ct)}),$t=Ct=>{L==="auto"&&xe.start(we.current||0,Ct),i&&i(De.current,Ct)};return H.jsx(te,K({in:S,onEnter:Ne,onEntered:at,onEntering:Ye,onExit:st,onExited:Dt,onExiting:St,addEndListener:$t,nodeRef:De,timeout:L==="auto"?null:L},j,{children:(Ct,it)=>H.jsx(WY,K({as:m,className:Gn(J.root,h,{entered:J.entered,exited:!S&&Te==="0px"&&J.hidden}[Ct]),style:K({[Pe?"minWidth":"minHeight"]:Te},O),ref:Se},it,{ownerState:K({},$,{state:Ct}),children:H.jsx(qY,{ownerState:K({},$,{state:Ct}),className:J.wrapper,ref:ge,children:H.jsx(ZY,{ownerState:K({},$,{state:Ct}),className:J.wrapperInner,children:l})})}))}))});RT.muiSupportAuto=!0;const KY=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function XY(e,t,r){const n=t.getBoundingClientRect(),i=r&&r.getBoundingClientRect(),l=Xg(t);let h;if(t.fakeTransform)h=t.fakeTransform;else{const y=l.getComputedStyle(t);h=y.getPropertyValue("-webkit-transform")||y.getPropertyValue("transform")}let s=0,m=0;if(h&&h!=="none"&&typeof h=="string"){const y=h.split("(")[1].split(")")[0].split(",");s=parseInt(y[4],10),m=parseInt(y[5],10)}return e==="left"?i?`translateX(${i.right+s-n.left}px)`:`translateX(${l.innerWidth+s-n.left}px)`:e==="right"?i?`translateX(-${n.right-i.left-s}px)`:`translateX(-${n.left+n.width-s}px)`:e==="up"?i?`translateY(${i.bottom+m-n.top}px)`:`translateY(${l.innerHeight+m-n.top}px)`:i?`translateY(-${n.top-i.top+n.height-m}px)`:`translateY(-${n.top+n.height-m}px)`}function YY(e){return typeof e=="function"?e():e}function c0(e,t,r){const n=YY(r),i=XY(e,t,n);i&&(t.style.webkitTransform=i,t.style.transform=i)}const L5=R.forwardRef(function(t,r){const n=IT(),i={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},l={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:h,appear:s=!0,children:m,container:y,direction:S="down",easing:T=i,in:I,onEnter:D,onEntered:F,onEntering:V,onExit:Z,onExited:z,onExiting:O,style:L,timeout:te=l,TransitionComponent:j=Ds}=t,$=Ht(t,KY),J=R.useRef(null),ie=an(Jg(m),J,r),xe=Ce=>Ne=>{Ce&&(Ne===void 0?Ce(J.current):Ce(J.current,Ne))},ge=xe((Ce,Ne)=>{c0(S,Ce,y),z5(Ce),D&&D(Ce,Ne)}),we=xe((Ce,Ne)=>{const Ye=Af({timeout:te,style:L,easing:T},{mode:"enter"});Ce.style.webkitTransition=n.transitions.create("-webkit-transform",K({},Ye)),Ce.style.transition=n.transitions.create("transform",K({},Ye)),Ce.style.webkitTransform="none",Ce.style.transform="none",V&&V(Ce,Ne)}),Te=xe(F),Pe=xe(O),We=xe(Ce=>{const Ne=Af({timeout:te,style:L,easing:T},{mode:"exit"});Ce.style.webkitTransition=n.transitions.create("-webkit-transform",Ne),Ce.style.transition=n.transitions.create("transform",Ne),c0(S,Ce,y),Z&&Z(Ce)}),De=xe(Ce=>{Ce.style.webkitTransition="",Ce.style.transition="",z&&z(Ce)}),Se=Ce=>{h&&h(J.current,Ce)},Fe=R.useCallback(()=>{J.current&&c0(S,J.current,y)},[S,y]);return R.useEffect(()=>{if(I||S==="down"||S==="right")return;const Ce=mV(()=>{J.current&&c0(S,J.current,y)}),Ne=Xg(J.current);return Ne.addEventListener("resize",Ce),()=>{Ce.clear(),Ne.removeEventListener("resize",Ce)}},[S,I,y]),R.useEffect(()=>{I||Fe()},[I,Fe]),H.jsx(j,K({nodeRef:J,onEnter:ge,onEntered:Te,onEntering:we,onExit:We,onExited:De,onExiting:Pe,addEndListener:Se,appear:s,in:I,timeout:te},$,{children:(Ce,Ne)=>R.cloneElement(m,K({ref:ie,style:K({visibility:Ce==="exited"&&!I?"hidden":void 0},L,m.props.style)},Ne))}))}),JY=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],QY={entering:{transform:"none"},entered:{transform:"none"}},eJ=R.forwardRef(function(t,r){const n=IT(),i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:l,appear:h=!0,children:s,easing:m,in:y,onEnter:S,onEntered:T,onEntering:I,onExit:D,onExited:F,onExiting:V,style:Z,timeout:z=i,TransitionComponent:O=Ds}=t,L=Ht(t,JY),te=R.useRef(null),j=an(te,Jg(s),r),$=We=>De=>{if(We){const Se=te.current;De===void 0?We(Se):We(Se,De)}},J=$(I),ie=$((We,De)=>{z5(We);const Se=Af({style:Z,timeout:z,easing:m},{mode:"enter"});We.style.webkitTransition=n.transitions.create("transform",Se),We.style.transition=n.transitions.create("transform",Se),S&&S(We,De)}),xe=$(T),ge=$(V),we=$(We=>{const De=Af({style:Z,timeout:z,easing:m},{mode:"exit"});We.style.webkitTransition=n.transitions.create("transform",De),We.style.transition=n.transitions.create("transform",De),D&&D(We)}),Te=$(F),Pe=We=>{l&&l(te.current,We)};return H.jsx(O,K({appear:h,in:y,nodeRef:te,onEnter:ie,onEntered:xe,onEntering:J,onExit:we,onExited:Te,onExiting:ge,addEndListener:Pe,timeout:z},L,{children:(We,De)=>R.cloneElement(s,K({style:K({transform:"scale(0)",visibility:We==="exited"&&!y?"hidden":void 0},QY[We],Z,s.props.style),ref:j},De))}))});function ln(e,t){if(e==null)throw new Error(t);return e}function O5(e,t){if(!e)throw new Error(`assertion failed: ${t}`);return e}const tJ="modulepreload",rJ=function(e){return"/"+e},wR={},nJ=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),s=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));i=Promise.allSettled(r.map(m=>{if(m=rJ(m),m in wR)return;wR[m]=!0;const y=m.endsWith(".css"),S=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${S}`))return;const T=document.createElement("link");if(T.rel=y?"stylesheet":tJ,y||(T.as="script"),T.crossOrigin="",T.href=m,s&&T.setAttribute("nonce",s),document.head.appendChild(T),y)return new Promise((I,D)=>{T.addEventListener("load",I),T.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(h){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=h,window.dispatchEvent(s),!s.defaultPrevented)throw h}return i.then(h=>{for(const s of h||[])s.status==="rejected"&&l(s.reason);return t().catch(l)})},$5=R.createContext(null);function iJ(){var e;const t=(e=R.useContext($5))===null||e===void 0?void 0:e.maps,r=R.useContext(Id);return R.useMemo(()=>({...t,current:r==null?void 0:r.map}),[t,r])}function oJ(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,n=Array.isArray(e)?e[1]:e?e.y:0,i=Array.isArray(t)?t[0]:t?t.x:0,l=Array.isArray(t)?t[1]:t?t.y:0;return r===i&&n===l}function fa(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!fa(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const i of r)if(!t.hasOwnProperty(i)||!fa(e[i],t[i]))return!1;return!0}return!1}function aJ(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function SR(e,t){if(!e.getProjection)return;const r=e.getProjection(),n=t.getProjection();fa(r,n)||t.setProjection(r)}function CR(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function kR(e,t){const r=t.viewState||t;let n=!1;if("zoom"in r){const i=e.zoom;e.zoom=r.zoom,n=n||i!==e.zoom}if("bearing"in r){const i=e.bearing;e.bearing=r.bearing,n=n||i!==e.bearing}if("pitch"in r){const i=e.pitch;e.pitch=r.pitch,n=n||i!==e.pitch}if(r.padding&&!e.isPaddingEqual(r.padding)&&(n=!0,e.padding=r.padding),"longitude"in r&&"latitude"in r){const i=e.center;e.center=new i.constructor(r.longitude,r.latitude),n=n||i!==e.center}return n}const sJ=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function TR(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const n of e.layers)t[n.id]=n;const r=e.layers.map(n=>{let i=null;"interactive"in n&&(i=Object.assign({},n),delete i.interactive);const l=t[n.ref];if(l){i=i||Object.assign({},n),delete i.ref;for(const h of sJ)h in l&&(i[h]=l[h])}return i||n});return{...e,layers:r}}var ER={};const IR={version:8,sources:{},layers:[]},PR={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Fw={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},AR={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},lJ=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],cJ=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Rf{constructor(t,r,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const l=this.props[AR[i.type]];l?l(i):i.type==="error"&&console.error(i.error)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const l=this.props[PR[i.type]];l&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),l(i),delete i.features)},this._onCameraEvent=i=>{if(!this._internalUpdate){const l=this.props[Fw[i.type]];l&&l(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=t,this.props=r,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const n=this._updateSettings(t,r);n&&this._createShadowTransform(this._map);const i=this._updateSize(t),l=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(n||i||l&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const n=Rf.savedMaps.pop();if(!n)return null;const i=n.map,l=i.getContainer();for(r.className=l.className;l.childNodes.length>0;)r.appendChild(l.childNodes[0]);i._container=r;const h=i._resizeObserver;h&&(h.disconnect(),h.observe(r)),n.setProps({...t,styleDiffing:!1}),i.resize();const{initialViewState:s}=t;return s&&(s.bounds?i.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):n._updateViewState(s,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),n}_initialize(t){const{props:r}=this,{mapStyle:n=IR}=r,i={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||uJ()||null,container:t,style:TR(n)},l=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[l.longitude||0,l.latitude||0],zoom:l.zoom||0,pitch:l.pitch||0,bearing:l.bearing||0}),r.gl){const S=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=S,r.gl)}const h=new this._MapClass(i);l.padding&&h.setPadding(l.padding),r.cursor&&(h.getCanvas().style.cursor=r.cursor),this._createShadowTransform(h);const s=h._render;h._render=S=>{this._inRender=!0,s.call(h,S),this._inRender=!1};const m=h._renderTaskQueue.run;h._renderTaskQueue.run=S=>{m.call(h._renderTaskQueue,S),this._onBeforeRepaint()},h.on("render",()=>this._onAfterRepaint());const y=h.fire;h.fire=this._fireEvent.bind(this,y),h.on("resize",()=>{this._renderTransform.resize(h.transform.width,h.transform.height)}),h.on("styledata",()=>{this._updateStyleComponents(this.props,{}),SR(h.transform,this._renderTransform)}),h.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const S in PR)h.on(S,this._onPointerEvent);for(const S in Fw)h.on(S,this._onCameraEvent);for(const S in AR)h.on(S,this._onEvent);this._map=h}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),Rf.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=aJ(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const n=this._map;if(r.width!==n.transform.width||r.height!==n.transform.height)return n.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const n=this._map,i=this._renderTransform,{zoom:l,pitch:h,bearing:s}=i,m=n.isMoving();m&&(i.cameraElevationReference="sea");const y=kR(i,{...CR(n.transform),...t});if(m&&(i.cameraElevationReference="ground"),y&&r){const S=this._deferredEvents;S.move=!0,S.zoom||(S.zoom=l!==i.zoom),S.rotate||(S.rotate=s!==i.bearing),S.pitch||(S.pitch=h!==i.pitch)}return m||kR(n.transform,t),y}_updateSettings(t,r){const n=this._map;let i=!1;for(const l of lJ)if(l in t&&!fa(t[l],r[l])){i=!0;const h=n[`set${l[0].toUpperCase()}${l.slice(1)}`];h==null||h.call(n,t[l])}return i}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==r.mapStyle){const{mapStyle:n=IR,styleDiffing:i=!0}=t,l={diff:i};return"localIdeographFontFamily"in t&&(l.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(TR(n),l),!0}return!1}_updateStyleComponents(t,r){const n=this._map;let i=!1;return n.isStyleLoaded()&&("light"in t&&n.setLight&&!fa(t.light,r.light)&&(i=!0,n.setLight(t.light)),"fog"in t&&n.setFog&&!fa(t.fog,r.fog)&&(i=!0,n.setFog(t.fog)),"terrain"in t&&n.setTerrain&&!fa(t.terrain,r.terrain)&&(!t.terrain||n.getSource(t.terrain.source))&&(i=!0,n.setTerrain(t.terrain))),i}_updateHandlers(t,r){var n,i;const l=this._map;let h=!1;for(const s of cJ){const m=(n=t[s])!==null&&n!==void 0?n:!0,y=(i=r[s])!==null&&i!==void 0?i:!0;fa(m,y)||(h=!0,m?l[s].enable(m):l[s].disable())}return h}_queryRenderedFeatures(t){const r=this._map,n=r.transform,{interactiveLayerIds:i=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(t,{layers:i.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=n}}_updateHover(t){var r;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const l=t.type,h=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,s=this._queryRenderedFeatures(t.point),m=s.length>0;!m&&h&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=s,m&&!h&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=l}else this._hoveredFeatures=null}_fireEvent(t,r,n){const i=this._map,l=i.transform,h=typeof r=="string"?r:r.type;return h==="move"&&this._updateViewState(this.props,!1),h in Fw&&(typeof r=="object"&&(r.viewState=CR(l)),this._map.isMoving())?(i.transform=this._renderTransform,t.call(i,r,n),i.transform=l,i):(t.call(i,r,n),i)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&t.fire(n);this._internalUpdate=!1;const r=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{SR(this._renderTransform,r),t.transform=r}}}Rf.savedMaps=[];function uJ(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||ER.MapboxAccessToken}catch{}try{e=e||ER.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const dJ=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function hJ(e){if(!e)return null;const t=e.map,r={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>{const i=t.transform;t.transform=e.transform;const l=t.project(n);return t.transform=i,l},unproject:n=>{const i=t.transform;t.transform=e.transform;const l=t.unproject(n);return t.transform=i,l},queryTerrainElevation:(n,i)=>{const l=t.transform;t.transform=e.transform;const h=t.queryTerrainElevation(n,i);return t.transform=l,h},queryRenderedFeatures:(n,i)=>{const l=t.transform;t.transform=e.transform;const h=t.queryRenderedFeatures(n,i);return t.transform=l,h}};for(const n of fJ(t))!(n in r)&&!dJ.includes(n)&&(r[n]=t[n].bind(t));return r}function fJ(e){const t=new Set;let r=e;for(;r;){for(const n of Object.getOwnPropertyNames(r))n[0]!=="_"&&typeof e[n]=="function"&&n!=="fire"&&n!=="setEventedParent"&&t.add(n);r=Object.getPrototypeOf(r)}return Array.from(t)}const pJ=typeof document<"u"?R.useLayoutEffect:R.useEffect,mJ=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function gJ(e,t){for(const n of mJ)n in t&&(e[n]=t[n]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;r&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r,n=>{n&&console.error(n)},!0)}const Id=R.createContext(null);function vJ(e,t,r){const n=R.useContext($5),[i,l]=R.useState(null),h=R.useRef(),{current:s}=R.useRef({mapLib:null,map:null});R.useEffect(()=>{const S=e.mapLib;let T=!0,I;return Promise.resolve(S||r).then(D=>{if(!T)return;if(!D)throw new Error("Invalid mapLib");const F="Map"in D?D:D.default;if(!F.Map)throw new Error("Invalid mapLib");if(gJ(F,e),!F.supported||F.supported(e))e.reuseMaps&&(I=Rf.reuse(e,h.current)),I||(I=new Rf(F.Map,e,h.current)),s.map=hJ(I),s.mapLib=F,l(I),n==null||n.onMapMount(s.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(D=>{const{onError:F}=e;F?F({type:"error",target:null,originalEvent:null,error:D}):console.error(D)}),()=>{T=!1,I&&(n==null||n.onMapUnmount(e.id),e.reuseMaps?I.recycle():I.destroy())}},[]),pJ(()=>{i&&i.setProps(e)}),R.useImperativeHandle(t,()=>s.map,[i]);const m=R.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),y={height:"100%"};return R.createElement("div",{id:e.id,ref:h,style:m},i&&R.createElement(Id.Provider,{value:s},R.createElement("div",{"mapboxgl-children":"",style:y},e.children)))}const yJ=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Pd(e,t){if(!e||!t)return;const r=e.style;for(const n in t){const i=t[n];Number.isFinite(i)&&!yJ.test(n)?r[n]=`${i}px`:r[n]=i}}function _J(e,t){const{map:r,mapLib:n}=R.useContext(Id),i=R.useRef({props:e});i.current.props=e;const l=R.useMemo(()=>{let V=!1;R.Children.forEach(e.children,O=>{O&&(V=!0)});const Z={...e,element:V?document.createElement("div"):null},z=new n.Marker(Z);return z.setLngLat([e.longitude,e.latitude]),z.getElement().addEventListener("click",O=>{var L,te;(te=(L=i.current.props).onClick)===null||te===void 0||te.call(L,{type:"click",target:z,originalEvent:O})}),z.on("dragstart",O=>{var L,te;const j=O;j.lngLat=l.getLngLat(),(te=(L=i.current.props).onDragStart)===null||te===void 0||te.call(L,j)}),z.on("drag",O=>{var L,te;const j=O;j.lngLat=l.getLngLat(),(te=(L=i.current.props).onDrag)===null||te===void 0||te.call(L,j)}),z.on("dragend",O=>{var L,te;const j=O;j.lngLat=l.getLngLat(),(te=(L=i.current.props).onDragEnd)===null||te===void 0||te.call(L,j)}),z},[]);R.useEffect(()=>(l.addTo(r.getMap()),()=>{l.remove()}),[]);const{longitude:h,latitude:s,offset:m,style:y,draggable:S=!1,popup:T=null,rotation:I=0,rotationAlignment:D="auto",pitchAlignment:F="auto"}=e;return R.useEffect(()=>{Pd(l.getElement(),y)},[y]),R.useImperativeHandle(t,()=>l,[]),(l.getLngLat().lng!==h||l.getLngLat().lat!==s)&&l.setLngLat([h,s]),m&&!oJ(l.getOffset(),m)&&l.setOffset(m),l.isDraggable()!==S&&l.setDraggable(S),l.getRotation()!==I&&l.setRotation(I),l.getRotationAlignment()!==D&&l.setRotationAlignment(D),l.getPitchAlignment()!==F&&l.setPitchAlignment(F),l.getPopup()!==T&&l.setPopup(T),Cd.createPortal(e.children,l.getElement())}const xJ=R.memo(R.forwardRef(_J));function RR(e){return new Set(e?e.trim().split(/\s+/):[])}function bJ(e,t){const{map:r,mapLib:n}=R.useContext(Id),i=R.useMemo(()=>document.createElement("div"),[]),l=R.useRef({props:e});l.current.props=e;const h=R.useMemo(()=>{const s={...e},m=new n.Popup(s);return m.setLngLat([e.longitude,e.latitude]),m.once("open",y=>{var S,T;(T=(S=l.current.props).onOpen)===null||T===void 0||T.call(S,y)}),m},[]);if(R.useEffect(()=>{const s=m=>{var y,S;(S=(y=l.current.props).onClose)===null||S===void 0||S.call(y,m)};return h.on("close",s),h.setDOMContent(i).addTo(r.getMap()),()=>{h.off("close",s),h.isOpen()&&h.remove()}},[]),R.useEffect(()=>{Pd(h.getElement(),e.style)},[e.style]),R.useImperativeHandle(t,()=>h,[]),h.isOpen()&&((h.getLngLat().lng!==e.longitude||h.getLngLat().lat!==e.latitude)&&h.setLngLat([e.longitude,e.latitude]),e.offset&&!fa(h.options.offset,e.offset)&&h.setOffset(e.offset),(h.options.anchor!==e.anchor||h.options.maxWidth!==e.maxWidth)&&(h.options.anchor=e.anchor,h.setMaxWidth(e.maxWidth)),h.options.className!==e.className)){const s=RR(h.options.className),m=RR(e.className);for(const y of s)m.has(y)||h.removeClassName(y);for(const y of m)s.has(y)||h.addClassName(y);h.options.className=e.className}return Cd.createPortal(e.children,i)}R.memo(R.forwardRef(bJ));function cc(e,t,r,n){const i=R.useContext(Id),l=R.useMemo(()=>e(i),[]);return R.useEffect(()=>{const h=t,s=typeof t=="function"?t:null,{map:m}=i;return m.hasControl(l)||m.addControl(l,h==null?void 0:h.position),()=>{s&&s(i),m.hasControl(l)&&m.removeControl(l)}},[]),l}function wJ(e){const t=cc(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return R.useEffect(()=>{Pd(t._container,e.style)},[e.style]),null}const SJ=R.memo(wJ);function CJ(e){const t=cc(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return R.useEffect(()=>{Pd(t._controlContainer,e.style)},[e.style]),null}const kJ=R.memo(CJ);function TJ(e,t){const r=R.useRef({props:e}),n=cc(({mapLib:i})=>{const l=new i.GeolocateControl(e),h=l._setupUI;return l._setupUI=s=>{l._container.hasChildNodes()||h(s)},l.on("geolocate",s=>{var m,y;(y=(m=r.current.props).onGeolocate)===null||y===void 0||y.call(m,s)}),l.on("error",s=>{var m,y;(y=(m=r.current.props).onError)===null||y===void 0||y.call(m,s)}),l.on("outofmaxbounds",s=>{var m,y;(y=(m=r.current.props).onOutOfMaxBounds)===null||y===void 0||y.call(m,s)}),l.on("trackuserlocationstart",s=>{var m,y;(y=(m=r.current.props).onTrackUserLocationStart)===null||y===void 0||y.call(m,s)}),l.on("trackuserlocationend",s=>{var m,y;(y=(m=r.current.props).onTrackUserLocationEnd)===null||y===void 0||y.call(m,s)}),l},{position:e.position});return r.current.props=e,R.useImperativeHandle(t,()=>n,[]),R.useEffect(()=>{Pd(n._container,e.style)},[e.style]),null}R.memo(R.forwardRef(TJ));function EJ(e){const t=cc(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return R.useEffect(()=>{Pd(t._container,e.style)},[e.style]),null}const IJ=R.memo(EJ);function PJ(e){const t=cc(({mapLib:l})=>new l.ScaleControl(e),{position:e.position}),r=R.useRef(e),n=r.current;r.current=e;const{style:i}=e;return e.maxWidth!==void 0&&e.maxWidth!==n.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==n.unit&&t.setUnit(e.unit),R.useEffect(()=>{Pd(t._container,i)},[i]),null}R.memo(PJ);function O_(e,t){if(!e)throw new Error(t)}function AJ(e,t,r,n){if(O_(r.id===n.id,"layer id changed"),O_(r.type===n.type,"layer type changed"),r.type==="custom"||n.type==="custom")return;const{layout:i={},paint:l={},filter:h,minzoom:s,maxzoom:m,beforeId:y}=r;if(y!==n.beforeId&&e.moveLayer(t,y),i!==n.layout){const S=n.layout||{};for(const T in i)fa(i[T],S[T])||e.setLayoutProperty(t,T,i[T]);for(const T in S)i.hasOwnProperty(T)||e.setLayoutProperty(t,T,void 0)}if(l!==n.paint){const S=n.paint||{};for(const T in l)fa(l[T],S[T])||e.setPaintProperty(t,T,l[T]);for(const T in S)l.hasOwnProperty(T)||e.setPaintProperty(t,T,void 0)}fa(h,n.filter)||e.setFilter(t,h),(s!==n.minzoom||m!==n.maxzoom)&&e.setLayerZoomRange(t,s,m)}function RJ(e,t,r){if(e.style&&e.style._loaded&&(!("source"in r)||e.getSource(r.source))){const n={...r,id:t};delete n.beforeId,e.addLayer(n,r.beforeId)}}let DJ=0;function MJ(e){const t=R.useContext(Id).map.getMap(),r=R.useRef(e),[,n]=R.useState(0),i=R.useMemo(()=>e.id||`jsx-layer-${DJ++}`,[]);if(R.useEffect(()=>{if(t){const h=()=>n(s=>s+1);return t.on("styledata",h),h(),()=>{t.off("styledata",h),t.style&&t.style._loaded&&t.getLayer(i)&&t.removeLayer(i)}}},[t]),t&&t.style&&t.getLayer(i))try{AJ(t,i,e,r.current)}catch(h){console.warn(h)}else RJ(t,i,e);return r.current=e,null}let zJ=0;function LJ(e,t,r){if(e.style&&e.style._loaded){const n={...r};return delete n.id,delete n.children,e.addSource(t,n),e.getSource(t)}return null}function OJ(e,t,r){O_(t.id===r.id,"source id changed"),O_(t.type===r.type,"source type changed");let n="",i=0;for(const h in t)h!=="children"&&h!=="id"&&!fa(r[h],t[h])&&(n=h,i++);if(!i)return;const l=t.type;l==="geojson"?e.setData(t.data):l==="image"?e.updateImage({url:t.url,coordinates:t.coordinates}):"setCoordinates"in e&&i===1&&n==="coordinates"?e.setCoordinates(t.coordinates):"setUrl"in e&&n==="url"?e.setUrl(t.url):"setTiles"in e&&n==="tiles"?e.setTiles(t.tiles):console.warn(`Unable to update <Source> prop: ${n}`)}function $J(e){const t=R.useContext(Id).map.getMap(),r=R.useRef(e),[,n]=R.useState(0),i=R.useMemo(()=>e.id||`jsx-source-${zJ++}`,[]);R.useEffect(()=>{if(t){const h=()=>setTimeout(()=>n(s=>s+1),0);return t.on("styledata",h),h(),()=>{var s;if(t.off("styledata",h),t.style&&t.style._loaded&&t.getSource(i)){const m=(s=t.getStyle())===null||s===void 0?void 0:s.layers;if(m)for(const y of m)y.source===i&&t.removeLayer(y.id);t.removeSource(i)}}}},[t]);let l=t&&t.style&&t.getSource(i);return l?OJ(l,e,r.current):l=LJ(t,i,e),r.current=e,l&&R.Children.map(e.children,h=>h&&R.cloneElement(h,{source:i}))||null}function DT(){return iJ()}const BJ=nJ(()=>Promise.resolve().then(()=>UJ),[]),MT=R.forwardRef(function(t,r){return vJ(t,r,BJ)}),zT=xJ,B5=SJ,F5=kJ,N5=IJ,en=MJ,eu=$J,FJ={"text-color":"hsl(42, 10%, 14%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},NJ={"text-color":"hsl(42, 10%, 24%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},jJ={"text-color":"hsl(42, 10%, 86%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},VJ={"text-color":"hsl(42, 10%, 76%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},LT={light:{water:"#b2cdfb",land:"#f8f8f8",stateBorder:"#aaa",countryBorder:"#ccc",primaryTextPaint:FJ,secondaryTextPaint:NJ,hiddenRoad:"#e9e9e8",footprint:"#e9e9e8",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#eeeeffcc",trainLine:"#aaa",trainLabel:"#555c",trainHalo:"#eefc",mapAreaOutline:"#999a"},dark:{water:"#36415d",land:"#1a1a1a",stateBorder:"#555",countryBorder:"#333",primaryTextPaint:jJ,secondaryTextPaint:VJ,hiddenRoad:"#404038",footprint:"#30302f88",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#303028cc",trainLine:"#888",trainLabel:"#eeec",trainHalo:"#303028cc",mapAreaOutline:"#777a"}};var j5={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(rC,function(){var r,n,i;function l(s,m){if(!r)r=m;else if(!n)n=m;else{var y="var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk);",S={};r(S),i=m(S),typeof window<"u"&&(i.workerUrl=window.URL.createObjectURL(new Blob([y],{type:"text/javascript"})))}}l(["exports"],function(s){function m(c,o,u,f){return new(u||(u=Promise))(function(g,x){function w(M){try{P(f.next(M))}catch(U){x(U)}}function C(M){try{P(f.throw(M))}catch(U){x(U)}}function P(M){var U;M.done?g(M.value):(U=M.value,U instanceof u?U:new u(function(q){q(U)})).then(w,C)}P((f=f.apply(c,o||[])).next())})}function y(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}typeof SuppressedError=="function"&&SuppressedError;var S=T;function T(c,o){this.x=c,this.y=o}T.prototype={clone:function(){return new T(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,o){return this.clone()._rotateAround(c,o)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var o=c.x-this.x,u=c.y-this.y;return o*o+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,o){return Math.atan2(this.x*o-this.y*c,this.x*c+this.y*o)},_matMult:function(c){var o=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=o,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var o=Math.cos(c),u=Math.sin(c),f=u*this.x+o*this.y;return this.x=o*this.x-u*this.y,this.y=f,this},_rotateAround:function(c,o){var u=Math.cos(c),f=Math.sin(c),g=o.y+f*(this.x-o.x)+u*(this.y-o.y);return this.x=o.x+u*(this.x-o.x)-f*(this.y-o.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},T.convert=function(c){return c instanceof T?c:Array.isArray(c)?new T(c[0],c[1]):c};var I=y(S),D=F;function F(c,o,u,f){this.cx=3*c,this.bx=3*(u-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(f-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=o,this.p2x=u,this.p2y=f}F.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,o){if(o===void 0&&(o=1e-6),c<0)return 0;if(c>1)return 1;for(var u=c,f=0;f<8;f++){var g=this.sampleCurveX(u)-c;if(Math.abs(g)<o)return u;var x=this.sampleCurveDerivativeX(u);if(Math.abs(x)<1e-6)break;u-=g/x}var w=0,C=1;for(u=c,f=0;f<20&&(g=this.sampleCurveX(u),!(Math.abs(g-c)<o));f++)c>g?w=u:C=u,u=.5*(C-w)+w;return u},solve:function(c,o){return this.sampleCurveY(this.solveCurveX(c,o))}};var V=y(D);let Z,z;function O(){return Z==null&&(Z=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Z}function L(){if(z==null&&(z=!1,O())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let f=0;f<5*5;f++){const g=4*f;o.fillStyle=`rgb(${g},${g+1},${g+2})`,o.fillRect(f%5,Math.floor(f/5),1,1)}const u=o.getImageData(0,0,5,5).data;for(let f=0;f<5*5*4;f++)if(f%4!=3&&u[f]!==f){z=!0;break}}}return z||!1}function te(c,o,u,f){const g=new V(c,o,u,f);return function(x){return g.solve(x)}}const j=te(.25,.1,.25,1);function $(c,o,u){return Math.min(u,Math.max(o,c))}function J(c,o,u){const f=u-o,g=((c-o)%f+f)%f+o;return g===o?u:g}function ie(c,...o){for(const u of o)for(const f in u)c[f]=u[f];return c}let xe=1;function ge(c,o,u){const f={};for(const g in c)f[g]=o.call(u||this,c[g],g,c);return f}function we(c,o,u){const f={};for(const g in c)o.call(u||this,c[g],g,c)&&(f[g]=c[g]);return f}function Te(c){return Array.isArray(c)?c.map(Te):typeof c=="object"&&c?ge(c,Te):c}const Pe={};function We(c){Pe[c]||(typeof console<"u"&&console.warn(c),Pe[c]=!0)}function De(c,o,u){return(u.y-c.y)*(o.x-c.x)>(o.y-c.y)*(u.x-c.x)}function Se(c){let o=0;for(let u,f,g=0,x=c.length,w=x-1;g<x;w=g++)u=c[g],f=c[w],o+=(f.x-u.x)*(u.y+f.y);return o}function Fe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Ce=null;function Ne(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function at(c,o,u,f,g){return m(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(c,{timestamp:0});try{const w=x==null?void 0:x.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const C=w.startsWith("BGR"),P=new Uint8ClampedArray(f*g*4);if(yield x.copyTo(P,function(M,U,q,ee,oe){const ae=4*Math.max(-U,0),ce=(Math.max(0,q)-q)*ee*4+ae,ve=4*ee,be=Math.max(0,U),ze=Math.max(0,q);return{rect:{x:be,y:ze,width:Math.min(M.width,U+ee)-be,height:Math.min(M.height,q+oe)-ze},layout:[{offset:ce,stride:ve}]}}(c,o,u,f,g)),C)for(let M=0;M<P.length;M+=4){const U=P[M];P[M]=P[M+2],P[M+2]=U}return P}finally{x.close()}})}let st,Dt,St,$t;const Ct={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const o=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(c,o=0){return this.getImageCanvasContext(c).getImageData(-o,-o,c.width+2*o,c.height+2*o)},getImageCanvasContext(c){const o=window.document.createElement("canvas"),u=o.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return o.width=c.width,o.height=c.height,u.drawImage(c,0,0,c.width,c.height),u},resolveURL:c=>(St||(St=document.createElement("a")),St.href=c,St.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&($t==null&&($t=matchMedia("(prefers-reduced-motion: reduce)")),$t.matches)}},it={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Ze extends Error{constructor(o,u,f,g){super(`AJAXError: ${u} (${o}): ${f}`),this.status=o,this.statusText=u,this.url=f,this.body=g}}const rt=Fe()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,pt=c=>it.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))];function sr(c,o){const u=new AbortController,f=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,cache:c.cache,referrer:rt(),signal:u.signal});let g=!1,x=!1;return c.type==="json"&&f.headers.set("Accept","application/json"),x||fetch(f).then(w=>w.ok?(C=>{(c.type==="arrayBuffer"||c.type==="image"?C.arrayBuffer():c.type==="json"?C.json():C.text()).then(P=>{x||(g=!0,o(null,P,C.headers.get("Cache-Control"),C.headers.get("Expires")))}).catch(P=>{x||o(new Error(P.message))})})(w):w.blob().then(C=>o(new Ze(w.status,w.statusText,c.url,C)))).catch(w=>{w.code!==20&&o(new Error(w.message))}),{cancel:()=>{x=!0,g||u.abort()}}}const rr=function(c,o){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(Fe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,o);if(!Fe())return(pt(c.url)||sr)(c,o)}if(!(/^file:/.test(u=c.url)||/^file:/.test(rt())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return sr(c,o);if(Fe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,o,void 0,!0)}var u;return function(f,g){const x=new XMLHttpRequest;x.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(x.responseType="arraybuffer");for(const w in f.headers)x.setRequestHeader(w,f.headers[w]);return f.type==="json"&&(x.responseType="text",x.setRequestHeader("Accept","application/json")),x.withCredentials=f.credentials==="include",x.onerror=()=>{g(new Error(x.statusText))},x.onload=()=>{if((x.status>=200&&x.status<300||x.status===0)&&x.response!==null){let w=x.response;if(f.type==="json")try{w=JSON.parse(x.response)}catch(C){return g(C)}g(null,w,x.getResponseHeader("Cache-Control"),x.getResponseHeader("Expires"))}else{const w=new Blob([x.response],{type:x.getResponseHeader("Content-Type")});g(new Ze(x.status,x.statusText,f.url,w))}},x.send(f.body),{cancel:()=>x.abort()}}(c,o)},wr=function(c,o){return rr(ie(c,{type:"arrayBuffer"}),o)};function Lr(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const o=new URL(c),u=window.location;return o.protocol===u.protocol&&o.host===u.host}function nr(c,o,u){u[c]&&u[c].indexOf(o)!==-1||(u[c]=u[c]||[],u[c].push(o))}function Et(c,o,u){if(u&&u[c]){const f=u[c].indexOf(o);f!==-1&&u[c].splice(f,1)}}class hr{constructor(o,u={}){ie(this,u),this.type=o}}class Gt extends hr{constructor(o,u={}){super("error",ie({error:o},u))}}class Dr{on(o,u){return this._listeners=this._listeners||{},nr(o,u,this._listeners),this}off(o,u){return Et(o,u,this._listeners),Et(o,u,this._oneTimeListeners),this}once(o,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},nr(o,u,this._oneTimeListeners),this):new Promise(f=>this.once(o,f))}fire(o,u){typeof o=="string"&&(o=new hr(o,u||{}));const f=o.type;if(this.listens(f)){o.target=this;const g=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const C of g)C.call(this,o);const x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const C of x)Et(f,C,this._oneTimeListeners),C.call(this,o);const w=this._eventedParent;w&&(ie(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(o))}else o instanceof Gt&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,u){return this._eventedParent=o,this._eventedParentData=u,this}}var He={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const xr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Tr(c,o){const u={};for(const f in c)f!=="ref"&&(u[f]=c[f]);return xr.forEach(f=>{f in o&&(u[f]=o[f])}),u}function Jt(c,o){if(Array.isArray(c)){if(!Array.isArray(o)||c.length!==o.length)return!1;for(let u=0;u<c.length;u++)if(!Jt(c[u],o[u]))return!1;return!0}if(typeof c=="object"&&c!==null&&o!==null){if(typeof o!="object"||Object.keys(c).length!==Object.keys(o).length)return!1;for(const u in c)if(!Jt(c[u],o[u]))return!1;return!0}return c===o}const or={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Cr(c,o,u){u.push({command:or.addSource,args:[c,o[c]]})}function Mr(c,o,u){o.push({command:or.removeSource,args:[c]}),u[c]=!0}function Sr(c,o,u,f){Mr(c,u,f),Cr(c,o,u)}function fr(c,o,u){let f;for(f in c[u])if(Object.prototype.hasOwnProperty.call(c[u],f)&&f!=="data"&&!Jt(c[u][f],o[u][f]))return!1;for(f in o[u])if(Object.prototype.hasOwnProperty.call(o[u],f)&&f!=="data"&&!Jt(c[u][f],o[u][f]))return!1;return!0}function Qt(c,o,u,f,g,x){let w;for(w in o=o||{},c=c||{})Object.prototype.hasOwnProperty.call(c,w)&&(Jt(c[w],o[w])||u.push({command:x,args:[f,w,o[w],g]}));for(w in o)Object.prototype.hasOwnProperty.call(o,w)&&!Object.prototype.hasOwnProperty.call(c,w)&&(Jt(c[w],o[w])||u.push({command:x,args:[f,w,o[w],g]}))}function dr(c){return c.id}function tn(c,o){return c[o.id]=o,c}class je{constructor(o,u,f,g){this.message=(o?`${o}: `:"")+f,g&&(this.identifier=g),u!=null&&u.__line__&&(this.line=u.__line__)}}function kt(c,...o){for(const u of o)for(const f in u)c[f]=u[f];return c}class bt extends Error{constructor(o,u){super(u),this.message=u,this.key=o}}class Ee{constructor(o,u=[]){this.parent=o,this.bindings={};for(const[f,g]of u)this.bindings[f]=g}concat(o){return new Ee(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const Ve={kind:"null"},Xe={kind:"number"},Tt={kind:"string"},gt={kind:"boolean"},Rt={kind:"color"},vr={kind:"object"},Bt={kind:"value"},mr={kind:"collator"},ue={kind:"formatted"},Y={kind:"padding"},Q={kind:"resolvedImage"},N={kind:"variableAnchorOffsetCollection"};function X(c,o){return{kind:"array",itemType:c,N:o}}function re(c){if(c.kind==="array"){const o=re(c.itemType);return typeof c.N=="number"?`array<${o}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${o}>`}return c.kind}const he=[Ve,Xe,Tt,gt,Rt,ue,vr,X(Bt),Y,Q,N];function pe(c,o){if(o.kind==="error")return null;if(c.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!pe(c.itemType,o.itemType))&&(typeof c.N!="number"||c.N===o.N))return null}else{if(c.kind===o.kind)return null;if(c.kind==="value"){for(const u of he)if(!pe(u,o))return null}}return`Expected ${re(c)} but found ${re(o)} instead.`}function se(c,o){return o.some(u=>u.kind===c.kind)}function _e(c,o){return o.some(u=>u==="null"?c===null:u==="array"?Array.isArray(c):u==="object"?c&&!Array.isArray(c)&&typeof c=="object":u===typeof c)}function Ae(c,o){return c.kind==="array"&&o.kind==="array"?c.itemType.kind===o.itemType.kind&&typeof c.N=="number":c.kind===o.kind}const Le=.96422,Re=.82521,ot=4/29,dt=6/29,ut=3*dt*dt,It=dt*dt*dt,Oe=Math.PI/180,$e=180/Math.PI;function tt(c){return(c%=360)<0&&(c+=360),c}function ht([c,o,u,f]){let g,x;const w=pr((.2225045*(c=zt(c))+.7168786*(o=zt(o))+.0606169*(u=zt(u)))/1);c===o&&o===u?g=x=w:(g=pr((.4360747*c+.3850649*o+.1430804*u)/Le),x=pr((.0139322*c+.0971045*o+.7141733*u)/Re));const C=116*w-16;return[C<0?0:C,500*(g-w),200*(w-x),f]}function zt(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function pr(c){return c>It?Math.pow(c,1/3):c/ut+ot}function ir([c,o,u,f]){let g=(c+16)/116,x=isNaN(o)?g:g+o/500,w=isNaN(u)?g:g-u/200;return g=1*pn(g),x=Le*pn(x),w=Re*pn(w),[jr(3.1338561*x-1.6168667*g-.4906146*w),jr(-.9787684*x+1.9161415*g+.033454*w),jr(.0719453*x-.2289914*g+1.4052427*w),f]}function jr(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function pn(c){return c>dt?c*c*c:ut*(c-ot)}function Fn(c){return parseInt(c.padEnd(2,c),16)/255}function zs(c,o){return So(o?c/100:c,0,1)}function So(c,o,u){return Math.min(Math.max(o,c),u)}function Vr(c){return!c.some(Number.isNaN)}const ri={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Or{constructor(o,u,f,g=1,x=!0){this.r=o,this.g=u,this.b=f,this.a=g,x||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[o,u,f,g]))}static parse(o){if(o instanceof Or)return o;if(typeof o!="string")return;const u=function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=ri[f];if(g){const[w,C,P]=g;return[w/255,C/255,P/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const w=f.length<6?1:2;let C=1;return[Fn(f.slice(C,C+=w)),Fn(f.slice(C,C+=w)),Fn(f.slice(C,C+=w)),Fn(f.slice(C,C+w)||"ff")]}if(f.startsWith("rgb")){const w=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[C,P,M,U,q,ee,oe,ae,ce,ve,be,ze]=w,ke=[U||" ",oe||" ",ve].join("");if(ke==="  "||ke==="  /"||ke===",,"||ke===",,,"){const Be=[M,ee,ce].join(""),Ge=Be==="%%%"?100:Be===""?255:0;if(Ge){const et=[So(+P/Ge,0,1),So(+q/Ge,0,1),So(+ae/Ge,0,1),be?zs(+be,ze):1];if(Vr(et))return et}}return}}const x=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,C,P,M,U,q,ee,oe,ae]=x,ce=[P||" ",U||" ",ee].join("");if(ce==="  "||ce==="  /"||ce===",,"||ce===",,,"){const ve=[+C,So(+M,0,100),So(+q,0,100),oe?zs(+oe,ae):1];if(Vr(ve))return function([be,ze,ke,Be]){function Ge(et){const Ot=(et+be/30)%12,Zt=ze*Math.min(ke,1-ke);return ke-Zt*Math.max(-1,Math.min(Ot-3,9-Ot,1))}return be=tt(be),ze/=100,ke/=100,[Ge(0),Ge(8),Ge(4),Be]}(ve)}}}(o);return u?new Or(...u,!1):void 0}get rgb(){const{r:o,g:u,b:f,a:g}=this,x=g||1/0;return this.overwriteGetter("rgb",[o/x,u/x,f/x,g])}get hcl(){return this.overwriteGetter("hcl",function(o){const[u,f,g,x]=ht(o),w=Math.sqrt(f*f+g*g);return[Math.round(1e4*w)?tt(Math.atan2(g,f)*$e):NaN,w,u,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ht(this.rgb))}overwriteGetter(o,u){return Object.defineProperty(this,o,{value:u}),u}toString(){const[o,u,f,g]=this.rgb;return`rgba(${[o,u,f].map(x=>Math.round(255*x)).join(",")},${g})`}}Or.black=new Or(0,0,0,1),Or.white=new Or(1,1,1,1),Or.transparent=new Or(0,0,0,0),Or.red=new Or(1,0,0,1);class No{constructor(o,u,f){this.sensitivity=o?u?"variant":"case":u?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,u){return this.collator.compare(o,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Wt{constructor(o,u,f,g,x){this.text=o,this.image=u,this.scale=f,this.fontStack=g,this.textColor=x}}class Ur{constructor(o){this.sections=o}static fromString(o){return new Ur([new Wt(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.name.length!==0)}static factory(o){return o instanceof Ur?o:Ur.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}}class Wr{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Wr)return o;if(typeof o=="number")return new Wr([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const u of o)if(typeof u!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new Wr(o)}}toString(){return JSON.stringify(this.values)}}const Ni=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Wn{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Wn)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let u=0;u<o.length;u+=2){const f=o[u],g=o[u+1];if(typeof f!="string"||!Ni.has(f)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new Wn(o)}}toString(){return JSON.stringify(this.values)}}class qn{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new qn({name:o,available:!1}):null}}function Co(c,o,u,f){return typeof c=="number"&&c>=0&&c<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof u=="number"&&u>=0&&u<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[c,o,u,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[c,o,u,f]:[c,o,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ji(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Or||c instanceof No||c instanceof Ur||c instanceof Wr||c instanceof Wn||c instanceof qn)return!0;if(Array.isArray(c)){for(const o of c)if(!ji(o))return!1;return!0}if(typeof c=="object"){for(const o in c)if(!ji(c[o]))return!1;return!0}return!1}function In(c){if(c===null)return Ve;if(typeof c=="string")return Tt;if(typeof c=="boolean")return gt;if(typeof c=="number")return Xe;if(c instanceof Or)return Rt;if(c instanceof No)return mr;if(c instanceof Ur)return ue;if(c instanceof Wr)return Y;if(c instanceof Wn)return N;if(c instanceof qn)return Q;if(Array.isArray(c)){const o=c.length;let u;for(const f of c){const g=In(f);if(u){if(u===g)continue;u=Bt;break}u=g}return X(u||Bt,o)}return vr}function Yr(c){const o=typeof c;return c===null?"":o==="string"||o==="number"||o==="boolean"?String(c):c instanceof Or||c instanceof Ur||c instanceof Wr||c instanceof Wn||c instanceof qn?c.toString():JSON.stringify(c)}class ml{constructor(o,u){this.type=o,this.value=u}static parse(o,u){if(o.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!ji(o[1]))return u.error("invalid value");const f=o[1];let g=In(f);const x=u.expectedType;return g.kind!=="array"||g.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(g=x),new ml(g,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class zn{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const $d={string:Tt,number:Xe,boolean:gt,object:vr};class jo{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");let f,g=1;const x=o[0];if(x==="array"){let C,P;if(o.length>2){const M=o[1];if(typeof M!="string"||!(M in $d)||M==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);C=$d[M],g++}else C=Bt;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return u.error('The length argument to "array" must be a positive integer literal',2);P=o[2],g++}f=X(C,P)}else{if(!$d[x])throw new Error(`Types doesn't contain name = ${x}`);f=$d[x]}const w=[];for(;g<o.length;g++){const C=u.parse(o[g],g,Bt);if(!C)return null;w.push(C)}return new jo(f,w)}evaluate(o){for(let u=0;u<this.args.length;u++){const f=this.args[u].evaluate(o);if(!pe(this.type,In(f)))return f;if(u===this.args.length-1)throw new zn(`Expected value to be of type ${re(this.type)}, but found ${re(In(f))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const Jf={"to-boolean":gt,"to-color":Rt,"to-number":Xe,"to-string":Tt};class Ls{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const f=o[0];if(!Jf[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&o.length!==2)return u.error("Expected one argument.");const g=Jf[f],x=[];for(let w=1;w<o.length;w++){const C=u.parse(o[w],w,Bt);if(!C)return null;x.push(C)}return new Ls(g,x)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let u,f;for(const g of this.args){if(u=g.evaluate(o),f=null,u instanceof Or)return u;if(typeof u=="string"){const x=o.parseColor(u);if(x)return x}else if(Array.isArray(u)&&(f=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Co(u[0],u[1],u[2],u[3]),!f))return new Or(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new zn(f||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const f of this.args){u=f.evaluate(o);const g=Wr.parse(u);if(g)return g}throw new zn(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const f of this.args){u=f.evaluate(o);const g=Wn.parse(u);if(g)return g}throw new zn(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const f of this.args){if(u=f.evaluate(o),u===null)return 0;const g=Number(u);if(!isNaN(g))return g}throw new zn(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return Ur.fromString(Yr(this.args[0].evaluate(o)));case"resolvedImage":return qn.fromString(Yr(this.args[0].evaluate(o)));default:return Yr(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const Rv=["Unknown","Point","LineString","Polygon"];class Qf{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Rv[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let u=this._parseColorCache[o];return u||(u=this._parseColorCache[o]=Or.parse(o)),u}}class Bd{constructor(o,u,f=[],g,x=new Ee,w=[]){this.registry=o,this.path=f,this.key=f.map(C=>`[${C}]`).join(""),this.scope=x,this.errors=w,this.expectedType=g,this._isConstant=u}parse(o,u,f,g,x={}){return u?this.concat(u,f,g)._parse(o,x):this._parse(o,x)}_parse(o,u){function f(g,x,w){return w==="assert"?new jo(x,[g]):w==="coerce"?new Ls(x,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=o[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[g];if(x){let w=x.parse(o,this);if(!w)return null;if(this.expectedType){const C=this.expectedType,P=w.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||P.kind!=="value")if(C.kind!=="color"&&C.kind!=="formatted"&&C.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(C.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(C.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(C,P))return null}else w=f(w,C,u.typeAnnotation||"coerce");else w=f(w,C,u.typeAnnotation||"coerce");else w=f(w,C,u.typeAnnotation||"coerce");else w=f(w,C,u.typeAnnotation||"assert")}if(!(w instanceof ml)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){const C=new Qf;try{w=new ml(w.type,w.evaluate(C))}catch(P){return this.error(P.message),null}}return w}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,u,f){const g=typeof o=="number"?this.path.concat(o):this.path,x=f?this.scope.concat(f):this.scope;return new Bd(this.registry,this._isConstant,g,u||null,x,this.errors)}error(o,...u){const f=`${this.key}${u.map(g=>`[${g}]`).join("")}`;this.errors.push(new bt(f,o))}checkSubtype(o,u){const f=pe(o,u);return f&&this.error(f),f}}class Fd{constructor(o,u,f){this.type=mr,this.locale=f,this.caseSensitive=o,this.diacriticSensitive=u}static parse(o,u){if(o.length!==2)return u.error("Expected one argument.");const f=o[1];if(typeof f!="object"||Array.isArray(f))return u.error("Collator options argument must be an object.");const g=u.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,gt);if(!g)return null;const x=u.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,gt);if(!x)return null;let w=null;return f.locale&&(w=u.parse(f.locale,1,Tt),!w)?null:new Fd(g,x,w)}evaluate(o){return new No(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}const Os=8192;function ep(c,o){c[0]=Math.min(c[0],o[0]),c[1]=Math.min(c[1],o[1]),c[2]=Math.max(c[2],o[0]),c[3]=Math.max(c[3],o[1])}function xu(c,o){return!(c[0]<=o[0]||c[2]>=o[2]||c[1]<=o[1]||c[3]>=o[3])}function Dv(c,o){const u=(180+c[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(u*g*Os),Math.round(f*g*Os)]}function qb(c,o,u){const f=c[0]-o[0],g=c[1]-o[1],x=c[0]-u[0],w=c[1]-u[1];return f*w-x*g==0&&f*x<=0&&g*w<=0}function tp(c,o){let u=!1;for(let w=0,C=o.length;w<C;w++){const P=o[w];for(let M=0,U=P.length;M<U-1;M++){if(qb(c,P[M],P[M+1]))return!1;(g=P[M])[1]>(f=c)[1]!=(x=P[M+1])[1]>f[1]&&f[0]<(x[0]-g[0])*(f[1]-g[1])/(x[1]-g[1])+g[0]&&(u=!u)}}var f,g,x;return u}function rp(c,o){for(let u=0;u<o.length;u++)if(tp(c,o[u]))return!0;return!1}function Mv(c,o,u,f){const g=f[0]-u[0],x=f[1]-u[1],w=(c[0]-u[0])*x-g*(c[1]-u[1]),C=(o[0]-u[0])*x-g*(o[1]-u[1]);return w>0&&C<0||w<0&&C>0}function Zb(c,o,u){for(const M of u)for(let U=0;U<M.length-1;++U)if((C=[(w=M[U+1])[0]-(x=M[U])[0],w[1]-x[1]])[0]*(P=[(g=o)[0]-(f=c)[0],g[1]-f[1]])[1]-C[1]*P[0]!=0&&Mv(f,g,x,w)&&Mv(x,w,f,g))return!0;var f,g,x,w,C,P;return!1}function zv(c,o){for(let u=0;u<c.length;++u)if(!tp(c[u],o))return!1;for(let u=0;u<c.length-1;++u)if(Zb(c[u],c[u+1],o))return!1;return!0}function Lv(c,o){for(let u=0;u<o.length;u++)if(zv(c,o[u]))return!0;return!1}function Nd(c,o,u){const f=[];for(let g=0;g<c.length;g++){const x=[];for(let w=0;w<c[g].length;w++){const C=Dv(c[g][w],u);ep(o,C),x.push(C)}f.push(x)}return f}function Ov(c,o,u){const f=[];for(let g=0;g<c.length;g++){const x=Nd(c[g],o,u);f.push(x)}return f}function $v(c,o,u,f){if(c[0]<u[0]||c[0]>u[2]){const g=.5*f;let x=c[0]-u[0]>g?-f:u[0]-c[0]>g?f:0;x===0&&(x=c[0]-u[2]>g?-f:u[2]-c[0]>g?f:0),c[0]+=x}ep(o,c)}function np(c,o,u,f){const g=Math.pow(2,f.z)*Os,x=[f.x*Os,f.y*Os],w=[];for(const C of c)for(const P of C){const M=[P.x+x[0],P.y+x[1]];$v(M,o,u,g),w.push(M)}return w}function ip(c,o,u,f){const g=Math.pow(2,f.z)*Os,x=[f.x*Os,f.y*Os],w=[];for(const P of c){const M=[];for(const U of P){const q=[U.x+x[0],U.y+x[1]];ep(o,q),M.push(q)}w.push(M)}if(o[2]-o[0]<=g/2){(C=o)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const P of w)for(const M of P)$v(M,o,u,g)}var C;return w}class gl{constructor(o,u){this.type=gt,this.geojson=o,this.geometries=u}static parse(o,u){if(o.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(ji(o[1])){const f=o[1];if(f.type==="FeatureCollection")for(let g=0;g<f.features.length;++g){const x=f.features[g].geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new gl(f,f.features[g].geometry)}else if(f.type==="Feature"){const g=f.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new gl(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new gl(f,f)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(u,f){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(f.type==="Polygon"){const C=Nd(f.coordinates,x,w),P=np(u.geometry(),g,x,w);if(!xu(g,x))return!1;for(const M of P)if(!tp(M,C))return!1}if(f.type==="MultiPolygon"){const C=Ov(f.coordinates,x,w),P=np(u.geometry(),g,x,w);if(!xu(g,x))return!1;for(const M of P)if(!rp(M,C))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(u,f){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(f.type==="Polygon"){const C=Nd(f.coordinates,x,w),P=ip(u.geometry(),g,x,w);if(!xu(g,x))return!1;for(const M of P)if(!zv(M,C))return!1}if(f.type==="MultiPolygon"){const C=Ov(f.coordinates,x,w),P=ip(u.geometry(),g,x,w);if(!xu(g,x))return!1;for(const M of P)if(!Lv(M,C))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class jd{constructor(o,u){this.type=u.type,this.name=o,this.boundExpression=u}static parse(o,u){if(o.length!==2||typeof o[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const f=o[1];return u.scope.has(f)?new jd(f,u.scope.get(f)):u.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class Vo{constructor(o,u,f,g){this.name=o,this.type=u,this._evaluate=f,this.args=g}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,u){const f=o[0],g=Vo.definitions[f];if(!g)return u.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(g)?g[0]:g.type,w=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,C=w.filter(([M])=>!Array.isArray(M)||M.length===o.length-1);let P=null;for(const[M,U]of C){P=new Bd(u.registry,Vd,u.path,null,u.scope);const q=[];let ee=!1;for(let oe=1;oe<o.length;oe++){const ae=o[oe],ce=Array.isArray(M)?M[oe-1]:M.type,ve=P.parse(ae,1+q.length,ce);if(!ve){ee=!0;break}q.push(ve)}if(!ee)if(Array.isArray(M)&&M.length!==q.length)P.error(`Expected ${M.length} arguments, but found ${q.length} instead.`);else{for(let oe=0;oe<q.length;oe++){const ae=Array.isArray(M)?M[oe]:M.type,ce=q[oe];P.concat(oe+1).checkSubtype(ae,ce.type)}if(P.errors.length===0)return new Vo(f,x,U,q)}}if(C.length===1)u.errors.push(...P.errors);else{const M=(C.length?C:w).map(([q])=>{return ee=q,Array.isArray(ee)?`(${ee.map(re).join(", ")})`:`(${re(ee.type)}...)`;var ee}).join(" | "),U=[];for(let q=1;q<o.length;q++){const ee=u.parse(o[q],1+U.length);if(!ee)return null;U.push(re(ee.type))}u.error(`Expected arguments of type ${M}, but found (${U.join(", ")}) instead.`)}return null}static register(o,u){Vo.definitions=u;for(const f in u)o[f]=Vo}}function Vd(c){if(c instanceof jd)return Vd(c.boundExpression);if(c instanceof Vo&&c.name==="error"||c instanceof Fd||c instanceof gl)return!1;const o=c instanceof Ls||c instanceof jo;let u=!0;return c.eachChild(f=>{u=o?u&&Vd(f):u&&f instanceof ml}),!!u&&Ud(c)&&Hd(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ud(c){if(c instanceof Vo&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof gl)return!1;let o=!0;return c.eachChild(u=>{o&&!Ud(u)&&(o=!1)}),o}function bu(c){if(c instanceof Vo&&c.name==="feature-state")return!1;let o=!0;return c.eachChild(u=>{o&&!bu(u)&&(o=!1)}),o}function Hd(c,o){if(c instanceof Vo&&o.indexOf(c.name)>=0)return!1;let u=!0;return c.eachChild(f=>{u&&!Hd(f,o)&&(u=!1)}),u}function hc(c,o){const u=c.length-1;let f,g,x=0,w=u,C=0;for(;x<=w;)if(C=Math.floor((x+w)/2),f=c[C],g=c[C+1],f<=o){if(C===u||o<g)return C;x=C+1}else{if(!(f>o))throw new zn("Input is not a number.");w=C-1}return 0}class $s{constructor(o,u,f){this.type=o,this.input=u,this.labels=[],this.outputs=[];for(const[g,x]of f)this.labels.push(g),this.outputs.push(x)}static parse(o,u){if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");const f=u.parse(o[1],1,Xe);if(!f)return null;const g=[];let x=null;u.expectedType&&u.expectedType.kind!=="value"&&(x=u.expectedType);for(let w=1;w<o.length;w+=2){const C=w===1?-1/0:o[w],P=o[w+1],M=w,U=w+1;if(typeof C!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(g.length&&g[g.length-1][0]>=C)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);const q=u.parse(P,U,x);if(!q)return null;x=x||q.type,g.push([C,q])}return new $s(x,f,g)}evaluate(o){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=u[0])return f[0].evaluate(o);const x=u.length;return g>=u[x-1]?f[x-1].evaluate(o):f[hc(u,g)].evaluate(o)}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function $r(c,o,u){return c+u*(o-c)}function Gd(c,o,u){return c.map((f,g)=>$r(f,o[g],u))}const ko={number:$r,color:function(c,o,u,f="rgb"){switch(f){case"rgb":{const[g,x,w,C]=Gd(c.rgb,o.rgb,u);return new Or(g,x,w,C,!1)}case"hcl":{const[g,x,w,C]=c.hcl,[P,M,U,q]=o.hcl;let ee,oe;if(isNaN(g)||isNaN(P))isNaN(g)?isNaN(P)?ee=NaN:(ee=P,w!==1&&w!==0||(oe=M)):(ee=g,U!==1&&U!==0||(oe=x));else{let ze=P-g;P>g&&ze>180?ze-=360:P<g&&g-P>180&&(ze+=360),ee=g+u*ze}const[ae,ce,ve,be]=function([ze,ke,Be,Ge]){return ze=isNaN(ze)?0:ze*Oe,ir([Be,Math.cos(ze)*ke,Math.sin(ze)*ke,Ge])}([ee,oe??$r(x,M,u),$r(w,U,u),$r(C,q,u)]);return new Or(ae,ce,ve,be,!1)}case"lab":{const[g,x,w,C]=ir(Gd(c.lab,o.lab,u));return new Or(g,x,w,C,!1)}}},array:Gd,padding:function(c,o,u){return new Wr(Gd(c.values,o.values,u))},variableAnchorOffsetCollection:function(c,o,u){const f=c.values,g=o.values;if(f.length!==g.length)throw new zn(`Cannot interpolate values of different length. from: ${c.toString()}, to: ${o.toString()}`);const x=[];for(let w=0;w<f.length;w+=2){if(f[w]!==g[w])throw new zn(`Cannot interpolate values containing mismatched anchors. from[${w}]: ${f[w]}, to[${w}]: ${g[w]}`);x.push(f[w]);const[C,P]=f[w+1],[M,U]=g[w+1];x.push([$r(C,M,u),$r(P,U,u)])}return new Wn(x)}};class To{constructor(o,u,f,g,x){this.type=o,this.operator=u,this.interpolation=f,this.input=g,this.labels=[],this.outputs=[];for(const[w,C]of x)this.labels.push(w),this.outputs.push(C)}static interpolationFactor(o,u,f,g){let x=0;if(o.name==="exponential")x=op(u,o.base,f,g);else if(o.name==="linear")x=op(u,1,f,g);else if(o.name==="cubic-bezier"){const w=o.controlPoints;x=new V(w[0],w[1],w[2],w[3]).solve(op(u,1,f,g))}return x}static parse(o,u){let[f,g,x,...w]=o;if(!Array.isArray(g)||g.length===0)return u.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const M=g[1];if(typeof M!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:M}}else{if(g[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const M=g.slice(1);if(M.length!==4||M.some(U=>typeof U!="number"||U<0||U>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:M}}}if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(x=u.parse(x,2,Xe),!x)return null;const C=[];let P=null;f==="interpolate-hcl"||f==="interpolate-lab"?P=Rt:u.expectedType&&u.expectedType.kind!=="value"&&(P=u.expectedType);for(let M=0;M<w.length;M+=2){const U=w[M],q=w[M+1],ee=M+3,oe=M+4;if(typeof U!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ee);if(C.length&&C[C.length-1][0]>=U)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ee);const ae=u.parse(q,oe,P);if(!ae)return null;P=P||ae.type,C.push([U,ae])}return Ae(P,Xe)||Ae(P,Rt)||Ae(P,Y)||Ae(P,N)||Ae(P,X(Xe))?new To(P,f,g,x,C):u.error(`Type ${re(P)} is not interpolatable.`)}evaluate(o){const u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(o);const g=this.input.evaluate(o);if(g<=u[0])return f[0].evaluate(o);const x=u.length;if(g>=u[x-1])return f[x-1].evaluate(o);const w=hc(u,g),C=To.interpolationFactor(this.interpolation,g,u[w],u[w+1]),P=f[w].evaluate(o),M=f[w+1].evaluate(o);switch(this.operator){case"interpolate":return ko[this.type.kind](P,M,C);case"interpolate-hcl":return ko.color(P,M,C,"hcl");case"interpolate-lab":return ko.color(P,M,C,"lab")}}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function op(c,o,u,f){const g=f-u,x=c-u;return g===0?0:o===1?x/g:(Math.pow(o,x)-1)/(Math.pow(o,g)-1)}class Wd{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expectected at least one argument.");let f=null;const g=u.expectedType;g&&g.kind!=="value"&&(f=g);const x=[];for(const C of o.slice(1)){const P=u.parse(C,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!P)return null;f=f||P.type,x.push(P)}if(!f)throw new Error("No output type");const w=g&&x.some(C=>pe(g,C.type));return new Wd(w?Bt:f,x)}evaluate(o){let u,f=null,g=0;for(const x of this.args)if(g++,f=x.evaluate(o),f&&f instanceof qn&&!f.available&&(u||(u=f.name),f=null,g===this.args.length&&(f=u)),f!==null)break;return f}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}class qd{constructor(o,u){this.type=u.type,this.bindings=[].concat(o),this.result=u}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const u of this.bindings)o(u[1]);o(this.result)}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const f=[];for(let x=1;x<o.length-1;x+=2){const w=o[x];if(typeof w!="string")return u.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return u.error("Variable names must contain only alphanumeric characters or '_'.",x);const C=u.parse(o[x+1],x+1);if(!C)return null;f.push([w,C])}const g=u.parse(o[o.length-1],o.length-1,u.expectedType,f);return g?new qd(f,g):null}outputDefined(){return this.result.outputDefined()}}class ap{constructor(o,u,f){this.type=o,this.index=u,this.input=f}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=u.parse(o[1],1,Xe),g=u.parse(o[2],2,X(u.expectedType||Bt));return f&&g?new ap(g.type.itemType,f,g):null}evaluate(o){const u=this.index.evaluate(o),f=this.input.evaluate(o);if(u<0)throw new zn(`Array index out of bounds: ${u} < 0.`);if(u>=f.length)throw new zn(`Array index out of bounds: ${u} > ${f.length-1}.`);if(u!==Math.floor(u))throw new zn(`Array index must be an integer, but found ${u} instead.`);return f[u]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class sp{constructor(o,u){this.type=gt,this.needle=o,this.haystack=u}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const f=u.parse(o[1],1,Bt),g=u.parse(o[2],2,Bt);return f&&g?se(f.type,[gt,Tt,Xe,Ve,Bt])?new sp(f,g):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${re(f.type)} instead`):null}evaluate(o){const u=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(!f)return!1;if(!_e(u,["boolean","string","number","null"]))throw new zn(`Expected first argument to be of type boolean, string, number or null, but found ${re(In(u))} instead.`);if(!_e(f,["string","array"]))throw new zn(`Expected second argument to be of type array or string, but found ${re(In(f))} instead.`);return f.indexOf(u)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class Zd{constructor(o,u,f){this.type=Xe,this.needle=o,this.haystack=u,this.fromIndex=f}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=u.parse(o[1],1,Bt),g=u.parse(o[2],2,Bt);if(!f||!g)return null;if(!se(f.type,[gt,Tt,Xe,Ve,Bt]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${re(f.type)} instead`);if(o.length===4){const x=u.parse(o[3],3,Xe);return x?new Zd(f,g,x):null}return new Zd(f,g)}evaluate(o){const u=this.needle.evaluate(o),f=this.haystack.evaluate(o);if(!_e(u,["boolean","string","number","null"]))throw new zn(`Expected first argument to be of type boolean, string, number or null, but found ${re(In(u))} instead.`);if(!_e(f,["string","array"]))throw new zn(`Expected second argument to be of type array or string, but found ${re(In(f))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(o);return f.indexOf(u,g)}return f.indexOf(u)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class lp{constructor(o,u,f,g,x,w){this.inputType=o,this.type=u,this.input=f,this.cases=g,this.outputs=x,this.otherwise=w}static parse(o,u){if(o.length<5)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return u.error("Expected an even number of arguments.");let f,g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const x={},w=[];for(let M=2;M<o.length-1;M+=2){let U=o[M];const q=o[M+1];Array.isArray(U)||(U=[U]);const ee=u.concat(M);if(U.length===0)return ee.error("Expected at least one branch label.");for(const ae of U){if(typeof ae!="number"&&typeof ae!="string")return ee.error("Branch labels must be numbers or strings.");if(typeof ae=="number"&&Math.abs(ae)>Number.MAX_SAFE_INTEGER)return ee.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ae=="number"&&Math.floor(ae)!==ae)return ee.error("Numeric branch labels must be integer values.");if(f){if(ee.checkSubtype(f,In(ae)))return null}else f=In(ae);if(x[String(ae)]!==void 0)return ee.error("Branch labels must be unique.");x[String(ae)]=w.length}const oe=u.parse(q,M,g);if(!oe)return null;g=g||oe.type,w.push(oe)}const C=u.parse(o[1],1,Bt);if(!C)return null;const P=u.parse(o[o.length-1],o.length-1,g);return P?C.type.kind!=="value"&&u.concat(1).checkSubtype(f,C.type)?null:new lp(f,g,C,x,w,P):null}evaluate(o){const u=this.input.evaluate(o);return(In(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class cp{constructor(o,u,f){this.type=o,this.branches=u,this.otherwise=f}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return u.error("Expected an odd number of arguments.");let f;u.expectedType&&u.expectedType.kind!=="value"&&(f=u.expectedType);const g=[];for(let w=1;w<o.length-1;w+=2){const C=u.parse(o[w],w,gt);if(!C)return null;const P=u.parse(o[w+1],w+1,f);if(!P)return null;g.push([C,P]),f=f||P.type}const x=u.parse(o[o.length-1],o.length-1,f);if(!x)return null;if(!f)throw new Error("Can't infer output type");return new cp(f,g,x)}evaluate(o){for(const[u,f]of this.branches)if(u.evaluate(o))return f.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[u,f]of this.branches)o(u),o(f);o(this.otherwise)}outputDefined(){return this.branches.every(([o,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class Kd{constructor(o,u,f,g){this.type=o,this.input=u,this.beginIndex=f,this.endIndex=g}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const f=u.parse(o[1],1,Bt),g=u.parse(o[2],2,Xe);if(!f||!g)return null;if(!se(f.type,[X(Bt),Tt,Bt]))return u.error(`Expected first argument to be of type array or string, but found ${re(f.type)} instead`);if(o.length===4){const x=u.parse(o[3],3,Xe);return x?new Kd(f.type,f,g,x):null}return new Kd(f.type,f,g)}evaluate(o){const u=this.input.evaluate(o),f=this.beginIndex.evaluate(o);if(!_e(u,["string","array"]))throw new zn(`Expected first argument to be of type array or string, but found ${re(In(u))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(o);return u.slice(f,g)}return u.slice(f)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function Bv(c,o){return c==="=="||c==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Fv(c,o,u,f){return f.compare(o,u)===0}function fc(c,o,u){const f=c!=="=="&&c!=="!=";return class V5{constructor(x,w,C){this.type=gt,this.lhs=x,this.rhs=w,this.collator=C,this.hasUntypedArgument=x.type.kind==="value"||w.type.kind==="value"}static parse(x,w){if(x.length!==3&&x.length!==4)return w.error("Expected two or three arguments.");const C=x[0];let P=w.parse(x[1],1,Bt);if(!P)return null;if(!Bv(C,P.type))return w.concat(1).error(`"${C}" comparisons are not supported for type '${re(P.type)}'.`);let M=w.parse(x[2],2,Bt);if(!M)return null;if(!Bv(C,M.type))return w.concat(2).error(`"${C}" comparisons are not supported for type '${re(M.type)}'.`);if(P.type.kind!==M.type.kind&&P.type.kind!=="value"&&M.type.kind!=="value")return w.error(`Cannot compare types '${re(P.type)}' and '${re(M.type)}'.`);f&&(P.type.kind==="value"&&M.type.kind!=="value"?P=new jo(M.type,[P]):P.type.kind!=="value"&&M.type.kind==="value"&&(M=new jo(P.type,[M])));let U=null;if(x.length===4){if(P.type.kind!=="string"&&M.type.kind!=="string"&&P.type.kind!=="value"&&M.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(U=w.parse(x[3],3,mr),!U)return null}return new V5(P,M,U)}evaluate(x){const w=this.lhs.evaluate(x),C=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){const P=In(w),M=In(C);if(P.kind!==M.kind||P.kind!=="string"&&P.kind!=="number")throw new zn(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${P.kind}, ${M.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const P=In(w),M=In(C);if(P.kind!=="string"||M.kind!=="string")return o(x,w,C)}return this.collator?u(x,w,C,this.collator.evaluate(x)):o(x,w,C)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const Kb=fc("==",function(c,o,u){return o===u},Fv),Xb=fc("!=",function(c,o,u){return o!==u},function(c,o,u,f){return!Fv(0,o,u,f)}),Yb=fc("<",function(c,o,u){return o<u},function(c,o,u,f){return f.compare(o,u)<0}),Jb=fc(">",function(c,o,u){return o>u},function(c,o,u,f){return f.compare(o,u)>0}),Qb=fc("<=",function(c,o,u){return o<=u},function(c,o,u,f){return f.compare(o,u)<=0}),e1=fc(">=",function(c,o,u){return o>=u},function(c,o,u,f){return f.compare(o,u)>=0});class up{constructor(o,u,f,g,x){this.type=Tt,this.number=o,this.locale=u,this.currency=f,this.minFractionDigits=g,this.maxFractionDigits=x}static parse(o,u){if(o.length!==3)return u.error("Expected two arguments.");const f=u.parse(o[1],1,Xe);if(!f)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return u.error("NumberFormat options argument must be an object.");let x=null;if(g.locale&&(x=u.parse(g.locale,1,Tt),!x))return null;let w=null;if(g.currency&&(w=u.parse(g.currency,1,Tt),!w))return null;let C=null;if(g["min-fraction-digits"]&&(C=u.parse(g["min-fraction-digits"],1,Xe),!C))return null;let P=null;return g["max-fraction-digits"]&&(P=u.parse(g["max-fraction-digits"],1,Xe),!P)?null:new up(f,x,w,C,P)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class Xd{constructor(o){this.type=ue,this.sections=o}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const f=o[1];if(!Array.isArray(f)&&typeof f=="object")return u.error("First argument must be an image or text section.");const g=[];let x=!1;for(let w=1;w<=o.length-1;++w){const C=o[w];if(x&&typeof C=="object"&&!Array.isArray(C)){x=!1;let P=null;if(C["font-scale"]&&(P=u.parse(C["font-scale"],1,Xe),!P))return null;let M=null;if(C["text-font"]&&(M=u.parse(C["text-font"],1,X(Tt)),!M))return null;let U=null;if(C["text-color"]&&(U=u.parse(C["text-color"],1,Rt),!U))return null;const q=g[g.length-1];q.scale=P,q.font=M,q.textColor=U}else{const P=u.parse(o[w],1,Bt);if(!P)return null;const M=P.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,g.push({content:P,scale:null,font:null,textColor:null})}}return new Xd(g)}evaluate(o){return new Ur(this.sections.map(u=>{const f=u.content.evaluate(o);return In(f)===Q?new Wt("",f,null,null,null):new Wt(Yr(f),null,u.scale?u.scale.evaluate(o):null,u.font?u.font.evaluate(o).join(","):null,u.textColor?u.textColor.evaluate(o):null)}))}eachChild(o){for(const u of this.sections)o(u.content),u.scale&&o(u.scale),u.font&&o(u.font),u.textColor&&o(u.textColor)}outputDefined(){return!1}}class dp{constructor(o){this.type=Q,this.input=o}static parse(o,u){if(o.length!==2)return u.error("Expected two arguments.");const f=u.parse(o[1],1,Tt);return f?new dp(f):u.error("No image name provided.")}evaluate(o){const u=this.input.evaluate(o),f=qn.fromString(u);return f&&o.availableImages&&(f.available=o.availableImages.indexOf(u)>-1),f}eachChild(o){o(this.input)}outputDefined(){return!1}}class hp{constructor(o){this.type=Xe,this.input=o}static parse(o,u){if(o.length!==2)return u.error(`Expected 1 argument, but found ${o.length-1} instead.`);const f=u.parse(o[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${re(f.type)} instead.`):new hp(f):null}evaluate(o){const u=this.input.evaluate(o);if(typeof u=="string"||Array.isArray(u))return u.length;throw new zn(`Expected value to be of type string or array, but found ${re(In(u))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const pc={"==":Kb,"!=":Xb,">":Jb,"<":Yb,">=":e1,"<=":Qb,array:jo,at:ap,boolean:jo,case:cp,coalesce:Wd,collator:Fd,format:Xd,image:dp,in:sp,"index-of":Zd,interpolate:To,"interpolate-hcl":To,"interpolate-lab":To,length:hp,let:qd,literal:ml,match:lp,number:jo,"number-format":up,object:jo,slice:Kd,step:$s,string:jo,"to-boolean":Ls,"to-color":Ls,"to-number":Ls,"to-string":Ls,var:jd,within:gl};function Nv(c,[o,u,f,g]){o=o.evaluate(c),u=u.evaluate(c),f=f.evaluate(c);const x=g?g.evaluate(c):1,w=Co(o,u,f,x);if(w)throw new zn(w);return new Or(o/255,u/255,f/255,x,!1)}function jv(c,o){return c in o}function fp(c,o){const u=o[c];return u===void 0?null:u}function vl(c){return{type:c}}function Vv(c){return{result:"success",value:c}}function Bs(c){return{result:"error",value:c}}function mc(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function Uv(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function pp(c){return!!c.expression&&c.expression.interpolated}function Jr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Pn(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function t1(c){return c}function Br(c,o){const u=o.type==="color",f=c.stops&&typeof c.stops[0][0]=="object",g=f||!(f||c.property!==void 0),x=c.type||(pp(o)?"exponential":"interval");if(u||o.type==="padding"){const U=u?Or.parse:Wr.parse;(c=kt({},c)).stops&&(c.stops=c.stops.map(q=>[q[0],U(q[1])])),c.default=U(c.default?c.default:o.default)}if(c.colorSpace&&(w=c.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var w;let C,P,M;if(x==="exponential")C=wu;else if(x==="interval")C=Sn;else if(x==="categorical"){C=An,P=Object.create(null);for(const U of c.stops)P[U[0]]=U[1];M=typeof c.stops[0][0]}else{if(x!=="identity")throw new Error(`Unknown function type "${x}"`);C=Hv}if(f){const U={},q=[];for(let ae=0;ae<c.stops.length;ae++){const ce=c.stops[ae],ve=ce[0].zoom;U[ve]===void 0&&(U[ve]={zoom:ve,type:c.type,property:c.property,default:c.default,stops:[]},q.push(ve)),U[ve].stops.push([ce[0].value,ce[1]])}const ee=[];for(const ae of q)ee.push([U[ae].zoom,Br(U[ae],o)]);const oe={name:"linear"};return{kind:"composite",interpolationType:oe,interpolationFactor:To.interpolationFactor.bind(void 0,oe),zoomStops:ee.map(ae=>ae[0]),evaluate:({zoom:ae},ce)=>wu({stops:ee,base:c.base},o,ae).evaluate(ae,ce)}}if(g){const U=x==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:U,interpolationFactor:To.interpolationFactor.bind(void 0,U),zoomStops:c.stops.map(q=>q[0]),evaluate:({zoom:q})=>C(c,o,q,P,M)}}return{kind:"source",evaluate(U,q){const ee=q&&q.properties?q.properties[c.property]:void 0;return ee===void 0?yl(c.default,o.default):C(c,o,ee,P,M)}}}function yl(c,o,u){return c!==void 0?c:o!==void 0?o:u!==void 0?u:void 0}function An(c,o,u,f,g){return yl(typeof u===g?f[u]:void 0,c.default,o.default)}function Sn(c,o,u){if(Jr(u)!=="number")return yl(c.default,o.default);const f=c.stops.length;if(f===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[f-1][0])return c.stops[f-1][1];const g=hc(c.stops.map(x=>x[0]),u);return c.stops[g][1]}function wu(c,o,u){const f=c.base!==void 0?c.base:1;if(Jr(u)!=="number")return yl(c.default,o.default);const g=c.stops.length;if(g===1||u<=c.stops[0][0])return c.stops[0][1];if(u>=c.stops[g-1][0])return c.stops[g-1][1];const x=hc(c.stops.map(U=>U[0]),u),w=function(U,q,ee,oe){const ae=oe-ee,ce=U-ee;return ae===0?0:q===1?ce/ae:(Math.pow(q,ce)-1)/(Math.pow(q,ae)-1)}(u,f,c.stops[x][0],c.stops[x+1][0]),C=c.stops[x][1],P=c.stops[x+1][1],M=ko[o.type]||t1;return typeof C.evaluate=="function"?{evaluate(...U){const q=C.evaluate.apply(void 0,U),ee=P.evaluate.apply(void 0,U);if(q!==void 0&&ee!==void 0)return M(q,ee,w,c.colorSpace)}}:M(C,P,w,c.colorSpace)}function Hv(c,o,u){switch(o.type){case"color":u=Or.parse(u);break;case"formatted":u=Ur.fromString(u.toString());break;case"resolvedImage":u=qn.fromString(u.toString());break;case"padding":u=Wr.parse(u);break;default:Jr(u)===o.type||o.type==="enum"&&o.values[u]||(u=void 0)}return yl(u,c.default,o.default)}Vo.register(pc,{error:[{kind:"error"},[Tt],(c,[o])=>{throw new zn(o.evaluate(c))}],typeof:[Tt,[Bt],(c,[o])=>re(In(o.evaluate(c)))],"to-rgba":[X(Xe,4),[Rt],(c,[o])=>{const[u,f,g,x]=o.evaluate(c).rgb;return[255*u,255*f,255*g,x]}],rgb:[Rt,[Xe,Xe,Xe],Nv],rgba:[Rt,[Xe,Xe,Xe,Xe],Nv],has:{type:gt,overloads:[[[Tt],(c,[o])=>jv(o.evaluate(c),c.properties())],[[Tt,vr],(c,[o,u])=>jv(o.evaluate(c),u.evaluate(c))]]},get:{type:Bt,overloads:[[[Tt],(c,[o])=>fp(o.evaluate(c),c.properties())],[[Tt,vr],(c,[o,u])=>fp(o.evaluate(c),u.evaluate(c))]]},"feature-state":[Bt,[Tt],(c,[o])=>fp(o.evaluate(c),c.featureState||{})],properties:[vr,[],c=>c.properties()],"geometry-type":[Tt,[],c=>c.geometryType()],id:[Bt,[],c=>c.id()],zoom:[Xe,[],c=>c.globals.zoom],"heatmap-density":[Xe,[],c=>c.globals.heatmapDensity||0],"line-progress":[Xe,[],c=>c.globals.lineProgress||0],accumulated:[Bt,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Xe,vl(Xe),(c,o)=>{let u=0;for(const f of o)u+=f.evaluate(c);return u}],"*":[Xe,vl(Xe),(c,o)=>{let u=1;for(const f of o)u*=f.evaluate(c);return u}],"-":{type:Xe,overloads:[[[Xe,Xe],(c,[o,u])=>o.evaluate(c)-u.evaluate(c)],[[Xe],(c,[o])=>-o.evaluate(c)]]},"/":[Xe,[Xe,Xe],(c,[o,u])=>o.evaluate(c)/u.evaluate(c)],"%":[Xe,[Xe,Xe],(c,[o,u])=>o.evaluate(c)%u.evaluate(c)],ln2:[Xe,[],()=>Math.LN2],pi:[Xe,[],()=>Math.PI],e:[Xe,[],()=>Math.E],"^":[Xe,[Xe,Xe],(c,[o,u])=>Math.pow(o.evaluate(c),u.evaluate(c))],sqrt:[Xe,[Xe],(c,[o])=>Math.sqrt(o.evaluate(c))],log10:[Xe,[Xe],(c,[o])=>Math.log(o.evaluate(c))/Math.LN10],ln:[Xe,[Xe],(c,[o])=>Math.log(o.evaluate(c))],log2:[Xe,[Xe],(c,[o])=>Math.log(o.evaluate(c))/Math.LN2],sin:[Xe,[Xe],(c,[o])=>Math.sin(o.evaluate(c))],cos:[Xe,[Xe],(c,[o])=>Math.cos(o.evaluate(c))],tan:[Xe,[Xe],(c,[o])=>Math.tan(o.evaluate(c))],asin:[Xe,[Xe],(c,[o])=>Math.asin(o.evaluate(c))],acos:[Xe,[Xe],(c,[o])=>Math.acos(o.evaluate(c))],atan:[Xe,[Xe],(c,[o])=>Math.atan(o.evaluate(c))],min:[Xe,vl(Xe),(c,o)=>Math.min(...o.map(u=>u.evaluate(c)))],max:[Xe,vl(Xe),(c,o)=>Math.max(...o.map(u=>u.evaluate(c)))],abs:[Xe,[Xe],(c,[o])=>Math.abs(o.evaluate(c))],round:[Xe,[Xe],(c,[o])=>{const u=o.evaluate(c);return u<0?-Math.round(-u):Math.round(u)}],floor:[Xe,[Xe],(c,[o])=>Math.floor(o.evaluate(c))],ceil:[Xe,[Xe],(c,[o])=>Math.ceil(o.evaluate(c))],"filter-==":[gt,[Tt,Bt],(c,[o,u])=>c.properties()[o.value]===u.value],"filter-id-==":[gt,[Bt],(c,[o])=>c.id()===o.value],"filter-type-==":[gt,[Tt],(c,[o])=>c.geometryType()===o.value],"filter-<":[gt,[Tt,Bt],(c,[o,u])=>{const f=c.properties()[o.value],g=u.value;return typeof f==typeof g&&f<g}],"filter-id-<":[gt,[Bt],(c,[o])=>{const u=c.id(),f=o.value;return typeof u==typeof f&&u<f}],"filter->":[gt,[Tt,Bt],(c,[o,u])=>{const f=c.properties()[o.value],g=u.value;return typeof f==typeof g&&f>g}],"filter-id->":[gt,[Bt],(c,[o])=>{const u=c.id(),f=o.value;return typeof u==typeof f&&u>f}],"filter-<=":[gt,[Tt,Bt],(c,[o,u])=>{const f=c.properties()[o.value],g=u.value;return typeof f==typeof g&&f<=g}],"filter-id-<=":[gt,[Bt],(c,[o])=>{const u=c.id(),f=o.value;return typeof u==typeof f&&u<=f}],"filter->=":[gt,[Tt,Bt],(c,[o,u])=>{const f=c.properties()[o.value],g=u.value;return typeof f==typeof g&&f>=g}],"filter-id->=":[gt,[Bt],(c,[o])=>{const u=c.id(),f=o.value;return typeof u==typeof f&&u>=f}],"filter-has":[gt,[Bt],(c,[o])=>o.value in c.properties()],"filter-has-id":[gt,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[gt,[X(Tt)],(c,[o])=>o.value.indexOf(c.geometryType())>=0],"filter-id-in":[gt,[X(Bt)],(c,[o])=>o.value.indexOf(c.id())>=0],"filter-in-small":[gt,[Tt,X(Bt)],(c,[o,u])=>u.value.indexOf(c.properties()[o.value])>=0],"filter-in-large":[gt,[Tt,X(Bt)],(c,[o,u])=>function(f,g,x,w){for(;x<=w;){const C=x+w>>1;if(g[C]===f)return!0;g[C]>f?w=C-1:x=C+1}return!1}(c.properties()[o.value],u.value,0,u.value.length-1)],all:{type:gt,overloads:[[[gt,gt],(c,[o,u])=>o.evaluate(c)&&u.evaluate(c)],[vl(gt),(c,o)=>{for(const u of o)if(!u.evaluate(c))return!1;return!0}]]},any:{type:gt,overloads:[[[gt,gt],(c,[o,u])=>o.evaluate(c)||u.evaluate(c)],[vl(gt),(c,o)=>{for(const u of o)if(u.evaluate(c))return!0;return!1}]]},"!":[gt,[gt],(c,[o])=>!o.evaluate(c)],"is-supported-script":[gt,[Tt],(c,[o])=>{const u=c.globals&&c.globals.isSupportedScript;return!u||u(o.evaluate(c))}],upcase:[Tt,[Tt],(c,[o])=>o.evaluate(c).toUpperCase()],downcase:[Tt,[Tt],(c,[o])=>o.evaluate(c).toLowerCase()],concat:[Tt,vl(Bt),(c,o)=>o.map(u=>Yr(u.evaluate(c))).join("")],"resolved-locale":[Tt,[mr],(c,[o])=>o.evaluate(c).resolvedLocale()]});class mp{constructor(o,u){var f;this.expression=o,this._warningHistory={},this._evaluator=new Qf,this._defaultValue=u?(f=u).type==="color"&&Pn(f.default)?new Or(0,0,0,0):f.type==="color"?Or.parse(f.default)||null:f.type==="padding"?Wr.parse(f.default)||null:f.type==="variableAnchorOffsetCollection"?Wn.parse(f.default)||null:f.default===void 0?null:f.default:null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(o,u,f,g,x,w){return this._evaluator.globals=o,this._evaluator.feature=u,this._evaluator.featureState=f,this._evaluator.canonical=g,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(o,u,f,g,x,w){this._evaluator.globals=o,this._evaluator.feature=u||null,this._evaluator.featureState=f||null,this._evaluator.canonical=g,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new zn(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function Yd(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in pc}function Jd(c,o){const u=new Bd(pc,Vd,[],o?function(g){const x={color:Rt,string:Tt,number:Xe,enum:Tt,boolean:gt,formatted:ue,padding:Y,resolvedImage:Q,variableAnchorOffsetCollection:N};return g.type==="array"?X(x[g.value]||Bt,g.length):x[g.type]}(o):void 0),f=u.parse(c,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?Vv(new mp(f,o)):Bs(u.errors)}class gp{constructor(o,u){this.kind=o,this._styleExpression=u,this.isStateDependent=o!=="constant"&&!bu(u.expression)}evaluateWithoutErrorHandling(o,u,f,g,x,w){return this._styleExpression.evaluateWithoutErrorHandling(o,u,f,g,x,w)}evaluate(o,u,f,g,x,w){return this._styleExpression.evaluate(o,u,f,g,x,w)}}class Qd{constructor(o,u,f,g){this.kind=o,this.zoomStops=f,this._styleExpression=u,this.isStateDependent=o!=="camera"&&!bu(u.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,u,f,g,x,w){return this._styleExpression.evaluateWithoutErrorHandling(o,u,f,g,x,w)}evaluate(o,u,f,g,x,w){return this._styleExpression.evaluate(o,u,f,g,x,w)}interpolationFactor(o,u,f){return this.interpolationType?To.interpolationFactor(this.interpolationType,o,u,f):0}}function vp(c,o){const u=Jd(c,o);if(u.result==="error")return u;const f=u.value.expression,g=Ud(f);if(!g&&!mc(o))return Bs([new bt("","data expressions not supported")]);const x=Hd(f,["zoom"]);if(!x&&!Uv(o))return Bs([new bt("","zoom expressions not supported")]);const w=Cu(f);return w||x?w instanceof bt?Bs([w]):w instanceof To&&!pp(o)?Bs([new bt("",'"interpolate" expressions cannot be used with this property')]):Vv(w?new Qd(g?"camera":"composite",u.value,w.labels,w instanceof To?w.interpolation:void 0):new gp(g?"constant":"source",u.value)):Bs([new bt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Su{constructor(o,u){this._parameters=o,this._specification=u,kt(this,Br(this._parameters,this._specification))}static deserialize(o){return new Su(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Cu(c){let o=null;if(c instanceof qd)o=Cu(c.result);else if(c instanceof Wd){for(const u of c.args)if(o=Cu(u),o)break}else(c instanceof $s||c instanceof To)&&c.input instanceof Vo&&c.input.name==="zoom"&&(o=c);return o instanceof bt||c.eachChild(u=>{const f=Cu(u);f instanceof bt?o=f:!o&&f?o=new bt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&f&&o!==f&&(o=new bt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function ku(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const o of c.slice(1))if(!ku(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const r1={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function yp(c){if(c==null)return{filter:()=>!0,needGeometry:!1};ku(c)||(c=eh(c));const o=Jd(c,r1);if(o.result==="error")throw new Error(o.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,f,g)=>o.value.evaluate(u,f,{},g),needGeometry:Gv(c)}}function n1(c,o){return c<o?-1:c>o?1:0}function Gv(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let o=1;o<c.length;o++)if(Gv(c[o]))return!0;return!1}function eh(c){if(!c)return!0;const o=c[0];return c.length<=1?o!=="any":o==="=="?_p(c[1],c[2],"=="):o==="!="?Tu(_p(c[1],c[2],"==")):o==="<"||o===">"||o==="<="||o===">="?_p(c[1],c[2],o):o==="any"?(u=c.slice(1),["any"].concat(u.map(eh))):o==="all"?["all"].concat(c.slice(1).map(eh)):o==="none"?["all"].concat(c.slice(1).map(eh).map(Tu)):o==="in"?Wv(c[1],c.slice(2)):o==="!in"?Tu(Wv(c[1],c.slice(2))):o==="has"?qv(c[1]):o==="!has"?Tu(qv(c[1])):o!=="within"||c;var u}function _p(c,o,u){switch(c){case"$type":return[`filter-type-${u}`,o];case"$id":return[`filter-id-${u}`,o];default:return[`filter-${u}`,c,o]}}function Wv(c,o){if(o.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(u=>typeof u!=typeof o[0])?["filter-in-large",c,["literal",o.sort(n1)]]:["filter-in-small",c,["literal",o]]}}function qv(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Tu(c){return["!",c]}function th(c){const o=typeof c;if(o==="number"||o==="boolean"||o==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let g="[";for(const x of c)g+=`${th(x)},`;return`${g}]`}const u=Object.keys(c).sort();let f="{";for(let g=0;g<u.length;g++)f+=`${JSON.stringify(u[g])}:${th(c[u[g]])},`;return`${f}}`}function rh(c){let o="";for(const u of xr)o+=`/${th(c[u])}`;return o}function Zv(c){const o=c.value;return o?[new je(c.key,o,"constants have been deprecated as of v8")]:[]}function Ln(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function _l(c){if(Array.isArray(c))return c.map(_l);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const o={};for(const u in c)o[u]=_l(c[u]);return o}return Ln(c)}function ro(c){const o=c.key,u=c.value,f=c.valueSpec||{},g=c.objectElementValidators||{},x=c.style,w=c.styleSpec,C=c.validateSpec;let P=[];const M=Jr(u);if(M!=="object")return[new je(o,u,`object expected, ${M} found`)];for(const U in u){const q=U.split(".")[0],ee=f[q]||f["*"];let oe;if(g[q])oe=g[q];else if(f[q])oe=C;else if(g["*"])oe=g["*"];else{if(!f["*"]){P.push(new je(o,u[U],`unknown property "${U}"`));continue}oe=C}P=P.concat(oe({key:(o&&`${o}.`)+U,value:u[U],valueSpec:ee,style:x,styleSpec:w,object:u,objectKey:U,validateSpec:C},u))}for(const U in f)g[U]||f[U].required&&f[U].default===void 0&&u[U]===void 0&&P.push(new je(o,u,`missing required property "${U}"`));return P}function gc(c){const o=c.value,u=c.valueSpec,f=c.style,g=c.styleSpec,x=c.key,w=c.arrayElementValidator||c.validateSpec;if(Jr(o)!=="array")return[new je(x,o,`array expected, ${Jr(o)} found`)];if(u.length&&o.length!==u.length)return[new je(x,o,`array length ${u.length} expected, length ${o.length} found`)];if(u["min-length"]&&o.length<u["min-length"])return[new je(x,o,`array length at least ${u["min-length"]} expected, length ${o.length} found`)];let C={type:u.value,values:u.values};g.$version<7&&(C.function=u.function),Jr(u.value)==="object"&&(C=u.value);let P=[];for(let M=0;M<o.length;M++)P=P.concat(w({array:o,arrayIndex:M,value:o[M],valueSpec:C,validateSpec:c.validateSpec,style:f,styleSpec:g,key:`${x}[${M}]`}));return P}function Eu(c){const o=c.key,u=c.value,f=c.valueSpec;let g=Jr(u);return g==="number"&&u!=u&&(g="NaN"),g!=="number"?[new je(o,u,`number expected, ${g} found`)]:"minimum"in f&&u<f.minimum?[new je(o,u,`${u} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&u>f.maximum?[new je(o,u,`${u} is greater than the maximum value ${f.maximum}`)]:[]}function nh(c){const o=c.valueSpec,u=Ln(c.value.type);let f,g,x,w={};const C=u!=="categorical"&&c.value.property===void 0,P=!C,M=Jr(c.value.stops)==="array"&&Jr(c.value.stops[0])==="array"&&Jr(c.value.stops[0][0])==="object",U=ro({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(oe){if(u==="identity")return[new je(oe.key,oe.value,'identity function may not have a "stops" property')];let ae=[];const ce=oe.value;return ae=ae.concat(gc({key:oe.key,value:ce,valueSpec:oe.valueSpec,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec,arrayElementValidator:q})),Jr(ce)==="array"&&ce.length===0&&ae.push(new je(oe.key,ce,"array must have at least one stop")),ae},default:function(oe){return oe.validateSpec({key:oe.key,value:oe.value,valueSpec:o,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec})}}});return u==="identity"&&C&&U.push(new je(c.key,c.value,'missing required property "property"')),u==="identity"||c.value.stops||U.push(new je(c.key,c.value,'missing required property "stops"')),u==="exponential"&&c.valueSpec.expression&&!pp(c.valueSpec)&&U.push(new je(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(P&&!mc(c.valueSpec)?U.push(new je(c.key,c.value,"property functions not supported")):C&&!Uv(c.valueSpec)&&U.push(new je(c.key,c.value,"zoom functions not supported"))),u!=="categorical"&&!M||c.value.property!==void 0||U.push(new je(c.key,c.value,'"property" property is required')),U;function q(oe){let ae=[];const ce=oe.value,ve=oe.key;if(Jr(ce)!=="array")return[new je(ve,ce,`array expected, ${Jr(ce)} found`)];if(ce.length!==2)return[new je(ve,ce,`array length 2 expected, length ${ce.length} found`)];if(M){if(Jr(ce[0])!=="object")return[new je(ve,ce,`object expected, ${Jr(ce[0])} found`)];if(ce[0].zoom===void 0)return[new je(ve,ce,"object stop key must have zoom")];if(ce[0].value===void 0)return[new je(ve,ce,"object stop key must have value")];if(x&&x>Ln(ce[0].zoom))return[new je(ve,ce[0].zoom,"stop zoom values must appear in ascending order")];Ln(ce[0].zoom)!==x&&(x=Ln(ce[0].zoom),g=void 0,w={}),ae=ae.concat(ro({key:`${ve}[0]`,value:ce[0],valueSpec:{zoom:{}},validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec,objectElementValidators:{zoom:Eu,value:ee}}))}else ae=ae.concat(ee({key:`${ve}[0]`,value:ce[0],valueSpec:{},validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec},ce));return Yd(_l(ce[1]))?ae.concat([new je(`${ve}[1]`,ce[1],"expressions are not allowed in function stops.")]):ae.concat(oe.validateSpec({key:`${ve}[1]`,value:ce[1],valueSpec:o,validateSpec:oe.validateSpec,style:oe.style,styleSpec:oe.styleSpec}))}function ee(oe,ae){const ce=Jr(oe.value),ve=Ln(oe.value),be=oe.value!==null?oe.value:ae;if(f){if(ce!==f)return[new je(oe.key,be,`${ce} stop domain type must match previous stop domain type ${f}`)]}else f=ce;if(ce!=="number"&&ce!=="string"&&ce!=="boolean")return[new je(oe.key,be,"stop domain value must be a number, string, or boolean")];if(ce!=="number"&&u!=="categorical"){let ze=`number expected, ${ce} found`;return mc(o)&&u===void 0&&(ze+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new je(oe.key,be,ze)]}return u!=="categorical"||ce!=="number"||isFinite(ve)&&Math.floor(ve)===ve?u!=="categorical"&&ce==="number"&&g!==void 0&&ve<g?[new je(oe.key,be,"stop domain values must appear in ascending order")]:(g=ve,u==="categorical"&&ve in w?[new je(oe.key,be,"stop domain values must be unique")]:(w[ve]=!0,[])):[new je(oe.key,be,`integer expected, found ${ve}`)]}}function xl(c){const o=(c.expressionContext==="property"?vp:Jd)(_l(c.value),c.valueSpec);if(o.result==="error")return o.value.map(f=>new je(`${c.key}${f.key}`,c.value,f.message));const u=o.value.expression||o.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!u.outputDefined())return[new je(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!bu(u))return[new je(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!bu(u))return[new je(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Hd(u,["zoom","feature-state"]))return[new je(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Ud(u))return[new je(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Iu(c){const o=c.key,u=c.value,f=c.valueSpec,g=[];return Array.isArray(f.values)?f.values.indexOf(Ln(u))===-1&&g.push(new je(o,u,`expected one of [${f.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(f.values).indexOf(Ln(u))===-1&&g.push(new je(o,u,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(u)} found`)),g}function vc(c){return ku(_l(c.value))?xl(kt({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Kv(c)}function Kv(c){const o=c.value,u=c.key;if(Jr(o)!=="array")return[new je(u,o,`array expected, ${Jr(o)} found`)];const f=c.styleSpec;let g,x=[];if(o.length<1)return[new je(u,o,"filter array must have at least 1 element")];switch(x=x.concat(Iu({key:`${u}[0]`,value:o[0],valueSpec:f.filter_operator,style:c.style,styleSpec:c.styleSpec})),Ln(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&Ln(o[1])==="$type"&&x.push(new je(u,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&x.push(new je(u,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(g=Jr(o[1]),g!=="string"&&x.push(new je(`${u}[1]`,o[1],`string expected, ${g} found`)));for(let w=2;w<o.length;w++)g=Jr(o[w]),Ln(o[1])==="$type"?x=x.concat(Iu({key:`${u}[${w}]`,value:o[w],valueSpec:f.geometry_type,style:c.style,styleSpec:c.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&x.push(new je(`${u}[${w}]`,o[w],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let w=1;w<o.length;w++)x=x.concat(Kv({key:`${u}[${w}]`,value:o[w],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":g=Jr(o[1]),o.length!==2?x.push(new je(u,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="string"&&x.push(new je(`${u}[1]`,o[1],`string expected, ${g} found`));break;case"within":g=Jr(o[1]),o.length!==2?x.push(new je(u,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="object"&&x.push(new je(`${u}[1]`,o[1],`object expected, ${g} found`))}return x}function Xv(c,o){const u=c.key,f=c.validateSpec,g=c.style,x=c.styleSpec,w=c.value,C=c.objectKey,P=x[`${o}_${c.layerType}`];if(!P)return[];const M=C.match(/^(.*)-transition$/);if(o==="paint"&&M&&P[M[1]]&&P[M[1]].transition)return f({key:u,value:w,valueSpec:x.transition,style:g,styleSpec:x});const U=c.valueSpec||P[C];if(!U)return[new je(u,w,`unknown property "${C}"`)];let q;if(Jr(w)==="string"&&mc(U)&&!U.tokens&&(q=/^{([^}]+)}$/.exec(w)))return[new je(u,w,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(q[1])} }\`.`)];const ee=[];return c.layerType==="symbol"&&(C==="text-field"&&g&&!g.glyphs&&ee.push(new je(u,w,'use of "text-field" requires a style "glyphs" property')),C==="text-font"&&Pn(_l(w))&&Ln(w.type)==="identity"&&ee.push(new je(u,w,'"text-font" does not support identity functions'))),ee.concat(f({key:c.key,value:w,valueSpec:U,style:g,styleSpec:x,expressionContext:"property",propertyType:o,propertyKey:C}))}function Yv(c){return Xv(c,"paint")}function Jv(c){return Xv(c,"layout")}function Qv(c){let o=[];const u=c.value,f=c.key,g=c.style,x=c.styleSpec;u.type||u.ref||o.push(new je(f,u,'either "type" or "ref" is required'));let w=Ln(u.type);const C=Ln(u.ref);if(u.id){const P=Ln(u.id);for(let M=0;M<c.arrayIndex;M++){const U=g.layers[M];Ln(U.id)===P&&o.push(new je(f,u.id,`duplicate layer id "${u.id}", previously used at line ${U.id.__line__}`))}}if("ref"in u){let P;["type","source","source-layer","filter","layout"].forEach(M=>{M in u&&o.push(new je(f,u[M],`"${M}" is prohibited for ref layers`))}),g.layers.forEach(M=>{Ln(M.id)===C&&(P=M)}),P?P.ref?o.push(new je(f,u.ref,"ref cannot reference another ref layer")):w=Ln(P.type):o.push(new je(f,u.ref,`ref layer "${C}" not found`))}else if(w!=="background")if(u.source){const P=g.sources&&g.sources[u.source],M=P&&Ln(P.type);P?M==="vector"&&w==="raster"?o.push(new je(f,u.source,`layer "${u.id}" requires a raster source`)):M!=="raster-dem"&&w==="hillshade"?o.push(new je(f,u.source,`layer "${u.id}" requires a raster-dem source`)):M==="raster"&&w!=="raster"?o.push(new je(f,u.source,`layer "${u.id}" requires a vector source`)):M!=="vector"||u["source-layer"]?M==="raster-dem"&&w!=="hillshade"?o.push(new je(f,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):w!=="line"||!u.paint||!u.paint["line-gradient"]||M==="geojson"&&P.lineMetrics||o.push(new je(f,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new je(f,u,`layer "${u.id}" must specify a "source-layer"`)):o.push(new je(f,u.source,`source "${u.source}" not found`))}else o.push(new je(f,u,'missing required property "source"'));return o=o.concat(ro({key:f,value:u,valueSpec:x.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${f}.type`,value:u.type,valueSpec:x.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:u,objectKey:"type"}),filter:vc,layout:P=>ro({layer:u,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":M=>Jv(kt({layerType:w},M))}}),paint:P=>ro({layer:u,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":M=>Yv(kt({layerType:w},M))}})}})),o}function Ea(c){const o=c.value,u=c.key,f=Jr(o);return f!=="string"?[new je(u,o,`string expected, ${f} found`)]:[]}const Pu={promoteId:function({key:c,value:o}){if(Jr(o)==="string")return Ea({key:c,value:o});{const u=[];for(const f in o)u.push(...Ea({key:`${c}.${f}`,value:o[f]}));return u}}};function Eo(c){const o=c.value,u=c.key,f=c.styleSpec,g=c.style,x=c.validateSpec;if(!o.type)return[new je(u,o,'"type" is required')];const w=Ln(o.type);let C;switch(w){case"vector":case"raster":return C=ro({key:u,value:o,valueSpec:f[`source_${w.replace("-","_")}`],style:c.style,styleSpec:f,objectElementValidators:Pu,validateSpec:x}),C;case"raster-dem":return C=function(P){var M;const U=(M=P.sourceName)!==null&&M!==void 0?M:"",q=P.value,ee=P.styleSpec,oe=ee.source_raster_dem,ae=P.style;let ce=[];const ve=Jr(q);if(q===void 0)return ce;if(ve!=="object")return ce.push(new je("source_raster_dem",q,`object expected, ${ve} found`)),ce;const be=Ln(q.encoding)==="custom",ze=["redFactor","greenFactor","blueFactor","baseShift"],ke=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const Be in q)!be&&ze.includes(Be)?ce.push(new je(Be,q[Be],`In "${U}": "${Be}" is only valid when "encoding" is set to "custom". ${ke} encoding found`)):oe[Be]?ce=ce.concat(P.validateSpec({key:Be,value:q[Be],valueSpec:oe[Be],validateSpec:P.validateSpec,style:ae,styleSpec:ee})):ce.push(new je(Be,q[Be],`unknown property "${Be}"`));return ce}({sourceName:u,value:o,style:c.style,styleSpec:f,validateSpec:x}),C;case"geojson":if(C=ro({key:u,value:o,valueSpec:f.source_geojson,style:g,styleSpec:f,validateSpec:x,objectElementValidators:Pu}),o.cluster)for(const P in o.clusterProperties){const[M,U]=o.clusterProperties[P],q=typeof M=="string"?[M,["accumulated"],["get",P]]:M;C.push(...xl({key:`${u}.${P}.map`,value:U,validateSpec:x,expressionContext:"cluster-map"})),C.push(...xl({key:`${u}.${P}.reduce`,value:q,validateSpec:x,expressionContext:"cluster-reduce"}))}return C;case"video":return ro({key:u,value:o,valueSpec:f.source_video,style:g,validateSpec:x,styleSpec:f});case"image":return ro({key:u,value:o,valueSpec:f.source_image,style:g,validateSpec:x,styleSpec:f});case"canvas":return[new je(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Iu({key:`${u}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,validateSpec:x,styleSpec:f})}}function Au(c){const o=c.value,u=c.styleSpec,f=u.light,g=c.style;let x=[];const w=Jr(o);if(o===void 0)return x;if(w!=="object")return x=x.concat([new je("light",o,`object expected, ${w} found`)]),x;for(const C in o){const P=C.match(/^(.*)-transition$/);x=x.concat(P&&f[P[1]]&&f[P[1]].transition?c.validateSpec({key:C,value:o[C],valueSpec:u.transition,validateSpec:c.validateSpec,style:g,styleSpec:u}):f[C]?c.validateSpec({key:C,value:o[C],valueSpec:f[C],validateSpec:c.validateSpec,style:g,styleSpec:u}):[new je(C,o[C],`unknown property "${C}"`)])}return x}function ey(c){const o=c.value,u=c.styleSpec,f=u.terrain,g=c.style;let x=[];const w=Jr(o);if(o===void 0)return x;if(w!=="object")return x=x.concat([new je("terrain",o,`object expected, ${w} found`)]),x;for(const C in o)x=x.concat(f[C]?c.validateSpec({key:C,value:o[C],valueSpec:f[C],validateSpec:c.validateSpec,style:g,styleSpec:u}):[new je(C,o[C],`unknown property "${C}"`)]);return x}function ty(c){let o=[];const u=c.value,f=c.key;if(Array.isArray(u)){const g=[],x=[];for(const w in u)u[w].id&&g.includes(u[w].id)&&o.push(new je(f,u,`all the sprites' ids must be unique, but ${u[w].id} is duplicated`)),g.push(u[w].id),u[w].url&&x.includes(u[w].url)&&o.push(new je(f,u,`all the sprites' URLs must be unique, but ${u[w].url} is duplicated`)),x.push(u[w].url),o=o.concat(ro({key:`${f}[${w}]`,value:u[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return o}return Ea({key:f,value:u})}const ry={"*":()=>[],array:gc,boolean:function(c){const o=c.value,u=c.key,f=Jr(o);return f!=="boolean"?[new je(u,o,`boolean expected, ${f} found`)]:[]},number:Eu,color:function(c){const o=c.key,u=c.value,f=Jr(u);return f!=="string"?[new je(o,u,`color expected, ${f} found`)]:Or.parse(String(u))?[]:[new je(o,u,`color expected, "${u}" found`)]},constants:Zv,enum:Iu,filter:vc,function:nh,layer:Qv,object:ro,source:Eo,light:Au,terrain:ey,string:Ea,formatted:function(c){return Ea(c).length===0?[]:xl(c)},resolvedImage:function(c){return Ea(c).length===0?[]:xl(c)},padding:function(c){const o=c.key,u=c.value;if(Jr(u)==="array"){if(u.length<1||u.length>4)return[new je(o,u,`padding requires 1 to 4 values; ${u.length} values found`)];const f={type:"number"};let g=[];for(let x=0;x<u.length;x++)g=g.concat(c.validateSpec({key:`${o}[${x}]`,value:u[x],validateSpec:c.validateSpec,valueSpec:f}));return g}return Eu({key:o,value:u,valueSpec:{}})},variableAnchorOffsetCollection:function(c){const o=c.key,u=c.value,f=Jr(u),g=c.styleSpec;if(f!=="array"||u.length<1||u.length%2!=0)return[new je(o,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let w=0;w<u.length;w+=2)x=x.concat(Iu({key:`${o}[${w}]`,value:u[w],valueSpec:g.layout_symbol["text-anchor"]})),x=x.concat(gc({key:`${o}[${w+1}]`,value:u[w+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:g}));return x},sprite:ty};function es(c){const o=c.value,u=c.valueSpec,f=c.styleSpec;return c.validateSpec=es,u.expression&&Pn(Ln(o))?nh(c):u.expression&&Yd(_l(o))?xl(c):u.type&&ry[u.type]?ry[u.type](c):ro(kt({},c,{valueSpec:u.type?f[u.type]:u}))}function ny(c){const o=c.value,u=c.key,f=Ea(c);return f.length||(o.indexOf("{fontstack}")===-1&&f.push(new je(u,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&f.push(new je(u,o,'"glyphs" url must include a "{range}" token'))),f}function Uo(c,o=He){let u=[];return u=u.concat(es({key:"",value:c,valueSpec:o.$root,styleSpec:o,style:c,validateSpec:es,objectElementValidators:{glyphs:ny,"*":()=>[]}})),c.constants&&(u=u.concat(Zv({key:"constants",value:c.constants,style:c,styleSpec:o,validateSpec:es}))),ih(u)}function ts(c){return function(o){return c({...o,validateSpec:es})}}function ih(c){return[].concat(c).sort((o,u)=>o.line-u.line)}function rs(c){return function(...o){return ih(c.apply(this,o))}}Uo.source=rs(ts(Eo)),Uo.sprite=rs(ts(ty)),Uo.glyphs=rs(ts(ny)),Uo.light=rs(ts(Au)),Uo.terrain=rs(ts(ey)),Uo.layer=rs(ts(Qv)),Uo.filter=rs(ts(vc)),Uo.paintProperty=rs(ts(Yv)),Uo.layoutProperty=rs(ts(Jv));const ns=Uo,i1=ns.light,xp=ns.paintProperty,iy=ns.layoutProperty;function oh(c,o){let u=!1;if(o&&o.length)for(const f of o)c.fire(new Gt(new Error(f.message))),u=!0;return u}class yc{constructor(o,u,f){const g=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const w=new Int32Array(this.arrayBuffer);o=w[0],this.d=(u=w[1])+2*(f=w[2]);for(let P=0;P<this.d*this.d;P++){const M=w[3+P],U=w[3+P+1];g.push(M===U?null:w.subarray(M,U))}const C=w[3+g.length+1];this.keys=w.subarray(w[3+g.length],C),this.bboxes=w.subarray(C),this.insert=this._insertReadonly}else{this.d=u+2*f;for(let w=0;w<this.d*this.d;w++)g.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=o,this.padding=f,this.scale=u/o,this.uid=0;const x=f/u*o;this.min=-x,this.max=o+x}insert(o,u,f,g,x){this._forEachCell(u,f,g,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,u,f,g,x,w){this.cells[x].push(w)}query(o,u,f,g,x){const w=this.min,C=this.max;if(o<=w&&u<=w&&C<=f&&C<=g&&!x)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(o,u,f,g,this._queryCell,P,{},x),P}}_queryCell(o,u,f,g,x,w,C,P){const M=this.cells[x];if(M!==null){const U=this.keys,q=this.bboxes;for(let ee=0;ee<M.length;ee++){const oe=M[ee];if(C[oe]===void 0){const ae=4*oe;(P?P(q[ae+0],q[ae+1],q[ae+2],q[ae+3]):o<=q[ae+2]&&u<=q[ae+3]&&f>=q[ae+0]&&g>=q[ae+1])?(C[oe]=!0,w.push(U[oe])):C[oe]=!1}}}}_forEachCell(o,u,f,g,x,w,C,P){const M=this._convertToCellCoord(o),U=this._convertToCellCoord(u),q=this._convertToCellCoord(f),ee=this._convertToCellCoord(g);for(let oe=M;oe<=q;oe++)for(let ae=U;ae<=ee;ae++){const ce=this.d*ae+oe;if((!P||P(this._convertFromCellCoord(oe),this._convertFromCellCoord(ae),this._convertFromCellCoord(oe+1),this._convertFromCellCoord(ae+1)))&&x.call(this,o,u,f,g,ce,w,C,P))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,u=3+this.cells.length+1+1;let f=0;for(let w=0;w<this.cells.length;w++)f+=this.cells[w].length;const g=new Int32Array(u+f+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let x=u;for(let w=0;w<o.length;w++){const C=o[w];g[3+w]=x,g.set(C,x),x+=C.length}return g[3+o.length]=x,g.set(this.keys,x),x+=this.keys.length,g[3+o.length+1]=x,g.set(this.bboxes,x),x+=this.bboxes.length,g.buffer}static serialize(o,u){const f=o.toArrayBuffer();return u&&u.push(f),{buffer:f}}static deserialize(o){return new yc(o.buffer)}}const is={};function jt(c,o,u={}){if(is[c])throw new Error(`${c} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:c,writeable:!1}),is[c]={klass:o,omit:u.omit||[],shallow:u.shallow||[]}}jt("Object",Object),jt("TransferableGridIndex",yc),jt("Color",Or),jt("Error",Error),jt("AJAXError",Ze),jt("ResolvedImage",qn),jt("StylePropertyFunction",Su),jt("StyleExpression",mp,{omit:["_evaluator"]}),jt("ZoomDependentExpression",Qd),jt("ZoomConstantExpression",gp),jt("CompoundExpression",Vo,{omit:["_evaluate"]});for(const c in pc)pc[c]._classRegistryKey||jt(`Expression_${c}`,pc[c]);function ah(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Fs(c,o){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(ah(c)||Ne(c))return o&&o.push(c),c;if(ArrayBuffer.isView(c)){const u=c;return o&&o.push(u.buffer),u}if(c instanceof ImageData)return o&&o.push(c.data.buffer),c;if(Array.isArray(c)){const u=[];for(const f of c)u.push(Fs(f,o));return u}if(typeof c=="object"){const u=c.constructor,f=u._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!is[f])throw new Error(`${f} is not registered.`);const g=u.serialize?u.serialize(c,o):{};if(u.serialize){if(o&&g===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in c){if(!c.hasOwnProperty(x)||is[f].omit.indexOf(x)>=0)continue;const w=c[x];g[x]=is[f].shallow.indexOf(x)>=0?w:Fs(w,o)}c instanceof Error&&(g.message=c.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(g.$name=f),g}throw new Error("can't serialize object of type "+typeof c)}function _c(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||ah(c)||Ne(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(_c);if(typeof c=="object"){const o=c.$name||"Object";if(!is[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:u}=is[o];if(!u)throw new Error(`can't deserialize unregistered class ${o}`);if(u.deserialize)return u.deserialize(c);const f=Object.create(u.prototype);for(const g of Object.keys(c)){if(g==="$name")continue;const x=c[g];f[g]=is[o].shallow.indexOf(g)>=0?x:_c(x)}return f}throw new Error("can't deserialize object of type "+typeof c)}class oy{constructor(){this.first=!0}update(o,u){const f=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=u),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=f,!0))}}const Lt={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function bp(c){for(const o of c)if(Sp(o.charCodeAt(0)))return!0;return!1}function wp(c){for(const o of c)if(!o1(o.charCodeAt(0)))return!1;return!0}function o1(c){return!(Lt.Arabic(c)||Lt["Arabic Supplement"](c)||Lt["Arabic Extended-A"](c)||Lt["Arabic Presentation Forms-A"](c)||Lt["Arabic Presentation Forms-B"](c))}function Sp(c){return!(c!==746&&c!==747&&(c<4352||!(Lt["Bopomofo Extended"](c)||Lt.Bopomofo(c)||Lt["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Lt["CJK Compatibility Ideographs"](c)||Lt["CJK Compatibility"](c)||Lt["CJK Radicals Supplement"](c)||Lt["CJK Strokes"](c)||!(!Lt["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Lt["CJK Unified Ideographs Extension A"](c)||Lt["CJK Unified Ideographs"](c)||Lt["Enclosed CJK Letters and Months"](c)||Lt["Hangul Compatibility Jamo"](c)||Lt["Hangul Jamo Extended-A"](c)||Lt["Hangul Jamo Extended-B"](c)||Lt["Hangul Jamo"](c)||Lt["Hangul Syllables"](c)||Lt.Hiragana(c)||Lt["Ideographic Description Characters"](c)||Lt.Kanbun(c)||Lt["Kangxi Radicals"](c)||Lt["Katakana Phonetic Extensions"](c)||Lt.Katakana(c)&&c!==12540||!(!Lt["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Lt["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Lt["Unified Canadian Aboriginal Syllabics"](c)||Lt["Unified Canadian Aboriginal Syllabics Extended"](c)||Lt["Vertical Forms"](c)||Lt["Yijing Hexagram Symbols"](c)||Lt["Yi Syllables"](c)||Lt["Yi Radicals"](c))))}function ay(c){return!(Sp(c)||function(o){return!!(Lt["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||Lt["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||Lt["Letterlike Symbols"](o)||Lt["Number Forms"](o)||Lt["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||Lt["Control Pictures"](o)&&o!==9251||Lt["Optical Character Recognition"](o)||Lt["Enclosed Alphanumerics"](o)||Lt["Geometric Shapes"](o)||Lt["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||Lt["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||Lt["CJK Symbols and Punctuation"](o)||Lt.Katakana(o)||Lt["Private Use Area"](o)||Lt["CJK Compatibility Forms"](o)||Lt["Small Form Variants"](o)||Lt["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(c))}function sy(c){return c>=1424&&c<=2303||Lt["Arabic Presentation Forms-A"](c)||Lt["Arabic Presentation Forms-B"](c)}function ly(c,o){return!(!o&&sy(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Lt.Khmer(c))}function a1(c){for(const o of c)if(sy(o.charCodeAt(0)))return!0;return!1}const Cp="deferred",kp="loading",Tp="loaded";let Ep=null,no="unavailable",Ns=null;const Ru=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(no="error"),Ep&&Ep(c)};function Ip(){Du.fire(new hr("pluginStateChange",{pluginStatus:no,pluginURL:Ns}))}const Du=new Dr,Pp=function(){return no},cy=function(){if(no!==Cp||!Ns)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");no=kp,Ip(),Ns&&wr({url:Ns},c=>{c?Ru(c):(no=Tp,Ip())})},Io={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>no===Tp||Io.applyArabicShaping!=null,isLoading:()=>no===kp,setState(c){if(!Fe())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");no=c.pluginStatus,Ns=c.pluginURL},isParsed(){if(!Fe())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Io.applyArabicShaping!=null&&Io.processBidirectionalText!=null&&Io.processStyledBidirectionalText!=null},getPluginURL(){if(!Fe())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ns}};class _n{constructor(o,u){this.zoom=o,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new oy,this.transition={})}isSupportedScript(o){return function(u,f){for(const g of u)if(!ly(g.charCodeAt(0),f))return!1;return!0}(o,Io.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,u=o-Math.floor(o),f=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*u}}}class sh{constructor(o,u){this.property=o,this.value=u,this.expression=function(f,g){if(Pn(f))return new Su(f,g);if(Yd(f)){const x=vp(f,g);if(x.result==="error")throw new Error(x.value.map(w=>`${w.key}: ${w.message}`).join(", "));return x.value}{let x=f;return g.type==="color"&&typeof f=="string"?x=Or.parse(f):g.type!=="padding"||typeof f!="number"&&!Array.isArray(f)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(f)&&(x=Wn.parse(f)):x=Wr.parse(f),{kind:"constant",evaluate:()=>x}}}(u===void 0?o.specification.default:u,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,u,f){return this.property.possiblyEvaluate(this,o,u,f)}}class Ap{constructor(o){this.property=o,this.value=new sh(o,void 0)}transitioned(o,u){return new dy(this.property,this.value,u,ie({},o.transition,this.transition),o.now)}untransitioned(){return new dy(this.property,this.value,null,{},0)}}class uy{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Te(this._values[o].value.value)}setValue(o,u){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Ap(this._values[o].property)),this._values[o].value=new sh(this._values[o].property,u===null?void 0:Te(u))}getTransition(o){return Te(this._values[o].transition)}setTransition(o,u){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Ap(this._values[o].property)),this._values[o].transition=Te(u)||void 0}serialize(){const o={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(o[u]=f);const g=this.getTransition(u);g!==void 0&&(o[`${u}-transition`]=g)}return o}transitioned(o,u){const f=new hy(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].transitioned(o,u._values[g]);return f}untransitioned(){const o=new hy(this._properties);for(const u of Object.keys(this._values))o._values[u]=this._values[u].untransitioned();return o}}class dy{constructor(o,u,f,g,x){this.property=o,this.value=u,this.begin=x+g.delay||0,this.end=this.begin+g.duration||0,o.specification.transition&&(g.delay||g.duration)&&(this.prior=f)}possiblyEvaluate(o,u,f){const g=o.now||0,x=this.value.possiblyEvaluate(o,u,f),w=this.prior;if(w){if(g>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(g<this.begin)return w.possiblyEvaluate(o,u,f);{const C=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,u,f),x,function(P){if(P<=0)return 0;if(P>=1)return 1;const M=P*P,U=M*P;return 4*(P<.5?U:3*(P-M)+U-.75)}(C))}}return x}}class hy{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,u,f){const g=new lh(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(o,u,f);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class s1{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return this._values[o].value!==void 0}getValue(o){return Te(this._values[o].value)}setValue(o,u){this._values[o]=new sh(this._values[o].property,u===null?void 0:Te(u))}serialize(){const o={};for(const u of Object.keys(this._values)){const f=this.getValue(u);f!==void 0&&(o[u]=f)}return o}possiblyEvaluate(o,u,f){const g=new lh(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(o,u,f);return g}}class Vi{constructor(o,u,f){this.property=o,this.value=u,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,u,f,g){return this.property.evaluate(this.value,this.parameters,o,u,f,g)}}class lh{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class er{constructor(o){this.specification=o}possiblyEvaluate(o,u){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(u)}interpolate(o,u,f){const g=ko[this.specification.type];return g?g(o,u,f):o}}class cr{constructor(o,u){this.specification=o,this.overrides=u}possiblyEvaluate(o,u,f,g){return new Vi(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(u,null,{},f,g)}:o.expression,u)}interpolate(o,u,f){if(o.value.kind!=="constant"||u.value.kind!=="constant")return o;if(o.value.value===void 0||u.value.value===void 0)return new Vi(this,{kind:"constant",value:void 0},o.parameters);const g=ko[this.specification.type];if(g){const x=g(o.value.value,u.value.value,f);return new Vi(this,{kind:"constant",value:x},o.parameters)}return o}evaluate(o,u,f,g,x,w){return o.kind==="constant"?o.value:o.evaluate(u,f,g,x,w)}}class Mu extends cr{possiblyEvaluate(o,u,f,g){if(o.value===void 0)return new Vi(this,{kind:"constant",value:void 0},u);if(o.expression.kind==="constant"){const x=o.expression.evaluate(u,null,{},f,g),w=o.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,C=this._calculate(w,w,w,u);return new Vi(this,{kind:"constant",value:C},u)}if(o.expression.kind==="camera"){const x=this._calculate(o.expression.evaluate({zoom:u.zoom-1}),o.expression.evaluate({zoom:u.zoom}),o.expression.evaluate({zoom:u.zoom+1}),u);return new Vi(this,{kind:"constant",value:x},u)}return new Vi(this,o.expression,u)}evaluate(o,u,f,g,x,w){if(o.kind==="source"){const C=o.evaluate(u,f,g,x,w);return this._calculate(C,C,C,u)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(u.zoom)-1},f,g),o.evaluate({zoom:Math.floor(u.zoom)},f,g),o.evaluate({zoom:Math.floor(u.zoom)+1},f,g),u):o.value}_calculate(o,u,f,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:o,to:u}:{from:f,to:u}}interpolate(o){return o}}class Rp{constructor(o){this.specification=o}possiblyEvaluate(o,u,f,g){if(o.value!==void 0){if(o.expression.kind==="constant"){const x=o.expression.evaluate(u,null,{},f,g);return this._calculate(x,x,x,u)}return this._calculate(o.expression.evaluate(new _n(Math.floor(u.zoom-1),u)),o.expression.evaluate(new _n(Math.floor(u.zoom),u)),o.expression.evaluate(new _n(Math.floor(u.zoom+1),u)),u)}}_calculate(o,u,f,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:o,to:u}:{from:f,to:u}}interpolate(o){return o}}class Dp{constructor(o){this.specification=o}possiblyEvaluate(o,u,f,g){return!!o.expression.evaluate(u,null,{},f,g)}interpolate(){return!1}}class Zn{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in o){const f=o[u];f.specification.overridable&&this.overridableProperties.push(u);const g=this.defaultPropertyValues[u]=new sh(f,void 0),x=this.defaultTransitionablePropertyValues[u]=new Ap(f);this.defaultTransitioningPropertyValues[u]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=g.possiblyEvaluate({})}}}jt("DataDrivenProperty",cr),jt("DataConstantProperty",er),jt("CrossFadedDataDrivenProperty",Mu),jt("CrossFadedProperty",Rp),jt("ColorRampProperty",Dp);const Mp="-transition";class Ho extends Dr{constructor(o,u){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),u.layout&&(this._unevaluatedLayout=new s1(u.layout)),u.paint)){this._transitionablePaint=new uy(u.paint);for(const f in o.paint)this.setPaintProperty(f,o.paint[f],{validate:!1});for(const f in o.layout)this.setLayoutProperty(f,o.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new lh(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,u,f={}){u!=null&&this._validate(iy,`layers.${this.id}.layout.${o}`,o,u,f)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,u):this.visibility=u)}getPaintProperty(o){return o.endsWith(Mp)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,u,f={}){if(u!=null&&this._validate(xp,`layers.${this.id}.paint.${o}`,o,u,f))return!1;if(o.endsWith(Mp))return this._transitionablePaint.setTransition(o.slice(0,-11),u||void 0),!1;{const g=this._transitionablePaint._values[o],x=g.property.specification["property-type"]==="cross-faded-data-driven",w=g.value.isDataDriven(),C=g.value;this._transitionablePaint.setValue(o,u),this._handleSpecialPaintPropertyUpdate(o);const P=this._transitionablePaint._values[o].value;return P.isDataDriven()||w||x||this._handleOverridablePaintPropertyUpdate(o,C,P)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,u,f){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,u){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,u)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),we(o,(u,f)=>!(u===void 0||f==="layout"&&!Object.keys(u).length||f==="paint"&&!Object.keys(u).length))}_validate(o,u,f,g,x={}){return(!x||x.validate!==!1)&&oh(this,o.call(ns,{key:u,layerType:this.type,objectKey:f,value:g,styleSpec:He,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const u=this.paint.get(o);if(u instanceof Vi&&mc(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const fy={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class bl{constructor(o,u){this._structArray=o,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class On{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,u){return o._trim(),u&&(o.isTransferred=!0,u.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const u=Object.create(this.prototype);return u.arrayBuffer=o.arrayBuffer,u.length=o.length,u.capacity=o.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Rn(c,o=1){let u=0,f=0;return{members:c.map(g=>{const x=fy[g.type].BYTES_PER_ELEMENT,w=u=xc(u,Math.max(o,x)),C=g.components||1;return f=Math.max(f,x),u+=x*C,{name:g.name,type:g.type,components:C,offset:w}}),size:xc(u,Math.max(f,o)),alignment:o}}function xc(c,o){return Math.ceil(c/o)*o}class zu extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u){const f=this.length;return this.resize(f+1),this.emplace(f,o,u)}emplace(o,u,f){const g=2*o;return this.int16[g+0]=u,this.int16[g+1]=f,o}}zu.prototype.bytesPerElement=4,jt("StructArrayLayout2i4",zu);class Lu extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,f)}emplace(o,u,f,g){const x=3*o;return this.int16[x+0]=u,this.int16[x+1]=f,this.int16[x+2]=g,o}}Lu.prototype.bytesPerElement=6,jt("StructArrayLayout3i6",Lu);class wl extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,u,f,g)}emplace(o,u,f,g,x){const w=4*o;return this.int16[w+0]=u,this.int16[w+1]=f,this.int16[w+2]=g,this.int16[w+3]=x,o}}wl.prototype.bytesPerElement=8,jt("StructArrayLayout4i8",wl);class zp extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,o,u,f,g,x,w)}emplace(o,u,f,g,x,w,C){const P=6*o;return this.int16[P+0]=u,this.int16[P+1]=f,this.int16[P+2]=g,this.int16[P+3]=x,this.int16[P+4]=w,this.int16[P+5]=C,o}}zp.prototype.bytesPerElement=12,jt("StructArrayLayout2i4i12",zp);class Lp extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,o,u,f,g,x,w)}emplace(o,u,f,g,x,w,C){const P=4*o,M=8*o;return this.int16[P+0]=u,this.int16[P+1]=f,this.uint8[M+4]=g,this.uint8[M+5]=x,this.uint8[M+6]=w,this.uint8[M+7]=C,o}}Lp.prototype.bytesPerElement=8,jt("StructArrayLayout2i4ub8",Lp);class bc extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u){const f=this.length;return this.resize(f+1),this.emplace(f,o,u)}emplace(o,u,f){const g=2*o;return this.float32[g+0]=u,this.float32[g+1]=f,o}}bc.prototype.bytesPerElement=8,jt("StructArrayLayout2f8",bc);class Op extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w,C,P,M,U){const q=this.length;return this.resize(q+1),this.emplace(q,o,u,f,g,x,w,C,P,M,U)}emplace(o,u,f,g,x,w,C,P,M,U,q){const ee=10*o;return this.uint16[ee+0]=u,this.uint16[ee+1]=f,this.uint16[ee+2]=g,this.uint16[ee+3]=x,this.uint16[ee+4]=w,this.uint16[ee+5]=C,this.uint16[ee+6]=P,this.uint16[ee+7]=M,this.uint16[ee+8]=U,this.uint16[ee+9]=q,o}}Op.prototype.bytesPerElement=20,jt("StructArrayLayout10ui20",Op);class $p extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w,C,P,M,U,q,ee){const oe=this.length;return this.resize(oe+1),this.emplace(oe,o,u,f,g,x,w,C,P,M,U,q,ee)}emplace(o,u,f,g,x,w,C,P,M,U,q,ee,oe){const ae=12*o;return this.int16[ae+0]=u,this.int16[ae+1]=f,this.int16[ae+2]=g,this.int16[ae+3]=x,this.uint16[ae+4]=w,this.uint16[ae+5]=C,this.uint16[ae+6]=P,this.uint16[ae+7]=M,this.int16[ae+8]=U,this.int16[ae+9]=q,this.int16[ae+10]=ee,this.int16[ae+11]=oe,o}}$p.prototype.bytesPerElement=24,jt("StructArrayLayout4i4ui4i24",$p);class Qr extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,f)}emplace(o,u,f,g){const x=3*o;return this.float32[x+0]=u,this.float32[x+1]=f,this.float32[x+2]=g,o}}Qr.prototype.bytesPerElement=12,jt("StructArrayLayout3f12",Qr);class _ extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint32[1*o+0]=u,o}}_.prototype.bytesPerElement=4,jt("StructArrayLayout1ul4",_);class a extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w,C,P,M){const U=this.length;return this.resize(U+1),this.emplace(U,o,u,f,g,x,w,C,P,M)}emplace(o,u,f,g,x,w,C,P,M,U){const q=10*o,ee=5*o;return this.int16[q+0]=u,this.int16[q+1]=f,this.int16[q+2]=g,this.int16[q+3]=x,this.int16[q+4]=w,this.int16[q+5]=C,this.uint32[ee+3]=P,this.uint16[q+8]=M,this.uint16[q+9]=U,o}}a.prototype.bytesPerElement=20,jt("StructArrayLayout6i1ul2ui20",a);class d extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,o,u,f,g,x,w)}emplace(o,u,f,g,x,w,C){const P=6*o;return this.int16[P+0]=u,this.int16[P+1]=f,this.int16[P+2]=g,this.int16[P+3]=x,this.int16[P+4]=w,this.int16[P+5]=C,o}}d.prototype.bytesPerElement=12,jt("StructArrayLayout2i2i2i12",d);class p extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,f,g,x)}emplace(o,u,f,g,x,w){const C=4*o,P=8*o;return this.float32[C+0]=u,this.float32[C+1]=f,this.float32[C+2]=g,this.int16[P+6]=x,this.int16[P+7]=w,o}}p.prototype.bytesPerElement=16,jt("StructArrayLayout2f1f2i16",p);class v extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,u,f,g)}emplace(o,u,f,g,x){const w=12*o,C=3*o;return this.uint8[w+0]=u,this.uint8[w+1]=f,this.float32[C+1]=g,this.float32[C+2]=x,o}}v.prototype.bytesPerElement=12,jt("StructArrayLayout2ub2f12",v);class b extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,f)}emplace(o,u,f,g){const x=3*o;return this.uint16[x+0]=u,this.uint16[x+1]=f,this.uint16[x+2]=g,o}}b.prototype.bytesPerElement=6,jt("StructArrayLayout3ui6",b);class k extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w,C,P,M,U,q,ee,oe,ae,ce,ve,be){const ze=this.length;return this.resize(ze+1),this.emplace(ze,o,u,f,g,x,w,C,P,M,U,q,ee,oe,ae,ce,ve,be)}emplace(o,u,f,g,x,w,C,P,M,U,q,ee,oe,ae,ce,ve,be,ze){const ke=24*o,Be=12*o,Ge=48*o;return this.int16[ke+0]=u,this.int16[ke+1]=f,this.uint16[ke+2]=g,this.uint16[ke+3]=x,this.uint32[Be+2]=w,this.uint32[Be+3]=C,this.uint32[Be+4]=P,this.uint16[ke+10]=M,this.uint16[ke+11]=U,this.uint16[ke+12]=q,this.float32[Be+7]=ee,this.float32[Be+8]=oe,this.uint8[Ge+36]=ae,this.uint8[Ge+37]=ce,this.uint8[Ge+38]=ve,this.uint32[Be+10]=be,this.int16[ke+22]=ze,o}}k.prototype.bytesPerElement=48,jt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",k);class E extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g,x,w,C,P,M,U,q,ee,oe,ae,ce,ve,be,ze,ke,Be,Ge,et,Ot,Zt,Mt,At,yt,Vt){const wt=this.length;return this.resize(wt+1),this.emplace(wt,o,u,f,g,x,w,C,P,M,U,q,ee,oe,ae,ce,ve,be,ze,ke,Be,Ge,et,Ot,Zt,Mt,At,yt,Vt)}emplace(o,u,f,g,x,w,C,P,M,U,q,ee,oe,ae,ce,ve,be,ze,ke,Be,Ge,et,Ot,Zt,Mt,At,yt,Vt,wt){const ct=32*o,ar=16*o;return this.int16[ct+0]=u,this.int16[ct+1]=f,this.int16[ct+2]=g,this.int16[ct+3]=x,this.int16[ct+4]=w,this.int16[ct+5]=C,this.int16[ct+6]=P,this.int16[ct+7]=M,this.uint16[ct+8]=U,this.uint16[ct+9]=q,this.uint16[ct+10]=ee,this.uint16[ct+11]=oe,this.uint16[ct+12]=ae,this.uint16[ct+13]=ce,this.uint16[ct+14]=ve,this.uint16[ct+15]=be,this.uint16[ct+16]=ze,this.uint16[ct+17]=ke,this.uint16[ct+18]=Be,this.uint16[ct+19]=Ge,this.uint16[ct+20]=et,this.uint16[ct+21]=Ot,this.uint16[ct+22]=Zt,this.uint32[ar+12]=Mt,this.float32[ar+13]=At,this.float32[ar+14]=yt,this.uint16[ct+30]=Vt,this.uint16[ct+31]=wt,o}}E.prototype.bytesPerElement=64,jt("StructArrayLayout8i15ui1ul2f2ui64",E);class A extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.float32[1*o+0]=u,o}}A.prototype.bytesPerElement=4,jt("StructArrayLayout1f4",A);class B extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,f)}emplace(o,u,f,g){const x=3*o;return this.uint16[6*o+0]=u,this.float32[x+1]=f,this.float32[x+2]=g,o}}B.prototype.bytesPerElement=12,jt("StructArrayLayout1ui2f12",B);class G extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,f)}emplace(o,u,f,g){const x=4*o;return this.uint32[2*o+0]=u,this.uint16[x+2]=f,this.uint16[x+3]=g,o}}G.prototype.bytesPerElement=8,jt("StructArrayLayout1ul2ui8",G);class W extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u){const f=this.length;return this.resize(f+1),this.emplace(f,o,u)}emplace(o,u,f){const g=2*o;return this.uint16[g+0]=u,this.uint16[g+1]=f,o}}W.prototype.bytesPerElement=4,jt("StructArrayLayout2ui4",W);class ne extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint16[1*o+0]=u,o}}ne.prototype.bytesPerElement=2,jt("StructArrayLayout1ui2",ne);class fe extends On{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,f,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,u,f,g)}emplace(o,u,f,g,x){const w=4*o;return this.float32[w+0]=u,this.float32[w+1]=f,this.float32[w+2]=g,this.float32[w+3]=x,o}}fe.prototype.bytesPerElement=16,jt("StructArrayLayout4f16",fe);class de extends bl{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new I(this.anchorPointX,this.anchorPointY)}}de.prototype.size=20;class me extends a{get(o){return new de(this,o)}}jt("CollisionBoxArray",me);class le extends bl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}le.prototype.size=48;class Ie extends k{get(o){return new le(this,o)}}jt("PlacedSymbolArray",Ie);class Ue extends bl{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ue.prototype.size=64;class ye extends E{get(o){return new Ue(this,o)}}jt("SymbolInstanceArray",ye);class Me extends A{getoffsetX(o){return this.float32[1*o+0]}}jt("GlyphOffsetArray",Me);class qe extends Lu{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}jt("SymbolLineVertexArray",qe);class Ke extends bl{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ke.prototype.size=12;class Je extends B{get(o){return new Ke(this,o)}}jt("TextAnchorOffsetArray",Je);class lt extends bl{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}lt.prototype.size=8;class nt extends G{get(o){return new lt(this,o)}}jt("FeatureIndexArray",nt);class mt extends zu{}class qt extends zu{}class Ir extends zu{}class Pt extends zp{}class ur extends Lp{}class Kt extends bc{}class sn extends Op{}class Er extends $p{}class br extends Qr{}class Pr extends _{}class Nn extends d{}class mn extends v{}class Ci extends b{}class li extends W{}const Kn=Rn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Po}=Kn;class xn{constructor(o=[]){this.segments=o}prepareSegment(o,u,f,g){let x=this.segments[this.segments.length-1];return o>xn.MAX_VERTEX_ARRAY_LENGTH&&We(`Max vertices per segment is ${xn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!x||x.vertexLength+o>xn.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==g)&&(x={vertexOffset:u.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},g!==void 0&&(x.sortKey=g),this.segments.push(x)),x}get(){return this.segments}destroy(){for(const o of this.segments)for(const u in o.vaos)o.vaos[u].destroy()}static simpleSegment(o,u,f,g){return new xn([{vertexOffset:o,primitiveOffset:u,vertexLength:f,primitiveLength:g,vaos:{},sortKey:0}])}}function Ia(c,o){return 256*(c=$(Math.floor(c),0,255))+$(Math.floor(o),0,255)}xn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,jt("SegmentVector",xn);const Pa=Rn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var js={exports:{}},Sl={exports:{}};Sl.exports=function(c,o){var u,f,g,x,w,C,P,M;for(f=c.length-(u=3&c.length),g=o,w=3432918353,C=461845907,M=0;M<f;)P=255&c.charCodeAt(M)|(255&c.charCodeAt(++M))<<8|(255&c.charCodeAt(++M))<<16|(255&c.charCodeAt(++M))<<24,++M,g=27492+(65535&(x=5*(65535&(g=(g^=P=(65535&(P=(P=(65535&P)*w+(((P>>>16)*w&65535)<<16)&4294967295)<<15|P>>>17))*C+(((P>>>16)*C&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(x>>>16)&65535)<<16);switch(P=0,u){case 3:P^=(255&c.charCodeAt(M+2))<<16;case 2:P^=(255&c.charCodeAt(M+1))<<8;case 1:g^=P=(65535&(P=(P=(65535&(P^=255&c.charCodeAt(M)))*w+(((P>>>16)*w&65535)<<16)&4294967295)<<15|P>>>17))*C+(((P>>>16)*C&65535)<<16)&4294967295}return g^=c.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var wc=Sl.exports,Ai={exports:{}};Ai.exports=function(c,o){for(var u,f=c.length,g=o^f,x=0;f>=4;)u=1540483477*(65535&(u=255&c.charCodeAt(x)|(255&c.charCodeAt(++x))<<8|(255&c.charCodeAt(++x))<<16|(255&c.charCodeAt(++x))<<24))+((1540483477*(u>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),f-=4,++x;switch(f){case 3:g^=(255&c.charCodeAt(x+2))<<16;case 2:g^=(255&c.charCodeAt(x+1))<<8;case 1:g=1540483477*(65535&(g^=255&c.charCodeAt(x)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var ki=wc,Ui=Ai.exports;js.exports=ki,js.exports.murmur3=ki,js.exports.murmur2=Ui;var Cl=y(js.exports);class jn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,u,f,g){this.ids.push(ci(o)),this.positions.push(u,f,g)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=ci(o);let f=0,g=this.ids.length-1;for(;f<g;){const w=f+g>>1;this.ids[w]>=u?g=w:f=w+1}const x=[];for(;this.ids[f]===u;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(o,u){const f=new Float64Array(o.ids),g=new Uint32Array(o.positions);return io(f,g,0,f.length-1),u&&u.push(f.buffer,g.buffer),{ids:f,positions:g}}static deserialize(o){const u=new jn;return u.ids=o.ids,u.positions=o.positions,u.indexed=!0,u}}function ci(c){const o=+c;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:Cl(String(c))}function io(c,o,u,f){for(;u<f;){const g=c[u+f>>1];let x=u-1,w=f+1;for(;;){do x++;while(c[x]<g);do w--;while(c[w]>g);if(x>=w)break;Vn(c,x,w),Vn(o,3*x,3*w),Vn(o,3*x+1,3*w+1),Vn(o,3*x+2,3*w+2)}w-u<f-w?(io(c,o,u,w),u=w+1):(io(c,o,w+1,f),f=w)}}function Vn(c,o,u){const f=c[o];c[o]=c[u],c[u]=f}jt("FeaturePositionMap",jn);class kl{constructor(o,u){this.gl=o.gl,this.location=u}}class ch extends kl{constructor(o,u){super(o,u),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class py extends kl{constructor(o,u){super(o,u),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class my extends kl{constructor(o,u){super(o,u),this.current=Or.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const l1=new Float32Array(16);function Bp(c){return[Ia(255*c.r,255*c.g),Ia(255*c.b,255*c.a)]}class Aa{constructor(o,u,f){this.value=o,this.uniformNames=u.map(g=>`u_${g}`),this.type=f}setUniform(o,u,f){o.set(f.constantOr(this.value))}getBinding(o,u,f){return this.type==="color"?new my(o,u):new ch(o,u)}}class Tl{constructor(o,u){this.uniformNames=u.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=o.tlbr}setUniform(o,u,f,g){const x=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&o.set(x)}getBinding(o,u,f){return f.substr(0,9)==="u_pattern"?new py(o,u):new ch(o,u)}}class Ra{constructor(o,u,f,g){this.expression=o,this.type=f,this.maxValue=0,this.paintVertexAttributes=u.map(x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(o,u,f,g,x){const w=this.paintVertexArray.length,C=this.expression.evaluate(new _n(0),u,{},g,[],x);this.paintVertexArray.resize(o),this._setPaintValue(w,o,C)}updatePaintArray(o,u,f,g){const x=this.expression.evaluate({zoom:0},f,g);this._setPaintValue(o,u,x)}_setPaintValue(o,u,f){if(this.type==="color"){const g=Bp(f);for(let x=o;x<u;x++)this.paintVertexArray.emplace(x,g[0],g[1])}else{for(let g=o;g<u;g++)this.paintVertexArray.emplace(g,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Go{constructor(o,u,f,g,x,w){this.expression=o,this.uniformNames=u.map(C=>`u_${C}_t`),this.type=f,this.useIntegerZoom=g,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=u.map(C=>({name:`a_${C}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(o,u,f,g,x){const w=this.expression.evaluate(new _n(this.zoom),u,{},g,[],x),C=this.expression.evaluate(new _n(this.zoom+1),u,{},g,[],x),P=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(P,o,w,C)}updatePaintArray(o,u,f,g){const x=this.expression.evaluate({zoom:this.zoom},f,g),w=this.expression.evaluate({zoom:this.zoom+1},f,g);this._setPaintValue(o,u,x,w)}_setPaintValue(o,u,f,g){if(this.type==="color"){const x=Bp(f),w=Bp(g);for(let C=o;C<u;C++)this.paintVertexArray.emplace(C,x[0],x[1],w[0],w[1])}else{for(let x=o;x<u;x++)this.paintVertexArray.emplace(x,f,g);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,u){const f=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,g=$(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);o.set(g)}getBinding(o,u,f){return new ch(o,u)}}class Da{constructor(o,u,f,g,x,w){this.expression=o,this.type=u,this.useIntegerZoom=f,this.zoom=g,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(o,u,f){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(g,o,u.patterns&&u.patterns[this.layerId],f)}updatePaintArray(o,u,f,g,x){this._setPaintValues(o,u,f.patterns&&f.patterns[this.layerId],x)}_setPaintValues(o,u,f,g){if(!g||!f)return;const{min:x,mid:w,max:C}=f,P=g[x],M=g[w],U=g[C];if(P&&M&&U)for(let q=o;q<u;q++)this.zoomInPaintVertexArray.emplace(q,M.tl[0],M.tl[1],M.br[0],M.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],M.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(q,M.tl[0],M.tl[1],M.br[0],M.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],M.pixelRatio,U.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,Pa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,Pa.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Fp{constructor(o,u,f){this.binders={},this._buffers=[];const g=[];for(const x in o.paint._values){if(!f(x))continue;const w=o.paint.get(x);if(!(w instanceof Vi&&mc(w.property.specification)))continue;const C=C4(x,o.type),P=w.value,M=w.property.specification.type,U=w.property.useIntegerZoom,q=w.property.specification["property-type"],ee=q==="cross-faded"||q==="cross-faded-data-driven";if(P.kind==="constant")this.binders[x]=ee?new Tl(P.value,C):new Aa(P.value,C,M),g.push(`/u_${x}`);else if(P.kind==="source"||ee){const oe=wE(x,M,"source");this.binders[x]=ee?new Da(P,M,U,u,oe,o.id):new Ra(P,C,M,oe),g.push(`/a_${x}`)}else{const oe=wE(x,M,"composite");this.binders[x]=new Go(P,C,M,U,u,oe),g.push(`/z_${x}`)}}this.cacheKey=g.sort().join("")}getMaxValue(o){const u=this.binders[o];return u instanceof Ra||u instanceof Go?u.maxValue:0}populatePaintArrays(o,u,f,g,x){for(const w in this.binders){const C=this.binders[w];(C instanceof Ra||C instanceof Go||C instanceof Da)&&C.populatePaintArray(o,u,f,g,x)}}setConstantPatternPositions(o,u){for(const f in this.binders){const g=this.binders[f];g instanceof Tl&&g.setConstantPatternPositions(o,u)}}updatePaintArrays(o,u,f,g,x){let w=!1;for(const C in o){const P=u.getPositions(C);for(const M of P){const U=f.feature(M.index);for(const q in this.binders){const ee=this.binders[q];if((ee instanceof Ra||ee instanceof Go||ee instanceof Da)&&ee.expression.isStateDependent===!0){const oe=g.paint.get(q);ee.expression=oe.value,ee.updatePaintArray(M.start,M.end,U,o[C],x),w=!0}}}}return w}defines(){const o=[];for(const u in this.binders){const f=this.binders[u];(f instanceof Aa||f instanceof Tl)&&o.push(...f.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return o}getBinderAttributes(){const o=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Ra||f instanceof Go)for(let g=0;g<f.paintVertexAttributes.length;g++)o.push(f.paintVertexAttributes[g].name);else if(f instanceof Da)for(let g=0;g<Pa.members.length;g++)o.push(Pa.members[g].name)}return o}getBinderUniforms(){const o=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Aa||f instanceof Tl||f instanceof Go)for(const g of f.uniformNames)o.push(g)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,u){const f=[];for(const g in this.binders){const x=this.binders[g];if(x instanceof Aa||x instanceof Tl||x instanceof Go){for(const w of x.uniformNames)if(u[w]){const C=x.getBinding(o,u[w],w);f.push({name:w,property:g,binding:C})}}}return f}setUniforms(o,u,f,g){for(const{name:x,property:w,binding:C}of u)this.binders[w].setUniform(C,g,f.get(w),x)}updatePaintBuffers(o){this._buffers=[];for(const u in this.binders){const f=this.binders[u];if(o&&f instanceof Da){const g=o.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(f instanceof Ra||f instanceof Go)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(o){for(const u in this.binders){const f=this.binders[u];(f instanceof Ra||f instanceof Go||f instanceof Da)&&f.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const u=this.binders[o];(u instanceof Ra||u instanceof Go||u instanceof Da)&&u.destroy()}}}class os{constructor(o,u,f=()=>!0){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new Fp(g,u,f);this.needsUpload=!1,this._featureMap=new jn,this._bufferOffset=0}populatePaintArrays(o,u,f,g,x,w){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(o,u,g,x,w);u.id!==void 0&&this._featureMap.add(u.id,f,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,u,f,g){for(const x of f)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(o,this._featureMap,u,x,g)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function C4(c,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${o}-`,"").replace(/-/g,"_")]}function wE(c,o,u){const f={color:{source:bc,composite:fe},number:{source:A,composite:bc}},g=function(x){return{"line-pattern":{source:sn,composite:sn},"fill-pattern":{source:sn,composite:sn},"fill-extrusion-pattern":{source:sn,composite:sn}}[x]}(c);return g&&g[u]||f[o][u]}jt("ConstantBinder",Aa),jt("CrossFadedConstantBinder",Tl),jt("SourceExpressionBinder",Ra),jt("CrossFadedCompositeBinder",Da),jt("CompositeExpressionBinder",Go),jt("ProgramConfiguration",Fp,{omit:["_buffers"]}),jt("ProgramConfigurationSet",os);const ni=8192,c1=Math.pow(2,14)-1,SE=-c1-1;function Ou(c){const o=ni/c.extent,u=c.loadGeometry();for(let f=0;f<u.length;f++){const g=u[f];for(let x=0;x<g.length;x++){const w=g[x],C=Math.round(w.x*o),P=Math.round(w.y*o);w.x=$(C,SE,c1),w.y=$(P,SE,c1),(C<w.x||C>w.x+1||P<w.y||P>w.y+1)&&We("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function $u(c,o){return{type:c.type,id:c.id,properties:c.properties,geometry:o?Ou(c):[]}}function gy(c,o,u,f,g){c.emplaceBack(2*o+(f+1)/2,2*u+(g+1)/2)}class u1{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new qt,this.indexArray=new Ci,this.segments=new xn,this.programConfigurations=new os(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,f){const g=this.layers[0],x=[];let w=null,C=!1;g.type==="circle"&&(w=g.layout.get("circle-sort-key"),C=!w.isConstant());for(const{feature:P,id:M,index:U,sourceLayerIndex:q}of o){const ee=this.layers[0]._featureFilter.needGeometry,oe=$u(P,ee);if(!this.layers[0]._featureFilter.filter(new _n(this.zoom),oe,f))continue;const ae=C?w.evaluate(oe,{},f):void 0,ce={id:M,properties:P.properties,type:P.type,sourceLayerIndex:q,index:U,geometry:ee?oe.geometry:Ou(P),patterns:{},sortKey:ae};x.push(ce)}C&&x.sort((P,M)=>P.sortKey-M.sortKey);for(const P of x){const{geometry:M,index:U,sourceLayerIndex:q}=P,ee=o[U].feature;this.addFeature(P,M,U,f),u.featureIndex.insert(ee,M,U,q,this.index)}}update(o,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Po),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,u,f,g){for(const x of u)for(const w of x){const C=w.x,P=w.y;if(C<0||C>=ni||P<0||P>=ni)continue;const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),U=M.vertexLength;gy(this.layoutVertexArray,C,P,-1,-1),gy(this.layoutVertexArray,C,P,1,-1),gy(this.layoutVertexArray,C,P,1,1),gy(this.layoutVertexArray,C,P,-1,1),this.indexArray.emplaceBack(U,U+1,U+2),this.indexArray.emplaceBack(U,U+3,U+2),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,{},g)}}function CE(c,o){for(let u=0;u<c.length;u++)if(uh(o,c[u]))return!0;for(let u=0;u<o.length;u++)if(uh(c,o[u]))return!0;return!!d1(c,o)}function k4(c,o,u){return!!uh(c,o)||!!h1(o,c,u)}function kE(c,o){if(c.length===1)return EE(o,c[0]);for(let u=0;u<o.length;u++){const f=o[u];for(let g=0;g<f.length;g++)if(uh(c,f[g]))return!0}for(let u=0;u<c.length;u++)if(EE(o,c[u]))return!0;for(let u=0;u<o.length;u++)if(d1(c,o[u]))return!0;return!1}function T4(c,o,u){if(c.length>1){if(d1(c,o))return!0;for(let f=0;f<o.length;f++)if(h1(o[f],c,u))return!0}for(let f=0;f<c.length;f++)if(h1(c[f],o,u))return!0;return!1}function d1(c,o){if(c.length===0||o.length===0)return!1;for(let u=0;u<c.length-1;u++){const f=c[u],g=c[u+1];for(let x=0;x<o.length-1;x++)if(E4(f,g,o[x],o[x+1]))return!0}return!1}function E4(c,o,u,f){return De(c,u,f)!==De(o,u,f)&&De(c,o,u)!==De(c,o,f)}function h1(c,o,u){const f=u*u;if(o.length===1)return c.distSqr(o[0])<f;for(let g=1;g<o.length;g++)if(TE(c,o[g-1],o[g])<f)return!0;return!1}function TE(c,o,u){const f=o.distSqr(u);if(f===0)return c.distSqr(o);const g=((c.x-o.x)*(u.x-o.x)+(c.y-o.y)*(u.y-o.y))/f;return c.distSqr(g<0?o:g>1?u:u.sub(o)._mult(g)._add(o))}function EE(c,o){let u,f,g,x=!1;for(let w=0;w<c.length;w++){u=c[w];for(let C=0,P=u.length-1;C<u.length;P=C++)f=u[C],g=u[P],f.y>o.y!=g.y>o.y&&o.x<(g.x-f.x)*(o.y-f.y)/(g.y-f.y)+f.x&&(x=!x)}return x}function uh(c,o){let u=!1;for(let f=0,g=c.length-1;f<c.length;g=f++){const x=c[f],w=c[g];x.y>o.y!=w.y>o.y&&o.x<(w.x-x.x)*(o.y-x.y)/(w.y-x.y)+x.x&&(u=!u)}return u}function I4(c,o,u){const f=u[0],g=u[2];if(c.x<f.x&&o.x<f.x||c.x>g.x&&o.x>g.x||c.y<f.y&&o.y<f.y||c.y>g.y&&o.y>g.y)return!1;const x=De(c,o,u[0]);return x!==De(c,o,u[1])||x!==De(c,o,u[2])||x!==De(c,o,u[3])}function Np(c,o,u){const f=o.paint.get(c).value;return f.kind==="constant"?f.value:u.programConfigurations.get(o.id).getMaxValue(c)}function vy(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function yy(c,o,u,f,g){if(!o[0]&&!o[1])return c;const x=I.convert(o)._mult(g);u==="viewport"&&x._rotate(-f);const w=[];for(let C=0;C<c.length;C++)w.push(c[C].sub(x));return w}let IE,PE;jt("CircleBucket",u1,{omit:["layers"]});var P4={get paint(){return PE=PE||new Zn({"circle-radius":new cr(He.paint_circle["circle-radius"]),"circle-color":new cr(He.paint_circle["circle-color"]),"circle-blur":new cr(He.paint_circle["circle-blur"]),"circle-opacity":new cr(He.paint_circle["circle-opacity"]),"circle-translate":new er(He.paint_circle["circle-translate"]),"circle-translate-anchor":new er(He.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new er(He.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new er(He.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new cr(He.paint_circle["circle-stroke-width"]),"circle-stroke-color":new cr(He.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new cr(He.paint_circle["circle-stroke-opacity"])})},get layout(){return IE=IE||new Zn({"circle-sort-key":new cr(He.layout_circle["circle-sort-key"])})}},oo=1e-6,dh=typeof Float32Array<"u"?Float32Array:Array;function f1(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function AE(c,o,u){var f=o[0],g=o[1],x=o[2],w=o[3],C=o[4],P=o[5],M=o[6],U=o[7],q=o[8],ee=o[9],oe=o[10],ae=o[11],ce=o[12],ve=o[13],be=o[14],ze=o[15],ke=u[0],Be=u[1],Ge=u[2],et=u[3];return c[0]=ke*f+Be*C+Ge*q+et*ce,c[1]=ke*g+Be*P+Ge*ee+et*ve,c[2]=ke*x+Be*M+Ge*oe+et*be,c[3]=ke*w+Be*U+Ge*ae+et*ze,c[4]=(ke=u[4])*f+(Be=u[5])*C+(Ge=u[6])*q+(et=u[7])*ce,c[5]=ke*g+Be*P+Ge*ee+et*ve,c[6]=ke*x+Be*M+Ge*oe+et*be,c[7]=ke*w+Be*U+Ge*ae+et*ze,c[8]=(ke=u[8])*f+(Be=u[9])*C+(Ge=u[10])*q+(et=u[11])*ce,c[9]=ke*g+Be*P+Ge*ee+et*ve,c[10]=ke*x+Be*M+Ge*oe+et*be,c[11]=ke*w+Be*U+Ge*ae+et*ze,c[12]=(ke=u[12])*f+(Be=u[13])*C+(Ge=u[14])*q+(et=u[15])*ce,c[13]=ke*g+Be*P+Ge*ee+et*ve,c[14]=ke*x+Be*M+Ge*oe+et*be,c[15]=ke*w+Be*U+Ge*ae+et*ze,c}Math.hypot||(Math.hypot=function(){for(var c=0,o=arguments.length;o--;)c+=arguments[o]*arguments[o];return Math.sqrt(c)});var jp,A4=AE;function _y(c,o,u){var f=o[0],g=o[1],x=o[2],w=o[3];return c[0]=u[0]*f+u[4]*g+u[8]*x+u[12]*w,c[1]=u[1]*f+u[5]*g+u[9]*x+u[13]*w,c[2]=u[2]*f+u[6]*g+u[10]*x+u[14]*w,c[3]=u[3]*f+u[7]*g+u[11]*x+u[15]*w,c}jp=new dh(4),dh!=Float32Array&&(jp[0]=0,jp[1]=0,jp[2]=0,jp[3]=0);class R4 extends Ho{constructor(o){super(o,P4)}createBucket(o){return new u1(o)}queryRadius(o){const u=o;return Np("circle-radius",this,u)+Np("circle-stroke-width",this,u)+vy(this.paint.get("circle-translate"))}queryIntersectsFeature(o,u,f,g,x,w,C,P){const M=yy(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),w.angle,C),U=this.paint.get("circle-radius").evaluate(u,f)+this.paint.get("circle-stroke-width").evaluate(u,f),q=this.paint.get("circle-pitch-alignment")==="map",ee=q?M:function(ae,ce){return ae.map(ve=>RE(ve,ce))}(M,P),oe=q?U*C:U;for(const ae of g)for(const ce of ae){const ve=q?ce:RE(ce,P);let be=oe;const ze=_y([],[ce.x,ce.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?be*=ze[3]/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(be*=w.cameraToCenterDistance/ze[3]),k4(ee,ve,be))return!0}return!1}}function RE(c,o){const u=_y([],[c.x,c.y,0,1],o);return new I(u[0]/u[3],u[1]/u[3])}class DE extends u1{}let ME;jt("HeatmapBucket",DE,{omit:["layers"]});var D4={get paint(){return ME=ME||new Zn({"heatmap-radius":new cr(He.paint_heatmap["heatmap-radius"]),"heatmap-weight":new cr(He.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new er(He.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Dp(He.paint_heatmap["heatmap-color"]),"heatmap-opacity":new er(He.paint_heatmap["heatmap-opacity"])})}};function p1(c,{width:o,height:u},f,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*u*f)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${o*u*f}`)}else g=new Uint8Array(o*u*f);return c.width=o,c.height=u,c.data=g,c}function zE(c,{width:o,height:u},f){if(o===c.width&&u===c.height)return;const g=p1({},{width:o,height:u},f);m1(c,g,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,o),height:Math.min(c.height,u)},f),c.width=o,c.height=u,c.data=g.data}function m1(c,o,u,f,g,x){if(g.width===0||g.height===0)return o;if(g.width>c.width||g.height>c.height||u.x>c.width-g.width||u.y>c.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||f.x>o.width-g.width||f.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const w=c.data,C=o.data;if(w===C)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<g.height;P++){const M=((u.y+P)*c.width+u.x)*x,U=((f.y+P)*o.width+f.x)*x;for(let q=0;q<g.width*x;q++)C[U+q]=w[M+q]}return o}class Vp{constructor(o,u){p1(this,o,1,u)}resize(o){zE(this,o,1)}clone(){return new Vp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,f,g,x){m1(o,u,f,g,x,1)}}class na{constructor(o,u){p1(this,o,4,u)}resize(o){zE(this,o,4)}replace(o,u){u?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new na({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,f,g,x){m1(o,u,f,g,x,4)}}function LE(c){const o={},u=c.resolution||256,f=c.clips?c.clips.length:1,g=c.image||new na({width:u,height:f});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const x=(w,C,P)=>{o[c.evaluationKey]=P;const M=c.expression.evaluate(o);g.data[w+C+0]=Math.floor(255*M.r/M.a),g.data[w+C+1]=Math.floor(255*M.g/M.a),g.data[w+C+2]=Math.floor(255*M.b/M.a),g.data[w+C+3]=Math.floor(255*M.a)};if(c.clips)for(let w=0,C=0;w<f;++w,C+=4*u)for(let P=0,M=0;P<u;P++,M+=4){const U=P/(u-1),{start:q,end:ee}=c.clips[w];x(C,M,q*(1-U)+ee*U)}else for(let w=0,C=0;w<u;w++,C+=4)x(0,C,w/(u-1));return g}jt("AlphaImage",Vp),jt("RGBAImage",na);class M4 extends Ho{createBucket(o){return new DE(o)}constructor(o){super(o,D4),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=LE({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let OE;var z4={get paint(){return OE=OE||new Zn({"hillshade-illumination-direction":new er(He.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new er(He.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new er(He.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new er(He.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new er(He.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new er(He.paint_hillshade["hillshade-accent-color"])})}};class L4 extends Ho{constructor(o){super(o,z4)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const O4=Rn([{name:"a_pos",components:2,type:"Int16"}],4),{members:$4}=O4;var g1={exports:{}};function xy(c,o,u){u=u||2;var f,g,x,w,C,P,M,U=o&&o.length,q=U?o[0]*u:c.length,ee=$E(c,0,q,u,!0),oe=[];if(!ee||ee.next===ee.prev)return oe;if(U&&(ee=function(ce,ve,be,ze){var ke,Be,Ge,et=[];for(ke=0,Be=ve.length;ke<Be;ke++)(Ge=$E(ce,ve[ke]*ze,ke<Be-1?ve[ke+1]*ze:ce.length,ze,!1))===Ge.next&&(Ge.steiner=!0),et.push(G4(Ge));for(et.sort(V4),ke=0;ke<et.length;ke++)be=U4(et[ke],be);return be}(c,o,ee,u)),c.length>80*u){f=x=c[0],g=w=c[1];for(var ae=u;ae<q;ae+=u)(C=c[ae])<f&&(f=C),(P=c[ae+1])<g&&(g=P),C>x&&(x=C),P>w&&(w=P);M=(M=Math.max(x-f,w-g))!==0?32767/M:0}return Up(ee,oe,u,f,g,M,0),oe}function $E(c,o,u,f,g){var x,w;if(g===_1(c,o,u,f)>0)for(x=o;x<u;x+=f)w=NE(x,c[x],c[x+1],w);else for(x=u-f;x>=o;x-=f)w=NE(x,c[x],c[x+1],w);return w&&by(w,w.next)&&(Gp(w),w=w.next),w}function Bu(c,o){if(!c)return c;o||(o=c);var u,f=c;do if(u=!1,f.steiner||!by(f,f.next)&&Xn(f.prev,f,f.next)!==0)f=f.next;else{if(Gp(f),(f=o=f.prev)===f.next)break;u=!0}while(u||f!==o);return o}function Up(c,o,u,f,g,x,w){if(c){!w&&x&&function(U,q,ee,oe){var ae=U;do ae.z===0&&(ae.z=v1(ae.x,ae.y,q,ee,oe)),ae.prevZ=ae.prev,ae.nextZ=ae.next,ae=ae.next;while(ae!==U);ae.prevZ.nextZ=null,ae.prevZ=null,function(ce){var ve,be,ze,ke,Be,Ge,et,Ot,Zt=1;do{for(be=ce,ce=null,Be=null,Ge=0;be;){for(Ge++,ze=be,et=0,ve=0;ve<Zt&&(et++,ze=ze.nextZ);ve++);for(Ot=Zt;et>0||Ot>0&&ze;)et!==0&&(Ot===0||!ze||be.z<=ze.z)?(ke=be,be=be.nextZ,et--):(ke=ze,ze=ze.nextZ,Ot--),Be?Be.nextZ=ke:ce=ke,ke.prevZ=Be,Be=ke;be=ze}Be.nextZ=null,Zt*=2}while(Ge>1)}(ae)}(c,f,g,x);for(var C,P,M=c;c.prev!==c.next;)if(C=c.prev,P=c.next,x?F4(c,f,g,x):B4(c))o.push(C.i/u|0),o.push(c.i/u|0),o.push(P.i/u|0),Gp(c),c=P.next,M=P.next;else if((c=P)===M){w?w===1?Up(c=N4(Bu(c),o,u),o,u,f,g,x,2):w===2&&j4(c,o,u,f,g,x):Up(Bu(c),o,u,f,g,x,1);break}}}function B4(c){var o=c.prev,u=c,f=c.next;if(Xn(o,u,f)>=0)return!1;for(var g=o.x,x=u.x,w=f.x,C=o.y,P=u.y,M=f.y,U=g<x?g<w?g:w:x<w?x:w,q=C<P?C<M?C:M:P<M?P:M,ee=g>x?g>w?g:w:x>w?x:w,oe=C>P?C>M?C:M:P>M?P:M,ae=f.next;ae!==o;){if(ae.x>=U&&ae.x<=ee&&ae.y>=q&&ae.y<=oe&&hh(g,C,x,P,w,M,ae.x,ae.y)&&Xn(ae.prev,ae,ae.next)>=0)return!1;ae=ae.next}return!0}function F4(c,o,u,f){var g=c.prev,x=c,w=c.next;if(Xn(g,x,w)>=0)return!1;for(var C=g.x,P=x.x,M=w.x,U=g.y,q=x.y,ee=w.y,oe=C<P?C<M?C:M:P<M?P:M,ae=U<q?U<ee?U:ee:q<ee?q:ee,ce=C>P?C>M?C:M:P>M?P:M,ve=U>q?U>ee?U:ee:q>ee?q:ee,be=v1(oe,ae,o,u,f),ze=v1(ce,ve,o,u,f),ke=c.prevZ,Be=c.nextZ;ke&&ke.z>=be&&Be&&Be.z<=ze;){if(ke.x>=oe&&ke.x<=ce&&ke.y>=ae&&ke.y<=ve&&ke!==g&&ke!==w&&hh(C,U,P,q,M,ee,ke.x,ke.y)&&Xn(ke.prev,ke,ke.next)>=0||(ke=ke.prevZ,Be.x>=oe&&Be.x<=ce&&Be.y>=ae&&Be.y<=ve&&Be!==g&&Be!==w&&hh(C,U,P,q,M,ee,Be.x,Be.y)&&Xn(Be.prev,Be,Be.next)>=0))return!1;Be=Be.nextZ}for(;ke&&ke.z>=be;){if(ke.x>=oe&&ke.x<=ce&&ke.y>=ae&&ke.y<=ve&&ke!==g&&ke!==w&&hh(C,U,P,q,M,ee,ke.x,ke.y)&&Xn(ke.prev,ke,ke.next)>=0)return!1;ke=ke.prevZ}for(;Be&&Be.z<=ze;){if(Be.x>=oe&&Be.x<=ce&&Be.y>=ae&&Be.y<=ve&&Be!==g&&Be!==w&&hh(C,U,P,q,M,ee,Be.x,Be.y)&&Xn(Be.prev,Be,Be.next)>=0)return!1;Be=Be.nextZ}return!0}function N4(c,o,u){var f=c;do{var g=f.prev,x=f.next.next;!by(g,x)&&BE(g,f,f.next,x)&&Hp(g,x)&&Hp(x,g)&&(o.push(g.i/u|0),o.push(f.i/u|0),o.push(x.i/u|0),Gp(f),Gp(f.next),f=c=x),f=f.next}while(f!==c);return Bu(f)}function j4(c,o,u,f,g,x){var w=c;do{for(var C=w.next.next;C!==w.prev;){if(w.i!==C.i&&W4(w,C)){var P=FE(w,C);return w=Bu(w,w.next),P=Bu(P,P.next),Up(w,o,u,f,g,x,0),void Up(P,o,u,f,g,x,0)}C=C.next}w=w.next}while(w!==c)}function V4(c,o){return c.x-o.x}function U4(c,o){var u=function(g,x){var w,C=x,P=g.x,M=g.y,U=-1/0;do{if(M<=C.y&&M>=C.next.y&&C.next.y!==C.y){var q=C.x+(M-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(q<=P&&q>U&&(U=q,w=C.x<C.next.x?C:C.next,q===P))return w}C=C.next}while(C!==x);if(!w)return null;var ee,oe=w,ae=w.x,ce=w.y,ve=1/0;C=w;do P>=C.x&&C.x>=ae&&P!==C.x&&hh(M<ce?P:U,M,ae,ce,M<ce?U:P,M,C.x,C.y)&&(ee=Math.abs(M-C.y)/(P-C.x),Hp(C,g)&&(ee<ve||ee===ve&&(C.x>w.x||C.x===w.x&&H4(w,C)))&&(w=C,ve=ee)),C=C.next;while(C!==oe);return w}(c,o);if(!u)return o;var f=FE(u,c);return Bu(f,f.next),Bu(u,u.next)}function H4(c,o){return Xn(c.prev,c,o.prev)<0&&Xn(o.next,c,c.next)<0}function v1(c,o,u,f,g){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-u)*g|0)|c<<8))|c<<4))|c<<2))|c<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-f)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function G4(c){var o=c,u=c;do(o.x<u.x||o.x===u.x&&o.y<u.y)&&(u=o),o=o.next;while(o!==c);return u}function hh(c,o,u,f,g,x,w,C){return(g-w)*(o-C)>=(c-w)*(x-C)&&(c-w)*(f-C)>=(u-w)*(o-C)&&(u-w)*(x-C)>=(g-w)*(f-C)}function W4(c,o){return c.next.i!==o.i&&c.prev.i!==o.i&&!function(u,f){var g=u;do{if(g.i!==u.i&&g.next.i!==u.i&&g.i!==f.i&&g.next.i!==f.i&&BE(g,g.next,u,f))return!0;g=g.next}while(g!==u);return!1}(c,o)&&(Hp(c,o)&&Hp(o,c)&&function(u,f){var g=u,x=!1,w=(u.x+f.x)/2,C=(u.y+f.y)/2;do g.y>C!=g.next.y>C&&g.next.y!==g.y&&w<(g.next.x-g.x)*(C-g.y)/(g.next.y-g.y)+g.x&&(x=!x),g=g.next;while(g!==u);return x}(c,o)&&(Xn(c.prev,c,o.prev)||Xn(c,o.prev,o))||by(c,o)&&Xn(c.prev,c,c.next)>0&&Xn(o.prev,o,o.next)>0)}function Xn(c,o,u){return(o.y-c.y)*(u.x-o.x)-(o.x-c.x)*(u.y-o.y)}function by(c,o){return c.x===o.x&&c.y===o.y}function BE(c,o,u,f){var g=Sy(Xn(c,o,u)),x=Sy(Xn(c,o,f)),w=Sy(Xn(u,f,c)),C=Sy(Xn(u,f,o));return g!==x&&w!==C||!(g!==0||!wy(c,u,o))||!(x!==0||!wy(c,f,o))||!(w!==0||!wy(u,c,f))||!(C!==0||!wy(u,o,f))}function wy(c,o,u){return o.x<=Math.max(c.x,u.x)&&o.x>=Math.min(c.x,u.x)&&o.y<=Math.max(c.y,u.y)&&o.y>=Math.min(c.y,u.y)}function Sy(c){return c>0?1:c<0?-1:0}function Hp(c,o){return Xn(c.prev,c,c.next)<0?Xn(c,o,c.next)>=0&&Xn(c,c.prev,o)>=0:Xn(c,o,c.prev)<0||Xn(c,c.next,o)<0}function FE(c,o){var u=new y1(c.i,c.x,c.y),f=new y1(o.i,o.x,o.y),g=c.next,x=o.prev;return c.next=o,o.prev=c,u.next=g,g.prev=u,f.next=u,u.prev=f,x.next=f,f.prev=x,f}function NE(c,o,u,f){var g=new y1(c,o,u);return f?(g.next=f.next,g.prev=f,f.next.prev=g,f.next=g):(g.prev=g,g.next=g),g}function Gp(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function y1(c,o,u){this.i=c,this.x=o,this.y=u,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _1(c,o,u,f){for(var g=0,x=o,w=u-f;x<u;x+=f)g+=(c[w]-c[x])*(c[x+1]+c[w+1]),w=x;return g}g1.exports=xy,g1.exports.default=xy,xy.deviation=function(c,o,u,f){var g=o&&o.length,x=Math.abs(_1(c,0,g?o[0]*u:c.length,u));if(g)for(var w=0,C=o.length;w<C;w++)x-=Math.abs(_1(c,o[w]*u,w<C-1?o[w+1]*u:c.length,u));var P=0;for(w=0;w<f.length;w+=3){var M=f[w]*u,U=f[w+1]*u,q=f[w+2]*u;P+=Math.abs((c[M]-c[q])*(c[U+1]-c[M+1])-(c[M]-c[U])*(c[q+1]-c[M+1]))}return x===0&&P===0?0:Math.abs((P-x)/x)},xy.flatten=function(c){for(var o=c[0][0].length,u={vertices:[],holes:[],dimensions:o},f=0,g=0;g<c.length;g++){for(var x=0;x<c[g].length;x++)for(var w=0;w<o;w++)u.vertices.push(c[g][x][w]);g>0&&u.holes.push(f+=c[g-1].length)}return u};var jE=y(g1.exports);function q4(c,o,u,f,g){VE(c,o,u,f||c.length-1,g)}function VE(c,o,u,f,g){for(;f>u;){if(f-u>600){var x=f-u+1,w=o-u+1,C=Math.log(x),P=.5*Math.exp(2*C/3),M=.5*Math.sqrt(C*P*(x-P)/x)*(w-x/2<0?-1:1);VE(c,o,Math.max(u,Math.floor(o-w*P/x+M)),Math.min(f,Math.floor(o+(x-w)*P/x+M)),g)}var U=c[o],q=u,ee=f;for(Wp(c,u,o),g(c[f],U)>0&&Wp(c,u,f);q<ee;){for(Wp(c,q,ee),q++,ee--;g(c[q],U)<0;)q++;for(;g(c[ee],U)>0;)ee--}g(c[u],U)===0?Wp(c,u,ee):Wp(c,++ee,f),ee<=o&&(u=ee+1),o<=ee&&(f=ee-1)}}function Wp(c,o,u){var f=c[o];c[o]=c[u],c[u]=f}function x1(c,o){const u=c.length;if(u<=1)return[c];const f=[];let g,x;for(let w=0;w<u;w++){const C=Se(c[w]);C!==0&&(c[w].area=Math.abs(C),x===void 0&&(x=C<0),x===C<0?(g&&f.push(g),g=[c[w]]):g.push(c[w]))}if(g&&f.push(g),o>1)for(let w=0;w<f.length;w++)f[w].length<=o||(q4(f[w],o,1,f[w].length-1,Z4),f[w]=f[w].slice(0,o));return f}function Z4(c,o){return o.area-c.area}function b1(c,o,u){const f=u.patternDependencies;let g=!1;for(const x of o){const w=x.paint.get(`${c}-pattern`);w.isConstant()||(g=!0);const C=w.constantOr(null);C&&(g=!0,f[C.to]=!0,f[C.from]=!0)}return g}function w1(c,o,u,f,g){const x=g.patternDependencies;for(const w of o){const C=w.paint.get(`${c}-pattern`).value;if(C.kind!=="constant"){let P=C.evaluate({zoom:f-1},u,{},g.availableImages),M=C.evaluate({zoom:f},u,{},g.availableImages),U=C.evaluate({zoom:f+1},u,{},g.availableImages);P=P&&P.name?P.name:P,M=M&&M.name?M.name:M,U=U&&U.name?U.name:U,x[P]=!0,x[M]=!0,x[U]=!0,u.patterns[w.id]={min:P,mid:M,max:U}}}return u}class S1{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ir,this.indexArray=new Ci,this.indexArray2=new li,this.programConfigurations=new os(o.layers,o.zoom),this.segments=new xn,this.segments2=new xn,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,f){this.hasPattern=b1("fill",this.layers,u);const g=this.layers[0].layout.get("fill-sort-key"),x=!g.isConstant(),w=[];for(const{feature:C,id:P,index:M,sourceLayerIndex:U}of o){const q=this.layers[0]._featureFilter.needGeometry,ee=$u(C,q);if(!this.layers[0]._featureFilter.filter(new _n(this.zoom),ee,f))continue;const oe=x?g.evaluate(ee,{},f,u.availableImages):void 0,ae={id:P,properties:C.properties,type:C.type,sourceLayerIndex:U,index:M,geometry:q?ee.geometry:Ou(C),patterns:{},sortKey:oe};w.push(ae)}x&&w.sort((C,P)=>C.sortKey-P.sortKey);for(const C of w){const{geometry:P,index:M,sourceLayerIndex:U}=C;if(this.hasPattern){const q=w1("fill",this.layers,C,this.zoom,u);this.patternFeatures.push(q)}else this.addFeature(C,P,M,f,{});u.featureIndex.insert(o[M].feature,P,M,U,this.index)}}update(o,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,f)}addFeatures(o,u,f){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,u,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,$4),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,u,f,g,x){for(const w of x1(u,500)){let C=0;for(const oe of w)C+=oe.length;const P=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),M=P.vertexLength,U=[],q=[];for(const oe of w){if(oe.length===0)continue;oe!==w[0]&&q.push(U.length/2);const ae=this.segments2.prepareSegment(oe.length,this.layoutVertexArray,this.indexArray2),ce=ae.vertexLength;this.layoutVertexArray.emplaceBack(oe[0].x,oe[0].y),this.indexArray2.emplaceBack(ce+oe.length-1,ce),U.push(oe[0].x),U.push(oe[0].y);for(let ve=1;ve<oe.length;ve++)this.layoutVertexArray.emplaceBack(oe[ve].x,oe[ve].y),this.indexArray2.emplaceBack(ce+ve-1,ce+ve),U.push(oe[ve].x),U.push(oe[ve].y);ae.vertexLength+=oe.length,ae.primitiveLength+=oe.length}const ee=jE(U,q);for(let oe=0;oe<ee.length;oe+=3)this.indexArray.emplaceBack(M+ee[oe],M+ee[oe+1],M+ee[oe+2]);P.vertexLength+=C,P.primitiveLength+=ee.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,x,g)}}let UE,HE;jt("FillBucket",S1,{omit:["layers","patternFeatures"]});var K4={get paint(){return HE=HE||new Zn({"fill-antialias":new er(He.paint_fill["fill-antialias"]),"fill-opacity":new cr(He.paint_fill["fill-opacity"]),"fill-color":new cr(He.paint_fill["fill-color"]),"fill-outline-color":new cr(He.paint_fill["fill-outline-color"]),"fill-translate":new er(He.paint_fill["fill-translate"]),"fill-translate-anchor":new er(He.paint_fill["fill-translate-anchor"]),"fill-pattern":new Mu(He.paint_fill["fill-pattern"])})},get layout(){return UE=UE||new Zn({"fill-sort-key":new cr(He.layout_fill["fill-sort-key"])})}};class X4 extends Ho{constructor(o){super(o,K4)}recalculate(o,u){super.recalculate(o,u);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new S1(o)}queryRadius(){return vy(this.paint.get("fill-translate"))}queryIntersectsFeature(o,u,f,g,x,w,C){return kE(yy(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),w.angle,C),g)}isTileClipped(){return!0}}const Y4=Rn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),J4=Rn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Q4}=Y4;var Sc={},eF=S,GE=fh;function fh(c,o,u,f,g){this.properties={},this.extent=u,this.type=0,this._pbf=c,this._geometry=-1,this._keys=f,this._values=g,c.readFields(tF,this,o)}function tF(c,o,u){c==1?o.id=u.readVarint():c==2?function(f,g){for(var x=f.readVarint()+f.pos;f.pos<x;){var w=g._keys[f.readVarint()],C=g._values[f.readVarint()];g.properties[w]=C}}(u,o):c==3?o.type=u.readVarint():c==4&&(o._geometry=u.pos)}function rF(c){for(var o,u,f=0,g=0,x=c.length,w=x-1;g<x;w=g++)f+=((u=c[w]).x-(o=c[g]).x)*(o.y+u.y);return f}fh.types=["Unknown","Point","LineString","Polygon"],fh.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var o,u=c.readVarint()+c.pos,f=1,g=0,x=0,w=0,C=[];c.pos<u;){if(g<=0){var P=c.readVarint();f=7&P,g=P>>3}if(g--,f===1||f===2)x+=c.readSVarint(),w+=c.readSVarint(),f===1&&(o&&C.push(o),o=[]),o.push(new eF(x,w));else{if(f!==7)throw new Error("unknown command "+f);o&&o.push(o[0].clone())}}return o&&C.push(o),C},fh.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var o=c.readVarint()+c.pos,u=1,f=0,g=0,x=0,w=1/0,C=-1/0,P=1/0,M=-1/0;c.pos<o;){if(f<=0){var U=c.readVarint();u=7&U,f=U>>3}if(f--,u===1||u===2)(g+=c.readSVarint())<w&&(w=g),g>C&&(C=g),(x+=c.readSVarint())<P&&(P=x),x>M&&(M=x);else if(u!==7)throw new Error("unknown command "+u)}return[w,P,C,M]},fh.prototype.toGeoJSON=function(c,o,u){var f,g,x=this.extent*Math.pow(2,u),w=this.extent*c,C=this.extent*o,P=this.loadGeometry(),M=fh.types[this.type];function U(oe){for(var ae=0;ae<oe.length;ae++){var ce=oe[ae];oe[ae]=[360*(ce.x+w)/x-180,360/Math.PI*Math.atan(Math.exp((180-360*(ce.y+C)/x)*Math.PI/180))-90]}}switch(this.type){case 1:var q=[];for(f=0;f<P.length;f++)q[f]=P[f][0];U(P=q);break;case 2:for(f=0;f<P.length;f++)U(P[f]);break;case 3:for(P=function(oe){var ae=oe.length;if(ae<=1)return[oe];for(var ce,ve,be=[],ze=0;ze<ae;ze++){var ke=rF(oe[ze]);ke!==0&&(ve===void 0&&(ve=ke<0),ve===ke<0?(ce&&be.push(ce),ce=[oe[ze]]):ce.push(oe[ze]))}return ce&&be.push(ce),be}(P),f=0;f<P.length;f++)for(g=0;g<P[f].length;g++)U(P[f][g])}P.length===1?P=P[0]:M="Multi"+M;var ee={type:"Feature",geometry:{type:M,coordinates:P},properties:this.properties};return"id"in this&&(ee.id=this.id),ee};var nF=GE,WE=qE;function qE(c,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(iF,this,o),this.length=this._features.length}function iF(c,o,u){c===15?o.version=u.readVarint():c===1?o.name=u.readString():c===5?o.extent=u.readVarint():c===2?o._features.push(u.pos):c===3?o._keys.push(u.readString()):c===4&&o._values.push(function(f){for(var g=null,x=f.readVarint()+f.pos;f.pos<x;){var w=f.readVarint()>>3;g=w===1?f.readString():w===2?f.readFloat():w===3?f.readDouble():w===4?f.readVarint64():w===5?f.readVarint():w===6?f.readSVarint():w===7?f.readBoolean():null}return g}(u))}qE.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var o=this._pbf.readVarint()+this._pbf.pos;return new nF(this._pbf,o,this.extent,this._keys,this._values)};var oF=WE;function aF(c,o,u){if(c===3){var f=new oF(u,u.readVarint()+u.pos);f.length&&(o[f.name]=f)}}Sc.VectorTile=function(c,o){this.layers=c.readFields(aF,{},o)},Sc.VectorTileFeature=GE,Sc.VectorTileLayer=WE;const sF=Sc.VectorTileFeature.types,C1=Math.pow(2,13);function qp(c,o,u,f,g,x,w,C){c.emplaceBack(o,u,2*Math.floor(f*C1)+w,g*C1*2,x*C1*2,Math.round(C))}class k1{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Pt,this.centroidVertexArray=new mt,this.indexArray=new Ci,this.programConfigurations=new os(o.layers,o.zoom),this.segments=new xn,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,f){this.features=[],this.hasPattern=b1("fill-extrusion",this.layers,u);for(const{feature:g,id:x,index:w,sourceLayerIndex:C}of o){const P=this.layers[0]._featureFilter.needGeometry,M=$u(g,P);if(!this.layers[0]._featureFilter.filter(new _n(this.zoom),M,f))continue;const U={id:x,sourceLayerIndex:C,index:w,geometry:P?M.geometry:Ou(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(w1("fill-extrusion",this.layers,U,this.zoom,u)):this.addFeature(U,U.geometry,w,f,{}),u.featureIndex.insert(g,U.geometry,w,C,this.index,!0)}}addFeatures(o,u,f){for(const g of this.features){const{geometry:x}=g;this.addFeature(g,x,g.index,u,f)}}update(o,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Q4),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,J4.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,u,f,g,x){const w={x:0,y:0,vertexCount:0};for(const C of x1(u,500)){let P=0;for(const ae of C)P+=ae.length;let M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ae of C){if(ae.length===0||cF(ae))continue;let ce=0;for(let ve=0;ve<ae.length;ve++){const be=ae[ve];if(ve>=1){const ze=ae[ve-1];if(!lF(be,ze)){M.vertexLength+4>xn.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ke=be.sub(ze)._perp()._unit(),Be=ze.dist(be);ce+Be>32768&&(ce=0),qp(this.layoutVertexArray,be.x,be.y,ke.x,ke.y,0,0,ce),qp(this.layoutVertexArray,be.x,be.y,ke.x,ke.y,0,1,ce),w.x+=2*be.x,w.y+=2*be.y,w.vertexCount+=2,ce+=Be,qp(this.layoutVertexArray,ze.x,ze.y,ke.x,ke.y,0,0,ce),qp(this.layoutVertexArray,ze.x,ze.y,ke.x,ke.y,0,1,ce),w.x+=2*ze.x,w.y+=2*ze.y,w.vertexCount+=2;const Ge=M.vertexLength;this.indexArray.emplaceBack(Ge,Ge+2,Ge+1),this.indexArray.emplaceBack(Ge+1,Ge+2,Ge+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+P>xn.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),sF[o.type]!=="Polygon")continue;const U=[],q=[],ee=M.vertexLength;for(const ae of C)if(ae.length!==0){ae!==C[0]&&q.push(U.length/2);for(let ce=0;ce<ae.length;ce++){const ve=ae[ce];qp(this.layoutVertexArray,ve.x,ve.y,0,0,1,1,0),w.x+=ve.x,w.y+=ve.y,w.vertexCount+=1,U.push(ve.x),U.push(ve.y)}}const oe=jE(U,q);for(let ae=0;ae<oe.length;ae+=3)this.indexArray.emplaceBack(ee+oe[ae],ee+oe[ae+2],ee+oe[ae+1]);M.primitiveLength+=oe.length/3,M.vertexLength+=P}for(let C=0;C<w.vertexCount;C++)this.centroidVertexArray.emplaceBack(Math.floor(w.x/w.vertexCount),Math.floor(w.y/w.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,x,g)}}function lF(c,o){return c.x===o.x&&(c.x<0||c.x>ni)||c.y===o.y&&(c.y<0||c.y>ni)}function cF(c){return c.every(o=>o.x<0)||c.every(o=>o.x>ni)||c.every(o=>o.y<0)||c.every(o=>o.y>ni)}let ZE;jt("FillExtrusionBucket",k1,{omit:["layers","features"]});var uF={get paint(){return ZE=ZE||new Zn({"fill-extrusion-opacity":new er(He["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new cr(He["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new er(He["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new er(He["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Mu(He["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new cr(He["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new cr(He["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new er(He["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class dF extends Ho{constructor(o){super(o,uF)}createBucket(o){return new k1(o)}queryRadius(){return vy(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,u,f,g,x,w,C,P){const M=yy(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),w.angle,C),U=this.paint.get("fill-extrusion-height").evaluate(u,f),q=this.paint.get("fill-extrusion-base").evaluate(u,f),ee=function(ae,ce,ve,be){const ze=[];for(const ke of ae){const Be=[ke.x,ke.y,0,1];_y(Be,Be,ce),ze.push(new I(Be[0]/Be[3],Be[1]/Be[3]))}return ze}(M,P),oe=function(ae,ce,ve,be){const ze=[],ke=[],Be=be[8]*ce,Ge=be[9]*ce,et=be[10]*ce,Ot=be[11]*ce,Zt=be[8]*ve,Mt=be[9]*ve,At=be[10]*ve,yt=be[11]*ve;for(const Vt of ae){const wt=[],ct=[];for(const ar of Vt){const Xt=ar.x,kr=ar.y,bn=be[0]*Xt+be[4]*kr+be[12],Cn=be[1]*Xt+be[5]*kr+be[13],di=be[2]*Xt+be[6]*kr+be[14],Wo=be[3]*Xt+be[7]*kr+be[15],ao=di+et,ii=Wo+Ot,Ti=bn+Zt,Di=Cn+Mt,so=di+At,lo=Wo+yt,hi=new I((bn+Be)/ii,(Cn+Ge)/ii);hi.z=ao/ii,wt.push(hi);const fi=new I(Ti/lo,Di/lo);fi.z=so/lo,ct.push(fi)}ze.push(wt),ke.push(ct)}return[ze,ke]}(g,q,U,P);return function(ae,ce,ve){let be=1/0;kE(ve,ce)&&(be=KE(ve,ce[0]));for(let ze=0;ze<ce.length;ze++){const ke=ce[ze],Be=ae[ze];for(let Ge=0;Ge<ke.length-1;Ge++){const et=ke[Ge],Ot=[et,ke[Ge+1],Be[Ge+1],Be[Ge],et];CE(ve,Ot)&&(be=Math.min(be,KE(ve,Ot)))}}return be!==1/0&&be}(oe[0],oe[1],ee)}}function Zp(c,o){return c.x*o.x+c.y*o.y}function KE(c,o){if(c.length===1){let u=0;const f=o[u++];let g;for(;!g||f.equals(g);)if(g=o[u++],!g)return 1/0;for(;u<o.length;u++){const x=o[u],w=c[0],C=g.sub(f),P=x.sub(f),M=w.sub(f),U=Zp(C,C),q=Zp(C,P),ee=Zp(P,P),oe=Zp(M,C),ae=Zp(M,P),ce=U*ee-q*q,ve=(ee*oe-q*ae)/ce,be=(U*ae-q*oe)/ce,ze=f.z*(1-ve-be)+g.z*ve+x.z*be;if(isFinite(ze))return ze}return 1/0}{let u=1/0;for(const f of o)u=Math.min(u,f.z);return u}}const hF=Rn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:fF}=hF,pF=Rn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:mF}=pF,gF=Sc.VectorTileFeature.types,vF=Math.cos(Math.PI/180*37.5),XE=Math.pow(2,14)/.5;class T1{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new ur,this.layoutVertexArray2=new Kt,this.indexArray=new Ci,this.programConfigurations=new os(o.layers,o.zoom),this.segments=new xn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,f){this.hasPattern=b1("line",this.layers,u);const g=this.layers[0].layout.get("line-sort-key"),x=!g.isConstant(),w=[];for(const{feature:C,id:P,index:M,sourceLayerIndex:U}of o){const q=this.layers[0]._featureFilter.needGeometry,ee=$u(C,q);if(!this.layers[0]._featureFilter.filter(new _n(this.zoom),ee,f))continue;const oe=x?g.evaluate(ee,{},f):void 0,ae={id:P,properties:C.properties,type:C.type,sourceLayerIndex:U,index:M,geometry:q?ee.geometry:Ou(C),patterns:{},sortKey:oe};w.push(ae)}x&&w.sort((C,P)=>C.sortKey-P.sortKey);for(const C of w){const{geometry:P,index:M,sourceLayerIndex:U}=C;if(this.hasPattern){const q=w1("line",this.layers,C,this.zoom,u);this.patternFeatures.push(q)}else this.addFeature(C,P,M,f,{});u.featureIndex.insert(o[M].feature,P,M,U,this.index)}}update(o,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,f)}addFeatures(o,u,f){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,u,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,mF)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,fF),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,u,f,g,x){const w=this.layers[0].layout,C=w.get("line-join").evaluate(o,{}),P=w.get("line-cap"),M=w.get("line-miter-limit"),U=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const q of u)this.addLine(q,o,C,P,M,U);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,f,x,g)}addLine(o,u,f,g,x,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let be=0;be<o.length-1;be++)this.totalDistance+=o[be].dist(o[be+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const C=gF[u.type]==="Polygon";let P=o.length;for(;P>=2&&o[P-1].equals(o[P-2]);)P--;let M=0;for(;M<P-1&&o[M].equals(o[M+1]);)M++;if(P<(C?3:2))return;f==="bevel"&&(x=1.05);const U=this.overscaling<=16?15*ni/(512*this.overscaling):0,q=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let ee,oe,ae,ce,ve;this.e1=this.e2=-1,C&&(ee=o[P-2],ve=o[M].sub(ee)._unit()._perp());for(let be=M;be<P;be++){if(ae=be===P-1?C?o[M+1]:void 0:o[be+1],ae&&o[be].equals(ae))continue;ve&&(ce=ve),ee&&(oe=ee),ee=o[be],ve=ae?ae.sub(ee)._unit()._perp():ce,ce=ce||ve;let ze=ce.add(ve);ze.x===0&&ze.y===0||ze._unit();const ke=ce.x*ve.x+ce.y*ve.y,Be=ze.x*ve.x+ze.y*ve.y,Ge=Be!==0?1/Be:1/0,et=2*Math.sqrt(2-2*Be),Ot=Be<vF&&oe&&ae,Zt=ce.x*ve.y-ce.y*ve.x>0;if(Ot&&be>M){const yt=ee.dist(oe);if(yt>2*U){const Vt=ee.sub(ee.sub(oe)._mult(U/yt)._round());this.updateDistance(oe,Vt),this.addCurrentVertex(Vt,ce,0,0,q),oe=Vt}}const Mt=oe&&ae;let At=Mt?f:C?"butt":g;if(Mt&&At==="round"&&(Ge<w?At="miter":Ge<=2&&(At="fakeround")),At==="miter"&&Ge>x&&(At="bevel"),At==="bevel"&&(Ge>2&&(At="flipbevel"),Ge<x&&(At="miter")),oe&&this.updateDistance(oe,ee),At==="miter")ze._mult(Ge),this.addCurrentVertex(ee,ze,0,0,q);else if(At==="flipbevel"){if(Ge>100)ze=ve.mult(-1);else{const yt=Ge*ce.add(ve).mag()/ce.sub(ve).mag();ze._perp()._mult(yt*(Zt?-1:1))}this.addCurrentVertex(ee,ze,0,0,q),this.addCurrentVertex(ee,ze.mult(-1),0,0,q)}else if(At==="bevel"||At==="fakeround"){const yt=-Math.sqrt(Ge*Ge-1),Vt=Zt?yt:0,wt=Zt?0:yt;if(oe&&this.addCurrentVertex(ee,ce,Vt,wt,q),At==="fakeround"){const ct=Math.round(180*et/Math.PI/20);for(let ar=1;ar<ct;ar++){let Xt=ar/ct;if(Xt!==.5){const bn=Xt-.5;Xt+=Xt*bn*(Xt-1)*((1.0904+ke*(ke*(3.55645-1.43519*ke)-3.2452))*bn*bn+(.848013+ke*(.215638*ke-1.06021)))}const kr=ve.sub(ce)._mult(Xt)._add(ce)._unit()._mult(Zt?-1:1);this.addHalfVertex(ee,kr.x,kr.y,!1,Zt,0,q)}}ae&&this.addCurrentVertex(ee,ve,-Vt,-wt,q)}else if(At==="butt")this.addCurrentVertex(ee,ze,0,0,q);else if(At==="square"){const yt=oe?1:-1;this.addCurrentVertex(ee,ze,yt,yt,q)}else At==="round"&&(oe&&(this.addCurrentVertex(ee,ce,0,0,q),this.addCurrentVertex(ee,ce,1,1,q,!0)),ae&&(this.addCurrentVertex(ee,ve,-1,-1,q,!0),this.addCurrentVertex(ee,ve,0,0,q)));if(Ot&&be<P-1){const yt=ee.dist(ae);if(yt>2*U){const Vt=ee.add(ae.sub(ee)._mult(U/yt)._round());this.updateDistance(ee,Vt),this.addCurrentVertex(Vt,ve,0,0,q),ee=Vt}}}}addCurrentVertex(o,u,f,g,x,w=!1){const C=u.y*g-u.x,P=-u.y-u.x*g;this.addHalfVertex(o,u.x+u.y*f,u.y-u.x*f,w,!1,f,x),this.addHalfVertex(o,C,P,w,!0,-g,x),this.distance>XE/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,u,f,g,x,w))}addHalfVertex({x:o,y:u},f,g,x,w,C,P){const M=.5*(this.lineClips?this.scaledDistance*(XE-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(x?1:0),(u<<1)+(w?1:0),Math.round(63*f)+128,Math.round(63*g)+128,1+(C===0?0:C<0?-1:1)|(63&M)<<2,M>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const U=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,U),P.primitiveLength++),w?this.e2=U:this.e1=U}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,u){this.distance+=o.dist(u),this.updateScaledDistance()}}let YE,JE;jt("LineBucket",T1,{omit:["layers","patternFeatures"]});var QE={get paint(){return JE=JE||new Zn({"line-opacity":new cr(He.paint_line["line-opacity"]),"line-color":new cr(He.paint_line["line-color"]),"line-translate":new er(He.paint_line["line-translate"]),"line-translate-anchor":new er(He.paint_line["line-translate-anchor"]),"line-width":new cr(He.paint_line["line-width"]),"line-gap-width":new cr(He.paint_line["line-gap-width"]),"line-offset":new cr(He.paint_line["line-offset"]),"line-blur":new cr(He.paint_line["line-blur"]),"line-dasharray":new Rp(He.paint_line["line-dasharray"]),"line-pattern":new Mu(He.paint_line["line-pattern"]),"line-gradient":new Dp(He.paint_line["line-gradient"])})},get layout(){return YE=YE||new Zn({"line-cap":new er(He.layout_line["line-cap"]),"line-join":new cr(He.layout_line["line-join"]),"line-miter-limit":new er(He.layout_line["line-miter-limit"]),"line-round-limit":new er(He.layout_line["line-round-limit"]),"line-sort-key":new cr(He.layout_line["line-sort-key"])})}};class yF extends cr{possiblyEvaluate(o,u){return u=new _n(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(o,u)}evaluate(o,u,f,g){return u=ie({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(o,u,f,g)}}let Cy;class _F extends Ho{constructor(o){super(o,QE),this.gradientVersion=0,Cy||(Cy=new yF(QE.paint.properties["line-width"].specification),Cy.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(f){return f._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof $s,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,u){super.recalculate(o,u),this.paint._values["line-floorwidth"]=Cy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new T1(o)}queryRadius(o){const u=o,f=eI(Np("line-width",this,u),Np("line-gap-width",this,u)),g=Np("line-offset",this,u);return f/2+Math.abs(g)+vy(this.paint.get("line-translate"))}queryIntersectsFeature(o,u,f,g,x,w,C){const P=yy(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),w.angle,C),M=C/2*eI(this.paint.get("line-width").evaluate(u,f),this.paint.get("line-gap-width").evaluate(u,f)),U=this.paint.get("line-offset").evaluate(u,f);return U&&(g=function(q,ee){const oe=[];for(let ae=0;ae<q.length;ae++){const ce=q[ae],ve=[];for(let be=0;be<ce.length;be++){const ze=ce[be-1],ke=ce[be],Be=ce[be+1],Ge=be===0?new I(0,0):ke.sub(ze)._unit()._perp(),et=be===ce.length-1?new I(0,0):Be.sub(ke)._unit()._perp(),Ot=Ge._add(et)._unit(),Zt=Ot.x*et.x+Ot.y*et.y;Zt!==0&&Ot._mult(1/Zt),ve.push(Ot._mult(ee)._add(ke))}oe.push(ve)}return oe}(g,U*C)),function(q,ee,oe){for(let ae=0;ae<ee.length;ae++){const ce=ee[ae];if(q.length>=3){for(let ve=0;ve<ce.length;ve++)if(uh(q,ce[ve]))return!0}if(T4(q,ce,oe))return!0}return!1}(P,g,M)}isTileClipped(){return!0}}function eI(c,o){return o>0?o+2*c:c}const xF=Rn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),bF=Rn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Rn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const wF=Rn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Rn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const tI=Rn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),SF=Rn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function CF(c,o,u){return c.sections.forEach(f=>{f.text=function(g,x,w){const C=x.layout.get("text-transform").evaluate(w,{});return C==="uppercase"?g=g.toLocaleUpperCase():C==="lowercase"&&(g=g.toLocaleLowerCase()),Io.applyArabicShaping&&(g=Io.applyArabicShaping(g)),g}(f.text,o,u)}),c}Rn([{name:"triangle",components:3,type:"Uint16"}]),Rn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Rn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Rn([{type:"Float32",name:"offsetX"}]),Rn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Rn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Kp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var ui=24,rI=un,nI=function(c,o,u,f,g){var x,w,C=8*g-f-1,P=(1<<C)-1,M=P>>1,U=-7,q=g-1,ee=-1,oe=c[o+q];for(q+=ee,x=oe&(1<<-U)-1,oe>>=-U,U+=C;U>0;x=256*x+c[o+q],q+=ee,U-=8);for(w=x&(1<<-U)-1,x>>=-U,U+=f;U>0;w=256*w+c[o+q],q+=ee,U-=8);if(x===0)x=1-M;else{if(x===P)return w?NaN:1/0*(oe?-1:1);w+=Math.pow(2,f),x-=M}return(oe?-1:1)*w*Math.pow(2,x-f)},iI=function(c,o,u,f,g,x){var w,C,P,M=8*x-g-1,U=(1<<M)-1,q=U>>1,ee=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,oe=0,ae=1,ce=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(C=isNaN(o)?1:0,w=U):(w=Math.floor(Math.log(o)/Math.LN2),o*(P=Math.pow(2,-w))<1&&(w--,P*=2),(o+=w+q>=1?ee/P:ee*Math.pow(2,1-q))*P>=2&&(w++,P/=2),w+q>=U?(C=0,w=U):w+q>=1?(C=(o*P-1)*Math.pow(2,g),w+=q):(C=o*Math.pow(2,q-1)*Math.pow(2,g),w=0));g>=8;c[u+oe]=255&C,oe+=ae,C/=256,g-=8);for(w=w<<g|C,M+=g;M>0;c[u+oe]=255&w,oe+=ae,w/=256,M-=8);c[u+oe-ae]|=128*ce};function un(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}un.Varint=0,un.Fixed64=1,un.Bytes=2,un.Fixed32=5;var E1=4294967296,oI=1/E1,aI=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function El(c){return c.type===un.Bytes?c.readVarint()+c.pos:c.pos+1}function ph(c,o,u){return u?4294967296*o+(c>>>0):4294967296*(o>>>0)+(c>>>0)}function sI(c,o,u){var f=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));u.realloc(f);for(var g=u.pos-1;g>=c;g--)u.buf[g+f]=u.buf[g]}function kF(c,o){for(var u=0;u<c.length;u++)o.writeVarint(c[u])}function TF(c,o){for(var u=0;u<c.length;u++)o.writeSVarint(c[u])}function EF(c,o){for(var u=0;u<c.length;u++)o.writeFloat(c[u])}function IF(c,o){for(var u=0;u<c.length;u++)o.writeDouble(c[u])}function PF(c,o){for(var u=0;u<c.length;u++)o.writeBoolean(c[u])}function AF(c,o){for(var u=0;u<c.length;u++)o.writeFixed32(c[u])}function RF(c,o){for(var u=0;u<c.length;u++)o.writeSFixed32(c[u])}function DF(c,o){for(var u=0;u<c.length;u++)o.writeFixed64(c[u])}function MF(c,o){for(var u=0;u<c.length;u++)o.writeSFixed64(c[u])}function ky(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+16777216*c[o+3]}function mh(c,o,u){c[u]=o,c[u+1]=o>>>8,c[u+2]=o>>>16,c[u+3]=o>>>24}function lI(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+(c[o+3]<<24)}un.prototype={destroy:function(){this.buf=null},readFields:function(c,o,u){for(u=u||this.length;this.pos<u;){var f=this.readVarint(),g=f>>3,x=this.pos;this.type=7&f,c(g,o,this),this.pos===x&&this.skip(f)}return o},readMessage:function(c,o){return this.readFields(c,o,this.readVarint()+this.pos)},readFixed32:function(){var c=ky(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=lI(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=ky(this.buf,this.pos)+ky(this.buf,this.pos+4)*E1;return this.pos+=8,c},readSFixed64:function(){var c=ky(this.buf,this.pos)+lI(this.buf,this.pos+4)*E1;return this.pos+=8,c},readFloat:function(){var c=nI(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=nI(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var o,u,f=this.buf;return o=127&(u=f[this.pos++]),u<128?o:(o|=(127&(u=f[this.pos++]))<<7,u<128?o:(o|=(127&(u=f[this.pos++]))<<14,u<128?o:(o|=(127&(u=f[this.pos++]))<<21,u<128?o:function(g,x,w){var C,P,M=w.buf;if(C=(112&(P=M[w.pos++]))>>4,P<128||(C|=(127&(P=M[w.pos++]))<<3,P<128)||(C|=(127&(P=M[w.pos++]))<<10,P<128)||(C|=(127&(P=M[w.pos++]))<<17,P<128)||(C|=(127&(P=M[w.pos++]))<<24,P<128)||(C|=(1&(P=M[w.pos++]))<<31,P<128))return ph(g,C,x);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(u=f[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,o=this.pos;return this.pos=c,c-o>=12&&aI?function(u,f,g){return aI.decode(u.subarray(f,g))}(this.buf,o,c):function(u,f,g){for(var x="",w=f;w<g;){var C,P,M,U=u[w],q=null,ee=U>239?4:U>223?3:U>191?2:1;if(w+ee>g)break;ee===1?U<128&&(q=U):ee===2?(192&(C=u[w+1]))==128&&(q=(31&U)<<6|63&C)<=127&&(q=null):ee===3?(P=u[w+2],(192&(C=u[w+1]))==128&&(192&P)==128&&((q=(15&U)<<12|(63&C)<<6|63&P)<=2047||q>=55296&&q<=57343)&&(q=null)):ee===4&&(P=u[w+2],M=u[w+3],(192&(C=u[w+1]))==128&&(192&P)==128&&(192&M)==128&&((q=(15&U)<<18|(63&C)<<12|(63&P)<<6|63&M)<=65535||q>=1114112)&&(q=null)),q===null?(q=65533,ee=1):q>65535&&(q-=65536,x+=String.fromCharCode(q>>>10&1023|55296),q=56320|1023&q),x+=String.fromCharCode(q),w+=ee}return x}(this.buf,o,c)},readBytes:function(){var c=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,c);return this.pos=c,o},readPackedVarint:function(c,o){if(this.type!==un.Bytes)return c.push(this.readVarint(o));var u=El(this);for(c=c||[];this.pos<u;)c.push(this.readVarint(o));return c},readPackedSVarint:function(c){if(this.type!==un.Bytes)return c.push(this.readSVarint());var o=El(this);for(c=c||[];this.pos<o;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==un.Bytes)return c.push(this.readBoolean());var o=El(this);for(c=c||[];this.pos<o;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==un.Bytes)return c.push(this.readFloat());var o=El(this);for(c=c||[];this.pos<o;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==un.Bytes)return c.push(this.readDouble());var o=El(this);for(c=c||[];this.pos<o;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==un.Bytes)return c.push(this.readFixed32());var o=El(this);for(c=c||[];this.pos<o;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==un.Bytes)return c.push(this.readSFixed32());var o=El(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==un.Bytes)return c.push(this.readFixed64());var o=El(this);for(c=c||[];this.pos<o;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==un.Bytes)return c.push(this.readSFixed64());var o=El(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed64());return c},skip:function(c){var o=7&c;if(o===un.Varint)for(;this.buf[this.pos++]>127;);else if(o===un.Bytes)this.pos=this.readVarint()+this.pos;else if(o===un.Fixed32)this.pos+=4;else{if(o!==un.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(c,o){this.writeVarint(c<<3|o)},realloc:function(c){for(var o=this.length||16;o<this.pos+c;)o*=2;if(o!==this.length){var u=new Uint8Array(o);u.set(this.buf),this.buf=u,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),mh(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),mh(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),mh(this.buf,-1&c,this.pos),mh(this.buf,Math.floor(c*oI),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),mh(this.buf,-1&c,this.pos),mh(this.buf,Math.floor(c*oI),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(o,u){var f,g;if(o>=0?(f=o%4294967296|0,g=o/4294967296|0):(g=~(-o/4294967296),4294967295^(f=~(-o%4294967296))?f=f+1|0:(f=0,g=g+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(x,w,C){C.buf[C.pos++]=127&x|128,x>>>=7,C.buf[C.pos++]=127&x|128,x>>>=7,C.buf[C.pos++]=127&x|128,x>>>=7,C.buf[C.pos++]=127&x|128,C.buf[C.pos]=127&(x>>>=7)}(f,0,u),function(x,w){var C=(7&x)<<4;w.buf[w.pos++]|=C|((x>>>=3)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x|((x>>>=7)?128:0),x&&(w.buf[w.pos++]=127&x)))))}(g,u)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var o=this.pos;this.pos=function(f,g,x){for(var w,C,P=0;P<g.length;P++){if((w=g.charCodeAt(P))>55295&&w<57344){if(!C){w>56319||P+1===g.length?(f[x++]=239,f[x++]=191,f[x++]=189):C=w;continue}if(w<56320){f[x++]=239,f[x++]=191,f[x++]=189,C=w;continue}w=C-55296<<10|w-56320|65536,C=null}else C&&(f[x++]=239,f[x++]=191,f[x++]=189,C=null);w<128?f[x++]=w:(w<2048?f[x++]=w>>6|192:(w<65536?f[x++]=w>>12|224:(f[x++]=w>>18|240,f[x++]=w>>12&63|128),f[x++]=w>>6&63|128),f[x++]=63&w|128)}return x}(this.buf,c,this.pos);var u=this.pos-o;u>=128&&sI(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeFloat:function(c){this.realloc(4),iI(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),iI(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var o=c.length;this.writeVarint(o),this.realloc(o);for(var u=0;u<o;u++)this.buf[this.pos++]=c[u]},writeRawMessage:function(c,o){this.pos++;var u=this.pos;c(o,this);var f=this.pos-u;f>=128&&sI(u,f,this),this.pos=u-1,this.writeVarint(f),this.pos+=f},writeMessage:function(c,o,u){this.writeTag(c,un.Bytes),this.writeRawMessage(o,u)},writePackedVarint:function(c,o){o.length&&this.writeMessage(c,kF,o)},writePackedSVarint:function(c,o){o.length&&this.writeMessage(c,TF,o)},writePackedBoolean:function(c,o){o.length&&this.writeMessage(c,PF,o)},writePackedFloat:function(c,o){o.length&&this.writeMessage(c,EF,o)},writePackedDouble:function(c,o){o.length&&this.writeMessage(c,IF,o)},writePackedFixed32:function(c,o){o.length&&this.writeMessage(c,AF,o)},writePackedSFixed32:function(c,o){o.length&&this.writeMessage(c,RF,o)},writePackedFixed64:function(c,o){o.length&&this.writeMessage(c,DF,o)},writePackedSFixed64:function(c,o){o.length&&this.writeMessage(c,MF,o)},writeBytesField:function(c,o){this.writeTag(c,un.Bytes),this.writeBytes(o)},writeFixed32Field:function(c,o){this.writeTag(c,un.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(c,o){this.writeTag(c,un.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(c,o){this.writeTag(c,un.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(c,o){this.writeTag(c,un.Fixed64),this.writeSFixed64(o)},writeVarintField:function(c,o){this.writeTag(c,un.Varint),this.writeVarint(o)},writeSVarintField:function(c,o){this.writeTag(c,un.Varint),this.writeSVarint(o)},writeStringField:function(c,o){this.writeTag(c,un.Bytes),this.writeString(o)},writeFloatField:function(c,o){this.writeTag(c,un.Fixed32),this.writeFloat(o)},writeDoubleField:function(c,o){this.writeTag(c,un.Fixed64),this.writeDouble(o)},writeBooleanField:function(c,o){this.writeVarintField(c,!!o)}};var I1=y(rI);const P1=3;function zF(c,o,u){c===1&&u.readMessage(LF,o)}function LF(c,o,u){if(c===3){const{id:f,bitmap:g,width:x,height:w,left:C,top:P,advance:M}=u.readMessage(OF,{});o.push({id:f,bitmap:new Vp({width:x+2*P1,height:w+2*P1},g),metrics:{width:x,height:w,left:C,top:P,advance:M}})}}function OF(c,o,u){c===1?o.id=u.readVarint():c===2?o.bitmap=u.readBytes():c===3?o.width=u.readVarint():c===4?o.height=u.readVarint():c===5?o.left=u.readSVarint():c===6?o.top=u.readSVarint():c===7&&(o.advance=u.readVarint())}const cI=P1;function uI(c){let o=0,u=0;for(const w of c)o+=w.w*w.h,u=Math.max(u,w.w);c.sort((w,C)=>C.h-w.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),u),h:1/0}];let g=0,x=0;for(const w of c)for(let C=f.length-1;C>=0;C--){const P=f[C];if(!(w.w>P.w||w.h>P.h)){if(w.x=P.x,w.y=P.y,x=Math.max(x,w.y+w.h),g=Math.max(g,w.x+w.w),w.w===P.w&&w.h===P.h){const M=f.pop();C<f.length&&(f[C]=M)}else w.h===P.h?(P.x+=w.w,P.w-=w.w):w.w===P.w?(P.y+=w.h,P.h-=w.h):(f.push({x:P.x+w.w,y:P.y,w:P.w-w.w,h:w.h}),P.y+=w.h,P.h-=w.h);break}}return{w:g,h:x,fill:o/(g*x)||0}}const Ao=1;class A1{constructor(o,{pixelRatio:u,version:f,stretchX:g,stretchY:x,content:w}){this.paddedRect=o,this.pixelRatio=u,this.stretchX=g,this.stretchY=x,this.content=w,this.version=f}get tl(){return[this.paddedRect.x+Ao,this.paddedRect.y+Ao]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ao,this.paddedRect.y+this.paddedRect.h-Ao]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ao)/this.pixelRatio,(this.paddedRect.h-2*Ao)/this.pixelRatio]}}class dI{constructor(o,u){const f={},g={};this.haveRenderCallbacks=[];const x=[];this.addImages(o,f,x),this.addImages(u,g,x);const{w,h:C}=uI(x),P=new na({width:w||1,height:C||1});for(const M in o){const U=o[M],q=f[M].paddedRect;na.copy(U.data,P,{x:0,y:0},{x:q.x+Ao,y:q.y+Ao},U.data)}for(const M in u){const U=u[M],q=g[M].paddedRect,ee=q.x+Ao,oe=q.y+Ao,ae=U.data.width,ce=U.data.height;na.copy(U.data,P,{x:0,y:0},{x:ee,y:oe},U.data),na.copy(U.data,P,{x:0,y:ce-1},{x:ee,y:oe-1},{width:ae,height:1}),na.copy(U.data,P,{x:0,y:0},{x:ee,y:oe+ce},{width:ae,height:1}),na.copy(U.data,P,{x:ae-1,y:0},{x:ee-1,y:oe},{width:1,height:ce}),na.copy(U.data,P,{x:0,y:0},{x:ee+ae,y:oe},{width:1,height:ce})}this.image=P,this.iconPositions=f,this.patternPositions=g}addImages(o,u,f){for(const g in o){const x=o[g],w={x:0,y:0,w:x.data.width+2*Ao,h:x.data.height+2*Ao};f.push(w),u[g]=new A1(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(o,u){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in o.updatedImages)this.patchUpdatedImage(this.iconPositions[f],o.getImage(f),u),this.patchUpdatedImage(this.patternPositions[f],o.getImage(f),u)}patchUpdatedImage(o,u,f){if(!o||!u||o.version===u.version)return;o.version=u.version;const[g,x]=o.tl;f.update(u.data,void 0,{x:g,y:x})}}var Cc;jt("ImagePosition",A1),jt("ImageAtlas",dI),s.ai=void 0,(Cc=s.ai||(s.ai={}))[Cc.none=0]="none",Cc[Cc.horizontal=1]="horizontal",Cc[Cc.vertical=2]="vertical",Cc[Cc.horizontalOnly=3]="horizontalOnly";const Xp=-17;class Yp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,u){const f=new Yp;return f.scale=o||1,f.fontStack=u,f}static forImage(o){const u=new Yp;return u.imageName=o,u}}class gh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,u){const f=new gh;for(let g=0;g<o.sections.length;g++){const x=o.sections[g];x.image?f.addImageSection(x):f.addTextSection(x,u)}return f}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let u="";for(let f=0;f<o.length;f++){const g=o.charCodeAt(f+1)||null,x=o.charCodeAt(f-1)||null;u+=g&&ay(g)&&!Kp[o[f+1]]||x&&ay(x)&&!Kp[o[f-1]]||!Kp[o[f]]?o[f]:Kp[o[f]]}return u}(this.text)}trim(){let o=0;for(let f=0;f<this.text.length&&Ey[this.text.charCodeAt(f)];f++)o++;let u=this.text.length;for(let f=this.text.length-1;f>=0&&f>=o&&Ey[this.text.charCodeAt(f)];f--)u--;this.text=this.text.substring(o,u),this.sectionIndex=this.sectionIndex.slice(o,u)}substring(o,u){const f=new gh;return f.text=this.text.substring(o,u),f.sectionIndex=this.sectionIndex.slice(o,u),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,u)=>Math.max(o,this.sections[u].scale),0)}addTextSection(o,u){this.text+=o.text,this.sections.push(Yp.forText(o.scale,o.fontStack||u));const f=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(f)}addImageSection(o){const u=o.image?o.image.name:"";if(u.length===0)return void We("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Yp.forImage(u)),this.sectionIndex.push(this.sections.length-1)):We("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ty(c,o,u,f,g,x,w,C,P,M,U,q,ee,oe,ae,ce){const ve=gh.fromFeature(c,g);let be;q===s.ai.vertical&&ve.verticalizePunctuation();const{processBidirectionalText:ze,processStyledBidirectionalText:ke}=Io;if(ze&&ve.sections.length===1){be=[];const et=ze(ve.toString(),R1(ve,M,x,o,f,oe,ae));for(const Ot of et){const Zt=new gh;Zt.text=Ot,Zt.sections=ve.sections;for(let Mt=0;Mt<Ot.length;Mt++)Zt.sectionIndex.push(0);be.push(Zt)}}else if(ke){be=[];const et=ke(ve.text,ve.sectionIndex,R1(ve,M,x,o,f,oe,ae));for(const Ot of et){const Zt=new gh;Zt.text=Ot[0],Zt.sectionIndex=Ot[1],Zt.sections=ve.sections,be.push(Zt)}}else be=function(et,Ot){const Zt=[],Mt=et.text;let At=0;for(const yt of Ot)Zt.push(et.substring(At,yt)),At=yt;return At<Mt.length&&Zt.push(et.substring(At,Mt.length)),Zt}(ve,R1(ve,M,x,o,f,oe,ae));const Be=[],Ge={positionedLines:Be,text:ve.toString(),top:U[1],bottom:U[1],left:U[0],right:U[0],writingMode:q,iconsInText:!1,verticalizable:!1};return function(et,Ot,Zt,Mt,At,yt,Vt,wt,ct,ar,Xt,kr){let bn=0,Cn=Xp,di=0,Wo=0;const ao=wt==="right"?1:wt==="left"?0:.5;let ii=0;for(const hi of At){hi.trim();const fi=hi.getMaxScale(),Hi=(fi-1)*ui,co={positionedGlyphs:[],lineOffset:0};et.positionedLines[ii]=co;const Gi=co.positionedGlyphs;let Ro=0;if(!hi.length()){Cn+=yt,++ii;continue}for(let pi=0;pi<hi.length();pi++){const zr=hi.getSection(pi),Wi=hi.getSectionIndex(pi),Mi=hi.getCharCode(pi);let mi=0,Ma=null,as=null,ss=null,Il=ui;const za=!(ct===s.ai.horizontal||!Xt&&!Sp(Mi)||Xt&&(Ey[Mi]||(Ti=Mi,Lt.Arabic(Ti)||Lt["Arabic Supplement"](Ti)||Lt["Arabic Extended-A"](Ti)||Lt["Arabic Presentation Forms-A"](Ti)||Lt["Arabic Presentation Forms-B"](Ti))));if(zr.imageName){const oa=Mt[zr.imageName];if(!oa)continue;ss=zr.imageName,et.iconsInText=et.iconsInText||!0,as=oa.paddedRect;const Mo=oa.displaySize;zr.scale=zr.scale*ui/kr,Ma={width:Mo[0],height:Mo[1],left:Ao,top:-cI,advance:za?Mo[1]:Mo[0]},mi=Hi+(ui-Mo[1]*zr.scale),Il=Ma.advance;const Pl=za?Mo[0]*zr.scale-ui*fi:Mo[1]*zr.scale-ui*fi;Pl>0&&Pl>Ro&&(Ro=Pl)}else{const oa=Zt[zr.fontStack],Mo=oa&&oa[Mi];if(Mo&&Mo.rect)as=Mo.rect,Ma=Mo.metrics;else{const Pl=Ot[zr.fontStack],rm=Pl&&Pl[Mi];if(!rm)continue;Ma=rm.metrics}mi=(fi-zr.scale)*ui}za?(et.verticalizable=!0,Gi.push({glyph:Mi,imageName:ss,x:bn,y:Cn+mi,vertical:za,scale:zr.scale,fontStack:zr.fontStack,sectionIndex:Wi,metrics:Ma,rect:as}),bn+=Il*zr.scale+ar):(Gi.push({glyph:Mi,imageName:ss,x:bn,y:Cn+mi,vertical:za,scale:zr.scale,fontStack:zr.fontStack,sectionIndex:Wi,metrics:Ma,rect:as}),bn+=Ma.advance*zr.scale+ar)}Gi.length!==0&&(di=Math.max(bn-ar,di),FF(Gi,0,Gi.length-1,ao,Ro)),bn=0;const Do=yt*fi+Ro;co.lineOffset=Math.max(Ro,Hi),Cn+=Do,Wo=Math.max(Do,Wo),++ii}var Ti;const Di=Cn-Xp,{horizontalAlign:so,verticalAlign:lo}=D1(Vt);(function(hi,fi,Hi,co,Gi,Ro,Do,pi,zr){const Wi=(fi-Hi)*Gi;let Mi=0;Mi=Ro!==Do?-pi*co-Xp:(-co*zr+.5)*Do;for(const mi of hi)for(const Ma of mi.positionedGlyphs)Ma.x+=Wi,Ma.y+=Mi})(et.positionedLines,ao,so,lo,di,Wo,yt,Di,At.length),et.top+=-lo*Di,et.bottom=et.top+Di,et.left+=-so*di,et.right=et.left+di}(Ge,o,u,f,be,w,C,P,q,M,ee,ce),!function(et){for(const Ot of et)if(Ot.positionedGlyphs.length!==0)return!1;return!0}(Be)&&Ge}const Ey={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$F={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function hI(c,o,u,f,g,x){if(o.imageName){const w=f[o.imageName];return w?w.displaySize[0]*o.scale*ui/x+g:0}{const w=u[o.fontStack],C=w&&w[c];return C?C.metrics.advance*o.scale+g:0}}function fI(c,o,u,f){const g=Math.pow(c-o,2);return f?c<o?g/2:2*g:g+Math.abs(u)*u}function BF(c,o,u){let f=0;return c===10&&(f-=1e4),u&&(f+=150),c!==40&&c!==65288||(f+=50),o!==41&&o!==65289||(f+=50),f}function pI(c,o,u,f,g,x){let w=null,C=fI(o,u,g,x);for(const P of f){const M=fI(o-P.x,u,g,x)+P.badness;M<=C&&(w=P,C=M)}return{index:c,x:o,priorBreak:w,badness:C}}function mI(c){return c?mI(c.priorBreak).concat(c.index):[]}function R1(c,o,u,f,g,x,w){if(x!=="point")return[];if(!c)return[];const C=[],P=function(ee,oe,ae,ce,ve,be){let ze=0;for(let ke=0;ke<ee.length();ke++){const Be=ee.getSection(ke);ze+=hI(ee.getCharCode(ke),Be,ce,ve,oe,be)}return ze/Math.max(1,Math.ceil(ze/ae))}(c,o,u,f,g,w),M=c.text.indexOf("​")>=0;let U=0;for(let ee=0;ee<c.length();ee++){const oe=c.getSection(ee),ae=c.getCharCode(ee);if(Ey[ae]||(U+=hI(ae,oe,f,g,o,w)),ee<c.length()-1){const ce=!((q=ae)<11904||!(Lt["Bopomofo Extended"](q)||Lt.Bopomofo(q)||Lt["CJK Compatibility Forms"](q)||Lt["CJK Compatibility Ideographs"](q)||Lt["CJK Compatibility"](q)||Lt["CJK Radicals Supplement"](q)||Lt["CJK Strokes"](q)||Lt["CJK Symbols and Punctuation"](q)||Lt["CJK Unified Ideographs Extension A"](q)||Lt["CJK Unified Ideographs"](q)||Lt["Enclosed CJK Letters and Months"](q)||Lt["Halfwidth and Fullwidth Forms"](q)||Lt.Hiragana(q)||Lt["Ideographic Description Characters"](q)||Lt["Kangxi Radicals"](q)||Lt["Katakana Phonetic Extensions"](q)||Lt.Katakana(q)||Lt["Vertical Forms"](q)||Lt["Yi Radicals"](q)||Lt["Yi Syllables"](q)));($F[ae]||ce||oe.imageName)&&C.push(pI(ee+1,U,P,C,BF(ae,c.getCharCode(ee+1),ce&&M),!1))}}var q;return mI(pI(c.length(),U,P,C,0,!0))}function D1(c){let o=.5,u=.5;switch(c){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:o,verticalAlign:u}}function FF(c,o,u,f,g){if(!f&&!g)return;const x=c[u],w=(c[u].x+x.metrics.advance*x.scale)*f;for(let C=o;C<=u;C++)c[C].x-=w,c[C].y+=g}function NF(c,o,u){const{horizontalAlign:f,verticalAlign:g}=D1(u),x=o[0]-c.displaySize[0]*f,w=o[1]-c.displaySize[1]*g;return{image:c,top:w,bottom:w+c.displaySize[1],left:x,right:x+c.displaySize[0]}}function gI(c,o,u,f,g,x){const w=c.image;let C;if(w.content){const ve=w.content,be=w.pixelRatio||1;C=[ve[0]/be,ve[1]/be,w.displaySize[0]-ve[2]/be,w.displaySize[1]-ve[3]/be]}const P=o.left*x,M=o.right*x;let U,q,ee,oe;u==="width"||u==="both"?(oe=g[0]+P-f[3],q=g[0]+M+f[1]):(oe=g[0]+(P+M-w.displaySize[0])/2,q=oe+w.displaySize[0]);const ae=o.top*x,ce=o.bottom*x;return u==="height"||u==="both"?(U=g[1]+ae-f[0],ee=g[1]+ce+f[2]):(U=g[1]+(ae+ce-w.displaySize[1])/2,ee=U+w.displaySize[1]),{image:w,top:U,right:q,bottom:ee,left:oe,collisionPadding:C}}const Jp=255,Vs=128,kc=Jp*Vs;function vI(c,o){const{expression:u}=o;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new _n(c+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:g}=u;let x=0;for(;x<f.length&&f[x]<=c;)x++;x=Math.max(0,x-1);let w=x;for(;w<f.length&&f[w]<c+1;)w++;w=Math.min(f.length-1,w);const C=f[x],P=f[w];return u.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:P,interpolationType:g}:{kind:"camera",minZoom:C,maxZoom:P,minSize:u.evaluate(new _n(C)),maxSize:u.evaluate(new _n(P)),interpolationType:g}}}function M1(c,o,u){let f="never";const g=c.get(o);return g?f=g:c.get(u)&&(f="always"),f}const jF=Sc.VectorTileFeature.types,VF=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Iy(c,o,u,f,g,x,w,C,P,M,U,q,ee){const oe=C?Math.min(kc,Math.round(C[0])):0,ae=C?Math.min(kc,Math.round(C[1])):0;c.emplaceBack(o,u,Math.round(32*f),Math.round(32*g),x,w,(oe<<1)+(P?1:0),ae,16*M,16*U,256*q,256*ee)}function z1(c,o,u){c.emplaceBack(o.x,o.y,u),c.emplaceBack(o.x,o.y,u),c.emplaceBack(o.x,o.y,u),c.emplaceBack(o.x,o.y,u)}function UF(c){for(const o of c.sections)if(a1(o.text))return!0;return!1}class L1{constructor(o){this.layoutVertexArray=new Er,this.indexArray=new Ci,this.programConfigurations=o,this.segments=new xn,this.dynamicLayoutVertexArray=new br,this.opacityVertexArray=new Pr,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ie}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,u,f,g){this.isEmpty()||(f&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,xF.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,bF.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,VF,!0),this.opacityVertexBuffer.itemSize=1),(f||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}jt("SymbolBuffers",L1);class O1{constructor(o,u,f){this.layoutVertexArray=new o,this.layoutAttributes=u,this.indexArray=new f,this.segments=new xn,this.collisionVertexArray=new mn}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,wF.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}jt("CollisionBuffers",O1);class vh{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(w=>w.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=f1([]),this.placementViewportMatrix=f1([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=vI(this.zoom,u["text-size"]),this.iconSizeData=vI(this.zoom,u["icon-size"]);const f=this.layers[0].layout,g=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=M1(f,"text-overlap","text-allow-overlap")!=="never"||M1(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(w=>s.ai[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=o.sourceID}createArrays(){this.text=new L1(new os(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new L1(new os(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new Me,this.lineVertexArray=new qe,this.symbolInstances=new ye,this.textAnchorOffsets=new Je}calculateGlyphDependencies(o,u,f,g,x){for(let w=0;w<o.length;w++)if(u[o.charCodeAt(w)]=!0,(f||g)&&x){const C=Kp[o.charAt(w)];C&&(u[C.charCodeAt(0)]=!0)}}populate(o,u,f){const g=this.layers[0],x=g.layout,w=x.get("text-font"),C=x.get("text-field"),P=x.get("icon-image"),M=(C.value.kind!=="constant"||C.value.value instanceof Ur&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),U=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,q=x.get("symbol-sort-key");if(this.features=[],!M&&!U)return;const ee=u.iconDependencies,oe=u.glyphDependencies,ae=u.availableImages,ce=new _n(this.zoom);for(const{feature:ve,id:be,index:ze,sourceLayerIndex:ke}of o){const Be=g._featureFilter.needGeometry,Ge=$u(ve,Be);if(!g._featureFilter.filter(ce,Ge,f))continue;let et,Ot;if(Be||(Ge.geometry=Ou(ve)),M){const Mt=g.getValueAndResolveTokens("text-field",Ge,f,ae),At=Ur.factory(Mt);UF(At)&&(this.hasRTLText=!0),(!this.hasRTLText||Pp()==="unavailable"||this.hasRTLText&&Io.isParsed())&&(et=CF(At,g,Ge))}if(U){const Mt=g.getValueAndResolveTokens("icon-image",Ge,f,ae);Ot=Mt instanceof qn?Mt:qn.fromString(Mt)}if(!et&&!Ot)continue;const Zt=this.sortFeaturesByKey?q.evaluate(Ge,{},f):void 0;if(this.features.push({id:be,text:et,icon:Ot,index:ze,sourceLayerIndex:ke,geometry:Ge.geometry,properties:ve.properties,type:jF[ve.type],sortKey:Zt}),Ot&&(ee[Ot.name]=!0),et){const Mt=w.evaluate(Ge,{},f).join(","),At=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(s.ai.vertical)>=0;for(const yt of et.sections)if(yt.image)ee[yt.image.name]=!0;else{const Vt=bp(et.toString()),wt=yt.fontStack||Mt,ct=oe[wt]=oe[wt]||{};this.calculateGlyphDependencies(yt.text,ct,At,this.allowVerticalPlacement,Vt)}}}x.get("symbol-placement")==="line"&&(this.features=function(ve){const be={},ze={},ke=[];let Be=0;function Ge(Mt){ke.push(ve[Mt]),Be++}function et(Mt,At,yt){const Vt=ze[Mt];return delete ze[Mt],ze[At]=Vt,ke[Vt].geometry[0].pop(),ke[Vt].geometry[0]=ke[Vt].geometry[0].concat(yt[0]),Vt}function Ot(Mt,At,yt){const Vt=be[At];return delete be[At],be[Mt]=Vt,ke[Vt].geometry[0].shift(),ke[Vt].geometry[0]=yt[0].concat(ke[Vt].geometry[0]),Vt}function Zt(Mt,At,yt){const Vt=yt?At[0][At[0].length-1]:At[0][0];return`${Mt}:${Vt.x}:${Vt.y}`}for(let Mt=0;Mt<ve.length;Mt++){const At=ve[Mt],yt=At.geometry,Vt=At.text?At.text.toString():null;if(!Vt){Ge(Mt);continue}const wt=Zt(Vt,yt),ct=Zt(Vt,yt,!0);if(wt in ze&&ct in be&&ze[wt]!==be[ct]){const ar=Ot(wt,ct,yt),Xt=et(wt,ct,ke[ar].geometry);delete be[wt],delete ze[ct],ze[Zt(Vt,ke[Xt].geometry,!0)]=Xt,ke[ar].geometry=null}else wt in ze?et(wt,ct,yt):ct in be?Ot(wt,ct,yt):(Ge(Mt),be[wt]=Be-1,ze[ct]=Be-1)}return ke.filter(Mt=>Mt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ve,be)=>ve.sortKey-be.sortKey)}update(o,u,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,u,this.layers,f),this.icon.programConfigurations.updatePaintArrays(o,u,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,u){const f=this.lineVertexArray.length;if(o.segment!==void 0){let g=o.dist(u[o.segment+1]),x=o.dist(u[o.segment]);const w={};for(let C=o.segment+1;C<u.length;C++)w[C]={x:u[C].x,y:u[C].y,tileUnitDistanceFromAnchor:g},C<u.length-1&&(g+=u[C+1].dist(u[C]));for(let C=o.segment||0;C>=0;C--)w[C]={x:u[C].x,y:u[C].y,tileUnitDistanceFromAnchor:x},C>0&&(x+=u[C-1].dist(u[C]));for(let C=0;C<u.length;C++){const P=w[C];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(o,u,f,g,x,w,C,P,M,U,q,ee){const oe=o.indexArray,ae=o.layoutVertexArray,ce=o.segments.prepareSegment(4*u.length,ae,oe,this.canOverlap?w.sortKey:void 0),ve=this.glyphOffsetArray.length,be=ce.vertexLength,ze=this.allowVerticalPlacement&&C===s.ai.vertical?Math.PI/2:0,ke=w.text&&w.text.sections;for(let Be=0;Be<u.length;Be++){const{tl:Ge,tr:et,bl:Ot,br:Zt,tex:Mt,pixelOffsetTL:At,pixelOffsetBR:yt,minFontScaleX:Vt,minFontScaleY:wt,glyphOffset:ct,isSDF:ar,sectionIndex:Xt}=u[Be],kr=ce.vertexLength,bn=ct[1];Iy(ae,P.x,P.y,Ge.x,bn+Ge.y,Mt.x,Mt.y,f,ar,At.x,At.y,Vt,wt),Iy(ae,P.x,P.y,et.x,bn+et.y,Mt.x+Mt.w,Mt.y,f,ar,yt.x,At.y,Vt,wt),Iy(ae,P.x,P.y,Ot.x,bn+Ot.y,Mt.x,Mt.y+Mt.h,f,ar,At.x,yt.y,Vt,wt),Iy(ae,P.x,P.y,Zt.x,bn+Zt.y,Mt.x+Mt.w,Mt.y+Mt.h,f,ar,yt.x,yt.y,Vt,wt),z1(o.dynamicLayoutVertexArray,P,ze),oe.emplaceBack(kr,kr+1,kr+2),oe.emplaceBack(kr+1,kr+2,kr+3),ce.vertexLength+=4,ce.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ct[0]),Be!==u.length-1&&Xt===u[Be+1].sectionIndex||o.programConfigurations.populatePaintArrays(ae.length,w,w.index,{},ee,ke&&ke[Xt])}o.placedSymbolArray.emplaceBack(P.x,P.y,ve,this.glyphOffsetArray.length-ve,be,M,U,P.segment,f?f[0]:0,f?f[1]:0,g[0],g[1],C,0,!1,0,q)}_addCollisionDebugVertex(o,u,f,g,x,w){return u.emplaceBack(0,0),o.emplaceBack(f.x,f.y,g,x,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(o,u,f,g,x,w,C){const P=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),M=P.vertexLength,U=x.layoutVertexArray,q=x.collisionVertexArray,ee=C.anchorX,oe=C.anchorY;this._addCollisionDebugVertex(U,q,w,ee,oe,new I(o,u)),this._addCollisionDebugVertex(U,q,w,ee,oe,new I(f,u)),this._addCollisionDebugVertex(U,q,w,ee,oe,new I(f,g)),this._addCollisionDebugVertex(U,q,w,ee,oe,new I(o,g)),P.vertexLength+=4;const ae=x.indexArray;ae.emplaceBack(M,M+1),ae.emplaceBack(M+1,M+2),ae.emplaceBack(M+2,M+3),ae.emplaceBack(M+3,M),P.primitiveLength+=4}addDebugCollisionBoxes(o,u,f,g){for(let x=o;x<u;x++){const w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,g?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new O1(Nn,tI.members,li),this.iconCollisionBox=new O1(Nn,tI.members,li);for(let o=0;o<this.symbolInstances.length;o++){const u=this.symbolInstances.get(o);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(o,u,f,g,x,w,C,P,M){const U={};for(let q=u;q<f;q++){const ee=o.get(q);U.textBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},U.textFeatureIndex=ee.featureIndex;break}for(let q=g;q<x;q++){const ee=o.get(q);U.verticalTextBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},U.verticalTextFeatureIndex=ee.featureIndex;break}for(let q=w;q<C;q++){const ee=o.get(q);U.iconBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},U.iconFeatureIndex=ee.featureIndex;break}for(let q=P;q<M;q++){const ee=o.get(q);U.verticalIconBox={x1:ee.x1,y1:ee.y1,x2:ee.x2,y2:ee.y2,anchorPointX:ee.anchorPointX,anchorPointY:ee.anchorPointY},U.verticalIconFeatureIndex=ee.featureIndex;break}return U}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const f=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,u){const f=o.placedSymbolArray.get(u),g=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<g;x+=4)o.indexArray.emplaceBack(x,x+1,x+2),o.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(o),f=Math.cos(o),g=[],x=[],w=[];for(let C=0;C<this.symbolInstances.length;++C){w.push(C);const P=this.symbolInstances.get(C);g.push(0|Math.round(u*P.anchorX+f*P.anchorY)),x.push(P.featureIndex)}return w.sort((C,P)=>g[C]-g[P]||x[P]-x[C]),w}addToSortKeyRanges(o,u){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===u?f.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const f=this.symbolInstances.get(u);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((g,x,w)=>{g>=0&&w.indexOf(g)===x&&this.addIndicesForPlacedSymbol(this.text,g)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let yI,_I;jt("SymbolBucket",vh,{omit:["layers","collisionBoxArray","features","compareText"]}),vh.MAX_GLYPHS=65535,vh.addDynamicAttributes=z1;var $1={get paint(){return _I=_I||new Zn({"icon-opacity":new cr(He.paint_symbol["icon-opacity"]),"icon-color":new cr(He.paint_symbol["icon-color"]),"icon-halo-color":new cr(He.paint_symbol["icon-halo-color"]),"icon-halo-width":new cr(He.paint_symbol["icon-halo-width"]),"icon-halo-blur":new cr(He.paint_symbol["icon-halo-blur"]),"icon-translate":new er(He.paint_symbol["icon-translate"]),"icon-translate-anchor":new er(He.paint_symbol["icon-translate-anchor"]),"text-opacity":new cr(He.paint_symbol["text-opacity"]),"text-color":new cr(He.paint_symbol["text-color"],{runtimeType:Rt,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new cr(He.paint_symbol["text-halo-color"]),"text-halo-width":new cr(He.paint_symbol["text-halo-width"]),"text-halo-blur":new cr(He.paint_symbol["text-halo-blur"]),"text-translate":new er(He.paint_symbol["text-translate"]),"text-translate-anchor":new er(He.paint_symbol["text-translate-anchor"])})},get layout(){return yI=yI||new Zn({"symbol-placement":new er(He.layout_symbol["symbol-placement"]),"symbol-spacing":new er(He.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new er(He.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new cr(He.layout_symbol["symbol-sort-key"]),"symbol-z-order":new er(He.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new er(He.layout_symbol["icon-allow-overlap"]),"icon-overlap":new er(He.layout_symbol["icon-overlap"]),"icon-ignore-placement":new er(He.layout_symbol["icon-ignore-placement"]),"icon-optional":new er(He.layout_symbol["icon-optional"]),"icon-rotation-alignment":new er(He.layout_symbol["icon-rotation-alignment"]),"icon-size":new cr(He.layout_symbol["icon-size"]),"icon-text-fit":new er(He.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new er(He.layout_symbol["icon-text-fit-padding"]),"icon-image":new cr(He.layout_symbol["icon-image"]),"icon-rotate":new cr(He.layout_symbol["icon-rotate"]),"icon-padding":new cr(He.layout_symbol["icon-padding"]),"icon-keep-upright":new er(He.layout_symbol["icon-keep-upright"]),"icon-offset":new cr(He.layout_symbol["icon-offset"]),"icon-anchor":new cr(He.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new er(He.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new er(He.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new er(He.layout_symbol["text-rotation-alignment"]),"text-field":new cr(He.layout_symbol["text-field"]),"text-font":new cr(He.layout_symbol["text-font"]),"text-size":new cr(He.layout_symbol["text-size"]),"text-max-width":new cr(He.layout_symbol["text-max-width"]),"text-line-height":new er(He.layout_symbol["text-line-height"]),"text-letter-spacing":new cr(He.layout_symbol["text-letter-spacing"]),"text-justify":new cr(He.layout_symbol["text-justify"]),"text-radial-offset":new cr(He.layout_symbol["text-radial-offset"]),"text-variable-anchor":new er(He.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new cr(He.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new cr(He.layout_symbol["text-anchor"]),"text-max-angle":new er(He.layout_symbol["text-max-angle"]),"text-writing-mode":new er(He.layout_symbol["text-writing-mode"]),"text-rotate":new cr(He.layout_symbol["text-rotate"]),"text-padding":new er(He.layout_symbol["text-padding"]),"text-keep-upright":new er(He.layout_symbol["text-keep-upright"]),"text-transform":new cr(He.layout_symbol["text-transform"]),"text-offset":new cr(He.layout_symbol["text-offset"]),"text-allow-overlap":new er(He.layout_symbol["text-allow-overlap"]),"text-overlap":new er(He.layout_symbol["text-overlap"]),"text-ignore-placement":new er(He.layout_symbol["text-ignore-placement"]),"text-optional":new er(He.layout_symbol["text-optional"])})}};class xI{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:Ve,this.defaultValue=o}evaluate(o){if(o.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(o.formattedSection))return u.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}jt("FormatSectionOverride",xI,{omit:["defaultValue"]});class Py extends Ho{constructor(o){super(o,$1)}recalculate(o,u){if(super.recalculate(o,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const g=[];for(const x of f)g.indexOf(x)<0&&g.push(x);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,u,f,g){const x=this.layout.get(o).evaluate(u,{},f,g),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||Yd(w.value)||!x?x:function(C,P){return P.replace(/{([^{}]+)}/g,(M,U)=>C&&U in C?String(C[U]):"")}(u.properties,x)}createBucket(o){return new vh(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of $1.paint.overridableProperties){if(!Py.hasPaintOverride(this.layout,o))continue;const u=this.paint.get(o),f=new xI(u),g=new mp(f,u.property.specification);let x=null;x=u.value.kind==="constant"||u.value.kind==="source"?new gp("source",g):new Qd("composite",g,u.value.zoomStops),this.paint._values[o]=new Vi(u.property,x,u.parameters)}}_handleOverridablePaintPropertyUpdate(o,u,f){return!(!this.layout||u.isDataDriven()||f.isDataDriven())&&Py.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,u){const f=o.get("text-field"),g=$1.paint.properties[u];let x=!1;const w=C=>{for(const P of C)if(g.overrides&&g.overrides.hasOverride(P))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Ur)w(f.value.value.sections);else if(f.value.kind==="source"){const C=M=>{x||(M instanceof ml&&In(M.value)===ue?w(M.value.sections):M instanceof Xd?w(M.sections):M.eachChild(C))},P=f.value;P._styleExpression&&C(P._styleExpression.expression)}return x}}let bI;var HF={get paint(){return bI=bI||new Zn({"background-color":new er(He.paint_background["background-color"]),"background-pattern":new Rp(He.paint_background["background-pattern"]),"background-opacity":new er(He.paint_background["background-opacity"])})}};class GF extends Ho{constructor(o){super(o,HF)}}let wI;var WF={get paint(){return wI=wI||new Zn({"raster-opacity":new er(He.paint_raster["raster-opacity"]),"raster-hue-rotate":new er(He.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new er(He.paint_raster["raster-brightness-min"]),"raster-brightness-max":new er(He.paint_raster["raster-brightness-max"]),"raster-saturation":new er(He.paint_raster["raster-saturation"]),"raster-contrast":new er(He.paint_raster["raster-contrast"]),"raster-resampling":new er(He.paint_raster["raster-resampling"]),"raster-fade-duration":new er(He.paint_raster["raster-fade-duration"])})}};class qF extends Ho{constructor(o){super(o,WF)}}class ZF extends Ho{constructor(o){super(o,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class KF{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const B1=63710088e-1;class Tc{constructor(o,u){if(isNaN(o)||isNaN(u))throw new Error(`Invalid LngLat object: (${o}, ${u})`);if(this.lng=+o,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Tc(J(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const u=Math.PI/180,f=this.lat*u,g=o.lat*u,x=Math.sin(f)*Math.sin(g)+Math.cos(f)*Math.cos(g)*Math.cos((o.lng-this.lng)*u);return B1*Math.acos(Math.min(x,1))}static convert(o){if(o instanceof Tc)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Tc(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Tc(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const SI=2*Math.PI*B1;function CI(c){return SI*Math.cos(c*Math.PI/180)}function kI(c){return(180+c)/360}function TI(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function EI(c,o){return c/CI(o)}function II(c){return 360*c-180}function F1(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class Ay{constructor(o,u,f=0){this.x=+o,this.y=+u,this.z=+f}static fromLngLat(o,u=0){const f=Tc.convert(o);return new Ay(kI(f.lng),TI(f.lat),EI(u,f.lat))}toLngLat(){return new Tc(II(this.x),F1(this.y))}toAltitude(){return this.z*CI(F1(this.y))}meterInMercatorCoordinateUnits(){return 1/SI*(o=F1(this.y),1/Math.cos(o*Math.PI/180));var o}}function PI(c,o,u){var f=2*Math.PI*6378137/256/Math.pow(2,u);return[c*f-2*Math.PI*6378137/2,o*f-2*Math.PI*6378137/2]}class N1{constructor(o,u,f){if(o<0||o>25||f<0||f>=Math.pow(2,o)||u<0||u>=Math.pow(2,o))throw new Error(`x=${u}, y=${f}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=u,this.y=f,this.key=Qp(0,o,o,u,f)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,u,f){const g=(w=this.y,C=this.z,P=PI(256*(x=this.x),256*(w=Math.pow(2,C)-w-1),C),M=PI(256*(x+1),256*(w+1),C),P[0]+","+P[1]+","+M[0]+","+M[1]);var x,w,C,P,M;const U=function(q,ee,oe){let ae,ce="";for(let ve=q;ve>0;ve--)ae=1<<ve-1,ce+=(ee&ae?1:0)+(oe&ae?2:0);return ce}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,U).replace(/{bbox-epsg-3857}/g,g)}isChildOf(o){const u=this.z-o.z;return u>0&&o.x===this.x>>u&&o.y===this.y>>u}getTilePoint(o){const u=Math.pow(2,this.z);return new I((o.x*u-this.x)*ni,(o.y*u-this.y)*ni)}toString(){return`${this.z}/${this.x}/${this.y}`}}class AI{constructor(o,u){this.wrap=o,this.canonical=u,this.key=Qp(o,u.z,u.z,u.x,u.y)}}class ia{constructor(o,u,f,g,x){if(o<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${f}`);this.overscaledZ=o,this.wrap=u,this.canonical=new N1(f,+g,+x),this.key=Qp(u,o,f,g,x)}clone(){return new ia(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-o;return o>this.canonical.z?new ia(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ia(o,this.wrap,o,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(o,u){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-o;return o>this.canonical.z?Qp(this.wrap*+u,o,this.canonical.z,this.canonical.x,this.canonical.y):Qp(this.wrap*+u,o,o,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const u=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>u&&o.canonical.y===this.canonical.y>>u}children(o){if(this.overscaledZ>=o)return[new ia(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,f=2*this.canonical.x,g=2*this.canonical.y;return[new ia(u,this.wrap,u,f,g),new ia(u,this.wrap,u,f+1,g),new ia(u,this.wrap,u,f,g+1),new ia(u,this.wrap,u,f+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new ia(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new ia(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new AI(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new Ay(o.x-this.wrap,o.y))}}function Qp(c,o,u,f,g){(c*=2)<0&&(c=-1*c-1);const x=1<<u;return(x*x*c+x*g+f).toString(36)+u.toString(36)+o.toString(36)}jt("CanonicalTileID",N1),jt("OverscaledTileID",ia,{omit:["posMatrix"]});class RI{constructor(o,u,f,g=1,x=1,w=1,C=0){if(this.uid=o,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void We(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const P=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=x,this.blueFactor=w,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let M=0;M<P;M++)this.data[this._idx(-1,M)]=this.data[this._idx(0,M)],this.data[this._idx(P,M)]=this.data[this._idx(P-1,M)],this.data[this._idx(M,-1)]=this.data[this._idx(M,0)],this.data[this._idx(M,P)]=this.data[this._idx(M,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let M=0;M<P;M++)for(let U=0;U<P;U++){const q=this.get(M,U);q>this.max&&(this.max=q),q<this.min&&(this.min=q)}}get(o,u){const f=new Uint8Array(this.data.buffer),g=4*this._idx(o,u);return this.unpack(f[g],f[g+1],f[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,u){if(o<-1||o>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(o+1)}unpack(o,u,f){return o*this.redFactor+u*this.greenFactor+f*this.blueFactor-this.baseShift}getPixels(){return new na({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,u,f){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=u*this.dim,x=u*this.dim+this.dim,w=f*this.dim,C=f*this.dim+this.dim;switch(u){case-1:g=x-1;break;case 1:x=g+1}switch(f){case-1:w=C-1;break;case 1:C=w+1}const P=-u*this.dim,M=-f*this.dim;for(let U=w;U<C;U++)for(let q=g;q<x;q++)this.data[this._idx(q,U)]=o.data[this._idx(q+P,U+M)]}}jt("DEMData",RI);class DI{constructor(o){this._stringToNumber={},this._numberToString=[];for(let u=0;u<o.length;u++){const f=o[u];this._stringToNumber[f]=u,this._numberToString[u]=f}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class MI{constructor(o,u,f,g,x){this.type="Feature",this._vectorTileFeature=o,o._z=u,o._x=f,o._y=g,this.properties=o.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(o[u]=this[u]);return o}}class zI{constructor(o,u){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new yc(ni,16,0),this.grid3D=new yc(ni,16,0),this.featureIndexArray=new nt,this.promoteId=u}insert(o,u,f,g,x,w){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,g,x);const P=w?this.grid3D:this.grid;for(let M=0;M<u.length;M++){const U=u[M],q=[1/0,1/0,-1/0,-1/0];for(let ee=0;ee<U.length;ee++){const oe=U[ee];q[0]=Math.min(q[0],oe.x),q[1]=Math.min(q[1],oe.y),q[2]=Math.max(q[2],oe.x),q[3]=Math.max(q[3],oe.y)}q[0]<ni&&q[1]<ni&&q[2]>=0&&q[3]>=0&&P.insert(C,q[0],q[1],q[2],q[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Sc.VectorTile(new I1(this.rawTileData)).layers,this.sourceLayerCoder=new DI(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,u,f,g){this.loadVTLayers();const x=o.params||{},w=ni/o.tileSize/o.scale,C=yp(x.filter),P=o.queryGeometry,M=o.queryPadding*w,U=OI(P),q=this.grid.query(U.minX-M,U.minY-M,U.maxX+M,U.maxY+M),ee=OI(o.cameraQueryGeometry),oe=this.grid3D.query(ee.minX-M,ee.minY-M,ee.maxX+M,ee.maxY+M,(ve,be,ze,ke)=>function(Be,Ge,et,Ot,Zt){for(const At of Be)if(Ge<=At.x&&et<=At.y&&Ot>=At.x&&Zt>=At.y)return!0;const Mt=[new I(Ge,et),new I(Ge,Zt),new I(Ot,Zt),new I(Ot,et)];if(Be.length>2){for(const At of Mt)if(uh(Be,At))return!0}for(let At=0;At<Be.length-1;At++)if(I4(Be[At],Be[At+1],Mt))return!0;return!1}(o.cameraQueryGeometry,ve-M,be-M,ze+M,ke+M));for(const ve of oe)q.push(ve);q.sort(XF);const ae={};let ce;for(let ve=0;ve<q.length;ve++){const be=q[ve];if(be===ce)continue;ce=be;const ze=this.featureIndexArray.get(be);let ke=null;this.loadMatchingFeature(ae,ze.bucketIndex,ze.sourceLayerIndex,ze.featureIndex,C,x.layers,x.availableImages,u,f,g,(Be,Ge,et)=>(ke||(ke=Ou(Be)),Ge.queryIntersectsFeature(P,Be,et,ke,this.z,o.transform,w,o.pixelPosMatrix)))}return ae}loadMatchingFeature(o,u,f,g,x,w,C,P,M,U,q){const ee=this.bucketLayerIDs[u];if(w&&!function(ve,be){for(let ze=0;ze<ve.length;ze++)if(be.indexOf(ve[ze])>=0)return!0;return!1}(w,ee))return;const oe=this.sourceLayerCoder.decode(f),ae=this.vtLayers[oe].feature(g);if(x.needGeometry){const ve=$u(ae,!0);if(!x.filter(new _n(this.tileID.overscaledZ),ve,this.tileID.canonical))return}else if(!x.filter(new _n(this.tileID.overscaledZ),ae))return;const ce=this.getId(ae,oe);for(let ve=0;ve<ee.length;ve++){const be=ee[ve];if(w&&w.indexOf(be)<0)continue;const ze=P[be];if(!ze)continue;let ke={};ce&&U&&(ke=U.getState(ze.sourceLayer||"_geojsonTileLayer",ce));const Be=ie({},M[be]);Be.paint=LI(Be.paint,ze.paint,ae,ke,C),Be.layout=LI(Be.layout,ze.layout,ae,ke,C);const Ge=!q||q(ae,ze,ke);if(!Ge)continue;const et=new MI(ae,this.z,this.x,this.y,ce);et.layer=Be;let Ot=o[be];Ot===void 0&&(Ot=o[be]=[]),Ot.push({featureIndex:g,feature:et,intersectionZ:Ge})}}lookupSymbolFeatures(o,u,f,g,x,w,C,P){const M={};this.loadVTLayers();const U=yp(x);for(const q of o)this.loadMatchingFeature(M,f,g,q,U,w,C,P,u);return M}hasLayer(o){for(const u of this.bucketLayerIDs)for(const f of u)if(o===f)return!0;return!1}getId(o,u){let f=o.id;return this.promoteId&&(f=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof f=="boolean"&&(f=Number(f))),f}}function LI(c,o,u,f,g){return ge(c,(x,w)=>{const C=o instanceof lh?o.get(w):null;return C&&C.evaluate?C.evaluate(u,f,g):C})}function OI(c){let o=1/0,u=1/0,f=-1/0,g=-1/0;for(const x of c)o=Math.min(o,x.x),u=Math.min(u,x.y),f=Math.max(f,x.x),g=Math.max(g,x.y);return{minX:o,minY:u,maxX:f,maxY:g}}function XF(c,o){return o-c}function $I(c,o,u,f,g){const x=[];for(let w=0;w<c.length;w++){const C=c[w];let P;for(let M=0;M<C.length-1;M++){let U=C[M],q=C[M+1];U.x<o&&q.x<o||(U.x<o?U=new I(o,U.y+(o-U.x)/(q.x-U.x)*(q.y-U.y))._round():q.x<o&&(q=new I(o,U.y+(o-U.x)/(q.x-U.x)*(q.y-U.y))._round()),U.y<u&&q.y<u||(U.y<u?U=new I(U.x+(u-U.y)/(q.y-U.y)*(q.x-U.x),u)._round():q.y<u&&(q=new I(U.x+(u-U.y)/(q.y-U.y)*(q.x-U.x),u)._round()),U.x>=f&&q.x>=f||(U.x>=f?U=new I(f,U.y+(f-U.x)/(q.x-U.x)*(q.y-U.y))._round():q.x>=f&&(q=new I(f,U.y+(f-U.x)/(q.x-U.x)*(q.y-U.y))._round()),U.y>=g&&q.y>=g||(U.y>=g?U=new I(U.x+(g-U.y)/(q.y-U.y)*(q.x-U.x),g)._round():q.y>=g&&(q=new I(U.x+(g-U.y)/(q.y-U.y)*(q.x-U.x),g)._round()),P&&U.equals(P[P.length-1])||(P=[U],x.push(P)),P.push(q)))))}}return x}jt("FeatureIndex",zI,{omit:["rawTileData","sourceLayerCoder"]});class Ec extends I{constructor(o,u,f,g){super(o,u),this.angle=f,g!==void 0&&(this.segment=g)}clone(){return new Ec(this.x,this.y,this.angle,this.segment)}}function BI(c,o,u,f,g){if(o.segment===void 0||u===0)return!0;let x=o,w=o.segment+1,C=0;for(;C>-u/2;){if(w--,w<0)return!1;C-=c[w].dist(x),x=c[w]}C+=c[w].dist(c[w+1]),w++;const P=[];let M=0;for(;C<u/2;){const U=c[w],q=c[w+1];if(!q)return!1;let ee=c[w-1].angleTo(U)-U.angleTo(q);for(ee=Math.abs((ee+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:C,angleDelta:ee}),M+=ee;C-P[0].distance>f;)M-=P.shift().angleDelta;if(M>g)return!1;w++,C+=U.dist(q)}return!0}function FI(c){let o=0;for(let u=0;u<c.length-1;u++)o+=c[u].dist(c[u+1]);return o}function NI(c,o,u){return c?.6*o*u:0}function jI(c,o){return Math.max(c?c.right-c.left:0,o?o.right-o.left:0)}function YF(c,o,u,f,g,x){const w=NI(u,g,x),C=jI(u,f)*x;let P=0;const M=FI(c)/2;for(let U=0;U<c.length-1;U++){const q=c[U],ee=c[U+1],oe=q.dist(ee);if(P+oe>M){const ae=(M-P)/oe,ce=ko.number(q.x,ee.x,ae),ve=ko.number(q.y,ee.y,ae),be=new Ec(ce,ve,ee.angleTo(q),U);return be._round(),!w||BI(c,be,C,w,o)?be:void 0}P+=oe}}function JF(c,o,u,f,g,x,w,C,P){const M=NI(f,x,w),U=jI(f,g),q=U*w,ee=c[0].x===0||c[0].x===P||c[0].y===0||c[0].y===P;return o-q<o/4&&(o=q+o/4),VI(c,ee?o/2*C%o:(U/2+2*x)*w*C%o,o,M,u,q,ee,!1,P)}function VI(c,o,u,f,g,x,w,C,P){const M=x/2,U=FI(c);let q=0,ee=o-u,oe=[];for(let ae=0;ae<c.length-1;ae++){const ce=c[ae],ve=c[ae+1],be=ce.dist(ve),ze=ve.angleTo(ce);for(;ee+u<q+be;){ee+=u;const ke=(ee-q)/be,Be=ko.number(ce.x,ve.x,ke),Ge=ko.number(ce.y,ve.y,ke);if(Be>=0&&Be<P&&Ge>=0&&Ge<P&&ee-M>=0&&ee+M<=U){const et=new Ec(Be,Ge,ze,ae);et._round(),f&&!BI(c,et,x,f,g)||oe.push(et)}}q+=be}return C||oe.length||w||(oe=VI(c,q/2,u,f,g,x,w,!0,P)),oe}jt("Anchor",Ec);const yh=Ao;function UI(c,o,u,f){const g=[],x=c.image,w=x.pixelRatio,C=x.paddedRect.w-2*yh,P=x.paddedRect.h-2*yh,M=c.right-c.left,U=c.bottom-c.top,q=x.stretchX||[[0,C]],ee=x.stretchY||[[0,P]],oe=(yt,Vt)=>yt+Vt[1]-Vt[0],ae=q.reduce(oe,0),ce=ee.reduce(oe,0),ve=C-ae,be=P-ce;let ze=0,ke=ae,Be=0,Ge=ce,et=0,Ot=ve,Zt=0,Mt=be;if(x.content&&f){const yt=x.content;ze=Ry(q,0,yt[0]),Be=Ry(ee,0,yt[1]),ke=Ry(q,yt[0],yt[2]),Ge=Ry(ee,yt[1],yt[3]),et=yt[0]-ze,Zt=yt[1]-Be,Ot=yt[2]-yt[0]-ke,Mt=yt[3]-yt[1]-Ge}const At=(yt,Vt,wt,ct)=>{const ar=Dy(yt.stretch-ze,ke,M,c.left),Xt=My(yt.fixed-et,Ot,yt.stretch,ae),kr=Dy(Vt.stretch-Be,Ge,U,c.top),bn=My(Vt.fixed-Zt,Mt,Vt.stretch,ce),Cn=Dy(wt.stretch-ze,ke,M,c.left),di=My(wt.fixed-et,Ot,wt.stretch,ae),Wo=Dy(ct.stretch-Be,Ge,U,c.top),ao=My(ct.fixed-Zt,Mt,ct.stretch,ce),ii=new I(ar,kr),Ti=new I(Cn,kr),Di=new I(Cn,Wo),so=new I(ar,Wo),lo=new I(Xt/w,bn/w),hi=new I(di/w,ao/w),fi=o*Math.PI/180;if(fi){const Gi=Math.sin(fi),Ro=Math.cos(fi),Do=[Ro,-Gi,Gi,Ro];ii._matMult(Do),Ti._matMult(Do),so._matMult(Do),Di._matMult(Do)}const Hi=yt.stretch+yt.fixed,co=Vt.stretch+Vt.fixed;return{tl:ii,tr:Ti,bl:so,br:Di,tex:{x:x.paddedRect.x+yh+Hi,y:x.paddedRect.y+yh+co,w:wt.stretch+wt.fixed-Hi,h:ct.stretch+ct.fixed-co},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:lo,pixelOffsetBR:hi,minFontScaleX:Ot/w/M,minFontScaleY:Mt/w/U,isSDF:u}};if(f&&(x.stretchX||x.stretchY)){const yt=HI(q,ve,ae),Vt=HI(ee,be,ce);for(let wt=0;wt<yt.length-1;wt++){const ct=yt[wt],ar=yt[wt+1];for(let Xt=0;Xt<Vt.length-1;Xt++)g.push(At(ct,Vt[Xt],ar,Vt[Xt+1]))}}else g.push(At({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:P+1}));return g}function Ry(c,o,u){let f=0;for(const g of c)f+=Math.max(o,Math.min(u,g[1]))-Math.max(o,Math.min(u,g[0]));return f}function HI(c,o,u){const f=[{fixed:-yh,stretch:0}];for(const[g,x]of c){const w=f[f.length-1];f.push({fixed:g-w.stretch,stretch:w.stretch}),f.push({fixed:g-w.stretch,stretch:w.stretch+(x-g)})}return f.push({fixed:o+yh,stretch:u}),f}function Dy(c,o,u,f){return c/o*u+f}function My(c,o,u,f){return c-o*u/f}class zy{constructor(o,u,f,g,x,w,C,P,M,U){if(this.boxStartIndex=o.length,M){let q=w.top,ee=w.bottom;const oe=w.collisionPadding;oe&&(q-=oe[1],ee+=oe[3]);let ae=ee-q;ae>0&&(ae=Math.max(10,ae),this.circleDiameter=ae)}else{let q=w.top*C-P[0],ee=w.bottom*C+P[2],oe=w.left*C-P[3],ae=w.right*C+P[1];const ce=w.collisionPadding;if(ce&&(oe-=ce[0]*C,q-=ce[1]*C,ae+=ce[2]*C,ee+=ce[3]*C),U){const ve=new I(oe,q),be=new I(ae,q),ze=new I(oe,ee),ke=new I(ae,ee),Be=U*Math.PI/180;ve._rotate(Be),be._rotate(Be),ze._rotate(Be),ke._rotate(Be),oe=Math.min(ve.x,be.x,ze.x,ke.x),ae=Math.max(ve.x,be.x,ze.x,ke.x),q=Math.min(ve.y,be.y,ze.y,ke.y),ee=Math.max(ve.y,be.y,ze.y,ke.y)}o.emplaceBack(u.x,u.y,oe,q,ae,ee,f,g,x)}this.boxEndIndex=o.length}}class QF{constructor(o=[],u=eN){if(this.data=o,this.length=this.data.length,this.compare=u,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(o){this.data.push(o),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const o=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:u,compare:f}=this,g=u[o];for(;o>0;){const x=o-1>>1,w=u[x];if(f(g,w)>=0)break;u[o]=w,o=x}u[o]=g}_down(o){const{data:u,compare:f}=this,g=this.length>>1,x=u[o];for(;o<g;){let w=1+(o<<1),C=u[w];const P=w+1;if(P<this.length&&f(u[P],C)<0&&(w=P,C=u[P]),f(C,x)>=0)break;u[o]=C,o=w}u[o]=x}}function eN(c,o){return c<o?-1:c>o?1:0}function tN(c,o=1,u=!1){let f=1/0,g=1/0,x=-1/0,w=-1/0;const C=c[0];for(let oe=0;oe<C.length;oe++){const ae=C[oe];(!oe||ae.x<f)&&(f=ae.x),(!oe||ae.y<g)&&(g=ae.y),(!oe||ae.x>x)&&(x=ae.x),(!oe||ae.y>w)&&(w=ae.y)}const P=Math.min(x-f,w-g);let M=P/2;const U=new QF([],rN);if(P===0)return new I(f,g);for(let oe=f;oe<x;oe+=P)for(let ae=g;ae<w;ae+=P)U.push(new _h(oe+M,ae+M,M,c));let q=function(oe){let ae=0,ce=0,ve=0;const be=oe[0];for(let ze=0,ke=be.length,Be=ke-1;ze<ke;Be=ze++){const Ge=be[ze],et=be[Be],Ot=Ge.x*et.y-et.x*Ge.y;ce+=(Ge.x+et.x)*Ot,ve+=(Ge.y+et.y)*Ot,ae+=3*Ot}return new _h(ce/ae,ve/ae,0,oe)}(c),ee=U.length;for(;U.length;){const oe=U.pop();(oe.d>q.d||!q.d)&&(q=oe,u&&console.log("found best %d after %d probes",Math.round(1e4*oe.d)/1e4,ee)),oe.max-q.d<=o||(M=oe.h/2,U.push(new _h(oe.p.x-M,oe.p.y-M,M,c)),U.push(new _h(oe.p.x+M,oe.p.y-M,M,c)),U.push(new _h(oe.p.x-M,oe.p.y+M,M,c)),U.push(new _h(oe.p.x+M,oe.p.y+M,M,c)),ee+=4)}return u&&(console.log(`num probes: ${ee}`),console.log(`best distance: ${q.d}`)),q.p}function rN(c,o){return o.max-c.max}function _h(c,o,u,f){this.p=new I(c,o),this.h=u,this.d=function(g,x){let w=!1,C=1/0;for(let P=0;P<x.length;P++){const M=x[P];for(let U=0,q=M.length,ee=q-1;U<q;ee=U++){const oe=M[U],ae=M[ee];oe.y>g.y!=ae.y>g.y&&g.x<(ae.x-oe.x)*(g.y-oe.y)/(ae.y-oe.y)+oe.x&&(w=!w),C=Math.min(C,TE(g,oe,ae))}}return(w?1:-1)*Math.sqrt(C)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}var Ri;s.aq=void 0,(Ri=s.aq||(s.aq={}))[Ri.center=1]="center",Ri[Ri.left=2]="left",Ri[Ri.right=3]="right",Ri[Ri.top=4]="top",Ri[Ri.bottom=5]="bottom",Ri[Ri["top-left"]=6]="top-left",Ri[Ri["top-right"]=7]="top-right",Ri[Ri["bottom-left"]=8]="bottom-left",Ri[Ri["bottom-right"]=9]="bottom-right";const Ic=7,j1=Number.POSITIVE_INFINITY;function GI(c,o){return o[1]!==j1?function(u,f,g){let x=0,w=0;switch(f=Math.abs(f),g=Math.abs(g),u){case"top-right":case"top-left":case"top":w=g-Ic;break;case"bottom-right":case"bottom-left":case"bottom":w=-g+Ic}switch(u){case"top-right":case"bottom-right":case"right":x=-f;break;case"top-left":case"bottom-left":case"left":x=f}return[x,w]}(c,o[0],o[1]):function(u,f){let g=0,x=0;f<0&&(f=0);const w=f/Math.SQRT2;switch(u){case"top-right":case"top-left":x=w-Ic;break;case"bottom-right":case"bottom-left":x=-w+Ic;break;case"bottom":x=-f+Ic;break;case"top":x=f-Ic}switch(u){case"top-right":case"bottom-right":g=-w;break;case"top-left":case"bottom-left":g=w;break;case"left":g=f;break;case"right":g=-f}return[g,x]}(c,o[0])}function WI(c,o,u){var f;const g=c.layout,x=(f=g.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(o,{},u);if(x){const C=x.values,P=[];for(let M=0;M<C.length;M+=2){const U=P[M]=C[M],q=C[M+1].map(ee=>ee*ui);U.startsWith("top")?q[1]-=Ic:U.startsWith("bottom")&&(q[1]+=Ic),P[M+1]=q}return new Wn(P)}const w=g.get("text-variable-anchor");if(w){let C;C=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(o,{},u)*ui,j1]:g.get("text-offset").evaluate(o,{},u).map(M=>M*ui);const P=[];for(const M of w)P.push(M,GI(M,C));return new Wn(P)}return null}function V1(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function nN(c,o,u,f,g,x,w,C,P,M,U){let q=x.textMaxSize.evaluate(o,{});q===void 0&&(q=w);const ee=c.layers[0].layout,oe=ee.get("icon-offset").evaluate(o,{},U),ae=ZI(u.horizontal),ce=w/24,ve=c.tilePixelRatio*ce,be=c.tilePixelRatio*q/24,ze=c.tilePixelRatio*C,ke=c.tilePixelRatio*ee.get("symbol-spacing"),Be=ee.get("text-padding")*c.tilePixelRatio,Ge=function(ct,ar,Xt,kr=1){const bn=ct.get("icon-padding").evaluate(ar,{},Xt),Cn=bn&&bn.values;return[Cn[0]*kr,Cn[1]*kr,Cn[2]*kr,Cn[3]*kr]}(ee,o,U,c.tilePixelRatio),et=ee.get("text-max-angle")/180*Math.PI,Ot=ee.get("text-rotation-alignment")!=="viewport"&&ee.get("symbol-placement")!=="point",Zt=ee.get("icon-rotation-alignment")==="map"&&ee.get("symbol-placement")!=="point",Mt=ee.get("symbol-placement"),At=ke/2,yt=ee.get("icon-text-fit");let Vt;f&&yt!=="none"&&(c.allowVerticalPlacement&&u.vertical&&(Vt=gI(f,u.vertical,yt,ee.get("icon-text-fit-padding"),oe,ce)),ae&&(f=gI(f,ae,yt,ee.get("icon-text-fit-padding"),oe,ce)));const wt=(ct,ar)=>{ar.x<0||ar.x>=ni||ar.y<0||ar.y>=ni||function(Xt,kr,bn,Cn,di,Wo,ao,ii,Ti,Di,so,lo,hi,fi,Hi,co,Gi,Ro,Do,pi,zr,Wi,Mi,mi,Ma){const as=Xt.addToLineVertexArray(kr,bn);let ss,Il,za,oa,Mo=0,Pl=0,rm=0,JI=0,X1=-1,Y1=-1;const Al={};let QI=Cl("");if(Xt.allowVerticalPlacement&&Cn.vertical){const qi=ii.layout.get("text-rotate").evaluate(zr,{},mi)+90;za=new zy(Ti,kr,Di,so,lo,Cn.vertical,hi,fi,Hi,qi),ao&&(oa=new zy(Ti,kr,Di,so,lo,ao,Gi,Ro,Hi,qi))}if(di){const qi=ii.layout.get("icon-rotate").evaluate(zr,{}),aa=ii.layout.get("icon-text-fit")!=="none",Fu=UI(di,qi,Mi,aa),cs=ao?UI(ao,qi,Mi,aa):void 0;Il=new zy(Ti,kr,Di,so,lo,di,Gi,Ro,!1,qi),Mo=4*Fu.length;const Nu=Xt.iconSizeData;let Us=null;Nu.kind==="source"?(Us=[Vs*ii.layout.get("icon-size").evaluate(zr,{})],Us[0]>kc&&We(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${Jp}. Reduce your "icon-size".`)):Nu.kind==="composite"&&(Us=[Vs*Wi.compositeIconSizes[0].evaluate(zr,{},mi),Vs*Wi.compositeIconSizes[1].evaluate(zr,{},mi)],(Us[0]>kc||Us[1]>kc)&&We(`${Xt.layerIds[0]}: Value for "icon-size" is >= ${Jp}. Reduce your "icon-size".`)),Xt.addSymbols(Xt.icon,Fu,Us,pi,Do,zr,s.ai.none,kr,as.lineStartIndex,as.lineLength,-1,mi),X1=Xt.icon.placedSymbolArray.length-1,cs&&(Pl=4*cs.length,Xt.addSymbols(Xt.icon,cs,Us,pi,Do,zr,s.ai.vertical,kr,as.lineStartIndex,as.lineLength,-1,mi),Y1=Xt.icon.placedSymbolArray.length-1)}const eP=Object.keys(Cn.horizontal);for(const qi of eP){const aa=Cn.horizontal[qi];if(!ss){QI=Cl(aa.text);const cs=ii.layout.get("text-rotate").evaluate(zr,{},mi);ss=new zy(Ti,kr,Di,so,lo,aa,hi,fi,Hi,cs)}const Fu=aa.positionedLines.length===1;if(rm+=qI(Xt,kr,aa,Wo,ii,Hi,zr,co,as,Cn.vertical?s.ai.horizontal:s.ai.horizontalOnly,Fu?eP:[qi],Al,X1,Wi,mi),Fu)break}Cn.vertical&&(JI+=qI(Xt,kr,Cn.vertical,Wo,ii,Hi,zr,co,as,s.ai.vertical,["vertical"],Al,Y1,Wi,mi));const aN=ss?ss.boxStartIndex:Xt.collisionBoxArray.length,sN=ss?ss.boxEndIndex:Xt.collisionBoxArray.length,lN=za?za.boxStartIndex:Xt.collisionBoxArray.length,cN=za?za.boxEndIndex:Xt.collisionBoxArray.length,uN=Il?Il.boxStartIndex:Xt.collisionBoxArray.length,dN=Il?Il.boxEndIndex:Xt.collisionBoxArray.length,hN=oa?oa.boxStartIndex:Xt.collisionBoxArray.length,fN=oa?oa.boxEndIndex:Xt.collisionBoxArray.length;let ls=-1;const Oy=(qi,aa)=>qi&&qi.circleDiameter?Math.max(qi.circleDiameter,aa):aa;ls=Oy(ss,ls),ls=Oy(za,ls),ls=Oy(Il,ls),ls=Oy(oa,ls);const tP=ls>-1?1:0;tP&&(ls*=Ma/ui),Xt.glyphOffsetArray.length>=vh.MAX_GLYPHS&&We("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zr.sortKey!==void 0&&Xt.addToSortKeyRanges(Xt.symbolInstances.length,zr.sortKey);const pN=WI(ii,zr,mi),[mN,gN]=function(qi,aa){const Fu=qi.length,cs=aa==null?void 0:aa.values;if((cs==null?void 0:cs.length)>0)for(let Nu=0;Nu<cs.length;Nu+=2){const Us=cs[Nu+1];qi.emplaceBack(s.aq[cs[Nu]],Us[0],Us[1])}return[Fu,qi.length]}(Xt.textAnchorOffsets,pN);Xt.symbolInstances.emplaceBack(kr.x,kr.y,Al.right>=0?Al.right:-1,Al.center>=0?Al.center:-1,Al.left>=0?Al.left:-1,Al.vertical||-1,X1,Y1,QI,aN,sN,lN,cN,uN,dN,hN,fN,Di,rm,JI,Mo,Pl,tP,0,hi,ls,mN,gN)}(c,ar,ct,u,f,g,Vt,c.layers[0],c.collisionBoxArray,o.index,o.sourceLayerIndex,c.index,ve,[Be,Be,Be,Be],Ot,P,ze,Ge,Zt,oe,o,x,M,U,w)};if(Mt==="line")for(const ct of $I(o.geometry,0,0,ni,ni)){const ar=JF(ct,ke,et,u.vertical||ae,f,24,be,c.overscaling,ni);for(const Xt of ar)ae&&iN(c,ae.text,At,Xt)||wt(ct,Xt)}else if(Mt==="line-center"){for(const ct of o.geometry)if(ct.length>1){const ar=YF(ct,et,u.vertical||ae,f,24,be);ar&&wt(ct,ar)}}else if(o.type==="Polygon")for(const ct of x1(o.geometry,0)){const ar=tN(ct,16);wt(ct[0],new Ec(ar.x,ar.y,0))}else if(o.type==="LineString")for(const ct of o.geometry)wt(ct,new Ec(ct[0].x,ct[0].y,0));else if(o.type==="Point")for(const ct of o.geometry)for(const ar of ct)wt([ar],new Ec(ar.x,ar.y,0))}function qI(c,o,u,f,g,x,w,C,P,M,U,q,ee,oe,ae){const ce=function(ze,ke,Be,Ge,et,Ot,Zt,Mt){const At=Ge.layout.get("text-rotate").evaluate(Ot,{})*Math.PI/180,yt=[];for(const Vt of ke.positionedLines)for(const wt of Vt.positionedGlyphs){if(!wt.rect)continue;const ct=wt.rect||{};let ar=cI+1,Xt=!0,kr=1,bn=0;const Cn=(et||Mt)&&wt.vertical,di=wt.metrics.advance*wt.scale/2;if(Mt&&ke.verticalizable&&(bn=Vt.lineOffset/2-(wt.imageName?-(ui-wt.metrics.width*wt.scale)/2:(wt.scale-1)*ui)),wt.imageName){const pi=Zt[wt.imageName];Xt=pi.sdf,kr=pi.pixelRatio,ar=Ao/kr}const Wo=et?[wt.x+di,wt.y]:[0,0];let ao=et?[0,0]:[wt.x+di+Be[0],wt.y+Be[1]-bn],ii=[0,0];Cn&&(ii=ao,ao=[0,0]);const Ti=wt.metrics.isDoubleResolution?2:1,Di=(wt.metrics.left-ar)*wt.scale-di+ao[0],so=(-wt.metrics.top-ar)*wt.scale+ao[1],lo=Di+ct.w/Ti*wt.scale/kr,hi=so+ct.h/Ti*wt.scale/kr,fi=new I(Di,so),Hi=new I(lo,so),co=new I(Di,hi),Gi=new I(lo,hi);if(Cn){const pi=new I(-di,di-Xp),zr=-Math.PI/2,Wi=ui/2-di,Mi=new I(5-Xp-Wi,-(wt.imageName?Wi:0)),mi=new I(...ii);fi._rotateAround(zr,pi)._add(Mi)._add(mi),Hi._rotateAround(zr,pi)._add(Mi)._add(mi),co._rotateAround(zr,pi)._add(Mi)._add(mi),Gi._rotateAround(zr,pi)._add(Mi)._add(mi)}if(At){const pi=Math.sin(At),zr=Math.cos(At),Wi=[zr,-pi,pi,zr];fi._matMult(Wi),Hi._matMult(Wi),co._matMult(Wi),Gi._matMult(Wi)}const Ro=new I(0,0),Do=new I(0,0);yt.push({tl:fi,tr:Hi,bl:co,br:Gi,tex:ct,writingMode:ke.writingMode,glyphOffset:Wo,sectionIndex:wt.sectionIndex,isSDF:Xt,pixelOffsetTL:Ro,pixelOffsetBR:Do,minFontScaleX:0,minFontScaleY:0})}return yt}(0,u,C,g,x,w,f,c.allowVerticalPlacement),ve=c.textSizeData;let be=null;ve.kind==="source"?(be=[Vs*g.layout.get("text-size").evaluate(w,{})],be[0]>kc&&We(`${c.layerIds[0]}: Value for "text-size" is >= ${Jp}. Reduce your "text-size".`)):ve.kind==="composite"&&(be=[Vs*oe.compositeTextSizes[0].evaluate(w,{},ae),Vs*oe.compositeTextSizes[1].evaluate(w,{},ae)],(be[0]>kc||be[1]>kc)&&We(`${c.layerIds[0]}: Value for "text-size" is >= ${Jp}. Reduce your "text-size".`)),c.addSymbols(c.text,ce,be,C,x,w,M,o,P.lineStartIndex,P.lineLength,ee,ae);for(const ze of U)q[ze]=c.text.placedSymbolArray.length-1;return 4*ce.length}function ZI(c){for(const o in c)return c[o];return null}function iN(c,o,u,f){const g=c.compareText;if(o in g){const x=g[o];for(let w=x.length-1;w>=0;w--)if(f.dist(x[w])<u)return!0}else g[o]=[];return g[o].push(f),!1}const KI=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class U1{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,f]=new Uint8Array(o,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=f>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const x=KI[15&f];if(!x)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(o,2,1),[C]=new Uint32Array(o,4,1);return new U1(C,w,x,o)}constructor(o,u=64,f=Float64Array,g){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=f,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const x=KI.indexOf(this.ArrayType),w=2*o*this.ArrayType.BYTES_PER_ELEMENT,C=o*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-C%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${f}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+C+P,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+w+C+P),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+C+P,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=o)}add(o,u){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=o,this.coords[this._pos++]=u,f}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return H1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,u,f,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:C}=this,P=[0,x.length-1,0],M=[];for(;P.length;){const U=P.pop()||0,q=P.pop()||0,ee=P.pop()||0;if(q-ee<=C){for(let ve=ee;ve<=q;ve++){const be=w[2*ve],ze=w[2*ve+1];be>=o&&be<=f&&ze>=u&&ze<=g&&M.push(x[ve])}continue}const oe=ee+q>>1,ae=w[2*oe],ce=w[2*oe+1];ae>=o&&ae<=f&&ce>=u&&ce<=g&&M.push(x[oe]),(U===0?o<=ae:u<=ce)&&(P.push(ee),P.push(oe-1),P.push(1-U)),(U===0?f>=ae:g>=ce)&&(P.push(oe+1),P.push(q),P.push(1-U))}return M}within(o,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:x,nodeSize:w}=this,C=[0,g.length-1,0],P=[],M=f*f;for(;C.length;){const U=C.pop()||0,q=C.pop()||0,ee=C.pop()||0;if(q-ee<=w){for(let ve=ee;ve<=q;ve++)YI(x[2*ve],x[2*ve+1],o,u)<=M&&P.push(g[ve]);continue}const oe=ee+q>>1,ae=x[2*oe],ce=x[2*oe+1];YI(ae,ce,o,u)<=M&&P.push(g[oe]),(U===0?o-f<=ae:u-f<=ce)&&(C.push(ee),C.push(oe-1),C.push(1-U)),(U===0?o+f>=ae:u+f>=ce)&&(C.push(oe+1),C.push(q),C.push(1-U))}return P}}function H1(c,o,u,f,g,x){if(g-f<=u)return;const w=f+g>>1;XI(c,o,w,f,g,x),H1(c,o,u,f,w-1,1-x),H1(c,o,u,w+1,g,1-x)}function XI(c,o,u,f,g,x){for(;g>f;){if(g-f>600){const M=g-f+1,U=u-f+1,q=Math.log(M),ee=.5*Math.exp(2*q/3),oe=.5*Math.sqrt(q*ee*(M-ee)/M)*(U-M/2<0?-1:1);XI(c,o,u,Math.max(f,Math.floor(u-U*ee/M+oe)),Math.min(g,Math.floor(u+(M-U)*ee/M+oe)),x)}const w=o[2*u+x];let C=f,P=g;for(em(c,o,f,u),o[2*g+x]>w&&em(c,o,f,g);C<P;){for(em(c,o,C,P),C++,P--;o[2*C+x]<w;)C++;for(;o[2*P+x]>w;)P--}o[2*f+x]===w?em(c,o,f,P):(P++,em(c,o,P,g)),P<=u&&(f=P+1),u<=P&&(g=P-1)}}function em(c,o,u,f){G1(c,u,f),G1(o,2*u,2*f),G1(o,2*u+1,2*f+1)}function G1(c,o,u){const f=c[o];c[o]=c[u],c[u]=f}function YI(c,o,u,f){const g=c-u,x=o-f;return g*g+x*x}var W1;s.bh=void 0,(W1=s.bh||(s.bh={})).create="create",W1.load="load",W1.fullLoad="fullLoad";let Ly=null,tm=[];const q1=1e3/60,Z1="loadTime",K1="fullLoadTime",oN={mark(c){performance.mark(c)},frame(c){const o=c;Ly!=null&&tm.push(o-Ly),Ly=o},clearMetrics(){Ly=null,tm=[],performance.clearMeasures(Z1),performance.clearMeasures(K1);for(const c in s.bh)performance.clearMarks(s.bh[c])},getPerformanceMetrics(){performance.measure(Z1,s.bh.create,s.bh.load),performance.measure(K1,s.bh.create,s.bh.fullLoad);const c=performance.getEntriesByName(Z1)[0].duration,o=performance.getEntriesByName(K1)[0].duration,u=tm.length,f=1/(tm.reduce((x,w)=>x+w,0)/u/1e3),g=tm.filter(x=>x>q1).reduce((x,w)=>x+(w-q1)/q1,0);return{loadTime:c,fullLoadTime:o,fps:f,percentDroppedFrames:g/(u+g)*100,totalFrames:u}}};s.$=function(c,o,u){var f,g,x,w,C,P,M,U,q,ee,oe,ae,ce=u[0],ve=u[1],be=u[2];return o===c?(c[12]=o[0]*ce+o[4]*ve+o[8]*be+o[12],c[13]=o[1]*ce+o[5]*ve+o[9]*be+o[13],c[14]=o[2]*ce+o[6]*ve+o[10]*be+o[14],c[15]=o[3]*ce+o[7]*ve+o[11]*be+o[15]):(g=o[1],x=o[2],w=o[3],C=o[4],P=o[5],M=o[6],U=o[7],q=o[8],ee=o[9],oe=o[10],ae=o[11],c[0]=f=o[0],c[1]=g,c[2]=x,c[3]=w,c[4]=C,c[5]=P,c[6]=M,c[7]=U,c[8]=q,c[9]=ee,c[10]=oe,c[11]=ae,c[12]=f*ce+C*ve+q*be+o[12],c[13]=g*ce+P*ve+ee*be+o[13],c[14]=x*ce+M*ve+oe*be+o[14],c[15]=w*ce+U*ve+ae*be+o[15]),c},s.A=dh,s.B=ko,s.C=class{constructor(c,o,u){this.receive=f=>{const g=f.data,x=g.id;if(x&&(!g.targetMapId||this.mapId===g.targetMapId))if(g.type==="<cancel>"){delete this.tasks[x];const w=this.cancelCallbacks[x];delete this.cancelCallbacks[x],w&&w()}else Fe()||g.mustQueue?(this.tasks[x]=g,this.taskQueue.push(x),this.invoker.trigger()):this.processTask(x,g)},this.process=()=>{if(!this.taskQueue.length)return;const f=this.taskQueue.shift(),g=this.tasks[f];delete this.tasks[f],this.taskQueue.length&&this.invoker.trigger(),g&&this.processTask(f,g)},this.target=c,this.parent=o,this.mapId=u,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new KF(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Fe()?c:window}send(c,o,u,f,g=!1){const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);u&&(this.callbacks[x]=u);const w=[],C={id:x,type:c,hasCallback:!!u,targetMapId:f,mustQueue:g,sourceMapId:this.mapId,data:Fs(o,w)};return this.target.postMessage(C,{transfer:w}),{cancel:()=>{u&&delete this.callbacks[x],this.target.postMessage({id:x,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}processTask(c,o){if(o.type==="<response>"){const u=this.callbacks[c];delete this.callbacks[c],u&&(o.error?u(_c(o.error)):u(null,_c(o.data)))}else{let u=!1;const f=[],g=o.hasCallback?(C,P)=>{u=!0,delete this.cancelCallbacks[c];const M={id:c,type:"<response>",sourceMapId:this.mapId,error:C?Fs(C):null,data:Fs(P,f)};this.target.postMessage(M,{transfer:f})}:C=>{u=!0};let x=null;const w=_c(o.data);if(this.parent[o.type])x=this.parent[o.type](o.sourceMapId,w,g);else if("getWorkerSource"in this.parent){const C=o.type.split(".");x=this.parent.getWorkerSource(o.sourceMapId,C[0],w.source)[C[1]](w,g)}else g(new Error(`Could not find function ${o.type}`));!u&&x&&x.cancel&&(this.cancelCallbacks[c]=x.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.D=er,s.E=Dr,s.F=function(c,o){const u={};for(let f=0;f<o.length;f++){const g=o[f];g in c&&(u[g]=c[g])}return u},s.G=kI,s.H=TI,s.I=A1,s.J=O,s.K=L,s.L=Tc,s.M=at,s.N=ni,s.O=ia,s.P=I,s.Q=Rn,s.R=na,s.S=xn,s.T=uy,s.U=Ay,s.V=class extends wl{},s.W=N1,s.X=function(c,o){const u=window.document.createElement("video");u.muted=!0,u.onloadstart=function(){o(null,u)};for(let f=0;f<c.length;f++){const g=window.document.createElement("source");Lr(c[f])||(u.crossOrigin="Anonymous"),g.src=c[f],u.appendChild(g)}return{cancel:()=>{}}},s.Y=je,s.Z=function(){var c=new dh(16);return dh!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},s._=m,s.a=Ne,s.a$=class extends ne{},s.a0=function(c,o,u){var f=u[0],g=u[1],x=u[2];return c[0]=o[0]*f,c[1]=o[1]*f,c[2]=o[2]*f,c[3]=o[3]*f,c[4]=o[4]*g,c[5]=o[5]*g,c[6]=o[6]*g,c[7]=o[7]*g,c[8]=o[8]*x,c[9]=o[9]*x,c[10]=o[10]*x,c[11]=o[11]*x,c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c},s.a1=AE,s.a2=function(){return xe++},s.a3=me,s.a4=vh,s.a5=function(){Io.isLoading()||Io.isLoaded()||Pp()!=="deferred"||cy()},s.a6=yp,s.a7=$u,s.a8=_n,s.a9=MI,s.aA=Ru,s.aB=function(c){c=c.slice();const o=Object.create(null);for(let u=0;u<c.length;u++)o[c[u].id]=c[u];for(let u=0;u<c.length;u++)"ref"in c[u]&&(c[u]=Tr(c[u],o[c[u].ref]));return c},s.aC=function(c){if(c.type==="custom")return new ZF(c);switch(c.type){case"background":return new GF(c);case"circle":return new R4(c);case"fill":return new X4(c);case"fill-extrusion":return new dF(c);case"heatmap":return new M4(c);case"hillshade":return new L4(c);case"line":return new _F(c);case"raster":return new qF(c);case"symbol":return new Py(c)}},s.aD=Te,s.aE=function(c,o){if(!c)return[{command:or.setStyle,args:[o]}];let u=[];try{if(!Jt(c.version,o.version))return[{command:or.setStyle,args:[o]}];Jt(c.center,o.center)||u.push({command:or.setCenter,args:[o.center]}),Jt(c.zoom,o.zoom)||u.push({command:or.setZoom,args:[o.zoom]}),Jt(c.bearing,o.bearing)||u.push({command:or.setBearing,args:[o.bearing]}),Jt(c.pitch,o.pitch)||u.push({command:or.setPitch,args:[o.pitch]}),Jt(c.sprite,o.sprite)||u.push({command:or.setSprite,args:[o.sprite]}),Jt(c.glyphs,o.glyphs)||u.push({command:or.setGlyphs,args:[o.glyphs]}),Jt(c.transition,o.transition)||u.push({command:or.setTransition,args:[o.transition]}),Jt(c.light,o.light)||u.push({command:or.setLight,args:[o.light]});const f={},g=[];(function(w,C,P,M){let U;for(U in C=C||{},w=w||{})Object.prototype.hasOwnProperty.call(w,U)&&(Object.prototype.hasOwnProperty.call(C,U)||Mr(U,P,M));for(U in C)Object.prototype.hasOwnProperty.call(C,U)&&(Object.prototype.hasOwnProperty.call(w,U)?Jt(w[U],C[U])||(w[U].type==="geojson"&&C[U].type==="geojson"&&fr(w,C,U)?P.push({command:or.setGeoJSONSourceData,args:[U,C[U].data]}):Sr(U,C,P,M)):Cr(U,C,P))})(c.sources,o.sources,g,f);const x=[];c.layers&&c.layers.forEach(w=>{f[w.source]?u.push({command:or.removeLayer,args:[w.id]}):x.push(w)}),u=u.concat(g),function(w,C,P){C=C||[];const M=(w=w||[]).map(dr),U=C.map(dr),q=w.reduce(tn,{}),ee=C.reduce(tn,{}),oe=M.slice(),ae=Object.create(null);let ce,ve,be,ze,ke,Be,Ge;for(ce=0,ve=0;ce<M.length;ce++)be=M[ce],Object.prototype.hasOwnProperty.call(ee,be)?ve++:(P.push({command:or.removeLayer,args:[be]}),oe.splice(oe.indexOf(be,ve),1));for(ce=0,ve=0;ce<U.length;ce++)be=U[U.length-1-ce],oe[oe.length-1-ce]!==be&&(Object.prototype.hasOwnProperty.call(q,be)?(P.push({command:or.removeLayer,args:[be]}),oe.splice(oe.lastIndexOf(be,oe.length-ve),1)):ve++,Be=oe[oe.length-ce],P.push({command:or.addLayer,args:[ee[be],Be]}),oe.splice(oe.length-ce,0,be),ae[be]=!0);for(ce=0;ce<U.length;ce++)if(be=U[ce],ze=q[be],ke=ee[be],!ae[be]&&!Jt(ze,ke))if(Jt(ze.source,ke.source)&&Jt(ze["source-layer"],ke["source-layer"])&&Jt(ze.type,ke.type)){for(Ge in Qt(ze.layout,ke.layout,P,be,null,or.setLayoutProperty),Qt(ze.paint,ke.paint,P,be,null,or.setPaintProperty),Jt(ze.filter,ke.filter)||P.push({command:or.setFilter,args:[be,ke.filter]}),Jt(ze.minzoom,ke.minzoom)&&Jt(ze.maxzoom,ke.maxzoom)||P.push({command:or.setLayerZoomRange,args:[be,ke.minzoom,ke.maxzoom]}),ze)Object.prototype.hasOwnProperty.call(ze,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?Qt(ze[Ge],ke[Ge],P,be,Ge.slice(6),or.setPaintProperty):Jt(ze[Ge],ke[Ge])||P.push({command:or.setLayerProperty,args:[be,Ge,ke[Ge]]}));for(Ge in ke)Object.prototype.hasOwnProperty.call(ke,Ge)&&!Object.prototype.hasOwnProperty.call(ze,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?Qt(ze[Ge],ke[Ge],P,be,Ge.slice(6),or.setPaintProperty):Jt(ze[Ge],ke[Ge])||P.push({command:or.setLayerProperty,args:[be,Ge,ke[Ge]]}))}else P.push({command:or.removeLayer,args:[be]}),Be=oe[oe.lastIndexOf(be)+1],P.push({command:or.addLayer,args:[ke,Be]})}(x,o.layers,u)}catch(f){console.warn("Unable to compute style diff:",f),u=[{command:or.setStyle,args:[o]}]}return u},s.aF=function(c){const o=[],u=c.id;return u===void 0&&o.push({message:`layers.${u}: missing required property "id"`}),c.render===void 0&&o.push({message:`layers.${u}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&o.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),o},s.aG=function c(o,u){if(Array.isArray(o)){if(!Array.isArray(u)||o.length!==u.length)return!1;for(let f=0;f<o.length;f++)if(!c(o[f],u[f]))return!1;return!0}if(typeof o=="object"&&o!==null&&u!==null){if(typeof u!="object"||Object.keys(o).length!==Object.keys(u).length)return!1;for(const f in o)if(!c(o[f],u[f]))return!1;return!0}return o===u},s.aH=ge,s.aI=we,s.aJ=Du,s.aK=function(c){return c({pluginStatus:no,pluginURL:Ns}),Du.on("pluginStateChange",c),c},s.aL=class extends kl{constructor(c,o){super(c,o),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},s.aM=ch,s.aN=class extends kl{constructor(c,o){super(c,o),this.current=l1}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let o=1;o<16;o++)if(c[o]!==this.current[o]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},s.aO=py,s.aP=class extends kl{constructor(c,o){super(c,o),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},s.aQ=class extends kl{constructor(c,o){super(c,o),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},s.aR=my,s.aS=function(c,o,u,f,g,x,w){var C=1/(o-u),P=1/(f-g),M=1/(x-w);return c[0]=-2*C,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*P,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*M,c[11]=0,c[12]=(o+u)*C,c[13]=(g+f)*P,c[14]=(w+x)*M,c[15]=1,c},s.aT=Or,s.aU=A4,s.aV=class extends p{},s.aW=SF,s.aX=class extends b{},s.aY=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},s.aZ=LE,s.a_=mt,s.aa=function(c){const o={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,f,g,x)=>{const w=g||x;return o[f]=!w||w.toLowerCase(),""}),o["max-age"]){const u=parseInt(o["max-age"],10);isNaN(u)?delete o["max-age"]:o["max-age"]=u}return o},s.ab=function(c,o){const u=[];for(const f in c)f in o||u.push(f);return u},s.ac=function(c){if(Ce==null){const o=c.navigator?c.navigator.userAgent:null;Ce=!!c.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Ce},s.ad=$,s.ae=function(c,o,u){var f=Math.sin(u),g=Math.cos(u),x=o[0],w=o[1],C=o[2],P=o[3],M=o[4],U=o[5],q=o[6],ee=o[7];return o!==c&&(c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=x*g+M*f,c[1]=w*g+U*f,c[2]=C*g+q*f,c[3]=P*g+ee*f,c[4]=M*g-x*f,c[5]=U*g-w*f,c[6]=q*g-C*f,c[7]=ee*g-P*f,c},s.af=function(c){var o=new dh(16);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o},s.ag=_y,s.ah=function(c,o){let u=0,f=0;if(c.kind==="constant")f=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:g,minZoom:x,maxZoom:w}=c,C=g?$(To.interpolationFactor(g,o,x,w),0,1):0;c.kind==="camera"?f=ko.number(c.minSize,c.maxSize,C):u=C}return{uSizeT:u,uSize:f}},s.aj=function(c,{uSize:o,uSizeT:u},{lowerSize:f,upperSize:g}){return c.kind==="source"?f/Vs:c.kind==="composite"?ko.number(f/Vs,g/Vs,u):o},s.ak=z1,s.al=function(c,o,u,f){const g=o.y-c.y,x=o.x-c.x,w=f.y-u.y,C=f.x-u.x,P=w*x-C*g;if(P===0)return null;const M=(C*(c.y-u.y)-w*(c.x-u.x))/P;return new I(c.x+M*x,c.y+M*g)},s.am=$I,s.an=CE,s.ao=f1,s.ap=ui,s.ar=M1,s.as=function(c,o){var u=o[0],f=o[1],g=o[2],x=o[3],w=o[4],C=o[5],P=o[6],M=o[7],U=o[8],q=o[9],ee=o[10],oe=o[11],ae=o[12],ce=o[13],ve=o[14],be=o[15],ze=u*C-f*w,ke=u*P-g*w,Be=u*M-x*w,Ge=f*P-g*C,et=f*M-x*C,Ot=g*M-x*P,Zt=U*ce-q*ae,Mt=U*ve-ee*ae,At=U*be-oe*ae,yt=q*ve-ee*ce,Vt=q*be-oe*ce,wt=ee*be-oe*ve,ct=ze*wt-ke*Vt+Be*yt+Ge*At-et*Mt+Ot*Zt;return ct?(c[0]=(C*wt-P*Vt+M*yt)*(ct=1/ct),c[1]=(g*Vt-f*wt-x*yt)*ct,c[2]=(ce*Ot-ve*et+be*Ge)*ct,c[3]=(ee*et-q*Ot-oe*Ge)*ct,c[4]=(P*At-w*wt-M*Mt)*ct,c[5]=(u*wt-g*At+x*Mt)*ct,c[6]=(ve*Be-ae*Ot-be*ke)*ct,c[7]=(U*Ot-ee*Be+oe*ke)*ct,c[8]=(w*Vt-C*At+M*Zt)*ct,c[9]=(f*At-u*Vt-x*Zt)*ct,c[10]=(ae*et-ce*Be+be*ze)*ct,c[11]=(q*Be-U*et-oe*ze)*ct,c[12]=(C*Mt-w*yt-P*Zt)*ct,c[13]=(u*yt-f*Mt+g*Zt)*ct,c[14]=(ce*ke-ae*Ge-ve*ze)*ct,c[15]=(U*Ge-q*ke+ee*ze)*ct,c):null},s.at=V1,s.au=D1,s.av=U1,s.aw=function(){const c={},o=He.$version;for(const u in He.$root){const f=He.$root[u];if(f.required){let g=null;g=u==="version"?o:f.type==="array"?[]:{},g!=null&&(c[u]=g)}}return c},s.ax=or,s.ay=oy,s.az=rt,s.b=function(c,o){const u=new Blob([new Uint8Array(c)],{type:"image/png"});createImageBitmap(u).then(f=>{o(null,f)}).catch(f=>{o(new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},s.b0=Ci,s.b1=function(c,o){var u=c[0],f=c[1],g=c[2],x=c[3],w=c[4],C=c[5],P=c[6],M=c[7],U=c[8],q=c[9],ee=c[10],oe=c[11],ae=c[12],ce=c[13],ve=c[14],be=c[15],ze=o[0],ke=o[1],Be=o[2],Ge=o[3],et=o[4],Ot=o[5],Zt=o[6],Mt=o[7],At=o[8],yt=o[9],Vt=o[10],wt=o[11],ct=o[12],ar=o[13],Xt=o[14],kr=o[15];return Math.abs(u-ze)<=oo*Math.max(1,Math.abs(u),Math.abs(ze))&&Math.abs(f-ke)<=oo*Math.max(1,Math.abs(f),Math.abs(ke))&&Math.abs(g-Be)<=oo*Math.max(1,Math.abs(g),Math.abs(Be))&&Math.abs(x-Ge)<=oo*Math.max(1,Math.abs(x),Math.abs(Ge))&&Math.abs(w-et)<=oo*Math.max(1,Math.abs(w),Math.abs(et))&&Math.abs(C-Ot)<=oo*Math.max(1,Math.abs(C),Math.abs(Ot))&&Math.abs(P-Zt)<=oo*Math.max(1,Math.abs(P),Math.abs(Zt))&&Math.abs(M-Mt)<=oo*Math.max(1,Math.abs(M),Math.abs(Mt))&&Math.abs(U-At)<=oo*Math.max(1,Math.abs(U),Math.abs(At))&&Math.abs(q-yt)<=oo*Math.max(1,Math.abs(q),Math.abs(yt))&&Math.abs(ee-Vt)<=oo*Math.max(1,Math.abs(ee),Math.abs(Vt))&&Math.abs(oe-wt)<=oo*Math.max(1,Math.abs(oe),Math.abs(wt))&&Math.abs(ae-ct)<=oo*Math.max(1,Math.abs(ae),Math.abs(ct))&&Math.abs(ce-ar)<=oo*Math.max(1,Math.abs(ce),Math.abs(ar))&&Math.abs(ve-Xt)<=oo*Math.max(1,Math.abs(ve),Math.abs(Xt))&&Math.abs(be-kr)<=oo*Math.max(1,Math.abs(be),Math.abs(kr))},s.b2=function(c,o){return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c},s.b3=function(c,o,u){return c[0]=o[0]*u[0],c[1]=o[1]*u[1],c[2]=o[2]*u[2],c[3]=o[3]*u[3],c},s.b4=function(c,o){return c[0]*o[0]+c[1]*o[1]+c[2]*o[2]+c[3]*o[3]},s.b5=J,s.b6=AI,s.b7=EI,s.b8=function(c,o,u,f,g){var x,w=1/Math.tan(o/2);return c[0]=w/u,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=w,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,g!=null&&g!==1/0?(c[10]=(g+f)*(x=1/(f-g)),c[14]=2*g*f*x):(c[10]=-1,c[14]=-2*f),c},s.b9=function(c,o,u){var f=Math.sin(u),g=Math.cos(u),x=o[4],w=o[5],C=o[6],P=o[7],M=o[8],U=o[9],q=o[10],ee=o[11];return o!==c&&(c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[4]=x*g+M*f,c[5]=w*g+U*f,c[6]=C*g+q*f,c[7]=P*g+ee*f,c[8]=M*g-x*f,c[9]=U*g-w*f,c[10]=q*g-C*f,c[11]=ee*g-P*f,c},s.bA=S,s.bB=rI,s.bC=Jd,s.bD=Io,s.ba=te,s.bb=j,s.bc=function(c,o){return c[0]=o[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=o[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=o[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},s.bd=class extends Lu{},s.be=B1,s.bf=II,s.bg=oN,s.bi=Ze,s.bj=function(c,o,u=!1){if(no===Cp||no===kp||no===Tp)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ns=Ct.resolveURL(c),no=Cp,Ep=o,Ip(),u||cy()},s.bk=Pp,s.bl=function(c,o){const u={};for(let g=0;g<c.length;g++){const x=o&&o[c[g].id]||rh(c[g]);o&&(o[c[g].id]=x);let w=u[x];w||(w=u[x]=[]),w.push(c[g])}const f=[];for(const g in u)f.push(u[g]);return f},s.bm=jt,s.bn=DI,s.bo=zI,s.bp=dI,s.bq=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=ni/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const o=c.bucket.layers[0],u=o.layout,f=o._unevaluatedLayout._values,g={layoutIconSize:f["icon-size"].possiblyEvaluate(new _n(c.bucket.zoom+1),c.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new _n(c.bucket.zoom+1),c.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new _n(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:M,maxZoom:U}=c.bucket.textSizeData;g.compositeTextSizes=[f["text-size"].possiblyEvaluate(new _n(M),c.canonical),f["text-size"].possiblyEvaluate(new _n(U),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:M,maxZoom:U}=c.bucket.iconSizeData;g.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new _n(M),c.canonical),f["icon-size"].possiblyEvaluate(new _n(U),c.canonical)]}const x=u.get("text-line-height")*ui,w=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",C=u.get("text-keep-upright"),P=u.get("text-size");for(const M of c.bucket.features){const U=u.get("text-font").evaluate(M,{},c.canonical).join(","),q=P.evaluate(M,{},c.canonical),ee=g.layoutTextSize.evaluate(M,{},c.canonical),oe=g.layoutIconSize.evaluate(M,{},c.canonical),ae={horizontal:{},vertical:void 0},ce=M.text;let ve,be=[0,0];if(ce){const Be=ce.toString(),Ge=u.get("text-letter-spacing").evaluate(M,{},c.canonical)*ui,et=wp(Be)?Ge:0,Ot=u.get("text-anchor").evaluate(M,{},c.canonical),Zt=WI(o,M,c.canonical);if(!Zt){const wt=u.get("text-radial-offset").evaluate(M,{},c.canonical);be=wt?GI(Ot,[wt*ui,j1]):u.get("text-offset").evaluate(M,{},c.canonical).map(ct=>ct*ui)}let Mt=w?"center":u.get("text-justify").evaluate(M,{},c.canonical);const At=u.get("symbol-placement"),yt=At==="point"?u.get("text-max-width").evaluate(M,{},c.canonical)*ui:0,Vt=()=>{c.bucket.allowVerticalPlacement&&bp(Be)&&(ae.vertical=Ty(ce,c.glyphMap,c.glyphPositions,c.imagePositions,U,yt,x,Ot,"left",et,be,s.ai.vertical,!0,At,ee,q))};if(!w&&Zt){const wt=new Set;if(Mt==="auto")for(let ar=0;ar<Zt.values.length;ar+=2)wt.add(V1(Zt.values[ar]));else wt.add(Mt);let ct=!1;for(const ar of wt)if(!ae.horizontal[ar])if(ct)ae.horizontal[ar]=ae.horizontal[0];else{const Xt=Ty(ce,c.glyphMap,c.glyphPositions,c.imagePositions,U,yt,x,"center",ar,et,be,s.ai.horizontal,!1,At,ee,q);Xt&&(ae.horizontal[ar]=Xt,ct=Xt.positionedLines.length===1)}Vt()}else{Mt==="auto"&&(Mt=V1(Ot));const wt=Ty(ce,c.glyphMap,c.glyphPositions,c.imagePositions,U,yt,x,Ot,Mt,et,be,s.ai.horizontal,!1,At,ee,q);wt&&(ae.horizontal[Mt]=wt),Vt(),bp(Be)&&w&&C&&(ae.vertical=Ty(ce,c.glyphMap,c.glyphPositions,c.imagePositions,U,yt,x,Ot,Mt,et,be,s.ai.vertical,!1,At,ee,q))}}let ze=!1;if(M.icon&&M.icon.name){const Be=c.imageMap[M.icon.name];Be&&(ve=NF(c.imagePositions[M.icon.name],u.get("icon-offset").evaluate(M,{},c.canonical),u.get("icon-anchor").evaluate(M,{},c.canonical)),ze=!!Be.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=ze:c.bucket.sdfIcons!==ze&&We("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Be.pixelRatio!==c.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const ke=ZI(ae.horizontal)||ae.vertical;c.bucket.iconsInText=!!ke&&ke.iconsInText,(ke||ve)&&nN(c.bucket,M,ae,ve,c.imageMap,g,ee,oe,be,ze,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},s.br=T1,s.bs=S1,s.bt=k1,s.bu=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},s.bv=I1,s.bw=Sc,s.bx=function(c,o,u,f,g){return m(this,void 0,void 0,function*(){if(L())try{return yield at(c,o,u,f,g)}catch{}return function(x,w,C,P,M){const U=x.width,q=x.height;st&&Dt||(st=new OffscreenCanvas(U,q),Dt=st.getContext("2d",{willReadFrequently:!0})),st.width=U,st.height=q,Dt.drawImage(x,0,0,U,q);const ee=Dt.getImageData(w,C,P,M);return Dt.clearRect(0,0,U,q),ee.data}(c,o,u,f,g)})},s.by=RI,s.bz=y,s.c=it,s.d=function(c,o){const u=new Image;u.onload=()=>{o(null,u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame(()=>{u.src=Ye})},u.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(c)],{type:"image/png"});u.src=c.byteLength?URL.createObjectURL(f):Ye},s.e=ie,s.f=function(c,o){return rr(ie(c,{type:"json"}),o)},s.g=pt,s.h=Ct,s.i=Fe,s.j=Gt,s.k=hr,s.l=wr,s.m=rr,s.n=function(c){return new I1(c).readFields(zF,[])},s.o=function(c,o,u){if(!c.length)return u(null,[]);let f=c.length;const g=new Array(c.length);let x=null;c.forEach((w,C)=>{o(w,(P,M)=>{P&&(x=P),g[C]=M,--f==0&&u(x,g)})})},s.p=uI,s.q=Vp,s.r=Zn,s.s=Lr,s.t=i1,s.u=Lt,s.v=He,s.w=We,s.x=oh,s.y=ns,s.z=function([c,o,u]){return o+=90,o*=Math.PI/180,u*=Math.PI/180,{x:c*Math.cos(o)*Math.sin(u),y:c*Math.sin(o)*Math.sin(u),z:c*Math.cos(u)}}}),l(["./shared"],function(s){class m{constructor(Y){this.keyCache={},Y&&this.replace(Y)}replace(Y){this._layerConfigs={},this._layers={},this.update(Y,[])}update(Y,Q){for(const X of Y){this._layerConfigs[X.id]=X;const re=this._layers[X.id]=s.aC(X);re._featureFilter=s.a6(re.filter),this.keyCache[X.id]&&delete this.keyCache[X.id]}for(const X of Q)delete this.keyCache[X],delete this._layerConfigs[X],delete this._layers[X];this.familiesBySource={};const N=s.bl(Object.values(this._layerConfigs),this.keyCache);for(const X of N){const re=X.map(Le=>this._layers[Le.id]),he=re[0];if(he.visibility==="none")continue;const pe=he.source||"";let se=this.familiesBySource[pe];se||(se=this.familiesBySource[pe]={});const _e=he.sourceLayer||"_geojsonTileLayer";let Ae=se[_e];Ae||(Ae=se[_e]=[]),Ae.push(re)}}}class y{constructor(Y){const Q={},N=[];for(const pe in Y){const se=Y[pe],_e=Q[pe]={};for(const Ae in se){const Le=se[+Ae];if(!Le||Le.bitmap.width===0||Le.bitmap.height===0)continue;const Re={x:0,y:0,w:Le.bitmap.width+2,h:Le.bitmap.height+2};N.push(Re),_e[Ae]={rect:Re,metrics:Le.metrics}}}const{w:X,h:re}=s.p(N),he=new s.q({width:X||1,height:re||1});for(const pe in Y){const se=Y[pe];for(const _e in se){const Ae=se[+_e];if(!Ae||Ae.bitmap.width===0||Ae.bitmap.height===0)continue;const Le=Q[pe][_e].rect;s.q.copy(Ae.bitmap,he,{x:0,y:0},{x:Le.x+1,y:Le.y+1},Ae.bitmap)}}this.image=he,this.positions=Q}}s.bm("GlyphAtlas",y);class S{constructor(Y){this.tileID=new s.O(Y.tileID.overscaledZ,Y.tileID.wrap,Y.tileID.canonical.z,Y.tileID.canonical.x,Y.tileID.canonical.y),this.uid=Y.uid,this.zoom=Y.zoom,this.pixelRatio=Y.pixelRatio,this.tileSize=Y.tileSize,this.source=Y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Y.showCollisionBoxes,this.collectResourceTiming=!!Y.collectResourceTiming,this.returnDependencies=!!Y.returnDependencies,this.promoteId=Y.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(Y,Q,N,X,re){this.status="parsing",this.data=Y,this.collisionBoxArray=new s.a3;const he=new s.bn(Object.keys(Y.layers).sort()),pe=new s.bo(this.tileID,this.promoteId);pe.bucketLayerIDs=[];const se={},_e={featureIndex:pe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:N},Ae=Q.familiesBySource[this.source];for(const ht in Ae){const zt=Y.layers[ht];if(!zt)continue;zt.version===1&&s.w(`Vector tile source "${this.source}" layer "${ht}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const pr=he.encode(ht),ir=[];for(let jr=0;jr<zt.length;jr++){const pn=zt.feature(jr),Fn=pe.getId(pn,ht);ir.push({feature:pn,id:Fn,index:jr,sourceLayerIndex:pr})}for(const jr of Ae[ht]){const pn=jr[0];pn.source!==this.source&&s.w(`layer.source = ${pn.source} does not equal this.source = ${this.source}`),pn.minzoom&&this.zoom<Math.floor(pn.minzoom)||pn.maxzoom&&this.zoom>=pn.maxzoom||pn.visibility!=="none"&&(T(jr,this.zoom,N),(se[pn.id]=pn.createBucket({index:pe.bucketLayerIDs.length,layers:jr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:pr,sourceID:this.source})).populate(ir,_e,this.tileID.canonical),pe.bucketLayerIDs.push(jr.map(Fn=>Fn.id)))}}let Le,Re,ot,dt;const ut=s.aH(_e.glyphDependencies,ht=>Object.keys(ht).map(Number));this.inFlightDependencies.forEach(ht=>ht==null?void 0:ht.cancel()),this.inFlightDependencies=[];const It=++this.dependencySentinel;Object.keys(ut).length?this.inFlightDependencies.push(X.send("getGlyphs",{uid:this.uid,stacks:ut,source:this.source,tileID:this.tileID,type:"glyphs"},(ht,zt)=>{It===this.dependencySentinel&&(Le||(Le=ht,Re=zt,tt.call(this)))})):Re={};const Oe=Object.keys(_e.iconDependencies);Oe.length?this.inFlightDependencies.push(X.send("getImages",{icons:Oe,source:this.source,tileID:this.tileID,type:"icons"},(ht,zt)=>{It===this.dependencySentinel&&(Le||(Le=ht,ot=zt,tt.call(this)))})):ot={};const $e=Object.keys(_e.patternDependencies);function tt(){if(Le)return re(Le);if(Re&&ot&&dt){const ht=new y(Re),zt=new s.bp(ot,dt);for(const pr in se){const ir=se[pr];ir instanceof s.a4?(T(ir.layers,this.zoom,N),s.bq({bucket:ir,glyphMap:Re,glyphPositions:ht.positions,imageMap:ot,imagePositions:zt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):ir.hasPattern&&(ir instanceof s.br||ir instanceof s.bs||ir instanceof s.bt)&&(T(ir.layers,this.zoom,N),ir.addFeatures(_e,this.tileID.canonical,zt.patternPositions))}this.status="done",re(null,{buckets:Object.values(se).filter(pr=>!pr.isEmpty()),featureIndex:pe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ht.image,imageAtlas:zt,glyphMap:this.returnDependencies?Re:null,iconMap:this.returnDependencies?ot:null,glyphPositions:this.returnDependencies?ht.positions:null})}}$e.length?this.inFlightDependencies.push(X.send("getImages",{icons:$e,source:this.source,tileID:this.tileID,type:"patterns"},(ht,zt)=>{It===this.dependencySentinel&&(Le||(Le=ht,dt=zt,tt.call(this)))})):dt={},tt.call(this)}}function T(ue,Y,Q){const N=new s.a8(Y);for(const X of ue)X.recalculate(N,Q)}function I(ue,Y){const Q=s.l(ue.request,(N,X,re,he)=>{if(N)Y(N);else if(X)try{const pe=new s.bw.VectorTile(new s.bv(X));Y(null,{vectorTile:pe,rawData:X,cacheControl:re,expires:he})}catch(pe){const se=new Uint8Array(X);let _e=`Unable to parse the tile at ${ue.request.url}, `;_e+=se[0]===31&&se[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${pe.messge}`,Y(new Error(_e))}});return()=>{Q.cancel(),Y()}}class D{constructor(Y,Q,N,X){this.actor=Y,this.layerIndex=Q,this.availableImages=N,this.loadVectorData=X||I,this.fetching={},this.loading={},this.loaded={}}loadTile(Y,Q){const N=Y.uid;this.loading||(this.loading={});const X=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new s.bu(Y.request),re=this.loading[N]=new S(Y);re.abort=this.loadVectorData(Y,(he,pe)=>{if(delete this.loading[N],he||!pe)return re.status="done",this.loaded[N]=re,Q(he);const se=pe.rawData,_e={};pe.expires&&(_e.expires=pe.expires),pe.cacheControl&&(_e.cacheControl=pe.cacheControl);const Ae={};if(X){const Le=X.finish();Le&&(Ae.resourceTiming=JSON.parse(JSON.stringify(Le)))}re.vectorTile=pe.vectorTile,re.parse(pe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Le,Re)=>{if(delete this.fetching[N],Le||!Re)return Q(Le);Q(null,s.e({rawTileData:se.slice(0)},Re,_e,Ae))}),this.loaded=this.loaded||{},this.loaded[N]=re,this.fetching[N]={rawTileData:se,cacheControl:_e,resourceTiming:Ae}})}reloadTile(Y,Q){const N=this.loaded,X=Y.uid;if(N&&N[X]){const re=N[X];re.showCollisionBoxes=Y.showCollisionBoxes,re.status==="parsing"?re.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor,(he,pe)=>{if(he||!pe)return Q(he,pe);let se;if(this.fetching[X]){const{rawTileData:_e,cacheControl:Ae,resourceTiming:Le}=this.fetching[X];delete this.fetching[X],se=s.e({rawTileData:_e.slice(0)},pe,Ae,Le)}else se=pe;Q(null,se)}):re.status==="done"&&(re.vectorTile?re.parse(re.vectorTile,this.layerIndex,this.availableImages,this.actor,Q):Q())}}abortTile(Y,Q){const N=this.loading,X=Y.uid;N&&N[X]&&N[X].abort&&(N[X].abort(),delete N[X]),Q()}removeTile(Y,Q){const N=this.loaded,X=Y.uid;N&&N[X]&&delete N[X],Q()}}class F{constructor(){this.loaded={}}loadTile(Y,Q){return s._(this,void 0,void 0,function*(){const{uid:N,encoding:X,rawImageData:re,redFactor:he,greenFactor:pe,blueFactor:se,baseShift:_e}=Y,Ae=re.width+2,Le=re.height+2,Re=s.a(re)?new s.R({width:Ae,height:Le},yield s.bx(re,-1,-1,Ae,Le)):re,ot=new s.by(N,Re,X,he,pe,se,_e);this.loaded=this.loaded||{},this.loaded[N]=ot,Q(null,ot)})}removeTile(Y){const Q=this.loaded,N=Y.uid;Q&&Q[N]&&delete Q[N]}}function V(ue,Y){if(ue.length!==0){Z(ue[0],Y);for(var Q=1;Q<ue.length;Q++)Z(ue[Q],!Y)}}function Z(ue,Y){for(var Q=0,N=0,X=0,re=ue.length,he=re-1;X<re;he=X++){var pe=(ue[X][0]-ue[he][0])*(ue[he][1]+ue[X][1]),se=Q+pe;N+=Math.abs(Q)>=Math.abs(pe)?Q-se+pe:pe-se+Q,Q=se}Q+N>=0!=!!Y&&ue.reverse()}var z=s.bz(function ue(Y,Q){var N,X=Y&&Y.type;if(X==="FeatureCollection")for(N=0;N<Y.features.length;N++)ue(Y.features[N],Q);else if(X==="GeometryCollection")for(N=0;N<Y.geometries.length;N++)ue(Y.geometries[N],Q);else if(X==="Feature")ue(Y.geometry,Q);else if(X==="Polygon")V(Y.coordinates,Q);else if(X==="MultiPolygon")for(N=0;N<Y.coordinates.length;N++)V(Y.coordinates[N],Q);return Y});const O=s.bw.VectorTileFeature.prototype.toGeoJSON;var L={exports:{}},te=s.bA,j=s.bw.VectorTileFeature,$=J;function J(ue,Y){this.options=Y||{},this.features=ue,this.length=ue.length}function ie(ue,Y){this.id=typeof ue.id=="number"?ue.id:void 0,this.type=ue.type,this.rawGeometry=ue.type===1?[ue.geometry]:ue.geometry,this.properties=ue.tags,this.extent=Y||4096}J.prototype.feature=function(ue){return new ie(this.features[ue],this.options.extent)},ie.prototype.loadGeometry=function(){var ue=this.rawGeometry;this.geometry=[];for(var Y=0;Y<ue.length;Y++){for(var Q=ue[Y],N=[],X=0;X<Q.length;X++)N.push(new te(Q[X][0],Q[X][1]));this.geometry.push(N)}return this.geometry},ie.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ue=this.geometry,Y=1/0,Q=-1/0,N=1/0,X=-1/0,re=0;re<ue.length;re++)for(var he=ue[re],pe=0;pe<he.length;pe++){var se=he[pe];Y=Math.min(Y,se.x),Q=Math.max(Q,se.x),N=Math.min(N,se.y),X=Math.max(X,se.y)}return[Y,N,Q,X]},ie.prototype.toGeoJSON=j.prototype.toGeoJSON;var xe=s.bB,ge=$;function we(ue){var Y=new xe;return function(Q,N){for(var X in Q.layers)N.writeMessage(3,Te,Q.layers[X])}(ue,Y),Y.finish()}function Te(ue,Y){var Q;Y.writeVarintField(15,ue.version||1),Y.writeStringField(1,ue.name||""),Y.writeVarintField(5,ue.extent||4096);var N={keys:[],values:[],keycache:{},valuecache:{}};for(Q=0;Q<ue.length;Q++)N.feature=ue.feature(Q),Y.writeMessage(2,Pe,N);var X=N.keys;for(Q=0;Q<X.length;Q++)Y.writeStringField(3,X[Q]);var re=N.values;for(Q=0;Q<re.length;Q++)Y.writeMessage(4,Ce,re[Q])}function Pe(ue,Y){var Q=ue.feature;Q.id!==void 0&&Y.writeVarintField(1,Q.id),Y.writeMessage(2,We,ue),Y.writeVarintField(3,Q.type),Y.writeMessage(4,Fe,Q)}function We(ue,Y){var Q=ue.feature,N=ue.keys,X=ue.values,re=ue.keycache,he=ue.valuecache;for(var pe in Q.properties){var se=Q.properties[pe],_e=re[pe];if(se!==null){_e===void 0&&(N.push(pe),re[pe]=_e=N.length-1),Y.writeVarint(_e);var Ae=typeof se;Ae!=="string"&&Ae!=="boolean"&&Ae!=="number"&&(se=JSON.stringify(se));var Le=Ae+":"+se,Re=he[Le];Re===void 0&&(X.push(se),he[Le]=Re=X.length-1),Y.writeVarint(Re)}}}function De(ue,Y){return(Y<<3)+(7&ue)}function Se(ue){return ue<<1^ue>>31}function Fe(ue,Y){for(var Q=ue.loadGeometry(),N=ue.type,X=0,re=0,he=Q.length,pe=0;pe<he;pe++){var se=Q[pe],_e=1;N===1&&(_e=se.length),Y.writeVarint(De(1,_e));for(var Ae=N===3?se.length-1:se.length,Le=0;Le<Ae;Le++){Le===1&&N!==1&&Y.writeVarint(De(2,Ae-1));var Re=se[Le].x-X,ot=se[Le].y-re;Y.writeVarint(Se(Re)),Y.writeVarint(Se(ot)),X+=Re,re+=ot}N===3&&Y.writeVarint(De(7,1))}}function Ce(ue,Y){var Q=typeof ue;Q==="string"?Y.writeStringField(1,ue):Q==="boolean"?Y.writeBooleanField(7,ue):Q==="number"&&(ue%1!=0?Y.writeDoubleField(3,ue):ue<0?Y.writeSVarintField(6,ue):Y.writeVarintField(5,ue))}L.exports=we,L.exports.fromVectorTileJs=we,L.exports.fromGeojsonVt=function(ue,Y){Y=Y||{};var Q={};for(var N in ue)Q[N]=new ge(ue[N].features,Y),Q[N].name=N,Q[N].version=Y.version,Q[N].extent=Y.extent;return we({layers:Q})},L.exports.GeoJSONWrapper=ge;var Ne=s.bz(L.exports);const Ye={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ue=>ue},at=Math.fround||(st=new Float32Array(1),ue=>(st[0]=+ue,st[0]));var st;const Dt=3,St=5,$t=6;class Ct{constructor(Y){this.options=Object.assign(Object.create(Ye),Y),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Y){const{log:Q,minZoom:N,maxZoom:X}=this.options;Q&&console.time("total time");const re=`prepare ${Y.length} points`;Q&&console.time(re),this.points=Y;const he=[];for(let se=0;se<Y.length;se++){const _e=Y[se];if(!_e.geometry)continue;const[Ae,Le]=_e.geometry.coordinates,Re=at(rt(Ae)),ot=at(pt(Le));he.push(Re,ot,1/0,se,-1,1),this.options.reduce&&he.push(0)}let pe=this.trees[X+1]=this._createTree(he);Q&&console.timeEnd(re);for(let se=X;se>=N;se--){const _e=+Date.now();pe=this.trees[se]=this._createTree(this._cluster(pe,se)),Q&&console.log("z%d: %d clusters in %dms",se,pe.numItems,+Date.now()-_e)}return Q&&console.timeEnd("total time"),this}getClusters(Y,Q){let N=((Y[0]+180)%360+360)%360-180;const X=Math.max(-90,Math.min(90,Y[1]));let re=Y[2]===180?180:((Y[2]+180)%360+360)%360-180;const he=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)N=-180,re=180;else if(N>re){const Le=this.getClusters([N,X,180,he],Q),Re=this.getClusters([-180,X,re,he],Q);return Le.concat(Re)}const pe=this.trees[this._limitZoom(Q)],se=pe.range(rt(N),pt(he),rt(re),pt(X)),_e=pe.data,Ae=[];for(const Le of se){const Re=this.stride*Le;Ae.push(_e[Re+St]>1?it(_e,Re,this.clusterProps):this.points[_e[Re+Dt]])}return Ae}getChildren(Y){const Q=this._getOriginId(Y),N=this._getOriginZoom(Y),X="No cluster with the specified id.",re=this.trees[N];if(!re)throw new Error(X);const he=re.data;if(Q*this.stride>=he.length)throw new Error(X);const pe=this.options.radius/(this.options.extent*Math.pow(2,N-1)),se=re.within(he[Q*this.stride],he[Q*this.stride+1],pe),_e=[];for(const Ae of se){const Le=Ae*this.stride;he[Le+4]===Y&&_e.push(he[Le+St]>1?it(he,Le,this.clusterProps):this.points[he[Le+Dt]])}if(_e.length===0)throw new Error(X);return _e}getLeaves(Y,Q,N){const X=[];return this._appendLeaves(X,Y,Q=Q||10,N=N||0,0),X}getTile(Y,Q,N){const X=this.trees[this._limitZoom(Y)],re=Math.pow(2,Y),{extent:he,radius:pe}=this.options,se=pe/he,_e=(N-se)/re,Ae=(N+1+se)/re,Le={features:[]};return this._addTileFeatures(X.range((Q-se)/re,_e,(Q+1+se)/re,Ae),X.data,Q,N,re,Le),Q===0&&this._addTileFeatures(X.range(1-se/re,_e,1,Ae),X.data,re,N,re,Le),Q===re-1&&this._addTileFeatures(X.range(0,_e,se/re,Ae),X.data,-1,N,re,Le),Le.features.length?Le:null}getClusterExpansionZoom(Y){let Q=this._getOriginZoom(Y)-1;for(;Q<=this.options.maxZoom;){const N=this.getChildren(Y);if(Q++,N.length!==1)break;Y=N[0].properties.cluster_id}return Q}_appendLeaves(Y,Q,N,X,re){const he=this.getChildren(Q);for(const pe of he){const se=pe.properties;if(se&&se.cluster?re+se.point_count<=X?re+=se.point_count:re=this._appendLeaves(Y,se.cluster_id,N,X,re):re<X?re++:Y.push(pe),Y.length===N)break}return re}_createTree(Y){const Q=new s.av(Y.length/this.stride|0,this.options.nodeSize,Float32Array);for(let N=0;N<Y.length;N+=this.stride)Q.add(Y[N],Y[N+1]);return Q.finish(),Q.data=Y,Q}_addTileFeatures(Y,Q,N,X,re,he){for(const pe of Y){const se=pe*this.stride,_e=Q[se+St]>1;let Ae,Le,Re;if(_e)Ae=Ze(Q,se,this.clusterProps),Le=Q[se],Re=Q[se+1];else{const ut=this.points[Q[se+Dt]];Ae=ut.properties;const[It,Oe]=ut.geometry.coordinates;Le=rt(It),Re=pt(Oe)}const ot={type:1,geometry:[[Math.round(this.options.extent*(Le*re-N)),Math.round(this.options.extent*(Re*re-X))]],tags:Ae};let dt;dt=_e||this.options.generateId?Q[se+Dt]:this.points[Q[se+Dt]].id,dt!==void 0&&(ot.id=dt),he.features.push(ot)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,Q){const{radius:N,extent:X,reduce:re,minPoints:he}=this.options,pe=N/(X*Math.pow(2,Q)),se=Y.data,_e=[],Ae=this.stride;for(let Le=0;Le<se.length;Le+=Ae){if(se[Le+2]<=Q)continue;se[Le+2]=Q;const Re=se[Le],ot=se[Le+1],dt=Y.within(se[Le],se[Le+1],pe),ut=se[Le+St];let It=ut;for(const Oe of dt){const $e=Oe*Ae;se[$e+2]>Q&&(It+=se[$e+St])}if(It>ut&&It>=he){let Oe,$e=Re*ut,tt=ot*ut,ht=-1;const zt=((Le/Ae|0)<<5)+(Q+1)+this.points.length;for(const pr of dt){const ir=pr*Ae;if(se[ir+2]<=Q)continue;se[ir+2]=Q;const jr=se[ir+St];$e+=se[ir]*jr,tt+=se[ir+1]*jr,se[ir+4]=zt,re&&(Oe||(Oe=this._map(se,Le,!0),ht=this.clusterProps.length,this.clusterProps.push(Oe)),re(Oe,this._map(se,ir)))}se[Le+4]=zt,_e.push($e/It,tt/It,1/0,zt,-1,It),re&&_e.push(ht)}else{for(let Oe=0;Oe<Ae;Oe++)_e.push(se[Le+Oe]);if(It>1)for(const Oe of dt){const $e=Oe*Ae;if(!(se[$e+2]<=Q)){se[$e+2]=Q;for(let tt=0;tt<Ae;tt++)_e.push(se[$e+tt])}}}}return _e}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,Q,N){if(Y[Q+St]>1){const he=this.clusterProps[Y[Q+$t]];return N?Object.assign({},he):he}const X=this.points[Y[Q+Dt]].properties,re=this.options.map(X);return N&&re===X?Object.assign({},re):re}}function it(ue,Y,Q){return{type:"Feature",id:ue[Y+Dt],properties:Ze(ue,Y,Q),geometry:{type:"Point",coordinates:[(N=ue[Y],360*(N-.5)),sr(ue[Y+1])]}};var N}function Ze(ue,Y,Q){const N=ue[Y+St],X=N>=1e4?`${Math.round(N/1e3)}k`:N>=1e3?Math.round(N/100)/10+"k":N,re=ue[Y+$t],he=re===-1?{}:Object.assign({},Q[re]);return Object.assign(he,{cluster:!0,cluster_id:ue[Y+Dt],point_count:N,point_count_abbreviated:X})}function rt(ue){return ue/360+.5}function pt(ue){const Y=Math.sin(ue*Math.PI/180),Q=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return Q<0?0:Q>1?1:Q}function sr(ue){const Y=(180-360*ue)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function rr(ue,Y,Q,N){for(var X,re=N,he=Q-Y>>1,pe=Q-Y,se=ue[Y],_e=ue[Y+1],Ae=ue[Q],Le=ue[Q+1],Re=Y+3;Re<Q;Re+=3){var ot=wr(ue[Re],ue[Re+1],se,_e,Ae,Le);if(ot>re)X=Re,re=ot;else if(ot===re){var dt=Math.abs(Re-he);dt<pe&&(X=Re,pe=dt)}}re>N&&(X-Y>3&&rr(ue,Y,X,N),ue[X+2]=re,Q-X>3&&rr(ue,X,Q,N))}function wr(ue,Y,Q,N,X,re){var he=X-Q,pe=re-N;if(he!==0||pe!==0){var se=((ue-Q)*he+(Y-N)*pe)/(he*he+pe*pe);se>1?(Q=X,N=re):se>0&&(Q+=he*se,N+=pe*se)}return(he=ue-Q)*he+(pe=Y-N)*pe}function Lr(ue,Y,Q,N){var X={id:ue===void 0?null:ue,type:Y,geometry:Q,tags:N,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(re){var he=re.geometry,pe=re.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")nr(re,he);else if(pe==="Polygon"||pe==="MultiLineString")for(var se=0;se<he.length;se++)nr(re,he[se]);else if(pe==="MultiPolygon")for(se=0;se<he.length;se++)for(var _e=0;_e<he[se].length;_e++)nr(re,he[se][_e])}(X),X}function nr(ue,Y){for(var Q=0;Q<Y.length;Q+=3)ue.minX=Math.min(ue.minX,Y[Q]),ue.minY=Math.min(ue.minY,Y[Q+1]),ue.maxX=Math.max(ue.maxX,Y[Q]),ue.maxY=Math.max(ue.maxY,Y[Q+1])}function Et(ue,Y,Q,N){if(Y.geometry){var X=Y.geometry.coordinates,re=Y.geometry.type,he=Math.pow(Q.tolerance/((1<<Q.maxZoom)*Q.extent),2),pe=[],se=Y.id;if(Q.promoteId?se=Y.properties[Q.promoteId]:Q.generateId&&(se=N||0),re==="Point")hr(X,pe);else if(re==="MultiPoint")for(var _e=0;_e<X.length;_e++)hr(X[_e],pe);else if(re==="LineString")Gt(X,pe,he,!1);else if(re==="MultiLineString"){if(Q.lineMetrics){for(_e=0;_e<X.length;_e++)Gt(X[_e],pe=[],he,!1),ue.push(Lr(se,"LineString",pe,Y.properties));return}Dr(X,pe,he,!1)}else if(re==="Polygon")Dr(X,pe,he,!0);else{if(re!=="MultiPolygon"){if(re==="GeometryCollection"){for(_e=0;_e<Y.geometry.geometries.length;_e++)Et(ue,{id:se,geometry:Y.geometry.geometries[_e],properties:Y.properties},Q,N);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<X.length;_e++){var Ae=[];Dr(X[_e],Ae,he,!0),pe.push(Ae)}}ue.push(Lr(se,re,pe,Y.properties))}}function hr(ue,Y){Y.push(He(ue[0])),Y.push(xr(ue[1])),Y.push(0)}function Gt(ue,Y,Q,N){for(var X,re,he=0,pe=0;pe<ue.length;pe++){var se=He(ue[pe][0]),_e=xr(ue[pe][1]);Y.push(se),Y.push(_e),Y.push(0),pe>0&&(he+=N?(X*_e-se*re)/2:Math.sqrt(Math.pow(se-X,2)+Math.pow(_e-re,2))),X=se,re=_e}var Ae=Y.length-3;Y[2]=1,rr(Y,0,Ae,Q),Y[Ae+2]=1,Y.size=Math.abs(he),Y.start=0,Y.end=Y.size}function Dr(ue,Y,Q,N){for(var X=0;X<ue.length;X++){var re=[];Gt(ue[X],re,Q,N),Y.push(re)}}function He(ue){return ue/360+.5}function xr(ue){var Y=Math.sin(ue*Math.PI/180),Q=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return Q<0?0:Q>1?1:Q}function Tr(ue,Y,Q,N,X,re,he,pe){if(N/=Y,re>=(Q/=Y)&&he<N)return ue;if(he<Q||re>=N)return null;for(var se=[],_e=0;_e<ue.length;_e++){var Ae=ue[_e],Le=Ae.geometry,Re=Ae.type,ot=X===0?Ae.minX:Ae.minY,dt=X===0?Ae.maxX:Ae.maxY;if(ot>=Q&&dt<N)se.push(Ae);else if(!(dt<Q||ot>=N)){var ut=[];if(Re==="Point"||Re==="MultiPoint")Jt(Le,ut,Q,N,X);else if(Re==="LineString")or(Le,ut,Q,N,X,!1,pe.lineMetrics);else if(Re==="MultiLineString")Mr(Le,ut,Q,N,X,!1);else if(Re==="Polygon")Mr(Le,ut,Q,N,X,!0);else if(Re==="MultiPolygon")for(var It=0;It<Le.length;It++){var Oe=[];Mr(Le[It],Oe,Q,N,X,!0),Oe.length&&ut.push(Oe)}if(ut.length){if(pe.lineMetrics&&Re==="LineString"){for(It=0;It<ut.length;It++)se.push(Lr(Ae.id,Re,ut[It],Ae.tags));continue}Re!=="LineString"&&Re!=="MultiLineString"||(ut.length===1?(Re="LineString",ut=ut[0]):Re="MultiLineString"),Re!=="Point"&&Re!=="MultiPoint"||(Re=ut.length===3?"Point":"MultiPoint"),se.push(Lr(Ae.id,Re,ut,Ae.tags))}}}return se.length?se:null}function Jt(ue,Y,Q,N,X){for(var re=0;re<ue.length;re+=3){var he=ue[re+X];he>=Q&&he<=N&&(Y.push(ue[re]),Y.push(ue[re+1]),Y.push(ue[re+2]))}}function or(ue,Y,Q,N,X,re,he){for(var pe,se,_e=Cr(ue),Ae=X===0?fr:Qt,Le=ue.start,Re=0;Re<ue.length-3;Re+=3){var ot=ue[Re],dt=ue[Re+1],ut=ue[Re+2],It=ue[Re+3],Oe=ue[Re+4],$e=X===0?ot:dt,tt=X===0?It:Oe,ht=!1;he&&(pe=Math.sqrt(Math.pow(ot-It,2)+Math.pow(dt-Oe,2))),$e<Q?tt>Q&&(se=Ae(_e,ot,dt,It,Oe,Q),he&&(_e.start=Le+pe*se)):$e>N?tt<N&&(se=Ae(_e,ot,dt,It,Oe,N),he&&(_e.start=Le+pe*se)):Sr(_e,ot,dt,ut),tt<Q&&$e>=Q&&(se=Ae(_e,ot,dt,It,Oe,Q),ht=!0),tt>N&&$e<=N&&(se=Ae(_e,ot,dt,It,Oe,N),ht=!0),!re&&ht&&(he&&(_e.end=Le+pe*se),Y.push(_e),_e=Cr(ue)),he&&(Le+=pe)}var zt=ue.length-3;ot=ue[zt],dt=ue[zt+1],ut=ue[zt+2],($e=X===0?ot:dt)>=Q&&$e<=N&&Sr(_e,ot,dt,ut),zt=_e.length-3,re&&zt>=3&&(_e[zt]!==_e[0]||_e[zt+1]!==_e[1])&&Sr(_e,_e[0],_e[1],_e[2]),_e.length&&Y.push(_e)}function Cr(ue){var Y=[];return Y.size=ue.size,Y.start=ue.start,Y.end=ue.end,Y}function Mr(ue,Y,Q,N,X,re){for(var he=0;he<ue.length;he++)or(ue[he],Y,Q,N,X,re,!1)}function Sr(ue,Y,Q,N){ue.push(Y),ue.push(Q),ue.push(N)}function fr(ue,Y,Q,N,X,re){var he=(re-Y)/(N-Y);return ue.push(re),ue.push(Q+(X-Q)*he),ue.push(1),he}function Qt(ue,Y,Q,N,X,re){var he=(re-Q)/(X-Q);return ue.push(Y+(N-Y)*he),ue.push(re),ue.push(1),he}function dr(ue,Y){for(var Q=[],N=0;N<ue.length;N++){var X,re=ue[N],he=re.type;if(he==="Point"||he==="MultiPoint"||he==="LineString")X=tn(re.geometry,Y);else if(he==="MultiLineString"||he==="Polygon"){X=[];for(var pe=0;pe<re.geometry.length;pe++)X.push(tn(re.geometry[pe],Y))}else if(he==="MultiPolygon")for(X=[],pe=0;pe<re.geometry.length;pe++){for(var se=[],_e=0;_e<re.geometry[pe].length;_e++)se.push(tn(re.geometry[pe][_e],Y));X.push(se)}Q.push(Lr(re.id,he,X,re.tags))}return Q}function tn(ue,Y){var Q=[];Q.size=ue.size,ue.start!==void 0&&(Q.start=ue.start,Q.end=ue.end);for(var N=0;N<ue.length;N+=3)Q.push(ue[N]+Y,ue[N+1],ue[N+2]);return Q}function je(ue,Y){if(ue.transformed)return ue;var Q,N,X,re=1<<ue.z,he=ue.x,pe=ue.y;for(Q=0;Q<ue.features.length;Q++){var se=ue.features[Q],_e=se.geometry,Ae=se.type;if(se.geometry=[],Ae===1)for(N=0;N<_e.length;N+=2)se.geometry.push(kt(_e[N],_e[N+1],Y,re,he,pe));else for(N=0;N<_e.length;N++){var Le=[];for(X=0;X<_e[N].length;X+=2)Le.push(kt(_e[N][X],_e[N][X+1],Y,re,he,pe));se.geometry.push(Le)}}return ue.transformed=!0,ue}function kt(ue,Y,Q,N,X,re){return[Math.round(Q*(ue*N-X)),Math.round(Q*(Y*N-re))]}function bt(ue,Y,Q,N,X){for(var re=Y===X.maxZoom?0:X.tolerance/((1<<Y)*X.extent),he={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Q,y:N,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},pe=0;pe<ue.length;pe++){he.numFeatures++,Ee(he,ue[pe],re,X);var se=ue[pe].minX,_e=ue[pe].minY,Ae=ue[pe].maxX,Le=ue[pe].maxY;se<he.minX&&(he.minX=se),_e<he.minY&&(he.minY=_e),Ae>he.maxX&&(he.maxX=Ae),Le>he.maxY&&(he.maxY=Le)}return he}function Ee(ue,Y,Q,N){var X=Y.geometry,re=Y.type,he=[];if(re==="Point"||re==="MultiPoint")for(var pe=0;pe<X.length;pe+=3)he.push(X[pe]),he.push(X[pe+1]),ue.numPoints++,ue.numSimplified++;else if(re==="LineString")Ve(he,X,ue,Q,!1,!1);else if(re==="MultiLineString"||re==="Polygon")for(pe=0;pe<X.length;pe++)Ve(he,X[pe],ue,Q,re==="Polygon",pe===0);else if(re==="MultiPolygon")for(var se=0;se<X.length;se++){var _e=X[se];for(pe=0;pe<_e.length;pe++)Ve(he,_e[pe],ue,Q,!0,pe===0)}if(he.length){var Ae=Y.tags||null;if(re==="LineString"&&N.lineMetrics){for(var Le in Ae={},Y.tags)Ae[Le]=Y.tags[Le];Ae.mapbox_clip_start=X.start/X.size,Ae.mapbox_clip_end=X.end/X.size}var Re={geometry:he,type:re==="Polygon"||re==="MultiPolygon"?3:re==="LineString"||re==="MultiLineString"?2:1,tags:Ae};Y.id!==null&&(Re.id=Y.id),ue.features.push(Re)}}function Ve(ue,Y,Q,N,X,re){var he=N*N;if(N>0&&Y.size<(X?he:N))Q.numPoints+=Y.length/3;else{for(var pe=[],se=0;se<Y.length;se+=3)(N===0||Y[se+2]>he)&&(Q.numSimplified++,pe.push(Y[se]),pe.push(Y[se+1])),Q.numPoints++;X&&function(_e,Ae){for(var Le=0,Re=0,ot=_e.length,dt=ot-2;Re<ot;dt=Re,Re+=2)Le+=(_e[Re]-_e[dt])*(_e[Re+1]+_e[dt+1]);if(Le>0===Ae)for(Re=0,ot=_e.length;Re<ot/2;Re+=2){var ut=_e[Re],It=_e[Re+1];_e[Re]=_e[ot-2-Re],_e[Re+1]=_e[ot-1-Re],_e[ot-2-Re]=ut,_e[ot-1-Re]=It}}(pe,re),ue.push(pe)}}function Xe(ue,Y){var Q=(Y=this.options=function(X,re){for(var he in re)X[he]=re[he];return X}(Object.create(this.options),Y)).debug;if(Q&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");var N=function(X,re){var he=[];if(X.type==="FeatureCollection")for(var pe=0;pe<X.features.length;pe++)Et(he,X.features[pe],re,pe);else Et(he,X.type==="Feature"?X:{geometry:X},re);return he}(ue,Y);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),N=function(X,re){var he=re.buffer/re.extent,pe=X,se=Tr(X,1,-1-he,he,0,-1,2,re),_e=Tr(X,1,1-he,2+he,0,-1,2,re);return(se||_e)&&(pe=Tr(X,1,-he,1+he,0,-1,2,re)||[],se&&(pe=dr(se,1).concat(pe)),_e&&(pe=pe.concat(dr(_e,-1)))),pe}(N,Y),N.length&&this.splitTile(N,0,0,0),Q&&(N.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Tt(ue,Y,Q){return 32*((1<<ue)*Q+Y)+ue}function gt(ue,Y){return Y?ue.properties[Y]:ue.id}function Rt(ue,Y){if(ue==null)return!0;if(ue.type==="Feature")return gt(ue,Y)!=null;if(ue.type==="FeatureCollection"){const Q=new Set;for(const N of ue.features){const X=gt(N,Y);if(X==null||Q.has(X))return!1;Q.add(X)}return!0}return!1}function vr(ue,Y){const Q=new Map;if(ue!=null)if(ue.type==="Feature")Q.set(gt(ue,Y),ue);else for(const N of ue.features)Q.set(gt(N,Y),N);return Q}Xe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Xe.prototype.splitTile=function(ue,Y,Q,N,X,re,he){for(var pe=[ue,Y,Q,N],se=this.options,_e=se.debug;pe.length;){N=pe.pop(),Q=pe.pop(),Y=pe.pop(),ue=pe.pop();var Ae=1<<Y,Le=Tt(Y,Q,N),Re=this.tiles[Le];if(!Re&&(_e>1&&console.time("creation"),Re=this.tiles[Le]=bt(ue,Y,Q,N,se),this.tileCoords.push({z:Y,x:Q,y:N}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,Q,N,Re.numFeatures,Re.numPoints,Re.numSimplified),console.timeEnd("creation"));var ot="z"+Y;this.stats[ot]=(this.stats[ot]||0)+1,this.total++}if(Re.source=ue,X){if(Y===se.maxZoom||Y===X)continue;var dt=1<<X-Y;if(Q!==Math.floor(re/dt)||N!==Math.floor(he/dt))continue}else if(Y===se.indexMaxZoom||Re.numPoints<=se.indexMaxPoints)continue;if(Re.source=null,ue.length!==0){_e>1&&console.time("clipping");var ut,It,Oe,$e,tt,ht,zt=.5*se.buffer/se.extent,pr=.5-zt,ir=.5+zt,jr=1+zt;ut=It=Oe=$e=null,tt=Tr(ue,Ae,Q-zt,Q+ir,0,Re.minX,Re.maxX,se),ht=Tr(ue,Ae,Q+pr,Q+jr,0,Re.minX,Re.maxX,se),ue=null,tt&&(ut=Tr(tt,Ae,N-zt,N+ir,1,Re.minY,Re.maxY,se),It=Tr(tt,Ae,N+pr,N+jr,1,Re.minY,Re.maxY,se),tt=null),ht&&(Oe=Tr(ht,Ae,N-zt,N+ir,1,Re.minY,Re.maxY,se),$e=Tr(ht,Ae,N+pr,N+jr,1,Re.minY,Re.maxY,se),ht=null),_e>1&&console.timeEnd("clipping"),pe.push(ut||[],Y+1,2*Q,2*N),pe.push(It||[],Y+1,2*Q,2*N+1),pe.push(Oe||[],Y+1,2*Q+1,2*N),pe.push($e||[],Y+1,2*Q+1,2*N+1)}}},Xe.prototype.getTile=function(ue,Y,Q){var N=this.options,X=N.extent,re=N.debug;if(ue<0||ue>24)return null;var he=1<<ue,pe=Tt(ue,Y=(Y%he+he)%he,Q);if(this.tiles[pe])return je(this.tiles[pe],X);re>1&&console.log("drilling down to z%d-%d-%d",ue,Y,Q);for(var se,_e=ue,Ae=Y,Le=Q;!se&&_e>0;)_e--,Ae=Math.floor(Ae/2),Le=Math.floor(Le/2),se=this.tiles[Tt(_e,Ae,Le)];return se&&se.source?(re>1&&console.log("found parent tile z%d-%d-%d",_e,Ae,Le),re>1&&console.time("drilling down"),this.splitTile(se.source,_e,Ae,Le,ue,Y,Q),re>1&&console.timeEnd("drilling down"),this.tiles[pe]?je(this.tiles[pe],X):null):null};class Bt extends D{constructor(Y,Q,N,X){super(Y,Q,N),this._dataUpdateable=new Map,this.loadGeoJSON=(re,he)=>{const{promoteId:pe}=re;if(re.request)return s.f(re.request,(se,_e,Ae,Le)=>{this._dataUpdateable=Rt(_e,pe)?vr(_e,pe):void 0,he(se,_e,Ae,Le)});if(typeof re.data=="string")try{const se=JSON.parse(re.data);this._dataUpdateable=Rt(se,pe)?vr(se,pe):void 0,he(null,se)}catch{he(new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`))}else re.dataDiff?this._dataUpdateable?(function(se,_e,Ae){var Le,Re,ot,dt;if(_e.removeAll&&se.clear(),_e.remove)for(const ut of _e.remove)se.delete(ut);if(_e.add)for(const ut of _e.add){const It=gt(ut,Ae);It!=null&&se.set(It,ut)}if(_e.update)for(const ut of _e.update){let It=se.get(ut.id);if(It==null)continue;const Oe=!ut.removeAllProperties&&(((Le=ut.removeProperties)===null||Le===void 0?void 0:Le.length)>0||((Re=ut.addOrUpdateProperties)===null||Re===void 0?void 0:Re.length)>0);if((ut.newGeometry||ut.removeAllProperties||Oe)&&(It=Object.assign({},It),se.set(ut.id,It),Oe&&(It.properties=Object.assign({},It.properties))),ut.newGeometry&&(It.geometry=ut.newGeometry),ut.removeAllProperties)It.properties={};else if(((ot=ut.removeProperties)===null||ot===void 0?void 0:ot.length)>0)for(const $e of ut.removeProperties)Object.prototype.hasOwnProperty.call(It.properties,$e)&&delete It.properties[$e];if(((dt=ut.addOrUpdateProperties)===null||dt===void 0?void 0:dt.length)>0)for(const{key:$e,value:tt}of ut.addOrUpdateProperties)It.properties[$e]=tt}}(this._dataUpdateable,re.dataDiff,pe),he(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):he(new Error(`Cannot update existing geojson data in ${re.source}`)):he(new Error(`Input data given to '${re.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,X&&(this.loadGeoJSON=X)}loadGeoJSONTile(Y,Q){const N=Y.tileID.canonical;if(!this._geoJSONIndex)return Q(null,null);const X=this._geoJSONIndex.getTile(N.z,N.x,N.y);if(!X)return Q(null,null);const re=new class{constructor(pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.N,this.length=pe.length,this._features=pe}feature(pe){return new class{constructor(se){this._feature=se,this.extent=s.N,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(this._feature.type===1){const se=[];for(const _e of this._feature.geometry)se.push([new s.P(_e[0],_e[1])]);return se}{const se=[];for(const _e of this._feature.geometry){const Ae=[];for(const Le of _e)Ae.push(new s.P(Le[0],Le[1]));se.push(Ae)}return se}}toGeoJSON(se,_e,Ae){return O.call(this,se,_e,Ae)}}(this._features[pe])}}(X.features);let he=Ne(re);he.byteOffset===0&&he.byteLength===he.buffer.byteLength||(he=new Uint8Array(he)),Q(null,{vectorTile:re,rawData:he.buffer})}loadData(Y,Q){var N;(N=this._pendingRequest)===null||N===void 0||N.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const X=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new s.bu(Y.request);this._pendingCallback=Q,this._pendingRequest=this.loadGeoJSON(Y,(re,he)=>{if(delete this._pendingCallback,delete this._pendingRequest,re||!he)return Q(re);if(typeof he!="object")return Q(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));{z(he,!0);try{if(Y.filter){const se=s.bC(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(se.result==="error")throw new Error(se.value.map(Ae=>`${Ae.key}: ${Ae.message}`).join(", "));he={type:"FeatureCollection",features:he.features.filter(Ae=>se.value.evaluate({zoom:0},Ae))}}this._geoJSONIndex=Y.cluster?new Ct(function({superclusterOptions:se,clusterProperties:_e}){if(!_e||!se)return se;const Ae={},Le={},Re={accumulated:null,zoom:0},ot={properties:null},dt=Object.keys(_e);for(const ut of dt){const[It,Oe]=_e[ut],$e=s.bC(Oe),tt=s.bC(typeof It=="string"?[It,["accumulated"],["get",ut]]:It);Ae[ut]=$e.value,Le[ut]=tt.value}return se.map=ut=>{ot.properties=ut;const It={};for(const Oe of dt)It[Oe]=Ae[Oe].evaluate(Re,ot);return It},se.reduce=(ut,It)=>{ot.properties=It;for(const Oe of dt)Re.accumulated=ut[Oe],ut[Oe]=Le[Oe].evaluate(Re,ot)},se}(Y)).load(he.features):function(se,_e){return new Xe(se,_e)}(he,Y.geojsonVtOptions)}catch(se){return Q(se)}this.loaded={};const pe={};if(X){const se=X.finish();se&&(pe.resourceTiming={},pe.resourceTiming[Y.source]=JSON.parse(JSON.stringify(se)))}Q(null,pe)}})}reloadTile(Y,Q){const N=this.loaded;return N&&N[Y.uid]?super.reloadTile(Y,Q):this.loadTile(Y,Q)}removeSource(Y,Q){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Q()}getClusterExpansionZoom(Y,Q){try{Q(null,this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId))}catch(N){Q(N)}}getClusterChildren(Y,Q){try{Q(null,this._geoJSONIndex.getChildren(Y.clusterId))}catch(N){Q(N)}}getClusterLeaves(Y,Q){try{Q(null,this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset))}catch(N){Q(N)}}}class mr{constructor(Y){this.self=Y,this.actor=new s.C(Y,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:D,geojson:Bt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Q,N)=>{if(this.workerSourceTypes[Q])throw new Error(`Worker source with name "${Q}" already registered.`);this.workerSourceTypes[Q]=N},this.self.registerRTLTextPlugin=Q=>{if(s.bD.isParsed())throw new Error("RTL text plugin already registered.");s.bD.applyArabicShaping=Q.applyArabicShaping,s.bD.processBidirectionalText=Q.processBidirectionalText,s.bD.processStyledBidirectionalText=Q.processStyledBidirectionalText}}setReferrer(Y,Q){this.referrer=Q}setImages(Y,Q,N){this.availableImages[Y]=Q;for(const X in this.workerSources[Y]){const re=this.workerSources[Y][X];for(const he in re)re[he].availableImages=Q}N()}setLayers(Y,Q,N){this.getLayerIndex(Y).replace(Q),N()}updateLayers(Y,Q,N){this.getLayerIndex(Y).update(Q.layers,Q.removedIds),N()}loadTile(Y,Q,N){this.getWorkerSource(Y,Q.type,Q.source).loadTile(Q,N)}loadDEMTile(Y,Q,N){this.getDEMWorkerSource(Y,Q.source).loadTile(Q,N)}reloadTile(Y,Q,N){this.getWorkerSource(Y,Q.type,Q.source).reloadTile(Q,N)}abortTile(Y,Q,N){this.getWorkerSource(Y,Q.type,Q.source).abortTile(Q,N)}removeTile(Y,Q,N){this.getWorkerSource(Y,Q.type,Q.source).removeTile(Q,N)}removeDEMTile(Y,Q){this.getDEMWorkerSource(Y,Q.source).removeTile(Q)}removeSource(Y,Q,N){if(!this.workerSources[Y]||!this.workerSources[Y][Q.type]||!this.workerSources[Y][Q.type][Q.source])return;const X=this.workerSources[Y][Q.type][Q.source];delete this.workerSources[Y][Q.type][Q.source],X.removeSource!==void 0?X.removeSource(Q,N):N()}loadWorkerSource(Y,Q,N){try{this.self.importScripts(Q.url),N()}catch(X){N(X.toString())}}syncRTLPluginState(Y,Q,N){try{s.bD.setState(Q);const X=s.bD.getPluginURL();if(s.bD.isLoaded()&&!s.bD.isParsed()&&X!=null){this.self.importScripts(X);const re=s.bD.isParsed();N(re?void 0:new Error(`RTL Text Plugin failed to import scripts from ${X}`),re)}}catch(X){N(X.toString())}}getAvailableImages(Y){let Q=this.availableImages[Y];return Q||(Q=[]),Q}getLayerIndex(Y){let Q=this.layerIndexes[Y];return Q||(Q=this.layerIndexes[Y]=new m),Q}getWorkerSource(Y,Q,N){return this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][Q]||(this.workerSources[Y][Q]={}),this.workerSources[Y][Q][N]||(this.workerSources[Y][Q][N]=new this.workerSourceTypes[Q]({send:(X,re,he)=>{this.actor.send(X,re,he,Y)}},this.getLayerIndex(Y),this.getAvailableImages(Y))),this.workerSources[Y][Q][N]}getDEMWorkerSource(Y,Q){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][Q]||(this.demWorkerSources[Y][Q]=new F),this.demWorkerSources[Y][Q]}}return s.i()&&(self.worker=new mr(self)),mr}),l(["./shared"],function(s){var m="3.6.2";class y{static testProp(a){if(!y.docStyle)return a[0];for(let d=0;d<a.length;d++)if(a[d]in y.docStyle)return a[d];return a[0]}static create(a,d,p){const v=window.document.createElement(a);return d!==void 0&&(v.className=d),p&&p.appendChild(v),v}static createNS(a,d){return window.document.createElementNS(a,d)}static disableDrag(){y.docStyle&&y.selectProp&&(y.userSelect=y.docStyle[y.selectProp],y.docStyle[y.selectProp]="none")}static enableDrag(){y.docStyle&&y.selectProp&&(y.docStyle[y.selectProp]=y.userSelect)}static setTransform(a,d){a.style[y.transformProp]=d}static addEventListener(a,d,p,v={}){a.addEventListener(d,p,"passive"in v?v:v.capture)}static removeEventListener(a,d,p,v={}){a.removeEventListener(d,p,"passive"in v?v:v.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",y.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",y.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",y.suppressClickInternal,!0)},0)}static mousePos(a,d){const p=a.getBoundingClientRect();return new s.P(d.clientX-p.left-a.clientLeft,d.clientY-p.top-a.clientTop)}static touchPos(a,d){const p=a.getBoundingClientRect(),v=[];for(let b=0;b<d.length;b++)v.push(new s.P(d[b].clientX-p.left-a.clientLeft,d[b].clientY-p.top-a.clientTop));return v}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}}y.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,y.selectProp=y.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),y.transformProp=y.testProp(["transform","WebkitTransform"]);const S={supported:!1,testSupport:function(_){!D&&I&&(F?V(_):T=_)}};let T,I,D=!1,F=!1;function V(_){const a=_.createTexture();_.bindTexture(_.TEXTURE_2D,a);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,I),_.isContextLost())return;S.supported=!0}catch{}_.deleteTexture(a),D=!0}var Z,z;typeof document<"u"&&(I=document.createElement("img"),I.onload=function(){T&&V(T),T=null,F=!0},I.onerror=function(){D=!0,T=null},I.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let a,d,p,v;_.resetRequestQueue=()=>{a=[],d=0,p=0,v={}},_.addThrottleControl=B=>{const G=p++;return v[G]=B,G},_.removeThrottleControl=B=>{delete v[B],E()},_.getImage=(B,G,W=!0)=>{S.supported&&(B.headers||(B.headers={}),B.headers.accept="image/webp,*/*");const ne={requestParameters:B,supportImageRefresh:W,callback:G,cancelled:!1,completed:!1,cancel:()=>{ne.completed||ne.cancelled||(ne.cancelled=!0,ne.innerRequest&&(ne.innerRequest.cancel(),d--),E())}};return a.push(ne),E(),ne};const b=B=>{const{requestParameters:G,supportImageRefresh:W,callback:ne}=B;return s.e(G,{type:"image"}),(W!==!1||s.i()||s.g(G.url)||G.headers&&!Object.keys(G.headers).reduce((fe,de)=>fe&&de==="accept",!0)?s.m:A)(G,(fe,de,me,le)=>{k(B,ne,fe,de,me,le)})},k=(B,G,W,ne,fe,de)=>{W?G(W):ne instanceof HTMLImageElement||s.a(ne)?G(null,ne):ne&&((me,le)=>{typeof createImageBitmap=="function"?s.b(me,le):s.d(me,le)})(ne,(me,le)=>{me!=null?G(me):le!=null&&G(null,le,{cacheControl:fe,expires:de})}),B.cancelled||(B.completed=!0,d--,E())},E=()=>{const B=(()=>{const G=Object.keys(v);let W=!1;if(G.length>0){for(const ne of G)if(W=v[ne](),W)break}return W})()?s.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let G=d;G<B&&a.length>0;G++){const W=a.shift();if(W.cancelled){G--;continue}const ne=b(W);d++,W.innerRequest=ne}},A=(B,G)=>{const W=new Image,ne=B.url;let fe=!1;const de=B.credentials;return de&&de==="include"?W.crossOrigin="use-credentials":(de&&de==="same-origin"||!s.s(ne))&&(W.crossOrigin="anonymous"),W.fetchPriority="high",W.onload=()=>{G(null,W),W.onerror=W.onload=null},W.onerror=()=>{fe||G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),W.onerror=W.onload=null},W.src=ne,{cancel:()=>{fe=!0,W.src=""}}}}(Z||(Z={})),Z.resetRequestQueue(),function(_){_.Glyphs="Glyphs",_.Image="Image",_.Source="Source",_.SpriteImage="SpriteImage",_.SpriteJSON="SpriteJSON",_.Style="Style",_.Tile="Tile",_.Unknown="Unknown"}(z||(z={}));class O{constructor(a){this._transformRequestFn=a}transformRequest(a,d){return this._transformRequestFn&&this._transformRequestFn(a,d)||{url:a}}normalizeSpriteURL(a,d,p){const v=function(b){const k=b.match(L);if(!k)throw new Error(`Unable to parse URL "${b}"`);return{protocol:k[1],authority:k[2],path:k[3]||"/",params:k[4]?k[4].split("&"):[]}}(a);return v.path+=`${d}${p}`,function(b){const k=b.params.length?`?${b.params.join("&")}`:"";return`${b.protocol}://${b.authority}${b.path}${k}`}(v)}setTransformRequest(a){this._transformRequestFn=a}}const L=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function te(_){var a=new s.A(3);return a[0]=_[0],a[1]=_[1],a[2]=_[2],a}var j,$=function(_,a,d){return _[0]=a[0]-d[0],_[1]=a[1]-d[1],_[2]=a[2]-d[2],_};j=new s.A(3),s.A!=Float32Array&&(j[0]=0,j[1]=0,j[2]=0);var J=function(_){var a=_[0],d=_[1];return a*a+d*d};function ie(_){const a=[];if(typeof _=="string")a.push({id:"default",url:_});else if(_&&_.length>0){const d=[];for(const{id:p,url:v}of _){const b=`${p}${v}`;d.indexOf(b)===-1&&(d.push(b),a.push({id:p,url:v}))}}return a}function xe(_,a,d,p,v){if(p)return void _(p);if(v!==Object.values(a).length||v!==Object.values(d).length)return;const b={};for(const k in a){b[k]={};const E=s.h.getImageCanvasContext(d[k]),A=a[k];for(const B in A){const{width:G,height:W,x:ne,y:fe,sdf:de,pixelRatio:me,stretchX:le,stretchY:Ie,content:Ue}=A[B];b[k][B]={data:null,pixelRatio:me,sdf:de,stretchX:le,stretchY:Ie,content:Ue,spriteData:{width:G,height:W,x:ne,y:fe,context:E}}}}_(null,b)}(function(){var _=new s.A(2);s.A!=Float32Array&&(_[0]=0,_[1]=0)})();class ge{constructor(a,d,p,v){this.context=a,this.format=p,this.texture=a.gl.createTexture(),this.update(d,v)}update(a,d,p){const{width:v,height:b}=a,k=!(this.size&&this.size[0]===v&&this.size[1]===b||p),{context:E}=this,{gl:A}=E;if(this.useMipmap=!!(d&&d.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!d||d.premultiply!==!1)),k)this.size=[v,b],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||s.a(a)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,a):A.texImage2D(A.TEXTURE_2D,0,this.format,v,b,0,this.format,A.UNSIGNED_BYTE,a.data);else{const{x:B,y:G}=p||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||s.a(a)?A.texSubImage2D(A.TEXTURE_2D,0,B,G,A.RGBA,A.UNSIGNED_BYTE,a):A.texSubImage2D(A.TEXTURE_2D,0,B,G,v,b,A.RGBA,A.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D)}bind(a,d,p){const{context:v}=this,{gl:b}=v;b.bindTexture(b.TEXTURE_2D,this.texture),p!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=b.LINEAR),a!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,p||a),this.filter=a),d!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,d),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function we(_){const{userImage:a}=_;return!!(a&&a.render&&a.render())&&(_.data.replace(new Uint8Array(a.data.buffer)),!0)}class Te extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:d,callback:p}of this.requestors)this._notify(d,p);this.requestors=[]}}getImage(a){const d=this.images[a];if(d&&!d.data&&d.spriteData){const p=d.spriteData;d.data=new s.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),d.spriteData=null}return d}addImage(a,d){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,d)&&(this.images[a]=d)}_validate(a,d){let p=!0;const v=d.data||d.spriteData;return this._validateStretch(d.stretchX,v&&v.width)||(this.fire(new s.j(new Error(`Image "${a}" has invalid "stretchX" value`))),p=!1),this._validateStretch(d.stretchY,v&&v.height)||(this.fire(new s.j(new Error(`Image "${a}" has invalid "stretchY" value`))),p=!1),this._validateContent(d.content,d)||(this.fire(new s.j(new Error(`Image "${a}" has invalid "content" value`))),p=!1),p}_validateStretch(a,d){if(!a)return!0;let p=0;for(const v of a){if(v[0]<p||v[1]<v[0]||d<v[1])return!1;p=v[1]}return!0}_validateContent(a,d){if(!a)return!0;if(a.length!==4)return!1;const p=d.spriteData,v=p&&p.width||d.data.width,b=p&&p.height||d.data.height;return!(a[0]<0||v<a[0]||a[1]<0||b<a[1]||a[2]<0||v<a[2]||a[3]<0||b<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,d,p=!0){const v=this.getImage(a);if(p&&(v.data.width!==d.data.width||v.data.height!==d.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=v.version+1,this.images[a]=d,this.updatedImages[a]=!0}removeImage(a){const d=this.images[a];delete this.images[a],delete this.patterns[a],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a,d){let p=!0;if(!this.isLoaded())for(const v of a)this.images[v]||(p=!1);this.isLoaded()||p?this._notify(a,d):this.requestors.push({ids:a,callback:d})}_notify(a,d){const p={};for(const v of a){let b=this.getImage(v);b||(this.fire(new s.k("styleimagemissing",{id:v})),b=this.getImage(v)),b?p[v]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:s.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,p)}getPixelSize(){const{width:a,height:d}=this.atlasImage;return{width:a,height:d}}getPattern(a){const d=this.patterns[a],p=this.getImage(a);if(!p)return null;if(d&&d.position.version===p.version)return d.position;if(d)d.position.version=p.version;else{const v={w:p.data.width+2,h:p.data.height+2,x:0,y:0},b=new s.I(v,p);this.patterns[a]={bin:v,position:b}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const d=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ge(a,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const b in this.patterns)a.push(this.patterns[b].bin);const{w:d,h:p}=s.p(a),v=this.atlasImage;v.resize({width:d||1,height:p||1});for(const b in this.patterns){const{bin:k}=this.patterns[b],E=k.x+1,A=k.y+1,B=this.getImage(b).data,G=B.width,W=B.height;s.R.copy(B,v,{x:0,y:0},{x:E,y:A},{width:G,height:W}),s.R.copy(B,v,{x:0,y:W-1},{x:E,y:A-1},{width:G,height:1}),s.R.copy(B,v,{x:0,y:0},{x:E,y:A+W},{width:G,height:1}),s.R.copy(B,v,{x:G-1,y:0},{x:E-1,y:A},{width:1,height:W}),s.R.copy(B,v,{x:0,y:0},{x:E+G,y:A},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const d of a){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const p=this.getImage(d);p||s.w(`Image with ID: "${d}" was not found`),we(p)&&this.updateImage(d,p)}}}const Pe=1e20;function We(_,a,d,p,v,b,k,E,A){for(let B=a;B<a+p;B++)De(_,d*b+B,b,v,k,E,A);for(let B=d;B<d+v;B++)De(_,B*b+a,1,p,k,E,A)}function De(_,a,d,p,v,b,k){b[0]=0,k[0]=-Pe,k[1]=Pe,v[0]=_[a];for(let E=1,A=0,B=0;E<p;E++){v[E]=_[a+E*d];const G=E*E;do{const W=b[A];B=(v[E]-v[W]+G-W*W)/(E-W)/2}while(B<=k[A]&&--A>-1);A++,b[A]=E,k[A]=B,k[A+1]=Pe}for(let E=0,A=0;E<p;E++){for(;k[A+1]<E;)A++;const B=b[A],G=E-B;_[a+E*d]=v[B]+G*G}}class Se{constructor(a,d){this.requestManager=a,this.localIdeographFontFamily=d,this.entries={}}setURL(a){this.url=a}getGlyphs(a,d){const p=[];for(const v in a)for(const b of a[v])p.push({stack:v,id:b});s.o(p,({stack:v,id:b},k)=>{let E=this.entries[v];E||(E=this.entries[v]={glyphs:{},requests:{},ranges:{}});let A=E.glyphs[b];if(A!==void 0)return void k(null,{stack:v,id:b,glyph:A});if(A=this._tinySDF(E,v,b),A)return E.glyphs[b]=A,void k(null,{stack:v,id:b,glyph:A});const B=Math.floor(b/256);if(256*B>65535)return void k(new Error("glyphs > 65535 not supported"));if(E.ranges[B])return void k(null,{stack:v,id:b,glyph:A});if(!this.url)return void k(new Error("glyphsUrl is not set"));let G=E.requests[B];G||(G=E.requests[B]=[],Se.loadGlyphRange(v,B,this.url,this.requestManager,(W,ne)=>{if(ne){for(const fe in ne)this._doesCharSupportLocalGlyph(+fe)||(E.glyphs[+fe]=ne[+fe]);E.ranges[B]=!0}for(const fe of G)fe(W,ne);delete E.requests[B]})),G.push((W,ne)=>{W?k(W):ne&&k(null,{stack:v,id:b,glyph:ne[b]||null})})},(v,b)=>{if(v)d(v);else if(b){const k={};for(const{stack:E,id:A,glyph:B}of b)(k[E]||(k[E]={}))[A]=B&&{id:B.id,bitmap:B.bitmap.clone(),metrics:B.metrics};d(null,k)}})}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&(s.u["CJK Unified Ideographs"](a)||s.u["Hangul Syllables"](a)||s.u.Hiragana(a)||s.u.Katakana(a))}_tinySDF(a,d,p){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(p))return;let b=a.tinySDF;if(!b){let E="400";/bold/i.test(d)?E="900":/medium/i.test(d)?E="500":/light/i.test(d)&&(E="200"),b=a.tinySDF=new Se.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:v,fontWeight:E})}const k=b.draw(String.fromCharCode(p));return{id:p,bitmap:new s.q({width:k.width||60,height:k.height||60},k.data),metrics:{width:k.glyphWidth/2||24,height:k.glyphHeight/2||24,left:k.glyphLeft/2+.5||0,top:k.glyphTop/2-27.5||-8,advance:k.glyphAdvance/2||24,isDoubleResolution:!0}}}}Se.loadGlyphRange=function(_,a,d,p,v){const b=256*a,k=b+255,E=p.transformRequest(d.replace("{fontstack}",_).replace("{range}",`${b}-${k}`),z.Glyphs);s.l(E,(A,B)=>{if(A)v(A);else if(B){const G={};for(const W of s.n(B))G[W.id]=W;v(null,G)}})},Se.TinySDF=class{constructor({fontSize:_=24,buffer:a=3,radius:d=8,cutoff:p=.25,fontFamily:v="sans-serif",fontWeight:b="normal",fontStyle:k="normal"}={}){this.buffer=a,this.cutoff=p,this.radius=d;const E=this.size=_+4*a,A=this._createCanvas(E),B=this.ctx=A.getContext("2d",{willReadFrequently:!0});B.font=`${k} ${b} ${_}px ${v}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(_){const a=document.createElement("canvas");return a.width=a.height=_,a}draw(_){const{width:a,actualBoundingBoxAscent:d,actualBoundingBoxDescent:p,actualBoundingBoxLeft:v,actualBoundingBoxRight:b}=this.ctx.measureText(_),k=Math.ceil(d),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-v))),A=Math.min(this.size-this.buffer,k+Math.ceil(p)),B=E+2*this.buffer,G=A+2*this.buffer,W=Math.max(B*G,0),ne=new Uint8ClampedArray(W),fe={data:ne,width:B,height:G,glyphWidth:E,glyphHeight:A,glyphTop:k,glyphLeft:0,glyphAdvance:a};if(E===0||A===0)return fe;const{ctx:de,buffer:me,gridInner:le,gridOuter:Ie}=this;de.clearRect(me,me,E,A),de.fillText(_,me,me+k);const Ue=de.getImageData(me,me,E,A);Ie.fill(Pe,0,W),le.fill(0,0,W);for(let ye=0;ye<A;ye++)for(let Me=0;Me<E;Me++){const qe=Ue.data[4*(ye*E+Me)+3]/255;if(qe===0)continue;const Ke=(ye+me)*B+Me+me;if(qe===1)Ie[Ke]=0,le[Ke]=Pe;else{const Je=.5-qe;Ie[Ke]=Je>0?Je*Je:0,le[Ke]=Je<0?Je*Je:0}}We(Ie,0,0,B,G,B,this.f,this.v,this.z),We(le,me,me,E,A,B,this.f,this.v,this.z);for(let ye=0;ye<W;ye++){const Me=Math.sqrt(Ie[ye])-Math.sqrt(le[ye]);ne[ye]=Math.round(255-255*(Me/this.radius+this.cutoff))}return fe}};class Fe{constructor(){this.specification=s.v.light.position}possiblyEvaluate(a,d){return s.z(a.expression.evaluate(d))}interpolate(a,d,p){return{x:s.B.number(a.x,d.x,p),y:s.B.number(a.y,d.y,p),z:s.B.number(a.z,d.z,p)}}}let Ce;class Ne extends s.E{constructor(a){super(),Ce=Ce||new s.r({anchor:new s.D(s.v.light.anchor),position:new Fe,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(Ce),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,d={}){if(!this._validate(s.t,a,d))for(const p in a){const v=a[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),v):this._transitionable.setValue(p,v)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,p){return(!p||p.validate!==!1)&&s.x(this,a.call(s.y,s.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}}class Ye{constructor(a,d){this.width=a,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,d){const p=a.join(",")+String(d);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(a,d)),this.dashEntry[p]}getDashRanges(a,d,p){const v=[];let b=a.length%2==1?-a[a.length-1]*p:0,k=a[0]*p,E=!0;v.push({left:b,right:k,isDash:E,zeroLength:a[0]===0});let A=a[0];for(let B=1;B<a.length;B++){E=!E;const G=a[B];b=A*p,A+=G,k=A*p,v.push({left:b,right:k,isDash:E,zeroLength:G===0})}return v}addRoundDash(a,d,p){const v=d/2;for(let b=-p;b<=p;b++){const k=this.width*(this.nextRow+p+b);let E=0,A=a[E];for(let B=0;B<this.width;B++){B/A.right>1&&(A=a[++E]);const G=Math.abs(B-A.left),W=Math.abs(B-A.right),ne=Math.min(G,W);let fe;const de=b/p*(v+1);if(A.isDash){const me=v-Math.abs(de);fe=Math.sqrt(ne*ne+me*me)}else fe=v-Math.sqrt(ne*ne+de*de);this.data[k+B]=Math.max(0,Math.min(255,fe+128))}}}addRegularDash(a){for(let E=a.length-1;E>=0;--E){const A=a[E],B=a[E+1];A.zeroLength?a.splice(E,1):B&&B.isDash===A.isDash&&(B.left=A.left,a.splice(E,1))}const d=a[0],p=a[a.length-1];d.isDash===p.isDash&&(d.left=p.left-this.width,p.right=d.right+this.width);const v=this.width*this.nextRow;let b=0,k=a[b];for(let E=0;E<this.width;E++){E/k.right>1&&(k=a[++b]);const A=Math.abs(E-k.left),B=Math.abs(E-k.right),G=Math.min(A,B);this.data[v+E]=Math.max(0,Math.min(255,(k.isDash?G:-G)+128))}}addDash(a,d){const p=d?7:0,v=2*p+1;if(this.nextRow+v>this.height)return s.w("LineAtlas out of space"),null;let b=0;for(let E=0;E<a.length;E++)b+=a[E];if(b!==0){const E=this.width/b,A=this.getDashRanges(a,this.width,E);d?this.addRoundDash(A,E,p):this.addRegularDash(A)}const k={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:b};return this.nextRow+=v,this.dirty=!0,k}bind(a){const d=a.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}class at{constructor(a,d,p){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=p;const v=this.workerPool.acquire(p);for(let b=0;b<v.length;b++){const k=new s.C(v[b],d,p);k.name=`Worker ${b}`,this.actors.push(k)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,d,p){s.o(this.actors,(v,b)=>{v.send(a,d,b)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],a&&this.workerPool.release(this.id)}}function st(_,a,d){const p=function(v,b){if(v)return d(v);if(b){const k=s.F(s.e(b,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);b.vector_layers&&(k.vectorLayers=b.vector_layers,k.vectorLayerIds=k.vectorLayers.map(E=>E.id)),d(null,k)}};return _.url?s.f(a.transformRequest(_.url,z.Source),p):s.h.frame(()=>p(null,_))}class Dt{constructor(a,d){a&&(d?this.setSouthWest(a).setNorthEast(d):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof s.L?new s.L(a.lng,a.lat):s.L.convert(a),this}setSouthWest(a){return this._sw=a instanceof s.L?new s.L(a.lng,a.lat):s.L.convert(a),this}extend(a){const d=this._sw,p=this._ne;let v,b;if(a instanceof s.L)v=a,b=a;else{if(!(a instanceof Dt))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Dt.convert(a)):this.extend(s.L.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(s.L.convert(a)):this;if(v=a._sw,b=a._ne,!v||!b)return this}return d||p?(d.lng=Math.min(v.lng,d.lng),d.lat=Math.min(v.lat,d.lat),p.lng=Math.max(b.lng,p.lng),p.lat=Math.max(b.lat,p.lat)):(this._sw=new s.L(v.lng,v.lat),this._ne=new s.L(b.lng,b.lat)),this}getCenter(){return new s.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.L(this.getWest(),this.getNorth())}getSouthEast(){return new s.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:d,lat:p}=s.L.convert(a);let v=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&v}static convert(a){return a instanceof Dt?a:a&&new Dt(a)}static fromLngLat(a,d=0){const p=360*d/40075017,v=p/Math.cos(Math.PI/180*a.lat);return new Dt(new s.L(a.lng-v,a.lat-p),new s.L(a.lng+v,a.lat+p))}}class St{constructor(a,d,p){this.bounds=Dt.convert(this.validateBounds(a)),this.minzoom=d||0,this.maxzoom=p||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const d=Math.pow(2,a.z),p=Math.floor(s.G(this.bounds.getWest())*d),v=Math.floor(s.H(this.bounds.getNorth())*d),b=Math.ceil(s.G(this.bounds.getEast())*d),k=Math.ceil(s.H(this.bounds.getSouth())*d);return a.x>=p&&a.x<b&&a.y>=v&&a.y<k}}class $t extends s.E{constructor(a,d,p,v){if(super(),this.load=()=>{this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=st(this._options,this.map._requestManager,(b,k)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),b?this.fire(new s.j(b)):k&&(s.e(this,k),k.bounds&&(this.tileBounds=new St(k.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>s.e({},this._options),this.id=a,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.F(d,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}setUrl(a){return this.setSourceProperty(()=>{this.url=a,this._options.url=a}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(a,d){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(p,z.Tile),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function b(k,E){return delete a.request,a.aborted?d(null):k&&k.status!==404?d(k):(E&&E.resourceTiming&&(a.resourceTiming=E.resourceTiming),this.map._refreshExpiredTiles&&E&&a.setExpiryData(E),a.loadVectorData(E,this.map.painter),d(null),void(a.reloadCallback&&(this.loadTile(a,a.reloadCallback),a.reloadCallback=null)))}v.request.collectResourceTiming=this._collectResourceTiming,a.actor&&a.state!=="expired"?a.state==="loading"?a.reloadCallback=d:a.request=a.actor.send("reloadTile",v,b.bind(this)):(a.actor=this.dispatcher.getActor(),a.request=a.actor.send("loadTile",v,b.bind(this)))}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.actor&&a.actor.send("abortTile",{uid:a.uid,type:this.type,source:this.id},void 0)}unloadTile(a){a.unloadVectorData(),a.actor&&a.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ct extends s.E{constructor(a,d,p,v){super(),this.id=a,this.dispatcher=p,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},d),s.e(this,s.F(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=st(this._options,this.map._requestManager,(a,d)=>{this._tileJSONRequest=null,this._loaded=!0,a?this.fire(new s.j(a)):d&&(s.e(this,d),d.bounds&&(this.tileBounds=new St(d.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.cancel(),a(),this.load()}setTiles(a){return this.setSourceProperty(()=>{this._options.tiles=a}),this}serialize(){return s.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a,d){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.request=Z.getImage(this.map._requestManager.transformRequest(p,z.Tile),(v,b,k)=>{if(delete a.request,a.aborted)a.state="unloaded",d(null);else if(v)a.state="errored",d(v);else if(b){this.map._refreshExpiredTiles&&k&&a.setExpiryData(k);const E=this.map.painter.context,A=E.gl;a.texture=this.map.painter.getTileTexture(b.width),a.texture?a.texture.update(b,{useMipmap:!0}):(a.texture=new ge(E,b,A.RGBA,{useMipmap:!0}),a.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE,A.LINEAR_MIPMAP_NEAREST),E.extTextureFilterAnisotropic&&A.texParameterf(A.TEXTURE_2D,E.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,E.extTextureFilterAnisotropicMax)),a.state="loaded",d(null)}},this.map._refreshExpiredTiles)}abortTile(a,d){a.request&&(a.request.cancel(),delete a.request),d()}unloadTile(a,d){a.texture&&this.map.painter.saveTileTexture(a.texture),d()}hasTransition(){return!1}}class it extends Ct{constructor(a,d,p,v){super(a,d,p,v),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(a,d){const p=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(p,z.Tile);function b(k,E){k&&(a.state="errored",d(k)),E&&(a.dem=E,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded",d(null))}a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.request=Z.getImage(v,(k,E,A)=>s._(this,void 0,void 0,function*(){if(delete a.request,a.aborted)a.state="unloaded",d(null);else if(k)a.state="errored",d(k);else if(E){this.map._refreshExpiredTiles&&a.setExpiryData(A);const B=s.a(E)&&s.J()?E:yield function(W){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&s.K()){const ne=W.width+2,fe=W.height+2;try{return new s.R({width:ne,height:fe},yield s.M(W,-1,-1,ne,fe))}catch{}}return s.h.getImageData(W,1)})}(E),G={uid:a.uid,coord:a.tileID,source:this.id,rawImageData:B,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};a.actor&&a.state!=="expired"||(a.actor=this.dispatcher.getActor(),a.actor.send("loadDEMTile",G,b))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(a){const d=a.canonical,p=Math.pow(2,d.z),v=(d.x-1+p)%p,b=d.x===0?a.wrap-1:a.wrap,k=(d.x+1+p)%p,E=d.x+1===p?a.wrap+1:a.wrap,A={};return A[new s.O(a.overscaledZ,b,d.z,v,d.y).key]={backfilled:!1},A[new s.O(a.overscaledZ,E,d.z,k,d.y).key]={backfilled:!1},d.y>0&&(A[new s.O(a.overscaledZ,b,d.z,v,d.y-1).key]={backfilled:!1},A[new s.O(a.overscaledZ,a.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},A[new s.O(a.overscaledZ,E,d.z,k,d.y-1).key]={backfilled:!1}),d.y+1<p&&(A[new s.O(a.overscaledZ,b,d.z,v,d.y+1).key]={backfilled:!1},A[new s.O(a.overscaledZ,a.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},A[new s.O(a.overscaledZ,E,d.z,k,d.y+1).key]={backfilled:!1}),A}unloadTile(a){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&a.actor.send("removeDEMTile",{uid:a.uid,source:this.id})}}class Ze extends s.E{constructor(a,d,p,v){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>s.e({},this._options,{type:this.type,data:this._data}),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(v),this._data=d.data,this._options=s.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const b=s.N/this.tileSize;this.workerOptions=s.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*b,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*b,extent:s.N,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:s.N,radius:(d.clusterRadius||50)*b,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=a.clusterRadius),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:a,source:this.id},d),this}getClusterChildren(a,d){return this.actor.send("geojson.getClusterChildren",{clusterId:a,source:this.id},d),this}getClusterLeaves(a,d,p,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:a,limit:d,offset:p},v),this}_updateWorkerData(a){const d=s.e({},this.workerOptions);a?d.dataDiff=a:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(s.h.resolveURL(this._data),z.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,d,(p,v)=>{if(this._pendingLoads--,this._removed||v&&v.abandoned)return void this.fire(new s.k("dataabort",{dataType:"source"}));let b=null;if(v&&v.resourceTiming&&v.resourceTiming[this.id]&&(b=v.resourceTiming[this.id].slice(0)),p)return void this.fire(new s.j(p));const k={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&s.e(k,{resourceTiming:b}),this.fire(new s.k("data",Object.assign(Object.assign({},k),{sourceDataType:"metadata"}))),this.fire(new s.k("data",Object.assign(Object.assign({},k),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(a,d){const p=a.actor?"reloadTile":"loadTile";a.actor=this.actor;const v={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};a.request=this.actor.send(p,v,(b,k)=>(delete a.request,a.unloadVectorData(),a.aborted?d(null):b?d(b):(a.loadVectorData(k,this.map.painter,p==="reloadTile"),d(null))))}abortTile(a){a.request&&(a.request.cancel(),delete a.request),a.aborted=!0}unloadTile(a){a.unloadVectorData(),this.actor.send("removeTile",{uid:a.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var rt=s.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class pt extends s.E{constructor(a,d,p,v){super(),this.load=(b,k)=>{this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=Z.getImage(this.map._requestManager.transformRequest(this.url,z.Image),(E,A)=>{this._request=null,this._loaded=!0,E?this.fire(new s.j(E)):A&&(this.image=A,b&&(this.coordinates=b),k&&k(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const b=this.map.painter.context,k=b.gl;this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=s.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ge(b,this.image,k.RGBA),this.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE));let E=!1;for(const A in this.tiles){const B=this.tiles[A];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,E=!0)}E&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=a,this.dispatcher=p,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=d}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=a.url,this.load(a.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(a){this.coordinates=a;const d=a.map(s.U.fromLngLat);this.tileID=function(v){let b=1/0,k=1/0,E=-1/0,A=-1/0;for(const ne of v)b=Math.min(b,ne.x),k=Math.min(k,ne.y),E=Math.max(E,ne.x),A=Math.max(A,ne.y);const B=Math.max(E-b,A-k),G=Math.max(0,Math.floor(-Math.log(B)/Math.LN2)),W=Math.pow(2,G);return new s.W(G,Math.floor((b+E)/2*W),Math.floor((k+A)/2*W))}(d),this.minzoom=this.maxzoom=this.tileID.z;const p=d.map(v=>this.tileID.getTilePoint(v)._round());return this._boundsArray=new s.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,s.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,s.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,s.N,s.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(a,d){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={},d(null)):(a.state="errored",d(null))}hasTransition(){return!1}}class sr extends pt{constructor(a,d,p,v){super(a,d,p,v),this.load=()=>{this._loaded=!1;const b=this.options;this.urls=[];for(const k of b.urls)this.urls.push(this.map._requestManager.transformRequest(k,z.Source).url);s.X(this.urls,(k,E)=>{this._loaded=!0,k?this.fire(new s.j(k)):E&&(this.video=E,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const b=this.map.painter.context,k=b.gl;this.boundsBuffer||(this.boundsBuffer=b.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=s.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE),k.texSubImage2D(k.TEXTURE_2D,0,0,0,k.RGBA,k.UNSIGNED_BYTE,this.video)):(this.texture=new ge(b,this.video,k.RGBA),this.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE));let E=!1;for(const A in this.tiles){const B=this.tiles[A];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,E=!0)}E&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=d}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const d=this.video.seekable;a<d.start(0)||a>d.end(0)?this.fire(new s.j(new s.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class rr extends pt{constructor(a,d,p,v){super(a,d,p,v),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let b=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,b=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,b=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const k=this.map.painter.context,E=k.gl;this.boundsBuffer||(this.boundsBuffer=k.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=s.S.simpleSegment(0,0,4,2)),this.texture?(b||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ge(k,this.canvas,E.RGBA,{premultiply:!0});let A=!1;for(const B in this.tiles){const G=this.tiles[B];G.state!=="loaded"&&(G.state="loaded",G.texture=this.texture,A=!0)}A&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(k=>typeof k!="number"))||this.fire(new s.j(new s.Y(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.j(new s.Y(`sources.${a}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new s.j(new s.Y(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new s.j(new s.Y(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.j(new s.Y(`sources.${a}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const wr={},Lr=_=>{switch(_){case"geojson":return Ze;case"image":return pt;case"raster":return Ct;case"raster-dem":return it;case"vector":return $t;case"video":return sr;case"canvas":return rr}return wr[_]};function nr(_,a){const d=s.Z();return s.$(d,d,[1,1,0]),s.a0(d,d,[.5*_.width,.5*_.height,1]),s.a1(d,d,_.calculatePosMatrix(a.toUnwrapped()))}function Et(_,a,d,p,v,b){const k=function(W,ne,fe){if(W)for(const de of W){const me=ne[de];if(me&&me.source===fe&&me.type==="fill-extrusion")return!0}else for(const de in ne){const me=ne[de];if(me.source===fe&&me.type==="fill-extrusion")return!0}return!1}(v&&v.layers,a,_.id),E=b.maxPitchScaleFactor(),A=_.tilesIn(p,E,k);A.sort(hr);const B=[];for(const W of A)B.push({wrappedTileID:W.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(a,d,_._state,W.queryGeometry,W.cameraQueryGeometry,W.scale,v,b,E,nr(_.transform,W.tileID))});const G=function(W){const ne={},fe={};for(const de of W){const me=de.queryResults,le=de.wrappedTileID,Ie=fe[le]=fe[le]||{};for(const Ue in me){const ye=me[Ue],Me=Ie[Ue]=Ie[Ue]||{},qe=ne[Ue]=ne[Ue]||[];for(const Ke of ye)Me[Ke.featureIndex]||(Me[Ke.featureIndex]=!0,qe.push(Ke))}}return ne}(B);for(const W in G)G[W].forEach(ne=>{const fe=ne.feature,de=_.getFeatureState(fe.layer["source-layer"],fe.id);fe.source=fe.layer.source,fe.layer["source-layer"]&&(fe.sourceLayer=fe.layer["source-layer"]),fe.state=de});return G}function hr(_,a){const d=_.tileID,p=a.tileID;return d.overscaledZ-p.overscaledZ||d.canonical.y-p.canonical.y||d.wrap-p.wrap||d.canonical.x-p.canonical.x}class Gt{constructor(a,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=s.a2(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const d=a+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,d,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(v,b){const k={};if(!b)return k;for(const E of v){const A=E.layerIds.map(B=>b.getLayer(B)).filter(Boolean);if(A.length!==0){E.layers=A,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(B=>A.filter(G=>G.id===B)[0]));for(const B of A)k[B.id]=E}}return k}(a.buckets,d.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const b=this.buckets[v];if(b instanceof s.a4){if(this.hasSymbolBuckets=!0,!p)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const b=this.buckets[v];if(b instanceof s.a4&&b.hasRTLText){this.hasRTLText=!0,s.a5();break}}this.queryPadding=0;for(const v in this.buckets){const b=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(v).queryRadius(b))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new s.a3}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const p in this.buckets){const v=this.buckets[p];v.uploadPending()&&v.upload(a)}const d=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ge(a,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ge(a,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,d,p,v,b,k,E,A,B,G){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:b,scale:k,tileSize:this.tileSize,pixelPosMatrix:G,transform:A,params:E,queryPadding:this.queryPadding*B},a,d,p):{}}querySourceFeatures(a,d){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const v=p.loadVTLayers(),b=d&&d.sourceLayer?d.sourceLayer:"",k=v._geojsonTileLayer||v[b];if(!k)return;const E=s.a6(d&&d.filter),{z:A,x:B,y:G}=this.tileID.canonical,W={z:A,x:B,y:G};for(let ne=0;ne<k.length;ne++){const fe=k.feature(ne);if(E.needGeometry){const le=s.a7(fe,!0);if(!E.filter(new s.a8(this.tileID.overscaledZ),le,this.tileID.canonical))continue}else if(!E.filter(new s.a8(this.tileID.overscaledZ),fe))continue;const de=p.getId(fe,b),me=new s.a9(fe,A,B,G,de);me.tile=W,a.push(me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const d=this.expirationTime;if(a.cacheControl){const p=s.aa(a.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const p=Date.now();let v=!1;if(this.expirationTime>p)v=!1;else if(d)if(this.expirationTime<d)v=!0;else{const b=this.expirationTime-d;b?this.expirationTime=p+Math.max(b,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!d.style.hasLayer(v))continue;const b=this.buckets[v],k=b.layers[0].sourceLayer||"_geojsonTileLayer",E=p[k],A=a[k];if(!E||!A||Object.keys(A).length===0)continue;b.update(A,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});const B=d&&d.style&&d.style.getLayer(v);B&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<s.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=s.h.now()+a}setDependencies(a,d){const p={};for(const v of d)p[v]=!0;this.dependencies[a]=p}hasDependency(a,d){for(const p of a){const v=this.dependencies[p];if(v){for(const b of d)if(v[b])return!0}}return!1}}class Dr{constructor(a,d){this.max=a,this.onRemove=d,this.reset()}reset(){for(const a in this.data)for(const d of this.data[a])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(a,d,p){const v=a.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const b={value:d,timeout:void 0};if(p!==void 0&&(b.timeout=setTimeout(()=>{this.remove(a,b)},p)),this.data[v].push(b),this.order.push(v),this.order.length>this.max){const k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const d=this.data[a].shift();return d.timeout&&clearTimeout(d.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),d.value}getByKey(a){const d=this.data[a];return d?d[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,d){if(!this.has(a))return this;const p=a.wrapped().key,v=d===void 0?0:this.data[p].indexOf(d),b=this.data[p][v];return this.data[p].splice(v,1),b.timeout&&clearTimeout(b.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(b.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(a){const d=[];for(const p in this.data)for(const v of this.data[p])a(v.value)||d.push(v);for(const p of d)this.remove(p.value.tileID,p)}}class He{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,d,p){const v=String(d);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][v]=this.stateChanges[a][v]||{},s.e(this.stateChanges[a][v],p),this.deletedStates[a]===null){this.deletedStates[a]={};for(const b in this.state[a])b!==v&&(this.deletedStates[a][b]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][v]===null){this.deletedStates[a][v]={};for(const b in this.state[a][v])p[b]||(this.deletedStates[a][v][b]=null)}else for(const b in p)this.deletedStates[a]&&this.deletedStates[a][v]&&this.deletedStates[a][v][b]===null&&delete this.deletedStates[a][v][b]}removeFeatureState(a,d,p){if(this.deletedStates[a]===null)return;const v=String(d);if(this.deletedStates[a]=this.deletedStates[a]||{},p&&d!==void 0)this.deletedStates[a][v]!==null&&(this.deletedStates[a][v]=this.deletedStates[a][v]||{},this.deletedStates[a][v][p]=null);else if(d!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][v])for(p in this.deletedStates[a][v]={},this.stateChanges[a][v])this.deletedStates[a][v][p]=null;else this.deletedStates[a][v]=null;else this.deletedStates[a]=null}getState(a,d){const p=String(d),v=s.e({},(this.state[a]||{})[p],(this.stateChanges[a]||{})[p]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const b=this.deletedStates[a][d];if(b===null)return{};for(const k in b)delete v[k]}return v}initializeTileState(a,d){a.setFeatureState(this.state,d)}coalesceChanges(a,d){const p={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const b={};for(const k in this.stateChanges[v])this.state[v][k]||(this.state[v][k]={}),s.e(this.state[v][k],this.stateChanges[v][k]),b[k]=this.state[v][k];p[v]=b}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const b={};if(this.deletedStates[v]===null)for(const k in this.state[v])b[k]={},this.state[v][k]={};else for(const k in this.deletedStates[v]){if(this.deletedStates[v][k]===null)this.state[v][k]={};else for(const E of Object.keys(this.deletedStates[v][k]))delete this.state[v][k][E];b[k]=this.state[v][k]}p[v]=p[v]||{},s.e(p[v],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const v in a)a[v].setFeatureState(p,d)}}class xr extends s.E{constructor(a,d,p){super(),this.id=a,this.dispatcher=p,this.on("data",v=>{v.dataType==="source"&&v.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&v.dataType==="source"&&v.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((v,b,k,E)=>{const A=new(Lr(b.type))(v,b,k,E);if(A.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${A.id}`);return A})(a,d,p,this),this._tiles={},this._cache=new Dr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new He,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a in this._tiles){const d=this._tiles[a];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,d){return this._source.loadTile(a,d)}_unloadTile(a){if(this._source.unloadTile)return this._source.unloadTile(a,()=>{})}_abortTile(a){this._source.abortTile&&this._source.abortTile(a,()=>{}),this._source.fire(new s.k("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const p=this._tiles[d];p.upload(a),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(a=>a.tileID).sort(Tr).map(a=>a.key)}getRenderableIds(a){const d=[];for(const p in this._tiles)this._isIdRenderable(p,a)&&d.push(this._tiles[p]);return a?d.sort((p,v)=>{const b=p.tileID,k=v.tileID,E=new s.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle),A=new s.P(k.canonical.x,k.canonical.y)._rotate(this.transform.angle);return b.overscaledZ-k.overscaledZ||A.y-E.y||A.x-E.x}).map(p=>p.tileID.key):d.map(p=>p.tileID).sort(Tr).map(p=>p.key)}hasRenderableParent(a){const d=this.findLoadedParent(a,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(a,d){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(d||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")}}_reloadTile(a,d){const p=this._tiles[a];p&&(p.state!=="loading"&&(p.state=d),this._loadTile(p,this._tileLoaded.bind(this,p,a,d)))}_tileLoaded(a,d,p,v){if(v)return a.state="errored",void(v.status!==404?this._source.fire(new s.j(v,{tile:a})):this.update(this.transform,this.terrain));a.timeAdded=s.h.now(),p==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(d,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new s.k("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const d=this.getRenderableIds();for(let v=0;v<d.length;v++){const b=d[v];if(a.neighboringTiles&&a.neighboringTiles[b]){const k=this.getTileByID(b);p(a,k),p(k,a)}}function p(v,b){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let k=b.tileID.canonical.x-v.tileID.canonical.x;const E=b.tileID.canonical.y-v.tileID.canonical.y,A=Math.pow(2,v.tileID.canonical.z),B=b.tileID.key;k===0&&E===0||Math.abs(E)>1||(Math.abs(k)>1&&(Math.abs(k+A)===1?k+=A:Math.abs(k-A)===1&&(k-=A)),b.dem&&v.dem&&(v.dem.backfillBorder(b.dem,k,E),v.neighboringTiles&&v.neighboringTiles[B]&&(v.neighboringTiles[B].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,d,p,v){for(const b in this._tiles){let k=this._tiles[b];if(v[b]||!k.hasData()||k.tileID.overscaledZ<=d||k.tileID.overscaledZ>p)continue;let E=k.tileID;for(;k&&k.tileID.overscaledZ>d+1;){const B=k.tileID.scaledTo(k.tileID.overscaledZ-1);k=this._tiles[B.key],k&&k.hasData()&&(E=B)}let A=E;for(;A.overscaledZ>d;)if(A=A.scaledTo(A.overscaledZ-1),a[A.key]){v[E.key]=E;break}}}findLoadedParent(a,d){if(a.key in this._loadedParentTiles){const p=this._loadedParentTiles[a.key];return p&&p.tileID.overscaledZ>=d?p:null}for(let p=a.overscaledZ-1;p>=d;p--){const v=a.scaledTo(p),b=this._getLoadedTile(v);if(b)return b}}_getLoadedTile(a){const d=this._tiles[a.key];return d&&d.hasData()?d:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const d=Math.ceil(a.width/this._source.tileSize)+1,p=Math.ceil(a.height/this._source.tileSize)+1,v=Math.floor(d*p*(this._maxTileCacheZoomLevels===null?s.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(b)}handleWrapJump(a){const d=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,d){const p={};for(const v in this._tiles){const b=this._tiles[v];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+d),p[b.tileID.key]=b}this._tiles=p;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}update(a,d){if(this.transform=a,this.terrain=d,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=a.getVisibleUnwrappedCoordinates(this._source.tileID).map(G=>new s.O(G.canonical.z,G.wrap,G.canonical.z,G.canonical.x,G.canonical.y)):(p=a.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(p=p.filter(G=>this._source.hasTile(G)))):p=[];const v=a.coveringZoomLevel(this._source),b=Math.max(v-xr.maxOverzooming,this._source.minzoom),k=Math.max(v+xr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const G={};for(const W of p)if(W.canonical.z>this._source.minzoom){const ne=W.scaledTo(W.canonical.z-1);G[ne.key]=ne;const fe=W.scaledTo(Math.max(this._source.minzoom,Math.min(W.canonical.z,5)));G[fe.key]=fe}p=p.concat(Object.values(G))}const E=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new s.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const A=this._updateRetainedTiles(p,v);if(Jt(this._source.type)){const G={},W={},ne=Object.keys(A),fe=s.h.now();for(const de of ne){const me=A[de],le=this._tiles[de];if(!le||le.fadeEndTime!==0&&le.fadeEndTime<=fe)continue;const Ie=this.findLoadedParent(me,b);Ie&&(this._addTile(Ie.tileID),G[Ie.tileID.key]=Ie.tileID),W[de]=me}this._retainLoadedChildren(W,v,k,A);for(const de in G)A[de]||(this._coveredTiles[de]=!0,A[de]=G[de]);if(d){const de={},me={};for(const le of p)this._tiles[le.key].hasData()?de[le.key]=le:me[le.key]=le;for(const le in me){const Ie=me[le].children(this._source.maxzoom);this._tiles[Ie[0].key]&&this._tiles[Ie[1].key]&&this._tiles[Ie[2].key]&&this._tiles[Ie[3].key]&&(de[Ie[0].key]=A[Ie[0].key]=Ie[0],de[Ie[1].key]=A[Ie[1].key]=Ie[1],de[Ie[2].key]=A[Ie[2].key]=Ie[2],de[Ie[3].key]=A[Ie[3].key]=Ie[3],delete me[le])}for(const le in me){const Ie=this.findLoadedParent(me[le],this._source.minzoom);if(Ie){de[Ie.tileID.key]=A[Ie.tileID.key]=Ie.tileID;for(const Ue in de)de[Ue].isChildOf(Ie.tileID)&&delete de[Ue]}}for(const le in this._tiles)de[le]||(this._coveredTiles[le]=!0)}}for(const G in A)this._tiles[G].clearFadeHold();const B=s.ab(this._tiles,A);for(const G of B){const W=this._tiles[G];W.hasSymbolBuckets&&!W.holdingForFade()?W.setHoldDuration(this.map._fadeDuration):W.hasSymbolBuckets&&!W.symbolFadeFinished()||this._removeTile(G)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,d){const p={},v={},b=Math.max(d-xr.maxOverzooming,this._source.minzoom),k=Math.max(d+xr.maxUnderzooming,this._source.minzoom),E={};for(const A of a){const B=this._addTile(A);p[A.key]=A,B.hasData()||d<this._source.maxzoom&&(E[A.key]=A)}this._retainLoadedChildren(E,d,k,p);for(const A of a){let B=this._tiles[A.key];if(B.hasData())continue;if(d+1>this._source.maxzoom){const W=A.children(this._source.maxzoom)[0],ne=this.getTile(W);if(ne&&ne.hasData()){p[W.key]=W;continue}}else{const W=A.children(this._source.maxzoom);if(p[W[0].key]&&p[W[1].key]&&p[W[2].key]&&p[W[3].key])continue}let G=B.wasRequested();for(let W=A.overscaledZ-1;W>=b;--W){const ne=A.scaledTo(W);if(v[ne.key])break;if(v[ne.key]=!0,B=this.getTile(ne),!B&&G&&(B=this._addTile(ne)),B){const fe=B.hasData();if((G||fe)&&(p[ne.key]=ne),G=B.wasRequested(),fe)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const d=[];let p,v=this._tiles[a].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){p=this._loadedParentTiles[v.key];break}d.push(v.key);const b=v.scaledTo(v.overscaledZ-1);if(p=this._getLoadedTile(b),p)break;v=b}for(const b of d)this._loadedParentTiles[b]=p}}_addTile(a){let d=this._tiles[a.key];if(d)return d;d=this._cache.getAndRemove(a),d&&(this._setTileReloadTimer(a.key,d),d.tileID=a,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,d)));const p=d;return d||(d=new Gt(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,a.key,d.state))),d.uses++,this._tiles[a.key]=d,p||this._source.fire(new s.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(a,d){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const p=d.getExpiryTimeout();p&&(this._timers[a]=setTimeout(()=>{this._reloadTile(a,"expired"),delete this._timers[a]},p))}_removeTile(a){const d=this._tiles[a];d&&(d.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,d,p){const v=[],b=this.transform;if(!b)return v;const k=p?b.getCameraQueryGeometry(a):a,E=a.map(de=>b.pointCoordinate(de,this.terrain)),A=k.map(de=>b.pointCoordinate(de,this.terrain)),B=this.getIds();let G=1/0,W=1/0,ne=-1/0,fe=-1/0;for(const de of A)G=Math.min(G,de.x),W=Math.min(W,de.y),ne=Math.max(ne,de.x),fe=Math.max(fe,de.y);for(let de=0;de<B.length;de++){const me=this._tiles[B[de]];if(me.holdingForFade())continue;const le=me.tileID,Ie=Math.pow(2,b.zoom-me.tileID.overscaledZ),Ue=d*me.queryPadding*s.N/me.tileSize/Ie,ye=[le.getTilePoint(new s.U(G,W)),le.getTilePoint(new s.U(ne,fe))];if(ye[0].x-Ue<s.N&&ye[0].y-Ue<s.N&&ye[1].x+Ue>=0&&ye[1].y+Ue>=0){const Me=E.map(Ke=>le.getTilePoint(Ke)),qe=A.map(Ke=>le.getTilePoint(Ke));v.push({tile:me,tileID:le,queryGeometry:Me,cameraQueryGeometry:qe,scale:Ie})}}return v}getVisibleCoordinates(a){const d=this.getRenderableIds(a).map(p=>this._tiles[p].tileID);for(const p of d)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(Jt(this._source.type)){const a=s.h.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=a)return!0}return!1}setFeatureState(a,d,p){this._state.updateState(a=a||"_geojsonTileLayer",d,p)}removeFeatureState(a,d,p){this._state.removeFeatureState(a=a||"_geojsonTileLayer",d,p)}getFeatureState(a,d){return this._state.getState(a=a||"_geojsonTileLayer",d)}setDependencies(a,d,p){const v=this._tiles[a];v&&v.setDependencies(d,p)}reloadTilesForDependencies(a,d){for(const p in this._tiles)this._tiles[p].hasDependency(a,d)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(a,d))}}function Tr(_,a){const d=Math.abs(2*_.wrap)-+(_.wrap<0),p=Math.abs(2*a.wrap)-+(a.wrap<0);return _.overscaledZ-a.overscaledZ||p-d||a.canonical.y-_.canonical.y||a.canonical.x-_.canonical.x}function Jt(_){return _==="raster"||_==="image"||_==="video"}xr.maxOverzooming=10,xr.maxUnderzooming=3;const or="mapboxgl_preloaded_worker_pool";class Cr{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<Cr.workerCount;)this.workers.push(new Worker(s.c.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[or]}numActive(){return Object.keys(this.active).length}}const Mr=Math.floor(s.h.hardwareConcurrency/2);let Sr;function fr(){return Sr||(Sr=new Cr),Sr}Cr.workerCount=s.ac(globalThis)?Math.max(Math.min(Mr,3),1):1;class Qt{constructor(a,d){this.reset(a,d)}reset(a,d){this.points=a||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=s.ad(a,0,1);let d=1,p=this._distances[d];const v=a*this.paddedLength+this.padding;for(;p<v&&d<this._distances.length;)p=this._distances[++d];const b=d-1,k=this._distances[b],E=p-k,A=E>0?(v-k)/E:0;return this.points[b].mult(1-A).add(this.points[d].mult(A))}}function dr(_,a){let d=!0;return _==="always"||_!=="never"&&a!=="never"||(d=!1),d}class tn{constructor(a,d,p){const v=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(a/p),this.yCellCount=Math.ceil(d/p);for(let k=0;k<this.xCellCount*this.yCellCount;k++)v.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=d,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,d,p,v,b){this._forEachCell(d,p,v,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(v),this.bboxes.push(b)}insertCircle(a,d,p,v){this._forEachCell(d-v,p-v,d+v,p+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(d),this.circles.push(p),this.circles.push(v)}_insertBoxCell(a,d,p,v,b,k){this.boxCells[b].push(k)}_insertCircleCell(a,d,p,v,b,k){this.circleCells[b].push(k)}_query(a,d,p,v,b,k,E){if(p<0||a>this.width||v<0||d>this.height)return[];const A=[];if(a<=0&&d<=0&&this.width<=p&&this.height<=v){if(b)return[{key:null,x1:a,y1:d,x2:p,y2:v}];for(let B=0;B<this.boxKeys.length;B++)A.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){const G=this.circles[3*B],W=this.circles[3*B+1],ne=this.circles[3*B+2];A.push({key:this.circleKeys[B],x1:G-ne,y1:W-ne,x2:G+ne,y2:W+ne})}}else this._forEachCell(a,d,p,v,this._queryCell,A,{hitTest:b,overlapMode:k,seenUids:{box:{},circle:{}}},E);return A}query(a,d,p,v){return this._query(a,d,p,v,!1,null)}hitTest(a,d,p,v,b,k){return this._query(a,d,p,v,!0,b,k).length>0}hitTestCircle(a,d,p,v,b){const k=a-p,E=a+p,A=d-p,B=d+p;if(E<0||k>this.width||B<0||A>this.height)return!1;const G=[];return this._forEachCell(k,A,E,B,this._queryCellCircle,G,{hitTest:!0,overlapMode:v,circle:{x:a,y:d,radius:p},seenUids:{box:{},circle:{}}},b),G.length>0}_queryCell(a,d,p,v,b,k,E,A){const{seenUids:B,hitTest:G,overlapMode:W}=E,ne=this.boxCells[b];if(ne!==null){const de=this.bboxes;for(const me of ne)if(!B.box[me]){B.box[me]=!0;const le=4*me,Ie=this.boxKeys[me];if(a<=de[le+2]&&d<=de[le+3]&&p>=de[le+0]&&v>=de[le+1]&&(!A||A(Ie))&&(!G||!dr(W,Ie.overlapMode))&&(k.push({key:Ie,x1:de[le],y1:de[le+1],x2:de[le+2],y2:de[le+3]}),G))return!0}}const fe=this.circleCells[b];if(fe!==null){const de=this.circles;for(const me of fe)if(!B.circle[me]){B.circle[me]=!0;const le=3*me,Ie=this.circleKeys[me];if(this._circleAndRectCollide(de[le],de[le+1],de[le+2],a,d,p,v)&&(!A||A(Ie))&&(!G||!dr(W,Ie.overlapMode))){const Ue=de[le],ye=de[le+1],Me=de[le+2];if(k.push({key:Ie,x1:Ue-Me,y1:ye-Me,x2:Ue+Me,y2:ye+Me}),G)return!0}}}return!1}_queryCellCircle(a,d,p,v,b,k,E,A){const{circle:B,seenUids:G,overlapMode:W}=E,ne=this.boxCells[b];if(ne!==null){const de=this.bboxes;for(const me of ne)if(!G.box[me]){G.box[me]=!0;const le=4*me,Ie=this.boxKeys[me];if(this._circleAndRectCollide(B.x,B.y,B.radius,de[le+0],de[le+1],de[le+2],de[le+3])&&(!A||A(Ie))&&!dr(W,Ie.overlapMode))return k.push(!0),!0}}const fe=this.circleCells[b];if(fe!==null){const de=this.circles;for(const me of fe)if(!G.circle[me]){G.circle[me]=!0;const le=3*me,Ie=this.circleKeys[me];if(this._circlesCollide(de[le],de[le+1],de[le+2],B.x,B.y,B.radius)&&(!A||A(Ie))&&!dr(W,Ie.overlapMode))return k.push(!0),!0}}}_forEachCell(a,d,p,v,b,k,E,A){const B=this._convertToXCellCoord(a),G=this._convertToYCellCoord(d),W=this._convertToXCellCoord(p),ne=this._convertToYCellCoord(v);for(let fe=B;fe<=W;fe++)for(let de=G;de<=ne;de++)if(b.call(this,a,d,p,v,this.xCellCount*de+fe,k,E,A))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,d,p,v,b,k){const E=v-a,A=b-d,B=p+k;return B*B>E*E+A*A}_circleAndRectCollide(a,d,p,v,b,k,E){const A=(k-v)/2,B=Math.abs(a-(v+A));if(B>A+p)return!1;const G=(E-b)/2,W=Math.abs(d-(b+G));if(W>G+p)return!1;if(B<=A||W<=G)return!0;const ne=B-A,fe=W-G;return ne*ne+fe*fe<=p*p}}function je(_,a,d,p,v){const b=s.Z();return a?(s.a0(b,b,[1/v,1/v,1]),d||s.ae(b,b,p.angle)):s.a1(b,p.labelPlaneMatrix,_),b}function kt(_,a,d,p,v){if(a){const b=s.af(_);return s.a0(b,b,[v,v,1]),d||s.ae(b,b,-p.angle),b}return p.glCoordMatrix}function bt(_,a,d){let p;d?(p=[_.x,_.y,d(_.x,_.y),1],s.ag(p,p,a)):(p=[_.x,_.y,0,1],X(p,p,a));const v=p[3];return{point:new s.P(p[0]/v,p[1]/v),signedDistanceFromCamera:v}}function Ee(_,a){return .5+_/a*.5}function Ve(_,a){const d=_[0]/_[3],p=_[1]/_[3];return d>=-a[0]&&d<=a[0]&&p>=-a[1]&&p<=a[1]}function Xe(_,a,d,p,v,b,k,E,A,B){const G=p?_.textSizeData:_.iconSizeData,W=s.ah(G,d.transform.zoom),ne=[256/d.width*2+1,256/d.height*2+1],fe=p?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;fe.clear();const de=_.lineVertexArray,me=p?_.text.placedSymbolArray:_.icon.placedSymbolArray,le=d.transform.width/d.transform.height;let Ie=!1;for(let Ue=0;Ue<me.length;Ue++){const ye=me.get(Ue);if(ye.hidden||ye.writingMode===s.ai.vertical&&!Ie){N(ye.numGlyphs,fe);continue}let Me;if(Ie=!1,B?(Me=[ye.anchorX,ye.anchorY,B(ye.anchorX,ye.anchorY),1],s.ag(Me,Me,a)):(Me=[ye.anchorX,ye.anchorY,0,1],X(Me,Me,a)),!Ve(Me,ne)){N(ye.numGlyphs,fe);continue}const qe=Ee(d.transform.cameraToCenterDistance,Me[3]),Ke=s.aj(G,W,ye),Je=k?Ke/qe:Ke*qe,lt=new s.P(ye.anchorX,ye.anchorY),nt=bt(lt,v,B).point,mt={projections:{},offsets:{}},qt=Rt(ye,Je,!1,E,a,v,b,_.glyphOffsetArray,de,fe,nt,lt,mt,le,A,B);Ie=qt.useVertical,(qt.notEnoughRoom||Ie||qt.needsFlipping&&Rt(ye,Je,!0,E,a,v,b,_.glyphOffsetArray,de,fe,nt,lt,mt,le,A,B).notEnoughRoom)&&N(ye.numGlyphs,fe)}p?_.text.dynamicLayoutVertexBuffer.updateData(fe):_.icon.dynamicLayoutVertexBuffer.updateData(fe)}function Tt(_,a,d,p,v,b,k,E,A,B,G,W,ne){const fe=E.glyphStartIndex+E.numGlyphs,de=E.lineStartIndex,me=E.lineStartIndex+E.lineLength,le=a.getoffsetX(E.glyphStartIndex),Ie=a.getoffsetX(fe-1),Ue=Y(_*le,d,p,v,b,k,E.segment,de,me,A,B,G,W,ne);if(!Ue)return null;const ye=Y(_*Ie,d,p,v,b,k,E.segment,de,me,A,B,G,W,ne);return ye?{first:Ue,last:ye}:null}function gt(_,a,d,p){return _===s.ai.horizontal&&Math.abs(d.y-a.y)>Math.abs(d.x-a.x)*p?{useVertical:!0}:(_===s.ai.vertical?a.y<d.y:a.x>d.x)?{needsFlipping:!0}:null}function Rt(_,a,d,p,v,b,k,E,A,B,G,W,ne,fe,de,me){const le=a/24,Ie=_.lineOffsetX*le,Ue=_.lineOffsetY*le;let ye;if(_.numGlyphs>1){const Me=_.glyphStartIndex+_.numGlyphs,qe=_.lineStartIndex,Ke=_.lineStartIndex+_.lineLength,Je=Tt(le,E,Ie,Ue,d,G,W,_,A,b,ne,de,me);if(!Je)return{notEnoughRoom:!0};const lt=bt(Je.first.point,k,me).point,nt=bt(Je.last.point,k,me).point;if(p&&!d){const mt=gt(_.writingMode,lt,nt,fe);if(mt)return mt}ye=[Je.first];for(let mt=_.glyphStartIndex+1;mt<Me-1;mt++)ye.push(Y(le*E.getoffsetX(mt),Ie,Ue,d,G,W,_.segment,qe,Ke,A,b,ne,de,me));ye.push(Je.last)}else{if(p&&!d){const qe=bt(W,v,me).point,Ke=_.lineStartIndex+_.segment+1,Je=new s.P(A.getx(Ke),A.gety(Ke)),lt=bt(Je,v,me),nt=lt.signedDistanceFromCamera>0?lt.point:vr(W,Je,qe,1,v,me),mt=gt(_.writingMode,qe,nt,fe);if(mt)return mt}const Me=Y(le*E.getoffsetX(_.glyphStartIndex),Ie,Ue,d,G,W,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,A,b,ne,de,me);if(!Me)return{notEnoughRoom:!0};ye=[Me]}for(const Me of ye)s.ak(B,Me.point,Me.angle);return{}}function vr(_,a,d,p,v,b){const k=bt(_.add(_.sub(a)._unit()),v,b).point,E=d.sub(k);return d.add(E._mult(p/E.mag()))}function Bt(_,a){const{projectionCache:d,lineVertexArray:p,labelPlaneMatrix:v,tileAnchorPoint:b,distanceFromAnchor:k,getElevation:E,previousVertex:A,direction:B,absOffsetX:G}=a;if(d.projections[_])return d.projections[_];const W=new s.P(p.getx(_),p.gety(_)),ne=bt(W,v,E);if(ne.signedDistanceFromCamera>0)return d.projections[_]=ne.point,ne.point;const fe=_-B;return vr(k===0?b:new s.P(p.getx(fe),p.gety(fe)),W,A,G-k+1,v,E)}function mr(_,a,d){return _._unit()._perp()._mult(a*d)}function ue(_,a,d,p,v,b,k,E){const{projectionCache:A,direction:B}=E;if(A.offsets[_])return A.offsets[_];const G=d.add(a);if(_+B<p||_+B>=v)return A.offsets[_]=G,G;const W=Bt(_+B,E),ne=mr(W.sub(d),k,B),fe=d.add(ne),de=W.add(ne);return A.offsets[_]=s.al(b,G,fe,de)||G,A.offsets[_]}function Y(_,a,d,p,v,b,k,E,A,B,G,W,ne,fe){const de=p?_-a:_+a;let me=de>0?1:-1,le=0;p&&(me*=-1,le=Math.PI),me<0&&(le+=Math.PI);let Ie,Ue,ye=me>0?E+k:E+k+1,Me=v,qe=v,Ke=0,Je=0;const lt=Math.abs(de),nt=[];let mt;for(;Ke+Je<=lt;){if(ye+=me,ye<E||ye>=A)return null;Ke+=Je,qe=Me,Ue=Ie;const Pt={projectionCache:W,lineVertexArray:B,labelPlaneMatrix:G,tileAnchorPoint:b,distanceFromAnchor:Ke,getElevation:fe,previousVertex:qe,direction:me,absOffsetX:lt};if(Me=Bt(ye,Pt),d===0)nt.push(qe),mt=Me.sub(qe);else{let ur;const Kt=Me.sub(qe);ur=Kt.mag()===0?mr(Bt(ye+me,Pt).sub(Me),d,me):mr(Kt,d,me),Ue||(Ue=qe.add(ur)),Ie=ue(ye,ur,Me,E,A,Ue,d,Pt),nt.push(Ue),mt=Ie.sub(Ue)}Je=mt.mag()}const qt=mt._mult((lt-Ke)/Je)._add(Ue||qe),Ir=le+Math.atan2(Me.y-qe.y,Me.x-qe.x);return nt.push(qt),{point:qt,angle:ne?Ir:0,path:nt}}const Q=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function N(_,a){for(let d=0;d<_;d++){const p=a.length;a.resize(p+4),a.float32.set(Q,3*p)}}function X(_,a,d){const p=a[0],v=a[1];return _[0]=d[0]*p+d[4]*v+d[12],_[1]=d[1]*p+d[5]*v+d[13],_[3]=d[3]*p+d[7]*v+d[15],_}const re=100;class he{constructor(a,d=new tn(a.width+200,a.height+200,25),p=new tn(a.width+200,a.height+200,25)){this.transform=a,this.grid=d,this.ignoredGrid=p,this.pitchfactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+re,this.screenBottomBoundary=a.height+re,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,d,p,v,b,k){const E=this.projectAndGetPerspectiveRatio(v,a.anchorPointX,a.anchorPointY,k),A=p*E.perspectiveRatio,B=a.x1*A+E.point.x,G=a.y1*A+E.point.y,W=a.x2*A+E.point.x,ne=a.y2*A+E.point.y;return!this.isInsideGrid(B,G,W,ne)||d!=="always"&&this.grid.hitTest(B,G,W,ne,d,b)||E.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[B,G,W,ne],offscreen:this.isOffscreen(B,G,W,ne)}}placeCollisionCircles(a,d,p,v,b,k,E,A,B,G,W,ne,fe,de){const me=[],le=new s.P(d.anchorX,d.anchorY),Ie=bt(le,k,de),Ue=Ee(this.transform.cameraToCenterDistance,Ie.signedDistanceFromCamera),ye=(G?b/Ue:b*Ue)/s.ap,Me=bt(le,E,de).point,qe=Tt(ye,v,d.lineOffsetX*ye,d.lineOffsetY*ye,!1,Me,le,d,p,E,{projections:{},offsets:{}},!1,de);let Ke=!1,Je=!1,lt=!0;if(qe){const nt=.5*ne*Ue+fe,mt=new s.P(-100,-100),qt=new s.P(this.screenRightBoundary,this.screenBottomBoundary),Ir=new Qt,Pt=qe.first,ur=qe.last;let Kt=[];for(let br=Pt.path.length-1;br>=1;br--)Kt.push(Pt.path[br]);for(let br=1;br<ur.path.length;br++)Kt.push(ur.path[br]);const sn=2.5*nt;if(A){const br=Kt.map(Pr=>bt(Pr,A,de));Kt=br.some(Pr=>Pr.signedDistanceFromCamera<=0)?[]:br.map(Pr=>Pr.point)}let Er=[];if(Kt.length>0){const br=Kt[0].clone(),Pr=Kt[0].clone();for(let Nn=1;Nn<Kt.length;Nn++)br.x=Math.min(br.x,Kt[Nn].x),br.y=Math.min(br.y,Kt[Nn].y),Pr.x=Math.max(Pr.x,Kt[Nn].x),Pr.y=Math.max(Pr.y,Kt[Nn].y);Er=br.x>=mt.x&&Pr.x<=qt.x&&br.y>=mt.y&&Pr.y<=qt.y?[Kt]:Pr.x<mt.x||br.x>qt.x||Pr.y<mt.y||br.y>qt.y?[]:s.am([Kt],mt.x,mt.y,qt.x,qt.y)}for(const br of Er){Ir.reset(br,.25*nt);let Pr=0;Pr=Ir.length<=.5*nt?1:Math.ceil(Ir.paddedLength/sn)+1;for(let Nn=0;Nn<Pr;Nn++){const mn=Nn/Math.max(Pr-1,1),Ci=Ir.lerp(mn),li=Ci.x+re,Kn=Ci.y+re;me.push(li,Kn,nt,0);const Po=li-nt,xn=Kn-nt,Ia=li+nt,Pa=Kn+nt;if(lt=lt&&this.isOffscreen(Po,xn,Ia,Pa),Je=Je||this.isInsideGrid(Po,xn,Ia,Pa),a!=="always"&&this.grid.hitTestCircle(li,Kn,nt,a,W)&&(Ke=!0,!B))return{circles:[],offscreen:!1,collisionDetected:Ke}}}}return{circles:!B&&Ke||!Je||Ue<this.perspectiveRatioCutoff?[]:me,offscreen:lt,collisionDetected:Ke}}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let p=1/0,v=1/0,b=-1/0,k=-1/0;for(const G of a){const W=new s.P(G.x+re,G.y+re);p=Math.min(p,W.x),v=Math.min(v,W.y),b=Math.max(b,W.x),k=Math.max(k,W.y),d.push(W)}const E=this.grid.query(p,v,b,k).concat(this.ignoredGrid.query(p,v,b,k)),A={},B={};for(const G of E){const W=G.key;if(A[W.bucketInstanceId]===void 0&&(A[W.bucketInstanceId]={}),A[W.bucketInstanceId][W.featureIndex])continue;const ne=[new s.P(G.x1,G.y1),new s.P(G.x2,G.y1),new s.P(G.x2,G.y2),new s.P(G.x1,G.y2)];s.an(d,ne)&&(A[W.bucketInstanceId][W.featureIndex]=!0,B[W.bucketInstanceId]===void 0&&(B[W.bucketInstanceId]=[]),B[W.bucketInstanceId].push(W.featureIndex))}return B}insertCollisionBox(a,d,p,v,b,k){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:b,collisionGroupID:k,overlapMode:d},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,d,p,v,b,k){const E=p?this.ignoredGrid:this.grid,A={bucketInstanceId:v,featureIndex:b,collisionGroupID:k,overlapMode:d};for(let B=0;B<a.length;B+=4)E.insertCircle(A,a[B],a[B+1],a[B+2])}projectAndGetPerspectiveRatio(a,d,p,v){let b;return v?(b=[d,p,v(d,p),1],s.ag(b,b,a)):(b=[d,p,0,1],X(b,b,a)),{point:new s.P((b[0]/b[3]+1)/2*this.transform.width+re,(-b[1]/b[3]+1)/2*this.transform.height+re),perspectiveRatio:.5+this.transform.cameraToCenterDistance/b[3]*.5}}isOffscreen(a,d,p,v){return p<re||a>=this.screenRightBoundary||v<re||d>this.screenBottomBoundary}isInsideGrid(a,d,p,v){return p>=0&&a<this.gridRightBoundary&&v>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const a=s.ao([]);return s.$(a,a,[-100,-100,0]),a}}function pe(_,a,d){return a*(s.N/(_.tileSize*Math.pow(2,d-_.tileID.overscaledZ)))}class se{constructor(a,d,p,v){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?d:-d))):v&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class _e{constructor(a,d,p,v,b){this.text=new se(a?a.text:null,d,p,b),this.icon=new se(a?a.icon:null,d,v,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ae{constructor(a,d,p){this.text=a,this.icon=d,this.skipFade=p}}class Le{constructor(){this.invProjMatrix=s.Z(),this.viewportMatrix=s.Z(),this.circles=[]}}class Re{constructor(a,d,p,v,b){this.bucketInstanceId=a,this.featureIndex=d,this.sourceLayerIndex=p,this.bucketIndex=v,this.tileID=b}}class ot{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const d=++this.maxGroupID;this.collisionGroups[a]={ID:d,predicate:p=>p.collisionGroupID===d}}return this.collisionGroups[a]}}function dt(_,a,d,p,v){const{horizontalAlign:b,verticalAlign:k}=s.au(_);return new s.P(-(b-.5)*a+p[0]*v,-(k-.5)*d+p[1]*v)}function ut(_,a,d,p,v,b){const{x1:k,x2:E,y1:A,y2:B,anchorPointX:G,anchorPointY:W}=_,ne=new s.P(a,d);return p&&ne._rotate(v?b:-b),{x1:k+ne.x,y1:A+ne.y,x2:E+ne.x,y2:B+ne.y,anchorPointX:G,anchorPointY:W}}class It{constructor(a,d,p,v,b){this.transform=a.clone(),this.terrain=d,this.collisionIndex=new he(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new ot(v),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(a,d,p,v){const b=p.getBucket(d),k=p.latestFeatureIndex;if(!b||!k||d.id!==b.layerIds[0])return;const E=p.collisionBoxArray,A=b.layers[0].layout,B=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),G=p.tileSize/s.N,W=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),ne=A.get("text-pitch-alignment")==="map",fe=A.get("text-rotation-alignment")==="map",de=pe(p,1,this.transform.zoom),me=je(W,ne,fe,this.transform,de);let le=null;if(ne){const Ue=kt(W,ne,fe,this.transform,de);le=s.a1([],this.transform.labelPlaneMatrix,Ue)}this.retainedQueryData[b.bucketInstanceId]=new Re(b.bucketInstanceId,k,b.sourceLayerIndex,b.index,p.tileID);const Ie={bucket:b,layout:A,posMatrix:W,textLabelPlaneMatrix:me,labelToScreenMatrix:le,scale:B,textPixelRatio:G,holdingForFade:p.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:s.ah(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(v)for(const Ue of b.sortKeyRanges){const{sortKey:ye,symbolInstanceStart:Me,symbolInstanceEnd:qe}=Ue;a.push({sortKey:ye,symbolInstanceStart:Me,symbolInstanceEnd:qe,parameters:Ie})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Ie})}attemptAnchorPlacement(a,d,p,v,b,k,E,A,B,G,W,ne,fe,de,me,le){const Ie=s.aq[a.textAnchor],Ue=[a.textOffset0,a.textOffset1],ye=dt(Ie,p,v,Ue,b),Me=this.collisionIndex.placeCollisionBox(ut(d,ye.x,ye.y,k,E,this.transform.angle),W,A,B,G.predicate,le);if((!me||this.collisionIndex.placeCollisionBox(ut(me,ye.x,ye.y,k,E,this.transform.angle),W,A,B,G.predicate,le).box.length!==0)&&Me.box.length>0){let qe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ne.crossTileID]&&this.prevPlacement.placements[ne.crossTileID]&&this.prevPlacement.placements[ne.crossTileID].text&&(qe=this.prevPlacement.variableOffsets[ne.crossTileID].anchor),ne.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ne.crossTileID]={textOffset:Ue,width:p,height:v,anchor:Ie,textBoxScale:b,prevAnchor:qe},this.markUsedJustification(fe,Ie,ne,de),fe.allowVerticalPlacement&&(this.markUsedOrientation(fe,de,ne),this.placedOrientations[ne.crossTileID]=de),{shift:ye,placedGlyphBoxes:Me}}}placeLayerBucketPart(a,d,p){const{bucket:v,layout:b,posMatrix:k,textLabelPlaneMatrix:E,labelToScreenMatrix:A,textPixelRatio:B,holdingForFade:G,collisionBoxArray:W,partiallyEvaluatedTextSize:ne,collisionGroup:fe}=a.parameters,de=b.get("text-optional"),me=b.get("icon-optional"),le=s.ar(b,"text-overlap","text-allow-overlap"),Ie=le==="always",Ue=s.ar(b,"icon-overlap","icon-allow-overlap"),ye=Ue==="always",Me=b.get("text-rotation-alignment")==="map",qe=b.get("text-pitch-alignment")==="map",Ke=b.get("icon-text-fit")!=="none",Je=b.get("symbol-z-order")==="viewport-y",lt=Ie&&(ye||!v.hasIconData()||me),nt=ye&&(Ie||!v.hasTextData()||de);!v.collisionArrays&&W&&v.deserializeCollisionBoxes(W);const mt=this.retainedQueryData[v.bucketInstanceId].tileID,qt=this.terrain?(Pt,ur)=>this.terrain.getElevation(mt,Pt,ur):null,Ir=(Pt,ur)=>{var Kt,sn;if(d[Pt.crossTileID])return;if(G)return void(this.placements[Pt.crossTileID]=new Ae(!1,!1,!1));let Er=!1,br=!1,Pr=!0,Nn=null,mn={box:null,offscreen:null},Ci={box:null,offscreen:null},li=null,Kn=null,Po=null,xn=0,Ia=0,Pa=0;ur.textFeatureIndex?xn=ur.textFeatureIndex:Pt.useRuntimeCollisionCircles&&(xn=Pt.featureIndex),ur.verticalTextFeatureIndex&&(Ia=ur.verticalTextFeatureIndex);const js=ur.textBox;if(js){const Ai=jn=>{let ci=s.ai.horizontal;if(v.allowVerticalPlacement&&!jn&&this.prevPlacement){const io=this.prevPlacement.placedOrientations[Pt.crossTileID];io&&(this.placedOrientations[Pt.crossTileID]=io,ci=io,this.markUsedOrientation(v,ci,Pt))}return ci},ki=(jn,ci)=>{if(v.allowVerticalPlacement&&Pt.numVerticalGlyphVertices>0&&ur.verticalTextBox){for(const io of v.writingModes)if(io===s.ai.vertical?(mn=ci(),Ci=mn):mn=jn(),mn&&mn.box&&mn.box.length)break}else mn=jn()},Ui=Pt.textAnchorOffsetStartIndex,Cl=Pt.textAnchorOffsetEndIndex;if(Cl===Ui){const jn=(ci,io)=>{const Vn=this.collisionIndex.placeCollisionBox(ci,le,B,k,fe.predicate,qt);return Vn&&Vn.box&&Vn.box.length&&(this.markUsedOrientation(v,io,Pt),this.placedOrientations[Pt.crossTileID]=io),Vn};ki(()=>jn(js,s.ai.horizontal),()=>{const ci=ur.verticalTextBox;return v.allowVerticalPlacement&&Pt.numVerticalGlyphVertices>0&&ci?jn(ci,s.ai.vertical):{box:null,offscreen:null}}),Ai(mn&&mn.box&&mn.box.length)}else{let jn=s.aq[(sn=(Kt=this.prevPlacement)===null||Kt===void 0?void 0:Kt.variableOffsets[Pt.crossTileID])===null||sn===void 0?void 0:sn.anchor];const ci=(Vn,kl,ch)=>{const py=Vn.x2-Vn.x1,my=Vn.y2-Vn.y1,l1=Pt.textBoxScale,Bp=Ke&&Ue==="never"?kl:null;let Aa={box:[],offscreen:!1},Tl=le==="never"?1:2,Ra="never";jn&&Tl++;for(let Go=0;Go<Tl;Go++){for(let Da=Ui;Da<Cl;Da++){const Fp=v.textAnchorOffsets.get(Da);if(jn&&Fp.textAnchor!==jn)continue;const os=this.attemptAnchorPlacement(Fp,Vn,py,my,l1,Me,qe,B,k,fe,Ra,Pt,v,ch,Bp,qt);if(os&&(Aa=os.placedGlyphBoxes,Aa&&Aa.box&&Aa.box.length))return Er=!0,Nn=os.shift,Aa}jn?jn=null:Ra=le}return Aa};ki(()=>ci(js,ur.iconBox,s.ai.horizontal),()=>{const Vn=ur.verticalTextBox;return v.allowVerticalPlacement&&!(mn&&mn.box&&mn.box.length)&&Pt.numVerticalGlyphVertices>0&&Vn?ci(Vn,ur.verticalIconBox,s.ai.vertical):{box:null,offscreen:null}}),mn&&(Er=mn.box,Pr=mn.offscreen);const io=Ai(mn&&mn.box);if(!Er&&this.prevPlacement){const Vn=this.prevPlacement.variableOffsets[Pt.crossTileID];Vn&&(this.variableOffsets[Pt.crossTileID]=Vn,this.markUsedJustification(v,Vn.anchor,Pt,io))}}}if(li=mn,Er=li&&li.box&&li.box.length>0,Pr=li&&li.offscreen,Pt.useRuntimeCollisionCircles){const Ai=v.text.placedSymbolArray.get(Pt.centerJustifiedTextSymbolIndex),ki=s.aj(v.textSizeData,ne,Ai),Ui=b.get("text-padding");Kn=this.collisionIndex.placeCollisionCircles(le,Ai,v.lineVertexArray,v.glyphOffsetArray,ki,k,E,A,p,qe,fe.predicate,Pt.collisionCircleDiameter,Ui,qt),Kn.circles.length&&Kn.collisionDetected&&!p&&s.w("Collisions detected, but collision boxes are not shown"),Er=Ie||Kn.circles.length>0&&!Kn.collisionDetected,Pr=Pr&&Kn.offscreen}if(ur.iconFeatureIndex&&(Pa=ur.iconFeatureIndex),ur.iconBox){const Ai=ki=>{const Ui=Ke&&Nn?ut(ki,Nn.x,Nn.y,Me,qe,this.transform.angle):ki;return this.collisionIndex.placeCollisionBox(Ui,Ue,B,k,fe.predicate,qt)};Ci&&Ci.box&&Ci.box.length&&ur.verticalIconBox?(Po=Ai(ur.verticalIconBox),br=Po.box.length>0):(Po=Ai(ur.iconBox),br=Po.box.length>0),Pr=Pr&&Po.offscreen}const Sl=de||Pt.numHorizontalGlyphVertices===0&&Pt.numVerticalGlyphVertices===0,wc=me||Pt.numIconVertices===0;if(Sl||wc?wc?Sl||(br=br&&Er):Er=br&&Er:br=Er=br&&Er,Er&&li&&li.box&&this.collisionIndex.insertCollisionBox(li.box,le,b.get("text-ignore-placement"),v.bucketInstanceId,Ci&&Ci.box&&Ia?Ia:xn,fe.ID),br&&Po&&this.collisionIndex.insertCollisionBox(Po.box,Ue,b.get("icon-ignore-placement"),v.bucketInstanceId,Pa,fe.ID),Kn&&(Er&&this.collisionIndex.insertCollisionCircles(Kn.circles,le,b.get("text-ignore-placement"),v.bucketInstanceId,xn,fe.ID),p)){const Ai=v.bucketInstanceId;let ki=this.collisionCircleArrays[Ai];ki===void 0&&(ki=this.collisionCircleArrays[Ai]=new Le);for(let Ui=0;Ui<Kn.circles.length;Ui+=4)ki.circles.push(Kn.circles[Ui+0]),ki.circles.push(Kn.circles[Ui+1]),ki.circles.push(Kn.circles[Ui+2]),ki.circles.push(Kn.collisionDetected?1:0)}if(Pt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Pt.crossTileID]=new Ae(Er||lt,br||nt,Pr||v.justReloaded),d[Pt.crossTileID]=!0};if(Je){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Pt=v.getSortedSymbolIndexes(this.transform.angle);for(let ur=Pt.length-1;ur>=0;--ur){const Kt=Pt[ur];Ir(v.symbolInstances.get(Kt),v.collisionArrays[Kt])}}else for(let Pt=a.symbolInstanceStart;Pt<a.symbolInstanceEnd;Pt++)Ir(v.symbolInstances.get(Pt),v.collisionArrays[Pt]);if(p&&v.bucketInstanceId in this.collisionCircleArrays){const Pt=this.collisionCircleArrays[v.bucketInstanceId];s.as(Pt.invProjMatrix,k),Pt.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}markUsedJustification(a,d,p,v){let b;b=v===s.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[s.at(d)];const k=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const E of k)E>=0&&(a.text.placedSymbolArray.get(E).crossTileID=b>=0&&E!==b?0:p.crossTileID)}markUsedOrientation(a,d,p){const v=d===s.ai.horizontal||d===s.ai.horizontalOnly?d:0,b=d===s.ai.vertical?d:0,k=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const E of k)a.text.placedSymbolArray.get(E).placedOrientation=v;p.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let p=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const v=d?d.symbolFadeChange(a):1,b=d?d.opacities:{},k=d?d.variableOffsets:{},E=d?d.placedOrientations:{};for(const A in this.placements){const B=this.placements[A],G=b[A];G?(this.opacities[A]=new _e(G,v,B.text,B.icon),p=p||B.text!==G.text.placed||B.icon!==G.icon.placed):(this.opacities[A]=new _e(null,v,B.text,B.icon,B.skipFade),p=p||B.text||B.icon)}for(const A in b){const B=b[A];if(!this.opacities[A]){const G=new _e(B,v,!1,!1);G.isHidden()||(this.opacities[A]=G,p=p||B.text.placed||B.icon.placed)}}for(const A in k)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=k[A]);for(const A in E)this.placedOrientations[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.placedOrientations[A]=E[A]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:a)}updateLayerOpacities(a,d){const p={};for(const v of d){const b=v.getBucket(a);b&&v.latestFeatureIndex&&a.id===b.layerIds[0]&&this.updateBucketOpacities(b,p,v.collisionBoxArray)}}updateBucketOpacities(a,d,p){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const v=a.layers[0],b=v.layout,k=new _e(null,0,!1,!1,!0),E=b.get("text-allow-overlap"),A=b.get("icon-allow-overlap"),B=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),G=b.get("text-rotation-alignment")==="map",W=b.get("text-pitch-alignment")==="map",ne=b.get("icon-text-fit")!=="none",fe=new _e(null,0,E&&(A||!a.hasIconData()||b.get("icon-optional")),A&&(E||!a.hasTextData()||b.get("text-optional")),!0);!a.collisionArrays&&p&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(p);const de=(me,le,Ie)=>{for(let Ue=0;Ue<le/4;Ue++)me.opacityVertexArray.emplaceBack(Ie);me.hasVisibleVertices=me.hasVisibleVertices||Ie!==Fn};for(let me=0;me<a.symbolInstances.length;me++){const le=a.symbolInstances.get(me),{numHorizontalGlyphVertices:Ie,numVerticalGlyphVertices:Ue,crossTileID:ye}=le;let Me=this.opacities[ye];d[ye]?Me=k:Me||(Me=fe,this.opacities[ye]=Me),d[ye]=!0;const qe=le.numIconVertices>0,Ke=this.placedOrientations[le.crossTileID],Je=Ke===s.ai.vertical,lt=Ke===s.ai.horizontal||Ke===s.ai.horizontalOnly;if(Ie>0||Ue>0){const nt=pn(Me.text);de(a.text,Ie,Je?Fn:nt),de(a.text,Ue,lt?Fn:nt);const mt=Me.text.isHidden();[le.rightJustifiedTextSymbolIndex,le.centerJustifiedTextSymbolIndex,le.leftJustifiedTextSymbolIndex].forEach(Pt=>{Pt>=0&&(a.text.placedSymbolArray.get(Pt).hidden=mt||Je?1:0)}),le.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(le.verticalPlacedTextSymbolIndex).hidden=mt||lt?1:0);const qt=this.variableOffsets[le.crossTileID];qt&&this.markUsedJustification(a,qt.anchor,le,Ke);const Ir=this.placedOrientations[le.crossTileID];Ir&&(this.markUsedJustification(a,"left",le,Ir),this.markUsedOrientation(a,Ir,le))}if(qe){const nt=pn(Me.icon),mt=!(ne&&le.verticalPlacedIconSymbolIndex&&Je);le.placedIconSymbolIndex>=0&&(de(a.icon,le.numIconVertices,mt?nt:Fn),a.icon.placedSymbolArray.get(le.placedIconSymbolIndex).hidden=Me.icon.isHidden()),le.verticalPlacedIconSymbolIndex>=0&&(de(a.icon,le.numVerticalIconVertices,mt?Fn:nt),a.icon.placedSymbolArray.get(le.verticalPlacedIconSymbolIndex).hidden=Me.icon.isHidden())}if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const nt=a.collisionArrays[me];if(nt){let mt=new s.P(0,0);if(nt.textBox||nt.verticalTextBox){let Ir=!0;if(B){const Pt=this.variableOffsets[ye];Pt?(mt=dt(Pt.anchor,Pt.width,Pt.height,Pt.textOffset,Pt.textBoxScale),G&&mt._rotate(W?this.transform.angle:-this.transform.angle)):Ir=!1}nt.textBox&&Oe(a.textCollisionBox.collisionVertexArray,Me.text.placed,!Ir||Je,mt.x,mt.y),nt.verticalTextBox&&Oe(a.textCollisionBox.collisionVertexArray,Me.text.placed,!Ir||lt,mt.x,mt.y)}const qt=!!(!lt&&nt.verticalIconBox);nt.iconBox&&Oe(a.iconCollisionBox.collisionVertexArray,Me.icon.placed,qt,ne?mt.x:0,ne?mt.y:0),nt.verticalIconBox&&Oe(a.iconCollisionBox.collisionVertexArray,Me.icon.placed,!qt,ne?mt.x:0,ne?mt.y:0)}}}if(a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);if(a.bucketInstanceId in this.collisionCircleArrays){const me=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=me.invProjMatrix,a.placementViewportMatrix=me.viewportMatrix,a.collisionCircleArray=me.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,d){const p=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*p>a}setStale(){this.stale=!0}}function Oe(_,a,d,p,v){_.emplaceBack(a?1:0,d?1:0,p||0,v||0),_.emplaceBack(a?1:0,d?1:0,p||0,v||0),_.emplaceBack(a?1:0,d?1:0,p||0,v||0),_.emplaceBack(a?1:0,d?1:0,p||0,v||0)}const $e=Math.pow(2,25),tt=Math.pow(2,24),ht=Math.pow(2,17),zt=Math.pow(2,16),pr=Math.pow(2,9),ir=Math.pow(2,8),jr=Math.pow(2,1);function pn(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const a=_.placed?1:0,d=Math.floor(127*_.opacity);return d*$e+a*tt+d*ht+a*zt+d*pr+a*ir+d*jr+a}const Fn=0;class zs{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,d,p,v,b){const k=this._bucketParts;for(;this._currentTileIndex<a.length;)if(d.getBucketParts(k,v,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((E,A)=>E.sortKey-A.sortKey));this._currentPartIndex<k.length;)if(d.placeLayerBucketPart(k[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,b())return!0;return!1}}class So{constructor(a,d,p,v,b,k,E,A){this.placement=new It(a,d,k,E,A),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(a,d,p){const v=s.h.now(),b=()=>!this._forceFullPlacement&&s.h.now()-v>2;for(;this._currentPlacementIndex>=0;){const k=d[a[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=E)&&(!k.maxzoom||k.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new zs(k)),this._inProgressLayer.continuePlacement(p[k.source],this.placement,this._showCollisionBoxes,k,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const Vr=512/s.N/2;class ri{constructor(a,d,p){this.tileID=a,this.bucketInstanceId=p,this._symbolsByKey={};const v=new Map;for(let b=0;b<d.length;b++){const k=d.get(b),E=k.key,A=v.get(E);A?A.push(k):v.set(E,[k])}for(const[b,k]of v){const E={positions:k.map(A=>({x:Math.floor(A.anchorX*Vr),y:Math.floor(A.anchorY*Vr)})),crossTileIDs:k.map(A=>A.crossTileID)};if(E.positions.length>128){const A=new s.av(E.positions.length,16,Uint16Array);for(const{x:B,y:G}of E.positions)A.add(B,G);A.finish(),delete E.positions,E.index=A}this._symbolsByKey[b]=E}}getScaledCoordinates(a,d){const{x:p,y:v,z:b}=this.tileID.canonical,{x:k,y:E,z:A}=d.canonical,B=Vr/Math.pow(2,A-b),G=(E*s.N+a.anchorY)*B,W=v*s.N*Vr;return{x:Math.floor((k*s.N+a.anchorX)*B-p*s.N*Vr),y:Math.floor(G-W)}}findMatches(a,d,p){const v=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let b=0;b<a.length;b++){const k=a.get(b);if(k.crossTileID)continue;const E=this._symbolsByKey[k.key];if(!E)continue;const A=this.getScaledCoordinates(k,d);if(E.index){const B=E.index.range(A.x-v,A.y-v,A.x+v,A.y+v).sort();for(const G of B){const W=E.crossTileIDs[G];if(!p[W]){p[W]=!0,k.crossTileID=W;break}}}else if(E.positions)for(let B=0;B<E.positions.length;B++){const G=E.positions[B],W=E.crossTileIDs[B];if(Math.abs(G.x-A.x)<=v&&Math.abs(G.y-A.y)<=v&&!p[W]){p[W]=!0,k.crossTileID=W;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:a})=>a)}}class Or{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class No{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const d=Math.round((a-this.lng)/360);if(d!==0)for(const p in this.indexes){const v=this.indexes[p],b={};for(const k in v){const E=v[k];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+d),b[E.tileID.key]=E}this.indexes[p]=b}this.lng=a}addBucket(a,d,p){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let b=0;b<d.symbolInstances.length;b++)d.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const v=this.usedCrossTileIDs[a.overscaledZ];for(const b in this.indexes){const k=this.indexes[b];if(Number(b)>a.overscaledZ)for(const E in k){const A=k[E];A.tileID.isChildOf(a)&&A.findMatches(d.symbolInstances,a,v)}else{const E=k[a.scaledTo(Number(b)).key];E&&E.findMatches(d.symbolInstances,a,v)}}for(let b=0;b<d.symbolInstances.length;b++){const k=d.symbolInstances.get(b);k.crossTileID||(k.crossTileID=p.generate(),v[k.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new ri(a,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(a,d){for(const p of d.getCrossTileIDsLists())for(const v of p)delete this.usedCrossTileIDs[a][v]}removeStaleBuckets(a){let d=!1;for(const p in this.indexes){const v=this.indexes[p];for(const b in v)a[v[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,v[b]),delete v[b],d=!0)}return d}}class Wt{constructor(){this.layerIndexes={},this.crossTileIDs=new Or,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,d,p){let v=this.layerIndexes[a.id];v===void 0&&(v=this.layerIndexes[a.id]=new No);let b=!1;const k={};v.handleWrapJump(p);for(const E of d){const A=E.getBucket(a);A&&a.id===A.layerIds[0]&&(A.bucketInstanceId||(A.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(E.tileID,A,this.crossTileIDs)&&(b=!0),k[A.bucketInstanceId]=!0)}return v.removeStaleBuckets(k)&&(b=!0),b}pruneUnusedLayers(a){const d={};a.forEach(p=>{d[p]=!0});for(const p in this.layerIndexes)d[p]||delete this.layerIndexes[p]}}const Ur=(_,a)=>s.x(_,a&&a.filter(d=>d.identifier!=="source.canvas")),Wr=s.F(s.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),Ni=s.F(s.ax,["setCenter","setZoom","setBearing","setPitch"]),Wn=s.aw();class qn extends s.E{constructor(a,d={}){super(),this.map=a,this.dispatcher=new at(fr(),this,a._getMapId()),this.imageManager=new Te,this.imageManager.setEventedParent(this),this.glyphManager=new Se(a._requestManager,d.localIdeographFontFamily),this.lineAtlas=new Ye(256,512),this.crossTileSymbolIndex=new Wt,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.az());const p=this;this._rtlTextPluginCallback=qn.registerForPluginStateChange(v=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(b,k)=>{if(s.aA(b),k&&k.every(E=>E))for(const E in p.sourceCaches){const A=p.sourceCaches[E].getSource().type;A!=="vector"&&A!=="geojson"||p.sourceCaches[E].reload()}})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const b=this.sourceCaches[v.sourceId];if(!b)return;const k=b.getSource();if(k&&k.vectorLayerIds)for(const E in this._layers){const A=this._layers[E];A.source===k.id&&this._validateLayer(A)}})}loadURL(a,d={},p){this.fire(new s.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const v=this.map._requestManager.transformRequest(a,z.Style);this._request=s.f(v,(b,k)=>{this._request=null,b?this.fire(new s.j(b)):k&&this._load(k,d,p)})}loadJSON(a,d={},p){this.fire(new s.k("dataloading",{dataType:"style"})),this._request=s.h.frame(()=>{this._request=null,d.validate=d.validate!==!1,this._load(a,d,p)})}loadEmpty(){this.fire(new s.k("dataloading",{dataType:"style"})),this._load(Wn,{validate:!1})}_load(a,d,p){var v;const b=d.transformStyle?d.transformStyle(p,a):a;if(!d.validate||!Ur(this,s.y(b))){this._loaded=!0,this.stylesheet=b;for(const k in b.sources)this.addSource(k,b.sources[k],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new Ne(this.stylesheet.light),this.map.setTerrain((v=this.stylesheet.terrain)!==null&&v!==void 0?v:null),this.fire(new s.k("data",{dataType:"style"})),this.fire(new s.k("style.load"))}}_createLayers(){const a=s.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",a),this._order=a.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of a){const p=s.aC(d);p.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=p}}_loadSprite(a,d=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(v,b,k,E){const A=ie(v),B=A.length,G=k>1?"@2x":"",W={},ne={},fe={};for(const{id:de,url:me}of A){const le=b.transformRequest(b.normalizeSpriteURL(me,G,".json"),z.SpriteJSON),Ie=`${de}_${le.url}`;W[Ie]=s.f(le,(Me,qe)=>{delete W[Ie],ne[de]=qe,xe(E,ne,fe,Me,B)});const Ue=b.transformRequest(b.normalizeSpriteURL(me,G,".png"),z.SpriteImage),ye=`${de}_${Ue.url}`;W[ye]=Z.getImage(Ue,(Me,qe)=>{delete W[ye],fe[de]=qe,xe(E,ne,fe,Me,B)})}return{cancel(){for(const de of Object.values(W))de.cancel()}}}(a,this.map._requestManager,this.map.getPixelRatio(),(v,b)=>{if(this._spriteRequest=null,v)this.fire(new s.j(v));else if(b)for(const k in b){this._spritesImagesIds[k]=[];const E=this._spritesImagesIds[k]?this._spritesImagesIds[k].filter(A=>!(A in b)):[];for(const A of E)this.imageManager.removeImage(A),this._changedImages[A]=!0;for(const A in b[k]){const B=k==="default"?A:`${k}:${A}`;this._spritesImagesIds[k].push(B),B in this.imageManager.images?this.imageManager.updateImage(B,b[k][A],!1):this.imageManager.addImage(B,b[k][A]),d&&(this._changedImages[B]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.k("data",{dataType:"style"})),p&&p(v)})}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}_validateLayer(a){const d=this.sourceCaches[a.source];if(!d)return;const p=a.sourceLayer;if(!p)return;const v=d.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(p)===-1)&&this.fire(new s.j(new Error(`Source layer "${p}" does not exist on source "${v.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a){const d=this._serializedAllLayers();if(!a||a.length===0)return Object.values(d);const p=[];for(const v of a)d[v]&&p.push(d[v]);return p}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const d=Object.keys(this._layers);for(const p of d){const v=this._layers[p];v.type!=="custom"&&(a[p]=v.serialize())}return a}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const d=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(v.length||b.length)&&this._updateWorkerLayers(v,b);for(const k in this._updatedSources){const E=this._updatedSources[k];if(E==="reload")this._reloadSource(k);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(k)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const k in this._updatedPaintProps)this._layers[k].updateTransitions(a);this.light.updateTransitions(a),this._resetUpdates()}const p={};for(const v in this.sourceCaches){const b=this.sourceCaches[v];p[v]=b.used,b.used=!1}for(const v of this._order){const b=this._layers[v];b.recalculate(a,this._availableImages),!b.isHidden(a.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const v in p){const b=this.sourceCaches[v];p[v]!==b.used&&b.fire(new s.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(a),this.z=a.zoom,d&&this.fire(new s.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(a),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,d={}){this._checkLoaded();const p=this.serialize();if(a=d.transformStyle?d.transformStyle(p,a):a,Ur(this,s.y(a)))return!1;(a=s.aD(a)).layers=s.aB(a.layers);const v=s.aE(p,a).filter(k=>!(k.command in Ni));if(v.length===0)return!1;const b=v.filter(k=>!(k.command in Wr));if(b.length>0)throw new Error(`Unimplemented: ${b.map(k=>k.command).join(", ")}.`);for(const k of v)k.command!=="setTransition"&&this[k.command].apply(this,k.args);return this.stylesheet=a,this._serializedLayers=null,!0}addImage(a,d){if(this.getImage(a))return this.fire(new s.j(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,d),this._afterImageUpdated(a)}updateImage(a,d){this.imageManager.updateImage(a,d)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new s.j(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,d,p={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(s.y.source,`sources.${a}`,d,null,p))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const v=this.sourceCaches[a]=new xr(a,d,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:a})),v.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===a)return this.fire(new s.j(new Error(`Source "${a}" cannot be removed while layer "${p}" is using it.`)));const d=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],d.fire(new s.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,d){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);const p=this.sourceCaches[a].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(d),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,d,p={}){this._checkLoaded();const v=a.id;if(this.getLayer(v))return void this.fire(new s.j(new Error(`Layer "${v}" already exists on this map.`)));let b;if(a.type==="custom"){if(Ur(this,s.aF(a)))return;b=s.aC(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(v,a.source),a=s.aD(a),a=s.e(a,{source:v})),this._validate(s.y.layer,`layers.${v}`,a,{arrayIndex:-1},p))return;b=s.aC(a),this._validateLayer(b),b.setEventedParent(this,{layer:{id:v}})}const k=d?this._order.indexOf(d):this._order.length;if(d&&k===-1)this.fire(new s.j(new Error(`Cannot add layer "${v}" before non-existing layer "${d}".`)));else{if(this._order.splice(k,0,v),this._layerOrderChanged=!0,this._layers[v]=b,this._removedLayers[v]&&b.source&&b.type!=="custom"){const E=this._removedLayers[v];delete this._removedLayers[v],E.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(a,d){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new s.j(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===d)return;const p=this._order.indexOf(a);this._order.splice(p,1);const v=d?this._order.indexOf(d):this._order.length;d&&v===-1?this.fire(new s.j(new Error(`Cannot move layer "${a}" before non-existing layer "${d}".`))):(this._order.splice(v,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const d=this._layers[a];if(!d)return void this.fire(new s.j(new Error(`Cannot remove non-existing layer "${a}".`)));d.setEventedParent(null);const p=this._order.indexOf(a);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=d,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],d.onRemove&&d.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,d,p){this._checkLoaded();const v=this.getLayer(a);v?v.minzoom===d&&v.maxzoom===p||(d!=null&&(v.minzoom=d),p!=null&&(v.maxzoom=p),this._updateLayer(v)):this.fire(new s.j(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,d,p={}){this._checkLoaded();const v=this.getLayer(a);if(v){if(!s.aG(v.filter,d))return d==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(s.y.filter,`layers.${v.id}.filter`,d,null,p)||(v.filter=s.aD(d),this._updateLayer(v)))}else this.fire(new s.j(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return s.aD(this.getLayer(a).filter)}setLayoutProperty(a,d,p,v={}){this._checkLoaded();const b=this.getLayer(a);b?s.aG(b.getLayoutProperty(d),p)||(b.setLayoutProperty(d,p,v),this._updateLayer(b)):this.fire(new s.j(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,d){const p=this.getLayer(a);if(p)return p.getLayoutProperty(d);this.fire(new s.j(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,d,p,v={}){this._checkLoaded();const b=this.getLayer(a);b?s.aG(b.getPaintProperty(d),p)||(b.setPaintProperty(d,p,v)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[a]=!0):this.fire(new s.j(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,d){return this.getLayer(a).getPaintProperty(d)}setFeatureState(a,d){this._checkLoaded();const p=a.source,v=a.sourceLayer,b=this.sourceCaches[p];if(b===void 0)return void this.fire(new s.j(new Error(`The source '${p}' does not exist in the map's style.`)));const k=b.getSource().type;k==="geojson"&&v?this.fire(new s.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):k!=="vector"||v?(a.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),b.setFeatureState(v,a.id,d)):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,d){this._checkLoaded();const p=a.source,v=this.sourceCaches[p];if(v===void 0)return void this.fire(new s.j(new Error(`The source '${p}' does not exist in the map's style.`)));const b=v.getSource().type,k=b==="vector"?a.sourceLayer:void 0;b!=="vector"||k?d&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new s.j(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(k,a.id,d):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const d=a.source,p=a.sourceLayer,v=this.sourceCaches[d];if(v!==void 0)return v.getSource().type!=="vector"||p?(a.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),v.getFeatureState(p,a.id)):void this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=s.aH(this.sourceCaches,b=>b.serialize()),d=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,v=this.stylesheet;return s.aI({version:v.version,name:v.name,metadata:v.metadata,light:v.light,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,sources:a,layers:d,terrain:p},b=>b!==void 0)}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const d=k=>this._layers[k].type==="fill-extrusion",p={},v=[];for(let k=this._order.length-1;k>=0;k--){const E=this._order[k];if(d(E)){p[E]=k;for(const A of a){const B=A[E];if(B)for(const G of B)v.push(G)}}}v.sort((k,E)=>E.intersectionZ-k.intersectionZ);const b=[];for(let k=this._order.length-1;k>=0;k--){const E=this._order[k];if(d(E))for(let A=v.length-1;A>=0;A--){const B=v[A].feature;if(p[B.layer.id]<k)break;b.push(B),v.pop()}else for(const A of a){const B=A[E];if(B)for(const G of B)b.push(G.feature)}}return b}queryRenderedFeatures(a,d,p){d&&d.filter&&this._validate(s.y.filter,"queryRenderedFeatures.filter",d.filter,null,d);const v={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new s.j(new Error("parameters.layers must be an Array."))),[];for(const E of d.layers){const A=this._layers[E];if(!A)return this.fire(new s.j(new Error(`The layer '${E}' does not exist in the map's style and cannot be queried for features.`))),[];v[A.source]=!0}}const b=[];d.availableImages=this._availableImages;const k=this._serializedAllLayers();for(const E in this.sourceCaches)d.layers&&!v[E]||b.push(Et(this.sourceCaches[E],this._layers,k,a,d,p));return this.placement&&b.push(function(E,A,B,G,W,ne,fe){const de={},me=ne.queryRenderedSymbols(G),le=[];for(const Ie of Object.keys(me).map(Number))le.push(fe[Ie]);le.sort(hr);for(const Ie of le){const Ue=Ie.featureIndex.lookupSymbolFeatures(me[Ie.bucketInstanceId],A,Ie.bucketIndex,Ie.sourceLayerIndex,W.filter,W.layers,W.availableImages,E);for(const ye in Ue){const Me=de[ye]=de[ye]||[],qe=Ue[ye];qe.sort((Ke,Je)=>{const lt=Ie.featureSortOrder;if(lt){const nt=lt.indexOf(Ke.featureIndex);return lt.indexOf(Je.featureIndex)-nt}return Je.featureIndex-Ke.featureIndex});for(const Ke of qe)Me.push(Ke)}}for(const Ie in de)de[Ie].forEach(Ue=>{const ye=Ue.feature,Me=B[E[Ie].source].getFeatureState(ye.layer["source-layer"],ye.id);ye.source=ye.layer.source,ye.layer["source-layer"]&&(ye.sourceLayer=ye.layer["source-layer"]),ye.state=Me});return de}(this._layers,k,this.sourceCaches,a,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(a,d){d&&d.filter&&this._validate(s.y.filter,"querySourceFeatures.filter",d.filter,null,d);const p=this.sourceCaches[a];return p?function(v,b){const k=v.getRenderableIds().map(B=>v.getTileByID(B)),E=[],A={};for(let B=0;B<k.length;B++){const G=k[B],W=G.tileID.canonical.key;A[W]||(A[W]=!0,G.querySourceFeatures(E,b))}return E}(p,d):[]}addSourceType(a,d,p){return Lr(a)?p(new Error(`A source type called "${a}" already exists.`)):(((v,b)=>{wr[v]=b})(a,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:a,url:d.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(a,d={}){this._checkLoaded();const p=this.light.getLight();let v=!1;for(const k in a)if(!s.aG(a[k],p[k])){v=!0;break}if(!v)return;const b={now:s.h.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,d),this.light.updateTransitions(b)}_validate(a,d,p,v,b={}){return(!b||b.validate!==!1)&&Ur(this,a.call(s.y,s.e({key:d,style:this.serialize(),value:p,styleSpec:s.v},v)))}_remove(a=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const p=this.sourceCaches[d];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const d in this.sourceCaches)this.sourceCaches[d].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,d,p,v,b=!1){let k=!1,E=!1;const A={};for(const B of this._order){const G=this._layers[B];if(G.type!=="symbol")continue;if(!A[G.source]){const ne=this.sourceCaches[G.source];A[G.source]=ne.getRenderableIds(!0).map(fe=>ne.getTileByID(fe)).sort((fe,de)=>de.tileID.overscaledZ-fe.tileID.overscaledZ||(fe.tileID.isLessThan(de.tileID)?-1:1))}const W=this.crossTileSymbolIndex.addLayer(G,A[G.source],a.center.lng);k=k||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.h.now(),a.zoom))&&(this.pauseablePlacement=new So(a,this.map.terrain,this._order,b,d,p,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,A),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.h.now()),E=!0),k&&this.pauseablePlacement.placement.setStale()),E||k)for(const B of this._order){const G=this._layers[B];G.type==="symbol"&&this.placement.updateLayerOpacities(G,A[G.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.h.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,d,p){this.imageManager.getImages(d.icons,p),this._updateTilesForChangedImages();const v=this.sourceCaches[d.source];v&&v.setDependencies(d.tileID.key,d.type,d.icons)}getGlyphs(a,d,p){this.glyphManager.getGlyphs(d.stacks,p);const v=this.sourceCaches[d.source];v&&v.setDependencies(d.tileID.key,d.type,[""])}getResource(a,d,p){return s.m(d,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,d={}){this._checkLoaded(),a&&this._validate(s.y.glyphs,"glyphs",a,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,d,p={},v){this._checkLoaded();const b=[{id:a,url:d}],k=[...ie(this.stylesheet.sprite),...b];this._validate(s.y.sprite,"sprite",k,null,p)||(this.stylesheet.sprite=k,this._loadSprite(b,!0,v))}removeSprite(a){this._checkLoaded();const d=ie(this.stylesheet.sprite);if(d.find(p=>p.id===a)){if(this._spritesImagesIds[a])for(const p of this._spritesImagesIds[a])this.imageManager.removeImage(p),this._changedImages[p]=!0;d.splice(d.findIndex(p=>p.id===a),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}else this.fire(new s.j(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return ie(this.stylesheet.sprite)}setSprite(a,d={},p){this._checkLoaded(),a&&this._validate(s.y.sprite,"sprite",a,null,d)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,p):(this._unloadSprite(),p&&p(null)))}}qn.registerForPluginStateChange=s.aK;var Co=s.Q([{name:"a_pos",type:"Int16",components:2}]),ji="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const In={prelude:Yr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Yr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Yr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Yr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Yr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Yr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Yr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Yr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Yr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Yr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Yr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Yr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Yr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Yr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Yr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Yr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Yr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Yr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Yr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Yr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Yr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Yr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Yr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Yr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Yr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Yr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Yr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ji),terrainDepth:Yr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ji),terrainCoords:Yr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ji)};function Yr(_,a){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=a.match(/attribute ([\w]+) ([\w]+)/g),v=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=b?b.concat(v):v,E={};return{fragmentSource:_=_.replace(d,(A,B,G,W,ne)=>(E[ne]=!0,B==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
varying ${G} ${W} ${ne};
#else
uniform ${G} ${W} u_${ne};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ne}
    ${G} ${W} ${ne} = u_${ne};
#endif
`)),vertexSource:a=a.replace(d,(A,B,G,W,ne)=>{const fe=W==="float"?"vec2":"vec4",de=ne.match(/color/)?"color":fe;return E[ne]?B==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
attribute ${G} ${fe} a_${ne};
varying ${G} ${W} ${ne};
#else
uniform ${G} ${W} u_${ne};
#endif
`:de==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = a_${ne};
#else
    ${G} ${W} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = unpack_mix_${de}(a_${ne}, u_${ne}_t);
#else
    ${G} ${W} ${ne} = u_${ne};
#endif
`:B==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
attribute ${G} ${fe} a_${ne};
#else
uniform ${G} ${W} u_${ne};
#endif
`:de==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${G} ${W} ${ne} = a_${ne};
#else
    ${G} ${W} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${G} ${W} ${ne} = unpack_mix_${de}(a_${ne}, u_${ne}_t);
#else
    ${G} ${W} ${ne} = u_${ne};
#endif
`}),staticAttributes:p,staticUniforms:k}}class ml{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,d,p,v,b,k,E,A,B){this.context=a;let G=this.boundPaintVertexBuffers.length!==v.length;for(let W=0;!G&&W<v.length;W++)this.boundPaintVertexBuffers[W]!==v[W]&&(G=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==p||G||this.boundIndexBuffer!==b||this.boundVertexOffset!==k||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==A||this.boundDynamicVertexBuffer3!==B?this.freshBind(d,p,v,b,k,E,A,B):(a.bindVertexArray.set(this.vao),E&&E.bind(),b&&b.dynamicDraw&&b.bind(),A&&A.bind(),B&&B.bind())}freshBind(a,d,p,v,b,k,E,A){const B=a.numAttributes,G=this.context,W=G.gl;this.vao&&this.destroy(),this.vao=G.createVertexArray(),G.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=v,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=k,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=A,d.enableAttributes(W,a);for(const ne of p)ne.enableAttributes(W,a);k&&k.enableAttributes(W,a),E&&E.enableAttributes(W,a),A&&A.enableAttributes(W,a),d.bind(),d.setVertexAttribPointers(W,a,b);for(const ne of p)ne.bind(),ne.setVertexAttribPointers(W,a,b);k&&(k.bind(),k.setVertexAttribPointers(W,a,b)),v&&v.bind(),E&&(E.bind(),E.setVertexAttribPointers(W,a,b)),A&&(A.bind(),A.setVertexAttribPointers(W,a,b)),G.currentNumAttributes=B}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function zn(_){const a=[];for(let d=0;d<_.length;d++){if(_[d]===null)continue;const p=_[d].split(" ");a.push(p.pop())}return a}class $d{constructor(a,d,p,v,b,k){const E=a.gl;this.program=E.createProgram();const A=zn(d.staticAttributes),B=p?p.getBinderAttributes():[],G=A.concat(B),W=In.prelude.staticUniforms?zn(In.prelude.staticUniforms):[],ne=d.staticUniforms?zn(d.staticUniforms):[],fe=p?p.getBinderUniforms():[],de=W.concat(ne).concat(fe),me=[];for(const Ke of de)me.indexOf(Ke)<0&&me.push(Ke);const le=p?p.defines():[];b&&le.push("#define OVERDRAW_INSPECTOR;"),k&&le.push("#define TERRAIN3D;");const Ie=le.concat(In.prelude.fragmentSource,d.fragmentSource).join(`
`),Ue=le.concat(In.prelude.vertexSource,d.vertexSource).join(`
`),ye=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(ye,Ie),E.compileShader(ye),!E.getShaderParameter(ye,E.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${E.getShaderInfoLog(ye)}`);E.attachShader(this.program,ye);const Me=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())return void(this.failedToCreate=!0);if(E.shaderSource(Me,Ue),E.compileShader(Me),!E.getShaderParameter(Me,E.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${E.getShaderInfoLog(Me)}`);E.attachShader(this.program,Me),this.attributes={};const qe={};this.numAttributes=G.length;for(let Ke=0;Ke<this.numAttributes;Ke++)G[Ke]&&(E.bindAttribLocation(this.program,Ke,G[Ke]),this.attributes[G[Ke]]=Ke);if(E.linkProgram(this.program),!E.getProgramParameter(this.program,E.LINK_STATUS))throw new Error(`Program failed to link: ${E.getProgramInfoLog(this.program)}`);E.deleteShader(Me),E.deleteShader(ye);for(let Ke=0;Ke<me.length;Ke++){const Je=me[Ke];if(Je&&!qe[Je]){const lt=E.getUniformLocation(this.program,Je);lt&&(qe[Je]=lt)}}this.fixedUniforms=v(a,qe),this.terrainUniforms=((Ke,Je)=>({u_depth:new s.aL(Ke,Je.u_depth),u_terrain:new s.aL(Ke,Je.u_terrain),u_terrain_dim:new s.aM(Ke,Je.u_terrain_dim),u_terrain_matrix:new s.aN(Ke,Je.u_terrain_matrix),u_terrain_unpack:new s.aO(Ke,Je.u_terrain_unpack),u_terrain_exaggeration:new s.aM(Ke,Je.u_terrain_exaggeration)}))(a,qe),this.binderUniforms=p?p.getUniforms(a,qe):[]}draw(a,d,p,v,b,k,E,A,B,G,W,ne,fe,de,me,le,Ie,Ue){const ye=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(p),a.setStencilMode(v),a.setColorMode(b),a.setCullFace(k),A){a.activeTexture.set(ye.TEXTURE2),ye.bindTexture(ye.TEXTURE_2D,A.depthTexture),a.activeTexture.set(ye.TEXTURE3),ye.bindTexture(ye.TEXTURE_2D,A.texture);for(const qe in this.terrainUniforms)this.terrainUniforms[qe].set(A[qe])}for(const qe in this.fixedUniforms)this.fixedUniforms[qe].set(E[qe]);me&&me.setUniforms(a,this.binderUniforms,fe,{zoom:de});let Me=0;switch(d){case ye.LINES:Me=2;break;case ye.TRIANGLES:Me=3;break;case ye.LINE_STRIP:Me=1}for(const qe of ne.get()){const Ke=qe.vaos||(qe.vaos={});(Ke[B]||(Ke[B]=new ml)).bind(a,this,G,me?me.getPaintVertexBuffers():[],W,qe.vertexOffset,le,Ie,Ue),ye.drawElements(d,qe.primitiveLength*Me,ye.UNSIGNED_SHORT,qe.primitiveOffset*Me*2)}}}function jo(_,a,d){const p=1/pe(d,1,a.transform.tileZoom),v=Math.pow(2,d.tileID.overscaledZ),b=d.tileSize*Math.pow(2,a.transform.tileZoom)/v,k=b*(d.tileID.canonical.x+d.tileID.wrap*v),E=b*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[p,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[k>>16,E>>16],u_pixel_coord_lower:[65535&k,65535&E]}}const Jf=(_,a,d,p)=>{const v=a.style.light,b=v.properties.get("position"),k=[b.x,b.y,b.z],E=function(){var B=new s.A(9);return s.A!=Float32Array&&(B[1]=0,B[2]=0,B[3]=0,B[5]=0,B[6]=0,B[7]=0),B[0]=1,B[4]=1,B[8]=1,B}();v.properties.get("anchor")==="viewport"&&function(B,G){var W=Math.sin(G),ne=Math.cos(G);B[0]=ne,B[1]=W,B[2]=0,B[3]=-W,B[4]=ne,B[5]=0,B[6]=0,B[7]=0,B[8]=1}(E,-a.transform.angle),function(B,G,W){var ne=G[0],fe=G[1],de=G[2];B[0]=ne*W[0]+fe*W[3]+de*W[6],B[1]=ne*W[1]+fe*W[4]+de*W[7],B[2]=ne*W[2]+fe*W[5]+de*W[8]}(k,k,E);const A=v.properties.get("color");return{u_matrix:_,u_lightpos:k,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[A.r,A.g,A.b],u_vertical_gradient:+d,u_opacity:p}},Ls=(_,a,d,p,v,b,k)=>s.e(Jf(_,a,d,p),jo(b,a,k),{u_height_factor:-Math.pow(2,v.overscaledZ)/k.tileSize/8}),Rv=_=>({u_matrix:_}),Qf=(_,a,d,p)=>s.e(Rv(_),jo(d,a,p)),Bd=(_,a)=>({u_matrix:_,u_world:a}),Fd=(_,a,d,p,v)=>s.e(Qf(_,a,d,p),{u_world:v}),Os=(_,a,d,p)=>{const v=_.transform;let b,k;if(p.paint.get("circle-pitch-alignment")==="map"){const E=pe(d,1,v.zoom);b=!0,k=[E,E]}else b=!1,k=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(a.posMatrix,d,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+b,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:k}},ep=(_,a,d)=>{const p=pe(d,1,a.zoom),v=Math.pow(2,a.zoom-d.tileID.overscaledZ),b=d.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:a.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[a.pixelsToGLUnits[0]/(p*v),a.pixelsToGLUnits[1]/(p*v)],u_overscale_factor:b}},xu=(_,a,d=1)=>({u_matrix:_,u_color:a,u_overlay:0,u_overlay_scale:d}),Dv=_=>({u_matrix:_}),qb=(_,a,d,p)=>({u_matrix:_,u_extrude_scale:pe(a,1,d),u_intensity:p});function tp(_,a){const d=Math.pow(2,a.canonical.z),p=a.canonical.y;return[new s.U(0,p/d).toLngLat().lat,new s.U(0,(p+1)/d).toLngLat().lat]}const rp=(_,a,d,p)=>{const v=_.transform;return{u_matrix:Nd(_,a,d,p),u_ratio:1/pe(a,1,v.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Mv=(_,a,d,p,v)=>s.e(rp(_,a,d,v),{u_image:0,u_image_height:p}),Zb=(_,a,d,p,v)=>{const b=_.transform,k=Lv(a,b);return{u_matrix:Nd(_,a,d,v),u_texsize:a.imageAtlasTexture.size,u_ratio:1/pe(a,1,b.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[k,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},zv=(_,a,d,p,v,b)=>{const k=_.lineAtlas,E=Lv(a,_.transform),A=d.layout.get("line-cap")==="round",B=k.getDash(p.from,A),G=k.getDash(p.to,A),W=B.width*v.fromScale,ne=G.width*v.toScale;return s.e(rp(_,a,d,b),{u_patternscale_a:[E/W,-B.height/2],u_patternscale_b:[E/ne,-G.height/2],u_sdfgamma:k.width/(256*Math.min(W,ne)*_.pixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:G.y,u_mix:v.t})};function Lv(_,a){return 1/pe(_,1,a.tileZoom)}function Nd(_,a,d,p){return _.translatePosMatrix(p?p.posMatrix:a.tileID.posMatrix,a,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const Ov=(_,a,d,p,v)=>{return{u_matrix:_,u_tl_parent:a,u_scale_parent:d,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(k=v.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(b=v.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:$v(v.paint.get("raster-hue-rotate"))};var b,k};function $v(_){_*=Math.PI/180;const a=Math.sin(_),d=Math.cos(_);return[(2*d+1)/3,(-Math.sqrt(3)*a-d+1)/3,(Math.sqrt(3)*a-d+1)/3]}const np=(_,a,d,p,v,b,k,E,A,B)=>{const G=v.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:G.cameraToCenterDistance,u_pitch:G.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:G.width/G.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:b,u_label_plane_matrix:k,u_coord_matrix:E,u_is_text:+A,u_pitch_with_map:+p,u_texsize:B,u_texture:0}},ip=(_,a,d,p,v,b,k,E,A,B,G)=>{const W=v.transform;return s.e(np(_,a,d,p,v,b,k,E,A,B),{u_gamma_scale:p?Math.cos(W._pitch)*W.cameraToCenterDistance:1,u_device_pixel_ratio:v.pixelRatio,u_is_halo:+G})},gl=(_,a,d,p,v,b,k,E,A,B)=>s.e(ip(_,a,d,p,v,b,k,E,!0,A,!0),{u_texsize_icon:B,u_texture_icon:1}),jd=(_,a,d)=>({u_matrix:_,u_opacity:a,u_color:d}),Vo=(_,a,d,p,v,b)=>s.e(function(k,E,A,B){const G=A.imageManager.getPattern(k.from.toString()),W=A.imageManager.getPattern(k.to.toString()),{width:ne,height:fe}=A.imageManager.getPixelSize(),de=Math.pow(2,B.tileID.overscaledZ),me=B.tileSize*Math.pow(2,A.transform.tileZoom)/de,le=me*(B.tileID.canonical.x+B.tileID.wrap*de),Ie=me*B.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:G.tl,u_pattern_br_a:G.br,u_pattern_tl_b:W.tl,u_pattern_br_b:W.br,u_texsize:[ne,fe],u_mix:E.t,u_pattern_size_a:G.displaySize,u_pattern_size_b:W.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/pe(B,1,A.transform.tileZoom),u_pixel_coord_upper:[le>>16,Ie>>16],u_pixel_coord_lower:[65535&le,65535&Ie]}}(p,b,d,v),{u_matrix:_,u_opacity:a}),Vd={fillExtrusion:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_lightpos:new s.aP(_,a.u_lightpos),u_lightintensity:new s.aM(_,a.u_lightintensity),u_lightcolor:new s.aP(_,a.u_lightcolor),u_vertical_gradient:new s.aM(_,a.u_vertical_gradient),u_opacity:new s.aM(_,a.u_opacity)}),fillExtrusionPattern:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_lightpos:new s.aP(_,a.u_lightpos),u_lightintensity:new s.aM(_,a.u_lightintensity),u_lightcolor:new s.aP(_,a.u_lightcolor),u_vertical_gradient:new s.aM(_,a.u_vertical_gradient),u_height_factor:new s.aM(_,a.u_height_factor),u_image:new s.aL(_,a.u_image),u_texsize:new s.aQ(_,a.u_texsize),u_pixel_coord_upper:new s.aQ(_,a.u_pixel_coord_upper),u_pixel_coord_lower:new s.aQ(_,a.u_pixel_coord_lower),u_scale:new s.aP(_,a.u_scale),u_fade:new s.aM(_,a.u_fade),u_opacity:new s.aM(_,a.u_opacity)}),fill:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix)}),fillPattern:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_image:new s.aL(_,a.u_image),u_texsize:new s.aQ(_,a.u_texsize),u_pixel_coord_upper:new s.aQ(_,a.u_pixel_coord_upper),u_pixel_coord_lower:new s.aQ(_,a.u_pixel_coord_lower),u_scale:new s.aP(_,a.u_scale),u_fade:new s.aM(_,a.u_fade)}),fillOutline:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_world:new s.aQ(_,a.u_world)}),fillOutlinePattern:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_world:new s.aQ(_,a.u_world),u_image:new s.aL(_,a.u_image),u_texsize:new s.aQ(_,a.u_texsize),u_pixel_coord_upper:new s.aQ(_,a.u_pixel_coord_upper),u_pixel_coord_lower:new s.aQ(_,a.u_pixel_coord_lower),u_scale:new s.aP(_,a.u_scale),u_fade:new s.aM(_,a.u_fade)}),circle:(_,a)=>({u_camera_to_center_distance:new s.aM(_,a.u_camera_to_center_distance),u_scale_with_map:new s.aL(_,a.u_scale_with_map),u_pitch_with_map:new s.aL(_,a.u_pitch_with_map),u_extrude_scale:new s.aQ(_,a.u_extrude_scale),u_device_pixel_ratio:new s.aM(_,a.u_device_pixel_ratio),u_matrix:new s.aN(_,a.u_matrix)}),collisionBox:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_camera_to_center_distance:new s.aM(_,a.u_camera_to_center_distance),u_pixels_to_tile_units:new s.aM(_,a.u_pixels_to_tile_units),u_extrude_scale:new s.aQ(_,a.u_extrude_scale),u_overscale_factor:new s.aM(_,a.u_overscale_factor)}),collisionCircle:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_inv_matrix:new s.aN(_,a.u_inv_matrix),u_camera_to_center_distance:new s.aM(_,a.u_camera_to_center_distance),u_viewport_size:new s.aQ(_,a.u_viewport_size)}),debug:(_,a)=>({u_color:new s.aR(_,a.u_color),u_matrix:new s.aN(_,a.u_matrix),u_overlay:new s.aL(_,a.u_overlay),u_overlay_scale:new s.aM(_,a.u_overlay_scale)}),clippingMask:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix)}),heatmap:(_,a)=>({u_extrude_scale:new s.aM(_,a.u_extrude_scale),u_intensity:new s.aM(_,a.u_intensity),u_matrix:new s.aN(_,a.u_matrix)}),heatmapTexture:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_world:new s.aQ(_,a.u_world),u_image:new s.aL(_,a.u_image),u_color_ramp:new s.aL(_,a.u_color_ramp),u_opacity:new s.aM(_,a.u_opacity)}),hillshade:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_image:new s.aL(_,a.u_image),u_latrange:new s.aQ(_,a.u_latrange),u_light:new s.aQ(_,a.u_light),u_shadow:new s.aR(_,a.u_shadow),u_highlight:new s.aR(_,a.u_highlight),u_accent:new s.aR(_,a.u_accent)}),hillshadePrepare:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_image:new s.aL(_,a.u_image),u_dimension:new s.aQ(_,a.u_dimension),u_zoom:new s.aM(_,a.u_zoom),u_unpack:new s.aO(_,a.u_unpack)}),line:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_ratio:new s.aM(_,a.u_ratio),u_device_pixel_ratio:new s.aM(_,a.u_device_pixel_ratio),u_units_to_pixels:new s.aQ(_,a.u_units_to_pixels)}),lineGradient:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_ratio:new s.aM(_,a.u_ratio),u_device_pixel_ratio:new s.aM(_,a.u_device_pixel_ratio),u_units_to_pixels:new s.aQ(_,a.u_units_to_pixels),u_image:new s.aL(_,a.u_image),u_image_height:new s.aM(_,a.u_image_height)}),linePattern:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_texsize:new s.aQ(_,a.u_texsize),u_ratio:new s.aM(_,a.u_ratio),u_device_pixel_ratio:new s.aM(_,a.u_device_pixel_ratio),u_image:new s.aL(_,a.u_image),u_units_to_pixels:new s.aQ(_,a.u_units_to_pixels),u_scale:new s.aP(_,a.u_scale),u_fade:new s.aM(_,a.u_fade)}),lineSDF:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_ratio:new s.aM(_,a.u_ratio),u_device_pixel_ratio:new s.aM(_,a.u_device_pixel_ratio),u_units_to_pixels:new s.aQ(_,a.u_units_to_pixels),u_patternscale_a:new s.aQ(_,a.u_patternscale_a),u_patternscale_b:new s.aQ(_,a.u_patternscale_b),u_sdfgamma:new s.aM(_,a.u_sdfgamma),u_image:new s.aL(_,a.u_image),u_tex_y_a:new s.aM(_,a.u_tex_y_a),u_tex_y_b:new s.aM(_,a.u_tex_y_b),u_mix:new s.aM(_,a.u_mix)}),raster:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_tl_parent:new s.aQ(_,a.u_tl_parent),u_scale_parent:new s.aM(_,a.u_scale_parent),u_buffer_scale:new s.aM(_,a.u_buffer_scale),u_fade_t:new s.aM(_,a.u_fade_t),u_opacity:new s.aM(_,a.u_opacity),u_image0:new s.aL(_,a.u_image0),u_image1:new s.aL(_,a.u_image1),u_brightness_low:new s.aM(_,a.u_brightness_low),u_brightness_high:new s.aM(_,a.u_brightness_high),u_saturation_factor:new s.aM(_,a.u_saturation_factor),u_contrast_factor:new s.aM(_,a.u_contrast_factor),u_spin_weights:new s.aP(_,a.u_spin_weights)}),symbolIcon:(_,a)=>({u_is_size_zoom_constant:new s.aL(_,a.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aL(_,a.u_is_size_feature_constant),u_size_t:new s.aM(_,a.u_size_t),u_size:new s.aM(_,a.u_size),u_camera_to_center_distance:new s.aM(_,a.u_camera_to_center_distance),u_pitch:new s.aM(_,a.u_pitch),u_rotate_symbol:new s.aL(_,a.u_rotate_symbol),u_aspect_ratio:new s.aM(_,a.u_aspect_ratio),u_fade_change:new s.aM(_,a.u_fade_change),u_matrix:new s.aN(_,a.u_matrix),u_label_plane_matrix:new s.aN(_,a.u_label_plane_matrix),u_coord_matrix:new s.aN(_,a.u_coord_matrix),u_is_text:new s.aL(_,a.u_is_text),u_pitch_with_map:new s.aL(_,a.u_pitch_with_map),u_texsize:new s.aQ(_,a.u_texsize),u_texture:new s.aL(_,a.u_texture)}),symbolSDF:(_,a)=>({u_is_size_zoom_constant:new s.aL(_,a.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aL(_,a.u_is_size_feature_constant),u_size_t:new s.aM(_,a.u_size_t),u_size:new s.aM(_,a.u_size),u_camera_to_center_distance:new s.aM(_,a.u_camera_to_center_distance),u_pitch:new s.aM(_,a.u_pitch),u_rotate_symbol:new s.aL(_,a.u_rotate_symbol),u_aspect_ratio:new s.aM(_,a.u_aspect_ratio),u_fade_change:new s.aM(_,a.u_fade_change),u_matrix:new s.aN(_,a.u_matrix),u_label_plane_matrix:new s.aN(_,a.u_label_plane_matrix),u_coord_matrix:new s.aN(_,a.u_coord_matrix),u_is_text:new s.aL(_,a.u_is_text),u_pitch_with_map:new s.aL(_,a.u_pitch_with_map),u_texsize:new s.aQ(_,a.u_texsize),u_texture:new s.aL(_,a.u_texture),u_gamma_scale:new s.aM(_,a.u_gamma_scale),u_device_pixel_ratio:new s.aM(_,a.u_device_pixel_ratio),u_is_halo:new s.aL(_,a.u_is_halo)}),symbolTextAndIcon:(_,a)=>({u_is_size_zoom_constant:new s.aL(_,a.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aL(_,a.u_is_size_feature_constant),u_size_t:new s.aM(_,a.u_size_t),u_size:new s.aM(_,a.u_size),u_camera_to_center_distance:new s.aM(_,a.u_camera_to_center_distance),u_pitch:new s.aM(_,a.u_pitch),u_rotate_symbol:new s.aL(_,a.u_rotate_symbol),u_aspect_ratio:new s.aM(_,a.u_aspect_ratio),u_fade_change:new s.aM(_,a.u_fade_change),u_matrix:new s.aN(_,a.u_matrix),u_label_plane_matrix:new s.aN(_,a.u_label_plane_matrix),u_coord_matrix:new s.aN(_,a.u_coord_matrix),u_is_text:new s.aL(_,a.u_is_text),u_pitch_with_map:new s.aL(_,a.u_pitch_with_map),u_texsize:new s.aQ(_,a.u_texsize),u_texsize_icon:new s.aQ(_,a.u_texsize_icon),u_texture:new s.aL(_,a.u_texture),u_texture_icon:new s.aL(_,a.u_texture_icon),u_gamma_scale:new s.aM(_,a.u_gamma_scale),u_device_pixel_ratio:new s.aM(_,a.u_device_pixel_ratio),u_is_halo:new s.aL(_,a.u_is_halo)}),background:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_opacity:new s.aM(_,a.u_opacity),u_color:new s.aR(_,a.u_color)}),backgroundPattern:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_opacity:new s.aM(_,a.u_opacity),u_image:new s.aL(_,a.u_image),u_pattern_tl_a:new s.aQ(_,a.u_pattern_tl_a),u_pattern_br_a:new s.aQ(_,a.u_pattern_br_a),u_pattern_tl_b:new s.aQ(_,a.u_pattern_tl_b),u_pattern_br_b:new s.aQ(_,a.u_pattern_br_b),u_texsize:new s.aQ(_,a.u_texsize),u_mix:new s.aM(_,a.u_mix),u_pattern_size_a:new s.aQ(_,a.u_pattern_size_a),u_pattern_size_b:new s.aQ(_,a.u_pattern_size_b),u_scale_a:new s.aM(_,a.u_scale_a),u_scale_b:new s.aM(_,a.u_scale_b),u_pixel_coord_upper:new s.aQ(_,a.u_pixel_coord_upper),u_pixel_coord_lower:new s.aQ(_,a.u_pixel_coord_lower),u_tile_units_to_pixels:new s.aM(_,a.u_tile_units_to_pixels)}),terrain:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_texture:new s.aL(_,a.u_texture),u_ele_delta:new s.aM(_,a.u_ele_delta)}),terrainDepth:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_ele_delta:new s.aM(_,a.u_ele_delta)}),terrainCoords:(_,a)=>({u_matrix:new s.aN(_,a.u_matrix),u_texture:new s.aL(_,a.u_texture),u_terrain_coords_id:new s.aM(_,a.u_terrain_coords_id),u_ele_delta:new s.aM(_,a.u_ele_delta)})};class Ud{constructor(a,d,p){this.context=a;const v=a.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const bu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Hd{constructor(a,d,p,v){this.length=d.length,this.attributes=p,this.itemSize=d.bytesPerElement,this.dynamicDraw=v,this.context=a;const b=a.gl;this.buffer=b.createBuffer(),a.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,d){for(let p=0;p<this.attributes.length;p++){const v=d.attributes[this.attributes[p].name];v!==void 0&&a.enableVertexAttribArray(v)}}setVertexAttribPointers(a,d,p){for(let v=0;v<this.attributes.length;v++){const b=this.attributes[v],k=d.attributes[b.name];k!==void 0&&a.vertexAttribPointer(k,b.components,a[bu[b.type]],!1,this.itemSize,b.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const hc=new WeakMap;function $s(_){var a;if(hc.has(_))return hc.get(_);{const d=(a=_.getParameter(_.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return hc.set(_,d),d}}class $r{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Gd extends $r{getDefault(){return s.aT.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class ko extends $r{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class To extends $r{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class op extends $r{getDefault(){return[!0,!0,!0,!0]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Wd extends $r{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class qd extends $r{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class ap extends $r{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const d=this.current;(a.func!==d.func||a.ref!==d.ref||a.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class sp extends $r{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Zd extends $r{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=a,this.dirty=!1}}class lp extends $r{getDefault(){return[0,1]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class cp extends $r{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=a,this.dirty=!1}}class Kd extends $r{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class Bv extends $r{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.BLEND):d.disable(d.BLEND),this.current=a,this.dirty=!1}}class Fv extends $r{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class fc extends $r{getDefault(){return s.aT.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Kb extends $r{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Xb extends $r{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=a,this.dirty=!1}}class Yb extends $r{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class Jb extends $r{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class Qb extends $r{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class e1 extends $r{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class up extends $r{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Xd extends $r{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class dp extends $r{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class hp extends $r{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class pc extends $r{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Nv extends $r{getDefault(){return null}set(a){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class jv extends $r{getDefault(){return null}set(a){var d;if(a===this.current&&!this.dirty)return;const p=this.gl;$s(p)?p.bindVertexArray(a):(d=p.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class fp extends $r{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class vl extends $r{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class Vv extends $r{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Bs extends $r{constructor(a,d){super(a),this.context=a,this.parent=d}getDefault(){return null}}class mc extends Bs{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class Uv extends Bs{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class pp extends Bs{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Jr{constructor(a,d,p,v,b){this.context=a,this.width=d,this.height=p;const k=a.gl,E=this.framebuffer=k.createFramebuffer();if(this.colorAttachment=new mc(a,E),v)this.depthAttachment=b?new pp(a,E):new Uv(a,E);else if(b)throw new Error("Stencil cannot be setted without depth");if(k.checkFramebufferStatus(k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const a=this.context.gl,d=this.colorAttachment.get();if(d&&a.deleteTexture(d),this.depthAttachment){const p=this.depthAttachment.get();p&&a.deleteRenderbuffer(p)}a.deleteFramebuffer(this.framebuffer)}}class Pn{constructor(a,d,p){this.blendFunction=a,this.blendColor=d,this.mask=p}}Pn.Replace=[1,0],Pn.disabled=new Pn(Pn.Replace,s.aT.transparent,[!1,!1,!1,!1]),Pn.unblended=new Pn(Pn.Replace,s.aT.transparent,[!0,!0,!0,!0]),Pn.alphaBlended=new Pn([1,771],s.aT.transparent,[!0,!0,!0,!0]);class t1{constructor(a){var d,p;if(this.gl=a,this.clearColor=new Gd(this),this.clearDepth=new ko(this),this.clearStencil=new To(this),this.colorMask=new op(this),this.depthMask=new Wd(this),this.stencilMask=new qd(this),this.stencilFunc=new ap(this),this.stencilOp=new sp(this),this.stencilTest=new Zd(this),this.depthRange=new lp(this),this.depthTest=new cp(this),this.depthFunc=new Kd(this),this.blend=new Bv(this),this.blendFunc=new Fv(this),this.blendColor=new fc(this),this.blendEquation=new Kb(this),this.cullFace=new Xb(this),this.cullFaceSide=new Yb(this),this.frontFace=new Jb(this),this.program=new Qb(this),this.activeTexture=new e1(this),this.viewport=new up(this),this.bindFramebuffer=new Xd(this),this.bindRenderbuffer=new dp(this),this.bindTexture=new hp(this),this.bindVertexBuffer=new pc(this),this.bindElementBuffer=new Nv(this),this.bindVertexArray=new jv(this),this.pixelStoreUnpack=new fp(this),this.pixelStoreUnpackPremultiplyAlpha=new vl(this),this.pixelStoreUnpackFlipY=new Vv(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),$s(a)){this.HALF_FLOAT=a.HALF_FLOAT;const v=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=a.RGBA16F)!==null&&d!==void 0?d:v==null?void 0:v.RGBA16F_EXT,this.RGB16F=(p=a.RGB16F)!==null&&p!==void 0?p:v==null?void 0:v.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const v=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=v==null?void 0:v.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,d){return new Ud(this,a,d)}createVertexBuffer(a,d,p){return new Hd(this,a,d,p)}createRenderbuffer(a,d,p){const v=this.gl,b=v.createRenderbuffer();return this.bindRenderbuffer.set(b),v.renderbufferStorage(v.RENDERBUFFER,a,d,p),this.bindRenderbuffer.set(null),b}createFramebuffer(a,d,p,v){return new Jr(this,a,d,p,v)}clear({color:a,depth:d,stencil:p}){const v=this.gl;let b=0;a&&(b|=v.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(b|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),p!==void 0&&(b|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),v.clear(b)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){s.aG(a.blendFunction,Pn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return $s(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var d;return $s(this.gl)?this.gl.deleteVertexArray(a):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}class Br{constructor(a,d,p){this.func=a,this.mask=d,this.range=p}}Br.ReadOnly=!1,Br.ReadWrite=!0,Br.disabled=new Br(519,Br.ReadOnly,[0,1]);const yl=7680;class An{constructor(a,d,p,v,b,k){this.test=a,this.ref=d,this.mask=p,this.fail=v,this.depthFail=b,this.pass=k}}An.disabled=new An({func:519,mask:0},0,0,yl,yl,yl);class Sn{constructor(a,d,p){this.enable=a,this.mode=d,this.frontFace=p}}let wu;function Hv(_,a,d,p,v,b,k){const E=_.context,A=E.gl,B=_.useProgram("collisionBox"),G=[];let W=0,ne=0;for(let ye=0;ye<p.length;ye++){const Me=p[ye],qe=a.getTile(Me),Ke=qe.getBucket(d);if(!Ke)continue;let Je=Me.posMatrix;v[0]===0&&v[1]===0||(Je=_.translatePosMatrix(Me.posMatrix,qe,v,b));const lt=k?Ke.textCollisionBox:Ke.iconCollisionBox,nt=Ke.collisionCircleArray;if(nt.length>0){const mt=s.Z(),qt=Je;s.aU(mt,Ke.placementInvProjMatrix,_.transform.glCoordMatrix),s.aU(mt,mt,Ke.placementViewportMatrix),G.push({circleArray:nt,circleOffset:ne,transform:qt,invTransform:mt,coord:Me}),W+=nt.length/4,ne=W}lt&&B.draw(E,A.LINES,Br.disabled,An.disabled,_.colorModeForRenderPass(),Sn.disabled,ep(Je,_.transform,qe),_.style.map.terrain&&_.style.map.terrain.getTerrainData(Me),d.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,null,_.transform.zoom,null,null,lt.collisionVertexBuffer)}if(!k||!G.length)return;const fe=_.useProgram("collisionCircle"),de=new s.aV;de.resize(4*W),de._trim();let me=0;for(const ye of G)for(let Me=0;Me<ye.circleArray.length/4;Me++){const qe=4*Me,Ke=ye.circleArray[qe+0],Je=ye.circleArray[qe+1],lt=ye.circleArray[qe+2],nt=ye.circleArray[qe+3];de.emplace(me++,Ke,Je,lt,nt,0),de.emplace(me++,Ke,Je,lt,nt,1),de.emplace(me++,Ke,Je,lt,nt,2),de.emplace(me++,Ke,Je,lt,nt,3)}(!wu||wu.length<2*W)&&(wu=function(ye){const Me=2*ye,qe=new s.aX;qe.resize(Me),qe._trim();for(let Ke=0;Ke<Me;Ke++){const Je=6*Ke;qe.uint16[Je+0]=4*Ke+0,qe.uint16[Je+1]=4*Ke+1,qe.uint16[Je+2]=4*Ke+2,qe.uint16[Je+3]=4*Ke+2,qe.uint16[Je+4]=4*Ke+3,qe.uint16[Je+5]=4*Ke+0}return qe}(W));const le=E.createIndexBuffer(wu,!0),Ie=E.createVertexBuffer(de,s.aW.members,!0);for(const ye of G){const Me={u_matrix:ye.transform,u_inv_matrix:ye.invTransform,u_camera_to_center_distance:(Ue=_.transform).cameraToCenterDistance,u_viewport_size:[Ue.width,Ue.height]};fe.draw(E,A.TRIANGLES,Br.disabled,An.disabled,_.colorModeForRenderPass(),Sn.disabled,Me,_.style.map.terrain&&_.style.map.terrain.getTerrainData(ye.coord),d.id,Ie,le,s.S.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,_.transform.zoom,null,null,null)}var Ue;Ie.destroy(),le.destroy()}Sn.disabled=new Sn(!1,1029,2305),Sn.backCCW=new Sn(!0,1029,2305);const mp=s.ao(new Float32Array(16));function Yd(_,a,d,p,v,b){const{horizontalAlign:k,verticalAlign:E}=s.au(_);return new s.P((-(k-.5)*a/v+p[0])*b,(-(E-.5)*d/v+p[1])*b)}function Jd(_,a,d,p,v,b,k,E,A,B,G){const W=_.text.placedSymbolArray,ne=_.text.dynamicLayoutVertexArray,fe=_.icon.dynamicLayoutVertexArray,de={};ne.clear();for(let me=0;me<W.length;me++){const le=W.get(me),Ie=le.hidden||!le.crossTileID||_.allowVerticalPlacement&&!le.placedOrientation?null:p[le.crossTileID];if(Ie){const Ue=new s.P(le.anchorX,le.anchorY),ye=bt(Ue,d?k:b,G),Me=Ee(v.cameraToCenterDistance,ye.signedDistanceFromCamera);let qe=s.aj(_.textSizeData,A,le)*Me/s.ap;d&&(qe*=_.tilePixelRatio/E);const{width:Ke,height:Je,anchor:lt,textOffset:nt,textBoxScale:mt}=Ie,qt=Yd(lt,Ke,Je,nt,mt,qe),Ir=d?bt(Ue.add(qt),b,G).point:ye.point.add(a?qt.rotate(-v.angle):qt),Pt=_.allowVerticalPlacement&&le.placedOrientation===s.ai.vertical?Math.PI/2:0;for(let ur=0;ur<le.numGlyphs;ur++)s.ak(ne,Ir,Pt);B&&le.associatedIconIndex>=0&&(de[le.associatedIconIndex]={shiftedAnchor:Ir,angle:Pt})}else N(le.numGlyphs,ne)}if(B){fe.clear();const me=_.icon.placedSymbolArray;for(let le=0;le<me.length;le++){const Ie=me.get(le);if(Ie.hidden)N(Ie.numGlyphs,fe);else{const Ue=de[le];if(Ue)for(let ye=0;ye<Ie.numGlyphs;ye++)s.ak(fe,Ue.shiftedAnchor,Ue.angle);else N(Ie.numGlyphs,fe)}}_.icon.dynamicLayoutVertexBuffer.updateData(fe)}_.text.dynamicLayoutVertexBuffer.updateData(ne)}function gp(_,a,d){return d.iconsInText&&a?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Qd(_,a,d,p,v,b,k,E,A,B,G,W){const ne=_.context,fe=ne.gl,de=_.transform,me=E==="map",le=A==="map",Ie=E!=="viewport"&&d.layout.get("symbol-placement")!=="point",Ue=me&&!le&&!Ie,ye=!d.layout.get("symbol-sort-key").isConstant();let Me=!1;const qe=_.depthModeForSublayer(0,Br.ReadOnly),Ke=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Je=[];for(const lt of p){const nt=a.getTile(lt),mt=nt.getBucket(d);if(!mt)continue;const qt=v?mt.text:mt.icon;if(!qt||!qt.segments.get().length||!qt.hasVisibleVertices)continue;const Ir=qt.programConfigurations.get(d.id),Pt=v||mt.sdfIcons,ur=v?mt.textSizeData:mt.iconSizeData,Kt=le||de.pitch!==0,sn=_.useProgram(gp(Pt,v,mt),Ir),Er=s.ah(ur,de.zoom),br=_.style.map.terrain&&_.style.map.terrain.getTerrainData(lt);let Pr,Nn,mn,Ci,li=[0,0],Kn=null;if(v)Nn=nt.glyphAtlasTexture,mn=fe.LINEAR,Pr=nt.glyphAtlasTexture.size,mt.iconsInText&&(li=nt.imageAtlasTexture.size,Kn=nt.imageAtlasTexture,Ci=Kt||_.options.rotating||_.options.zooming||ur.kind==="composite"||ur.kind==="camera"?fe.LINEAR:fe.NEAREST);else{const jn=d.layout.get("icon-size").constantOr(0)!==1||mt.iconsNeedLinear;Nn=nt.imageAtlasTexture,mn=Pt||_.options.rotating||_.options.zooming||jn||Kt?fe.LINEAR:fe.NEAREST,Pr=nt.imageAtlasTexture.size}const Po=pe(nt,1,_.transform.zoom),xn=je(lt.posMatrix,le,me,_.transform,Po),Ia=kt(lt.posMatrix,le,me,_.transform,Po),Pa=Ke&&mt.hasTextData(),js=d.layout.get("icon-text-fit")!=="none"&&Pa&&mt.hasIconData();if(Ie){const jn=_.style.map.terrain?(io,Vn)=>_.style.map.terrain.getElevation(lt,io,Vn):null,ci=d.layout.get("text-rotation-alignment")==="map";Xe(mt,lt.posMatrix,_,v,xn,Ia,le,B,ci,jn)}const Sl=_.translatePosMatrix(lt.posMatrix,nt,b,k),wc=Ie||v&&Ke||js?mp:xn,Ai=_.translatePosMatrix(Ia,nt,b,k,!0),ki=Pt&&d.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ui;Ui=Pt?mt.iconsInText?gl(ur.kind,Er,Ue,le,_,Sl,wc,Ai,Pr,li):ip(ur.kind,Er,Ue,le,_,Sl,wc,Ai,v,Pr,!0):np(ur.kind,Er,Ue,le,_,Sl,wc,Ai,v,Pr);const Cl={program:sn,buffers:qt,uniformValues:Ui,atlasTexture:Nn,atlasTextureIcon:Kn,atlasInterpolation:mn,atlasInterpolationIcon:Ci,isSDF:Pt,hasHalo:ki};if(ye&&mt.canOverlap){Me=!0;const jn=qt.segments.get();for(const ci of jn)Je.push({segments:new s.S([ci]),sortKey:ci.sortKey,state:Cl,terrainData:br})}else Je.push({segments:qt.segments,sortKey:0,state:Cl,terrainData:br})}Me&&Je.sort((lt,nt)=>lt.sortKey-nt.sortKey);for(const lt of Je){const nt=lt.state;if(ne.activeTexture.set(fe.TEXTURE0),nt.atlasTexture.bind(nt.atlasInterpolation,fe.CLAMP_TO_EDGE),nt.atlasTextureIcon&&(ne.activeTexture.set(fe.TEXTURE1),nt.atlasTextureIcon&&nt.atlasTextureIcon.bind(nt.atlasInterpolationIcon,fe.CLAMP_TO_EDGE)),nt.isSDF){const mt=nt.uniformValues;nt.hasHalo&&(mt.u_is_halo=1,vp(nt.buffers,lt.segments,d,_,nt.program,qe,G,W,mt,lt.terrainData)),mt.u_is_halo=0}vp(nt.buffers,lt.segments,d,_,nt.program,qe,G,W,nt.uniformValues,lt.terrainData)}}function vp(_,a,d,p,v,b,k,E,A,B){const G=p.context;v.draw(G,G.gl.TRIANGLES,b,k,E,Sn.disabled,A,B,d.id,_.layoutVertexBuffer,_.indexBuffer,a,d.paint,p.transform.zoom,_.programConfigurations.get(d.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Su(_,a,d,p,v){if(!d||!p||!p.imageAtlas)return;const b=p.imageAtlas.patternPositions;let k=b[d.to.toString()],E=b[d.from.toString()];if(!k&&E&&(k=E),!E&&k&&(E=k),!k||!E){const A=v.getPaintProperty(a);k=b[A],E=b[A]}k&&E&&_.setConstantPatternPositions(k,E)}function Cu(_,a,d,p,v,b,k){const E=_.context.gl,A="fill-pattern",B=d.paint.get(A),G=B&&B.constantOr(1),W=d.getCrossfadeParameters();let ne,fe,de,me,le;k?(fe=G&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ne=E.LINES):(fe=G?"fillPattern":"fill",ne=E.TRIANGLES);const Ie=B.constantOr(null);for(const Ue of p){const ye=a.getTile(Ue);if(G&&!ye.patternsLoaded())continue;const Me=ye.getBucket(d);if(!Me)continue;const qe=Me.programConfigurations.get(d.id),Ke=_.useProgram(fe,qe),Je=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ue);G&&(_.context.activeTexture.set(E.TEXTURE0),ye.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),qe.updatePaintBuffers(W)),Su(qe,A,Ie,ye,d);const lt=Je?Ue:null,nt=_.translatePosMatrix(lt?lt.posMatrix:Ue.posMatrix,ye,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(k){me=Me.indexBuffer2,le=Me.segments2;const mt=[E.drawingBufferWidth,E.drawingBufferHeight];de=fe==="fillOutlinePattern"&&G?Fd(nt,_,W,ye,mt):Bd(nt,mt)}else me=Me.indexBuffer,le=Me.segments,de=G?Qf(nt,_,W,ye):Rv(nt);Ke.draw(_.context,ne,v,_.stencilModeForClipping(Ue),b,Sn.disabled,de,Je,d.id,Me.layoutVertexBuffer,me,le,d.paint,_.transform.zoom,qe)}}function ku(_,a,d,p,v,b,k){const E=_.context,A=E.gl,B="fill-extrusion-pattern",G=d.paint.get(B),W=G.constantOr(1),ne=d.getCrossfadeParameters(),fe=d.paint.get("fill-extrusion-opacity"),de=G.constantOr(null);for(const me of p){const le=a.getTile(me),Ie=le.getBucket(d);if(!Ie)continue;const Ue=_.style.map.terrain&&_.style.map.terrain.getTerrainData(me),ye=Ie.programConfigurations.get(d.id),Me=_.useProgram(W?"fillExtrusionPattern":"fillExtrusion",ye);W&&(_.context.activeTexture.set(A.TEXTURE0),le.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),ye.updatePaintBuffers(ne)),Su(ye,B,de,le,d);const qe=_.translatePosMatrix(me.posMatrix,le,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Ke=d.paint.get("fill-extrusion-vertical-gradient"),Je=W?Ls(qe,_,Ke,fe,me,ne,le):Jf(qe,_,Ke,fe);Me.draw(E,E.gl.TRIANGLES,v,b,k,Sn.backCCW,Je,Ue,d.id,Ie.layoutVertexBuffer,Ie.indexBuffer,Ie.segments,d.paint,_.transform.zoom,ye,_.style.map.terrain&&Ie.centroidVertexBuffer)}}function r1(_,a,d,p,v,b,k){const E=_.context,A=E.gl,B=d.fbo;if(!B)return;const G=_.useProgram("hillshade"),W=_.style.map.terrain&&_.style.map.terrain.getTerrainData(a);E.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,B.colorAttachment.get()),G.draw(E,A.TRIANGLES,v,b,k,Sn.disabled,((ne,fe,de,me)=>{const le=de.paint.get("hillshade-shadow-color"),Ie=de.paint.get("hillshade-highlight-color"),Ue=de.paint.get("hillshade-accent-color");let ye=de.paint.get("hillshade-illumination-direction")*(Math.PI/180);de.paint.get("hillshade-illumination-anchor")==="viewport"&&(ye-=ne.transform.angle);const Me=!ne.options.moving;return{u_matrix:me?me.posMatrix:ne.transform.calculatePosMatrix(fe.tileID.toUnwrapped(),Me),u_image:0,u_latrange:tp(0,fe.tileID),u_light:[de.paint.get("hillshade-exaggeration"),ye],u_shadow:le,u_highlight:Ie,u_accent:Ue}})(_,d,p,W?a:null),W,p.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function yp(_,a,d,p,v,b){const k=_.context,E=k.gl,A=a.dem;if(A&&A.data){const B=A.dim,G=A.stride,W=A.getPixels();if(k.activeTexture.set(E.TEXTURE1),k.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||_.getTileTexture(G),a.demTexture){const fe=a.demTexture;fe.update(W,{premultiply:!1}),fe.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else a.demTexture=new ge(k,W,E.RGBA,{premultiply:!1}),a.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);k.activeTexture.set(E.TEXTURE0);let ne=a.fbo;if(!ne){const fe=new ge(k,{width:B,height:B,data:null},E.RGBA);fe.bind(E.LINEAR,E.CLAMP_TO_EDGE),ne=a.fbo=k.createFramebuffer(B,B,!0,!1),ne.colorAttachment.set(fe.texture)}k.bindFramebuffer.set(ne.framebuffer),k.viewport.set([0,0,B,B]),_.useProgram("hillshadePrepare").draw(k,E.TRIANGLES,p,v,b,Sn.disabled,((fe,de)=>{const me=de.stride,le=s.Z();return s.aS(le,0,s.N,-s.N,0,0,1),s.$(le,le,[0,-s.N,0]),{u_matrix:le,u_image:1,u_dimension:[me,me],u_zoom:fe.overscaledZ,u_unpack:de.getUnpackVector()}})(a.tileID,A),null,d.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),a.needsHillshadePrepare=!1}}function n1(_,a,d,p,v,b){const k=p.paint.get("raster-fade-duration");if(!b&&k>0){const E=s.h.now(),A=(E-_.timeAdded)/k,B=a?(E-a.timeAdded)/k:-1,G=d.getSource(),W=v.coveringZoomLevel({tileSize:G.tileSize,roundZoom:G.roundZoom}),ne=!a||Math.abs(a.tileID.overscaledZ-W)>Math.abs(_.tileID.overscaledZ-W),fe=ne&&_.refreshedUponExpiration?1:s.ad(ne?A:1-B,0,1);return _.refreshedUponExpiration&&A>=1&&(_.refreshedUponExpiration=!1),a?{opacity:1,mix:1-fe}:{opacity:fe,mix:0}}return{opacity:1,mix:0}}const Gv=new s.aT(1,0,0,1),eh=new s.aT(0,1,0,1),_p=new s.aT(0,0,1,1),Wv=new s.aT(1,0,1,1),qv=new s.aT(0,1,1,1);function Tu(_,a,d,p){rh(_,0,a+d/2,_.transform.width,d,p)}function th(_,a,d,p){rh(_,a-d/2,0,d,_.transform.height,p)}function rh(_,a,d,p,v,b){const k=_.context,E=k.gl;E.enable(E.SCISSOR_TEST),E.scissor(a*_.pixelRatio,d*_.pixelRatio,p*_.pixelRatio,v*_.pixelRatio),k.clear({color:b}),E.disable(E.SCISSOR_TEST)}function Zv(_,a,d){const p=_.context,v=p.gl,b=d.posMatrix,k=_.useProgram("debug"),E=Br.disabled,A=An.disabled,B=_.colorModeForRenderPass(),G="$debug",W=_.style.map.terrain&&_.style.map.terrain.getTerrainData(d);p.activeTexture.set(v.TEXTURE0);const ne=a.getTileByID(d.key).latestRawTileData,fe=Math.floor((ne&&ne.byteLength||0)/1024),de=a.getTile(d).tileSize,me=512/Math.min(de,512)*(d.overscaledZ/_.transform.zoom)*.5;let le=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(le+=` => ${d.overscaledZ}`),function(Ie,Ue){Ie.initDebugOverlayCanvas();const ye=Ie.debugOverlayCanvas,Me=Ie.context.gl,qe=Ie.debugOverlayCanvas.getContext("2d");qe.clearRect(0,0,ye.width,ye.height),qe.shadowColor="white",qe.shadowBlur=2,qe.lineWidth=1.5,qe.strokeStyle="white",qe.textBaseline="top",qe.font="bold 36px Open Sans, sans-serif",qe.fillText(Ue,5,5),qe.strokeText(Ue,5,5),Ie.debugOverlayTexture.update(ye),Ie.debugOverlayTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE)}(_,`${le} ${fe}kB`),k.draw(p,v.TRIANGLES,E,A,Pn.alphaBlended,Sn.disabled,xu(b,s.aT.transparent,me),null,G,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),k.draw(p,v.LINE_STRIP,E,A,B,Sn.disabled,xu(b,s.aT.red),W,G,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function Ln(_,a,d){const p=_.context,v=p.gl,b=_.colorModeForRenderPass(),k=new Br(v.LEQUAL,Br.ReadWrite,_.depthRangeFor3D),E=_.useProgram("terrain"),A=a.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,_.width,_.height]);for(const B of d){const G=_.renderToTexture.getTexture(B),W=a.getTerrainData(B.tileID);p.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,G.texture);const ne={u_matrix:_.transform.calculatePosMatrix(B.tileID.toUnwrapped()),u_texture:0,u_ele_delta:a.getMeshFrameDelta(_.transform.zoom)};E.draw(p,v.TRIANGLES,k,An.disabled,b,Sn.backCCW,ne,W,"terrain",A.vertexBuffer,A.indexBuffer,A.segments)}}class _l{constructor(a,d){this.context=new t1(a),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.Z(),renderTime:0},this.setup(),this.numSublayers=xr.maxUnderzooming+xr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wt}resize(a,d,p){if(this.width=Math.floor(a*p),this.height=Math.floor(d*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const a=this.context,d=new s.a_;d.emplaceBack(0,0),d.emplaceBack(s.N,0),d.emplaceBack(0,s.N),d.emplaceBack(s.N,s.N),this.tileExtentBuffer=a.createVertexBuffer(d,Co.members),this.tileExtentSegments=s.S.simpleSegment(0,0,4,2);const p=new s.a_;p.emplaceBack(0,0),p.emplaceBack(s.N,0),p.emplaceBack(0,s.N),p.emplaceBack(s.N,s.N),this.debugBuffer=a.createVertexBuffer(p,Co.members),this.debugSegments=s.S.simpleSegment(0,0,4,5);const v=new s.V;v.emplaceBack(0,0,0,0),v.emplaceBack(s.N,0,s.N,0),v.emplaceBack(0,s.N,0,s.N),v.emplaceBack(s.N,s.N,s.N,s.N),this.rasterBoundsBuffer=a.createVertexBuffer(v,rt.members),this.rasterBoundsSegments=s.S.simpleSegment(0,0,4,2);const b=new s.a_;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(b,Co.members),this.viewportSegments=s.S.simpleSegment(0,0,4,2);const k=new s.a$;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(k);const E=new s.b0;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(E);const A=this.context.gl;this.stencilClearMode=new An({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO)}clearStencil(){const a=this.context,d=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=s.Z();s.aS(p,0,this.width,this.height,0,0,1),s.a0(p,p,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(a,d.TRIANGLES,Br.disabled,this.stencilClearMode,Pn.disabled,Sn.disabled,Dv(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,d){if(this.currentStencilSource===a.source||!a.isTileClipped()||!d||!d.length)return;this.currentStencilSource=a.source;const p=this.context,v=p.gl;this.nextStencilID+d.length>256&&this.clearStencil(),p.setColorMode(Pn.disabled),p.setDepthMode(Br.disabled);const b=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of d){const E=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,A=this.style.map.terrain&&this.style.map.terrain.getTerrainData(k);b.draw(p,v.TRIANGLES,Br.disabled,new An({func:v.ALWAYS,mask:0},E,255,v.KEEP,v.KEEP,v.REPLACE),Pn.disabled,Sn.disabled,Dv(k.posMatrix),A,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,d=this.context.gl;return new An({func:d.NOTEQUAL,mask:255},a,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(a){const d=this.context.gl;return new An({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(a){const d=this.context.gl,p=a.sort((k,E)=>E.overscaledZ-k.overscaledZ),v=p[p.length-1].overscaledZ,b=p[0].overscaledZ-v+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const k={};for(let E=0;E<b;E++)k[E+v]=new An({func:d.GEQUAL,mask:255},E+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=b,[k,p]}return[{[v]:An.disabled},p]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new Pn([a.CONSTANT_COLOR,a.ONE],new s.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Pn.unblended:Pn.alphaBlended}depthModeForSublayer(a,d,p){if(!this.opaquePassEnabledForLayer())return Br.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Br(p||this.context.gl.LEQUAL,d,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,d){this.style=a,this.options=d,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(s.h.now()),this.imageManager.beginFrame();const p=this.style._order,v=this.style.sourceCaches,b={},k={},E={};for(const A in v){const B=v[A];B.used&&B.prepare(this.context),b[A]=B.getVisibleCoordinates(),k[A]=b[A].slice().reverse(),E[A]=B.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let A=0;A<p.length;A++)if(this.style._layers[p[A]].is3D()){this.opaquePassCutoff=A;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const A=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!s.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||A.length)&&(s.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(B,G){const W=B.context,ne=W.gl,fe=Pn.unblended,de=new Br(ne.LEQUAL,Br.ReadWrite,[0,1]),me=G.getTerrainMesh(),le=G.sourceCache.getRenderableTiles(),Ie=B.useProgram("terrainDepth");W.bindFramebuffer.set(G.getFramebuffer("depth").framebuffer),W.viewport.set([0,0,B.width/devicePixelRatio,B.height/devicePixelRatio]),W.clear({color:s.aT.transparent,depth:1});for(const Ue of le){const ye=G.getTerrainData(Ue.tileID),Me={u_matrix:B.transform.calculatePosMatrix(Ue.tileID.toUnwrapped()),u_ele_delta:G.getMeshFrameDelta(B.transform.zoom)};Ie.draw(W,ne.TRIANGLES,de,An.disabled,fe,Sn.backCCW,Me,ye,"terrain",me.vertexBuffer,me.indexBuffer,me.segments)}W.bindFramebuffer.set(null),W.viewport.set([0,0,B.width,B.height])}(this,this.style.map.terrain),function(B,G){const W=B.context,ne=W.gl,fe=Pn.unblended,de=new Br(ne.LEQUAL,Br.ReadWrite,[0,1]),me=G.getTerrainMesh(),le=G.getCoordsTexture(),Ie=G.sourceCache.getRenderableTiles(),Ue=B.useProgram("terrainCoords");W.bindFramebuffer.set(G.getFramebuffer("coords").framebuffer),W.viewport.set([0,0,B.width/devicePixelRatio,B.height/devicePixelRatio]),W.clear({color:s.aT.transparent,depth:1}),G.coordsIndex=[];for(const ye of Ie){const Me=G.getTerrainData(ye.tileID);W.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,le.texture);const qe={u_matrix:B.transform.calculatePosMatrix(ye.tileID.toUnwrapped()),u_terrain_coords_id:(255-G.coordsIndex.length)/255,u_texture:0,u_ele_delta:G.getMeshFrameDelta(B.transform.zoom)};Ue.draw(W,ne.TRIANGLES,de,An.disabled,fe,Sn.backCCW,qe,Me,"terrain",me.vertexBuffer,me.indexBuffer,me.segments),G.coordsIndex.push(ye.tileID.key)}W.bindFramebuffer.set(null),W.viewport.set([0,0,B.width,B.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const A of p){const B=this.style._layers[A];if(!B.hasOffscreenPass()||B.isHidden(this.transform.zoom))continue;const G=k[B.source];(B.type==="custom"||G.length)&&this.renderLayer(this,v[B.source],B,G)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?s.aT.black:s.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const A=this.style._layers[p[this.currentLayer]],B=v[A.source],G=b[A.source];this._renderTileClippingMasks(A,G),this.renderLayer(this,B,A,G)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const A=this.style._layers[p[this.currentLayer]],B=v[A.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(A))continue;const G=(A.type==="symbol"?E:k)[A.source];this._renderTileClippingMasks(A,b[A.source]),this.renderLayer(this,B,A,G)}if(this.options.showTileBoundaries){const A=function(B,G){let W=null;const ne=Object.values(B._layers).flatMap(le=>le.source&&!le.isHidden(G)?[B.sourceCaches[le.source]]:[]),fe=ne.filter(le=>le.getSource().type==="vector"),de=ne.filter(le=>le.getSource().type!=="vector"),me=le=>{(!W||W.getSource().maxzoom<le.getSource().maxzoom)&&(W=le)};return fe.forEach(le=>me(le)),W||de.forEach(le=>me(le)),W}(this.style,this.transform.zoom);A&&function(B,G,W){for(let ne=0;ne<W.length;ne++)Zv(B,G,W[ne])}(this,A,A.getVisibleCoordinates())}this.options.showPadding&&function(A){const B=A.transform.padding;Tu(A,A.transform.height-(B.top||0),3,Gv),Tu(A,B.bottom||0,3,eh),th(A,B.left||0,3,_p),th(A,A.transform.width-(B.right||0),3,Wv);const G=A.transform.centerPoint;(function(W,ne,fe,de){rh(W,ne-1,fe-10,2,20,de),rh(W,ne-10,fe-1,20,2,de)})(A,G.x,A.transform.height-G.y,qv)}(this),this.context.setDefault()}renderLayer(a,d,p,v){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(v||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(b,k,E,A,B){if(b.renderPass!=="translucent")return;const G=An.disabled,W=b.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ne,fe,de,me,le,Ie,Ue){const ye=fe.transform,Me=le==="map",qe=Ie==="map";for(const Ke of ne){const Je=me.getTile(Ke),lt=Je.getBucket(de);if(!lt||!lt.text||!lt.text.segments.get().length)continue;const nt=s.ah(lt.textSizeData,ye.zoom),mt=pe(Je,1,fe.transform.zoom),qt=je(Ke.posMatrix,qe,Me,fe.transform,mt),Ir=de.layout.get("icon-text-fit")!=="none"&&lt.hasIconData();if(nt){const Pt=Math.pow(2,ye.zoom-Je.tileID.overscaledZ);Jd(lt,Me,qe,Ue,ye,qt,Ke.posMatrix,Pt,nt,Ir,fe.style.map.terrain?(ur,Kt)=>fe.style.map.terrain.getElevation(Ke,ur,Kt):null)}}}(A,b,E,k,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),B),E.paint.get("icon-opacity").constantOr(1)!==0&&Qd(b,k,E,A,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),G,W),E.paint.get("text-opacity").constantOr(1)!==0&&Qd(b,k,E,A,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),G,W),k.map.showCollisionBoxes&&(Hv(b,k,E,A,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),!0),Hv(b,k,E,A,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),!1))})(a,d,p,v,this.style.placement.variableOffsets);break;case"circle":(function(b,k,E,A){if(b.renderPass!=="translucent")return;const B=E.paint.get("circle-opacity"),G=E.paint.get("circle-stroke-width"),W=E.paint.get("circle-stroke-opacity"),ne=!E.layout.get("circle-sort-key").isConstant();if(B.constantOr(1)===0&&(G.constantOr(1)===0||W.constantOr(1)===0))return;const fe=b.context,de=fe.gl,me=b.depthModeForSublayer(0,Br.ReadOnly),le=An.disabled,Ie=b.colorModeForRenderPass(),Ue=[];for(let ye=0;ye<A.length;ye++){const Me=A[ye],qe=k.getTile(Me),Ke=qe.getBucket(E);if(!Ke)continue;const Je=Ke.programConfigurations.get(E.id),lt=b.useProgram("circle",Je),nt=Ke.layoutVertexBuffer,mt=Ke.indexBuffer,qt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Me),Ir={programConfiguration:Je,program:lt,layoutVertexBuffer:nt,indexBuffer:mt,uniformValues:Os(b,Me,qe,E),terrainData:qt};if(ne){const Pt=Ke.segments.get();for(const ur of Pt)Ue.push({segments:new s.S([ur]),sortKey:ur.sortKey,state:Ir})}else Ue.push({segments:Ke.segments,sortKey:0,state:Ir})}ne&&Ue.sort((ye,Me)=>ye.sortKey-Me.sortKey);for(const ye of Ue){const{programConfiguration:Me,program:qe,layoutVertexBuffer:Ke,indexBuffer:Je,uniformValues:lt,terrainData:nt}=ye.state;qe.draw(fe,de.TRIANGLES,me,le,Ie,Sn.disabled,lt,nt,E.id,Ke,Je,ye.segments,E.paint,b.transform.zoom,Me)}})(a,d,p,v);break;case"heatmap":(function(b,k,E,A){if(E.paint.get("heatmap-opacity")!==0)if(b.renderPass==="offscreen"){const B=b.context,G=B.gl,W=An.disabled,ne=new Pn([G.ONE,G.ONE],s.aT.transparent,[!0,!0,!0,!0]);(function(fe,de,me){const le=fe.gl;fe.activeTexture.set(le.TEXTURE1),fe.viewport.set([0,0,de.width/4,de.height/4]);let Ie=me.heatmapFbo;if(Ie)le.bindTexture(le.TEXTURE_2D,Ie.colorAttachment.get()),fe.bindFramebuffer.set(Ie.framebuffer);else{const Ue=le.createTexture();le.bindTexture(le.TEXTURE_2D,Ue),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,le.CLAMP_TO_EDGE),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,le.LINEAR),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,le.LINEAR),Ie=me.heatmapFbo=fe.createFramebuffer(de.width/4,de.height/4,!1,!1),function(ye,Me,qe,Ke){var Je,lt;const nt=ye.gl,mt=(Je=ye.HALF_FLOAT)!==null&&Je!==void 0?Je:nt.UNSIGNED_BYTE,qt=(lt=ye.RGBA16F)!==null&&lt!==void 0?lt:nt.RGBA;nt.texImage2D(nt.TEXTURE_2D,0,qt,Me.width/4,Me.height/4,0,nt.RGBA,mt,null),Ke.colorAttachment.set(qe)}(fe,de,Ue,Ie)}})(B,b,E),B.clear({color:s.aT.transparent});for(let fe=0;fe<A.length;fe++){const de=A[fe];if(k.hasRenderableParent(de))continue;const me=k.getTile(de),le=me.getBucket(E);if(!le)continue;const Ie=le.programConfigurations.get(E.id),Ue=b.useProgram("heatmap",Ie),{zoom:ye}=b.transform;Ue.draw(B,G.TRIANGLES,Br.disabled,W,ne,Sn.disabled,qb(de.posMatrix,me,ye,E.paint.get("heatmap-intensity")),null,E.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,E.paint,b.transform.zoom,Ie)}B.viewport.set([0,0,b.width,b.height])}else b.renderPass==="translucent"&&(b.context.setColorMode(b.colorModeForRenderPass()),function(B,G){const W=B.context,ne=W.gl,fe=G.heatmapFbo;if(!fe)return;W.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,fe.colorAttachment.get()),W.activeTexture.set(ne.TEXTURE1);let de=G.colorRampTexture;de||(de=G.colorRampTexture=new ge(W,G.colorRamp,ne.RGBA)),de.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),B.useProgram("heatmapTexture").draw(W,ne.TRIANGLES,Br.disabled,An.disabled,B.colorModeForRenderPass(),Sn.disabled,((me,le,Ie,Ue)=>{const ye=s.Z();s.aS(ye,0,me.width,me.height,0,0,1);const Me=me.context.gl;return{u_matrix:ye,u_world:[Me.drawingBufferWidth,Me.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:le.paint.get("heatmap-opacity")}})(B,G),null,G.id,B.viewportBuffer,B.quadTriangleIndexBuffer,B.viewportSegments,G.paint,B.transform.zoom)}(b,E))})(a,d,p,v);break;case"line":(function(b,k,E,A){if(b.renderPass!=="translucent")return;const B=E.paint.get("line-opacity"),G=E.paint.get("line-width");if(B.constantOr(1)===0||G.constantOr(1)===0)return;const W=b.depthModeForSublayer(0,Br.ReadOnly),ne=b.colorModeForRenderPass(),fe=E.paint.get("line-dasharray"),de=E.paint.get("line-pattern"),me=de.constantOr(1),le=E.paint.get("line-gradient"),Ie=E.getCrossfadeParameters(),Ue=me?"linePattern":fe?"lineSDF":le?"lineGradient":"line",ye=b.context,Me=ye.gl;let qe=!0;for(const Ke of A){const Je=k.getTile(Ke);if(me&&!Je.patternsLoaded())continue;const lt=Je.getBucket(E);if(!lt)continue;const nt=lt.programConfigurations.get(E.id),mt=b.context.program.get(),qt=b.useProgram(Ue,nt),Ir=qe||qt.program!==mt,Pt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ke),ur=de.constantOr(null);if(ur&&Je.imageAtlas){const Er=Je.imageAtlas,br=Er.patternPositions[ur.to.toString()],Pr=Er.patternPositions[ur.from.toString()];br&&Pr&&nt.setConstantPatternPositions(br,Pr)}const Kt=Pt?Ke:null,sn=me?Zb(b,Je,E,Ie,Kt):fe?zv(b,Je,E,fe,Ie,Kt):le?Mv(b,Je,E,lt.lineClipsArray.length,Kt):rp(b,Je,E,Kt);if(me)ye.activeTexture.set(Me.TEXTURE0),Je.imageAtlasTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE),nt.updatePaintBuffers(Ie);else if(fe&&(Ir||b.lineAtlas.dirty))ye.activeTexture.set(Me.TEXTURE0),b.lineAtlas.bind(ye);else if(le){const Er=lt.gradients[E.id];let br=Er.texture;if(E.gradientVersion!==Er.version){let Pr=256;if(E.stepInterpolant){const Nn=k.getSource().maxzoom,mn=Ke.canonical.z===Nn?Math.ceil(1<<b.transform.maxZoom-Ke.canonical.z):1;Pr=s.ad(s.aY(lt.maxLineLength/s.N*1024*mn),256,ye.maxTextureSize)}Er.gradient=s.aZ({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:Pr,image:Er.gradient||void 0,clips:lt.lineClipsArray}),Er.texture?Er.texture.update(Er.gradient):Er.texture=new ge(ye,Er.gradient,Me.RGBA),Er.version=E.gradientVersion,br=Er.texture}ye.activeTexture.set(Me.TEXTURE0),br.bind(E.stepInterpolant?Me.NEAREST:Me.LINEAR,Me.CLAMP_TO_EDGE)}qt.draw(ye,Me.TRIANGLES,W,b.stencilModeForClipping(Ke),ne,Sn.disabled,sn,Pt,E.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,E.paint,b.transform.zoom,nt,lt.layoutVertexBuffer2),qe=!1}})(a,d,p,v);break;case"fill":(function(b,k,E,A){const B=E.paint.get("fill-color"),G=E.paint.get("fill-opacity");if(G.constantOr(1)===0)return;const W=b.colorModeForRenderPass(),ne=E.paint.get("fill-pattern"),fe=b.opaquePassEnabledForLayer()&&!ne.constantOr(1)&&B.constantOr(s.aT.transparent).a===1&&G.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===fe){const de=b.depthModeForSublayer(1,b.renderPass==="opaque"?Br.ReadWrite:Br.ReadOnly);Cu(b,k,E,A,de,W,!1)}if(b.renderPass==="translucent"&&E.paint.get("fill-antialias")){const de=b.depthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,Br.ReadOnly);Cu(b,k,E,A,de,W,!0)}})(a,d,p,v);break;case"fill-extrusion":(function(b,k,E,A){const B=E.paint.get("fill-extrusion-opacity");if(B!==0&&b.renderPass==="translucent"){const G=new Br(b.context.gl.LEQUAL,Br.ReadWrite,b.depthRangeFor3D);if(B!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))ku(b,k,E,A,G,An.disabled,Pn.disabled),ku(b,k,E,A,G,b.stencilModeFor3D(),b.colorModeForRenderPass());else{const W=b.colorModeForRenderPass();ku(b,k,E,A,G,An.disabled,W)}}})(a,d,p,v);break;case"hillshade":(function(b,k,E,A){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const B=b.context,G=b.depthModeForSublayer(0,Br.ReadOnly),W=b.colorModeForRenderPass(),[ne,fe]=b.renderPass==="translucent"?b.stencilConfigForOverlap(A):[{},A];for(const de of fe){const me=k.getTile(de);me.needsHillshadePrepare!==void 0&&me.needsHillshadePrepare&&b.renderPass==="offscreen"?yp(b,me,E,G,An.disabled,W):b.renderPass==="translucent"&&r1(b,de,me,E,G,ne[de.overscaledZ],W)}B.viewport.set([0,0,b.width,b.height])})(a,d,p,v);break;case"raster":(function(b,k,E,A){if(b.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!A.length)return;const B=b.context,G=B.gl,W=k.getSource(),ne=b.useProgram("raster"),fe=b.colorModeForRenderPass(),[de,me]=W instanceof pt?[{},A]:b.stencilConfigForOverlap(A),le=me[me.length-1].overscaledZ,Ie=!b.options.moving;for(const Ue of me){const ye=b.depthModeForSublayer(Ue.overscaledZ-le,E.paint.get("raster-opacity")===1?Br.ReadWrite:Br.ReadOnly,G.LESS),Me=k.getTile(Ue);Me.registerFadeDuration(E.paint.get("raster-fade-duration"));const qe=k.findLoadedParent(Ue,0),Ke=n1(Me,qe,k,E,b.transform,b.style.map.terrain);let Je,lt;const nt=E.paint.get("raster-resampling")==="nearest"?G.NEAREST:G.LINEAR;B.activeTexture.set(G.TEXTURE0),Me.texture.bind(nt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),B.activeTexture.set(G.TEXTURE1),qe?(qe.texture.bind(nt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),Je=Math.pow(2,qe.tileID.overscaledZ-Me.tileID.overscaledZ),lt=[Me.tileID.canonical.x*Je%1,Me.tileID.canonical.y*Je%1]):Me.texture.bind(nt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST);const mt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ue),qt=mt?Ue:null,Ir=qt?qt.posMatrix:b.transform.calculatePosMatrix(Ue.toUnwrapped(),Ie),Pt=Ov(Ir,lt||[0,0],Je||1,Ke,E);W instanceof pt?ne.draw(B,G.TRIANGLES,ye,An.disabled,fe,Sn.disabled,Pt,mt,E.id,W.boundsBuffer,b.quadTriangleIndexBuffer,W.boundsSegments):ne.draw(B,G.TRIANGLES,ye,de[Ue.overscaledZ],fe,Sn.disabled,Pt,mt,E.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}})(a,d,p,v);break;case"background":(function(b,k,E,A){const B=E.paint.get("background-color"),G=E.paint.get("background-opacity");if(G===0)return;const W=b.context,ne=W.gl,fe=b.transform,de=fe.tileSize,me=E.paint.get("background-pattern");if(b.isPatternMissing(me))return;const le=!me&&B.a===1&&G===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==le)return;const Ie=An.disabled,Ue=b.depthModeForSublayer(0,le==="opaque"?Br.ReadWrite:Br.ReadOnly),ye=b.colorModeForRenderPass(),Me=b.useProgram(me?"backgroundPattern":"background"),qe=A||fe.coveringTiles({tileSize:de,terrain:b.style.map.terrain});me&&(W.activeTexture.set(ne.TEXTURE0),b.imageManager.bind(b.context));const Ke=E.getCrossfadeParameters();for(const Je of qe){const lt=A?Je.posMatrix:b.transform.calculatePosMatrix(Je.toUnwrapped()),nt=me?Vo(lt,G,b,me,{tileID:Je,tileSize:de},Ke):jd(lt,G,B),mt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Je);Me.draw(W,ne.TRIANGLES,Ue,Ie,ye,Sn.disabled,nt,mt,E.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}})(a,0,p,v);break;case"custom":(function(b,k,E){const A=b.context,B=E.implementation;if(b.renderPass==="offscreen"){const G=B.prerender;G&&(b.setCustomLayerDefaults(),A.setColorMode(b.colorModeForRenderPass()),G.call(B,A.gl,b.transform.customLayerMatrix()),A.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),A.setColorMode(b.colorModeForRenderPass()),A.setStencilMode(An.disabled);const G=B.renderingMode==="3d"?new Br(b.context.gl.LEQUAL,Br.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,Br.ReadOnly);A.setDepthMode(G),B.render(A.gl,b.transform.customLayerMatrix()),A.setDirty(),b.setBaseState(),A.bindFramebuffer.set(null)}})(a,0,p)}}translatePosMatrix(a,d,p,v,b){if(!p[0]&&!p[1])return a;const k=b?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(k){const B=Math.sin(k),G=Math.cos(k);p=[p[0]*G-p[1]*B,p[0]*B+p[1]*G]}const E=[b?p[0]:pe(d,p[0],this.transform.zoom),b?p[1]:pe(d,p[1],this.transform.zoom),0],A=new Float32Array(16);return s.$(A,a,E),A}saveTileTexture(a){const d=this._tileTextures[a.size[0]];d?d.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const d=this._tileTextures[a];return d&&d.length>0?d.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const d=this.imageManager.getPattern(a.from.toString()),p=this.imageManager.getPattern(a.to.toString());return!d||!p}useProgram(a,d){this.cache=this.cache||{};const p=a+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new $d(this.context,In[a],d,Vd[a],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ge(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:d}=this.context.gl;return this.width!==a||this.height!==d}}class ro{constructor(a,d){this.points=a,this.planes=d}static fromInvProjectionMatrix(a,d,p){const v=Math.pow(2,p),b=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const A=1/(E=s.ag([],E,a))[3]/d*v;return s.b3(E,E,[A,A,1/E[3],A])}),k=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const A=function(ne,fe){var de=fe[0],me=fe[1],le=fe[2],Ie=de*de+me*me+le*le;return Ie>0&&(Ie=1/Math.sqrt(Ie)),ne[0]=fe[0]*Ie,ne[1]=fe[1]*Ie,ne[2]=fe[2]*Ie,ne}([],function(ne,fe,de){var me=fe[0],le=fe[1],Ie=fe[2],Ue=de[0],ye=de[1],Me=de[2];return ne[0]=le*Me-Ie*ye,ne[1]=Ie*Ue-me*Me,ne[2]=me*ye-le*Ue,ne}([],$([],b[E[0]],b[E[1]]),$([],b[E[2]],b[E[1]]))),B=-((G=A)[0]*(W=b[E[1]])[0]+G[1]*W[1]+G[2]*W[2]);var G,W;return A.concat(B)});return new ro(b,k)}}class gc{constructor(a,d){this.min=a,this.max=d,this.center=function(p,v,b){return p[0]=.5*v[0],p[1]=.5*v[1],p[2]=.5*v[2],p}([],function(p,v,b){return p[0]=v[0]+b[0],p[1]=v[1]+b[1],p[2]=v[2]+b[2],p}([],this.min,this.max))}quadrant(a){const d=[a%2==0,a<2],p=te(this.min),v=te(this.max);for(let b=0;b<d.length;b++)p[b]=d[b]?this.min[b]:this.center[b],v[b]=d[b]?this.center[b]:this.max[b];return v[2]=this.max[2],new gc(p,v)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersects(a){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let v=0;v<a.planes.length;v++){const b=a.planes[v];let k=0;for(let E=0;E<d.length;E++)s.b4(b,d[E])>=0&&k++;if(k===0)return 0;k!==d.length&&(p=!1)}if(p)return 2;for(let v=0;v<3;v++){let b=Number.MAX_VALUE,k=-Number.MAX_VALUE;for(let E=0;E<a.points.length;E++){const A=a.points[E][v]-this.min[v];b=Math.min(b,A),k=Math.max(k,A)}if(k<0||b>this.max[v]-this.min[v])return 0}return 1}}class Eu{constructor(a=0,d=0,p=0,v=0){if(isNaN(a)||a<0||isNaN(d)||d<0||isNaN(p)||p<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=d,this.left=p,this.right=v}interpolate(a,d,p){return d.top!=null&&a.top!=null&&(this.top=s.B.number(a.top,d.top,p)),d.bottom!=null&&a.bottom!=null&&(this.bottom=s.B.number(a.bottom,d.bottom,p)),d.left!=null&&a.left!=null&&(this.left=s.B.number(a.left,d.left,p)),d.right!=null&&a.right!=null&&(this.right=s.B.number(a.right,d.right,p)),this}getCenter(a,d){const p=s.ad((this.left+a-this.right)/2,0,a),v=s.ad((this.top+d-this.bottom)/2,0,d);return new s.P(p,v)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new Eu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class nh{constructor(a,d,p,v,b){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=b===void 0||!!b,this._minZoom=a||0,this._maxZoom=d||22,this._minPitch=p??0,this._maxPitch=v??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Eu,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const a=new nh(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return a.apply(this),a}apply(a){this.tileSize=a.tileSize,this.latRange=a.latRange,this.width=a.width,this.height=a.height,this._center=a._center,this._elevation=a._elevation,this._minEleveationForCurrentTile=a._minEleveationForCurrentTile,this.zoom=a.zoom,this.angle=a.angle,this._fov=a._fov,this._pitch=a._pitch,this._unmodified=a._unmodified,this._edgeInsets=a._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(a){const d=-s.b5(a,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=function(){var p=new s.A(4);return s.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,v,b){var k=v[0],E=v[1],A=v[2],B=v[3],G=Math.sin(b),W=Math.cos(b);p[0]=k*W+A*G,p[1]=E*W+B*G,p[2]=k*-G+A*W,p[3]=E*-G+B*W}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const d=s.ad(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(a){const d=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,d,p){this._unmodified=!1,this._edgeInsets.interpolate(a,d,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const d=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(a){const d=[new s.b6(0,a)];if(this._renderWorldCopies){const p=this.pointCoordinate(new s.P(0,0)),v=this.pointCoordinate(new s.P(this.width,0)),b=this.pointCoordinate(new s.P(this.width,this.height)),k=this.pointCoordinate(new s.P(0,this.height)),E=Math.floor(Math.min(p.x,v.x,b.x,k.x)),A=Math.floor(Math.max(p.x,v.x,b.x,k.x)),B=1;for(let G=E-B;G<=A+B;G++)G!==0&&d.push(new s.b6(G,a))}return d}coveringTiles(a){var d,p;let v=this.coveringZoomLevel(a);const b=v;if(a.minzoom!==void 0&&v<a.minzoom)return[];a.maxzoom!==void 0&&v>a.maxzoom&&(v=a.maxzoom);const k=this.pointCoordinate(this.getCameraPoint()),E=s.U.fromLngLat(this.center),A=Math.pow(2,v),B=[A*k.x,A*k.y,0],G=[A*E.x,A*E.y,0],W=ro.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,v);let ne=a.minzoom||0;!a.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ne=v);const fe=a.terrain?2/Math.min(this.tileSize,a.tileSize)*this.tileSize:3,de=ye=>({aabb:new gc([ye*A,0,0],[(ye+1)*A,A,0]),zoom:0,x:0,y:0,wrap:ye,fullyVisible:!1}),me=[],le=[],Ie=v,Ue=a.reparseOverscaled?b:v;if(this._renderWorldCopies)for(let ye=1;ye<=3;ye++)me.push(de(-ye)),me.push(de(ye));for(me.push(de(0));me.length>0;){const ye=me.pop(),Me=ye.x,qe=ye.y;let Ke=ye.fullyVisible;if(!Ke){const qt=ye.aabb.intersects(W);if(qt===0)continue;Ke=qt===2}const Je=a.terrain?B:G,lt=ye.aabb.distanceX(Je),nt=ye.aabb.distanceY(Je),mt=Math.max(Math.abs(lt),Math.abs(nt));if(ye.zoom===Ie||mt>fe+(1<<Ie-ye.zoom)-2&&ye.zoom>=ne){const qt=Ie-ye.zoom,Ir=B[0]-.5-(Me<<qt),Pt=B[1]-.5-(qe<<qt);le.push({tileID:new s.O(ye.zoom===Ie?Ue:ye.zoom,ye.wrap,ye.zoom,Me,qe),distanceSq:J([G[0]-.5-Me,G[1]-.5-qe]),tileDistanceToCamera:Math.sqrt(Ir*Ir+Pt*Pt)})}else for(let qt=0;qt<4;qt++){const Ir=(Me<<1)+qt%2,Pt=(qe<<1)+(qt>>1),ur=ye.zoom+1;let Kt=ye.aabb.quadrant(qt);if(a.terrain){const sn=new s.O(ur,ye.wrap,ur,Ir,Pt),Er=a.terrain.getMinMaxElevation(sn),br=(d=Er.minElevation)!==null&&d!==void 0?d:this.elevation,Pr=(p=Er.maxElevation)!==null&&p!==void 0?p:this.elevation;Kt=new gc([Kt.min[0],Kt.min[1],br],[Kt.max[0],Kt.max[1],Pr])}me.push({aabb:Kt,zoom:ur,x:Ir,y:Pt,wrap:ye.wrap,fullyVisible:Ke})}}return le.sort((ye,Me)=>ye.distanceSq-Me.distanceSq).map(ye=>ye.tileID)}resize(a,d){this.width=a,this.height=d,this.pixelsToGLUnits=[2/a,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const d=s.ad(a.lat,-this.maxValidLatitude,this.maxValidLatitude);return new s.P(s.G(a.lng)*this.worldSize,s.H(d)*this.worldSize)}unproject(a){return new s.U(a.x/this.worldSize,a.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(a){const d=this.pointLocation(this.centerPoint,a),p=a.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-p))return;const v=this.getCameraPosition(),b=s.U.fromLngLat(v.lngLat,v.altitude),k=s.U.fromLngLat(d,p),E=b.x-k.x,A=b.y-k.y,B=b.z-k.z,G=Math.sqrt(E*E+A*A+B*B),W=this.scaleZoom(this.cameraToCenterDistance/G/this.tileSize);this._elevation=p,this._center=d,this.zoom=W}setLocationAtPoint(a,d){const p=this.pointCoordinate(d),v=this.pointCoordinate(this.centerPoint),b=this.locationCoordinate(a),k=new s.U(b.x-(p.x-v.x),b.y-(p.y-v.y));this.center=this.coordinateLocation(k),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(a,d){return d?this.coordinatePoint(this.locationCoordinate(a),d.getElevationForLngLatZoom(a,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(a))}pointLocation(a,d){return this.coordinateLocation(this.pointCoordinate(a,d))}locationCoordinate(a){return s.U.fromLngLat(a)}coordinateLocation(a){return a&&a.toLngLat()}pointCoordinate(a,d){if(d){const ne=d.pointCoordinate(a);if(ne!=null)return ne}const p=[a.x,a.y,0,1],v=[a.x,a.y,1,1];s.ag(p,p,this.pixelMatrixInverse),s.ag(v,v,this.pixelMatrixInverse);const b=p[3],k=v[3],E=p[1]/b,A=v[1]/k,B=p[2]/b,G=v[2]/k,W=B===G?0:(0-B)/(G-B);return new s.U(s.B.number(p[0]/b,v[0]/k,W)/this.worldSize,s.B.number(E,A,W)/this.worldSize)}coordinatePoint(a,d=0,p=this.pixelMatrix){const v=[a.x*this.worldSize,a.y*this.worldSize,d,1];return s.ag(v,v,p),new s.P(v[0]/v[3],v[1]/v[3])}getBounds(){const a=Math.max(0,this.height/2-this.getHorizon());return new Dt().extend(this.pointLocation(new s.P(0,a))).extend(this.pointLocation(new s.P(this.width,a))).extend(this.pointLocation(new s.P(this.width,this.height))).extend(this.pointLocation(new s.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Dt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(a){a?(this.lngRange=[a.getWest(),a.getEast()],this.latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(a,d=!1){const p=a.key,v=d?this._alignedPosMatrixCache:this._posMatrixCache;if(v[p])return v[p];const b=a.canonical,k=this.worldSize/this.zoomScale(b.z),E=b.x+Math.pow(2,b.z)*a.wrap,A=s.ao(new Float64Array(16));return s.$(A,A,[E*k,b.y*k,0]),s.a0(A,A,[k/s.N,k/s.N,1]),s.a1(A,d?this.alignedProjMatrix:this.projMatrix,A),v[p]=new Float32Array(A),v[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let a,d,p,v,b=-90,k=90,E=-180,A=180;const B=this.size,G=this._unmodified;if(this.latRange){const fe=this.latRange;b=s.H(fe[1])*this.worldSize,k=s.H(fe[0])*this.worldSize,a=k-b<B.y?B.y/(k-b):0}if(this.lngRange){const fe=this.lngRange;E=s.b5(s.G(fe[0])*this.worldSize,0,this.worldSize),A=s.b5(s.G(fe[1])*this.worldSize,0,this.worldSize),A<E&&(A+=this.worldSize),d=A-E<B.x?B.x/(A-E):0}const W=this.point,ne=Math.max(d||0,a||0);if(ne)return this.center=this.unproject(new s.P(d?(A+E)/2:W.x,a?(k+b)/2:W.y)),this.zoom+=this.scaleZoom(ne),this._unmodified=G,void(this._constraining=!1);if(this.latRange){const fe=W.y,de=B.y/2;fe-de<b&&(v=b+de),fe+de>k&&(v=k-de)}if(this.lngRange){const fe=(E+A)/2,de=s.b5(W.x,fe-this.worldSize/2,fe+this.worldSize/2),me=B.x/2;de-me<E&&(p=E+me),de+me>A&&(p=A-me)}p===void 0&&v===void 0||(this.center=this.unproject(new s.P(p!==void 0?p:W.x,v!==void 0?v:W.y)).wrap()),this._unmodified=G,this._constraining=!1}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,d=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.b7(1,this.center.lat)*this.worldSize;let v=s.ao(new Float64Array(16));s.a0(v,v,[this.width/2,-this.height/2,1]),s.$(v,v,[1,-1,0]),this.labelPlaneMatrix=v,v=s.ao(new Float64Array(16)),s.a0(v,v,[1,-1,1]),s.$(v,v,[-1,-1,0]),s.a0(v,v,[2/this.width,2/this.height,1]),this.glCoordMatrix=v;const b=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),k=Math.min(this.elevation,this._minEleveationForCurrentTile),E=b-k*this._pixelPerMeter/Math.cos(this._pitch),A=k<0?E:b,B=Math.PI/2+this._pitch,G=this._fov*(.5+a.y/this.height),W=Math.sin(G)*A/Math.sin(s.ad(Math.PI-B-G,.01,Math.PI-.01)),ne=this.getHorizon(),fe=2*Math.atan(ne/this.cameraToCenterDistance)*(.5+a.y/(2*ne)),de=Math.sin(fe)*A/Math.sin(s.ad(Math.PI-B-fe,.01,Math.PI-.01)),me=Math.min(W,de),le=1.01*(Math.cos(Math.PI/2-this._pitch)*me+A),Ie=this.height/50;v=new Float64Array(16),s.b8(v,this._fov,this.width/this.height,Ie,le),v[8]=2*-a.x/this.width,v[9]=2*a.y/this.height,s.a0(v,v,[1,-1,1]),s.$(v,v,[0,0,-this.cameraToCenterDistance]),s.b9(v,v,this._pitch),s.ae(v,v,this.angle),s.$(v,v,[-d,-p,0]),this.mercatorMatrix=s.a0([],v,[this.worldSize,this.worldSize,this.worldSize]),s.a0(v,v,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.a1(new Float64Array(16),this.labelPlaneMatrix,v),s.$(v,v,[0,0,-this.elevation]),this.projMatrix=v,this.invProjMatrix=s.as([],v),this.pixelMatrix3D=s.a1(new Float64Array(16),this.labelPlaneMatrix,v);const Ue=this.width%2/2,ye=this.height%2/2,Me=Math.cos(this.angle),qe=Math.sin(this.angle),Ke=d-Math.round(d)+Me*Ue+qe*ye,Je=p-Math.round(p)+Me*ye+qe*Ue,lt=new Float64Array(v);if(s.$(lt,lt,[Ke>.5?Ke-1:Ke,Je>.5?Je-1:Je,0]),this.alignedProjMatrix=lt,v=s.as(new Float64Array(16),this.pixelMatrix),!v)throw new Error("failed to invert matrix");this.pixelMatrixInverse=v,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const a=this.pointCoordinate(new s.P(0,0)),d=[a.x*this.worldSize,a.y*this.worldSize,0,1];return s.ag(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(0,a))}getCameraQueryGeometry(a){const d=this.getCameraPoint();if(a.length===1)return[a[0],d];{let p=d.x,v=d.y,b=d.x,k=d.y;for(const E of a)p=Math.min(p,E.x),v=Math.min(v,E.y),b=Math.max(b,E.x),k=Math.max(k,E.y);return[new s.P(p,v),new s.P(b,v),new s.P(b,k),new s.P(p,k),new s.P(p,v)]}}}function xl(_,a){let d,p=!1,v=null,b=null;const k=()=>{v=null,p&&(_.apply(b,d),v=setTimeout(k,a),p=!1)};return(...E)=>(p=!0,b=this,d=E,v||k(),v)}class Iu{constructor(a){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let p;return d.split("&").map(v=>v.split("=")).forEach(v=>{v[0]===this._hashName&&(p=v)}),(p&&p[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:p,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,d)}catch{}},this._updateHash=xl(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(a){const d=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,v=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,v),k=Math.round(d.lng*b)/b,E=Math.round(d.lat*b)/b,A=this._map.getBearing(),B=this._map.getPitch();let G="";if(G+=a?`/${k}/${E}/${p}`:`${p}/${E}/${k}`,(A||B)&&(G+="/"+Math.round(10*A)/10),B&&(G+=`/${Math.round(B)}`),this._hashName){const W=this._hashName;let ne=!1;const fe=window.location.hash.slice(1).split("&").map(de=>{const me=de.split("=")[0];return me===W?(ne=!0,`${me}=${G}`):de}).filter(de=>de);return ne||fe.push(`${W}=${G}`),`#${fe.join("&")}`}return`#${G}`}}const vc={linearity:.3,easing:s.ba(0,0,.3,1)},Kv=s.e({deceleration:2500,maxSpeed:1400},vc),Xv=s.e({deceleration:20,maxSpeed:1400},vc),Yv=s.e({deceleration:1e3,maxSpeed:360},vc),Jv=s.e({deceleration:1e3,maxSpeed:90},vc);class Qv{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.h.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,d=s.h.now();for(;a.length>0&&d-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)d.zoom+=b.zoomDelta||0,d.bearing+=b.bearingDelta||0,d.pitch+=b.pitchDelta||0,b.panDelta&&d.pan._add(b.panDelta),b.around&&(d.around=b.around),b.pinchAround&&(d.pinchAround=b.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(d.pan.mag()){const b=Pu(d.pan.mag(),p,s.e({},Kv,a||{}));v.offset=d.pan.mult(b.amount/d.pan.mag()),v.center=this._map.transform.center,Ea(v,b)}if(d.zoom){const b=Pu(d.zoom,p,Xv);v.zoom=this._map.transform.zoom+b.amount,Ea(v,b)}if(d.bearing){const b=Pu(d.bearing,p,Yv);v.bearing=this._map.transform.bearing+s.ad(b.amount,-179,179),Ea(v,b)}if(d.pitch){const b=Pu(d.pitch,p,Jv);v.pitch=this._map.transform.pitch+b.amount,Ea(v,b)}if(v.zoom||v.bearing){const b=d.pinchAround===void 0?d.around:d.pinchAround;v.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),s.e(v,{noMoveStart:!0})}}function Ea(_,a){(!_.duration||_.duration<a.duration)&&(_.duration=a.duration,_.easing=a.easing)}function Pu(_,a,d){const{maxSpeed:p,linearity:v,deceleration:b}=d,k=s.ad(_*v/(a/1e3),-p,p),E=Math.abs(k)/(b*v);return{easing:d.easing,duration:1e3*E,amount:k*(E/2)}}class Eo extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,p,v={}){const b=y.mousePos(d.getCanvasContainer(),p),k=d.unproject(b);super(a,s.e({point:b,lngLat:k,originalEvent:p},v)),this._defaultPrevented=!1,this.target=d}}class Au extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,p){const v=a==="touchend"?p.changedTouches:p.touches,b=y.touchPos(d.getCanvasContainer(),v),k=b.map(A=>d.unproject(A)),E=b.reduce((A,B,G,W)=>A.add(B.div(W.length)),new s.P(0,0));super(a,{points:b,point:E,lngLats:k,lngLat:d.unproject(E),originalEvent:p}),this._defaultPrevented=!1}}class ey extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,p){super(a,{originalEvent:p}),this._defaultPrevented=!1}}class ty{constructor(a,d){this._map=a,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new ey(a.type,this._map,a))}mousedown(a,d){return this._mousedownPos=d,this._firePreventable(new Eo(a.type,this._map,a))}mouseup(a){this._map.fire(new Eo(a.type,this._map,a))}click(a,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new Eo(a.type,this._map,a))}dblclick(a){return this._firePreventable(new Eo(a.type,this._map,a))}mouseover(a){this._map.fire(new Eo(a.type,this._map,a))}mouseout(a){this._map.fire(new Eo(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Au(a.type,this._map,a))}touchmove(a){this._map.fire(new Au(a.type,this._map,a))}touchend(a){this._map.fire(new Au(a.type,this._map,a))}touchcancel(a){this._map.fire(new Au(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ry{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new Eo(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Eo("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new Eo(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class es{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.pointLocation(s.P.convert(a),this._map.terrain)}}class ny{constructor(a,d){this._map=a,this._tr=new es(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,d){this.isEnabled()&&a.shiftKey&&a.button===0&&(y.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(a,d){if(!this._active)return;const p=d;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=p,this._box||(this._box=y.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const b=Math.min(v.x,p.x),k=Math.max(v.x,p.x),E=Math.min(v.y,p.y),A=Math.max(v.y,p.y);y.setTransform(this._box,`translate(${b}px,${E}px)`),this._box.style.width=k-b+"px",this._box.style.height=A-E+"px"}mouseupWindow(a,d){if(!this._active||a.button!==0)return;const p=this._startPos,v=d;if(this.reset(),y.suppressClick(),p.x!==v.x||p.y!==v.y)return this._map.fire(new s.k("boxzoomend",{originalEvent:a})),{cameraAnimation:b=>b.fitScreenCoordinates(p,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(y.remove(this._box),this._box=null),y.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,d){return this._map.fire(new s.k(a,{originalEvent:d}))}}function Uo(_,a){if(_.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${a.length}`);const d={};for(let p=0;p<_.length;p++)d[_[p].identifier]=a[p];return d}class ts{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,d,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),p.length===this.numTouches&&(this.centroid=function(v){const b=new s.P(0,0);for(const k of v)b._add(k);return b.div(v.length)}(d),this.touches=Uo(p,d)))}touchmove(a,d,p){if(this.aborted||!this.centroid)return;const v=Uo(p,d);for(const b in this.touches){const k=v[b];(!k||k.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(a,d,p){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class ih{constructor(a){this.singleTap=new ts(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,d,p){this.singleTap.touchstart(a,d,p)}touchmove(a,d,p){this.singleTap.touchmove(a,d,p)}touchend(a,d,p){const v=this.singleTap.touchend(a,d,p);if(v){const b=a.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(v)<30;if(b&&k||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class rs{constructor(a){this._tr=new es(a),this._zoomIn=new ih({numTouches:1,numTaps:2}),this._zoomOut=new ih({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,d,p){this._zoomIn.touchstart(a,d,p),this._zoomOut.touchstart(a,d,p)}touchmove(a,d,p){this._zoomIn.touchmove(a,d,p),this._zoomOut.touchmove(a,d,p)}touchend(a,d,p){const v=this._zoomIn.touchend(a,d,p),b=this._zoomOut.touchend(a,d,p),k=this._tr;return v?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:k.zoom+1,around:k.unproject(v)},{originalEvent:a})}):b?(this._active=!0,a.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:k.zoom-1,around:k.unproject(b)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ns{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const d=this._moveFunction(...a);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(a,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,d){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const v=d.length?d[0]:d;return!this._moved&&v.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(p,v))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&y.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const i1={0:1,2:2};class xp{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const d=y.mouseButton(a);this._eventButton=d}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!function(d,p){const v=i1[p];return d.buttons===void 0||(d.buttons&v)!==v}(a,this._eventButton)}isValidEndEvent(a){return y.mouseButton(a)===this._eventButton}}class iy{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}const oh=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=function(a){a.preventDefault()}},yc=({enable:_,clickTolerance:a,bearingDegreesPerPixelMoved:d=.8})=>{const p=new xp({checkCorrectEvent:v=>y.mouseButton(v)===0&&v.ctrlKey||y.mouseButton(v)===2});return new ns({clickTolerance:a,move:(v,b)=>({bearingDelta:(b.x-v.x)*d}),moveStateManager:p,enable:_,assignEvents:oh})},is=({enable:_,clickTolerance:a,pitchDegreesPerPixelMoved:d=-.5})=>{const p=new xp({checkCorrectEvent:v=>y.mouseButton(v)===0&&v.ctrlKey||y.mouseButton(v)===2});return new ns({clickTolerance:a,move:(v,b)=>({pitchDelta:(b.y-v.y)*d}),moveStateManager:p,enable:_,assignEvents:oh})};class jt{constructor(a,d){this._minTouches=a.cooperativeGestures?2:1,this._clickTolerance=a.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(a,d,p){return this._calculateTransform(a,d,p)}touchmove(a,d,p){if(this._map._cooperativeGestures&&(this._minTouches===2&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(a,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return a.preventDefault(),this._calculateTransform(a,d,p)}touchend(a,d,p){this._calculateTransform(a,d,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,d,p){p.length>0&&(this._active=!0);const v=Uo(p,d),b=new s.P(0,0),k=new s.P(0,0);let E=0;for(const B in v){const G=v[B],W=this._touches[B];W&&(b._add(G),k._add(G.sub(W)),E++,v[B]=G)}if(this._touches=v,E<this._minTouches||!k.mag())return;const A=k.div(E);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(E),panDelta:A}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ah{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,d,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([d[0],d[1]]))}touchmove(a,d,p){if(!this._firstTwoTouches)return;a.preventDefault();const[v,b]=this._firstTwoTouches,k=Fs(p,d,v),E=Fs(p,d,b);if(!k||!E)return;const A=this._aroundCenter?null:k.add(E).div(2);return this._move([k,E],A,a)}touchend(a,d,p){if(!this._firstTwoTouches)return;const[v,b]=this._firstTwoTouches,k=Fs(p,d,v),E=Fs(p,d,b);k&&E||(this._active&&y.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Fs(_,a,d){for(let p=0;p<_.length;p++)if(_[p].identifier===d)return a[p]}function _c(_,a){return Math.log(_/a)/Math.LN2}class oy extends ah{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,d){const p=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(_c(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:_c(this._distance,p),pinchAround:d}}}function Lt(_,a){return 180*_.angleWith(a)/Math.PI}class bp extends ah{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,d){const p=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Lt(this._vector,p),pinchAround:d}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const d=25/(Math.PI*this._minDiameter)*360,p=Lt(a,this._startVector);return Math.abs(p)<d}}function wp(_){return Math.abs(_.y)>Math.abs(_.x)}class o1 extends ah{constructor(a){super(),this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,d,p){super.touchstart(a,d,p),this._currentTouchCount=p.length}_start(a){this._lastPoints=a,wp(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,d,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const v=a[0].sub(this._lastPoints[0]),b=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,b,p.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(v.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(a,d,p){if(this._valid!==void 0)return this._valid;const v=a.mag()>=2,b=d.mag()>=2;if(!v&&!b)return;if(!v||!b)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const k=a.y>0==d.y>0;return wp(a)&&wp(d)&&k}}const Sp={panStep:100,bearingStep:15,pitchStep:10};class ay{constructor(a){this._tr=new es(a);const d=Sp;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let d=0,p=0,v=0,b=0,k=0;switch(a.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:a.shiftKey?p=-1:(a.preventDefault(),b=-1);break;case 39:a.shiftKey?p=1:(a.preventDefault(),b=1);break;case 38:a.shiftKey?v=1:(a.preventDefault(),k=-1);break;case 40:a.shiftKey?v=-1:(a.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(p=0,v=0),{cameraAnimation:E=>{const A=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:sy,zoom:d?Math.round(A.zoom)+d*(a.shiftKey?2:1):A.zoom,bearing:A.bearing+p*this._bearingStep,pitch:A.pitch+v*this._pitchStep,offset:[-b*this._panStep,-k*this._panStep],center:A.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function sy(_){return _*(2-_)}const ly=4.000244140625;class a1{constructor(a,d){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=a,this._tr=new es(a),this._el=a.getCanvasContainer(),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(a){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!a[this._map._metaKey])return;a.preventDefault()}let d=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const p=s.h.now(),v=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,d!==0&&d%ly==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(v*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),a.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=a,this._delta-=d,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=y.mousePos(this._el,a),p=this._tr;this._around=s.L.convert(this._aroundCenter?p.center:p.unproject(d)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(this._delta!==0){const E=this._type==="wheel"&&Math.abs(this._delta)>ly?this._wheelZoomRate:this._defaultZoomRate;let A=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&A!==0&&(A=1/A);const B=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):a.scale;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(B*A))),this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:a.zoom,p=this._startZoom,v=this._easing;let b,k=!1;if(this._type==="wheel"&&p&&v){const E=Math.min((s.h.now()-this._lastWheelEventTime)/200,1),A=v(E);b=s.B.number(p,d,A),E<1?this._frameId||(this._frameId=!0):k=!0}else b=d,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!k,zoomDelta:b-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let d=s.bb;if(this._prevEase){const p=this._prevEase,v=(s.h.now()-p.start)/p.duration,b=p.easing(v+.01)-p.easing(v),k=.27/Math.sqrt(b*b+1e-4)*.01,E=Math.sqrt(.0729-k*k);d=s.ba(k,E,.25,1)}return this._prevEase={start:s.h.now(),duration:a,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Cp{constructor(a,d){this._clickZoom=a,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class kp{constructor(a){this._tr=new es(a),this.reset()}reset(){this._active=!1}dblclick(a,d){return a.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Tp{constructor(){this._tap=new ih({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,d,p){if(!this._swipePoint)if(this._tapTime){const v=d[0],b=a.timeStamp-this._tapTime<500,k=this._tapPoint.dist(v)<30;b&&k?p.length>0&&(this._swipePoint=v,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(a,d,p)}touchmove(a,d,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const v=d[0],b=v.y-this._swipePoint.y;return this._swipePoint=v,a.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(a,d,p)}touchend(a,d,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const v=this._tap.touchend(a,d,p);v&&(this._tapTime=a.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ep{constructor(a,d,p){this._el=a,this._mousePan=d,this._touchPan=p}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class no{constructor(a,d,p){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=d,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ns{constructor(a,d,p,v){this._el=a,this._touchZoom=d,this._touchRotate=p,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ru=_=>_.zoom||_.drag||_.pitch||_.rotate;class Ip extends s.k{}function Du(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Pp{constructor(a,d){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,b)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const k=v.type==="renderFrame"?void 0:v,E={needsRenderFrame:!1},A={},B={},G=v.touches,W=G?this._getMapTouches(G):void 0,ne=W?y.touchPos(this._el,W):y.mousePos(this._el,v);for(const{handlerName:me,handler:le,allowed:Ie}of this._handlers){if(!le.isEnabled())continue;let Ue;this._blockedByActive(B,Ie,me)?le.reset():le[b||v.type]&&(Ue=le[b||v.type](v,ne,W),this.mergeHandlerResult(E,A,Ue,me,k),Ue&&Ue.needsRenderFrame&&this._triggerRenderFrame()),(Ue||le.isActive())&&(B[me]=le)}const fe={};for(const me in this._previousActiveHandlers)B[me]||(fe[me]=k);this._previousActiveHandlers=B,(Object.keys(fe).length||Du(E))&&(this._changes.push([E,A,fe]),this._triggerRenderFrame()),(Object.keys(B).length||Du(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:de}=E;de&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],de(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Qv(a),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,b,k]of this._listeners)y.addEventListener(v,b,v===document?this.handleWindowEvent:this.handleEvent,k)}destroy(){for(const[a,d,p]of this._listeners)y.removeEventListener(a,d,a===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(a){const d=this._map,p=d.getCanvasContainer();this._add("mapEvent",new ty(d,a));const v=d.boxZoom=new ny(d,a);this._add("boxZoom",v),a.interactive&&a.boxZoom&&v.enable();const b=new rs(d),k=new kp(d);d.doubleClickZoom=new Cp(k,b),this._add("tapZoom",b),this._add("clickZoom",k),a.interactive&&a.doubleClickZoom&&d.doubleClickZoom.enable();const E=new Tp;this._add("tapDragZoom",E);const A=d.touchPitch=new o1(d);this._add("touchPitch",A),a.interactive&&a.touchPitch&&d.touchPitch.enable(a.touchPitch);const B=yc(a),G=is(a);d.dragRotate=new no(a,B,G),this._add("mouseRotate",B,["mousePitch"]),this._add("mousePitch",G,["mouseRotate"]),a.interactive&&a.dragRotate&&d.dragRotate.enable();const W=(({enable:Ie,clickTolerance:Ue})=>{const ye=new xp({checkCorrectEvent:Me=>y.mouseButton(Me)===0&&!Me.ctrlKey});return new ns({clickTolerance:Ue,move:(Me,qe)=>({around:qe,panDelta:qe.sub(Me)}),activateOnStart:!0,moveStateManager:ye,enable:Ie,assignEvents:oh})})(a),ne=new jt(a,d);d.dragPan=new Ep(p,W,ne),this._add("mousePan",W),this._add("touchPan",ne,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&d.dragPan.enable(a.dragPan);const fe=new bp,de=new oy;d.touchZoomRotate=new Ns(p,de,fe,E),this._add("touchRotate",fe,["touchPan","touchZoom"]),this._add("touchZoom",de,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&d.touchZoomRotate.enable(a.touchZoomRotate);const me=d.scrollZoom=new a1(d,()=>this._triggerRenderFrame());this._add("scrollZoom",me,["mousePan"]),a.interactive&&a.scrollZoom&&d.scrollZoom.enable(a.scrollZoom);const le=d.keyboard=new ay(d);this._add("keyboard",le),a.interactive&&a.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new ry(d))}_add(a,d,p){this._handlers.push({handlerName:a,handler:d,allowed:p}),this._handlersById[a]=d}stop(a){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ru(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,d,p){for(const v in a)if(v!==p&&(!d||d.indexOf(v)<0))return!0;return!1}_getMapTouches(a){const d=[];for(const p of a)this._el.contains(p.target)&&d.push(p);return d}mergeHandlerResult(a,d,p,v,b){if(!p)return;s.e(a,p);const k={handlerName:v,originalEvent:p.originalEvent||b};p.zoomDelta!==void 0&&(d.zoom=k),p.panDelta!==void 0&&(d.drag=k),p.pitchDelta!==void 0&&(d.pitch=k),p.bearingDelta!==void 0&&(d.rotate=k)}_applyChanges(){const a={},d={},p={};for(const[v,b,k]of this._changes)v.panDelta&&(a.panDelta=(a.panDelta||new s.P(0,0))._add(v.panDelta)),v.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(a.around=v.around),v.pinchAround!==void 0&&(a.pinchAround=v.pinchAround),v.noInertia&&(a.noInertia=v.noInertia),s.e(d,b),s.e(p,k);this._updateMapTransform(a,d,p),this._changes=[]}_updateMapTransform(a,d,p){const v=this._map,b=v._getTransformForUpdate(),k=v.terrain;if(!(Du(a)||k&&this._terrainMovement))return this._fireEvents(d,p,!0);let{panDelta:E,zoomDelta:A,bearingDelta:B,pitchDelta:G,around:W,pinchAround:ne}=a;ne!==void 0&&(W=ne),v._stop(!0),W=W||v.transform.centerPoint;const fe=b.pointLocation(E?W.sub(E):W);B&&(b.bearing+=B),G&&(b.pitch+=G),A&&(b.zoom+=A),k?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?b.center=b.pointLocation(b.centerPoint.sub(E)):b.setLocationAtPoint(fe,W):(this._terrainMovement=!0,this._map._elevationFreeze=!0,b.setLocationAtPoint(fe,W),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,b.recalculateZoom(v.terrain)})):b.setLocationAtPoint(fe,W),v._applyUpdatedTransform(b),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(d,p,!0)}_fireEvents(a,d,p){const v=Ru(this._eventsInProgress),b=Ru(a),k={};for(const G in a){const{originalEvent:W}=a[G];this._eventsInProgress[G]||(k[`${G}start`]=W),this._eventsInProgress[G]=a[G]}!v&&b&&this._fireEvent("movestart",b.originalEvent);for(const G in k)this._fireEvent(G,k[G]);b&&this._fireEvent("move",b.originalEvent);for(const G in a){const{originalEvent:W}=a[G];this._fireEvent(G,W)}const E={};let A;for(const G in this._eventsInProgress){const{handlerName:W,originalEvent:ne}=this._eventsInProgress[G];this._handlersById[W].isActive()||(delete this._eventsInProgress[G],A=d[W]||ne,E[`${G}end`]=A)}for(const G in E)this._fireEvent(G,E[G]);const B=Ru(this._eventsInProgress);if(p&&(v||b)&&!B){this._updatingCamera=!0;const G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=ne=>ne!==0&&-this._bearingSnap<ne&&ne<this._bearingSnap;!G||!G.essential&&s.h.prefersReducedMotion?(this._map.fire(new s.k("moveend",{originalEvent:A})),W(this._map.getBearing())&&this._map.resetNorth()):(W(G.bearing||this._map.getBearing())&&(G.bearing=0),G.freezeElevation=!0,this._map.easeTo(G,{originalEvent:A})),this._updatingCamera=!1}}_fireEvent(a,d){this._map.fire(new s.k(a,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(a=>{delete this._frameId,this.handleEvent(new Ip("renderFrame",{timeStamp:a})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class cy extends s.E{constructor(a,d){super(),this._renderFrameCallback=()=>{const p=Math.min((s.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new s.L(this.transform.center.lng,this.transform.center.lat)}setCenter(a,d){return this.jumpTo({center:a},d)}panBy(a,d,p){return a=s.P.convert(a).mult(-1),this.panTo(this.transform.center,s.e({offset:a},d),p)}panTo(a,d,p){return this.easeTo(s.e({center:a},d),p)}getZoom(){return this.transform.zoom}setZoom(a,d){return this.jumpTo({zoom:a},d),this}zoomTo(a,d,p){return this.easeTo(s.e({zoom:a},d),p)}zoomIn(a,d){return this.zoomTo(this.getZoom()+1,a,d),this}zoomOut(a,d){return this.zoomTo(this.getZoom()-1,a,d),this}getBearing(){return this.transform.bearing}setBearing(a,d){return this.jumpTo({bearing:a},d),this}getPadding(){return this.transform.padding}setPadding(a,d){return this.jumpTo({padding:a},d),this}rotateTo(a,d,p){return this.easeTo(s.e({bearing:a},d),p)}resetNorth(a,d){return this.rotateTo(0,s.e({duration:1e3},a),d),this}resetNorthPitch(a,d){return this.easeTo(s.e({bearing:0,pitch:0,duration:1e3},a),d),this}snapToNorth(a,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,d):this}getPitch(){return this.transform.pitch}setPitch(a,d){return this.jumpTo({pitch:a},d),this}cameraForBounds(a,d){a=Dt.convert(a);const p=d&&d.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),p,d)}_cameraForBoxAndBearing(a,d,p,v){const b={top:0,bottom:0,right:0,left:0};if(typeof(v=s.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const qe=v.padding;v.padding={top:qe,bottom:qe,right:qe,left:qe}}v.padding=s.e(b,v.padding);const k=this.transform,E=k.padding,A=k.project(s.L.convert(a)),B=k.project(s.L.convert(d)),G=A.rotate(-p*Math.PI/180),W=B.rotate(-p*Math.PI/180),ne=new s.P(Math.max(G.x,W.x),Math.max(G.y,W.y)),fe=new s.P(Math.min(G.x,W.x),Math.min(G.y,W.y)),de=ne.sub(fe),me=(k.width-(E.left+E.right+v.padding.left+v.padding.right))/de.x,le=(k.height-(E.top+E.bottom+v.padding.top+v.padding.bottom))/de.y;if(le<0||me<0)return void s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ie=Math.min(k.scaleZoom(k.scale*Math.min(me,le)),v.maxZoom),Ue=s.P.convert(v.offset),ye=new s.P((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(p*Math.PI/180),Me=Ue.add(ye).mult(k.scale/k.zoomScale(Ie));return{center:k.unproject(A.add(B).div(2).sub(Me)),zoom:Ie,bearing:p}}fitBounds(a,d,p){return this._fitInternal(this.cameraForBounds(a,d),d,p)}fitScreenCoordinates(a,d,p,v,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.P.convert(a)),this.transform.pointLocation(s.P.convert(d)),p,v),v,b)}_fitInternal(a,d,p){return a?(delete(d=s.e(a,d)).padding,d.linear?this.easeTo(d,p):this.flyTo(d,p)):this}jumpTo(a,d){this.stop();const p=this._getTransformForUpdate();let v=!1,b=!1,k=!1;return"zoom"in a&&p.zoom!==+a.zoom&&(v=!0,p.zoom=+a.zoom),a.center!==void 0&&(p.center=s.L.convert(a.center)),"bearing"in a&&p.bearing!==+a.bearing&&(b=!0,p.bearing=+a.bearing),"pitch"in a&&p.pitch!==+a.pitch&&(k=!0,p.pitch=+a.pitch),a.padding==null||p.isPaddingEqual(a.padding)||(p.padding=a.padding),this._applyUpdatedTransform(p),this.fire(new s.k("movestart",d)).fire(new s.k("move",d)),v&&this.fire(new s.k("zoomstart",d)).fire(new s.k("zoom",d)).fire(new s.k("zoomend",d)),b&&this.fire(new s.k("rotatestart",d)).fire(new s.k("rotate",d)).fire(new s.k("rotateend",d)),k&&this.fire(new s.k("pitchstart",d)).fire(new s.k("pitch",d)).fire(new s.k("pitchend",d)),this.fire(new s.k("moveend",d))}calculateCameraOptionsFromTo(a,d,p,v=0){const b=s.U.fromLngLat(a,d),k=s.U.fromLngLat(p,v),E=k.x-b.x,A=k.y-b.y,B=k.z-b.z,G=Math.hypot(E,A,B);if(G===0)throw new Error("Can't calculate camera options with same From and To");const W=Math.hypot(E,A),ne=this.transform.scaleZoom(this.transform.cameraToCenterDistance/G/this.transform.tileSize),fe=180*Math.atan2(E,-A)/Math.PI;let de=180*Math.acos(W/G)/Math.PI;return de=B<0?90-de:90+de,{center:k.toLngLat(),zoom:ne,pitch:de,bearing:fe}}easeTo(a,d){this._stop(!1,a.easeId),((a=s.e({offset:[0,0],duration:500,easing:s.bb},a)).animate===!1||!a.essential&&s.h.prefersReducedMotion)&&(a.duration=0);const p=this._getTransformForUpdate(),v=this.getZoom(),b=this.getBearing(),k=this.getPitch(),E=this.getPadding(),A="zoom"in a?+a.zoom:v,B="bearing"in a?this._normalizeBearing(a.bearing,b):b,G="pitch"in a?+a.pitch:k,W="padding"in a?a.padding:p.padding,ne=s.P.convert(a.offset);let fe=p.centerPoint.add(ne);const de=p.pointLocation(fe),me=s.L.convert(a.center||de);this._normalizeCenter(me);const le=p.project(de),Ie=p.project(me).sub(le),Ue=p.zoomScale(A-v);let ye,Me;a.around&&(ye=s.L.convert(a.around),Me=p.locationPoint(ye));const qe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||A!==v,this._rotating=this._rotating||b!==B,this._pitching=this._pitching||G!==k,this._padding=!p.isPaddingEqual(W),this._easeId=a.easeId,this._prepareEase(d,a.noMoveStart,qe),this.terrain&&this._prepareElevation(me),this._ease(Ke=>{if(this._zooming&&(p.zoom=s.B.number(v,A,Ke)),this._rotating&&(p.bearing=s.B.number(b,B,Ke)),this._pitching&&(p.pitch=s.B.number(k,G,Ke)),this._padding&&(p.interpolatePadding(E,W,Ke),fe=p.centerPoint.add(ne)),this.terrain&&!a.freezeElevation&&this._updateElevation(Ke),ye)p.setLocationAtPoint(ye,Me);else{const Je=p.zoomScale(p.zoom-v),lt=A>v?Math.min(2,Ue):Math.max(.5,Ue),nt=Math.pow(lt,1-Ke),mt=p.unproject(le.add(Ie.mult(Ke*nt)).mult(Je));p.setLocationAtPoint(p.renderWorldCopies?mt.wrap():mt,fe)}this._applyUpdatedTransform(p),this._fireMoveEvents(d)},Ke=>{this.terrain&&this._finalizeElevation(),this._afterEase(d,Ke)},a),this}_prepareEase(a,d,p={}){this._moving=!0,d||p.moving||this.fire(new s.k("movestart",a)),this._zooming&&!p.zooming&&this.fire(new s.k("zoomstart",a)),this._rotating&&!p.rotating&&this.fire(new s.k("rotatestart",a)),this._pitching&&!p.pitching&&this.fire(new s.k("pitchstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&d!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(p-(d-(p*a+this._elevationStart))/(1-a)),this._elevationTarget=d}this.transform.elevation=s.B.number(this._elevationStart,this._elevationTarget,a)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(a){if(!this.transformCameraUpdate)return;const d=a.clone(),{center:p,zoom:v,pitch:b,bearing:k,elevation:E}=this.transformCameraUpdate(d);p&&(d.center=p),v!==void 0&&(d.zoom=v),b!==void 0&&(d.pitch=b),k!==void 0&&(d.bearing=k),E!==void 0&&(d.elevation=E),this.transform.apply(d)}_fireMoveEvents(a){this.fire(new s.k("move",a)),this._zooming&&this.fire(new s.k("zoom",a)),this._rotating&&this.fire(new s.k("rotate",a)),this._pitching&&this.fire(new s.k("pitch",a))}_afterEase(a,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const p=this._zooming,v=this._rotating,b=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new s.k("zoomend",a)),v&&this.fire(new s.k("rotateend",a)),b&&this.fire(new s.k("pitchend",a)),this.fire(new s.k("moveend",a))}flyTo(a,d){if(!a.essential&&s.h.prefersReducedMotion){const Kt=s.F(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Kt,d)}this.stop(),a=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.bb},a);const p=this._getTransformForUpdate(),v=this.getZoom(),b=this.getBearing(),k=this.getPitch(),E=this.getPadding(),A="zoom"in a?s.ad(+a.zoom,p.minZoom,p.maxZoom):v,B="bearing"in a?this._normalizeBearing(a.bearing,b):b,G="pitch"in a?+a.pitch:k,W="padding"in a?a.padding:p.padding,ne=p.zoomScale(A-v),fe=s.P.convert(a.offset);let de=p.centerPoint.add(fe);const me=p.pointLocation(de),le=s.L.convert(a.center||me);this._normalizeCenter(le);const Ie=p.project(me),Ue=p.project(le).sub(Ie);let ye=a.curve;const Me=Math.max(p.width,p.height),qe=Me/ne,Ke=Ue.mag();if("minZoom"in a){const Kt=s.ad(Math.min(a.minZoom,v,A),p.minZoom,p.maxZoom),sn=Me/p.zoomScale(Kt-v);ye=Math.sqrt(sn/Ke*2)}const Je=ye*ye;function lt(Kt){const sn=(qe*qe-Me*Me+(Kt?-1:1)*Je*Je*Ke*Ke)/(2*(Kt?qe:Me)*Je*Ke);return Math.log(Math.sqrt(sn*sn+1)-sn)}function nt(Kt){return(Math.exp(Kt)-Math.exp(-Kt))/2}function mt(Kt){return(Math.exp(Kt)+Math.exp(-Kt))/2}const qt=lt(!1);let Ir=function(Kt){return mt(qt)/mt(qt+ye*Kt)},Pt=function(Kt){return Me*((mt(qt)*(nt(sn=qt+ye*Kt)/mt(sn))-nt(qt))/Je)/Ke;var sn},ur=(lt(!0)-qt)/ye;if(Math.abs(Ke)<1e-6||!isFinite(ur)){if(Math.abs(Me-qe)<1e-6)return this.easeTo(a,d);const Kt=qe<Me?-1:1;ur=Math.abs(Math.log(qe/Me))/ye,Pt=function(){return 0},Ir=function(sn){return Math.exp(Kt*ye*sn)}}return a.duration="duration"in a?+a.duration:1e3*ur/("screenSpeed"in a?+a.screenSpeed/ye:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=b!==B,this._pitching=G!==k,this._padding=!p.isPaddingEqual(W),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(le),this._ease(Kt=>{const sn=Kt*ur,Er=1/Ir(sn);p.zoom=Kt===1?A:v+p.scaleZoom(Er),this._rotating&&(p.bearing=s.B.number(b,B,Kt)),this._pitching&&(p.pitch=s.B.number(k,G,Kt)),this._padding&&(p.interpolatePadding(E,W,Kt),de=p.centerPoint.add(fe)),this.terrain&&!a.freezeElevation&&this._updateElevation(Kt);const br=Kt===1?le:p.unproject(Ie.add(Ue.mult(Pt(sn))).mult(Er));p.setLocationAtPoint(p.renderWorldCopies?br.wrap():br,de),this._applyUpdatedTransform(p),this._fireMoveEvents(d)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(d)},a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,d)}if(!a){const p=this.handlers;p&&p.stop(!1)}return this}_ease(a,d,p){p.animate===!1||p.duration===0?(a(1),d()):(this._easeStart=s.h.now(),this._easeOptions=p,this._onEaseFrame=a,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,d){a=s.b5(a,-180,180);const p=Math.abs(a-d);return Math.abs(a-360-d)<p&&(a-=360),Math.abs(a+360-d)<p&&(a+=360),a}_normalizeCenter(a){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const p=a.lng-d.center.lng;a.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(s.L.convert(a),this.transform.tileZoom)-this.transform.elevation:null}}class Io{constructor(a={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options&&this.options.compact,this._container=y.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=y.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,d){const p=this._map._getUIString(`AttributionControl.${d}`);a.title=p,a.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const d=this._map.style.sourceCaches;for(const v in d){const b=d[v];if(b.used||b.usedForTerrain){const k=b.getSource();k.attribution&&a.indexOf(k.attribution)<0&&a.push(k.attribution)}}a=a.filter(v=>String(v).trim()),a.sort((v,b)=>v.length-b.length),a=a.filter((v,b)=>{for(let k=b+1;k<a.length;k++)if(a[k].indexOf(v)>=0)return!1;return!0});const p=a.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,a.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class _n{constructor(a={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const p=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=y.create("div","maplibregl-ctrl");const d=y.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){y.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class sh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const d=++this._id;return this._queue.push({callback:a,id:d,cancelled:!1}),d}remove(a){const d=this._currentlyRunning,p=d?this._queue.concat(d):this._queue;for(const v of p)if(v.id===a)return void(v.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const p of d)if(!p.cancelled&&(p.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Ap={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var uy=s.Q([{name:"a_pos3d",type:"Int16",components:3}]);class dy extends s.E{constructor(a){super(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,a.usedForTerrain=!0,a.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,d){this.sourceCache.update(a,d),this._renderableTilesKeys=[];const p={};for(const v of a.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))p[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.posMatrix=new Float64Array(16),s.aS(v.posMatrix,0,s.N,0,s.N,0,1),this._tiles[v.key]=new Gt(v,this.tileSize));for(const v in this._tiles)p[v]||delete this._tiles[v]}freeRtt(a){for(const d in this._tiles){const p=this._tiles[d];(!a||p.tileID.equals(a)||p.tileID.isChildOf(a)||a.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(a=>this.getTileByID(a))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a){const d={};for(const p of this._renderableTilesKeys){const v=this._tiles[p].tileID;if(v.canonical.equals(a.canonical)){const b=a.clone();b.posMatrix=new Float64Array(16),s.aS(b.posMatrix,0,s.N,0,s.N,0,1),d[p]=b}else if(v.canonical.isChildOf(a.canonical)){const b=a.clone();b.posMatrix=new Float64Array(16);const k=v.canonical.z-a.canonical.z,E=v.canonical.x-(v.canonical.x>>k<<k),A=v.canonical.y-(v.canonical.y>>k<<k),B=s.N>>k;s.aS(b.posMatrix,0,B,0,B,0,1),s.$(b.posMatrix,b.posMatrix,[-E*B,-A*B,0]),d[p]=b}else if(a.canonical.isChildOf(v.canonical)){const b=a.clone();b.posMatrix=new Float64Array(16);const k=a.canonical.z-v.canonical.z,E=a.canonical.x-(a.canonical.x>>k<<k),A=a.canonical.y-(a.canonical.y>>k<<k),B=s.N>>k;s.aS(b.posMatrix,0,s.N,0,s.N,0,1),s.$(b.posMatrix,b.posMatrix,[E*B,A*B,0]),s.a0(b.posMatrix,b.posMatrix,[1/2**k,1/2**k,0]),d[p]=b}}return d}getSourceTile(a,d){const p=this.sourceCache._source;let v=a.overscaledZ-this.deltaZoom;if(v>p.maxzoom&&(v=p.maxzoom),v<p.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(v).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!b||!b.dem)&&d)for(;v>=p.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(a.scaledTo(v--).key);return b}tilesAfterTime(a=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=a)}}class hy{constructor(a,d,p){this.painter=a,this.sourceCache=new dy(d),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,d,p,v=s.N){var b;if(!(d>=0&&d<v&&p>=0&&p<v))return 0;const k=this.getTerrainData(a),E=(b=k.tile)===null||b===void 0?void 0:b.dem;if(!E)return 0;const A=function(de,me,le){var Ie=me[0],Ue=me[1];return de[0]=le[0]*Ie+le[4]*Ue+le[12],de[1]=le[1]*Ie+le[5]*Ue+le[13],de}([],[d/v*s.N,p/v*s.N],k.u_terrain_matrix),B=[A[0]*E.dim,A[1]*E.dim],G=Math.floor(B[0]),W=Math.floor(B[1]),ne=B[0]-G,fe=B[1]-W;return E.get(G,W)*(1-ne)*(1-fe)+E.get(G+1,W)*ne*(1-fe)+E.get(G,W+1)*(1-ne)*fe+E.get(G+1,W+1)*ne*fe}getElevationForLngLatZoom(a,d){const{tileID:p,mercatorX:v,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(a,d);return this.getElevation(p,v%s.N,b%s.N,s.N)}getElevation(a,d,p,v=s.N){return this.getDEMElevation(a,d,p,v)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const v=this.painter.context,b=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ge(v,b,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ge(v,new s.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.ao([])}const d=this.sourceCache.getSourceTile(a,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const v=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new ge(v,d.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),d.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const p=d&&d+d.tileID.key+a.key;if(p&&!this._demMatrixCache[p]){const v=this.sourceCache.sourceCache._source.maxzoom;let b=a.canonical.z-d.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=v?b=a.canonical.z-v:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const k=a.canonical.x-(a.canonical.x>>b<<b),E=a.canonical.y-(a.canonical.y>>b<<b),A=s.bc(new Float64Array(16),[1/(s.N<<b),1/(s.N<<b),0]);s.$(A,A,[k*s.N,E*s.N,0]),this._demMatrixCache[a.key]={matrix:A,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(a){const d=this.painter,p=d.width/devicePixelRatio,v=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ge(d.context,{width:p,height:v,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ge(d.context,{width:p,height:v,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(p,v,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,p,v))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,k=0;b<this._coordsTextureSize;b++)for(let E=0;E<this._coordsTextureSize;E++,k+=4)d[k+0]=255&E,d[k+1]=255&b,d[k+2]=E>>8<<4|b>>8,d[k+3]=0;const p=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),v=new ge(a,p,a.gl.RGBA,{premultiply:!1});return v.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(a){const d=new Uint8Array(4),p=this.painter.context,v=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,d),p.bindFramebuffer.set(null);const b=d[0]+(d[2]>>4<<8),k=d[1]+((15&d[2])<<8),E=this.coordsIndex[255-d[3]],A=E&&this.sourceCache.getTileByID(E);if(!A)return null;const B=this._coordsTextureSize,G=(1<<A.tileID.canonical.z)*B;return new s.U(this._allowMercatorOverflow(a,(A.tileID.canonical.x*B+b)/G),(A.tileID.canonical.y*B+k)/G,this.getElevation(A.tileID,b,k,B))}getTerrainMesh(){if(this._mesh)return this._mesh;const a=this.painter.context,d=new s.bd,p=new s.b0,v=this.meshSize,b=s.N/v,k=v*v;for(let W=0;W<=v;W++)for(let ne=0;ne<=v;ne++)d.emplaceBack(ne*b,W*b,0);for(let W=0;W<k;W+=v+1)for(let ne=0;ne<v;ne++)p.emplaceBack(ne+W,v+ne+W+1,v+ne+W+2),p.emplaceBack(ne+W,v+ne+W+2,ne+W+1);const E=d.length,A=E+2*(v+1);for(const W of[0,1])for(let ne=0;ne<=v;ne++)for(const fe of[0,1])d.emplaceBack(ne*b,W*s.N,fe);for(let W=0;W<2*v;W+=2)p.emplaceBack(A+W,A+W+1,A+W+3),p.emplaceBack(A+W,A+W+3,A+W+2),p.emplaceBack(E+W,E+W+3,E+W+1),p.emplaceBack(E+W,E+W+2,E+W+3);const B=d.length,G=B+2*(v+1);for(const W of[0,1])for(let ne=0;ne<=v;ne++)for(const fe of[0,1])d.emplaceBack(W*s.N,ne*b,fe);for(let W=0;W<2*v;W+=2)p.emplaceBack(B+W,B+W+1,B+W+3),p.emplaceBack(B+W,B+W+3,B+W+2),p.emplaceBack(G+W,G+W+3,G+W+1),p.emplaceBack(G+W,G+W+2,G+W+3);return this._mesh={indexBuffer:a.createIndexBuffer(p),vertexBuffer:a.createVertexBuffer(d,uy.members),segments:s.S.simpleSegment(0,0,d.length,p.length)},this._mesh}getMeshFrameDelta(a){return 2*Math.PI*s.be/Math.pow(2,a)/5}getMinTileElevationForLngLatZoom(a,d){var p;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(a,d);return(p=this.getMinMaxElevation(v).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(a){const d=this.getTerrainData(a).tile,p={minElevation:null,maxElevation:null};return d&&d.dem&&(p.minElevation=d.dem.min*this.exaggeration,p.maxElevation=d.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(a,d){const p=s.U.fromLngLat(a.wrap()),v=(1<<d)*s.N,b=p.x*v,k=p.y*v,E=Math.floor(b/s.N),A=Math.floor(k/s.N);return{tileID:new s.O(d,0,d,E,A),mercatorX:b,mercatorY:k}}_allowMercatorOverflow(a,d){const p=a.x<this.painter.width/2;let v=s.bf(d);const b=this.painter.transform.center.lng;return p&&Math.sign(v)>0&&Math.sign(b)<0||!p&&Math.sign(v)<0&&Math.sign(b)>0?(v=360*Math.sign(b)+v,s.G(v)):d}}class s1{constructor(a,d,p){this._context=a,this._size=d,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new ge(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(p.texture),{id:a,fbo:d,texture:p,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>a.id!==d),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(a=>!a.inUse)===!1}}const Vi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class lh{constructor(a,d){this.painter=a,this.terrain=d,this.pool=new s1(a.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter(p=>!a._layers[p].isHidden(d)),this._coordsDescendingInv={};for(const p in a.sourceCaches){this._coordsDescendingInv[p]={};const v=a.sourceCaches[p].getVisibleCoordinates();for(const b of v){const k=this.terrain.sourceCache.getTerrainCoords(b);for(const E in k)this._coordsDescendingInv[p][E]||(this._coordsDescendingInv[p][E]=[]),this._coordsDescendingInv[p][E].push(k[E])}}this._coordsDescendingInvStr={};for(const p of a._order){const v=a._layers[p],b=v.source;if(Vi[v.type]&&!this._coordsDescendingInvStr[b]){this._coordsDescendingInvStr[b]={};for(const k in this._coordsDescendingInv[b])this._coordsDescendingInvStr[b][k]=this._coordsDescendingInv[b][k].map(E=>E.key).sort().join()}}for(const p of this._renderableTiles)for(const v in this._coordsDescendingInvStr){const b=this._coordsDescendingInvStr[v][p.tileID.key];b&&b!==p.rttCoords[v]&&(p.rtt=[])}}renderLayer(a){if(a.isHidden(this.painter.transform.zoom))return!1;const d=a.type,p=this.painter,v=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(Vi[d]&&(this._prevType&&Vi[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(a.id),!v))return!0;if(Vi[this._prevType]||Vi[d]&&v){this._prevType=d;const b=this._stacks.length-1,k=this._stacks[b]||[];for(const E of this._renderableTiles){if(this.pool.isFull()&&(Ln(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(E),E.rtt[b]){const B=this.pool.getObjectForId(E.rtt[b].id);if(B.stamp===E.rtt[b].stamp){this.pool.useObject(B);continue}}const A=this.pool.getOrCreateFreeObject();this.pool.useObject(A),this.pool.stampObject(A),E.rtt[b]={id:A.id,stamp:A.stamp},p.context.bindFramebuffer.set(A.fbo.framebuffer),p.context.clear({color:s.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let B=0;B<k.length;B++){const G=p.style._layers[k[B]],W=G.source?this._coordsDescendingInv[G.source][E.tileID.key]:[E.tileID];p.context.viewport.set([0,0,A.fbo.width,A.fbo.height]),p._renderTileClippingMasks(G,W),p.renderLayer(p,p.style.sourceCaches[G.source],G,W),G.source&&(E.rttCoords[G.source]=this._coordsDescendingInvStr[G.source][E.tileID.key])}}return Ln(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Vi[d]}return!1}}const er=m,cr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Mu=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},Rp={showCompass:!0,showZoom:!0,visualizePitch:!1};class Dp{constructor(a,d,p=!1){this.mousedown=k=>{this.startMouse(s.e({},k,{ctrlKey:!0,preventDefault:()=>k.preventDefault()}),y.mousePos(this.element,k)),y.addEventListener(window,"mousemove",this.mousemove),y.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=k=>{this.moveMouse(k,y.mousePos(this.element,k))},this.mouseup=k=>{this.mouseRotate.dragEnd(k),this.mousePitch&&this.mousePitch.dragEnd(k),this.offTemp()},this.touchstart=k=>{k.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=y.touchPos(this.element,k.targetTouches)[0],this.startTouch(k,this._startPos),y.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),y.addEventListener(window,"touchend",this.touchend))},this.touchmove=k=>{k.targetTouches.length!==1?this.reset():(this._lastPos=y.touchPos(this.element,k.targetTouches)[0],this.moveTouch(k,this._lastPos))},this.touchend=k=>{k.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const v=a.dragRotate._mouseRotate.getClickTolerance(),b=a.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=yc({clickTolerance:v,enable:!0}),this.touchRotate=(({enable:k,clickTolerance:E,bearingDegreesPerPixelMoved:A=.8})=>{const B=new iy;return new ns({clickTolerance:E,move:(G,W)=>({bearingDelta:(W.x-G.x)*A}),moveStateManager:B,enable:k,assignEvents:Mu})})({clickTolerance:v,enable:!0}),this.map=a,p&&(this.mousePitch=is({clickTolerance:b,enable:!0}),this.touchPitch=(({enable:k,clickTolerance:E,pitchDegreesPerPixelMoved:A=-.5})=>{const B=new iy;return new ns({clickTolerance:E,move:(G,W)=>({pitchDelta:(W.y-G.y)*A}),moveStateManager:B,enable:k,assignEvents:Mu})})({clickTolerance:b,enable:!0})),y.addEventListener(d,"mousedown",this.mousedown),y.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),y.addEventListener(d,"touchcancel",this.reset)}startMouse(a,d){this.mouseRotate.dragStart(a,d),this.mousePitch&&this.mousePitch.dragStart(a,d),y.disableDrag()}startTouch(a,d){this.touchRotate.dragStart(a,d),this.touchPitch&&this.touchPitch.dragStart(a,d),y.disableDrag()}moveMouse(a,d){const p=this.map,{bearingDelta:v}=this.mouseRotate.dragMove(a,d)||{};if(v&&p.setBearing(p.getBearing()+v),this.mousePitch){const{pitchDelta:b}=this.mousePitch.dragMove(a,d)||{};b&&p.setPitch(p.getPitch()+b)}}moveTouch(a,d){const p=this.map,{bearingDelta:v}=this.touchRotate.dragMove(a,d)||{};if(v&&p.setBearing(p.getBearing()+v),this.touchPitch){const{pitchDelta:b}=this.touchPitch.dragMove(a,d)||{};b&&p.setPitch(p.getPitch()+b)}}off(){const a=this.element;y.removeEventListener(a,"mousedown",this.mousedown),y.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),y.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),y.removeEventListener(window,"touchend",this.touchend),y.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){y.enableDrag(),y.removeEventListener(window,"mousemove",this.mousemove),y.removeEventListener(window,"mouseup",this.mouseup),y.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),y.removeEventListener(window,"touchend",this.touchend)}}let Zn;function Mp(_,a,d){if(_=new s.L(_.lng,_.lat),a){const p=new s.L(_.lng-360,_.lat),v=new s.L(_.lng+360,_.lat),b=d.locationPoint(_).distSqr(a);d.locationPoint(p).distSqr(a)<b?_=p:d.locationPoint(v).distSqr(a)<b&&(_=v)}for(;Math.abs(_.lng-d.center.lng)>180;){const p=d.locationPoint(_);if(p.x>=0&&p.y>=0&&p.x<=d.width&&p.y<=d.height)break;_.lng>d.center.lng?_.lng-=360:_.lng+=360}return _}const Ho={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function fy(_,a,d){const p=_.classList;for(const v in Ho)p.remove(`maplibregl-${d}-anchor-${v}`);p.add(`maplibregl-${d}-anchor-${a}`)}class bl extends s.E{constructor(a){if(super(),this._onKeyPress=d=>{const p=d.code,v=d.charCode||d.keyCode;p!=="Space"&&p!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=d=>{const p=d.originalEvent.target,v=this._element;this._popup&&(p===v||v.contains(p))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Mp(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),d&&d.type!=="moveend"||(this._pos=this._pos.round()),y.setTransform(this._element,`${Ho[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${v}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const k=this._map.unproject(this._pos),E=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=k.distanceTo(this._lngLat)>20*E?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=d=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.k("dragstart"))),this.fire(new s.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,a&&a.element)this._element=a.element,this._offset=s.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=y.create("div"),this._element.setAttribute("aria-label","Map marker");const d=y.createNS("http://www.w3.org/2000/svg","svg"),p=41,v=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${p}px`),d.setAttributeNS(null,"width",`${v}px`),d.setAttributeNS(null,"viewBox",`0 0 ${v} ${p}`);const b=y.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const k=y.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");const E=y.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");const A=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ie of A){const Ue=y.createNS("http://www.w3.org/2000/svg","ellipse");Ue.setAttributeNS(null,"opacity","0.04"),Ue.setAttributeNS(null,"cx","10.5"),Ue.setAttributeNS(null,"cy","5.80029008"),Ue.setAttributeNS(null,"rx",Ie.rx),Ue.setAttributeNS(null,"ry",Ie.ry),E.appendChild(Ue)}const B=y.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill",this._color);const G=y.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),B.appendChild(G);const W=y.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"fill","#000000");const ne=y.createNS("http://www.w3.org/2000/svg","path");ne.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),W.appendChild(ne);const fe=y.createNS("http://www.w3.org/2000/svg","g");fe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),fe.setAttributeNS(null,"fill","#FFFFFF");const de=y.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(8.0, 8.0)");const me=y.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#000000"),me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962");const le=y.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#FFFFFF"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962"),de.appendChild(me),de.appendChild(le),k.appendChild(E),k.appendChild(B),k.appendChild(W),k.appendChild(fe),k.appendChild(de),d.appendChild(k),d.setAttributeNS(null,"height",p*this._scale+"px"),d.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(d),this._offset=s.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),fy(this._element,this._anchor,"marker"),a&&a.className)for(const d of a.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(a){return this.remove(),this._map=a,a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),y.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=s.L.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const v=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return a?(a.isOpen()?a.remove():a.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(a){return this._offset=s.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const On={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Rn=0,xc=!1;const zu={maxWidth:100,unit:"metric"};function Lu(_,a,d){const p=d&&d.maxWidth||100,v=_._container.clientHeight/2,b=_.unproject([0,v]),k=_.unproject([p,v]),E=b.distanceTo(k);if(d&&d.unit==="imperial"){const A=3.2808*E;A>5280?wl(a,p,A/5280,_._getUIString("ScaleControl.Miles")):wl(a,p,A,_._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?wl(a,p,E/1852,_._getUIString("ScaleControl.NauticalMiles")):E>=1e3?wl(a,p,E/1e3,_._getUIString("ScaleControl.Kilometers")):wl(a,p,E,_._getUIString("ScaleControl.Meters"))}function wl(_,a,d,p){const v=function(b){const k=Math.pow(10,`${Math.floor(b)}`.length-1);let E=b/k;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(A){const B=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*B)/B}(E),k*E}(d);_.style.width=a*(v/d)+"px",_.innerHTML=`${v}&nbsp;${p}`}const zp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Lp=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function bc(_){if(_){if(typeof _=="number"){const a=Math.round(Math.abs(_)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,_),"top-left":new s.P(a,a),"top-right":new s.P(-a,a),bottom:new s.P(0,-_),"bottom-left":new s.P(a,-a),"bottom-right":new s.P(-a,-a),left:new s.P(_,0),right:new s.P(-_,0)}}if(_ instanceof s.P||Array.isArray(_)){const a=s.P.convert(_);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:s.P.convert(_.center||[0,0]),top:s.P.convert(_.top||[0,0]),"top-left":s.P.convert(_["top-left"]||[0,0]),"top-right":s.P.convert(_["top-right"]||[0,0]),bottom:s.P.convert(_.bottom||[0,0]),"bottom-left":s.P.convert(_["bottom-left"]||[0,0]),"bottom-right":s.P.convert(_["bottom-right"]||[0,0]),left:s.P.convert(_.left||[0,0]),right:s.P.convert(_.right||[0,0])}}return bc(new s.P(0,0))}const Op={extend:(_,...a)=>s.e(_,...a),run(_){_()},logToElement(_,a=!1,d="log"){const p=window.document.getElementById(d);p&&(a&&(p.innerHTML=""),p.innerHTML+=`<br>${_}`)}},$p=m;class Qr{static get version(){return $p}static get workerCount(){return Cr.workerCount}static set workerCount(a){Cr.workerCount=a}static get maxParallelImageRequests(){return s.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(a){s.c.MAX_PARALLEL_IMAGE_REQUESTS=a}static get workerUrl(){return s.c.WORKER_URL}static set workerUrl(a){s.c.WORKER_URL=a}static addProtocol(a,d){s.c.REGISTERED_PROTOCOLS[a]=d}static removeProtocol(a){delete s.c.REGISTERED_PROTOCOLS[a]}}return Qr.Map=class extends cy{constructor(_){if(s.bg.mark(s.bh.create),(_=s.e({},cr,_)).minZoom!=null&&_.maxZoom!=null&&_.minZoom>_.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(_.minPitch!=null&&_.maxPitch!=null&&_.minPitch>_.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(_.minPitch!=null&&_.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(_.maxPitch!=null&&_.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new nh(_.minZoom,_.maxZoom,_.minPitch,_.maxPitch,_.renderWorldCopies),{bearingSnap:_.bearingSnap}),this._cooperativeGesturesOnWheel=a=>{this._onCooperativeGesture(a,a[this._metaKey],1)},this._contextLost=a=>{a.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=_.interactive,this._cooperativeGestures=_.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=_.maxTileCacheSize,this._maxTileCacheZoomLevels=_.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=_.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=_.preserveDrawingBuffer,this._antialias=_.antialias,this._trackResize=_.trackResize,this._bearingSnap=_.bearingSnap,this._refreshExpiredTiles=_.refreshExpiredTiles,this._fadeDuration=_.fadeDuration,this._crossSourceCollisions=_.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=_.collectResourceTiming,this._renderTaskQueue=new sh,this._controls=[],this._mapId=s.a2(),this._locale=s.e({},Ap,_.locale),this._clickTolerance=_.clickTolerance,this._overridePixelRatio=_.pixelRatio,this._maxCanvasSize=_.maxCanvasSize,this.transformCameraUpdate=_.transformCameraUpdate,this._imageQueueHandle=Z.addThrottleControl(()=>this.isMoving()),this._requestManager=new O(_.transformRequest),typeof _.container=="string"){if(this._container=document.getElementById(_.container),!this._container)throw new Error(`Container '${_.container}' not found.`)}else{if(!(_.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=_.container}if(_.maxBounds&&this.setMaxBounds(_.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1;const d=xl(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{a?d(p):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Pp(this,_),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=_.hash&&new Iu(typeof _.hash=="string"&&_.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),_.bounds&&(this.resize(),this.fitBounds(_.bounds,s.e({},_.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=_.localIdeographFontFamily,this._validateStyle=_.validateStyle,_.style&&this.setStyle(_.style,{localIdeographFontFamily:_.localIdeographFontFamily}),_.attributionControl&&this.addControl(new Io({customAttribution:_.customAttribution})),_.maplibreLogo&&this.addControl(new _n,_.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new s.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new s.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new s.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(_,a){if(a===void 0&&(a=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new s.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=_.onAdd(this);this._controls.push(_);const p=this._controlPositions[a];return a.indexOf("bottom")!==-1?p.insertBefore(d,p.firstChild):p.appendChild(d),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new s.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(_);return a>-1&&this._controls.splice(a,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,a,d,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,a,d,p)}resize(_){var a;const d=this._containerDimensions(),p=d[0],v=d[1],b=this._getClampedPixelRatio(p,v);if(this._resizeCanvas(p,v,b),this.painter.resize(p,v,b),this.painter.overLimit()){const E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];const A=this._getClampedPixelRatio(p,v);this._resizeCanvas(p,v,A),this.painter.resize(p,v,A)}this.transform.resize(p,v),(a=this._requestedCameraState)===null||a===void 0||a.resize(p,v);const k=!this._moving;return k&&(this.stop(),this.fire(new s.k("movestart",_)).fire(new s.k("move",_))),this.fire(new s.k("resize",_)),k&&this.fire(new s.k("moveend",_)),this}_getClampedPixelRatio(_,a){const{0:d,1:p}=this._maxCanvasSize,v=this.getPixelRatio(),b=_*v,k=a*v;return Math.min(b>d?d/b:1,k>p?p/k:1)*v}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(Dt.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(_){return this._cooperativeGestures=_,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(_){return this.transform.locationPoint(s.L.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(s.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,a,d){if(_==="mouseenter"||_==="mouseover"){let p=!1;return{layer:a,listener:d,delegates:{mousemove:b=>{const k=this.getLayer(a)?this.queryRenderedFeatures(b.point,{layers:[a]}):[];k.length?p||(p=!0,d.call(this,new Eo(_,this,b.originalEvent,{features:k}))):p=!1},mouseout:()=>{p=!1}}}}if(_==="mouseleave"||_==="mouseout"){let p=!1;return{layer:a,listener:d,delegates:{mousemove:k=>{(this.getLayer(a)?this.queryRenderedFeatures(k.point,{layers:[a]}):[]).length?p=!0:p&&(p=!1,d.call(this,new Eo(_,this,k.originalEvent)))},mouseout:k=>{p&&(p=!1,d.call(this,new Eo(_,this,k.originalEvent)))}}}}{const p=v=>{const b=this.getLayer(a)?this.queryRenderedFeatures(v.point,{layers:[a]}):[];b.length&&(v.features=b,d.call(this,v),delete v.features)};return{layer:a,listener:d,delegates:{[_]:p}}}}on(_,a,d){if(d===void 0)return super.on(_,a);const p=this._createDelegatedListener(_,a,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(p);for(const v in p.delegates)this.on(v,p.delegates[v]);return this}once(_,a,d){if(d===void 0)return super.once(_,a);const p=this._createDelegatedListener(_,a,d);for(const v in p.delegates)this.once(v,p.delegates[v]);return this}off(_,a,d){return d===void 0?super.off(_,a):(this._delegatedListeners&&this._delegatedListeners[_]&&(p=>{const v=this._delegatedListeners[_];for(let b=0;b<v.length;b++){const k=v[b];if(k.layer===a&&k.listener===d){for(const E in k.delegates)this.off(E,k.delegates[E]);return v.splice(b,1),this}}})(),this)}queryRenderedFeatures(_,a){if(!this.style)return[];let d;const p=_ instanceof s.P||Array.isArray(_),v=p?_:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(p?{}:_)||{},v instanceof s.P||typeof v[0]=="number")d=[s.P.convert(v)];else{const b=s.P.convert(v[0]),k=s.P.convert(v[1]);d=[b,new s.P(k.x,b.y),k,new s.P(b.x,k.y),b]}return this.style.queryRenderedFeatures(d,a,this.transform)}querySourceFeatures(_,a){return this.style.querySourceFeatures(_,a)}setStyle(_,a){return(a=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(_,a))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const a=this._locale[_];if(a==null)throw new Error(`Missing UI string '${_}'`);return a}_updateStyle(_,a){if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,a));const d=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new qn(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,a,d):this.style.loadJSON(_,a,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new qn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,a){if(typeof _=="string"){const d=this._requestManager.transformRequest(_,z.Style);s.f(d,(p,v)=>{p?this.fire(new s.j(p)):v&&this._updateDiff(v,a)})}else typeof _=="object"&&this._updateDiff(_,a)}_updateDiff(_,a){try{this.style.setState(_,a)&&this._update(!0)}catch(d){s.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(_,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(_,a){return this._lazyInitEmptyStyle(),this.style.addSource(_,a),this._update(!0)}isSourceLoaded(_){const a=this.style&&this.style.sourceCaches[_];if(a!==void 0)return a.loaded();this.fire(new s.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const a=this.style.sourceCaches[_.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);for(const d in this.style._layers){const p=this.style._layers[d];p.type==="hillshade"&&p.source===_.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new hy(this.painter,a,_),this.painter.renderToTexture=new lh(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==_.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new s.k("terrain",{terrain:_})),this}getTerrain(){var _,a;return(a=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&a!==void 0?a:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const a in _){const d=_[a]._tiles;for(const p in d){const v=d[p];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}addSourceType(_,a,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(_,a,d)}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,a,d={}){const{pixelRatio:p=1,sdf:v=!1,stretchX:b,stretchY:k,content:E}=d;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||s.a(a))){if(a.width===void 0||a.height===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:A,height:B,data:G}=a,W=a;return this.style.addImage(_,{data:new s.R({width:A,height:B},new Uint8Array(G)),pixelRatio:p,stretchX:b,stretchY:k,content:E,sdf:v,version:0,userImage:W}),W.onAdd&&W.onAdd(this,_),this}}{const{width:A,height:B,data:G}=s.h.getImageData(a);this.style.addImage(_,{data:new s.R({width:A,height:B},G),pixelRatio:p,stretchX:b,stretchY:k,content:E,sdf:v,version:0})}}updateImage(_,a){const d=this.style.getImage(_);if(!d)return this.fire(new s.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=a instanceof HTMLImageElement||s.a(a)?s.h.getImageData(a):a,{width:v,height:b,data:k}=p;if(v===void 0||b===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==d.data.width||b!==d.data.height)return this.fire(new s.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const E=!(a instanceof HTMLImageElement||s.a(a));return d.data.replace(k,E),this.style.updateImage(_,d),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new s.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_,a){Z.getImage(this._requestManager.transformRequest(_,z.Image),a)}listImages(){return this.style.listImages()}addLayer(_,a){return this._lazyInitEmptyStyle(),this.style.addLayer(_,a),this._update(!0)}moveLayer(_,a){return this.style.moveLayer(_,a),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,a,d){return this.style.setLayerZoomRange(_,a,d),this._update(!0)}setFilter(_,a,d={}){return this.style.setFilter(_,a,d),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,a,d,p={}){return this.style.setPaintProperty(_,a,d,p),this._update(!0)}getPaintProperty(_,a){return this.style.getPaintProperty(_,a)}setLayoutProperty(_,a,d,p={}){return this.style.setLayoutProperty(_,a,d,p),this._update(!0)}getLayoutProperty(_,a){return this.style.getLayoutProperty(_,a)}setGlyphs(_,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,a,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,a,d,p=>{p||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,a,d=>{d||this._update(!0)}),this}setLight(_,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,a),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(_,a){return this.style.setFeatureState(_,a),this._update()}removeFeatureState(_,a){return this.style.removeFeatureState(_,a),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,a=0;return this._container&&(_=this._container.clientWidth||400,a=this._container.clientHeight||300),[_,a]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const a=this._canvasContainer=y.create("div","maplibregl-canvas-container",_);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=y.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),p=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],p);const v=this._controlContainer=y.create("div","maplibregl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(k=>{b[k]=y.create("div",`maplibregl-ctrl-${k} `,v)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=y.create("div","maplibregl-cooperative-gesture-screen",this._container);let _=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(_=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${_}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){y.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(_,a,d){this._canvas.width=Math.floor(d*_),this._canvas.height=Math.floor(d*a),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let a=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{a={requestedAttributes:_},p&&(a.statusMessage=p.statusMessage,a.type=p.type)},{once:!0});const d=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!d){const p="Failed to initialize WebGL";throw a?(a.message=p,new Error(JSON.stringify(a))):new Error(p)}this.painter=new _l(d,this.transform),S.testSupport(d)}_onCooperativeGesture(_,a,d){return!a&&d<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const a=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const v=this.transform.zoom,b=s.h.now();this.style.zoomHistory.update(v,b);const k=new s.a8(v,{now:b,fadeDuration:a,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),E=k.crossFadingFactor();E===1&&E===this._crossFadingFactor||(d=!0,this._crossFadingFactor=E),this.style.update(k)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,showPadding:this.showPadding}),this.fire(new s.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.bg.mark(s.bh.load),this.fire(new s.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,s.bg.mark(s.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Z.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),y.remove(this._canvasContainer),y.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),s.bg.clearMetrics(),this._removed=!0,this.fire(new s.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=s.h.frame(_=>{s.bg.frame(_),this._frame=null,this._render(_)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return er}getCameraTargetElevation(){return this.transform.elevation}},Qr.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const a=this._map.getZoom(),d=a===this._map.getMaxZoom(),p=a===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=a},this._setButtonTitle=(a,d)=>{const p=this._map._getUIString(`NavigationControl.${d}`);a.title=p,a.setAttribute("aria-label",p)},this.options=s.e({},Rp,_),this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",a=>a.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",a=>this._map.zoomIn({},{originalEvent:a})),y.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",a=>this._map.zoomOut({},{originalEvent:a})),y.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})}),this._compassIcon=y.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Dp(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,a){const d=y.create("button",_,this._container);return d.type="button",d.addEventListener("click",a),d}},Qr.GeolocateControl=class extends s.E{constructor(_){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new s.k("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.k("geolocate",a)),this._finish()}},this._updateCamera=a=>{const d=new s.L(a.coords.longitude,a.coords.latitude),p=a.coords.accuracy,v=this._map.getBearing(),b=s.e({bearing:v},this.options.fitBoundsOptions),k=Dt.fromLngLat(d,p);this._map.fitBounds(k,b,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const d=new s.L(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&xc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.k("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=a=>{if(this._map){if(this._container.addEventListener("contextmenu",d=>d.preventDefault()),this._geolocateButton=y.create("button","maplibregl-ctrl-geolocate",this._container),y.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",a===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new bl({element:this._dotElement}),this._circleElement=y.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new bl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.k("trackuserlocationend")))})}},this.options=s.e({},On,_)}onAdd(_){return this._map=_,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(a,d=!1){Zn===void 0||d?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{Zn=p.state!=="denied",a(Zn)}).catch(()=>{Zn=!!window.navigator.geolocation,a(Zn)}):(Zn=!!window.navigator.geolocation,a(Zn)):a(Zn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Rn=0,xc=!1}_isOutOfMapMaxBounds(_){const a=this._map.getMaxBounds(),d=_.coords;return a&&(d.longitude<a.getWest()||d.longitude>a.getEast()||d.latitude<a.getSouth()||d.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),a=_.getSouthEast(),d=_.getNorthEast(),p=a.distanceTo(d),v=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Rn--,xc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Rn++,Rn>1?(_={maximumAge:6e5,timeout:0},xc=!0):(_=this.options.positionOptions,xc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Qr.AttributionControl=Io,Qr.LogoControl=_n,Qr.ScaleControl=class{constructor(_){this._onMove=()=>{Lu(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,Lu(this._map,this._container,this.options)},this.options=s.e({},zu,_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Qr.FullscreenControl=class extends s.E{constructor(_={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){y.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=y.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);y.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new s.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Qr.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=_}onAdd(_){return this._map=_,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=y.create("button","maplibregl-ctrl-terrain",this._container),y.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){y.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Qr.Popup=class extends s.E{constructor(_){super(),this.remove=()=>(this._content&&y.remove(this._content),this._container&&(y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new s.k("close")),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=y.create("div","maplibregl-popup",this._map.getContainer()),this._tip=y.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const k of this.options.className.split(" "))this._container.classList.add(k);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Mp(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!a)return;const d=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);let p=this.options.anchor;const v=bc(this.options.offset);if(!p){const k=this._container.offsetWidth,E=this._container.offsetHeight;let A;A=d.y+v.bottom.y<E?["top"]:d.y>this._map.transform.height-E?["bottom"]:[],d.x<k/2?A.push("left"):d.x>this._map.transform.width-k/2&&A.push("right"),p=A.length===0?"bottom":A.join("-")}const b=d.add(v[p]).round();y.setTransform(this._container,`${Ho[p]} translate(${b.x}px,${b.y}px)`),fy(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(zp),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=s.L.convert(_),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const a=document.createDocumentFragment(),d=document.createElement("body");let p;for(d.innerHTML=_;p=d.firstChild,p;)a.appendChild(p);return this.setDOMContent(a)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=y.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){this._container&&this._container.classList.add(_)}removeClassName(_){this._container&&this._container.classList.remove(_)}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}_createCloseButton(){this.options.closeButton&&(this._closeButton=y.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(Lp);_&&_.focus()}},Qr.Marker=bl,Qr.Style=qn,Qr.LngLat=s.L,Qr.LngLatBounds=Dt,Qr.Point=s.P,Qr.MercatorCoordinate=s.U,Qr.Evented=s.E,Qr.AJAXError=s.bi,Qr.config=s.c,Qr.CanvasSource=rr,Qr.GeoJSONSource=Ze,Qr.ImageSource=pt,Qr.RasterDEMTileSource=it,Qr.RasterTileSource=Ct,Qr.VectorTileSource=$t,Qr.VideoSource=sr,Qr.setRTLTextPlugin=s.bj,Qr.getRTLTextPluginStatus=s.bk,Qr.prewarm=function(){fr().acquire(or)},Qr.clearPrewarmedResources=function(){const _=Sr;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(or),Sr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Op.extend(Qr,{isSafari:s.ac,getPerformanceMetrics:s.bg.getPerformanceMetrics}),Qr});var h=i;return h})})(j5);var Ib=j5.exports;const U5=lx(Ib),UJ=mz({__proto__:null,default:U5},[Ib]);var hf=Math.pow,Yi=(e,t,r)=>new Promise((n,i)=>{var l=m=>{try{s(r.next(m))}catch(y){i(y)}},h=m=>{try{s(r.throw(m))}catch(y){i(y)}},s=m=>m.done?n(m.value):Promise.resolve(m.value).then(l,h);s((r=r.apply(e,t)).next())}),pa=Uint8Array,Xm=Uint16Array,HJ=Int32Array,H5=new pa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),G5=new pa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),GJ=new pa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),W5=function(e,t){for(var r=new Xm(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new HJ(r[30]),n=1;n<30;++n)for(var l=r[n];l<r[n+1];++l)i[l]=l-r[n]<<5|n;return{b:r,r:i}},q5=W5(H5,2),Z5=q5.b,WJ=q5.r;Z5[28]=258,WJ[258]=28;var qJ=W5(G5,0),ZJ=qJ.b,K5=new Xm(32768);for(fn=0;fn<32768;++fn)Dl=(fn&43690)>>1|(fn&21845)<<1,Dl=(Dl&52428)>>2|(Dl&13107)<<2,Dl=(Dl&61680)>>4|(Dl&3855)<<4,K5[fn]=((Dl&65280)>>8|(Dl&255)<<8)>>1;var Dl,fn,Ym=function(e,t,r){for(var n=e.length,i=0,l=new Xm(t);i<n;++i)e[i]&&++l[e[i]-1];var h=new Xm(t);for(i=1;i<t;++i)h[i]=h[i-1]+l[i-1]<<1;var s;{s=new Xm(1<<t);var m=15-t;for(i=0;i<n;++i)if(e[i])for(var y=i<<4|e[i],S=t-e[i],T=h[e[i]-1]++<<S,I=T|(1<<S)-1;T<=I;++T)s[K5[T]>>m]=y}return s},hv=new pa(288);for(fn=0;fn<144;++fn)hv[fn]=8;var fn;for(fn=144;fn<256;++fn)hv[fn]=9;var fn;for(fn=256;fn<280;++fn)hv[fn]=7;var fn;for(fn=280;fn<288;++fn)hv[fn]=8;var fn,X5=new pa(32);for(fn=0;fn<32;++fn)X5[fn]=5;var fn,KJ=Ym(hv,9),XJ=Ym(X5,5),Nw=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},ds=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},jw=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},YJ=function(e){return(e+7)/8|0},JJ=function(e,t,r){(r==null||r>e.length)&&(r=e.length);var n=new pa(r-t);return n.set(e.subarray(t,r)),n},QJ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ca=function(e,t,r){var n=new Error(t||QJ[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,ca),!r)throw n;return n},OT=function(e,t,r,n){var i=e.length,l=0;if(!i||t.f&&!t.l)return r||new pa(0);var h=!r||t.i!=2,s=t.i;r||(r=new pa(i*3));var m=function(pt){var sr=r.length;if(pt>sr){var rr=new pa(Math.max(sr*2,pt));rr.set(r),r=rr}},y=t.f||0,S=t.p||0,T=t.b||0,I=t.l,D=t.d,F=t.m,V=t.n,Z=i*8;do{if(!I){y=ds(e,S,1);var z=ds(e,S+1,3);if(S+=3,z)if(z==1)I=KJ,D=XJ,F=9,V=5;else if(z==2){var j=ds(e,S,31)+257,$=ds(e,S+10,15)+4,J=j+ds(e,S+5,31)+1;S+=14;for(var ie=new pa(J),xe=new pa(19),ge=0;ge<$;++ge)xe[GJ[ge]]=ds(e,S+ge*3,7);S+=$*3;for(var we=Nw(xe),Te=(1<<we)-1,Pe=Ym(xe,we),ge=0;ge<J;){var We=Pe[ds(e,S,Te)];S+=We&15;var O=We>>4;if(O<16)ie[ge++]=O;else{var De=0,Se=0;for(O==16?(Se=3+ds(e,S,3),S+=2,De=ie[ge-1]):O==17?(Se=3+ds(e,S,7),S+=3):O==18&&(Se=11+ds(e,S,127),S+=7);Se--;)ie[ge++]=De}}var Fe=ie.subarray(0,j),Ce=ie.subarray(j);F=Nw(Fe),V=Nw(Ce),I=Ym(Fe,F),D=Ym(Ce,V)}else ca(1);else{var O=YJ(S)+4,L=e[O-4]|e[O-3]<<8,te=O+L;if(te>i){s&&ca(0);break}h&&m(T+L),r.set(e.subarray(O,te),T),t.b=T+=L,t.p=S=te*8,t.f=y;continue}if(S>Z){s&&ca(0);break}}h&&m(T+131072);for(var Ne=(1<<F)-1,Ye=(1<<V)-1,at=S;;at=S){var De=I[jw(e,S)&Ne],st=De>>4;if(S+=De&15,S>Z){s&&ca(0);break}if(De||ca(2),st<256)r[T++]=st;else if(st==256){at=S,I=null;break}else{var Dt=st-254;if(st>264){var ge=st-257,St=H5[ge];Dt=ds(e,S,(1<<St)-1)+Z5[ge],S+=St}var $t=D[jw(e,S)&Ye],Ct=$t>>4;$t||ca(3),S+=$t&15;var Ce=ZJ[Ct];if(Ct>3){var St=G5[Ct];Ce+=jw(e,S)&(1<<St)-1,S+=St}if(S>Z){s&&ca(0);break}h&&m(T+131072);var it=T+Dt;if(T<Ce){var Ze=l-Ce,rt=Math.min(Ce,it);for(Ze+T<0&&ca(3);T<rt;++T)r[T]=n[Ze+T]}for(;T<it;T+=4)r[T]=r[T-Ce],r[T+1]=r[T+1-Ce],r[T+2]=r[T+2-Ce],r[T+3]=r[T+3-Ce];T=it}}t.l=I,t.p=at,t.b=T,t.f=y,I&&(y=1,t.m=F,t.d=D,t.n=V)}while(!y);return T==r.length?r:JJ(r,0,T)},eQ=new pa(0),tQ=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&ca(6,"invalid gzip data");var t=e[3],r=10;t&4&&(r+=(e[10]|e[11]<<8)+2);for(var n=(t>>3&1)+(t>>4&1);n>0;n-=!e[r++]);return r+(t&2)},rQ=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},nQ=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&ca(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&ca(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function iQ(e,t){return OT(e,{i:2},t,t)}function oQ(e,t){var r=tQ(e);return r+8>e.length&&ca(6,"invalid gzip data"),OT(e.subarray(r,-8),{i:2},new pa(rQ(e)),t)}function aQ(e,t){return OT(e.subarray(nQ(e,t),-4),{i:2},t,t)}function f2(e,t){return e[0]==31&&e[1]==139&&e[2]==8?oQ(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?iQ(e,t):aQ(e,t)}var sQ=typeof TextDecoder<"u"&&new TextDecoder,lQ=0;try{sQ.decode(eQ,{stream:!0}),lQ=1}catch{}var Y5=(e,t)=>e*hf(2,t),ym=(e,t)=>Math.floor(e/hf(2,t)),$_=(e,t)=>Y5(e.getUint16(t+1,!0),8)+e.getUint8(t),J5=(e,t)=>Y5(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),cQ=(e,t,r,n,i)=>{if(e!==n.getUint8(i))return e-n.getUint8(i);const l=$_(n,i+1);if(t!==l)return t-l;const h=$_(n,i+4);return r!==h?r-h:0},uQ=(e,t,r,n)=>{const i=Q5(e,t|128,r,n);return i?{z:t,x:r,y:n,offset:i[0],length:i[1],isDir:!0}:null},DR=(e,t,r,n)=>{const i=Q5(e,t,r,n);return i?{z:t,x:r,y:n,offset:i[0],length:i[1],isDir:!1}:null},Q5=(e,t,r,n)=>{let i=0,l=e.byteLength/17-1;for(;i<=l;){const h=l+i>>1,s=cQ(t,r,n,e,h*17);if(s>0)i=h+1;else if(s<0)l=h-1;else return[J5(e,h*17+7),e.getUint32(h*17+13,!0)]}return null},dQ=(e,t)=>e.isDir&&!t.isDir?1:!e.isDir&&t.isDir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,e3=(e,t)=>{const r=e.getUint8(t*17);return{z:r&127,x:$_(e,t*17+1),y:$_(e,t*17+4),offset:J5(e,t*17+7),length:e.getUint32(t*17+13,!0),isDir:r>>7===1}},MR=e=>{const t=[],r=new DataView(e);for(let n=0;n<r.byteLength/17;n++)t.push(e3(r,n));return hQ(t)},hQ=e=>{e.sort(dQ);const t=new ArrayBuffer(17*e.length),r=new Uint8Array(t);for(let n=0;n<e.length;n++){const i=e[n];let l=i.z;i.isDir&&(l=l|128),r[n*17]=l,r[n*17+1]=i.x&255,r[n*17+2]=i.x>>8&255,r[n*17+3]=i.x>>16&255,r[n*17+4]=i.y&255,r[n*17+5]=i.y>>8&255,r[n*17+6]=i.y>>16&255,r[n*17+7]=i.offset&255,r[n*17+8]=ym(i.offset,8)&255,r[n*17+9]=ym(i.offset,16)&255,r[n*17+10]=ym(i.offset,24)&255,r[n*17+11]=ym(i.offset,32)&255,r[n*17+12]=ym(i.offset,48)&255,r[n*17+13]=i.length&255,r[n*17+14]=i.length>>8&255,r[n*17+15]=i.length>>16&255,r[n*17+16]=i.length>>24&255}return t},fQ=(e,t)=>{if(e.byteLength<17)return null;const r=e.byteLength/17,n=e3(e,r-1);if(n.isDir){const i=n.z,l=t.z-i,h=Math.trunc(t.x/(1<<l)),s=Math.trunc(t.y/(1<<l));return{z:i,x:h,y:s}}return null};function pQ(e){return Yi(this,null,function*(){const t=yield e.getBytes(0,512e3),r=new DataView(t.data),n=r.getUint32(4,!0),i=r.getUint16(8,!0),l=new TextDecoder("utf-8"),h=JSON.parse(l.decode(new DataView(t.data,10,n)));let s=0;h.compression==="gzip"&&(s=2);let m=0;"minzoom"in h&&(m=+h.minzoom);let y=0;"maxzoom"in h&&(y=+h.maxzoom);let S=0,T=0,I=0,D=-180,F=-85,V=180,Z=85;if(h.bounds){const O=h.bounds.split(",");D=+O[0],F=+O[1],V=+O[2],Z=+O[3]}if(h.center){const O=h.center.split(",");S=+O[0],T=+O[1],I=+O[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+n,rootDirectoryLength:i*17,jsonMetadataOffset:10,jsonMetadataLength:n,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:s,tileType:1,minZoom:m,maxZoom:y,minLon:D,minLat:F,maxLon:V,maxLat:Z,centerZoom:I,centerLon:S,centerLat:T,etag:t.etag}})}function mQ(e,t,r,n,i,l,h){return Yi(this,null,function*(){let s=yield r.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(s=MR(s));const m=DR(new DataView(s),n,i,l);if(m){let T=(yield t.getBytes(m.offset,m.length,h)).data;const I=new DataView(T);return I.getUint8(0)===31&&I.getUint8(1)===139&&(T=f2(new Uint8Array(T))),{data:T}}const y=fQ(new DataView(s),{z:n,x:i,y:l});if(y){const S=uQ(new DataView(s),y.z,y.x,y.y);if(S){let T=yield r.getArrayBuffer(t,S.offset,S.length,e);e.specVersion===1&&(T=MR(T));const I=DR(new DataView(T),n,i,l);if(I){let F=(yield t.getBytes(I.offset,I.length,h)).data;const V=new DataView(F);return V.getUint8(0)===31&&V.getUint8(1)===139&&(F=f2(new Uint8Array(F))),{data:F}}}}})}var t3={getHeader:pQ,getZxy:mQ},gQ=e=>(t,r)=>{if(r instanceof AbortController)return e(t,r);const n=new AbortController;return e(t,n).then(i=>r(void 0,i.data,i.cacheControl||"",i.expires||""),i=>r(i)).catch(i=>r(i)),{cancel:()=>n.abort()}},vQ=class{constructor(e){this.tilev4=(t,r)=>Yi(this,null,function*(){if(t.type==="json"){const I=t.url.substr(10);let D=this.tiles.get(I);if(D||(D=new zR(I),this.tiles.set(I,D)),this.metadata)return{data:yield D.getTileJson(t.url)};const F=yield D.getHeader();return{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:F.minZoom,maxzoom:F.maxZoom,bounds:[F.minLon,F.minLat,F.maxLon,F.maxLat]}}}const n=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),i=t.url.match(n);if(!i)throw new Error("Invalid PMTiles protocol URL");const l=i[1];let h=this.tiles.get(l);h||(h=new zR(l),this.tiles.set(l,h));const s=i[2],m=i[3],y=i[4],S=yield h.getHeader(),T=yield h==null?void 0:h.getZxy(+s,+m,+y,r.signal);return T?{data:new Uint8Array(T.data),cacheControl:T.cacheControl,expires:T.expires}:S.tileType===1?{data:new Uint8Array}:{data:null}}),this.tile=gQ(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function Ih(e,t){return(t>>>0)*4294967296+(e>>>0)}function yQ(e,t){const r=t.buf;let n=r[t.pos++],i=(n&112)>>4;if(n<128||(n=r[t.pos++],i|=(n&127)<<3,n<128)||(n=r[t.pos++],i|=(n&127)<<10,n<128)||(n=r[t.pos++],i|=(n&127)<<17,n<128)||(n=r[t.pos++],i|=(n&127)<<24,n<128)||(n=r[t.pos++],i|=(n&1)<<31,n<128))return Ih(e,i);throw new Error("Expected varint not more than 10 bytes")}function _m(e){const t=e.buf;let r=t[e.pos++],n=r&127;return r<128||(r=t[e.pos++],n|=(r&127)<<7,r<128)||(r=t[e.pos++],n|=(r&127)<<14,r<128)||(r=t[e.pos++],n|=(r&127)<<21,r<128)?n:(r=t[e.pos],n|=(r&15)<<28,yQ(n,e))}function _Q(e,t,r,n){if(n===0){r===1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const i=t[0];t[0]=t[1],t[1]=i}}var xQ=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function bQ(e,t,r){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>hf(2,e)-1||r>hf(2,e)-1)throw Error("tile x/y outside zoom level bounds");const n=xQ[e],i=hf(2,e);let l=0,h=0,s=0;const m=[t,r];let y=i/2;for(;y>0;)l=(m[0]&y)>0?1:0,h=(m[1]&y)>0?1:0,s+=y*y*(3*l^h),_Q(y,m,l,h),y=y/2;return n+s}function r3(e,t){return Yi(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return f2(new Uint8Array(e));const r=new Response(e).body;if(!r)throw Error("Failed to read response stream");const n=r.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(n).arrayBuffer()}throw Error("Compression method not supported")})}function wQ(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":""}var SQ=127;function CQ(e,t){let r=0,n=e.length-1;for(;r<=n;){const i=n+r>>1,l=t-e[i].tileId;if(l>0)r=i+1;else if(l<0)n=i-1;else return e[i]}return n>=0&&(e[n].runLength===0||t-e[n].tileId<e[n].runLength)?e[n]:null}var kQ=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");const n=r.indexOf("Windows")>-1,i=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,n&&i&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,n){return Yi(this,null,function*(){let i,l;r?l=r:(i=new AbortController,l=i.signal);const h=new Headers(this.customHeaders);h.set("range",`bytes=${e}-${e+t-1}`);let s;this.mustReload?s="reload":this.chromeWindowsNoCache&&(s="no-store");let m=yield fetch(this.url,{signal:l,cache:s,headers:h});if(e===0&&m.status===416){const I=m.headers.get("Content-Range");if(!I||!I.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const D=+I.substr(8);m=yield fetch(this.url,{signal:l,cache:"reload",headers:{range:`bytes=0-${D-1}`}})}let y=m.headers.get("Etag");if(y!=null&&y.startsWith("W/")&&(y=null),m.status===416||n&&y&&y!==n)throw this.mustReload=!0,new p2(`Server returned non-matching ETag ${n} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(m.status>=300)throw Error(`Bad response code: ${m.status}`);const S=m.headers.get("Content-Length");if(m.status===200&&(!S||+S>t))throw i&&i.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield m.arrayBuffer(),etag:y||void 0,cacheControl:m.headers.get("Cache-Control")||void 0,expires:m.headers.get("Expires")||void 0}})}};function hs(e,t){const r=e.getUint32(t+4,!0),n=e.getUint32(t+0,!0);return r*hf(2,32)+n}function TQ(e,t){const r=new DataView(e),n=r.getUint8(7);if(n>3)throw Error(`Archive is spec version ${n} but this library supports up to spec version 3`);return{specVersion:n,rootDirectoryOffset:hs(r,8),rootDirectoryLength:hs(r,16),jsonMetadataOffset:hs(r,24),jsonMetadataLength:hs(r,32),leafDirectoryOffset:hs(r,40),leafDirectoryLength:hs(r,48),tileDataOffset:hs(r,56),tileDataLength:hs(r,64),numAddressedTiles:hs(r,72),numTileEntries:hs(r,80),numTileContents:hs(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:t}}function n3(e){const t={buf:new Uint8Array(e),pos:0},r=_m(t),n=[];let i=0;for(let l=0;l<r;l++){const h=_m(t);n.push({tileId:i+h,offset:0,length:0,runLength:1}),i+=h}for(let l=0;l<r;l++)n[l].runLength=_m(t);for(let l=0;l<r;l++)n[l].length=_m(t);for(let l=0;l<r;l++){const h=_m(t);h===0&&l>0?n[l].offset=n[l-1].offset+n[l-1].length:n[l].offset=h-1}return n}function EQ(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var p2=class extends Error{};function IQ(e,t){return Yi(this,null,function*(){const r=yield e.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(EQ(r.data)<3)return[yield t3.getHeader(e)];const i=r.data.slice(0,SQ),l=TQ(i,r.etag),h=r.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),s=`${e.getKey()}|${l.etag||""}|${l.rootDirectoryOffset}|${l.rootDirectoryLength}`,m=n3(yield t(h,l.internalCompression));return[l,[s,m.length,m]]})}function PQ(e,t,r,n,i){return Yi(this,null,function*(){const l=yield e.getBytes(r,n,void 0,i.etag),h=yield t(l.data,i.internalCompression),s=n3(h);if(s.length===0)throw new Error("Empty directory is invalid");return s})}var AQ=class{constructor(e=100,t=!0,r=r3){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return Yi(this,null,function*(){const t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;const n=new Promise((i,l)=>{IQ(e,this.decompress).then(h=>{h[1]&&this.cache.set(h[1][0],{lastUsed:this.counter++,data:Promise.resolve(h[1][2])}),i(h[0]),this.prune()}).catch(h=>{l(h)})});return this.cache.set(t,{lastUsed:this.counter++,data:n}),n})}getDirectory(e,t,r,n){return Yi(this,null,function*(){const i=`${e.getKey()}|${n.etag||""}|${t}|${r}`,l=this.cache.get(i);if(l)return l.lastUsed=this.counter++,yield l.data;const h=new Promise((s,m)=>{PQ(e,this.decompress,t,r,n).then(y=>{s(y),this.prune()}).catch(y=>{m(y)})});return this.cache.set(i,{lastUsed:this.counter++,data:h}),h})}getArrayBuffer(e,t,r,n){return Yi(this,null,function*(){const i=`${e.getKey()}|${n.etag||""}|${t}|${r}`,l=this.cache.get(i);if(l)return l.lastUsed=this.counter++,yield l.data;const h=new Promise((s,m)=>{e.getBytes(t,r,void 0,n.etag).then(y=>{s(y.data),this.cache.has(i),this.prune()}).catch(y=>{m(y)})});return this.cache.set(i,{lastUsed:this.counter++,data:h}),h})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,n)=>{r.lastUsed<e&&(e=r.lastUsed,t=n)}),t&&this.cache.delete(t)}}invalidate(e){return Yi(this,null,function*(){const t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());const r=new Promise((n,i)=>{this.getHeader(e).then(l=>{n(),this.invalidations.delete(t)}).catch(l=>{i(l)})});this.invalidations.set(t,r)})}},zR=class{constructor(e,t,r){typeof e=="string"?this.source=new kQ(e):this.source=e,r?this.decompress=r:this.decompress=r3,t?this.cache=t:this.cache=new AQ}getHeader(){return Yi(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,n){return Yi(this,null,function*(){const i=bQ(e,t,r),l=yield this.cache.getHeader(this.source);if(l.specVersion<3)return t3.getZxy(l,this.source,this.cache,e,t,r,n);if(e<l.minZoom||e>l.maxZoom)return;let h=l.rootDirectoryOffset,s=l.rootDirectoryLength;for(let m=0;m<=3;m++){const y=yield this.cache.getDirectory(this.source,h,s,l),S=CQ(y,i);if(S){if(S.runLength>0){const T=yield this.source.getBytes(l.tileDataOffset+S.offset,S.length,n,l.etag);return{data:yield this.decompress(T.data,l.tileCompression),cacheControl:T.cacheControl,expires:T.expires}}h=l.leafDirectoryOffset+S.offset,s=S.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,r,n){return Yi(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,n)}catch(i){if(i instanceof p2)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,n);throw i}})}getMetadataAttempt(){return Yi(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),n=new TextDecoder("utf-8");return JSON.parse(n.decode(r))})}getMetadata(){return Yi(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof p2)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Yi(this,null,function*(){const t=yield this.getHeader(),r=yield this.getMetadata(),n=wQ(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${n}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};let LR=!1;function $T(){if(LR)return;const e=new vQ;U5.addProtocol("pmtiles",e.tile),LR=!0}const BT=e=>{$T();const{mode:t="light",children:r}=e,n=LT[t];return H.jsxs(H.Fragment,{children:[H.jsx(en,{id:"background",type:"background",paint:{"background-color":n.land}}),H.jsxs(eu,{id:"world",type:"vector",url:"pmtiles:///world.pmtiles",children:[H.jsx(en,{"source-layer":"water",type:"fill",paint:{"fill-color":n.water}}),r,H.jsx(en,{"source-layer":"states",type:"line",paint:{"line-color":n.stateBorder,"line-width":1,"line-opacity":1,"line-dasharray":[2,2]}}),H.jsx(en,{"source-layer":"countries",type:"line",filter:["!=",["get","name"],"Serbia-Kosovo"],paint:{"line-color":n.countryBorder,"line-width":2,"line-opacity":1}}),H.jsx(en,{"source-layer":"countries",type:"line",filter:["==",["get","name"],"Serbia-Kosovo"],paint:{"line-color":n.countryBorder,"line-width":2,"line-opacity":1,"line-dasharray":[3,2]}})]})]})},m2=e=>($T(),H.jsx(eu,{type:"vector",url:`pmtiles:///${e.game}-contours.pmtiles`,children:H.jsx(en,{"source-layer":"contours",type:"fill",layout:{"fill-sort-key":["get","elevation"],visibility:e.showContours?"visible":"none"},paint:{"fill-color":["interpolate",["linear"],["get","elevation"],-200,"#77c571",0,"#77c571",100,"#afd35f",150,"#ece75b",200,"#decb4c",250,"#d2b446",300,"#bf9c4a",400,"#ba8839",500,"#ac792d"]}})}));class fu extends Error{constructor(t){super("unreachable value "+JSON.stringify(t))}}class tu{static checkArgument(t,r){if(!t)throw new Error(r)}static checkState(t,r){if(!t)throw new Error(r)}static checkExists(t,r){return ln(t,r)}}var go=(e=>(e[e.Arizona=0]="Arizona",e[e.Arkansas=1]="Arkansas",e[e.Colorado=2]="Colorado",e[e.Idaho=3]="Idaho",e[e.Kansas=4]="Kansas",e[e.Montana=5]="Montana",e[e.Nebraska=6]="Nebraska",e[e.Nevada=7]="Nevada",e[e.NewMexico=8]="NewMexico",e[e.Oklahoma=9]="Oklahoma",e[e.Oregon=10]="Oregon",e[e.Texas=11]="Texas",e[e.Utah=12]="Utah",e[e.Washington=13]="Washington",e[e.Wyoming=14]="Wyoming",e))(go||{});const Cg=new Set([7,0,8,10,13,12,3,2,14,5,11,9,4,6,1]),RQ={7:"Nevada",0:"Arizona",8:"New Mexico",10:"Oregon",13:"Washington",12:"Utah",3:"Idaho",2:"Colorado",14:"Wyoming",5:"Montana",11:"Texas",9:"Oklahoma",4:"Kansas",6:"Nebraska",1:"Arkansas"},i3={0:new Set,1:new Set([7]),2:new Set([0]),3:new Set([8]),4:new Set([10]),5:new Set([13]),6:new Set([13,10]),7:new Set([12]),8:new Set([12,8]),9:new Set([3]),10:new Set([3,10]),11:new Set([3,12]),12:new Set([3,13]),13:new Set([2]),14:new Set([2,8]),15:new Set([2,12]),16:new Set([14]),17:new Set([14,2]),18:new Set([14,3]),19:new Set([14,12]),20:new Set([11]),21:new Set([11,8]),22:new Set([5]),23:new Set([5,3]),24:new Set([5,14]),25:new Set([9]),26:new Set([9,2]),27:new Set([9,8]),28:new Set([9,11]),29:new Set([4]),30:new Set([4,2]),31:new Set([4,9]),32:new Set([6]),33:new Set([6,2]),34:new Set([6,4]),35:new Set([6,14]),36:new Set([1]),37:new Set([1,9]),38:new Set([1,11])},DQ={1:0,2:1,3:2,7:13,13:9,31:3,37:4,43:20,44:7,47:5,17:29,27:22,36:25,50:16,18:32,19:36};for(const e of Object.values(DQ))e!==0&&O5(i3[e].size===1);function Pb(e){const t=new Set;for(const[r,n]of Object.entries(i3))[...n].every(i=>e.has(i))&&t.add(Number(r));return t}const MQ=new Set([]);var o3=(e=>(e[e.Road=0]="Road",e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.Green=3]="Green",e[e.NavRed=4]="NavRed",e[e.NavGreen=5]="NavGreen",e[e.NavBlue=6]="NavBlue",e[e.NavYellow=7]="NavYellow",e[e.NavPurple=8]="NavPurple",e))(o3||{}),xi=(e=>(e[e.FuelStation=0]="FuelStation",e[e.Toll=1]="Toll",e[e.Parking=2]="Parking",e[e.RecruitmentAgency=3]="RecruitmentAgency",e[e.Service=4]="Service",e[e.TruckDealer=5]="TruckDealer",e[e.Port=6]="Port",e[e.Train=7]="Train",e[e.Viewpoint=8]="Viewpoint",e[e.PhotoSight=9]="PhotoSight",e[e.AgricultureCheck=10]="AgricultureCheck",e[e.BorderCheck=11]="BorderCheck",e[e.Garage=12]="Garage",e[e.WeighStation=13]="WeighStation",e[e.CityNames=14]="CityNames",e[e.Company=15]="Company",e[e.RoadNumber=16]="RoadNumber",e))(xi||{});const kg=new Set(Array.from({length:17},(e,t)=>t)),B_=e=>{const{game:t,visibleIcons:r=kg,enableIconAutoHide:n=!0,mode:i="light"}=e,l=t==="ats"?BR(t,e.dlcs??Cg):BR(t,e.dlcs??MQ),h=LT[i];return $T(),H.jsxs(eu,{id:t,type:"vector",url:`pmtiles:///${t}.pmtiles`,children:[H.jsx(en,{id:t+"mapAreas","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"mapArea"],l],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":Uw(i),"fill-outline-color":["case",["==",["get","color"],o3.Road],h.mapAreaOutline,Uw(i)]}}),H.jsx(en,{id:t+"prefabs","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"prefab"],l],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":Uw(i)}}),H.jsx(zQ,{game:t,mode:i,color:h.footprint}),H.jsx(en,{id:t+"hidden-roads","source-layer":t,type:"line",minzoom:9,filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","hidden"],!0],l],paint:{"line-color":h.hiddenRoad,"line-width":1,"line-opacity":.7}}),H.jsx(en,{id:t+"visible-roads-case","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],l],layout:FR,paint:{"line-color":BQ(i),"line-gap-width":NR,"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,14,2,16,3]}}),H.jsx(en,{id:t+"visible-roads","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],l],layout:FR,paint:{"line-color":$Q(i),"line-width":NR}}),H.jsx(en,{id:t+"ferries","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],paint:{"line-color":h.ferryLine,"line-width":1,"line-opacity":.8,"line-dasharray":[2,2]}}),H.jsx(en,{id:t+"trains-a","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":h.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,-6]}}),H.jsx(en,{id:t+"trains-b","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":h.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,6]}}),H.jsx(en,{id:t+"train-hatch","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":h.trainLine,"line-width":10,"line-opacity":.8,"line-dasharray":[.1,1]}}),H.jsx(en,{id:t+"ferry-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],layout:{...Ml,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":h.ferryHalo,"text-color":h.ferryLabel}}),H.jsx(en,{id:t+"train-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],layout:{...Ml,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":h.trainHalo,"text-color":h.trainLabel}}),r.has(15)&&H.jsx(en,{id:t+"company-icons","source-layer":t,type:"symbol",minzoom:n?8:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"company"],l],layout:Vu(n,1,1.25,3.5)}),t==="ets2"&&r.has(16)&&H.jsx(en,{id:"euro-road-overlays","source-layer":t,minzoom:n?4.5:0,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["!",["in",["get","sprite"],["literal",OR]]]],layout:Vu(n,.4*1.25,.75*1.25,1.25*1.25)}),t==="ats"&&r.has(16)&&H.jsx(en,{id:t+"road-interstate-overlays","source-layer":t,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","is",["get","sprite"]],0],l],layout:Vu(n,.4,.75,1.25)}),t==="ats"&&r.has(16)&&H.jsx(en,{id:t+"road-us-route-overlays","source-layer":t,type:"symbol",minzoom:n?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","us",["get","sprite"]],0],l],layout:Vu(n,.4,.75,1.25)}),t==="ats"&&r.has(16)&&H.jsx(en,{id:t+"road-state-route-overlays","source-layer":t,type:"symbol",minzoom:n?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],l,["!",["any",["==",["index-of","is",["get","sprite"]],0],["==",["index-of","us",["get","sprite"]],0],["in",["get","sprite"],["literal",OR]]]]],layout:Vu(n,.4,.75,1.25)}),r.has(14)&&H.jsx(en,{id:t+"city-labels-small","source-layer":t,type:"symbol",minzoom:n?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],[">",["get","scaleRank"],6],l],layout:{...Ml,"text-field":"{name}","text-allow-overlap":!n,"text-variable-anchor":Lh,"text-size":12,"icon-image":Vw,"icon-allow-overlap":!n,"icon-size":.6},paint:h.primaryTextPaint}),r.has(14)&&H.jsx(en,{id:t+"city-labels-medium","source-layer":t,type:"symbol",minzoom:n?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],6],[">",["get","scaleRank"],3],l],layout:{...Ml,"text-field":"{name}","text-allow-overlap":!n,"text-variable-anchor":Lh,"text-size":13,"icon-image":Vw,"icon-allow-overlap":!n,"icon-size":.6},paint:h.primaryTextPaint}),r.has(14)&&H.jsx(en,{id:t+"city-labels-big","source-layer":t,type:"symbol",minzoom:n?4:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],3],l],layout:{...Ml,"text-field":"{name}","text-allow-overlap":!n,"text-variable-anchor":Lh,"text-size":14,"icon-image":Vw,"icon-allow-overlap":!n,"icon-size":.8},paint:h.primaryTextPaint}),t==="ets2"&&r.has(14)&&H.jsx(en,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...Ml,"text-font":["Klokantech Noto Sans Bold"],"text-field":"{name}","text-variable-anchor":Lh,"text-size":14},paint:h.primaryTextPaint}),t==="ats"&&r.has(14)&&H.jsx(en,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...Ml,"text-font":["Open Sans Light"],"text-field":"{name}","text-transform":"uppercase","text-variable-anchor":Lh,"text-size":["step",["zoom"],10,5,13]},paint:h.secondaryTextPaint}),g2(r)&&H.jsx(en,{id:t+"poi-icons","source-layer":t,type:"symbol",minzoom:n?7:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],$R(r),l],layout:Vu(n,.6,1.25,2.5,{vertical:2,horizontal:2})}),g2(r)&&(r.has(8)||r.has(9))&&H.jsx(en,{id:t+"poi-icon-labels","source-layer":t,type:"symbol",minzoom:n?9.5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["in",["get","poiType"],["literal",["viewpoint","landmark"]]],$R(r),l],layout:{...Vu(n,.6,1.25,2.5,{vertical:2,horizontal:2}),...Ml,"text-field":"{poiName}","text-allow-overlap":!n,"text-variable-anchor":["left","right","top","bottom"],"text-radial-offset":1.5,"text-size":10},paint:h.primaryTextPaint})]})},zQ=({game:e,color:t,mode:r})=>H.jsxs(eu,{id:e+"footprints",type:"vector",url:`pmtiles:///${e}-footprints.pmtiles`,children:[H.jsx(en,{id:e+"footprints","source-layer":"footprints",type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-color":t,"fill-opacity":["step",["zoom"],1,9,.8]}}),H.jsx(en,{id:e+"extrusions",minzoom:9,"source-layer":"footprints",type:"fill-extrusion",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-extrusion-color":t,"fill-extrusion-height":["interpolate",["exponential",1.5],["zoom"],9,["*",10,["get","height"]],13,["*",20,["get","height"]]],"fill-extrusion-opacity":r==="light"?.33:.67}})]});function Vu(e,t,r,n,i={vertical:10,horizontal:30}){const l=["literal",[i.vertical,i.horizontal]];return{"icon-image":"{sprite}","icon-allow-overlap":!e,"icon-padding":l,"icon-size":["interpolate",["exponential",1.5],["zoom"],4,t,9,r,13,n]}}const Vw=["step",["zoom"],["case",["==",["get","capital"],2],"dotdot","dot"],8,""],LQ=[9,8,6,7,2,0,4,5,12,3,13,1,10,11],OR=["weigh_ico","toll_ico","agri_check","border_ico"];function g2(e){return LQ.some(t=>e.has(t))}function $R(e){tu.checkArgument(g2(e));const t=[];e.has(9)&&t.push("landmark"),e.has(8)&&t.push("viewpoint"),e.has(6)&&t.push("ferry"),e.has(7)&&t.push("train");const r=[];e.has(0)&&r.push("gas_ico"),e.has(4)&&r.push("service_ico"),e.has(13)&&r.push("weigh_station_ico"),e.has(5)&&r.push("dealer_ico"),e.has(12)&&r.push("garage_large_ico"),e.has(3)&&r.push("recruitment_ico"),e.has(2)&&r.push("parking_ico");const n=[];e.has(13)&&n.push("weigh_ico"),e.has(1)&&n.push("toll_ico"),e.has(10)&&n.push("agri_check"),e.has(11)&&n.push("border_ico");const i=t.length>0?["in",["get","poiType"],["literal",t]]:!1,l=r.length>0?["all",["==",["get","poiType"],"facility"],["in",["get","sprite"],["literal",r]]]:!1,h=n.length>0?["all",["==",["get","poiType"],"road"],["in",["get","sprite"],["literal",n]]]:!1;return["any",i,l,h]}function BR(e,t){if(e!=="ats")return["boolean",!0];const r=Pb(t);return["in",["get","dlcGuard"],["literal",[...r]]]}const Lh=["step",["zoom"],["literal",["top","bottom","right","left"]],7,["literal",["center"]]],Ml={"text-radial-offset":.5,"text-justify":"auto","text-font":["Klokantech Noto Sans Regular"]},FR={"line-cap":"round","line-join":"bevel"},NR=["interpolate",["exponential",1.5],["zoom"],3,.8,14,30,16,150],a3={light:{freeway:["#fde293","#f8c248"],divided:["#ffffff","#dddddd"],no_vehicles:["#aaaaaa","#888888"],local:["#f1f3f4","#dddddd"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]},dark:{freeway:["#95813e","#372f21"],divided:["#3c4043","#4c5043"],no_vehicles:["#606166","#888888"],local:["#606166","#333"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]}},OQ={light:{0:"hsl(200, 8%, 92%)",1:"hsl(38, 59%, 76%)",2:"hsl(38, 64%, 58%)",3:"hsl(92, 31%, 70%)",4:"hsl(0, 100%, 30%)",5:"hsl(107, 51%, 43%)",6:"hsl(201, 53%, 39%)",7:"hsl(53, 84%, 53%)",8:"hsl(267,46% ,45%)"},dark:{0:"hsl(200, 2%, 36%)",1:"hsl(38, 25%, 35%)",2:"hsl(38, 25%, 25%)",3:"hsl(143, 20%, 25%)",4:"hsl(0, 100%, 25%)",5:"hsl(107, 51%, 25%)",6:"hsl(201, 53%, 25%)",7:"hsl(53, 84%, 25%)",8:"hsl(267, 46%, 25%)"}},$Q=e=>["match",["get","roadType"],...Object.entries(a3[e]).flatMap(([t,[r]])=>[t,r]),"#f0f"],BQ=e=>["match",["get","roadType"],...Object.entries(a3[e]).flatMap(([t,[,r]])=>[t,r]),"#b0b"],Uw=e=>["match",["get","color"],...Object.entries(OQ[e]).flatMap(([t,r])=>[Number(t),r]),"#b0b"],s3="https://raw.githubusercontent.com/nautofon/ats-towns/california/all-towns.geojson",l3="/ets2-villages.geojson";var Zi=(e=>(e.AR="AR",e.AZ="AZ",e.CA="CA",e.CO="CO",e.ID="ID",e.KS="KS",e.MT="MT",e.NE="NE",e.NM="NM",e.NV="NV",e.OK="OK",e.OR="OR",e.TX="TX",e.UT="UT",e.WA="WA",e.WY="WY",e))(Zi||{});const FQ={AR:void 0,AZ:void 0,CA:void 0,CO:void 0,ID:void 0,KS:void 0,MT:void 0,NE:void 0,NM:void 0,NV:void 0,OK:void 0,OR:void 0,TX:void 0,UT:void 0,WA:void 0,WY:void 0},NQ=new Set(Object.keys(FQ)),F_=e=>{const{game:t,enableAutoHide:r=!0,mode:n="light"}=e,i=t==="ats"?s3:l3,l=t==="ats"?["in",["get","state"],["literal",[...e.enabledStates??NQ]]]:["boolean",!0],h=LT[n];return H.jsx(eu,{id:`${t}-scenery-towns`,type:"geojson",data:i,children:H.jsx(en,{id:`${t}-scenery-towns`,type:"symbol",minzoom:r?7:0,filter:l,layout:{...Ml,"text-field":"{name}","text-allow-overlap":!r,"text-variable-anchor":Lh,"text-size":10.5},paint:h.primaryTextPaint})})},FT=new Proxy({version:8,sprite:"/sprites",glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[]},{get(e,t,r){var n;return t==="sprite"&&((n=e.sprite)!=null&&n.toString().match(/^\/\w/))?window.location.origin+e.sprite.toString():Reflect.get(e,t,r)}});function on(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(r.length?" "+r.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var jQ={};function Ab(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:jQ}var c3=Object.assign,N_=Object.getOwnPropertyDescriptor,ol=Object.defineProperty,Rb=Object.prototype,v2=[];Object.freeze(v2);var NT={};Object.freeze(NT);var VQ=typeof Proxy<"u",UQ=Object.toString();function u3(){VQ||on("Proxy not available")}function d3(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Yh=function(){};function Es(e){return typeof e=="function"}function pd(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function Db(e){return e!==null&&typeof e=="object"}function nc(e){if(!Db(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r.toString()===UQ}function h3(e){var t=e==null?void 0:e.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function fv(e,t,r){ol(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function f3(e,t,r){ol(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function Ad(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(n){return Db(n)&&n[r]===!0}}function Kf(e){return e!=null&&Object.prototype.toString.call(e)==="[object Map]"}function HQ(e){var t=Object.getPrototypeOf(e),r=Object.getPrototypeOf(t),n=Object.getPrototypeOf(r);return n===null}function Fl(e){return e!=null&&Object.prototype.toString.call(e)==="[object Set]"}var p3=typeof Object.getOwnPropertySymbols<"u";function GQ(e){var t=Object.keys(e);if(!p3)return t;var r=Object.getOwnPropertySymbols(e);return r.length?[].concat(t,r.filter(function(n){return Rb.propertyIsEnumerable.call(e,n)})):t}var Df=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:p3?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function m3(e){return e===null?null:typeof e=="object"?""+e:e}function Wl(e,t){return Rb.hasOwnProperty.call(e,t)}var WQ=Object.getOwnPropertyDescriptors||function(t){var r={};return Df(t).forEach(function(n){r[n]=N_(t,n)}),r};function ma(e,t){return!!(e&t)}function ga(e,t,r){return r?e|=t:e&=~t,e}function jR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function qQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KQ(n.key),n)}}function Xf(e,t,r){return t&&qQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jh(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=XQ(e))||t){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function md(){return md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},md.apply(null,arguments)}function g3(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,y2(e,t)}function y2(e,t){return y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},y2(e,t)}function ZQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function KQ(e){var t=ZQ(e,"string");return typeof t=="symbol"?t:t+""}function XQ(e,t){if(e){if(typeof e=="string")return jR(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jR(e,t):void 0}}var Qs=Symbol("mobx-stored-annotations");function al(e){function t(r,n){if(mv(n))return e.decorate_20223_(r,n);pv(r,n,e)}return Object.assign(t,e)}function pv(e,t,r){Wl(e,Qs)||fv(e,Qs,md({},e[Qs])),oee(r)||(e[Qs][t]=r)}function YQ(e){return Wl(e,Qs)||fv(e,Qs,md({},e[Qs])),e[Qs]}function mv(e){return typeof e=="object"&&typeof e.kind=="string"}var yr=Symbol("mobx administration"),pu=function(){function e(r){r===void 0&&(r="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=cn.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=r}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.reportObserved=function(){return D3(this)},t.reportChanged=function(){Ua(),M3(this),Ha()},t.toString=function(){return this.name_},Xf(e,[{key:"isBeingObserved",get:function(){return ma(this.flags_,e.isBeingObservedMask_)},set:function(n){this.flags_=ga(this.flags_,e.isBeingObservedMask_,n)}},{key:"isPendingUnobservation",get:function(){return ma(this.flags_,e.isPendingUnobservationMask_)},set:function(n){this.flags_=ga(this.flags_,e.isPendingUnobservationMask_,n)}},{key:"diffValue",get:function(){return ma(this.flags_,e.diffValueMask_)?1:0},set:function(n){this.flags_=ga(this.flags_,e.diffValueMask_,n===1)}}])}();pu.isBeingObservedMask_=1;pu.isPendingUnobservationMask_=2;pu.diffValueMask_=4;var jT=Ad("Atom",pu);function v3(e,t,r){t===void 0&&(t=Yh),r===void 0&&(r=Yh);var n=new pu(e);return t!==Yh&&ute(n,t),r!==Yh&&F3(n,r),n}function JQ(e,t){return e===t}function QQ(e,t){return qT(e,t)}function eee(e,t){return qT(e,t,1)}function tee(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Mf={identity:JQ,structural:QQ,default:tee,shallow:eee};function gd(e,t,r){return H3(e)?e:Array.isArray(e)?Ii.array(e,{name:r}):nc(e)?Ii.object(e,void 0,{name:r}):Kf(e)?Ii.map(e,{name:r}):Fl(e)?Ii.set(e,{name:r}):typeof e=="function"&&!Eg(e)&&!Ig(e)?h3(e)?zf(e):Tg(r,e):e}function ree(e,t,r){if(e==null||Fb(e)||Bb(e)||Dd(e)||Js(e))return e;if(Array.isArray(e))return Ii.array(e,{name:r,deep:!1});if(nc(e))return Ii.object(e,void 0,{name:r,deep:!1});if(Kf(e))return Ii.map(e,{name:r,deep:!1});if(Fl(e))return Ii.set(e,{name:r,deep:!1})}function Mb(e){return e}function nee(e,t){return qT(e,t)?t:e}var iee="override";function oee(e){return e.annotationType_===iee}function gv(e,t){return{annotationType_:e,options_:t,make_:aee,extend_:see,decorate_20223_:lee}}function aee(e,t,r,n){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(e,t,r,!1)===null?0:1;if(n===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if(Eg(r.value))return 1;var l=y3(e,this,t,r,!1);return ol(n,t,l),2}function see(e,t,r,n){var i=y3(e,this,t,r);return e.defineProperty_(t,i,n)}function lee(e,t){var r=t.kind,n=t.name,i=t.addInitializer,l=this,h=function(y){var S,T,I,D;return vd((S=(T=l.options_)==null?void 0:T.name)!=null?S:n.toString(),y,(I=(D=l.options_)==null?void 0:D.autoAction)!=null?I:!1)};if(r=="field")return function(m){var y,S=m;return Eg(S)||(S=h(S)),(y=l.options_)!=null&&y.bound&&(S=S.bind(this),S.isMobxAction=!0),S};if(r=="method"){var s;return Eg(e)||(e=h(e)),(s=this.options_)!=null&&s.bound&&i(function(){var m=this,y=m[n].bind(m);y.isMobxAction=!0,m[n]=y}),e}on("Cannot apply '"+l.annotationType_+"' to '"+String(n)+"' (kind: "+r+"):"+(`
'`+l.annotationType_+"' can only be used on properties with a function value."))}function cee(e,t,r,n){t.annotationType_,n.value}function y3(e,t,r,n,i){var l,h,s,m,y,S,T;i===void 0&&(i=Nt.safeDescriptors),cee(e,t,r,n);var I=n.value;if((l=t.options_)!=null&&l.bound){var D;I=I.bind((D=e.proxy_)!=null?D:e.target_)}return{value:vd((h=(s=t.options_)==null?void 0:s.name)!=null?h:r.toString(),I,(m=(y=t.options_)==null?void 0:y.autoAction)!=null?m:!1,(S=t.options_)!=null&&S.bound?(T=e.proxy_)!=null?T:e.target_:void 0),configurable:i?e.isPlainObject_:!0,enumerable:!1,writable:!i}}function _3(e,t){return{annotationType_:e,options_:t,make_:uee,extend_:dee,decorate_20223_:hee}}function uee(e,t,r,n){var i;if(n===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!Wl(e.target_,t)||!Ig(e.target_[t]))&&this.extend_(e,t,r,!1)===null)return 0;if(Ig(r.value))return 1;var l=x3(e,this,t,r,!1,!1);return ol(n,t,l),2}function dee(e,t,r,n){var i,l=x3(e,this,t,r,(i=this.options_)==null?void 0:i.bound);return e.defineProperty_(t,l,n)}function hee(e,t){var r,n=t.name,i=t.addInitializer;return Ig(e)||(e=zf(e)),(r=this.options_)!=null&&r.bound&&i(function(){var l=this,h=l[n].bind(l);h.isMobXFlow=!0,l[n]=h}),e}function fee(e,t,r,n){t.annotationType_,n.value}function x3(e,t,r,n,i,l){l===void 0&&(l=Nt.safeDescriptors),fee(e,t,r,n);var h=n.value;if(Ig(h)||(h=zf(h)),i){var s;h=h.bind((s=e.proxy_)!=null?s:e.target_),h.isMobXFlow=!0}return{value:h,configurable:l?e.isPlainObject_:!0,enumerable:!1,writable:!l}}function VT(e,t){return{annotationType_:e,options_:t,make_:pee,extend_:mee,decorate_20223_:gee}}function pee(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function mee(e,t,r,n){return vee(e,this,t,r),e.defineComputedProperty_(t,md({},this.options_,{get:r.get,set:r.set}),n)}function gee(e,t){var r=this,n=t.name,i=t.addInitializer;return i(function(){var l=Md(this)[yr],h=md({},r.options_,{get:e,context:this});h.name||(h.name="ObservableObject."+n.toString()),l.values_.set(n,new Is(h))}),function(){return this[yr].getObservablePropValue_(n)}}function vee(e,t,r,n){t.annotationType_,n.get}function zb(e,t){return{annotationType_:e,options_:t,make_:yee,extend_:_ee,decorate_20223_:xee}}function yee(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function _ee(e,t,r,n){var i,l;return bee(e,this),e.defineObservableProperty_(t,r.value,(i=(l=this.options_)==null?void 0:l.enhancer)!=null?i:gd,n)}function xee(e,t){var r=this,n=t.kind,i=t.name,l=new WeakSet;function h(s,m){var y,S,T=Md(s)[yr],I=new id(m,(y=(S=r.options_)==null?void 0:S.enhancer)!=null?y:gd,"ObservableObject."+i.toString(),!1);T.values_.set(i,I),l.add(s)}if(n=="accessor")return{get:function(){return l.has(this)||h(this,e.get.call(this)),this[yr].getObservablePropValue_(i)},set:function(m){return l.has(this)||h(this,m),this[yr].setObservablePropValue_(i,m)},init:function(m){return l.has(this)||h(this,m),m}}}function bee(e,t,r,n){t.annotationType_}var wee="true",See=b3();function b3(e){return{annotationType_:wee,options_:e,make_:Cee,extend_:kee,decorate_20223_:Tee}}function Cee(e,t,r,n){var i,l;if(r.get)return vv.make_(e,t,r,n);if(r.set){var h=vd(t.toString(),r.set);return n===e.target_?e.defineProperty_(t,{configurable:Nt.safeDescriptors?e.isPlainObject_:!0,set:h})===null?0:2:(ol(n,t,{configurable:!0,set:h}),2)}if(n!==e.target_&&typeof r.value=="function"){var s;if(h3(r.value)){var m,y=(m=this.options_)!=null&&m.autoBind?zf.bound:zf;return y.make_(e,t,r,n)}var S=(s=this.options_)!=null&&s.autoBind?Tg.bound:Tg;return S.make_(e,t,r,n)}var T=((i=this.options_)==null?void 0:i.deep)===!1?Ii.ref:Ii;if(typeof r.value=="function"&&(l=this.options_)!=null&&l.autoBind){var I;r.value=r.value.bind((I=e.proxy_)!=null?I:e.target_)}return T.make_(e,t,r,n)}function kee(e,t,r,n){var i,l;if(r.get)return vv.extend_(e,t,r,n);if(r.set)return e.defineProperty_(t,{configurable:Nt.safeDescriptors?e.isPlainObject_:!0,set:vd(t.toString(),r.set)},n);if(typeof r.value=="function"&&(i=this.options_)!=null&&i.autoBind){var h;r.value=r.value.bind((h=e.proxy_)!=null?h:e.target_)}var s=((l=this.options_)==null?void 0:l.deep)===!1?Ii.ref:Ii;return s.extend_(e,t,r,n)}function Tee(e,t){on("'"+this.annotationType_+"' cannot be used as a decorator")}var Eee="observable",Iee="observable.ref",Pee="observable.shallow",Aee="observable.struct",w3={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(w3);function u0(e){return e||w3}var _2=zb(Eee),Ree=zb(Iee,{enhancer:Mb}),Dee=zb(Pee,{enhancer:ree}),Mee=zb(Aee,{enhancer:nee}),S3=al(_2);function d0(e){return e.deep===!0?gd:e.deep===!1?Mb:Lee(e.defaultDecorator)}function zee(e){var t;return e?(t=e.defaultDecorator)!=null?t:b3(e):void 0}function Lee(e){var t,r;return e&&(t=(r=e.options_)==null?void 0:r.enhancer)!=null?t:gd}function C3(e,t,r){if(mv(t))return _2.decorate_20223_(e,t);if(pd(t)){pv(e,t,_2);return}return H3(e)?e:nc(e)?Ii.object(e,t,r):Array.isArray(e)?Ii.array(e,t):Kf(e)?Ii.map(e,t):Fl(e)?Ii.set(e,t):typeof e=="object"&&e!==null?e:Ii.box(e,t)}c3(C3,S3);var Oee={box:function(t,r){var n=u0(r);return new id(t,d0(n),n.name,!0,n.equals)},array:function(t,r){var n=u0(r);return(Nt.useProxies===!1||n.proxy===!1?zte:Cte)(t,d0(n),n.name)},map:function(t,r){var n=u0(r);return new W3(t,d0(n),n.name)},set:function(t,r){var n=u0(r);return new q3(t,d0(n),n.name)},object:function(t,r,n){return mu(function(){return j3(Nt.useProxies===!1||(n==null?void 0:n.proxy)===!1?Md({},n):xte({},n),t,r)})},ref:al(Ree),shallow:al(Dee),deep:S3,struct:al(Mee)},Ii=c3(C3,Oee),k3="computed",$ee="computed.struct",x2=VT(k3),Bee=VT($ee,{equals:Mf.structural}),vv=function(t,r){if(mv(r))return x2.decorate_20223_(t,r);if(pd(r))return pv(t,r,x2);if(nc(t))return al(VT(k3,t));var n=nc(r)?r:{};return n.get=t,n.name||(n.name=t.name||""),new Is(n)};Object.assign(vv,x2);vv.struct=al(Bee);var VR,UR,j_=0,Fee=1,Nee=(VR=(UR=N_(function(){},"name"))==null?void 0:UR.configurable)!=null?VR:!1,HR={value:"action",configurable:!0,writable:!1,enumerable:!1};function vd(e,t,r,n){r===void 0&&(r=!1);function i(){return jee(e,r,t,n||this,arguments)}return i.isMobxAction=!0,i.toString=function(){return t.toString()},Nee&&(HR.value=e,ol(i,"name",HR)),i}function jee(e,t,r,n,i){var l=Vee(e,t);try{return r.apply(n,i)}catch(h){throw l.error_=h,h}finally{Uee(l)}}function Vee(e,t,r,n){var i=!1,l=0,h=Nt.trackingDerivation,s=!t||!h;Ua();var m=Nt.allowStateChanges;s&&(Rd(),m=Lb(!0));var y=UT(!0),S={runAsAction_:s,prevDerivation_:h,prevAllowStateChanges_:m,prevAllowStateReads_:y,notifySpy_:i,startTime_:l,actionId_:Fee++,parentActionId_:j_};return j_=S.actionId_,S}function Uee(e){j_!==e.actionId_&&on(30),j_=e.parentActionId_,e.error_!==void 0&&(Nt.suppressReactionErrors=!0),Ob(e.prevAllowStateChanges_),Jm(e.prevAllowStateReads_),Ha(),e.runAsAction_&&ql(e.prevDerivation_),Nt.suppressReactionErrors=!1}function Hee(e,t){var r=Lb(e);try{return t()}finally{Ob(r)}}function Lb(e){var t=Nt.allowStateChanges;return Nt.allowStateChanges=e,t}function Ob(e){Nt.allowStateChanges=e}var id=function(e){function t(n,i,l,h,s){var m;return l===void 0&&(l="ObservableValue"),s===void 0&&(s=Mf.default),m=e.call(this,l)||this,m.enhancer=void 0,m.name_=void 0,m.equals=void 0,m.hasUnreportedChange_=!1,m.interceptors_=void 0,m.changeListeners_=void 0,m.value_=void 0,m.dehancer=void 0,m.enhancer=i,m.name_=l,m.equals=s,m.value_=i(n,void 0,l),m}g3(t,e);var r=t.prototype;return r.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},r.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==Nt.UNCHANGED&&this.setNewValue_(i)},r.prepareNewValue_=function(i){if(Na(this)){var l=ja(this,{object:this,type:sl,newValue:i});if(!l)return Nt.UNCHANGED;i=l.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?Nt.UNCHANGED:i},r.setNewValue_=function(i){var l=this.value_;this.value_=i,this.reportChanged(),ws(this)&&Ss(this,{type:sl,object:this,newValue:i,oldValue:l})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(i){return yv(this,i)},r.observe_=function(i,l){return l&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:sl,newValue:this.value_,oldValue:void 0}),_v(this,i)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return m3(this.get())},r[Symbol.toPrimitive]=function(){return this.valueOf()},t}(pu),Is=function(){function e(r){this.dependenciesState_=cn.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=cn.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new U_(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=V_.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,r.get||on(31),this.derivation=r.get,this.name_=r.name||"ComputedValue",r.set&&(this.setter_=vd("ComputedValue-setter",r.set)),this.equals_=r.equals||(r.compareStructural||r.struct?Mf.structural:Mf.default),this.scope_=r.context,this.requiresReaction_=r.requiresReaction,this.keepAlive_=!!r.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){Kee(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})},t.get=function(){if(this.isComputing&&on(32,this.name_,this.derivation),Nt.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)b2(this)&&(this.warnAboutUntrackedRead_(),Ua(),this.value_=this.computeValue_(!1),Ha());else if(D3(this),b2(this)){var n=Nt.trackingContext;this.keepAlive_&&!n&&(Nt.trackingContext=this),this.trackAndCompute()&&Zee(this),Nt.trackingContext=n}var i=this.value_;if(j0(i))throw i.cause;return i},t.set=function(n){if(this.setter_){this.isRunningSetter&&on(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter=!1}}else on(34,this.name_)},t.trackAndCompute=function(){var n=this.value_,i=this.dependenciesState_===cn.NOT_TRACKING_,l=this.computeValue_(!0),h=i||j0(n)||j0(l)||!this.equals_(n,l);return h&&(this.value_=l),h},t.computeValue_=function(n){this.isComputing=!0;var i=Lb(!1),l;if(n)l=T3(this,this.derivation,this.scope_);else if(Nt.disableErrorBoundaries===!0)l=this.derivation.call(this.scope_);else try{l=this.derivation.call(this.scope_)}catch(h){l=new U_(h)}return Ob(i),this.isComputing=!1,l},t.suspend_=function(){this.keepAlive_||(w2(this),this.value_=void 0)},t.observe_=function(n,i){var l=this,h=!0,s=void 0;return ote(function(){var m=l.get();if(!h||i){var y=Rd();n({observableKind:"computed",debugObjectName:l.name_,type:sl,object:l,newValue:m,oldValue:s}),ql(y)}h=!1,s=m})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return m3(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},Xf(e,[{key:"isComputing",get:function(){return ma(this.flags_,e.isComputingMask_)},set:function(n){this.flags_=ga(this.flags_,e.isComputingMask_,n)}},{key:"isRunningSetter",get:function(){return ma(this.flags_,e.isRunningSetterMask_)},set:function(n){this.flags_=ga(this.flags_,e.isRunningSetterMask_,n)}},{key:"isBeingObserved",get:function(){return ma(this.flags_,e.isBeingObservedMask_)},set:function(n){this.flags_=ga(this.flags_,e.isBeingObservedMask_,n)}},{key:"isPendingUnobservation",get:function(){return ma(this.flags_,e.isPendingUnobservationMask_)},set:function(n){this.flags_=ga(this.flags_,e.isPendingUnobservationMask_,n)}},{key:"diffValue",get:function(){return ma(this.flags_,e.diffValueMask_)?1:0},set:function(n){this.flags_=ga(this.flags_,e.diffValueMask_,n===1)}}])}();Is.isComputingMask_=1;Is.isRunningSetterMask_=2;Is.isBeingObservedMask_=4;Is.isPendingUnobservationMask_=8;Is.diffValueMask_=16;var $b=Ad("ComputedValue",Is),cn;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(cn||(cn={}));var V_;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(V_||(V_={}));var U_=function(t){this.cause=void 0,this.cause=t};function j0(e){return e instanceof U_}function b2(e){switch(e.dependenciesState_){case cn.UP_TO_DATE_:return!1;case cn.NOT_TRACKING_:case cn.STALE_:return!0;case cn.POSSIBLY_STALE_:{for(var t=UT(!0),r=Rd(),n=e.observing_,i=n.length,l=0;l<i;l++){var h=n[l];if($b(h)){if(Nt.disableErrorBoundaries)h.get();else try{h.get()}catch{return ql(r),Jm(t),!0}if(e.dependenciesState_===cn.STALE_)return ql(r),Jm(t),!0}}return I3(e),ql(r),Jm(t),!1}}}function T3(e,t,r){var n=UT(!0);I3(e),e.newObserving_=new Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++Nt.runId;var i=Nt.trackingDerivation;Nt.trackingDerivation=e,Nt.inBatch++;var l;if(Nt.disableErrorBoundaries===!0)l=t.call(r);else try{l=t.call(r)}catch(h){l=new U_(h)}return Nt.inBatch--,Nt.trackingDerivation=i,Gee(e),Jm(n),l}function Gee(e){for(var t=e.observing_,r=e.observing_=e.newObserving_,n=cn.UP_TO_DATE_,i=0,l=e.unboundDepsCount_,h=0;h<l;h++){var s=r[h];s.diffValue===0&&(s.diffValue=1,i!==h&&(r[i]=s),i++),s.dependenciesState_>n&&(n=s.dependenciesState_)}for(r.length=i,e.newObserving_=null,l=t.length;l--;){var m=t[l];m.diffValue===0&&A3(m,e),m.diffValue=0}for(;i--;){var y=r[i];y.diffValue===1&&(y.diffValue=0,qee(y,e))}n!==cn.UP_TO_DATE_&&(e.dependenciesState_=n,e.onBecomeStale_())}function w2(e){var t=e.observing_;e.observing_=[];for(var r=t.length;r--;)A3(t[r],e);e.dependenciesState_=cn.NOT_TRACKING_}function E3(e){var t=Rd();try{return e()}finally{ql(t)}}function Rd(){var e=Nt.trackingDerivation;return Nt.trackingDerivation=null,e}function ql(e){Nt.trackingDerivation=e}function UT(e){var t=Nt.allowStateReads;return Nt.allowStateReads=e,t}function Jm(e){Nt.allowStateReads=e}function I3(e){if(e.dependenciesState_!==cn.UP_TO_DATE_){e.dependenciesState_=cn.UP_TO_DATE_;for(var t=e.observing_,r=t.length;r--;)t[r].lowestObserverState_=cn.UP_TO_DATE_}}var V0=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},U0=!0,P3=!1,Nt=function(){var e=Ab();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(U0=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new V0().version&&(U0=!1),U0?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new V0):(setTimeout(function(){P3||on(35)},1),new V0)}();function Wee(){if((Nt.pendingReactions.length||Nt.inBatch||Nt.isRunningReactions)&&on(36),P3=!0,U0){var e=Ab();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),Nt=new V0}}function qee(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function A3(e,t){e.observers_.delete(t),e.observers_.size===0&&R3(e)}function R3(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,Nt.pendingUnobservations.push(e))}function Ua(){Nt.inBatch++}function Ha(){if(--Nt.inBatch===0){z3();for(var e=Nt.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation=!1,r.observers_.size===0&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBUO()),r instanceof Is&&r.suspend_())}Nt.pendingUnobservations=[]}}function D3(e){var t=Nt.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&Nt.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(e.observers_.size===0&&Nt.inBatch>0&&R3(e),!1)}function M3(e){e.lowestObserverState_!==cn.STALE_&&(e.lowestObserverState_=cn.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===cn.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=cn.STALE_}))}function Zee(e){e.lowestObserverState_!==cn.STALE_&&(e.lowestObserverState_=cn.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===cn.POSSIBLY_STALE_?t.dependenciesState_=cn.STALE_:t.dependenciesState_===cn.UP_TO_DATE_&&(e.lowestObserverState_=cn.UP_TO_DATE_)}))}function Kee(e){e.lowestObserverState_===cn.UP_TO_DATE_&&(e.lowestObserverState_=cn.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===cn.UP_TO_DATE_&&(t.dependenciesState_=cn.POSSIBLY_STALE_,t.onBecomeStale_())}))}var dl=function(){function e(r,n,i,l){r===void 0&&(r="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=cn.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=V_.NONE,this.name_=r,this.onInvalidate_=n,this.errorHandler_=i,this.requiresObservable_=l}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled||(this.isScheduled=!0,Nt.pendingReactions.push(this),z3())},t.runReaction_=function(){if(!this.isDisposed){Ua(),this.isScheduled=!1;var n=Nt.trackingContext;if(Nt.trackingContext=this,b2(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}Nt.trackingContext=n,Ha()}},t.track=function(n){if(!this.isDisposed){Ua(),this.isRunning=!0;var i=Nt.trackingContext;Nt.trackingContext=this;var l=T3(this,n,void 0);Nt.trackingContext=i,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&w2(this),j0(l)&&this.reportExceptionInDerivation_(l.cause),Ha()}},t.reportExceptionInDerivation_=function(n){var i=this;if(this.errorHandler_){this.errorHandler_(n,this);return}if(Nt.disableErrorBoundaries)throw n;var l="[mobx] uncaught error in '"+this+"'";Nt.suppressReactionErrors||console.error(l,n),Nt.globalReactionErrorHandlers.forEach(function(h){return h(n,i)})},t.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(Ua(),w2(this),Ha()))},t.getDisposer_=function(n){var i=this,l=function h(){i.dispose(),n==null||n.removeEventListener==null||n.removeEventListener("abort",h)};return n==null||n.addEventListener==null||n.addEventListener("abort",l),l[yr]=this,l},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(n){},Xf(e,[{key:"isDisposed",get:function(){return ma(this.flags_,e.isDisposedMask_)},set:function(n){this.flags_=ga(this.flags_,e.isDisposedMask_,n)}},{key:"isScheduled",get:function(){return ma(this.flags_,e.isScheduledMask_)},set:function(n){this.flags_=ga(this.flags_,e.isScheduledMask_,n)}},{key:"isTrackPending",get:function(){return ma(this.flags_,e.isTrackPendingMask_)},set:function(n){this.flags_=ga(this.flags_,e.isTrackPendingMask_,n)}},{key:"isRunning",get:function(){return ma(this.flags_,e.isRunningMask_)},set:function(n){this.flags_=ga(this.flags_,e.isRunningMask_,n)}},{key:"diffValue",get:function(){return ma(this.flags_,e.diffValueMask_)?1:0},set:function(n){this.flags_=ga(this.flags_,e.diffValueMask_,n===1)}}])}();dl.isDisposedMask_=1;dl.isScheduledMask_=2;dl.isTrackPendingMask_=4;dl.isRunningMask_=8;dl.diffValueMask_=16;var Xee=100,S2=function(t){return t()};function z3(){Nt.inBatch>0||Nt.isRunningReactions||S2(Yee)}function Yee(){Nt.isRunningReactions=!0;for(var e=Nt.pendingReactions,t=0;e.length>0;){++t===Xee&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var r=e.splice(0),n=0,i=r.length;n<i;n++)r[n].runReaction_()}Nt.isRunningReactions=!1}var H_=Ad("Reaction",dl);function Jee(e){var t=S2;S2=function(n){return e(function(){return t(n)})}}function Qm(){return!1}function Qee(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var L3="action",ete="action.bound",O3="autoAction",tte="autoAction.bound",rte="<unnamed action>",C2=gv(L3),nte=gv(ete,{bound:!0}),k2=gv(O3,{autoAction:!0}),ite=gv(tte,{autoAction:!0,bound:!0});function $3(e){var t=function(n,i){if(Es(n))return vd(n.name||rte,n,e);if(Es(i))return vd(n,i,e);if(mv(i))return(e?k2:C2).decorate_20223_(n,i);if(pd(i))return pv(n,i,e?k2:C2);if(pd(n))return al(gv(e?O3:L3,{name:n,autoAction:e}))};return t}var gn=$3(!1);Object.assign(gn,C2);var Tg=$3(!0);Object.assign(Tg,k2);gn.bound=al(nte);Tg.bound=al(ite);function Eg(e){return Es(e)&&e.isMobxAction===!0}function ote(e,t){var r,n,i,l;t===void 0&&(t=NT);var h=(r=(n=t)==null?void 0:n.name)!=null?r:"Autorun",s=!t.scheduler&&!t.delay,m;if(s)m=new dl(h,function(){this.track(T)},t.onError,t.requiresObservable);else{var y=B3(t),S=!1;m=new dl(h,function(){S||(S=!0,y(function(){S=!1,m.isDisposed||m.track(T)}))},t.onError,t.requiresObservable)}function T(){e(m)}return(i=t)!=null&&(i=i.signal)!=null&&i.aborted||m.schedule_(),m.getDisposer_((l=t)==null?void 0:l.signal)}var ate=function(t){return t()};function B3(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:ate}function h0(e,t,r){var n,i,l;r===void 0&&(r=NT);var h=(n=r.name)!=null?n:"Reaction",s=gn(h,r.onError?ste(r.onError,t):t),m=!r.scheduler&&!r.delay,y=B3(r),S=!0,T=!1,I,D=r.compareStructural?Mf.structural:r.equals||Mf.default,F=new dl(h,function(){S||m?V():T||(T=!0,y(V))},r.onError,r.requiresObservable);function V(){if(T=!1,!F.isDisposed){var Z=!1,z=I;F.track(function(){var O=Hee(!1,function(){return e(F)});Z=S||!D(I,O),I=O}),(S&&r.fireImmediately||!S&&Z)&&s(I,z,F),S=!1}}return(i=r)!=null&&(i=i.signal)!=null&&i.aborted||F.schedule_(),F.getDisposer_((l=r)==null?void 0:l.signal)}function ste(e,t){return function(){try{return t.apply(this,arguments)}catch(r){e.call(this,r)}}}var lte="onBO",cte="onBUO";function ute(e,t,r){return N3(lte,e,t,r)}function F3(e,t,r){return N3(cte,e,t,r)}function N3(e,t,r,n){var i=q_(t),l=Es(n)?n:r,h=e+"L";return i[h]?i[h].add(l):i[h]=new Set([l]),function(){var s=i[h];s&&(s.delete(l),s.size===0&&delete i[h])}}var dte="never",f0="always",hte="observed";function fte(e){e.isolateGlobalState===!0&&Wee();var t=e.useProxies,r=e.enforceActions;if(t!==void 0&&(Nt.useProxies=t===f0?!0:t===dte?!1:typeof Proxy<"u"),t==="ifavailable"&&(Nt.verifyProxies=!0),r!==void 0){var n=r===f0?f0:r===hte;Nt.enforceActions=n,Nt.allowStateChanges=!(n===!0||n===f0)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in e&&(Nt[i]=!!e[i])}),Nt.allowStateReads=!Nt.observableRequiresReaction,e.reactionScheduler&&Jee(e.reactionScheduler)}function j3(e,t,r,n){var i=WQ(t);return mu(function(){var l=Md(e,n)[yr];Df(i).forEach(function(h){l.extend_(h,i[h],r&&h in r?r[h]:!0)})}),e}function pte(e,t){return V3(q_(e,t))}function V3(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=mte(e.observing_).map(V3)),t}function mte(e){return Array.from(new Set(e))}var gte=0;function U3(){this.message="FLOW_CANCELLED"}U3.prototype=Object.create(Error.prototype);var Hw=_3("flow"),vte=_3("flow.bound",{bound:!0}),zf=Object.assign(function(t,r){if(mv(r))return Hw.decorate_20223_(t,r);if(pd(r))return pv(t,r,Hw);var n=t,i=n.name||"<unnamed flow>",l=function(){var s=this,m=arguments,y=++gte,S=gn(i+" - runid: "+y+" - init",n).apply(s,m),T,I=void 0,D=new Promise(function(F,V){var Z=0;T=V;function z(te){I=void 0;var j;try{j=gn(i+" - runid: "+y+" - yield "+Z++,S.next).call(S,te)}catch($){return V($)}L(j)}function O(te){I=void 0;var j;try{j=gn(i+" - runid: "+y+" - yield "+Z++,S.throw).call(S,te)}catch($){return V($)}L(j)}function L(te){if(Es(te==null?void 0:te.then)){te.then(L,V);return}return te.done?F(te.value):(I=Promise.resolve(te.value),I.then(z,O))}z(void 0)});return D.cancel=gn(i+" - runid: "+y+" - cancel",function(){try{I&&GR(I);var F=S.return(void 0),V=Promise.resolve(F.value);V.then(Yh,Yh),GR(V),T(new U3)}catch(Z){T(Z)}}),D};return l.isMobXFlow=!0,l},Hw);zf.bound=al(vte);function GR(e){Es(e.cancel)&&e.cancel()}function Ig(e){return(e==null?void 0:e.isMobXFlow)===!0}function yte(e,t){return e?Fb(e)||!!e[yr]||jT(e)||H_(e)||$b(e):!1}function H3(e){return yte(e)}function Nl(e,t){t===void 0&&(t=void 0),Ua();try{return e.apply(t)}finally{Ha()}}function Ph(e){return e[yr]}var _te={has:function(t,r){return Ph(t).has_(r)},get:function(t,r){return Ph(t).get_(r)},set:function(t,r,n){var i;return pd(r)?(i=Ph(t).set_(r,n,!0))!=null?i:!0:!1},deleteProperty:function(t,r){var n;return pd(r)?(n=Ph(t).delete_(r,!0))!=null?n:!0:!1},defineProperty:function(t,r,n){var i;return(i=Ph(t).defineProperty_(r,n))!=null?i:!0},ownKeys:function(t){return Ph(t).ownKeys_()},preventExtensions:function(t){on(13)}};function xte(e,t){var r,n;return u3(),e=Md(e,t),(n=(r=e[yr]).proxy_)!=null?n:r.proxy_=new Proxy(e,_te)}function Na(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function yv(e,t){var r=e.interceptors_||(e.interceptors_=[]);return r.push(t),d3(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function ja(e,t){var r=Rd();try{for(var n=[].concat(e.interceptors_||[]),i=0,l=n.length;i<l&&(t=n[i](t),t&&!t.type&&on(14),!!t);i++);return t}finally{ql(r)}}function ws(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function _v(e,t){var r=e.changeListeners_||(e.changeListeners_=[]);return r.push(t),d3(function(){var n=r.indexOf(t);n!==-1&&r.splice(n,1)})}function Ss(e,t){var r=Rd(),n=e.changeListeners_;if(n){n=n.slice();for(var i=0,l=n.length;i<l;i++)n[i](t);ql(r)}}function bte(e,t,r){return mu(function(){var n,i=Md(e,r)[yr];(n=t)!=null||(t=YQ(e)),Df(t).forEach(function(l){return i.make_(l,t[l])})}),e}var Gw=Symbol("mobx-keys");function HT(e,t,r){return nc(e)?j3(e,e,t,r):(mu(function(){var n=Md(e,r)[yr];if(!e[Gw]){var i=Object.getPrototypeOf(e),l=new Set([].concat(Df(e),Df(i)));l.delete("constructor"),l.delete(yr),fv(i,Gw,l)}e[Gw].forEach(function(h){return n.make_(h,t&&h in t?t[h]:!0)})}),e)}var WR="splice",sl="update",wte=1e4,Ste={get:function(t,r){var n=t[yr];return r===yr?n:r==="length"?n.getArrayLength_():typeof r=="string"&&!isNaN(r)?n.get_(parseInt(r)):Wl(G_,r)?G_[r]:t[r]},set:function(t,r,n){var i=t[yr];return r==="length"&&i.setArrayLength_(n),typeof r=="symbol"||isNaN(r)?t[r]=n:i.set_(parseInt(r),n),!0},preventExtensions:function(){on(15)}},GT=function(){function e(r,n,i,l){r===void 0&&(r="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=l,this.atom_=new pu(r),this.enhancer_=function(h,s){return n(h,s,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.dehanceValues_=function(n){return this.dehancer!==void 0&&n.length>0?n.map(this.dehancer):n},t.intercept_=function(n){return yv(this,n)},t.observe_=function(n,i){return i===void 0&&(i=!1),i&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),_v(this,n)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(n){(typeof n!="number"||isNaN(n)||n<0)&&on("Out of range: "+n);var i=this.values_.length;if(n!==i)if(n>i){for(var l=new Array(n-i),h=0;h<n-i;h++)l[h]=void 0;this.spliceWithArray_(i,0,l)}else this.spliceWithArray_(n,i-n)},t.updateArrayLength_=function(n,i){n!==this.lastKnownLength_&&on(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&Y3(n+i+1)},t.spliceWithArray_=function(n,i,l){var h=this;this.atom_;var s=this.values_.length;if(n===void 0?n=0:n>s?n=s:n<0&&(n=Math.max(0,s+n)),arguments.length===1?i=s-n:i==null?i=0:i=Math.max(0,Math.min(i,s-n)),l===void 0&&(l=v2),Na(this)){var m=ja(this,{object:this.proxy_,type:WR,index:n,removedCount:i,added:l});if(!m)return v2;i=m.removedCount,l=m.added}if(l=l.length===0?l:l.map(function(T){return h.enhancer_(T,void 0)}),this.legacyMode_){var y=l.length-i;this.updateArrayLength_(s,y)}var S=this.spliceItemsIntoValues_(n,i,l);return(i!==0||l.length!==0)&&this.notifyArraySplice_(n,l,S),this.dehanceValues_(S)},t.spliceItemsIntoValues_=function(n,i,l){if(l.length<wte){var h;return(h=this.values_).splice.apply(h,[n,i].concat(l))}else{var s=this.values_.slice(n,n+i),m=this.values_.slice(n+i);this.values_.length+=l.length-i;for(var y=0;y<l.length;y++)this.values_[n+y]=l[y];for(var S=0;S<m.length;S++)this.values_[n+l.length+S]=m[S];return s}},t.notifyArrayChildUpdate_=function(n,i,l){var h=!this.owned_&&Qm(),s=ws(this),m=s||h?{observableKind:"array",object:this.proxy_,type:sl,debugObjectName:this.atom_.name_,index:n,newValue:i,oldValue:l}:null;this.atom_.reportChanged(),s&&Ss(this,m)},t.notifyArraySplice_=function(n,i,l){var h=!this.owned_&&Qm(),s=ws(this),m=s||h?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:WR,index:n,removed:l,added:i,removedCount:l.length,addedCount:i.length}:null;this.atom_.reportChanged(),s&&Ss(this,m)},t.get_=function(n){if(this.legacyMode_&&n>=this.values_.length){console.warn("[mobx] Out of bounds read: "+n);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])},t.set_=function(n,i){var l=this.values_;if(this.legacyMode_&&n>l.length&&on(17,n,l.length),n<l.length){this.atom_;var h=l[n];if(Na(this)){var s=ja(this,{type:sl,object:this.proxy_,index:n,newValue:i});if(!s)return;i=s.newValue}i=this.enhancer_(i,h);var m=i!==h;m&&(l[n]=i,this.notifyArrayChildUpdate_(n,i,h))}else{for(var y=new Array(n+1-l.length),S=0;S<y.length-1;S++)y[S]=void 0;y[y.length-1]=i,this.spliceWithArray_(l.length,0,y)}},e}();function Cte(e,t,r,n){return r===void 0&&(r="ObservableArray"),n===void 0&&(n=!1),u3(),mu(function(){var i=new GT(r,t,n,!1);f3(i.values_,yr,i);var l=new Proxy(i.values_,Ste);return i.proxy_=l,e&&e.length&&i.spliceWithArray_(0,0,e),l})}var G_={clear:function(){return this.splice(0)},replace:function(t){var r=this[yr];return r.spliceWithArray_(0,r.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),l=2;l<n;l++)i[l-2]=arguments[l];var h=this[yr];switch(arguments.length){case 0:return[];case 1:return h.spliceWithArray_(t);case 2:return h.spliceWithArray_(t,r)}return h.spliceWithArray_(t,r,i)},spliceWithArray:function(t,r,n){return this[yr].spliceWithArray_(t,r,n)},push:function(){for(var t=this[yr],r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.spliceWithArray_(t.values_.length,0,n),t.values_.length},pop:function(){return this.splice(Math.max(this[yr].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[yr],r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.spliceWithArray_(0,0,n),t.values_.length},reverse:function(){return Nt.trackingDerivation&&on(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Nt.trackingDerivation&&on(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var r=this[yr],n=r.dehanceValues_(r.values_).indexOf(t);return n>-1?(this.splice(n,1),!0):!1}};Mn("at",Ta);Mn("concat",Ta);Mn("flat",Ta);Mn("includes",Ta);Mn("indexOf",Ta);Mn("join",Ta);Mn("lastIndexOf",Ta);Mn("slice",Ta);Mn("toString",Ta);Mn("toLocaleString",Ta);Mn("toSorted",Ta);Mn("toSpliced",Ta);Mn("with",Ta);Mn("every",Ms);Mn("filter",Ms);Mn("find",Ms);Mn("findIndex",Ms);Mn("findLast",Ms);Mn("findLastIndex",Ms);Mn("flatMap",Ms);Mn("forEach",Ms);Mn("map",Ms);Mn("some",Ms);Mn("toReversed",Ms);Mn("reduce",G3);Mn("reduceRight",G3);function Mn(e,t){typeof Array.prototype[e]=="function"&&(G_[e]=t(e))}function Ta(e){return function(){var t=this[yr];t.atom_.reportObserved();var r=t.dehanceValues_(t.values_);return r[e].apply(r,arguments)}}function Ms(e){return function(t,r){var n=this,i=this[yr];i.atom_.reportObserved();var l=i.dehanceValues_(i.values_);return l[e](function(h,s){return t.call(r,h,s,n)})}}function G3(e){return function(){var t=this,r=this[yr];r.atom_.reportObserved();var n=r.dehanceValues_(r.values_),i=arguments[0];return arguments[0]=function(l,h,s){return i(l,h,s,t)},n[e].apply(n,arguments)}}var kte=Ad("ObservableArrayAdministration",GT);function Bb(e){return Db(e)&&kte(e[yr])}var Tte={},jc="add",W_="delete",W3=function(){function e(r,n,i){var l=this;n===void 0&&(n=gd),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[yr]=Tte,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=i,Es(Map)||on(18),mu(function(){l.keysAtom_=v3("ObservableMap.keys()"),l.data_=new Map,l.hasMap_=new Map,r&&l.merge(r)})}var t=e.prototype;return t.has_=function(n){return this.data_.has(n)},t.has=function(n){var i=this;if(!Nt.trackingDerivation)return this.has_(n);var l=this.hasMap_.get(n);if(!l){var h=l=new id(this.has_(n),Mb,"ObservableMap.key?",!1);this.hasMap_.set(n,h),F3(h,function(){return i.hasMap_.delete(n)})}return l.get()},t.set=function(n,i){var l=this.has_(n);if(Na(this)){var h=ja(this,{type:l?sl:jc,object:this,newValue:i,name:n});if(!h)return this;i=h.newValue}return l?this.updateValue_(n,i):this.addValue_(n,i),this},t.delete=function(n){var i=this;if(this.keysAtom_,Na(this)){var l=ja(this,{type:W_,object:this,name:n});if(!l)return!1}if(this.has_(n)){var h=Qm(),s=ws(this),m=s||h?{observableKind:"map",debugObjectName:this.name_,type:W_,object:this,oldValue:this.data_.get(n).value_,name:n}:null;return Nl(function(){var y;i.keysAtom_.reportChanged(),(y=i.hasMap_.get(n))==null||y.setNewValue_(!1);var S=i.data_.get(n);S.setNewValue_(void 0),i.data_.delete(n)}),s&&Ss(this,m),!0}return!1},t.updateValue_=function(n,i){var l=this.data_.get(n);if(i=l.prepareNewValue_(i),i!==Nt.UNCHANGED){var h=Qm(),s=ws(this),m=s||h?{observableKind:"map",debugObjectName:this.name_,type:sl,object:this,oldValue:l.value_,name:n,newValue:i}:null;l.setNewValue_(i),s&&Ss(this,m)}},t.addValue_=function(n,i){var l=this;this.keysAtom_,Nl(function(){var y,S=new id(i,l.enhancer_,"ObservableMap.key",!1);l.data_.set(n,S),i=S.value_,(y=l.hasMap_.get(n))==null||y.setNewValue_(!0),l.keysAtom_.reportChanged()});var h=Qm(),s=ws(this),m=s||h?{observableKind:"map",debugObjectName:this.name_,type:jc,object:this,name:n,newValue:i}:null;s&&Ss(this,m)},t.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var n=this,i=this.keys();return qR({next:function(){var h=i.next(),s=h.done,m=h.value;return{done:s,value:s?void 0:n.get(m)}}})},t.entries=function(){var n=this,i=this.keys();return qR({next:function(){var h=i.next(),s=h.done,m=h.value;return{done:s,value:s?void 0:[m,n.get(m)]}}})},t[Symbol.iterator]=function(){return this.entries()},t.forEach=function(n,i){for(var l=Jh(this),h;!(h=l()).done;){var s=h.value,m=s[0],y=s[1];n.call(i,y,m,this)}},t.merge=function(n){var i=this;return Dd(n)&&(n=new Map(n)),Nl(function(){nc(n)?GQ(n).forEach(function(l){return i.set(l,n[l])}):Array.isArray(n)?n.forEach(function(l){var h=l[0],s=l[1];return i.set(h,s)}):Kf(n)?(HQ(n)||on(19,n),n.forEach(function(l,h){return i.set(h,l)})):n!=null&&on(20,n)}),this},t.clear=function(){var n=this;Nl(function(){E3(function(){for(var i=Jh(n.keys()),l;!(l=i()).done;){var h=l.value;n.delete(h)}})})},t.replace=function(n){var i=this;return Nl(function(){for(var l=Ete(n),h=new Map,s=!1,m=Jh(i.data_.keys()),y;!(y=m()).done;){var S=y.value;if(!l.has(S)){var T=i.delete(S);if(T)s=!0;else{var I=i.data_.get(S);h.set(S,I)}}}for(var D=Jh(l.entries()),F;!(F=D()).done;){var V=F.value,Z=V[0],z=V[1],O=i.data_.has(Z);if(i.set(Z,z),i.data_.has(Z)){var L=i.data_.get(Z);h.set(Z,L),O||(s=!0)}}if(!s)if(i.data_.size!==h.size)i.keysAtom_.reportChanged();else for(var te=i.data_.keys(),j=h.keys(),$=te.next(),J=j.next();!$.done;){if($.value!==J.value){i.keysAtom_.reportChanged();break}$=te.next(),J=j.next()}i.data_=h}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(n,i){return _v(this,n)},t.intercept_=function(n){return yv(this,n)},Xf(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),Dd=Ad("ObservableMap",W3);function qR(e){return e[Symbol.toStringTag]="MapIterator",ZT(e)}function Ete(e){if(Kf(e)||Dd(e))return e;if(Array.isArray(e))return new Map(e);if(nc(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}else return on(21,e)}var Ite={},q3=function(){function e(r,n,i){var l=this;n===void 0&&(n=gd),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[yr]=Ite,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,Es(Set)||on(22),this.enhancer_=function(h,s){return n(h,s,i)},mu(function(){l.atom_=v3(l.name_),r&&l.replace(r)})}var t=e.prototype;return t.dehanceValue_=function(n){return this.dehancer!==void 0?this.dehancer(n):n},t.clear=function(){var n=this;Nl(function(){E3(function(){for(var i=Jh(n.data_.values()),l;!(l=i()).done;){var h=l.value;n.delete(h)}})})},t.forEach=function(n,i){for(var l=Jh(this),h;!(h=l()).done;){var s=h.value;n.call(i,s,s,this)}},t.add=function(n){var i=this;if(this.atom_,Na(this)){var l=ja(this,{type:jc,object:this,newValue:n});if(!l)return this}if(!this.has(n)){Nl(function(){i.data_.add(i.enhancer_(n,void 0)),i.atom_.reportChanged()});var h=!1,s=ws(this),m=s||h?{observableKind:"set",debugObjectName:this.name_,type:jc,object:this,newValue:n}:null;s&&Ss(this,m)}return this},t.delete=function(n){var i=this;if(Na(this)){var l=ja(this,{type:W_,object:this,oldValue:n});if(!l)return!1}if(this.has(n)){var h=!1,s=ws(this),m=s||h?{observableKind:"set",debugObjectName:this.name_,type:W_,object:this,oldValue:n}:null;return Nl(function(){i.atom_.reportChanged(),i.data_.delete(n)}),s&&Ss(this,m),!0}return!1},t.has=function(n){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(n))},t.entries=function(){var n=0,i=Array.from(this.keys()),l=Array.from(this.values());return ZR({next:function(){var s=n;return n+=1,s<l.length?{value:[i[s],l[s]],done:!1}:{value:void 0,done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var n=this,i=0,l=Array.from(this.data_.values());return ZR({next:function(){return i<l.length?{value:n.dehanceValue_(l[i++]),done:!1}:{value:void 0,done:!0}}})},t.intersection=function(n){if(Fl(n)&&!Js(n))return n.intersection(this);var i=new Set(this);return i.intersection(n)},t.union=function(n){if(Fl(n)&&!Js(n))return n.union(this);var i=new Set(this);return i.union(n)},t.difference=function(n){return new Set(this).difference(n)},t.symmetricDifference=function(n){if(Fl(n)&&!Js(n))return n.symmetricDifference(this);var i=new Set(this);return i.symmetricDifference(n)},t.isSubsetOf=function(n){return new Set(this).isSubsetOf(n)},t.isSupersetOf=function(n){return new Set(this).isSupersetOf(n)},t.isDisjointFrom=function(n){if(Fl(n)&&!Js(n))return n.isDisjointFrom(this);var i=new Set(this);return i.isDisjointFrom(n)},t.replace=function(n){var i=this;return Js(n)&&(n=new Set(n)),Nl(function(){Array.isArray(n)?(i.clear(),n.forEach(function(l){return i.add(l)})):Fl(n)?(i.clear(),n.forEach(function(l){return i.add(l)})):n!=null&&on("Cannot initialize set from "+n)}),this},t.observe_=function(n,i){return _v(this,n)},t.intercept_=function(n){return yv(this,n)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Symbol.iterator]=function(){return this.values()},Xf(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),Js=Ad("ObservableSet",q3);function ZR(e){return e[Symbol.toStringTag]="SetIterator",ZT(e)}var KR=Object.create(null),XR="remove",Z3=function(){function e(r,n,i,l){n===void 0&&(n=new Map),l===void 0&&(l=See),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=r,this.values_=n,this.name_=i,this.defaultAnnotation_=l,this.keysAtom_=new pu("ObservableObject.keys"),this.isPlainObject_=nc(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(n){return this.values_.get(n).get()},t.setObservablePropValue_=function(n,i){var l=this.values_.get(n);if(l instanceof Is)return l.set(i),!0;if(Na(this)){var h=ja(this,{type:sl,object:this.proxy_||this.target_,name:n,newValue:i});if(!h)return null;i=h.newValue}if(i=l.prepareNewValue_(i),i!==Nt.UNCHANGED){var s=ws(this),m=!1,y=s||m?{type:sl,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:l.value_,name:n,newValue:i}:null;l.setNewValue_(i),s&&Ss(this,y)}return!0},t.get_=function(n){return Nt.trackingDerivation&&!Wl(this.target_,n)&&this.has_(n),this.target_[n]},t.set_=function(n,i,l){return l===void 0&&(l=!1),Wl(this.target_,n)?this.values_.has(n)?this.setObservablePropValue_(n,i):l?Reflect.set(this.target_,n,i):(this.target_[n]=i,!0):this.extend_(n,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,l)},t.has_=function(n){if(!Nt.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(n);return i||(i=new id(n in this.target_,Mb,"ObservableObject.key?",!1),this.pendingKeys_.set(n,i)),i.get()},t.make_=function(n,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(n in this.target_)){var l;if((l=this.target_[Qs])!=null&&l[n])return;on(1,i.annotationType_,this.name_+"."+n.toString())}for(var h=this.target_;h&&h!==Rb;){var s=N_(h,n);if(s){var m=i.make_(this,n,s,h);if(m===0)return;if(m===1)break}h=Object.getPrototypeOf(h)}JR(this,i,n)}},t.extend_=function(n,i,l,h){if(h===void 0&&(h=!1),l===!0&&(l=this.defaultAnnotation_),l===!1)return this.defineProperty_(n,i,h);var s=l.extend_(this,n,i,h);return s&&JR(this,l,n),s},t.defineProperty_=function(n,i,l){l===void 0&&(l=!1),this.keysAtom_;try{Ua();var h=this.delete_(n);if(!h)return h;if(Na(this)){var s=ja(this,{object:this.proxy_||this.target_,name:n,type:jc,newValue:i.value});if(!s)return null;var m=s.newValue;i.value!==m&&(i=md({},i,{value:m}))}if(l){if(!Reflect.defineProperty(this.target_,n,i))return!1}else ol(this.target_,n,i);this.notifyPropertyAddition_(n,i.value)}finally{Ha()}return!0},t.defineObservableProperty_=function(n,i,l,h){h===void 0&&(h=!1),this.keysAtom_;try{Ua();var s=this.delete_(n);if(!s)return s;if(Na(this)){var m=ja(this,{object:this.proxy_||this.target_,name:n,type:jc,newValue:i});if(!m)return null;i=m.newValue}var y=YR(n),S={configurable:Nt.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:y.get,set:y.set};if(h){if(!Reflect.defineProperty(this.target_,n,S))return!1}else ol(this.target_,n,S);var T=new id(i,l,"ObservableObject.key",!1);this.values_.set(n,T),this.notifyPropertyAddition_(n,T.value_)}finally{Ha()}return!0},t.defineComputedProperty_=function(n,i,l){l===void 0&&(l=!1),this.keysAtom_;try{Ua();var h=this.delete_(n);if(!h)return h;if(Na(this)){var s=ja(this,{object:this.proxy_||this.target_,name:n,type:jc,newValue:void 0});if(!s)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var m=YR(n),y={configurable:Nt.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:m.get,set:m.set};if(l){if(!Reflect.defineProperty(this.target_,n,y))return!1}else ol(this.target_,n,y);this.values_.set(n,new Is(i)),this.notifyPropertyAddition_(n,void 0)}finally{Ha()}return!0},t.delete_=function(n,i){if(i===void 0&&(i=!1),this.keysAtom_,!Wl(this.target_,n))return!0;if(Na(this)){var l=ja(this,{object:this.proxy_||this.target_,name:n,type:XR});if(!l)return null}try{var h;Ua();var s=ws(this),m=!1,y=this.values_.get(n),S=void 0;if(!y&&(s||m)){var T;S=(T=N_(this.target_,n))==null?void 0:T.value}if(i){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];if(y&&(this.values_.delete(n),y instanceof id&&(S=y.value_),M3(y)),this.keysAtom_.reportChanged(),(h=this.pendingKeys_)==null||(h=h.get(n))==null||h.set(n in this.target_),s||m){var I={type:XR,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:S,name:n};s&&Ss(this,I)}}finally{Ha()}return!0},t.observe_=function(n,i){return _v(this,n)},t.intercept_=function(n){return yv(this,n)},t.notifyPropertyAddition_=function(n,i){var l,h=ws(this),s=!1;if(h||s){var m=h||s?{type:jc,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:i}:null;h&&Ss(this,m)}(l=this.pendingKeys_)==null||(l=l.get(n))==null||l.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Df(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Md(e,t){var r;if(Wl(e,yr))return e;var n=(r=t==null?void 0:t.name)!=null?r:"ObservableObject",i=new Z3(e,new Map,String(n),zee(t));return fv(e,yr,i),e}var Pte=Ad("ObservableObjectAdministration",Z3);function YR(e){return KR[e]||(KR[e]={get:function(){return this[yr].getObservablePropValue_(e)},set:function(r){return this[yr].setObservablePropValue_(e,r)}})}function Fb(e){return Db(e)?Pte(e[yr]):!1}function JR(e,t,r){var n;(n=e.target_[Qs])==null||delete n[r]}var Ate=X3(0),Rte=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),Ww=0,K3=function(){};function Dte(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}Dte(K3,Array.prototype);var WT=function(e){function t(n,i,l,h){var s;return l===void 0&&(l="ObservableArray"),h===void 0&&(h=!1),s=e.call(this)||this,mu(function(){var m=new GT(l,i,h,!0);m.proxy_=s,f3(s,yr,m),n&&n.length&&s.spliceWithArray(0,0,n),Rte&&Object.defineProperty(s,"0",Ate)}),s}g3(t,e);var r=t.prototype;return r.concat=function(){this[yr].atom_.reportObserved();for(var i=arguments.length,l=new Array(i),h=0;h<i;h++)l[h]=arguments[h];return Array.prototype.concat.apply(this.slice(),l.map(function(s){return Bb(s)?s.slice():s}))},r[Symbol.iterator]=function(){var n=this,i=0;return ZT({next:function(){return i<n.length?{value:n[i++],done:!1}:{done:!0,value:void 0}}})},Xf(t,[{key:"length",get:function(){return this[yr].getArrayLength_()},set:function(i){this[yr].setArrayLength_(i)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(K3);Object.entries(G_).forEach(function(e){var t=e[0],r=e[1];t!=="concat"&&fv(WT.prototype,t,r)});function X3(e){return{enumerable:!1,configurable:!0,get:function(){return this[yr].get_(e)},set:function(r){this[yr].set_(e,r)}}}function Mte(e){ol(WT.prototype,""+e,X3(e))}function Y3(e){if(e>Ww){for(var t=Ww;t<e+100;t++)Mte(t);Ww=e}}Y3(1e3);function zte(e,t,r){return new WT(e,t,r)}function q_(e,t){if(typeof e=="object"&&e!==null){if(Bb(e))return t!==void 0&&on(23),e[yr].atom_;if(Js(e))return e.atom_;if(Dd(e)){if(t===void 0)return e.keysAtom_;var r=e.data_.get(t)||e.hasMap_.get(t);return r||on(25,t,T2(e)),r}if(Fb(e)){if(!t)return on(26);var n=e[yr].values_.get(t);return n||on(27,t,T2(e)),n}if(jT(e)||$b(e)||H_(e))return e}else if(Es(e)&&H_(e[yr]))return e[yr];on(28)}function Lte(e,t){if(e||on(29),jT(e)||$b(e)||H_(e)||Dd(e)||Js(e))return e;if(e[yr])return e[yr];on(24,e)}function T2(e,t){var r;if(t!==void 0)r=q_(e,t);else{if(Eg(e))return e.name;Fb(e)||Dd(e)||Js(e)?r=Lte(e):r=q_(e)}return r.name_}function mu(e){var t=Rd(),r=Lb(!0);Ua();try{return e()}finally{Ha(),Ob(r),ql(t)}}var QR=Rb.toString;function qT(e,t,r){return r===void 0&&(r=-1),E2(e,t,r)}function E2(e,t,r,n,i){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var l=typeof e;if(l!=="function"&&l!=="object"&&typeof t!="object")return!1;var h=QR.call(e);if(h!==QR.call(t))return!1;switch(h){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":r>=0&&r++;break}e=eD(e),t=eD(t);var s=h==="[object Array]";if(!s){if(typeof e!="object"||typeof t!="object")return!1;var m=e.constructor,y=t.constructor;if(m!==y&&!(Es(m)&&m instanceof m&&Es(y)&&y instanceof y)&&"constructor"in e&&"constructor"in t)return!1}if(r===0)return!1;r<0&&(r=-1),n=n||[],i=i||[];for(var S=n.length;S--;)if(n[S]===e)return i[S]===t;if(n.push(e),i.push(t),s){if(S=e.length,S!==t.length)return!1;for(;S--;)if(!E2(e[S],t[S],r-1,n,i))return!1}else{var T=Object.keys(e),I;if(S=T.length,Object.keys(t).length!==S)return!1;for(;S--;)if(I=T[S],!(Wl(t,I)&&E2(e[I],t[I],r-1,n,i)))return!1}return n.pop(),i.pop(),!0}function eD(e){return Bb(e)?e.slice():Kf(e)||Dd(e)||Fl(e)||Js(e)?Array.from(e.entries()):e}var tD,Ote=((tD=Ab().Iterator)==null?void 0:tD.prototype)||{};function ZT(e){return e[Symbol.iterator]=$te,Object.assign(Object.create(Ote),e)}function $te(){return this}["Symbol","Map","Set"].forEach(function(e){var t=Ab();typeof t[e]>"u"&&on("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:Qee,extras:{getDebugName:T2},$mobx:yr});if(!R.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!bte)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function Bte(e){e()}function Fte(e){e||(e=Bte),fte({reactionScheduler:e})}function Nte(e){return pte(e)}var jte=1e4,Vte=1e4,Ute=function(){function e(t){var r=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(n){n===void 0&&(n=jte),clearTimeout(r.sweepTimeout),r.sweepTimeout=void 0;var i=Date.now();r.registrations.forEach(function(l,h){i-l.registeredAt>=n&&(r.finalize(l.value),r.registrations.delete(h))}),r.registrations.size>0&&r.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,n){this.registrations.set(n,{value:r,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,Vte))}}),e}(),Hte=typeof FinalizationRegistry<"u"?FinalizationRegistry:Ute,I2=new Hte(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),J3={exports:{}},Q3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf=R;function Gte(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wte=typeof Object.is=="function"?Object.is:Gte,qte=Lf.useState,Zte=Lf.useEffect,Kte=Lf.useLayoutEffect,Xte=Lf.useDebugValue;function Yte(e,t){var r=t(),n=qte({inst:{value:r,getSnapshot:t}}),i=n[0].inst,l=n[1];return Kte(function(){i.value=r,i.getSnapshot=t,qw(i)&&l({inst:i})},[e,r,t]),Zte(function(){return qw(i)&&l({inst:i}),e(function(){qw(i)&&l({inst:i})})},[e]),Xte(r),r}function qw(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Wte(e,r)}catch{return!0}}function Jte(e,t){return t()}var Qte=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Jte:Yte;Q3.useSyncExternalStore=Lf.useSyncExternalStore!==void 0?Lf.useSyncExternalStore:Qte;J3.exports=Q3;var ere=J3.exports;function rD(e){e.reaction=new dl("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function tre(e,t){t===void 0&&(t="observed");var r=ys.useRef(null);if(!r.current){var n={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(s){return I2.unregister(n),n.onStoreChange=s,n.reaction||(rD(n),n.stateVersion=Symbol()),function(){var m;n.onStoreChange=null,(m=n.reaction)===null||m===void 0||m.dispose(),n.reaction=null}},getSnapshot:function(){return n.stateVersion}};r.current=n}var i=r.current;i.reaction||(rD(i),I2.register(r,i,i)),ys.useDebugValue(i.reaction,Nte),ere.useSyncExternalStore(i.subscribe,i.getSnapshot,i.getSnapshot);var l,h;if(i.reaction.track(function(){try{l=e()}catch(s){h=s}}),h)throw h;return l}var Zw,Kw,eB=typeof Symbol=="function"&&Symbol.for,rre=(Kw=(Zw=Object.getOwnPropertyDescriptor(function(){},"name"))===null||Zw===void 0?void 0:Zw.configurable)!==null&&Kw!==void 0?Kw:!1,nD=eB?Symbol.for("react.forward_ref"):typeof R.forwardRef=="function"&&R.forwardRef(function(e){return null}).$$typeof,iD=eB?Symbol.for("react.memo"):typeof R.memo=="function"&&R.memo(function(e){return null}).$$typeof;function _o(e,t){var r;if(iD&&e.$$typeof===iD)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var n=(r=void 0)!==null&&r!==void 0?r:!1,i=e,l=e.displayName||e.name;if(nD&&e.$$typeof===nD&&(n=!0,i=e.render,typeof i!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var h=function(s,m){return tre(function(){return i(s,m)},l)};return h.displayName=e.displayName,rre&&Object.defineProperty(h,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(h.contextTypes=e.contextTypes),n&&(h=R.forwardRef(h)),h=R.memo(h),ire(e,h),h}var nre={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function ire(e,t){Object.keys(e).forEach(function(r){nre[r]||Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}var Xw;Fte(Cd.unstable_batchedUpdates);Xw=I2.finalizeAllImmediately;function ore(e,t){return sre(e,t,(r,n,i,l)=>Math.sqrt(Math.pow(i-r,2)+Math.pow(l-n,2)))}function KT(e){let t=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(const l of e)Array.isArray(l)?(t=Math.min(t,l[0]),n=Math.max(n,l[0]),r=Math.min(r,l[1]),i=Math.max(i,l[1])):(t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y));return[t,r,n,i]}function are(e){const t=Math.PI*2;let r=e%t;return r=(r+t)%t,r<=Math.PI?r:r-t}function oD(e){return are(e*Math.PI/180)}function sre(e,t,r){let n,i;Array.isArray(e)?(tu.checkArgument(e.length>=2),n=e[0],i=e[1]):(n=e.x,i=e.y);let l,h;return Array.isArray(t)?(tu.checkArgument(t.length>=2),l=t[0],h=t[1]):(l=t.x,h=t.y),r(n,i,l,h)}var rn;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function r(i){throw new Error}e.assertNever=r,e.arrayToEnum=i=>{const l={};for(const h of i)l[h]=h;return l},e.getValidEnumValues=i=>{const l=e.objectKeys(i).filter(s=>typeof i[i[s]]!="number"),h={};for(const s of l)h[s]=i[s];return e.objectValues(h)},e.objectValues=i=>e.objectKeys(i).map(function(l){return i[l]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const l=[];for(const h in i)Object.prototype.hasOwnProperty.call(i,h)&&l.push(h);return l},e.find=(i,l)=>{for(const h of i)if(l(h))return h},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,l=" | "){return i.map(h=>typeof h=="string"?`'${h}'`:h).join(l)}e.joinValues=n,e.jsonStringifyReplacer=(i,l)=>typeof l=="bigint"?l.toString():l})(rn||(rn={}));var P2;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(P2||(P2={}));const Yt=rn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$l=e=>{switch(typeof e){case"undefined":return Yt.undefined;case"string":return Yt.string;case"number":return isNaN(e)?Yt.nan:Yt.number;case"boolean":return Yt.boolean;case"function":return Yt.function;case"bigint":return Yt.bigint;case"symbol":return Yt.symbol;case"object":return Array.isArray(e)?Yt.array:e===null?Yt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Yt.promise:typeof Map<"u"&&e instanceof Map?Yt.map:typeof Set<"u"&&e instanceof Set?Yt.set:typeof Date<"u"&&e instanceof Date?Yt.date:Yt.object;default:return Yt.unknown}},vt=rn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),lre=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class xa extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(l){return l.message},n={_errors:[]},i=l=>{for(const h of l.issues)if(h.code==="invalid_union")h.unionErrors.map(i);else if(h.code==="invalid_return_type")i(h.returnTypeError);else if(h.code==="invalid_arguments")i(h.argumentsError);else if(h.path.length===0)n._errors.push(r(h));else{let s=n,m=0;for(;m<h.path.length;){const y=h.path[m];m===h.path.length-1?(s[y]=s[y]||{_errors:[]},s[y]._errors.push(r(h))):s[y]=s[y]||{_errors:[]},s=s[y],m++}}};return i(this),n}static assert(t){if(!(t instanceof xa))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,rn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}xa.create=e=>new xa(e);const Of=(e,t)=>{let r;switch(e.code){case vt.invalid_type:e.received===Yt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case vt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,rn.jsonStringifyReplacer)}`;break;case vt.unrecognized_keys:r=`Unrecognized key(s) in object: ${rn.joinValues(e.keys,", ")}`;break;case vt.invalid_union:r="Invalid input";break;case vt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${rn.joinValues(e.options)}`;break;case vt.invalid_enum_value:r=`Invalid enum value. Expected ${rn.joinValues(e.options)}, received '${e.received}'`;break;case vt.invalid_arguments:r="Invalid function arguments";break;case vt.invalid_return_type:r="Invalid function return type";break;case vt.invalid_date:r="Invalid date";break;case vt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:rn.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case vt.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case vt.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case vt.custom:r="Invalid input";break;case vt.invalid_intersection_types:r="Intersection results could not be merged";break;case vt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case vt.not_finite:r="Number must be finite";break;default:r=t.defaultError,rn.assertNever(e)}return{message:r}};let tB=Of;function cre(e){tB=e}function Z_(){return tB}const K_=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,l=[...r,...i.path||[]],h={...i,path:l};if(i.message!==void 0)return{...i,path:l,message:i.message};let s="";const m=n.filter(y=>!!y).slice().reverse();for(const y of m)s=y(h,{data:t,defaultError:s}).message;return{...i,path:l,message:s}},ure=[];function Ut(e,t){const r=Z_(),n=K_({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Of?void 0:Of].filter(i=>!!i)});e.common.issues.push(n)}class bo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const i of r){if(i.status==="aborted")return _r;i.status==="dirty"&&t.dirty(),n.push(i.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const i of r){const l=await i.key,h=await i.value;n.push({key:l,value:h})}return bo.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const i of r){const{key:l,value:h}=i;if(l.status==="aborted"||h.status==="aborted")return _r;l.status==="dirty"&&t.dirty(),h.status==="dirty"&&t.dirty(),l.value!=="__proto__"&&(typeof h.value<"u"||i.alwaysSet)&&(n[l.value]=h.value)}return{status:t.value,value:n}}}const _r=Object.freeze({status:"aborted"}),Qh=e=>({status:"dirty",value:e}),Oo=e=>({status:"valid",value:e}),A2=e=>e.status==="aborted",R2=e=>e.status==="dirty",yd=e=>e.status==="valid",Pg=e=>typeof Promise<"u"&&e instanceof Promise;function X_(e,t,r,n){if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function rB(e,t,r,n,i){if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r}var lr;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(lr||(lr={}));var Mm,zm;class hl{constructor(t,r,n,i){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const aD=(e,t)=>{if(yd(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new xa(e.common.issues);return this._error=r,this._error}}};function Ar(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(h,s)=>{var m,y;const{message:S}=e;return h.code==="invalid_enum_value"?{message:S??s.defaultError}:typeof s.data>"u"?{message:(m=S??n)!==null&&m!==void 0?m:s.defaultError}:h.code!=="invalid_type"?{message:s.defaultError}:{message:(y=S??r)!==null&&y!==void 0?y:s.defaultError}},description:i}}class Fr{get description(){return this._def.description}_getType(t){return $l(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:$l(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new bo,ctx:{common:t.parent.common,data:t.data,parsedType:$l(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Pg(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;const i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:$l(t)},l=this._parseSync({data:t,path:i.path,parent:i});return aD(i,l)}"~validate"(t){var r,n;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:$l(t)};if(!this["~standard"].async)try{const l=this._parseSync({data:t,path:[],parent:i});return yd(l)?{value:l.value}:{issues:i.common.issues}}catch(l){!((n=(r=l==null?void 0:l.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:i}).then(l=>yd(l)?{value:l.value}:{issues:i.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:$l(t)},i=this._parse({data:t,path:n.path,parent:n}),l=await(Pg(i)?i:Promise.resolve(i));return aD(n,l)}refine(t,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,l)=>{const h=t(i),s=()=>l.addIssue({code:vt.custom,...n(i)});return typeof Promise<"u"&&h instanceof Promise?h.then(m=>m?!0:(s(),!1)):h?!0:(s(),!1)})}refinement(t,r){return this._refinement((n,i)=>t(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(t){return new Ps({schema:this,typeName:gr.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return ll.create(this,this._def)}nullable(){return ou.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Cs.create(this)}promise(){return Bf.create(this,this._def)}or(t){return Mg.create([this,t],this._def)}and(t){return zg.create(this,t,this._def)}transform(t){return new Ps({...Ar(this._def),schema:this,typeName:gr.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new Fg({...Ar(this._def),innerType:this,defaultValue:r,typeName:gr.ZodDefault})}brand(){return new XT({typeName:gr.ZodBranded,type:this,...Ar(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new Ng({...Ar(this._def),innerType:this,catchValue:r,typeName:gr.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return xv.create(this,t)}readonly(){return jg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const dre=/^c[^\s-]{8,}$/i,hre=/^[0-9a-z]+$/,fre=/^[0-9A-HJKMNP-TV-Z]{26}$/i,pre=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,mre=/^[a-z0-9_-]{21}$/i,gre=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,vre=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yre=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_re="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Yw;const xre=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,bre=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,wre=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Sre=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Cre=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,kre=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nB="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Tre=new RegExp(`^${nB}$`);function iB(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function Ere(e){return new RegExp(`^${iB(e)}$`)}function oB(e){let t=`${nB}T${iB(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function Ire(e,t){return!!((t==="v4"||!t)&&xre.test(e)||(t==="v6"||!t)&&wre.test(e))}function Pre(e,t){if(!gre.test(e))return!1;try{const[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function Are(e,t){return!!((t==="v4"||!t)&&bre.test(e)||(t==="v6"||!t)&&Sre.test(e))}class _s extends Fr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Yt.string){const l=this._getOrReturnCtx(t);return Ut(l,{code:vt.invalid_type,expected:Yt.string,received:l.parsedType}),_r}const n=new bo;let i;for(const l of this._def.checks)if(l.kind==="min")t.data.length<l.value&&(i=this._getOrReturnCtx(t,i),Ut(i,{code:vt.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),n.dirty());else if(l.kind==="max")t.data.length>l.value&&(i=this._getOrReturnCtx(t,i),Ut(i,{code:vt.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),n.dirty());else if(l.kind==="length"){const h=t.data.length>l.value,s=t.data.length<l.value;(h||s)&&(i=this._getOrReturnCtx(t,i),h?Ut(i,{code:vt.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):s&&Ut(i,{code:vt.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),n.dirty())}else if(l.kind==="email")yre.test(t.data)||(i=this._getOrReturnCtx(t,i),Ut(i,{validation:"email",code:vt.invalid_string,message:l.message}),n.dirty());else if(l.kind==="emoji")Yw||(Yw=new RegExp(_re,"u")),Yw.test(t.data)||(i=this._getOrReturnCtx(t,i),Ut(i,{validation:"emoji",code:vt.invalid_string,message:l.message}),n.dirty());else if(l.kind==="uuid")pre.test(t.data)||(i=this._getOrReturnCtx(t,i),Ut(i,{validation:"uuid",code:vt.invalid_string,message:l.message}),n.dirty());else if(l.kind==="nanoid")mre.test(t.data)||(i=this._getOrReturnCtx(t,i),Ut(i,{validation:"nanoid",code:vt.invalid_string,message:l.message}),n.dirty());else if(l.kind==="cuid")dre.test(t.data)||(i=this._getOrReturnCtx(t,i),Ut(i,{validation:"cuid",code:vt.invalid_string,message:l.message}),n.dirty());else if(l.kind==="cuid2")hre.test(t.data)||(i=this._getOrReturnCtx(t,i),Ut(i,{validation:"cuid2",code:vt.invalid_string,message:l.message}),n.dirty());else if(l.kind==="ulid")fre.test(t.data)||(i=this._getOrReturnCtx(t,i),Ut(i,{validation:"ulid",code:vt.invalid_string,message:l.message}),n.dirty());else if(l.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Ut(i,{validation:"url",code:vt.invalid_string,message:l.message}),n.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Ut(i,{validation:"regex",code:vt.invalid_string,message:l.message}),n.dirty())):l.kind==="trim"?t.data=t.data.trim():l.kind==="includes"?t.data.includes(l.value,l.position)||(i=this._getOrReturnCtx(t,i),Ut(i,{code:vt.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),n.dirty()):l.kind==="toLowerCase"?t.data=t.data.toLowerCase():l.kind==="toUpperCase"?t.data=t.data.toUpperCase():l.kind==="startsWith"?t.data.startsWith(l.value)||(i=this._getOrReturnCtx(t,i),Ut(i,{code:vt.invalid_string,validation:{startsWith:l.value},message:l.message}),n.dirty()):l.kind==="endsWith"?t.data.endsWith(l.value)||(i=this._getOrReturnCtx(t,i),Ut(i,{code:vt.invalid_string,validation:{endsWith:l.value},message:l.message}),n.dirty()):l.kind==="datetime"?oB(l).test(t.data)||(i=this._getOrReturnCtx(t,i),Ut(i,{code:vt.invalid_string,validation:"datetime",message:l.message}),n.dirty()):l.kind==="date"?Tre.test(t.data)||(i=this._getOrReturnCtx(t,i),Ut(i,{code:vt.invalid_string,validation:"date",message:l.message}),n.dirty()):l.kind==="time"?Ere(l).test(t.data)||(i=this._getOrReturnCtx(t,i),Ut(i,{code:vt.invalid_string,validation:"time",message:l.message}),n.dirty()):l.kind==="duration"?vre.test(t.data)||(i=this._getOrReturnCtx(t,i),Ut(i,{validation:"duration",code:vt.invalid_string,message:l.message}),n.dirty()):l.kind==="ip"?Ire(t.data,l.version)||(i=this._getOrReturnCtx(t,i),Ut(i,{validation:"ip",code:vt.invalid_string,message:l.message}),n.dirty()):l.kind==="jwt"?Pre(t.data,l.alg)||(i=this._getOrReturnCtx(t,i),Ut(i,{validation:"jwt",code:vt.invalid_string,message:l.message}),n.dirty()):l.kind==="cidr"?Are(t.data,l.version)||(i=this._getOrReturnCtx(t,i),Ut(i,{validation:"cidr",code:vt.invalid_string,message:l.message}),n.dirty()):l.kind==="base64"?Cre.test(t.data)||(i=this._getOrReturnCtx(t,i),Ut(i,{validation:"base64",code:vt.invalid_string,message:l.message}),n.dirty()):l.kind==="base64url"?kre.test(t.data)||(i=this._getOrReturnCtx(t,i),Ut(i,{validation:"base64url",code:vt.invalid_string,message:l.message}),n.dirty()):rn.assertNever(l);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(i=>t.test(i),{validation:r,code:vt.invalid_string,...lr.errToObj(n)})}_addCheck(t){return new _s({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...lr.errToObj(t)})}url(t){return this._addCheck({kind:"url",...lr.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...lr.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...lr.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...lr.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...lr.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...lr.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...lr.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...lr.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...lr.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...lr.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...lr.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...lr.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...lr.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...lr.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...lr.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...lr.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...lr.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...lr.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...lr.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...lr.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...lr.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...lr.errToObj(r)})}nonempty(t){return this.min(1,lr.errToObj(t))}trim(){return new _s({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _s({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _s({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}_s.create=e=>{var t;return new _s({checks:[],typeName:gr.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ar(e)})};function Rre(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,l=parseInt(e.toFixed(i).replace(".","")),h=parseInt(t.toFixed(i).replace(".",""));return l%h/Math.pow(10,i)}class ru extends Fr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Yt.number){const l=this._getOrReturnCtx(t);return Ut(l,{code:vt.invalid_type,expected:Yt.number,received:l.parsedType}),_r}let n;const i=new bo;for(const l of this._def.checks)l.kind==="int"?rn.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Ut(n,{code:vt.invalid_type,expected:"integer",received:"float",message:l.message}),i.dirty()):l.kind==="min"?(l.inclusive?t.data<l.value:t.data<=l.value)&&(n=this._getOrReturnCtx(t,n),Ut(n,{code:vt.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),i.dirty()):l.kind==="max"?(l.inclusive?t.data>l.value:t.data>=l.value)&&(n=this._getOrReturnCtx(t,n),Ut(n,{code:vt.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),i.dirty()):l.kind==="multipleOf"?Rre(t.data,l.value)!==0&&(n=this._getOrReturnCtx(t,n),Ut(n,{code:vt.not_multiple_of,multipleOf:l.value,message:l.message}),i.dirty()):l.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Ut(n,{code:vt.not_finite,message:l.message}),i.dirty()):rn.assertNever(l);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,lr.toString(r))}gt(t,r){return this.setLimit("min",t,!1,lr.toString(r))}lte(t,r){return this.setLimit("max",t,!0,lr.toString(r))}lt(t,r){return this.setLimit("max",t,!1,lr.toString(r))}setLimit(t,r,n,i){return new ru({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:lr.toString(i)}]})}_addCheck(t){return new ru({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:lr.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:lr.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:lr.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:lr.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:lr.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:lr.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:lr.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:lr.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:lr.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&rn.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}ru.create=e=>new ru({checks:[],typeName:gr.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ar(e)});class nu extends Fr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Yt.bigint)return this._getInvalidInput(t);let n;const i=new bo;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?t.data<l.value:t.data<=l.value)&&(n=this._getOrReturnCtx(t,n),Ut(n,{code:vt.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),i.dirty()):l.kind==="max"?(l.inclusive?t.data>l.value:t.data>=l.value)&&(n=this._getOrReturnCtx(t,n),Ut(n,{code:vt.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),i.dirty()):l.kind==="multipleOf"?t.data%l.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Ut(n,{code:vt.not_multiple_of,multipleOf:l.value,message:l.message}),i.dirty()):rn.assertNever(l);return{status:i.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Ut(r,{code:vt.invalid_type,expected:Yt.bigint,received:r.parsedType}),_r}gte(t,r){return this.setLimit("min",t,!0,lr.toString(r))}gt(t,r){return this.setLimit("min",t,!1,lr.toString(r))}lte(t,r){return this.setLimit("max",t,!0,lr.toString(r))}lt(t,r){return this.setLimit("max",t,!1,lr.toString(r))}setLimit(t,r,n,i){return new nu({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:lr.toString(i)}]})}_addCheck(t){return new nu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:lr.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:lr.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:lr.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:lr.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:lr.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}nu.create=e=>{var t;return new nu({checks:[],typeName:gr.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ar(e)})};class Ag extends Fr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Yt.boolean){const n=this._getOrReturnCtx(t);return Ut(n,{code:vt.invalid_type,expected:Yt.boolean,received:n.parsedType}),_r}return Oo(t.data)}}Ag.create=e=>new Ag({typeName:gr.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ar(e)});class _d extends Fr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Yt.date){const l=this._getOrReturnCtx(t);return Ut(l,{code:vt.invalid_type,expected:Yt.date,received:l.parsedType}),_r}if(isNaN(t.data.getTime())){const l=this._getOrReturnCtx(t);return Ut(l,{code:vt.invalid_date}),_r}const n=new bo;let i;for(const l of this._def.checks)l.kind==="min"?t.data.getTime()<l.value&&(i=this._getOrReturnCtx(t,i),Ut(i,{code:vt.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),n.dirty()):l.kind==="max"?t.data.getTime()>l.value&&(i=this._getOrReturnCtx(t,i),Ut(i,{code:vt.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),n.dirty()):rn.assertNever(l);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new _d({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:lr.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:lr.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}_d.create=e=>new _d({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:gr.ZodDate,...Ar(e)});class Y_ extends Fr{_parse(t){if(this._getType(t)!==Yt.symbol){const n=this._getOrReturnCtx(t);return Ut(n,{code:vt.invalid_type,expected:Yt.symbol,received:n.parsedType}),_r}return Oo(t.data)}}Y_.create=e=>new Y_({typeName:gr.ZodSymbol,...Ar(e)});class Rg extends Fr{_parse(t){if(this._getType(t)!==Yt.undefined){const n=this._getOrReturnCtx(t);return Ut(n,{code:vt.invalid_type,expected:Yt.undefined,received:n.parsedType}),_r}return Oo(t.data)}}Rg.create=e=>new Rg({typeName:gr.ZodUndefined,...Ar(e)});class Dg extends Fr{_parse(t){if(this._getType(t)!==Yt.null){const n=this._getOrReturnCtx(t);return Ut(n,{code:vt.invalid_type,expected:Yt.null,received:n.parsedType}),_r}return Oo(t.data)}}Dg.create=e=>new Dg({typeName:gr.ZodNull,...Ar(e)});class $f extends Fr{constructor(){super(...arguments),this._any=!0}_parse(t){return Oo(t.data)}}$f.create=e=>new $f({typeName:gr.ZodAny,...Ar(e)});class od extends Fr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Oo(t.data)}}od.create=e=>new od({typeName:gr.ZodUnknown,...Ar(e)});class ic extends Fr{_parse(t){const r=this._getOrReturnCtx(t);return Ut(r,{code:vt.invalid_type,expected:Yt.never,received:r.parsedType}),_r}}ic.create=e=>new ic({typeName:gr.ZodNever,...Ar(e)});class J_ extends Fr{_parse(t){if(this._getType(t)!==Yt.undefined){const n=this._getOrReturnCtx(t);return Ut(n,{code:vt.invalid_type,expected:Yt.void,received:n.parsedType}),_r}return Oo(t.data)}}J_.create=e=>new J_({typeName:gr.ZodVoid,...Ar(e)});class Cs extends Fr{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),i=this._def;if(r.parsedType!==Yt.array)return Ut(r,{code:vt.invalid_type,expected:Yt.array,received:r.parsedType}),_r;if(i.exactLength!==null){const h=r.data.length>i.exactLength.value,s=r.data.length<i.exactLength.value;(h||s)&&(Ut(r,{code:h?vt.too_big:vt.too_small,minimum:s?i.exactLength.value:void 0,maximum:h?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(Ut(r,{code:vt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(Ut(r,{code:vt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((h,s)=>i.type._parseAsync(new hl(r,h,r.path,s)))).then(h=>bo.mergeArray(n,h));const l=[...r.data].map((h,s)=>i.type._parseSync(new hl(r,h,r.path,s)));return bo.mergeArray(n,l)}get element(){return this._def.type}min(t,r){return new Cs({...this._def,minLength:{value:t,message:lr.toString(r)}})}max(t,r){return new Cs({...this._def,maxLength:{value:t,message:lr.toString(r)}})}length(t,r){return new Cs({...this._def,exactLength:{value:t,message:lr.toString(r)}})}nonempty(t){return this.min(1,t)}}Cs.create=(e,t)=>new Cs({type:e,minLength:null,maxLength:null,exactLength:null,typeName:gr.ZodArray,...Ar(t)});function Oh(e){if(e instanceof Yn){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=ll.create(Oh(n))}return new Yn({...e._def,shape:()=>t})}else return e instanceof Cs?new Cs({...e._def,type:Oh(e.element)}):e instanceof ll?ll.create(Oh(e.unwrap())):e instanceof ou?ou.create(Oh(e.unwrap())):e instanceof fl?fl.create(e.items.map(t=>Oh(t))):e}class Yn extends Fr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=rn.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==Yt.object){const y=this._getOrReturnCtx(t);return Ut(y,{code:vt.invalid_type,expected:Yt.object,received:y.parsedType}),_r}const{status:n,ctx:i}=this._processInputParams(t),{shape:l,keys:h}=this._getCached(),s=[];if(!(this._def.catchall instanceof ic&&this._def.unknownKeys==="strip"))for(const y in i.data)h.includes(y)||s.push(y);const m=[];for(const y of h){const S=l[y],T=i.data[y];m.push({key:{status:"valid",value:y},value:S._parse(new hl(i,T,i.path,y)),alwaysSet:y in i.data})}if(this._def.catchall instanceof ic){const y=this._def.unknownKeys;if(y==="passthrough")for(const S of s)m.push({key:{status:"valid",value:S},value:{status:"valid",value:i.data[S]}});else if(y==="strict")s.length>0&&(Ut(i,{code:vt.unrecognized_keys,keys:s}),n.dirty());else if(y!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const y=this._def.catchall;for(const S of s){const T=i.data[S];m.push({key:{status:"valid",value:S},value:y._parse(new hl(i,T,i.path,S)),alwaysSet:S in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const y=[];for(const S of m){const T=await S.key,I=await S.value;y.push({key:T,value:I,alwaysSet:S.alwaysSet})}return y}).then(y=>bo.mergeObjectSync(n,y)):bo.mergeObjectSync(n,m)}get shape(){return this._def.shape()}strict(t){return lr.errToObj,new Yn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,l,h,s;const m=(h=(l=(i=this._def).errorMap)===null||l===void 0?void 0:l.call(i,r,n).message)!==null&&h!==void 0?h:n.defaultError;return r.code==="unrecognized_keys"?{message:(s=lr.errToObj(t).message)!==null&&s!==void 0?s:m}:{message:m}}}:{}})}strip(){return new Yn({...this._def,unknownKeys:"strip"})}passthrough(){return new Yn({...this._def,unknownKeys:"passthrough"})}extend(t){return new Yn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Yn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:gr.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Yn({...this._def,catchall:t})}pick(t){const r={};return rn.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Yn({...this._def,shape:()=>r})}omit(t){const r={};return rn.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new Yn({...this._def,shape:()=>r})}deepPartial(){return Oh(this)}partial(t){const r={};return rn.objectKeys(this.shape).forEach(n=>{const i=this.shape[n];t&&!t[n]?r[n]=i:r[n]=i.optional()}),new Yn({...this._def,shape:()=>r})}required(t){const r={};return rn.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let l=this.shape[n];for(;l instanceof ll;)l=l._def.innerType;r[n]=l}}),new Yn({...this._def,shape:()=>r})}keyof(){return aB(rn.objectKeys(this.shape))}}Yn.create=(e,t)=>new Yn({shape:()=>e,unknownKeys:"strip",catchall:ic.create(),typeName:gr.ZodObject,...Ar(t)});Yn.strictCreate=(e,t)=>new Yn({shape:()=>e,unknownKeys:"strict",catchall:ic.create(),typeName:gr.ZodObject,...Ar(t)});Yn.lazycreate=(e,t)=>new Yn({shape:e,unknownKeys:"strip",catchall:ic.create(),typeName:gr.ZodObject,...Ar(t)});class Mg extends Fr{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function i(l){for(const s of l)if(s.result.status==="valid")return s.result;for(const s of l)if(s.result.status==="dirty")return r.common.issues.push(...s.ctx.common.issues),s.result;const h=l.map(s=>new xa(s.ctx.common.issues));return Ut(r,{code:vt.invalid_union,unionErrors:h}),_r}if(r.common.async)return Promise.all(n.map(async l=>{const h={...r,common:{...r.common,issues:[]},parent:null};return{result:await l._parseAsync({data:r.data,path:r.path,parent:h}),ctx:h}})).then(i);{let l;const h=[];for(const m of n){const y={...r,common:{...r.common,issues:[]},parent:null},S=m._parseSync({data:r.data,path:r.path,parent:y});if(S.status==="valid")return S;S.status==="dirty"&&!l&&(l={result:S,ctx:y}),y.common.issues.length&&h.push(y.common.issues)}if(l)return r.common.issues.push(...l.ctx.common.issues),l.result;const s=h.map(m=>new xa(m));return Ut(r,{code:vt.invalid_union,unionErrors:s}),_r}}get options(){return this._def.options}}Mg.create=(e,t)=>new Mg({options:e,typeName:gr.ZodUnion,...Ar(t)});const zl=e=>e instanceof Og?zl(e.schema):e instanceof Ps?zl(e.innerType()):e instanceof $g?[e.value]:e instanceof iu?e.options:e instanceof Bg?rn.objectValues(e.enum):e instanceof Fg?zl(e._def.innerType):e instanceof Rg?[void 0]:e instanceof Dg?[null]:e instanceof ll?[void 0,...zl(e.unwrap())]:e instanceof ou?[null,...zl(e.unwrap())]:e instanceof XT||e instanceof jg?zl(e.unwrap()):e instanceof Ng?zl(e._def.innerType):[];class Nb extends Fr{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.object)return Ut(r,{code:vt.invalid_type,expected:Yt.object,received:r.parsedType}),_r;const n=this.discriminator,i=r.data[n],l=this.optionsMap.get(i);return l?r.common.async?l._parseAsync({data:r.data,path:r.path,parent:r}):l._parseSync({data:r.data,path:r.path,parent:r}):(Ut(r,{code:vt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),_r)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){const i=new Map;for(const l of r){const h=zl(l.shape[t]);if(!h.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const s of h){if(i.has(s))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(s)}`);i.set(s,l)}}return new Nb({typeName:gr.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:i,...Ar(n)})}}function D2(e,t){const r=$l(e),n=$l(t);if(e===t)return{valid:!0,data:e};if(r===Yt.object&&n===Yt.object){const i=rn.objectKeys(t),l=rn.objectKeys(e).filter(s=>i.indexOf(s)!==-1),h={...e,...t};for(const s of l){const m=D2(e[s],t[s]);if(!m.valid)return{valid:!1};h[s]=m.data}return{valid:!0,data:h}}else if(r===Yt.array&&n===Yt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let l=0;l<e.length;l++){const h=e[l],s=t[l],m=D2(h,s);if(!m.valid)return{valid:!1};i.push(m.data)}return{valid:!0,data:i}}else return r===Yt.date&&n===Yt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class zg extends Fr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=(l,h)=>{if(A2(l)||A2(h))return _r;const s=D2(l.value,h.value);return s.valid?((R2(l)||R2(h))&&r.dirty(),{status:r.value,value:s.data}):(Ut(n,{code:vt.invalid_intersection_types}),_r)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([l,h])=>i(l,h)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}zg.create=(e,t,r)=>new zg({left:e,right:t,typeName:gr.ZodIntersection,...Ar(r)});class fl extends Fr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.array)return Ut(n,{code:vt.invalid_type,expected:Yt.array,received:n.parsedType}),_r;if(n.data.length<this._def.items.length)return Ut(n,{code:vt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),_r;!this._def.rest&&n.data.length>this._def.items.length&&(Ut(n,{code:vt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const l=[...n.data].map((h,s)=>{const m=this._def.items[s]||this._def.rest;return m?m._parse(new hl(n,h,n.path,s)):null}).filter(h=>!!h);return n.common.async?Promise.all(l).then(h=>bo.mergeArray(r,h)):bo.mergeArray(r,l)}get items(){return this._def.items}rest(t){return new fl({...this._def,rest:t})}}fl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new fl({items:e,typeName:gr.ZodTuple,rest:null,...Ar(t)})};class Lg extends Fr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.object)return Ut(n,{code:vt.invalid_type,expected:Yt.object,received:n.parsedType}),_r;const i=[],l=this._def.keyType,h=this._def.valueType;for(const s in n.data)i.push({key:l._parse(new hl(n,s,n.path,s)),value:h._parse(new hl(n,n.data[s],n.path,s)),alwaysSet:s in n.data});return n.common.async?bo.mergeObjectAsync(r,i):bo.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof Fr?new Lg({keyType:t,valueType:r,typeName:gr.ZodRecord,...Ar(n)}):new Lg({keyType:_s.create(),valueType:t,typeName:gr.ZodRecord,...Ar(r)})}}class Q_ extends Fr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.map)return Ut(n,{code:vt.invalid_type,expected:Yt.map,received:n.parsedType}),_r;const i=this._def.keyType,l=this._def.valueType,h=[...n.data.entries()].map(([s,m],y)=>({key:i._parse(new hl(n,s,n.path,[y,"key"])),value:l._parse(new hl(n,m,n.path,[y,"value"]))}));if(n.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const m of h){const y=await m.key,S=await m.value;if(y.status==="aborted"||S.status==="aborted")return _r;(y.status==="dirty"||S.status==="dirty")&&r.dirty(),s.set(y.value,S.value)}return{status:r.value,value:s}})}else{const s=new Map;for(const m of h){const y=m.key,S=m.value;if(y.status==="aborted"||S.status==="aborted")return _r;(y.status==="dirty"||S.status==="dirty")&&r.dirty(),s.set(y.value,S.value)}return{status:r.value,value:s}}}}Q_.create=(e,t,r)=>new Q_({valueType:t,keyType:e,typeName:gr.ZodMap,...Ar(r)});class xd extends Fr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.set)return Ut(n,{code:vt.invalid_type,expected:Yt.set,received:n.parsedType}),_r;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Ut(n,{code:vt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Ut(n,{code:vt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const l=this._def.valueType;function h(m){const y=new Set;for(const S of m){if(S.status==="aborted")return _r;S.status==="dirty"&&r.dirty(),y.add(S.value)}return{status:r.value,value:y}}const s=[...n.data.values()].map((m,y)=>l._parse(new hl(n,m,n.path,y)));return n.common.async?Promise.all(s).then(m=>h(m)):h(s)}min(t,r){return new xd({...this._def,minSize:{value:t,message:lr.toString(r)}})}max(t,r){return new xd({...this._def,maxSize:{value:t,message:lr.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}xd.create=(e,t)=>new xd({valueType:e,minSize:null,maxSize:null,typeName:gr.ZodSet,...Ar(t)});class ff extends Fr{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.function)return Ut(r,{code:vt.invalid_type,expected:Yt.function,received:r.parsedType}),_r;function n(s,m){return K_({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Z_(),Of].filter(y=>!!y),issueData:{code:vt.invalid_arguments,argumentsError:m}})}function i(s,m){return K_({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Z_(),Of].filter(y=>!!y),issueData:{code:vt.invalid_return_type,returnTypeError:m}})}const l={errorMap:r.common.contextualErrorMap},h=r.data;if(this._def.returns instanceof Bf){const s=this;return Oo(async function(...m){const y=new xa([]),S=await s._def.args.parseAsync(m,l).catch(D=>{throw y.addIssue(n(m,D)),y}),T=await Reflect.apply(h,this,S);return await s._def.returns._def.type.parseAsync(T,l).catch(D=>{throw y.addIssue(i(T,D)),y})})}else{const s=this;return Oo(function(...m){const y=s._def.args.safeParse(m,l);if(!y.success)throw new xa([n(m,y.error)]);const S=Reflect.apply(h,this,y.data),T=s._def.returns.safeParse(S,l);if(!T.success)throw new xa([i(S,T.error)]);return T.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new ff({...this._def,args:fl.create(t).rest(od.create())})}returns(t){return new ff({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new ff({args:t||fl.create([]).rest(od.create()),returns:r||od.create(),typeName:gr.ZodFunction,...Ar(n)})}}class Og extends Fr{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Og.create=(e,t)=>new Og({getter:e,typeName:gr.ZodLazy,...Ar(t)});class $g extends Fr{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Ut(r,{received:r.data,code:vt.invalid_literal,expected:this._def.value}),_r}return{status:"valid",value:t.data}}get value(){return this._def.value}}$g.create=(e,t)=>new $g({value:e,typeName:gr.ZodLiteral,...Ar(t)});function aB(e,t){return new iu({values:e,typeName:gr.ZodEnum,...Ar(t)})}class iu extends Fr{constructor(){super(...arguments),Mm.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return Ut(r,{expected:rn.joinValues(n),received:r.parsedType,code:vt.invalid_type}),_r}if(X_(this,Mm)||rB(this,Mm,new Set(this._def.values)),!X_(this,Mm).has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return Ut(r,{received:r.data,code:vt.invalid_enum_value,options:n}),_r}return Oo(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return iu.create(t,{...this._def,...r})}exclude(t,r=this._def){return iu.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Mm=new WeakMap;iu.create=aB;class Bg extends Fr{constructor(){super(...arguments),zm.set(this,void 0)}_parse(t){const r=rn.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Yt.string&&n.parsedType!==Yt.number){const i=rn.objectValues(r);return Ut(n,{expected:rn.joinValues(i),received:n.parsedType,code:vt.invalid_type}),_r}if(X_(this,zm)||rB(this,zm,new Set(rn.getValidEnumValues(this._def.values))),!X_(this,zm).has(t.data)){const i=rn.objectValues(r);return Ut(n,{received:n.data,code:vt.invalid_enum_value,options:i}),_r}return Oo(t.data)}get enum(){return this._def.values}}zm=new WeakMap;Bg.create=(e,t)=>new Bg({values:e,typeName:gr.ZodNativeEnum,...Ar(t)});class Bf extends Fr{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.promise&&r.common.async===!1)return Ut(r,{code:vt.invalid_type,expected:Yt.promise,received:r.parsedType}),_r;const n=r.parsedType===Yt.promise?r.data:Promise.resolve(r.data);return Oo(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Bf.create=(e,t)=>new Bf({type:e,typeName:gr.ZodPromise,...Ar(t)});class Ps extends Fr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===gr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=this._def.effect||null,l={addIssue:h=>{Ut(n,h),h.fatal?r.abort():r.dirty()},get path(){return n.path}};if(l.addIssue=l.addIssue.bind(l),i.type==="preprocess"){const h=i.transform(n.data,l);if(n.common.async)return Promise.resolve(h).then(async s=>{if(r.value==="aborted")return _r;const m=await this._def.schema._parseAsync({data:s,path:n.path,parent:n});return m.status==="aborted"?_r:m.status==="dirty"||r.value==="dirty"?Qh(m.value):m});{if(r.value==="aborted")return _r;const s=this._def.schema._parseSync({data:h,path:n.path,parent:n});return s.status==="aborted"?_r:s.status==="dirty"||r.value==="dirty"?Qh(s.value):s}}if(i.type==="refinement"){const h=s=>{const m=i.refinement(s,l);if(n.common.async)return Promise.resolve(m);if(m instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(n.common.async===!1){const s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?_r:(s.status==="dirty"&&r.dirty(),h(s.value),{status:r.value,value:s.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>s.status==="aborted"?_r:(s.status==="dirty"&&r.dirty(),h(s.value).then(()=>({status:r.value,value:s.value}))))}if(i.type==="transform")if(n.common.async===!1){const h=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!yd(h))return h;const s=i.transform(h.value,l);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:s}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(h=>yd(h)?Promise.resolve(i.transform(h.value,l)).then(s=>({status:r.value,value:s})):h);rn.assertNever(i)}}Ps.create=(e,t,r)=>new Ps({schema:e,typeName:gr.ZodEffects,effect:t,...Ar(r)});Ps.createWithPreprocess=(e,t,r)=>new Ps({schema:t,effect:{type:"preprocess",transform:e},typeName:gr.ZodEffects,...Ar(r)});class ll extends Fr{_parse(t){return this._getType(t)===Yt.undefined?Oo(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ll.create=(e,t)=>new ll({innerType:e,typeName:gr.ZodOptional,...Ar(t)});class ou extends Fr{_parse(t){return this._getType(t)===Yt.null?Oo(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ou.create=(e,t)=>new ou({innerType:e,typeName:gr.ZodNullable,...Ar(t)});class Fg extends Fr{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===Yt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Fg.create=(e,t)=>new Fg({innerType:e,typeName:gr.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ar(t)});class Ng extends Fr{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Pg(i)?i.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new xa(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new xa(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Ng.create=(e,t)=>new Ng({innerType:e,typeName:gr.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ar(t)});class ex extends Fr{_parse(t){if(this._getType(t)!==Yt.nan){const n=this._getOrReturnCtx(t);return Ut(n,{code:vt.invalid_type,expected:Yt.nan,received:n.parsedType}),_r}return{status:"valid",value:t.data}}}ex.create=e=>new ex({typeName:gr.ZodNaN,...Ar(e)});const Dre=Symbol("zod_brand");class XT extends Fr{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class xv extends Fr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?_r:l.status==="dirty"?(r.dirty(),Qh(l.value)):this._def.out._parseAsync({data:l.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?_r:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(t,r){return new xv({in:t,out:r,typeName:gr.ZodPipeline})}}class jg extends Fr{_parse(t){const r=this._def.innerType._parse(t),n=i=>(yd(i)&&(i.value=Object.freeze(i.value)),i);return Pg(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}jg.create=(e,t)=>new jg({innerType:e,typeName:gr.ZodReadonly,...Ar(t)});function sB(e,t={},r){return e?$f.create().superRefine((n,i)=>{var l,h;if(!e(n)){const s=typeof t=="function"?t(n):typeof t=="string"?{message:t}:t,m=(h=(l=s.fatal)!==null&&l!==void 0?l:r)!==null&&h!==void 0?h:!0,y=typeof s=="string"?{message:s}:s;i.addIssue({code:"custom",...y,fatal:m})}}):$f.create()}const Mre={object:Yn.lazycreate};var gr;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(gr||(gr={}));const zre=(e,t={message:`Input not instance of ${e.name}`})=>sB(r=>r instanceof e,t),lB=_s.create,cB=ru.create,Lre=ex.create,Ore=nu.create,uB=Ag.create,$re=_d.create,Bre=Y_.create,Fre=Rg.create,Nre=Dg.create,jre=$f.create,Vre=od.create,Ure=ic.create,Hre=J_.create,Gre=Cs.create,Wre=Yn.create,qre=Yn.strictCreate,Zre=Mg.create,Kre=Nb.create,Xre=zg.create,Yre=fl.create,Jre=Lg.create,Qre=Q_.create,ene=xd.create,tne=ff.create,rne=Og.create,nne=$g.create,ine=iu.create,one=Bg.create,ane=Bf.create,sD=Ps.create,sne=ll.create,lne=ou.create,cne=Ps.createWithPreprocess,une=xv.create,dne=()=>lB().optional(),hne=()=>cB().optional(),fne=()=>uB().optional(),pne={string:e=>_s.create({...e,coerce:!0}),number:e=>ru.create({...e,coerce:!0}),boolean:e=>Ag.create({...e,coerce:!0}),bigint:e=>nu.create({...e,coerce:!0}),date:e=>_d.create({...e,coerce:!0})},mne=_r;var sa=Object.freeze({__proto__:null,defaultErrorMap:Of,setErrorMap:cre,getErrorMap:Z_,makeIssue:K_,EMPTY_PATH:ure,addIssueToContext:Ut,ParseStatus:bo,INVALID:_r,DIRTY:Qh,OK:Oo,isAborted:A2,isDirty:R2,isValid:yd,isAsync:Pg,get util(){return rn},get objectUtil(){return P2},ZodParsedType:Yt,getParsedType:$l,ZodType:Fr,datetimeRegex:oB,ZodString:_s,ZodNumber:ru,ZodBigInt:nu,ZodBoolean:Ag,ZodDate:_d,ZodSymbol:Y_,ZodUndefined:Rg,ZodNull:Dg,ZodAny:$f,ZodUnknown:od,ZodNever:ic,ZodVoid:J_,ZodArray:Cs,ZodObject:Yn,ZodUnion:Mg,ZodDiscriminatedUnion:Nb,ZodIntersection:zg,ZodTuple:fl,ZodRecord:Lg,ZodMap:Q_,ZodSet:xd,ZodFunction:ff,ZodLazy:Og,ZodLiteral:$g,ZodEnum:iu,ZodNativeEnum:Bg,ZodPromise:Bf,ZodEffects:Ps,ZodTransformer:Ps,ZodOptional:ll,ZodNullable:ou,ZodDefault:Fg,ZodCatch:Ng,ZodNaN:ex,BRAND:Dre,ZodBranded:XT,ZodPipeline:xv,ZodReadonly:jg,custom:sB,Schema:Fr,ZodSchema:Fr,late:Mre,get ZodFirstPartyTypeKind(){return gr},coerce:pne,any:jre,array:Gre,bigint:Ore,boolean:uB,date:$re,discriminatedUnion:Kre,effect:sD,enum:ine,function:tne,instanceof:zre,intersection:Xre,lazy:rne,literal:nne,map:Qre,nan:Lre,nativeEnum:one,never:Ure,null:Nre,nullable:lne,number:cB,object:Wre,oboolean:fne,onumber:hne,optional:sne,ostring:dne,pipeline:une,preprocess:cne,promise:ane,record:Jre,set:ene,strictObject:qre,string:lB,symbol:Bre,transformer:sD,tuple:Yre,undefined:Fre,union:Zre,unknown:Vre,void:Hre,NEVER:mne,ZodIssueCode:vt,quotelessJson:lre,ZodError:xa}),da=(e=>(e[e.COMPANY=0]="COMPANY",e[e.FUEL=1]="FUEL",e[e.REST=2]="REST",e[e.SERVICE=3]="SERVICE",e[e.DEALER=4]="DEALER",e[e.RECRUITING=5]="RECRUITING",e))(da||{}),dB=(e=>(e[e.NEARBY=0]="NEARBY",e[e.ROUTE=1]="ROUTE",e))(dB||{});const gne=sa.object({lonLats:sa.array(sa.tuple([sa.number(),sa.number()])),nodeUids:sa.array(sa.string()),distance:sa.number(),time:sa.number(),strategy:sa.enum(["shortest","smallRoads"])});sa.object({segments:sa.array(gne),id:sa.string()});const hB={[da.COMPANY]:"Companies",[da.FUEL]:"Fuel Stations",[da.REST]:"Rest Stops",[da.SERVICE]:"Service Centers",[da.DEALER]:"Dealerships",[da.RECRUITING]:"Recruitment Agencies"};var Hl=(e=>(e[e.FOLLOW=0]="FOLLOW",e[e.FREE=1]="FREE",e))(Hl||{}),Ji=(e=>(e[e.CATEGORIES=0]="CATEGORIES",e[e.DESTINATIONS=1]="DESTINATIONS",e[e.ROUTES=2]="ROUTES",e))(Ji||{});class vne{constructor(){uo(this,"cameraMode",Hl.FOLLOW);uo(this,"activeRoute");uo(this,"showNavSheet",!1);HT(this,{activeRoute:Ii.ref})}}class yne{constructor(){uo(this,"map");uo(this,"playerMarker")}fitPoints(t){if(!this.map||!this.playerMarker){console.warn("tried to view points but map/marker hasn't loaded");return}const r=KT([...t,this.playerMarker.getLngLat().toArray()]),n=[r[0],r[1]],i=[r[2],r[3]];this.map.fitBounds([n,i],{duration:500,linear:!0,pitch:0,bearing:0,padding:50})}onMapLoad(t,r){tu.checkState(this.map==null),tu.checkState(this.playerMarker==null),this.map=t,this.playerMarker=r}onMapDragStart(t){t.cameraMode=Hl.FREE}setFollow(t){t.cameraMode=Hl.FOLLOW}startRouteFlow(t){t.showNavSheet=!0}hideNavSheet(t){console.log("hide nav sheet"),t.showNavSheet=!1}setActiveRoute(t,r,n){t.activeRoute=r,n.setActiveRoute.mutate(r)}startListening(t,r){let n=[0,0],i=[0,0];const l=[0,0];let h=0,s=0,m=0;console.log("subscribing"),r.onRouteUpdate.subscribe(void 0,{onData:gn(y=>t.activeRoute=y)}),r.onPositionUpdate.subscribe(void 0,{onData:y=>{const{map:S,playerMarker:T}=this;if(!S||!T)return;const{speedMph:I,position:D,bearing:F}=y;switch(n=i,i=D,h=s,s=F,t.cameraMode){case Hl.FOLLOW:S.easeTo({..._ne(D,F,I),duration:500,padding:{left:t.showNavSheet?440:0,top:400},easing:V=>(l[0]=n[0]+V*(i[0]-n[0]),l[1]=n[1]+V*(i[1]-n[1]),m=h+V*(s-h),T.setLngLat(l),T.setRotation(uD(m)),V)});break;case Hl.FREE:T.setLngLat(D),T.setRotation(uD(F));break;default:throw new fu(t.cameraMode)}}})}renderActiveRoute(t){const{map:r}=this;if(!r)return;const n=ln(r.getSource("activeRoute"));if(!t){n.setData(lD);return}console.log("setting route data",t),n.setData(cD(t)),r.getMap().setLayoutProperty("activeRouteLayer","visibility","visible")}renderRoutePreview(t,r){const{map:n}=this;if(!n)return;console.log("rendering route preview");const i=ln(n.getSource(`previewRoute-${r.index}`));if(!t){i.setData(lD);return}i.setData(cD(t)),n.getMap().setPaintProperty(`previewRouteLayer-${r.index}`,"line-opacity",r.highlight?1:.25).setLayoutProperty("activeRouteLayer","visibility","none")}}const lD={type:"FeatureCollection",features:[]};function cD(e){return{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:e.segments.flatMap(t=>t.lonLats)},properties:null}]}}function uD(e){return e>=0?e:360+e}function _ne(e,t,r){let n,i;return r>60?(n=11.5,i=30):r>30?(n=13,i=45):(n=14,i=50),{center:e,bearing:t,zoom:n,pitch:i}}class xne{constructor(t){uo(this,"direction","N");uo(this,"limitMph",0);this.appStore=t,HT(this)}get showRecenterFab(){return this.appStore.cameraMode===Hl.FREE}get showRouteFab(){return!this.appStore.activeRoute&&!this.appStore.showNavSheet}get showSearchFab(){return!!this.appStore.activeRoute&&!this.appStore.showNavSheet}}class bne{startListening(t,r){r.onPositionUpdate.subscribe(void 0,{onData:gn(n=>{t.direction=fB(n.bearing),t.limitMph=n.speedLimit})})}}function fB(e){const t=e>=0?e:360+e;return 337.5<=t||t<22.5?"N":22.5<=t&&t<67.5?"NE":67.5<=t&&t<112.5?"E":112.5<=t&&t<157.5?"SE":157.5<=t&&t<202.5?"S":202.5<=t&&t<247.5?"SW":247.5<=t&&t<292.5?"W":(O5(292.5<=t&&t<337.5),"NW")}function wne(e){const{appStore:t}=e,r=new xne(t),n=new bne,i=_o(()=>H.jsx(L5,{in:r.limitMph>=5,direction:"left",mountOnEnter:!0,unmountOnExit:!0,children:H.jsx(Tne,{limitMph:r.limitMph})})),l=_o(m=>H.jsx(Jw,{show:r.showRecenterFab,variant:"plain",backgroundColor:"background.body",Icon:()=>H.jsx($Y,{sx:{transform:"scale(1.25) rotate(30deg)"}}),onClick:m.onClick})),h=_o(m=>H.jsx(Jw,{show:r.showRouteFab,Icon:()=>H.jsx(AY,{sx:{transform:"scale(1.25)"}}),onClick:m.onClick})),s=_o(m=>H.jsx(Jw,{show:r.showSearchFab,Icon:()=>H.jsx(FY,{sx:{transform:"scale(1.25)"}}),onClick:m.onClick}));return{Controls:m=>H.jsx(kne,{store:r,Direction:()=>H.jsx(Sne,{store:r}),SpeedLimit:i,RecenterFab:()=>H.jsx(l,{onClick:m.onRecenterFabClick}),RouteFab:()=>H.jsx(h,{onClick:m.onRouteFabClick}),SearchFab:()=>H.jsx(s,{onClick:m.onSearchFabClick})}),store:r,controller:n}}const Sne=_o(e=>H.jsx(kb,{variant:"solid",sx:{p:.5,px:2,borderRadius:8,fontWeight:"bold"},children:e.store.direction})),Cne={p:2,borderRadius:"50%",boxShadow:"rgba(0, 0, 0, 0.2) 0px 3px 5px -1px, rgba(0, 0, 0, 0.14) 0px 6px 10px 0px, rgba(0, 0, 0, 0.12) 0px 1px 18px 0px"},Jw=e=>H.jsx(eJ,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,children:H.jsx(Qc,{size:"lg",color:"primary",variant:e.variant??"solid",sx:{...Cne,backgroundColor:e.backgroundColor??"primary.500"},onClick:e.onClick,children:H.jsx(e.Icon,{})})}),kne=e=>(console.log("render controls"),H.jsxs(yo,{padding:2,height:"100vh",direction:"column",justifyContent:"space-between",sx:{position:"absolute",top:0,right:0},children:[H.jsxs(yo,{gap:1,alignSelf:"end",alignItems:"center",children:[H.jsx(e.Direction,{}),H.jsx(e.SpeedLimit,{})]}),H.jsxs(yo,{gap:2,alignSelf:"end",alignItems:"center",children:[H.jsx(e.RecenterFab,{}),H.jsx(e.RouteFab,{}),H.jsx(e.SearchFab,{})]})]})),Tne=R.forwardRef((e,t)=>H.jsx(rc,{boxShadow:"0 0 2px 0 #0008",padding:.25,borderRadius:4,sx:{backgroundColor:"white"},ref:t,children:H.jsxs(rc,{border:2,padding:.5,paddingBottom:0,borderRadius:4,children:[H.jsxs(Qn,{textAlign:"center",lineHeight:1.2,level:"body-xs",children:["SPEED",H.jsx("br",{}),"LIMIT"]}),H.jsx(Qn,{textAlign:"center",level:"title-lg",fontSize:"xl2",fontWeight:"bold",sx:{WebkitTextStroke:1.25},children:e.limitMph})]})})),Ene=_o(e=>H.jsx(H.Fragment,{children:e.store.isLoading?H.jsx(cv,{size:"lg"}):H.jsx(Ine,{store:e.store,onDestinationHighlight:e.onDestinationHighlight,onDestinationRoutesClick:e.onDestinationRoutesClick,onDestinationGoClick:e.onDestinationGoClick})})),Ine=_o(e=>(console.log("render dest list"),H.jsx(Ed,{size:"lg",children:e.store.destinations.map((t,r)=>H.jsx(Pne,{store:e.store,destination:t,index:r,onDestinationHighlight:()=>e.onDestinationHighlight(t),onDestinationRoutesClick:()=>e.onDestinationRoutesClick(t),onDestinationGoClick:()=>e.onDestinationGoClick(t)},t.nodeUid))}))),Pne=_o(e=>H.jsxs(H.Fragment,{children:[H.jsx(lc,{children:H.jsxs(N$,{onClick:e.onDestinationHighlight,sx:{display:"flex",flexDirection:"column",gap:0,alignItems:"normal"},children:[H.jsxs(yo,{direction:"row",gap:1,children:[H.jsx(rc,{width:"1em",mr:1,children:H.jsxs(Qn,{fontSize:"lg",textAlign:"right",children:[e.index+1,"."]})}),H.jsx(rc,{marginTop:.5,children:H.jsx("img",{src:e.destination.logoUrl,style:{width:"4rem"}})}),H.jsxs(yo,{flexDirection:"column",flexGrow:1,children:[H.jsxs(yo,{flexDirection:"row",gap:1,justifyContent:"space-between",children:[H.jsx(Qn,{fontSize:"lg",children:e.destination.name}),H.jsx(yo,{direction:"row",alignItems:"center",gap:.5,children:e.destination.facilityUrls.map(t=>H.jsx("img",{src:t,style:{width:"1.5rem"}},t))})]}),H.jsxs(yo,{flexDirection:"row",gap:1,alignItems:"baseline",children:[H.jsxs(Qn,{noWrap:!0,color:"neutral",fontSize:"sm",flexGrow:1,width:100,children:[e.destination.isCityStateApproximate?"Near ":"",e.destination.city,", ",e.destination.state]}),H.jsxs(Qn,{color:"neutral",fontSize:"md",flexGrow:0,children:[Number((e.destination.distanceMeters/1609.344).toFixed(1)).toLocaleString(),H.jsx(Qn,{fontSize:"xs",children:"mi"})]}),H.jsx(Qn,{color:"neutral",fontSize:"md",fontWeight:"bold",flex:"0 1 2em",textAlign:"center",children:fB(e.destination.bearing)})]})]})]}),H.jsx(Ane,{store:e.store,destination:e.destination,onDestinationRoutesClick:e.onDestinationRoutesClick,onDestinationGoClick:e.onDestinationGoClick})]})}),H.jsx(Cb,{})]})),Ane=_o(e=>{const t=vv(()=>{var r;return((r=e.store.selectedDestination)==null?void 0:r.nodeUid)==e.destination.nodeUid});return H.jsx(RT,{in:t.get(),children:H.jsxs(_q,{variant:"outlined",size:"lg",buttonFlex:"1 0 50%",sx:{mt:2,mb:1},children:[H.jsx(If,{startDecorator:H.jsx(wY,{}),onClick:r=>{e.onDestinationRoutesClick(),r.stopPropagation()},children:"Routes"}),H.jsx(If,{variant:"solid",color:"success",onClick:r=>{e.onDestinationGoClick(),r.stopPropagation()},children:"Go!"})]})})}),Rne={[da.COMPANY]:{Icon:NY,color:"orange"},[da.FUEL]:{Icon:zY,color:"#008234"},[da.REST]:{Icon:RY,color:"#1f6eb7"},[da.SERVICE]:{Icon:IY,color:"#8e0d0d"},[da.DEALER]:{Icon:LY,color:"#7c2391"},[da.RECRUITING]:{Icon:BY,color:"#918d00"}},Dne=e=>H.jsx(rc,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:2,children:Object.entries(Rne).map(([t,{Icon:r,color:n}])=>H.jsx(Mne,{Icon:r,color:n,label:hB[Number(t)],onClick:()=>e.onClick(Number(t))},t))}),Mne=({Icon:e,color:t,label:r,onClick:n})=>H.jsx(H.Fragment,{children:H.jsxs(rc,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:1,children:[H.jsx(Qc,{size:"lg",variant:"solid",sx:{borderRadius:"50%",p:2.5,backgroundColor:t},onClick:n,children:H.jsx(e,{sx:{transform:"scale(1.25)"}})}),H.jsx(Qn,{children:r})]})}),zne=_o(e=>H.jsx(H.Fragment,{children:e.store.isLoading?H.jsx(cv,{size:"lg"}):H.jsx(Lne,{store:e.store,onRouteHighlight:e.onRouteHighlight,onRouteGoClick:e.onRouteGoClick})})),Lne=_o(e=>{console.log("render route list");const{onRouteHighlight:t,onRouteGoClick:r}=e,n=i=>H.jsx(One,{route:i.route,onRouteHighlight:()=>t(i.route),onRouteGoClick:()=>r(i.route)});return H.jsx(Ed,{size:"lg",children:e.store.routes.map(i=>H.jsx(n,{route:i},i.id))})}),One=_o(e=>H.jsxs(H.Fragment,{children:[H.jsx(lc,{children:H.jsxs(N$,{onClick:e.onRouteHighlight,children:[H.jsxs(yo,{direction:"column",flexGrow:1,children:[H.jsx(Qn,{fontSize:"lg",children:"12 hours, 34 minutes"}),H.jsxs(Qn,{color:"neutral",fontSize:"sm",children:[(500+Math.round(Math.random()*1e3)).toLocaleString()," ","miles · ",$ne(e.route.segments[0].strategy)]})]}),H.jsx(If,{size:"lg",variant:"solid",color:"success",onClick:t=>{e.onRouteGoClick(),t.stopPropagation()},children:"Go!"})]})}),H.jsx(Cb,{})]}));function $ne(e){switch(e){case"shortest":return"Shortest";case"smallRoads":return"Prefer small roads";default:throw new fu(e)}}const M2={title:"Choose destination",currentPageKey:Ji.CATEGORIES};class Bne{constructor(){uo(this,"currentPageKey",M2.currentPageKey);uo(this,"isLoading",!1);uo(this,"selectedDestinationType");uo(this,"destinations",[]);uo(this,"selectedDestination");uo(this,"routes",[]);uo(this,"selectedRoute");HT(this,{destinations:Ii.ref})}get title(){switch(this.currentPageKey){case Ji.CATEGORIES:return M2.title;case Ji.DESTINATIONS:return hB[ln(this.selectedDestinationType)];case Ji.ROUTES:return`Routes to ${ln(this.selectedDestination).name}`;default:throw new fu(this.currentPageKey)}}get showBackButton(){return this.currentPageKey!==Ji.CATEGORIES}}class Fne{constructor(t){this.appClient=t}onBackClick(t){switch(t.currentPageKey){case Ji.CATEGORIES:throw new Error;case Ji.DESTINATIONS:this.reset(t);break;case Ji.ROUTES:t.currentPageKey=Ji.DESTINATIONS,t.selectedDestination=void 0,t.routes=[],t.selectedRoute=void 0;break;default:throw new fu(t.currentPageKey)}}onDestinationTypeClick(t,r){t.selectedDestinationType=r,t.currentPageKey=Ji.DESTINATIONS,t.isLoading=!0,this.appClient.search.query({type:r,scope:dB.NEARBY}).then(gn(n=>{t.destinations=n,t.selectedDestination=void 0})).finally(gn(()=>t.isLoading=!1))}onDestinationHighlight(t,r){var n;t.selectedDestination=r.nodeUid===((n=t.selectedDestination)==null?void 0:n.nodeUid)?void 0:r}onDestinationGoClick(t,r){console.log("go",r),t.selectedDestination=r}onDestinationRoutesClick(t,r){console.log("routes",r),t.currentPageKey=Ji.ROUTES,t.isLoading=!0,this.appClient.previewRoutes.query({toNodeUid:r.nodeUid}).then(gn(n=>{t.isLoading=!1,t.routes=n,t.selectedRoute=t.routes[0]}))}onRouteHighlight(t,r){console.log("highlight route",r),t.selectedRoute=r}onRouteGoClick(t,r){console.log("go route",r),t.selectedRoute=r}reset(t){console.log("nav sheet reset"),t.currentPageKey=M2.currentPageKey,t.isLoading=!1,t.selectedDestinationType=void 0,t.destinations=[],t.selectedDestination=void 0,t.routes=[],t.selectedRoute=void 0}}function Nne({appClient:e}){const t=new Bne,r=new Fne(e),{CurrentNavPage:n}=jne({store:t,controller:r});return{NavSheet:i=>H.jsx(Vne,{store:t,onBackClick:gn(()=>r.onBackClick(t)),onCloseClick:i.onCloseClick,children:H.jsx(n,{onDestinationGoClick:i.onDestinationGoClick,onRouteGoClick:i.onRouteGoClick})}),store:t,controller:r}}function jne(e){const{store:t,controller:r}=e,n=()=>H.jsx(Dne,{onClick:gn(h=>r.onDestinationTypeClick(t,h))}),i=h=>H.jsx(Ene,{store:t,onDestinationHighlight:gn(s=>r.onDestinationHighlight(t,s)),onDestinationRoutesClick:gn(s=>r.onDestinationRoutesClick(t,s)),onDestinationGoClick:gn(s=>{r.onDestinationGoClick(t,s),h.onDestinationGoClick()})}),l=h=>H.jsx(zne,{store:t,onRouteHighlight:gn(s=>r.onRouteHighlight(t,s)),onRouteGoClick:gn(s=>{r.onRouteGoClick(t,s),h.onRouteGoClick()})});return{CurrentNavPage:_o(h=>{switch(console.log("render current nave pag",t.currentPageKey),t.currentPageKey){case Ji.CATEGORIES:return H.jsx(n,{});case Ji.DESTINATIONS:return H.jsx(i,{onDestinationGoClick:h.onDestinationGoClick});case Ji.ROUTES:return H.jsx(l,{onRouteGoClick:h.onRouteGoClick});default:throw new fu(t.currentPageKey)}})}}const Vne=e=>H.jsx(kb,{variant:"outlined",sx:{p:2,borderRadius:12,height:"100%"},children:H.jsxs(yo,{gap:2,height:"100%",overflow:"hidden",children:[H.jsx(Une,{store:e.store,onBackClick:e.onBackClick,onCloseClick:e.onCloseClick}),H.jsx(Sb,{}),H.jsx(rc,{overflow:"auto",display:"flex",justifyContent:"center",sx:{m:-2,p:2},children:e.children})]})}),Une=_o(e=>H.jsxs(yo,{gap:1,direction:"row",alignItems:"center",children:[H.jsx(RT,{in:e.store.showBackButton,orientation:"horizontal",children:H.jsx(Qc,{onClick:e.onBackClick,children:H.jsx(SY,{})})}),H.jsx(Qn,{flexGrow:1,level:"title-lg",fontSize:"xl",children:e.store.title}),H.jsx(Qc,{onClick:e.onCloseClick,children:H.jsx(PY,{})})]}));function Hne({appClient:e,transitionDurationMs:t}){const r=new vne,n=new yne,{NavSheet:i,controller:l,store:h}=Nne({appClient:e}),s=gn(()=>{n.hideNavSheet(r),Kne(t).then(gn(()=>l.reset(h))),h.destinations=[]}),m=()=>H.jsx(i,{onCloseClick:s,onDestinationGoClick:()=>{const Z=ln(h.selectedDestination).nodeUid;e.previewRoutes.query({toNodeUid:Z}).then(gn(([z])=>{z||console.warn("could not find route to",Z),n.setActiveRoute(r,z,e)})),s()},onRouteGoClick:gn(()=>{n.setActiveRoute(r,h.selectedRoute,e),s()})});h0(()=>r.activeRoute,Z=>n.renderActiveRoute(Z)),h0(()=>h.destinations.length>0,Z=>r.cameraMode=Z?Hl.FREE:Hl.FOLLOW),h0(()=>{if(!(h.destinations.length===0||h.currentPageKey!==Ji.DESTINATIONS))return h.destinations.map(Z=>Z.lonLat)},Z=>Z&&n.fitPoints(Z)),h0(()=>({routes:h.routes,selected:h.selectedRoute}),({routes:Z,selected:z})=>{[0,1].forEach(O=>{var L;return n.renderRoutePreview(Z[O],{index:O,highlight:(z==null?void 0:z.id)===((L=Z[O])==null?void 0:L.id)})}),Z.length===0&&!z&&n.renderActiveRoute(r.activeRoute)});const{Controls:y,controller:S,store:T}=wne({appStore:r}),I=()=>H.jsx(y,{onRecenterFabClick:gn(()=>n.setFollow(r)),onRouteFabClick:gn(()=>n.startRouteFlow(r)),onSearchFabClick:gn(()=>n.startRouteFlow(r))}),D=gn((Z,z)=>{n.onMapLoad(Z,z),n.startListening(r,e),S.startListening(T,e)}),F=()=>H.jsx(Wne,{store:h,onDestinationClick:gn(Z=>{h.selectedDestination=Z,l.onDestinationRoutesClick(h,Z)})}),V=()=>H.jsx(qne,{onLoad:D,onDragStart:gn(()=>n.onMapDragStart(r)),Destinations:F});return{App:()=>H.jsx(Gne,{store:r,SlippyMap:V,NavSheet:m,Controls:I})}}const Gne=e=>{console.log("render app");const{SlippyMap:t,NavSheet:r,Controls:n}=e;return H.jsxs(H.Fragment,{children:[H.jsx(t,{}),H.jsx(n,{}),H.jsx(Zne,{store:e.store,children:H.jsx(r,{})})]})},Wne=_o(e=>(console.log("render destinations",{highlighted:e.store.selectedDestination}),H.jsx(H.Fragment,{children:e.store.destinations.map((t,r)=>{var n,i,l;return H.jsx(zT,{longitude:t.lonLat[0],latitude:t.lonLat[1],style:{zIndex:((n=e.store.selectedDestination)==null?void 0:n.nodeUid)===t.nodeUid?e.store.destinations.length:"auto"},children:H.jsx(If,{size:((i=e.store.selectedDestination)==null?void 0:i.nodeUid)===t.nodeUid?"lg":"md",onClick:()=>e.onDestinationClick(t),sx:{width:"1em",height:"1em",border:1,backgroundColor:e.store.selectedDestination==null||e.store.selectedDestination.nodeUid===t.nodeUid?"primary":"#aaa",display:e.store.currentPageKey===Ji.DESTINATIONS||((l=e.store.selectedDestination)==null?void 0:l.nodeUid)===t.nodeUid?void 0:"none"},children:r+1})},t.nodeUid)})}))),qne=e=>{console.log("render slippy map");const{Destinations:t}=e,r=R.useRef(null),n=R.useRef(null);return H.jsxs(MT,{ref:r,onLoad:()=>e.onLoad(ln(r.current),ln(n.current)),onDragStart:()=>e.onDragStart(),onZoomStart:i=>{i.originalEvent&&e.onDragStart()},style:{position:"absolute",top:0,left:0,width:"100vw",height:"100vh"},minZoom:4,maxZoom:15,maxBounds:[[-145,21],[-84,54]],mapStyle:FT,children:[H.jsx(BT,{}),H.jsx(B_,{game:"ats"}),H.jsx(F_,{game:"ats"}),H.jsx(eu,{id:"activeRoute",type:"geojson",data:{type:"FeatureCollection",features:[]},children:H.jsx(en,{id:"activeRouteLayer",type:"line",paint:{"line-color":"#f00","line-width":5,"line-opacity":1}})}),Array.from({length:2},(i,l)=>H.jsx(eu,{id:`previewRoute-${l}`,type:"geojson",data:{type:"FeatureCollection",features:[]},children:H.jsx(en,{id:`previewRouteLayer-${l}`,type:"line",paint:{"line-color":"#f00","line-width":5,"line-opacity":1}})},`previewRoute-${l}`)),H.jsx(t,{}),H.jsx(zT,{ref:n,longitude:0,latitude:0,pitchAlignment:"map",rotationAlignment:"map",children:H.jsx(rc,{sx:{width:64,height:64,display:"flex",justifyContent:"center",alignItems:"center",background:"rgba(255,255,255,0.8)",borderRadius:"50%",boxShadow:"0 1px 1px 1px rgba(128,128,128,.2)"},children:H.jsx(OY,{sx:{transform:"scale(4)",fill:"#09f"}})})})]})},Zne=_o(e=>H.jsx(L5,{in:e.store.showNavSheet,direction:"right",children:H.jsx(rc,{padding:1,height:"100vh",width:"42vw",sx:{position:"absolute",top:0,left:0,zIndex:999},children:e.children})})),Kne=e=>new Promise(t=>setTimeout(t,e));var pB,dD=Cd;pB=dD.createRoot,dD.hydrateRoot;var YT={};Object.defineProperty(YT,"__esModule",{value:!0});YT.parse=rie;YT.serialize=nie;const Xne=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Yne=/^[\u0021-\u003A\u003C-\u007E]*$/,Jne=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Qne=/^[\u0020-\u003A\u003D-\u007E]*$/,eie=Object.prototype.toString,tie=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function rie(e,t){const r=new tie,n=e.length;if(n<2)return r;const i=(t==null?void 0:t.decode)||iie;let l=0;do{const h=e.indexOf("=",l);if(h===-1)break;const s=e.indexOf(";",l),m=s===-1?n:s;if(h>m){l=e.lastIndexOf(";",h-1)+1;continue}const y=hD(e,l,h),S=fD(e,h,y),T=e.slice(y,S);if(r[T]===void 0){let I=hD(e,h+1,m),D=fD(e,m,I);const F=i(e.slice(I,D));r[T]=F}l=m+1}while(l<n);return r}function hD(e,t,r){do{const n=e.charCodeAt(t);if(n!==32&&n!==9)return t}while(++t<r);return r}function fD(e,t,r){for(;t>r;){const n=e.charCodeAt(--t);if(n!==32&&n!==9)return t+1}return r}function nie(e,t,r){const n=(r==null?void 0:r.encode)||encodeURIComponent;if(!Xne.test(e))throw new TypeError(`argument name is invalid: ${e}`);const i=n(t);if(!Yne.test(i))throw new TypeError(`argument val is invalid: ${t}`);let l=e+"="+i;if(!r)return l;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);l+="; Max-Age="+r.maxAge}if(r.domain){if(!Jne.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);l+="; Domain="+r.domain}if(r.path){if(!Qne.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);l+="; Path="+r.path}if(r.expires){if(!oie(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);l+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(l+="; HttpOnly"),r.secure&&(l+="; Secure"),r.partitioned&&(l+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return l}function iie(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function oie(e){return eie.call(e)==="[object Date]"}/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var pD="popstate";function aie(e={}){function t(n,i){let{pathname:l,search:h,hash:s}=n.location;return Vg("",{pathname:l,search:h,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:au(i)}return lie(t,r,null,e)}function Hr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function sie(){return Math.random().toString(36).substring(2,10)}function mD(e,t){return{usr:e.state,key:e.key,idx:t}}function Vg(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?gu(t):t,state:r,key:t&&t.key||n||sie()}}function au({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function gu(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function lie(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:l=!1}=n,h=i.history,s="POP",m=null,y=S();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function S(){return(h.state||{idx:null}).idx}function T(){s="POP";let Z=S(),z=Z==null?null:Z-y;y=Z,m&&m({action:s,location:V.location,delta:z})}function I(Z,z){s="PUSH";let O=Vg(V.location,Z,z);y=S()+1;let L=mD(O,y),te=V.createHref(O);try{h.pushState(L,"",te)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(te)}l&&m&&m({action:s,location:V.location,delta:1})}function D(Z,z){s="REPLACE";let O=Vg(V.location,Z,z);y=S();let L=mD(O,y),te=V.createHref(O);h.replaceState(L,"",te),l&&m&&m({action:s,location:V.location,delta:0})}function F(Z){let z=i.location.origin!=="null"?i.location.origin:i.location.href,O=typeof Z=="string"?Z:au(Z);return O=O.replace(/ $/,"%20"),Hr(z,`No window.location.(origin|href) available to create URL for href: ${O}`),new URL(O,z)}let V={get action(){return s},get location(){return e(i,h)},listen(Z){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(pD,T),m=Z,()=>{i.removeEventListener(pD,T),m=null}},createHref(Z){return t(i,Z)},createURL:F,encodeLocation(Z){let z=F(Z);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:I,replace:D,go(Z){return h.go(Z)}};return V}var cie=new Set(["lazy","caseSensitive","path","id","index","children"]);function uie(e){return e.index===!0}function tx(e,t,r=[],n={}){return e.map((i,l)=>{let h=[...r,String(l)],s=typeof i.id=="string"?i.id:h.join("-");if(Hr(i.index!==!0||!i.children,"Cannot specify children on an index route"),Hr(!n[s],`Found a route id collision on id "${s}".  Route id's must be globally unique within Data Router usages`),uie(i)){let m={...i,...t(i),id:s};return n[s]=m,m}else{let m={...i,...t(i),id:s,children:void 0};return n[s]=m,i.children&&(m.children=tx(i.children,t,h,n)),m}})}function $c(e,t,r="/"){return H0(e,t,r,!1)}function H0(e,t,r,n){let i=typeof t=="string"?gu(t):t,l=As(i.pathname||"/",r);if(l==null)return null;let h=mB(e);hie(h);let s=null;for(let m=0;s==null&&m<h.length;++m){let y=Sie(l);s=bie(h[m],y,n)}return s}function die(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function mB(e,t=[],r=[],n=""){let i=(l,h,s)=>{let m={relativePath:s===void 0?l.path||"":s,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};m.relativePath.startsWith("/")&&(Hr(m.relativePath.startsWith(n),`Absolute route path "${m.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(n.length));let y=cl([n,m.relativePath]),S=r.concat(m);l.children&&l.children.length>0&&(Hr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),mB(l.children,t,S,y)),!(l.path==null&&!l.index)&&t.push({path:y,score:_ie(y,l.index),routesMeta:S})};return e.forEach((l,h)=>{var s;if(l.path===""||!((s=l.path)!=null&&s.includes("?")))i(l,h);else for(let m of gB(l.path))i(l,h,m)}),t}function gB(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return i?[l,""]:[l];let h=gB(n.join("/")),s=[];return s.push(...h.map(m=>m===""?l:[l,m].join("/"))),i&&s.push(...h),s.map(m=>e.startsWith("/")&&m===""?"/":m)}function hie(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:xie(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var fie=/^:[\w-]+$/,pie=3,mie=2,gie=1,vie=10,yie=-2,gD=e=>e==="*";function _ie(e,t){let r=e.split("/"),n=r.length;return r.some(gD)&&(n+=yie),t&&(n+=mie),r.filter(i=>!gD(i)).reduce((i,l)=>i+(fie.test(l)?pie:l===""?gie:vie),n)}function xie(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function bie(e,t,r=!1){let{routesMeta:n}=e,i={},l="/",h=[];for(let s=0;s<n.length;++s){let m=n[s],y=s===n.length-1,S=l==="/"?t:t.slice(l.length)||"/",T=rx({path:m.relativePath,caseSensitive:m.caseSensitive,end:y},S),I=m.route;if(!T&&y&&r&&!n[n.length-1].route.index&&(T=rx({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},S)),!T)return null;Object.assign(i,T.params),h.push({params:i,pathname:cl([l,T.pathname]),pathnameBase:Tie(cl([l,T.pathnameBase])),route:I}),T.pathnameBase!=="/"&&(l=cl([l,T.pathnameBase]))}return h}function rx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=wie(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let l=i[0],h=l.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((y,{paramName:S,isOptional:T},I)=>{if(S==="*"){let F=s[I]||"";h=l.slice(0,l.length-F.length).replace(/(.)\/+$/,"$1")}const D=s[I];return T&&!D?y[S]=void 0:y[S]=(D||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:e}}function wie(e,t=!1,r=!0){Bi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,s,m)=>(n.push({paramName:s,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function Sie(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bi(!1,`The URL path "${e}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function As(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Cie(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?gu(e):e;return{pathname:r?r.startsWith("/")?r:kie(r,t):t,search:Eie(n),hash:Iie(i)}}function kie(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Qw(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vB(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function JT(e){let t=vB(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function QT(e,t,r,n=!1){let i;typeof e=="string"?i=gu(e):(i={...e},Hr(!i.pathname||!i.pathname.includes("?"),Qw("?","pathname","search",i)),Hr(!i.pathname||!i.pathname.includes("#"),Qw("#","pathname","hash",i)),Hr(!i.search||!i.search.includes("#"),Qw("#","search","hash",i)));let l=e===""||i.pathname==="",h=l?"/":i.pathname,s;if(h==null)s=r;else{let T=t.length-1;if(!n&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),T-=1;i.pathname=I.join("/")}s=T>=0?t[T]:"/"}let m=Cie(i,s),y=h&&h!=="/"&&h.endsWith("/"),S=(l||h===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(y||S)&&(m.pathname+="/"),m}var cl=e=>e.join("/").replace(/\/\/+/g,"/"),Tie=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Eie=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Iie=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,nx=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function jb(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var yB=["POST","PUT","PATCH","DELETE"],Pie=new Set(yB),Aie=["GET",...yB],Rie=new Set(Aie),Die=new Set([301,302,303,307,308]),Mie=new Set([307,308]),eS={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},zie={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xm={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},eE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lie=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),_B="remix-router-transitions",xB=Symbol("ResetLoaderData");function Oie(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";Hr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=e.mapRouteProperties||Lie,i={},l=tx(e.routes,n,void 0,i),h,s=e.basename||"/",m=e.dataStrategy||jie,y=e.patchRoutesOnNavigation,S={...e.future},T=null,I=new Set,D=null,F=null,V=null,Z=e.hydrationData!=null,z=$c(l,e.history.location,s),O=null;if(z==null&&!y){let N=Oa(404,{pathname:e.history.location.pathname}),{matches:X,route:re}=ED(l);z=X,O={[re.id]:N}}z&&!e.hydrationData&&mr(z,l,e.history.location.pathname).active&&(z=null);let L;if(z)if(z.some(N=>N.route.lazy))L=!1;else if(!z.some(N=>N.route.loader))L=!0;else{let N=e.hydrationData?e.hydrationData.loaderData:null,X=e.hydrationData?e.hydrationData.errors:null;if(X){let re=z.findIndex(he=>X[he.route.id]!==void 0);L=z.slice(0,re+1).every(he=>!L2(he.route,N,X))}else L=z.every(re=>!L2(re.route,N,X))}else{L=!1,z=[];let N=mr(null,l,e.history.location.pathname);N.active&&N.matches&&(z=N.matches)}let te,j={historyAction:e.history.action,location:e.history.location,matches:z,initialized:L,navigation:eS,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||O,fetchers:new Map,blockers:new Map},$="POP",J=!1,ie,xe=!1,ge=new Map,we=null,Te=!1,Pe=!1,We=new Set,De=new Map,Se=0,Fe=-1,Ce=new Map,Ne=new Set,Ye=new Map,at=new Map,st=new Set,Dt=new Map,St,$t=null;function Ct(){if(T=e.history.listen(({action:N,location:X,delta:re})=>{if(St){St(),St=void 0;return}Bi(Dt.size===0||re!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let he=Xe({currentLocation:j.location,nextLocation:X,historyAction:N});if(he&&re!=null){let pe=new Promise(se=>{St=se});e.history.go(re*-1),Ve(he,{state:"blocked",location:X,proceed(){Ve(he,{state:"proceeding",proceed:void 0,reset:void 0,location:X}),pe.then(()=>e.history.go(re))},reset(){let se=new Map(j.blockers);se.set(he,xm),rt({blockers:se})}});return}return wr(N,X)}),r){Jie(t,ge);let N=()=>Qie(t,ge);t.addEventListener("pagehide",N),we=()=>t.removeEventListener("pagehide",N)}return j.initialized||wr("POP",j.location,{initialHydration:!0}),te}function it(){T&&T(),we&&we(),I.clear(),ie&&ie.abort(),j.fetchers.forEach((N,X)=>fr(X)),j.blockers.forEach((N,X)=>Ee(X))}function Ze(N){return I.add(N),()=>I.delete(N)}function rt(N,X={}){j={...j,...N};let re=[],he=[];j.fetchers.forEach((pe,se)=>{pe.state==="idle"&&(st.has(se)?re.push(se):he.push(se))}),[...I].forEach(pe=>pe(j,{deletedFetchers:re,viewTransitionOpts:X.viewTransitionOpts,flushSync:X.flushSync===!0})),re.forEach(pe=>fr(pe)),he.forEach(pe=>j.fetchers.delete(pe))}function pt(N,X,{flushSync:re}={}){var Re,ot;let he=j.actionData!=null&&j.navigation.formMethod!=null&&ms(j.navigation.formMethod)&&j.navigation.state==="loading"&&((Re=N.state)==null?void 0:Re._isRedirect)!==!0,pe;X.actionData?Object.keys(X.actionData).length>0?pe=X.actionData:pe=null:he?pe=j.actionData:pe=null;let se=X.loaderData?kD(j.loaderData,X.loaderData,X.matches||[],X.errors):j.loaderData,_e=j.blockers;_e.size>0&&(_e=new Map(_e),_e.forEach((dt,ut)=>_e.set(ut,xm)));let Ae=J===!0||j.navigation.formMethod!=null&&ms(j.navigation.formMethod)&&((ot=N.state)==null?void 0:ot._isRedirect)!==!0;h&&(l=h,h=void 0),Te||$==="POP"||($==="PUSH"?e.history.push(N,N.state):$==="REPLACE"&&e.history.replace(N,N.state));let Le;if($==="POP"){let dt=ge.get(j.location.pathname);dt&&dt.has(N.pathname)?Le={currentLocation:j.location,nextLocation:N}:ge.has(N.pathname)&&(Le={currentLocation:N,nextLocation:j.location})}else if(xe){let dt=ge.get(j.location.pathname);dt?dt.add(N.pathname):(dt=new Set([N.pathname]),ge.set(j.location.pathname,dt)),Le={currentLocation:j.location,nextLocation:N}}rt({...X,actionData:pe,loaderData:se,historyAction:$,location:N,initialized:!0,navigation:eS,revalidation:"idle",restoreScrollPosition:Bt(N,X.matches||j.matches),preventScrollReset:Ae,blockers:_e},{viewTransitionOpts:Le,flushSync:re===!0}),$="POP",J=!1,xe=!1,Te=!1,Pe=!1,$t==null||$t.resolve(),$t=null}async function sr(N,X){if(typeof N=="number"){e.history.go(N);return}let re=z2(j.location,j.matches,s,N,X==null?void 0:X.fromRouteId,X==null?void 0:X.relative),{path:he,submission:pe,error:se}=vD(!1,re,X),_e=j.location,Ae=Vg(j.location,he,X&&X.state);Ae={...Ae,...e.history.encodeLocation(Ae)};let Le=X&&X.replace!=null?X.replace:void 0,Re="PUSH";Le===!0?Re="REPLACE":Le===!1||pe!=null&&ms(pe.formMethod)&&pe.formAction===j.location.pathname+j.location.search&&(Re="REPLACE");let ot=X&&"preventScrollReset"in X?X.preventScrollReset===!0:void 0,dt=(X&&X.flushSync)===!0,ut=Xe({currentLocation:_e,nextLocation:Ae,historyAction:Re});if(ut){Ve(ut,{state:"blocked",location:Ae,proceed(){Ve(ut,{state:"proceeding",proceed:void 0,reset:void 0,location:Ae}),sr(N,X)},reset(){let It=new Map(j.blockers);It.set(ut,xm),rt({blockers:It})}});return}await wr(Re,Ae,{submission:pe,pendingError:se,preventScrollReset:ot,replace:X&&X.replace,enableViewTransition:X&&X.viewTransition,flushSync:dt})}function rr(){$t||($t=eoe()),or(),rt({revalidation:"loading"});let N=$t.promise;return j.navigation.state==="submitting"?N:j.navigation.state==="idle"?(wr(j.historyAction,j.location,{startUninterruptedRevalidation:!0}),N):(wr($||j.historyAction,j.navigation.location,{overrideNavigation:j.navigation,enableViewTransition:xe===!0}),N)}async function wr(N,X,re){ie&&ie.abort(),ie=null,$=N,Te=(re&&re.startUninterruptedRevalidation)===!0,vr(j.location,j.matches),J=(re&&re.preventScrollReset)===!0,xe=(re&&re.enableViewTransition)===!0;let he=h||l,pe=re&&re.overrideNavigation,se=$c(he,X,s),_e=(re&&re.flushSync)===!0,Ae=mr(se,he,X.pathname);if(Ae.active&&Ae.matches&&(se=Ae.matches),!se){let{error:Oe,notFoundMatches:$e,route:tt}=Tt(X.pathname);pt(X,{matches:$e,loaderData:{},errors:{[tt.id]:Oe}},{flushSync:_e});return}if(j.initialized&&!Pe&&qie(j.location,X)&&!(re&&re.submission&&ms(re.submission.formMethod))){pt(X,{matches:se},{flushSync:_e});return}ie=new AbortController;let Le=Ah(e.history,X,ie.signal,re&&re.submission),Re;if(re&&re.pendingError)Re=[Ku(se).route.id,{type:"error",error:re.pendingError}];else if(re&&re.submission&&ms(re.submission.formMethod)){let Oe=await Lr(Le,X,re.submission,se,Ae.active,{replace:re.replace,flushSync:_e});if(Oe.shortCircuited)return;if(Oe.pendingActionResult){let[$e,tt]=Oe.pendingActionResult;if(ua(tt)&&jb(tt.error)&&tt.error.status===404){ie=null,pt(X,{matches:Oe.matches,loaderData:{},errors:{[$e]:tt.error}});return}}se=Oe.matches||se,Re=Oe.pendingActionResult,pe=tS(X,re.submission),_e=!1,Ae.active=!1,Le=Ah(e.history,Le.url,Le.signal)}let{shortCircuited:ot,matches:dt,loaderData:ut,errors:It}=await nr(Le,X,se,Ae.active,pe,re&&re.submission,re&&re.fetcherSubmission,re&&re.replace,re&&re.initialHydration===!0,_e,Re);ot||(ie=null,pt(X,{matches:dt||se,...TD(Re),loaderData:ut,errors:It}))}async function Lr(N,X,re,he,pe,se={}){or();let _e=Xie(X,re);if(rt({navigation:_e},{flushSync:se.flushSync===!0}),pe){let Re=await ue(he,X.pathname,N.signal);if(Re.type==="aborted")return{shortCircuited:!0};if(Re.type==="error"){let ot=Ku(Re.partialMatches).route.id;return{matches:Re.partialMatches,pendingActionResult:[ot,{type:"error",error:Re.error}]}}else if(Re.matches)he=Re.matches;else{let{notFoundMatches:ot,error:dt,route:ut}=Tt(X.pathname);return{matches:ot,pendingActionResult:[ut.id,{type:"error",error:dt}]}}}let Ae,Le=Lm(he,X);if(!Le.route.action&&!Le.route.lazy)Ae={type:"error",error:Oa(405,{method:N.method,pathname:X.pathname,routeId:Le.route.id})};else if(Ae=(await Tr("action",j,N,[Le],he,null))[Le.route.id],N.signal.aborted)return{shortCircuited:!0};if(Qu(Ae)){let Re;return se&&se.replace!=null?Re=se.replace:Re=wD(Ae.response.headers.get("Location"),new URL(N.url),s)===j.location.pathname+j.location.search,await xr(N,Ae,!0,{submission:re,replace:Re}),{shortCircuited:!0}}if(ua(Ae)){let Re=Ku(he,Le.route.id);return(se&&se.replace)!==!0&&($="PUSH"),{matches:he,pendingActionResult:[Re.route.id,Ae]}}return{matches:he,pendingActionResult:[Le.route.id,Ae]}}async function nr(N,X,re,he,pe,se,_e,Ae,Le,Re,ot){let dt=pe||tS(X,se),ut=se||_e||PD(dt),It=!Te&&!Le;if(he){if(It){let ri=Et(ot);rt({navigation:dt,...ri!==void 0?{actionData:ri}:{}},{flushSync:Re})}let Vr=await ue(re,X.pathname,N.signal);if(Vr.type==="aborted")return{shortCircuited:!0};if(Vr.type==="error"){let ri=Ku(Vr.partialMatches).route.id;return{matches:Vr.partialMatches,loaderData:{},errors:{[ri]:Vr.error}}}else if(Vr.matches)re=Vr.matches;else{let{error:ri,notFoundMatches:Or,route:No}=Tt(X.pathname);return{matches:Or,loaderData:{},errors:{[No.id]:ri}}}}let Oe=h||l,[$e,tt]=_D(e.history,j,re,ut,X,Le===!0,Pe,We,st,Ye,Ne,Oe,s,ot);if(Fe=++Se,$e.length===0&&tt.length===0){let Vr=je();return pt(X,{matches:re,loaderData:{},errors:ot&&ua(ot[1])?{[ot[0]]:ot[1].error}:null,...TD(ot),...Vr?{fetchers:new Map(j.fetchers)}:{}},{flushSync:Re}),{shortCircuited:!0}}if(It){let Vr={};if(!he){Vr.navigation=dt;let ri=Et(ot);ri!==void 0&&(Vr.actionData=ri)}tt.length>0&&(Vr.fetchers=hr(tt)),rt(Vr,{flushSync:Re})}tt.forEach(Vr=>{dr(Vr.key),Vr.controller&&De.set(Vr.key,Vr.controller)});let ht=()=>tt.forEach(Vr=>dr(Vr.key));ie&&ie.signal.addEventListener("abort",ht);let{loaderResults:zt,fetcherResults:pr}=await Jt(j,re,$e,tt,N);if(N.signal.aborted)return{shortCircuited:!0};ie&&ie.signal.removeEventListener("abort",ht),tt.forEach(Vr=>De.delete(Vr.key));let ir=p0(zt);if(ir)return await xr(N,ir.result,!0,{replace:Ae}),{shortCircuited:!0};if(ir=p0(pr),ir)return Ne.add(ir.key),await xr(N,ir.result,!0,{replace:Ae}),{shortCircuited:!0};let{loaderData:jr,errors:pn}=CD(j,re,zt,ot,tt,pr);Le&&j.errors&&(pn={...j.errors,...pn});let Fn=je(),zs=kt(Fe),So=Fn||zs||tt.length>0;return{matches:re,loaderData:jr,errors:pn,...So?{fetchers:new Map(j.fetchers)}:{}}}function Et(N){if(N&&!ua(N[1]))return{[N[0]]:N[1].data};if(j.actionData)return Object.keys(j.actionData).length===0?null:j.actionData}function hr(N){return N.forEach(X=>{let re=j.fetchers.get(X.key),he=bm(void 0,re?re.data:void 0);j.fetchers.set(X.key,he)}),new Map(j.fetchers)}async function Gt(N,X,re,he){dr(N);let pe=(he&&he.flushSync)===!0,se=h||l,_e=z2(j.location,j.matches,s,re,X,he==null?void 0:he.relative),Ae=$c(se,_e,s),Le=mr(Ae,se,_e);if(Le.active&&Le.matches&&(Ae=Le.matches),!Ae){Mr(N,X,Oa(404,{pathname:_e}),{flushSync:pe});return}let{path:Re,submission:ot,error:dt}=vD(!0,_e,he);if(dt){Mr(N,X,dt,{flushSync:pe});return}let ut=Lm(Ae,Re),It=(he&&he.preventScrollReset)===!0;if(ot&&ms(ot.formMethod)){await Dr(N,X,Re,ut,Ae,Le.active,pe,It,ot);return}Ye.set(N,{routeId:X,path:Re}),await He(N,X,Re,ut,Ae,Le.active,pe,It,ot)}async function Dr(N,X,re,he,pe,se,_e,Ae,Le){or(),Ye.delete(N);function Re(Wt){if(!Wt.route.action&&!Wt.route.lazy){let Ur=Oa(405,{method:Le.formMethod,pathname:re,routeId:X});return Mr(N,X,Ur,{flushSync:_e}),!0}return!1}if(!se&&Re(he))return;let ot=j.fetchers.get(N);Cr(N,Yie(Le,ot),{flushSync:_e});let dt=new AbortController,ut=Ah(e.history,re,dt.signal,Le);if(se){let Wt=await ue(pe,re,ut.signal);if(Wt.type==="aborted")return;if(Wt.type==="error"){Mr(N,X,Wt.error,{flushSync:_e});return}else if(Wt.matches){if(pe=Wt.matches,he=Lm(pe,re),Re(he))return}else{Mr(N,X,Oa(404,{pathname:re}),{flushSync:_e});return}}De.set(N,dt);let It=Se,$e=(await Tr("action",j,ut,[he],pe,N))[he.route.id];if(ut.signal.aborted){De.get(N)===dt&&De.delete(N);return}if(st.has(N)){if(Qu($e)||ua($e)){Cr(N,Rc(void 0));return}}else{if(Qu($e))if(De.delete(N),Fe>It){Cr(N,Rc(void 0));return}else return Ne.add(N),Cr(N,bm(Le)),xr(ut,$e,!1,{fetcherSubmission:Le,preventScrollReset:Ae});if(ua($e)){Mr(N,X,$e.error);return}}let tt=j.navigation.location||j.location,ht=Ah(e.history,tt,dt.signal),zt=h||l,pr=j.navigation.state!=="idle"?$c(zt,j.navigation.location,s):j.matches;Hr(pr,"Didn't find any matches after fetcher action");let ir=++Se;Ce.set(N,ir);let jr=bm(Le,$e.data);j.fetchers.set(N,jr);let[pn,Fn]=_D(e.history,j,pr,Le,tt,!1,Pe,We,st,Ye,Ne,zt,s,[he.route.id,$e]);Fn.filter(Wt=>Wt.key!==N).forEach(Wt=>{let Ur=Wt.key,Wr=j.fetchers.get(Ur),Ni=bm(void 0,Wr?Wr.data:void 0);j.fetchers.set(Ur,Ni),dr(Ur),Wt.controller&&De.set(Ur,Wt.controller)}),rt({fetchers:new Map(j.fetchers)});let zs=()=>Fn.forEach(Wt=>dr(Wt.key));dt.signal.addEventListener("abort",zs);let{loaderResults:So,fetcherResults:Vr}=await Jt(j,pr,pn,Fn,ht);if(dt.signal.aborted)return;dt.signal.removeEventListener("abort",zs),Ce.delete(N),De.delete(N),Fn.forEach(Wt=>De.delete(Wt.key));let ri=p0(So);if(ri)return xr(ht,ri.result,!1,{preventScrollReset:Ae});if(ri=p0(Vr),ri)return Ne.add(ri.key),xr(ht,ri.result,!1,{preventScrollReset:Ae});let{loaderData:Or,errors:No}=CD(j,pr,So,void 0,Fn,Vr);if(j.fetchers.has(N)){let Wt=Rc($e.data);j.fetchers.set(N,Wt)}kt(ir),j.navigation.state==="loading"&&ir>Fe?(Hr($,"Expected pending action"),ie&&ie.abort(),pt(j.navigation.location,{matches:pr,loaderData:Or,errors:No,fetchers:new Map(j.fetchers)})):(rt({errors:No,loaderData:kD(j.loaderData,Or,pr,No),fetchers:new Map(j.fetchers)}),Pe=!1)}async function He(N,X,re,he,pe,se,_e,Ae,Le){let Re=j.fetchers.get(N);Cr(N,bm(Le,Re?Re.data:void 0),{flushSync:_e});let ot=new AbortController,dt=Ah(e.history,re,ot.signal);if(se){let $e=await ue(pe,re,dt.signal);if($e.type==="aborted")return;if($e.type==="error"){Mr(N,X,$e.error,{flushSync:_e});return}else if($e.matches)pe=$e.matches,he=Lm(pe,re);else{Mr(N,X,Oa(404,{pathname:re}),{flushSync:_e});return}}De.set(N,ot);let ut=Se,Oe=(await Tr("loader",j,dt,[he],pe,N))[he.route.id];if(De.get(N)===ot&&De.delete(N),!dt.signal.aborted){if(st.has(N)){Cr(N,Rc(void 0));return}if(Qu(Oe))if(Fe>ut){Cr(N,Rc(void 0));return}else{Ne.add(N),await xr(dt,Oe,!1,{preventScrollReset:Ae});return}if(ua(Oe)){Mr(N,X,Oe.error);return}Cr(N,Rc(Oe.data))}}async function xr(N,X,re,{submission:he,fetcherSubmission:pe,preventScrollReset:se,replace:_e}={}){X.response.headers.has("X-Remix-Revalidate")&&(Pe=!0);let Ae=X.response.headers.get("Location");Hr(Ae,"Expected a Location header on the redirect Response"),Ae=wD(Ae,new URL(N.url),s);let Le=Vg(j.location,Ae,{_isRedirect:!0});if(r){let Oe=!1;if(X.response.headers.has("X-Remix-Reload-Document"))Oe=!0;else if(eE.test(Ae)){const $e=e.history.createURL(Ae);Oe=$e.origin!==t.location.origin||As($e.pathname,s)==null}if(Oe){_e?t.location.replace(Ae):t.location.assign(Ae);return}}ie=null;let Re=_e===!0||X.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ot,formAction:dt,formEncType:ut}=j.navigation;!he&&!pe&&ot&&dt&&ut&&(he=PD(j.navigation));let It=he||pe;if(Mie.has(X.response.status)&&It&&ms(It.formMethod))await wr(Re,Le,{submission:{...It,formAction:Ae},preventScrollReset:se||J,enableViewTransition:re?xe:void 0});else{let Oe=tS(Le,he);await wr(Re,Le,{overrideNavigation:Oe,fetcherSubmission:pe,preventScrollReset:se||J,enableViewTransition:re?xe:void 0})}}async function Tr(N,X,re,he,pe,se){let _e,Ae={};try{_e=await Vie(m,N,X,re,he,pe,se,i,n)}catch(Le){return he.forEach(Re=>{Ae[Re.route.id]={type:"error",error:Le}}),Ae}for(let[Le,Re]of Object.entries(_e))if(Zie(Re)){let ot=Re.result;Ae[Le]={type:"redirect",response:Gie(ot,re,Le,pe,s)}}else Ae[Le]=await Hie(Re);return Ae}async function Jt(N,X,re,he,pe){let se=Tr("loader",N,pe,re,X,null),_e=Promise.all(he.map(async Re=>{if(Re.matches&&Re.match&&Re.controller){let dt=(await Tr("loader",N,Ah(e.history,Re.path,Re.controller.signal),[Re.match],Re.matches,Re.key))[Re.match.route.id];return{[Re.key]:dt}}else return Promise.resolve({[Re.key]:{type:"error",error:Oa(404,{pathname:Re.path})}})})),Ae=await se,Le=(await _e).reduce((Re,ot)=>Object.assign(Re,ot),{});return{loaderResults:Ae,fetcherResults:Le}}function or(){Pe=!0,Ye.forEach((N,X)=>{De.has(X)&&We.add(X),dr(X)})}function Cr(N,X,re={}){j.fetchers.set(N,X),rt({fetchers:new Map(j.fetchers)},{flushSync:(re&&re.flushSync)===!0})}function Mr(N,X,re,he={}){let pe=Ku(j.matches,X);fr(N),rt({errors:{[pe.route.id]:re},fetchers:new Map(j.fetchers)},{flushSync:(he&&he.flushSync)===!0})}function Sr(N){return at.set(N,(at.get(N)||0)+1),st.has(N)&&st.delete(N),j.fetchers.get(N)||zie}function fr(N){let X=j.fetchers.get(N);De.has(N)&&!(X&&X.state==="loading"&&Ce.has(N))&&dr(N),Ye.delete(N),Ce.delete(N),Ne.delete(N),st.delete(N),We.delete(N),j.fetchers.delete(N)}function Qt(N){let X=(at.get(N)||0)-1;X<=0?(at.delete(N),st.add(N)):at.set(N,X),rt({fetchers:new Map(j.fetchers)})}function dr(N){let X=De.get(N);X&&(X.abort(),De.delete(N))}function tn(N){for(let X of N){let re=Sr(X),he=Rc(re.data);j.fetchers.set(X,he)}}function je(){let N=[],X=!1;for(let re of Ne){let he=j.fetchers.get(re);Hr(he,`Expected fetcher: ${re}`),he.state==="loading"&&(Ne.delete(re),N.push(re),X=!0)}return tn(N),X}function kt(N){let X=[];for(let[re,he]of Ce)if(he<N){let pe=j.fetchers.get(re);Hr(pe,`Expected fetcher: ${re}`),pe.state==="loading"&&(dr(re),Ce.delete(re),X.push(re))}return tn(X),X.length>0}function bt(N,X){let re=j.blockers.get(N)||xm;return Dt.get(N)!==X&&Dt.set(N,X),re}function Ee(N){j.blockers.delete(N),Dt.delete(N)}function Ve(N,X){let re=j.blockers.get(N)||xm;Hr(re.state==="unblocked"&&X.state==="blocked"||re.state==="blocked"&&X.state==="blocked"||re.state==="blocked"&&X.state==="proceeding"||re.state==="blocked"&&X.state==="unblocked"||re.state==="proceeding"&&X.state==="unblocked",`Invalid blocker state transition: ${re.state} -> ${X.state}`);let he=new Map(j.blockers);he.set(N,X),rt({blockers:he})}function Xe({currentLocation:N,nextLocation:X,historyAction:re}){if(Dt.size===0)return;Dt.size>1&&Bi(!1,"A router only supports one blocker at a time");let he=Array.from(Dt.entries()),[pe,se]=he[he.length-1],_e=j.blockers.get(pe);if(!(_e&&_e.state==="proceeding")&&se({currentLocation:N,nextLocation:X,historyAction:re}))return pe}function Tt(N){let X=Oa(404,{pathname:N}),re=h||l,{matches:he,route:pe}=ED(re);return{notFoundMatches:he,route:pe,error:X}}function gt(N,X,re){if(D=N,V=X,F=re||null,!Z&&j.navigation===eS){Z=!0;let he=Bt(j.location,j.matches);he!=null&&rt({restoreScrollPosition:he})}return()=>{D=null,V=null,F=null}}function Rt(N,X){return F&&F(N,X.map(he=>die(he,j.loaderData)))||N.key}function vr(N,X){if(D&&V){let re=Rt(N,X);D[re]=V()}}function Bt(N,X){if(D){let re=Rt(N,X),he=D[re];if(typeof he=="number")return he}return null}function mr(N,X,re){if(y)if(N){if(Object.keys(N[0].params).length>0)return{active:!0,matches:H0(X,re,s,!0)}}else return{active:!0,matches:H0(X,re,s,!0)||[]};return{active:!1,matches:null}}async function ue(N,X,re){if(!y)return{type:"success",matches:N};let he=N;for(;;){let pe=h==null,se=h||l,_e=i;try{await y({path:X,matches:he,patch:(Re,ot)=>{re.aborted||bD(Re,ot,se,_e,n)}})}catch(Re){return{type:"error",error:Re,partialMatches:he}}finally{pe&&!re.aborted&&(l=[...l])}if(re.aborted)return{type:"aborted"};let Ae=$c(se,X,s);if(Ae)return{type:"success",matches:Ae};let Le=H0(se,X,s,!0);if(!Le||he.length===Le.length&&he.every((Re,ot)=>Re.route.id===Le[ot].route.id))return{type:"success",matches:null};he=Le}}function Y(N){i={},h=tx(N,n,void 0,i)}function Q(N,X){let re=h==null;bD(N,X,h||l,i,n),re&&(l=[...l],rt({}))}return te={get basename(){return s},get future(){return S},get state(){return j},get routes(){return l},get window(){return t},initialize:Ct,subscribe:Ze,enableScrollRestoration:gt,navigate:sr,fetch:Gt,revalidate:rr,createHref:N=>e.history.createHref(N),encodeLocation:N=>e.history.encodeLocation(N),getFetcher:Sr,deleteFetcher:Qt,dispose:it,getBlocker:bt,deleteBlocker:Ee,patchRoutes:Q,_internalFetchControllers:De,_internalSetRoutes:Y},te}function $ie(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function z2(e,t,r,n,i,l){let h,s;if(i){h=[];for(let y of t)if(h.push(y),y.route.id===i){s=y;break}}else h=t,s=t[t.length-1];let m=QT(n||".",JT(h),As(e.pathname,r)||e.pathname,l==="path");if(n==null&&(m.search=e.search,m.hash=e.hash),(n==null||n===""||n===".")&&s){let y=tE(m.search);if(s.route.index&&!y)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!s.route.index&&y){let S=new URLSearchParams(m.search),T=S.getAll("index");S.delete("index"),T.filter(D=>D).forEach(D=>S.append("index",D));let I=S.toString();m.search=I?`?${I}`:""}}return r!=="/"&&(m.pathname=m.pathname==="/"?r:cl([r,m.pathname])),au(m)}function vD(e,t,r){if(!r||!$ie(r))return{path:t};if(r.formMethod&&!Kie(r.formMethod))return{path:t,error:Oa(405,{method:r.formMethod})};let n=()=>({path:t,error:Oa(400,{type:"invalid-body"})}),l=(r.formMethod||"get").toUpperCase(),h=wB(t);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ms(l))return n();let T=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((I,[D,F])=>`${I}${D}=${F}
`,""):String(r.body);return{path:t,submission:{formMethod:l,formAction:h,formEncType:r.formEncType,formData:void 0,json:void 0,text:T}}}else if(r.formEncType==="application/json"){if(!ms(l))return n();try{let T=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:t,submission:{formMethod:l,formAction:h,formEncType:r.formEncType,formData:void 0,json:T,text:void 0}}}catch{return n()}}}Hr(typeof FormData=="function","FormData is not available in this environment");let s,m;if(r.formData)s=O2(r.formData),m=r.formData;else if(r.body instanceof FormData)s=O2(r.body),m=r.body;else if(r.body instanceof URLSearchParams)s=r.body,m=SD(s);else if(r.body==null)s=new URLSearchParams,m=new FormData;else try{s=new URLSearchParams(r.body),m=SD(s)}catch{return n()}let y={formMethod:l,formAction:h,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(ms(y.formMethod))return{path:t,submission:y};let S=gu(t);return e&&S.search&&tE(S.search)&&s.append("index",""),S.search=`?${s}`,{path:au(S),submission:y}}function yD(e,t,r=!1){let n=e.findIndex(i=>i.route.id===t);return n>=0?e.slice(0,r?n+1:n):e}function _D(e,t,r,n,i,l,h,s,m,y,S,T,I,D){let F=D?ua(D[1])?D[1].error:D[1].data:void 0,V=e.createURL(t.location),Z=e.createURL(i),z=r;l&&t.errors?z=yD(r,Object.keys(t.errors)[0],!0):D&&ua(D[1])&&(z=yD(r,D[0]));let O=D?D[1].statusCode:void 0,L=O&&O>=400,te=z.filter(($,J)=>{let{route:ie}=$;if(ie.lazy)return!0;if(ie.loader==null)return!1;if(l)return L2(ie,t.loaderData,t.errors);if(Bie(t.loaderData,t.matches[J],$))return!0;let xe=t.matches[J],ge=$;return xD($,{currentUrl:V,currentParams:xe.params,nextUrl:Z,nextParams:ge.params,...n,actionResult:F,actionStatus:O,defaultShouldRevalidate:L?!1:h||V.pathname+V.search===Z.pathname+Z.search||V.search!==Z.search||Fie(xe,ge)})}),j=[];return y.forEach(($,J)=>{if(l||!r.some(Te=>Te.route.id===$.routeId)||m.has(J))return;let ie=$c(T,$.path,I);if(!ie){j.push({key:J,routeId:$.routeId,path:$.path,matches:null,match:null,controller:null});return}let xe=t.fetchers.get(J),ge=Lm(ie,$.path),we=!1;S.has(J)?we=!1:s.has(J)?(s.delete(J),we=!0):xe&&xe.state!=="idle"&&xe.data===void 0?we=h:we=xD(ge,{currentUrl:V,currentParams:t.matches[t.matches.length-1].params,nextUrl:Z,nextParams:r[r.length-1].params,...n,actionResult:F,actionStatus:O,defaultShouldRevalidate:L?!1:h}),we&&j.push({key:J,routeId:$.routeId,path:$.path,matches:ie,match:ge,controller:new AbortController})}),[te,j]}function L2(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let n=t!=null&&t[e.id]!==void 0,i=r!=null&&r[e.id]!==void 0;return!n&&i?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!n&&!i}function Bie(e,t,r){let n=!t||r.route.id!==t.route.id,i=!e.hasOwnProperty(r.route.id);return n||i}function Fie(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function xD(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function bD(e,t,r,n,i){let l;if(e){let m=n[e];Hr(m,`No route found to patch children into: routeId = ${e}`),m.children||(m.children=[]),l=m.children}else l=r;let h=t.filter(m=>!l.some(y=>bB(m,y))),s=tx(h,i,[e||"_","patch",String((l==null?void 0:l.length)||"0")],n);l.push(...s)}function bB(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((r,n)=>{var i;return(i=t.children)==null?void 0:i.some(l=>bB(r,l))}):!1}async function Nie(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];Hr(i,"No route found in manifest");let l={};for(let h in n){let m=i[h]!==void 0&&h!=="hasErrorBoundary";Bi(!m,`Route "${i.id}" has a static property "${h}" defined but its lazy function is also returning a value for this property. The lazy route property "${h}" will be ignored.`),!m&&!cie.has(h)&&(l[h]=n[h])}Object.assign(i,l),Object.assign(i,{...t(i),lazy:void 0})}async function jie({matches:e}){let t=e.filter(n=>n.shouldLoad);return(await Promise.all(t.map(n=>n.resolve()))).reduce((n,i,l)=>Object.assign(n,{[t[l].route.id]:i}),{})}async function Vie(e,t,r,n,i,l,h,s,m,y){let S=l.map(D=>D.route.lazy?Nie(D.route,m,s):void 0),T=l.map((D,F)=>{let V=S[F],Z=i.some(O=>O.route.id===D.route.id);return{...D,shouldLoad:Z,resolve:async O=>(O&&n.method==="GET"&&(D.route.lazy||D.route.loader)&&(Z=!0),Z?Uie(t,n,D,V,O,y):Promise.resolve({type:"data",result:void 0}))}}),I=await e({matches:T,request:n,params:l[0].params,fetcherKey:h,context:y});try{await Promise.all(S)}catch{}return I}async function Uie(e,t,r,n,i,l){let h,s,m=y=>{let S,T=new Promise((F,V)=>S=V);s=()=>S(),t.signal.addEventListener("abort",s);let I=F=>typeof y!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${e}" [routeId: ${r.route.id}]`)):y({request:t,params:r.params,context:l},...F!==void 0?[F]:[]),D=(async()=>{try{return{type:"data",result:await(i?i(V=>I(V)):I())}}catch(F){return{type:"error",result:F}}})();return Promise.race([D,T])};try{let y=r.route[e];if(n)if(y){let S,[T]=await Promise.all([m(y).catch(I=>{S=I}),n]);if(S!==void 0)throw S;h=T}else if(await n,y=r.route[e],y)h=await m(y);else if(e==="action"){let S=new URL(t.url),T=S.pathname+S.search;throw Oa(405,{method:t.method,pathname:T,routeId:r.route.id})}else return{type:"data",result:void 0};else if(y)h=await m(y);else{let S=new URL(t.url),T=S.pathname+S.search;throw Oa(404,{pathname:T})}}catch(y){return{type:"error",result:y}}finally{s&&t.signal.removeEventListener("abort",s)}return h}async function Hie(e){var n,i,l,h;let{result:t,type:r}=e;if(SB(t)){let s;try{let m=t.headers.get("Content-Type");m&&/\bapplication\/json\b/.test(m)?t.body==null?s=null:s=await t.json():s=await t.text()}catch(m){return{type:"error",error:m}}return r==="error"?{type:"error",error:new nx(t.status,t.statusText,s),statusCode:t.status,headers:t.headers}:{type:"data",data:s,statusCode:t.status,headers:t.headers}}if(r==="error"){if(ID(t)){if(t.data instanceof Error)return{type:"error",error:t.data,statusCode:(n=t.init)==null?void 0:n.status};t=new nx(((i=t.init)==null?void 0:i.status)||500,void 0,t.data)}return{type:"error",error:t,statusCode:jb(t)?t.status:void 0}}return ID(t)?{type:"data",data:t.data,statusCode:(l=t.init)==null?void 0:l.status,headers:(h=t.init)!=null&&h.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function Gie(e,t,r,n,i){let l=e.headers.get("Location");if(Hr(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!eE.test(l)){let h=n.slice(0,n.findIndex(s=>s.route.id===r)+1);l=z2(new URL(t.url),h,i,l),e.headers.set("Location",l)}return e}function wD(e,t,r){if(eE.test(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),l=As(i.pathname,r)!=null;if(i.origin===t.origin&&l)return i.pathname+i.search+i.hash}return e}function Ah(e,t,r,n){let i=e.createURL(wB(t)).toString(),l={signal:r};if(n&&ms(n.formMethod)){let{formMethod:h,formEncType:s}=n;l.method=h.toUpperCase(),s==="application/json"?(l.headers=new Headers({"Content-Type":s}),l.body=JSON.stringify(n.json)):s==="text/plain"?l.body=n.text:s==="application/x-www-form-urlencoded"&&n.formData?l.body=O2(n.formData):l.body=n.formData}return new Request(i,l)}function O2(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function SD(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function Wie(e,t,r,n=!1,i=!1){let l={},h=null,s,m=!1,y={},S=r&&ua(r[1])?r[1].error:void 0;return e.forEach(T=>{if(!(T.route.id in t))return;let I=T.route.id,D=t[I];if(Hr(!Qu(D),"Cannot handle redirect results in processLoaderData"),ua(D)){let F=D.error;if(S!==void 0&&(F=S,S=void 0),h=h||{},i)h[I]=F;else{let V=Ku(e,I);h[V.route.id]==null&&(h[V.route.id]=F)}n||(l[I]=xB),m||(m=!0,s=jb(D.error)?D.error.status:500),D.headers&&(y[I]=D.headers)}else l[I]=D.data,D.statusCode&&D.statusCode!==200&&!m&&(s=D.statusCode),D.headers&&(y[I]=D.headers)}),S!==void 0&&r&&(h={[r[0]]:S},l[r[0]]=void 0),{loaderData:l,errors:h,statusCode:s||200,loaderHeaders:y}}function CD(e,t,r,n,i,l){let{loaderData:h,errors:s}=Wie(t,r,n);return i.forEach(m=>{let{key:y,match:S,controller:T}=m,I=l[y];if(Hr(I,"Did not find corresponding fetcher result"),!(T&&T.signal.aborted))if(ua(I)){let D=Ku(e.matches,S==null?void 0:S.route.id);s&&s[D.route.id]||(s={...s,[D.route.id]:I.error}),e.fetchers.delete(y)}else if(Qu(I))Hr(!1,"Unhandled fetcher revalidation redirect");else{let D=Rc(I.data);e.fetchers.set(y,D)}}),{loaderData:h,errors:s}}function kD(e,t,r,n){let i=Object.entries(t).filter(([,l])=>l!==xB).reduce((l,[h,s])=>(l[h]=s,l),{});for(let l of r){let h=l.route.id;if(!t.hasOwnProperty(h)&&e.hasOwnProperty(h)&&l.route.loader&&(i[h]=e[h]),n&&n.hasOwnProperty(h))break}return i}function TD(e){return e?ua(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Ku(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function ED(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Oa(e,{pathname:t,routeId:r,method:n,type:i,message:l}={}){let h="Unknown Server Error",s="Unknown @remix-run/router error";return e===400?(h="Bad Request",n&&t&&r?s=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${r}", so there is no way to handle the request.`:i==="invalid-body"&&(s="Unable to encode submission body")):e===403?(h="Forbidden",s=`Route "${r}" does not match URL "${t}"`):e===404?(h="Not Found",s=`No route matches URL "${t}"`):e===405&&(h="Method Not Allowed",n&&t&&r?s=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${r}", so there is no way to handle the request.`:n&&(s=`Invalid request method "${n.toUpperCase()}"`)),new nx(e||500,h,new Error(s),!0)}function p0(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,i]=t[r];if(Qu(i))return{key:n,result:i}}}function wB(e){let t=typeof e=="string"?gu(e):e;return au({...t,hash:""})}function qie(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Zie(e){return SB(e.result)&&Die.has(e.result.status)}function ua(e){return e.type==="error"}function Qu(e){return(e&&e.type)==="redirect"}function ID(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function SB(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function Kie(e){return Rie.has(e.toUpperCase())}function ms(e){return Pie.has(e.toUpperCase())}function tE(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Lm(e,t){let r=typeof t=="string"?gu(t).search:t.search;if(e[e.length-1].route.index&&tE(r||""))return e[e.length-1];let n=vB(e);return n[n.length-1]}function PD(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:l,json:h}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(l!=null)return{formMethod:t,formAction:r,formEncType:n,formData:l,json:void 0,text:void 0};if(h!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:h,text:void 0}}}function tS(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Xie(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function bm(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Yie(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Rc(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Jie(e,t){try{let r=e.sessionStorage.getItem(_B);if(r){let n=JSON.parse(r);for(let[i,l]of Object.entries(n||{}))l&&Array.isArray(l)&&t.set(i,new Set(l||[]))}}catch{}}function Qie(e,t){if(t.size>0){let r={};for(let[n,i]of t)r[n]=[...i];try{e.sessionStorage.setItem(_B,JSON.stringify(r))}catch(n){Bi(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function eoe(){let e,t,r=new Promise((n,i)=>{e=async l=>{n(l);try{await r}catch{}},t=async l=>{i(l);try{await r}catch{}}});return{promise:r,resolve:e,reject:t}}var zd=R.createContext(null);zd.displayName="DataRouter";var bv=R.createContext(null);bv.displayName="DataRouterState";var rE=R.createContext({isTransitioning:!1});rE.displayName="ViewTransition";var CB=R.createContext(new Map);CB.displayName="Fetchers";var toe=R.createContext(null);toe.displayName="Await";var pl=R.createContext(null);pl.displayName="Navigation";var Vb=R.createContext(null);Vb.displayName="Location";var uc=R.createContext({outlet:null,matches:[],isDataRoute:!1});uc.displayName="Route";var nE=R.createContext(null);nE.displayName="RouteError";function roe(e,{relative:t}={}){Hr(wv(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=R.useContext(pl),{hash:i,pathname:l,search:h}=Sv(e,{relative:t}),s=l;return r!=="/"&&(s=l==="/"?r:cl([r,l])),n.createHref({pathname:s,search:h,hash:i})}function wv(){return R.useContext(Vb)!=null}function vu(){return Hr(wv(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Vb).location}var kB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TB(e){R.useContext(pl).static||R.useLayoutEffect(e)}function EB(){let{isDataRoute:e}=R.useContext(uc);return e?moe():noe()}function noe(){Hr(wv(),"useNavigate() may be used only in the context of a <Router> component.");let e=R.useContext(zd),{basename:t,navigator:r}=R.useContext(pl),{matches:n}=R.useContext(uc),{pathname:i}=vu(),l=JSON.stringify(JT(n)),h=R.useRef(!1);return TB(()=>{h.current=!0}),R.useCallback((m,y={})=>{if(Bi(h.current,kB),!h.current)return;if(typeof m=="number"){r.go(m);return}let S=QT(m,JSON.parse(l),i,y.relative==="path");e==null&&t!=="/"&&(S.pathname=S.pathname==="/"?t:cl([t,S.pathname])),(y.replace?r.replace:r.push)(S,y.state,y)},[t,r,l,i,e])}R.createContext(null);function Sv(e,{relative:t}={}){let{matches:r}=R.useContext(uc),{pathname:n}=vu(),i=JSON.stringify(JT(r));return R.useMemo(()=>QT(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function ioe(e,t,r,n){Hr(wv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=R.useContext(pl),{matches:l}=R.useContext(uc),h=l[l.length-1],s=h?h.params:{},m=h?h.pathname:"/",y=h?h.pathnameBase:"/",S=h&&h.route;{let z=S&&S.path||"";IB(m,!S||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let T=vu(),I;I=T;let D=I.pathname||"/",F=D;if(y!=="/"){let z=y.replace(/^\//,"").split("/");F="/"+D.replace(/^\//,"").split("/").slice(z.length).join("/")}let V=$c(e,{pathname:F});return Bi(S||V!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Bi(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),coe(V&&V.map(z=>Object.assign({},z,{params:Object.assign({},s,z.params),pathname:cl([y,i.encodeLocation?i.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?y:cl([y,i.encodeLocation?i.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),l,r,n)}function ooe(){let e=poe(),t=jb(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},h=null;return console.error("Error handled by React Router default ErrorBoundary:",e),h=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:l},"ErrorBoundary")," or"," ",R.createElement("code",{style:l},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),r?R.createElement("pre",{style:i},r):null,h)}var aoe=R.createElement(ooe,null),soe=class extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?R.createElement(uc.Provider,{value:this.props.routeContext},R.createElement(nE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function loe({routeContext:e,match:t,children:r}){let n=R.useContext(zd);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(uc.Provider,{value:e},r)}function coe(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=r==null?void 0:r.errors;if(l!=null){let m=i.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);Hr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let h=!1,s=-1;if(r)for(let m=0;m<i.length;m++){let y=i[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(s=m),y.route.id){let{loaderData:S,errors:T}=r,I=y.route.loader&&!S.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||I){h=!0,s>=0?i=i.slice(0,s+1):i=[i[0]];break}}}return i.reduceRight((m,y,S)=>{let T,I=!1,D=null,F=null;r&&(T=l&&y.route.id?l[y.route.id]:void 0,D=y.route.errorElement||aoe,h&&(s<0&&S===0?(IB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,F=null):s===S&&(I=!0,F=y.route.hydrateFallbackElement||null)));let V=t.concat(i.slice(0,S+1)),Z=()=>{let z;return T?z=D:I?z=F:y.route.Component?z=R.createElement(y.route.Component,null):y.route.element?z=y.route.element:z=m,R.createElement(loe,{match:y,routeContext:{outlet:m,matches:V,isDataRoute:r!=null},children:z})};return r&&(y.route.ErrorBoundary||y.route.errorElement||S===0)?R.createElement(soe,{location:r.location,revalidation:r.revalidation,component:D,error:T,children:Z(),routeContext:{outlet:null,matches:V,isDataRoute:!0}}):Z()},null)}function iE(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uoe(e){let t=R.useContext(zd);return Hr(t,iE(e)),t}function doe(e){let t=R.useContext(bv);return Hr(t,iE(e)),t}function hoe(e){let t=R.useContext(uc);return Hr(t,iE(e)),t}function oE(e){let t=hoe(e),r=t.matches[t.matches.length-1];return Hr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function foe(){return oE("useRouteId")}function poe(){var n;let e=R.useContext(nE),t=doe("useRouteError"),r=oE("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function moe(){let{router:e}=uoe("useNavigate"),t=oE("useNavigate"),r=R.useRef(!1);return TB(()=>{r.current=!0}),R.useCallback(async(i,l={})=>{Bi(r.current,kB),r.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...l}))},[e,t])}var AD={};function IB(e,t,r){!t&&!AD[e]&&(AD[e]=!0,Bi(!1,r))}var RD={};function DD(e,t){!e&&!RD[t]&&(RD[t]=!0,console.warn(t))}function goe(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&Bi(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:R.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&Bi(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:R.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&Bi(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:R.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var voe=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function yoe({router:e,flushSync:t}){let[r,n]=R.useState(e.state),[i,l]=R.useState(),[h,s]=R.useState({isTransitioning:!1}),[m,y]=R.useState(),[S,T]=R.useState(),[I,D]=R.useState(),F=R.useRef(new Map),V=R.useCallback((L,{deletedFetchers:te,flushSync:j,viewTransitionOpts:$})=>{te.forEach(ie=>F.current.delete(ie)),L.fetchers.forEach((ie,xe)=>{ie.data!==void 0&&F.current.set(xe,ie.data)}),DD(j===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let J=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(DD($==null||J,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!$||!J){t&&j?t(()=>n(L)):R.startTransition(()=>n(L));return}if(t&&j){t(()=>{S&&(m&&m.resolve(),S.skipTransition()),s({isTransitioning:!0,flushSync:!0,currentLocation:$.currentLocation,nextLocation:$.nextLocation})});let ie=e.window.document.startViewTransition(()=>{t(()=>n(L))});ie.finished.finally(()=>{t(()=>{y(void 0),T(void 0),l(void 0),s({isTransitioning:!1})})}),t(()=>T(ie));return}S?(m&&m.resolve(),S.skipTransition(),D({state:L,currentLocation:$.currentLocation,nextLocation:$.nextLocation})):(l(L),s({isTransitioning:!0,flushSync:!1,currentLocation:$.currentLocation,nextLocation:$.nextLocation}))},[e.window,t,S,m]);R.useLayoutEffect(()=>e.subscribe(V),[e,V]),R.useEffect(()=>{h.isTransitioning&&!h.flushSync&&y(new voe)},[h]),R.useEffect(()=>{if(m&&i&&e.window){let L=i,te=m.promise,j=e.window.document.startViewTransition(async()=>{R.startTransition(()=>n(L)),await te});j.finished.finally(()=>{y(void 0),T(void 0),l(void 0),s({isTransitioning:!1})}),T(j)}},[i,m,e.window]),R.useEffect(()=>{m&&i&&r.location.key===i.location.key&&m.resolve()},[m,S,r.location,i]),R.useEffect(()=>{!h.isTransitioning&&I&&(l(I.state),s({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}),D(void 0))},[h.isTransitioning,I]);let Z=R.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:L=>e.navigate(L),push:(L,te,j)=>e.navigate(L,{state:te,preventScrollReset:j==null?void 0:j.preventScrollReset}),replace:(L,te,j)=>e.navigate(L,{replace:!0,state:te,preventScrollReset:j==null?void 0:j.preventScrollReset})}),[e]),z=e.basename||"/",O=R.useMemo(()=>({router:e,navigator:Z,static:!1,basename:z}),[e,Z,z]);return R.createElement(R.Fragment,null,R.createElement(zd.Provider,{value:O},R.createElement(bv.Provider,{value:r},R.createElement(CB.Provider,{value:F.current},R.createElement(rE.Provider,{value:h},R.createElement(boe,{basename:z,location:r.location,navigationType:r.historyAction,navigator:Z},R.createElement(_oe,{routes:e.routes,future:e.future,state:r})))))),null)}var _oe=R.memo(xoe);function xoe({routes:e,future:t,state:r}){return ioe(e,void 0,r,t)}function G0(e){Hr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function boe({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:l=!1}){Hr(!wv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=e.replace(/^\/*/,"/"),s=R.useMemo(()=>({basename:h,navigator:i,static:l,future:{}}),[h,i,l]);typeof r=="string"&&(r=gu(r));let{pathname:m="/",search:y="",hash:S="",state:T=null,key:I="default"}=r,D=R.useMemo(()=>{let F=As(m,h);return F==null?null:{location:{pathname:F,search:y,hash:S,state:T,key:I},navigationType:n}},[h,m,y,S,T,I,n]);return Bi(D!=null,`<Router basename="${h}"> is not able to match the URL "${m}${y}${S}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:R.createElement(pl.Provider,{value:s},R.createElement(Vb.Provider,{children:t,value:D}))}function $2(e,t=[]){let r=[];return R.Children.forEach(e,(n,i)=>{if(!R.isValidElement(n))return;let l=[...t,i];if(n.type===R.Fragment){r.push.apply(r,$2(n.props.children,l));return}Hr(n.type===G0,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Hr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let h={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(h.children=$2(n.props.children,l)),r.push(h)}),r}var woe=$2,W0="get",q0="application/x-www-form-urlencoded";function Ub(e){return e!=null&&typeof e.tagName=="string"}function Soe(e){return Ub(e)&&e.tagName.toLowerCase()==="button"}function Coe(e){return Ub(e)&&e.tagName.toLowerCase()==="form"}function koe(e){return Ub(e)&&e.tagName.toLowerCase()==="input"}function Toe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Eoe(e,t){return e.button===0&&(!t||t==="_self")&&!Toe(e)}function B2(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function Ioe(e,t){let r=B2(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(l=>{r.append(i,l)})}),r}var m0=null;function Poe(){if(m0===null)try{new FormData(document.createElement("form"),0),m0=!1}catch{m0=!0}return m0}var Aoe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rS(e){return e!=null&&!Aoe.has(e)?(Bi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${q0}"`),null):e}function Roe(e,t){let r,n,i,l,h;if(Coe(e)){let s=e.getAttribute("action");n=s?As(s,t):null,r=e.getAttribute("method")||W0,i=rS(e.getAttribute("enctype"))||q0,l=new FormData(e)}else if(Soe(e)||koe(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||s.getAttribute("action");if(n=m?As(m,t):null,r=e.getAttribute("formmethod")||s.getAttribute("method")||W0,i=rS(e.getAttribute("formenctype"))||rS(s.getAttribute("enctype"))||q0,l=new FormData(s,e),!Poe()){let{name:y,type:S,value:T}=e;if(S==="image"){let I=y?`${y}.`:"";l.append(`${I}x`,"0"),l.append(`${I}y`,"0")}else y&&l.append(y,T)}}else{if(Ub(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=W0,n=null,i=q0,h=e}return l&&i==="text/plain"&&(h=l,l=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:l,body:h}}function aE(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function Doe(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Moe(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function zoe(e,t,r){let n=await Promise.all(e.map(async i=>{let l=t.routes[i.route.id];if(l){let h=await Doe(l,r);return h.links?h.links():[]}return[]}));return Boe(n.flat(1).filter(Moe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function MD(e,t,r,n,i,l){let h=(m,y)=>r[y]?m.route.id!==r[y].route.id:!0,s=(m,y)=>{var S;return r[y].pathname!==m.pathname||((S=r[y].route.path)==null?void 0:S.endsWith("*"))&&r[y].params["*"]!==m.params["*"]};return l==="assets"?t.filter((m,y)=>h(m,y)||s(m,y)):l==="data"?t.filter((m,y)=>{var T;let S=n.routes[m.route.id];if(!S||!S.hasLoader)return!1;if(h(m,y)||s(m,y))return!0;if(m.route.shouldRevalidate){let I=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((T=r[0])==null?void 0:T.params)||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function Loe(e,t){return Ooe(e.map(r=>{let n=t.routes[r.route.id];if(!n)return[];let i=[n.module];return n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function Ooe(e){return[...new Set(e)]}function $oe(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function Boe(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let l=JSON.stringify($oe(i));return r.has(l)||(r.add(l),n.push({key:l,link:i})),n},[])}function Foe(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Noe(){let e=R.useContext(zd);return aE(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function joe(){let e=R.useContext(bv);return aE(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var sE=R.createContext(void 0);sE.displayName="FrameworkContext";function PB(){let e=R.useContext(sE);return aE(e,"You must render this element inside a <HydratedRouter> element"),e}function Voe(e,t){let r=R.useContext(sE),[n,i]=R.useState(!1),[l,h]=R.useState(!1),{onFocus:s,onBlur:m,onMouseEnter:y,onMouseLeave:S,onTouchStart:T}=t,I=R.useRef(null);R.useEffect(()=>{if(e==="render"&&h(!0),e==="viewport"){let V=z=>{z.forEach(O=>{h(O.isIntersecting)})},Z=new IntersectionObserver(V,{threshold:.5});return I.current&&Z.observe(I.current),()=>{Z.disconnect()}}},[e]),R.useEffect(()=>{if(n){let V=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(V)}}},[n]);let D=()=>{i(!0)},F=()=>{i(!1),h(!1)};return r?e!=="intent"?[l,I,{}]:[l,I,{onFocus:wm(s,D),onBlur:wm(m,F),onMouseEnter:wm(y,D),onMouseLeave:wm(S,F),onTouchStart:wm(T,D)}]:[!1,I,{}]}function wm(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Uoe({page:e,...t}){let{router:r}=Noe(),n=R.useMemo(()=>$c(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?R.createElement(Goe,{page:e,matches:n,...t}):null}function Hoe(e){let{manifest:t,routeModules:r}=PB(),[n,i]=R.useState([]);return R.useEffect(()=>{let l=!1;return zoe(e,t,r).then(h=>{l||i(h)}),()=>{l=!0}},[e,t,r]),n}function Goe({page:e,matches:t,...r}){let n=vu(),{manifest:i,routeModules:l}=PB(),{loaderData:h,matches:s}=joe(),m=R.useMemo(()=>MD(e,t,s,i,n,"data"),[e,t,s,i,n]),y=R.useMemo(()=>MD(e,t,s,i,n,"assets"),[e,t,s,i,n]),S=R.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let D=new Set,F=!1;if(t.forEach(Z=>{var O;let z=i.routes[Z.route.id];!z||!z.hasLoader||(!m.some(L=>L.route.id===Z.route.id)&&Z.route.id in h&&((O=l[Z.route.id])!=null&&O.shouldRevalidate)||z.hasClientLoader?F=!0:D.add(Z.route.id))}),D.size===0)return[];let V=Foe(e);return F&&D.size>0&&V.searchParams.set("_routes",t.filter(Z=>D.has(Z.route.id)).map(Z=>Z.route.id).join(",")),[V.pathname+V.search]},[h,n,i,m,t,e,l]),T=R.useMemo(()=>Loe(y,i),[y,i]),I=Hoe(y);return R.createElement(R.Fragment,null,S.map(D=>R.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...r})),T.map(D=>R.createElement("link",{key:D,rel:"modulepreload",href:D,...r})),I.map(({key:D,link:F})=>R.createElement("link",{key:D,...F})))}function Woe(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var AB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{AB&&(window.__reactRouterVersion="7.1.1")}catch{}function qoe(e,t){return Oie({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:aie({window:t==null?void 0:t.window}),hydrationData:Zoe(),routes:e,mapRouteProperties:goe,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function Zoe(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:Koe(e.errors)}),e}function Koe(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new nx(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let l=window[i.__subType];if(typeof l=="function")try{let h=new l(i.message);h.stack="",r[n]=h}catch{}}if(r[n]==null){let l=new Error(i.message);l.stack="",r[n]=l}}else r[n]=i;return r}var RB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DB=R.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:l,replace:h,state:s,target:m,to:y,preventScrollReset:S,viewTransition:T,...I},D){let{basename:F}=R.useContext(pl),V=typeof y=="string"&&RB.test(y),Z,z=!1;if(typeof y=="string"&&V&&(Z=y,AB))try{let xe=new URL(window.location.href),ge=y.startsWith("//")?new URL(xe.protocol+y):new URL(y),we=As(ge.pathname,F);ge.origin===xe.origin&&we!=null?y=we+ge.search+ge.hash:z=!0}catch{Bi(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=roe(y,{relative:i}),[L,te,j]=Voe(n,I),$=Qoe(y,{replace:h,state:s,target:m,preventScrollReset:S,relative:i,viewTransition:T});function J(xe){t&&t(xe),xe.defaultPrevented||$(xe)}let ie=R.createElement("a",{...I,...j,href:Z||O,onClick:z||l?t:J,ref:Woe(D,te),target:m,"data-discover":!V&&r==="render"?"true":void 0});return L&&!V?R.createElement(R.Fragment,null,ie,R.createElement(Uoe,{page:O})):ie});DB.displayName="Link";var Xoe=R.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:l,to:h,viewTransition:s,children:m,...y},S){let T=Sv(h,{relative:y.relative}),I=vu(),D=R.useContext(bv),{navigator:F,basename:V}=R.useContext(pl),Z=D!=null&&oae(T)&&s===!0,z=F.encodeLocation?F.encodeLocation(T).pathname:T.pathname,O=I.pathname,L=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;r||(O=O.toLowerCase(),L=L?L.toLowerCase():null,z=z.toLowerCase()),L&&V&&(L=As(L,V)||L);const te=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let j=O===z||!i&&O.startsWith(z)&&O.charAt(te)==="/",$=L!=null&&(L===z||!i&&L.startsWith(z)&&L.charAt(z.length)==="/"),J={isActive:j,isPending:$,isTransitioning:Z},ie=j?t:void 0,xe;typeof n=="function"?xe=n(J):xe=[n,j?"active":null,$?"pending":null,Z?"transitioning":null].filter(Boolean).join(" ");let ge=typeof l=="function"?l(J):l;return R.createElement(DB,{...y,"aria-current":ie,className:xe,ref:S,style:ge,to:h,viewTransition:s},typeof m=="function"?m(J):m)});Xoe.displayName="NavLink";var Yoe=R.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:l,method:h=W0,action:s,onSubmit:m,relative:y,preventScrollReset:S,viewTransition:T,...I},D)=>{let F=nae(),V=iae(s,{relative:y}),Z=h.toLowerCase()==="get"?"get":"post",z=typeof s=="string"&&RB.test(s),O=L=>{if(m&&m(L),L.defaultPrevented)return;L.preventDefault();let te=L.nativeEvent.submitter,j=(te==null?void 0:te.getAttribute("formmethod"))||h;F(te||L.currentTarget,{fetcherKey:t,method:j,navigate:r,replace:i,state:l,relative:y,preventScrollReset:S,viewTransition:T})};return R.createElement("form",{ref:D,method:Z,action:V,onSubmit:n?m:O,...I,"data-discover":!z&&e==="render"?"true":void 0})});Yoe.displayName="Form";function Joe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MB(e){let t=R.useContext(zd);return Hr(t,Joe(e)),t}function Qoe(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:l,viewTransition:h}={}){let s=EB(),m=vu(),y=Sv(e,{relative:l});return R.useCallback(S=>{if(Eoe(S,t)){S.preventDefault();let T=r!==void 0?r:au(m)===au(y);s(e,{replace:T,state:n,preventScrollReset:i,relative:l,viewTransition:h})}},[m,s,y,r,n,t,e,i,l,h])}function eae(e){Bi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=R.useRef(B2(e)),r=R.useRef(!1),n=vu(),i=R.useMemo(()=>Ioe(n.search,r.current?null:t.current),[n.search]),l=EB(),h=R.useCallback((s,m)=>{const y=B2(typeof s=="function"?s(i):s);r.current=!0,l("?"+y,m)},[l,i]);return[i,h]}var tae=0,rae=()=>`__${String(++tae)}__`;function nae(){let{router:e}=MB("useSubmit"),{basename:t}=R.useContext(pl),r=foe();return R.useCallback(async(n,i={})=>{let{action:l,method:h,encType:s,formData:m,body:y}=Roe(n,t);if(i.navigate===!1){let S=i.fetcherKey||rae();await e.fetch(S,r,i.action||l,{preventScrollReset:i.preventScrollReset,formData:m,body:y,formMethod:i.method||h,formEncType:i.encType||s,flushSync:i.flushSync})}else await e.navigate(i.action||l,{preventScrollReset:i.preventScrollReset,formData:m,body:y,formMethod:i.method||h,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function iae(e,{relative:t}={}){let{basename:r}=R.useContext(pl),n=R.useContext(uc);Hr(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),l={...Sv(e||".",{relative:t})},h=vu();if(e==null){l.search=h.search;let s=new URLSearchParams(l.search),m=s.getAll("index");if(m.some(S=>S==="")){s.delete("index"),m.filter(T=>T).forEach(T=>s.append("index",T));let S=s.toString();l.search=S?`?${S}`:""}}return(!e||e===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:cl([r,l.pathname])),au(l)}function oae(e,t={}){let r=R.useContext(rE);Hr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=MB("useViewTransitionState"),i=Sv(e,{relative:t.relative});if(!r.isTransitioning)return!1;let l=As(r.currentLocation.pathname,n)||r.currentLocation.pathname,h=As(r.nextLocation.pathname,n)||r.nextLocation.pathname;return rx(i.pathname,h)!=null||rx(i.pathname,l)!=null}new TextEncoder;/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function aae(e){return R.createElement(yoe,{flushSync:Cd.flushSync,...e})}const zB={[xi.FuelStation]:{iconName:"gas_ico",label:"Fuel station"},[xi.Toll]:{iconName:"toll_ico",label:"Toll gate"},[xi.Parking]:{iconName:"parking_ico",label:"Rest stop"},[xi.RecruitmentAgency]:{iconName:"recruitment_ico",label:"Recruitment agency"},[xi.Service]:{iconName:"service_ico",label:"Service"},[xi.TruckDealer]:{iconName:"dealer_ico",label:"Truck dealer"},[xi.Port]:{iconName:"port_overlay",label:"Port"},[xi.Train]:{iconName:"train_ico",label:"Train"},[xi.Viewpoint]:{iconName:"viewpoint",label:"Viewpoint"},[xi.PhotoSight]:{iconName:"photo_sight_captured",label:"Photo trophy"},[xi.AgricultureCheck]:{iconName:"agri_check",label:"Agricultural inspection"},[xi.BorderCheck]:{iconName:"border_ico",label:"Border inspection"},[xi.Garage]:{iconName:"garage_large_ico",label:"Garage"},[xi.WeighStation]:{iconName:"weigh_station_ico",label:"Weigh station"},[xi.CityNames]:{iconName:"city_names_ico",label:"City names"},[xi.Company]:{iconName:"companies_ico",label:"Companies"},[xi.RoadNumber]:{iconName:"road_numbers_ico",label:"Road numbers"}},zD=new Map(Object.entries(zB).map(([e,t])=>[Number(e),t.label])),LD=new Map(Object.entries(RQ).map(([e,t])=>[Number(e),t]));function ix(e,t,r){return{selectedItems:e,onSelectAllToggle:n=>t(new Set(n?r:[])),onItemToggle:(n,i)=>{t(l=>{const h=new Set(l);return i?h.add(n):h.delete(n),h})}}}const LB=e=>{const t=R.useRef(null),[r,n]=R.useState(!1),[i,l]=R.useState(0);return cc(()=>({onAdd:()=>ln(t.current),onRemove:()=>ln(t.current).remove()}),{position:"bottom-left"}),H.jsxs("div",{ref:t,className:"maplibregl-ctrl maplibregl-ctrl-group",children:[H.jsx(Qc,{title:"Map Options",sx:{minWidth:0,minHeight:0,borderRadius:0},onClick:()=>n(!0),children:H.jsx(MY,{})}),H.jsx(u5,{open:r,onClose:()=>n(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",justifyContent:"end"}}},children:H.jsxs(kb,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,height:"80%",overflow:"auto"},children:[H.jsx(o5,{children:"Map Options"}),H.jsx(d5,{}),H.jsx(cR,{onChange:(h,s)=>l(Number(s)),children:H.jsxs(yK,{tabFlex:1,sx:{borderRadius:0},children:[H.jsx(zw,{children:"Icons"}),H.jsx(zw,{children:"ATS DLC"}),H.jsx(zw,{children:"Advanced"})]})}),H.jsx(i5,{sx:{overflowX:"hidden"},children:H.jsxs(cR,{value:i,children:[H.jsx(Lw,{sx:{p:0},value:0,children:H.jsx(OD,{items:zD,selectedItems:e.icons.selectedItems,onItemToggle:e.icons.onItemToggle,icon:h=>H.jsx("img",{style:{marginLeft:-3},width:32,height:32,src:`map-icons/${zB[h].iconName}.png`})})}),H.jsx(Lw,{sx:{p:0},value:1,children:H.jsx(OD,{items:LD,selectedItems:e.atsDlcs.selectedItems,onItemToggle:e.atsDlcs.onItemToggle})}),H.jsx(Lw,{sx:{p:0},value:2,children:H.jsx(uae,{showContours:e.advanced.showContours,onContoursToggle:e.advanced.onContoursToggle})})]})}),H.jsx(Sb,{}),i===0&&H.jsx(sae,{enableAutoHiding:e.icons.enableAutoHiding,enableSelectAll:e.icons.selectedItems.size===zD.size,onAutoHidingToggle:e.icons.onAutoHidingToggle,onSelectAllToggle:e.icons.onSelectAllToggle}),i===1&&H.jsx(cae,{enableSelectAll:e.atsDlcs.selectedItems.size===LD.size,onSelectAllToggle:e.atsDlcs.onSelectAllToggle})]})})]})},sae=R.memo(e=>H.jsxs(yo,{direction:"row",justifyContent:"space-between",gap:1,mx:2,children:[H.jsx(DK,{enterDelay:500,title:"Enable to hide icons based on zoom and nearby icons. Disable to always show icons.",children:H.jsx(Pf,{label:"Enable icon hiding",checked:e.enableAutoHiding,onChange:t=>{var r;return(r=e.onAutoHidingToggle)==null?void 0:r.call(e,t.target.checked)}})}),H.jsx(Pf,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})]})),lae=e=>H.jsx(Ed,{size:"lg",sx:{p:0,[`& .${nd.root}`]:{flexGrow:1,alignItems:"center",flexDirection:"row-reverse"}},children:[...e.items.entries()].map(([t,r])=>{var n;return H.jsxs(lc,{children:[(n=e.icon)==null?void 0:n.call(e,t),H.jsx(Pf,{overlay:!0,label:r,checked:e.selectedItems.has(t),onChange:i=>e.onItemToggle(t,i.target.checked)})]},String(t))})}),OD=R.memo(lae),cae=R.memo(e=>H.jsx(yo,{direction:"row",justifyContent:"end",gap:1,mx:2,children:H.jsx(Pf,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})})),uae=e=>H.jsxs(yo,{mx:2,children:[H.jsx(Qn,{mb:2,level:"title-lg",children:"Experimental Features"}),H.jsxs(kq,{children:[H.jsx(Pf,{sx:{flexDirection:"row-reverse"},label:"Show elevation data",checked:e.showContours,onChange:t=>e.onContoursToggle(t.target.checked)}),H.jsx(Qn,{level:"body-xs",color:"warning",children:"Note: elevation data for points further away from roads is estimated and likely inaccurate."})]})]}),OB=()=>{const e=R.useRef(null),{mode:t="light",setMode:r}=_k();return cc(()=>({onAdd:()=>ln(e.current),onRemove:()=>ln(e.current).remove()})),H.jsx("div",{ref:e,className:"maplibregl-ctrl maplibregl-ctrl-group",children:H.jsxs(I8,{children:[H.jsx(IZ,{slots:{root:Qc},sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Set map theme",children:H.jsx(CY,{})}),H.jsxs(xZ,{placement:"left",children:[H.jsx(lc,{sticky:!0,children:H.jsx(Qn,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:"Map theme"})}),H.jsxs(Mw,{onClick:()=>r("light"),selected:t==="light",children:[H.jsx(B0,{children:H.jsx(TY,{})})," ","Light"]}),H.jsxs(Mw,{onClick:()=>r("dark"),selected:t==="dark",children:[H.jsx(B0,{children:H.jsx(EY,{})})," ","Dark"]}),H.jsxs(Mw,{onClick:()=>r("system"),selected:t==="system",children:[H.jsx(B0,{children:H.jsx(kY,{})})," ","Auto"]})]})]})})};function dae(e,t,r){let n=r.get(e);return n==null&&(n=t,r.set(e,n)),n}const hae=e=>{const{map:t,selectDecorator:r,onSelect:n}=e,[i,l]=R.useState([]);R.useEffect(()=>{const m=t==="usa"?"ats":"ets2";Promise.all([fetch(`${m}-achievements.json`).then(y=>y.json()),fetch(`${m}-achievements.geojson`).then(y=>y.json())]).then(([y,S])=>{const T=new Map;for(const D of S.features)dae(D.properties.name,[],T).push({coordinates:D.geometry.coordinates,dlcGuard:D.properties.dlcGuard});const I=new Set(S.features.map(D=>D.properties.name));l([...y.data.filter(D=>I.has(D.id)).map(D=>({...D,label:D.title,value:D.id,features:ln(T.get(D.id))})).sort((D,F)=>D.label.localeCompare(F.label))])},()=>console.error("could not load achievements json."))},[t]);const h=i.filter(m=>{if(t==="europe")return!0;const y=Pb(e.visibleStateDlcs);return m.features.some(S=>y.has(S.dlcGuard))}),s=xT({stringify:m=>[m.label,m.desc].join(" ")});return H.jsx(D_,{onChange:(m,y)=>n(y),placeholder:"Search achievements...",options:h,filterOptions:s,blurOnSelect:!0,autoComplete:!0,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:r,renderOption:(m,y)=>R.createElement(PW,{...m,key:y.value},H.jsx(B0,{sx:{border:"2px solid var(--joy-palette-neutral-outlinedBorder)",borderRadius:6,overflow:"hidden",minWidth:"fit-content",mr:.5},children:H.jsx("img",{loading:"lazy",width:"48",height:"48",src:y.imgUrl,alt:""})}),H.jsxs(hZ,{children:[H.jsx(Qn,{level:"title-md",children:y.label}),H.jsx(Qn,{level:"body-xs",children:y.desc})]}))},t)},fae=e=>{const{map:t,selectDecorator:r,onSelect:n}=e,[i,l]=R.useState([]);R.useEffect(()=>{Promise.all([fetch("cities.geojson").then(m=>m.json()),fetch(s3).then(m=>m.json()),fetch(l3).then(m=>m.json())]).then(([m,y,S])=>{l(mae(m,y,S))},()=>console.error("could not load cities/towns geojson."))},[]);const h=i.filter(m=>{const y=m.map===t;return t==="europe"?y:y&&e.visibleStates.has(m.stateCode)}),s=xT({stringify:m=>[m.state,m.label].join(" ")});return H.jsx(D_,{onChange:(m,y)=>y&&n(y),placeholder:"Search cities...",options:h,filterOptions:s,groupBy:m=>m.state,blurOnSelect:!0,autoComplete:!0,renderGroup:pae,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:r},t)};function pae(e){return H.jsxs(R.Fragment,{children:[H.jsx(Qn,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:e.group}),H.jsx(Ed,{children:e.children}),H.jsx(Cb,{})]},e.key)}function mae(e,t,r){const n=[],i=new Map;for(const l of e.features)if(l.properties.type==="city")n.push(l);else if(l.properties.type==="country")i.set(l.properties.code,l.properties.name);else throw new Error;for(const l of t.features)n.push({type:"Feature",geometry:l.geometry,properties:{type:"city",map:"usa",countryCode:l.properties.state,name:l.properties.name}});for(const l of r.features)n.push({type:"Feature",geometry:l.geometry,properties:{type:"city",map:"europe",countryCode:l.properties.state,name:l.properties.name}});return n.map(({properties:l,geometry:h})=>({map:l.map,state:ln(i.get(l.countryCode)),stateCode:l.countryCode,label:l.name,value:h.coordinates})).sort((l,h)=>l.state!==h.state?l.state.localeCompare(h.state):l.label.localeCompare(h.label))}var $D=Object.prototype.toString,$B=function(t){var r=$D.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&$D.call(t.callee)==="[object Function]"),n},nS,BD;function gae(){if(BD)return nS;BD=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=$B,i=Object.prototype.propertyIsEnumerable,l=!i.call({toString:null},"toString"),h=i.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],m=function(I){var D=I.constructor;return D&&D.prototype===I},y={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},S=function(){if(typeof window>"u")return!1;for(var I in window)try{if(!y["$"+I]&&t.call(window,I)&&window[I]!==null&&typeof window[I]=="object")try{m(window[I])}catch{return!0}}catch{return!0}return!1}(),T=function(I){if(typeof window>"u"||!S)return m(I);try{return m(I)}catch{return!1}};e=function(D){var F=D!==null&&typeof D=="object",V=r.call(D)==="[object Function]",Z=n(D),z=F&&r.call(D)==="[object String]",O=[];if(!F&&!V&&!Z)throw new TypeError("Object.keys called on a non-object");var L=h&&V;if(z&&D.length>0&&!t.call(D,0))for(var te=0;te<D.length;++te)O.push(String(te));if(Z&&D.length>0)for(var j=0;j<D.length;++j)O.push(String(j));else for(var $ in D)!(L&&$==="prototype")&&t.call(D,$)&&O.push(String($));if(l)for(var J=T(D),ie=0;ie<s.length;++ie)!(J&&s[ie]==="constructor")&&t.call(D,s[ie])&&O.push(s[ie]);return O}}return nS=e,nS}var vae=Array.prototype.slice,yae=$B,FD=Object.keys,Z0=FD?function(t){return FD(t)}:gae(),ND=Object.keys;Z0.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return yae(n)?ND(vae.call(n)):ND(n)})}else Object.keys=Z0;return Object.keys||Z0};var _ae=Z0,K0=Object.defineProperty||!1;if(K0)try{K0({},"a",{value:1})}catch{K0=!1}var Cv=K0,yu=SyntaxError,Rr=TypeError,xae=Object.getOwnPropertyDescriptor,X0=xae;if(X0)try{X0([],"length")}catch{X0=null}var Yf=X0,jD=Cv,bae=yu,Rh=Rr,VD=Yf,BB=function(t,r,n){if(!t||typeof t!="object"&&typeof t!="function")throw new Rh("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Rh("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Rh("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Rh("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Rh("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Rh("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,h=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,m=!!VD&&VD(t,r);if(jD)jD(t,r,{configurable:h===null&&m?m.configurable:!h,enumerable:i===null&&m?m.enumerable:!i,value:n,writable:l===null&&m?m.writable:!l});else if(s||!i&&!l&&!h)t[r]=n;else throw new bae("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},F2=Cv,FB=function(){return!!F2};FB.hasArrayLengthDefineBug=function(){if(!F2)return null;try{return F2([],"length",{value:1}).length!==1}catch{return!0}};var lE=FB,wae=_ae,Sae=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Cae=Object.prototype.toString,kae=Array.prototype.concat,UD=BB,Tae=function(e){return typeof e=="function"&&Cae.call(e)==="[object Function]"},NB=lE(),Eae=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!Tae(n)||!n())return}NB?UD(e,t,r,!0):UD(e,t,r)},jB=function(e,t){var r=arguments.length>2?arguments[2]:{},n=wae(t);Sae&&(n=kae.call(n,Object.getOwnPropertySymbols(t)));for(var i=0;i<n.length;i+=1)Eae(e,n[i],t[n[i]],r[n[i]])};jB.supportsDescriptors=!!NB;var VB=jB,UB={exports:{}},Iae=Object,Pae=Error,Aae=EvalError,Rae=RangeError,Dae=ReferenceError,Mae=URIError,HB=Math.abs,GB=Math.floor,zae=Math.max,Lae=Math.min,Oae=Math.pow,iS,HD;function WB(){return HD||(HD=1,iS=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(var l in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var h=Object.getOwnPropertySymbols(t);if(h.length!==1||h[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(t,r);if(s.value!==i||s.enumerable!==!0)return!1}return!0}),iS}var oS,GD;function Hb(){if(GD)return oS;GD=1;var e=typeof Symbol<"u"&&Symbol,t=WB();return oS=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},oS}var $ae="Function.prototype.bind called on incompatible ",Bae=Object.prototype.toString,Fae=Math.max,Nae="[object Function]",WD=function(t,r){for(var n=[],i=0;i<t.length;i+=1)n[i]=t[i];for(var l=0;l<r.length;l+=1)n[l+t.length]=r[l];return n},jae=function(t,r){for(var n=[],i=r,l=0;i<t.length;i+=1,l+=1)n[l]=t[i];return n},Vae=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r},Uae=function(t){var r=this;if(typeof r!="function"||Bae.apply(r)!==Nae)throw new TypeError($ae+r);for(var n=jae(arguments,1),i,l=function(){if(this instanceof i){var S=r.apply(this,WD(n,arguments));return Object(S)===S?S:this}return r.apply(t,WD(n,arguments))},h=Fae(0,r.length-n.length),s=[],m=0;m<h;m++)s[m]="$"+m;if(i=Function("binder","return function ("+Vae(s,",")+"){ return binder.apply(this,arguments); }")(l),r.prototype){var y=function(){};y.prototype=r.prototype,i.prototype=new y,y.prototype=null}return i},Hae=Uae,kv=Function.prototype.bind||Hae,cE=Function.prototype.call,uE=Function.prototype.apply,Gae=typeof Reflect<"u"&&Reflect&&Reflect.apply,Wae=kv,qae=uE,Zae=cE,Kae=Gae,qB=Kae||Wae.call(Zae,qae),Xae=kv,Yae=Rr,Jae=cE,Qae=qB,dE=function(t){if(t.length<1||typeof t[0]!="function")throw new Yae("a function is required");return Qae(Xae,Jae,t)},aS,qD;function ese(){if(qD)return aS;qD=1;var e=dE,t=Yf,r;try{r=[].__proto__===Array.prototype}catch(h){if(!h||typeof h!="object"||!("code"in h)||h.code!=="ERR_PROTO_ACCESS")throw h}var n=!!r&&t&&t(Object.prototype,"__proto__"),i=Object,l=i.getPrototypeOf;return aS=n&&typeof n.get=="function"?e([n.get]):typeof l=="function"?function(s){return l(s==null?s:i(s))}:!1,aS}var sS,ZD;function dc(){if(ZD)return sS;ZD=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=kv;return sS=r.call(e,t),sS}var Xr,ZB=Iae,tse=Pae,rse=Aae,nse=Rae,ise=Dae,Ff=yu,pf=Rr,ose=Mae,ase=HB,sse=GB,lse=zae,cse=Lae,use=Oae,KB=Function,lS=function(e){try{return KB('"use strict"; return ('+e+").constructor;")()}catch{}},Ug=Yf,dse=Cv,cS=function(){throw new pf},hse=Ug?function(){try{return arguments.callee,cS}catch{try{return Ug(arguments,"callee").get}catch{return cS}}}():cS,Dh=Hb()(),fse=ese(),zi=typeof Reflect=="function"&&Reflect.getPrototypeOf||ZB.getPrototypeOf||fse,XB=uE,Tv=cE,$h={},pse=typeof Uint8Array>"u"||!zi?Xr:zi(Uint8Array),ad={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Xr:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Xr:ArrayBuffer,"%ArrayIteratorPrototype%":Dh&&zi?zi([][Symbol.iterator]()):Xr,"%AsyncFromSyncIteratorPrototype%":Xr,"%AsyncFunction%":$h,"%AsyncGenerator%":$h,"%AsyncGeneratorFunction%":$h,"%AsyncIteratorPrototype%":$h,"%Atomics%":typeof Atomics>"u"?Xr:Atomics,"%BigInt%":typeof BigInt>"u"?Xr:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Xr:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Xr:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Xr:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":tse,"%eval%":eval,"%EvalError%":rse,"%Float32Array%":typeof Float32Array>"u"?Xr:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Xr:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Xr:FinalizationRegistry,"%Function%":KB,"%GeneratorFunction%":$h,"%Int8Array%":typeof Int8Array>"u"?Xr:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Xr:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Xr:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Dh&&zi?zi(zi([][Symbol.iterator]())):Xr,"%JSON%":typeof JSON=="object"?JSON:Xr,"%Map%":typeof Map>"u"?Xr:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Dh||!zi?Xr:zi(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":ZB,"%Object.getOwnPropertyDescriptor%":Ug,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Xr:Promise,"%Proxy%":typeof Proxy>"u"?Xr:Proxy,"%RangeError%":nse,"%ReferenceError%":ise,"%Reflect%":typeof Reflect>"u"?Xr:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Xr:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Dh||!zi?Xr:zi(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Xr:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Dh&&zi?zi(""[Symbol.iterator]()):Xr,"%Symbol%":Dh?Symbol:Xr,"%SyntaxError%":Ff,"%ThrowTypeError%":hse,"%TypedArray%":pse,"%TypeError%":pf,"%Uint8Array%":typeof Uint8Array>"u"?Xr:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Xr:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Xr:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Xr:Uint32Array,"%URIError%":ose,"%WeakMap%":typeof WeakMap>"u"?Xr:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Xr:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Xr:WeakSet,"%Function.prototype.call%":Tv,"%Function.prototype.apply%":XB,"%Object.defineProperty%":dse,"%Math.abs%":ase,"%Math.floor%":sse,"%Math.max%":lse,"%Math.min%":cse,"%Math.pow%":use};if(zi)try{null.error}catch(e){var mse=zi(zi(e));ad["%Error.prototype%"]=mse}var gse=function e(t){var r;if(t==="%AsyncFunction%")r=lS("async function () {}");else if(t==="%GeneratorFunction%")r=lS("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=lS("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&zi&&(r=zi(i.prototype))}return ad[t]=r,r},KD={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ev=kv,ox=dc(),vse=Ev.call(Tv,Array.prototype.concat),yse=Ev.call(XB,Array.prototype.splice),XD=Ev.call(Tv,String.prototype.replace),ax=Ev.call(Tv,String.prototype.slice),_se=Ev.call(Tv,RegExp.prototype.exec),xse=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,bse=/\\(\\)?/g,wse=function(t){var r=ax(t,0,1),n=ax(t,-1);if(r==="%"&&n!=="%")throw new Ff("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Ff("invalid intrinsic syntax, expected opening `%`");var i=[];return XD(t,xse,function(l,h,s,m){i[i.length]=s?XD(m,bse,"$1"):h||l}),i},Sse=function(t,r){var n=t,i;if(ox(KD,n)&&(i=KD[n],n="%"+i[0]+"%"),ox(ad,n)){var l=ad[n];if(l===$h&&(l=gse(n)),typeof l>"u"&&!r)throw new pf("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:l}}throw new Ff("intrinsic "+t+" does not exist!")},wo=function(t,r){if(typeof t!="string"||t.length===0)throw new pf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new pf('"allowMissing" argument must be a boolean');if(_se(/^%?[^%]*%?$/,t)===null)throw new Ff("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=wse(t),i=n.length>0?n[0]:"",l=Sse("%"+i+"%",r),h=l.name,s=l.value,m=!1,y=l.alias;y&&(i=y[0],yse(n,vse([0,1],y)));for(var S=1,T=!0;S<n.length;S+=1){var I=n[S],D=ax(I,0,1),F=ax(I,-1);if((D==='"'||D==="'"||D==="`"||F==='"'||F==="'"||F==="`")&&D!==F)throw new Ff("property names with quotes must have matching quotes");if((I==="constructor"||!T)&&(m=!0),i+="."+I,h="%"+i+"%",ox(ad,h))s=ad[h];else if(s!=null){if(!(I in s)){if(!r)throw new pf("base intrinsic for "+t+" exists, but the property is not available.");return}if(Ug&&S+1>=n.length){var V=Ug(s,I);T=!!V,T&&"get"in V&&!("originalValue"in V.get)?s=V.get:s=s[I]}else T=ox(s,I),s=s[I];T&&!m&&(ad[h]=s)}}return s},Cse=wo,YD=BB,kse=lE(),JD=Yf,QD=Rr,Tse=Cse("%Math.floor%"),Ese=function(t,r){if(typeof t!="function")throw new QD("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Tse(r)!==r)throw new QD("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,l=!0;if("length"in t&&JD){var h=JD(t,"length");h&&!h.configurable&&(i=!1),h&&!h.writable&&(l=!1)}return(i||l||!n)&&(kse?YD(t,"length",r,!0,!0):YD(t,"length",r)),t},Ise=kv,Pse=uE,Ase=qB,Rse=function(){return Ase(Ise,Pse,arguments)};(function(e){var t=Ese,r=Cv,n=dE,i=Rse;e.exports=function(h){var s=n(arguments),m=h.length-(arguments.length-1);return t(s,1+(m>0?m:0),!0)},r?r(e.exports,"apply",{value:i}):e.exports.apply=i})(UB);var YB=UB.exports,Ld=function(t){return typeof t=="string"||typeof t=="symbol"},Dse=Rr,Sm=dc(),Mse={__proto__:null,"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0},Od=function(t){if(!t||typeof t!="object")return!1;for(var r in t)if(Sm(t,r)&&!Mse[r])return!1;var n=Sm(t,"[[Value]]")||Sm(t,"[[Writable]]"),i=Sm(t,"[[Get]]")||Sm(t,"[[Set]]");if(n&&i)throw new Dse("Property Descriptors may not be both accessor and data descriptors");return!0},zse=Rr,eM=dc(),Lse=Od,hE=function(t){if(typeof t>"u")return!1;if(!Lse(t))throw new zse("Assertion failed: `Desc` must be a Property Descriptor");return!(!eM(t,"[[Get]]")&&!eM(t,"[[Set]]"))},uS,tM;function Ose(){return tM||(tM=1,uS=function(t){return t===null||typeof t!="function"&&typeof t!="object"}),uS}var JB=wo,$se=JB("%Object.preventExtensions%",!0),Bse=JB("%Object.isExtensible%",!0),rM=Ose(),Fse=$se?function(t){return!rM(t)&&Bse(t)}:function(t){return!rM(t)},QB=Function.prototype.toString,ef=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,N2,Y0;if(typeof ef=="function"&&typeof Object.defineProperty=="function")try{N2=Object.defineProperty({},"length",{get:function(){throw Y0}}),Y0={},ef(function(){throw 42},null,N2)}catch(e){e!==Y0&&(ef=null)}else ef=null;var Nse=/^\s*class\b/,j2=function(t){try{var r=QB.call(t);return Nse.test(r)}catch{return!1}},dS=function(t){try{return j2(t)?!1:(QB.call(t),!0)}catch{return!1}},J0=Object.prototype.toString,jse="[object Object]",Vse="[object Function]",Use="[object GeneratorFunction]",Hse="[object HTMLAllCollection]",Gse="[object HTML document.all class]",Wse="[object HTMLCollection]",qse=typeof Symbol=="function"&&!!Symbol.toStringTag,Zse=!(0 in[,]),V2=function(){return!1};if(typeof document=="object"){var Kse=document.all;J0.call(Kse)===J0.call(document.all)&&(V2=function(t){if((Zse||!t)&&(typeof t>"u"||typeof t=="object"))try{var r=J0.call(t);return(r===Hse||r===Gse||r===Wse||r===jse)&&t("")==null}catch{}return!1})}var e4=ef?function(t){if(V2(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{ef(t,null,N2)}catch(r){if(r!==Y0)return!1}return!j2(t)&&dS(t)}:function(t){if(V2(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(qse)return dS(t);if(j2(t))return!1;var r=J0.call(t);return r!==Vse&&r!==Use&&!/^\[object HTML/.test(r)?!1:dS(t)},Iv=e4,t4=function(t){return!!t},Fo=function(t){return!!t&&(typeof t=="function"||typeof t=="object")},Ws=dc(),g0=Rr,nM=Iv,hS=t4,Xse=Fo,Yse=function(t){if(!Xse(t))throw new g0("ToPropertyDescriptor requires an object");var r={};if(Ws(t,"enumerable")&&(r["[[Enumerable]]"]=hS(t.enumerable)),Ws(t,"configurable")&&(r["[[Configurable]]"]=hS(t.configurable)),Ws(t,"value")&&(r["[[Value]]"]=t.value),Ws(t,"writable")&&(r["[[Writable]]"]=hS(t.writable)),Ws(t,"get")){var n=t.get;if(typeof n<"u"&&!nM(n))throw new g0("getter must be a function");r["[[Get]]"]=n}if(Ws(t,"set")){var i=t.set;if(typeof i<"u"&&!nM(i))throw new g0("setter must be a function");r["[[Set]]"]=i}if((Ws(r,"[[Get]]")||Ws(r,"[[Set]]"))&&(Ws(r,"[[Value]]")||Ws(r,"[[Writable]]")))throw new g0("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return r},fS,iM;function fE(){return iM||(iM=1,fS=Number.isNaN||function(t){return t!==t}),fS}var pS,oM;function pE(){if(oM)return pS;oM=1;var e=fE();return pS=function(r,n){return r===n?r===0?1/r===1/n:!0:e(r)&&e(n)},pS}var r4=wo,n4=dE,Jse=n4([r4("%String.prototype.indexOf%")]),ra=function(t,r){var n=r4(t,!!r);return typeof n=="function"&&Jse(t,".prototype.")>-1?n4([n]):n},mS,aM;function mE(){if(aM)return mS;aM=1;var e=wo,t=e("%Array%"),r=!t.isArray&&ra("Object.prototype.toString");return mS=t.isArray||function(i){return r(i)==="[object Array]"},mS}var Qse=lE,sM=Cv,i4=Qse.hasArrayLengthDefineBug(),ele=i4&&mE(),tle=ra,rle=tle("Object.prototype.propertyIsEnumerable"),nle=function(t,r,n,i,l,h){if(!sM){if(!t(h)||!h["[[Configurable]]"]||!h["[[Writable]]"]||l in i&&rle(i,l)!==!!h["[[Enumerable]]"])return!1;var s=h["[[Value]]"];return i[l]=s,r(i[l],s)}return i4&&l==="length"&&"[[Value]]"in h&&ele(i)&&i.length!==h["[[Value]]"]?(i.length=h["[[Value]]"],i.length===h["[[Value]]"]):(sM(i,l,n(h)),!0)},ile=Od,ole=function(t,r){return ile(r)&&"[[Enumerable]]"in r&&"[[Configurable]]"in r&&(t.IsAccessorDescriptor(r)||t.IsDataDescriptor(r))},ale=function(t){if(typeof t>"u")return t;var r={};return"[[Value]]"in t&&(r.value=t["[[Value]]"]),"[[Writable]]"in t&&(r.writable=!!t["[[Writable]]"]),"[[Get]]"in t&&(r.get=t["[[Get]]"]),"[[Set]]"in t&&(r.set=t["[[Set]]"]),"[[Enumerable]]"in t&&(r.enumerable=!!t["[[Enumerable]]"]),"[[Configurable]]"in t&&(r.configurable=!!t["[[Configurable]]"]),r},sle=Rr,lle=Od,cle=ale,ule=function(t){if(typeof t<"u"&&!lle(t))throw new sle("Assertion failed: `Desc` must be a Property Descriptor");return cle(t)},dle=Rr,lM=dc(),hle=Od,o4=function(t){if(typeof t>"u")return!1;if(!hle(t))throw new dle("Assertion failed: `Desc` must be a Property Descriptor");return!(!lM(t,"[[Value]]")&&!lM(t,"[[Writable]]"))},fle=Rr,ple=hE,mle=o4,gle=Od,vle=function(t){if(typeof t>"u")return!1;if(!gle(t))throw new fle("Assertion failed: `Desc` must be a Property Descriptor");return!ple(t)&&!mle(t)},yle=Fo,_le=function(t){if(t===null)return"Null";if(typeof t>"u")return"Undefined";if(yle(t))return"Object";if(typeof t=="number")return"Number";if(typeof t=="boolean")return"Boolean";if(typeof t=="string")return"String"},xle=_le,ble=function(t){return typeof t=="symbol"?"Symbol":typeof t=="bigint"?"BigInt":xle(t)},Mh=Rr,Cm=nle,wle=ole,cM=Od,km=ule,Uu=hE,Ac=o4,Sle=vle,Cle=Ld,qs=pE(),kle=ble,Tle=Fo,Ele=function(t,r,n,i,l){var h=kle(t);if(typeof t<"u"&&!Tle(t))throw new Mh("Assertion failed: O must be undefined or an Object");if(!Cle(r))throw new Mh("Assertion failed: P must be a Property Key");if(typeof n!="boolean")throw new Mh("Assertion failed: extensible must be a Boolean");if(!cM(i))throw new Mh("Assertion failed: Desc must be a Property Descriptor");if(typeof l<"u"&&!cM(l))throw new Mh("Assertion failed: current must be a Property Descriptor, or undefined");if(typeof l>"u")return n?h==="Undefined"?!0:Uu(i)?Cm(Ac,qs,km,t,r,i):Cm(Ac,qs,km,t,r,{"[[Configurable]]":!!i["[[Configurable]]"],"[[Enumerable]]":!!i["[[Enumerable]]"],"[[Value]]":i["[[Value]]"],"[[Writable]]":!!i["[[Writable]]"]}):!1;if(!wle({IsAccessorDescriptor:Uu,IsDataDescriptor:Ac},l))throw new Mh("`current`, when present, must be a fully populated and valid Property Descriptor");if(!l["[[Configurable]]"]){if("[[Configurable]]"in i&&i["[[Configurable]]"]||"[[Enumerable]]"in i&&!qs(i["[[Enumerable]]"],l["[[Enumerable]]"])||!Sle(i)&&!qs(Uu(i),Uu(l)))return!1;if(Uu(l)){if("[[Get]]"in i&&!qs(i["[[Get]]"],l["[[Get]]"])||"[[Set]]"in i&&!qs(i["[[Set]]"],l["[[Set]]"]))return!1}else if(!l["[[Writable]]"]&&("[[Writable]]"in i&&i["[[Writable]]"]||"[[Value]]"in i&&!qs(i["[[Value]]"],l["[[Value]]"])))return!1}if(h!=="Undefined"){var s,m;return Ac(l)&&Uu(i)?(s=("[[Configurable]]"in i?i:l)["[[Configurable]]"],m=("[[Enumerable]]"in i?i:l)["[[Enumerable]]"],Cm(Ac,qs,km,t,r,{"[[Configurable]]":!!s,"[[Enumerable]]":!!m,"[[Get]]":("[[Get]]"in i?i:l)["[[Get]]"],"[[Set]]":("[[Set]]"in i?i:l)["[[Set]]"]})):Uu(l)&&Ac(i)?(s=("[[Configurable]]"in i?i:l)["[[Configurable]]"],m=("[[Enumerable]]"in i?i:l)["[[Enumerable]]"],Cm(Ac,qs,km,t,r,{"[[Configurable]]":!!s,"[[Enumerable]]":!!m,"[[Value]]":("[[Value]]"in i?i:l)["[[Value]]"],"[[Writable]]":!!("[[Writable]]"in i?i:l)["[[Writable]]"]})):Cm(Ac,qs,km,t,r,i)}return!0},uM=Yf,dM=yu,gS=Rr,Ile=Od,Ple=hE,Ale=Fse,Rle=Ld,Dle=Yse,Mle=pE(),zle=Ele,Lle=Fo,Ole=function(t,r,n){if(!Lle(t))throw new gS("Assertion failed: O must be an Object");if(!Rle(r))throw new gS("Assertion failed: P must be a Property Key");if(!Ile(n))throw new gS("Assertion failed: Desc must be a Property Descriptor");if(!uM){if(Ple(n))throw new dM("This environment does not support accessor property descriptors.");var i=!(r in t)&&n["[[Writable]]"]&&n["[[Enumerable]]"]&&n["[[Configurable]]"]&&"[[Value]]"in n,l=r in t&&(!("[[Configurable]]"in n)||n["[[Configurable]]"])&&(!("[[Enumerable]]"in n)||n["[[Enumerable]]"])&&(!("[[Writable]]"in n)||n["[[Writable]]"])&&"[[Value]]"in n;if(i||l)return t[r]=n["[[Value]]"],Mle(t[r],n["[[Value]]"]);throw new dM("This environment does not support defining non-writable, non-enumerable, or non-configurable properties")}var h=uM(t,r),s=h&&Dle(h),m=Ale(t);return zle(t,r,m,n,s)},hM=Rr,$le=Ld,Ble=Ole,Fle=Fo,Nle=function(t,r,n){if(!Fle(t))throw new hM("Assertion failed: Type(O) is not Object");if(!$le(r))throw new hM("Assertion failed: P is not a Property Key");var i={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":n,"[[Writable]]":!0};return Ble(t,r,i)},vS=Rr,jle=Nle,Vle=Fo,Ule=Ld,Hle=function(t,r,n){if(!Vle(t))throw new vS("Assertion failed: Type(O) is not Object");if(!Ule(r))throw new vS("Assertion failed: P is not a Property Key");var i=jle(t,r,n);if(!i)throw new vS("unable to create data property")},yS,fM;function gE(){return fM||(fM=1,yS=mE()),yS}var vE=function(t,r){for(var n=0;n<t.length;n+=1)r(t[n],n,t)};const Gle={},Wle=Object.freeze(Object.defineProperty({__proto__:null,default:Gle},Symbol.toStringTag,{value:"Module"})),qle=oc(Wle);var _S,pM;function _u(){if(pM)return _S;pM=1;var e=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=e&&t&&typeof t.get=="function"?t.get:null,n=e&&Map.prototype.forEach,i=typeof Set=="function"&&Set.prototype,l=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,h=i&&l&&typeof l.get=="function"?l.get:null,s=i&&Set.prototype.forEach,m=typeof WeakMap=="function"&&WeakMap.prototype,y=m?WeakMap.prototype.has:null,S=typeof WeakSet=="function"&&WeakSet.prototype,T=S?WeakSet.prototype.has:null,I=typeof WeakRef=="function"&&WeakRef.prototype,D=I?WeakRef.prototype.deref:null,F=Boolean.prototype.valueOf,V=Object.prototype.toString,Z=Function.prototype.toString,z=String.prototype.match,O=String.prototype.slice,L=String.prototype.replace,te=String.prototype.toUpperCase,j=String.prototype.toLowerCase,$=RegExp.prototype.test,J=Array.prototype.concat,ie=Array.prototype.join,xe=Array.prototype.slice,ge=Math.floor,we=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Te=Object.getOwnPropertySymbols,Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,We=typeof Symbol=="function"&&typeof Symbol.iterator=="object",De=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===We||!0)?Symbol.toStringTag:null,Se=Object.prototype.propertyIsEnumerable,Fe=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Ee){return Ee.__proto__}:null);function Ce(Ee,Ve){if(Ee===1/0||Ee===-1/0||Ee!==Ee||Ee&&Ee>-1e3&&Ee<1e3||$.call(/e/,Ve))return Ve;var Xe=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Ee=="number"){var Tt=Ee<0?-ge(-Ee):ge(Ee);if(Tt!==Ee){var gt=String(Tt),Rt=O.call(Ve,gt.length+1);return L.call(gt,Xe,"$&_")+"."+L.call(L.call(Rt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return L.call(Ve,Xe,"$&_")}var Ne=qle,Ye=Ne.custom,at=wr(Ye)?Ye:null,st={__proto__:null,double:'"',single:"'"},Dt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};_S=function Ee(Ve,Xe,Tt,gt){var Rt=Xe||{};if(Et(Rt,"quoteStyle")&&!Et(st,Rt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Et(Rt,"maxStringLength")&&(typeof Rt.maxStringLength=="number"?Rt.maxStringLength<0&&Rt.maxStringLength!==1/0:Rt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var vr=Et(Rt,"customInspect")?Rt.customInspect:!0;if(typeof vr!="boolean"&&vr!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Et(Rt,"indent")&&Rt.indent!==null&&Rt.indent!=="	"&&!(parseInt(Rt.indent,10)===Rt.indent&&Rt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Et(Rt,"numericSeparator")&&typeof Rt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Bt=Rt.numericSeparator;if(typeof Ve>"u")return"undefined";if(Ve===null)return"null";if(typeof Ve=="boolean")return Ve?"true":"false";if(typeof Ve=="string")return Mr(Ve,Rt);if(typeof Ve=="number"){if(Ve===0)return 1/0/Ve>0?"0":"-0";var mr=String(Ve);return Bt?Ce(Ve,mr):mr}if(typeof Ve=="bigint"){var ue=String(Ve)+"n";return Bt?Ce(Ve,ue):ue}var Y=typeof Rt.depth>"u"?5:Rt.depth;if(typeof Tt>"u"&&(Tt=0),Tt>=Y&&Y>0&&typeof Ve=="object")return Ct(Ve)?"[Array]":"[Object]";var Q=je(Rt,Tt);if(typeof gt>"u")gt=[];else if(Dr(gt,Ve)>=0)return"[Circular]";function N(ht,zt,pr){if(zt&&(gt=xe.call(gt),gt.push(zt)),pr){var ir={depth:Rt.depth};return Et(Rt,"quoteStyle")&&(ir.quoteStyle=Rt.quoteStyle),Ee(ht,ir,Tt+1,gt)}return Ee(ht,Rt,Tt+1,gt)}if(typeof Ve=="function"&&!Ze(Ve)){var X=Gt(Ve),re=bt(Ve,N);return"[Function"+(X?": "+X:" (anonymous)")+"]"+(re.length>0?" { "+ie.call(re,", ")+" }":"")}if(wr(Ve)){var he=We?L.call(String(Ve),/^(Symbol\(.*\))_[^)]*$/,"$1"):Pe.call(Ve);return typeof Ve=="object"&&!We?fr(he):he}if(Cr(Ve)){for(var pe="<"+j.call(String(Ve.nodeName)),se=Ve.attributes||[],_e=0;_e<se.length;_e++)pe+=" "+se[_e].name+"="+St($t(se[_e].value),"double",Rt);return pe+=">",Ve.childNodes&&Ve.childNodes.length&&(pe+="..."),pe+="</"+j.call(String(Ve.nodeName))+">",pe}if(Ct(Ve)){if(Ve.length===0)return"[]";var Ae=bt(Ve,N);return Q&&!tn(Ae)?"["+kt(Ae,Q)+"]":"[ "+ie.call(Ae,", ")+" ]"}if(rt(Ve)){var Le=bt(Ve,N);return!("cause"in Error.prototype)&&"cause"in Ve&&!Se.call(Ve,"cause")?"{ ["+String(Ve)+"] "+ie.call(J.call("[cause]: "+N(Ve.cause),Le),", ")+" }":Le.length===0?"["+String(Ve)+"]":"{ ["+String(Ve)+"] "+ie.call(Le,", ")+" }"}if(typeof Ve=="object"&&vr){if(at&&typeof Ve[at]=="function"&&Ne)return Ne(Ve,{depth:Y-Tt});if(vr!=="symbol"&&typeof Ve.inspect=="function")return Ve.inspect()}if(He(Ve)){var Re=[];return n&&n.call(Ve,function(ht,zt){Re.push(N(zt,Ve,!0)+" => "+N(ht,Ve))}),dr("Map",r.call(Ve),Re,Q)}if(Jt(Ve)){var ot=[];return s&&s.call(Ve,function(ht){ot.push(N(ht,Ve))}),dr("Set",h.call(Ve),ot,Q)}if(xr(Ve))return Qt("WeakMap");if(or(Ve))return Qt("WeakSet");if(Tr(Ve))return Qt("WeakRef");if(sr(Ve))return fr(N(Number(Ve)));if(Lr(Ve))return fr(N(we.call(Ve)));if(rr(Ve))return fr(F.call(Ve));if(pt(Ve))return fr(N(String(Ve)));if(typeof window<"u"&&Ve===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Ve===globalThis||typeof rC<"u"&&Ve===rC)return"{ [object globalThis] }";if(!it(Ve)&&!Ze(Ve)){var dt=bt(Ve,N),ut=Fe?Fe(Ve)===Object.prototype:Ve instanceof Object||Ve.constructor===Object,It=Ve instanceof Object?"":"null prototype",Oe=!ut&&De&&Object(Ve)===Ve&&De in Ve?O.call(hr(Ve),8,-1):It?"Object":"",$e=ut||typeof Ve.constructor!="function"?"":Ve.constructor.name?Ve.constructor.name+" ":"",tt=$e+(Oe||It?"["+ie.call(J.call([],Oe||[],It||[]),": ")+"] ":"");return dt.length===0?tt+"{}":Q?tt+"{"+kt(dt,Q)+"}":tt+"{ "+ie.call(dt,", ")+" }"}return String(Ve)};function St(Ee,Ve,Xe){var Tt=Xe.quoteStyle||Ve,gt=st[Tt];return gt+Ee+gt}function $t(Ee){return L.call(String(Ee),/"/g,"&quot;")}function Ct(Ee){return hr(Ee)==="[object Array]"&&(!De||!(typeof Ee=="object"&&De in Ee))}function it(Ee){return hr(Ee)==="[object Date]"&&(!De||!(typeof Ee=="object"&&De in Ee))}function Ze(Ee){return hr(Ee)==="[object RegExp]"&&(!De||!(typeof Ee=="object"&&De in Ee))}function rt(Ee){return hr(Ee)==="[object Error]"&&(!De||!(typeof Ee=="object"&&De in Ee))}function pt(Ee){return hr(Ee)==="[object String]"&&(!De||!(typeof Ee=="object"&&De in Ee))}function sr(Ee){return hr(Ee)==="[object Number]"&&(!De||!(typeof Ee=="object"&&De in Ee))}function rr(Ee){return hr(Ee)==="[object Boolean]"&&(!De||!(typeof Ee=="object"&&De in Ee))}function wr(Ee){if(We)return Ee&&typeof Ee=="object"&&Ee instanceof Symbol;if(typeof Ee=="symbol")return!0;if(!Ee||typeof Ee!="object"||!Pe)return!1;try{return Pe.call(Ee),!0}catch{}return!1}function Lr(Ee){if(!Ee||typeof Ee!="object"||!we)return!1;try{return we.call(Ee),!0}catch{}return!1}var nr=Object.prototype.hasOwnProperty||function(Ee){return Ee in this};function Et(Ee,Ve){return nr.call(Ee,Ve)}function hr(Ee){return V.call(Ee)}function Gt(Ee){if(Ee.name)return Ee.name;var Ve=z.call(Z.call(Ee),/^function\s*([\w$]+)/);return Ve?Ve[1]:null}function Dr(Ee,Ve){if(Ee.indexOf)return Ee.indexOf(Ve);for(var Xe=0,Tt=Ee.length;Xe<Tt;Xe++)if(Ee[Xe]===Ve)return Xe;return-1}function He(Ee){if(!r||!Ee||typeof Ee!="object")return!1;try{r.call(Ee);try{h.call(Ee)}catch{return!0}return Ee instanceof Map}catch{}return!1}function xr(Ee){if(!y||!Ee||typeof Ee!="object")return!1;try{y.call(Ee,y);try{T.call(Ee,T)}catch{return!0}return Ee instanceof WeakMap}catch{}return!1}function Tr(Ee){if(!D||!Ee||typeof Ee!="object")return!1;try{return D.call(Ee),!0}catch{}return!1}function Jt(Ee){if(!h||!Ee||typeof Ee!="object")return!1;try{h.call(Ee);try{r.call(Ee)}catch{return!0}return Ee instanceof Set}catch{}return!1}function or(Ee){if(!T||!Ee||typeof Ee!="object")return!1;try{T.call(Ee,T);try{y.call(Ee,y)}catch{return!0}return Ee instanceof WeakSet}catch{}return!1}function Cr(Ee){return!Ee||typeof Ee!="object"?!1:typeof HTMLElement<"u"&&Ee instanceof HTMLElement?!0:typeof Ee.nodeName=="string"&&typeof Ee.getAttribute=="function"}function Mr(Ee,Ve){if(Ee.length>Ve.maxStringLength){var Xe=Ee.length-Ve.maxStringLength,Tt="... "+Xe+" more character"+(Xe>1?"s":"");return Mr(O.call(Ee,0,Ve.maxStringLength),Ve)+Tt}var gt=Dt[Ve.quoteStyle||"single"];gt.lastIndex=0;var Rt=L.call(L.call(Ee,gt,"\\$1"),/[\x00-\x1f]/g,Sr);return St(Rt,"single",Ve)}function Sr(Ee){var Ve=Ee.charCodeAt(0),Xe={8:"b",9:"t",10:"n",12:"f",13:"r"}[Ve];return Xe?"\\"+Xe:"\\x"+(Ve<16?"0":"")+te.call(Ve.toString(16))}function fr(Ee){return"Object("+Ee+")"}function Qt(Ee){return Ee+" { ? }"}function dr(Ee,Ve,Xe,Tt){var gt=Tt?kt(Xe,Tt):ie.call(Xe,", ");return Ee+" ("+Ve+") {"+gt+"}"}function tn(Ee){for(var Ve=0;Ve<Ee.length;Ve++)if(Dr(Ee[Ve],`
`)>=0)return!1;return!0}function je(Ee,Ve){var Xe;if(Ee.indent==="	")Xe="	";else if(typeof Ee.indent=="number"&&Ee.indent>0)Xe=ie.call(Array(Ee.indent+1)," ");else return null;return{base:Xe,prev:ie.call(Array(Ve+1),Xe)}}function kt(Ee,Ve){if(Ee.length===0)return"";var Xe=`
`+Ve.prev+Ve.base;return Xe+ie.call(Ee,","+Xe)+`
`+Ve.prev}function bt(Ee,Ve){var Xe=Ct(Ee),Tt=[];if(Xe){Tt.length=Ee.length;for(var gt=0;gt<Ee.length;gt++)Tt[gt]=Et(Ee,gt)?Ve(Ee[gt],Ee):""}var Rt=typeof Te=="function"?Te(Ee):[],vr;if(We){vr={};for(var Bt=0;Bt<Rt.length;Bt++)vr["$"+Rt[Bt]]=Rt[Bt]}for(var mr in Ee)Et(Ee,mr)&&(Xe&&String(Number(mr))===mr&&mr<Ee.length||We&&vr["$"+mr]instanceof Symbol||($.call(/[^\w$]/,mr)?Tt.push(Ve(mr,Ee)+": "+Ve(Ee[mr],Ee)):Tt.push(mr+": "+Ve(Ee[mr],Ee))));if(typeof Te=="function")for(var ue=0;ue<Rt.length;ue++)Se.call(Ee,Rt[ue])&&Tt.push("["+Ve(Rt[ue])+"]: "+Ve(Ee[Rt[ue]],Ee));return Tt}return _S}var xS,mM;function Zle(){if(mM)return xS;mM=1;var e=_u(),t=Rr,r=function(s,m,y){for(var S=s,T;(T=S.next)!=null;S=T)if(T.key===m)return S.next=T.next,y||(T.next=s.next,s.next=T),T},n=function(s,m){if(s){var y=r(s,m);return y&&y.value}},i=function(s,m,y){var S=r(s,m);S?S.value=y:s.next={key:m,next:s.next,value:y}},l=function(s,m){return s?!!r(s,m):!1},h=function(s,m){if(s)return r(s,m,!0)};return xS=function(){var m,y={assert:function(S){if(!y.has(S))throw new t("Side channel does not contain "+e(S))},delete:function(S){var T=m&&m.next,I=h(m,S);return I&&T&&T===I&&(m=void 0),!!I},get:function(S){return n(m,S)},has:function(S){return l(m,S)},set:function(S,T){m||(m={next:void 0}),i(m,S,T)}};return y},xS}var bS,gM;function a4(){if(gM)return bS;gM=1;var e=wo,t=ra,r=_u(),n=Rr,i=e("%Map%",!0),l=t("Map.prototype.get",!0),h=t("Map.prototype.set",!0),s=t("Map.prototype.has",!0),m=t("Map.prototype.delete",!0),y=t("Map.prototype.size",!0);return bS=!!i&&function(){var T,I={assert:function(D){if(!I.has(D))throw new n("Side channel does not contain "+r(D))},delete:function(D){if(T){var F=m(T,D);return y(T)===0&&(T=void 0),F}return!1},get:function(D){if(T)return l(T,D)},has:function(D){return T?s(T,D):!1},set:function(D,F){T||(T=new i),h(T,D,F)}};return I},bS}var wS,vM;function Kle(){if(vM)return wS;vM=1;var e=wo,t=ra,r=_u(),n=a4(),i=Rr,l=e("%WeakMap%",!0),h=t("WeakMap.prototype.get",!0),s=t("WeakMap.prototype.set",!0),m=t("WeakMap.prototype.has",!0),y=t("WeakMap.prototype.delete",!0);return wS=l?function(){var T,I,D={assert:function(F){if(!D.has(F))throw new i("Side channel does not contain "+r(F))},delete:function(F){if(l&&F&&(typeof F=="object"||typeof F=="function")){if(T)return y(T,F)}else if(n&&I)return I.delete(F);return!1},get:function(F){return l&&F&&(typeof F=="object"||typeof F=="function")&&T?h(T,F):I&&I.get(F)},has:function(F){return l&&F&&(typeof F=="object"||typeof F=="function")&&T?m(T,F):!!I&&I.has(F)},set:function(F,V){l&&F&&(typeof F=="object"||typeof F=="function")?(T||(T=new l),s(T,F,V)):n&&(I||(I=n()),I.set(F,V))}};return D}:n,wS}var SS,yM;function Xle(){if(yM)return SS;yM=1;var e=Rr,t=_u(),r=Zle(),n=a4(),i=Kle(),l=i||n||r;return SS=function(){var s,m={assert:function(y){if(!m.has(y))throw new e("Side channel does not contain "+t(y))},delete:function(y){return!!s&&s.delete(y)},get:function(y){return s&&s.get(y)},has:function(y){return!!s&&s.has(y)},set:function(y,S){s||(s=l()),s.set(y,S)}};return m},SS}var CS,_M;function yE(){if(_M)return CS;_M=1;var e=dc(),t=Xle()(),r=Rr,n={assert:function(i,l){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`O` is not an object");if(typeof l!="string")throw new r("`slot` must be a string");if(t.assert(i),!n.has(i,l))throw new r("`"+l+"` is not present on `O`")},get:function(i,l){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`O` is not an object");if(typeof l!="string")throw new r("`slot` must be a string");var h=t.get(i);return h&&h["$"+l]},has:function(i,l){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`O` is not an object");if(typeof l!="string")throw new r("`slot` must be a string");var h=t.get(i);return!!h&&e(h,"$"+l)},set:function(i,l,h){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`O` is not an object");if(typeof l!="string")throw new r("`slot` must be a string");var s=t.get(i);s||(s={},t.set(i,s)),s["$"+l]=h}};return Object.freeze&&Object.freeze(n),CS=n,CS}var kS,xM;function Yle(){if(xM)return kS;xM=1;var e={__proto__:null,foo:{}},t={__proto__:e}.foo===e.foo&&!(e instanceof Object);return kS=function(){return t},kS}var Jle=wo,bM=Jle("%Object.create%",!0),wM=Rr,Qle=yu,ece=gE(),tce=vE,rce=Fo,nce=yE(),ice=Yle()(),s4=function(t){if(t!==null&&!rce(t))throw new wM("Assertion failed: `proto` must be null or an object");var r=arguments.length<2?[]:arguments[1];if(!ece(r))throw new wM("Assertion failed: `additionalInternalSlotsList` must be an Array");var n;if(bM)n=bM(t);else if(ice)n={__proto__:t};else{if(t===null)throw new Qle("native Object.create support is required to create null objects");var i=function(){};i.prototype=t,n=new i}return r.length>0&&tce(r,function(l){nce.set(n,l,void 0)}),n},oce=function(t){return t===0&&1/t===-1/0},l4=Number.MAX_SAFE_INTEGER||9007199254740991,TS,SM;function ace(){return SM||(SM=1,TS=function(t,r){for(var n=0;n<t.length;n+=1)if(!r(t[n],n,t))return!1;return!0}),TS}var CM=Rr,sce=ra,kM=sce("Array.prototype.push"),lce=pE(),c4=mE(),cce=ace(),uce=vE,TM=dc(),dce=function(e){return TM(e,"[[Key]]")&&TM(e,"[[Elements]]")&&c4(e["[[Elements]]"])},hce=function(t,r,n){if(!c4(t)||t.length>0&&!cce(t,dce))throw new CM("Assertion failed: `groups` must be a List of Records with [[Key]] and [[Elements]]");var i=0;if(uce(t,function(h){if(lce(h["[[Key]]"],r)){if(i+=1,i>1)throw new CM("Assertion failed: Exactly one element of groups meets this criterion");kM(h["[[Elements]]"],n)}}),i===0){var l={"[[Key]]":r,"[[Elements]]":[n]};kM(t,l)}},fce=wo,pce=ra,mce=Rr,gce=gE(),vce=fce("%Reflect.apply%",!0)||pce("Function.prototype.apply"),Pv=function(t,r){var n=arguments.length>2?arguments[2]:[];if(!gce(n))throw new mce("Assertion failed: optional `argumentsList`, if provided, must be a List");return vce(t,r,n)},ES,EM;function u4(){return EM||(EM=1,ES=function(t){return typeof t=="number"&&t>=55296&&t<=56319}),ES}var IS,IM;function d4(){return IM||(IM=1,IS=function(t){return typeof t=="number"&&t>=56320&&t<=57343}),IS}var PS,PM;function yce(){if(PM)return PS;PM=1;var e=wo,t=Rr,r=e("%String.fromCharCode%"),n=u4(),i=d4();return PS=function(h,s){if(!n(h)||!i(s))throw new t("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code");return r(h)+r(s)},PS}var AS,AM;function _ce(){if(AM)return AS;AM=1;var e=Rr,t=ra,r=u4(),n=d4(),i=yce(),l=t("String.prototype.charAt"),h=t("String.prototype.charCodeAt");return AS=function(m,y){if(typeof m!="string")throw new e("Assertion failed: `string` must be a String");var S=m.length;if(y<0||y>=S)throw new e("Assertion failed: `position` must be >= 0, and < the length of `string`");var T=h(m,y),I=l(m,y),D=r(T),F=n(T);if(!D&&!F)return{"[[CodePoint]]":I,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if(F||y+1===S)return{"[[CodePoint]]":I,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var V=h(m,y+1);return n(V)?{"[[CodePoint]]":i(T,V),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":I,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0}},AS}var RS,RM;function xce(){if(RM)return RS;RM=1;var e=fE();return RS=function(r){return(typeof r=="number"||typeof r=="bigint")&&!e(r)&&r!==1/0&&r!==-1/0},RS}var DS,DM;function bce(){if(DM)return DS;DM=1;var e=HB,t=GB,r=fE(),n=xce();return DS=function(l){if(typeof l!="number"||r(l)||!n(l))return!1;var h=e(l);return t(h)===h},DS}var MS,MM;function wce(){if(MM)return MS;MM=1;var e=_ce(),t=Rr,r=bce(),n=l4;return MS=function(l,h,s){if(typeof l!="string")throw new t("Assertion failed: `S` must be a String");if(!r(h)||h<0||h>n)throw new t("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if(typeof s!="boolean")throw new t("Assertion failed: `unicode` must be a Boolean");if(!s)return h+1;var m=l.length;if(h+1>=m)return h+1;var y=e(l,h);return h+y["[[CodeUnitCount]]"]},MS}var zS,zM;function h4(){if(zM)return zS;zM=1;var e=Rr;return zS=function(r,n){if(typeof n!="boolean")throw new e("Assertion failed: Type(done) is not Boolean");return{value:r,done:n}},zS}var LM=Rr,Sce=_u(),Cce=Fo,kce=Ld,Gb=function(t,r){if(!Cce(t))throw new LM("Assertion failed: Type(O) is not Object");if(!kce(r))throw new LM("Assertion failed: P is not a Property Key, got "+Sce(r));return t[r]},Tce=Rr,Ece=Gb,Ice=t4,Pce=Fo,f4=function(t){if(!Pce(t))throw new Tce("Assertion failed: Type(iterResult) is not Object");return Ice(Ece(t,"done"))},Ace=Rr,Rce=Gb,Dce=Fo,p4=function(t){if(!Dce(t))throw new Ace("Assertion failed: Type(iterResult) is not Object");return Rce(t,"value")},LS,OM;function Mce(){if(OM)return LS;OM=1;var e=wo,t=YB,r=yu,n=e("%Promise.resolve%",!0),i=n&&t(n);return LS=function(h,s){if(!i)throw new r("This environment does not support Promises.");return i(h,s)},LS}var OS,$M;function zce(){if($M)return OS;$M=1;var e=wo,t=yu,r=Rr,n=e("%Promise%",!0),i=ra,l=h4(),h=f4,s=p4,m=Mce(),y=Fo,S=i("Promise.prototype.then",!0);return OS=function(I){if(!y(I))throw new r("Assertion failed: Type(O) is not Object");if(arguments.length>1)throw new t("although AsyncFromSyncIteratorContinuation should take a second argument, it is not used in this implementation");if(!n)throw new t("This environment does not support Promises.");return new n(function(D){var F=h(I),V=s(I),Z=m(n,V),z=function(O){return l(O,F)};D(S(Z,z))})},OS}var Lce=Rr,Oce=_u(),$ce=Ld,Bce=function(t,r){if(!$ce(r))throw new Lce("Assertion failed: P is not a Property Key, got "+Oce(r));return t[r]},BM=Rr,Fce=Bce,Nce=Iv,jce=Ld,FM=_u(),_E=function(t,r){if(!jce(r))throw new BM("Assertion failed: P is not a Property Key");var n=Fce(t,r);if(n!=null){if(!Nce(n))throw new BM(FM(r)+" is not a function: "+FM(n));return n}},$S=dc(),Wb=function(t){return!!t&&typeof t=="object"&&$S(t,"[[Iterator]]")&&$S(t,"[[NextMethod]]")&&$S(t,"[[Done]]")&&typeof t["[[Done]]"]=="boolean"},NM=Rr,jM=Pv,Vce=Fo,Uce=Wb,m4=function(t){if(!Uce(t))throw new NM("Assertion failed: `iteratorRecord` must be an Iterator Record");var r;if(arguments.length<2?r=jM(t["[[NextMethod]]"],t["[[Iterator]]"]):r=jM(t["[[NextMethod]]"],t["[[Iterator]]"],[arguments[1]]),!Vce(r))throw new NM("iterator next must return an object");return r},BS,VM;function Hce(){if(VM)return BS;VM=1;var e=wo,t=yu,r=Rr,n=e("%Promise%",!0),i=zce(),l=Pv,h=h4(),s=Gb,m=_E,y=m4,S=s4,T=Fo,I=Wb,D=yE(),F=e("%AsyncFromSyncIteratorPrototype%",!0)||{next:function(Z){if(!n)throw new t("This environment does not support Promises.");var z=this;D.assert(z,"[[SyncIteratorRecord]]");var O=arguments.length;return new n(function(L){var te=D.get(z,"[[SyncIteratorRecord]]"),j;O>0?j=y(te,Z):j=y(te),L(i(j))})},return:function(){if(!n)throw new t("This environment does not support Promises.");var V=this;D.assert(V,"[[SyncIteratorRecord]]");var Z=arguments.length>0,z=Z?arguments[0]:void 0;return new n(function(O,L){var te=D.get(V,"[[SyncIteratorRecord]]")["[[Iterator]]"],j=m(te,"return");if(typeof j>"u"){var $=h(z,!0);l(O,void 0,[$]);return}var J;if(Z?J=l(j,te,[z]):J=l(j,te),!T(J)){l(L,void 0,[new r("Iterator `return` method returned a non-object value.")]);return}O(i(J))})},throw:function(){if(!n)throw new t("This environment does not support Promises.");var V=this;D.assert(V,"[[SyncIteratorRecord]]");var Z=arguments.length>0,z=Z?arguments[0]:void 0;return new n(function(O,L){var te=D.get(V,"[[SyncIteratorRecord]]")["[[Iterator]]"],j=m(te,"throw");if(typeof j>"u"){l(L,void 0,[z]);return}var $;if(Z?$=l(j,te,[z]):$=l(j,te),!T($)){l(L,void 0,[new r("Iterator `throw` method returned a non-object value.")]);return}O(i($))})}};return BS=function(Z){if(!I(Z))throw new r("Assertion failed: `syncIteratorRecord` must be an Iterator Record");var z=S(F);D.set(z,"[[SyncIteratorRecord]]",Z);var O=s(z,"next");return{"[[Iterator]]":z,"[[NextMethod]]":O,"[[Done]]":!1}},BS}var FS,UM;function Gce(){if(UM)return FS;UM=1;var e=Rr,t=Pv,r=Gb,n=Iv,i=Fo;return FS=function(h,s){if(!n(s))throw new e("method must be a function");var m=t(s,h);if(!i(m))throw new e("iterator must return an object");var y=r(m,"next");return{"[[Iterator]]":m,"[[NextMethod]]":y,"[[Done]]":!1}},FS}var NS,HM;function xE(){if(HM)return NS;HM=1;var e=WB();return NS=function(){return e()&&!!Symbol.toStringTag},NS}var jS,GM;function Wce(){if(GM)return jS;GM=1;var e=ra,t=e("String.prototype.valueOf"),r=function(s){try{return t(s),!0}catch{return!1}},n=e("Object.prototype.toString"),i="[object String]",l=xE()();return jS=function(s){return typeof s=="string"?!0:!s||typeof s!="object"?!1:l?r(s):n(s)===i},jS}var VS,WM;function qce(){if(WM)return VS;WM=1;var e=Hb()(),t=wo,r=ra,n=Wce(),i=t("%Symbol.iterator%",!0),l=r("String.prototype.slice"),h=t("%String%");return VS=function(m,y){var S;return e?S=m.GetMethod(y,i):m.IsArray(y)?S=function(){var T=-1,I=this;return{next:function(){return T+=1,{done:T>=I.length,value:I[T]}}}}:n(y)&&(S=function(){var T=0;return{next:function(){var I=m.AdvanceStringIndex(h(y),T,!0),D=l(y,T,I);return T=I,{done:I>y.length,value:D}}}}),S},VS}var Zce=wo,US=Rr,qM=Zce("%Symbol.asyncIterator%",!0),Kce=_u(),Xce=Hb()(),Yce=wce(),Jce=Hce(),ZM=Gce(),g4=_E,Qce=gE(),eue={AdvanceStringIndex:Yce,GetMethod:g4,IsArray:Qce},tue=qce(),rue=function(t,r){if(r!=="SYNC"&&r!=="ASYNC")throw new US("Assertion failed: `kind` must be one of 'sync' or 'async', got "+Kce(r));var n;if(r==="ASYNC"&&Xce&&qM&&(n=g4(t,qM)),typeof n>"u"){var i=tue(eue,t);if(r==="ASYNC"){if(typeof i>"u")throw new US("iterator method is `undefined`");var l=ZM(t,i);return Jce(l)}n=i}if(typeof n>"u")throw new US("iterator method is `undefined`");return ZM(t,n)},v4=yu,su=yE(),Av=function e(t,r){if(!(this instanceof e))return new e(t,r);if(t!=="normal"&&t!=="break"&&t!=="continue"&&t!=="return"&&t!=="throw")throw new v4('Assertion failed: `type` must be one of "normal", "break", "continue", "return", or "throw"');su.set(this,"[[Type]]",t),su.set(this,"[[Value]]",r)};Av.prototype.type=function(){return su.get(this,"[[Type]]")};Av.prototype.value=function(){return su.get(this,"[[Value]]")};Av.prototype["?"]=function(){var t=su.get(this,"[[Type]]"),r=su.get(this,"[[Value]]");if(t==="throw")throw r;return r};Av.prototype["!"]=function(){var t=su.get(this,"[[Type]]");if(t!=="normal")throw new v4('Assertion failed: Completion Record is not of type "normal"');return su.get(this,"[[Value]]")};var y4=Av,v0=Rr,nue=Pv,KM=y4,iue=_E,oue=Iv,XM=Fo,aue=Wb,sue=function(t,r){if(!aue(t))throw new v0("Assertion failed: `iteratorRecord` must be an Iterator Record");if(!XM(t["[[Iterator]]"]))throw new v0("Assertion failed: iteratorRecord.[[Iterator]] must be an Object");if(!oue(r)&&!(r instanceof KM))throw new v0("Assertion failed: completion is not a thunk representing a Completion Record, nor a Completion Record instance");var n=r instanceof KM?function(){return r["?"]()}:r,i=t["[[Iterator]]"],l;try{l=iue(i,"return")}catch(m){throw n(),n=null,m}if(typeof l>"u")return n();var h;try{h=nue(l,i,[])}catch(m){throw n(),n=null,m}var s=n();if(n=null,!XM(h))throw new v0("iterator .return must return an object");return s},lue=Rr,cue=f4,uue=m4,due=Wb,hue=function(t){if(!due(t))throw new lue("Assertion failed: `iteratorRecord` must be an Iterator Record");var r=uue(t),n=cue(r);return n===!0?!1:r},fue=Rr,pue=function(t){if(t==null)throw new fue(arguments.length>0&&arguments[1]||"Cannot call method on "+t);return t},mue=pue,gue=y4,vue=function(t){return new gue("throw",t)},HS,YM;function yue(){return YM||(YM=1,HS=function(t){return t===null||typeof t!="function"&&typeof t!="object"}),HS}var GS,JM;function _ue(){if(JM)return GS;JM=1;var e=ra,t=e("Date.prototype.getDay"),r=function(s){try{return t(s),!0}catch{return!1}},n=e("Object.prototype.toString"),i="[object Date]",l=xE()();return GS=function(s){return typeof s!="object"||s===null?!1:l?r(s):n(s)===i},GS}var y0={exports:{}},WS,QM;function xue(){if(QM)return WS;QM=1;var e=ra,t=xE()(),r=dc(),n=Yf,i;if(t){var l=e("RegExp.prototype.exec"),h={},s=function(){throw h},m={toString:s,valueOf:s};typeof Symbol.toPrimitive=="symbol"&&(m[Symbol.toPrimitive]=s),i=function(I){if(!I||typeof I!="object")return!1;var D=n(I,"lastIndex"),F=D&&r(D,"value");if(!F)return!1;try{l(I,m)}catch(V){return V===h}}}else{var y=e("Object.prototype.toString"),S="[object RegExp]";i=function(I){return!I||typeof I!="object"&&typeof I!="function"?!1:y(I)===S}}return WS=i,WS}var qS,ez;function bue(){if(ez)return qS;ez=1;var e=ra,t=xue(),r=e("RegExp.prototype.exec"),n=Rr;return qS=function(l){if(!t(l))throw new n("`regex` must be a RegExp");return function(s){return r(l,s)!==null}},qS}var tz;function wue(){if(tz)return y0.exports;tz=1;var e=ra,t=e("Object.prototype.toString"),r=Hb()(),n=bue();if(r){var i=e("Symbol.prototype.toString"),l=n(/^Symbol\(.*\)$/),h=function(m){return typeof m.valueOf()!="symbol"?!1:l(i(m))};y0.exports=function(m){if(typeof m=="symbol")return!0;if(!m||typeof m!="object"||t(m)!=="[object Symbol]")return!1;try{return h(m)}catch{return!1}}}else y0.exports=function(m){return!1};return y0.exports}var ZS,rz;function Sue(){if(rz)return ZS;rz=1;var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",t=yue(),r=e4,n=_ue(),i=wue(),l=function(m,y){if(typeof m>"u"||m===null)throw new TypeError("Cannot call method on "+m);if(typeof y!="string"||y!=="number"&&y!=="string")throw new TypeError('hint must be "string" or "number"');var S=y==="string"?["toString","valueOf"]:["valueOf","toString"],T,I,D;for(D=0;D<S.length;++D)if(T=m[S[D]],r(T)&&(I=T.call(m),t(I)))return I;throw new TypeError("No default value")},h=function(m,y){var S=m[y];if(S!==null&&typeof S<"u"){if(!r(S))throw new TypeError(S+" returned for property "+String(y)+" of object "+m+" is not a function");return S}};return ZS=function(m){if(t(m))return m;var y="default";arguments.length>1&&(arguments[1]===String?y="string":arguments[1]===Number&&(y="number"));var S;if(e&&(Symbol.toPrimitive?S=h(m,Symbol.toPrimitive):i(m)&&(S=Symbol.prototype.valueOf)),typeof S<"u"){var T=S.call(m,y);if(t(T))return T;throw new TypeError("unable to convert exotic object to primitive")}return y==="default"&&(n(m)||i(m))&&(y="string"),l(m,y==="default"?"number":y)},ZS}var KS,nz;function Cue(){if(nz)return KS;nz=1;var e=Sue();return KS=function(r){return arguments.length>1?e(r,arguments[1]):e(r)},KS}var XS,iz;function kue(){if(iz)return XS;iz=1;var e=wo,t=e("%String%"),r=Rr;return XS=function(i){if(typeof i=="symbol")throw new r("Cannot convert a Symbol value to a string");return t(i)},XS}var Tue=wo,Eue=Tue("%String%"),Iue=Cue(),Pue=kue(),Aue=function(t){var r=Iue(t,Eue);return typeof r=="symbol"?r:Pue(r)},_0=Rr,Rue=oce,Due=l4,Mue=hce,zue=Pv,Lue=rue,Oue=Iv,YS=sue,$ue=hue,Bue=p4,Fue=mue,JS=vue,Nue=Aue,jue=function(t,r,n){if(n!=="PROPERTY"&&n!=="ZERO")throw new _0('Assertion failed: `keyCoercion` must be `"PROPERTY"` or `"ZERO"`');if(Fue(t),!Oue(r))throw new _0("callbackfn must be callable");for(var i=[],l=Lue(t,"SYNC"),h=0;;){if(h>=Due){var s=JS(new _0("k must be less than 2 ** 53 - 1"));YS(l,s);return}var m=$ue(l);if(!m)return i;var y=Bue(m),S;try{S=zue(r,void 0,[y,h])}catch(T){YS(l,JS(T));return}if(n==="PROPERTY")try{S=Nue(S)}catch(T){YS(l,JS(T));return}else{if(n!=="ZERO")throw new _0("keyCoercion must be ~PROPERTY~ or ~ZERO~");Rue(S)&&(S=0)}Mue(i,S,y),h+=1}},Vue=Hle,Uue=s4,Hue=vE,Gue=jue,_4=function(t,r){var n=Gue(t,r,"PROPERTY"),i=Uue(null);return Hue(n,function(l){Vue(i,l["[[Key]]"],l["[[Elements]]"])}),i},Wue=_4,x4=function(){return Object.groupBy||Wue},QS,oz;function que(){if(oz)return QS;oz=1;var e=VB,t=x4;return QS=function(){var n=t();return e(Object,{groupBy:n},{groupBy:function(){return Object.groupBy!==n}}),n},QS}var Zue=VB,Kue=YB,Xue=_4,b4=x4,Yue=b4(),Jue=que(),w4=Kue(Yue,Object);Zue(w4,{getPolyfill:b4,implementation:Xue,shim:Jue});var Que=w4;const ede=lx(Que),U2=[{label:"ATS",value:{map:"usa",search:"cities"}},{label:"ATS",value:{map:"usa",search:"achievements"}},{label:"ETS2",value:{map:"europe",search:"cities"}},{label:"ETS2",value:{map:"europe",search:"achievements"}}],eC=(e,t)=>tu.checkExists(U2.find(r=>r.value.map===e&&r.value.search===t)),az=({selected:e,onSelect:t})=>H.jsx(iK,{sx:{paddingBlock:0,minWidth:"fit-content"},variant:"plain",size:"sm",slotProps:{listbox:{placement:"bottom-start"}},value:e,onChange:(r,n)=>{r!=null&&t(ln(U2.find(i=>i.value===n)))},renderValue:r=>{if(r)return H.jsxs(yo,{direction:"row",gap:1,sx:{alignItems:"center"},children:[H.jsx(Qn,{level:"body-xs",fontWeight:"lg",children:r.value.map==="usa"?"ATS":"ETS2"}),r.value.search==="cities"?H.jsx(D5,{}):H.jsx(R5,{})]})},children:Object.entries(ede(U2,({label:r})=>r)).map(([r,n])=>H.jsxs(Ed,{children:[H.jsx(lc,{children:H.jsx(Qn,{level:"body-xs",fontWeight:"lg",children:r})}),n==null?void 0:n.map(i=>H.jsxs(GZ,{value:i.value,sx:{px:"1em",textTransform:"capitalize"},children:[H.jsx(tde,{search:i.value.search}),i.value.search]},i.value.search))]},r))}),tde=({search:e})=>{switch(e){case"cities":return H.jsx(D5,{});case"achievements":return H.jsx(R5,{});default:throw new fu(e)}},Q0={usa:{longitude:-108,latitude:39},europe:{longitude:12,latitude:51}},rde=e=>{const t=R.useRef(null);cc(()=>({onAdd:()=>ln(t.current),onRemove:()=>ln(t.current).remove()}),{position:"top-left"});const{current:r}=DT(),[n,i]=R.useState(eC(localStorage.getItem("tm-map")==="europe"?"europe":"usa",localStorage.getItem("tm-search")==="achievements"?"achievements":"cities")),l=ys.useCallback(I=>{if(I==null||(i(I),localStorage.setItem("tm-map",I.value.map),localStorage.setItem("tm-search",I.value.search),!r||I.value.map===n.value.map))return;const{longitude:D,latitude:F}=Q0[I.value.map];r.easeTo({zoom:4,center:[D,F]})},[r,n]);R.useEffect(()=>{if(!r)return;const I=()=>{const D=r.getCenter().lng,F=sz(D,Q0.usa.longitude),V=sz(D,Q0.europe.longitude);F<V&&n.value.map!=="usa"?(i(eC("usa",n.value.search)),localStorage.setItem("tm-map","usa")):V<F&&n.value.map!=="europe"&&(i(eC("europe",n.value.search)),localStorage.setItem("tm-map","europe"))};return r.on("moveend",I),()=>void r.off("moveend",I)},[r,n,i]);const h=ys.useCallback(I=>{r==null||I==null||(r.flyTo({curve:1,zoom:9,center:I.value.map(D=>Number(D.toFixed(3)))}),r.once("moveend",D=>{const{lat:F,lng:V}=D.target.getCenter(),Z=D.target.getZoom(),z=Number(D.target.getBearing().toFixed(1)),O=Math.round(D.target.getPitch());O?window.location.hash=`${Z}/${F.toFixed(3)}/${V.toFixed(3)}/${z}/${O}`:z?window.location.hash=`${Z}/${F.toFixed(3)}/${V.toFixed(3)}/${z}`:window.location.hash=`${Z}/${F.toFixed(3)}/${V.toFixed(3)}`}))},[r]),[s,m]=R.useState([]),[y,S]=R.useState(null),T=ys.useCallback((I,D={enableFitBounds:!0})=>{if(s.forEach(Z=>Z.remove()),S(I),r==null||I==null)return;const F=Pb(e.visibleStateDlcs),V=I.features.filter(Z=>F.has(Z.dlcGuard)).map(({coordinates:Z})=>new Ib.Marker().setLngLat(Z).addTo(r.getMap()));if(m(V),V.length&&D.enableFitBounds){const Z=KT(V.map(L=>L.getLngLat().toArray())),z=[Z[0],Z[1]],O=[Z[2],Z[3]];r.fitBounds([z,O],{curve:1,padding:100,maxZoom:9})}},[r,s,S,m,e.visibleStates]);return R.useEffect(()=>{T(y,{enableFitBounds:!1})},[y,e.visibleStates]),H.jsx("div",{ref:t,className:"maplibregl-ctrl",style:{width:"calc(100svw - 64px)"},children:H.jsx(yo,{direction:"row",gap:1,children:n.value.search==="cities"?H.jsx(fae,{selectDecorator:H.jsx(az,{selected:n.value,onSelect:l}),map:n.value.map,onSelect:h,visibleStates:e.visibleStates}):H.jsx(hae,{selectDecorator:H.jsx(az,{selected:n.value,onSelect:l}),map:n.value.map,onSelect:T,visibleStates:e.visibleStates,visibleStateDlcs:e.visibleStateDlcs})})})};function sz(e,t){const r=oD(e)/2,n=oD(t)/2;return Math.abs(Math.sin(r)-Math.sin(n))}const tC=(e,t)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},nde=()=>{const e=R.useRef(null),[t,r]=R.useState(!1),[n,i]=R.useState(!1),[l,h]=R.useState(window.location.origin),s=DT();return cc(()=>({onAdd:()=>ln(e.current),onRemove:()=>ln(e.current).remove()})),R.useEffect(()=>{const m=s.current;if(!m||!t)return;const y=()=>{const I=m.getCenter(),D=m.getBearing(),F=m.getPitch(),V=D||F?[D,F]:[],Z=m.getZoom(),z=S?"?"+new URLSearchParams({mlat:String(tC(S.getLngLat().lat,2)),mlon:String(tC(S.getLngLat().lng,2))}).toString():"",O="#"+[Z,I.lat,I.lng,...V].map(L=>tC(L,2)).join("/");h(window.location.origin+z+O)};let S,T;if(n){S=new Ib.Marker,S.setLngLat(m.getCenter()).setDraggable(!0).addTo(m.getMap());let I=!0;T=()=>I&&S.setLngLat(m.getCenter()),S.on("dragend",()=>{I=!1,m.easeTo({center:S==null?void 0:S.getLngLat()}),m.once("moveend",()=>I=!0)})}return y(),m.on("moveend",y),T&&m.on("move",T),()=>{m.off("moveend",y),T&&m.off("move",T),S==null||S.remove()}},[s,t,n]),H.jsxs("div",{ref:e,children:[H.jsx("div",{className:"maplibregl-ctrl maplibregl-ctrl-group",children:H.jsx(Qc,{sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Share",onClick:()=>r(!t),children:H.jsx(DY,{})})}),H.jsx(u5,{open:t,anchor:"right",onClose:()=>r(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",right:t?48:0}}},children:H.jsxs(kb,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,overflow:"auto"},children:[H.jsx(o5,{children:"Share"}),H.jsx(d5,{}),H.jsx(Sb,{}),H.jsxs(i5,{sx:{gap:2,overflow:"hidden",flexGrow:1,justifyContent:"center"},children:[H.jsx(Qn,{children:"Share a link to this map"}),H.jsx(yW,{readOnly:!0,sx:{"--Input-decoratorChildHeight":"36px"},onFocus:m=>m.target.select(),value:l,endDecorator:H.jsx(If,{sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>void navigator.clipboard.writeText(l).catch(()=>alert("Could not copy to clipboard 🙁")),children:"Copy"})}),H.jsx(Pf,{label:"Include marker",checked:n,onChange:m=>i(m.target.checked)})]})]})})]})};function S4(e){return new Set([...e].map(ide).concat(Zi.CA))}function ide(e){switch(e){case go.Arizona:return Zi.AZ;case go.Arkansas:return Zi.AR;case go.Colorado:return Zi.CO;case go.Idaho:return Zi.ID;case go.Kansas:return Zi.KS;case go.Montana:return Zi.MT;case go.Nebraska:return Zi.NE;case go.Nevada:return Zi.NV;case go.NewMexico:return Zi.NM;case go.Oklahoma:return Zi.OK;case go.Oregon:return Zi.OR;case go.Texas:return Zi.TX;case go.Utah:return Zi.UT;case go.Washington:return Zi.WA;case go.Wyoming:return Zi.WY;default:throw new fu(e)}}const lz=(e,[t,r])=>!isNaN(e)&&t<=e&&e<=r,ode=()=>{const{mode:e,systemMode:t}=_k(),r=e==="system"?t:e,{longitude:n,latitude:i}=Q0[ade(localStorage.getItem("tm-map"))],[l]=eae(),h=Number(l.get("mlat")??void 0),s=Number(l.get("mlon")??void 0),m=lz(h,[-90,90])&&lz(s,[-180,180])?{lat:h,lon:s}:void 0,[y,S]=R.useState(!0),[T,I]=R.useState(new Set(kg)),[D,F]=R.useState(new Set(Cg)),V=S4(D),Z=ix(T,I,kg),z=ix(D,F,Cg),[O,L]=R.useState(!1);return H.jsxs(MT,{style:{width:"100svw",height:"100svh"},hash:!0,minZoom:4,maxZoom:15,mapStyle:FT,initialViewState:{longitude:n,latitude:i,zoom:4},children:[m&&H.jsx(zT,{longitude:m.lon,latitude:m.lat}),H.jsxs(BT,{mode:r,children:[H.jsx(m2,{game:"ats",showContours:O}),H.jsx(m2,{game:"ets2",showContours:O})]}),H.jsx(B_,{game:"ats",mode:r,enableIconAutoHide:y,visibleIcons:T,dlcs:D}),H.jsx(B_,{game:"ets2",mode:r,enableIconAutoHide:y,visibleIcons:T}),T.has(xi.CityNames)&&H.jsx(F_,{game:"ats",mode:r,enableAutoHide:y,enabledStates:V}),T.has(xi.CityNames)&&H.jsx(F_,{game:"ets2",mode:r,enableAutoHide:y}),H.jsx(N5,{visualizePitch:!0}),H.jsx(F5,{containerId:"fsElem"}),H.jsx(nde,{}),H.jsx(OB,{}),H.jsx(B5,{compact:!0,style:{marginLeft:54},customAttribution:"© Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a> and <a href='https://forum.scssoft.com/viewtopic.php?p=1946956#p1946956'>krmarci</a>."}),H.jsx(rde,{visibleStates:V,visibleStateDlcs:D}),H.jsx(LB,{icons:{...Z,enableAutoHiding:y,onAutoHidingToggle:S},advanced:{showContours:O,onContoursToggle:L},atsDlcs:z})]})};function ade(e){return e==="europe"?e:"usa"}var sde=Object.defineProperty,lde=(e,t,r)=>t in e?sde(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cde=(e,t,r)=>(lde(e,t+"",r),r);class ude{constructor(t){cde(this,"_kind"),this._kind=t}}function dde(e,t){const r=e.toString(),n=t.toString();return r>n?1:r<n?-1:0}const hde=dde;var fde=Object.defineProperty,pde=(e,t,r)=>t in e?fde(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cz=(e,t,r)=>(pde(e,typeof t!="symbol"?t+"":t,r),r);function mde(e,t,r){const n=t*2,i=t*2+1;let l=t;return n<e.length&&r(e[l],e[n])<0&&(l=n),i<e.length&&r(e[l],e[i])<0&&(l=i),l}function bE(e,t,r){const n=mde(e,t,r);if(n!==t){const i=e[t];e[t]=e[n],e[n]=i,bE(e,n,r)}}function uz(e){for(let t=Math.floor(e.collection.length/2)-1;t>=0;--t)bE(e.collection,t,e.comparator)}class sx extends ude{constructor({comparator:t=hde}={}){super("BinaryHeap"),cz(this,"comparator"),cz(this,"collection",[]),this.comparator=t}static from(t,r={}){const n=new sx(r);return n.collection=Array.from(t),uz(n),n}clear(){this.collection.length=0}toArray(){return[...this.collection].sort(this.comparator)}get length(){return this.collection.length}top(){if(this.length===0)throw new Error("invalid operation: top() called for empty BinaryHeap");return this.collection[0]}pop(){if(this.length===0)throw new Error("invalid operation: pop() called for empty BinaryHeap");const t=this.collection[0];return this.collection.length>1?(this.collection[0]=this.collection.pop(),bE(this.collection,0,this.comparator)):this.collection.pop(),t}push(t){this.collection.push(t);const r=this.collection;for(let n=r.length-1,i=Math.floor(n/2);n>0&&this.comparator(r[i],r[n])<0;n=i,i=Math.floor(i/2)){const l=r[n];r[n]=r[i],r[i]=l}}merge(t){t instanceof sx?this.collection=this.collection.concat(t.collection):this.collection=this.collection.concat(t.toArray()),uz(this),t.clear()}isEmpty(){return!this.collection.length}}function gde(e,t,r,n,i){const l=`${e}-${t}-${r}-${n}`,{nodeLUT:h,graph:s}=i,m=ln(h.get(e)),y=ln(h.get(t)),S=new yde({comparator:(O,L)=>{const te=Z.get(O)??1/0;return(Z.get(L)??1/0)-te}}),T={nodeId:e,distance:0,direction:r,dlcGuard:-1};S.push(T);const I=new Map,D=new Map;D.set(T,0);const F=O=>ore(O,y),V=(O,L)=>{switch(n){case"shortest":return L.distance;case"smallRoads":return L.isOneLaneRoad?L.distance:L.distance*10;default:throw new fu(n)}},Z=new Map;Z.set(T,F(m));let z=0;for(;!S.isEmpty();){z++;const O=S.pop();if(O.nodeId===t)return{success:!0,key:l,mode:n,...vde(I,O)};const L=s.get(O.nodeId);if(!L)continue;const te=O.direction==="forward"?L.forward:L.backward;for(const j of te){if(!i.enabledDlcGuards.has(j.dlcGuard))continue;const $=(D.get(O)??1/0)+V(O,j);$<(D.get(j)??1/0)&&(I.set(j,O),D.set(j,$),Z.set(j,$+F(ln(h.get(j.nodeId)))),S.has(j)||S.push(j))}}return{success:!1,key:l,mode:n,numIters:z}}function vde(e,t){let r=0;const n=[t];for(;e.has(t);)t=e.get(t),n.unshift(t),r+=t.distance;return n.length===1&&n.push(n[0]),{route:n,distance:r}}class yde extends sx{constructor(r){super(r);uo(this,"items",new Set)}has(r){return this.items.has(r)}push(r){tu.checkState(!this.items.has(r)),super.push(r),this.items.add(r)}pop(){const r=super.pop();return tu.checkState(this.items.has(r)),this.items.delete(r),r}clear(){super.clear(),this.items.clear()}merge(r){super.merge(r);for(const n of this.collection)this.items.add(n)}}const _de=()=>{const{mode:e,systemMode:t}=_k(),r=e==="system"?t:e,[n,i]=R.useState(!0),[l,h]=R.useState(new Set(kg)),[s,m]=R.useState(new Set(Cg)),y=S4(s),S=ix(l,h,kg),T=ix(s,m,Cg),[I,D]=R.useState(!1);return H.jsxs(MT,{style:{width:"100vw",height:"100vh"},minZoom:4,maxZoom:15,maxBounds:[[-135,21],[-84,54]],mapStyle:FT,initialViewState:{longitude:-115,latitude:36,zoom:9},children:[H.jsx(BT,{mode:r,children:H.jsx(m2,{game:"ats",showContours:I})}),H.jsx(B_,{game:"ats",mode:r,enableIconAutoHide:n,visibleIcons:l,dlcs:s}),H.jsx(F_,{game:"ats",mode:r,enableAutoHide:n,enabledStates:y}),H.jsx(eu,{id:"route1",type:"geojson",data:{type:"FeatureCollection",features:[]},children:H.jsx(en,{type:"line",paint:{"line-color":["match",["get","mode"],"shortest","#f00","smallRoads","#0f0","#f0f"],"line-width":3,"line-opacity":.7}})}),H.jsx(N5,{visualizePitch:!0}),H.jsx(F5,{}),H.jsx(OB,{}),H.jsx(B5,{compact:!0,customAttribution:"© Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a>."}),H.jsx(xde,{dlcs:s}),H.jsx(LB,{icons:{...S,enableAutoHiding:n,onAutoHidingToggle:i},advanced:{showContours:I,onContoursToggle:D},atsDlcs:T})]})},xde=e=>{const{current:t}=DT(),r=Pb(e.dlcs),[n,i]=R.useState(void 0),[l,h]=R.useState(void 0),[s,m]=R.useState([]),[y,S]=R.useState([]);R.useEffect(()=>{fetch("usa-graph-demo.json").then(J=>J.json()).then(J=>{m(J.demoCompanies.map(fz)),h(bde(J)),i(J)},()=>console.error("could not load usa-graph-demo.json"))},[]);const[T,I]=R.useState(void 0),[D,F]=R.useState(void 0),V=R.useCallback(J=>{J=ln(J),I(J.value);let ie;if(n!=null){ie=ln(n.demoCompanies.find(we=>we.n===J.value));const xe=ln(n.demoCompanyDefs.find(we=>we.t===ie.t)),ge=new Set(xe.d);S(n.demoCompanies.filter(we=>ge.has(we.t)).map(fz))}if(!(t==null||l==null)&&(D!=null&&(ln(t.getSource("route1")).setData({type:"FeatureCollection",features:[]}),F(void 0)),ie)){const xe=ln(l.nodeLUT.get(ie.n));t.flyTo({curve:1,zoom:9,center:[xe.x,xe.y]})}},[t,D,l,n]),Z=R.useCallback(J=>{J=ln(J),F(J.value),!(t==null||l==null)&&z(ln(T),J.value,t,{...l,enabledDlcGuards:r})},[t,T,l,e.dlcs]),z=(J,ie,xe,ge)=>{Promise.all([pz(J,ie,"shortest",ge),pz(J,ie,"smallRoads",ge)]).then(we=>{const Te=ln(xe.getSource("route1"));if(we.some(We=>We==null)){alert("Cannot calculate a route 🙁"),Te.setData({type:"FeatureCollection",features:[]});return}const Pe=we;Te.setData({type:"FeatureCollection",features:Pe}),xe.fitBounds(KT(Pe.flatMap(We=>We.geometry.coordinates)),{padding:150,curve:1,duration:2500})},we=>{console.error("error finding route",we)})},O=new Map;if(n)for(const[,J]of n.demoGraph)for(const ie of[...J.b??[],...J.f??[]]){const xe=O.get(ie.n)??0;O.set(ie.n,xe||ie.g)}const L=J=>{if(l==null)return!0;const ie=ln(O.get(J.value));return r.has(ie)},te=(J,ie)=>J.city!==ie.city?J.city.localeCompare(ie.city):J.label.localeCompare(ie.label),j=s.filter(L).sort(te),$=y.filter(L).sort(te);return H.jsxs("div",{style:{width:300,margin:20,display:"grid",position:"relative",gridTemplateColumns:"100px auto",alignItems:"center"},children:[H.jsx("h2",{children:"Start"}),H.jsx(D_,{options:j,onChange:(J,ie)=>ie&&V(ie),groupBy:J=>J.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,renderGroup:dz}),H.jsx("h2",{children:"End"}),H.jsx(D_,{options:$,onChange:(J,ie)=>ie&&Z(ie),groupBy:J=>J.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,disabled:T==null,renderGroup:dz},T)]})};function dz(e){return H.jsxs(H.Fragment,{children:[H.jsx(Qn,{m:1,level:"body-xs",textTransform:"uppercase",children:e.group}),H.jsx(Ed,{children:e.children}),H.jsx(Cb,{})]})}function bde(e){const t=new Map,r=new Map;for(const[n,i]of e.demoGraph)t.set(n,{forward:(i.f??[]).map(hz),backward:(i.b??[]).map(hz)});for(const[n,i]of e.demoNodes)r.set(n,{x:i[0],y:i[1]});return{graph:t,nodeLUT:r}}function hz(e){return{nodeId:e.n,distance:e.l,isOneLaneRoad:e.o,direction:e.d==="f"?"forward":"backward",dlcGuard:e.g}}function fz(e){return{label:e.t,city:e.c,value:e.n}}function pz(e,t,r,n){return new Promise(i=>{const l=gde(e,t,"forward",r,n);if(!l.success){i(void 0);return}i({type:"Feature",geometry:{type:"LineString",coordinates:l.route.map(h=>{const s=ln(n.nodeLUT.get(h.nodeId));return[s.x,s.y]})},properties:{distance:l.distance,mode:r}})})}const wde=vY({links:[hY({client:dY({url:"ws://localhost:3000"})})]}),{App:Sde}=Hne({appClient:wde,transitionDurationMs:300}),Cde=qoe(woe([H.jsx(G0,{path:"/",element:H.jsx(ode,{})}),H.jsx(G0,{path:"routes",element:H.jsx(_de,{})}),H.jsx(G0,{path:"navigator",element:H.jsx(Sde,{})})])),kde=xL({components:{JoyIconButton:{styleOverrides:{root:{backgroundColor:"var(--joy-palette-background-surface)"}}}}}),Tde=C5(),Ede=document.getElementById("root"),Ide=pB(Ede);Ide.render(H.jsx(R.StrictMode,{children:H.jsx(KX,{theme:{[Tb]:Tde},children:H.jsxs(m8,{defaultMode:"system",modeStorageKey:"tm-mode",theme:kde,children:[H.jsx(Nq,{}),H.jsx(aae,{router:Cde})]})})}));
