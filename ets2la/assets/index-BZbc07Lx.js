var xM=Object.defineProperty;var bM=(e,t,r)=>t in e?xM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Gn=(e,t,r)=>bM(e,typeof t!="symbol"?t+"":t,r);function vk(e,t){for(var r=0;r<t.length;r++){const o=t[r];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in e)){const h=Object.getOwnPropertyDescriptor(o,l);h&&Object.defineProperty(e,l,h.get?h:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const m of h.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function r(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(l){if(l.ep)return;l.ep=!0;const h=r(l);fetch(l.href,h)}})();var wM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function by(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Bl(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var l=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:function(){return e[o]}})}),r}var _k={exports:{}},wy={},xk={exports:{}},Qt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip=Symbol.for("react.element"),SM=Symbol.for("react.portal"),CM=Symbol.for("react.fragment"),kM=Symbol.for("react.strict_mode"),TM=Symbol.for("react.profiler"),EM=Symbol.for("react.provider"),IM=Symbol.for("react.context"),PM=Symbol.for("react.forward_ref"),AM=Symbol.for("react.suspense"),MM=Symbol.for("react.memo"),zM=Symbol.for("react.lazy"),O2=Symbol.iterator;function LM(e){return e===null||typeof e!="object"?null:(e=O2&&e[O2]||e["@@iterator"],typeof e=="function"?e:null)}var bk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wk=Object.assign,Sk={};function Ph(e,t,r){this.props=e,this.context=t,this.refs=Sk,this.updater=r||bk}Ph.prototype.isReactComponent={};Ph.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ph.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ck(){}Ck.prototype=Ph.prototype;function ax(e,t,r){this.props=e,this.context=t,this.refs=Sk,this.updater=r||bk}var lx=ax.prototype=new Ck;lx.constructor=ax;wk(lx,Ph.prototype);lx.isPureReactComponent=!0;var B2=Array.isArray,kk=Object.prototype.hasOwnProperty,cx={current:null},Tk={key:!0,ref:!0,__self:!0,__source:!0};function Ek(e,t,r){var o,l={},h=null,m=null;if(t!=null)for(o in t.ref!==void 0&&(m=t.ref),t.key!==void 0&&(h=""+t.key),t)kk.call(t,o)&&!Tk.hasOwnProperty(o)&&(l[o]=t[o]);var c=arguments.length-2;if(c===1)l.children=r;else if(1<c){for(var b=Array(c),k=0;k<c;k++)b[k]=arguments[k+2];l.children=b}if(e&&e.defaultProps)for(o in c=e.defaultProps,c)l[o]===void 0&&(l[o]=c[o]);return{$$typeof:ip,type:e,key:h,ref:m,props:l,_owner:cx.current}}function DM(e,t){return{$$typeof:ip,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ux(e){return typeof e=="object"&&e!==null&&e.$$typeof===ip}function RM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var $2=/\/+/g;function Fv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?RM(""+e.key):t.toString(36)}function ag(e,t,r,o,l){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var m=!1;if(e===null)m=!0;else switch(h){case"string":case"number":m=!0;break;case"object":switch(e.$$typeof){case ip:case SM:m=!0}}if(m)return m=e,l=l(m),e=o===""?"."+Fv(m,0):o,B2(l)?(r="",e!=null&&(r=e.replace($2,"$&/")+"/"),ag(l,t,r,"",function(k){return k})):l!=null&&(ux(l)&&(l=DM(l,r+(!l.key||m&&m.key===l.key?"":(""+l.key).replace($2,"$&/")+"/")+e)),t.push(l)),1;if(m=0,o=o===""?".":o+":",B2(e))for(var c=0;c<e.length;c++){h=e[c];var b=o+Fv(h,c);m+=ag(h,t,r,b,l)}else if(b=LM(e),typeof b=="function")for(e=b.call(e),c=0;!(h=e.next()).done;)h=h.value,b=o+Fv(h,c++),m+=ag(h,t,r,b,l);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return m}function Lm(e,t,r){if(e==null)return e;var o=[],l=0;return ag(e,o,"","",function(h){return t.call(r,h,l++)}),o}function OM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ji={current:null},lg={transition:null},BM={ReactCurrentDispatcher:ji,ReactCurrentBatchConfig:lg,ReactCurrentOwner:cx};function Ik(){throw Error("act(...) is not supported in production builds of React.")}Qt.Children={map:Lm,forEach:function(e,t,r){Lm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Lm(e,function(){t++}),t},toArray:function(e){return Lm(e,function(t){return t})||[]},only:function(e){if(!ux(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qt.Component=Ph;Qt.Fragment=CM;Qt.Profiler=TM;Qt.PureComponent=ax;Qt.StrictMode=kM;Qt.Suspense=AM;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BM;Qt.act=Ik;Qt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=wk({},e.props),l=e.key,h=e.ref,m=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,m=cx.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(b in t)kk.call(t,b)&&!Tk.hasOwnProperty(b)&&(o[b]=t[b]===void 0&&c!==void 0?c[b]:t[b])}var b=arguments.length-2;if(b===1)o.children=r;else if(1<b){c=Array(b);for(var k=0;k<b;k++)c[k]=arguments[k+2];o.children=c}return{$$typeof:ip,type:e.type,key:l,ref:h,props:o,_owner:m}};Qt.createContext=function(e){return e={$$typeof:IM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:EM,_context:e},e.Consumer=e};Qt.createElement=Ek;Qt.createFactory=function(e){var t=Ek.bind(null,e);return t.type=e,t};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(e){return{$$typeof:PM,render:e}};Qt.isValidElement=ux;Qt.lazy=function(e){return{$$typeof:zM,_payload:{_status:-1,_result:e},_init:OM}};Qt.memo=function(e,t){return{$$typeof:MM,type:e,compare:t===void 0?null:t}};Qt.startTransition=function(e){var t=lg.transition;lg.transition={};try{e()}finally{lg.transition=t}};Qt.unstable_act=Ik;Qt.useCallback=function(e,t){return ji.current.useCallback(e,t)};Qt.useContext=function(e){return ji.current.useContext(e)};Qt.useDebugValue=function(){};Qt.useDeferredValue=function(e){return ji.current.useDeferredValue(e)};Qt.useEffect=function(e,t){return ji.current.useEffect(e,t)};Qt.useId=function(){return ji.current.useId()};Qt.useImperativeHandle=function(e,t,r){return ji.current.useImperativeHandle(e,t,r)};Qt.useInsertionEffect=function(e,t){return ji.current.useInsertionEffect(e,t)};Qt.useLayoutEffect=function(e,t){return ji.current.useLayoutEffect(e,t)};Qt.useMemo=function(e,t){return ji.current.useMemo(e,t)};Qt.useReducer=function(e,t,r){return ji.current.useReducer(e,t,r)};Qt.useRef=function(e){return ji.current.useRef(e)};Qt.useState=function(e){return ji.current.useState(e)};Qt.useSyncExternalStore=function(e,t,r){return ji.current.useSyncExternalStore(e,t,r)};Qt.useTransition=function(){return ji.current.useTransition()};Qt.version="18.3.1";xk.exports=Qt;var pe=xk.exports;const bl=by(pe),F2=vk({__proto__:null,default:bl},[pe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $M=pe,FM=Symbol.for("react.element"),NM=Symbol.for("react.fragment"),jM=Object.prototype.hasOwnProperty,VM=$M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UM={key:!0,ref:!0,__self:!0,__source:!0};function Pk(e,t,r){var o,l={},h=null,m=null;r!==void 0&&(h=""+r),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(m=t.ref);for(o in t)jM.call(t,o)&&!UM.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)l[o]===void 0&&(l[o]=t[o]);return{$$typeof:FM,type:e,key:h,ref:m,props:l,_owner:VM.current}}wy.Fragment=NM;wy.jsx=Pk;wy.jsxs=Pk;_k.exports=wy;var W=_k.exports;const qd={grey:{50:"#FBFCFE",100:"#F0F4F8",200:"#DDE7EE",300:"#CDD7E1",400:"#9FA6AD",500:"#636B74",600:"#555E68",700:"#32383E",800:"#171A1C",900:"#0B0D0E"},blue:{50:"#EDF5FD",100:"#E3EFFB",200:"#C7DFF7",300:"#97C3F0",400:"#4393E4",500:"#0B6BCB",600:"#185EA5",700:"#12467B",800:"#0A2744",900:"#051423"},yellow:{50:"#FEFAF6",100:"#FDF0E1",200:"#FCE1C2",300:"#F3C896",400:"#EA9A3E",500:"#9A5B13",600:"#72430D",700:"#492B08",800:"#2E1B05",900:"#1D1002"},red:{50:"#FEF6F6",100:"#FCE4E4",200:"#F7C5C5",300:"#F09898",400:"#E47474",500:"#C41C1C",600:"#A51818",700:"#7D1212",800:"#430A0A",900:"#240505"},green:{50:"#F6FEF6",100:"#E3FBE3",200:"#C7F7C7",300:"#A1E8A1",400:"#51BC51",500:"#1F7A1F",600:"#136C13",700:"#0A470A",800:"#042F04",900:"#021D02"}},op="$$joy";function Dl(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const GM=Object.freeze(Object.defineProperty({__proto__:null,default:Dl},Symbol.toStringTag,{value:"Module"}));function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ge.apply(null,arguments)}var HM=!1;function qM(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function WM(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var ZM=function(){function e(r){var o=this;this._insertTag=function(l){var h;o.tags.length===0?o.insertionPoint?h=o.insertionPoint.nextSibling:o.prepend?h=o.container.firstChild:h=o.before:h=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(l,h),o.tags.push(l)},this.isSpeedy=r.speedy===void 0?!HM:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(WM(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var h=qM(l);try{h.insertRule(o,h.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){var l;return(l=o.parentNode)==null?void 0:l.removeChild(o)}),this.tags=[],this.ctr=0},e}(),wi="-ms-",Pg="-moz-",gr="-webkit-",Ak="comm",hx="rule",dx="decl",KM="@import",Mk="@keyframes",XM="@layer",YM=Math.abs,Sy=String.fromCharCode,JM=Object.assign;function QM(e,t){return si(e,0)^45?(((t<<2^si(e,0))<<2^si(e,1))<<2^si(e,2))<<2^si(e,3):0}function zk(e){return e.trim()}function ez(e,t){return(e=t.exec(e))?e[0]:e}function yr(e,t,r){return e.replace(t,r)}function $_(e,t){return e.indexOf(t)}function si(e,t){return e.charCodeAt(t)|0}function Af(e,t,r){return e.slice(t,r)}function Js(e){return e.length}function fx(e){return e.length}function Dm(e,t){return t.push(e),e}function tz(e,t){return e.map(t).join("")}var Cy=1,fh=1,Lk=0,so=0,Tn=0,Ah="";function ky(e,t,r,o,l,h,m){return{value:e,root:t,parent:r,type:o,props:l,children:h,line:Cy,column:fh,length:m,return:""}}function Wd(e,t){return JM(ky("",null,null,"",null,null,0),e,{length:-e.length},t)}function rz(){return Tn}function nz(){return Tn=so>0?si(Ah,--so):0,fh--,Tn===10&&(fh=1,Cy--),Tn}function To(){return Tn=so<Lk?si(Ah,so++):0,fh++,Tn===10&&(fh=1,Cy++),Tn}function na(){return si(Ah,so)}function cg(){return so}function sp(e,t){return Af(Ah,e,t)}function Mf(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Dk(e){return Cy=fh=1,Lk=Js(Ah=e),so=0,[]}function Rk(e){return Ah="",e}function ug(e){return zk(sp(so-1,F_(e===91?e+2:e===40?e+1:e)))}function iz(e){for(;(Tn=na())&&Tn<33;)To();return Mf(e)>2||Mf(Tn)>3?"":" "}function oz(e,t){for(;--t&&To()&&!(Tn<48||Tn>102||Tn>57&&Tn<65||Tn>70&&Tn<97););return sp(e,cg()+(t<6&&na()==32&&To()==32))}function F_(e){for(;To();)switch(Tn){case e:return so;case 34:case 39:e!==34&&e!==39&&F_(Tn);break;case 40:e===41&&F_(e);break;case 92:To();break}return so}function sz(e,t){for(;To()&&e+Tn!==57;)if(e+Tn===84&&na()===47)break;return"/*"+sp(t,so-1)+"*"+Sy(e===47?e:To())}function az(e){for(;!Mf(na());)To();return sp(e,so)}function lz(e){return Rk(hg("",null,null,null,[""],e=Dk(e),0,[0],e))}function hg(e,t,r,o,l,h,m,c,b){for(var k=0,A=0,R=m,O=0,Q=0,te=0,ee=1,de=1,G=1,j=0,U="",fe=l,ie=h,F=o,ce=U;de;)switch(te=j,j=To()){case 40:if(te!=108&&si(ce,R-1)==58){$_(ce+=yr(ug(j),"&","&\f"),"&\f")!=-1&&(G=-1);break}case 34:case 39:case 91:ce+=ug(j);break;case 9:case 10:case 13:case 32:ce+=iz(te);break;case 92:ce+=oz(cg()-1,7);continue;case 47:switch(na()){case 42:case 47:Dm(cz(sz(To(),cg()),t,r),b);break;default:ce+="/"}break;case 123*ee:c[k++]=Js(ce)*G;case 125*ee:case 59:case 0:switch(j){case 0:case 125:de=0;case 59+A:G==-1&&(ce=yr(ce,/\f/g,"")),Q>0&&Js(ce)-R&&Dm(Q>32?j2(ce+";",o,r,R-1):j2(yr(ce," ","")+";",o,r,R-2),b);break;case 59:ce+=";";default:if(Dm(F=N2(ce,t,r,k,A,l,c,U,fe=[],ie=[],R),h),j===123)if(A===0)hg(ce,t,F,F,fe,h,R,c,ie);else switch(O===99&&si(ce,3)===110?100:O){case 100:case 108:case 109:case 115:hg(e,F,F,o&&Dm(N2(e,F,F,0,0,l,c,U,l,fe=[],R),ie),l,ie,R,c,o?fe:ie);break;default:hg(ce,F,F,F,[""],ie,0,c,ie)}}k=A=Q=0,ee=G=1,U=ce="",R=m;break;case 58:R=1+Js(ce),Q=te;default:if(ee<1){if(j==123)--ee;else if(j==125&&ee++==0&&nz()==125)continue}switch(ce+=Sy(j),j*ee){case 38:G=A>0?1:(ce+="\f",-1);break;case 44:c[k++]=(Js(ce)-1)*G,G=1;break;case 64:na()===45&&(ce+=ug(To())),O=na(),A=R=Js(U=ce+=az(cg())),j++;break;case 45:te===45&&Js(ce)==2&&(ee=0)}}return h}function N2(e,t,r,o,l,h,m,c,b,k,A){for(var R=l-1,O=l===0?h:[""],Q=fx(O),te=0,ee=0,de=0;te<o;++te)for(var G=0,j=Af(e,R+1,R=YM(ee=m[te])),U=e;G<Q;++G)(U=zk(ee>0?O[G]+" "+j:yr(j,/&\f/g,O[G])))&&(b[de++]=U);return ky(e,t,r,l===0?hx:c,b,k,A)}function cz(e,t,r){return ky(e,t,r,Ak,Sy(rz()),Af(e,2,-2),0)}function j2(e,t,r,o){return ky(e,t,r,dx,Af(e,0,o),Af(e,o+1,-1),o)}function ih(e,t){for(var r="",o=fx(e),l=0;l<o;l++)r+=t(e[l],l,e,t)||"";return r}function uz(e,t,r,o){switch(e.type){case XM:if(e.children.length)break;case KM:case dx:return e.return=e.return||e.value;case Ak:return"";case Mk:return e.return=e.value+"{"+ih(e.children,o)+"}";case hx:e.value=e.props.join(",")}return Js(r=ih(e.children,o))?e.return=e.value+"{"+r+"}":""}function hz(e){var t=fx(e);return function(r,o,l,h){for(var m="",c=0;c<t;c++)m+=e[c](r,o,l,h)||"";return m}}function dz(e){return function(t){t.root||(t=t.return)&&e(t)}}function Ok(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var fz=function(t,r,o){for(var l=0,h=0;l=h,h=na(),l===38&&h===12&&(r[o]=1),!Mf(h);)To();return sp(t,so)},pz=function(t,r){var o=-1,l=44;do switch(Mf(l)){case 0:l===38&&na()===12&&(r[o]=1),t[o]+=fz(so-1,r,o);break;case 2:t[o]+=ug(l);break;case 4:if(l===44){t[++o]=na()===58?"&\f":"",r[o]=t[o].length;break}default:t[o]+=Sy(l)}while(l=To());return t},mz=function(t,r){return Rk(pz(Dk(t),r))},V2=new WeakMap,gz=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,o=t.parent,l=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!V2.get(o))&&!l){V2.set(t,!0);for(var h=[],m=mz(r,h),c=o.props,b=0,k=0;b<m.length;b++)for(var A=0;A<c.length;A++,k++)t.props[k]=h[b]?m[b].replace(/&\f/g,c[A]):c[A]+" "+m[b]}}},yz=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function Bk(e,t){switch(QM(e,t)){case 5103:return gr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return gr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return gr+e+Pg+e+wi+e+e;case 6828:case 4268:return gr+e+wi+e+e;case 6165:return gr+e+wi+"flex-"+e+e;case 5187:return gr+e+yr(e,/(\w+).+(:[^]+)/,gr+"box-$1$2"+wi+"flex-$1$2")+e;case 5443:return gr+e+wi+"flex-item-"+yr(e,/flex-|-self/,"")+e;case 4675:return gr+e+wi+"flex-line-pack"+yr(e,/align-content|flex-|-self/,"")+e;case 5548:return gr+e+wi+yr(e,"shrink","negative")+e;case 5292:return gr+e+wi+yr(e,"basis","preferred-size")+e;case 6060:return gr+"box-"+yr(e,"-grow","")+gr+e+wi+yr(e,"grow","positive")+e;case 4554:return gr+yr(e,/([^-])(transform)/g,"$1"+gr+"$2")+e;case 6187:return yr(yr(yr(e,/(zoom-|grab)/,gr+"$1"),/(image-set)/,gr+"$1"),e,"")+e;case 5495:case 3959:return yr(e,/(image-set\([^]*)/,gr+"$1$`$1");case 4968:return yr(yr(e,/(.+:)(flex-)?(.*)/,gr+"box-pack:$3"+wi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+gr+e+e;case 4095:case 3583:case 4068:case 2532:return yr(e,/(.+)-inline(.+)/,gr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Js(e)-1-t>6)switch(si(e,t+1)){case 109:if(si(e,t+4)!==45)break;case 102:return yr(e,/(.+:)(.+)-([^]+)/,"$1"+gr+"$2-$3$1"+Pg+(si(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~$_(e,"stretch")?Bk(yr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(si(e,t+1)!==115)break;case 6444:switch(si(e,Js(e)-3-(~$_(e,"!important")&&10))){case 107:return yr(e,":",":"+gr)+e;case 101:return yr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+gr+(si(e,14)===45?"inline-":"")+"box$3$1"+gr+"$2$3$1"+wi+"$2box$3")+e}break;case 5936:switch(si(e,t+11)){case 114:return gr+e+wi+yr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return gr+e+wi+yr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return gr+e+wi+yr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return gr+e+wi+e+e}return e}var vz=function(t,r,o,l){if(t.length>-1&&!t.return)switch(t.type){case dx:t.return=Bk(t.value,t.length);break;case Mk:return ih([Wd(t,{value:yr(t.value,"@","@"+gr)})],l);case hx:if(t.length)return tz(t.props,function(h){switch(ez(h,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ih([Wd(t,{props:[yr(h,/:(read-\w+)/,":"+Pg+"$1")]})],l);case"::placeholder":return ih([Wd(t,{props:[yr(h,/:(plac\w+)/,":"+gr+"input-$1")]}),Wd(t,{props:[yr(h,/:(plac\w+)/,":"+Pg+"$1")]}),Wd(t,{props:[yr(h,/:(plac\w+)/,wi+"input-$1")]})],l)}return""})}},_z=[vz],$k=function(t){var r=t.key;if(r==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(ee){var de=ee.getAttribute("data-emotion");de.indexOf(" ")!==-1&&(document.head.appendChild(ee),ee.setAttribute("data-s",""))})}var l=t.stylisPlugins||_z,h={},m,c=[];m=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(ee){for(var de=ee.getAttribute("data-emotion").split(" "),G=1;G<de.length;G++)h[de[G]]=!0;c.push(ee)});var b,k=[gz,yz];{var A,R=[uz,dz(function(ee){A.insert(ee)})],O=hz(k.concat(l,R)),Q=function(de){return ih(lz(de),O)};b=function(de,G,j,U){A=j,Q(de?de+"{"+G.styles+"}":G.styles),U&&(te.inserted[G.name]=!0)}}var te={key:r,sheet:new ZM({key:r,container:m,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:h,registered:{},insert:b};return te.sheet.hydrate(c),te},Fk={exports:{}},Sr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xn=typeof Symbol=="function"&&Symbol.for,px=Xn?Symbol.for("react.element"):60103,mx=Xn?Symbol.for("react.portal"):60106,Ty=Xn?Symbol.for("react.fragment"):60107,Ey=Xn?Symbol.for("react.strict_mode"):60108,Iy=Xn?Symbol.for("react.profiler"):60114,Py=Xn?Symbol.for("react.provider"):60109,Ay=Xn?Symbol.for("react.context"):60110,gx=Xn?Symbol.for("react.async_mode"):60111,My=Xn?Symbol.for("react.concurrent_mode"):60111,zy=Xn?Symbol.for("react.forward_ref"):60112,Ly=Xn?Symbol.for("react.suspense"):60113,xz=Xn?Symbol.for("react.suspense_list"):60120,Dy=Xn?Symbol.for("react.memo"):60115,Ry=Xn?Symbol.for("react.lazy"):60116,bz=Xn?Symbol.for("react.block"):60121,wz=Xn?Symbol.for("react.fundamental"):60117,Sz=Xn?Symbol.for("react.responder"):60118,Cz=Xn?Symbol.for("react.scope"):60119;function Po(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case px:switch(e=e.type,e){case gx:case My:case Ty:case Iy:case Ey:case Ly:return e;default:switch(e=e&&e.$$typeof,e){case Ay:case zy:case Ry:case Dy:case Py:return e;default:return t}}case mx:return t}}}function Nk(e){return Po(e)===My}Sr.AsyncMode=gx;Sr.ConcurrentMode=My;Sr.ContextConsumer=Ay;Sr.ContextProvider=Py;Sr.Element=px;Sr.ForwardRef=zy;Sr.Fragment=Ty;Sr.Lazy=Ry;Sr.Memo=Dy;Sr.Portal=mx;Sr.Profiler=Iy;Sr.StrictMode=Ey;Sr.Suspense=Ly;Sr.isAsyncMode=function(e){return Nk(e)||Po(e)===gx};Sr.isConcurrentMode=Nk;Sr.isContextConsumer=function(e){return Po(e)===Ay};Sr.isContextProvider=function(e){return Po(e)===Py};Sr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===px};Sr.isForwardRef=function(e){return Po(e)===zy};Sr.isFragment=function(e){return Po(e)===Ty};Sr.isLazy=function(e){return Po(e)===Ry};Sr.isMemo=function(e){return Po(e)===Dy};Sr.isPortal=function(e){return Po(e)===mx};Sr.isProfiler=function(e){return Po(e)===Iy};Sr.isStrictMode=function(e){return Po(e)===Ey};Sr.isSuspense=function(e){return Po(e)===Ly};Sr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ty||e===My||e===Iy||e===Ey||e===Ly||e===xz||typeof e=="object"&&e!==null&&(e.$$typeof===Ry||e.$$typeof===Dy||e.$$typeof===Py||e.$$typeof===Ay||e.$$typeof===zy||e.$$typeof===wz||e.$$typeof===Sz||e.$$typeof===Cz||e.$$typeof===bz)};Sr.typeOf=Po;Fk.exports=Sr;var kz=Fk.exports,jk=kz,Tz={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ez={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Vk={};Vk[jk.ForwardRef]=Tz;Vk[jk.Memo]=Ez;var Iz=!0;function Uk(e,t,r){var o="";return r.split(" ").forEach(function(l){e[l]!==void 0?t.push(e[l]+";"):l&&(o+=l+" ")}),o}var yx=function(t,r,o){var l=t.key+"-"+r.name;(o===!1||Iz===!1)&&t.registered[l]===void 0&&(t.registered[l]=r.styles)},vx=function(t,r,o){yx(t,r,o);var l=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var h=r;do t.insert(r===h?"."+l:"",h,t.sheet,!0),h=h.next;while(h!==void 0)}};function Pz(e){for(var t=0,r,o=0,l=e.length;l>=4;++o,l-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(l){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Az={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Mz=/[A-Z]|^ms/g,zz=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Gk=function(t){return t.charCodeAt(1)===45},U2=function(t){return t!=null&&typeof t!="boolean"},Nv=Ok(function(e){return Gk(e)?e:e.replace(Mz,"-$&").toLowerCase()}),G2=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(zz,function(o,l,h){return Qs={name:l,styles:h,next:Qs},l})}return Az[t]!==1&&!Gk(t)&&typeof r=="number"&&r!==0?r+"px":r};function zf(e,t,r){if(r==null)return"";var o=r;if(o.__emotion_styles!==void 0)return o;switch(typeof r){case"boolean":return"";case"object":{var l=r;if(l.anim===1)return Qs={name:l.name,styles:l.styles,next:Qs},l.name;var h=r;if(h.styles!==void 0){var m=h.next;if(m!==void 0)for(;m!==void 0;)Qs={name:m.name,styles:m.styles,next:Qs},m=m.next;var c=h.styles+";";return c}return Lz(e,t,r)}case"function":{if(e!==void 0){var b=Qs,k=r(e);return Qs=b,zf(e,t,k)}break}}var A=r;if(t==null)return A;var R=t[A];return R!==void 0?R:A}function Lz(e,t,r){var o="";if(Array.isArray(r))for(var l=0;l<r.length;l++)o+=zf(e,t,r[l])+";";else for(var h in r){var m=r[h];if(typeof m!="object"){var c=m;t!=null&&t[c]!==void 0?o+=h+"{"+t[c]+"}":U2(c)&&(o+=Nv(h)+":"+G2(h,c)+";")}else if(Array.isArray(m)&&typeof m[0]=="string"&&(t==null||t[m[0]]===void 0))for(var b=0;b<m.length;b++)U2(m[b])&&(o+=Nv(h)+":"+G2(h,m[b])+";");else{var k=zf(e,t,m);switch(h){case"animation":case"animationName":{o+=Nv(h)+":"+k+";";break}default:o+=h+"{"+k+"}"}}}return o}var H2=/label:\s*([^\s;{]+)\s*(;|$)/g,Qs;function Oy(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var o=!0,l="";Qs=void 0;var h=e[0];if(h==null||h.raw===void 0)o=!1,l+=zf(r,t,h);else{var m=h;l+=m[0]}for(var c=1;c<e.length;c++)if(l+=zf(r,t,e[c]),o){var b=h;l+=b[c]}H2.lastIndex=0;for(var k="",A;(A=H2.exec(l))!==null;)k+="-"+A[1];var R=Pz(l)+k;return{name:R,styles:l,next:Qs}}var Dz=function(t){return t()},Hk=F2.useInsertionEffect?F2.useInsertionEffect:!1,qk=Hk||Dz,q2=Hk||pe.useLayoutEffect,Rz=!1,Wk=pe.createContext(typeof HTMLElement<"u"?$k({key:"css"}):null),Oz=Wk.Provider,_x=function(t){return pe.forwardRef(function(r,o){var l=pe.useContext(Wk);return t(r,l,o)})},Mh=pe.createContext({}),xx={}.hasOwnProperty,N_="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Bz=function(t,r){var o={};for(var l in r)xx.call(r,l)&&(o[l]=r[l]);return o[N_]=t,o},$z=function(t){var r=t.cache,o=t.serialized,l=t.isStringTag;return yx(r,o,l),qk(function(){return vx(r,o,l)}),null},Fz=_x(function(e,t,r){var o=e.css;typeof o=="string"&&t.registered[o]!==void 0&&(o=t.registered[o]);var l=e[N_],h=[o],m="";typeof e.className=="string"?m=Uk(t.registered,h,e.className):e.className!=null&&(m=e.className+" ");var c=Oy(h,void 0,pe.useContext(Mh));m+=t.key+"-"+c.name;var b={};for(var k in e)xx.call(e,k)&&k!=="css"&&k!==N_&&!Rz&&(b[k]=e[k]);return b.className=m,r&&(b.ref=r),pe.createElement(pe.Fragment,null,pe.createElement($z,{cache:t,serialized:c,isStringTag:typeof l=="string"}),pe.createElement(l,b))}),Nz=Fz,jv={exports:{}},W2;function Zk(){return W2||(W2=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var h in l)({}).hasOwnProperty.call(l,h)&&(r[h]=l[h])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(jv)),jv.exports}Zk();var jz=function(t,r){var o=arguments;if(r==null||!xx.call(r,"css"))return pe.createElement.apply(void 0,o);var l=o.length,h=new Array(l);h[0]=Nz,h[1]=Bz(t,r);for(var m=2;m<l;m++)h[m]=o[m];return pe.createElement.apply(null,h)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(jz);var Vz=_x(function(e,t){var r=e.styles,o=Oy([r],void 0,pe.useContext(Mh)),l=pe.useRef();return q2(function(){var h=t.key+"-global",m=new t.sheet.constructor({key:h,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),c=!1,b=document.querySelector('style[data-emotion="'+h+" "+o.name+'"]');return t.sheet.tags.length&&(m.before=t.sheet.tags[0]),b!==null&&(c=!0,b.setAttribute("data-emotion",h),m.hydrate([b])),l.current=[m,c],function(){m.flush()}},[t]),q2(function(){var h=l.current,m=h[0],c=h[1];if(c){h[1]=!1;return}if(o.next!==void 0&&vx(t,o.next,!0),m.tags.length){var b=m.tags[m.tags.length-1].nextElementSibling;m.before=b,m.flush()}t.insert("",o,m,!1)},[t,o.name]),null});function bx(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Oy(t)}function Kk(){var e=bx.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Uz=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Gz=Ok(function(e){return Uz.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Hz=Gz,qz=function(t){return t!=="theme"},Z2=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Hz:qz},K2=function(t,r,o){var l;if(r){var h=r.shouldForwardProp;l=t.__emotion_forwardProp&&h?function(m){return t.__emotion_forwardProp(m)&&h(m)}:h}return typeof l!="function"&&o&&(l=t.__emotion_forwardProp),l},Wz=function(t){var r=t.cache,o=t.serialized,l=t.isStringTag;return yx(r,o,l),qk(function(){return vx(r,o,l)}),null},Zz=function e(t,r){var o=t.__emotion_real===t,l=o&&t.__emotion_base||t,h,m;r!==void 0&&(h=r.label,m=r.target);var c=K2(t,r,o),b=c||Z2(l),k=!b("as");return function(){var A=arguments,R=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(h!==void 0&&R.push("label:"+h+";"),A[0]==null||A[0].raw===void 0)R.push.apply(R,A);else{var O=A[0];R.push(O[0]);for(var Q=A.length,te=1;te<Q;te++)R.push(A[te],O[te])}var ee=_x(function(de,G,j){var U=k&&de.as||l,fe="",ie=[],F=de;if(de.theme==null){F={};for(var ce in de)F[ce]=de[ce];F.theme=pe.useContext(Mh)}typeof de.className=="string"?fe=Uk(G.registered,ie,de.className):de.className!=null&&(fe=de.className+" ");var Ce=Oy(R.concat(ie),G.registered,F);fe+=G.key+"-"+Ce.name,m!==void 0&&(fe+=" "+m);var Ue=k&&c===void 0?Z2(U):b,Ae={};for(var Re in de)k&&Re==="as"||Ue(Re)&&(Ae[Re]=de[Re]);return Ae.className=fe,j&&(Ae.ref=j),pe.createElement(pe.Fragment,null,pe.createElement(Wz,{cache:G,serialized:Ce,isStringTag:typeof U=="string"}),pe.createElement(U,Ae))});return ee.displayName=h!==void 0?h:"Styled("+(typeof l=="string"?l:l.displayName||l.name||"Component")+")",ee.defaultProps=t.defaultProps,ee.__emotion_real=ee,ee.__emotion_base=l,ee.__emotion_styles=R,ee.__emotion_forwardProp=c,Object.defineProperty(ee,"toString",{value:function(){return"."+m}}),ee.withComponent=function(de,G){var j=e(de,ge({},r,G,{shouldForwardProp:K2(ee,G,!0)}));return j.apply(void 0,R)},ee}},Kz=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],j_=Zz.bind(null);Kz.forEach(function(e){j_[e]=j_(e)});let V_;typeof document=="object"&&(V_=$k({key:"css",prepend:!0}));function Xz(e){const{injectFirst:t,children:r}=e;return t&&V_?W.jsx(Oz,{value:V_,children:r}):r}function Yz(e){return e==null||Object.keys(e).length===0}function pf(e){const{styles:t,defaultTheme:r={}}=e,o=typeof t=="function"?l=>t(Yz(l)?r:l):t;return W.jsx(Vz,{styles:o})}function wx(e,t){return j_(e,t)}const Xk=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},Jz=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:pf,StyledEngineProvider:Xz,ThemeContext:Mh,css:bx,default:wx,internal_processStyles:Xk,keyframes:Kk},Symbol.toStringTag,{value:"Module"}));function Wt(e,t){if(e==null)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.includes(o))continue;r[o]=e[o]}return r}function za(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Yk(e){if(pe.isValidElement(e)||!za(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=Yk(e[r])}),t}function In(e,t,r={clone:!0}){const o=r.clone?ge({},e):e;return za(e)&&za(t)&&Object.keys(t).forEach(l=>{pe.isValidElement(t[l])?o[l]=t[l]:za(t[l])&&Object.prototype.hasOwnProperty.call(e,l)&&za(e[l])?o[l]=In(e[l],t[l],r):r.clone?o[l]=za(t[l])?Yk(t[l]):t[l]:o[l]=t[l]}),o}const Qz=Object.freeze(Object.defineProperty({__proto__:null,default:In,isPlainObject:za},Symbol.toStringTag,{value:"Module"})),e3=["values","unit","step"],t3=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,o)=>r.val-o.val),t.reduce((r,o)=>ge({},r,{[o.key]:o.val}),{})};function Sx(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:o=5}=e,l=Wt(e,e3),h=t3(t),m=Object.keys(h);function c(O){return`@media (min-width:${typeof t[O]=="number"?t[O]:O}${r})`}function b(O){return`@media (max-width:${(typeof t[O]=="number"?t[O]:O)-o/100}${r})`}function k(O,Q){const te=m.indexOf(Q);return`@media (min-width:${typeof t[O]=="number"?t[O]:O}${r}) and (max-width:${(te!==-1&&typeof t[m[te]]=="number"?t[m[te]]:Q)-o/100}${r})`}function A(O){return m.indexOf(O)+1<m.length?k(O,m[m.indexOf(O)+1]):c(O)}function R(O){const Q=m.indexOf(O);return Q===0?c(m[1]):Q===m.length-1?b(m[Q]):k(O,m[m.indexOf(O)+1]).replace("@media","@media not all and")}return ge({keys:m,values:h,up:c,down:b,between:k,only:A,not:R,unit:r},l)}const r3={borderRadius:4};function mf(e,t){return t?In(e,t,{clone:!1}):e}const Cx={xs:0,sm:600,md:900,lg:1200,xl:1536},X2={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Cx[e]}px)`};function Ms(e,t,r){const o=e.theme||{};if(Array.isArray(t)){const h=o.breakpoints||X2;return t.reduce((m,c,b)=>(m[h.up(h.keys[b])]=r(t[b]),m),{})}if(typeof t=="object"){const h=o.breakpoints||X2;return Object.keys(t).reduce((m,c)=>{if(Object.keys(h.values||Cx).indexOf(c)!==-1){const b=h.up(c);m[b]=r(t[c],c)}else{const b=c;m[b]=t[b]}return m},{})}return r(t)}function Jk(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,l)=>{const h=e.up(l);return o[h]={},o},{}))||{}}function Qk(e,t){return e.reduce((r,o)=>{const l=r[o];return(!l||Object.keys(l).length===0)&&delete r[o],r},t)}function n3(e,...t){const r=Jk(e),o=[r,...t].reduce((l,h)=>In(l,h),{});return Qk(Object.keys(r),o)}function i3(e,t){if(typeof e!="object")return{};const r={},o=Object.keys(t);return Array.isArray(e)?o.forEach((l,h)=>{h<e.length&&(r[l]=!0)}):o.forEach(l=>{e[l]!=null&&(r[l]=!0)}),r}function Vv({values:e,breakpoints:t,base:r}){const o=r||i3(e,t),l=Object.keys(o);if(l.length===0)return e;let h;return l.reduce((m,c,b)=>(Array.isArray(e)?(m[c]=e[b]!=null?e[b]:e[h],h=b):typeof e=="object"?(m[c]=e[c]!=null?e[c]:e[h],h=c):m[c]=e,m),{})}function cr(e){if(typeof e!="string")throw new Error(Dl(7));return e.charAt(0).toUpperCase()+e.slice(1)}const o3=Object.freeze(Object.defineProperty({__proto__:null,default:cr},Symbol.toStringTag,{value:"Module"}));function ph(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const o=`vars.${t}`.split(".").reduce((l,h)=>l&&l[h]?l[h]:null,e);if(o!=null)return o}return t.split(".").reduce((o,l)=>o&&o[l]!=null?o[l]:null,e)}function Ag(e,t,r,o=r){let l;return typeof e=="function"?l=e(r):Array.isArray(e)?l=e[r]||o:l=ph(e,r)||o,t&&(l=t(l,o,e)),l}function wn(e){const{prop:t,cssProperty:r=e.prop,themeKey:o,transform:l}=e,h=m=>{if(m[t]==null)return null;const c=m[t],b=m.theme,k=ph(b,o)||{};return Ms(m,c,R=>{let O=Ag(k,l,R);return R===O&&typeof R=="string"&&(O=Ag(k,l,`${t}${R==="default"?"":cr(R)}`,R)),r===!1?O:{[r]:O}})};return h.propTypes={},h.filterProps=[t],h}function s3(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const a3={m:"margin",p:"padding"},l3={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Y2={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c3=s3(e=>{if(e.length>2)if(Y2[e])e=Y2[e];else return[e];const[t,r]=e.split(""),o=a3[t],l=l3[r]||"";return Array.isArray(l)?l.map(h=>o+h):[o+l]}),kx=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Tx=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...kx,...Tx];function ap(e,t,r,o){var l;const h=(l=ph(e,t,!1))!=null?l:r;return typeof h=="number"?m=>typeof m=="string"?m:h*m:Array.isArray(h)?m=>typeof m=="string"?m:h[m]:typeof h=="function"?h:()=>{}}function Ex(e){return ap(e,"spacing",8)}function Tc(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),o=e(r);return t>=0?o:typeof o=="number"?-o:`-${o}`}function u3(e,t){return r=>e.reduce((o,l)=>(o[l]=Tc(t,r),o),{})}function h3(e,t,r,o){if(t.indexOf(r)===-1)return null;const l=c3(r),h=u3(l,o),m=e[r];return Ms(e,m,h)}function eT(e,t){const r=Ex(e.theme);return Object.keys(e).map(o=>h3(e,t,o,r)).reduce(mf,{})}function ln(e){return eT(e,kx)}ln.propTypes={};ln.filterProps=kx;function cn(e){return eT(e,Tx)}cn.propTypes={};cn.filterProps=Tx;function tT(e=8){if(e.mui)return e;const t=Ex({spacing:e}),r=(...o)=>(o.length===0?[1]:o).map(h=>{const m=t(h);return typeof m=="number"?`${m}px`:m}).join(" ");return r.mui=!0,r}function By(...e){const t=e.reduce((o,l)=>(l.filterProps.forEach(h=>{o[h]=l}),o),{}),r=o=>Object.keys(o).reduce((l,h)=>t[h]?mf(l,t[h](o)):l,{});return r.propTypes={},r.filterProps=e.reduce((o,l)=>o.concat(l.filterProps),[]),r}function Ho(e){return typeof e!="number"?e:`${e}px solid`}function ns(e,t){return wn({prop:e,themeKey:"borders",transform:t})}const d3=ns("border",Ho),f3=ns("borderTop",Ho),p3=ns("borderRight",Ho),m3=ns("borderBottom",Ho),g3=ns("borderLeft",Ho),y3=ns("borderColor"),v3=ns("borderTopColor"),_3=ns("borderRightColor"),x3=ns("borderBottomColor"),b3=ns("borderLeftColor"),w3=ns("outline",Ho),S3=ns("outlineColor"),$y=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=ap(e.theme,"shape.borderRadius",4),r=o=>({borderRadius:Tc(t,o)});return Ms(e,e.borderRadius,r)}return null};$y.propTypes={};$y.filterProps=["borderRadius"];By(d3,f3,p3,m3,g3,y3,v3,_3,x3,b3,$y,w3,S3);const Fy=e=>{if(e.gap!==void 0&&e.gap!==null){const t=ap(e.theme,"spacing",8),r=o=>({gap:Tc(t,o)});return Ms(e,e.gap,r)}return null};Fy.propTypes={};Fy.filterProps=["gap"];const Ny=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=ap(e.theme,"spacing",8),r=o=>({columnGap:Tc(t,o)});return Ms(e,e.columnGap,r)}return null};Ny.propTypes={};Ny.filterProps=["columnGap"];const jy=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=ap(e.theme,"spacing",8),r=o=>({rowGap:Tc(t,o)});return Ms(e,e.rowGap,r)}return null};jy.propTypes={};jy.filterProps=["rowGap"];const C3=wn({prop:"gridColumn"}),k3=wn({prop:"gridRow"}),T3=wn({prop:"gridAutoFlow"}),E3=wn({prop:"gridAutoColumns"}),I3=wn({prop:"gridAutoRows"}),P3=wn({prop:"gridTemplateColumns"}),A3=wn({prop:"gridTemplateRows"}),M3=wn({prop:"gridTemplateAreas"}),z3=wn({prop:"gridArea"});By(Fy,Ny,jy,C3,k3,T3,E3,I3,P3,A3,M3,z3);function oh(e,t){return t==="grey"?t:e}const L3=wn({prop:"color",themeKey:"palette",transform:oh}),D3=wn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:oh}),R3=wn({prop:"backgroundColor",themeKey:"palette",transform:oh});By(L3,D3,R3);function vo(e){return e<=1&&e!==0?`${e*100}%`:e}const O3=wn({prop:"width",transform:vo}),Ix=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var o,l;const h=((o=e.theme)==null||(o=o.breakpoints)==null||(o=o.values)==null?void 0:o[r])||Cx[r];return h?((l=e.theme)==null||(l=l.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${h}${e.theme.breakpoints.unit}`}:{maxWidth:h}:{maxWidth:vo(r)}};return Ms(e,e.maxWidth,t)}return null};Ix.filterProps=["maxWidth"];const B3=wn({prop:"minWidth",transform:vo}),$3=wn({prop:"height",transform:vo}),F3=wn({prop:"maxHeight",transform:vo}),N3=wn({prop:"minHeight",transform:vo});wn({prop:"size",cssProperty:"width",transform:vo});wn({prop:"size",cssProperty:"height",transform:vo});const j3=wn({prop:"boxSizing"});By(O3,Ix,B3,$3,F3,N3,j3);const Oc={border:{themeKey:"borders",transform:Ho},borderTop:{themeKey:"borders",transform:Ho},borderRight:{themeKey:"borders",transform:Ho},borderBottom:{themeKey:"borders",transform:Ho},borderLeft:{themeKey:"borders",transform:Ho},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ho},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:$y},color:{themeKey:"palette",transform:oh},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:oh},backgroundColor:{themeKey:"palette",transform:oh},p:{style:cn},pt:{style:cn},pr:{style:cn},pb:{style:cn},pl:{style:cn},px:{style:cn},py:{style:cn},padding:{style:cn},paddingTop:{style:cn},paddingRight:{style:cn},paddingBottom:{style:cn},paddingLeft:{style:cn},paddingX:{style:cn},paddingY:{style:cn},paddingInline:{style:cn},paddingInlineStart:{style:cn},paddingInlineEnd:{style:cn},paddingBlock:{style:cn},paddingBlockStart:{style:cn},paddingBlockEnd:{style:cn},m:{style:ln},mt:{style:ln},mr:{style:ln},mb:{style:ln},ml:{style:ln},mx:{style:ln},my:{style:ln},margin:{style:ln},marginTop:{style:ln},marginRight:{style:ln},marginBottom:{style:ln},marginLeft:{style:ln},marginX:{style:ln},marginY:{style:ln},marginInline:{style:ln},marginInlineStart:{style:ln},marginInlineEnd:{style:ln},marginBlock:{style:ln},marginBlockStart:{style:ln},marginBlockEnd:{style:ln},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Fy},rowGap:{style:jy},columnGap:{style:Ny},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:vo},maxWidth:{style:Ix},minWidth:{transform:vo},height:{transform:vo},maxHeight:{transform:vo},minHeight:{transform:vo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function V3(...e){const t=e.reduce((o,l)=>o.concat(Object.keys(l)),[]),r=new Set(t);return e.every(o=>r.size===Object.keys(o).length)}function U3(e,t){return typeof e=="function"?e(t):e}function rT(){function e(r,o,l,h){const m={[r]:o,theme:l},c=h[r];if(!c)return{[r]:o};const{cssProperty:b=r,themeKey:k,transform:A,style:R}=c;if(o==null)return null;if(k==="typography"&&o==="inherit")return{[r]:o};const O=ph(l,k)||{};return R?R(m):Ms(m,o,te=>{let ee=Ag(O,A,te);return te===ee&&typeof te=="string"&&(ee=Ag(O,A,`${r}${te==="default"?"":cr(te)}`,te)),b===!1?ee:{[b]:ee}})}function t(r){var o;const{sx:l,theme:h={}}=r||{};if(!l)return null;const m=(o=h.unstable_sxConfig)!=null?o:Oc;function c(b){let k=b;if(typeof b=="function")k=b(h);else if(typeof b!="object")return b;if(!k)return null;const A=Jk(h.breakpoints),R=Object.keys(A);let O=A;return Object.keys(k).forEach(Q=>{const te=U3(k[Q],h);if(te!=null)if(typeof te=="object")if(m[Q])O=mf(O,e(Q,te,h,m));else{const ee=Ms({theme:h},te,de=>({[Q]:de}));V3(ee,te)?O[Q]=t({sx:te,theme:h}):O=mf(O,ee)}else O=mf(O,e(Q,te,h,m))}),Qk(R,O)}return Array.isArray(l)?l.map(c):c(l)}return t}const Za=rT();Za.filterProps=["sx"];function Px(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const G3=["breakpoints","palette","spacing","shape"];function lp(e={},...t){const{breakpoints:r={},palette:o={},spacing:l,shape:h={}}=e,m=Wt(e,G3),c=Sx(r),b=tT(l);let k=In({breakpoints:c,direction:"ltr",components:{},palette:ge({mode:"light"},o),spacing:b,shape:ge({},r3,h)},m);return k.applyStyles=Px,k=t.reduce((A,R)=>In(A,R),k),k.unstable_sxConfig=ge({},Oc,m==null?void 0:m.unstable_sxConfig),k.unstable_sx=function(R){return Za({sx:R,theme:this})},k}const H3=Object.freeze(Object.defineProperty({__proto__:null,default:lp,private_createBreakpoints:Sx,unstable_applyStyles:Px},Symbol.toStringTag,{value:"Module"}));function q3(e){return Object.keys(e).length===0}function nT(e=null){const t=pe.useContext(Mh);return!t||q3(t)?e:t}const W3=lp();function Vy(e=W3){return nT(e)}function Z3({styles:e,themeId:t,defaultTheme:r={}}){const o=Vy(r),l=typeof e=="function"?e(t&&o[t]||o):e;return W.jsx(pf,{styles:l})}const K3=["sx"],X3=e=>{var t,r;const o={systemProps:{},otherProps:{}},l=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:Oc;return Object.keys(e).forEach(h=>{l[h]?o.systemProps[h]=e[h]:o.otherProps[h]=e[h]}),o};function Uy(e){const{sx:t}=e,r=Wt(e,K3),{systemProps:o,otherProps:l}=X3(r);let h;return Array.isArray(t)?h=[o,...t]:typeof t=="function"?h=(...m)=>{const c=t(...m);return za(c)?ge({},o,c):o}:h=ge({},o,t),ge({},l,{sx:h})}const Y3=Object.freeze(Object.defineProperty({__proto__:null,default:Za,extendSxProp:Uy,unstable_createStyleFunctionSx:rT,unstable_defaultSxConfig:Oc},Symbol.toStringTag,{value:"Module"})),J2=e=>e,J3=()=>{let e=J2;return{configure(t){e=t},generate(t){return e(t)},reset(){e=J2}}},iT=J3();function oT(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=oT(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function ao(){for(var e,t,r=0,o="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=oT(e))&&(o&&(o+=" "),o+=t);return o}const Q3=["className","component"];function eL(e={}){const{themeId:t,defaultTheme:r,defaultClassName:o="MuiBox-root",generateClassName:l}=e,h=wx("div",{shouldForwardProp:c=>c!=="theme"&&c!=="sx"&&c!=="as"})(Za);return pe.forwardRef(function(b,k){const A=Vy(r),R=Uy(b),{className:O,component:Q="div"}=R,te=Wt(R,Q3);return W.jsx(h,ge({as:Q,ref:k,className:ao(O,l?l(o):o),theme:t&&A[t]||A},te))})}const tL={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function cp(e,t,r="Mui"){const o=tL[t];return o?`${r}-${o}`:`${iT.generate(e)}-${t}`}function Gy(e,t,r="Mui"){const o={};return t.forEach(l=>{o[l]=cp(e,l,r)}),o}var sT={exports:{}},zr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ax=Symbol.for("react.transitional.element"),Mx=Symbol.for("react.portal"),Hy=Symbol.for("react.fragment"),qy=Symbol.for("react.strict_mode"),Wy=Symbol.for("react.profiler"),Zy=Symbol.for("react.consumer"),Ky=Symbol.for("react.context"),Xy=Symbol.for("react.forward_ref"),Yy=Symbol.for("react.suspense"),Jy=Symbol.for("react.suspense_list"),Qy=Symbol.for("react.memo"),e0=Symbol.for("react.lazy"),rL=Symbol.for("react.offscreen"),nL=Symbol.for("react.client.reference");function is(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Ax:switch(e=e.type,e){case Hy:case Wy:case qy:case Yy:case Jy:return e;default:switch(e=e&&e.$$typeof,e){case Ky:case Xy:case e0:case Qy:return e;case Zy:return e;default:return t}}case Mx:return t}}}zr.ContextConsumer=Zy;zr.ContextProvider=Ky;zr.Element=Ax;zr.ForwardRef=Xy;zr.Fragment=Hy;zr.Lazy=e0;zr.Memo=Qy;zr.Portal=Mx;zr.Profiler=Wy;zr.StrictMode=qy;zr.Suspense=Yy;zr.SuspenseList=Jy;zr.isContextConsumer=function(e){return is(e)===Zy};zr.isContextProvider=function(e){return is(e)===Ky};zr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ax};zr.isForwardRef=function(e){return is(e)===Xy};zr.isFragment=function(e){return is(e)===Hy};zr.isLazy=function(e){return is(e)===e0};zr.isMemo=function(e){return is(e)===Qy};zr.isPortal=function(e){return is(e)===Mx};zr.isProfiler=function(e){return is(e)===Wy};zr.isStrictMode=function(e){return is(e)===qy};zr.isSuspense=function(e){return is(e)===Yy};zr.isSuspenseList=function(e){return is(e)===Jy};zr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Hy||e===Wy||e===qy||e===Yy||e===Jy||e===rL||typeof e=="object"&&e!==null&&(e.$$typeof===e0||e.$$typeof===Qy||e.$$typeof===Ky||e.$$typeof===Zy||e.$$typeof===Xy||e.$$typeof===nL||e.getModuleId!==void 0)};zr.typeOf=is;sT.exports=zr;var Q2=sT.exports;const iL=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function aT(e){const t=`${e}`.match(iL);return t&&t[1]||""}function lT(e,t=""){return e.displayName||e.name||aT(e)||t}function eS(e,t,r){const o=lT(t);return e.displayName||(o!==""?`${r}(${o})`:r)}function oL(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return lT(e,"Component");if(typeof e=="object")switch(e.$$typeof){case Q2.ForwardRef:return eS(e,e.render,"ForwardRef");case Q2.Memo:return eS(e,e.type,"memo");default:return}}}const sL=Object.freeze(Object.defineProperty({__proto__:null,default:oL,getFunctionName:aT},Symbol.toStringTag,{value:"Module"})),aL=["ownerState"],lL=["variants"],cL=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function uL(e){return Object.keys(e).length===0}function hL(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Uv(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const dL=lp(),fL=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Rm({defaultTheme:e,theme:t,themeId:r}){return uL(t)?e:t[r]||t}function pL(e){return e?(t,r)=>r[e]:null}function dg(e,t){let{ownerState:r}=t,o=Wt(t,aL);const l=typeof e=="function"?e(ge({ownerState:r},o)):e;if(Array.isArray(l))return l.flatMap(h=>dg(h,ge({ownerState:r},o)));if(l&&typeof l=="object"&&Array.isArray(l.variants)){const{variants:h=[]}=l;let c=Wt(l,lL);return h.forEach(b=>{let k=!0;typeof b.props=="function"?k=b.props(ge({ownerState:r},o,r)):Object.keys(b.props).forEach(A=>{(r==null?void 0:r[A])!==b.props[A]&&o[A]!==b.props[A]&&(k=!1)}),k&&(Array.isArray(c)||(c=[c]),c.push(typeof b.style=="function"?b.style(ge({ownerState:r},o,r)):b.style))}),c}return l}function cT(e={}){const{themeId:t,defaultTheme:r=dL,rootShouldForwardProp:o=Uv,slotShouldForwardProp:l=Uv}=e,h=m=>Za(ge({},m,{theme:Rm(ge({},m,{defaultTheme:r,themeId:t}))}));return h.__mui_systemSx=!0,(m,c={})=>{Xk(m,ie=>ie.filter(F=>!(F!=null&&F.__mui_systemSx)));const{name:b,slot:k,skipVariantsResolver:A,skipSx:R,overridesResolver:O=pL(fL(k))}=c,Q=Wt(c,cL),te=A!==void 0?A:k&&k!=="Root"&&k!=="root"||!1,ee=R||!1;let de,G=Uv;k==="Root"||k==="root"?G=o:k?G=l:hL(m)&&(G=void 0);const j=wx(m,ge({shouldForwardProp:G,label:de},Q)),U=ie=>typeof ie=="function"&&ie.__emotion_real!==ie||za(ie)?F=>dg(ie,ge({},F,{theme:Rm({theme:F.theme,defaultTheme:r,themeId:t})})):ie,fe=(ie,...F)=>{let ce=U(ie);const Ce=F?F.map(U):[];b&&O&&Ce.push(Re=>{const We=Rm(ge({},Re,{defaultTheme:r,themeId:t}));if(!We.components||!We.components[b]||!We.components[b].styleOverrides)return null;const He=We.components[b].styleOverrides,Ze={};return Object.entries(He).forEach(([Ge,Fe])=>{Ze[Ge]=dg(Fe,ge({},Re,{theme:We}))}),O(Re,Ze)}),b&&!te&&Ce.push(Re=>{var We;const He=Rm(ge({},Re,{defaultTheme:r,themeId:t})),Ze=He==null||(We=He.components)==null||(We=We[b])==null?void 0:We.variants;return dg({variants:Ze},ge({},Re,{theme:He}))}),ee||Ce.push(h);const Ue=Ce.length-F.length;if(Array.isArray(ie)&&Ue>0){const Re=new Array(Ue).fill("");ce=[...ie,...Re],ce.raw=[...ie.raw,...Re]}const Ae=j(ce,...Ce);return m.muiName&&(Ae.muiName=m.muiName),Ae};return j.withConfig&&(fe.withConfig=j.withConfig),fe}}const mL=cT();function Mg(e,t){const r=ge({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))r[o]=ge({},e[o],r[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const l=e[o]||{},h=t[o];r[o]={},!h||!Object.keys(h)?r[o]=l:!l||!Object.keys(l)?r[o]=h:(r[o]=ge({},h),Object.keys(l).forEach(m=>{r[o][m]=Mg(l[m],h[m])}))}else r[o]===void 0&&(r[o]=e[o])}),r}function gL(e){const{theme:t,name:r,props:o}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?o:Mg(t.components[r].defaultProps,o)}function uT({props:e,name:t,defaultTheme:r,themeId:o}){let l=Vy(r);return o&&(l=l[o]||l),gL({theme:l,name:t,props:e})}function yL(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}const vL=Object.freeze(Object.defineProperty({__proto__:null,default:yL},Symbol.toStringTag,{value:"Module"}));function _L(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,l)=>l<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function hT(e){if(e.type)return e;if(e.charAt(0)==="#")return hT(_L(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(Dl(9,e));let o=e.substring(t+1,e.length-1),l;if(r==="color"){if(o=o.split(" "),l=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(l)===-1)throw new Error(Dl(10,l))}else o=o.split(",");return o=o.map(h=>parseFloat(h)),{type:r,values:o,colorSpace:l}}const hc=e=>{const t=hT(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};function xL(e,t=166){let r;function o(...l){const h=()=>{e.apply(this,l)};clearTimeout(r),r=setTimeout(h,t)}return o.clear=()=>{clearTimeout(r)},o}function zx(e,t){var r,o;return pe.isValidElement(e)&&t.indexOf((r=e.type.muiName)!=null?r:(o=e.type)==null||(o=o._payload)==null||(o=o.value)==null?void 0:o.muiName)!==-1}function bL(e){return e&&e.ownerDocument||document}function dT(e){return bL(e).defaultView||window}function wL(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function $l(...e){return pe.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{wL(r,t)})},e)}const tS={};function SL(e,t){const r=pe.useRef(tS);return r.current===tS&&(r.current=e(t)),r}const CL=[];function kL(e){pe.useEffect(e,CL)}class t0{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new t0}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function TL(){const e=SL(t0.create).current;return kL(e.disposeEffect),e}let r0=!0,U_=!1;const EL=new t0,IL={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function PL(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&IL[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function AL(e){e.metaKey||e.altKey||e.ctrlKey||(r0=!0)}function Gv(){r0=!1}function ML(){this.visibilityState==="hidden"&&U_&&(r0=!0)}function zL(e){e.addEventListener("keydown",AL,!0),e.addEventListener("mousedown",Gv,!0),e.addEventListener("pointerdown",Gv,!0),e.addEventListener("touchstart",Gv,!0),e.addEventListener("visibilitychange",ML,!0)}function LL(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return r0||PL(t)}function DL(){const e=pe.useCallback(l=>{l!=null&&zL(l.ownerDocument)},[]),t=pe.useRef(!1);function r(){return t.current?(U_=!0,EL.start(100,()=>{U_=!1}),t.current=!1,!0):!1}function o(l){return LL(l)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:o,onBlur:r,ref:e}}function lo(e,t,r=void 0){const o={};return Object.keys(e).forEach(l=>{o[l]=e[l].reduce((h,m)=>{if(m){const c=t(m);c!==""&&h.push(c),r&&r[m]&&h.push(r[m])}return h},[]).join(" ")}),o}function RL(e){return typeof e=="string"}function OL(e,t,r){return e===void 0||RL(e)?t:ge({},t,{ownerState:ge({},t.ownerState,r)})}function G_(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(o=>o.match(/^on[A-Z]/)&&typeof e[o]=="function"&&!t.includes(o)).forEach(o=>{r[o]=e[o]}),r}function rS(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function BL(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:o,externalForwardedProps:l,className:h}=e;if(!t){const Q=ao(r==null?void 0:r.className,h,l==null?void 0:l.className,o==null?void 0:o.className),te=ge({},r==null?void 0:r.style,l==null?void 0:l.style,o==null?void 0:o.style),ee=ge({},r,l,o);return Q.length>0&&(ee.className=Q),Object.keys(te).length>0&&(ee.style=te),{props:ee,internalRef:void 0}}const m=G_(ge({},l,o)),c=rS(o),b=rS(l),k=t(m),A=ao(k==null?void 0:k.className,r==null?void 0:r.className,h,l==null?void 0:l.className,o==null?void 0:o.className),R=ge({},k==null?void 0:k.style,r==null?void 0:r.style,l==null?void 0:l.style,o==null?void 0:o.style),O=ge({},k,r,b,c);return A.length>0&&(O.className=A),Object.keys(R).length>0&&(O.style=R),{props:O,internalRef:k.ref}}function $L(e,t,r){return typeof e=="function"?e(t,r):e}function fT(e){if(parseInt(pe.version,10)>=19){var t;return(e==null||(t=e.props)==null?void 0:t.ref)||null}return(e==null?void 0:e.ref)||null}const pT=pe.createContext(null);function Lx(){return pe.useContext(pT)}const FL=typeof Symbol=="function"&&Symbol.for,NL=FL?Symbol.for("mui.nested"):"__THEME_NESTED__";function jL(e,t){return typeof t=="function"?t(e):ge({},e,t)}function VL(e){const{children:t,theme:r}=e,o=Lx(),l=pe.useMemo(()=>{const h=o===null?r:jL(o,r);return h!=null&&(h[NL]=o!==null),h},[r,o]);return W.jsx(pT.Provider,{value:l,children:t})}const UL=["value"],GL=pe.createContext();function HL(e){let{value:t}=e,r=Wt(e,UL);return W.jsx(GL.Provider,ge({value:t??!0},r))}const mT=pe.createContext(void 0);function qL({value:e,children:t}){return W.jsx(mT.Provider,{value:e,children:t})}function WL(e){const{theme:t,name:r,props:o}=e;if(!t||!t.components||!t.components[r])return o;const l=t.components[r];return l.defaultProps?Mg(l.defaultProps,o):!l.styleOverrides&&!l.variants?Mg(l,o):o}function ZL({props:e,name:t}){const r=pe.useContext(mT);return WL({props:e,name:t,theme:{components:r}})}const nS={};function iS(e,t,r,o=!1){return pe.useMemo(()=>{const l=e&&t[e]||t;if(typeof r=="function"){const h=r(l),m=e?ge({},t,{[e]:h}):h;return o?()=>m:m}return e?ge({},t,{[e]:r}):ge({},t,r)},[e,t,r,o])}function KL(e){const{children:t,theme:r,themeId:o}=e,l=nT(nS),h=Lx()||nS,m=iS(o,l,r),c=iS(o,h,r,!0),b=m.direction==="rtl";return W.jsx(VL,{theme:c,children:W.jsx(Mh.Provider,{value:m,children:W.jsx(HL,{value:b,children:W.jsx(qL,{value:m==null?void 0:m.components,children:t})})})})}const Dx="mode",Rx="color-scheme",gT="data-color-scheme";function XL(e){const{defaultMode:t="light",defaultLightColorScheme:r="light",defaultDarkColorScheme:o="dark",modeStorageKey:l=Dx,colorSchemeStorageKey:h=Rx,attribute:m=gT,colorSchemeNode:c="document.documentElement",nonce:b}=e||{};return W.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?b:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${l}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${h}-dark') || '${o}';
    } else {
      colorScheme = localStorage.getItem('${h}-light') || '${r}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${h}-light') || '${r}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${h}-dark') || '${o}';
  }
  if (colorScheme) {
    ${c}.setAttribute('${m}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function oS(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function yT(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function YL(e){return yT(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function Hv(e,t){if(typeof window>"u")return;let r;try{r=localStorage.getItem(e)||void 0,r||localStorage.setItem(e,t)}catch{}return r||t}function JL(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:o,supportedColorSchemes:l=[],modeStorageKey:h=Dx,colorSchemeStorageKey:m=Rx,storageWindow:c=typeof window>"u"?void 0:window}=e,b=l.join(","),[k,A]=pe.useState(()=>{const de=Hv(h,t),G=Hv(`${m}-light`,r),j=Hv(`${m}-dark`,o);return{mode:de,systemMode:oS(de),lightColorScheme:G,darkColorScheme:j}}),R=YL(k),O=pe.useCallback(de=>{A(G=>{if(de===G.mode)return G;const j=de??t;try{localStorage.setItem(h,j)}catch{}return ge({},G,{mode:j,systemMode:oS(j)})})},[h,t]),Q=pe.useCallback(de=>{de?typeof de=="string"?de&&!b.includes(de)?console.error(`\`${de}\` does not exist in \`theme.colorSchemes\`.`):A(G=>{const j=ge({},G);return yT(G,U=>{try{localStorage.setItem(`${m}-${U}`,de)}catch{}U==="light"&&(j.lightColorScheme=de),U==="dark"&&(j.darkColorScheme=de)}),j}):A(G=>{const j=ge({},G),U=de.light===null?r:de.light,fe=de.dark===null?o:de.dark;if(U)if(!b.includes(U))console.error(`\`${U}\` does not exist in \`theme.colorSchemes\`.`);else{j.lightColorScheme=U;try{localStorage.setItem(`${m}-light`,U)}catch{}}if(fe)if(!b.includes(fe))console.error(`\`${fe}\` does not exist in \`theme.colorSchemes\`.`);else{j.darkColorScheme=fe;try{localStorage.setItem(`${m}-dark`,fe)}catch{}}return j}):A(G=>{try{localStorage.setItem(`${m}-light`,r),localStorage.setItem(`${m}-dark`,o)}catch{}return ge({},G,{lightColorScheme:r,darkColorScheme:o})})},[b,m,r,o]),te=pe.useCallback(de=>{k.mode==="system"&&A(G=>{const j=de!=null&&de.matches?"dark":"light";return G.systemMode===j?G:ge({},G,{systemMode:j})})},[k.mode]),ee=pe.useRef(te);return ee.current=te,pe.useEffect(()=>{const de=(...j)=>ee.current(...j),G=window.matchMedia("(prefers-color-scheme: dark)");return G.addListener(de),de(G),()=>{G.removeListener(de)}},[]),pe.useEffect(()=>{if(c){const de=G=>{const j=G.newValue;typeof G.key=="string"&&G.key.startsWith(m)&&(!j||b.match(j))&&(G.key.endsWith("light")&&Q({light:j}),G.key.endsWith("dark")&&Q({dark:j})),G.key===h&&(!j||["light","dark","system"].includes(j))&&O(j||t)};return c.addEventListener("storage",de),()=>{c.removeEventListener("storage",de)}}},[Q,O,h,m,b,t,c]),ge({},k,{colorScheme:R,setMode:O,setColorScheme:Q})}const QL=["colorSchemes","components","generateCssVars","cssVarPrefix"],eD="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function vT(e){const{themeId:t,theme:r={},attribute:o=gT,modeStorageKey:l=Dx,colorSchemeStorageKey:h=Rx,defaultMode:m="light",defaultColorScheme:c,disableTransitionOnChange:b=!1,resolveTheme:k,excludeVariablesFromRoot:A}=e;(!r.colorSchemes||typeof c=="string"&&!r.colorSchemes[c]||typeof c=="object"&&!r.colorSchemes[c==null?void 0:c.light]||typeof c=="object"&&!r.colorSchemes[c==null?void 0:c.dark])&&console.error(`MUI: \`${c}\` does not exist in \`theme.colorSchemes\`.`);const R=pe.createContext(void 0),O=()=>{const G=pe.useContext(R);if(!G)throw new Error(Dl(19));return G};function Q(G){const{children:j,theme:U=r,modeStorageKey:fe=l,colorSchemeStorageKey:ie=h,attribute:F=o,defaultMode:ce=m,defaultColorScheme:Ce=c,disableTransitionOnChange:Ue=b,storageWindow:Ae=typeof window>"u"?void 0:window,documentNode:Re=typeof document>"u"?void 0:document,colorSchemeNode:We=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:He=":root",disableNestedContext:Ze=!1,disableStyleSheetGeneration:Ge=!1}=G,Fe=pe.useRef(!1),ot=Lx(),Pe=pe.useContext(R),st=!!Pe&&!Ze,yt=U[t],Et=yt||U,{colorSchemes:mt={},components:Dt={},generateCssVars:jt=()=>({vars:{},css:{}}),cssVarPrefix:_r}=Et,Ct=Wt(Et,QL),Pt=Object.keys(mt),at=typeof Ce=="string"?Ce:Ce.light,At=typeof Ce=="string"?Ce:Ce.dark,{mode:Rt,setMode:or,systemMode:rn,lightColorScheme:co,darkColorScheme:Ui,colorScheme:$s,setColorScheme:Do}=JL({supportedColorSchemes:Pt,defaultLightColorScheme:at,defaultDarkColorScheme:At,modeStorageKey:fe,colorSchemeStorageKey:ie,defaultMode:ce,storageWindow:Ae});let ui=Rt,Cn=$s;st&&(ui=Pe.mode,Cn=Pe.colorScheme);const as=ui||(ce==="system"?m:ce),Me=Cn||(as==="dark"?At:at),{css:Bn,vars:Yn}=jt(),Ut=ge({},Ct,{components:Dt,colorSchemes:mt,cssVarPrefix:_r,vars:Yn,getColorSchemeSelector:dn=>`[${F}="${dn}"] &`}),Zt={},Ii={};Object.entries(mt).forEach(([dn,kn])=>{const{css:Hi,vars:Ke}=jt(dn);Ut.vars=In(Ut.vars,Ke),dn===Me&&(Object.keys(kn).forEach(er=>{kn[er]&&typeof kn[er]=="object"?Ut[er]=ge({},Ut[er],kn[er]):Ut[er]=kn[er]}),Ut.palette&&(Ut.palette.colorScheme=dn));const qi=typeof Ce=="string"?Ce:ce==="dark"?Ce.dark:Ce.light;if(dn===qi){if(A){const er={};A(_r).forEach(uo=>{er[uo]=Hi[uo],delete Hi[uo]}),Zt[`[${F}="${dn}"]`]=er}Zt[`${He}, [${F}="${dn}"]`]=Hi}else Ii[`${He===":root"?"":He}[${F}="${dn}"]`]=Hi}),Ut.vars=In(Ut.vars,Yn),pe.useEffect(()=>{Cn&&We&&We.setAttribute(F,Cn)},[Cn,F,We]),pe.useEffect(()=>{let dn;if(Ue&&Fe.current&&Re){const kn=Re.createElement("style");kn.appendChild(Re.createTextNode(eD)),Re.head.appendChild(kn),window.getComputedStyle(Re.body),dn=setTimeout(()=>{Re.head.removeChild(kn)},1)}return()=>{clearTimeout(dn)}},[Cn,Ue,Re]),pe.useEffect(()=>(Fe.current=!0,()=>{Fe.current=!1}),[]);const Fs=pe.useMemo(()=>({allColorSchemes:Pt,colorScheme:Cn,darkColorScheme:Ui,lightColorScheme:co,mode:ui,setColorScheme:Do,setMode:or,systemMode:rn}),[Pt,Cn,Ui,co,ui,Do,or,rn]);let Gi=!0;(Ge||st&&(ot==null?void 0:ot.cssVarPrefix)===_r)&&(Gi=!1);const ua=W.jsxs(pe.Fragment,{children:[Gi&&W.jsxs(pe.Fragment,{children:[W.jsx(pf,{styles:{[He]:Bn}}),W.jsx(pf,{styles:Zt}),W.jsx(pf,{styles:Ii})]}),W.jsx(KL,{themeId:yt?t:void 0,theme:k?k(Ut):Ut,children:j})]});return st?ua:W.jsx(R.Provider,{value:Fs,children:ua})}const te=typeof c=="string"?c:c.light,ee=typeof c=="string"?c:c.dark;return{CssVarsProvider:Q,useColorScheme:O,getInitColorSchemeScript:G=>XL(ge({attribute:o,colorSchemeStorageKey:h,defaultMode:m,defaultLightColorScheme:te,defaultDarkColorScheme:ee,modeStorageKey:l},G))}}function n0(e=""){function t(...o){if(!o.length)return"";const l=o[0];return typeof l=="string"&&!l.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${l}${t(...o.slice(1))})`:`, ${l}`}return(o,...l)=>`var(--${e?`${e}-`:""}${o}${t(...l)})`}const sS=(e,t,r,o=[])=>{let l=e;t.forEach((h,m)=>{m===t.length-1?Array.isArray(l)?l[Number(h)]=r:l&&typeof l=="object"&&(l[h]=r):l&&typeof l=="object"&&(l[h]||(l[h]=o.includes(h)?[]:{}),l=l[h])})},tD=(e,t,r)=>{function o(l,h=[],m=[]){Object.entries(l).forEach(([c,b])=>{(!r||!r([...h,c]))&&b!=null&&(typeof b=="object"&&Object.keys(b).length>0?o(b,[...h,c],Array.isArray(b)?[...m,c]:m):t([...h,c],b,m))})}o(e)},rD=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(o=>e.includes(o))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function qv(e,t){const{prefix:r,shouldSkipGeneratingVar:o}=t||{},l={},h={},m={};return tD(e,(c,b,k)=>{if((typeof b=="string"||typeof b=="number")&&(!o||!o(c,b))){const A=`--${r?`${r}-`:""}${c.join("-")}`;Object.assign(l,{[A]:rD(c,b)}),sS(h,c,`var(${A})`,k),sS(m,c,`var(${A}, ${b})`,k)}},c=>c[0]==="vars"),{css:l,vars:h,varsWithDefaults:m}}function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}function nD(e,t){if(Lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t);if(Lf(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function iD(e){var t=nD(e,"string");return Lf(t)=="symbol"?t:t+""}const oD=["colorSchemes","components","defaultColorScheme"];function _T(e,t){const{colorSchemes:r={},defaultColorScheme:o="light"}=e,l=Wt(e,oD),{vars:h,css:m,varsWithDefaults:c}=qv(l,t);let b=c;const k={},{[o]:A}=r,R=Wt(r,[o].map(iD));if(Object.entries(R||{}).forEach(([Q,te])=>{const{vars:ee,css:de,varsWithDefaults:G}=qv(te,t);b=In(b,G),k[Q]={css:de,vars:ee}}),A){const{css:Q,vars:te,varsWithDefaults:ee}=qv(A,t);b=In(b,ee),k[o]={css:Q,vars:te}}return{vars:b,generateCssVars:Q=>{var te;if(!Q){var ee;const G=ge({},m);return{css:G,vars:h,selector:(t==null||(ee=t.getSelector)==null?void 0:ee.call(t,Q,G))||":root"}}const de=ge({},k[Q].css);return{css:de,vars:k[Q].vars,selector:(t==null||(te=t.getSelector)==null?void 0:te.call(t,Q,de))||":root"}}}}const sD=(e,t)=>e.filter(r=>t.includes(r)),aD=(e,t,r)=>{const o=e.keys[0];Array.isArray(t)?t.forEach((l,h)=>{r((m,c)=>{h<=e.keys.length-1&&(h===0?Object.assign(m,c):m[e.up(e.keys[h])]=c)},l)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:sD(e.keys,Object.keys(t))).forEach(h=>{if(e.keys.indexOf(h)!==-1){const m=t[h];m!==void 0&&r((c,b)=>{o===h?Object.assign(c,b):c[e.up(h)]=b},m)}}):(typeof t=="number"||typeof t=="string")&&r((l,h)=>{Object.assign(l,h)},t)},lD=["component","direction","spacing","divider","children","className","useFlexGap"],cD=lp(),uD=mL("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function hD(e){return uT({props:e,name:"MuiStack",defaultTheme:cD})}function dD(e,t){const r=pe.Children.toArray(e).filter(Boolean);return r.reduce((o,l,h)=>(o.push(l),h<r.length-1&&o.push(pe.cloneElement(t,{key:`separator-${h}`})),o),[])}const fD=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],pD=({ownerState:e,theme:t})=>{let r=ge({display:"flex",flexDirection:"column"},Ms({theme:t},Vv({values:e.direction,breakpoints:t.breakpoints.values}),o=>({flexDirection:o})));if(e.spacing){const o=Ex(t),l=Object.keys(t.breakpoints.values).reduce((b,k)=>((typeof e.spacing=="object"&&e.spacing[k]!=null||typeof e.direction=="object"&&e.direction[k]!=null)&&(b[k]=!0),b),{}),h=Vv({values:e.direction,base:l}),m=Vv({values:e.spacing,base:l});typeof h=="object"&&Object.keys(h).forEach((b,k,A)=>{if(!h[b]){const O=k>0?h[A[k-1]]:"column";h[b]=O}}),r=In(r,Ms({theme:t},m,(b,k)=>e.useFlexGap?{gap:Tc(o,b)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${fD(k?h[k]:e.direction)}`]:Tc(o,b)}}))}return r=n3(t.breakpoints,r),r};function mD(e={}){const{createStyledComponent:t=uD,useThemeProps:r=hD,componentName:o="MuiStack"}=e,l=()=>lo({root:["root"]},b=>cp(o,b),{}),h=t(pD);return pe.forwardRef(function(b,k){const A=r(b),R=Uy(A),{component:O="div",direction:Q="column",spacing:te=0,divider:ee,children:de,className:G,useFlexGap:j=!1}=R,U=Wt(R,lD),fe={direction:Q,spacing:te,useFlexGap:j},ie=l();return W.jsx(h,ge({as:O,ownerState:fe,ref:k,className:ao(ie.root,G)},U,{children:ee?dD(de,ee):de}))})}const gD=ge({},Oc,{borderRadius:{themeKey:"radius"},boxShadow:{themeKey:"shadow"},fontFamily:{themeKey:"fontFamily"},fontSize:{themeKey:"fontSize"},fontWeight:{themeKey:"fontWeight"},letterSpacing:{themeKey:"letterSpacing"},lineHeight:{themeKey:"lineHeight"}});function yD(e){var t;return!!e[0].match(/^(typography|variants|breakpoints)$/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/^(mode)$/))||e[0]==="focus"&&e[1]!=="thickness"}const os=(e,t)=>cp(e,t,"Mui"),Rs=(e,t)=>Gy(e,t,"Mui"),vD=e=>e&&typeof e=="object"&&Object.keys(e).some(t=>{var r;return(r=t.match)==null?void 0:r.call(t,/^(plain(Hover|Active|Disabled)?(Color|Bg)|outlined(Hover|Active|Disabled)?(Color|Border|Bg)|soft(Hover|Active|Disabled)?(Color|Bg)|solid(Hover|Active|Disabled)?(Color|Bg))$/)}),aS=(e,t,r)=>{t.includes("Color")&&(e.color=r),t.includes("Bg")&&(e.backgroundColor=r),t.includes("Border")&&(e.borderColor=r)},lS=(e,t,r)=>{const o={};return Object.entries(t||{}).forEach(([l,h])=>{if(l.match(new RegExp(`${e}(color|bg|border)`,"i"))&&h){const m=r?r(l):h;l.includes("Disabled")&&(o.pointerEvents="none",o.cursor="default",o["--Icon-color"]="currentColor"),l.match(/(Hover|Active|Disabled)/)||(o["--variant-borderWidth"]||(o["--variant-borderWidth"]="0px"),l.includes("Border")&&(o["--variant-borderWidth"]="1px",o.border="var(--variant-borderWidth) solid")),aS(o,l,m)}}),o},_i=(e,t)=>{let r={};{const{getCssVar:o,palette:l}=t;Object.entries(l).forEach(h=>{const[m,c]=h;vD(c)&&typeof c=="object"&&(r=ge({},r,{[m]:lS(e,c,b=>`var(--variant-${b}, ${o(`palette-${m}-${b}`,l[m][b])})`)}))})}return r.context=lS(e,{plainColor:"var(--variant-plainColor)",plainHoverColor:"var(--variant-plainHoverColor)",plainHoverBg:"var(--variant-plainHoverBg)",plainActiveBg:"var(--variant-plainActiveBg)",plainDisabledColor:"var(--variant-plainDisabledColor)",outlinedColor:"var(--variant-outlinedColor)",outlinedBorder:"var(--variant-outlinedBorder)",outlinedHoverColor:"var(--variant-outlinedHoverColor)",outlinedHoverBorder:"var(--variant-outlinedHoverBorder)",outlinedHoverBg:"var(--variant-outlinedHoverBg)",outlinedActiveBg:"var(--variant-outlinedActiveBg)",outlinedDisabledColor:"var(--variant-outlinedDisabledColor)",outlinedDisabledBorder:"var(--variant-outlinedDisabledBorder)",softColor:"var(--variant-softColor)",softBg:"var(--variant-softBg)",softHoverColor:"var(--variant-softHoverColor)",softHoverBg:"var(--variant-softHoverBg)",softActiveBg:"var(--variant-softActiveBg)",softDisabledColor:"var(--variant-softDisabledColor)",softDisabledBg:"var(--variant-softDisabledBg)",solidColor:"var(--variant-solidColor)",solidBg:"var(--variant-solidBg)",solidHoverBg:"var(--variant-solidHoverBg)",solidActiveBg:"var(--variant-solidActiveBg)",solidDisabledColor:"var(--variant-solidDisabledColor)",solidDisabledBg:"var(--variant-solidDisabledBg)"}),r},_D=["cssVarPrefix","breakpoints","spacing","components","variants","shouldSkipGeneratingVar"],xD=["colorSchemes"],bD=(e="joy")=>n0(e);function wD(e){var t,r,o,l,h,m,c,b,k,A;const R={},{cssVarPrefix:O="joy",breakpoints:Q,spacing:te,components:ee,variants:de,shouldSkipGeneratingVar:G=yD}=R,j=Wt(R,_D),U=bD(O),fe={primary:qd.blue,neutral:qd.grey,danger:qd.red,success:qd.green,warning:qd.yellow,common:{white:"#FFF",black:"#000"}},ie=at=>{var At;const Rt=at.split("-"),or=Rt[1],rn=Rt[2];return U(at,(At=fe[or])==null?void 0:At[rn])},F=at=>({plainColor:ie(`palette-${at}-500`),plainHoverBg:ie(`palette-${at}-100`),plainActiveBg:ie(`palette-${at}-200`),plainDisabledColor:ie("palette-neutral-400"),outlinedColor:ie(`palette-${at}-500`),outlinedBorder:ie(`palette-${at}-300`),outlinedHoverBg:ie(`palette-${at}-100`),outlinedActiveBg:ie(`palette-${at}-200`),outlinedDisabledColor:ie("palette-neutral-400"),outlinedDisabledBorder:ie("palette-neutral-200"),softColor:ie(`palette-${at}-700`),softBg:ie(`palette-${at}-100`),softHoverBg:ie(`palette-${at}-200`),softActiveColor:ie(`palette-${at}-800`),softActiveBg:ie(`palette-${at}-300`),softDisabledColor:ie("palette-neutral-400"),softDisabledBg:ie("palette-neutral-50"),solidColor:ie("palette-common-white"),solidBg:ie(`palette-${at}-500`),solidHoverBg:ie(`palette-${at}-600`),solidActiveBg:ie(`palette-${at}-700`),solidDisabledColor:ie("palette-neutral-400"),solidDisabledBg:ie("palette-neutral-100")}),ce=at=>({plainColor:ie(`palette-${at}-300`),plainHoverBg:ie(`palette-${at}-800`),plainActiveBg:ie(`palette-${at}-700`),plainDisabledColor:ie("palette-neutral-500"),outlinedColor:ie(`palette-${at}-200`),outlinedBorder:ie(`palette-${at}-700`),outlinedHoverBg:ie(`palette-${at}-800`),outlinedActiveBg:ie(`palette-${at}-700`),outlinedDisabledColor:ie("palette-neutral-500"),outlinedDisabledBorder:ie("palette-neutral-800"),softColor:ie(`palette-${at}-200`),softBg:ie(`palette-${at}-800`),softHoverBg:ie(`palette-${at}-700`),softActiveColor:ie(`palette-${at}-100`),softActiveBg:ie(`palette-${at}-600`),softDisabledColor:ie("palette-neutral-500"),softDisabledBg:ie("palette-neutral-800"),solidColor:ie("palette-common-white"),solidBg:ie(`palette-${at}-500`),solidHoverBg:ie(`palette-${at}-600`),solidActiveBg:ie(`palette-${at}-700`),solidDisabledColor:ie("palette-neutral-500"),solidDisabledBg:ie("palette-neutral-800")}),Ce={palette:{mode:"light",primary:ge({},fe.primary,F("primary")),neutral:ge({},fe.neutral,F("neutral"),{plainColor:ie("palette-neutral-700"),plainHoverColor:ie("palette-neutral-900"),outlinedColor:ie("palette-neutral-700")}),danger:ge({},fe.danger,F("danger")),success:ge({},fe.success,F("success")),warning:ge({},fe.warning,F("warning")),common:{white:"#FFF",black:"#000"},text:{primary:ie("palette-neutral-800"),secondary:ie("palette-neutral-700"),tertiary:ie("palette-neutral-600"),icon:ie("palette-neutral-500")},background:{body:ie("palette-common-white"),surface:ie("palette-neutral-50"),popup:ie("palette-common-white"),level1:ie("palette-neutral-100"),level2:ie("palette-neutral-200"),level3:ie("palette-neutral-300"),tooltip:ie("palette-neutral-500"),backdrop:`rgba(${U("palette-neutral-darkChannel",hc(fe.neutral[900]))} / 0.25)`},divider:`rgba(${U("palette-neutral-mainChannel",hc(fe.neutral[500]))} / 0.2)`,focusVisible:ie("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"21 21 21",shadowOpacity:"0.08"},Ue={palette:{mode:"dark",primary:ge({},fe.primary,ce("primary")),neutral:ge({},fe.neutral,ce("neutral"),{plainColor:ie("palette-neutral-300"),plainHoverColor:ie("palette-neutral-300")}),danger:ge({},fe.danger,ce("danger")),success:ge({},fe.success,ce("success")),warning:ge({},fe.warning,ce("warning")),common:{white:"#FFF",black:"#000"},text:{primary:ie("palette-neutral-100"),secondary:ie("palette-neutral-300"),tertiary:ie("palette-neutral-400"),icon:ie("palette-neutral-400")},background:{body:ie("palette-common-black"),surface:ie("palette-neutral-900"),popup:ie("palette-common-black"),level1:ie("palette-neutral-800"),level2:ie("palette-neutral-700"),level3:ie("palette-neutral-600"),tooltip:ie("palette-neutral-600"),backdrop:`rgba(${U("palette-neutral-darkChannel",hc(fe.neutral[50]))} / 0.25)`},divider:`rgba(${U("palette-neutral-mainChannel",hc(fe.neutral[500]))} / 0.16)`,focusVisible:ie("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"0 0 0",shadowOpacity:"0.6"},Ae='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',Re=ge({body:`"Inter", ${U(`fontFamily-fallback, ${Ae}`)}`,display:`"Inter", ${U(`fontFamily-fallback, ${Ae}`)}`,code:"Source Code Pro,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace",fallback:Ae},j.fontFamily),We=ge({sm:300,md:500,lg:600,xl:700},j.fontWeight),He=ge({xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem",xl2:"1.5rem",xl3:"1.875rem",xl4:"2.25rem"},j.fontSize),Ze=ge({xs:"1.33334",sm:"1.42858",md:"1.5",lg:"1.55556",xl:"1.66667"},j.lineHeight),Ge=(t=(r=j.colorSchemes)==null||(r=r.light)==null?void 0:r.shadowRing)!=null?t:Ce.shadowRing,Fe=(o=(l=j.colorSchemes)==null||(l=l.light)==null?void 0:l.shadowChannel)!=null?o:Ce.shadowChannel,ot=(h=(m=j.colorSchemes)==null||(m=m.light)==null?void 0:m.shadowOpacity)!=null?h:Ce.shadowOpacity,Pe={colorSchemes:{light:Ce,dark:Ue},fontSize:He,fontFamily:Re,fontWeight:We,focus:{thickness:"2px",selector:`&.${os("","focusVisible")}, &:focus-visible`,default:{outlineOffset:`var(--focus-outline-offset, ${U("focus-thickness",(c=(b=j.focus)==null?void 0:b.thickness)!=null?c:"2px")})`,outline:`${U("focus-thickness",(k=(A=j.focus)==null?void 0:A.thickness)!=null?k:"2px")} solid ${U("palette-focusVisible",fe.primary[500])}`}},lineHeight:Ze,radius:{xs:"2px",sm:"6px",md:"8px",lg:"12px",xl:"16px"},shadow:{xs:`${U("shadowRing",Ge)}, 0px 1px 2px 0px rgba(${U("shadowChannel",Fe)} / ${U("shadowOpacity",ot)})`,sm:`${U("shadowRing",Ge)}, 0px 1px 2px 0px rgba(${U("shadowChannel",Fe)} / ${U("shadowOpacity",ot)}), 0px 2px 4px 0px rgba(${U("shadowChannel",Fe)} / ${U("shadowOpacity",ot)})`,md:`${U("shadowRing",Ge)}, 0px 2px 8px -2px rgba(${U("shadowChannel",Fe)} / ${U("shadowOpacity",ot)}), 0px 6px 12px -2px rgba(${U("shadowChannel",Fe)} / ${U("shadowOpacity",ot)})`,lg:`${U("shadowRing",Ge)}, 0px 2px 8px -2px rgba(${U("shadowChannel",Fe)} / ${U("shadowOpacity",ot)}), 0px 12px 16px -4px rgba(${U("shadowChannel",Fe)} / ${U("shadowOpacity",ot)})`,xl:`${U("shadowRing",Ge)}, 0px 2px 8px -2px rgba(${U("shadowChannel",Fe)} / ${U("shadowOpacity",ot)}), 0px 20px 24px -4px rgba(${U("shadowChannel",Fe)} / ${U("shadowOpacity",ot)})`},zIndex:{badge:1,table:10,popup:1e3,modal:1300,snackbar:1400,tooltip:1500},typography:{h1:{fontFamily:U(`fontFamily-display, ${Re.display}`),fontWeight:U(`fontWeight-xl, ${We.xl}`),fontSize:U(`fontSize-xl4, ${He.xl4}`),lineHeight:U(`lineHeight-xs, ${Ze.xs}`),letterSpacing:"-0.025em",color:U(`palette-text-primary, ${Ce.palette.text.primary}`)},h2:{fontFamily:U(`fontFamily-display, ${Re.display}`),fontWeight:U(`fontWeight-xl, ${We.xl}`),fontSize:U(`fontSize-xl3, ${He.xl3}`),lineHeight:U(`lineHeight-xs, ${Ze.xs}`),letterSpacing:"-0.025em",color:U(`palette-text-primary, ${Ce.palette.text.primary}`)},h3:{fontFamily:U(`fontFamily-display, ${Re.display}`),fontWeight:U(`fontWeight-lg, ${We.lg}`),fontSize:U(`fontSize-xl2, ${He.xl2}`),lineHeight:U(`lineHeight-xs, ${Ze.xs}`),letterSpacing:"-0.025em",color:U(`palette-text-primary, ${Ce.palette.text.primary}`)},h4:{fontFamily:U(`fontFamily-display, ${Re.display}`),fontWeight:U(`fontWeight-lg, ${We.lg}`),fontSize:U(`fontSize-xl, ${He.xl}`),lineHeight:U(`lineHeight-md, ${Ze.md}`),letterSpacing:"-0.025em",color:U(`palette-text-primary, ${Ce.palette.text.primary}`)},"title-lg":{fontFamily:U(`fontFamily-body, ${Re.body}`),fontWeight:U(`fontWeight-lg, ${We.lg}`),fontSize:U(`fontSize-lg, ${He.lg}`),lineHeight:U(`lineHeight-xs, ${Ze.xs}`),color:U(`palette-text-primary, ${Ce.palette.text.primary}`)},"title-md":{fontFamily:U(`fontFamily-body, ${Re.body}`),fontWeight:U(`fontWeight-md, ${We.md}`),fontSize:U(`fontSize-md, ${He.md}`),lineHeight:U(`lineHeight-md, ${Ze.md}`),color:U(`palette-text-primary, ${Ce.palette.text.primary}`)},"title-sm":{fontFamily:U(`fontFamily-body, ${Re.body}`),fontWeight:U(`fontWeight-md, ${We.md}`),fontSize:U(`fontSize-sm, ${He.sm}`),lineHeight:U(`lineHeight-sm, ${Ze.sm}`),color:U(`palette-text-primary, ${Ce.palette.text.primary}`)},"body-lg":{fontFamily:U(`fontFamily-body, ${Re.body}`),fontSize:U(`fontSize-lg, ${He.lg}`),lineHeight:U(`lineHeight-md, ${Ze.md}`),color:U(`palette-text-secondary, ${Ce.palette.text.secondary}`)},"body-md":{fontFamily:U(`fontFamily-body, ${Re.body}`),fontSize:U(`fontSize-md, ${He.md}`),lineHeight:U(`lineHeight-md, ${Ze.md}`),color:U(`palette-text-secondary, ${Ce.palette.text.secondary}`)},"body-sm":{fontFamily:U(`fontFamily-body, ${Re.body}`),fontSize:U(`fontSize-sm, ${He.sm}`),lineHeight:U(`lineHeight-md, ${Ze.md}`),color:U(`palette-text-tertiary, ${Ce.palette.text.tertiary}`)},"body-xs":{fontFamily:U(`fontFamily-body, ${Re.body}`),fontWeight:U(`fontWeight-md, ${We.md}`),fontSize:U(`fontSize-xs, ${He.xs}`),lineHeight:U(`lineHeight-md, ${Ze.md}`),color:U(`palette-text-tertiary, ${Ce.palette.text.tertiary}`)}}},st=j?In(Pe,j):Pe,{colorSchemes:yt}=st,Et=Wt(st,xD),mt=ge({colorSchemes:yt},Et,{breakpoints:Sx(Q??{}),components:In({MuiSvgIcon:{defaultProps:{fontSize:"xl2"},styleOverrides:{root:({ownerState:at,theme:At})=>{var Rt;const or=at.instanceFontSize;return ge({margin:"var(--Icon-margin)"},at.fontSize&&at.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${At.vars.fontSize[at.fontSize]})`},!at.htmlColor&&ge({color:`var(--Icon-color, ${mt.vars.palette.text.icon})`},at.color&&at.color!=="inherit"&&At.vars.palette[at.color]&&{color:`rgba(${(Rt=At.vars.palette[at.color])==null?void 0:Rt.mainChannel} / 1)`}),or&&or!=="inherit"&&{"--Icon-fontSize":At.vars.fontSize[or]})}}}},ee),cssVarPrefix:O,getCssVar:U,spacing:tT(te)});function Dt(at,At){Object.keys(At).forEach(Rt=>{const or={main:"500",light:"200",dark:"700"};at==="dark"&&(or.main=400),!At[Rt].mainChannel&&At[Rt][or.main]&&(At[Rt].mainChannel=hc(At[Rt][or.main])),!At[Rt].lightChannel&&At[Rt][or.light]&&(At[Rt].lightChannel=hc(At[Rt][or.light])),!At[Rt].darkChannel&&At[Rt][or.dark]&&(At[Rt].darkChannel=hc(At[Rt][or.dark]))})}Object.entries(mt.colorSchemes).forEach(([at,At])=>{Dt(at,At.palette)});const jt={prefix:O,shouldSkipGeneratingVar:G},{vars:_r,generateCssVars:Ct}=_T(ge({colorSchemes:yt},Et),jt);mt.vars=_r,mt.generateCssVars=Ct,mt.unstable_sxConfig=ge({},gD,void 0),mt.unstable_sx=function(At){return Za({sx:At,theme:this})},mt.getColorSchemeSelector=at=>at==="light"?"&":`&[data-joy-color-scheme="${at}"], [data-joy-color-scheme="${at}"] &`;const Pt={getCssVar:U,palette:mt.colorSchemes.light.palette};return mt.variants=In({plain:_i("plain",Pt),plainHover:_i("plainHover",Pt),plainActive:_i("plainActive",Pt),plainDisabled:_i("plainDisabled",Pt),outlined:_i("outlined",Pt),outlinedHover:_i("outlinedHover",Pt),outlinedActive:_i("outlinedActive",Pt),outlinedDisabled:_i("outlinedDisabled",Pt),soft:_i("soft",Pt),softHover:_i("softHover",Pt),softActive:_i("softActive",Pt),softDisabled:_i("softDisabled",Pt),solid:_i("solid",Pt),solidHover:_i("solidHover",Pt),solidActive:_i("solidActive",Pt),solidDisabled:_i("solidDisabled",Pt)},de),mt.palette=ge({},mt.colorSchemes.light.palette,{colorScheme:"light"}),mt.shouldSkipGeneratingVar=G,mt.applyStyles=Px,mt}const zh=wD(),Zd={attribute:"data-joy-color-scheme",colorSchemeStorageKey:"joy-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"joy-mode"},{CssVarsProvider:SD,useColorScheme:KV,getInitColorSchemeScript:XV}=vT({themeId:op,theme:zh,attribute:Zd.attribute,modeStorageKey:Zd.modeStorageKey,colorSchemeStorageKey:Zd.colorSchemeStorageKey,defaultColorScheme:{light:Zd.defaultLightColorScheme,dark:Zd.defaultDarkColorScheme}}),Er=cT({defaultTheme:zh,themeId:op});function ss({props:e,name:t}){return uT({props:e,name:t,defaultTheme:ge({},zh,{components:{}}),themeId:op})}function CD(e){return W.jsx(Z3,ge({},e,{defaultTheme:zh,themeId:op}))}function kD(e){const{rootElementName:t="",componentName:r}=e,[o,l]=pe.useState(t.toUpperCase()),h=pe.useCallback(m=>{var c;l((c=m==null?void 0:m.tagName)!=null?c:"")},[]);return[o,h]}function Ox(e={}){const{disabled:t=!1,focusableWhenDisabled:r,href:o,rootRef:l,tabIndex:h,to:m,type:c,rootElementName:b}=e,k=pe.useRef(null),[A,R]=pe.useState(!1),{isFocusVisibleRef:O,onFocus:Q,onBlur:te,ref:ee}=DL(),[de,G]=pe.useState(!1);t&&!r&&de&&G(!1),pe.useEffect(()=>{O.current=de},[de,O]);const[j,U]=kD({rootElementName:b??(o||m?"a":void 0),componentName:"Button"}),fe=Ge=>Fe=>{var ot;de&&Fe.preventDefault(),(ot=Ge.onMouseLeave)==null||ot.call(Ge,Fe)},ie=Ge=>Fe=>{var ot;te(Fe),O.current===!1&&G(!1),(ot=Ge.onBlur)==null||ot.call(Ge,Fe)},F=Ge=>Fe=>{var ot;if(k.current||(k.current=Fe.currentTarget),Q(Fe),O.current===!0){var Pe;G(!0),(Pe=Ge.onFocusVisible)==null||Pe.call(Ge,Fe)}(ot=Ge.onFocus)==null||ot.call(Ge,Fe)},ce=()=>{const Ge=k.current;return j==="BUTTON"||j==="INPUT"&&["button","submit","reset"].includes(Ge==null?void 0:Ge.type)||j==="A"&&(Ge==null?void 0:Ge.href)},Ce=Ge=>Fe=>{if(!t){var ot;(ot=Ge.onClick)==null||ot.call(Ge,Fe)}},Ue=Ge=>Fe=>{var ot;t||(R(!0),document.addEventListener("mouseup",()=>{R(!1)},{once:!0})),(ot=Ge.onMouseDown)==null||ot.call(Ge,Fe)},Ae=Ge=>Fe=>{var ot;if((ot=Ge.onKeyDown)==null||ot.call(Ge,Fe),!Fe.defaultMuiPrevented&&(Fe.target===Fe.currentTarget&&!ce()&&Fe.key===" "&&Fe.preventDefault(),Fe.target===Fe.currentTarget&&Fe.key===" "&&!t&&R(!0),Fe.target===Fe.currentTarget&&!ce()&&Fe.key==="Enter"&&!t)){var Pe;(Pe=Ge.onClick)==null||Pe.call(Ge,Fe),Fe.preventDefault()}},Re=Ge=>Fe=>{var ot;if(Fe.target===Fe.currentTarget&&R(!1),(ot=Ge.onKeyUp)==null||ot.call(Ge,Fe),Fe.target===Fe.currentTarget&&!ce()&&!t&&Fe.key===" "&&!Fe.defaultMuiPrevented){var Pe;(Pe=Ge.onClick)==null||Pe.call(Ge,Fe)}},We=$l(U,l,ee,k),He={};return h!==void 0&&(He.tabIndex=h),j==="BUTTON"?(He.type=c??"button",r?He["aria-disabled"]=t:He.disabled=t):j==="INPUT"?c&&["button","submit","reset"].includes(c)&&(r?He["aria-disabled"]=t:He.disabled=t):j!==""&&(!o&&!m&&(He.role="button",He.tabIndex=h??0),t&&(He["aria-disabled"]=t,He.tabIndex=r?h??0:-1)),{getRootProps:(Ge={})=>{const Fe=ge({},G_(e),G_(Ge)),ot=ge({type:c},Fe,He,Ge,{onBlur:ie(Fe),onClick:Ce(Fe),onFocus:F(Fe),onKeyDown:Ae(Fe),onKeyUp:Re(Fe),onMouseDown:Ue(Fe),onMouseLeave:fe(Fe),ref:We});return delete ot.onFocusVisible,ot},focusVisible:de,setFocusVisible:G,active:A,rootRef:We}}var xT={exports:{}},Ao={},bT={exports:{}},wT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Pe,st){var yt=Pe.length;Pe.push(st);e:for(;0<yt;){var Et=yt-1>>>1,mt=Pe[Et];if(0<l(mt,st))Pe[Et]=st,Pe[yt]=mt,yt=Et;else break e}}function r(Pe){return Pe.length===0?null:Pe[0]}function o(Pe){if(Pe.length===0)return null;var st=Pe[0],yt=Pe.pop();if(yt!==st){Pe[0]=yt;e:for(var Et=0,mt=Pe.length,Dt=mt>>>1;Et<Dt;){var jt=2*(Et+1)-1,_r=Pe[jt],Ct=jt+1,Pt=Pe[Ct];if(0>l(_r,yt))Ct<mt&&0>l(Pt,_r)?(Pe[Et]=Pt,Pe[Ct]=yt,Et=Ct):(Pe[Et]=_r,Pe[jt]=yt,Et=jt);else if(Ct<mt&&0>l(Pt,yt))Pe[Et]=Pt,Pe[Ct]=yt,Et=Ct;else break e}}return st}function l(Pe,st){var yt=Pe.sortIndex-st.sortIndex;return yt!==0?yt:Pe.id-st.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var m=Date,c=m.now();e.unstable_now=function(){return m.now()-c}}var b=[],k=[],A=1,R=null,O=3,Q=!1,te=!1,ee=!1,de=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(Pe){for(var st=r(k);st!==null;){if(st.callback===null)o(k);else if(st.startTime<=Pe)o(k),st.sortIndex=st.expirationTime,t(b,st);else break;st=r(k)}}function fe(Pe){if(ee=!1,U(Pe),!te)if(r(b)!==null)te=!0,Fe(ie);else{var st=r(k);st!==null&&ot(fe,st.startTime-Pe)}}function ie(Pe,st){te=!1,ee&&(ee=!1,G(Ce),Ce=-1),Q=!0;var yt=O;try{for(U(st),R=r(b);R!==null&&(!(R.expirationTime>st)||Pe&&!Re());){var Et=R.callback;if(typeof Et=="function"){R.callback=null,O=R.priorityLevel;var mt=Et(R.expirationTime<=st);st=e.unstable_now(),typeof mt=="function"?R.callback=mt:R===r(b)&&o(b),U(st)}else o(b);R=r(b)}if(R!==null)var Dt=!0;else{var jt=r(k);jt!==null&&ot(fe,jt.startTime-st),Dt=!1}return Dt}finally{R=null,O=yt,Q=!1}}var F=!1,ce=null,Ce=-1,Ue=5,Ae=-1;function Re(){return!(e.unstable_now()-Ae<Ue)}function We(){if(ce!==null){var Pe=e.unstable_now();Ae=Pe;var st=!0;try{st=ce(!0,Pe)}finally{st?He():(F=!1,ce=null)}}else F=!1}var He;if(typeof j=="function")He=function(){j(We)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,Ge=Ze.port2;Ze.port1.onmessage=We,He=function(){Ge.postMessage(null)}}else He=function(){de(We,0)};function Fe(Pe){ce=Pe,F||(F=!0,He())}function ot(Pe,st){Ce=de(function(){Pe(e.unstable_now())},st)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Pe){Pe.callback=null},e.unstable_continueExecution=function(){te||Q||(te=!0,Fe(ie))},e.unstable_forceFrameRate=function(Pe){0>Pe||125<Pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ue=0<Pe?Math.floor(1e3/Pe):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return r(b)},e.unstable_next=function(Pe){switch(O){case 1:case 2:case 3:var st=3;break;default:st=O}var yt=O;O=st;try{return Pe()}finally{O=yt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Pe,st){switch(Pe){case 1:case 2:case 3:case 4:case 5:break;default:Pe=3}var yt=O;O=Pe;try{return st()}finally{O=yt}},e.unstable_scheduleCallback=function(Pe,st,yt){var Et=e.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?Et+yt:Et):yt=Et,Pe){case 1:var mt=-1;break;case 2:mt=250;break;case 5:mt=1073741823;break;case 4:mt=1e4;break;default:mt=5e3}return mt=yt+mt,Pe={id:A++,callback:st,priorityLevel:Pe,startTime:yt,expirationTime:mt,sortIndex:-1},yt>Et?(Pe.sortIndex=yt,t(k,Pe),r(b)===null&&Pe===r(k)&&(ee?(G(Ce),Ce=-1):ee=!0,ot(fe,yt-Et))):(Pe.sortIndex=mt,t(b,Pe),te||Q||(te=!0,Fe(ie))),Pe},e.unstable_shouldYield=Re,e.unstable_wrapCallback=function(Pe){var st=O;return function(){var yt=O;O=st;try{return Pe.apply(this,arguments)}finally{O=yt}}}})(wT);bT.exports=wT;var TD=bT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ED=pe,Io=TD;function Ye(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ST=new Set,Df={};function Bc(e,t){mh(e,t),mh(e+"Capture",t)}function mh(e,t){for(Df[e]=t,e=0;e<t.length;e++)ST.add(t[e])}var Va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),H_=Object.prototype.hasOwnProperty,ID=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cS={},uS={};function PD(e){return H_.call(uS,e)?!0:H_.call(cS,e)?!1:ID.test(e)?uS[e]=!0:(cS[e]=!0,!1)}function AD(e,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function MD(e,t,r,o){if(t===null||typeof t>"u"||AD(e,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Vi(e,t,r,o,l,h,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=m}var ci={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ci[e]=new Vi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ci[t]=new Vi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ci[e]=new Vi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ci[e]=new Vi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ci[e]=new Vi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ci[e]=new Vi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ci[e]=new Vi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ci[e]=new Vi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ci[e]=new Vi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Bx=/[\-:]([a-z])/g;function $x(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Bx,$x);ci[t]=new Vi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Bx,$x);ci[t]=new Vi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Bx,$x);ci[t]=new Vi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ci[e]=new Vi(e,1,!1,e.toLowerCase(),null,!1,!1)});ci.xlinkHref=new Vi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ci[e]=new Vi(e,1,!1,e.toLowerCase(),null,!0,!0)});function Fx(e,t,r,o){var l=ci.hasOwnProperty(t)?ci[t]:null;(l!==null?l.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(MD(t,r,l,o)&&(r=null),o||l===null?PD(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):l.mustUseProperty?e[l.propertyName]=r===null?l.type===3?!1:"":r:(t=l.attributeName,o=l.attributeNamespace,r===null?e.removeAttribute(t):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}var Ka=ED.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Om=Symbol.for("react.element"),Uu=Symbol.for("react.portal"),Gu=Symbol.for("react.fragment"),Nx=Symbol.for("react.strict_mode"),q_=Symbol.for("react.profiler"),CT=Symbol.for("react.provider"),kT=Symbol.for("react.context"),jx=Symbol.for("react.forward_ref"),W_=Symbol.for("react.suspense"),Z_=Symbol.for("react.suspense_list"),Vx=Symbol.for("react.memo"),yl=Symbol.for("react.lazy"),TT=Symbol.for("react.offscreen"),hS=Symbol.iterator;function Kd(e){return e===null||typeof e!="object"?null:(e=hS&&e[hS]||e["@@iterator"],typeof e=="function"?e:null)}var tn=Object.assign,Wv;function lf(e){if(Wv===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Wv=t&&t[1]||""}return`
`+Wv+e}var Zv=!1;function Kv(e,t){if(!e||Zv)return"";Zv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(k){var o=k}Reflect.construct(e,[],t)}else{try{t.call()}catch(k){o=k}e.call(t.prototype)}else{try{throw Error()}catch(k){o=k}e()}}catch(k){if(k&&o&&typeof k.stack=="string"){for(var l=k.stack.split(`
`),h=o.stack.split(`
`),m=l.length-1,c=h.length-1;1<=m&&0<=c&&l[m]!==h[c];)c--;for(;1<=m&&0<=c;m--,c--)if(l[m]!==h[c]){if(m!==1||c!==1)do if(m--,c--,0>c||l[m]!==h[c]){var b=`
`+l[m].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=m&&0<=c);break}}}finally{Zv=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?lf(e):""}function zD(e){switch(e.tag){case 5:return lf(e.type);case 16:return lf("Lazy");case 13:return lf("Suspense");case 19:return lf("SuspenseList");case 0:case 2:case 15:return e=Kv(e.type,!1),e;case 11:return e=Kv(e.type.render,!1),e;case 1:return e=Kv(e.type,!0),e;default:return""}}function K_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gu:return"Fragment";case Uu:return"Portal";case q_:return"Profiler";case Nx:return"StrictMode";case W_:return"Suspense";case Z_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kT:return(e.displayName||"Context")+".Consumer";case CT:return(e._context.displayName||"Context")+".Provider";case jx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Vx:return t=e.displayName||null,t!==null?t:K_(e.type)||"Memo";case yl:t=e._payload,e=e._init;try{return K_(e(t))}catch{}}return null}function LD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K_(t);case 8:return t===Nx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Rl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ET(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function DD(e){var t=ET(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,h=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(m){o=""+m,h.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(m){o=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bm(e){e._valueTracker||(e._valueTracker=DD(e))}function IT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=ET(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function zg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function X_(e,t){var r=t.checked;return tn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function dS(e,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=Rl(t.value!=null?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function PT(e,t){t=t.checked,t!=null&&Fx(e,"checked",t,!1)}function Y_(e,t){PT(e,t);var r=Rl(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?J_(e,t.type,r):t.hasOwnProperty("defaultValue")&&J_(e,t.type,Rl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fS(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function J_(e,t,r){(t!=="number"||zg(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var cf=Array.isArray;function sh(e,t,r,o){if(e=e.options,t){t={};for(var l=0;l<r.length;l++)t["$"+r[l]]=!0;for(r=0;r<e.length;r++)l=t.hasOwnProperty("$"+e[r].value),e[r].selected!==l&&(e[r].selected=l),l&&o&&(e[r].defaultSelected=!0)}else{for(r=""+Rl(r),t=null,l=0;l<e.length;l++){if(e[l].value===r){e[l].selected=!0,o&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Q_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ye(91));return tn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ye(92));if(cf(r)){if(1<r.length)throw Error(Ye(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Rl(r)}}function AT(e,t){var r=Rl(t.value),o=Rl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),o!=null&&(e.defaultValue=""+o)}function mS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function MT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function e1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?MT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $m,zT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,o,l){MSApp.execUnsafeLocalFunction(function(){return e(t,r,o,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($m=$m||document.createElement("div"),$m.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$m.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rf(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var gf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RD=["Webkit","ms","Moz","O"];Object.keys(gf).forEach(function(e){RD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gf[t]=gf[e]})});function LT(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||gf.hasOwnProperty(e)&&gf[e]?(""+t).trim():t+"px"}function DT(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,l=LT(r,t[r],o);r==="float"&&(r="cssFloat"),o?e.setProperty(r,l):e[r]=l}}var OD=tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function t1(e,t){if(t){if(OD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ye(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ye(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ye(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ye(62))}}function r1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n1=null;function Ux(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var i1=null,ah=null,lh=null;function gS(e){if(e=dp(e)){if(typeof i1!="function")throw Error(Ye(280));var t=e.stateNode;t&&(t=l0(t),i1(e.stateNode,e.type,t))}}function RT(e){ah?lh?lh.push(e):lh=[e]:ah=e}function OT(){if(ah){var e=ah,t=lh;if(lh=ah=null,gS(e),t)for(e=0;e<t.length;e++)gS(t[e])}}function BT(e,t){return e(t)}function $T(){}var Xv=!1;function FT(e,t,r){if(Xv)return e(t,r);Xv=!0;try{return BT(e,t,r)}finally{Xv=!1,(ah!==null||lh!==null)&&($T(),OT())}}function Of(e,t){var r=e.stateNode;if(r===null)return null;var o=l0(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ye(231,t,typeof r));return r}var o1=!1;if(Va)try{var Xd={};Object.defineProperty(Xd,"passive",{get:function(){o1=!0}}),window.addEventListener("test",Xd,Xd),window.removeEventListener("test",Xd,Xd)}catch{o1=!1}function BD(e,t,r,o,l,h,m,c,b){var k=Array.prototype.slice.call(arguments,3);try{t.apply(r,k)}catch(A){this.onError(A)}}var yf=!1,Lg=null,Dg=!1,s1=null,$D={onError:function(e){yf=!0,Lg=e}};function FD(e,t,r,o,l,h,m,c,b){yf=!1,Lg=null,BD.apply($D,arguments)}function ND(e,t,r,o,l,h,m,c,b){if(FD.apply(this,arguments),yf){if(yf){var k=Lg;yf=!1,Lg=null}else throw Error(Ye(198));Dg||(Dg=!0,s1=k)}}function $c(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function NT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yS(e){if($c(e)!==e)throw Error(Ye(188))}function jD(e){var t=e.alternate;if(!t){if(t=$c(e),t===null)throw Error(Ye(188));return t!==e?null:e}for(var r=e,o=t;;){var l=r.return;if(l===null)break;var h=l.alternate;if(h===null){if(o=l.return,o!==null){r=o;continue}break}if(l.child===h.child){for(h=l.child;h;){if(h===r)return yS(l),e;if(h===o)return yS(l),t;h=h.sibling}throw Error(Ye(188))}if(r.return!==o.return)r=l,o=h;else{for(var m=!1,c=l.child;c;){if(c===r){m=!0,r=l,o=h;break}if(c===o){m=!0,o=l,r=h;break}c=c.sibling}if(!m){for(c=h.child;c;){if(c===r){m=!0,r=h,o=l;break}if(c===o){m=!0,o=h,r=l;break}c=c.sibling}if(!m)throw Error(Ye(189))}}if(r.alternate!==o)throw Error(Ye(190))}if(r.tag!==3)throw Error(Ye(188));return r.stateNode.current===r?e:t}function jT(e){return e=jD(e),e!==null?VT(e):null}function VT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=VT(e);if(t!==null)return t;e=e.sibling}return null}var UT=Io.unstable_scheduleCallback,vS=Io.unstable_cancelCallback,VD=Io.unstable_shouldYield,UD=Io.unstable_requestPaint,bn=Io.unstable_now,GD=Io.unstable_getCurrentPriorityLevel,Gx=Io.unstable_ImmediatePriority,GT=Io.unstable_UserBlockingPriority,Rg=Io.unstable_NormalPriority,HD=Io.unstable_LowPriority,HT=Io.unstable_IdlePriority,i0=null,ia=null;function qD(e){if(ia&&typeof ia.onCommitFiberRoot=="function")try{ia.onCommitFiberRoot(i0,e,void 0,(e.current.flags&128)===128)}catch{}}var Es=Math.clz32?Math.clz32:KD,WD=Math.log,ZD=Math.LN2;function KD(e){return e>>>=0,e===0?32:31-(WD(e)/ZD|0)|0}var Fm=64,Nm=4194304;function uf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Og(e,t){var r=e.pendingLanes;if(r===0)return 0;var o=0,l=e.suspendedLanes,h=e.pingedLanes,m=r&268435455;if(m!==0){var c=m&~l;c!==0?o=uf(c):(h&=m,h!==0&&(o=uf(h)))}else m=r&~l,m!==0?o=uf(m):h!==0&&(o=uf(h));if(o===0)return 0;if(t!==0&&t!==o&&!(t&l)&&(l=o&-o,h=t&-t,l>=h||l===16&&(h&4194240)!==0))return t;if(o&4&&(o|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)r=31-Es(t),l=1<<r,o|=e[r],t&=~l;return o}function XD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YD(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,l=e.expirationTimes,h=e.pendingLanes;0<h;){var m=31-Es(h),c=1<<m,b=l[m];b===-1?(!(c&r)||c&o)&&(l[m]=XD(c,t)):b<=t&&(e.expiredLanes|=c),h&=~c}}function a1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qT(){var e=Fm;return Fm<<=1,!(Fm&4194240)&&(Fm=64),e}function Yv(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function up(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Es(t),e[t]=r}function JD(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-Es(r),h=1<<l;t[l]=0,o[l]=-1,e[l]=-1,r&=~h}}function Hx(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-Es(r),l=1<<o;l&t|e[o]&t&&(e[o]|=t),r&=~l}}var wr=0;function WT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ZT,qx,KT,XT,YT,l1=!1,jm=[],kl=null,Tl=null,El=null,Bf=new Map,$f=new Map,_l=[],QD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _S(e,t){switch(e){case"focusin":case"focusout":kl=null;break;case"dragenter":case"dragleave":Tl=null;break;case"mouseover":case"mouseout":El=null;break;case"pointerover":case"pointerout":Bf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$f.delete(t.pointerId)}}function Yd(e,t,r,o,l,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:h,targetContainers:[l]},t!==null&&(t=dp(t),t!==null&&qx(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function eR(e,t,r,o,l){switch(t){case"focusin":return kl=Yd(kl,e,t,r,o,l),!0;case"dragenter":return Tl=Yd(Tl,e,t,r,o,l),!0;case"mouseover":return El=Yd(El,e,t,r,o,l),!0;case"pointerover":var h=l.pointerId;return Bf.set(h,Yd(Bf.get(h)||null,e,t,r,o,l)),!0;case"gotpointercapture":return h=l.pointerId,$f.set(h,Yd($f.get(h)||null,e,t,r,o,l)),!0}return!1}function JT(e){var t=xc(e.target);if(t!==null){var r=$c(t);if(r!==null){if(t=r.tag,t===13){if(t=NT(r),t!==null){e.blockedOn=t,YT(e.priority,function(){KT(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=c1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);n1=o,r.target.dispatchEvent(o),n1=null}else return t=dp(r),t!==null&&qx(t),e.blockedOn=r,!1;t.shift()}return!0}function xS(e,t,r){fg(e)&&r.delete(t)}function tR(){l1=!1,kl!==null&&fg(kl)&&(kl=null),Tl!==null&&fg(Tl)&&(Tl=null),El!==null&&fg(El)&&(El=null),Bf.forEach(xS),$f.forEach(xS)}function Jd(e,t){e.blockedOn===t&&(e.blockedOn=null,l1||(l1=!0,Io.unstable_scheduleCallback(Io.unstable_NormalPriority,tR)))}function Ff(e){function t(l){return Jd(l,e)}if(0<jm.length){Jd(jm[0],e);for(var r=1;r<jm.length;r++){var o=jm[r];o.blockedOn===e&&(o.blockedOn=null)}}for(kl!==null&&Jd(kl,e),Tl!==null&&Jd(Tl,e),El!==null&&Jd(El,e),Bf.forEach(t),$f.forEach(t),r=0;r<_l.length;r++)o=_l[r],o.blockedOn===e&&(o.blockedOn=null);for(;0<_l.length&&(r=_l[0],r.blockedOn===null);)JT(r),r.blockedOn===null&&_l.shift()}var ch=Ka.ReactCurrentBatchConfig,Bg=!0;function rR(e,t,r,o){var l=wr,h=ch.transition;ch.transition=null;try{wr=1,Wx(e,t,r,o)}finally{wr=l,ch.transition=h}}function nR(e,t,r,o){var l=wr,h=ch.transition;ch.transition=null;try{wr=4,Wx(e,t,r,o)}finally{wr=l,ch.transition=h}}function Wx(e,t,r,o){if(Bg){var l=c1(e,t,r,o);if(l===null)a_(e,t,o,$g,r),_S(e,o);else if(eR(l,e,t,r,o))o.stopPropagation();else if(_S(e,o),t&4&&-1<QD.indexOf(e)){for(;l!==null;){var h=dp(l);if(h!==null&&ZT(h),h=c1(e,t,r,o),h===null&&a_(e,t,o,$g,r),h===l)break;l=h}l!==null&&o.stopPropagation()}else a_(e,t,o,null,r)}}var $g=null;function c1(e,t,r,o){if($g=null,e=Ux(o),e=xc(e),e!==null)if(t=$c(e),t===null)e=null;else if(r=t.tag,r===13){if(e=NT(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $g=e,null}function QT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GD()){case Gx:return 1;case GT:return 4;case Rg:case HD:return 16;case HT:return 536870912;default:return 16}default:return 16}}var wl=null,Zx=null,pg=null;function eE(){if(pg)return pg;var e,t=Zx,r=t.length,o,l="value"in wl?wl.value:wl.textContent,h=l.length;for(e=0;e<r&&t[e]===l[e];e++);var m=r-e;for(o=1;o<=m&&t[r-o]===l[h-o];o++);return pg=l.slice(e,1<o?1-o:void 0)}function mg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vm(){return!0}function bS(){return!1}function Mo(e){function t(r,o,l,h,m){this._reactName=r,this._targetInst=l,this.type=o,this.nativeEvent=h,this.target=m,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(h):h[c]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Vm:bS,this.isPropagationStopped=bS,this}return tn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Vm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Vm)},persist:function(){},isPersistent:Vm}),t}var Lh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kx=Mo(Lh),hp=tn({},Lh,{view:0,detail:0}),iR=Mo(hp),Jv,Qv,Qd,o0=tn({},hp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qd&&(Qd&&e.type==="mousemove"?(Jv=e.screenX-Qd.screenX,Qv=e.screenY-Qd.screenY):Qv=Jv=0,Qd=e),Jv)},movementY:function(e){return"movementY"in e?e.movementY:Qv}}),wS=Mo(o0),oR=tn({},o0,{dataTransfer:0}),sR=Mo(oR),aR=tn({},hp,{relatedTarget:0}),e_=Mo(aR),lR=tn({},Lh,{animationName:0,elapsedTime:0,pseudoElement:0}),cR=Mo(lR),uR=tn({},Lh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hR=Mo(uR),dR=tn({},Lh,{data:0}),SS=Mo(dR),fR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mR[e])?!!t[e]:!1}function Xx(){return gR}var yR=tn({},hp,{key:function(e){if(e.key){var t=fR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xx,charCode:function(e){return e.type==="keypress"?mg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vR=Mo(yR),_R=tn({},o0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CS=Mo(_R),xR=tn({},hp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xx}),bR=Mo(xR),wR=tn({},Lh,{propertyName:0,elapsedTime:0,pseudoElement:0}),SR=Mo(wR),CR=tn({},o0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kR=Mo(CR),TR=[9,13,27,32],Yx=Va&&"CompositionEvent"in window,vf=null;Va&&"documentMode"in document&&(vf=document.documentMode);var ER=Va&&"TextEvent"in window&&!vf,tE=Va&&(!Yx||vf&&8<vf&&11>=vf),kS=" ",TS=!1;function rE(e,t){switch(e){case"keyup":return TR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hu=!1;function IR(e,t){switch(e){case"compositionend":return nE(t);case"keypress":return t.which!==32?null:(TS=!0,kS);case"textInput":return e=t.data,e===kS&&TS?null:e;default:return null}}function PR(e,t){if(Hu)return e==="compositionend"||!Yx&&rE(e,t)?(e=eE(),pg=Zx=wl=null,Hu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tE&&t.locale!=="ko"?null:t.data;default:return null}}var AR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ES(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!AR[e.type]:t==="textarea"}function iE(e,t,r,o){RT(o),t=Fg(t,"onChange"),0<t.length&&(r=new Kx("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var _f=null,Nf=null;function MR(e){mE(e,0)}function s0(e){var t=Zu(e);if(IT(t))return e}function zR(e,t){if(e==="change")return t}var oE=!1;if(Va){var t_;if(Va){var r_="oninput"in document;if(!r_){var IS=document.createElement("div");IS.setAttribute("oninput","return;"),r_=typeof IS.oninput=="function"}t_=r_}else t_=!1;oE=t_&&(!document.documentMode||9<document.documentMode)}function PS(){_f&&(_f.detachEvent("onpropertychange",sE),Nf=_f=null)}function sE(e){if(e.propertyName==="value"&&s0(Nf)){var t=[];iE(t,Nf,e,Ux(e)),FT(MR,t)}}function LR(e,t,r){e==="focusin"?(PS(),_f=t,Nf=r,_f.attachEvent("onpropertychange",sE)):e==="focusout"&&PS()}function DR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return s0(Nf)}function RR(e,t){if(e==="click")return s0(t)}function OR(e,t){if(e==="input"||e==="change")return s0(t)}function BR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zs=typeof Object.is=="function"?Object.is:BR;function jf(e,t){if(zs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var l=r[o];if(!H_.call(t,l)||!zs(e[l],t[l]))return!1}return!0}function AS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function MS(e,t){var r=AS(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=AS(r)}}function aE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?aE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lE(){for(var e=window,t=zg();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=zg(e.document)}return t}function Jx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $R(e){var t=lE(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&aE(r.ownerDocument.documentElement,r)){if(o!==null&&Jx(r)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=r.textContent.length,h=Math.min(o.start,l);o=o.end===void 0?h:Math.min(o.end,l),!e.extend&&h>o&&(l=o,o=h,h=l),l=MS(r,h);var m=MS(r,o);l&&m&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),h>o?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var FR=Va&&"documentMode"in document&&11>=document.documentMode,qu=null,u1=null,xf=null,h1=!1;function zS(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;h1||qu==null||qu!==zg(o)||(o=qu,"selectionStart"in o&&Jx(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),xf&&jf(xf,o)||(xf=o,o=Fg(u1,"onSelect"),0<o.length&&(t=new Kx("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=qu)))}function Um(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Wu={animationend:Um("Animation","AnimationEnd"),animationiteration:Um("Animation","AnimationIteration"),animationstart:Um("Animation","AnimationStart"),transitionend:Um("Transition","TransitionEnd")},n_={},cE={};Va&&(cE=document.createElement("div").style,"AnimationEvent"in window||(delete Wu.animationend.animation,delete Wu.animationiteration.animation,delete Wu.animationstart.animation),"TransitionEvent"in window||delete Wu.transitionend.transition);function a0(e){if(n_[e])return n_[e];if(!Wu[e])return e;var t=Wu[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in cE)return n_[e]=t[r];return e}var uE=a0("animationend"),hE=a0("animationiteration"),dE=a0("animationstart"),fE=a0("transitionend"),pE=new Map,LS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fl(e,t){pE.set(e,t),Bc(t,[e])}for(var i_=0;i_<LS.length;i_++){var o_=LS[i_],NR=o_.toLowerCase(),jR=o_[0].toUpperCase()+o_.slice(1);Fl(NR,"on"+jR)}Fl(uE,"onAnimationEnd");Fl(hE,"onAnimationIteration");Fl(dE,"onAnimationStart");Fl("dblclick","onDoubleClick");Fl("focusin","onFocus");Fl("focusout","onBlur");Fl(fE,"onTransitionEnd");mh("onMouseEnter",["mouseout","mouseover"]);mh("onMouseLeave",["mouseout","mouseover"]);mh("onPointerEnter",["pointerout","pointerover"]);mh("onPointerLeave",["pointerout","pointerover"]);Bc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VR=new Set("cancel close invalid load scroll toggle".split(" ").concat(hf));function DS(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,ND(o,t,void 0,e),e.currentTarget=null}function mE(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],l=o.event;o=o.listeners;e:{var h=void 0;if(t)for(var m=o.length-1;0<=m;m--){var c=o[m],b=c.instance,k=c.currentTarget;if(c=c.listener,b!==h&&l.isPropagationStopped())break e;DS(l,c,k),h=b}else for(m=0;m<o.length;m++){if(c=o[m],b=c.instance,k=c.currentTarget,c=c.listener,b!==h&&l.isPropagationStopped())break e;DS(l,c,k),h=b}}}if(Dg)throw e=s1,Dg=!1,s1=null,e}function Vr(e,t){var r=t[g1];r===void 0&&(r=t[g1]=new Set);var o=e+"__bubble";r.has(o)||(gE(t,e,2,!1),r.add(o))}function s_(e,t,r){var o=0;t&&(o|=4),gE(r,e,o,t)}var Gm="_reactListening"+Math.random().toString(36).slice(2);function Vf(e){if(!e[Gm]){e[Gm]=!0,ST.forEach(function(r){r!=="selectionchange"&&(VR.has(r)||s_(r,!1,e),s_(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gm]||(t[Gm]=!0,s_("selectionchange",!1,t))}}function gE(e,t,r,o){switch(QT(t)){case 1:var l=rR;break;case 4:l=nR;break;default:l=Wx}r=l.bind(null,t,r,e),l=void 0,!o1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),o?l!==void 0?e.addEventListener(t,r,{capture:!0,passive:l}):e.addEventListener(t,r,!0):l!==void 0?e.addEventListener(t,r,{passive:l}):e.addEventListener(t,r,!1)}function a_(e,t,r,o,l){var h=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var m=o.tag;if(m===3||m===4){var c=o.stateNode.containerInfo;if(c===l||c.nodeType===8&&c.parentNode===l)break;if(m===4)for(m=o.return;m!==null;){var b=m.tag;if((b===3||b===4)&&(b=m.stateNode.containerInfo,b===l||b.nodeType===8&&b.parentNode===l))return;m=m.return}for(;c!==null;){if(m=xc(c),m===null)return;if(b=m.tag,b===5||b===6){o=h=m;continue e}c=c.parentNode}}o=o.return}FT(function(){var k=h,A=Ux(r),R=[];e:{var O=pE.get(e);if(O!==void 0){var Q=Kx,te=e;switch(e){case"keypress":if(mg(r)===0)break e;case"keydown":case"keyup":Q=vR;break;case"focusin":te="focus",Q=e_;break;case"focusout":te="blur",Q=e_;break;case"beforeblur":case"afterblur":Q=e_;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=wS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=sR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=bR;break;case uE:case hE:case dE:Q=cR;break;case fE:Q=SR;break;case"scroll":Q=iR;break;case"wheel":Q=kR;break;case"copy":case"cut":case"paste":Q=hR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=CS}var ee=(t&4)!==0,de=!ee&&e==="scroll",G=ee?O!==null?O+"Capture":null:O;ee=[];for(var j=k,U;j!==null;){U=j;var fe=U.stateNode;if(U.tag===5&&fe!==null&&(U=fe,G!==null&&(fe=Of(j,G),fe!=null&&ee.push(Uf(j,fe,U)))),de)break;j=j.return}0<ee.length&&(O=new Q(O,te,null,r,A),R.push({event:O,listeners:ee}))}}if(!(t&7)){e:{if(O=e==="mouseover"||e==="pointerover",Q=e==="mouseout"||e==="pointerout",O&&r!==n1&&(te=r.relatedTarget||r.fromElement)&&(xc(te)||te[Ua]))break e;if((Q||O)&&(O=A.window===A?A:(O=A.ownerDocument)?O.defaultView||O.parentWindow:window,Q?(te=r.relatedTarget||r.toElement,Q=k,te=te?xc(te):null,te!==null&&(de=$c(te),te!==de||te.tag!==5&&te.tag!==6)&&(te=null)):(Q=null,te=k),Q!==te)){if(ee=wS,fe="onMouseLeave",G="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(ee=CS,fe="onPointerLeave",G="onPointerEnter",j="pointer"),de=Q==null?O:Zu(Q),U=te==null?O:Zu(te),O=new ee(fe,j+"leave",Q,r,A),O.target=de,O.relatedTarget=U,fe=null,xc(A)===k&&(ee=new ee(G,j+"enter",te,r,A),ee.target=U,ee.relatedTarget=de,fe=ee),de=fe,Q&&te)t:{for(ee=Q,G=te,j=0,U=ee;U;U=Pu(U))j++;for(U=0,fe=G;fe;fe=Pu(fe))U++;for(;0<j-U;)ee=Pu(ee),j--;for(;0<U-j;)G=Pu(G),U--;for(;j--;){if(ee===G||G!==null&&ee===G.alternate)break t;ee=Pu(ee),G=Pu(G)}ee=null}else ee=null;Q!==null&&RS(R,O,Q,ee,!1),te!==null&&de!==null&&RS(R,de,te,ee,!0)}}e:{if(O=k?Zu(k):window,Q=O.nodeName&&O.nodeName.toLowerCase(),Q==="select"||Q==="input"&&O.type==="file")var ie=zR;else if(ES(O))if(oE)ie=OR;else{ie=DR;var F=LR}else(Q=O.nodeName)&&Q.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(ie=RR);if(ie&&(ie=ie(e,k))){iE(R,ie,r,A);break e}F&&F(e,O,k),e==="focusout"&&(F=O._wrapperState)&&F.controlled&&O.type==="number"&&J_(O,"number",O.value)}switch(F=k?Zu(k):window,e){case"focusin":(ES(F)||F.contentEditable==="true")&&(qu=F,u1=k,xf=null);break;case"focusout":xf=u1=qu=null;break;case"mousedown":h1=!0;break;case"contextmenu":case"mouseup":case"dragend":h1=!1,zS(R,r,A);break;case"selectionchange":if(FR)break;case"keydown":case"keyup":zS(R,r,A)}var ce;if(Yx)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Hu?rE(e,r)&&(Ce="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Ce="onCompositionStart");Ce&&(tE&&r.locale!=="ko"&&(Hu||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Hu&&(ce=eE()):(wl=A,Zx="value"in wl?wl.value:wl.textContent,Hu=!0)),F=Fg(k,Ce),0<F.length&&(Ce=new SS(Ce,e,null,r,A),R.push({event:Ce,listeners:F}),ce?Ce.data=ce:(ce=nE(r),ce!==null&&(Ce.data=ce)))),(ce=ER?IR(e,r):PR(e,r))&&(k=Fg(k,"onBeforeInput"),0<k.length&&(A=new SS("onBeforeInput","beforeinput",null,r,A),R.push({event:A,listeners:k}),A.data=ce))}mE(R,t)})}function Uf(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Fg(e,t){for(var r=t+"Capture",o=[];e!==null;){var l=e,h=l.stateNode;l.tag===5&&h!==null&&(l=h,h=Of(e,r),h!=null&&o.unshift(Uf(e,h,l)),h=Of(e,t),h!=null&&o.push(Uf(e,h,l))),e=e.return}return o}function Pu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function RS(e,t,r,o,l){for(var h=t._reactName,m=[];r!==null&&r!==o;){var c=r,b=c.alternate,k=c.stateNode;if(b!==null&&b===o)break;c.tag===5&&k!==null&&(c=k,l?(b=Of(r,h),b!=null&&m.unshift(Uf(r,b,c))):l||(b=Of(r,h),b!=null&&m.push(Uf(r,b,c)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}var UR=/\r\n?/g,GR=/\u0000|\uFFFD/g;function OS(e){return(typeof e=="string"?e:""+e).replace(UR,`
`).replace(GR,"")}function Hm(e,t,r){if(t=OS(t),OS(e)!==t&&r)throw Error(Ye(425))}function Ng(){}var d1=null,f1=null;function p1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var m1=typeof setTimeout=="function"?setTimeout:void 0,HR=typeof clearTimeout=="function"?clearTimeout:void 0,BS=typeof Promise=="function"?Promise:void 0,qR=typeof queueMicrotask=="function"?queueMicrotask:typeof BS<"u"?function(e){return BS.resolve(null).then(e).catch(WR)}:m1;function WR(e){setTimeout(function(){throw e})}function l_(e,t){var r=t,o=0;do{var l=r.nextSibling;if(e.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(o===0){e.removeChild(l),Ff(t);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=l}while(r);Ff(t)}function Il(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $S(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Dh=Math.random().toString(36).slice(2),ea="__reactFiber$"+Dh,Gf="__reactProps$"+Dh,Ua="__reactContainer$"+Dh,g1="__reactEvents$"+Dh,ZR="__reactListeners$"+Dh,KR="__reactHandles$"+Dh;function xc(e){var t=e[ea];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ua]||r[ea]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=$S(e);e!==null;){if(r=e[ea])return r;e=$S(e)}return t}e=r,r=e.parentNode}return null}function dp(e){return e=e[ea]||e[Ua],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ye(33))}function l0(e){return e[Gf]||null}var y1=[],Ku=-1;function Nl(e){return{current:e}}function Ur(e){0>Ku||(e.current=y1[Ku],y1[Ku]=null,Ku--)}function Br(e,t){Ku++,y1[Ku]=e.current,e.current=t}var Ol={},Ti=Nl(Ol),no=Nl(!1),Ec=Ol;function gh(e,t){var r=e.type.contextTypes;if(!r)return Ol;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var l={},h;for(h in r)l[h]=t[h];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function io(e){return e=e.childContextTypes,e!=null}function jg(){Ur(no),Ur(Ti)}function FS(e,t,r){if(Ti.current!==Ol)throw Error(Ye(168));Br(Ti,t),Br(no,r)}function yE(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var l in o)if(!(l in t))throw Error(Ye(108,LD(e)||"Unknown",l));return tn({},r,o)}function Vg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ol,Ec=Ti.current,Br(Ti,e),Br(no,no.current),!0}function NS(e,t,r){var o=e.stateNode;if(!o)throw Error(Ye(169));r?(e=yE(e,t,Ec),o.__reactInternalMemoizedMergedChildContext=e,Ur(no),Ur(Ti),Br(Ti,e)):Ur(no),Br(no,r)}var Ma=null,c0=!1,c_=!1;function vE(e){Ma===null?Ma=[e]:Ma.push(e)}function XR(e){c0=!0,vE(e)}function jl(){if(!c_&&Ma!==null){c_=!0;var e=0,t=wr;try{var r=Ma;for(wr=1;e<r.length;e++){var o=r[e];do o=o(!0);while(o!==null)}Ma=null,c0=!1}catch(l){throw Ma!==null&&(Ma=Ma.slice(e+1)),UT(Gx,jl),l}finally{wr=t,c_=!1}}return null}var Xu=[],Yu=0,Ug=null,Gg=0,qo=[],Wo=0,Ic=null,Ra=1,Oa="";function fc(e,t){Xu[Yu++]=Gg,Xu[Yu++]=Ug,Ug=e,Gg=t}function _E(e,t,r){qo[Wo++]=Ra,qo[Wo++]=Oa,qo[Wo++]=Ic,Ic=e;var o=Ra;e=Oa;var l=32-Es(o)-1;o&=~(1<<l),r+=1;var h=32-Es(t)+l;if(30<h){var m=l-l%5;h=(o&(1<<m)-1).toString(32),o>>=m,l-=m,Ra=1<<32-Es(t)+l|r<<l|o,Oa=h+e}else Ra=1<<h|r<<l|o,Oa=e}function Qx(e){e.return!==null&&(fc(e,1),_E(e,1,0))}function eb(e){for(;e===Ug;)Ug=Xu[--Yu],Xu[Yu]=null,Gg=Xu[--Yu],Xu[Yu]=null;for(;e===Ic;)Ic=qo[--Wo],qo[Wo]=null,Oa=qo[--Wo],qo[Wo]=null,Ra=qo[--Wo],qo[Wo]=null}var Eo=null,Co=null,Zr=!1,ks=null;function xE(e,t){var r=Xo(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function jS(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Eo=e,Co=Il(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Eo=e,Co=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ic!==null?{id:Ra,overflow:Oa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Xo(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Eo=e,Co=null,!0):!1;default:return!1}}function v1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function _1(e){if(Zr){var t=Co;if(t){var r=t;if(!jS(e,t)){if(v1(e))throw Error(Ye(418));t=Il(r.nextSibling);var o=Eo;t&&jS(e,t)?xE(o,r):(e.flags=e.flags&-4097|2,Zr=!1,Eo=e)}}else{if(v1(e))throw Error(Ye(418));e.flags=e.flags&-4097|2,Zr=!1,Eo=e}}}function VS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Eo=e}function qm(e){if(e!==Eo)return!1;if(!Zr)return VS(e),Zr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!p1(e.type,e.memoizedProps)),t&&(t=Co)){if(v1(e))throw bE(),Error(Ye(418));for(;t;)xE(e,t),t=Il(t.nextSibling)}if(VS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ye(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Co=Il(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Co=null}}else Co=Eo?Il(e.stateNode.nextSibling):null;return!0}function bE(){for(var e=Co;e;)e=Il(e.nextSibling)}function yh(){Co=Eo=null,Zr=!1}function tb(e){ks===null?ks=[e]:ks.push(e)}var YR=Ka.ReactCurrentBatchConfig;function ef(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ye(309));var o=r.stateNode}if(!o)throw Error(Ye(147,e));var l=o,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(m){var c=l.refs;m===null?delete c[h]:c[h]=m},t._stringRef=h,t)}if(typeof e!="string")throw Error(Ye(284));if(!r._owner)throw Error(Ye(290,e))}return e}function Wm(e,t){throw e=Object.prototype.toString.call(t),Error(Ye(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function US(e){var t=e._init;return t(e._payload)}function wE(e){function t(G,j){if(e){var U=G.deletions;U===null?(G.deletions=[j],G.flags|=16):U.push(j)}}function r(G,j){if(!e)return null;for(;j!==null;)t(G,j),j=j.sibling;return null}function o(G,j){for(G=new Map;j!==null;)j.key!==null?G.set(j.key,j):G.set(j.index,j),j=j.sibling;return G}function l(G,j){return G=zl(G,j),G.index=0,G.sibling=null,G}function h(G,j,U){return G.index=U,e?(U=G.alternate,U!==null?(U=U.index,U<j?(G.flags|=2,j):U):(G.flags|=2,j)):(G.flags|=1048576,j)}function m(G){return e&&G.alternate===null&&(G.flags|=2),G}function c(G,j,U,fe){return j===null||j.tag!==6?(j=g_(U,G.mode,fe),j.return=G,j):(j=l(j,U),j.return=G,j)}function b(G,j,U,fe){var ie=U.type;return ie===Gu?A(G,j,U.props.children,fe,U.key):j!==null&&(j.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===yl&&US(ie)===j.type)?(fe=l(j,U.props),fe.ref=ef(G,j,U),fe.return=G,fe):(fe=wg(U.type,U.key,U.props,null,G.mode,fe),fe.ref=ef(G,j,U),fe.return=G,fe)}function k(G,j,U,fe){return j===null||j.tag!==4||j.stateNode.containerInfo!==U.containerInfo||j.stateNode.implementation!==U.implementation?(j=y_(U,G.mode,fe),j.return=G,j):(j=l(j,U.children||[]),j.return=G,j)}function A(G,j,U,fe,ie){return j===null||j.tag!==7?(j=Cc(U,G.mode,fe,ie),j.return=G,j):(j=l(j,U),j.return=G,j)}function R(G,j,U){if(typeof j=="string"&&j!==""||typeof j=="number")return j=g_(""+j,G.mode,U),j.return=G,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Om:return U=wg(j.type,j.key,j.props,null,G.mode,U),U.ref=ef(G,null,j),U.return=G,U;case Uu:return j=y_(j,G.mode,U),j.return=G,j;case yl:var fe=j._init;return R(G,fe(j._payload),U)}if(cf(j)||Kd(j))return j=Cc(j,G.mode,U,null),j.return=G,j;Wm(G,j)}return null}function O(G,j,U,fe){var ie=j!==null?j.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ie!==null?null:c(G,j,""+U,fe);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Om:return U.key===ie?b(G,j,U,fe):null;case Uu:return U.key===ie?k(G,j,U,fe):null;case yl:return ie=U._init,O(G,j,ie(U._payload),fe)}if(cf(U)||Kd(U))return ie!==null?null:A(G,j,U,fe,null);Wm(G,U)}return null}function Q(G,j,U,fe,ie){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return G=G.get(U)||null,c(j,G,""+fe,ie);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case Om:return G=G.get(fe.key===null?U:fe.key)||null,b(j,G,fe,ie);case Uu:return G=G.get(fe.key===null?U:fe.key)||null,k(j,G,fe,ie);case yl:var F=fe._init;return Q(G,j,U,F(fe._payload),ie)}if(cf(fe)||Kd(fe))return G=G.get(U)||null,A(j,G,fe,ie,null);Wm(j,fe)}return null}function te(G,j,U,fe){for(var ie=null,F=null,ce=j,Ce=j=0,Ue=null;ce!==null&&Ce<U.length;Ce++){ce.index>Ce?(Ue=ce,ce=null):Ue=ce.sibling;var Ae=O(G,ce,U[Ce],fe);if(Ae===null){ce===null&&(ce=Ue);break}e&&ce&&Ae.alternate===null&&t(G,ce),j=h(Ae,j,Ce),F===null?ie=Ae:F.sibling=Ae,F=Ae,ce=Ue}if(Ce===U.length)return r(G,ce),Zr&&fc(G,Ce),ie;if(ce===null){for(;Ce<U.length;Ce++)ce=R(G,U[Ce],fe),ce!==null&&(j=h(ce,j,Ce),F===null?ie=ce:F.sibling=ce,F=ce);return Zr&&fc(G,Ce),ie}for(ce=o(G,ce);Ce<U.length;Ce++)Ue=Q(ce,G,Ce,U[Ce],fe),Ue!==null&&(e&&Ue.alternate!==null&&ce.delete(Ue.key===null?Ce:Ue.key),j=h(Ue,j,Ce),F===null?ie=Ue:F.sibling=Ue,F=Ue);return e&&ce.forEach(function(Re){return t(G,Re)}),Zr&&fc(G,Ce),ie}function ee(G,j,U,fe){var ie=Kd(U);if(typeof ie!="function")throw Error(Ye(150));if(U=ie.call(U),U==null)throw Error(Ye(151));for(var F=ie=null,ce=j,Ce=j=0,Ue=null,Ae=U.next();ce!==null&&!Ae.done;Ce++,Ae=U.next()){ce.index>Ce?(Ue=ce,ce=null):Ue=ce.sibling;var Re=O(G,ce,Ae.value,fe);if(Re===null){ce===null&&(ce=Ue);break}e&&ce&&Re.alternate===null&&t(G,ce),j=h(Re,j,Ce),F===null?ie=Re:F.sibling=Re,F=Re,ce=Ue}if(Ae.done)return r(G,ce),Zr&&fc(G,Ce),ie;if(ce===null){for(;!Ae.done;Ce++,Ae=U.next())Ae=R(G,Ae.value,fe),Ae!==null&&(j=h(Ae,j,Ce),F===null?ie=Ae:F.sibling=Ae,F=Ae);return Zr&&fc(G,Ce),ie}for(ce=o(G,ce);!Ae.done;Ce++,Ae=U.next())Ae=Q(ce,G,Ce,Ae.value,fe),Ae!==null&&(e&&Ae.alternate!==null&&ce.delete(Ae.key===null?Ce:Ae.key),j=h(Ae,j,Ce),F===null?ie=Ae:F.sibling=Ae,F=Ae);return e&&ce.forEach(function(We){return t(G,We)}),Zr&&fc(G,Ce),ie}function de(G,j,U,fe){if(typeof U=="object"&&U!==null&&U.type===Gu&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Om:e:{for(var ie=U.key,F=j;F!==null;){if(F.key===ie){if(ie=U.type,ie===Gu){if(F.tag===7){r(G,F.sibling),j=l(F,U.props.children),j.return=G,G=j;break e}}else if(F.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===yl&&US(ie)===F.type){r(G,F.sibling),j=l(F,U.props),j.ref=ef(G,F,U),j.return=G,G=j;break e}r(G,F);break}else t(G,F);F=F.sibling}U.type===Gu?(j=Cc(U.props.children,G.mode,fe,U.key),j.return=G,G=j):(fe=wg(U.type,U.key,U.props,null,G.mode,fe),fe.ref=ef(G,j,U),fe.return=G,G=fe)}return m(G);case Uu:e:{for(F=U.key;j!==null;){if(j.key===F)if(j.tag===4&&j.stateNode.containerInfo===U.containerInfo&&j.stateNode.implementation===U.implementation){r(G,j.sibling),j=l(j,U.children||[]),j.return=G,G=j;break e}else{r(G,j);break}else t(G,j);j=j.sibling}j=y_(U,G.mode,fe),j.return=G,G=j}return m(G);case yl:return F=U._init,de(G,j,F(U._payload),fe)}if(cf(U))return te(G,j,U,fe);if(Kd(U))return ee(G,j,U,fe);Wm(G,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,j!==null&&j.tag===6?(r(G,j.sibling),j=l(j,U),j.return=G,G=j):(r(G,j),j=g_(U,G.mode,fe),j.return=G,G=j),m(G)):r(G,j)}return de}var vh=wE(!0),SE=wE(!1),Hg=Nl(null),qg=null,Ju=null,rb=null;function nb(){rb=Ju=qg=null}function ib(e){var t=Hg.current;Ur(Hg),e._currentValue=t}function x1(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function uh(e,t){qg=e,rb=Ju=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ro=!0),e.firstContext=null)}function es(e){var t=e._currentValue;if(rb!==e)if(e={context:e,memoizedValue:t,next:null},Ju===null){if(qg===null)throw Error(Ye(308));Ju=e,qg.dependencies={lanes:0,firstContext:e}}else Ju=Ju.next=e;return t}var bc=null;function ob(e){bc===null?bc=[e]:bc.push(e)}function CE(e,t,r,o){var l=t.interleaved;return l===null?(r.next=r,ob(t)):(r.next=l.next,l.next=r),t.interleaved=r,Ga(e,o)}function Ga(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var vl=!1;function sb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pl(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,ar&2){var l=o.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),o.pending=t,Ga(e,r)}return l=o.interleaved,l===null?(t.next=t,ob(o)):(t.next=l.next,l.next=t),o.interleaved=t,Ga(e,r)}function gg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Hx(e,r)}}function GS(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var l=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?l=h=m:h=h.next=m,r=r.next}while(r!==null);h===null?l=h=t:h=h.next=t}else l=h=t;r={baseState:o.baseState,firstBaseUpdate:l,lastBaseUpdate:h,shared:o.shared,effects:o.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Wg(e,t,r,o){var l=e.updateQueue;vl=!1;var h=l.firstBaseUpdate,m=l.lastBaseUpdate,c=l.shared.pending;if(c!==null){l.shared.pending=null;var b=c,k=b.next;b.next=null,m===null?h=k:m.next=k,m=b;var A=e.alternate;A!==null&&(A=A.updateQueue,c=A.lastBaseUpdate,c!==m&&(c===null?A.firstBaseUpdate=k:c.next=k,A.lastBaseUpdate=b))}if(h!==null){var R=l.baseState;m=0,A=k=b=null,c=h;do{var O=c.lane,Q=c.eventTime;if((o&O)===O){A!==null&&(A=A.next={eventTime:Q,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var te=e,ee=c;switch(O=t,Q=r,ee.tag){case 1:if(te=ee.payload,typeof te=="function"){R=te.call(Q,R,O);break e}R=te;break e;case 3:te.flags=te.flags&-65537|128;case 0:if(te=ee.payload,O=typeof te=="function"?te.call(Q,R,O):te,O==null)break e;R=tn({},R,O);break e;case 2:vl=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,O=l.effects,O===null?l.effects=[c]:O.push(c))}else Q={eventTime:Q,lane:O,tag:c.tag,payload:c.payload,callback:c.callback,next:null},A===null?(k=A=Q,b=R):A=A.next=Q,m|=O;if(c=c.next,c===null){if(c=l.shared.pending,c===null)break;O=c,c=O.next,O.next=null,l.lastBaseUpdate=O,l.shared.pending=null}}while(!0);if(A===null&&(b=R),l.baseState=b,l.firstBaseUpdate=k,l.lastBaseUpdate=A,t=l.shared.interleaved,t!==null){l=t;do m|=l.lane,l=l.next;while(l!==t)}else h===null&&(l.shared.lanes=0);Ac|=m,e.lanes=m,e.memoizedState=R}}function HS(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],l=o.callback;if(l!==null){if(o.callback=null,o=r,typeof l!="function")throw Error(Ye(191,l));l.call(o)}}}var fp={},oa=Nl(fp),Hf=Nl(fp),qf=Nl(fp);function wc(e){if(e===fp)throw Error(Ye(174));return e}function ab(e,t){switch(Br(qf,t),Br(Hf,e),Br(oa,fp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:e1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=e1(t,e)}Ur(oa),Br(oa,t)}function _h(){Ur(oa),Ur(Hf),Ur(qf)}function TE(e){wc(qf.current);var t=wc(oa.current),r=e1(t,e.type);t!==r&&(Br(Hf,e),Br(oa,r))}function lb(e){Hf.current===e&&(Ur(oa),Ur(Hf))}var Qr=Nl(0);function Zg(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var u_=[];function cb(){for(var e=0;e<u_.length;e++)u_[e]._workInProgressVersionPrimary=null;u_.length=0}var yg=Ka.ReactCurrentDispatcher,h_=Ka.ReactCurrentBatchConfig,Pc=0,en=null,Rn=null,Hn=null,Kg=!1,bf=!1,Wf=0,JR=0;function xi(){throw Error(Ye(321))}function ub(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!zs(e[r],t[r]))return!1;return!0}function hb(e,t,r,o,l,h){if(Pc=h,en=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yg.current=e===null||e.memoizedState===null?r4:n4,e=r(o,l),bf){h=0;do{if(bf=!1,Wf=0,25<=h)throw Error(Ye(301));h+=1,Hn=Rn=null,t.updateQueue=null,yg.current=i4,e=r(o,l)}while(bf)}if(yg.current=Xg,t=Rn!==null&&Rn.next!==null,Pc=0,Hn=Rn=en=null,Kg=!1,t)throw Error(Ye(300));return e}function db(){var e=Wf!==0;return Wf=0,e}function Ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?en.memoizedState=Hn=e:Hn=Hn.next=e,Hn}function ts(){if(Rn===null){var e=en.alternate;e=e!==null?e.memoizedState:null}else e=Rn.next;var t=Hn===null?en.memoizedState:Hn.next;if(t!==null)Hn=t,Rn=e;else{if(e===null)throw Error(Ye(310));Rn=e,e={memoizedState:Rn.memoizedState,baseState:Rn.baseState,baseQueue:Rn.baseQueue,queue:Rn.queue,next:null},Hn===null?en.memoizedState=Hn=e:Hn=Hn.next=e}return Hn}function Zf(e,t){return typeof t=="function"?t(e):t}function d_(e){var t=ts(),r=t.queue;if(r===null)throw Error(Ye(311));r.lastRenderedReducer=e;var o=Rn,l=o.baseQueue,h=r.pending;if(h!==null){if(l!==null){var m=l.next;l.next=h.next,h.next=m}o.baseQueue=l=h,r.pending=null}if(l!==null){h=l.next,o=o.baseState;var c=m=null,b=null,k=h;do{var A=k.lane;if((Pc&A)===A)b!==null&&(b=b.next={lane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),o=k.hasEagerState?k.eagerState:e(o,k.action);else{var R={lane:A,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null};b===null?(c=b=R,m=o):b=b.next=R,en.lanes|=A,Ac|=A}k=k.next}while(k!==null&&k!==h);b===null?m=o:b.next=c,zs(o,t.memoizedState)||(ro=!0),t.memoizedState=o,t.baseState=m,t.baseQueue=b,r.lastRenderedState=o}if(e=r.interleaved,e!==null){l=e;do h=l.lane,en.lanes|=h,Ac|=h,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function f_(e){var t=ts(),r=t.queue;if(r===null)throw Error(Ye(311));r.lastRenderedReducer=e;var o=r.dispatch,l=r.pending,h=t.memoizedState;if(l!==null){r.pending=null;var m=l=l.next;do h=e(h,m.action),m=m.next;while(m!==l);zs(h,t.memoizedState)||(ro=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,o]}function EE(){}function IE(e,t){var r=en,o=ts(),l=t(),h=!zs(o.memoizedState,l);if(h&&(o.memoizedState=l,ro=!0),o=o.queue,fb(ME.bind(null,r,o,e),[e]),o.getSnapshot!==t||h||Hn!==null&&Hn.memoizedState.tag&1){if(r.flags|=2048,Kf(9,AE.bind(null,r,o,l,t),void 0,null),Kn===null)throw Error(Ye(349));Pc&30||PE(r,t,l)}return l}function PE(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=en.updateQueue,t===null?(t={lastEffect:null,stores:null},en.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function AE(e,t,r,o){t.value=r,t.getSnapshot=o,zE(t)&&LE(e)}function ME(e,t,r){return r(function(){zE(t)&&LE(e)})}function zE(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!zs(e,r)}catch{return!0}}function LE(e){var t=Ga(e,1);t!==null&&Is(t,e,1,-1)}function qS(e){var t=Ys();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zf,lastRenderedState:e},t.queue=e,e=e.dispatch=t4.bind(null,en,e),[t.memoizedState,e]}function Kf(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},t=en.updateQueue,t===null?(t={lastEffect:null,stores:null},en.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e)),e}function DE(){return ts().memoizedState}function vg(e,t,r,o){var l=Ys();en.flags|=e,l.memoizedState=Kf(1|t,r,void 0,o===void 0?null:o)}function u0(e,t,r,o){var l=ts();o=o===void 0?null:o;var h=void 0;if(Rn!==null){var m=Rn.memoizedState;if(h=m.destroy,o!==null&&ub(o,m.deps)){l.memoizedState=Kf(t,r,h,o);return}}en.flags|=e,l.memoizedState=Kf(1|t,r,h,o)}function WS(e,t){return vg(8390656,8,e,t)}function fb(e,t){return u0(2048,8,e,t)}function RE(e,t){return u0(4,2,e,t)}function OE(e,t){return u0(4,4,e,t)}function BE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $E(e,t,r){return r=r!=null?r.concat([e]):null,u0(4,4,BE.bind(null,t,e),r)}function pb(){}function FE(e,t){var r=ts();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&ub(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function NE(e,t){var r=ts();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&ub(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function jE(e,t,r){return Pc&21?(zs(r,t)||(r=qT(),en.lanes|=r,Ac|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ro=!0),e.memoizedState=r)}function QR(e,t){var r=wr;wr=r!==0&&4>r?r:4,e(!0);var o=h_.transition;h_.transition={};try{e(!1),t()}finally{wr=r,h_.transition=o}}function VE(){return ts().memoizedState}function e4(e,t,r){var o=Ml(e);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},UE(e))GE(t,r);else if(r=CE(e,t,r,o),r!==null){var l=Ni();Is(r,e,o,l),HE(r,t,o)}}function t4(e,t,r){var o=Ml(e),l={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(UE(e))GE(t,l);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var m=t.lastRenderedState,c=h(m,r);if(l.hasEagerState=!0,l.eagerState=c,zs(c,m)){var b=t.interleaved;b===null?(l.next=l,ob(t)):(l.next=b.next,b.next=l),t.interleaved=l;return}}catch{}finally{}r=CE(e,t,l,o),r!==null&&(l=Ni(),Is(r,e,o,l),HE(r,t,o))}}function UE(e){var t=e.alternate;return e===en||t!==null&&t===en}function GE(e,t){bf=Kg=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function HE(e,t,r){if(r&4194240){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Hx(e,r)}}var Xg={readContext:es,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useInsertionEffect:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useSyncExternalStore:xi,useId:xi,unstable_isNewReconciler:!1},r4={readContext:es,useCallback:function(e,t){return Ys().memoizedState=[e,t===void 0?null:t],e},useContext:es,useEffect:WS,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,vg(4194308,4,BE.bind(null,t,e),r)},useLayoutEffect:function(e,t){return vg(4194308,4,e,t)},useInsertionEffect:function(e,t){return vg(4,2,e,t)},useMemo:function(e,t){var r=Ys();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=Ys();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=e4.bind(null,en,e),[o.memoizedState,e]},useRef:function(e){var t=Ys();return e={current:e},t.memoizedState=e},useState:qS,useDebugValue:pb,useDeferredValue:function(e){return Ys().memoizedState=e},useTransition:function(){var e=qS(!1),t=e[0];return e=QR.bind(null,e[1]),Ys().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=en,l=Ys();if(Zr){if(r===void 0)throw Error(Ye(407));r=r()}else{if(r=t(),Kn===null)throw Error(Ye(349));Pc&30||PE(o,t,r)}l.memoizedState=r;var h={value:r,getSnapshot:t};return l.queue=h,WS(ME.bind(null,o,h,e),[e]),o.flags|=2048,Kf(9,AE.bind(null,o,h,r,t),void 0,null),r},useId:function(){var e=Ys(),t=Kn.identifierPrefix;if(Zr){var r=Oa,o=Ra;r=(o&~(1<<32-Es(o)-1)).toString(32)+r,t=":"+t+"R"+r,r=Wf++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=JR++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},n4={readContext:es,useCallback:FE,useContext:es,useEffect:fb,useImperativeHandle:$E,useInsertionEffect:RE,useLayoutEffect:OE,useMemo:NE,useReducer:d_,useRef:DE,useState:function(){return d_(Zf)},useDebugValue:pb,useDeferredValue:function(e){var t=ts();return jE(t,Rn.memoizedState,e)},useTransition:function(){var e=d_(Zf)[0],t=ts().memoizedState;return[e,t]},useMutableSource:EE,useSyncExternalStore:IE,useId:VE,unstable_isNewReconciler:!1},i4={readContext:es,useCallback:FE,useContext:es,useEffect:fb,useImperativeHandle:$E,useInsertionEffect:RE,useLayoutEffect:OE,useMemo:NE,useReducer:f_,useRef:DE,useState:function(){return f_(Zf)},useDebugValue:pb,useDeferredValue:function(e){var t=ts();return Rn===null?t.memoizedState=e:jE(t,Rn.memoizedState,e)},useTransition:function(){var e=f_(Zf)[0],t=ts().memoizedState;return[e,t]},useMutableSource:EE,useSyncExternalStore:IE,useId:VE,unstable_isNewReconciler:!1};function Ss(e,t){if(e&&e.defaultProps){t=tn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function b1(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:tn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var h0={isMounted:function(e){return(e=e._reactInternals)?$c(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=Ni(),l=Ml(e),h=Fa(o,l);h.payload=t,r!=null&&(h.callback=r),t=Pl(e,h,l),t!==null&&(Is(t,e,l,o),gg(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=Ni(),l=Ml(e),h=Fa(o,l);h.tag=1,h.payload=t,r!=null&&(h.callback=r),t=Pl(e,h,l),t!==null&&(Is(t,e,l,o),gg(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ni(),o=Ml(e),l=Fa(r,o);l.tag=2,t!=null&&(l.callback=t),t=Pl(e,l,o),t!==null&&(Is(t,e,o,r),gg(t,e,o))}};function ZS(e,t,r,o,l,h,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,m):t.prototype&&t.prototype.isPureReactComponent?!jf(r,o)||!jf(l,h):!0}function qE(e,t,r){var o=!1,l=Ol,h=t.contextType;return typeof h=="object"&&h!==null?h=es(h):(l=io(t)?Ec:Ti.current,o=t.contextTypes,h=(o=o!=null)?gh(e,l):Ol),t=new t(r,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=h0,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=h),t}function KS(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&h0.enqueueReplaceState(t,t.state,null)}function w1(e,t,r,o){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs={},sb(e);var h=t.contextType;typeof h=="object"&&h!==null?l.context=es(h):(h=io(t)?Ec:Ti.current,l.context=gh(e,h)),l.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(b1(e,t,h,r),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&h0.enqueueReplaceState(l,l.state,null),Wg(e,r,l,o),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function xh(e,t){try{var r="",o=t;do r+=zD(o),o=o.return;while(o);var l=r}catch(h){l=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:l,digest:null}}function p_(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function S1(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var o4=typeof WeakMap=="function"?WeakMap:Map;function WE(e,t,r){r=Fa(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){Jg||(Jg=!0,L1=o),S1(e,t)},r}function ZE(e,t,r){r=Fa(-1,r),r.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var l=t.value;r.payload=function(){return o(l)},r.callback=function(){S1(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){S1(e,t),typeof o!="function"&&(Al===null?Al=new Set([this]):Al.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}function XS(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new o4;var l=new Set;o.set(t,l)}else l=o.get(t),l===void 0&&(l=new Set,o.set(t,l));l.has(r)||(l.add(r),e=_4.bind(null,e,t,r),t.then(e,e))}function YS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function JS(e,t,r,o,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Fa(-1,1),t.tag=2,Pl(r,t,1))),r.lanes|=1),e)}var s4=Ka.ReactCurrentOwner,ro=!1;function Fi(e,t,r,o){t.child=e===null?SE(t,null,r,o):vh(t,e.child,r,o)}function QS(e,t,r,o,l){r=r.render;var h=t.ref;return uh(t,l),o=hb(e,t,r,o,h,l),r=db(),e!==null&&!ro?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Ha(e,t,l)):(Zr&&r&&Qx(t),t.flags|=1,Fi(e,t,o,l),t.child)}function eC(e,t,r,o,l){if(e===null){var h=r.type;return typeof h=="function"&&!wb(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,KE(e,t,h,o,l)):(e=wg(r.type,null,o,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&l)){var m=h.memoizedProps;if(r=r.compare,r=r!==null?r:jf,r(m,o)&&e.ref===t.ref)return Ha(e,t,l)}return t.flags|=1,e=zl(h,o),e.ref=t.ref,e.return=t,t.child=e}function KE(e,t,r,o,l){if(e!==null){var h=e.memoizedProps;if(jf(h,o)&&e.ref===t.ref)if(ro=!1,t.pendingProps=o=h,(e.lanes&l)!==0)e.flags&131072&&(ro=!0);else return t.lanes=e.lanes,Ha(e,t,l)}return C1(e,t,r,o,l)}function XE(e,t,r){var o=t.pendingProps,l=o.children,h=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Br(eh,go),go|=r;else{if(!(r&1073741824))return e=h!==null?h.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Br(eh,go),go|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=h!==null?h.baseLanes:r,Br(eh,go),go|=o}else h!==null?(o=h.baseLanes|r,t.memoizedState=null):o=r,Br(eh,go),go|=o;return Fi(e,t,l,r),t.child}function YE(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function C1(e,t,r,o,l){var h=io(r)?Ec:Ti.current;return h=gh(t,h),uh(t,l),r=hb(e,t,r,o,h,l),o=db(),e!==null&&!ro?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Ha(e,t,l)):(Zr&&o&&Qx(t),t.flags|=1,Fi(e,t,r,l),t.child)}function tC(e,t,r,o,l){if(io(r)){var h=!0;Vg(t)}else h=!1;if(uh(t,l),t.stateNode===null)_g(e,t),qE(t,r,o),w1(t,r,o,l),o=!0;else if(e===null){var m=t.stateNode,c=t.memoizedProps;m.props=c;var b=m.context,k=r.contextType;typeof k=="object"&&k!==null?k=es(k):(k=io(r)?Ec:Ti.current,k=gh(t,k));var A=r.getDerivedStateFromProps,R=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function";R||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(c!==o||b!==k)&&KS(t,m,o,k),vl=!1;var O=t.memoizedState;m.state=O,Wg(t,o,m,l),b=t.memoizedState,c!==o||O!==b||no.current||vl?(typeof A=="function"&&(b1(t,r,A,o),b=t.memoizedState),(c=vl||ZS(t,r,c,o,O,b,k))?(R||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=b),m.props=o,m.state=b,m.context=k,o=c):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{m=t.stateNode,kE(e,t),c=t.memoizedProps,k=t.type===t.elementType?c:Ss(t.type,c),m.props=k,R=t.pendingProps,O=m.context,b=r.contextType,typeof b=="object"&&b!==null?b=es(b):(b=io(r)?Ec:Ti.current,b=gh(t,b));var Q=r.getDerivedStateFromProps;(A=typeof Q=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(c!==R||O!==b)&&KS(t,m,o,b),vl=!1,O=t.memoizedState,m.state=O,Wg(t,o,m,l);var te=t.memoizedState;c!==R||O!==te||no.current||vl?(typeof Q=="function"&&(b1(t,r,Q,o),te=t.memoizedState),(k=vl||ZS(t,r,k,o,O,te,b)||!1)?(A||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,te,b),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,te,b)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||c===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=te),m.props=o,m.state=te,m.context=b,o=k):(typeof m.componentDidUpdate!="function"||c===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),o=!1)}return k1(e,t,r,o,h,l)}function k1(e,t,r,o,l,h){YE(e,t);var m=(t.flags&128)!==0;if(!o&&!m)return l&&NS(t,r,!1),Ha(e,t,h);o=t.stateNode,s4.current=t;var c=m&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&m?(t.child=vh(t,e.child,null,h),t.child=vh(t,null,c,h)):Fi(e,t,c,h),t.memoizedState=o.state,l&&NS(t,r,!0),t.child}function JE(e){var t=e.stateNode;t.pendingContext?FS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&FS(e,t.context,!1),ab(e,t.containerInfo)}function rC(e,t,r,o,l){return yh(),tb(l),t.flags|=256,Fi(e,t,r,o),t.child}var T1={dehydrated:null,treeContext:null,retryLane:0};function E1(e){return{baseLanes:e,cachePool:null,transitions:null}}function QE(e,t,r){var o=t.pendingProps,l=Qr.current,h=!1,m=(t.flags&128)!==0,c;if((c=m)||(c=e!==null&&e.memoizedState===null?!1:(l&2)!==0),c?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Br(Qr,l&1),e===null)return _1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(m=o.children,e=o.fallback,h?(o=t.mode,h=t.child,m={mode:"hidden",children:m},!(o&1)&&h!==null?(h.childLanes=0,h.pendingProps=m):h=p0(m,o,0,null),e=Cc(e,o,r,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=E1(r),t.memoizedState=T1,e):mb(t,m));if(l=e.memoizedState,l!==null&&(c=l.dehydrated,c!==null))return a4(e,t,m,o,c,l,r);if(h){h=o.fallback,m=t.mode,l=e.child,c=l.sibling;var b={mode:"hidden",children:o.children};return!(m&1)&&t.child!==l?(o=t.child,o.childLanes=0,o.pendingProps=b,t.deletions=null):(o=zl(l,b),o.subtreeFlags=l.subtreeFlags&14680064),c!==null?h=zl(c,h):(h=Cc(h,m,r,null),h.flags|=2),h.return=t,o.return=t,o.sibling=h,t.child=o,o=h,h=t.child,m=e.child.memoizedState,m=m===null?E1(r):{baseLanes:m.baseLanes|r,cachePool:null,transitions:m.transitions},h.memoizedState=m,h.childLanes=e.childLanes&~r,t.memoizedState=T1,o}return h=e.child,e=h.sibling,o=zl(h,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=r),o.return=t,o.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function mb(e,t){return t=p0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zm(e,t,r,o){return o!==null&&tb(o),vh(t,e.child,null,r),e=mb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function a4(e,t,r,o,l,h,m){if(r)return t.flags&256?(t.flags&=-257,o=p_(Error(Ye(422))),Zm(e,t,m,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=o.fallback,l=t.mode,o=p0({mode:"visible",children:o.children},l,0,null),h=Cc(h,l,m,null),h.flags|=2,o.return=t,h.return=t,o.sibling=h,t.child=o,t.mode&1&&vh(t,e.child,null,m),t.child.memoizedState=E1(m),t.memoizedState=T1,h);if(!(t.mode&1))return Zm(e,t,m,null);if(l.data==="$!"){if(o=l.nextSibling&&l.nextSibling.dataset,o)var c=o.dgst;return o=c,h=Error(Ye(419)),o=p_(h,o,void 0),Zm(e,t,m,o)}if(c=(m&e.childLanes)!==0,ro||c){if(o=Kn,o!==null){switch(m&-m){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(o.suspendedLanes|m)?0:l,l!==0&&l!==h.retryLane&&(h.retryLane=l,Ga(e,l),Is(o,e,l,-1))}return bb(),o=p_(Error(Ye(421))),Zm(e,t,m,o)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=x4.bind(null,e),l._reactRetry=t,null):(e=h.treeContext,Co=Il(l.nextSibling),Eo=t,Zr=!0,ks=null,e!==null&&(qo[Wo++]=Ra,qo[Wo++]=Oa,qo[Wo++]=Ic,Ra=e.id,Oa=e.overflow,Ic=t),t=mb(t,o.children),t.flags|=4096,t)}function nC(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),x1(e.return,t,r)}function m_(e,t,r,o,l){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:l}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=o,h.tail=r,h.tailMode=l)}function eI(e,t,r){var o=t.pendingProps,l=o.revealOrder,h=o.tail;if(Fi(e,t,o.children,r),o=Qr.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nC(e,r,t);else if(e.tag===19)nC(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Br(Qr,o),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)e=r.alternate,e!==null&&Zg(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),m_(t,!1,l,r,h);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Zg(e)===null){t.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}m_(t,!0,r,null,h);break;case"together":m_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _g(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ac|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ye(153));if(t.child!==null){for(e=t.child,r=zl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=zl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function l4(e,t,r){switch(t.tag){case 3:JE(t),yh();break;case 5:TE(t);break;case 1:io(t.type)&&Vg(t);break;case 4:ab(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,l=t.memoizedProps.value;Br(Hg,o._currentValue),o._currentValue=l;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Br(Qr,Qr.current&1),t.flags|=128,null):r&t.child.childLanes?QE(e,t,r):(Br(Qr,Qr.current&1),e=Ha(e,t,r),e!==null?e.sibling:null);Br(Qr,Qr.current&1);break;case 19:if(o=(r&t.childLanes)!==0,e.flags&128){if(o)return eI(e,t,r);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Br(Qr,Qr.current),o)break;return null;case 22:case 23:return t.lanes=0,XE(e,t,r)}return Ha(e,t,r)}var tI,I1,rI,nI;tI=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};I1=function(){};rI=function(e,t,r,o){var l=e.memoizedProps;if(l!==o){e=t.stateNode,wc(oa.current);var h=null;switch(r){case"input":l=X_(e,l),o=X_(e,o),h=[];break;case"select":l=tn({},l,{value:void 0}),o=tn({},o,{value:void 0}),h=[];break;case"textarea":l=Q_(e,l),o=Q_(e,o),h=[];break;default:typeof l.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Ng)}t1(r,o);var m;r=null;for(k in l)if(!o.hasOwnProperty(k)&&l.hasOwnProperty(k)&&l[k]!=null)if(k==="style"){var c=l[k];for(m in c)c.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else k!=="dangerouslySetInnerHTML"&&k!=="children"&&k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(Df.hasOwnProperty(k)?h||(h=[]):(h=h||[]).push(k,null));for(k in o){var b=o[k];if(c=l!=null?l[k]:void 0,o.hasOwnProperty(k)&&b!==c&&(b!=null||c!=null))if(k==="style")if(c){for(m in c)!c.hasOwnProperty(m)||b&&b.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in b)b.hasOwnProperty(m)&&c[m]!==b[m]&&(r||(r={}),r[m]=b[m])}else r||(h||(h=[]),h.push(k,r)),r=b;else k==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,c=c?c.__html:void 0,b!=null&&c!==b&&(h=h||[]).push(k,b)):k==="children"?typeof b!="string"&&typeof b!="number"||(h=h||[]).push(k,""+b):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&(Df.hasOwnProperty(k)?(b!=null&&k==="onScroll"&&Vr("scroll",e),h||c===b||(h=[])):(h=h||[]).push(k,b))}r&&(h=h||[]).push("style",r);var k=h;(t.updateQueue=k)&&(t.flags|=4)}};nI=function(e,t,r,o){r!==o&&(t.flags|=4)};function tf(e,t){if(!Zr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function bi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,o|=l.subtreeFlags&14680064,o|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,o|=l.subtreeFlags,o|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function c4(e,t,r){var o=t.pendingProps;switch(eb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bi(t),null;case 1:return io(t.type)&&jg(),bi(t),null;case 3:return o=t.stateNode,_h(),Ur(no),Ur(Ti),cb(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(qm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ks!==null&&(O1(ks),ks=null))),I1(e,t),bi(t),null;case 5:lb(t);var l=wc(qf.current);if(r=t.type,e!==null&&t.stateNode!=null)rI(e,t,r,o,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(Ye(166));return bi(t),null}if(e=wc(oa.current),qm(t)){o=t.stateNode,r=t.type;var h=t.memoizedProps;switch(o[ea]=t,o[Gf]=h,e=(t.mode&1)!==0,r){case"dialog":Vr("cancel",o),Vr("close",o);break;case"iframe":case"object":case"embed":Vr("load",o);break;case"video":case"audio":for(l=0;l<hf.length;l++)Vr(hf[l],o);break;case"source":Vr("error",o);break;case"img":case"image":case"link":Vr("error",o),Vr("load",o);break;case"details":Vr("toggle",o);break;case"input":dS(o,h),Vr("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!h.multiple},Vr("invalid",o);break;case"textarea":pS(o,h),Vr("invalid",o)}t1(r,h),l=null;for(var m in h)if(h.hasOwnProperty(m)){var c=h[m];m==="children"?typeof c=="string"?o.textContent!==c&&(h.suppressHydrationWarning!==!0&&Hm(o.textContent,c,e),l=["children",c]):typeof c=="number"&&o.textContent!==""+c&&(h.suppressHydrationWarning!==!0&&Hm(o.textContent,c,e),l=["children",""+c]):Df.hasOwnProperty(m)&&c!=null&&m==="onScroll"&&Vr("scroll",o)}switch(r){case"input":Bm(o),fS(o,h,!0);break;case"textarea":Bm(o),mS(o);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(o.onclick=Ng)}o=l,t.updateQueue=o,o!==null&&(t.flags|=4)}else{m=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=MT(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=m.createElement(r,{is:o.is}):(e=m.createElement(r),r==="select"&&(m=e,o.multiple?m.multiple=!0:o.size&&(m.size=o.size))):e=m.createElementNS(e,r),e[ea]=t,e[Gf]=o,tI(e,t,!1,!1),t.stateNode=e;e:{switch(m=r1(r,o),r){case"dialog":Vr("cancel",e),Vr("close",e),l=o;break;case"iframe":case"object":case"embed":Vr("load",e),l=o;break;case"video":case"audio":for(l=0;l<hf.length;l++)Vr(hf[l],e);l=o;break;case"source":Vr("error",e),l=o;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),l=o;break;case"details":Vr("toggle",e),l=o;break;case"input":dS(e,o),l=X_(e,o),Vr("invalid",e);break;case"option":l=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},l=tn({},o,{value:void 0}),Vr("invalid",e);break;case"textarea":pS(e,o),l=Q_(e,o),Vr("invalid",e);break;default:l=o}t1(r,l),c=l;for(h in c)if(c.hasOwnProperty(h)){var b=c[h];h==="style"?DT(e,b):h==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&zT(e,b)):h==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&Rf(e,b):typeof b=="number"&&Rf(e,""+b):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Df.hasOwnProperty(h)?b!=null&&h==="onScroll"&&Vr("scroll",e):b!=null&&Fx(e,h,b,m))}switch(r){case"input":Bm(e),fS(e,o,!1);break;case"textarea":Bm(e),mS(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Rl(o.value));break;case"select":e.multiple=!!o.multiple,h=o.value,h!=null?sh(e,!!o.multiple,h,!1):o.defaultValue!=null&&sh(e,!!o.multiple,o.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Ng)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return bi(t),null;case 6:if(e&&t.stateNode!=null)nI(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(Ye(166));if(r=wc(qf.current),wc(oa.current),qm(t)){if(o=t.stateNode,r=t.memoizedProps,o[ea]=t,(h=o.nodeValue!==r)&&(e=Eo,e!==null))switch(e.tag){case 3:Hm(o.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hm(o.nodeValue,r,(e.mode&1)!==0)}h&&(t.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[ea]=t,t.stateNode=o}return bi(t),null;case 13:if(Ur(Qr),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Zr&&Co!==null&&t.mode&1&&!(t.flags&128))bE(),yh(),t.flags|=98560,h=!1;else if(h=qm(t),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(Ye(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(Ye(317));h[ea]=t}else yh(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;bi(t),h=!1}else ks!==null&&(O1(ks),ks=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||Qr.current&1?On===0&&(On=3):bb())),t.updateQueue!==null&&(t.flags|=4),bi(t),null);case 4:return _h(),I1(e,t),e===null&&Vf(t.stateNode.containerInfo),bi(t),null;case 10:return ib(t.type._context),bi(t),null;case 17:return io(t.type)&&jg(),bi(t),null;case 19:if(Ur(Qr),h=t.memoizedState,h===null)return bi(t),null;if(o=(t.flags&128)!==0,m=h.rendering,m===null)if(o)tf(h,!1);else{if(On!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(m=Zg(e),m!==null){for(t.flags|=128,tf(h,!1),o=m.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;r!==null;)h=r,e=o,h.flags&=14680066,m=h.alternate,m===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=m.childLanes,h.lanes=m.lanes,h.child=m.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=m.memoizedProps,h.memoizedState=m.memoizedState,h.updateQueue=m.updateQueue,h.type=m.type,e=m.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Br(Qr,Qr.current&1|2),t.child}e=e.sibling}h.tail!==null&&bn()>bh&&(t.flags|=128,o=!0,tf(h,!1),t.lanes=4194304)}else{if(!o)if(e=Zg(m),e!==null){if(t.flags|=128,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),tf(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!Zr)return bi(t),null}else 2*bn()-h.renderingStartTime>bh&&r!==1073741824&&(t.flags|=128,o=!0,tf(h,!1),t.lanes=4194304);h.isBackwards?(m.sibling=t.child,t.child=m):(r=h.last,r!==null?r.sibling=m:t.child=m,h.last=m)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=bn(),t.sibling=null,r=Qr.current,Br(Qr,o?r&1|2:r&1),t):(bi(t),null);case 22:case 23:return xb(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?go&1073741824&&(bi(t),t.subtreeFlags&6&&(t.flags|=8192)):bi(t),null;case 24:return null;case 25:return null}throw Error(Ye(156,t.tag))}function u4(e,t){switch(eb(t),t.tag){case 1:return io(t.type)&&jg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _h(),Ur(no),Ur(Ti),cb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return lb(t),null;case 13:if(Ur(Qr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ye(340));yh()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ur(Qr),null;case 4:return _h(),null;case 10:return ib(t.type._context),null;case 22:case 23:return xb(),null;case 24:return null;default:return null}}var Km=!1,Si=!1,h4=typeof WeakSet=="function"?WeakSet:Set,_t=null;function Qu(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){un(e,t,o)}else r.current=null}function P1(e,t,r){try{r()}catch(o){un(e,t,o)}}var iC=!1;function d4(e,t){if(d1=Bg,e=lE(),Jx(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var l=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var m=0,c=-1,b=-1,k=0,A=0,R=e,O=null;t:for(;;){for(var Q;R!==r||l!==0&&R.nodeType!==3||(c=m+l),R!==h||o!==0&&R.nodeType!==3||(b=m+o),R.nodeType===3&&(m+=R.nodeValue.length),(Q=R.firstChild)!==null;)O=R,R=Q;for(;;){if(R===e)break t;if(O===r&&++k===l&&(c=m),O===h&&++A===o&&(b=m),(Q=R.nextSibling)!==null)break;R=O,O=R.parentNode}R=Q}r=c===-1||b===-1?null:{start:c,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(f1={focusedElem:e,selectionRange:r},Bg=!1,_t=t;_t!==null;)if(t=_t,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_t=e;else for(;_t!==null;){t=_t;try{var te=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(te!==null){var ee=te.memoizedProps,de=te.memoizedState,G=t.stateNode,j=G.getSnapshotBeforeUpdate(t.elementType===t.type?ee:Ss(t.type,ee),de);G.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var U=t.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ye(163))}}catch(fe){un(t,t.return,fe)}if(e=t.sibling,e!==null){e.return=t.return,_t=e;break}_t=t.return}return te=iC,iC=!1,te}function wf(e,t,r){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&e)===e){var h=l.destroy;l.destroy=void 0,h!==void 0&&P1(t,r,h)}l=l.next}while(l!==o)}}function d0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function A1(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function iI(e){var t=e.alternate;t!==null&&(e.alternate=null,iI(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ea],delete t[Gf],delete t[g1],delete t[ZR],delete t[KR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oI(e){return e.tag===5||e.tag===3||e.tag===4}function oC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||oI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function M1(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ng));else if(o!==4&&(e=e.child,e!==null))for(M1(e,t,r),e=e.sibling;e!==null;)M1(e,t,r),e=e.sibling}function z1(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(z1(e,t,r),e=e.sibling;e!==null;)z1(e,t,r),e=e.sibling}var oi=null,Cs=!1;function gl(e,t,r){for(r=r.child;r!==null;)sI(e,t,r),r=r.sibling}function sI(e,t,r){if(ia&&typeof ia.onCommitFiberUnmount=="function")try{ia.onCommitFiberUnmount(i0,r)}catch{}switch(r.tag){case 5:Si||Qu(r,t);case 6:var o=oi,l=Cs;oi=null,gl(e,t,r),oi=o,Cs=l,oi!==null&&(Cs?(e=oi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):oi.removeChild(r.stateNode));break;case 18:oi!==null&&(Cs?(e=oi,r=r.stateNode,e.nodeType===8?l_(e.parentNode,r):e.nodeType===1&&l_(e,r),Ff(e)):l_(oi,r.stateNode));break;case 4:o=oi,l=Cs,oi=r.stateNode.containerInfo,Cs=!0,gl(e,t,r),oi=o,Cs=l;break;case 0:case 11:case 14:case 15:if(!Si&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){l=o=o.next;do{var h=l,m=h.destroy;h=h.tag,m!==void 0&&(h&2||h&4)&&P1(r,t,m),l=l.next}while(l!==o)}gl(e,t,r);break;case 1:if(!Si&&(Qu(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(c){un(r,t,c)}gl(e,t,r);break;case 21:gl(e,t,r);break;case 22:r.mode&1?(Si=(o=Si)||r.memoizedState!==null,gl(e,t,r),Si=o):gl(e,t,r);break;default:gl(e,t,r)}}function sC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new h4),t.forEach(function(o){var l=b4.bind(null,e,o);r.has(o)||(r.add(o),o.then(l,l))})}}function xs(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var l=r[o];try{var h=e,m=t,c=m;e:for(;c!==null;){switch(c.tag){case 5:oi=c.stateNode,Cs=!1;break e;case 3:oi=c.stateNode.containerInfo,Cs=!0;break e;case 4:oi=c.stateNode.containerInfo,Cs=!0;break e}c=c.return}if(oi===null)throw Error(Ye(160));sI(h,m,l),oi=null,Cs=!1;var b=l.alternate;b!==null&&(b.return=null),l.return=null}catch(k){un(l,t,k)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)aI(t,e),t=t.sibling}function aI(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xs(t,e),Ks(e),o&4){try{wf(3,e,e.return),d0(3,e)}catch(ee){un(e,e.return,ee)}try{wf(5,e,e.return)}catch(ee){un(e,e.return,ee)}}break;case 1:xs(t,e),Ks(e),o&512&&r!==null&&Qu(r,r.return);break;case 5:if(xs(t,e),Ks(e),o&512&&r!==null&&Qu(r,r.return),e.flags&32){var l=e.stateNode;try{Rf(l,"")}catch(ee){un(e,e.return,ee)}}if(o&4&&(l=e.stateNode,l!=null)){var h=e.memoizedProps,m=r!==null?r.memoizedProps:h,c=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{c==="input"&&h.type==="radio"&&h.name!=null&&PT(l,h),r1(c,m);var k=r1(c,h);for(m=0;m<b.length;m+=2){var A=b[m],R=b[m+1];A==="style"?DT(l,R):A==="dangerouslySetInnerHTML"?zT(l,R):A==="children"?Rf(l,R):Fx(l,A,R,k)}switch(c){case"input":Y_(l,h);break;case"textarea":AT(l,h);break;case"select":var O=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!h.multiple;var Q=h.value;Q!=null?sh(l,!!h.multiple,Q,!1):O!==!!h.multiple&&(h.defaultValue!=null?sh(l,!!h.multiple,h.defaultValue,!0):sh(l,!!h.multiple,h.multiple?[]:"",!1))}l[Gf]=h}catch(ee){un(e,e.return,ee)}}break;case 6:if(xs(t,e),Ks(e),o&4){if(e.stateNode===null)throw Error(Ye(162));l=e.stateNode,h=e.memoizedProps;try{l.nodeValue=h}catch(ee){un(e,e.return,ee)}}break;case 3:if(xs(t,e),Ks(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Ff(t.containerInfo)}catch(ee){un(e,e.return,ee)}break;case 4:xs(t,e),Ks(e);break;case 13:xs(t,e),Ks(e),l=e.child,l.flags&8192&&(h=l.memoizedState!==null,l.stateNode.isHidden=h,!h||l.alternate!==null&&l.alternate.memoizedState!==null||(vb=bn())),o&4&&sC(e);break;case 22:if(A=r!==null&&r.memoizedState!==null,e.mode&1?(Si=(k=Si)||A,xs(t,e),Si=k):xs(t,e),Ks(e),o&8192){if(k=e.memoizedState!==null,(e.stateNode.isHidden=k)&&!A&&e.mode&1)for(_t=e,A=e.child;A!==null;){for(R=_t=A;_t!==null;){switch(O=_t,Q=O.child,O.tag){case 0:case 11:case 14:case 15:wf(4,O,O.return);break;case 1:Qu(O,O.return);var te=O.stateNode;if(typeof te.componentWillUnmount=="function"){o=O,r=O.return;try{t=o,te.props=t.memoizedProps,te.state=t.memoizedState,te.componentWillUnmount()}catch(ee){un(o,r,ee)}}break;case 5:Qu(O,O.return);break;case 22:if(O.memoizedState!==null){lC(R);continue}}Q!==null?(Q.return=O,_t=Q):lC(R)}A=A.sibling}e:for(A=null,R=e;;){if(R.tag===5){if(A===null){A=R;try{l=R.stateNode,k?(h=l.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(c=R.stateNode,b=R.memoizedProps.style,m=b!=null&&b.hasOwnProperty("display")?b.display:null,c.style.display=LT("display",m))}catch(ee){un(e,e.return,ee)}}}else if(R.tag===6){if(A===null)try{R.stateNode.nodeValue=k?"":R.memoizedProps}catch(ee){un(e,e.return,ee)}}else if((R.tag!==22&&R.tag!==23||R.memoizedState===null||R===e)&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===e)break e;for(;R.sibling===null;){if(R.return===null||R.return===e)break e;A===R&&(A=null),R=R.return}A===R&&(A=null),R.sibling.return=R.return,R=R.sibling}}break;case 19:xs(t,e),Ks(e),o&4&&sC(e);break;case 21:break;default:xs(t,e),Ks(e)}}function Ks(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(oI(r)){var o=r;break e}r=r.return}throw Error(Ye(160))}switch(o.tag){case 5:var l=o.stateNode;o.flags&32&&(Rf(l,""),o.flags&=-33);var h=oC(e);z1(e,h,l);break;case 3:case 4:var m=o.stateNode.containerInfo,c=oC(e);M1(e,c,m);break;default:throw Error(Ye(161))}}catch(b){un(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function f4(e,t,r){_t=e,lI(e)}function lI(e,t,r){for(var o=(e.mode&1)!==0;_t!==null;){var l=_t,h=l.child;if(l.tag===22&&o){var m=l.memoizedState!==null||Km;if(!m){var c=l.alternate,b=c!==null&&c.memoizedState!==null||Si;c=Km;var k=Si;if(Km=m,(Si=b)&&!k)for(_t=l;_t!==null;)m=_t,b=m.child,m.tag===22&&m.memoizedState!==null?cC(l):b!==null?(b.return=m,_t=b):cC(l);for(;h!==null;)_t=h,lI(h),h=h.sibling;_t=l,Km=c,Si=k}aC(e)}else l.subtreeFlags&8772&&h!==null?(h.return=l,_t=h):aC(e)}}function aC(e){for(;_t!==null;){var t=_t;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Si||d0(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Si)if(r===null)o.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:Ss(t.type,r.memoizedProps);o.componentDidUpdate(l,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&HS(t,h,o);break;case 3:var m=t.updateQueue;if(m!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}HS(t,m,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var k=t.alternate;if(k!==null){var A=k.memoizedState;if(A!==null){var R=A.dehydrated;R!==null&&Ff(R)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ye(163))}Si||t.flags&512&&A1(t)}catch(O){un(t,t.return,O)}}if(t===e){_t=null;break}if(r=t.sibling,r!==null){r.return=t.return,_t=r;break}_t=t.return}}function lC(e){for(;_t!==null;){var t=_t;if(t===e){_t=null;break}var r=t.sibling;if(r!==null){r.return=t.return,_t=r;break}_t=t.return}}function cC(e){for(;_t!==null;){var t=_t;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{d0(4,t)}catch(b){un(t,r,b)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var l=t.return;try{o.componentDidMount()}catch(b){un(t,l,b)}}var h=t.return;try{A1(t)}catch(b){un(t,h,b)}break;case 5:var m=t.return;try{A1(t)}catch(b){un(t,m,b)}}}catch(b){un(t,t.return,b)}if(t===e){_t=null;break}var c=t.sibling;if(c!==null){c.return=t.return,_t=c;break}_t=t.return}}var p4=Math.ceil,Yg=Ka.ReactCurrentDispatcher,gb=Ka.ReactCurrentOwner,Qo=Ka.ReactCurrentBatchConfig,ar=0,Kn=null,En=null,li=0,go=0,eh=Nl(0),On=0,Xf=null,Ac=0,f0=0,yb=0,Sf=null,to=null,vb=0,bh=1/0,Aa=null,Jg=!1,L1=null,Al=null,Xm=!1,Sl=null,Qg=0,Cf=0,D1=null,xg=-1,bg=0;function Ni(){return ar&6?bn():xg!==-1?xg:xg=bn()}function Ml(e){return e.mode&1?ar&2&&li!==0?li&-li:YR.transition!==null?(bg===0&&(bg=qT()),bg):(e=wr,e!==0||(e=window.event,e=e===void 0?16:QT(e.type)),e):1}function Is(e,t,r,o){if(50<Cf)throw Cf=0,D1=null,Error(Ye(185));up(e,r,o),(!(ar&2)||e!==Kn)&&(e===Kn&&(!(ar&2)&&(f0|=r),On===4&&xl(e,li)),oo(e,o),r===1&&ar===0&&!(t.mode&1)&&(bh=bn()+500,c0&&jl()))}function oo(e,t){var r=e.callbackNode;YD(e,t);var o=Og(e,e===Kn?li:0);if(o===0)r!==null&&vS(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(r!=null&&vS(r),t===1)e.tag===0?XR(uC.bind(null,e)):vE(uC.bind(null,e)),qR(function(){!(ar&6)&&jl()}),r=null;else{switch(WT(o)){case 1:r=Gx;break;case 4:r=GT;break;case 16:r=Rg;break;case 536870912:r=HT;break;default:r=Rg}r=gI(r,cI.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function cI(e,t){if(xg=-1,bg=0,ar&6)throw Error(Ye(327));var r=e.callbackNode;if(hh()&&e.callbackNode!==r)return null;var o=Og(e,e===Kn?li:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=ey(e,o);else{t=o;var l=ar;ar|=2;var h=hI();(Kn!==e||li!==t)&&(Aa=null,bh=bn()+500,Sc(e,t));do try{y4();break}catch(c){uI(e,c)}while(!0);nb(),Yg.current=h,ar=l,En!==null?t=0:(Kn=null,li=0,t=On)}if(t!==0){if(t===2&&(l=a1(e),l!==0&&(o=l,t=R1(e,l))),t===1)throw r=Xf,Sc(e,0),xl(e,o),oo(e,bn()),r;if(t===6)xl(e,o);else{if(l=e.current.alternate,!(o&30)&&!m4(l)&&(t=ey(e,o),t===2&&(h=a1(e),h!==0&&(o=h,t=R1(e,h))),t===1))throw r=Xf,Sc(e,0),xl(e,o),oo(e,bn()),r;switch(e.finishedWork=l,e.finishedLanes=o,t){case 0:case 1:throw Error(Ye(345));case 2:pc(e,to,Aa);break;case 3:if(xl(e,o),(o&130023424)===o&&(t=vb+500-bn(),10<t)){if(Og(e,0)!==0)break;if(l=e.suspendedLanes,(l&o)!==o){Ni(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=m1(pc.bind(null,e,to,Aa),t);break}pc(e,to,Aa);break;case 4:if(xl(e,o),(o&4194240)===o)break;for(t=e.eventTimes,l=-1;0<o;){var m=31-Es(o);h=1<<m,m=t[m],m>l&&(l=m),o&=~h}if(o=l,o=bn()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*p4(o/1960))-o,10<o){e.timeoutHandle=m1(pc.bind(null,e,to,Aa),o);break}pc(e,to,Aa);break;case 5:pc(e,to,Aa);break;default:throw Error(Ye(329))}}}return oo(e,bn()),e.callbackNode===r?cI.bind(null,e):null}function R1(e,t){var r=Sf;return e.current.memoizedState.isDehydrated&&(Sc(e,t).flags|=256),e=ey(e,t),e!==2&&(t=to,to=r,t!==null&&O1(t)),e}function O1(e){to===null?to=e:to.push.apply(to,e)}function m4(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var l=r[o],h=l.getSnapshot;l=l.value;try{if(!zs(h(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function xl(e,t){for(t&=~yb,t&=~f0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Es(t),o=1<<r;e[r]=-1,t&=~o}}function uC(e){if(ar&6)throw Error(Ye(327));hh();var t=Og(e,0);if(!(t&1))return oo(e,bn()),null;var r=ey(e,t);if(e.tag!==0&&r===2){var o=a1(e);o!==0&&(t=o,r=R1(e,o))}if(r===1)throw r=Xf,Sc(e,0),xl(e,t),oo(e,bn()),r;if(r===6)throw Error(Ye(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pc(e,to,Aa),oo(e,bn()),null}function _b(e,t){var r=ar;ar|=1;try{return e(t)}finally{ar=r,ar===0&&(bh=bn()+500,c0&&jl())}}function Mc(e){Sl!==null&&Sl.tag===0&&!(ar&6)&&hh();var t=ar;ar|=1;var r=Qo.transition,o=wr;try{if(Qo.transition=null,wr=1,e)return e()}finally{wr=o,Qo.transition=r,ar=t,!(ar&6)&&jl()}}function xb(){go=eh.current,Ur(eh)}function Sc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,HR(r)),En!==null)for(r=En.return;r!==null;){var o=r;switch(eb(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&jg();break;case 3:_h(),Ur(no),Ur(Ti),cb();break;case 5:lb(o);break;case 4:_h();break;case 13:Ur(Qr);break;case 19:Ur(Qr);break;case 10:ib(o.type._context);break;case 22:case 23:xb()}r=r.return}if(Kn=e,En=e=zl(e.current,null),li=go=t,On=0,Xf=null,yb=f0=Ac=0,to=Sf=null,bc!==null){for(t=0;t<bc.length;t++)if(r=bc[t],o=r.interleaved,o!==null){r.interleaved=null;var l=o.next,h=r.pending;if(h!==null){var m=h.next;h.next=l,o.next=m}r.pending=o}bc=null}return e}function uI(e,t){do{var r=En;try{if(nb(),yg.current=Xg,Kg){for(var o=en.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}Kg=!1}if(Pc=0,Hn=Rn=en=null,bf=!1,Wf=0,gb.current=null,r===null||r.return===null){On=1,Xf=t,En=null;break}e:{var h=e,m=r.return,c=r,b=t;if(t=li,c.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var k=b,A=c,R=A.tag;if(!(A.mode&1)&&(R===0||R===11||R===15)){var O=A.alternate;O?(A.updateQueue=O.updateQueue,A.memoizedState=O.memoizedState,A.lanes=O.lanes):(A.updateQueue=null,A.memoizedState=null)}var Q=YS(m);if(Q!==null){Q.flags&=-257,JS(Q,m,c,h,t),Q.mode&1&&XS(h,k,t),t=Q,b=k;var te=t.updateQueue;if(te===null){var ee=new Set;ee.add(b),t.updateQueue=ee}else te.add(b);break e}else{if(!(t&1)){XS(h,k,t),bb();break e}b=Error(Ye(426))}}else if(Zr&&c.mode&1){var de=YS(m);if(de!==null){!(de.flags&65536)&&(de.flags|=256),JS(de,m,c,h,t),tb(xh(b,c));break e}}h=b=xh(b,c),On!==4&&(On=2),Sf===null?Sf=[h]:Sf.push(h),h=m;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var G=WE(h,b,t);GS(h,G);break e;case 1:c=b;var j=h.type,U=h.stateNode;if(!(h.flags&128)&&(typeof j.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Al===null||!Al.has(U)))){h.flags|=65536,t&=-t,h.lanes|=t;var fe=ZE(h,c,t);GS(h,fe);break e}}h=h.return}while(h!==null)}fI(r)}catch(ie){t=ie,En===r&&r!==null&&(En=r=r.return);continue}break}while(!0)}function hI(){var e=Yg.current;return Yg.current=Xg,e===null?Xg:e}function bb(){(On===0||On===3||On===2)&&(On=4),Kn===null||!(Ac&268435455)&&!(f0&268435455)||xl(Kn,li)}function ey(e,t){var r=ar;ar|=2;var o=hI();(Kn!==e||li!==t)&&(Aa=null,Sc(e,t));do try{g4();break}catch(l){uI(e,l)}while(!0);if(nb(),ar=r,Yg.current=o,En!==null)throw Error(Ye(261));return Kn=null,li=0,On}function g4(){for(;En!==null;)dI(En)}function y4(){for(;En!==null&&!VD();)dI(En)}function dI(e){var t=mI(e.alternate,e,go);e.memoizedProps=e.pendingProps,t===null?fI(e):En=t,gb.current=null}function fI(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=u4(r,t),r!==null){r.flags&=32767,En=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{On=6,En=null;return}}else if(r=c4(r,t,go),r!==null){En=r;return}if(t=t.sibling,t!==null){En=t;return}En=t=e}while(t!==null);On===0&&(On=5)}function pc(e,t,r){var o=wr,l=Qo.transition;try{Qo.transition=null,wr=1,v4(e,t,r,o)}finally{Qo.transition=l,wr=o}return null}function v4(e,t,r,o){do hh();while(Sl!==null);if(ar&6)throw Error(Ye(327));r=e.finishedWork;var l=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ye(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(JD(e,h),e===Kn&&(En=Kn=null,li=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Xm||(Xm=!0,gI(Rg,function(){return hh(),null})),h=(r.flags&15990)!==0,r.subtreeFlags&15990||h){h=Qo.transition,Qo.transition=null;var m=wr;wr=1;var c=ar;ar|=4,gb.current=null,d4(e,r),aI(r,e),$R(f1),Bg=!!d1,f1=d1=null,e.current=r,f4(r),UD(),ar=c,wr=m,Qo.transition=h}else e.current=r;if(Xm&&(Xm=!1,Sl=e,Qg=l),h=e.pendingLanes,h===0&&(Al=null),qD(r.stateNode),oo(e,bn()),t!==null)for(o=e.onRecoverableError,r=0;r<t.length;r++)l=t[r],o(l.value,{componentStack:l.stack,digest:l.digest});if(Jg)throw Jg=!1,e=L1,L1=null,e;return Qg&1&&e.tag!==0&&hh(),h=e.pendingLanes,h&1?e===D1?Cf++:(Cf=0,D1=e):Cf=0,jl(),null}function hh(){if(Sl!==null){var e=WT(Qg),t=Qo.transition,r=wr;try{if(Qo.transition=null,wr=16>e?16:e,Sl===null)var o=!1;else{if(e=Sl,Sl=null,Qg=0,ar&6)throw Error(Ye(331));var l=ar;for(ar|=4,_t=e.current;_t!==null;){var h=_t,m=h.child;if(_t.flags&16){var c=h.deletions;if(c!==null){for(var b=0;b<c.length;b++){var k=c[b];for(_t=k;_t!==null;){var A=_t;switch(A.tag){case 0:case 11:case 15:wf(8,A,h)}var R=A.child;if(R!==null)R.return=A,_t=R;else for(;_t!==null;){A=_t;var O=A.sibling,Q=A.return;if(iI(A),A===k){_t=null;break}if(O!==null){O.return=Q,_t=O;break}_t=Q}}}var te=h.alternate;if(te!==null){var ee=te.child;if(ee!==null){te.child=null;do{var de=ee.sibling;ee.sibling=null,ee=de}while(ee!==null)}}_t=h}}if(h.subtreeFlags&2064&&m!==null)m.return=h,_t=m;else e:for(;_t!==null;){if(h=_t,h.flags&2048)switch(h.tag){case 0:case 11:case 15:wf(9,h,h.return)}var G=h.sibling;if(G!==null){G.return=h.return,_t=G;break e}_t=h.return}}var j=e.current;for(_t=j;_t!==null;){m=_t;var U=m.child;if(m.subtreeFlags&2064&&U!==null)U.return=m,_t=U;else e:for(m=j;_t!==null;){if(c=_t,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:d0(9,c)}}catch(ie){un(c,c.return,ie)}if(c===m){_t=null;break e}var fe=c.sibling;if(fe!==null){fe.return=c.return,_t=fe;break e}_t=c.return}}if(ar=l,jl(),ia&&typeof ia.onPostCommitFiberRoot=="function")try{ia.onPostCommitFiberRoot(i0,e)}catch{}o=!0}return o}finally{wr=r,Qo.transition=t}}return!1}function hC(e,t,r){t=xh(r,t),t=WE(e,t,1),e=Pl(e,t,1),t=Ni(),e!==null&&(up(e,1,t),oo(e,t))}function un(e,t,r){if(e.tag===3)hC(e,e,r);else for(;t!==null;){if(t.tag===3){hC(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Al===null||!Al.has(o))){e=xh(r,e),e=ZE(t,e,1),t=Pl(t,e,1),e=Ni(),t!==null&&(up(t,1,e),oo(t,e));break}}t=t.return}}function _4(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),t=Ni(),e.pingedLanes|=e.suspendedLanes&r,Kn===e&&(li&r)===r&&(On===4||On===3&&(li&130023424)===li&&500>bn()-vb?Sc(e,0):yb|=r),oo(e,t)}function pI(e,t){t===0&&(e.mode&1?(t=Nm,Nm<<=1,!(Nm&130023424)&&(Nm=4194304)):t=1);var r=Ni();e=Ga(e,t),e!==null&&(up(e,t,r),oo(e,r))}function x4(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),pI(e,r)}function b4(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(Ye(314))}o!==null&&o.delete(t),pI(e,r)}var mI;mI=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||no.current)ro=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ro=!1,l4(e,t,r);ro=!!(e.flags&131072)}else ro=!1,Zr&&t.flags&1048576&&_E(t,Gg,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;_g(e,t),e=t.pendingProps;var l=gh(t,Ti.current);uh(t,r),l=hb(null,t,o,e,l,r);var h=db();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,io(o)?(h=!0,Vg(t)):h=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,sb(t),l.updater=h0,t.stateNode=l,l._reactInternals=t,w1(t,o,e,r),t=k1(null,t,o,!0,h,r)):(t.tag=0,Zr&&h&&Qx(t),Fi(null,t,l,r),t=t.child),t;case 16:o=t.elementType;e:{switch(_g(e,t),e=t.pendingProps,l=o._init,o=l(o._payload),t.type=o,l=t.tag=S4(o),e=Ss(o,e),l){case 0:t=C1(null,t,o,e,r);break e;case 1:t=tC(null,t,o,e,r);break e;case 11:t=QS(null,t,o,e,r);break e;case 14:t=eC(null,t,o,Ss(o.type,e),r);break e}throw Error(Ye(306,o,""))}return t;case 0:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Ss(o,l),C1(e,t,o,l,r);case 1:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Ss(o,l),tC(e,t,o,l,r);case 3:e:{if(JE(t),e===null)throw Error(Ye(387));o=t.pendingProps,h=t.memoizedState,l=h.element,kE(e,t),Wg(t,o,null,r);var m=t.memoizedState;if(o=m.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){l=xh(Error(Ye(423)),t),t=rC(e,t,o,r,l);break e}else if(o!==l){l=xh(Error(Ye(424)),t),t=rC(e,t,o,r,l);break e}else for(Co=Il(t.stateNode.containerInfo.firstChild),Eo=t,Zr=!0,ks=null,r=SE(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(yh(),o===l){t=Ha(e,t,r);break e}Fi(e,t,o,r)}t=t.child}return t;case 5:return TE(t),e===null&&_1(t),o=t.type,l=t.pendingProps,h=e!==null?e.memoizedProps:null,m=l.children,p1(o,l)?m=null:h!==null&&p1(o,h)&&(t.flags|=32),YE(e,t),Fi(e,t,m,r),t.child;case 6:return e===null&&_1(t),null;case 13:return QE(e,t,r);case 4:return ab(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=vh(t,null,o,r):Fi(e,t,o,r),t.child;case 11:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Ss(o,l),QS(e,t,o,l,r);case 7:return Fi(e,t,t.pendingProps,r),t.child;case 8:return Fi(e,t,t.pendingProps.children,r),t.child;case 12:return Fi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,l=t.pendingProps,h=t.memoizedProps,m=l.value,Br(Hg,o._currentValue),o._currentValue=m,h!==null)if(zs(h.value,m)){if(h.children===l.children&&!no.current){t=Ha(e,t,r);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var c=h.dependencies;if(c!==null){m=h.child;for(var b=c.firstContext;b!==null;){if(b.context===o){if(h.tag===1){b=Fa(-1,r&-r),b.tag=2;var k=h.updateQueue;if(k!==null){k=k.shared;var A=k.pending;A===null?b.next=b:(b.next=A.next,A.next=b),k.pending=b}}h.lanes|=r,b=h.alternate,b!==null&&(b.lanes|=r),x1(h.return,r,t),c.lanes|=r;break}b=b.next}}else if(h.tag===10)m=h.type===t.type?null:h.child;else if(h.tag===18){if(m=h.return,m===null)throw Error(Ye(341));m.lanes|=r,c=m.alternate,c!==null&&(c.lanes|=r),x1(m,r,t),m=h.sibling}else m=h.child;if(m!==null)m.return=h;else for(m=h;m!==null;){if(m===t){m=null;break}if(h=m.sibling,h!==null){h.return=m.return,m=h;break}m=m.return}h=m}Fi(e,t,l.children,r),t=t.child}return t;case 9:return l=t.type,o=t.pendingProps.children,uh(t,r),l=es(l),o=o(l),t.flags|=1,Fi(e,t,o,r),t.child;case 14:return o=t.type,l=Ss(o,t.pendingProps),l=Ss(o.type,l),eC(e,t,o,l,r);case 15:return KE(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Ss(o,l),_g(e,t),t.tag=1,io(o)?(e=!0,Vg(t)):e=!1,uh(t,r),qE(t,o,l),w1(t,o,l,r),k1(null,t,o,!0,e,r);case 19:return eI(e,t,r);case 22:return XE(e,t,r)}throw Error(Ye(156,t.tag))};function gI(e,t){return UT(e,t)}function w4(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xo(e,t,r,o){return new w4(e,t,r,o)}function wb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function S4(e){if(typeof e=="function")return wb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jx)return 11;if(e===Vx)return 14}return 2}function zl(e,t){var r=e.alternate;return r===null?(r=Xo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function wg(e,t,r,o,l,h){var m=2;if(o=e,typeof e=="function")wb(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case Gu:return Cc(r.children,l,h,t);case Nx:m=8,l|=8;break;case q_:return e=Xo(12,r,t,l|2),e.elementType=q_,e.lanes=h,e;case W_:return e=Xo(13,r,t,l),e.elementType=W_,e.lanes=h,e;case Z_:return e=Xo(19,r,t,l),e.elementType=Z_,e.lanes=h,e;case TT:return p0(r,l,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case CT:m=10;break e;case kT:m=9;break e;case jx:m=11;break e;case Vx:m=14;break e;case yl:m=16,o=null;break e}throw Error(Ye(130,e==null?e:typeof e,""))}return t=Xo(m,r,t,l),t.elementType=e,t.type=o,t.lanes=h,t}function Cc(e,t,r,o){return e=Xo(7,e,o,t),e.lanes=r,e}function p0(e,t,r,o){return e=Xo(22,e,o,t),e.elementType=TT,e.lanes=r,e.stateNode={isHidden:!1},e}function g_(e,t,r){return e=Xo(6,e,null,t),e.lanes=r,e}function y_(e,t,r){return t=Xo(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function C4(e,t,r,o,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yv(0),this.expirationTimes=Yv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yv(0),this.identifierPrefix=o,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Sb(e,t,r,o,l,h,m,c,b){return e=new C4(e,t,r,c,b),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Xo(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},sb(h),e}function k4(e,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uu,key:o==null?null:""+o,children:e,containerInfo:t,implementation:r}}function yI(e){if(!e)return Ol;e=e._reactInternals;e:{if($c(e)!==e||e.tag!==1)throw Error(Ye(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(io(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ye(171))}if(e.tag===1){var r=e.type;if(io(r))return yE(e,r,t)}return t}function vI(e,t,r,o,l,h,m,c,b){return e=Sb(r,o,!0,e,l,h,m,c,b),e.context=yI(null),r=e.current,o=Ni(),l=Ml(r),h=Fa(o,l),h.callback=t??null,Pl(r,h,l),e.current.lanes=l,up(e,l,o),oo(e,o),e}function m0(e,t,r,o){var l=t.current,h=Ni(),m=Ml(l);return r=yI(r),t.context===null?t.context=r:t.pendingContext=r,t=Fa(h,m),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=Pl(l,t,m),e!==null&&(Is(e,l,m,h),gg(e,l,m)),m}function ty(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Cb(e,t){dC(e,t),(e=e.alternate)&&dC(e,t)}var _I=typeof reportError=="function"?reportError:function(e){console.error(e)};function kb(e){this._internalRoot=e}g0.prototype.render=kb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ye(409));m0(e,t,null,null)};g0.prototype.unmount=kb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mc(function(){m0(null,e,null,null)}),t[Ua]=null}};function g0(e){this._internalRoot=e}g0.prototype.unstable_scheduleHydration=function(e){if(e){var t=XT();e={blockedOn:null,target:e,priority:t};for(var r=0;r<_l.length&&t!==0&&t<_l[r].priority;r++);_l.splice(r,0,e),r===0&&JT(e)}};function Tb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function y0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fC(){}function T4(e,t,r,o,l){if(l){if(typeof o=="function"){var h=o;o=function(){var k=ty(m);h.call(k)}}var m=vI(t,o,e,0,null,!1,!1,"",fC);return e._reactRootContainer=m,e[Ua]=m.current,Vf(e.nodeType===8?e.parentNode:e),Mc(),m}for(;l=e.lastChild;)e.removeChild(l);if(typeof o=="function"){var c=o;o=function(){var k=ty(b);c.call(k)}}var b=Sb(e,0,!1,null,null,!1,!1,"",fC);return e._reactRootContainer=b,e[Ua]=b.current,Vf(e.nodeType===8?e.parentNode:e),Mc(function(){m0(t,b,r,o)}),b}function v0(e,t,r,o,l){var h=r._reactRootContainer;if(h){var m=h;if(typeof l=="function"){var c=l;l=function(){var b=ty(m);c.call(b)}}m0(t,m,e,l)}else m=T4(r,t,e,l,o);return ty(m)}ZT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=uf(t.pendingLanes);r!==0&&(Hx(t,r|1),oo(t,bn()),!(ar&6)&&(bh=bn()+500,jl()))}break;case 13:Mc(function(){var o=Ga(e,1);if(o!==null){var l=Ni();Is(o,e,1,l)}}),Cb(e,1)}};qx=function(e){if(e.tag===13){var t=Ga(e,134217728);if(t!==null){var r=Ni();Is(t,e,134217728,r)}Cb(e,134217728)}};KT=function(e){if(e.tag===13){var t=Ml(e),r=Ga(e,t);if(r!==null){var o=Ni();Is(r,e,t,o)}Cb(e,t)}};XT=function(){return wr};YT=function(e,t){var r=wr;try{return wr=e,t()}finally{wr=r}};i1=function(e,t,r){switch(t){case"input":if(Y_(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var l=l0(o);if(!l)throw Error(Ye(90));IT(o),Y_(o,l)}}}break;case"textarea":AT(e,r);break;case"select":t=r.value,t!=null&&sh(e,!!r.multiple,t,!1)}};BT=_b;$T=Mc;var E4={usingClientEntryPoint:!1,Events:[dp,Zu,l0,RT,OT,_b]},rf={findFiberByHostInstance:xc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I4={bundleType:rf.bundleType,version:rf.version,rendererPackageName:rf.rendererPackageName,rendererConfig:rf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=jT(e),e===null?null:e.stateNode},findFiberByHostInstance:rf.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ym=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ym.isDisabled&&Ym.supportsFiber)try{i0=Ym.inject(I4),ia=Ym}catch{}}Ao.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E4;Ao.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tb(t))throw Error(Ye(200));return k4(e,t,null,r)};Ao.createRoot=function(e,t){if(!Tb(e))throw Error(Ye(299));var r=!1,o="",l=_I;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Sb(e,1,!1,null,null,r,!1,o,l),e[Ua]=t.current,Vf(e.nodeType===8?e.parentNode:e),new kb(t)};Ao.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ye(188)):(e=Object.keys(e).join(","),Error(Ye(268,e)));return e=jT(t),e=e===null?null:e.stateNode,e};Ao.flushSync=function(e){return Mc(e)};Ao.hydrate=function(e,t,r){if(!y0(t))throw Error(Ye(200));return v0(null,e,t,!0,r)};Ao.hydrateRoot=function(e,t,r){if(!Tb(e))throw Error(Ye(405));var o=r!=null&&r.hydratedSources||null,l=!1,h="",m=_I;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),t=vI(t,null,e,1,r??null,l,!1,h,m),e[Ua]=t.current,Vf(e),o)for(e=0;e<o.length;e++)r=o[e],l=r._getVersion,l=l(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,l]:t.mutableSourceEagerHydrationData.push(r,l);return new g0(t)};Ao.render=function(e,t,r){if(!y0(t))throw Error(Ye(200));return v0(null,e,t,!1,r)};Ao.unmountComponentAtNode=function(e){if(!y0(e))throw Error(Ye(40));return e._reactRootContainer?(Mc(function(){v0(null,null,e,!1,function(){e._reactRootContainer=null,e[Ua]=null})}),!0):!1};Ao.unstable_batchedUpdates=_b;Ao.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!y0(r))throw Error(Ye(200));if(e==null||e._reactInternals===void 0)throw Error(Ye(38));return v0(e,t,r,!1,o)};Ao.version="18.3.1-next-f1338f8080-20240426";function xI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xI)}catch(e){console.error(e)}}xI(),xT.exports=Ao;var pp=xT.exports;const Jm=by(pp),P4=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],A4=["component","slots","slotProps"],M4=["component"];function hn(e,t){const{className:r,elementType:o,ownerState:l,externalForwardedProps:h,getSlotOwnerState:m,internalForwardedProps:c}=t,b=Wt(t,P4),{component:k,slots:A={[e]:void 0},slotProps:R={[e]:void 0}}=h,O=Wt(h,A4),Q=A[e]||o,te=$L(R[e],l),ee=BL(ge({className:r},b,{externalForwardedProps:e==="root"?O:void 0,externalSlotProps:te})),{props:{component:de},internalRef:G}=ee,j=Wt(ee.props,M4),U=$l(G,te==null?void 0:te.ref,t.ref),fe=m?m(j):{},ie=ge({},l,fe),F=e==="root"?de||k:de,ce=OL(Q,ge({},e==="root"&&!k&&!A[e]&&c,e!=="root"&&!A[e]&&c,j,F&&{as:F},{ref:U}),ie);return Object.keys(fe).forEach(Ce=>{delete ce[Ce]}),[Q,ce]}function z4(e){return os("MuiListItem",e)}const bI=Rs("MuiListItem",["root","startAction","endAction","nested","nesting","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]),ry=pe.createContext(!1),_0=pe.createContext(!1),wI=pe.createContext(!1),Eb=pe.createContext(void 0),L4=pe.createContext(void 0),SI=pe.createContext(void 0),D4=["component","className","children","nested","sticky","variant","color","startAction","endAction","role","slots","slotProps"],R4=e=>{const{sticky:t,nested:r,nesting:o,variant:l,color:h}=e,m={root:["root",r&&"nested",o&&"nesting",t&&"sticky",h&&`color${cr(h)}`,l&&`variant${cr(l)}`],startAction:["startAction"],endAction:["endAction"]};return lo(m,z4,{})},O4=Er("li")(({theme:e,ownerState:t})=>{var r;return[!t.nested&&{"--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItemButton-marginBlock":"calc(-1 * var(--ListItem-paddingY))",alignItems:"center",gap:"var(--ListItem-gap)",marginInline:"var(--ListItem-marginInline)"},t.nested&&{"--NestedList-marginRight":"calc(-1 * var(--ListItem-paddingRight))","--NestedList-marginLeft":"calc(-1 * var(--ListItem-paddingLeft))","--NestedListItem-paddingLeft":"calc(var(--ListItem-paddingLeft) + var(--List-nestedInsetStart))","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItem-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))",flexDirection:"column"},ge({"--unstable_actionRadius":"calc(var(--ListItem-radius) - var(--variant-borderWidth, 0px))"},t.startAction&&{"--unstable_startActionWidth":"2rem"},t.endAction&&{"--unstable_endActionWidth":"2.5rem"},{boxSizing:"border-box",borderRadius:"var(--ListItem-radius)",display:"var(--_ListItem-display)","&:not([hidden])":{"--_ListItem-display":"var(--_List-markerDisplay, flex)"},flex:"none",listStyleType:"var(--_List-markerType, disc)",position:"relative",paddingBlockStart:t.nested?0:"var(--ListItem-paddingY)",paddingBlockEnd:t.nested?0:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)"},t["data-first-child"]===void 0&&ge({},t.row?{marginInlineStart:"var(--List-gap)"}:{marginBlockStart:"var(--List-gap)"}),t.row&&t.wrap&&{marginInlineStart:"var(--List-gap)",marginBlockStart:"var(--List-gap)"},{minBlockSize:"var(--ListItem-minHeight)"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:`var(--ListItem-stickyBackground, ${e.vars.palette.background.body})`},{[`.${bI.nested} > &`]:{"--_ListItem-display":"flex"}}),(r=e.variants[t.variant])==null?void 0:r[t.color]]}),B4=Er(O4,{name:"JoyListItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),$4=Er("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",left:0,transform:"translate(var(--ListItem-startActionTranslateX), -50%)",zIndex:1})),F4=Er("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",right:0,transform:"translate(var(--ListItem-endActionTranslateX), -50%)"})),Ib=pe.forwardRef(function(t,r){const o=ss({props:t,name:"JoyListItem"}),l=pe.useContext(SI),h=pe.useContext(Eb),m=pe.useContext(_0),c=pe.useContext(wI),b=pe.useContext(ry),{component:k,className:A,children:R,nested:O=!1,sticky:Q=!1,variant:te="plain",color:ee="neutral",startAction:de,endAction:G,role:j,slots:U={},slotProps:fe={}}=o,ie=Wt(o,D4),[F,ce]=pe.useState(""),[Ce,Ue]=(h==null?void 0:h.split(":"))||["",""],Ae=k||(Ce&&!Ce.match(/^(ul|ol|menu)$/)?"div":void 0);let Re=l==="menu"?"none":void 0;h&&(Re={menu:"none",menubar:"none",group:"presentation"}[Ue]),j&&(Re=j);const We=ge({},o,{sticky:Q,startAction:de,endAction:G,row:m,wrap:c,variant:te,color:ee,nesting:b,nested:O,component:Ae,role:Re}),He=R4(We),Ze=ge({},ie,{component:Ae,slots:U,slotProps:fe}),[Ge,Fe]=hn("root",{additionalProps:{role:Re},ref:r,className:ao(He.root,A),elementType:B4,externalForwardedProps:Ze,ownerState:We}),[ot,Pe]=hn("startAction",{className:He.startAction,elementType:$4,externalForwardedProps:Ze,ownerState:We}),[st,yt]=hn("endAction",{className:He.endAction,elementType:F4,externalForwardedProps:Ze,ownerState:We});return W.jsx(L4.Provider,{value:ce,children:W.jsx(ry.Provider,{value:O?F||!0:!1,children:W.jsxs(Ge,ge({},Fe,{children:[de&&W.jsx(ot,ge({},Pe,{children:de})),pe.Children.map(R,(Et,mt)=>{var Dt;return pe.isValidElement(Et)?pe.cloneElement(Et,ge({},mt===0&&{"data-first-child":""},zx(Et,["ListItem"])&&{component:((Dt=Et.props)==null?void 0:Dt.component)||"div"})):Et}),G&&W.jsx(st,ge({},yt,{children:G}))]}))})})});Ib.muiName="ListItem";function N4(e){const{children:t,nested:r,row:o=!1,wrap:l=!1}=e,h=W.jsx(_0.Provider,{value:o,children:W.jsx(wI.Provider,{value:l,children:pe.Children.map(t,(m,c)=>pe.isValidElement(m)?pe.cloneElement(m,ge({},c===0&&{"data-first-child":""},c===pe.Children.count(t)-1&&{"data-last-child":""})):m)})});return r===void 0?h:W.jsx(ry.Provider,{value:r,children:h})}const Pb=({theme:e,ownerState:t},r)=>{let o={};function l(h){if(typeof h=="function"){const m=h(e);l(m)}else Array.isArray(h)?h.forEach(m=>{typeof m!="boolean"&&l(m)}):typeof h=="object"&&(o=ge({},o,h))}return t.sx&&(l(t.sx),r.forEach(h=>{const m=o[h];if(typeof m=="string"||typeof m=="number")if(h==="borderRadius")if(typeof m=="number")o[h]=`${m}px`;else{var c;o[h]=((c=e.vars)==null?void 0:c.radius[m])||m}else["p","padding","m","margin"].indexOf(h)!==-1&&typeof m=="number"?o[h]=e.spacing(m):o[h]=m;else typeof m=="function"?o[h]=m(e):o[h]=void 0})),o};function j4(e){return os("MuiList",e)}Rs("MuiList",["root","nesting","scoped","sizeSm","sizeMd","sizeLg","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","horizontal","vertical"]);const V4=pe.createContext(void 0),U4=["component","className","children","size","orientation","wrap","variant","color","role","slots","slotProps"],G4=e=>{const{variant:t,color:r,size:o,nesting:l,orientation:h,instanceSize:m}=e,c={root:["root",h,t&&`variant${cr(t)}`,r&&`color${cr(r)}`,!m&&!l&&o&&`size${cr(o)}`,m&&`size${cr(m)}`,l&&"nesting"]};return lo(c,j4,{})},H4=Er("ul")(({theme:e,ownerState:t})=>{var r;const{p:o,padding:l,borderRadius:h}=Pb({theme:e,ownerState:t},["p","padding","borderRadius"]);function m(c){return c==="sm"?{"--ListDivider-gap":"0.25rem","--ListItem-minHeight":"2rem","--ListItem-paddingY":"3px","--ListItem-paddingX":t.marker?"3px":"0.5rem","--ListItem-gap":"0.5rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.5rem":"2rem","--Icon-fontSize":e.vars.fontSize.lg}:c==="md"?{"--ListDivider-gap":"0.375rem","--ListItem-minHeight":"2.25rem","--ListItem-paddingY":"0.25rem","--ListItem-paddingX":t.marker?"0.25rem":"0.75rem","--ListItem-gap":"0.625rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.75rem":"2.5rem","--Icon-fontSize":e.vars.fontSize.xl}:c==="lg"?{"--ListDivider-gap":"0.5rem","--ListItem-minHeight":"2.75rem","--ListItem-paddingY":"0.375rem","--ListItem-paddingX":t.marker?"0.5rem":"1rem","--ListItem-gap":"0.75rem","--ListItemDecorator-size":t.orientation==="horizontal"?"2.25rem":"3rem","--Icon-fontSize":e.vars.fontSize.xl2}:{}}return[t.nesting&&ge({},m(t.instanceSize),{"--ListItem-paddingRight":"var(--ListItem-paddingX)","--ListItem-paddingLeft":"var(--NestedListItem-paddingLeft)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px",padding:0},t.marker&&{paddingInlineStart:"calc(3ch - var(--_List-markerDeduct, 0px))"},{marginInlineStart:"var(--NestedList-marginLeft)",marginInlineEnd:"var(--NestedList-marginRight)",marginBlockStart:"var(--List-gap)",marginBlockEnd:"initial"}),!t.nesting&&ge({},m(t.size),{"--List-gap":"0px","--List-nestedInsetStart":"0px","--ListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItem-paddingRight":"var(--ListItem-paddingX)"},t.marker&&{"--_List-markerDeduct":"1ch"},{"--unstable_List-childRadius":"calc(max(var(--List-radius) - var(--List-padding), min(var(--List-padding) / 2, var(--List-radius) / 2)) - var(--variant-borderWidth, 0px))","--ListItem-radius":"var(--unstable_List-childRadius)","--ListItem-startActionTranslateX":"calc(0.5 * var(--ListItem-paddingLeft))","--ListItem-endActionTranslateX":"calc(-0.5 * var(--ListItem-paddingRight))",margin:"initial"},e.typography[`body-${t.size}`],t.orientation==="horizontal"?ge({},t.wrap?{padding:"var(--List-padding)",marginInlineStart:"calc(-1 * var(--List-gap))",marginBlockStart:"calc(-1 * var(--List-gap))"}:{paddingInline:"var(--List-padding, var(--ListDivider-gap))",paddingBlock:"var(--List-padding)"}):{paddingBlock:"var(--List-padding, var(--ListDivider-gap))",paddingInline:"var(--List-padding)"},t.marker&&{paddingInlineStart:"3ch"}),ge({boxSizing:"border-box",borderRadius:"var(--List-radius)",listStyle:"none",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},t.wrap&&{flexWrap:"wrap"},t.marker&&{"--_List-markerDisplay":"list-item","--_List-markerType":t.marker,lineHeight:"calc(var(--ListItem-minHeight) - 2 * var(--ListItem-paddingY))"},{flexGrow:1,position:"relative"},(r=e.variants[t.variant])==null?void 0:r[t.color],{"--unstable_List-borderWidth":"var(--variant-borderWidth, 0px)"},h!==void 0&&{"--List-radius":h},o!==void 0&&{"--List-padding":o},l!==void 0&&{"--List-padding":l})]}),q4=Er(H4,{name:"JoyList",slot:"Root",overridesResolver:(e,t)=>t.root})({}),CI=pe.forwardRef(function(t,r){var o;const l=pe.useContext(ry),h=pe.useContext(SI),m=pe.useContext(V4),c=ss({props:t,name:"JoyList"}),{component:b,className:k,children:A,size:R,orientation:O="vertical",wrap:Q=!1,variant:te="plain",color:ee="neutral",role:de,slots:G={},slotProps:j={}}=c,U=Wt(c,U4),fe=R||((o=t.size)!=null?o:"md");let ie;h&&(ie="group"),m&&(ie="presentation"),de&&(ie=de);const F=ge({},c,{instanceSize:t.size,size:fe,nesting:l,orientation:O,wrap:Q,variant:te,color:ee,role:ie}),ce=G4(F),Ce=ge({},U,{component:b,slots:G,slotProps:j}),[Ue,Ae]=hn("root",{ref:r,className:ao(ce.root,k),elementType:q4,externalForwardedProps:Ce,ownerState:F,additionalProps:{as:b,role:ie,"aria-labelledby":typeof l=="string"?l:void 0}});return W.jsx(Ue,ge({},Ae,{children:W.jsx(Eb.Provider,{value:`${typeof b=="string"?b:""}:${ie||""}`,children:W.jsx(N4,{row:O==="horizontal",wrap:Q,children:A})})}))});function W4(e){return os("MuiListItemButton",e)}const Sg=Rs("MuiListItemButton",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","variantPlain","variantSoft","variantOutlined","variantSolid"]),Z4=pe.createContext("horizontal"),K4=["children","className","action","component","orientation","role","selected","color","variant","slots","slotProps"],X4=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:l,selected:h,variant:m}=e,c={root:["root",r&&"disabled",o&&"focusVisible",t&&`color${cr(t)}`,h&&"selected",m&&`variant${cr(m)}`]},b=lo(c,W4,{});return o&&l&&(b.root+=` ${l}`),b},Y4=Er("div")(({theme:e,ownerState:t})=>{var r,o,l,h,m,c;return ge({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",font:"inherit",display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"stretch",gap:"var(--ListItem-gap)"},t.orientation==="vertical"&&{flexDirection:"column",justifyContent:"center"},{textAlign:"initial",textDecoration:"initial",backgroundColor:"initial",cursor:"pointer",marginInline:"var(--ListItemButton-marginInline)",marginBlock:"var(--ListItemButton-marginBlock)"},t["data-first-child"]===void 0&&{marginInlineStart:t.row?"var(--List-gap)":void 0,marginBlockStart:t.row?void 0:"var(--List-gap)"},{paddingBlock:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px))",paddingInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItem-startActionWidth, var(--unstable_startActionWidth, 0px)))",paddingInlineEnd:"calc(var(--ListItem-paddingRight) + var(--ListItem-endActionWidth, var(--unstable_endActionWidth, 0px)))",minBlockSize:"var(--ListItem-minHeight)",border:"1px solid transparent",borderRadius:"var(--ListItem-radius)",flex:"var(--unstable_ListItem-flex, none)",fontSize:"inherit",lineHeight:"inherit",minInlineSize:0,[e.focus.selector]:ge({},e.focus.default,{zIndex:1})},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:active":(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color],[`.${bI.root} > &`]:{"--unstable_ListItem-flex":"1 0 0%"},[`&.${Sg.selected}`]:ge({},(l=e.variants[`${t.variant}Active`])==null?void 0:l[t.color],{"--Icon-color":"currentColor"}),[`&:not(.${Sg.selected}, [aria-selected="true"])`]:{"&:hover":(h=e.variants[`${t.variant}Hover`])==null?void 0:h[t.color],"&:active":(m=e.variants[`${t.variant}Active`])==null?void 0:m[t.color]},[`&.${Sg.disabled}`]:ge({},(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color])})}),J4=Er(Y4,{name:"JoyListItemButton",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>ge({},!e.row&&{[`&.${Sg.selected}`]:{fontWeight:t.vars.fontWeight.md}})),kI=pe.forwardRef(function(t,r){const o=ss({props:t,name:"JoyListItemButton"}),l=pe.useContext(_0),{children:h,className:m,action:c,component:b="div",orientation:k="horizontal",role:A,selected:R=!1,color:O="neutral",variant:Q="plain",slots:te={},slotProps:ee={}}=o,de=Wt(o,K4),G=pe.useRef(null),j=$l(G,r),{focusVisible:U,setFocusVisible:fe,getRootProps:ie}=Ox(ge({},o,{rootRef:j}));pe.useImperativeHandle(c,()=>({focusVisible:()=>{var Re;fe(!0),(Re=G.current)==null||Re.focus()}}),[fe]);const F=ge({},o,{component:b,color:O,focusVisible:U,orientation:k,row:l,selected:R,variant:Q}),ce=X4(F),Ce=ge({},de,{component:b,slots:te,slotProps:ee}),[Ue,Ae]=hn("root",{ref:r,className:ao(ce.root,m),elementType:J4,externalForwardedProps:Ce,ownerState:F,getSlotProps:ie});return W.jsx(Z4.Provider,{value:k,children:W.jsx(Ue,ge({},Ae,{role:A??Ae.role,children:h}))})}),Ab=e=>t=>`--${e?`${e}-`:""}${t.replace(/^--/,"")}`,ny="data-skip-inverted-colors",TI=`& :not([${ny}], [${ny}] *)`,EI=e=>{var t,r,o,l,h,m,c,b,k,A,R,O,Q,te,ee,de,G,j,U,fe,ie,F;const ce=Ab(e.cssVarPrefix);return{"--variant-plainColor":"var(--variant-plainColor) !important","--variant-plainHoverColor":"var(--variant-plainHoverColor) !important","--variant-plainHoverBg":"var(--variant-plainHoverBg) !important","--variant-plainActiveBg":"var(--variant-plainActiveBg) !important","--variant-plainDisabledColor":"var(--variant-plainDisabledColor) !important","--variant-outlinedColor":"var(--variant-outlinedColor) !important","--variant-outlinedBorder":"var(--variant-outlinedBorder) !important","--variant-outlinedHoverColor":"var(--variant-outlinedHoverColor) !important","--variant-outlinedHoverBorder":"var(--variant-outlinedHoverBorder) !important","--variant-outlinedHoverBg":"var(--variant-outlinedHoverBg) !important","--variant-outlinedActiveBg":"var(--variant-outlinedActiveBg) !important","--variant-outlinedDisabledColor":"var(--variant-outlinedDisabledColor) !important","--variant-outlinedDisabledBorder":"var(--variant-outlinedDisabledBorder) !important","--variant-softColor":"var(--variant-softColor) !important","--variant-softHoverColor":"var(--variant-softHoverColor) !important","--variant-softBg":"var(--variant-softBg) !important","--variant-softHoverBg":"var(--variant-softHoverBg) !important","--variant-softActiveBg":"var(--variant-softActiveBg) !important","--variant-softActiveColor":"var(--variant-softActiveColor) !important","--variant-softDisabledColor":"var(--variant-softDisabledColor) !important","--variant-softDisabledBg":"var(--variant-softDisabledBg) !important","--variant-solidColor":"var(--variant-solidColor) !important","--variant-solidBg":"var(--variant-solidBg) !important","--variant-solidHoverBg":"var(--variant-solidHoverBg) !important","--variant-solidActiveBg":"var(--variant-solidActiveBg) !important","--variant-solidDisabledColor":"var(--variant-solidDisabledColor) !important","--variant-solidDisabledBg":"var(--variant-solidDisabledBg) !important","--Badge-ringColor":"var(--Badge-ringColor) !important",colorScheme:"unset",[e.getColorSchemeSelector("light")]:{[ce("--palette-focusVisible")]:`${(t=e.colorSchemes.light)==null?void 0:t.palette.focusVisible} !important`,[ce("--palette-background-body")]:`${(r=e.colorSchemes.light)==null?void 0:r.palette.background.body} !important`,[ce("--palette-background-surface")]:`${(o=e.colorSchemes.light)==null?void 0:o.palette.background.surface} !important`,[ce("--palette-background-popup")]:`${(l=e.colorSchemes.light)==null?void 0:l.palette.background.popup} !important`,[ce("--palette-background-level1")]:`${(h=e.colorSchemes.light)==null?void 0:h.palette.background.level1} !important`,[ce("--palette-background-level2")]:`${(m=e.colorSchemes.light)==null?void 0:m.palette.background.level2} !important`,[ce("--palette-background-level3")]:`${(c=e.colorSchemes.light)==null?void 0:c.palette.background.level3} !important`,[ce("--palette-text-primary")]:`${(b=e.colorSchemes.light)==null?void 0:b.palette.text.primary} !important`,[ce("--palette-text-secondary")]:`${(k=e.colorSchemes.light)==null?void 0:k.palette.text.secondary} !important`,[ce("--palette-text-tertiary")]:`${(A=e.colorSchemes.light)==null?void 0:A.palette.text.tertiary} !important`,[ce("--palette-divider")]:`${(R=e.colorSchemes.light)==null?void 0:R.palette.divider} !important`},[e.getColorSchemeSelector("dark")]:{[ce("--palette-focusVisible")]:`${(O=e.colorSchemes.dark)==null?void 0:O.palette.focusVisible} !important`,[ce("--palette-background-body")]:`${(Q=e.colorSchemes.dark)==null?void 0:Q.palette.background.body} !important`,[ce("--palette-background-surface")]:`${(te=e.colorSchemes.dark)==null?void 0:te.palette.background.surface} !important`,[ce("--palette-background-popup")]:`${(ee=e.colorSchemes.dark)==null?void 0:ee.palette.background.popup} !important`,[ce("--palette-background-level1")]:`${(de=e.colorSchemes.dark)==null?void 0:de.palette.background.level1} !important`,[ce("--palette-background-level2")]:`${(G=e.colorSchemes.dark)==null?void 0:G.palette.background.level2} !important`,[ce("--palette-background-level3")]:`${(j=e.colorSchemes.dark)==null?void 0:j.palette.background.level3} !important`,[ce("--palette-text-primary")]:`${(U=e.colorSchemes.dark)==null?void 0:U.palette.text.primary} !important`,[ce("--palette-text-secondary")]:`${(fe=e.colorSchemes.dark)==null?void 0:fe.palette.text.secondary} !important`,[ce("--palette-text-tertiary")]:`${(ie=e.colorSchemes.dark)==null?void 0:ie.palette.text.tertiary} !important`,[ce("--palette-divider")]:`${(F=e.colorSchemes.dark)==null?void 0:F.palette.divider} !important`}}};function Q4(e){return e.theme!==void 0}const eO=e=>t=>{const r=Q4(t)?t.theme:t,o=n0(r.cssVarPrefix),l=Ab(r.cssVarPrefix),h=m=>{const c=m.split("-");return o(m,r.palette[c[1]][c[2]])};return{[TI]:{"--Badge-ringColor":h(`palette-${e}-solidBg`),"--Icon-color":"currentColor",[`${r.getColorSchemeSelector("light")}, ${r.getColorSchemeSelector("dark")}`]:{colorScheme:"dark",[l("--palette-focusVisible")]:h(`palette-${e}-200`),[l("--palette-background-body")]:"rgba(0 0 0 / 0.1)",[l("--palette-background-surface")]:"rgba(0 0 0 / 0.06)",[l("--palette-background-popup")]:h(`palette-${e}-700`),[l("--palette-background-level1")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.2)`,[l("--palette-background-level2")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.36)`,[l("--palette-background-level3")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.6)`,[l("--palette-text-primary")]:h("palette-common-white"),[l("--palette-text-secondary")]:h(`palette-${e}-200`),[l("--palette-text-tertiary")]:h(`palette-${e}-300`),[l("--palette-text-icon")]:h(`palette-${e}-200`),[l("--palette-divider")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainColor":h(`palette-${e}-50`),"--variant-plainHoverColor":"#fff","--variant-plainHoverBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedColor":h(`palette-${e}-50`),"--variant-outlinedBorder":`rgba(${h(`palette-${e}-lightChannel`)} / 0.5)`,"--variant-outlinedHoverColor":"#fff","--variant-outlinedHoverBorder":h(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":"rgba(255 255 255 / 0.2)","--variant-softColor":h("palette-common-white"),"--variant-softHoverColor":h("palette-common-white"),"--variant-softBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.24)`,"--variant-softHoverBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.36)`,"--variant-softActiveBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.16)`,"--variant-softActiveColor":"#fff","--variant-softDisabledColor":`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.1)`,"--variant-solidColor":h(`palette-${e}-${e==="neutral"?"600":"500"}`),"--variant-solidBg":h("palette-common-white"),"--variant-solidHoverBg":h("palette-common-white"),"--variant-solidActiveBg":h(`palette-${e}-100`),"--variant-solidDisabledColor":`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.1)`}},[`&, & [${ny}]`]:EI(r)}},tO=e=>t=>{const{theme:r=t}=t,o=n0(r.cssVarPrefix),l=Ab(r.cssVarPrefix),h=m=>{const c=m.split("-");return o(m,r.palette[c[1]][c[2]])};return{[TI]:{"--Badge-ringColor":h(`palette-${e}-softBg`),"--Icon-color":"currentColor",[r.getColorSchemeSelector("dark")]:{[l("--palette-focusVisible")]:h(`palette-${e}-300`),[l("--palette-background-body")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.1)`,[l("--palette-background-surface")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.08)`,[l("--palette-background-level1")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.2)`,[l("--palette-background-level2")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.4)`,[l("--palette-background-level3")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,[l("--palette-text-primary")]:h(`palette-${e}-100`),[l("--palette-text-secondary")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.72)`,[l("--palette-text-tertiary")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.6)`,[l("--palette-text-icon")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.6)`,[l("--palette-divider")]:`rgba(${h(`palette-${e}-lightChannel`)} / 0.2)`,"--variant-plainColor":`rgba(${h(`palette-${e}-lightChannel`)} / 1)`,"--variant-plainHoverColor":h(`palette-${e}-50`),"--variant-plainHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-plainActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedColor":`rgba(${h(`palette-${e}-lightChannel`)} / 1)`,"--variant-outlinedHoverColor":h(`palette-${e}-50`),"--variant-outlinedBg":"initial","--variant-outlinedBorder":`rgba(${h(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverBorder":h(`palette-${e}-600`),"--variant-outlinedHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-outlinedActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":`rgba(${h(`palette-${e}-mainChannel`)} / 0.2)`,"--variant-softColor":h(`palette-${e}-200`),"--variant-softBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-softHoverColor":"#fff","--variant-softHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-softActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.48)`,"--variant-softDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-solidColor":"#fff","--variant-solidBg":h(`palette-${e}-500`),"--variant-solidHoverColor":"#fff","--variant-solidHoverBg":h(`palette-${e}-600`),"--variant-solidActiveBg":h(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`},[r.getColorSchemeSelector("light")]:{[l("--palette-focusVisible")]:h(`palette-${e}-500`),[l("--palette-background-body")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.1)`,[l("--palette-background-surface")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.08)`,[l("--palette-background-level1")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.2)`,[l("--palette-background-level2")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,[l("--palette-background-level3")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.48)`,[l("--palette-text-primary")]:h(`palette-${e}-700`),[l("--palette-text-secondary")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.8)`,[l("--palette-text-tertiary")]:`rgba(${h(`palette-${e}-darkChannel`)} / 0.68)`,[l("--palette-text-icon")]:h(`palette-${e}-500`),[l("--palette-divider")]:`rgba(${h(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainColor":`rgba(${h(`palette-${e}-darkChannel`)} / 0.8)`,"--variant-plainHoverColor":`rgba(${h(`palette-${e}-darkChannel`)} / 1)`,"--variant-plainHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-plainDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedColor":`rgba(${h(`palette-${e}-mainChannel`)} / 1)`,"--variant-outlinedBorder":`rgba(${h(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverColor":h(`palette-${e}-600`),"--variant-outlinedHoverBorder":h(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-outlinedDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedDisabledBorder":`rgba(${h(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-softColor":h(`palette-${e}-600`),"--variant-softBg":`rgba(${h(`palette-${e}-lightChannel`)} / 0.8)`,"--variant-softHoverColor":h(`palette-${e}-700`),"--variant-softHoverBg":h(`palette-${e}-200`),"--variant-softActiveBg":h(`palette-${e}-300`),"--variant-softDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-softDisabledBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.08)`,"--variant-solidColor":h("palette-common-white"),"--variant-solidBg":h(`palette-${e}-${e==="neutral"?"700":"500"}`),"--variant-solidHoverColor":h("palette-common-white"),"--variant-solidHoverBg":h(`palette-${e}-600`),"--variant-solidActiveBg":h(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${h(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-solidDisabledBg":`rgba(${h(`palette-${e}-mainChannel`)} / 0.08)`}},[`&, & [${ny}]`]:EI(r)}};function rO(e){return os("MuiIconButton",e)}const pC=Rs("MuiIconButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","loading","loadingIndicator"]),Mb=pe.createContext({}),II=pe.createContext(void 0);function nO(e){return os("MuiCircularProgress",e)}Rs("MuiCircularProgress",["root","determinate","svg","track","progress","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);let iO=e=>e,mC;const oO=["color","backgroundColor"],sO=["children","className","color","size","variant","thickness","determinate","value","component","slots","slotProps"],aO=Kk({"0%":{transform:"rotate(-90deg)"},"100%":{transform:"rotate(270deg)"}}),lO=e=>{const{determinate:t,color:r,variant:o,size:l}=e,h={root:["root",t&&"determinate",r&&`color${cr(r)}`,o&&`variant${cr(o)}`,l&&`size${cr(l)}`],svg:["svg"],track:["track"],progress:["progress"]};return lo(h,nO,{})};function Au(e,t){return`var(--CircularProgress-${e}Thickness, var(--CircularProgress-thickness, ${t}))`}const cO=Er("span",{name:"JoyCircularProgress",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,l,h;const m=((r=t.variants[e.variant])==null?void 0:r[e.color])||{},{color:c,backgroundColor:b}=m,k=Wt(m,oO);return ge({"--Icon-fontSize":"calc(0.4 * var(--_root-size))","--CircularProgress-trackColor":b,"--CircularProgress-progressColor":c,"--CircularProgress-percent":e.value,"--CircularProgress-linecap":"round"},e.size==="sm"&&{"--_root-size":"var(--CircularProgress-size, 24px)","--_track-thickness":Au("track","3px"),"--_progress-thickness":Au("progress","3px")},e.instanceSize==="sm"&&{"--CircularProgress-size":"24px"},e.size==="md"&&{"--_track-thickness":Au("track","6px"),"--_progress-thickness":Au("progress","6px"),"--_root-size":"var(--CircularProgress-size, 40px)"},e.instanceSize==="md"&&{"--CircularProgress-size":"40px"},e.size==="lg"&&{"--_track-thickness":Au("track","8px"),"--_progress-thickness":Au("progress","8px"),"--_root-size":"var(--CircularProgress-size, 64px)"},e.instanceSize==="lg"&&{"--CircularProgress-size":"64px"},e.thickness&&{"--_track-thickness":`${e.thickness}px`,"--_progress-thickness":`${e.thickness}px`},{"--_thickness-diff":"calc(var(--_track-thickness) - var(--_progress-thickness))","--_inner-size":"calc(var(--_root-size) - 2 * var(--variant-borderWidth, 0px))","--_outlined-inset":"max(var(--_track-thickness), var(--_progress-thickness))",width:"var(--_root-size)",height:"var(--_root-size)",borderRadius:"var(--_root-size)",margin:"var(--CircularProgress-margin)",boxSizing:"border-box",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0,position:"relative",color:c},e.children&&{fontFamily:t.vars.fontFamily.body,fontWeight:t.vars.fontWeight.md,fontSize:"calc(0.2 * var(--_root-size))"},k,e.variant==="outlined"&&{"&::before":ge({content:'""',display:"block",position:"absolute",borderRadius:"inherit",top:"var(--_outlined-inset)",left:"var(--_outlined-inset)",right:"var(--_outlined-inset)",bottom:"var(--_outlined-inset)"},k)},e.variant==="soft"&&{"--CircularProgress-trackColor":t.variants.soft.neutral.backgroundColor,"--CircularProgress-progressColor":(o=t.variants.solid)==null?void 0:o[e.color].backgroundColor},e.variant==="solid"&&{"--CircularProgress-trackColor":(l=t.variants.softHover)==null?void 0:l[e.color].backgroundColor,"--CircularProgress-progressColor":(h=t.variants.solid)==null?void 0:h[e.color].backgroundColor})}),uO=Er("svg",{name:"JoyCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({width:"inherit",height:"inherit",display:"inherit",boxSizing:"inherit",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))"}),hO=Er("circle",{name:"JoyCircularProgress",slot:"track",overridesResolver:(e,t)=>t.track})({cx:"50%",cy:"50%",r:"calc(var(--_inner-size) / 2 - var(--_track-thickness) / 2 + min(0px, var(--_thickness-diff) / 2))",fill:"transparent",strokeWidth:"var(--_track-thickness)",stroke:"var(--CircularProgress-trackColor)"}),dO=Er("circle",{name:"JoyCircularProgress",slot:"progress",overridesResolver:(e,t)=>t.progress})({"--_progress-radius":"calc(var(--_inner-size) / 2 - var(--_progress-thickness) / 2 - max(0px, var(--_thickness-diff) / 2))","--_progress-length":"calc(2 * 3.1415926535 * var(--_progress-radius))",cx:"50%",cy:"50%",r:"var(--_progress-radius)",fill:"transparent",strokeWidth:"var(--_progress-thickness)",stroke:"var(--CircularProgress-progressColor)",strokeLinecap:"var(--CircularProgress-linecap, round)",strokeDasharray:"var(--_progress-length)",strokeDashoffset:"calc(var(--_progress-length) - var(--CircularProgress-percent) * var(--_progress-length) / 100)",transformOrigin:"center",transform:"rotate(-90deg)"},({ownerState:e})=>!e.determinate&&bx(mC||(mC=iO`
      animation: var(--CircularProgress-circulation, 0.8s linear 0s infinite normal none running)
        ${0};
    `),aO)),zb=pe.forwardRef(function(t,r){const o=ss({props:t,name:"JoyCircularProgress"}),{children:l,className:h,color:m="primary",size:c="md",variant:b="soft",thickness:k,determinate:A=!1,value:R=A?0:25,component:O,slots:Q={},slotProps:te={}}=o,ee=Wt(o,sO),de=ge({},o,{color:m,size:c,variant:b,thickness:k,value:R,determinate:A,instanceSize:t.size}),G=lO(de),j=ge({},ee,{component:O,slots:Q,slotProps:te}),[U,fe]=hn("root",{ref:r,className:ao(G.root,h),elementType:cO,externalForwardedProps:j,ownerState:de,additionalProps:ge({role:"progressbar",style:{"--CircularProgress-percent":R}},R&&A&&{"aria-valuenow":Math.round(typeof R=="number"?R:Number(R||0))})}),[ie,F]=hn("svg",{className:G.svg,elementType:uO,externalForwardedProps:j,ownerState:de}),[ce,Ce]=hn("track",{className:G.track,elementType:hO,externalForwardedProps:j,ownerState:de}),[Ue,Ae]=hn("progress",{className:G.progress,elementType:dO,externalForwardedProps:j,ownerState:de});return W.jsxs(U,ge({},fe,{children:[W.jsxs(ie,ge({},F,{children:[W.jsx(ce,ge({},Ce)),W.jsx(Ue,ge({},Ae))]})),l]}))}),fO=["children","action","component","color","disabled","variant","loading","loadingIndicator","size","slots","slotProps"],pO=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:l,size:h,variant:m,loading:c}=e,b={root:["root",r&&"disabled",o&&"focusVisible",m&&`variant${cr(m)}`,t&&`color${cr(t)}`,h&&`size${cr(h)}`,c&&"loading"],loadingIndicator:["loadingIndicator"]},k=lo(b,rO,{});return o&&l&&(k.root+=` ${l}`),k},mO=Er("button")(({theme:e,ownerState:t})=>{var r,o,l,h;return[ge({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.instanceSize&&{"--IconButton-size":{sm:"2rem",md:"2.25rem",lg:"2.75rem"}[t.instanceSize]},t.size==="sm"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.6)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px"},t.size==="md"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.25rem) / 1.5)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2.25rem)",minHeight:"var(--IconButton-size, 2.25rem)",fontSize:e.vars.fontSize.md,paddingInline:"0.25rem"},t.size==="lg"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.75rem) / 1.571)","--CircularProgress-size":"28px","--CircularProgress-thickness":"4px",minWidth:"var(--IconButton-size, 2.75rem)",minHeight:"var(--IconButton-size, 2.75rem)",fontSize:e.vars.fontSize.lg,paddingInline:"0.375rem"},{WebkitTapHighlightColor:"transparent",paddingBlock:0,fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.md,margin:"var(--IconButton-margin)",borderRadius:`var(--IconButton-radius, ${e.vars.radius.sm})`,border:"none",boxSizing:"border-box",backgroundColor:"transparent",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",[e.focus.selector]:ge({"--Icon-color":"currentColor"},e.focus.default)}),ge({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":ge({"--Icon-color":"currentColor"},(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color])},'&:active, &[aria-pressed="true"]':ge({"--Icon-color":"currentColor"},(l=e.variants[`${t.variant}Active`])==null?void 0:l[t.color]),"&:disabled":(h=e.variants[`${t.variant}Disabled`])==null?void 0:h[t.color]})]}),gO=Er(mO,{name:"JoyIconButton",slot:"Root",overridesResolver:(e,t)=>t.root})({}),yO=Er("span",{name:"JoyIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e,ownerState:t})=>{var r,o;return ge({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color})}),Yf=pe.forwardRef(function(t,r){var o;const l=ss({props:t,name:"JoyIconButton"}),{children:h,action:m,component:c="button",color:b="neutral",disabled:k,variant:A="plain",loading:R=!1,loadingIndicator:O,size:Q="md",slots:te={},slotProps:ee={}}=l,de=Wt(l,fO),G=pe.useContext(Mb),j=pe.useContext(II),U=t.variant||G.variant||A,fe=t.size||G.size||Q,ie=t.color||G.color||b,F=(o=t.loading||t.disabled)!=null?o:G.disabled||R||k,ce=pe.useRef(null),Ce=$l(ce,r),{focusVisible:Ue,setFocusVisible:Ae,getRootProps:Re}=Ox(ge({},l,{disabled:F,rootRef:Ce})),We=O??W.jsx(zb,{color:ie,thickness:{sm:2,md:3,lg:4}[fe]||3});pe.useImperativeHandle(m,()=>({focusVisible:()=>{var mt;Ae(!0),(mt=ce.current)==null||mt.focus()}}),[Ae]);const He=ge({},l,{component:c,color:ie,disabled:F,variant:U,loading:R,size:fe,focusVisible:Ue,instanceSize:t.size}),Ze=pO(He),Ge=mt=>{var Dt;let jt=l.onClick;if(typeof ee.root=="function"?jt=ee.root(He).onClick:ee.root&&(jt=ee.root.onClick),(Dt=jt)==null||Dt(mt),j){var _r;(_r=j.onClick)==null||_r.call(j,mt,l.value)}};let Fe=l["aria-pressed"];typeof ee.root=="function"?Fe=ee.root(He)["aria-pressed"]:ee.root&&(Fe=ee.root["aria-pressed"]),j!=null&&j.value&&(Array.isArray(j.value)?Fe=j.value.indexOf(l.value)!==-1:Fe=j.value===l.value);const ot=ge({},de,{component:c,slots:te,slotProps:ee}),[Pe,st]=hn("root",{ref:r,className:Ze.root,elementType:gO,getSlotProps:Re,externalForwardedProps:ot,ownerState:He,additionalProps:{onClick:Ge,"aria-pressed":Fe}}),[yt,Et]=hn("loadingIndicator",{className:Ze.loadingIndicator,elementType:yO,externalForwardedProps:ot,ownerState:He});return W.jsx(Pe,ge({},st,{children:R?W.jsx(yt,ge({},Et,{children:We})):h}))});Yf.muiName="IconButton";const vO=Gy("MuiBox",["root"]),Ei=eL({themeId:op,defaultTheme:zh,defaultClassName:vO.root,generateClassName:iT.generate});function _O(e){return os("MuiTypography",e)}Rs("MuiTypography",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","noWrap","gutterBottom","startDecorator","endDecorator","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const xO=["color","textColor"],bO=["component","gutterBottom","noWrap","level","levelMapping","children","endDecorator","startDecorator","variant","slots","slotProps"],gC=pe.createContext(!1),wO=pe.createContext(!1),SO=e=>{const{gutterBottom:t,noWrap:r,level:o,color:l,variant:h}=e,m={root:["root",o,t&&"gutterBottom",r&&"noWrap",l&&`color${cr(l)}`,h&&`variant${cr(h)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return lo(m,_O,{})},CO=Er("span",{name:"JoyTypography",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),kO=Er("span",{name:"JoyTypography",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),TO=Er("span",{name:"JoyTypography",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o,l,h,m;const c=t.level!=="inherit"?(r=e.typography[t.level])==null?void 0:r.lineHeight:"1";return ge({"--Icon-fontSize":`calc(1em * ${c})`},t.color&&{"--Icon-color":"currentColor"},{margin:"var(--Typography-margin, 0px)"},t.nesting?{display:"inline"}:ge({display:"block"},t.unstable_hasSkeleton&&{position:"relative"}),(t.startDecorator||t.endDecorator)&&ge({display:"flex",alignItems:"center"},t.nesting&&ge({display:"inline-flex"},t.startDecorator&&{verticalAlign:"bottom"})),t.level&&t.level!=="inherit"&&e.typography[t.level],{fontSize:`var(--Typography-fontSize, ${t.level&&t.level!=="inherit"&&(o=(l=e.typography[t.level])==null?void 0:l.fontSize)!=null?o:"inherit"})`},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.color&&{color:`var(--variant-plainColor, rgba(${(h=e.vars.palette[t.color])==null?void 0:h.mainChannel} / 1))`},t.variant&&ge({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"},(m=e.variants[t.variant])==null?void 0:m[t.color]))}),yC={h1:"h1",h2:"h2",h3:"h3",h4:"h4","title-lg":"p","title-md":"p","title-sm":"p","body-lg":"p","body-md":"p","body-sm":"p","body-xs":"span",inherit:"p"},Zn=pe.forwardRef(function(t,r){var o;const l=ss({props:t,name:"JoyTypography"}),{color:h,textColor:m}=l,c=Wt(l,xO),b=pe.useContext(gC),k=pe.useContext(wO),A=Uy(ge({},c,{color:m})),{component:R,gutterBottom:O=!1,noWrap:Q=!1,level:te="body-md",levelMapping:ee=yC,children:de,endDecorator:G,startDecorator:j,variant:U,slots:fe={},slotProps:ie={}}=A,F=Wt(A,bO),ce=(o=t.color)!=null?o:U?h??"neutral":h,Ce=b||k?t.level||"inherit":te,Ue=zx(de,["Skeleton"]),Ae=R||(b?"span":ee[Ce]||yC[Ce]||"span"),Re=ge({},A,{level:Ce,component:Ae,color:ce,gutterBottom:O,noWrap:Q,nesting:b,variant:U,unstable_hasSkeleton:Ue}),We=SO(Re),He=ge({},F,{component:Ae,slots:fe,slotProps:ie}),[Ze,Ge]=hn("root",{ref:r,className:We.root,elementType:TO,externalForwardedProps:He,ownerState:Re}),[Fe,ot]=hn("startDecorator",{className:We.startDecorator,elementType:CO,externalForwardedProps:He,ownerState:Re}),[Pe,st]=hn("endDecorator",{className:We.endDecorator,elementType:kO,externalForwardedProps:He,ownerState:Re});return W.jsx(gC.Provider,{value:!0,children:W.jsxs(Ze,ge({},Ge,{children:[j&&W.jsx(Fe,ge({},ot,{children:j})),Ue?pe.cloneElement(de,{variant:de.props.variant||"inline"}):de,G&&W.jsx(Pe,ge({},st,{children:G}))]}))})});Zn.muiName="Typography";function EO(e){return os("MuiButton",e)}const iy=Rs("MuiButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]),IO=["children","action","color","variant","size","fullWidth","startDecorator","endDecorator","loading","loadingPosition","loadingIndicator","disabled","component","slots","slotProps"],PO=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:l,fullWidth:h,size:m,variant:c,loading:b}=e,k={root:["root",r&&"disabled",o&&"focusVisible",h&&"fullWidth",c&&`variant${cr(c)}`,t&&`color${cr(t)}`,m&&`size${cr(m)}`,b&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]},A=lo(k,EO,{});return o&&l&&(A.root+=` ${l}`),A},AO=Er("span",{name:"JoyButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),MO=Er("span",{name:"JoyButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),zO=Er("span",{name:"JoyButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,o;return ge({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color})}),LO=({theme:e,ownerState:t})=>{var r,o,l,h;return[ge({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.size==="sm"&&{"--Icon-fontSize":e.vars.fontSize.lg,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.375rem",minHeight:"var(--Button-minHeight, 2rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.25rem)",paddingInline:"0.75rem"},t.size==="md"&&{"--Icon-fontSize":e.vars.fontSize.xl,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.5rem",minHeight:"var(--Button-minHeight, 2.25rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.375rem)",paddingInline:"1rem"},t.size==="lg"&&{"--Icon-fontSize":e.vars.fontSize.xl2,"--CircularProgress-size":"28px","--CircularProgress-thickness":"4px","--Button-gap":"0.75rem",minHeight:"var(--Button-minHeight, 2.75rem)",fontSize:e.vars.fontSize.md,paddingBlock:"var(--Button-paddingBlock, 0.5rem)",paddingInline:"1.5rem"},{WebkitTapHighlightColor:"transparent",boxSizing:"border-box",borderRadius:`var(--Button-radius, ${e.vars.radius.sm})`,margin:"var(--Button-margin)",border:"none",backgroundColor:"transparent",cursor:"pointer",userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",textDecoration:"none",fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.lg,lineHeight:e.vars.lineHeight.md},t.fullWidth&&{width:"100%"},{[e.focus.selector]:e.focus.default}),ge({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]},'&:active, &[aria-pressed="true"]':(l=e.variants[`${t.variant}Active`])==null?void 0:l[t.color],[`&.${iy.disabled}`]:(h=e.variants[`${t.variant}Disabled`])==null?void 0:h[t.color]},t.loadingPosition==="center"&&{[`&.${iy.loading}`]:{color:"transparent"}})]},DO=Er("button",{name:"JoyButton",slot:"Root",overridesResolver:(e,t)=>t.root})(LO),Jf=pe.forwardRef(function(t,r){var o;const l=ss({props:t,name:"JoyButton"}),{children:h,action:m,color:c="primary",variant:b="solid",size:k="md",fullWidth:A=!1,startDecorator:R,endDecorator:O,loading:Q=!1,loadingPosition:te="center",loadingIndicator:ee,disabled:de,component:G,slots:j={},slotProps:U={}}=l,fe=Wt(l,IO),ie=pe.useContext(Mb),F=pe.useContext(II),ce=t.variant||ie.variant||b,Ce=t.size||ie.size||k,Ue=t.color||ie.color||c,Ae=(o=t.loading||t.disabled)!=null?o:ie.disabled||Q||de,Re=pe.useRef(null),We=$l(Re,r),{focusVisible:He,setFocusVisible:Ze,getRootProps:Ge}=Ox(ge({},l,{disabled:Ae,rootRef:We})),Fe=ee??W.jsx(zb,{color:Ue,thickness:{sm:2,md:3,lg:4}[Ce]||3});pe.useImperativeHandle(m,()=>({focusVisible:()=>{var Rt;Ze(!0),(Rt=Re.current)==null||Rt.focus()}}),[Ze]);const ot=ge({},l,{color:Ue,fullWidth:A,variant:ce,size:Ce,focusVisible:He,loading:Q,loadingPosition:te,disabled:Ae}),Pe=PO(ot),st=Rt=>{var or;let rn=l.onClick;if(typeof U.root=="function"?rn=U.root(ot).onClick:U.root&&(rn=U.root.onClick),(or=rn)==null||or(Rt),F){var co;(co=F.onClick)==null||co.call(F,Rt,l.value)}};let yt=l["aria-pressed"];typeof U.root=="function"?yt=U.root(ot)["aria-pressed"]:U.root&&(yt=U.root["aria-pressed"]),F!=null&&F.value&&(Array.isArray(F.value)?yt=F.value.indexOf(l.value)!==-1:yt=F.value===l.value);const Et=ge({},fe,{component:G,slots:j,slotProps:U}),[mt,Dt]=hn("root",{ref:r,className:Pe.root,elementType:DO,externalForwardedProps:Et,getSlotProps:Ge,ownerState:ot,additionalProps:{onClick:st,"aria-pressed":yt}}),[jt,_r]=hn("startDecorator",{className:Pe.startDecorator,elementType:AO,externalForwardedProps:Et,ownerState:ot}),[Ct,Pt]=hn("endDecorator",{className:Pe.endDecorator,elementType:MO,externalForwardedProps:Et,ownerState:ot}),[at,At]=hn("loadingIndicatorCenter",{className:Pe.loadingIndicatorCenter,elementType:zO,externalForwardedProps:Et,ownerState:ot});return W.jsxs(mt,ge({},Dt,{children:[(R||Q&&te==="start")&&W.jsx(jt,ge({},_r,{children:Q&&te==="start"?Fe:R})),h,Q&&te==="center"&&W.jsx(at,ge({},At,{children:Fe})),(O||Q&&te==="end")&&W.jsx(Ct,ge({},Pt,{children:Q&&te==="end"?Fe:O}))]}))});Jf.muiName="Button";function RO(e){return os("MuiButtonGroup",e)}Rs("MuiButtonGroup",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]);const OO=["buttonFlex","className","component","disabled","size","color","variant","children","orientation","slots","slotProps","spacing"],BO=e=>{const{size:t,variant:r,color:o,orientation:l}=e,h={root:["root",l,r&&`variant${cr(r)}`,o&&`color${cr(o)}`,t&&`size${cr(t)}`]};return lo(h,RO,{})},$O=Er("div")(({theme:e,ownerState:t})=>{var r,o,l;const{borderRadius:h}=Pb({theme:e,ownerState:t},["borderRadius"]),m=t.orientation==="vertical"?"var(--ButtonGroup-radius) var(--ButtonGroup-radius) var(--unstable_childRadius) var(--unstable_childRadius)":"var(--ButtonGroup-radius) var(--unstable_childRadius) var(--unstable_childRadius) var(--ButtonGroup-radius)",c=t.orientation==="vertical"?"var(--unstable_childRadius) var(--unstable_childRadius) var(--ButtonGroup-radius) var(--ButtonGroup-radius)":"var(--unstable_childRadius) var(--ButtonGroup-radius) var(--ButtonGroup-radius) var(--unstable_childRadius)",b=t.orientation==="vertical"?"calc(var(--ButtonGroup-separatorSize) * -1) 0 0 0":"0 0 0 calc(var(--ButtonGroup-separatorSize) * -1)",k={};aD(e.breakpoints,t.spacing,(Q,te)=>{if(te!==null){var ee;Q(k,{"--ButtonGroup-connected":te.toString().match(/^0(?!\.)/)?"1":"0",gap:typeof te=="string"?te:(ee=e.spacing)==null?void 0:ee.call(e,te)})}});const A=(r=e.variants.outlined)==null?void 0:r[t.color],R=(o=e.variants.outlinedDisabled)==null?void 0:o[t.color],O=(l=e.variants.outlinedHover)==null?void 0:l[t.color];return[ge({"--ButtonGroup-separatorSize":t.variant==="outlined"?"1px":"calc(var(--ButtonGroup-connected) * 1px)","--ButtonGroup-separatorColor":A==null?void 0:A.borderColor,"--ButtonGroup-radius":e.vars.radius.sm,"--Divider-inset":"0.5rem","--unstable_childRadius":"calc((1 - var(--ButtonGroup-connected)) * var(--ButtonGroup-radius) - var(--variant-borderWidth, 0px))"},k,{display:"flex",borderRadius:"var(--ButtonGroup-radius)",flexDirection:t.orientation==="vertical"?"column":"row","& > [data-first-child]":ge({"--Button-radius":m,"--IconButton-radius":m},t.orientation==="horizontal"&&{borderRight:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"},t.orientation==="vertical"&&{borderBottom:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"}),"& > :not([data-first-child]):not([data-last-child]):not(:only-child)":ge({"--Button-radius":"var(--unstable_childRadius)","--IconButton-radius":"var(--unstable_childRadius)",borderRadius:"var(--unstable_childRadius)"},t.orientation==="horizontal"&&{borderLeft:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)",borderRight:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"},t.orientation==="vertical"&&{borderTop:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)",borderBottom:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"}),"& > [data-last-child]":ge({"--Button-radius":c,"--IconButton-radius":c},t.orientation==="horizontal"&&{borderLeft:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"},t.orientation==="vertical"&&{borderTop:"var(--ButtonGroup-separatorSize) solid var(--ButtonGroup-separatorColor)"}),"& > :only-child":{"--Button-radius":"var(--ButtonGroup-radius)","--IconButton-radius":"var(--ButtonGroup-radius)"},"& > :not([data-first-child]):not(:only-child)":{"--Button-margin":b,"--IconButton-margin":b},[`& .${iy.root}, & .${pC.root}`]:ge({"&:not(:disabled)":{zIndex:1},"&:disabled":{"--ButtonGroup-separatorColor":R==null?void 0:R.borderColor}},t.variant==="outlined"&&{"&:hover":{"--ButtonGroup-separatorColor":O==null?void 0:O.borderColor}},{[`&:hover, ${e.focus.selector}`]:{zIndex:2}})},t.buttonFlex&&{[`& > *:not(.${pC.root})`]:{flex:t.buttonFlex},[`& > :not(button) > .${iy.root}`]:{width:"100%"}}),h!==void 0&&{"--ButtonGroup-radius":h}]}),FO=Er($O,{name:"JoyButtonGroup",slot:"Root",overridesResolver:(e,t)=>t.root})({}),NO=pe.forwardRef(function(t,r){const o=ss({props:t,name:"JoyButtonGroup"}),{buttonFlex:l,className:h,component:m="div",disabled:c=!1,size:b="md",color:k="neutral",variant:A="outlined",children:R,orientation:O="horizontal",slots:Q={},slotProps:te={},spacing:ee=0}=o,de=Wt(o,OO),G=ge({},o,{buttonFlex:l,color:k,component:m,orientation:O,spacing:ee,size:b,variant:A}),j=BO(G),U=ge({},de,{component:m,slots:Q,slotProps:te}),[fe,ie]=hn("root",{ref:r,className:ao(j.root,h),elementType:FO,externalForwardedProps:U,additionalProps:{role:"group"},ownerState:G}),F=pe.useMemo(()=>({variant:A,color:k,size:b,disabled:c}),[A,k,b,c]);return W.jsx(fe,ge({},ie,{children:W.jsx(Mb.Provider,{value:F,children:pe.Children.map(R,(ce,Ce)=>{if(!pe.isValidElement(ce))return ce;const Ue={};if(zx(ce,["Divider"])){var Ae,Re;const We=ce.props;Ue.inset=(Ae=We==null?void 0:We.inset)!=null?Ae:"context";const He=O==="vertical"?"horizontal":"vertical";Ue.orientation=(Re=We==null?void 0:We.orientation)!=null?Re:He,Ue.role="presentation",Ue.component="span"}return pe.Children.count(R)>1&&(Ce===0&&(Ue["data-first-child"]=""),Ce===pe.Children.count(R)-1&&(Ue["data-last-child"]="")),pe.cloneElement(ce,Ue)})})}))});function jO(e){return os("MuiDivider",e)}Rs("MuiDivider",["root","horizontal","vertical","insetContext","insetNone"]);function VO(e){const{children:t,disableColorScheme:r=!1}=e;return W.jsxs(pe.Fragment,{children:[W.jsx(CD,{styles:o=>{var l,h;const m={};r||Object.entries(o.colorSchemes).forEach(([b,k])=>{var A;m[o.getColorSchemeSelector(b).replace(/\s*&/,"")]={colorScheme:(A=k.palette)==null?void 0:A.mode}});const c=(l=(h=o.components)==null||(h=h.JoyTypography)==null||(h=h.defaultProps)==null?void 0:h.level)!=null?l:"body-md";return ge({html:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:o.vars.fontWeight.lg},body:ge({margin:0,color:o.vars.palette.text.primary,fontFamily:o.vars.fontFamily.body},o.typography[c],{backgroundColor:o.vars.palette.background.body,"@media print":{backgroundColor:o.vars.palette.common.white},"&::backdrop":{backgroundColor:o.vars.palette.background.backdrop}})},m)},defaultTheme:zh}),t]})}const UO=["className","children","component","inset","orientation","role","slots","slotProps"],GO=e=>{const{orientation:t,inset:r}=e,o={root:["root",t,r&&`inset${cr(r)}`]};return lo(o,jO,{})},PI=Er("hr",{name:"JoyDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>ge({"--Divider-thickness":"1px","--Divider-lineColor":e.vars.palette.divider},t.inset==="none"&&{"--_Divider-inset":"0px"},t.inset==="context"&&{"--_Divider-inset":"var(--Divider-inset, 0px)"},{margin:"initial",marginInline:t.orientation==="vertical"?"initial":"var(--_Divider-inset)",marginBlock:t.orientation==="vertical"?"var(--_Divider-inset)":"initial",position:"relative",alignSelf:"stretch",flexShrink:0},t.children?ge({"--Divider-gap":e.spacing(1),"--Divider-childPosition":"50%",display:"flex",flexDirection:t.orientation==="vertical"?"column":"row",alignItems:"center",whiteSpace:"nowrap",textAlign:"center",border:0},e.typography["body-sm"],{"&::before, &::after":{position:"relative",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)",backgroundColor:"var(--Divider-lineColor)",content:'""'},"&::before":{marginInlineEnd:t.orientation==="vertical"?"initial":"min(var(--Divider-childPosition) * 999, var(--Divider-gap))",marginBlockEnd:t.orientation==="vertical"?"min(var(--Divider-childPosition) * 999, var(--Divider-gap))":"initial",flexBasis:"var(--Divider-childPosition)"},"&::after":{marginInlineStart:t.orientation==="vertical"?"initial":"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))",marginBlockStart:t.orientation==="vertical"?"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))":"initial",flexBasis:"calc(100% - var(--Divider-childPosition))"}}):{border:"none",listStyle:"none",backgroundColor:"var(--Divider-lineColor)",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)"})),Lb=pe.forwardRef(function(t,r){const o=ss({props:t,name:"JoyDivider"}),{className:l,children:h,component:m=h!=null?"div":"hr",inset:c,orientation:b="horizontal",role:k=m!=="hr"?"separator":void 0,slots:A={},slotProps:R={}}=o,O=Wt(o,UO),Q=ge({},o,{inset:c,role:k,orientation:b,component:m}),te=GO(Q),ee=ge({},O,{component:m,slots:A,slotProps:R}),[de,G]=hn("root",{ref:r,className:ao(te.root,l),elementType:PI,externalForwardedProps:ee,ownerState:Q,additionalProps:ge({as:m,role:k},k==="separator"&&b==="vertical"&&{"aria-orientation":"vertical"})});return W.jsx(de,ge({},G,{children:h}))});Lb.muiName="Divider";function HO(e){return os("MuiListDivider",e)}Rs("MuiListDivider",["root","insetGutter","insetStartDecorator","insetStartContent","horizontal","vertical"]);const qO=["component","role","className","children","inset","orientation","slots","slotProps"],WO=e=>{const{orientation:t,inset:r}=e,o={root:["root",t,r&&r!=="context"&&`inset${cr(r)}`]};return lo(o,HO,{})},ZO=Er(PI,{name:"JoyListDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>ge({},e.inset==="context"&&{"--Divider-inset":"calc(-1 * var(--List-padding))"},e.row&&ge({marginInline:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginBlock:"var(--ListItem-paddingY)"},e["data-first-child"]===void 0&&{marginInlineStart:"calc(var(--List-gap) + var(--ListDivider-gap))"}),!e.row&&ge({},e["data-first-child"]===void 0&&{marginBlockStart:"calc(var(--List-gap) + var(--ListDivider-gap))"},{marginBlockEnd:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginInlineStart:"var(--ListItem-paddingLeft)",marginInlineEnd:"var(--ListItem-paddingRight)"},e.inset==="startDecorator"&&{marginInlineStart:"var(--ListItem-paddingLeft)"},e.inset==="startContent"&&{marginInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItemDecorator-size))"}))),AI=pe.forwardRef(function(t,r){const o=ss({props:t,name:"JoyListDivider"}),l=pe.useContext(_0),h=pe.useContext(Eb),{component:m,role:c,className:b,children:k,inset:A="context",orientation:R,slots:O={},slotProps:Q={}}=o,te=Wt(o,qO),[ee]=(h==null?void 0:h.split(":"))||["",""],de=m||(ee&&!ee.match(/^(ul|ol|menu)$/)?"div":"li"),G=c||(de==="li"?"separator":void 0),j=R||(l?"vertical":"horizontal"),U=ge({},o,{inset:A,row:l,orientation:j,component:de,role:G}),fe=WO(U),ie=ge({},te,{component:de,slots:O,slotProps:Q}),[F,ce]=hn("root",{ref:r,className:ao(fe.root,b),elementType:ZO,externalForwardedProps:ie,ownerState:U,additionalProps:ge({as:de,role:G},G==="separator"&&j==="vertical"&&{"aria-orientation":"vertical"})});return W.jsx(F,ge({},ce,{children:k}))});function KO(e){return os("MuiSheet",e)}Rs("MuiSheet",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const XO=["className","color","component","variant","invertedColors","slots","slotProps"],YO=e=>{const{variant:t,color:r}=e,o={root:["root",t&&`variant${cr(t)}`,r&&`color${cr(r)}`]};return lo(o,KO,{})},JO=Er("div",{name:"JoySheet",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;const l=(r=e.variants[t.variant])==null?void 0:r[t.color],{borderRadius:h,bgcolor:m,backgroundColor:c,background:b}=Pb({theme:e,ownerState:t},["borderRadius","bgcolor","backgroundColor","background"]),k=ph(e,`palette.${m}`)||m||ph(e,`palette.${c}`)||c||b||(l==null?void 0:l.backgroundColor)||(l==null?void 0:l.background)||e.vars.palette.background.surface;return[ge({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--ListItem-stickyBackground":k==="transparent"?"initial":k,"--Sheet-background":k==="transparent"?"initial":k},h!==void 0&&{"--List-radius":`calc(${h} - var(--variant-borderWidth, 0px))`,"--unstable_actionRadius":`calc(${h} - var(--variant-borderWidth, 0px))`},{backgroundColor:e.vars.palette.background.surface,position:"relative"}),ge({},e.typography["body-md"],t.variant==="solid"&&t.color&&t.invertedColors&&eO(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&tO(t.color)(e),(o=e.variants[t.variant])==null?void 0:o[t.color],l)]}),MI=pe.forwardRef(function(t,r){const o=ss({props:t,name:"JoySheet"}),{className:l,color:h="neutral",component:m="div",variant:c="plain",invertedColors:b=!1,slots:k={},slotProps:A={}}=o,R=Wt(o,XO),O=ge({},o,{color:h,component:m,invertedColors:b,variant:c}),Q=YO(O),te=ge({},R,{component:m,slots:k,slotProps:A}),[ee,de]=hn("root",{ref:r,className:ao(Q.root,l),elementType:JO,externalForwardedProps:te,ownerState:O});return W.jsx(ee,ge({},de))}),Ci=mD({createStyledComponent:Er("div",{name:"JoyStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>ss({props:e,name:"JoyStack"})}),x0="$$material";function QO(e,t){return ge({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Sn={},zI={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(zI);var LI=zI.exports;const eB=Bl(GM),tB=Bl(vL);var DI=LI;Object.defineProperty(Sn,"__esModule",{value:!0});Sn.alpha=$I;Sn.blend=mB;Sn.colorChannel=void 0;var rB=Sn.darken=Rb;Sn.decomposeColor=rs;Sn.emphasize=FI;var nB=Sn.getContrastRatio=uB;Sn.getLuminance=oy;Sn.hexToRgb=RI;var iB=Sn.hslToRgb=BI,oB=Sn.lighten=Ob,Qm=Sn.private_safeAlpha=hB,th=Sn.private_safeColorChannel=void 0,Ar=Sn.private_safeDarken=dB,eg=Sn.private_safeEmphasize=pB,Mr=Sn.private_safeLighten=fB;Sn.recomposeColor=Rh;Sn.rgbToHex=cB;var vC=DI(eB),sB=DI(tB);function Db(e,t=0,r=1){return(0,sB.default)(e,t,r)}function RI(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,l)=>l<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function aB(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function rs(e){if(e.type)return e;if(e.charAt(0)==="#")return rs(RI(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error((0,vC.default)(9,e));let o=e.substring(t+1,e.length-1),l;if(r==="color"){if(o=o.split(" "),l=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(l)===-1)throw new Error((0,vC.default)(10,l))}else o=o.split(",");return o=o.map(h=>parseFloat(h)),{type:r,values:o,colorSpace:l}}const OI=e=>{const t=rs(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};Sn.colorChannel=OI;const lB=(e,t)=>{try{return OI(e)}catch{return e}};th=Sn.private_safeColorChannel=lB;function Rh(e){const{type:t,colorSpace:r}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((l,h)=>h<3?parseInt(l,10):l):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${r} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function cB(e){if(e.indexOf("#")===0)return e;const{values:t}=rs(e);return`#${t.map((r,o)=>aB(o===3?Math.round(255*r):r)).join("")}`}function BI(e){e=rs(e);const{values:t}=e,r=t[0],o=t[1]/100,l=t[2]/100,h=o*Math.min(l,1-l),m=(k,A=(k+r/30)%12)=>l-h*Math.max(Math.min(A-3,9-A,1),-1);let c="rgb";const b=[Math.round(m(0)*255),Math.round(m(8)*255),Math.round(m(4)*255)];return e.type==="hsla"&&(c+="a",b.push(t[3])),Rh({type:c,values:b})}function oy(e){e=rs(e);let t=e.type==="hsl"||e.type==="hsla"?rs(BI(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function uB(e,t){const r=oy(e),o=oy(t);return(Math.max(r,o)+.05)/(Math.min(r,o)+.05)}function $I(e,t){return e=rs(e),t=Db(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Rh(e)}function hB(e,t,r){try{return $I(e,t)}catch{return e}}function Rb(e,t){if(e=rs(e),t=Db(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return Rh(e)}function dB(e,t,r){try{return Rb(e,t)}catch{return e}}function Ob(e,t){if(e=rs(e),t=Db(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return Rh(e)}function fB(e,t,r){try{return Ob(e,t)}catch{return e}}function FI(e,t=.15){return oy(e)>.5?Rb(e,t):Ob(e,t)}function pB(e,t,r){try{return FI(e,t)}catch{return e}}function mB(e,t,r,o=1){const l=(b,k)=>Math.round((b**(1/o)*(1-r)+k**(1/o)*r)**o),h=rs(e),m=rs(t),c=[l(h.values[0],m.values[0]),l(h.values[1],m.values[1]),l(h.values[2],m.values[2])];return Rh({type:"rgb",values:c})}const Qf={black:"#000",white:"#fff"},gB={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Mu={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},zu={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},nf={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Lu={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Du={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Ru={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},yB=["mode","contrastThreshold","tonalOffset"],_C={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Qf.white,default:Qf.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},v_={text:{primary:Qf.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Qf.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function xC(e,t,r,o){const l=o.light||o,h=o.dark||o*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=oB(e.main,l):t==="dark"&&(e.dark=rB(e.main,h)))}function vB(e="light"){return e==="dark"?{main:Lu[200],light:Lu[50],dark:Lu[400]}:{main:Lu[700],light:Lu[400],dark:Lu[800]}}function _B(e="light"){return e==="dark"?{main:Mu[200],light:Mu[50],dark:Mu[400]}:{main:Mu[500],light:Mu[300],dark:Mu[700]}}function xB(e="light"){return e==="dark"?{main:zu[500],light:zu[300],dark:zu[700]}:{main:zu[700],light:zu[400],dark:zu[800]}}function bB(e="light"){return e==="dark"?{main:Du[400],light:Du[300],dark:Du[700]}:{main:Du[700],light:Du[500],dark:Du[900]}}function wB(e="light"){return e==="dark"?{main:Ru[400],light:Ru[300],dark:Ru[700]}:{main:Ru[800],light:Ru[500],dark:Ru[900]}}function SB(e="light"){return e==="dark"?{main:nf[400],light:nf[300],dark:nf[700]}:{main:"#ed6c02",light:nf[500],dark:nf[900]}}function CB(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:o=.2}=e,l=Wt(e,yB),h=e.primary||vB(t),m=e.secondary||_B(t),c=e.error||xB(t),b=e.info||bB(t),k=e.success||wB(t),A=e.warning||SB(t);function R(ee){return nB(ee,v_.text.primary)>=r?v_.text.primary:_C.text.primary}const O=({color:ee,name:de,mainShade:G=500,lightShade:j=300,darkShade:U=700})=>{if(ee=ge({},ee),!ee.main&&ee[G]&&(ee.main=ee[G]),!ee.hasOwnProperty("main"))throw new Error(Dl(11,de?` (${de})`:"",G));if(typeof ee.main!="string")throw new Error(Dl(12,de?` (${de})`:"",JSON.stringify(ee.main)));return xC(ee,"light",j,o),xC(ee,"dark",U,o),ee.contrastText||(ee.contrastText=R(ee.main)),ee},Q={dark:v_,light:_C};return In(ge({common:ge({},Qf),mode:t,primary:O({color:h,name:"primary"}),secondary:O({color:m,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:O({color:c,name:"error"}),warning:O({color:A,name:"warning"}),info:O({color:b,name:"info"}),success:O({color:k,name:"success"}),grey:gB,contrastThreshold:r,getContrastText:R,augmentColor:O,tonalOffset:o},Q[t]),l)}const kB=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function TB(e){return Math.round(e*1e5)/1e5}const bC={textTransform:"uppercase"},wC='"Roboto", "Helvetica", "Arial", sans-serif';function NI(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:o=wC,fontSize:l=14,fontWeightLight:h=300,fontWeightRegular:m=400,fontWeightMedium:c=500,fontWeightBold:b=700,htmlFontSize:k=16,allVariants:A,pxToRem:R}=r,O=Wt(r,kB),Q=l/14,te=R||(G=>`${G/k*Q}rem`),ee=(G,j,U,fe,ie)=>ge({fontFamily:o,fontWeight:G,fontSize:te(j),lineHeight:U},o===wC?{letterSpacing:`${TB(fe/j)}em`}:{},ie,A),de={h1:ee(h,96,1.167,-1.5),h2:ee(h,60,1.2,-.5),h3:ee(m,48,1.167,0),h4:ee(m,34,1.235,.25),h5:ee(m,24,1.334,0),h6:ee(c,20,1.6,.15),subtitle1:ee(m,16,1.75,.15),subtitle2:ee(c,14,1.57,.1),body1:ee(m,16,1.5,.15),body2:ee(m,14,1.43,.15),button:ee(c,14,1.75,.4,bC),caption:ee(m,12,1.66,.4),overline:ee(m,12,2.66,1,bC),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return In(ge({htmlFontSize:k,pxToRem:te,fontFamily:o,fontSize:l,fontWeightLight:h,fontWeightRegular:m,fontWeightMedium:c,fontWeightBold:b},de),O,{clone:!1})}const EB=.2,IB=.14,PB=.12;function Wr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${EB})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${IB})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${PB})`].join(",")}const AB=["none",Wr(0,2,1,-1,0,1,1,0,0,1,3,0),Wr(0,3,1,-2,0,2,2,0,0,1,5,0),Wr(0,3,3,-2,0,3,4,0,0,1,8,0),Wr(0,2,4,-1,0,4,5,0,0,1,10,0),Wr(0,3,5,-1,0,5,8,0,0,1,14,0),Wr(0,3,5,-1,0,6,10,0,0,1,18,0),Wr(0,4,5,-2,0,7,10,1,0,2,16,1),Wr(0,5,5,-3,0,8,10,1,0,3,14,2),Wr(0,5,6,-3,0,9,12,1,0,3,16,2),Wr(0,6,6,-3,0,10,14,1,0,4,18,3),Wr(0,6,7,-4,0,11,15,1,0,4,20,3),Wr(0,7,8,-4,0,12,17,2,0,5,22,4),Wr(0,7,8,-4,0,13,19,2,0,5,24,4),Wr(0,7,9,-4,0,14,21,2,0,5,26,4),Wr(0,8,9,-5,0,15,22,2,0,6,28,5),Wr(0,8,10,-5,0,16,24,2,0,6,30,5),Wr(0,8,11,-5,0,17,26,2,0,6,32,5),Wr(0,9,11,-5,0,18,28,2,0,7,34,6),Wr(0,9,12,-6,0,19,29,2,0,7,36,6),Wr(0,10,13,-6,0,20,31,3,0,8,38,7),Wr(0,10,13,-6,0,21,33,3,0,8,40,7),Wr(0,10,14,-6,0,22,35,3,0,8,42,7),Wr(0,11,14,-7,0,23,36,3,0,9,44,8),Wr(0,11,15,-7,0,24,38,3,0,9,46,8)],MB=["duration","easing","delay"],zB={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},jI={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function SC(e){return`${Math.round(e)}ms`}function LB(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function DB(e){const t=ge({},zB,e.easing),r=ge({},jI,e.duration);return ge({getAutoHeightDuration:LB,create:(l=["all"],h={})=>{const{duration:m=r.standard,easing:c=t.easeInOut,delay:b=0}=h;return Wt(h,MB),(Array.isArray(l)?l:[l]).map(k=>`${k} ${typeof m=="string"?m:SC(m)} ${c} ${typeof b=="string"?b:SC(b)}`).join(",")}},e,{easing:t,duration:r})}const RB={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},OB=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function B1(e={},...t){const{mixins:r={},palette:o={},transitions:l={},typography:h={}}=e,m=Wt(e,OB);if(e.vars)throw new Error(Dl(18));const c=CB(o),b=lp(e);let k=In(b,{mixins:QO(b.breakpoints,r),palette:c,shadows:AB.slice(),typography:NI(c,h),transitions:DB(l),zIndex:ge({},RB)});return k=In(k,m),k=t.reduce((A,R)=>In(A,R),k),k.unstable_sxConfig=ge({},Oc,m==null?void 0:m.unstable_sxConfig),k.unstable_sx=function(R){return Za({sx:R,theme:this})},k}const VI=B1();function Bb(){const e=Vy(VI);return e[x0]||e}var mp={},__={exports:{}},CC;function BB(){return CC||(CC=1,function(e){function t(r,o){if(r==null)return{};var l={};for(var h in r)if({}.hasOwnProperty.call(r,h)){if(o.includes(h))continue;l[h]=r[h]}return l}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(__)),__.exports}const $B=Bl(Jz),FB=Bl(Qz),NB=Bl(o3),jB=Bl(sL),VB=Bl(H3),UB=Bl(Y3);var Oh=LI;Object.defineProperty(mp,"__esModule",{value:!0});var GB=mp.default=n6;mp.shouldForwardProp=Cg;mp.systemDefaultTheme=void 0;var Go=Oh(Zk()),$1=Oh(BB()),kC=YB($B),HB=FB;Oh(NB);Oh(jB);var qB=Oh(VB),WB=Oh(UB);const ZB=["ownerState"],KB=["variants"],XB=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function UI(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(UI=function(o){return o?r:t})(e)}function YB(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=UI(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in e)if(h!=="default"&&Object.prototype.hasOwnProperty.call(e,h)){var m=l?Object.getOwnPropertyDescriptor(e,h):null;m&&(m.get||m.set)?Object.defineProperty(o,h,m):o[h]=e[h]}return o.default=e,r&&r.set(e,o),o}function JB(e){return Object.keys(e).length===0}function QB(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Cg(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const e6=mp.systemDefaultTheme=(0,qB.default)(),t6=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function tg({defaultTheme:e,theme:t,themeId:r}){return JB(t)?e:t[r]||t}function r6(e){return e?(t,r)=>r[e]:null}function kg(e,t){let{ownerState:r}=t,o=(0,$1.default)(t,ZB);const l=typeof e=="function"?e((0,Go.default)({ownerState:r},o)):e;if(Array.isArray(l))return l.flatMap(h=>kg(h,(0,Go.default)({ownerState:r},o)));if(l&&typeof l=="object"&&Array.isArray(l.variants)){const{variants:h=[]}=l;let c=(0,$1.default)(l,KB);return h.forEach(b=>{let k=!0;typeof b.props=="function"?k=b.props((0,Go.default)({ownerState:r},o,r)):Object.keys(b.props).forEach(A=>{(r==null?void 0:r[A])!==b.props[A]&&o[A]!==b.props[A]&&(k=!1)}),k&&(Array.isArray(c)||(c=[c]),c.push(typeof b.style=="function"?b.style((0,Go.default)({ownerState:r},o,r)):b.style))}),c}return l}function n6(e={}){const{themeId:t,defaultTheme:r=e6,rootShouldForwardProp:o=Cg,slotShouldForwardProp:l=Cg}=e,h=m=>(0,WB.default)((0,Go.default)({},m,{theme:tg((0,Go.default)({},m,{defaultTheme:r,themeId:t}))}));return h.__mui_systemSx=!0,(m,c={})=>{(0,kC.internal_processStyles)(m,ie=>ie.filter(F=>!(F!=null&&F.__mui_systemSx)));const{name:b,slot:k,skipVariantsResolver:A,skipSx:R,overridesResolver:O=r6(t6(k))}=c,Q=(0,$1.default)(c,XB),te=A!==void 0?A:k&&k!=="Root"&&k!=="root"||!1,ee=R||!1;let de,G=Cg;k==="Root"||k==="root"?G=o:k?G=l:QB(m)&&(G=void 0);const j=(0,kC.default)(m,(0,Go.default)({shouldForwardProp:G,label:de},Q)),U=ie=>typeof ie=="function"&&ie.__emotion_real!==ie||(0,HB.isPlainObject)(ie)?F=>kg(ie,(0,Go.default)({},F,{theme:tg({theme:F.theme,defaultTheme:r,themeId:t})})):ie,fe=(ie,...F)=>{let ce=U(ie);const Ce=F?F.map(U):[];b&&O&&Ce.push(Re=>{const We=tg((0,Go.default)({},Re,{defaultTheme:r,themeId:t}));if(!We.components||!We.components[b]||!We.components[b].styleOverrides)return null;const He=We.components[b].styleOverrides,Ze={};return Object.entries(He).forEach(([Ge,Fe])=>{Ze[Ge]=kg(Fe,(0,Go.default)({},Re,{theme:We}))}),O(Re,Ze)}),b&&!te&&Ce.push(Re=>{var We;const He=tg((0,Go.default)({},Re,{defaultTheme:r,themeId:t})),Ze=He==null||(We=He.components)==null||(We=We[b])==null?void 0:We.variants;return kg({variants:Ze},(0,Go.default)({},Re,{theme:He}))}),ee||Ce.push(h);const Ue=Ce.length-F.length;if(Array.isArray(ie)&&Ue>0){const Re=new Array(Ue).fill("");ce=[...ie,...Re],ce.raw=[...ie.raw,...Re]}const Ae=j(ce,...Ce);return m.muiName&&(Ae.muiName=m.muiName),Ae};return j.withConfig&&(fe.withConfig=j.withConfig),fe}}function i6(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const o6=e=>i6(e)&&e!=="classes",b0=GB({themeId:x0,defaultTheme:VI,rootShouldForwardProp:o6});function s6(e){var t;return!!e[0].match(/(cssVarPrefix|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const a6=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},l6=["colorSchemes","cssVarPrefix","shouldSkipGeneratingVar"],c6=["palette"],u6=[...Array(25)].map((e,t)=>{if(t===0)return;const r=a6(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function h6(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function Oe(e,t,r){!e[t]&&r&&(e[t]=r)}function df(e){return!e||!e.startsWith("hsl")?e:iB(e)}function Ea(e,t){`${t}Channel`in e||(e[`${t}Channel`]=th(df(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}const Xs=e=>{try{return e()}catch{}},d6=(e="mui")=>n0(e);function GI(e={},...t){var r,o,l,h,m,c;const{colorSchemes:b={},cssVarPrefix:k="mui",shouldSkipGeneratingVar:A=s6}=e,R=Wt(e,l6),O=d6(k),Q=B1(ge({},R,b.light&&{palette:(r=b.light)==null?void 0:r.palette})),{palette:te}=Q,ee=Wt(Q,c6),{palette:de}=B1({palette:ge({mode:"dark"},(o=b.dark)==null?void 0:o.palette)});let G=ge({},ee,{cssVarPrefix:k,getCssVar:O,colorSchemes:ge({},b,{light:ge({},b.light,{palette:te,opacity:ge({inputPlaceholder:.42,inputUnderline:.42,switchTrackDisabled:.12,switchTrack:.38},(l=b.light)==null?void 0:l.opacity),overlays:((h=b.light)==null?void 0:h.overlays)||[]}),dark:ge({},b.dark,{palette:de,opacity:ge({inputPlaceholder:.5,inputUnderline:.7,switchTrackDisabled:.2,switchTrack:.3},(m=b.dark)==null?void 0:m.opacity),overlays:((c=b.dark)==null?void 0:c.overlays)||u6})})});Object.keys(G.colorSchemes).forEach(ie=>{const F=G.colorSchemes[ie].palette,ce=Ce=>{const Ue=Ce.split("-"),Ae=Ue[1],Re=Ue[2];return O(Ce,F[Ae][Re])};if(ie==="light"?(Oe(F.common,"background","#fff"),Oe(F.common,"onBackground","#000")):(Oe(F.common,"background","#000"),Oe(F.common,"onBackground","#fff")),h6(F,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),ie==="light"){Oe(F.Alert,"errorColor",Ar(F.error.light,.6)),Oe(F.Alert,"infoColor",Ar(F.info.light,.6)),Oe(F.Alert,"successColor",Ar(F.success.light,.6)),Oe(F.Alert,"warningColor",Ar(F.warning.light,.6)),Oe(F.Alert,"errorFilledBg",ce("palette-error-main")),Oe(F.Alert,"infoFilledBg",ce("palette-info-main")),Oe(F.Alert,"successFilledBg",ce("palette-success-main")),Oe(F.Alert,"warningFilledBg",ce("palette-warning-main")),Oe(F.Alert,"errorFilledColor",Xs(()=>te.getContrastText(F.error.main))),Oe(F.Alert,"infoFilledColor",Xs(()=>te.getContrastText(F.info.main))),Oe(F.Alert,"successFilledColor",Xs(()=>te.getContrastText(F.success.main))),Oe(F.Alert,"warningFilledColor",Xs(()=>te.getContrastText(F.warning.main))),Oe(F.Alert,"errorStandardBg",Mr(F.error.light,.9)),Oe(F.Alert,"infoStandardBg",Mr(F.info.light,.9)),Oe(F.Alert,"successStandardBg",Mr(F.success.light,.9)),Oe(F.Alert,"warningStandardBg",Mr(F.warning.light,.9)),Oe(F.Alert,"errorIconColor",ce("palette-error-main")),Oe(F.Alert,"infoIconColor",ce("palette-info-main")),Oe(F.Alert,"successIconColor",ce("palette-success-main")),Oe(F.Alert,"warningIconColor",ce("palette-warning-main")),Oe(F.AppBar,"defaultBg",ce("palette-grey-100")),Oe(F.Avatar,"defaultBg",ce("palette-grey-400")),Oe(F.Button,"inheritContainedBg",ce("palette-grey-300")),Oe(F.Button,"inheritContainedHoverBg",ce("palette-grey-A100")),Oe(F.Chip,"defaultBorder",ce("palette-grey-400")),Oe(F.Chip,"defaultAvatarColor",ce("palette-grey-700")),Oe(F.Chip,"defaultIconColor",ce("palette-grey-700")),Oe(F.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Oe(F.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Oe(F.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Oe(F.LinearProgress,"primaryBg",Mr(F.primary.main,.62)),Oe(F.LinearProgress,"secondaryBg",Mr(F.secondary.main,.62)),Oe(F.LinearProgress,"errorBg",Mr(F.error.main,.62)),Oe(F.LinearProgress,"infoBg",Mr(F.info.main,.62)),Oe(F.LinearProgress,"successBg",Mr(F.success.main,.62)),Oe(F.LinearProgress,"warningBg",Mr(F.warning.main,.62)),Oe(F.Skeleton,"bg",`rgba(${ce("palette-text-primaryChannel")} / 0.11)`),Oe(F.Slider,"primaryTrack",Mr(F.primary.main,.62)),Oe(F.Slider,"secondaryTrack",Mr(F.secondary.main,.62)),Oe(F.Slider,"errorTrack",Mr(F.error.main,.62)),Oe(F.Slider,"infoTrack",Mr(F.info.main,.62)),Oe(F.Slider,"successTrack",Mr(F.success.main,.62)),Oe(F.Slider,"warningTrack",Mr(F.warning.main,.62));const Ce=eg(F.background.default,.8);Oe(F.SnackbarContent,"bg",Ce),Oe(F.SnackbarContent,"color",Xs(()=>te.getContrastText(Ce))),Oe(F.SpeedDialAction,"fabHoverBg",eg(F.background.paper,.15)),Oe(F.StepConnector,"border",ce("palette-grey-400")),Oe(F.StepContent,"border",ce("palette-grey-400")),Oe(F.Switch,"defaultColor",ce("palette-common-white")),Oe(F.Switch,"defaultDisabledColor",ce("palette-grey-100")),Oe(F.Switch,"primaryDisabledColor",Mr(F.primary.main,.62)),Oe(F.Switch,"secondaryDisabledColor",Mr(F.secondary.main,.62)),Oe(F.Switch,"errorDisabledColor",Mr(F.error.main,.62)),Oe(F.Switch,"infoDisabledColor",Mr(F.info.main,.62)),Oe(F.Switch,"successDisabledColor",Mr(F.success.main,.62)),Oe(F.Switch,"warningDisabledColor",Mr(F.warning.main,.62)),Oe(F.TableCell,"border",Mr(Qm(F.divider,1),.88)),Oe(F.Tooltip,"bg",Qm(F.grey[700],.92))}else{Oe(F.Alert,"errorColor",Mr(F.error.light,.6)),Oe(F.Alert,"infoColor",Mr(F.info.light,.6)),Oe(F.Alert,"successColor",Mr(F.success.light,.6)),Oe(F.Alert,"warningColor",Mr(F.warning.light,.6)),Oe(F.Alert,"errorFilledBg",ce("palette-error-dark")),Oe(F.Alert,"infoFilledBg",ce("palette-info-dark")),Oe(F.Alert,"successFilledBg",ce("palette-success-dark")),Oe(F.Alert,"warningFilledBg",ce("palette-warning-dark")),Oe(F.Alert,"errorFilledColor",Xs(()=>de.getContrastText(F.error.dark))),Oe(F.Alert,"infoFilledColor",Xs(()=>de.getContrastText(F.info.dark))),Oe(F.Alert,"successFilledColor",Xs(()=>de.getContrastText(F.success.dark))),Oe(F.Alert,"warningFilledColor",Xs(()=>de.getContrastText(F.warning.dark))),Oe(F.Alert,"errorStandardBg",Ar(F.error.light,.9)),Oe(F.Alert,"infoStandardBg",Ar(F.info.light,.9)),Oe(F.Alert,"successStandardBg",Ar(F.success.light,.9)),Oe(F.Alert,"warningStandardBg",Ar(F.warning.light,.9)),Oe(F.Alert,"errorIconColor",ce("palette-error-main")),Oe(F.Alert,"infoIconColor",ce("palette-info-main")),Oe(F.Alert,"successIconColor",ce("palette-success-main")),Oe(F.Alert,"warningIconColor",ce("palette-warning-main")),Oe(F.AppBar,"defaultBg",ce("palette-grey-900")),Oe(F.AppBar,"darkBg",ce("palette-background-paper")),Oe(F.AppBar,"darkColor",ce("palette-text-primary")),Oe(F.Avatar,"defaultBg",ce("palette-grey-600")),Oe(F.Button,"inheritContainedBg",ce("palette-grey-800")),Oe(F.Button,"inheritContainedHoverBg",ce("palette-grey-700")),Oe(F.Chip,"defaultBorder",ce("palette-grey-700")),Oe(F.Chip,"defaultAvatarColor",ce("palette-grey-300")),Oe(F.Chip,"defaultIconColor",ce("palette-grey-300")),Oe(F.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Oe(F.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Oe(F.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Oe(F.LinearProgress,"primaryBg",Ar(F.primary.main,.5)),Oe(F.LinearProgress,"secondaryBg",Ar(F.secondary.main,.5)),Oe(F.LinearProgress,"errorBg",Ar(F.error.main,.5)),Oe(F.LinearProgress,"infoBg",Ar(F.info.main,.5)),Oe(F.LinearProgress,"successBg",Ar(F.success.main,.5)),Oe(F.LinearProgress,"warningBg",Ar(F.warning.main,.5)),Oe(F.Skeleton,"bg",`rgba(${ce("palette-text-primaryChannel")} / 0.13)`),Oe(F.Slider,"primaryTrack",Ar(F.primary.main,.5)),Oe(F.Slider,"secondaryTrack",Ar(F.secondary.main,.5)),Oe(F.Slider,"errorTrack",Ar(F.error.main,.5)),Oe(F.Slider,"infoTrack",Ar(F.info.main,.5)),Oe(F.Slider,"successTrack",Ar(F.success.main,.5)),Oe(F.Slider,"warningTrack",Ar(F.warning.main,.5));const Ce=eg(F.background.default,.98);Oe(F.SnackbarContent,"bg",Ce),Oe(F.SnackbarContent,"color",Xs(()=>de.getContrastText(Ce))),Oe(F.SpeedDialAction,"fabHoverBg",eg(F.background.paper,.15)),Oe(F.StepConnector,"border",ce("palette-grey-600")),Oe(F.StepContent,"border",ce("palette-grey-600")),Oe(F.Switch,"defaultColor",ce("palette-grey-300")),Oe(F.Switch,"defaultDisabledColor",ce("palette-grey-600")),Oe(F.Switch,"primaryDisabledColor",Ar(F.primary.main,.55)),Oe(F.Switch,"secondaryDisabledColor",Ar(F.secondary.main,.55)),Oe(F.Switch,"errorDisabledColor",Ar(F.error.main,.55)),Oe(F.Switch,"infoDisabledColor",Ar(F.info.main,.55)),Oe(F.Switch,"successDisabledColor",Ar(F.success.main,.55)),Oe(F.Switch,"warningDisabledColor",Ar(F.warning.main,.55)),Oe(F.TableCell,"border",Ar(Qm(F.divider,1),.68)),Oe(F.Tooltip,"bg",Qm(F.grey[700],.92))}Ea(F.background,"default"),Ea(F.background,"paper"),Ea(F.common,"background"),Ea(F.common,"onBackground"),Ea(F,"divider"),Object.keys(F).forEach(Ce=>{const Ue=F[Ce];Ue&&typeof Ue=="object"&&(Ue.main&&Oe(F[Ce],"mainChannel",th(df(Ue.main))),Ue.light&&Oe(F[Ce],"lightChannel",th(df(Ue.light))),Ue.dark&&Oe(F[Ce],"darkChannel",th(df(Ue.dark))),Ue.contrastText&&Oe(F[Ce],"contrastTextChannel",th(df(Ue.contrastText))),Ce==="text"&&(Ea(F[Ce],"primary"),Ea(F[Ce],"secondary")),Ce==="action"&&(Ue.active&&Ea(F[Ce],"active"),Ue.selected&&Ea(F[Ce],"selected")))})}),G=t.reduce((ie,F)=>In(ie,F),G);const j={prefix:k,shouldSkipGeneratingVar:A},{vars:U,generateCssVars:fe}=_T(G,j);return G.vars=U,G.generateCssVars=fe,G.shouldSkipGeneratingVar=A,G.unstable_sxConfig=ge({},Oc,R==null?void 0:R.unstable_sxConfig),G.unstable_sx=function(F){return Za({sx:F,theme:this})},G}const f6=e=>[...[...Array(24)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r+1}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],of={attribute:"data-mui-color-scheme",colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},p6=GI(),{CssVarsProvider:m6,useColorScheme:YV,getInitColorSchemeScript:JV}=vT({themeId:x0,theme:p6,attribute:of.attribute,colorSchemeStorageKey:of.colorSchemeStorageKey,modeStorageKey:of.modeStorageKey,defaultColorScheme:{light:of.defaultLightColorScheme,dark:of.defaultDarkColorScheme},resolveTheme:e=>{const t=ge({},e,{typography:NI(e.palette,e.typography)});return t.unstable_sx=function(o){return Za({sx:o,theme:this})},t},excludeVariablesFromRoot:f6});function g6(e){return e}function y6(e){return e.length===0?g6:e.length===1?e[0]:function(r){return e.reduce((o,l)=>l(o),r)}}function HI(e){const t={subscribe(r){let o=null,l=!1,h=!1,m=!1;function c(){if(o===null){m=!0;return}h||(h=!0,typeof o=="function"?o():o&&o.unsubscribe())}return o=e({next(b){var k;l||(k=r.next)==null||k.call(r,b)},error(b){var k;l||(l=!0,(k=r.error)==null||k.call(r,b),c())},complete(){var b;l||(l=!0,(b=r.complete)==null||b.call(r),c())}}),m&&c(),{unsubscribe:c}},pipe(...r){return y6(r)(t)}};return t}function v6(e){return t=>{let r=0,o=null;const l=[];function h(){o||(o=t.subscribe({next(c){var b;for(const k of l)(b=k.next)==null||b.call(k,c)},error(c){var b;for(const k of l)(b=k.error)==null||b.call(k,c)},complete(){var c;for(const b of l)(c=b.complete)==null||c.call(b)}}))}function m(){if(r===0&&o){const c=o;o=null,c.unsubscribe()}}return{subscribe(c){return r++,l.push(c),h(),{unsubscribe(){r--,m();const b=l.findIndex(k=>k===c);b>-1&&l.splice(b,1)}}}}}}class $b extends Error{constructor(t){super(t),this.name="ObservableAbortError",Object.setPrototypeOf(this,$b.prototype)}}function _6(e){let t;return{promise:new Promise((o,l)=>{let h=!1;function m(){h||(h=!0,l(new $b("This operation was aborted.")),c.unsubscribe())}const c=e.subscribe({next(b){h=!0,o(b),m()},error(b){h=!0,l(b),m()},complete(){h=!0,m()}});t=m}),abort:t}}function x6(e){return HI(t=>{function r(l=0,h=e.op){const m=e.links[l];if(!m)throw new Error("No more links to execute - did you forget to add an ending link?");return m({op:h,next(b){return r(l+1,b)}})}return r().subscribe(t)})}function qI(e){const t=Object.create(null);for(const r in e){const o=e[r];t[o]=r}return t}const WI={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099};qI(WI);qI(WI);const ZI=()=>{};function KI(e,t){return new Proxy(ZI,{get(o,l){if(!(typeof l!="string"||l==="then"))return KI(e,[...t,l])},apply(o,l,h){const m=t[t.length-1]==="apply";return e({args:m?h.length>=2?h[1]:[]:h,path:m?t.slice(0,-1):t})}})}const b6=e=>KI(e,[]),w6=e=>new Proxy(ZI,{get(t,r){if(!(typeof r!="string"||r==="then"))return e(r)}});function S6(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}class C6 extends Error{}function k6(e){if(e instanceof Error)return e;const t=typeof e;if(!(t==="undefined"||t==="function"||e===null)){if(t!=="object")return new Error(String(e));if(S6(e)){const r=new C6;for(const o in e)r[o]=e[o];return r}}}function sy(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}function T6(e,t){if("error"in e){const o=t.transformer.deserialize(e.error);return{ok:!1,error:{...e,error:o}}}return{ok:!0,result:{...e.result,...(!e.result.type||e.result.type==="data")&&{type:"data",data:t.transformer.deserialize(e.result.data)}}}}class x_ extends Error{constructor(){super("Unable to transform response from server")}}function E6(e,t){let r;try{r=T6(e,t)}catch{throw new x_}if(!r.ok&&(!sy(r.error.error)||typeof r.error.error.code!="number"))throw new x_;if(r.ok&&!sy(r.result))throw new x_;return r}function I6(e){return e instanceof Ba||e instanceof Error&&e.name==="TRPCClientError"}function P6(e){return sy(e)&&sy(e.error)&&typeof e.error.code=="number"&&typeof e.error.message=="string"}class Ba extends Error{static from(t,r={}){const o=t;return I6(o)?(r.meta&&(o.meta={...o.meta,...r.meta}),o):P6(o)?new Ba(o.error.message,{...r,result:o}):o instanceof Error?new Ba(o.message,{...r,cause:k6(o)}):new Ba("Unknown error",{...r,cause:o})}constructor(t,r){var l,h;const o=r==null?void 0:r.cause;super(t,{cause:o}),this.meta=r==null?void 0:r.meta,this.cause=o,this.shape=(l=r==null?void 0:r.result)==null?void 0:l.error,this.data=(h=r==null?void 0:r.result)==null?void 0:h.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,Ba.prototype)}}/* istanbul ignore next -- @preserve */const A6=e=>e===0?0:Math.min(1e3*2**e,3e4);function M6(e){const{url:t,WebSocket:r=WebSocket,retryDelayMs:o=A6,onOpen:l,onClose:h}=e;/* istanbul ignore next -- @preserve */if(!r)throw new Error("No WebSocket implementation found - you probably don't want to use this on the server, but if you do you need to pass a `WebSocket`-ponyfill");let m=[];const c=Object.create(null);let b=0,k=null,A=null,R=fe(),O="connecting";function Q(){O!=="open"||k||(k=setTimeout(()=>{k=null,m.length===1?R.send(JSON.stringify(m.pop())):R.send(JSON.stringify(m)),m=[]}))}function te(){if(A!==null||O==="closed")return;const F=o(b++);de(F)}function ee(){O="connecting";const F=R;R=fe(),G(F)}function de(F){A||(O="connecting",A=setTimeout(ee,F))}function G(F){Object.values(c).some(Ce=>Ce.ws===F)||F.close()}function j(){Object.values(c).forEach(F=>{F.type==="subscription"&&F.callbacks.complete()})}function U(F){m.some(ce=>ce.id===F.op.id)||ie(F.op,F.callbacks)}function fe(){const F=typeof t=="function"?t():t,ce=new r(F);clearTimeout(A),A=null,ce.addEventListener("open",()=>{/* istanbul ignore next -- @preserve */ce===R&&(b=0,O="open",l==null||l(),Q())}),ce.addEventListener("error",()=>{ce===R&&te()});const Ce=Ae=>{if(Ae.method==="reconnect"&&ce===R){O==="open"&&(h==null||h()),ee();for(const Re of Object.values(c))Re.type==="subscription"&&U(Re)}},Ue=Ae=>{var We,He;const Re=Ae.id!==null&&c[Ae.id];if(Re){if((He=(We=Re.callbacks).next)==null||He.call(We,Ae),Re.ws!==R&&ce===R){const Ze=Re.ws;Re.ws=R,G(Ze)}"result"in Ae&&Ae.result.type==="stopped"&&ce===R&&Re.callbacks.complete()}};return ce.addEventListener("message",({data:Ae})=>{const Re=JSON.parse(Ae);"method"in Re?Ce(Re):Ue(Re),(ce!==R||O==="closed")&&G(ce)}),ce.addEventListener("close",({code:Ae})=>{var Re,We,He,Ze;O==="open"&&(h==null||h({code:Ae})),R===ce&&te();for(const[Ge,Fe]of Object.entries(c))if(Fe.ws===ce){if(O==="closed"){delete c[Ge],(We=(Re=Fe.callbacks).complete)==null||We.call(Re);continue}Fe.type==="subscription"?U(Fe):(delete c[Ge],(Ze=(He=Fe.callbacks).error)==null||Ze.call(He,Ba.from(new Fb("WebSocket closed prematurely"))))}}),ce}function ie(F,ce){const{type:Ce,input:Ue,path:Ae,id:Re}=F,We={id:Re,method:Ce,params:{input:Ue,path:Ae}};return c[Re]={ws:R,type:Ce,callbacks:ce,op:F},m.push(We),Q(),()=>{var Ze,Ge;const He=(Ze=c[Re])==null?void 0:Ze.callbacks;delete c[Re],m=m.filter(Fe=>Fe.id!==Re),(Ge=He==null?void 0:He.complete)==null||Ge.call(He),R.readyState===r.OPEN&&F.type==="subscription"&&(m.push({id:Re,method:"subscription.stop"}),Q())}}return{close:()=>{O="closed",h==null||h(),j(),G(R),clearTimeout(A),A=null},request:ie,getConnection(){return R}}}class Fb extends Error{constructor(t){super(t),this.name="TRPCWebSocketClosedError",Object.setPrototypeOf(this,Fb.prototype)}}function z6(e){return t=>{const{client:r}=e;return({op:o})=>HI(l=>{const{type:h,path:m,id:c,context:b}=o,k=t.transformer.serialize(o.input),A=r.request({type:h,path:m,input:k,id:c,context:b},{error(R){l.error(R),A()},complete(){l.complete()},next(R){const O=E6(R,t);if(!O.ok){l.error(Ba.from(O.error));return}l.next({result:O.result}),o.type!=="subscription"&&(A(),l.complete())}});return()=>{A()}})}}class L6{$request({type:t,input:r,path:o,context:l={}}){return x6({links:this.links,op:{id:++this.requestId,type:t,path:o,input:r,context:l}}).pipe(v6())}requestAsPromise(t){const r=this.$request(t),{promise:o,abort:l}=_6(r);return new Promise((m,c)=>{var b;(b=t.signal)==null||b.addEventListener("abort",l),o.then(k=>{m(k.result.data)}).catch(k=>{c(Ba.from(k))})})}query(t,r,o){return this.requestAsPromise({type:"query",path:t,input:r,context:o==null?void 0:o.context,signal:o==null?void 0:o.signal})}mutation(t,r,o){return this.requestAsPromise({type:"mutation",path:t,input:r,context:o==null?void 0:o.context,signal:o==null?void 0:o.signal})}subscription(t,r,o){return this.$request({type:"subscription",path:t,input:r,context:o==null?void 0:o.context}).subscribe({next(h){var m,c,b;h.result.type==="started"?(m=o.onStarted)==null||m.call(o):h.result.type==="stopped"?(c=o.onStopped)==null||c.call(o):(b=o.onData)==null||b.call(o,h.result.data)},error(h){var m;(m=o.onError)==null||m.call(o,h)},complete(){var h;(h=o.onComplete)==null||h.call(o)}})}constructor(t){this.requestId=0;const r=(()=>{const o=t.transformer;return o?"input"in o?t.transformer:{input:o,output:o}:{input:{serialize:l=>l,deserialize:l=>l},output:{serialize:l=>l,deserialize:l=>l}}})();this.runtime={transformer:{serialize:o=>r.input.serialize(o),deserialize:o=>r.output.deserialize(o)},combinedTransformer:r},this.links=t.links.map(o=>o(this.runtime))}}const D6={query:"query",mutate:"mutation",subscribe:"subscription"},R6=e=>D6[e];function O6(e){return w6(t=>e.hasOwnProperty(t)?e[t]:t==="__untypedClient"?e:b6(({path:r,args:o})=>{const l=[t,...r],h=R6(l.pop()),m=l.join(".");return e[h](m,...o)}))}function B6(e){const t=new L6(e);return O6(t)}function lr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(r.length?" "+r.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var $6={};function w0(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:$6}var XI=Object.assign,ay=Object.getOwnPropertyDescriptor,sa=Object.defineProperty,S0=Object.prototype,F1=[];Object.freeze(F1);var Nb={};Object.freeze(Nb);var F6=typeof Proxy<"u",N6=Object.toString();function YI(){F6||lr("Proxy not available")}function JI(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var rh=function(){};function Ls(e){return typeof e=="function"}function zc(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function C0(e){return e!==null&&typeof e=="object"}function qa(e){if(!C0(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r.toString()===N6}function QI(e){var t=e==null?void 0:e.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function gp(e,t,r){sa(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})}function e5(e,t,r){sa(e,t,{enumerable:!1,writable:!1,configurable:!0,value:r})}function Fc(e,t){var r="isMobX"+e;return t.prototype[r]=!0,function(o){return C0(o)&&o[r]===!0}}function Bh(e){return e!=null&&Object.prototype.toString.call(e)==="[object Map]"}function j6(e){var t=Object.getPrototypeOf(e),r=Object.getPrototypeOf(t),o=Object.getPrototypeOf(r);return o===null}function La(e){return e!=null&&Object.prototype.toString.call(e)==="[object Set]"}var t5=typeof Object.getOwnPropertySymbols<"u";function V6(e){var t=Object.keys(e);if(!t5)return t;var r=Object.getOwnPropertySymbols(e);return r.length?[].concat(t,r.filter(function(o){return S0.propertyIsEnumerable.call(e,o)})):t}var wh=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:t5?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function r5(e){return e===null?null:typeof e=="object"?""+e:e}function Na(e,t){return S0.hasOwnProperty.call(e,t)}var U6=Object.getOwnPropertyDescriptors||function(t){var r={};return wh(t).forEach(function(o){r[o]=ay(t,o)}),r};function _o(e,t){return!!(e&t)}function xo(e,t,r){return r?e|=t:e&=~t,e}function TC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function G6(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,q6(o.key),o)}}function $h(e,t,r){return t&&G6(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nh(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=W6(e))||t){r&&(e=r);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lc(){return Lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Lc.apply(null,arguments)}function n5(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,N1(e,t)}function N1(e,t){return N1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},N1(e,t)}function H6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function q6(e){var t=H6(e,"string");return typeof t=="symbol"?t:t+""}function W6(e,t){if(e){if(typeof e=="string")return TC(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?TC(e,t):void 0}}var ra=Symbol("mobx-stored-annotations");function aa(e){function t(r,o){if(vp(o))return e.decorate_20223_(r,o);yp(r,o,e)}return Object.assign(t,e)}function yp(e,t,r){Na(e,ra)||gp(e,ra,Lc({},e[ra])),r$(r)||(e[ra][t]=r)}function Z6(e){return Na(e,ra)||gp(e,ra,Lc({},e[ra])),e[ra]}function vp(e){return typeof e=="object"&&typeof e.kind=="string"}var Bt=Symbol("mobx administration"),Vl=function(){function e(r){r===void 0&&(r="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=fr.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=r}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(o){return o()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(o){return o()})},t.reportObserved=function(){return _5(this)},t.reportChanged=function(){Yo(),x5(this),Jo()},t.toString=function(){return this.name_},$h(e,[{key:"isBeingObserved",get:function(){return _o(this.flags_,e.isBeingObservedMask_)},set:function(o){this.flags_=xo(this.flags_,e.isBeingObservedMask_,o)}},{key:"isPendingUnobservation",get:function(){return _o(this.flags_,e.isPendingUnobservationMask_)},set:function(o){this.flags_=xo(this.flags_,e.isPendingUnobservationMask_,o)}},{key:"diffValue",get:function(){return _o(this.flags_,e.diffValueMask_)?1:0},set:function(o){this.flags_=xo(this.flags_,e.diffValueMask_,o===1)}}])}();Vl.isBeingObservedMask_=1;Vl.isPendingUnobservationMask_=2;Vl.diffValueMask_=4;var jb=Fc("Atom",Vl);function i5(e,t,r){t===void 0&&(t=rh),r===void 0&&(r=rh);var o=new Vl(e);return t!==rh&&aF(o,t),r!==rh&&T5(o,r),o}function K6(e,t){return e===t}function X6(e,t){return Wb(e,t)}function Y6(e,t){return Wb(e,t,1)}function J6(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Sh={identity:K6,structural:X6,default:J6,shallow:Y6};function Dc(e,t,r){return z5(e)?e:Array.isArray(e)?Kr.array(e,{name:r}):qa(e)?Kr.object(e,void 0,{name:r}):Bh(e)?Kr.map(e,{name:r}):La(e)?Kr.set(e,{name:r}):typeof e=="function"&&!tp(e)&&!rp(e)?QI(e)?Ch(e):ep(r,e):e}function Q6(e,t,r){if(e==null||M0(e)||A0(e)||jc(e)||ta(e))return e;if(Array.isArray(e))return Kr.array(e,{name:r,deep:!1});if(qa(e))return Kr.object(e,void 0,{name:r,deep:!1});if(Bh(e))return Kr.map(e,{name:r,deep:!1});if(La(e))return Kr.set(e,{name:r,deep:!1})}function k0(e){return e}function e$(e,t){return Wb(e,t)?t:e}var t$="override";function r$(e){return e.annotationType_===t$}function _p(e,t){return{annotationType_:e,options_:t,make_:n$,extend_:i$,decorate_20223_:o$}}function n$(e,t,r,o){var l;if((l=this.options_)!=null&&l.bound)return this.extend_(e,t,r,!1)===null?0:1;if(o===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if(tp(r.value))return 1;var h=o5(e,this,t,r,!1);return sa(o,t,h),2}function i$(e,t,r,o){var l=o5(e,this,t,r);return e.defineProperty_(t,l,o)}function o$(e,t){var r=t.kind,o=t.name,l=t.addInitializer,h=this,m=function(k){var A,R,O,Q;return Rc((A=(R=h.options_)==null?void 0:R.name)!=null?A:o.toString(),k,(O=(Q=h.options_)==null?void 0:Q.autoAction)!=null?O:!1)};if(r=="field")return function(b){var k,A=b;return tp(A)||(A=m(A)),(k=h.options_)!=null&&k.bound&&(A=A.bind(this),A.isMobxAction=!0),A};if(r=="method"){var c;return tp(e)||(e=m(e)),(c=this.options_)!=null&&c.bound&&l(function(){var b=this,k=b[o].bind(b);k.isMobxAction=!0,b[o]=k}),e}lr("Cannot apply '"+h.annotationType_+"' to '"+String(o)+"' (kind: "+r+"):"+(`
'`+h.annotationType_+"' can only be used on properties with a function value."))}function s$(e,t,r,o){t.annotationType_,o.value}function o5(e,t,r,o,l){var h,m,c,b,k,A,R;l===void 0&&(l=lt.safeDescriptors),s$(e,t,r,o);var O=o.value;if((h=t.options_)!=null&&h.bound){var Q;O=O.bind((Q=e.proxy_)!=null?Q:e.target_)}return{value:Rc((m=(c=t.options_)==null?void 0:c.name)!=null?m:r.toString(),O,(b=(k=t.options_)==null?void 0:k.autoAction)!=null?b:!1,(A=t.options_)!=null&&A.bound?(R=e.proxy_)!=null?R:e.target_:void 0),configurable:l?e.isPlainObject_:!0,enumerable:!1,writable:!l}}function s5(e,t){return{annotationType_:e,options_:t,make_:a$,extend_:l$,decorate_20223_:c$}}function a$(e,t,r,o){var l;if(o===e.target_)return this.extend_(e,t,r,!1)===null?0:2;if((l=this.options_)!=null&&l.bound&&(!Na(e.target_,t)||!rp(e.target_[t]))&&this.extend_(e,t,r,!1)===null)return 0;if(rp(r.value))return 1;var h=a5(e,this,t,r,!1,!1);return sa(o,t,h),2}function l$(e,t,r,o){var l,h=a5(e,this,t,r,(l=this.options_)==null?void 0:l.bound);return e.defineProperty_(t,h,o)}function c$(e,t){var r,o=t.name,l=t.addInitializer;return rp(e)||(e=Ch(e)),(r=this.options_)!=null&&r.bound&&l(function(){var h=this,m=h[o].bind(h);m.isMobXFlow=!0,h[o]=m}),e}function u$(e,t,r,o){t.annotationType_,o.value}function a5(e,t,r,o,l,h){h===void 0&&(h=lt.safeDescriptors),u$(e,t,r,o);var m=o.value;if(rp(m)||(m=Ch(m)),l){var c;m=m.bind((c=e.proxy_)!=null?c:e.target_),m.isMobXFlow=!0}return{value:m,configurable:h?e.isPlainObject_:!0,enumerable:!1,writable:!h}}function Vb(e,t){return{annotationType_:e,options_:t,make_:h$,extend_:d$,decorate_20223_:f$}}function h$(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function d$(e,t,r,o){return p$(e,this,t,r),e.defineComputedProperty_(t,Lc({},this.options_,{get:r.get,set:r.set}),o)}function f$(e,t){var r=this,o=t.name,l=t.addInitializer;return l(function(){var h=Vc(this)[Bt],m=Lc({},r.options_,{get:e,context:this});m.name||(m.name="ObservableObject."+o.toString()),h.values_.set(o,new Ds(m))}),function(){return this[Bt].getObservablePropValue_(o)}}function p$(e,t,r,o){t.annotationType_,o.get}function T0(e,t){return{annotationType_:e,options_:t,make_:m$,extend_:g$,decorate_20223_:y$}}function m$(e,t,r){return this.extend_(e,t,r,!1)===null?0:1}function g$(e,t,r,o){var l,h;return v$(e,this),e.defineObservableProperty_(t,r.value,(l=(h=this.options_)==null?void 0:h.enhancer)!=null?l:Dc,o)}function y$(e,t){var r=this,o=t.kind,l=t.name,h=new WeakSet;function m(c,b){var k,A,R=Vc(c)[Bt],O=new kc(b,(k=(A=r.options_)==null?void 0:A.enhancer)!=null?k:Dc,"ObservableObject."+l.toString(),!1);R.values_.set(l,O),h.add(c)}if(o=="accessor")return{get:function(){return h.has(this)||m(this,e.get.call(this)),this[Bt].getObservablePropValue_(l)},set:function(b){return h.has(this)||m(this,b),this[Bt].setObservablePropValue_(l,b)},init:function(b){return h.has(this)||m(this,b),b}}}function v$(e,t,r,o){t.annotationType_}var _$="true",x$=l5();function l5(e){return{annotationType_:_$,options_:e,make_:b$,extend_:w$,decorate_20223_:S$}}function b$(e,t,r,o){var l,h;if(r.get)return xp.make_(e,t,r,o);if(r.set){var m=Rc(t.toString(),r.set);return o===e.target_?e.defineProperty_(t,{configurable:lt.safeDescriptors?e.isPlainObject_:!0,set:m})===null?0:2:(sa(o,t,{configurable:!0,set:m}),2)}if(o!==e.target_&&typeof r.value=="function"){var c;if(QI(r.value)){var b,k=(b=this.options_)!=null&&b.autoBind?Ch.bound:Ch;return k.make_(e,t,r,o)}var A=(c=this.options_)!=null&&c.autoBind?ep.bound:ep;return A.make_(e,t,r,o)}var R=((l=this.options_)==null?void 0:l.deep)===!1?Kr.ref:Kr;if(typeof r.value=="function"&&(h=this.options_)!=null&&h.autoBind){var O;r.value=r.value.bind((O=e.proxy_)!=null?O:e.target_)}return R.make_(e,t,r,o)}function w$(e,t,r,o){var l,h;if(r.get)return xp.extend_(e,t,r,o);if(r.set)return e.defineProperty_(t,{configurable:lt.safeDescriptors?e.isPlainObject_:!0,set:Rc(t.toString(),r.set)},o);if(typeof r.value=="function"&&(l=this.options_)!=null&&l.autoBind){var m;r.value=r.value.bind((m=e.proxy_)!=null?m:e.target_)}var c=((h=this.options_)==null?void 0:h.deep)===!1?Kr.ref:Kr;return c.extend_(e,t,r,o)}function S$(e,t){lr("'"+this.annotationType_+"' cannot be used as a decorator")}var C$="observable",k$="observable.ref",T$="observable.shallow",E$="observable.struct",c5={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(c5);function rg(e){return e||c5}var j1=T0(C$),I$=T0(k$,{enhancer:k0}),P$=T0(T$,{enhancer:Q6}),A$=T0(E$,{enhancer:e$}),u5=aa(j1);function ng(e){return e.deep===!0?Dc:e.deep===!1?k0:z$(e.defaultDecorator)}function M$(e){var t;return e?(t=e.defaultDecorator)!=null?t:l5(e):void 0}function z$(e){var t,r;return e&&(t=(r=e.options_)==null?void 0:r.enhancer)!=null?t:Dc}function h5(e,t,r){if(vp(t))return j1.decorate_20223_(e,t);if(zc(t)){yp(e,t,j1);return}return z5(e)?e:qa(e)?Kr.object(e,t,r):Array.isArray(e)?Kr.array(e,t):Bh(e)?Kr.map(e,t):La(e)?Kr.set(e,t):typeof e=="object"&&e!==null?e:Kr.box(e,t)}XI(h5,u5);var L$={box:function(t,r){var o=rg(r);return new kc(t,ng(o),o.name,!0,o.equals)},array:function(t,r){var o=rg(r);return(lt.useProxies===!1||o.proxy===!1?AF:xF)(t,ng(o),o.name)},map:function(t,r){var o=rg(r);return new D5(t,ng(o),o.name)},set:function(t,r){var o=rg(r);return new R5(t,ng(o),o.name)},object:function(t,r,o){return Ul(function(){return P5(lt.useProxies===!1||(o==null?void 0:o.proxy)===!1?Vc({},o):gF({},o),t,r)})},ref:aa(I$),shallow:aa(P$),deep:u5,struct:aa(A$)},Kr=XI(h5,L$),d5="computed",D$="computed.struct",V1=Vb(d5),R$=Vb(D$,{equals:Sh.structural}),xp=function(t,r){if(vp(r))return V1.decorate_20223_(t,r);if(zc(r))return yp(t,r,V1);if(qa(t))return aa(Vb(d5,t));var o=qa(r)?r:{};return o.get=t,o.name||(o.name=t.name||""),new Ds(o)};Object.assign(xp,V1);xp.struct=aa(R$);var EC,IC,ly=0,O$=1,B$=(EC=(IC=ay(function(){},"name"))==null?void 0:IC.configurable)!=null?EC:!1,PC={value:"action",configurable:!0,writable:!1,enumerable:!1};function Rc(e,t,r,o){r===void 0&&(r=!1);function l(){return $$(e,r,t,o||this,arguments)}return l.isMobxAction=!0,l.toString=function(){return t.toString()},B$&&(PC.value=e,sa(l,"name",PC)),l}function $$(e,t,r,o,l){var h=F$(e,t);try{return r.apply(o,l)}catch(m){throw h.error_=m,m}finally{N$(h)}}function F$(e,t,r,o){var l=!1,h=0,m=lt.trackingDerivation,c=!t||!m;Yo();var b=lt.allowStateChanges;c&&(Nc(),b=E0(!0));var k=Ub(!0),A={runAsAction_:c,prevDerivation_:m,prevAllowStateChanges_:b,prevAllowStateReads_:k,notifySpy_:l,startTime_:h,actionId_:O$++,parentActionId_:ly};return ly=A.actionId_,A}function N$(e){ly!==e.actionId_&&lr(30),ly=e.parentActionId_,e.error_!==void 0&&(lt.suppressReactionErrors=!0),I0(e.prevAllowStateChanges_),kf(e.prevAllowStateReads_),Jo(),e.runAsAction_&&ja(e.prevDerivation_),lt.suppressReactionErrors=!1}function j$(e,t){var r=E0(e);try{return t()}finally{I0(r)}}function E0(e){var t=lt.allowStateChanges;return lt.allowStateChanges=e,t}function I0(e){lt.allowStateChanges=e}var kc=function(e){function t(o,l,h,m,c){var b;return h===void 0&&(h="ObservableValue"),c===void 0&&(c=Sh.default),b=e.call(this,h)||this,b.enhancer=void 0,b.name_=void 0,b.equals=void 0,b.hasUnreportedChange_=!1,b.interceptors_=void 0,b.changeListeners_=void 0,b.value_=void 0,b.dehancer=void 0,b.enhancer=l,b.name_=h,b.equals=c,b.value_=l(o,void 0,h),b}n5(t,e);var r=t.prototype;return r.dehanceValue=function(l){return this.dehancer!==void 0?this.dehancer(l):l},r.set=function(l){this.value_,l=this.prepareNewValue_(l),l!==lt.UNCHANGED&&this.setNewValue_(l)},r.prepareNewValue_=function(l){if(Zo(this)){var h=Ko(this,{object:this,type:la,newValue:l});if(!h)return lt.UNCHANGED;l=h.newValue}return l=this.enhancer(l,this.value_,this.name_),this.equals(this.value_,l)?lt.UNCHANGED:l},r.setNewValue_=function(l){var h=this.value_;this.value_=l,this.reportChanged(),Ps(this)&&As(this,{type:la,object:this,newValue:l,oldValue:h})},r.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},r.intercept_=function(l){return bp(this,l)},r.observe_=function(l,h){return h&&l({observableKind:"value",debugObjectName:this.name_,object:this,type:la,newValue:this.value_,oldValue:void 0}),wp(this,l)},r.raw=function(){return this.value_},r.toJSON=function(){return this.get()},r.toString=function(){return this.name_+"["+this.value_+"]"},r.valueOf=function(){return r5(this.get())},r[Symbol.toPrimitive]=function(){return this.valueOf()},t}(Vl),Ds=function(){function e(r){this.dependenciesState_=fr.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=fr.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new uy(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=cy.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,r.get||lr(31),this.derivation=r.get,this.name_=r.name||"ComputedValue",r.set&&(this.setter_=Rc("ComputedValue-setter",r.set)),this.equals_=r.equals||(r.compareStructural||r.struct?Sh.structural:Sh.default),this.scope_=r.context,this.requiresReaction_=r.requiresReaction,this.keepAlive_=!!r.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){q$(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(o){return o()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(o){return o()})},t.get=function(){if(this.isComputing&&lr(32,this.name_,this.derivation),lt.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)U1(this)&&(this.warnAboutUntrackedRead_(),Yo(),this.value_=this.computeValue_(!1),Jo());else if(_5(this),U1(this)){var o=lt.trackingContext;this.keepAlive_&&!o&&(lt.trackingContext=this),this.trackAndCompute()&&H$(this),lt.trackingContext=o}var l=this.value_;if(Tg(l))throw l.cause;return l},t.set=function(o){if(this.setter_){this.isRunningSetter&&lr(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,o)}finally{this.isRunningSetter=!1}}else lr(34,this.name_)},t.trackAndCompute=function(){var o=this.value_,l=this.dependenciesState_===fr.NOT_TRACKING_,h=this.computeValue_(!0),m=l||Tg(o)||Tg(h)||!this.equals_(o,h);return m&&(this.value_=h),m},t.computeValue_=function(o){this.isComputing=!0;var l=E0(!1),h;if(o)h=f5(this,this.derivation,this.scope_);else if(lt.disableErrorBoundaries===!0)h=this.derivation.call(this.scope_);else try{h=this.derivation.call(this.scope_)}catch(m){h=new uy(m)}return I0(l),this.isComputing=!1,h},t.suspend_=function(){this.keepAlive_||(G1(this),this.value_=void 0)},t.observe_=function(o,l){var h=this,m=!0,c=void 0;return rF(function(){var b=h.get();if(!m||l){var k=Nc();o({observableKind:"computed",debugObjectName:h.name_,type:la,object:h,newValue:b,oldValue:c}),ja(k)}m=!1,c=b})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return r5(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},$h(e,[{key:"isComputing",get:function(){return _o(this.flags_,e.isComputingMask_)},set:function(o){this.flags_=xo(this.flags_,e.isComputingMask_,o)}},{key:"isRunningSetter",get:function(){return _o(this.flags_,e.isRunningSetterMask_)},set:function(o){this.flags_=xo(this.flags_,e.isRunningSetterMask_,o)}},{key:"isBeingObserved",get:function(){return _o(this.flags_,e.isBeingObservedMask_)},set:function(o){this.flags_=xo(this.flags_,e.isBeingObservedMask_,o)}},{key:"isPendingUnobservation",get:function(){return _o(this.flags_,e.isPendingUnobservationMask_)},set:function(o){this.flags_=xo(this.flags_,e.isPendingUnobservationMask_,o)}},{key:"diffValue",get:function(){return _o(this.flags_,e.diffValueMask_)?1:0},set:function(o){this.flags_=xo(this.flags_,e.diffValueMask_,o===1)}}])}();Ds.isComputingMask_=1;Ds.isRunningSetterMask_=2;Ds.isBeingObservedMask_=4;Ds.isPendingUnobservationMask_=8;Ds.diffValueMask_=16;var P0=Fc("ComputedValue",Ds),fr;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(fr||(fr={}));var cy;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(cy||(cy={}));var uy=function(t){this.cause=void 0,this.cause=t};function Tg(e){return e instanceof uy}function U1(e){switch(e.dependenciesState_){case fr.UP_TO_DATE_:return!1;case fr.NOT_TRACKING_:case fr.STALE_:return!0;case fr.POSSIBLY_STALE_:{for(var t=Ub(!0),r=Nc(),o=e.observing_,l=o.length,h=0;h<l;h++){var m=o[h];if(P0(m)){if(lt.disableErrorBoundaries)m.get();else try{m.get()}catch{return ja(r),kf(t),!0}if(e.dependenciesState_===fr.STALE_)return ja(r),kf(t),!0}}return m5(e),ja(r),kf(t),!1}}}function f5(e,t,r){var o=Ub(!0);m5(e),e.newObserving_=new Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++lt.runId;var l=lt.trackingDerivation;lt.trackingDerivation=e,lt.inBatch++;var h;if(lt.disableErrorBoundaries===!0)h=t.call(r);else try{h=t.call(r)}catch(m){h=new uy(m)}return lt.inBatch--,lt.trackingDerivation=l,V$(e),kf(o),h}function V$(e){for(var t=e.observing_,r=e.observing_=e.newObserving_,o=fr.UP_TO_DATE_,l=0,h=e.unboundDepsCount_,m=0;m<h;m++){var c=r[m];c.diffValue===0&&(c.diffValue=1,l!==m&&(r[l]=c),l++),c.dependenciesState_>o&&(o=c.dependenciesState_)}for(r.length=l,e.newObserving_=null,h=t.length;h--;){var b=t[h];b.diffValue===0&&y5(b,e),b.diffValue=0}for(;l--;){var k=r[l];k.diffValue===1&&(k.diffValue=0,G$(k,e))}o!==fr.UP_TO_DATE_&&(e.dependenciesState_=o,e.onBecomeStale_())}function G1(e){var t=e.observing_;e.observing_=[];for(var r=t.length;r--;)y5(t[r],e);e.dependenciesState_=fr.NOT_TRACKING_}function p5(e){var t=Nc();try{return e()}finally{ja(t)}}function Nc(){var e=lt.trackingDerivation;return lt.trackingDerivation=null,e}function ja(e){lt.trackingDerivation=e}function Ub(e){var t=lt.allowStateReads;return lt.allowStateReads=e,t}function kf(e){lt.allowStateReads=e}function m5(e){if(e.dependenciesState_!==fr.UP_TO_DATE_){e.dependenciesState_=fr.UP_TO_DATE_;for(var t=e.observing_,r=t.length;r--;)t[r].lowestObserverState_=fr.UP_TO_DATE_}}var Eg=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Ig=!0,g5=!1,lt=function(){var e=w0();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Ig=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new Eg().version&&(Ig=!1),Ig?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Eg):(setTimeout(function(){g5||lr(35)},1),new Eg)}();function U$(){if((lt.pendingReactions.length||lt.inBatch||lt.isRunningReactions)&&lr(36),g5=!0,Ig){var e=w0();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),lt=new Eg}}function G$(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function y5(e,t){e.observers_.delete(t),e.observers_.size===0&&v5(e)}function v5(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,lt.pendingUnobservations.push(e))}function Yo(){lt.inBatch++}function Jo(){if(--lt.inBatch===0){b5();for(var e=lt.pendingUnobservations,t=0;t<e.length;t++){var r=e[t];r.isPendingUnobservation=!1,r.observers_.size===0&&(r.isBeingObserved&&(r.isBeingObserved=!1,r.onBUO()),r instanceof Ds&&r.suspend_())}lt.pendingUnobservations=[]}}function _5(e){var t=lt.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&lt.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(e.observers_.size===0&&lt.inBatch>0&&v5(e),!1)}function x5(e){e.lowestObserverState_!==fr.STALE_&&(e.lowestObserverState_=fr.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===fr.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=fr.STALE_}))}function H$(e){e.lowestObserverState_!==fr.STALE_&&(e.lowestObserverState_=fr.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===fr.POSSIBLY_STALE_?t.dependenciesState_=fr.STALE_:t.dependenciesState_===fr.UP_TO_DATE_&&(e.lowestObserverState_=fr.UP_TO_DATE_)}))}function q$(e){e.lowestObserverState_===fr.UP_TO_DATE_&&(e.lowestObserverState_=fr.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===fr.UP_TO_DATE_&&(t.dependenciesState_=fr.POSSIBLY_STALE_,t.onBecomeStale_())}))}var ca=function(){function e(r,o,l,h){r===void 0&&(r="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=fr.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=cy.NONE,this.name_=r,this.onInvalidate_=o,this.errorHandler_=l,this.requiresObservable_=h}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled||(this.isScheduled=!0,lt.pendingReactions.push(this),b5())},t.runReaction_=function(){if(!this.isDisposed){Yo(),this.isScheduled=!1;var o=lt.trackingContext;if(lt.trackingContext=this,U1(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(l){this.reportExceptionInDerivation_(l)}}lt.trackingContext=o,Jo()}},t.track=function(o){if(!this.isDisposed){Yo(),this.isRunning=!0;var l=lt.trackingContext;lt.trackingContext=this;var h=f5(this,o,void 0);lt.trackingContext=l,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&G1(this),Tg(h)&&this.reportExceptionInDerivation_(h.cause),Jo()}},t.reportExceptionInDerivation_=function(o){var l=this;if(this.errorHandler_){this.errorHandler_(o,this);return}if(lt.disableErrorBoundaries)throw o;var h="[mobx] uncaught error in '"+this+"'";lt.suppressReactionErrors||console.error(h,o),lt.globalReactionErrorHandlers.forEach(function(m){return m(o,l)})},t.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(Yo(),G1(this),Jo()))},t.getDisposer_=function(o){var l=this,h=function m(){l.dispose(),o==null||o.removeEventListener==null||o.removeEventListener("abort",m)};return o==null||o.addEventListener==null||o.addEventListener("abort",h),h[Bt]=this,h},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(o){},$h(e,[{key:"isDisposed",get:function(){return _o(this.flags_,e.isDisposedMask_)},set:function(o){this.flags_=xo(this.flags_,e.isDisposedMask_,o)}},{key:"isScheduled",get:function(){return _o(this.flags_,e.isScheduledMask_)},set:function(o){this.flags_=xo(this.flags_,e.isScheduledMask_,o)}},{key:"isTrackPending",get:function(){return _o(this.flags_,e.isTrackPendingMask_)},set:function(o){this.flags_=xo(this.flags_,e.isTrackPendingMask_,o)}},{key:"isRunning",get:function(){return _o(this.flags_,e.isRunningMask_)},set:function(o){this.flags_=xo(this.flags_,e.isRunningMask_,o)}},{key:"diffValue",get:function(){return _o(this.flags_,e.diffValueMask_)?1:0},set:function(o){this.flags_=xo(this.flags_,e.diffValueMask_,o===1)}}])}();ca.isDisposedMask_=1;ca.isScheduledMask_=2;ca.isTrackPendingMask_=4;ca.isRunningMask_=8;ca.diffValueMask_=16;var W$=100,H1=function(t){return t()};function b5(){lt.inBatch>0||lt.isRunningReactions||H1(Z$)}function Z$(){lt.isRunningReactions=!0;for(var e=lt.pendingReactions,t=0;e.length>0;){++t===W$&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var r=e.splice(0),o=0,l=r.length;o<l;o++)r[o].runReaction_()}lt.isRunningReactions=!1}var hy=Fc("Reaction",ca);function K$(e){var t=H1;H1=function(o){return e(function(){return t(o)})}}function Tf(){return!1}function X$(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var w5="action",Y$="action.bound",S5="autoAction",J$="autoAction.bound",Q$="<unnamed action>",q1=_p(w5),eF=_p(Y$,{bound:!0}),W1=_p(S5,{autoAction:!0}),tF=_p(J$,{autoAction:!0,bound:!0});function C5(e){var t=function(o,l){if(Ls(o))return Rc(o.name||Q$,o,e);if(Ls(l))return Rc(o,l,e);if(vp(l))return(e?W1:q1).decorate_20223_(o,l);if(zc(l))return yp(o,l,e?W1:q1);if(zc(o))return aa(_p(e?S5:w5,{name:o,autoAction:e}))};return t}var dr=C5(!1);Object.assign(dr,q1);var ep=C5(!0);Object.assign(ep,W1);dr.bound=aa(eF);ep.bound=aa(tF);function tp(e){return Ls(e)&&e.isMobxAction===!0}function rF(e,t){var r,o,l,h;t===void 0&&(t=Nb);var m=(r=(o=t)==null?void 0:o.name)!=null?r:"Autorun",c=!t.scheduler&&!t.delay,b;if(c)b=new ca(m,function(){this.track(R)},t.onError,t.requiresObservable);else{var k=k5(t),A=!1;b=new ca(m,function(){A||(A=!0,k(function(){A=!1,b.isDisposed||b.track(R)}))},t.onError,t.requiresObservable)}function R(){e(b)}return(l=t)!=null&&(l=l.signal)!=null&&l.aborted||b.schedule_(),b.getDisposer_((h=t)==null?void 0:h.signal)}var nF=function(t){return t()};function k5(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:nF}function b_(e,t,r){var o,l,h;r===void 0&&(r=Nb);var m=(o=r.name)!=null?o:"Reaction",c=dr(m,r.onError?iF(r.onError,t):t),b=!r.scheduler&&!r.delay,k=k5(r),A=!0,R=!1,O,Q=r.compareStructural?Sh.structural:r.equals||Sh.default,te=new ca(m,function(){A||b?ee():R||(R=!0,k(ee))},r.onError,r.requiresObservable);function ee(){if(R=!1,!te.isDisposed){var de=!1,G=O;te.track(function(){var j=j$(!1,function(){return e(te)});de=A||!Q(O,j),O=j}),(A&&r.fireImmediately||!A&&de)&&c(O,G,te),A=!1}}return(l=r)!=null&&(l=l.signal)!=null&&l.aborted||te.schedule_(),te.getDisposer_((h=r)==null?void 0:h.signal)}function iF(e,t){return function(){try{return t.apply(this,arguments)}catch(r){e.call(this,r)}}}var oF="onBO",sF="onBUO";function aF(e,t,r){return E5(oF,e,t,r)}function T5(e,t,r){return E5(sF,e,t,r)}function E5(e,t,r,o){var l=py(t),h=Ls(o)?o:r,m=e+"L";return l[m]?l[m].add(h):l[m]=new Set([h]),function(){var c=l[m];c&&(c.delete(h),c.size===0&&delete l[m])}}var lF="never",ig="always",cF="observed";function I5(e){e.isolateGlobalState===!0&&U$();var t=e.useProxies,r=e.enforceActions;if(t!==void 0&&(lt.useProxies=t===ig?!0:t===lF?!1:typeof Proxy<"u"),t==="ifavailable"&&(lt.verifyProxies=!0),r!==void 0){var o=r===ig?ig:r===cF;lt.enforceActions=o,lt.allowStateChanges=!(o===!0||o===ig)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(l){l in e&&(lt[l]=!!e[l])}),lt.allowStateReads=!lt.observableRequiresReaction,e.reactionScheduler&&K$(e.reactionScheduler)}function P5(e,t,r,o){var l=U6(t);return Ul(function(){var h=Vc(e,o)[Bt];wh(l).forEach(function(m){h.extend_(m,l[m],r&&m in r?r[m]:!0)})}),e}function uF(e,t){return A5(py(e,t))}function A5(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=hF(e.observing_).map(A5)),t}function hF(e){return Array.from(new Set(e))}var dF=0;function M5(){this.message="FLOW_CANCELLED"}M5.prototype=Object.create(Error.prototype);var w_=s5("flow"),fF=s5("flow.bound",{bound:!0}),Ch=Object.assign(function(t,r){if(vp(r))return w_.decorate_20223_(t,r);if(zc(r))return yp(t,r,w_);var o=t,l=o.name||"<unnamed flow>",h=function(){var c=this,b=arguments,k=++dF,A=dr(l+" - runid: "+k+" - init",o).apply(c,b),R,O=void 0,Q=new Promise(function(te,ee){var de=0;R=ee;function G(fe){O=void 0;var ie;try{ie=dr(l+" - runid: "+k+" - yield "+de++,A.next).call(A,fe)}catch(F){return ee(F)}U(ie)}function j(fe){O=void 0;var ie;try{ie=dr(l+" - runid: "+k+" - yield "+de++,A.throw).call(A,fe)}catch(F){return ee(F)}U(ie)}function U(fe){if(Ls(fe==null?void 0:fe.then)){fe.then(U,ee);return}return fe.done?te(fe.value):(O=Promise.resolve(fe.value),O.then(G,j))}G(void 0)});return Q.cancel=dr(l+" - runid: "+k+" - cancel",function(){try{O&&AC(O);var te=A.return(void 0),ee=Promise.resolve(te.value);ee.then(rh,rh),AC(ee),R(new M5)}catch(de){R(de)}}),Q};return h.isMobXFlow=!0,h},w_);Ch.bound=aa(fF);function AC(e){Ls(e.cancel)&&e.cancel()}function rp(e){return(e==null?void 0:e.isMobXFlow)===!0}function pF(e,t){return e?M0(e)||!!e[Bt]||jb(e)||hy(e)||P0(e):!1}function z5(e){return pF(e)}function Da(e,t){t===void 0&&(t=void 0),Yo();try{return e.apply(t)}finally{Jo()}}function Ou(e){return e[Bt]}var mF={has:function(t,r){return Ou(t).has_(r)},get:function(t,r){return Ou(t).get_(r)},set:function(t,r,o){var l;return zc(r)?(l=Ou(t).set_(r,o,!0))!=null?l:!0:!1},deleteProperty:function(t,r){var o;return zc(r)?(o=Ou(t).delete_(r,!0))!=null?o:!0:!1},defineProperty:function(t,r,o){var l;return(l=Ou(t).defineProperty_(r,o))!=null?l:!0},ownKeys:function(t){return Ou(t).ownKeys_()},preventExtensions:function(t){lr(13)}};function gF(e,t){var r,o;return YI(),e=Vc(e,t),(o=(r=e[Bt]).proxy_)!=null?o:r.proxy_=new Proxy(e,mF)}function Zo(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function bp(e,t){var r=e.interceptors_||(e.interceptors_=[]);return r.push(t),JI(function(){var o=r.indexOf(t);o!==-1&&r.splice(o,1)})}function Ko(e,t){var r=Nc();try{for(var o=[].concat(e.interceptors_||[]),l=0,h=o.length;l<h&&(t=o[l](t),t&&!t.type&&lr(14),!!t);l++);return t}finally{ja(r)}}function Ps(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function wp(e,t){var r=e.changeListeners_||(e.changeListeners_=[]);return r.push(t),JI(function(){var o=r.indexOf(t);o!==-1&&r.splice(o,1)})}function As(e,t){var r=Nc(),o=e.changeListeners_;if(o){o=o.slice();for(var l=0,h=o.length;l<h;l++)o[l](t);ja(r)}}function yF(e,t,r){return Ul(function(){var o,l=Vc(e,r)[Bt];(o=t)!=null||(t=Z6(e)),wh(t).forEach(function(h){return l.make_(h,t[h])})}),e}var S_=Symbol("mobx-keys");function Gb(e,t,r){return qa(e)?P5(e,e,t,r):(Ul(function(){var o=Vc(e,r)[Bt];if(!e[S_]){var l=Object.getPrototypeOf(e),h=new Set([].concat(wh(e),wh(l)));h.delete("constructor"),h.delete(Bt),gp(l,S_,h)}e[S_].forEach(function(m){return o.make_(m,t&&m in t?t[m]:!0)})}),e)}var MC="splice",la="update",vF=1e4,_F={get:function(t,r){var o=t[Bt];return r===Bt?o:r==="length"?o.getArrayLength_():typeof r=="string"&&!isNaN(r)?o.get_(parseInt(r)):Na(dy,r)?dy[r]:t[r]},set:function(t,r,o){var l=t[Bt];return r==="length"&&l.setArrayLength_(o),typeof r=="symbol"||isNaN(r)?t[r]=o:l.set_(parseInt(r),o),!0},preventExtensions:function(){lr(15)}},Hb=function(){function e(r,o,l,h){r===void 0&&(r="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=l,this.legacyMode_=h,this.atom_=new Vl(r),this.enhancer_=function(m,c){return o(m,c,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(o){return this.dehancer!==void 0?this.dehancer(o):o},t.dehanceValues_=function(o){return this.dehancer!==void 0&&o.length>0?o.map(this.dehancer):o},t.intercept_=function(o){return bp(this,o)},t.observe_=function(o,l){return l===void 0&&(l=!1),l&&o({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),wp(this,o)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(o){(typeof o!="number"||isNaN(o)||o<0)&&lr("Out of range: "+o);var l=this.values_.length;if(o!==l)if(o>l){for(var h=new Array(o-l),m=0;m<o-l;m++)h[m]=void 0;this.spliceWithArray_(l,0,h)}else this.spliceWithArray_(o,l-o)},t.updateArrayLength_=function(o,l){o!==this.lastKnownLength_&&lr(16),this.lastKnownLength_+=l,this.legacyMode_&&l>0&&F5(o+l+1)},t.spliceWithArray_=function(o,l,h){var m=this;this.atom_;var c=this.values_.length;if(o===void 0?o=0:o>c?o=c:o<0&&(o=Math.max(0,c+o)),arguments.length===1?l=c-o:l==null?l=0:l=Math.max(0,Math.min(l,c-o)),h===void 0&&(h=F1),Zo(this)){var b=Ko(this,{object:this.proxy_,type:MC,index:o,removedCount:l,added:h});if(!b)return F1;l=b.removedCount,h=b.added}if(h=h.length===0?h:h.map(function(R){return m.enhancer_(R,void 0)}),this.legacyMode_){var k=h.length-l;this.updateArrayLength_(c,k)}var A=this.spliceItemsIntoValues_(o,l,h);return(l!==0||h.length!==0)&&this.notifyArraySplice_(o,h,A),this.dehanceValues_(A)},t.spliceItemsIntoValues_=function(o,l,h){if(h.length<vF){var m;return(m=this.values_).splice.apply(m,[o,l].concat(h))}else{var c=this.values_.slice(o,o+l),b=this.values_.slice(o+l);this.values_.length+=h.length-l;for(var k=0;k<h.length;k++)this.values_[o+k]=h[k];for(var A=0;A<b.length;A++)this.values_[o+h.length+A]=b[A];return c}},t.notifyArrayChildUpdate_=function(o,l,h){var m=!this.owned_&&Tf(),c=Ps(this),b=c||m?{observableKind:"array",object:this.proxy_,type:la,debugObjectName:this.atom_.name_,index:o,newValue:l,oldValue:h}:null;this.atom_.reportChanged(),c&&As(this,b)},t.notifyArraySplice_=function(o,l,h){var m=!this.owned_&&Tf(),c=Ps(this),b=c||m?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:MC,index:o,removed:h,added:l,removedCount:h.length,addedCount:l.length}:null;this.atom_.reportChanged(),c&&As(this,b)},t.get_=function(o){if(this.legacyMode_&&o>=this.values_.length){console.warn("[mobx] Out of bounds read: "+o);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[o])},t.set_=function(o,l){var h=this.values_;if(this.legacyMode_&&o>h.length&&lr(17,o,h.length),o<h.length){this.atom_;var m=h[o];if(Zo(this)){var c=Ko(this,{type:la,object:this.proxy_,index:o,newValue:l});if(!c)return;l=c.newValue}l=this.enhancer_(l,m);var b=l!==m;b&&(h[o]=l,this.notifyArrayChildUpdate_(o,l,m))}else{for(var k=new Array(o+1-h.length),A=0;A<k.length-1;A++)k[A]=void 0;k[k.length-1]=l,this.spliceWithArray_(h.length,0,k)}},e}();function xF(e,t,r,o){return r===void 0&&(r="ObservableArray"),o===void 0&&(o=!1),YI(),Ul(function(){var l=new Hb(r,t,o,!1);e5(l.values_,Bt,l);var h=new Proxy(l.values_,_F);return l.proxy_=h,e&&e.length&&l.spliceWithArray_(0,0,e),h})}var dy={clear:function(){return this.splice(0)},replace:function(t){var r=this[Bt];return r.spliceWithArray_(0,r.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,r){for(var o=arguments.length,l=new Array(o>2?o-2:0),h=2;h<o;h++)l[h-2]=arguments[h];var m=this[Bt];switch(arguments.length){case 0:return[];case 1:return m.spliceWithArray_(t);case 2:return m.spliceWithArray_(t,r)}return m.spliceWithArray_(t,r,l)},spliceWithArray:function(t,r,o){return this[Bt].spliceWithArray_(t,r,o)},push:function(){for(var t=this[Bt],r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return t.spliceWithArray_(t.values_.length,0,o),t.values_.length},pop:function(){return this.splice(Math.max(this[Bt].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[Bt],r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return t.spliceWithArray_(0,0,o),t.values_.length},reverse:function(){return lt.trackingDerivation&&lr(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){lt.trackingDerivation&&lr(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var r=this[Bt],o=r.dehanceValues_(r.values_).indexOf(t);return o>-1?(this.splice(o,1),!0):!1}};$r("at",zo);$r("concat",zo);$r("flat",zo);$r("includes",zo);$r("indexOf",zo);$r("join",zo);$r("lastIndexOf",zo);$r("slice",zo);$r("toString",zo);$r("toLocaleString",zo);$r("toSorted",zo);$r("toSpliced",zo);$r("with",zo);$r("every",Os);$r("filter",Os);$r("find",Os);$r("findIndex",Os);$r("findLast",Os);$r("findLastIndex",Os);$r("flatMap",Os);$r("forEach",Os);$r("map",Os);$r("some",Os);$r("toReversed",Os);$r("reduce",L5);$r("reduceRight",L5);function $r(e,t){typeof Array.prototype[e]=="function"&&(dy[e]=t(e))}function zo(e){return function(){var t=this[Bt];t.atom_.reportObserved();var r=t.dehanceValues_(t.values_);return r[e].apply(r,arguments)}}function Os(e){return function(t,r){var o=this,l=this[Bt];l.atom_.reportObserved();var h=l.dehanceValues_(l.values_);return h[e](function(m,c){return t.call(r,m,c,o)})}}function L5(e){return function(){var t=this,r=this[Bt];r.atom_.reportObserved();var o=r.dehanceValues_(r.values_),l=arguments[0];return arguments[0]=function(h,m,c){return l(h,m,c,t)},o[e].apply(o,arguments)}}var bF=Fc("ObservableArrayAdministration",Hb);function A0(e){return C0(e)&&bF(e[Bt])}var wF={},Cl="add",fy="delete",D5=function(){function e(r,o,l){var h=this;o===void 0&&(o=Dc),l===void 0&&(l="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Bt]=wF,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=o,this.name_=l,Ls(Map)||lr(18),Ul(function(){h.keysAtom_=i5("ObservableMap.keys()"),h.data_=new Map,h.hasMap_=new Map,r&&h.merge(r)})}var t=e.prototype;return t.has_=function(o){return this.data_.has(o)},t.has=function(o){var l=this;if(!lt.trackingDerivation)return this.has_(o);var h=this.hasMap_.get(o);if(!h){var m=h=new kc(this.has_(o),k0,"ObservableMap.key?",!1);this.hasMap_.set(o,m),T5(m,function(){return l.hasMap_.delete(o)})}return h.get()},t.set=function(o,l){var h=this.has_(o);if(Zo(this)){var m=Ko(this,{type:h?la:Cl,object:this,newValue:l,name:o});if(!m)return this;l=m.newValue}return h?this.updateValue_(o,l):this.addValue_(o,l),this},t.delete=function(o){var l=this;if(this.keysAtom_,Zo(this)){var h=Ko(this,{type:fy,object:this,name:o});if(!h)return!1}if(this.has_(o)){var m=Tf(),c=Ps(this),b=c||m?{observableKind:"map",debugObjectName:this.name_,type:fy,object:this,oldValue:this.data_.get(o).value_,name:o}:null;return Da(function(){var k;l.keysAtom_.reportChanged(),(k=l.hasMap_.get(o))==null||k.setNewValue_(!1);var A=l.data_.get(o);A.setNewValue_(void 0),l.data_.delete(o)}),c&&As(this,b),!0}return!1},t.updateValue_=function(o,l){var h=this.data_.get(o);if(l=h.prepareNewValue_(l),l!==lt.UNCHANGED){var m=Tf(),c=Ps(this),b=c||m?{observableKind:"map",debugObjectName:this.name_,type:la,object:this,oldValue:h.value_,name:o,newValue:l}:null;h.setNewValue_(l),c&&As(this,b)}},t.addValue_=function(o,l){var h=this;this.keysAtom_,Da(function(){var k,A=new kc(l,h.enhancer_,"ObservableMap.key",!1);h.data_.set(o,A),l=A.value_,(k=h.hasMap_.get(o))==null||k.setNewValue_(!0),h.keysAtom_.reportChanged()});var m=Tf(),c=Ps(this),b=c||m?{observableKind:"map",debugObjectName:this.name_,type:Cl,object:this,name:o,newValue:l}:null;c&&As(this,b)},t.get=function(o){return this.has(o)?this.dehanceValue_(this.data_.get(o).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(o){return this.dehancer!==void 0?this.dehancer(o):o},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var o=this,l=this.keys();return zC({next:function(){var m=l.next(),c=m.done,b=m.value;return{done:c,value:c?void 0:o.get(b)}}})},t.entries=function(){var o=this,l=this.keys();return zC({next:function(){var m=l.next(),c=m.done,b=m.value;return{done:c,value:c?void 0:[b,o.get(b)]}}})},t[Symbol.iterator]=function(){return this.entries()},t.forEach=function(o,l){for(var h=nh(this),m;!(m=h()).done;){var c=m.value,b=c[0],k=c[1];o.call(l,k,b,this)}},t.merge=function(o){var l=this;return jc(o)&&(o=new Map(o)),Da(function(){qa(o)?V6(o).forEach(function(h){return l.set(h,o[h])}):Array.isArray(o)?o.forEach(function(h){var m=h[0],c=h[1];return l.set(m,c)}):Bh(o)?(j6(o)||lr(19,o),o.forEach(function(h,m){return l.set(m,h)})):o!=null&&lr(20,o)}),this},t.clear=function(){var o=this;Da(function(){p5(function(){for(var l=nh(o.keys()),h;!(h=l()).done;){var m=h.value;o.delete(m)}})})},t.replace=function(o){var l=this;return Da(function(){for(var h=SF(o),m=new Map,c=!1,b=nh(l.data_.keys()),k;!(k=b()).done;){var A=k.value;if(!h.has(A)){var R=l.delete(A);if(R)c=!0;else{var O=l.data_.get(A);m.set(A,O)}}}for(var Q=nh(h.entries()),te;!(te=Q()).done;){var ee=te.value,de=ee[0],G=ee[1],j=l.data_.has(de);if(l.set(de,G),l.data_.has(de)){var U=l.data_.get(de);m.set(de,U),j||(c=!0)}}if(!c)if(l.data_.size!==m.size)l.keysAtom_.reportChanged();else for(var fe=l.data_.keys(),ie=m.keys(),F=fe.next(),ce=ie.next();!F.done;){if(F.value!==ce.value){l.keysAtom_.reportChanged();break}F=fe.next(),ce=ie.next()}l.data_=m}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(o,l){return wp(this,o)},t.intercept_=function(o){return bp(this,o)},$h(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),jc=Fc("ObservableMap",D5);function zC(e){return e[Symbol.toStringTag]="MapIterator",Zb(e)}function SF(e){if(Bh(e)||jc(e))return e;if(Array.isArray(e))return new Map(e);if(qa(e)){var t=new Map;for(var r in e)t.set(r,e[r]);return t}else return lr(21,e)}var CF={},R5=function(){function e(r,o,l){var h=this;o===void 0&&(o=Dc),l===void 0&&(l="ObservableSet"),this.name_=void 0,this[Bt]=CF,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=l,Ls(Set)||lr(22),this.enhancer_=function(m,c){return o(m,c,l)},Ul(function(){h.atom_=i5(h.name_),r&&h.replace(r)})}var t=e.prototype;return t.dehanceValue_=function(o){return this.dehancer!==void 0?this.dehancer(o):o},t.clear=function(){var o=this;Da(function(){p5(function(){for(var l=nh(o.data_.values()),h;!(h=l()).done;){var m=h.value;o.delete(m)}})})},t.forEach=function(o,l){for(var h=nh(this),m;!(m=h()).done;){var c=m.value;o.call(l,c,c,this)}},t.add=function(o){var l=this;if(this.atom_,Zo(this)){var h=Ko(this,{type:Cl,object:this,newValue:o});if(!h)return this}if(!this.has(o)){Da(function(){l.data_.add(l.enhancer_(o,void 0)),l.atom_.reportChanged()});var m=!1,c=Ps(this),b=c||m?{observableKind:"set",debugObjectName:this.name_,type:Cl,object:this,newValue:o}:null;c&&As(this,b)}return this},t.delete=function(o){var l=this;if(Zo(this)){var h=Ko(this,{type:fy,object:this,oldValue:o});if(!h)return!1}if(this.has(o)){var m=!1,c=Ps(this),b=c||m?{observableKind:"set",debugObjectName:this.name_,type:fy,object:this,oldValue:o}:null;return Da(function(){l.atom_.reportChanged(),l.data_.delete(o)}),c&&As(this,b),!0}return!1},t.has=function(o){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(o))},t.entries=function(){var o=0,l=Array.from(this.keys()),h=Array.from(this.values());return LC({next:function(){var c=o;return o+=1,c<h.length?{value:[l[c],h[c]],done:!1}:{value:void 0,done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var o=this,l=0,h=Array.from(this.data_.values());return LC({next:function(){return l<h.length?{value:o.dehanceValue_(h[l++]),done:!1}:{value:void 0,done:!0}}})},t.intersection=function(o){if(La(o)&&!ta(o))return o.intersection(this);var l=new Set(this);return l.intersection(o)},t.union=function(o){if(La(o)&&!ta(o))return o.union(this);var l=new Set(this);return l.union(o)},t.difference=function(o){return new Set(this).difference(o)},t.symmetricDifference=function(o){if(La(o)&&!ta(o))return o.symmetricDifference(this);var l=new Set(this);return l.symmetricDifference(o)},t.isSubsetOf=function(o){return new Set(this).isSubsetOf(o)},t.isSupersetOf=function(o){return new Set(this).isSupersetOf(o)},t.isDisjointFrom=function(o){if(La(o)&&!ta(o))return o.isDisjointFrom(this);var l=new Set(this);return l.isDisjointFrom(o)},t.replace=function(o){var l=this;return ta(o)&&(o=new Set(o)),Da(function(){Array.isArray(o)?(l.clear(),o.forEach(function(h){return l.add(h)})):La(o)?(l.clear(),o.forEach(function(h){return l.add(h)})):o!=null&&lr("Cannot initialize set from "+o)}),this},t.observe_=function(o,l){return wp(this,o)},t.intercept_=function(o){return bp(this,o)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Symbol.iterator]=function(){return this.values()},$h(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),ta=Fc("ObservableSet",R5);function LC(e){return e[Symbol.toStringTag]="SetIterator",Zb(e)}var DC=Object.create(null),RC="remove",O5=function(){function e(r,o,l,h){o===void 0&&(o=new Map),h===void 0&&(h=x$),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=r,this.values_=o,this.name_=l,this.defaultAnnotation_=h,this.keysAtom_=new Vl("ObservableObject.keys"),this.isPlainObject_=qa(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(o){return this.values_.get(o).get()},t.setObservablePropValue_=function(o,l){var h=this.values_.get(o);if(h instanceof Ds)return h.set(l),!0;if(Zo(this)){var m=Ko(this,{type:la,object:this.proxy_||this.target_,name:o,newValue:l});if(!m)return null;l=m.newValue}if(l=h.prepareNewValue_(l),l!==lt.UNCHANGED){var c=Ps(this),b=!1,k=c||b?{type:la,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:h.value_,name:o,newValue:l}:null;h.setNewValue_(l),c&&As(this,k)}return!0},t.get_=function(o){return lt.trackingDerivation&&!Na(this.target_,o)&&this.has_(o),this.target_[o]},t.set_=function(o,l,h){return h===void 0&&(h=!1),Na(this.target_,o)?this.values_.has(o)?this.setObservablePropValue_(o,l):h?Reflect.set(this.target_,o,l):(this.target_[o]=l,!0):this.extend_(o,{value:l,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,h)},t.has_=function(o){if(!lt.trackingDerivation)return o in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var l=this.pendingKeys_.get(o);return l||(l=new kc(o in this.target_,k0,"ObservableObject.key?",!1),this.pendingKeys_.set(o,l)),l.get()},t.make_=function(o,l){if(l===!0&&(l=this.defaultAnnotation_),l!==!1){if(!(o in this.target_)){var h;if((h=this.target_[ra])!=null&&h[o])return;lr(1,l.annotationType_,this.name_+"."+o.toString())}for(var m=this.target_;m&&m!==S0;){var c=ay(m,o);if(c){var b=l.make_(this,o,c,m);if(b===0)return;if(b===1)break}m=Object.getPrototypeOf(m)}BC(this,l,o)}},t.extend_=function(o,l,h,m){if(m===void 0&&(m=!1),h===!0&&(h=this.defaultAnnotation_),h===!1)return this.defineProperty_(o,l,m);var c=h.extend_(this,o,l,m);return c&&BC(this,h,o),c},t.defineProperty_=function(o,l,h){h===void 0&&(h=!1),this.keysAtom_;try{Yo();var m=this.delete_(o);if(!m)return m;if(Zo(this)){var c=Ko(this,{object:this.proxy_||this.target_,name:o,type:Cl,newValue:l.value});if(!c)return null;var b=c.newValue;l.value!==b&&(l=Lc({},l,{value:b}))}if(h){if(!Reflect.defineProperty(this.target_,o,l))return!1}else sa(this.target_,o,l);this.notifyPropertyAddition_(o,l.value)}finally{Jo()}return!0},t.defineObservableProperty_=function(o,l,h,m){m===void 0&&(m=!1),this.keysAtom_;try{Yo();var c=this.delete_(o);if(!c)return c;if(Zo(this)){var b=Ko(this,{object:this.proxy_||this.target_,name:o,type:Cl,newValue:l});if(!b)return null;l=b.newValue}var k=OC(o),A={configurable:lt.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:k.get,set:k.set};if(m){if(!Reflect.defineProperty(this.target_,o,A))return!1}else sa(this.target_,o,A);var R=new kc(l,h,"ObservableObject.key",!1);this.values_.set(o,R),this.notifyPropertyAddition_(o,R.value_)}finally{Jo()}return!0},t.defineComputedProperty_=function(o,l,h){h===void 0&&(h=!1),this.keysAtom_;try{Yo();var m=this.delete_(o);if(!m)return m;if(Zo(this)){var c=Ko(this,{object:this.proxy_||this.target_,name:o,type:Cl,newValue:void 0});if(!c)return null}l.name||(l.name="ObservableObject.key"),l.context=this.proxy_||this.target_;var b=OC(o),k={configurable:lt.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:b.get,set:b.set};if(h){if(!Reflect.defineProperty(this.target_,o,k))return!1}else sa(this.target_,o,k);this.values_.set(o,new Ds(l)),this.notifyPropertyAddition_(o,void 0)}finally{Jo()}return!0},t.delete_=function(o,l){if(l===void 0&&(l=!1),this.keysAtom_,!Na(this.target_,o))return!0;if(Zo(this)){var h=Ko(this,{object:this.proxy_||this.target_,name:o,type:RC});if(!h)return null}try{var m;Yo();var c=Ps(this),b=!1,k=this.values_.get(o),A=void 0;if(!k&&(c||b)){var R;A=(R=ay(this.target_,o))==null?void 0:R.value}if(l){if(!Reflect.deleteProperty(this.target_,o))return!1}else delete this.target_[o];if(k&&(this.values_.delete(o),k instanceof kc&&(A=k.value_),x5(k)),this.keysAtom_.reportChanged(),(m=this.pendingKeys_)==null||(m=m.get(o))==null||m.set(o in this.target_),c||b){var O={type:RC,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:A,name:o};c&&As(this,O)}}finally{Jo()}return!0},t.observe_=function(o,l){return wp(this,o)},t.intercept_=function(o){return bp(this,o)},t.notifyPropertyAddition_=function(o,l){var h,m=Ps(this),c=!1;if(m||c){var b=m||c?{type:Cl,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:o,newValue:l}:null;m&&As(this,b)}(h=this.pendingKeys_)==null||(h=h.get(o))==null||h.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),wh(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Vc(e,t){var r;if(Na(e,Bt))return e;var o=(r=t==null?void 0:t.name)!=null?r:"ObservableObject",l=new O5(e,new Map,String(o),M$(t));return gp(e,Bt,l),e}var kF=Fc("ObservableObjectAdministration",O5);function OC(e){return DC[e]||(DC[e]={get:function(){return this[Bt].getObservablePropValue_(e)},set:function(r){return this[Bt].setObservablePropValue_(e,r)}})}function M0(e){return C0(e)?kF(e[Bt]):!1}function BC(e,t,r){var o;(o=e.target_[ra])==null||delete o[r]}var TF=$5(0),EF=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),C_=0,B5=function(){};function IF(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}IF(B5,Array.prototype);var qb=function(e){function t(o,l,h,m){var c;return h===void 0&&(h="ObservableArray"),m===void 0&&(m=!1),c=e.call(this)||this,Ul(function(){var b=new Hb(h,l,m,!0);b.proxy_=c,e5(c,Bt,b),o&&o.length&&c.spliceWithArray(0,0,o),EF&&Object.defineProperty(c,"0",TF)}),c}n5(t,e);var r=t.prototype;return r.concat=function(){this[Bt].atom_.reportObserved();for(var l=arguments.length,h=new Array(l),m=0;m<l;m++)h[m]=arguments[m];return Array.prototype.concat.apply(this.slice(),h.map(function(c){return A0(c)?c.slice():c}))},r[Symbol.iterator]=function(){var o=this,l=0;return Zb({next:function(){return l<o.length?{value:o[l++],done:!1}:{done:!0,value:void 0}}})},$h(t,[{key:"length",get:function(){return this[Bt].getArrayLength_()},set:function(l){this[Bt].setArrayLength_(l)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(B5);Object.entries(dy).forEach(function(e){var t=e[0],r=e[1];t!=="concat"&&gp(qb.prototype,t,r)});function $5(e){return{enumerable:!1,configurable:!0,get:function(){return this[Bt].get_(e)},set:function(r){this[Bt].set_(e,r)}}}function PF(e){sa(qb.prototype,""+e,$5(e))}function F5(e){if(e>C_){for(var t=C_;t<e+100;t++)PF(t);C_=e}}F5(1e3);function AF(e,t,r){return new qb(e,t,r)}function py(e,t){if(typeof e=="object"&&e!==null){if(A0(e))return t!==void 0&&lr(23),e[Bt].atom_;if(ta(e))return e.atom_;if(jc(e)){if(t===void 0)return e.keysAtom_;var r=e.data_.get(t)||e.hasMap_.get(t);return r||lr(25,t,Z1(e)),r}if(M0(e)){if(!t)return lr(26);var o=e[Bt].values_.get(t);return o||lr(27,t,Z1(e)),o}if(jb(e)||P0(e)||hy(e))return e}else if(Ls(e)&&hy(e[Bt]))return e[Bt];lr(28)}function MF(e,t){if(e||lr(29),jb(e)||P0(e)||hy(e)||jc(e)||ta(e))return e;if(e[Bt])return e[Bt];lr(24,e)}function Z1(e,t){var r;if(t!==void 0)r=py(e,t);else{if(tp(e))return e.name;M0(e)||jc(e)||ta(e)?r=MF(e):r=py(e)}return r.name_}function Ul(e){var t=Nc(),r=E0(!0);Yo();try{return e()}finally{Jo(),I0(r),ja(t)}}var $C=S0.toString;function Wb(e,t,r){return r===void 0&&(r=-1),K1(e,t,r)}function K1(e,t,r,o,l){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var h=typeof e;if(h!=="function"&&h!=="object"&&typeof t!="object")return!1;var m=$C.call(e);if(m!==$C.call(t))return!1;switch(m){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":r>=0&&r++;break}e=FC(e),t=FC(t);var c=m==="[object Array]";if(!c){if(typeof e!="object"||typeof t!="object")return!1;var b=e.constructor,k=t.constructor;if(b!==k&&!(Ls(b)&&b instanceof b&&Ls(k)&&k instanceof k)&&"constructor"in e&&"constructor"in t)return!1}if(r===0)return!1;r<0&&(r=-1),o=o||[],l=l||[];for(var A=o.length;A--;)if(o[A]===e)return l[A]===t;if(o.push(e),l.push(t),c){if(A=e.length,A!==t.length)return!1;for(;A--;)if(!K1(e[A],t[A],r-1,o,l))return!1}else{var R=Object.keys(e),O;if(A=R.length,Object.keys(t).length!==A)return!1;for(;A--;)if(O=R[A],!(Na(t,O)&&K1(e[O],t[O],r-1,o,l)))return!1}return o.pop(),l.pop(),!0}function FC(e){return A0(e)?e.slice():Bh(e)||jc(e)||La(e)||ta(e)?Array.from(e.entries()):e}var NC,zF=((NC=w0().Iterator)==null?void 0:NC.prototype)||{};function Zb(e){return e[Symbol.iterator]=LF,Object.assign(Object.create(zF),e)}function LF(){return this}["Symbol","Map","Set"].forEach(function(e){var t=w0();typeof t[e]>"u"&&lr("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:X$,extras:{getDebugName:Z1},$mobx:Bt});var N5,jC=pp;N5=jC.createRoot,jC.hydrateRoot;function j5(e){return ZL(e)}function DF(e){return cp("MuiSvgIcon",e)}Gy("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const RF=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],OF=e=>{const{color:t,fontSize:r,classes:o}=e,l={root:["root",t!=="inherit"&&`color${cr(t)}`,`fontSize${cr(r)}`]};return lo(l,DF,o)},BF=b0("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${cr(r.color)}`],t[`fontSize${cr(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,o,l,h,m,c,b,k,A,R,O,Q,te;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(o=r.create)==null?void 0:o.call(r,"fill",{duration:(l=e.transitions)==null||(l=l.duration)==null?void 0:l.shorter}),fontSize:{inherit:"inherit",small:((h=e.typography)==null||(m=h.pxToRem)==null?void 0:m.call(h,20))||"1.25rem",medium:((c=e.typography)==null||(b=c.pxToRem)==null?void 0:b.call(c,24))||"1.5rem",large:((k=e.typography)==null||(A=k.pxToRem)==null?void 0:A.call(k,35))||"2.1875rem"}[t.fontSize],color:(R=(O=(e.vars||e).palette)==null||(O=O[t.color])==null?void 0:O.main)!=null?R:{action:(Q=(e.vars||e).palette)==null||(Q=Q.action)==null?void 0:Q.active,disabled:(te=(e.vars||e).palette)==null||(te=te.action)==null?void 0:te.disabled,inherit:void 0}[t.color]}}),X1=pe.forwardRef(function(t,r){const o=j5({props:t,name:"MuiSvgIcon"}),{children:l,className:h,color:m="inherit",component:c="svg",fontSize:b="medium",htmlColor:k,inheritViewBox:A=!1,titleAccess:R,viewBox:O="0 0 24 24"}=o,Q=Wt(o,RF),te=pe.isValidElement(l)&&l.type==="svg",ee=ge({},o,{color:m,component:c,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:A,viewBox:O,hasSvgAsChild:te}),de={};A||(de.viewBox=O);const G=OF(ee);return W.jsxs(BF,ge({as:c,className:ao(G.root,h),focusable:"false",color:k,"aria-hidden":R?void 0:!0,role:R?"img":void 0,ref:r},de,Q,te&&l.props,{ownerState:ee,children:[te?l.props.children:l,R?W.jsx("title",{children:R}):null]}))});X1.muiName="SvgIcon";function Lo(e,t){function r(o,l){return W.jsx(X1,ge({"data-testid":`${t}Icon`,ref:l},o,{children:e}))}return r.muiName=X1.muiName,pe.memo(pe.forwardRef(r))}function Y1(e,t){return Y1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,o){return r.__proto__=o,r},Y1(e,t)}function $F(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Y1(e,t)}const VC={disabled:!1},V5=bl.createContext(null);var FF=function(t){return t.scrollTop},ff="unmounted",mc="exited",gc="entering",Fu="entered",J1="exiting",Bs=function(e){$F(t,e);function t(o,l){var h;h=e.call(this,o,l)||this;var m=l,c=m&&!m.isMounting?o.enter:o.appear,b;return h.appearStatus=null,o.in?c?(b=mc,h.appearStatus=gc):b=Fu:o.unmountOnExit||o.mountOnEnter?b=ff:b=mc,h.state={status:b},h.nextCallback=null,h}t.getDerivedStateFromProps=function(l,h){var m=l.in;return m&&h.status===ff?{status:mc}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(l){var h=null;if(l!==this.props){var m=this.state.status;this.props.in?m!==gc&&m!==Fu&&(h=gc):(m===gc||m===Fu)&&(h=J1)}this.updateStatus(!1,h)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var l=this.props.timeout,h,m,c;return h=m=c=l,l!=null&&typeof l!="number"&&(h=l.exit,m=l.enter,c=l.appear!==void 0?l.appear:m),{exit:h,enter:m,appear:c}},r.updateStatus=function(l,h){if(l===void 0&&(l=!1),h!==null)if(this.cancelNextCallback(),h===gc){if(this.props.unmountOnExit||this.props.mountOnEnter){var m=this.props.nodeRef?this.props.nodeRef.current:Jm.findDOMNode(this);m&&FF(m)}this.performEnter(l)}else this.performExit();else this.props.unmountOnExit&&this.state.status===mc&&this.setState({status:ff})},r.performEnter=function(l){var h=this,m=this.props.enter,c=this.context?this.context.isMounting:l,b=this.props.nodeRef?[c]:[Jm.findDOMNode(this),c],k=b[0],A=b[1],R=this.getTimeouts(),O=c?R.appear:R.enter;if(!l&&!m||VC.disabled){this.safeSetState({status:Fu},function(){h.props.onEntered(k)});return}this.props.onEnter(k,A),this.safeSetState({status:gc},function(){h.props.onEntering(k,A),h.onTransitionEnd(O,function(){h.safeSetState({status:Fu},function(){h.props.onEntered(k,A)})})})},r.performExit=function(){var l=this,h=this.props.exit,m=this.getTimeouts(),c=this.props.nodeRef?void 0:Jm.findDOMNode(this);if(!h||VC.disabled){this.safeSetState({status:mc},function(){l.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:J1},function(){l.props.onExiting(c),l.onTransitionEnd(m.exit,function(){l.safeSetState({status:mc},function(){l.props.onExited(c)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(l,h){h=this.setNextCallback(h),this.setState(l,h)},r.setNextCallback=function(l){var h=this,m=!0;return this.nextCallback=function(c){m&&(m=!1,h.nextCallback=null,l(c))},this.nextCallback.cancel=function(){m=!1},this.nextCallback},r.onTransitionEnd=function(l,h){this.setNextCallback(h);var m=this.props.nodeRef?this.props.nodeRef.current:Jm.findDOMNode(this),c=l==null&&!this.props.addEndListener;if(!m||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var b=this.props.nodeRef?[this.nextCallback]:[m,this.nextCallback],k=b[0],A=b[1];this.props.addEndListener(k,A)}l!=null&&setTimeout(this.nextCallback,l)},r.render=function(){var l=this.state.status;if(l===ff)return null;var h=this.props,m=h.children;h.in,h.mountOnEnter,h.unmountOnExit,h.appear,h.enter,h.exit,h.timeout,h.addEndListener,h.onEnter,h.onEntering,h.onEntered,h.onExit,h.onExiting,h.onExited,h.nodeRef;var c=Wt(h,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return bl.createElement(V5.Provider,{value:null},typeof m=="function"?m(l,c):bl.cloneElement(bl.Children.only(m),c))},t}(bl.Component);Bs.contextType=V5;Bs.propTypes={};function Bu(){}Bs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Bu,onEntering:Bu,onEntered:Bu,onExit:Bu,onExiting:Bu,onExited:Bu};Bs.UNMOUNTED=ff;Bs.EXITED=mc;Bs.ENTERING=gc;Bs.ENTERED=Fu;Bs.EXITING=J1;const U5=e=>e.scrollTop;function kh(e,t){var r,o;const{timeout:l,easing:h,style:m={}}=e;return{duration:(r=m.transitionDuration)!=null?r:typeof l=="number"?l:l[t.mode]||0,easing:(o=m.transitionTimingFunction)!=null?o:typeof h=="object"?h[t.mode]:h,delay:m.transitionDelay}}function NF(e){return cp("MuiCollapse",e)}Gy("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const jF=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],VF=e=>{const{orientation:t,classes:r}=e,o={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return lo(o,NF,r)},UF=b0("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.orientation],r.state==="entered"&&t.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>ge({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&ge({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),GF=b0("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>ge({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),HF=b0("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>ge({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),Kb=pe.forwardRef(function(t,r){const o=j5({props:t,name:"MuiCollapse"}),{addEndListener:l,children:h,className:m,collapsedSize:c="0px",component:b,easing:k,in:A,onEnter:R,onEntered:O,onEntering:Q,onExit:te,onExited:ee,onExiting:de,orientation:G="vertical",style:j,timeout:U=jI.standard,TransitionComponent:fe=Bs}=o,ie=Wt(o,jF),F=ge({},o,{orientation:G,collapsedSize:c}),ce=VF(F),Ce=Bb(),Ue=TL(),Ae=pe.useRef(null),Re=pe.useRef(),We=typeof c=="number"?`${c}px`:c,He=G==="horizontal",Ze=He?"width":"height",Ge=pe.useRef(null),Fe=$l(r,Ge),ot=Ct=>Pt=>{if(Ct){const at=Ge.current;Pt===void 0?Ct(at):Ct(at,Pt)}},Pe=()=>Ae.current?Ae.current[He?"clientWidth":"clientHeight"]:0,st=ot((Ct,Pt)=>{Ae.current&&He&&(Ae.current.style.position="absolute"),Ct.style[Ze]=We,R&&R(Ct,Pt)}),yt=ot((Ct,Pt)=>{const at=Pe();Ae.current&&He&&(Ae.current.style.position="");const{duration:At,easing:Rt}=kh({style:j,timeout:U,easing:k},{mode:"enter"});if(U==="auto"){const or=Ce.transitions.getAutoHeightDuration(at);Ct.style.transitionDuration=`${or}ms`,Re.current=or}else Ct.style.transitionDuration=typeof At=="string"?At:`${At}ms`;Ct.style[Ze]=`${at}px`,Ct.style.transitionTimingFunction=Rt,Q&&Q(Ct,Pt)}),Et=ot((Ct,Pt)=>{Ct.style[Ze]="auto",O&&O(Ct,Pt)}),mt=ot(Ct=>{Ct.style[Ze]=`${Pe()}px`,te&&te(Ct)}),Dt=ot(ee),jt=ot(Ct=>{const Pt=Pe(),{duration:at,easing:At}=kh({style:j,timeout:U,easing:k},{mode:"exit"});if(U==="auto"){const Rt=Ce.transitions.getAutoHeightDuration(Pt);Ct.style.transitionDuration=`${Rt}ms`,Re.current=Rt}else Ct.style.transitionDuration=typeof at=="string"?at:`${at}ms`;Ct.style[Ze]=We,Ct.style.transitionTimingFunction=At,de&&de(Ct)}),_r=Ct=>{U==="auto"&&Ue.start(Re.current||0,Ct),l&&l(Ge.current,Ct)};return W.jsx(fe,ge({in:A,onEnter:st,onEntered:Et,onEntering:yt,onExit:mt,onExited:Dt,onExiting:jt,addEndListener:_r,nodeRef:Ge,timeout:U==="auto"?null:U},ie,{children:(Ct,Pt)=>W.jsx(UF,ge({as:b,className:ao(ce.root,m,{entered:ce.entered,exited:!A&&We==="0px"&&ce.hidden}[Ct]),style:ge({[He?"minWidth":"minHeight"]:We},j),ref:Fe},Pt,{ownerState:ge({},F,{state:Ct}),children:W.jsx(GF,{ownerState:ge({},F,{state:Ct}),className:ce.wrapper,ref:Ae,children:W.jsx(HF,{ownerState:ge({},F,{state:Ct}),className:ce.wrapperInner,children:h})})}))}))});Kb.muiSupportAuto=!0;const qF=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function WF(e,t,r){const o=t.getBoundingClientRect(),l=r&&r.getBoundingClientRect(),h=dT(t);let m;if(t.fakeTransform)m=t.fakeTransform;else{const k=h.getComputedStyle(t);m=k.getPropertyValue("-webkit-transform")||k.getPropertyValue("transform")}let c=0,b=0;if(m&&m!=="none"&&typeof m=="string"){const k=m.split("(")[1].split(")")[0].split(",");c=parseInt(k[4],10),b=parseInt(k[5],10)}return e==="left"?l?`translateX(${l.right+c-o.left}px)`:`translateX(${h.innerWidth+c-o.left}px)`:e==="right"?l?`translateX(-${o.right-l.left-c}px)`:`translateX(-${o.left+o.width-c}px)`:e==="up"?l?`translateY(${l.bottom+b-o.top}px)`:`translateY(${h.innerHeight+b-o.top}px)`:l?`translateY(-${o.top-l.top+o.height-b}px)`:`translateY(-${o.top+o.height-b}px)`}function ZF(e){return typeof e=="function"?e():e}function og(e,t,r){const o=ZF(r),l=WF(e,t,o);l&&(t.style.webkitTransform=l,t.style.transform=l)}const Xb=pe.forwardRef(function(t,r){const o=Bb(),l={enter:o.transitions.easing.easeOut,exit:o.transitions.easing.sharp},h={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:m,appear:c=!0,children:b,container:k,direction:A="down",easing:R=l,in:O,onEnter:Q,onEntered:te,onEntering:ee,onExit:de,onExited:G,onExiting:j,style:U,timeout:fe=h,TransitionComponent:ie=Bs}=t,F=Wt(t,qF),ce=pe.useRef(null),Ce=$l(fT(b),ce,r),Ue=Pe=>st=>{Pe&&(st===void 0?Pe(ce.current):Pe(ce.current,st))},Ae=Ue((Pe,st)=>{og(A,Pe,k),U5(Pe),Q&&Q(Pe,st)}),Re=Ue((Pe,st)=>{const yt=kh({timeout:fe,style:U,easing:R},{mode:"enter"});Pe.style.webkitTransition=o.transitions.create("-webkit-transform",ge({},yt)),Pe.style.transition=o.transitions.create("transform",ge({},yt)),Pe.style.webkitTransform="none",Pe.style.transform="none",ee&&ee(Pe,st)}),We=Ue(te),He=Ue(j),Ze=Ue(Pe=>{const st=kh({timeout:fe,style:U,easing:R},{mode:"exit"});Pe.style.webkitTransition=o.transitions.create("-webkit-transform",st),Pe.style.transition=o.transitions.create("transform",st),og(A,Pe,k),de&&de(Pe)}),Ge=Ue(Pe=>{Pe.style.webkitTransition="",Pe.style.transition="",G&&G(Pe)}),Fe=Pe=>{m&&m(ce.current,Pe)},ot=pe.useCallback(()=>{ce.current&&og(A,ce.current,k)},[A,k]);return pe.useEffect(()=>{if(O||A==="down"||A==="right")return;const Pe=xL(()=>{ce.current&&og(A,ce.current,k)}),st=dT(ce.current);return st.addEventListener("resize",Pe),()=>{Pe.clear(),st.removeEventListener("resize",Pe)}},[A,O,k]),pe.useEffect(()=>{O||ot()},[O,ot]),W.jsx(ie,ge({nodeRef:ce,onEnter:Ae,onEntered:We,onEntering:Re,onExit:Ze,onExited:Ge,onExiting:He,addEndListener:Fe,appear:c,in:O,timeout:fe},F,{children:(Pe,st)=>pe.cloneElement(b,ge({ref:Ce,style:ge({visibility:Pe==="exited"&&!O?"hidden":void 0},U,b.props.style)},st))}))}),KF=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],XF={entering:{transform:"none"},entered:{transform:"none"}},YF=pe.forwardRef(function(t,r){const o=Bb(),l={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:h,appear:m=!0,children:c,easing:b,in:k,onEnter:A,onEntered:R,onEntering:O,onExit:Q,onExited:te,onExiting:ee,style:de,timeout:G=l,TransitionComponent:j=Bs}=t,U=Wt(t,KF),fe=pe.useRef(null),ie=$l(fe,fT(c),r),F=Ze=>Ge=>{if(Ze){const Fe=fe.current;Ge===void 0?Ze(Fe):Ze(Fe,Ge)}},ce=F(O),Ce=F((Ze,Ge)=>{U5(Ze);const Fe=kh({style:de,timeout:G,easing:b},{mode:"enter"});Ze.style.webkitTransition=o.transitions.create("transform",Fe),Ze.style.transition=o.transitions.create("transform",Fe),A&&A(Ze,Ge)}),Ue=F(R),Ae=F(ee),Re=F(Ze=>{const Ge=kh({style:de,timeout:G,easing:b},{mode:"exit"});Ze.style.webkitTransition=o.transitions.create("transform",Ge),Ze.style.transition=o.transitions.create("transform",Ge),Q&&Q(Ze)}),We=F(te),He=Ze=>{h&&h(fe.current,Ze)};return W.jsx(j,ge({appear:m,in:k,nodeRef:fe,onEnter:Ce,onEntered:Ue,onEntering:ce,onExit:Re,onExited:We,onExiting:Ae,addEndListener:He,timeout:G},U,{children:(Ze,Ge)=>pe.cloneElement(c,ge({style:ge({transform:"scale(0)",visibility:Ze==="exited"&&!k?"hidden":void 0},XF[Ze],de,c.props.style),ref:ie},Ge))}))});function Wa(e,t){if(e==null)throw new Error(t);return e}function Yb(e,t){if(!e)throw new Error(`assertion failed: ${t}`);return e}if(!pe.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!yF)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function JF(e){e()}function QF(e){e||(e=JF),I5({reactionScheduler:e})}function e8(e){return uF(e)}var t8=1e4,r8=1e4,n8=function(){function e(t){var r=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(o){o===void 0&&(o=t8),clearTimeout(r.sweepTimeout),r.sweepTimeout=void 0;var l=Date.now();r.registrations.forEach(function(h,m){l-h.registeredAt>=o&&(r.finalize(h.value),r.registrations.delete(m))}),r.registrations.size>0&&r.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){r.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,r,o){this.registrations.set(o,{value:r,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,r8))}}),e}(),i8=typeof FinalizationRegistry<"u"?FinalizationRegistry:n8,Q1=new i8(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),G5={exports:{}},H5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Th=pe;function o8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var s8=typeof Object.is=="function"?Object.is:o8,a8=Th.useState,l8=Th.useEffect,c8=Th.useLayoutEffect,u8=Th.useDebugValue;function h8(e,t){var r=t(),o=a8({inst:{value:r,getSnapshot:t}}),l=o[0].inst,h=o[1];return c8(function(){l.value=r,l.getSnapshot=t,k_(l)&&h({inst:l})},[e,r,t]),l8(function(){return k_(l)&&h({inst:l}),e(function(){k_(l)&&h({inst:l})})},[e]),u8(r),r}function k_(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s8(e,r)}catch{return!0}}function d8(e,t){return t()}var f8=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d8:h8;H5.useSyncExternalStore=Th.useSyncExternalStore!==void 0?Th.useSyncExternalStore:f8;G5.exports=H5;var p8=G5.exports;function UC(e){e.reaction=new ca("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function m8(e,t){t===void 0&&(t="observed");var r=bl.useRef(null);if(!r.current){var o={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(c){return Q1.unregister(o),o.onStoreChange=c,o.reaction||(UC(o),o.stateVersion=Symbol()),function(){var b;o.onStoreChange=null,(b=o.reaction)===null||b===void 0||b.dispose(),o.reaction=null}},getSnapshot:function(){return o.stateVersion}};r.current=o}var l=r.current;l.reaction||(UC(l),Q1.register(r,l,l)),bl.useDebugValue(l.reaction,e8),p8.useSyncExternalStore(l.subscribe,l.getSnapshot,l.getSnapshot);var h,m;if(l.reaction.track(function(){try{h=e()}catch(c){m=c}}),m)throw m;return h}var T_,E_,q5=typeof Symbol=="function"&&Symbol.for,g8=(E_=(T_=Object.getOwnPropertyDescriptor(function(){},"name"))===null||T_===void 0?void 0:T_.configurable)!==null&&E_!==void 0?E_:!1,GC=q5?Symbol.for("react.forward_ref"):typeof pe.forwardRef=="function"&&pe.forwardRef(function(e){return null}).$$typeof,HC=q5?Symbol.for("react.memo"):typeof pe.memo=="function"&&pe.memo(function(e){return null}).$$typeof;function ki(e,t){var r;if(HC&&e.$$typeof===HC)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var o=(r=void 0)!==null&&r!==void 0?r:!1,l=e,h=e.displayName||e.name;if(GC&&e.$$typeof===GC&&(o=!0,l=e.render,typeof l!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var m=function(c,b){return m8(function(){return l(c,b)},h)};return m.displayName=e.displayName,g8&&Object.defineProperty(m,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(m.contextTypes=e.contextTypes),o&&(m=pe.forwardRef(m)),m=pe.memo(m),v8(e,m),m}var y8={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function v8(e,t){Object.keys(e).forEach(function(r){y8[r]||Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}var I_;QF(pp.unstable_batchedUpdates);I_=Q1.finalizeAllImmediately;const _8="modulepreload",x8=function(e){return"/"+e},qC={},b8=function(t,r,o){let l=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),c=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));l=Promise.allSettled(r.map(b=>{if(b=x8(b),b in qC)return;qC[b]=!0;const k=b.endsWith(".css"),A=k?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${A}`))return;const R=document.createElement("link");if(R.rel=k?"stylesheet":_8,k||(R.as="script"),R.crossOrigin="",R.href=b,c&&R.setAttribute("nonce",c),document.head.appendChild(R),k)return new Promise((O,Q)=>{R.addEventListener("load",O),R.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${b}`)))})}))}function h(m){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=m,window.dispatchEvent(c),!c.defaultPrevented)throw m}return l.then(m=>{for(const c of m||[])c.status==="rejected"&&h(c.reason);return t().catch(h)})},w8=pe.createContext(null);function S8(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0,l=Array.isArray(t)?t[0]:t?t.x:0,h=Array.isArray(t)?t[1]:t?t.y:0;return r===l&&o===h}function bo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!bo(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(const l of r)if(!t.hasOwnProperty(l)||!bo(e[l],t[l]))return!1;return!0}return!1}function C8(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function WC(e,t){if(!e.getProjection)return;const r=e.getProjection(),o=t.getProjection();bo(r,o)||t.setProjection(r)}function ZC(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function KC(e,t){const r=t.viewState||t;let o=!1;if("zoom"in r){const l=e.zoom;e.zoom=r.zoom,o=o||l!==e.zoom}if("bearing"in r){const l=e.bearing;e.bearing=r.bearing,o=o||l!==e.bearing}if("pitch"in r){const l=e.pitch;e.pitch=r.pitch,o=o||l!==e.pitch}if(r.padding&&!e.isPaddingEqual(r.padding)&&(o=!0,e.padding=r.padding),"longitude"in r&&"latitude"in r){const l=e.center;e.center=new l.constructor(r.longitude,r.latitude),o=o||l!==e.center}return o}const k8=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function XC(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const o of e.layers)t[o.id]=o;const r=e.layers.map(o=>{let l=null;"interactive"in o&&(l=Object.assign({},o),delete l.interactive);const h=t[o.ref];if(h){l=l||Object.assign({},o),delete l.ref;for(const m of k8)m in h&&(l[m]=h[m])}return l||o});return{...e,layers:r}}var YC={};const JC={version:8,sources:{},layers:[]},QC={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},P_={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},ek={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},T8=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],E8=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Eh{constructor(t,r,o){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=l=>{const h=this.props[ek[l.type]];h?h(l):l.type==="error"&&console.error(l.error)},this._onPointerEvent=l=>{(l.type==="mousemove"||l.type==="mouseout")&&this._updateHover(l);const h=this.props[QC[l.type]];h&&(this.props.interactiveLayerIds&&l.type!=="mouseover"&&l.type!=="mouseout"&&(l.features=this._hoveredFeatures||this._queryRenderedFeatures(l.point)),h(l),delete l.features)},this._onCameraEvent=l=>{if(!this._internalUpdate){const h=this.props[P_[l.type]];h&&h(l)}l.type in this._deferredEvents&&(this._deferredEvents[l.type]=!1)},this._MapClass=t,this.props=r,this._initialize(o)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const o=this._updateSettings(t,r);o&&this._createShadowTransform(this._map);const l=this._updateSize(t),h=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(o||l||h&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const o=Eh.savedMaps.pop();if(!o)return null;const l=o.map,h=l.getContainer();for(r.className=h.className;h.childNodes.length>0;)r.appendChild(h.childNodes[0]);l._container=r;const m=l._resizeObserver;m&&(m.disconnect(),m.observe(r)),o.setProps({...t,styleDiffing:!1}),l.resize();const{initialViewState:c}=t;return c&&(c.bounds?l.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):o._updateViewState(c,!1)),l.isStyleLoaded()?l.fire("load"):l.once("styledata",()=>l.fire("load")),l._update(),o}_initialize(t){const{props:r}=this,{mapStyle:o=JC}=r,l={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||I8()||null,container:t,style:XC(o)},h=l.initialViewState||l.viewState||l;if(Object.assign(l,{center:[h.longitude||0,h.latitude||0],zoom:h.zoom||0,pitch:h.pitch||0,bearing:h.bearing||0}),r.gl){const A=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=A,r.gl)}const m=new this._MapClass(l);h.padding&&m.setPadding(h.padding),r.cursor&&(m.getCanvas().style.cursor=r.cursor),this._createShadowTransform(m);const c=m._render;m._render=A=>{this._inRender=!0,c.call(m,A),this._inRender=!1};const b=m._renderTaskQueue.run;m._renderTaskQueue.run=A=>{b.call(m._renderTaskQueue,A),this._onBeforeRepaint()},m.on("render",()=>this._onAfterRepaint());const k=m.fire;m.fire=this._fireEvent.bind(this,k),m.on("resize",()=>{this._renderTransform.resize(m.transform.width,m.transform.height)}),m.on("styledata",()=>{this._updateStyleComponents(this.props,{}),WC(m.transform,this._renderTransform)}),m.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const A in QC)m.on(A,this._onPointerEvent);for(const A in P_)m.on(A,this._onCameraEvent);for(const A in ek)m.on(A,this._onEvent);this._map=m}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),Eh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=C8(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const o=this._map;if(r.width!==o.transform.width||r.height!==o.transform.height)return o.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const o=this._map,l=this._renderTransform,{zoom:h,pitch:m,bearing:c}=l,b=o.isMoving();b&&(l.cameraElevationReference="sea");const k=KC(l,{...ZC(o.transform),...t});if(b&&(l.cameraElevationReference="ground"),k&&r){const A=this._deferredEvents;A.move=!0,A.zoom||(A.zoom=h!==l.zoom),A.rotate||(A.rotate=c!==l.bearing),A.pitch||(A.pitch=m!==l.pitch)}return b||KC(o.transform,t),k}_updateSettings(t,r){const o=this._map;let l=!1;for(const h of T8)if(h in t&&!bo(t[h],r[h])){l=!0;const m=o[`set${h[0].toUpperCase()}${h.slice(1)}`];m==null||m.call(o,t[h])}return l}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==r.mapStyle){const{mapStyle:o=JC,styleDiffing:l=!0}=t,h={diff:l};return"localIdeographFontFamily"in t&&(h.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(XC(o),h),!0}return!1}_updateStyleComponents(t,r){const o=this._map;let l=!1;return o.isStyleLoaded()&&("light"in t&&o.setLight&&!bo(t.light,r.light)&&(l=!0,o.setLight(t.light)),"fog"in t&&o.setFog&&!bo(t.fog,r.fog)&&(l=!0,o.setFog(t.fog)),"terrain"in t&&o.setTerrain&&!bo(t.terrain,r.terrain)&&(!t.terrain||o.getSource(t.terrain.source))&&(l=!0,o.setTerrain(t.terrain))),l}_updateHandlers(t,r){var o,l;const h=this._map;let m=!1;for(const c of E8){const b=(o=t[c])!==null&&o!==void 0?o:!0,k=(l=r[c])!==null&&l!==void 0?l:!0;bo(b,k)||(m=!0,b?h[c].enable(b):h[c].disable())}return m}_queryRenderedFeatures(t){const r=this._map,o=r.transform,{interactiveLayerIds:l=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(t,{layers:l.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=o}}_updateHover(t){var r;const{props:o}=this;if(o.interactiveLayerIds&&(o.onMouseMove||o.onMouseEnter||o.onMouseLeave)){const h=t.type,m=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,c=this._queryRenderedFeatures(t.point),b=c.length>0;!b&&m&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=c,b&&!m&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=h}else this._hoveredFeatures=null}_fireEvent(t,r,o){const l=this._map,h=l.transform,m=typeof r=="string"?r:r.type;return m==="move"&&this._updateViewState(this.props,!1),m in P_&&(typeof r=="object"&&(r.viewState=ZC(h)),this._map.isMoving())?(l.transform=this._renderTransform,t.call(l,r,o),l.transform=h,l):(t.call(l,r,o),l)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const o in this._deferredEvents)this._deferredEvents[o]&&t.fire(o);this._internalUpdate=!1;const r=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{WC(this._renderTransform,r),t.transform=r}}}Eh.savedMaps=[];function I8(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||YC.MapboxAccessToken}catch{}try{e=e||YC.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const P8=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function A8(e){if(!e)return null;const t=e.map,r={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:o=>{const l=t.transform;t.transform=e.transform;const h=t.project(o);return t.transform=l,h},unproject:o=>{const l=t.transform;t.transform=e.transform;const h=t.unproject(o);return t.transform=l,h},queryTerrainElevation:(o,l)=>{const h=t.transform;t.transform=e.transform;const m=t.queryTerrainElevation(o,l);return t.transform=h,m},queryRenderedFeatures:(o,l)=>{const h=t.transform;t.transform=e.transform;const m=t.queryRenderedFeatures(o,l);return t.transform=h,m}};for(const o of M8(t))!(o in r)&&!P8.includes(o)&&(r[o]=t[o].bind(t));return r}function M8(e){const t=new Set;let r=e;for(;r;){for(const o of Object.getOwnPropertyNames(r))o[0]!=="_"&&typeof e[o]=="function"&&o!=="fire"&&o!=="setEventedParent"&&t.add(o);r=Object.getPrototypeOf(r)}return Array.from(t)}const z8=typeof document<"u"?pe.useLayoutEffect:pe.useEffect,L8=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function D8(e,t){for(const o of L8)o in t&&(e[o]=t[o]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;r&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r,o=>{o&&console.error(o)},!0)}const Fh=pe.createContext(null);function R8(e,t,r){const o=pe.useContext(w8),[l,h]=pe.useState(null),m=pe.useRef(),{current:c}=pe.useRef({mapLib:null,map:null});pe.useEffect(()=>{const A=e.mapLib;let R=!0,O;return Promise.resolve(A||r).then(Q=>{if(!R)return;if(!Q)throw new Error("Invalid mapLib");const te="Map"in Q?Q:Q.default;if(!te.Map)throw new Error("Invalid mapLib");if(D8(te,e),!te.supported||te.supported(e))e.reuseMaps&&(O=Eh.reuse(e,m.current)),O||(O=new Eh(te.Map,e,m.current)),c.map=A8(O),c.mapLib=te,h(O),o==null||o.onMapMount(c.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(Q=>{const{onError:te}=e;te?te({type:"error",target:null,originalEvent:null,error:Q}):console.error(Q)}),()=>{R=!1,O&&(o==null||o.onMapUnmount(e.id),e.reuseMaps?O.recycle():O.destroy())}},[]),z8(()=>{l&&l.setProps(e)}),pe.useImperativeHandle(t,()=>c.map,[l]);const b=pe.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),k={height:"100%"};return pe.createElement("div",{id:e.id,ref:m,style:b},l&&pe.createElement(Fh.Provider,{value:c},pe.createElement("div",{"mapboxgl-children":"",style:k},e.children)))}const O8=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Uc(e,t){if(!e||!t)return;const r=e.style;for(const o in t){const l=t[o];Number.isFinite(l)&&!O8.test(o)?r[o]=`${l}px`:r[o]=l}}function B8(e,t){const{map:r,mapLib:o}=pe.useContext(Fh),l=pe.useRef({props:e});l.current.props=e;const h=pe.useMemo(()=>{let ee=!1;pe.Children.forEach(e.children,j=>{j&&(ee=!0)});const de={...e,element:ee?document.createElement("div"):null},G=new o.Marker(de);return G.setLngLat([e.longitude,e.latitude]),G.getElement().addEventListener("click",j=>{var U,fe;(fe=(U=l.current.props).onClick)===null||fe===void 0||fe.call(U,{type:"click",target:G,originalEvent:j})}),G.on("dragstart",j=>{var U,fe;const ie=j;ie.lngLat=h.getLngLat(),(fe=(U=l.current.props).onDragStart)===null||fe===void 0||fe.call(U,ie)}),G.on("drag",j=>{var U,fe;const ie=j;ie.lngLat=h.getLngLat(),(fe=(U=l.current.props).onDrag)===null||fe===void 0||fe.call(U,ie)}),G.on("dragend",j=>{var U,fe;const ie=j;ie.lngLat=h.getLngLat(),(fe=(U=l.current.props).onDragEnd)===null||fe===void 0||fe.call(U,ie)}),G},[]);pe.useEffect(()=>(h.addTo(r.getMap()),()=>{h.remove()}),[]);const{longitude:m,latitude:c,offset:b,style:k,draggable:A=!1,popup:R=null,rotation:O=0,rotationAlignment:Q="auto",pitchAlignment:te="auto"}=e;return pe.useEffect(()=>{Uc(h.getElement(),k)},[k]),pe.useImperativeHandle(t,()=>h,[]),(h.getLngLat().lng!==m||h.getLngLat().lat!==c)&&h.setLngLat([m,c]),b&&!S8(h.getOffset(),b)&&h.setOffset(b),h.isDraggable()!==A&&h.setDraggable(A),h.getRotation()!==O&&h.setRotation(O),h.getRotationAlignment()!==Q&&h.setRotationAlignment(Q),h.getPitchAlignment()!==te&&h.setPitchAlignment(te),h.getPopup()!==R&&h.setPopup(R),pp.createPortal(e.children,h.getElement())}const $8=pe.memo(pe.forwardRef(B8));function tk(e){return new Set(e?e.trim().split(/\s+/):[])}function F8(e,t){const{map:r,mapLib:o}=pe.useContext(Fh),l=pe.useMemo(()=>document.createElement("div"),[]),h=pe.useRef({props:e});h.current.props=e;const m=pe.useMemo(()=>{const c={...e},b=new o.Popup(c);return b.setLngLat([e.longitude,e.latitude]),b.once("open",k=>{var A,R;(R=(A=h.current.props).onOpen)===null||R===void 0||R.call(A,k)}),b},[]);if(pe.useEffect(()=>{const c=b=>{var k,A;(A=(k=h.current.props).onClose)===null||A===void 0||A.call(k,b)};return m.on("close",c),m.setDOMContent(l).addTo(r.getMap()),()=>{m.off("close",c),m.isOpen()&&m.remove()}},[]),pe.useEffect(()=>{Uc(m.getElement(),e.style)},[e.style]),pe.useImperativeHandle(t,()=>m,[]),m.isOpen()&&((m.getLngLat().lng!==e.longitude||m.getLngLat().lat!==e.latitude)&&m.setLngLat([e.longitude,e.latitude]),e.offset&&!bo(m.options.offset,e.offset)&&m.setOffset(e.offset),(m.options.anchor!==e.anchor||m.options.maxWidth!==e.maxWidth)&&(m.options.anchor=e.anchor,m.setMaxWidth(e.maxWidth)),m.options.className!==e.className)){const c=tk(m.options.className),b=tk(e.className);for(const k of c)b.has(k)||m.removeClassName(k);for(const k of b)c.has(k)||m.addClassName(k);m.options.className=e.className}return pp.createPortal(e.children,l)}pe.memo(pe.forwardRef(F8));function Sp(e,t,r,o){const l=pe.useContext(Fh),h=pe.useMemo(()=>e(l),[]);return pe.useEffect(()=>{const m=t,c=typeof t=="function"?t:null,{map:b}=l;return b.hasControl(h)||b.addControl(h,m==null?void 0:m.position),()=>{c&&c(l),b.hasControl(h)&&b.removeControl(h)}},[]),h}function N8(e){const t=Sp(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return pe.useEffect(()=>{Uc(t._container,e.style)},[e.style]),null}const j8=pe.memo(N8);function V8(e){const t=Sp(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return pe.useEffect(()=>{Uc(t._controlContainer,e.style)},[e.style]),null}pe.memo(V8);function U8(e,t){const r=pe.useRef({props:e}),o=Sp(({mapLib:l})=>{const h=new l.GeolocateControl(e),m=h._setupUI;return h._setupUI=c=>{h._container.hasChildNodes()||m(c)},h.on("geolocate",c=>{var b,k;(k=(b=r.current.props).onGeolocate)===null||k===void 0||k.call(b,c)}),h.on("error",c=>{var b,k;(k=(b=r.current.props).onError)===null||k===void 0||k.call(b,c)}),h.on("outofmaxbounds",c=>{var b,k;(k=(b=r.current.props).onOutOfMaxBounds)===null||k===void 0||k.call(b,c)}),h.on("trackuserlocationstart",c=>{var b,k;(k=(b=r.current.props).onTrackUserLocationStart)===null||k===void 0||k.call(b,c)}),h.on("trackuserlocationend",c=>{var b,k;(k=(b=r.current.props).onTrackUserLocationEnd)===null||k===void 0||k.call(b,c)}),h},{position:e.position});return r.current.props=e,pe.useImperativeHandle(t,()=>o,[]),pe.useEffect(()=>{Uc(o._container,e.style)},[e.style]),null}pe.memo(pe.forwardRef(U8));function G8(e){const t=Sp(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return pe.useEffect(()=>{Uc(t._container,e.style)},[e.style]),null}pe.memo(G8);function H8(e){const t=Sp(({mapLib:h})=>new h.ScaleControl(e),{position:e.position}),r=pe.useRef(e),o=r.current;r.current=e;const{style:l}=e;return e.maxWidth!==void 0&&e.maxWidth!==o.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==o.unit&&t.setUnit(e.unit),pe.useEffect(()=>{Uc(t._container,l)},[l]),null}pe.memo(H8);function my(e,t){if(!e)throw new Error(t)}function q8(e,t,r,o){if(my(r.id===o.id,"layer id changed"),my(r.type===o.type,"layer type changed"),r.type==="custom"||o.type==="custom")return;const{layout:l={},paint:h={},filter:m,minzoom:c,maxzoom:b,beforeId:k}=r;if(k!==o.beforeId&&e.moveLayer(t,k),l!==o.layout){const A=o.layout||{};for(const R in l)bo(l[R],A[R])||e.setLayoutProperty(t,R,l[R]);for(const R in A)l.hasOwnProperty(R)||e.setLayoutProperty(t,R,void 0)}if(h!==o.paint){const A=o.paint||{};for(const R in h)bo(h[R],A[R])||e.setPaintProperty(t,R,h[R]);for(const R in A)h.hasOwnProperty(R)||e.setPaintProperty(t,R,void 0)}bo(m,o.filter)||e.setFilter(t,m),(c!==o.minzoom||b!==o.maxzoom)&&e.setLayerZoomRange(t,c,b)}function W8(e,t,r){if(e.style&&e.style._loaded&&(!("source"in r)||e.getSource(r.source))){const o={...r,id:t};delete o.beforeId,e.addLayer(o,r.beforeId)}}let Z8=0;function K8(e){const t=pe.useContext(Fh).map.getMap(),r=pe.useRef(e),[,o]=pe.useState(0),l=pe.useMemo(()=>e.id||`jsx-layer-${Z8++}`,[]);if(pe.useEffect(()=>{if(t){const m=()=>o(c=>c+1);return t.on("styledata",m),m(),()=>{t.off("styledata",m),t.style&&t.style._loaded&&t.getLayer(l)&&t.removeLayer(l)}}},[t]),t&&t.style&&t.getLayer(l))try{q8(t,l,e,r.current)}catch(m){console.warn(m)}else W8(t,l,e);return r.current=e,null}let X8=0;function Y8(e,t,r){if(e.style&&e.style._loaded){const o={...r};return delete o.id,delete o.children,e.addSource(t,o),e.getSource(t)}return null}function J8(e,t,r){my(t.id===r.id,"source id changed"),my(t.type===r.type,"source type changed");let o="",l=0;for(const m in t)m!=="children"&&m!=="id"&&!bo(r[m],t[m])&&(o=m,l++);if(!l)return;const h=t.type;h==="geojson"?e.setData(t.data):h==="image"?e.updateImage({url:t.url,coordinates:t.coordinates}):"setCoordinates"in e&&l===1&&o==="coordinates"?e.setCoordinates(t.coordinates):"setUrl"in e&&o==="url"?e.setUrl(t.url):"setTiles"in e&&o==="tiles"?e.setTiles(t.tiles):console.warn(`Unable to update <Source> prop: ${o}`)}function Q8(e){const t=pe.useContext(Fh).map.getMap(),r=pe.useRef(e),[,o]=pe.useState(0),l=pe.useMemo(()=>e.id||`jsx-source-${X8++}`,[]);pe.useEffect(()=>{if(t){const m=()=>setTimeout(()=>o(c=>c+1),0);return t.on("styledata",m),m(),()=>{var c;if(t.off("styledata",m),t.style&&t.style._loaded&&t.getSource(l)){const b=(c=t.getStyle())===null||c===void 0?void 0:c.layers;if(b)for(const k of b)k.source===l&&t.removeLayer(k.id);t.removeSource(l)}}}},[t]);let h=t&&t.style&&t.getSource(l);return h?J8(h,e,r.current):h=Y8(t,l,e),r.current=e,h&&pe.Children.map(e.children,m=>m&&pe.cloneElement(m,{source:l}))||null}const eN=b8(()=>Promise.resolve().then(()=>ej),void 0),tN=pe.forwardRef(function(t,r){return R8(t,r,eN)}),gy=$8,rN=j8,sr=K8,Ih=Q8,nN=e=>(console.log("render destination markers",{highlighted:e.selectedDestinationNodeUid,dests:e.destinations}),W.jsx(W.Fragment,{children:e.destinations.map((t,r)=>W.jsx(gy,{longitude:t.lonLat[0],latitude:t.lonLat[1],style:{zIndex:e.selectedDestinationNodeUid===t.nodeUid?e.destinations.length:"auto"},children:W.jsx(Jf,{size:e.selectedDestinationNodeUid===t.nodeUid?"lg":"md",onClick:()=>e.onDestinationClick(t),sx:{width:"1em",height:"1em",border:1,backgroundColor:e.selectedDestinationNodeUid==null||e.selectedDestinationNodeUid===t.nodeUid?"primary":"#aaa",display:e.forceDisplay===!0||e.selectedDestinationNodeUid===t.nodeUid?void 0:"none"},children:r+1})},t.nodeUid))}));var W5={exports:{}},Z5={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},K5={exports:{}},iN=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},oN=iN,sN=Array.prototype.concat,aN=Array.prototype.slice,rk=K5.exports=function(t){for(var r=[],o=0,l=t.length;o<l;o++){var h=t[o];oN(h)?r=sN.call(r,aN.call(h)):r.push(h)}return r};rk.wrap=function(e){return function(){return e(rk(arguments))}};var lN=K5.exports,Ef=Z5,Cp=lN,X5=Object.hasOwnProperty,Y5=Object.create(null);for(var A_ in Ef)X5.call(Ef,A_)&&(Y5[Ef[A_]]=A_);var ko=W5.exports={to:{},get:{}};ko.get=function(e){var t=e.substring(0,3).toLowerCase(),r,o;switch(t){case"hsl":r=ko.get.hsl(e),o="hsl";break;case"hwb":r=ko.get.hwb(e),o="hwb";break;default:r=ko.get.rgb(e),o="rgb";break}return r?{model:o,value:r}:null};ko.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,o=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,l=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,h=/^(\w+)$/,m=[0,0,0,1],c,b,k;if(c=e.match(r)){for(k=c[2],c=c[1],b=0;b<3;b++){var A=b*2;m[b]=parseInt(c.slice(A,A+2),16)}k&&(m[3]=parseInt(k,16)/255)}else if(c=e.match(t)){for(c=c[1],k=c[3],b=0;b<3;b++)m[b]=parseInt(c[b]+c[b],16);k&&(m[3]=parseInt(k+k,16)/255)}else if(c=e.match(o)){for(b=0;b<3;b++)m[b]=parseInt(c[b+1],0);c[4]&&(c[5]?m[3]=parseFloat(c[4])*.01:m[3]=parseFloat(c[4]))}else if(c=e.match(l)){for(b=0;b<3;b++)m[b]=Math.round(parseFloat(c[b+1])*2.55);c[4]&&(c[5]?m[3]=parseFloat(c[4])*.01:m[3]=parseFloat(c[4]))}else return(c=e.match(h))?c[1]==="transparent"?[0,0,0,0]:X5.call(Ef,c[1])?(m=Ef[c[1]],m[3]=1,m):null:null;for(b=0;b<3;b++)m[b]=Ll(m[b],0,255);return m[3]=Ll(m[3],0,1),m};ko.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var o=parseFloat(r[4]),l=(parseFloat(r[1])%360+360)%360,h=Ll(parseFloat(r[2]),0,100),m=Ll(parseFloat(r[3]),0,100),c=Ll(isNaN(o)?1:o,0,1);return[l,h,m,c]}return null};ko.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var o=parseFloat(r[4]),l=(parseFloat(r[1])%360+360)%360,h=Ll(parseFloat(r[2]),0,100),m=Ll(parseFloat(r[3]),0,100),c=Ll(isNaN(o)?1:o,0,1);return[l,h,m,c]}return null};ko.to.hex=function(){var e=Cp(arguments);return"#"+sg(e[0])+sg(e[1])+sg(e[2])+(e[3]<1?sg(Math.round(e[3]*255)):"")};ko.to.rgb=function(){var e=Cp(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};ko.to.rgb.percent=function(){var e=Cp(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),o=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+r+"%, "+o+"%)":"rgba("+t+"%, "+r+"%, "+o+"%, "+e[3]+")"};ko.to.hsl=function(){var e=Cp(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};ko.to.hwb=function(){var e=Cp(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};ko.to.keyword=function(e){return Y5[e.slice(0,3)]};function Ll(e,t,r){return Math.min(Math.max(t,e),r)}function sg(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}var cN=W5.exports;const np=Z5,J5={};for(const e of Object.keys(np))J5[np[e]]=e;const St={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Q5=St;for(const e of Object.keys(St)){if(!("channels"in St[e]))throw new Error("missing channels property: "+e);if(!("labels"in St[e]))throw new Error("missing channel labels property: "+e);if(St[e].labels.length!==St[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:r}=St[e];delete St[e].channels,delete St[e].labels,Object.defineProperty(St[e],"channels",{value:t}),Object.defineProperty(St[e],"labels",{value:r})}St.rgb.hsl=function(e){const t=e[0]/255,r=e[1]/255,o=e[2]/255,l=Math.min(t,r,o),h=Math.max(t,r,o),m=h-l;let c,b;h===l?c=0:t===h?c=(r-o)/m:r===h?c=2+(o-t)/m:o===h&&(c=4+(t-r)/m),c=Math.min(c*60,360),c<0&&(c+=360);const k=(l+h)/2;return h===l?b=0:k<=.5?b=m/(h+l):b=m/(2-h-l),[c,b*100,k*100]};St.rgb.hsv=function(e){let t,r,o,l,h;const m=e[0]/255,c=e[1]/255,b=e[2]/255,k=Math.max(m,c,b),A=k-Math.min(m,c,b),R=function(O){return(k-O)/6/A+1/2};return A===0?(l=0,h=0):(h=A/k,t=R(m),r=R(c),o=R(b),m===k?l=o-r:c===k?l=1/3+t-o:b===k&&(l=2/3+r-t),l<0?l+=1:l>1&&(l-=1)),[l*360,h*100,k*100]};St.rgb.hwb=function(e){const t=e[0],r=e[1];let o=e[2];const l=St.rgb.hsl(e)[0],h=1/255*Math.min(t,Math.min(r,o));return o=1-1/255*Math.max(t,Math.max(r,o)),[l,h*100,o*100]};St.rgb.cmyk=function(e){const t=e[0]/255,r=e[1]/255,o=e[2]/255,l=Math.min(1-t,1-r,1-o),h=(1-t-l)/(1-l)||0,m=(1-r-l)/(1-l)||0,c=(1-o-l)/(1-l)||0;return[h*100,m*100,c*100,l*100]};function uN(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}St.rgb.keyword=function(e){const t=J5[e];if(t)return t;let r=1/0,o;for(const l of Object.keys(np)){const h=np[l],m=uN(e,h);m<r&&(r=m,o=l)}return o};St.keyword.rgb=function(e){return np[e]};St.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,o=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,o=o>.04045?((o+.055)/1.055)**2.4:o/12.92;const l=t*.4124+r*.3576+o*.1805,h=t*.2126+r*.7152+o*.0722,m=t*.0193+r*.1192+o*.9505;return[l*100,h*100,m*100]};St.rgb.lab=function(e){const t=St.rgb.xyz(e);let r=t[0],o=t[1],l=t[2];r/=95.047,o/=100,l/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,l=l>.008856?l**(1/3):7.787*l+16/116;const h=116*o-16,m=500*(r-o),c=200*(o-l);return[h,m,c]};St.hsl.rgb=function(e){const t=e[0]/360,r=e[1]/100,o=e[2]/100;let l,h,m;if(r===0)return m=o*255,[m,m,m];o<.5?l=o*(1+r):l=o+r-o*r;const c=2*o-l,b=[0,0,0];for(let k=0;k<3;k++)h=t+1/3*-(k-1),h<0&&h++,h>1&&h--,6*h<1?m=c+(l-c)*6*h:2*h<1?m=l:3*h<2?m=c+(l-c)*(2/3-h)*6:m=c,b[k]=m*255;return b};St.hsl.hsv=function(e){const t=e[0];let r=e[1]/100,o=e[2]/100,l=r;const h=Math.max(o,.01);o*=2,r*=o<=1?o:2-o,l*=h<=1?h:2-h;const m=(o+r)/2,c=o===0?2*l/(h+l):2*r/(o+r);return[t,c*100,m*100]};St.hsv.rgb=function(e){const t=e[0]/60,r=e[1]/100;let o=e[2]/100;const l=Math.floor(t)%6,h=t-Math.floor(t),m=255*o*(1-r),c=255*o*(1-r*h),b=255*o*(1-r*(1-h));switch(o*=255,l){case 0:return[o,b,m];case 1:return[c,o,m];case 2:return[m,o,b];case 3:return[m,c,o];case 4:return[b,m,o];case 5:return[o,m,c]}};St.hsv.hsl=function(e){const t=e[0],r=e[1]/100,o=e[2]/100,l=Math.max(o,.01);let h,m;m=(2-r)*o;const c=(2-r)*l;return h=r*l,h/=c<=1?c:2-c,h=h||0,m/=2,[t,h*100,m*100]};St.hwb.rgb=function(e){const t=e[0]/360;let r=e[1]/100,o=e[2]/100;const l=r+o;let h;l>1&&(r/=l,o/=l);const m=Math.floor(6*t),c=1-o;h=6*t-m,m&1&&(h=1-h);const b=r+h*(c-r);let k,A,R;switch(m){default:case 6:case 0:k=c,A=b,R=r;break;case 1:k=b,A=c,R=r;break;case 2:k=r,A=c,R=b;break;case 3:k=r,A=b,R=c;break;case 4:k=b,A=r,R=c;break;case 5:k=c,A=r,R=b;break}return[k*255,A*255,R*255]};St.cmyk.rgb=function(e){const t=e[0]/100,r=e[1]/100,o=e[2]/100,l=e[3]/100,h=1-Math.min(1,t*(1-l)+l),m=1-Math.min(1,r*(1-l)+l),c=1-Math.min(1,o*(1-l)+l);return[h*255,m*255,c*255]};St.xyz.rgb=function(e){const t=e[0]/100,r=e[1]/100,o=e[2]/100;let l,h,m;return l=t*3.2406+r*-1.5372+o*-.4986,h=t*-.9689+r*1.8758+o*.0415,m=t*.0557+r*-.204+o*1.057,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,m=m>.0031308?1.055*m**(1/2.4)-.055:m*12.92,l=Math.min(Math.max(0,l),1),h=Math.min(Math.max(0,h),1),m=Math.min(Math.max(0,m),1),[l*255,h*255,m*255]};St.xyz.lab=function(e){let t=e[0],r=e[1],o=e[2];t/=95.047,r/=100,o/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;const l=116*r-16,h=500*(t-r),m=200*(r-o);return[l,h,m]};St.lab.xyz=function(e){const t=e[0],r=e[1],o=e[2];let l,h,m;h=(t+16)/116,l=r/500+h,m=h-o/200;const c=h**3,b=l**3,k=m**3;return h=c>.008856?c:(h-16/116)/7.787,l=b>.008856?b:(l-16/116)/7.787,m=k>.008856?k:(m-16/116)/7.787,l*=95.047,h*=100,m*=108.883,[l,h,m]};St.lab.lch=function(e){const t=e[0],r=e[1],o=e[2];let l;l=Math.atan2(o,r)*360/2/Math.PI,l<0&&(l+=360);const m=Math.sqrt(r*r+o*o);return[t,m,l]};St.lch.lab=function(e){const t=e[0],r=e[1],l=e[2]/360*2*Math.PI,h=r*Math.cos(l),m=r*Math.sin(l);return[t,h,m]};St.rgb.ansi16=function(e,t=null){const[r,o,l]=e;let h=t===null?St.rgb.hsv(e)[2]:t;if(h=Math.round(h/50),h===0)return 30;let m=30+(Math.round(l/255)<<2|Math.round(o/255)<<1|Math.round(r/255));return h===2&&(m+=60),m};St.hsv.ansi16=function(e){return St.rgb.ansi16(St.hsv.rgb(e),e[2])};St.rgb.ansi256=function(e){const t=e[0],r=e[1],o=e[2];return t===r&&r===o?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(o/255*5)};St.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const r=(~~(e>50)+1)*.5,o=(t&1)*r*255,l=(t>>1&1)*r*255,h=(t>>2&1)*r*255;return[o,l,h]};St.ansi256.rgb=function(e){if(e>=232){const h=(e-232)*10+8;return[h,h,h]}e-=16;let t;const r=Math.floor(e/36)/5*255,o=Math.floor((t=e%36)/6)/5*255,l=t%6/5*255;return[r,o,l]};St.rgb.hex=function(e){const r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};St.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(c=>c+c).join(""));const o=parseInt(r,16),l=o>>16&255,h=o>>8&255,m=o&255;return[l,h,m]};St.rgb.hcg=function(e){const t=e[0]/255,r=e[1]/255,o=e[2]/255,l=Math.max(Math.max(t,r),o),h=Math.min(Math.min(t,r),o),m=l-h;let c,b;return m<1?c=h/(1-m):c=0,m<=0?b=0:l===t?b=(r-o)/m%6:l===r?b=2+(o-t)/m:b=4+(t-r)/m,b/=6,b%=1,[b*360,m*100,c*100]};St.hsl.hcg=function(e){const t=e[1]/100,r=e[2]/100,o=r<.5?2*t*r:2*t*(1-r);let l=0;return o<1&&(l=(r-.5*o)/(1-o)),[e[0],o*100,l*100]};St.hsv.hcg=function(e){const t=e[1]/100,r=e[2]/100,o=t*r;let l=0;return o<1&&(l=(r-o)/(1-o)),[e[0],o*100,l*100]};St.hcg.rgb=function(e){const t=e[0]/360,r=e[1]/100,o=e[2]/100;if(r===0)return[o*255,o*255,o*255];const l=[0,0,0],h=t%1*6,m=h%1,c=1-m;let b=0;switch(Math.floor(h)){case 0:l[0]=1,l[1]=m,l[2]=0;break;case 1:l[0]=c,l[1]=1,l[2]=0;break;case 2:l[0]=0,l[1]=1,l[2]=m;break;case 3:l[0]=0,l[1]=c,l[2]=1;break;case 4:l[0]=m,l[1]=0,l[2]=1;break;default:l[0]=1,l[1]=0,l[2]=c}return b=(1-r)*o,[(r*l[0]+b)*255,(r*l[1]+b)*255,(r*l[2]+b)*255]};St.hcg.hsv=function(e){const t=e[1]/100,r=e[2]/100,o=t+r*(1-t);let l=0;return o>0&&(l=t/o),[e[0],l*100,o*100]};St.hcg.hsl=function(e){const t=e[1]/100,o=e[2]/100*(1-t)+.5*t;let l=0;return o>0&&o<.5?l=t/(2*o):o>=.5&&o<1&&(l=t/(2*(1-o))),[e[0],l*100,o*100]};St.hcg.hwb=function(e){const t=e[1]/100,r=e[2]/100,o=t+r*(1-t);return[e[0],(o-t)*100,(1-o)*100]};St.hwb.hcg=function(e){const t=e[1]/100,o=1-e[2]/100,l=o-t;let h=0;return l<1&&(h=(o-l)/(1-l)),[e[0],l*100,h*100]};St.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};St.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};St.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};St.gray.hsl=function(e){return[0,0,e[0]]};St.gray.hsv=St.gray.hsl;St.gray.hwb=function(e){return[0,100,e[0]]};St.gray.cmyk=function(e){return[0,0,0,e[0]]};St.gray.lab=function(e){return[e[0],0,0]};St.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,o=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(o.length)+o};St.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const yy=Q5;function hN(){const e={},t=Object.keys(yy);for(let r=t.length,o=0;o<r;o++)e[t[o]]={distance:-1,parent:null};return e}function dN(e){const t=hN(),r=[e];for(t[e].distance=0;r.length;){const o=r.pop(),l=Object.keys(yy[o]);for(let h=l.length,m=0;m<h;m++){const c=l[m],b=t[c];b.distance===-1&&(b.distance=t[o].distance+1,b.parent=o,r.unshift(c))}}return t}function fN(e,t){return function(r){return t(e(r))}}function pN(e,t){const r=[t[e].parent,e];let o=yy[t[e].parent][e],l=t[e].parent;for(;t[l].parent;)r.unshift(t[l].parent),o=fN(yy[t[l].parent][l],o),l=t[l].parent;return o.conversion=r,o}var mN=function(e){const t=dN(e),r={},o=Object.keys(t);for(let l=o.length,h=0;h<l;h++){const m=o[h];t[m].parent!==null&&(r[m]=pN(m,t))}return r};const ex=Q5,gN=mN,Nu={},yN=Object.keys(ex);function vN(e){const t=function(...r){const o=r[0];return o==null?o:(o.length>1&&(r=o),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function _N(e){const t=function(...r){const o=r[0];if(o==null)return o;o.length>1&&(r=o);const l=e(r);if(typeof l=="object")for(let h=l.length,m=0;m<h;m++)l[m]=Math.round(l[m]);return l};return"conversion"in e&&(t.conversion=e.conversion),t}yN.forEach(e=>{Nu[e]={},Object.defineProperty(Nu[e],"channels",{value:ex[e].channels}),Object.defineProperty(Nu[e],"labels",{value:ex[e].labels});const t=gN(e);Object.keys(t).forEach(o=>{const l=t[o];Nu[e][o]=_N(l),Nu[e][o].raw=vN(l)})});var xN=Nu;const ju=cN,wo=xN,eP=["keyword","gray","hex"],tx={};for(const e of Object.keys(wo))tx[[...wo[e].labels].sort().join("")]=e;const vy={};function qn(e,t){if(!(this instanceof qn))return new qn(e,t);if(t&&t in eP&&(t=null),t&&!(t in wo))throw new Error("Unknown model: "+t);let r,o;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof qn)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const l=ju.get(e);if(l===null)throw new Error("Unable to parse color from string: "+e);this.model=l.model,o=wo[this.model].channels,this.color=l.value.slice(0,o),this.valpha=typeof l.value[o]=="number"?l.value[o]:1}else if(e.length>0){this.model=t||"rgb",o=wo[this.model].channels;const l=Array.prototype.slice.call(e,0,o);this.color=rx(l,o),this.valpha=typeof e[o]=="number"?e[o]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const l=Object.keys(e);"alpha"in e&&(l.splice(l.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const h=l.sort().join("");if(!(h in tx))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=tx[h];const{labels:m}=wo[this.model],c=[];for(r=0;r<m.length;r++)c.push(e[m[r]]);this.color=rx(c)}if(vy[this.model])for(o=wo[this.model].channels,r=0;r<o;r++){const l=vy[this.model][r];l&&(this.color[r]=l(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}qn.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in ju.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);const r=t.valpha===1?t.color:[...t.color,this.valpha];return ju.to[t.model](r)},percentString(e){const t=this.rgb().round(typeof e=="number"?e:1),r=t.valpha===1?t.color:[...t.color,this.valpha];return ju.to.rgb.percent(r)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=wo[this.model],{labels:r}=wo[this.model];for(let o=0;o<t;o++)e[r[o]]=this.color[o];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new qn([...this.color.map(wN(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new qn([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:an("rgb",0,Dn(255)),green:an("rgb",1,Dn(255)),blue:an("rgb",2,Dn(255)),hue:an(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:an("hsl",1,Dn(100)),lightness:an("hsl",2,Dn(100)),saturationv:an("hsv",1,Dn(100)),value:an("hsv",2,Dn(100)),chroma:an("hcg",1,Dn(100)),gray:an("hcg",2,Dn(100)),white:an("hwb",1,Dn(100)),wblack:an("hwb",2,Dn(100)),cyan:an("cmyk",0,Dn(100)),magenta:an("cmyk",1,Dn(100)),yellow:an("cmyk",2,Dn(100)),black:an("cmyk",3,Dn(100)),x:an("xyz",0,Dn(95.047)),y:an("xyz",1,Dn(100)),z:an("xyz",2,Dn(108.833)),l:an("lab",0,Dn(100)),a:an("lab",1),b:an("lab",2),keyword(e){return e!==void 0?new qn(e):wo[this.model].keyword(this.color)},hex(e){return e!==void 0?new qn(e):ju.to.hex(this.rgb().round().color)},hexa(e){if(e!==void 0)return new qn(e);const t=this.rgb().round().color;let r=Math.round(this.valpha*255).toString(16).toUpperCase();return r.length===1&&(r="0"+r),ju.to.hex(t)+r},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,t=[];for(const[r,o]of e.entries()){const l=o/255;t[r]=l<=.04045?l/12.92:((l+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return qn.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let r=t.color[0];return r=(r+e)%360,r=r<0?360+r:r,t.color[0]=r,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const r=e.rgb(),o=this.rgb(),l=t===void 0?.5:t,h=2*l-1,m=r.alpha()-o.alpha(),c=((h*m===-1?h:(h+m)/(1+h*m))+1)/2,b=1-c;return qn.rgb(c*r.red()+b*o.red(),c*r.green()+b*o.green(),c*r.blue()+b*o.blue(),r.alpha()*l+o.alpha()*(1-l))}};for(const e of Object.keys(wo)){if(eP.includes(e))continue;const{channels:t}=wo[e];qn.prototype[e]=function(...r){return this.model===e?new qn(this):r.length>0?new qn(r,e):new qn([...SN(wo[this.model][e].raw(this.color)),this.valpha],e)},qn[e]=function(...r){let o=r[0];return typeof o=="number"&&(o=rx(r,t)),new qn(o,e)}}function bN(e,t){return Number(e.toFixed(t))}function wN(e){return function(t){return bN(t,e)}}function an(e,t,r){e=Array.isArray(e)?e:[e];for(const o of e)(vy[o]||(vy[o]=[]))[t]=r;return e=e[0],function(o){let l;return o!==void 0?(r&&(o=r(o)),l=this[e](),l.color[t]=o,l):(l=this[e]().color[t],r&&(l=r(l)),l)}}function Dn(e){return function(t){return Math.max(0,Math.min(e,t))}}function SN(e){return Array.isArray(e)?e:[e]}function rx(e,t){for(let r=0;r<t;r++)typeof e[r]!="number"&&(e[r]=0);return e}var CN=qn;const tP=by(CN);class Ts extends Error{constructor(t){super("unreachable value "+JSON.stringify(t))}}class nx{static checkArgument(t,r){if(!t)throw new Error(r)}static checkState(t,r){if(!t)throw new Error(r)}static checkExists(t,r){return Wa(t,r)}}var yc=(e=>(e[e.COMPANY=0]="COMPANY",e[e.FUEL=1]="FUEL",e[e.REST=2]="REST",e[e.SERVICE=3]="SERVICE",e[e.DEALER=4]="DEALER",e[e.RECRUITING=5]="RECRUITING",e))(yc||{}),rP=(e=>(e[e.NEARBY=0]="NEARBY",e[e.ROUTE=1]="ROUTE",e))(rP||{}),Lt=(e=>(e[e.THROUGH=0]="THROUGH",e[e.SLIGHT_LEFT=1]="SLIGHT_LEFT",e[e.LEFT=2]="LEFT",e[e.SHARP_LEFT=3]="SHARP_LEFT",e[e.U_TURN_LEFT=4]="U_TURN_LEFT",e[e.SLIGHT_RIGHT=11]="SLIGHT_RIGHT",e[e.RIGHT=12]="RIGHT",e[e.SHARP_RIGHT=13]="SHARP_RIGHT",e[e.U_TURN_RIGHT=14]="U_TURN_RIGHT",e[e.MERGE=-1]="MERGE",e))(Lt||{});const Jb=e=>{const{branches:t,activeBranch:r,highlightColor:o="#000",dimColor:l="#ccc"}=e,h=[...t].sort((A,R)=>A===r?1:R===r?-1:0),m=h.some(A=>0<Number(A)&&Number(A)<10),c=h.some(A=>Number(A)>=10),b=h.length===1?"single":m&&!c?"left":c&&!m?"right":"left-and-right",k=h.map((A,R)=>{switch(A){case Lt.THROUGH:{let O,Q;switch(b){case"single":O=0;break;case"left-and-right":Q=-1;break;case"left":O=2,Q=-1;break;case"right":O=-2,Q=-1;break;default:throw new Ts(b)}return W.jsx(kN,{offsetX:O,offsetY:Q,color:A===r?o:l},R)}case Lt.SLIGHT_LEFT:case Lt.SLIGHT_RIGHT:{let O,Q,te;const ee=Lt.SLIGHT_LEFT&&t.includes(Lt.LEFT)||Lt.SLIGHT_RIGHT&&t.includes(Lt.RIGHT);switch(b){case"single":O=0;break;case"left-and-right":{O=A===Lt.SLIGHT_LEFT?-2:2,Q=t.includes(Lt.THROUGH)?void 0:ee?10:9;break}case"left":case"right":Q=t.includes(Lt.THROUGH)?void 0:9;break;default:throw new Ts(b)}return W.jsx(TN,{offsetX:O,stemLength:Q,angleLeg:te,orientation:A===Lt.SLIGHT_LEFT?"left":"right",color:A===r?o:l},R)}case Lt.LEFT:case Lt.RIGHT:{let O,Q,te,ee;const de=A===Lt.LEFT&&t.includes(Lt.SLIGHT_LEFT)||A===Lt.RIGHT&&t.includes(Lt.SLIGHT_RIGHT);switch(b){case"single":O=0;break;case"left-and-right":O=A===Lt.LEFT?-4:4,Q=de?9:10,te=10,ee=t.includes(Lt.THROUGH)?4:void 0;break;case"left":case"right":O=b==="left"?-2:2,Q=de?9:10,te=10,ee=t.includes(Lt.THROUGH)?4:void 0;break;default:throw new Ts(b)}return W.jsx(EN,{offsetX:O,stemLength:Q,endLength:te,radius:ee,orientation:A===Lt.LEFT?"left":"right",color:A===r?o:l},R)}case Lt.SHARP_LEFT:case Lt.SHARP_RIGHT:{let O,Q,te;const ee=A===Lt.SHARP_LEFT&&t.includes(Lt.SLIGHT_LEFT)||A===Lt.SHARP_RIGHT&&t.includes(Lt.SLIGHT_RIGHT);switch(b){case"single":O=0,Q=11,te=9,ee||Q++;break;case"left-and-right":O=A===Lt.SHARP_LEFT?-2:2,(A===Lt.SHARP_LEFT&&!t.includes(Lt.LEFT)||A===Lt.SHARP_RIGHT&&!t.includes(Lt.RIGHT))&&(Q=9,te=8),ee||(Q=Q==null?9:Q+1);break;case"left":case"right":t.length===2&&t.includes(Lt.THROUGH)&&(Q=10,te=9),ee||(Q=Q==null?9:Q+1);break;default:throw new Ts(b)}return W.jsx(IN,{offsetX:O,stemLength:Q,angleLeg:te,orientation:A===Lt.SHARP_LEFT?"left":"right",color:A===r?o:l},R)}case Lt.U_TURN_LEFT:case Lt.U_TURN_RIGHT:{let O,Q,te,ee,de;const G=A===Lt.U_TURN_LEFT&&t.includes(Lt.LEFT)||A===Lt.U_TURN_RIGHT&&t.includes(Lt.RIGHT);switch(b){case"single":break;case"left-and-right":O=A===Lt.U_TURN_LEFT?-5:5,te=6,de=4,ee=3.5,Q=-1,G&&(ee--,de+=2);break;case"left":case"right":O=A===Lt.U_TURN_LEFT?-3:3,Q=-1,te=6,de=4,ee=3.5,G&&(ee--,de+=2);break;default:throw new Ts(b)}return W.jsx(PN,{offsetX:O,offsetY:Q,stemLength:te,radius:ee,endLength:de,orientation:A===Lt.U_TURN_LEFT?"left":"right",color:A===r?o:l},R)}case Lt.MERGE:return Yb(t.length===1,"MERGE must appear alone"),W.jsx(AN,{color:A===r?o:l},R);default:throw new Ts(A)}});return W.jsxs("svg",{viewBox:"0 0 24 24",children:[W.jsx("defs",{children:W.jsx("g",{id:"arrow","transform-origin":"0 0",transform:"translate(0,1.414) rotate(135) ",children:W.jsx("path",{fill:"none",strokeWidth:"2",d:"M0,-4 0,0 4,0"})})}),k]})},kN=e=>{const t=[12,21],{color:r="black",orientation:o="left",offsetX:l=0,offsetY:h=0,stemLength:m=18}=e,c=[t[0],t[1]-m];return W.jsxs("g",{stroke:r,"transform-origin":"12 12",transform:`translate(${l}, ${h})scale(${o==="left"?"":"-"}1, 1)`,children:[W.jsx("path",{fill:"none",strokeWidth:"2",d:`M${t.join()} v-${m-1.414}`}),W.jsx("use",{href:"#arrow",x:c[0],y:c[1]})]})},TN=e=>{const t=[14,20],{color:r="black",orientation:o="left",offsetX:l=0,offsetY:h=0,stemLength:m=8,angleLeg:c=8}=e,b=[t[0]-c,t[1]-m-c];return W.jsxs("g",{stroke:r,"transform-origin":"12 12",transform:`translate(${l}, ${h})scale(${o==="left"?"":"-"}1, 1)`,children:[W.jsx("path",{fill:"none",strokeWidth:"2",strokeLinejoin:"round",d:`M${t.join()}v-${m}l-${c-1.414},-${c-1.414}`}),W.jsx("use",{href:"#arrow","transform-origin":b.join(" "),transform:"rotate(-45)",x:b[0],y:b[1]})]})},EN=e=>{const t=[16,20],{color:r="black",orientation:o="left",offsetX:l=0,offsetY:h=0,stemLength:m=10,radius:c=1,endLength:b=12}=e,k=[t[0]-b,t[1]-m];return W.jsxs("g",{stroke:r,"transform-origin":"12 12",transform:`translate(${l}, ${h})scale(${o==="left"?"":"-"}1, 1)`,children:[W.jsx("path",{fill:"none",strokeWidth:"2",d:`M${t.join()}v-${m-c}a${c} ${c} 0 0 0 -${c},-${c}h-${b-c-1.414}`}),W.jsx("use",{href:"#arrow",x:k[0],y:k[1],"transform-origin":k.join(" "),transform:"rotate(-90)"})]})},IN=e=>{const t=[14,20],{color:r="black",orientation:o="left",offsetX:l=0,offsetY:h=0,stemLength:m=8,angleLeg:c=8}=e,b=[t[0]-c,t[1]-m+c];return W.jsxs("g",{stroke:r,"transform-origin":"12 12",transform:`translate(${l}, ${h})scale(${o==="left"?"":"-"}1, 1)`,children:[W.jsx("path",{fill:"none",strokeWidth:"2",strokeLinejoin:"round",d:`M${t.join()}v-${m}l-${c-1.414},${c-1.414}`}),W.jsx("use",{href:"#arrow",x:b[0],y:b[1],"transform-origin":b.join(" "),transform:"rotate(-135)"})]})},PN=e=>{const t=[17,21],{color:r="black",orientation:o="left",offsetX:l=0,offsetY:h=0,stemLength:m=12,radius:c=5,endLength:b=8}=e,k=[t[0]-c*2,t[1]-m+b];return W.jsxs("g",{stroke:r,"transform-origin":"12 12",transform:`translate(${l}, ${h})scale(${o==="left"?"":"-"}1, 1)`,children:[W.jsx("path",{fill:"none",strokeWidth:"2",strokeLinejoin:"round",d:`M${t.join()} v-${m}a${c} ${c} 0 1 0 -${c*2},0v${b-1.414}`}),W.jsx("use",{href:"#arrow",x:k[0],y:k[1],"transform-origin":k.join(" "),transform:"rotate(180)"})]})},AN=e=>{const{color:t="black",offsetX:r=0,offsetY:o=0,stemLength:l=11,baseLeg:h=6}=e,m=[12,3];return W.jsxs("g",{stroke:t,"transform-origin":"12 12",transform:`translate(${r}, ${o})`,children:[W.jsx("path",{fill:"none",strokeWidth:"2",d:`M${m[0]},${m[1]+1.414}V${m[1]+l}l-${h},${h}m${h},-${h}l${h},${h}`}),W.jsx("use",{href:"#arrow",x:m[0],y:m[1]})]})},_y=tP("hsl(151,82%,35%)"),MN=e=>{const t=!!e.laneHint||!!e.thenHint,{length:r,unit:o}=DN(e.distanceMeters);return W.jsxs(Ci,{fontSize:"0.75rem",children:[W.jsxs(Ci,{direction:"row",alignItems:"center",px:2,py:1,spacing:2,bgcolor:_y.string(),borderRadius:t?"1em 1em 1em 0":"1em",children:[W.jsxs(Ci,{alignItems:"center",children:[W.jsx(Ei,{width:"4em",children:W.jsx(Jb,{branches:[e.direction],dimColor:"#fff"})}),W.jsxs(Zn,{level:"h3",textColor:"#fff",textAlign:"center",width:"2.5em",display:"block",children:[r,W.jsx(Zn,{level:"body-sm",textColor:"#fffa",children:o})]})]}),W.jsx(Zn,{level:"h1",fontWeight:"normal",textColor:"#fff",children:"Main St"})]}),e.laneHint?W.jsx(zN,{roundBottomLeft:!e.thenHint,hint:e.laneHint}):null,e.thenHint&&W.jsx(LN,{hint:e.thenHint})]})},zN=e=>W.jsx(Ei,{children:W.jsx(Ci,{display:"inline-flex",direction:"row",height:"5em",px:2,py:1,spacing:.5,divider:W.jsx(Lb,{orientation:"vertical",sx:{"--Divider-lineColor":"#fffc",height:"calc(0.75em)",alignSelf:"end",bottom:"-0.5em"}}),sx:{justifyContent:"center"},bgcolor:_y.darken(.33).string(),borderRadius:`0 0 1em ${e.roundBottomLeft?"1em":0}`,children:e.hint.lanes.map(({branches:t,activeBranch:r},o)=>W.jsx(Jb,{branches:t,activeBranch:r,dimColor:_y.mix(tP("gray"),.5).string(),highlightColor:"#fff"},o))})}),LN=e=>W.jsx(Ei,{children:W.jsxs(Ci,{display:"inline-flex",alignItems:"center",direction:"row",height:"5em",px:2,py:1,spacing:1,bgcolor:_y.darken(.33).string(),borderRadius:"0 0 1em 1em",children:[W.jsx(Zn,{textColor:"#fff",level:"body-lg",children:"Then"}),W.jsx(Ei,{width:"2.5em",height:"2.5em",children:W.jsx(Jb,{branches:[e.hint.direction],activeBranch:e.hint.direction,highlightColor:"#fff"})})]})});function DN(e){const t=e*3.28084;if(t<=500)return{length:Number(Math.round(t).toPrecision(2)),unit:"ft"};const r=e*.0006213712;return r<=1?{length:Number(r.toPrecision(1)),unit:"mi"}:r<=10?{length:Number(r.toPrecision(2)),unit:"mi"}:{length:Math.round(r),unit:"mi"}}const RN=Lo(W.jsx("path",{d:"m9.78 11.16-1.42 1.42c-.68-.69-1.34-1.58-1.79-2.94l1.94-.49c.32.89.77 1.5 1.27 2.01M11 6 7 2 3 6h3.02c.02.81.08 1.54.19 2.17l1.94-.49C8.08 7.2 8.03 6.63 8.02 6zm10 0-4-4-4 4h2.99c-.1 3.68-1.28 4.75-2.54 5.88-.5.44-1.01.92-1.45 1.55-.34-.49-.73-.88-1.13-1.24L9.46 13.6c.93.85 1.54 1.54 1.54 3.4v5h2v-5c0-2.02.71-2.66 1.79-3.63 1.38-1.24 3.08-2.78 3.2-7.37z"}),"AltRoute"),ON=Lo(W.jsx("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNew"),BN=Lo(W.jsx("path",{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4"}),"Build"),$N=Lo(W.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),FN=Lo(W.jsx("path",{d:"m21.41 10.59-7.99-8c-.78-.78-2.05-.78-2.83 0l-8.01 8c-.78.78-.78 2.05 0 2.83l8.01 8c.78.78 2.05.78 2.83 0l7.99-8c.79-.79.79-2.05 0-2.83M13.5 14.5V12H10v3H8v-4c0-.55.45-1 1-1h4.5V7.5L17 11z"}),"Directions"),NN=Lo(W.jsx("path",{d:"M7 13c1.66 0 3-1.34 3-3S8.66 7 7 7s-3 1.34-3 3 1.34 3 3 3m12-6h-8v7H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4"}),"Hotel"),jN=Lo(W.jsx("path",{d:"m19.77 7.23.01-.01-3.72-3.72L15 4.56l2.11 2.11c-.94.36-1.61 1.26-1.61 2.33 0 1.38 1.12 2.5 2.5 2.5.36 0 .69-.08 1-.21v7.21c0 .55-.45 1-1 1s-1-.45-1-1V14c0-1.1-.9-2-2-2h-1V5c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v16h10v-7.5h1.5v5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V9c0-.69-.28-1.32-.73-1.77M12 10H6V5h6zm6 0c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"LocalGasStation"),VN=Lo(W.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"LocalShipping"),UN=Lo(W.jsx("path",{d:"M12 2 4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"}),"Navigation"),GN=Lo(W.jsx("path",{d:"m12 7.27 4.28 10.43-3.47-1.53-.81-.36-.81.36-3.47 1.53zM12 2 4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"}),"NavigationOutlined"),HN=Lo([W.jsx("circle",{cx:"10",cy:"8",r:"4"},"0"),W.jsx("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99m9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"},"1")],"PersonSearch"),qN=Lo(W.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),WN=Lo(W.jsx("path",{d:"m20.55 5.22-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.15.55L3.46 5.22C3.17 5.57 3 6.01 3 6.5V19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.49-.17-.93-.45-1.28M12 9.5l5.5 5.5H14v2h-4v-2H6.5zM5.12 5l.82-1h12l.93 1z"}),"Unarchive"),ZN={light:{background:"rgba(255,255,255,0.8)",fill:"hsl(204,100%,50%)"},dark:{background:"hsl(204,100%,50%)",fill:"rgba(255,255,255,1)"}},KN=pe.forwardRef((e,t)=>{const{mode:r="light"}=e,{background:o,fill:l}=ZN[r];return W.jsx(gy,{ref:t,longitude:e.longitude??0,latitude:e.latitude??0,pitchAlignment:"map",rotationAlignment:"map",children:W.jsx(Ei,{sx:{width:64,height:64,display:"flex",justifyContent:"center",alignItems:"center",background:o,borderRadius:"50%",boxShadow:"0 1px 1px 1px rgba(128,128,128,.2)"},children:W.jsx(UN,{sx:{transform:"scale(4)",fill:l}})})})}),XN={"text-color":"hsl(42, 10%, 14%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},YN={"text-color":"hsl(42, 10%, 24%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},JN={"text-color":"hsl(42, 10%, 86%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},QN={"text-color":"hsl(42, 10%, 76%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},Qb={light:{water:"#b2cdfb",land:"#f8f8f8",stateBorder:"#aaa",countryBorder:"#ccc",primaryTextPaint:XN,secondaryTextPaint:YN,hiddenRoad:"#e9e9e8",footprint:"#e9e9e8",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#eeeeffcc",trainLine:"#aaa",trainLabel:"#555c",trainHalo:"#eefc",mapAreaOutline:"#999a"},dark:{water:"#36415d",land:"#1a1a1a",stateBorder:"#555",countryBorder:"#333",primaryTextPaint:JN,secondaryTextPaint:QN,hiddenRoad:"#404038",footprint:"#30302f88",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#303028cc",trainLine:"#888",trainLabel:"#eeec",trainHalo:"#303028cc",mapAreaOutline:"#777a"}};var nP={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(wM,function(){var r,o,l;function h(c,b){if(!r)r=b;else if(!o)o=b;else{var k="var sharedChunk = {}; ("+r+")(sharedChunk); ("+o+")(sharedChunk);",A={};r(A),l=b(A),typeof window<"u"&&(l.workerUrl=window.URL.createObjectURL(new Blob([k],{type:"text/javascript"})))}}h(["exports"],function(c){function b(s,n,a,d){return new(a||(a=Promise))(function(p,v){function x(I){try{T(d.next(I))}catch(M){v(M)}}function w(I){try{T(d.throw(I))}catch(M){v(M)}}function T(I){var M;I.done?p(I.value):(M=I.value,M instanceof a?M:new a(function(D){D(M)})).then(x,w)}T((d=d.apply(s,n||[])).next())})}function k(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var A=R;function R(s,n){this.x=s,this.y=n}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,n){return this.clone()._rotateAround(s,n)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var n=s.x-this.x,a=s.y-this.y;return n*n+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,n){return Math.atan2(this.x*n-this.y*s,this.x*s+this.y*n)},_matMult:function(s){var n=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=n,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var n=Math.cos(s),a=Math.sin(s),d=a*this.x+n*this.y;return this.x=n*this.x-a*this.y,this.y=d,this},_rotateAround:function(s,n){var a=Math.cos(s),d=Math.sin(s),p=n.y+d*(this.x-n.x)+a*(this.y-n.y);return this.x=n.x+a*(this.x-n.x)-d*(this.y-n.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},R.convert=function(s){return s instanceof R?s:Array.isArray(s)?new R(s[0],s[1]):s};var O=k(A),Q=te;function te(s,n,a,d){this.cx=3*s,this.bx=3*(a-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(d-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=n,this.p2x=a,this.p2y=d}te.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,n){if(n===void 0&&(n=1e-6),s<0)return 0;if(s>1)return 1;for(var a=s,d=0;d<8;d++){var p=this.sampleCurveX(a)-s;if(Math.abs(p)<n)return a;var v=this.sampleCurveDerivativeX(a);if(Math.abs(v)<1e-6)break;a-=p/v}var x=0,w=1;for(a=s,d=0;d<20&&(p=this.sampleCurveX(a),!(Math.abs(p-s)<n));d++)s>p?x=a:w=a,a=.5*(w-x)+x;return a},solve:function(s,n){return this.sampleCurveY(this.solveCurveX(s,n))}};var ee=k(Q);let de,G;function j(){return de==null&&(de=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),de}function U(){if(G==null&&(G=!1,j())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let d=0;d<5*5;d++){const p=4*d;n.fillStyle=`rgb(${p},${p+1},${p+2})`,n.fillRect(d%5,Math.floor(d/5),1,1)}const a=n.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&a[d]!==d){G=!0;break}}}return G||!1}function fe(s,n,a,d){const p=new ee(s,n,a,d);return function(v){return p.solve(v)}}const ie=fe(.25,.1,.25,1);function F(s,n,a){return Math.min(a,Math.max(n,s))}function ce(s,n,a){const d=a-n,p=((s-n)%d+d)%d+n;return p===n?a:p}function Ce(s,...n){for(const a of n)for(const d in a)s[d]=a[d];return s}let Ue=1;function Ae(s,n,a){const d={};for(const p in s)d[p]=n.call(a||this,s[p],p,s);return d}function Re(s,n,a){const d={};for(const p in s)n.call(a||this,s[p],p,s)&&(d[p]=s[p]);return d}function We(s){return Array.isArray(s)?s.map(We):typeof s=="object"&&s?Ae(s,We):s}const He={};function Ze(s){He[s]||(typeof console<"u"&&console.warn(s),He[s]=!0)}function Ge(s,n,a){return(a.y-s.y)*(n.x-s.x)>(n.y-s.y)*(a.x-s.x)}function Fe(s){let n=0;for(let a,d,p=0,v=s.length,x=v-1;p<v;x=p++)a=s[p],d=s[x],n+=(d.x-a.x)*(a.y+d.y);return n}function ot(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Pe=null;function st(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Et(s,n,a,d,p){return b(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(s,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const w=x.startsWith("BGR"),T=new Uint8ClampedArray(d*p*4);if(yield v.copyTo(T,function(I,M,D,$,H){const q=4*Math.max(-M,0),X=(Math.max(0,D)-D)*$*4+q,se=4*$,ue=Math.max(0,M),be=Math.max(0,D);return{rect:{x:ue,y:be,width:Math.min(I.width,M+$)-ue,height:Math.min(I.height,D+H)-be},layout:[{offset:X,stride:se}]}}(s,n,a,d,p)),w)for(let I=0;I<T.length;I+=4){const M=T[I];T[I]=T[I+2],T[I+2]=M}return T}finally{v.close()}})}let mt,Dt,jt,_r;const Ct={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(s){const n=requestAnimationFrame(s);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(s,n=0){return this.getImageCanvasContext(s).getImageData(-n,-n,s.width+2*n,s.height+2*n)},getImageCanvasContext(s){const n=window.document.createElement("canvas"),a=n.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return n.width=s.width,n.height=s.height,a.drawImage(s,0,0,s.width,s.height),a},resolveURL:s=>(jt||(jt=document.createElement("a")),jt.href=s,jt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(_r==null&&(_r=matchMedia("(prefers-reduced-motion: reduce)")),_r.matches)}},Pt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class at extends Error{constructor(n,a,d,p){super(`AJAXError: ${a} (${n}): ${d}`),this.status=n,this.statusText=a,this.url=d,this.body=p}}const At=ot()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Rt=s=>Pt.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))];function or(s,n){const a=new AbortController,d=new Request(s.url,{method:s.method||"GET",body:s.body,credentials:s.credentials,headers:s.headers,cache:s.cache,referrer:At(),signal:a.signal});let p=!1,v=!1;return s.type==="json"&&d.headers.set("Accept","application/json"),v||fetch(d).then(x=>x.ok?(w=>{(s.type==="arrayBuffer"||s.type==="image"?w.arrayBuffer():s.type==="json"?w.json():w.text()).then(T=>{v||(p=!0,n(null,T,w.headers.get("Cache-Control"),w.headers.get("Expires")))}).catch(T=>{v||n(new Error(T.message))})})(x):x.blob().then(w=>n(new at(x.status,x.statusText,s.url,w)))).catch(x=>{x.code!==20&&n(new Error(x.message))}),{cancel:()=>{v=!0,p||a.abort()}}}const rn=function(s,n){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){if(ot()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,n);if(!ot())return(Rt(s.url)||or)(s,n)}if(!(/^file:/.test(a=s.url)||/^file:/.test(At())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return or(s,n);if(ot()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,n,void 0,!0)}var a;return function(d,p){const v=new XMLHttpRequest;v.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(v.responseType="arraybuffer");for(const x in d.headers)v.setRequestHeader(x,d.headers[x]);return d.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=d.credentials==="include",v.onerror=()=>{p(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(d.type==="json")try{x=JSON.parse(v.response)}catch(w){return p(w)}p(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});p(new at(v.status,v.statusText,d.url,x))}},v.send(d.body),{cancel:()=>v.abort()}}(s,n)},co=function(s,n){return rn(Ce(s,{type:"arrayBuffer"}),n)};function Ui(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const n=new URL(s),a=window.location;return n.protocol===a.protocol&&n.host===a.host}function $s(s,n,a){a[s]&&a[s].indexOf(n)!==-1||(a[s]=a[s]||[],a[s].push(n))}function Do(s,n,a){if(a&&a[s]){const d=a[s].indexOf(n);d!==-1&&a[s].splice(d,1)}}class ui{constructor(n,a={}){Ce(this,a),this.type=n}}class Cn extends ui{constructor(n,a={}){super("error",Ce({error:n},a))}}class as{on(n,a){return this._listeners=this._listeners||{},$s(n,a,this._listeners),this}off(n,a){return Do(n,a,this._listeners),Do(n,a,this._oneTimeListeners),this}once(n,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},$s(n,a,this._oneTimeListeners),this):new Promise(d=>this.once(n,d))}fire(n,a){typeof n=="string"&&(n=new ui(n,a||{}));const d=n.type;if(this.listens(d)){n.target=this;const p=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const w of p)w.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const w of v)Do(d,w,this._oneTimeListeners),w.call(this,n);const x=this._eventedParent;x&&(Ce(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof Cn&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,a){return this._eventedParent=n,this._eventedParentData=a,this}}var Me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Bn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Yn(s,n){const a={};for(const d in s)d!=="ref"&&(a[d]=s[d]);return Bn.forEach(d=>{d in n&&(a[d]=n[d])}),a}function Ut(s,n){if(Array.isArray(s)){if(!Array.isArray(n)||s.length!==n.length)return!1;for(let a=0;a<s.length;a++)if(!Ut(s[a],n[a]))return!1;return!0}if(typeof s=="object"&&s!==null&&n!==null){if(typeof n!="object"||Object.keys(s).length!==Object.keys(n).length)return!1;for(const a in s)if(!Ut(s[a],n[a]))return!1;return!0}return s===n}const Zt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ii(s,n,a){a.push({command:Zt.addSource,args:[s,n[s]]})}function Fs(s,n,a){n.push({command:Zt.removeSource,args:[s]}),a[s]=!0}function Gi(s,n,a,d){Fs(s,a,d),Ii(s,n,a)}function ua(s,n,a){let d;for(d in s[a])if(Object.prototype.hasOwnProperty.call(s[a],d)&&d!=="data"&&!Ut(s[a][d],n[a][d]))return!1;for(d in n[a])if(Object.prototype.hasOwnProperty.call(n[a],d)&&d!=="data"&&!Ut(s[a][d],n[a][d]))return!1;return!0}function dn(s,n,a,d,p,v){let x;for(x in n=n||{},s=s||{})Object.prototype.hasOwnProperty.call(s,x)&&(Ut(s[x],n[x])||a.push({command:v,args:[d,x,n[x],p]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(s,x)&&(Ut(s[x],n[x])||a.push({command:v,args:[d,x,n[x],p]}))}function kn(s){return s.id}function Hi(s,n){return s[n.id]=n,s}class Ke{constructor(n,a,d,p){this.message=(n?`${n}: `:"")+d,p&&(this.identifier=p),a!=null&&a.__line__&&(this.line=a.__line__)}}function qi(s,...n){for(const a of n)for(const d in a)s[d]=a[d];return s}class er extends Error{constructor(n,a){super(a),this.message=a,this.key=n}}class uo{constructor(n,a=[]){this.parent=n,this.bindings={};for(const[d,p]of a)this.bindings[d]=p}concat(n){return new uo(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const ls={kind:"null"},Qe={kind:"number"},Ft={kind:"string"},Mt={kind:"boolean"},Jn={kind:"color"},Ro={kind:"object"},Ot={kind:"value"},cs={kind:"collator"},re={kind:"formatted"},B={kind:"padding"},N={kind:"resolvedImage"},Z={kind:"variableAnchorOffsetCollection"};function oe(s,n){return{kind:"array",itemType:s,N:n}}function ae(s){if(s.kind==="array"){const n=ae(s.itemType);return typeof s.N=="number"?`array<${n}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${n}>`}return s.kind}const we=[ls,Qe,Ft,Mt,Jn,re,Ro,oe(Ot),B,N,Z];function ye(s,n){if(n.kind==="error")return null;if(s.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!ye(s.itemType,n.itemType))&&(typeof s.N!="number"||s.N===n.N))return null}else{if(s.kind===n.kind)return null;if(s.kind==="value"){for(const a of we)if(!ye(a,n))return null}}return`Expected ${ae(s)} but found ${ae(n)} instead.`}function he(s,n){return n.some(a=>a.kind===s.kind)}function xe(s,n){return n.some(a=>a==="null"?s===null:a==="array"?Array.isArray(s):a==="object"?s&&!Array.isArray(s)&&typeof s=="object":a===typeof s)}function ze(s,n){return s.kind==="array"&&n.kind==="array"?s.itemType.kind===n.itemType.kind&&typeof s.N=="number":s.kind===n.kind}const Le=.96422,$e=.82521,xt=4/29,It=6/29,ht=3*It*It,wt=It*It*It,zt=Math.PI/180,ir=180/Math.PI;function pr(s){return(s%=360)<0&&(s+=360),s}function Jt([s,n,a,d]){let p,v;const x=$n((.2225045*(s=Yt(s))+.7168786*(n=Yt(n))+.0606169*(a=Yt(a)))/1);s===n&&n===a?p=v=x:(p=$n((.4360747*s+.3850649*n+.1430804*a)/Le),v=$n((.0139322*s+.0971045*n+.7141733*a)/$e));const w=116*x-16;return[w<0?0:w,500*(p-x),200*(x-v),d]}function Yt(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function $n(s){return s>wt?Math.pow(s,1/3):s/ht+xt}function xr([s,n,a,d]){let p=(s+16)/116,v=isNaN(n)?p:p+n/500,x=isNaN(a)?p:p-a/200;return p=1*Pn(p),v=Le*Pn(v),x=$e*Pn(x),[nn(3.1338561*v-1.6168667*p-.4906146*x),nn(-.9787684*v+1.9161415*p+.033454*x),nn(.0719453*v-.2289914*p+1.4052427*x),d]}function nn(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Pn(s){return s>It?s*s*s:ht*(s-xt)}function Wi(s){return parseInt(s.padEnd(2,s),16)/255}function Tp(s,n){return Xa(n?s/100:s,0,1)}function Xa(s,n,a){return Math.min(Math.max(n,s),a)}function Ya(s){return!s.some(Number.isNaN)}const z0={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class ur{constructor(n,a,d,p=1,v=!0){this.r=n,this.g=a,this.b=d,this.a=p,v||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[n,a,d,p]))}static parse(n){if(n instanceof ur)return n;if(typeof n!="string")return;const a=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=z0[d];if(p){const[x,w,T]=p;return[x/255,w/255,T/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const x=d.length<6?1:2;let w=1;return[Wi(d.slice(w,w+=x)),Wi(d.slice(w,w+=x)),Wi(d.slice(w,w+=x)),Wi(d.slice(w,w+x)||"ff")]}if(d.startsWith("rgb")){const x=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,T,I,M,D,$,H,q,X,se,ue,be]=x,me=[M||" ",H||" ",se].join("");if(me==="  "||me==="  /"||me===",,"||me===",,,"){const Se=[I,$,X].join(""),Te=Se==="%%%"?100:Se===""?255:0;if(Te){const Be=[Xa(+T/Te,0,1),Xa(+D/Te,0,1),Xa(+q/Te,0,1),ue?Tp(+ue,be):1];if(Ya(Be))return Be}}return}}const v=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,w,T,I,M,D,$,H,q]=v,X=[T||" ",M||" ",$].join("");if(X==="  "||X==="  /"||X===",,"||X===",,,"){const se=[+w,Xa(+I,0,100),Xa(+D,0,100),H?Tp(+H,q):1];if(Ya(se))return function([ue,be,me,Se]){function Te(Be){const it=(Be+ue/30)%12,ft=be*Math.min(me,1-me);return me-ft*Math.max(-1,Math.min(it-3,9-it,1))}return ue=pr(ue),be/=100,me/=100,[Te(0),Te(8),Te(4),Se]}(se)}}}(n);return a?new ur(...a,!1):void 0}get rgb(){const{r:n,g:a,b:d,a:p}=this,v=p||1/0;return this.overwriteGetter("rgb",[n/v,a/v,d/v,p])}get hcl(){return this.overwriteGetter("hcl",function(n){const[a,d,p,v]=Jt(n),x=Math.sqrt(d*d+p*p);return[Math.round(1e4*x)?pr(Math.atan2(p,d)*ir):NaN,x,a,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Jt(this.rgb))}overwriteGetter(n,a){return Object.defineProperty(this,n,{value:a}),a}toString(){const[n,a,d,p]=this.rgb;return`rgba(${[n,a,d].map(v=>Math.round(255*v)).join(",")},${p})`}}ur.black=new ur(0,0,0,1),ur.white=new ur(1,1,1,1),ur.transparent=new ur(0,0,0,0),ur.red=new ur(1,0,0,1);class Nh{constructor(n,a,d){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,a){return this.collator.compare(n,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Gc{constructor(n,a,d,p,v){this.text=n,this.image=a,this.scale=d,this.fontStack=p,this.textColor=v}}class Fn{constructor(n){this.sections=n}static fromString(n){return new Fn([new Gc(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Fn?n:Fn.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Pi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Pi)return n;if(typeof n=="number")return new Pi([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const a of n)if(typeof a!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Pi(n)}}toString(){return JSON.stringify(this.values)}}const L0=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Zi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Zi)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let a=0;a<n.length;a+=2){const d=n[a],p=n[a+1];if(typeof d!="string"||!L0.has(d)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Zi(n)}}toString(){return JSON.stringify(this.values)}}class An{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new An({name:n,available:!1}):null}}function Hc(s,n,a,d){return typeof s=="number"&&s>=0&&s<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof a=="number"&&a>=0&&a<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[s,n,a,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[s,n,a,d]:[s,n,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ja(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof ur||s instanceof Nh||s instanceof Fn||s instanceof Pi||s instanceof Zi||s instanceof An)return!0;if(Array.isArray(s)){for(const n of s)if(!Ja(n))return!1;return!0}if(typeof s=="object"){for(const n in s)if(!Ja(s[n]))return!1;return!0}return!1}function Lr(s){if(s===null)return ls;if(typeof s=="string")return Ft;if(typeof s=="boolean")return Mt;if(typeof s=="number")return Qe;if(s instanceof ur)return Jn;if(s instanceof Nh)return cs;if(s instanceof Fn)return re;if(s instanceof Pi)return B;if(s instanceof Zi)return Z;if(s instanceof An)return N;if(Array.isArray(s)){const n=s.length;let a;for(const d of s){const p=Lr(d);if(a){if(a===p)continue;a=Ot;break}a=p}return oe(a||Ot,n)}return Ro}function tr(s){const n=typeof s;return s===null?"":n==="string"||n==="number"||n==="boolean"?String(s):s instanceof ur||s instanceof Fn||s instanceof Pi||s instanceof Zi||s instanceof An?s.toString():JSON.stringify(s)}class ha{constructor(n,a){this.type=n,this.value=a}static parse(n,a){if(n.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ja(n[1]))return a.error("invalid value");const d=n[1];let p=Lr(d);const v=a.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new ha(p,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Fr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const qc={string:Ft,number:Qe,boolean:Mt,object:Ro};class Ki{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");let d,p=1;const v=n[0];if(v==="array"){let w,T;if(n.length>2){const I=n[1];if(typeof I!="string"||!(I in qc)||I==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);w=qc[I],p++}else w=Ot;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);T=n[2],p++}d=oe(w,T)}else{if(!qc[v])throw new Error(`Types doesn't contain name = ${v}`);d=qc[v]}const x=[];for(;p<n.length;p++){const w=a.parse(n[p],p,Ot);if(!w)return null;x.push(w)}return new Ki(d,x)}evaluate(n){for(let a=0;a<this.args.length;a++){const d=this.args[a].evaluate(n);if(!ye(this.type,Lr(d)))return d;if(a===this.args.length-1)throw new Fr(`Expected value to be of type ${ae(this.type)}, but found ${ae(Lr(d))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const jh={"to-boolean":Mt,"to-color":Jn,"to-number":Qe,"to-string":Ft};class Ns{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const d=n[0];if(!jh[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&n.length!==2)return a.error("Expected one argument.");const p=jh[d],v=[];for(let x=1;x<n.length;x++){const w=a.parse(n[x],x,Ot);if(!w)return null;v.push(w)}return new Ns(p,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let a,d;for(const p of this.args){if(a=p.evaluate(n),d=null,a instanceof ur)return a;if(typeof a=="string"){const v=n.parseColor(a);if(v)return v}else if(Array.isArray(a)&&(d=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Hc(a[0],a[1],a[2],a[3]),!d))return new ur(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Fr(d||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const d of this.args){a=d.evaluate(n);const p=Pi.parse(a);if(p)return p}throw new Fr(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const d of this.args){a=d.evaluate(n);const p=Zi.parse(a);if(p)return p}throw new Fr(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const d of this.args){if(a=d.evaluate(n),a===null)return 0;const p=Number(a);if(!isNaN(p))return p}throw new Fr(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return Fn.fromString(tr(this.args[0].evaluate(n)));case"resolvedImage":return An.fromString(tr(this.args[0].evaluate(n)));default:return tr(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Ep=["Unknown","Point","LineString","Polygon"];class Vh{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Ep[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let a=this._parseColorCache[n];return a||(a=this._parseColorCache[n]=ur.parse(n)),a}}class Wc{constructor(n,a,d=[],p,v=new uo,x=[]){this.registry=n,this.path=d,this.key=d.map(w=>`[${w}]`).join(""),this.scope=v,this.errors=x,this.expectedType=p,this._isConstant=a}parse(n,a,d,p,v={}){return a?this.concat(a,d,p)._parse(n,v):this._parse(n,v)}_parse(n,a){function d(p,v,x){return x==="assert"?new Ki(v,[p]):x==="coerce"?new Ns(v,[p]):p}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=n[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const w=this.expectedType,T=x.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||T.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string")if(w.kind!=="padding"||T.kind!=="value"&&T.kind!=="number"&&T.kind!=="array")if(w.kind!=="variableAnchorOffsetCollection"||T.kind!=="value"&&T.kind!=="array"){if(this.checkSubtype(w,T))return null}else x=d(x,w,a.typeAnnotation||"coerce");else x=d(x,w,a.typeAnnotation||"coerce");else x=d(x,w,a.typeAnnotation||"coerce");else x=d(x,w,a.typeAnnotation||"assert")}if(!(x instanceof ha)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const w=new Vh;try{x=new ha(x.type,x.evaluate(w))}catch(T){return this.error(T.message),null}}return x}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,a,d){const p=typeof n=="number"?this.path.concat(n):this.path,v=d?this.scope.concat(d):this.scope;return new Wc(this.registry,this._isConstant,p,a||null,v,this.errors)}error(n,...a){const d=`${this.key}${a.map(p=>`[${p}]`).join("")}`;this.errors.push(new er(d,n))}checkSubtype(n,a){const d=ye(n,a);return d&&this.error(d),d}}class Zc{constructor(n,a,d){this.type=cs,this.locale=d,this.caseSensitive=n,this.diacriticSensitive=a}static parse(n,a){if(n.length!==2)return a.error("Expected one argument.");const d=n[1];if(typeof d!="object"||Array.isArray(d))return a.error("Collator options argument must be an object.");const p=a.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Mt);if(!p)return null;const v=a.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Mt);if(!v)return null;let x=null;return d.locale&&(x=a.parse(d.locale,1,Ft),!x)?null:new Zc(p,v,x)}evaluate(n){return new Nh(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const js=8192;function Uh(s,n){s[0]=Math.min(s[0],n[0]),s[1]=Math.min(s[1],n[1]),s[2]=Math.max(s[2],n[0]),s[3]=Math.max(s[3],n[1])}function Gl(s,n){return!(s[0]<=n[0]||s[2]>=n[2]||s[1]<=n[1]||s[3]>=n[3])}function Ip(s,n){const a=(180+s[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,p=Math.pow(2,n.z);return[Math.round(a*p*js),Math.round(d*p*js)]}function D0(s,n,a){const d=s[0]-n[0],p=s[1]-n[1],v=s[0]-a[0],x=s[1]-a[1];return d*x-v*p==0&&d*v<=0&&p*x<=0}function Gh(s,n){let a=!1;for(let x=0,w=n.length;x<w;x++){const T=n[x];for(let I=0,M=T.length;I<M-1;I++){if(D0(s,T[I],T[I+1]))return!1;(p=T[I])[1]>(d=s)[1]!=(v=T[I+1])[1]>d[1]&&d[0]<(v[0]-p[0])*(d[1]-p[1])/(v[1]-p[1])+p[0]&&(a=!a)}}var d,p,v;return a}function Hh(s,n){for(let a=0;a<n.length;a++)if(Gh(s,n[a]))return!0;return!1}function Pp(s,n,a,d){const p=d[0]-a[0],v=d[1]-a[1],x=(s[0]-a[0])*v-p*(s[1]-a[1]),w=(n[0]-a[0])*v-p*(n[1]-a[1]);return x>0&&w<0||x<0&&w>0}function R0(s,n,a){for(const I of a)for(let M=0;M<I.length-1;++M)if((w=[(x=I[M+1])[0]-(v=I[M])[0],x[1]-v[1]])[0]*(T=[(p=n)[0]-(d=s)[0],p[1]-d[1]])[1]-w[1]*T[0]!=0&&Pp(d,p,v,x)&&Pp(v,x,d,p))return!0;var d,p,v,x,w,T;return!1}function Ap(s,n){for(let a=0;a<s.length;++a)if(!Gh(s[a],n))return!1;for(let a=0;a<s.length-1;++a)if(R0(s[a],s[a+1],n))return!1;return!0}function Mp(s,n){for(let a=0;a<n.length;a++)if(Ap(s,n[a]))return!0;return!1}function Kc(s,n,a){const d=[];for(let p=0;p<s.length;p++){const v=[];for(let x=0;x<s[p].length;x++){const w=Ip(s[p][x],a);Uh(n,w),v.push(w)}d.push(v)}return d}function zp(s,n,a){const d=[];for(let p=0;p<s.length;p++){const v=Kc(s[p],n,a);d.push(v)}return d}function Lp(s,n,a,d){if(s[0]<a[0]||s[0]>a[2]){const p=.5*d;let v=s[0]-a[0]>p?-d:a[0]-s[0]>p?d:0;v===0&&(v=s[0]-a[2]>p?-d:a[2]-s[0]>p?d:0),s[0]+=v}Uh(n,s)}function qh(s,n,a,d){const p=Math.pow(2,d.z)*js,v=[d.x*js,d.y*js],x=[];for(const w of s)for(const T of w){const I=[T.x+v[0],T.y+v[1]];Lp(I,n,a,p),x.push(I)}return x}function Wh(s,n,a,d){const p=Math.pow(2,d.z)*js,v=[d.x*js,d.y*js],x=[];for(const T of s){const I=[];for(const M of T){const D=[M.x+v[0],M.y+v[1]];Uh(n,D),I.push(D)}x.push(I)}if(n[2]-n[0]<=p/2){(w=n)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const T of x)for(const I of T)Lp(I,n,a,p)}var w;return x}class da{constructor(n,a){this.type=Mt,this.geojson=n,this.geometries=a}static parse(n,a){if(n.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ja(n[1])){const d=n[1];if(d.type==="FeatureCollection")for(let p=0;p<d.features.length;++p){const v=d.features[p].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new da(d,d.features[p].geometry)}else if(d.type==="Feature"){const p=d.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new da(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new da(d,d)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(a,d){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(d.type==="Polygon"){const w=Kc(d.coordinates,v,x),T=qh(a.geometry(),p,v,x);if(!Gl(p,v))return!1;for(const I of T)if(!Gh(I,w))return!1}if(d.type==="MultiPolygon"){const w=zp(d.coordinates,v,x),T=qh(a.geometry(),p,v,x);if(!Gl(p,v))return!1;for(const I of T)if(!Hh(I,w))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(a,d){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=a.canonicalID();if(d.type==="Polygon"){const w=Kc(d.coordinates,v,x),T=Wh(a.geometry(),p,v,x);if(!Gl(p,v))return!1;for(const I of T)if(!Ap(I,w))return!1}if(d.type==="MultiPolygon"){const w=zp(d.coordinates,v,x),T=Wh(a.geometry(),p,v,x);if(!Gl(p,v))return!1;for(const I of T)if(!Mp(I,w))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Xc{constructor(n,a){this.type=a.type,this.name=n,this.boundExpression=a}static parse(n,a){if(n.length!==2||typeof n[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const d=n[1];return a.scope.has(d)?new Xc(d,a.scope.get(d)):a.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Xi{constructor(n,a,d,p){this.name=n,this.type=a,this._evaluate=d,this.args=p}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,a){const d=n[0],p=Xi.definitions[d];if(!p)return a.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,x=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,w=x.filter(([I])=>!Array.isArray(I)||I.length===n.length-1);let T=null;for(const[I,M]of w){T=new Wc(a.registry,Yc,a.path,null,a.scope);const D=[];let $=!1;for(let H=1;H<n.length;H++){const q=n[H],X=Array.isArray(I)?I[H-1]:I.type,se=T.parse(q,1+D.length,X);if(!se){$=!0;break}D.push(se)}if(!$)if(Array.isArray(I)&&I.length!==D.length)T.error(`Expected ${I.length} arguments, but found ${D.length} instead.`);else{for(let H=0;H<D.length;H++){const q=Array.isArray(I)?I[H]:I.type,X=D[H];T.concat(H+1).checkSubtype(q,X.type)}if(T.errors.length===0)return new Xi(d,v,M,D)}}if(w.length===1)a.errors.push(...T.errors);else{const I=(w.length?w:x).map(([D])=>{return $=D,Array.isArray($)?`(${$.map(ae).join(", ")})`:`(${ae($.type)}...)`;var $}).join(" | "),M=[];for(let D=1;D<n.length;D++){const $=a.parse(n[D],1+M.length);if(!$)return null;M.push(ae($.type))}a.error(`Expected arguments of type ${I}, but found (${M.join(", ")}) instead.`)}return null}static register(n,a){Xi.definitions=a;for(const d in a)n[d]=Xi}}function Yc(s){if(s instanceof Xc)return Yc(s.boundExpression);if(s instanceof Xi&&s.name==="error"||s instanceof Zc||s instanceof da)return!1;const n=s instanceof Ns||s instanceof Ki;let a=!0;return s.eachChild(d=>{a=n?a&&Yc(d):a&&d instanceof ha}),!!a&&Jc(s)&&Qc(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Jc(s){if(s instanceof Xi&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof da)return!1;let n=!0;return s.eachChild(a=>{n&&!Jc(a)&&(n=!1)}),n}function Hl(s){if(s instanceof Xi&&s.name==="feature-state")return!1;let n=!0;return s.eachChild(a=>{n&&!Hl(a)&&(n=!1)}),n}function Qc(s,n){if(s instanceof Xi&&n.indexOf(s.name)>=0)return!1;let a=!0;return s.eachChild(d=>{a&&!Qc(d,n)&&(a=!1)}),a}function Qa(s,n){const a=s.length-1;let d,p,v=0,x=a,w=0;for(;v<=x;)if(w=Math.floor((v+x)/2),d=s[w],p=s[w+1],d<=n){if(w===a||n<p)return w;v=w+1}else{if(!(d>n))throw new Fr("Input is not a number.");x=w-1}return 0}class Vs{constructor(n,a,d){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(const[p,v]of d)this.labels.push(p),this.outputs.push(v)}static parse(n,a){if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");const d=a.parse(n[1],1,Qe);if(!d)return null;const p=[];let v=null;a.expectedType&&a.expectedType.kind!=="value"&&(v=a.expectedType);for(let x=1;x<n.length;x+=2){const w=x===1?-1/0:n[x],T=n[x+1],I=x,M=x+1;if(typeof w!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(p.length&&p[p.length-1][0]>=w)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const D=a.parse(T,M,v);if(!D)return null;v=v||D.type,p.push([w,D])}return new Vs(v,d,p)}evaluate(n){const a=this.labels,d=this.outputs;if(a.length===1)return d[0].evaluate(n);const p=this.input.evaluate(n);if(p<=a[0])return d[0].evaluate(n);const v=a.length;return p>=a[v-1]?d[v-1].evaluate(n):d[Qa(a,p)].evaluate(n)}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Kt(s,n,a){return s+a*(n-s)}function eu(s,n,a){return s.map((d,p)=>Kt(d,n[p],a))}const Ai={number:Kt,color:function(s,n,a,d="rgb"){switch(d){case"rgb":{const[p,v,x,w]=eu(s.rgb,n.rgb,a);return new ur(p,v,x,w,!1)}case"hcl":{const[p,v,x,w]=s.hcl,[T,I,M,D]=n.hcl;let $,H;if(isNaN(p)||isNaN(T))isNaN(p)?isNaN(T)?$=NaN:($=T,x!==1&&x!==0||(H=I)):($=p,M!==1&&M!==0||(H=v));else{let be=T-p;T>p&&be>180?be-=360:T<p&&p-T>180&&(be+=360),$=p+a*be}const[q,X,se,ue]=function([be,me,Se,Te]){return be=isNaN(be)?0:be*zt,xr([Se,Math.cos(be)*me,Math.sin(be)*me,Te])}([$,H??Kt(v,I,a),Kt(x,M,a),Kt(w,D,a)]);return new ur(q,X,se,ue,!1)}case"lab":{const[p,v,x,w]=xr(eu(s.lab,n.lab,a));return new ur(p,v,x,w,!1)}}},array:eu,padding:function(s,n,a){return new Pi(eu(s.values,n.values,a))},variableAnchorOffsetCollection:function(s,n,a){const d=s.values,p=n.values;if(d.length!==p.length)throw new Fr(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<d.length;x+=2){if(d[x]!==p[x])throw new Fr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${d[x]}, to[${x}]: ${p[x]}`);v.push(d[x]);const[w,T]=d[x+1],[I,M]=p[x+1];v.push([Kt(w,I,a),Kt(T,M,a)])}return new Zi(v)}};class Mi{constructor(n,a,d,p,v){this.type=n,this.operator=a,this.interpolation=d,this.input=p,this.labels=[],this.outputs=[];for(const[x,w]of v)this.labels.push(x),this.outputs.push(w)}static interpolationFactor(n,a,d,p){let v=0;if(n.name==="exponential")v=Zh(a,n.base,d,p);else if(n.name==="linear")v=Zh(a,1,d,p);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new ee(x[0],x[1],x[2],x[3]).solve(Zh(a,1,d,p))}return v}static parse(n,a){let[d,p,v,...x]=n;if(!Array.isArray(p)||p.length===0)return a.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const I=p[1];if(typeof I!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:I}}else{if(p[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const I=p.slice(1);if(I.length!==4||I.some(M=>typeof M!="number"||M<0||M>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:I}}}if(n.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(v=a.parse(v,2,Qe),!v)return null;const w=[];let T=null;d==="interpolate-hcl"||d==="interpolate-lab"?T=Jn:a.expectedType&&a.expectedType.kind!=="value"&&(T=a.expectedType);for(let I=0;I<x.length;I+=2){const M=x[I],D=x[I+1],$=I+3,H=I+4;if(typeof M!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(w.length&&w[w.length-1][0]>=M)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$);const q=a.parse(D,H,T);if(!q)return null;T=T||q.type,w.push([M,q])}return ze(T,Qe)||ze(T,Jn)||ze(T,B)||ze(T,Z)||ze(T,oe(Qe))?new Mi(T,d,p,v,w):a.error(`Type ${ae(T)} is not interpolatable.`)}evaluate(n){const a=this.labels,d=this.outputs;if(a.length===1)return d[0].evaluate(n);const p=this.input.evaluate(n);if(p<=a[0])return d[0].evaluate(n);const v=a.length;if(p>=a[v-1])return d[v-1].evaluate(n);const x=Qa(a,p),w=Mi.interpolationFactor(this.interpolation,p,a[x],a[x+1]),T=d[x].evaluate(n),I=d[x+1].evaluate(n);switch(this.operator){case"interpolate":return Ai[this.type.kind](T,I,w);case"interpolate-hcl":return Ai.color(T,I,w,"hcl");case"interpolate-lab":return Ai.color(T,I,w,"lab")}}eachChild(n){n(this.input);for(const a of this.outputs)n(a)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Zh(s,n,a,d){const p=d-a,v=s-a;return p===0?0:n===1?v/p:(Math.pow(n,v)-1)/(Math.pow(n,p)-1)}class tu{constructor(n,a){this.type=n,this.args=a}static parse(n,a){if(n.length<2)return a.error("Expectected at least one argument.");let d=null;const p=a.expectedType;p&&p.kind!=="value"&&(d=p);const v=[];for(const w of n.slice(1)){const T=a.parse(w,1+v.length,d,void 0,{typeAnnotation:"omit"});if(!T)return null;d=d||T.type,v.push(T)}if(!d)throw new Error("No output type");const x=p&&v.some(w=>ye(p,w.type));return new tu(x?Ot:d,v)}evaluate(n){let a,d=null,p=0;for(const v of this.args)if(p++,d=v.evaluate(n),d&&d instanceof An&&!d.available&&(a||(a=d.name),d=null,p===this.args.length&&(d=a)),d!==null)break;return d}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class ru{constructor(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const a of this.bindings)n(a[1]);n(this.result)}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const d=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return a.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return a.error("Variable names must contain only alphanumeric characters or '_'.",v);const w=a.parse(n[v+1],v+1);if(!w)return null;d.push([x,w])}const p=a.parse(n[n.length-1],n.length-1,a.expectedType,d);return p?new ru(d,p):null}outputDefined(){return this.result.outputDefined()}}class Kh{constructor(n,a,d){this.type=n,this.index=a,this.input=d}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=a.parse(n[1],1,Qe),p=a.parse(n[2],2,oe(a.expectedType||Ot));return d&&p?new Kh(p.type.itemType,d,p):null}evaluate(n){const a=this.index.evaluate(n),d=this.input.evaluate(n);if(a<0)throw new Fr(`Array index out of bounds: ${a} < 0.`);if(a>=d.length)throw new Fr(`Array index out of bounds: ${a} > ${d.length-1}.`);if(a!==Math.floor(a))throw new Fr(`Array index must be an integer, but found ${a} instead.`);return d[a]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Xh{constructor(n,a){this.type=Mt,this.needle=n,this.haystack=a}static parse(n,a){if(n.length!==3)return a.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=a.parse(n[1],1,Ot),p=a.parse(n[2],2,Ot);return d&&p?he(d.type,[Mt,Ft,Qe,ls,Ot])?new Xh(d,p):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${ae(d.type)} instead`):null}evaluate(n){const a=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!d)return!1;if(!xe(a,["boolean","string","number","null"]))throw new Fr(`Expected first argument to be of type boolean, string, number or null, but found ${ae(Lr(a))} instead.`);if(!xe(d,["string","array"]))throw new Fr(`Expected second argument to be of type array or string, but found ${ae(Lr(d))} instead.`);return d.indexOf(a)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class nu{constructor(n,a,d){this.type=Qe,this.needle=n,this.haystack=a,this.fromIndex=d}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const d=a.parse(n[1],1,Ot),p=a.parse(n[2],2,Ot);if(!d||!p)return null;if(!he(d.type,[Mt,Ft,Qe,ls,Ot]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${ae(d.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,Qe);return v?new nu(d,p,v):null}return new nu(d,p)}evaluate(n){const a=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!xe(a,["boolean","string","number","null"]))throw new Fr(`Expected first argument to be of type boolean, string, number or null, but found ${ae(Lr(a))} instead.`);if(!xe(d,["string","array"]))throw new Fr(`Expected second argument to be of type array or string, but found ${ae(Lr(d))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(n);return d.indexOf(a,p)}return d.indexOf(a)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Yh{constructor(n,a,d,p,v,x){this.inputType=n,this.type=a,this.input=d,this.cases=p,this.outputs=v,this.otherwise=x}static parse(n,a){if(n.length<5)return a.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return a.error("Expected an even number of arguments.");let d,p;a.expectedType&&a.expectedType.kind!=="value"&&(p=a.expectedType);const v={},x=[];for(let I=2;I<n.length-1;I+=2){let M=n[I];const D=n[I+1];Array.isArray(M)||(M=[M]);const $=a.concat(I);if(M.length===0)return $.error("Expected at least one branch label.");for(const q of M){if(typeof q!="number"&&typeof q!="string")return $.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return $.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof q=="number"&&Math.floor(q)!==q)return $.error("Numeric branch labels must be integer values.");if(d){if($.checkSubtype(d,Lr(q)))return null}else d=Lr(q);if(v[String(q)]!==void 0)return $.error("Branch labels must be unique.");v[String(q)]=x.length}const H=a.parse(D,I,p);if(!H)return null;p=p||H.type,x.push(H)}const w=a.parse(n[1],1,Ot);if(!w)return null;const T=a.parse(n[n.length-1],n.length-1,p);return T?w.type.kind!=="value"&&a.concat(1).checkSubtype(d,w.type)?null:new Yh(d,p,w,v,x,T):null}evaluate(n){const a=this.input.evaluate(n);return(Lr(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Jh{constructor(n,a,d){this.type=n,this.branches=a,this.otherwise=d}static parse(n,a){if(n.length<4)return a.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return a.error("Expected an odd number of arguments.");let d;a.expectedType&&a.expectedType.kind!=="value"&&(d=a.expectedType);const p=[];for(let x=1;x<n.length-1;x+=2){const w=a.parse(n[x],x,Mt);if(!w)return null;const T=a.parse(n[x+1],x+1,d);if(!T)return null;p.push([w,T]),d=d||T.type}const v=a.parse(n[n.length-1],n.length-1,d);if(!v)return null;if(!d)throw new Error("Can't infer output type");return new Jh(d,p,v)}evaluate(n){for(const[a,d]of this.branches)if(a.evaluate(n))return d.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[a,d]of this.branches)n(a),n(d);n(this.otherwise)}outputDefined(){return this.branches.every(([n,a])=>a.outputDefined())&&this.otherwise.outputDefined()}}class iu{constructor(n,a,d,p){this.type=n,this.input=a,this.beginIndex=d,this.endIndex=p}static parse(n,a){if(n.length<=2||n.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const d=a.parse(n[1],1,Ot),p=a.parse(n[2],2,Qe);if(!d||!p)return null;if(!he(d.type,[oe(Ot),Ft,Ot]))return a.error(`Expected first argument to be of type array or string, but found ${ae(d.type)} instead`);if(n.length===4){const v=a.parse(n[3],3,Qe);return v?new iu(d.type,d,p,v):null}return new iu(d.type,d,p)}evaluate(n){const a=this.input.evaluate(n),d=this.beginIndex.evaluate(n);if(!xe(a,["string","array"]))throw new Fr(`Expected first argument to be of type array or string, but found ${ae(Lr(a))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(n);return a.slice(d,p)}return a.slice(d)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Dp(s,n){return s==="=="||s==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Rp(s,n,a,d){return d.compare(n,a)===0}function el(s,n,a){const d=s!=="=="&&s!=="!=";return class iP{constructor(v,x,w){this.type=Mt,this.lhs=v,this.rhs=x,this.collator=w,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const w=v[0];let T=x.parse(v[1],1,Ot);if(!T)return null;if(!Dp(w,T.type))return x.concat(1).error(`"${w}" comparisons are not supported for type '${ae(T.type)}'.`);let I=x.parse(v[2],2,Ot);if(!I)return null;if(!Dp(w,I.type))return x.concat(2).error(`"${w}" comparisons are not supported for type '${ae(I.type)}'.`);if(T.type.kind!==I.type.kind&&T.type.kind!=="value"&&I.type.kind!=="value")return x.error(`Cannot compare types '${ae(T.type)}' and '${ae(I.type)}'.`);d&&(T.type.kind==="value"&&I.type.kind!=="value"?T=new Ki(I.type,[T]):T.type.kind!=="value"&&I.type.kind==="value"&&(I=new Ki(T.type,[I])));let M=null;if(v.length===4){if(T.type.kind!=="string"&&I.type.kind!=="string"&&T.type.kind!=="value"&&I.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(M=x.parse(v[3],3,cs),!M)return null}return new iP(T,I,M)}evaluate(v){const x=this.lhs.evaluate(v),w=this.rhs.evaluate(v);if(d&&this.hasUntypedArgument){const T=Lr(x),I=Lr(w);if(T.kind!==I.kind||T.kind!=="string"&&T.kind!=="number")throw new Fr(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${T.kind}, ${I.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const T=Lr(x),I=Lr(w);if(T.kind!=="string"||I.kind!=="string")return n(v,x,w)}return this.collator?a(v,x,w,this.collator.evaluate(v)):n(v,x,w)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const O0=el("==",function(s,n,a){return n===a},Rp),B0=el("!=",function(s,n,a){return n!==a},function(s,n,a,d){return!Rp(0,n,a,d)}),$0=el("<",function(s,n,a){return n<a},function(s,n,a,d){return d.compare(n,a)<0}),F0=el(">",function(s,n,a){return n>a},function(s,n,a,d){return d.compare(n,a)>0}),N0=el("<=",function(s,n,a){return n<=a},function(s,n,a,d){return d.compare(n,a)<=0}),j0=el(">=",function(s,n,a){return n>=a},function(s,n,a,d){return d.compare(n,a)>=0});class Qh{constructor(n,a,d,p,v){this.type=Ft,this.number=n,this.locale=a,this.currency=d,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(n,a){if(n.length!==3)return a.error("Expected two arguments.");const d=a.parse(n[1],1,Qe);if(!d)return null;const p=n[2];if(typeof p!="object"||Array.isArray(p))return a.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=a.parse(p.locale,1,Ft),!v))return null;let x=null;if(p.currency&&(x=a.parse(p.currency,1,Ft),!x))return null;let w=null;if(p["min-fraction-digits"]&&(w=a.parse(p["min-fraction-digits"],1,Qe),!w))return null;let T=null;return p["max-fraction-digits"]&&(T=a.parse(p["max-fraction-digits"],1,Qe),!T)?null:new Qh(d,v,x,w,T)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class ou{constructor(n){this.type=re,this.sections=n}static parse(n,a){if(n.length<2)return a.error("Expected at least one argument.");const d=n[1];if(!Array.isArray(d)&&typeof d=="object")return a.error("First argument must be an image or text section.");const p=[];let v=!1;for(let x=1;x<=n.length-1;++x){const w=n[x];if(v&&typeof w=="object"&&!Array.isArray(w)){v=!1;let T=null;if(w["font-scale"]&&(T=a.parse(w["font-scale"],1,Qe),!T))return null;let I=null;if(w["text-font"]&&(I=a.parse(w["text-font"],1,oe(Ft)),!I))return null;let M=null;if(w["text-color"]&&(M=a.parse(w["text-color"],1,Jn),!M))return null;const D=p[p.length-1];D.scale=T,D.font=I,D.textColor=M}else{const T=a.parse(n[x],1,Ot);if(!T)return null;const I=T.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:T,scale:null,font:null,textColor:null})}}return new ou(p)}evaluate(n){return new Fn(this.sections.map(a=>{const d=a.content.evaluate(n);return Lr(d)===N?new Gc("",d,null,null,null):new Gc(tr(d),null,a.scale?a.scale.evaluate(n):null,a.font?a.font.evaluate(n).join(","):null,a.textColor?a.textColor.evaluate(n):null)}))}eachChild(n){for(const a of this.sections)n(a.content),a.scale&&n(a.scale),a.font&&n(a.font),a.textColor&&n(a.textColor)}outputDefined(){return!1}}class ed{constructor(n){this.type=N,this.input=n}static parse(n,a){if(n.length!==2)return a.error("Expected two arguments.");const d=a.parse(n[1],1,Ft);return d?new ed(d):a.error("No image name provided.")}evaluate(n){const a=this.input.evaluate(n),d=An.fromString(a);return d&&n.availableImages&&(d.available=n.availableImages.indexOf(a)>-1),d}eachChild(n){n(this.input)}outputDefined(){return!1}}class td{constructor(n){this.type=Qe,this.input=n}static parse(n,a){if(n.length!==2)return a.error(`Expected 1 argument, but found ${n.length-1} instead.`);const d=a.parse(n[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${ae(d.type)} instead.`):new td(d):null}evaluate(n){const a=this.input.evaluate(n);if(typeof a=="string"||Array.isArray(a))return a.length;throw new Fr(`Expected value to be of type string or array, but found ${ae(Lr(a))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const tl={"==":O0,"!=":B0,">":F0,"<":$0,">=":j0,"<=":N0,array:Ki,at:Kh,boolean:Ki,case:Jh,coalesce:tu,collator:Zc,format:ou,image:ed,in:Xh,"index-of":nu,interpolate:Mi,"interpolate-hcl":Mi,"interpolate-lab":Mi,length:td,let:ru,literal:ha,match:Yh,number:Ki,"number-format":Qh,object:Ki,slice:iu,step:Vs,string:Ki,"to-boolean":Ns,"to-color":Ns,"to-number":Ns,"to-string":Ns,var:Xc,within:da};function Op(s,[n,a,d,p]){n=n.evaluate(s),a=a.evaluate(s),d=d.evaluate(s);const v=p?p.evaluate(s):1,x=Hc(n,a,d,v);if(x)throw new Fr(x);return new ur(n/255,a/255,d/255,v,!1)}function Bp(s,n){return s in n}function rd(s,n){const a=n[s];return a===void 0?null:a}function fa(s){return{type:s}}function $p(s){return{result:"success",value:s}}function Us(s){return{result:"error",value:s}}function rl(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Fp(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function nd(s){return!!s.expression&&s.expression.interpolated}function rr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Dr(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function V0(s){return s}function Xt(s,n){const a=n.type==="color",d=s.stops&&typeof s.stops[0][0]=="object",p=d||!(d||s.property!==void 0),v=s.type||(nd(n)?"exponential":"interval");if(a||n.type==="padding"){const M=a?ur.parse:Pi.parse;(s=qi({},s)).stops&&(s.stops=s.stops.map(D=>[D[0],M(D[1])])),s.default=M(s.default?s.default:n.default)}if(s.colorSpace&&(x=s.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var x;let w,T,I;if(v==="exponential")w=ql;else if(v==="interval")w=Ir;else if(v==="categorical"){w=Rr,T=Object.create(null);for(const M of s.stops)T[M[0]]=M[1];I=typeof s.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);w=Np}if(d){const M={},D=[];for(let q=0;q<s.stops.length;q++){const X=s.stops[q],se=X[0].zoom;M[se]===void 0&&(M[se]={zoom:se,type:s.type,property:s.property,default:s.default,stops:[]},D.push(se)),M[se].stops.push([X[0].value,X[1]])}const $=[];for(const q of D)$.push([M[q].zoom,Xt(M[q],n)]);const H={name:"linear"};return{kind:"composite",interpolationType:H,interpolationFactor:Mi.interpolationFactor.bind(void 0,H),zoomStops:$.map(q=>q[0]),evaluate:({zoom:q},X)=>ql({stops:$,base:s.base},n,q).evaluate(q,X)}}if(p){const M=v==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:Mi.interpolationFactor.bind(void 0,M),zoomStops:s.stops.map(D=>D[0]),evaluate:({zoom:D})=>w(s,n,D,T,I)}}return{kind:"source",evaluate(M,D){const $=D&&D.properties?D.properties[s.property]:void 0;return $===void 0?pa(s.default,n.default):w(s,n,$,T,I)}}}function pa(s,n,a){return s!==void 0?s:n!==void 0?n:a!==void 0?a:void 0}function Rr(s,n,a,d,p){return pa(typeof a===p?d[a]:void 0,s.default,n.default)}function Ir(s,n,a){if(rr(a)!=="number")return pa(s.default,n.default);const d=s.stops.length;if(d===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[d-1][0])return s.stops[d-1][1];const p=Qa(s.stops.map(v=>v[0]),a);return s.stops[p][1]}function ql(s,n,a){const d=s.base!==void 0?s.base:1;if(rr(a)!=="number")return pa(s.default,n.default);const p=s.stops.length;if(p===1||a<=s.stops[0][0])return s.stops[0][1];if(a>=s.stops[p-1][0])return s.stops[p-1][1];const v=Qa(s.stops.map(M=>M[0]),a),x=function(M,D,$,H){const q=H-$,X=M-$;return q===0?0:D===1?X/q:(Math.pow(D,X)-1)/(Math.pow(D,q)-1)}(a,d,s.stops[v][0],s.stops[v+1][0]),w=s.stops[v][1],T=s.stops[v+1][1],I=Ai[n.type]||V0;return typeof w.evaluate=="function"?{evaluate(...M){const D=w.evaluate.apply(void 0,M),$=T.evaluate.apply(void 0,M);if(D!==void 0&&$!==void 0)return I(D,$,x,s.colorSpace)}}:I(w,T,x,s.colorSpace)}function Np(s,n,a){switch(n.type){case"color":a=ur.parse(a);break;case"formatted":a=Fn.fromString(a.toString());break;case"resolvedImage":a=An.fromString(a.toString());break;case"padding":a=Pi.parse(a);break;default:rr(a)===n.type||n.type==="enum"&&n.values[a]||(a=void 0)}return pa(a,s.default,n.default)}Xi.register(tl,{error:[{kind:"error"},[Ft],(s,[n])=>{throw new Fr(n.evaluate(s))}],typeof:[Ft,[Ot],(s,[n])=>ae(Lr(n.evaluate(s)))],"to-rgba":[oe(Qe,4),[Jn],(s,[n])=>{const[a,d,p,v]=n.evaluate(s).rgb;return[255*a,255*d,255*p,v]}],rgb:[Jn,[Qe,Qe,Qe],Op],rgba:[Jn,[Qe,Qe,Qe,Qe],Op],has:{type:Mt,overloads:[[[Ft],(s,[n])=>Bp(n.evaluate(s),s.properties())],[[Ft,Ro],(s,[n,a])=>Bp(n.evaluate(s),a.evaluate(s))]]},get:{type:Ot,overloads:[[[Ft],(s,[n])=>rd(n.evaluate(s),s.properties())],[[Ft,Ro],(s,[n,a])=>rd(n.evaluate(s),a.evaluate(s))]]},"feature-state":[Ot,[Ft],(s,[n])=>rd(n.evaluate(s),s.featureState||{})],properties:[Ro,[],s=>s.properties()],"geometry-type":[Ft,[],s=>s.geometryType()],id:[Ot,[],s=>s.id()],zoom:[Qe,[],s=>s.globals.zoom],"heatmap-density":[Qe,[],s=>s.globals.heatmapDensity||0],"line-progress":[Qe,[],s=>s.globals.lineProgress||0],accumulated:[Ot,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Qe,fa(Qe),(s,n)=>{let a=0;for(const d of n)a+=d.evaluate(s);return a}],"*":[Qe,fa(Qe),(s,n)=>{let a=1;for(const d of n)a*=d.evaluate(s);return a}],"-":{type:Qe,overloads:[[[Qe,Qe],(s,[n,a])=>n.evaluate(s)-a.evaluate(s)],[[Qe],(s,[n])=>-n.evaluate(s)]]},"/":[Qe,[Qe,Qe],(s,[n,a])=>n.evaluate(s)/a.evaluate(s)],"%":[Qe,[Qe,Qe],(s,[n,a])=>n.evaluate(s)%a.evaluate(s)],ln2:[Qe,[],()=>Math.LN2],pi:[Qe,[],()=>Math.PI],e:[Qe,[],()=>Math.E],"^":[Qe,[Qe,Qe],(s,[n,a])=>Math.pow(n.evaluate(s),a.evaluate(s))],sqrt:[Qe,[Qe],(s,[n])=>Math.sqrt(n.evaluate(s))],log10:[Qe,[Qe],(s,[n])=>Math.log(n.evaluate(s))/Math.LN10],ln:[Qe,[Qe],(s,[n])=>Math.log(n.evaluate(s))],log2:[Qe,[Qe],(s,[n])=>Math.log(n.evaluate(s))/Math.LN2],sin:[Qe,[Qe],(s,[n])=>Math.sin(n.evaluate(s))],cos:[Qe,[Qe],(s,[n])=>Math.cos(n.evaluate(s))],tan:[Qe,[Qe],(s,[n])=>Math.tan(n.evaluate(s))],asin:[Qe,[Qe],(s,[n])=>Math.asin(n.evaluate(s))],acos:[Qe,[Qe],(s,[n])=>Math.acos(n.evaluate(s))],atan:[Qe,[Qe],(s,[n])=>Math.atan(n.evaluate(s))],min:[Qe,fa(Qe),(s,n)=>Math.min(...n.map(a=>a.evaluate(s)))],max:[Qe,fa(Qe),(s,n)=>Math.max(...n.map(a=>a.evaluate(s)))],abs:[Qe,[Qe],(s,[n])=>Math.abs(n.evaluate(s))],round:[Qe,[Qe],(s,[n])=>{const a=n.evaluate(s);return a<0?-Math.round(-a):Math.round(a)}],floor:[Qe,[Qe],(s,[n])=>Math.floor(n.evaluate(s))],ceil:[Qe,[Qe],(s,[n])=>Math.ceil(n.evaluate(s))],"filter-==":[Mt,[Ft,Ot],(s,[n,a])=>s.properties()[n.value]===a.value],"filter-id-==":[Mt,[Ot],(s,[n])=>s.id()===n.value],"filter-type-==":[Mt,[Ft],(s,[n])=>s.geometryType()===n.value],"filter-<":[Mt,[Ft,Ot],(s,[n,a])=>{const d=s.properties()[n.value],p=a.value;return typeof d==typeof p&&d<p}],"filter-id-<":[Mt,[Ot],(s,[n])=>{const a=s.id(),d=n.value;return typeof a==typeof d&&a<d}],"filter->":[Mt,[Ft,Ot],(s,[n,a])=>{const d=s.properties()[n.value],p=a.value;return typeof d==typeof p&&d>p}],"filter-id->":[Mt,[Ot],(s,[n])=>{const a=s.id(),d=n.value;return typeof a==typeof d&&a>d}],"filter-<=":[Mt,[Ft,Ot],(s,[n,a])=>{const d=s.properties()[n.value],p=a.value;return typeof d==typeof p&&d<=p}],"filter-id-<=":[Mt,[Ot],(s,[n])=>{const a=s.id(),d=n.value;return typeof a==typeof d&&a<=d}],"filter->=":[Mt,[Ft,Ot],(s,[n,a])=>{const d=s.properties()[n.value],p=a.value;return typeof d==typeof p&&d>=p}],"filter-id->=":[Mt,[Ot],(s,[n])=>{const a=s.id(),d=n.value;return typeof a==typeof d&&a>=d}],"filter-has":[Mt,[Ot],(s,[n])=>n.value in s.properties()],"filter-has-id":[Mt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[Mt,[oe(Ft)],(s,[n])=>n.value.indexOf(s.geometryType())>=0],"filter-id-in":[Mt,[oe(Ot)],(s,[n])=>n.value.indexOf(s.id())>=0],"filter-in-small":[Mt,[Ft,oe(Ot)],(s,[n,a])=>a.value.indexOf(s.properties()[n.value])>=0],"filter-in-large":[Mt,[Ft,oe(Ot)],(s,[n,a])=>function(d,p,v,x){for(;v<=x;){const w=v+x>>1;if(p[w]===d)return!0;p[w]>d?x=w-1:v=w+1}return!1}(s.properties()[n.value],a.value,0,a.value.length-1)],all:{type:Mt,overloads:[[[Mt,Mt],(s,[n,a])=>n.evaluate(s)&&a.evaluate(s)],[fa(Mt),(s,n)=>{for(const a of n)if(!a.evaluate(s))return!1;return!0}]]},any:{type:Mt,overloads:[[[Mt,Mt],(s,[n,a])=>n.evaluate(s)||a.evaluate(s)],[fa(Mt),(s,n)=>{for(const a of n)if(a.evaluate(s))return!0;return!1}]]},"!":[Mt,[Mt],(s,[n])=>!n.evaluate(s)],"is-supported-script":[Mt,[Ft],(s,[n])=>{const a=s.globals&&s.globals.isSupportedScript;return!a||a(n.evaluate(s))}],upcase:[Ft,[Ft],(s,[n])=>n.evaluate(s).toUpperCase()],downcase:[Ft,[Ft],(s,[n])=>n.evaluate(s).toLowerCase()],concat:[Ft,fa(Ot),(s,n)=>n.map(a=>tr(a.evaluate(s))).join("")],"resolved-locale":[Ft,[cs],(s,[n])=>n.evaluate(s).resolvedLocale()]});class id{constructor(n,a){var d;this.expression=n,this._warningHistory={},this._evaluator=new Vh,this._defaultValue=a?(d=a).type==="color"&&Dr(d.default)?new ur(0,0,0,0):d.type==="color"?ur.parse(d.default)||null:d.type==="padding"?Pi.parse(d.default)||null:d.type==="variableAnchorOffsetCollection"?Zi.parse(d.default)||null:d.default===void 0?null:d.default:null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(n,a,d,p,v,x){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=d,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,a,d,p,v,x){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=d||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new Fr(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function su(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in tl}function au(s,n){const a=new Wc(tl,Yc,[],n?function(p){const v={color:Jn,string:Ft,number:Qe,enum:Ft,boolean:Mt,formatted:re,padding:B,resolvedImage:N,variableAnchorOffsetCollection:Z};return p.type==="array"?oe(v[p.value]||Ot,p.length):v[p.type]}(n):void 0),d=a.parse(s,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?$p(new id(d,n)):Us(a.errors)}class od{constructor(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent=n!=="constant"&&!Hl(a.expression)}evaluateWithoutErrorHandling(n,a,d,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,a,d,p,v,x)}evaluate(n,a,d,p,v,x){return this._styleExpression.evaluate(n,a,d,p,v,x)}}class lu{constructor(n,a,d,p){this.kind=n,this.zoomStops=d,this._styleExpression=a,this.isStateDependent=n!=="camera"&&!Hl(a.expression),this.interpolationType=p}evaluateWithoutErrorHandling(n,a,d,p,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,a,d,p,v,x)}evaluate(n,a,d,p,v,x){return this._styleExpression.evaluate(n,a,d,p,v,x)}interpolationFactor(n,a,d){return this.interpolationType?Mi.interpolationFactor(this.interpolationType,n,a,d):0}}function sd(s,n){const a=au(s,n);if(a.result==="error")return a;const d=a.value.expression,p=Jc(d);if(!p&&!rl(n))return Us([new er("","data expressions not supported")]);const v=Qc(d,["zoom"]);if(!v&&!Fp(n))return Us([new er("","zoom expressions not supported")]);const x=Zl(d);return x||v?x instanceof er?Us([x]):x instanceof Mi&&!nd(n)?Us([new er("",'"interpolate" expressions cannot be used with this property')]):$p(x?new lu(p?"camera":"composite",a.value,x.labels,x instanceof Mi?x.interpolation:void 0):new od(p?"constant":"source",a.value)):Us([new er("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Wl{constructor(n,a){this._parameters=n,this._specification=a,qi(this,Xt(this._parameters,this._specification))}static deserialize(n){return new Wl(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Zl(s){let n=null;if(s instanceof ru)n=Zl(s.result);else if(s instanceof tu){for(const a of s.args)if(n=Zl(a),n)break}else(s instanceof Vs||s instanceof Mi)&&s.input instanceof Xi&&s.input.name==="zoom"&&(n=s);return n instanceof er||s.eachChild(a=>{const d=Zl(a);d instanceof er?n=d:!n&&d?n=new er("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&d&&n!==d&&(n=new er("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Kl(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const n of s.slice(1))if(!Kl(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const U0={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ad(s){if(s==null)return{filter:()=>!0,needGeometry:!1};Kl(s)||(s=cu(s));const n=au(s,U0);if(n.result==="error")throw new Error(n.value.map(a=>`${a.key}: ${a.message}`).join(", "));return{filter:(a,d,p)=>n.value.evaluate(a,d,{},p),needGeometry:jp(s)}}function G0(s,n){return s<n?-1:s>n?1:0}function jp(s){if(!Array.isArray(s))return!1;if(s[0]==="within")return!0;for(let n=1;n<s.length;n++)if(jp(s[n]))return!0;return!1}function cu(s){if(!s)return!0;const n=s[0];return s.length<=1?n!=="any":n==="=="?ld(s[1],s[2],"=="):n==="!="?Xl(ld(s[1],s[2],"==")):n==="<"||n===">"||n==="<="||n===">="?ld(s[1],s[2],n):n==="any"?(a=s.slice(1),["any"].concat(a.map(cu))):n==="all"?["all"].concat(s.slice(1).map(cu)):n==="none"?["all"].concat(s.slice(1).map(cu).map(Xl)):n==="in"?Vp(s[1],s.slice(2)):n==="!in"?Xl(Vp(s[1],s.slice(2))):n==="has"?Up(s[1]):n==="!has"?Xl(Up(s[1])):n!=="within"||s;var a}function ld(s,n,a){switch(s){case"$type":return[`filter-type-${a}`,n];case"$id":return[`filter-id-${a}`,n];default:return[`filter-${a}`,s,n]}}function Vp(s,n){if(n.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(a=>typeof a!=typeof n[0])?["filter-in-large",s,["literal",n.sort(G0)]]:["filter-in-small",s,["literal",n]]}}function Up(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Xl(s){return["!",s]}function uu(s){const n=typeof s;if(n==="number"||n==="boolean"||n==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let p="[";for(const v of s)p+=`${uu(v)},`;return`${p}]`}const a=Object.keys(s).sort();let d="{";for(let p=0;p<a.length;p++)d+=`${JSON.stringify(a[p])}:${uu(s[a[p]])},`;return`${d}}`}function hu(s){let n="";for(const a of Bn)n+=`/${uu(s[a])}`;return n}function Gp(s){const n=s.value;return n?[new Ke(s.key,n,"constants have been deprecated as of v8")]:[]}function Nr(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function ma(s){if(Array.isArray(s))return s.map(ma);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const n={};for(const a in s)n[a]=ma(s[a]);return n}return Nr(s)}function hi(s){const n=s.key,a=s.value,d=s.valueSpec||{},p=s.objectElementValidators||{},v=s.style,x=s.styleSpec,w=s.validateSpec;let T=[];const I=rr(a);if(I!=="object")return[new Ke(n,a,`object expected, ${I} found`)];for(const M in a){const D=M.split(".")[0],$=d[D]||d["*"];let H;if(p[D])H=p[D];else if(d[D])H=w;else if(p["*"])H=p["*"];else{if(!d["*"]){T.push(new Ke(n,a[M],`unknown property "${M}"`));continue}H=w}T=T.concat(H({key:(n&&`${n}.`)+M,value:a[M],valueSpec:$,style:v,styleSpec:x,object:a,objectKey:M,validateSpec:w},a))}for(const M in d)p[M]||d[M].required&&d[M].default===void 0&&a[M]===void 0&&T.push(new Ke(n,a,`missing required property "${M}"`));return T}function nl(s){const n=s.value,a=s.valueSpec,d=s.style,p=s.styleSpec,v=s.key,x=s.arrayElementValidator||s.validateSpec;if(rr(n)!=="array")return[new Ke(v,n,`array expected, ${rr(n)} found`)];if(a.length&&n.length!==a.length)return[new Ke(v,n,`array length ${a.length} expected, length ${n.length} found`)];if(a["min-length"]&&n.length<a["min-length"])return[new Ke(v,n,`array length at least ${a["min-length"]} expected, length ${n.length} found`)];let w={type:a.value,values:a.values};p.$version<7&&(w.function=a.function),rr(a.value)==="object"&&(w=a.value);let T=[];for(let I=0;I<n.length;I++)T=T.concat(x({array:n,arrayIndex:I,value:n[I],valueSpec:w,validateSpec:s.validateSpec,style:d,styleSpec:p,key:`${v}[${I}]`}));return T}function Yl(s){const n=s.key,a=s.value,d=s.valueSpec;let p=rr(a);return p==="number"&&a!=a&&(p="NaN"),p!=="number"?[new Ke(n,a,`number expected, ${p} found`)]:"minimum"in d&&a<d.minimum?[new Ke(n,a,`${a} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&a>d.maximum?[new Ke(n,a,`${a} is greater than the maximum value ${d.maximum}`)]:[]}function du(s){const n=s.valueSpec,a=Nr(s.value.type);let d,p,v,x={};const w=a!=="categorical"&&s.value.property===void 0,T=!w,I=rr(s.value.stops)==="array"&&rr(s.value.stops[0])==="array"&&rr(s.value.stops[0][0])==="object",M=hi({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(H){if(a==="identity")return[new Ke(H.key,H.value,'identity function may not have a "stops" property')];let q=[];const X=H.value;return q=q.concat(nl({key:H.key,value:X,valueSpec:H.valueSpec,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:D})),rr(X)==="array"&&X.length===0&&q.push(new Ke(H.key,X,"array must have at least one stop")),q},default:function(H){return H.validateSpec({key:H.key,value:H.value,valueSpec:n,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec})}}});return a==="identity"&&w&&M.push(new Ke(s.key,s.value,'missing required property "property"')),a==="identity"||s.value.stops||M.push(new Ke(s.key,s.value,'missing required property "stops"')),a==="exponential"&&s.valueSpec.expression&&!nd(s.valueSpec)&&M.push(new Ke(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(T&&!rl(s.valueSpec)?M.push(new Ke(s.key,s.value,"property functions not supported")):w&&!Fp(s.valueSpec)&&M.push(new Ke(s.key,s.value,"zoom functions not supported"))),a!=="categorical"&&!I||s.value.property!==void 0||M.push(new Ke(s.key,s.value,'"property" property is required')),M;function D(H){let q=[];const X=H.value,se=H.key;if(rr(X)!=="array")return[new Ke(se,X,`array expected, ${rr(X)} found`)];if(X.length!==2)return[new Ke(se,X,`array length 2 expected, length ${X.length} found`)];if(I){if(rr(X[0])!=="object")return[new Ke(se,X,`object expected, ${rr(X[0])} found`)];if(X[0].zoom===void 0)return[new Ke(se,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new Ke(se,X,"object stop key must have value")];if(v&&v>Nr(X[0].zoom))return[new Ke(se,X[0].zoom,"stop zoom values must appear in ascending order")];Nr(X[0].zoom)!==v&&(v=Nr(X[0].zoom),p=void 0,x={}),q=q.concat(hi({key:`${se}[0]`,value:X[0],valueSpec:{zoom:{}},validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:Yl,value:$}}))}else q=q.concat($({key:`${se}[0]`,value:X[0],valueSpec:{},validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec},X));return su(ma(X[1]))?q.concat([new Ke(`${se}[1]`,X[1],"expressions are not allowed in function stops.")]):q.concat(H.validateSpec({key:`${se}[1]`,value:X[1],valueSpec:n,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec}))}function $(H,q){const X=rr(H.value),se=Nr(H.value),ue=H.value!==null?H.value:q;if(d){if(X!==d)return[new Ke(H.key,ue,`${X} stop domain type must match previous stop domain type ${d}`)]}else d=X;if(X!=="number"&&X!=="string"&&X!=="boolean")return[new Ke(H.key,ue,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&a!=="categorical"){let be=`number expected, ${X} found`;return rl(n)&&a===void 0&&(be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ke(H.key,ue,be)]}return a!=="categorical"||X!=="number"||isFinite(se)&&Math.floor(se)===se?a!=="categorical"&&X==="number"&&p!==void 0&&se<p?[new Ke(H.key,ue,"stop domain values must appear in ascending order")]:(p=se,a==="categorical"&&se in x?[new Ke(H.key,ue,"stop domain values must be unique")]:(x[se]=!0,[])):[new Ke(H.key,ue,`integer expected, found ${se}`)]}}function ga(s){const n=(s.expressionContext==="property"?sd:au)(ma(s.value),s.valueSpec);if(n.result==="error")return n.value.map(d=>new Ke(`${s.key}${d.key}`,s.value,d.message));const a=n.value.expression||n.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!a.outputDefined())return[new Ke(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Hl(a))return[new Ke(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!Hl(a))return[new Ke(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Qc(a,["zoom","feature-state"]))return[new Ke(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Jc(a))return[new Ke(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Jl(s){const n=s.key,a=s.value,d=s.valueSpec,p=[];return Array.isArray(d.values)?d.values.indexOf(Nr(a))===-1&&p.push(new Ke(n,a,`expected one of [${d.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(d.values).indexOf(Nr(a))===-1&&p.push(new Ke(n,a,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(a)} found`)),p}function il(s){return Kl(ma(s.value))?ga(qi({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Hp(s)}function Hp(s){const n=s.value,a=s.key;if(rr(n)!=="array")return[new Ke(a,n,`array expected, ${rr(n)} found`)];const d=s.styleSpec;let p,v=[];if(n.length<1)return[new Ke(a,n,"filter array must have at least 1 element")];switch(v=v.concat(Jl({key:`${a}[0]`,value:n[0],valueSpec:d.filter_operator,style:s.style,styleSpec:s.styleSpec})),Nr(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Nr(n[1])==="$type"&&v.push(new Ke(a,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Ke(a,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(p=rr(n[1]),p!=="string"&&v.push(new Ke(`${a}[1]`,n[1],`string expected, ${p} found`)));for(let x=2;x<n.length;x++)p=rr(n[x]),Nr(n[1])==="$type"?v=v.concat(Jl({key:`${a}[${x}]`,value:n[x],valueSpec:d.geometry_type,style:s.style,styleSpec:s.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new Ke(`${a}[${x}]`,n[x],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(Hp({key:`${a}[${x}]`,value:n[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":p=rr(n[1]),n.length!==2?v.push(new Ke(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new Ke(`${a}[1]`,n[1],`string expected, ${p} found`));break;case"within":p=rr(n[1]),n.length!==2?v.push(new Ke(a,n,`filter array for "${n[0]}" operator must have 2 elements`)):p!=="object"&&v.push(new Ke(`${a}[1]`,n[1],`object expected, ${p} found`))}return v}function qp(s,n){const a=s.key,d=s.validateSpec,p=s.style,v=s.styleSpec,x=s.value,w=s.objectKey,T=v[`${n}_${s.layerType}`];if(!T)return[];const I=w.match(/^(.*)-transition$/);if(n==="paint"&&I&&T[I[1]]&&T[I[1]].transition)return d({key:a,value:x,valueSpec:v.transition,style:p,styleSpec:v});const M=s.valueSpec||T[w];if(!M)return[new Ke(a,x,`unknown property "${w}"`)];let D;if(rr(x)==="string"&&rl(M)&&!M.tokens&&(D=/^{([^}]+)}$/.exec(x)))return[new Ke(a,x,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(D[1])} }\`.`)];const $=[];return s.layerType==="symbol"&&(w==="text-field"&&p&&!p.glyphs&&$.push(new Ke(a,x,'use of "text-field" requires a style "glyphs" property')),w==="text-font"&&Dr(ma(x))&&Nr(x.type)==="identity"&&$.push(new Ke(a,x,'"text-font" does not support identity functions'))),$.concat(d({key:s.key,value:x,valueSpec:M,style:p,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:w}))}function Wp(s){return qp(s,"paint")}function Zp(s){return qp(s,"layout")}function Kp(s){let n=[];const a=s.value,d=s.key,p=s.style,v=s.styleSpec;a.type||a.ref||n.push(new Ke(d,a,'either "type" or "ref" is required'));let x=Nr(a.type);const w=Nr(a.ref);if(a.id){const T=Nr(a.id);for(let I=0;I<s.arrayIndex;I++){const M=p.layers[I];Nr(M.id)===T&&n.push(new Ke(d,a.id,`duplicate layer id "${a.id}", previously used at line ${M.id.__line__}`))}}if("ref"in a){let T;["type","source","source-layer","filter","layout"].forEach(I=>{I in a&&n.push(new Ke(d,a[I],`"${I}" is prohibited for ref layers`))}),p.layers.forEach(I=>{Nr(I.id)===w&&(T=I)}),T?T.ref?n.push(new Ke(d,a.ref,"ref cannot reference another ref layer")):x=Nr(T.type):n.push(new Ke(d,a.ref,`ref layer "${w}" not found`))}else if(x!=="background")if(a.source){const T=p.sources&&p.sources[a.source],I=T&&Nr(T.type);T?I==="vector"&&x==="raster"?n.push(new Ke(d,a.source,`layer "${a.id}" requires a raster source`)):I!=="raster-dem"&&x==="hillshade"?n.push(new Ke(d,a.source,`layer "${a.id}" requires a raster-dem source`)):I==="raster"&&x!=="raster"?n.push(new Ke(d,a.source,`layer "${a.id}" requires a vector source`)):I!=="vector"||a["source-layer"]?I==="raster-dem"&&x!=="hillshade"?n.push(new Ke(d,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!a.paint||!a.paint["line-gradient"]||I==="geojson"&&T.lineMetrics||n.push(new Ke(d,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Ke(d,a,`layer "${a.id}" must specify a "source-layer"`)):n.push(new Ke(d,a.source,`source "${a.source}" not found`))}else n.push(new Ke(d,a,'missing required property "source"'));return n=n.concat(hi({key:d,value:a,valueSpec:v.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${d}.type`,value:a.type,valueSpec:v.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:a,objectKey:"type"}),filter:il,layout:T=>hi({layer:a,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":I=>Zp(qi({layerType:x},I))}}),paint:T=>hi({layer:a,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":I=>Wp(qi({layerType:x},I))}})}})),n}function Oo(s){const n=s.value,a=s.key,d=rr(n);return d!=="string"?[new Ke(a,n,`string expected, ${d} found`)]:[]}const Ql={promoteId:function({key:s,value:n}){if(rr(n)==="string")return Oo({key:s,value:n});{const a=[];for(const d in n)a.push(...Oo({key:`${s}.${d}`,value:n[d]}));return a}}};function zi(s){const n=s.value,a=s.key,d=s.styleSpec,p=s.style,v=s.validateSpec;if(!n.type)return[new Ke(a,n,'"type" is required')];const x=Nr(n.type);let w;switch(x){case"vector":case"raster":return w=hi({key:a,value:n,valueSpec:d[`source_${x.replace("-","_")}`],style:s.style,styleSpec:d,objectElementValidators:Ql,validateSpec:v}),w;case"raster-dem":return w=function(T){var I;const M=(I=T.sourceName)!==null&&I!==void 0?I:"",D=T.value,$=T.styleSpec,H=$.source_raster_dem,q=T.style;let X=[];const se=rr(D);if(D===void 0)return X;if(se!=="object")return X.push(new Ke("source_raster_dem",D,`object expected, ${se} found`)),X;const ue=Nr(D.encoding)==="custom",be=["redFactor","greenFactor","blueFactor","baseShift"],me=T.value.encoding?`"${T.value.encoding}"`:"Default";for(const Se in D)!ue&&be.includes(Se)?X.push(new Ke(Se,D[Se],`In "${M}": "${Se}" is only valid when "encoding" is set to "custom". ${me} encoding found`)):H[Se]?X=X.concat(T.validateSpec({key:Se,value:D[Se],valueSpec:H[Se],validateSpec:T.validateSpec,style:q,styleSpec:$})):X.push(new Ke(Se,D[Se],`unknown property "${Se}"`));return X}({sourceName:a,value:n,style:s.style,styleSpec:d,validateSpec:v}),w;case"geojson":if(w=hi({key:a,value:n,valueSpec:d.source_geojson,style:p,styleSpec:d,validateSpec:v,objectElementValidators:Ql}),n.cluster)for(const T in n.clusterProperties){const[I,M]=n.clusterProperties[T],D=typeof I=="string"?[I,["accumulated"],["get",T]]:I;w.push(...ga({key:`${a}.${T}.map`,value:M,validateSpec:v,expressionContext:"cluster-map"})),w.push(...ga({key:`${a}.${T}.reduce`,value:D,validateSpec:v,expressionContext:"cluster-reduce"}))}return w;case"video":return hi({key:a,value:n,valueSpec:d.source_video,style:p,validateSpec:v,styleSpec:d});case"image":return hi({key:a,value:n,valueSpec:d.source_image,style:p,validateSpec:v,styleSpec:d});case"canvas":return[new Ke(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Jl({key:`${a}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:v,styleSpec:d})}}function ec(s){const n=s.value,a=s.styleSpec,d=a.light,p=s.style;let v=[];const x=rr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Ke("light",n,`object expected, ${x} found`)]),v;for(const w in n){const T=w.match(/^(.*)-transition$/);v=v.concat(T&&d[T[1]]&&d[T[1]].transition?s.validateSpec({key:w,value:n[w],valueSpec:a.transition,validateSpec:s.validateSpec,style:p,styleSpec:a}):d[w]?s.validateSpec({key:w,value:n[w],valueSpec:d[w],validateSpec:s.validateSpec,style:p,styleSpec:a}):[new Ke(w,n[w],`unknown property "${w}"`)])}return v}function Xp(s){const n=s.value,a=s.styleSpec,d=a.terrain,p=s.style;let v=[];const x=rr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Ke("terrain",n,`object expected, ${x} found`)]),v;for(const w in n)v=v.concat(d[w]?s.validateSpec({key:w,value:n[w],valueSpec:d[w],validateSpec:s.validateSpec,style:p,styleSpec:a}):[new Ke(w,n[w],`unknown property "${w}"`)]);return v}function Yp(s){let n=[];const a=s.value,d=s.key;if(Array.isArray(a)){const p=[],v=[];for(const x in a)a[x].id&&p.includes(a[x].id)&&n.push(new Ke(d,a,`all the sprites' ids must be unique, but ${a[x].id} is duplicated`)),p.push(a[x].id),a[x].url&&v.includes(a[x].url)&&n.push(new Ke(d,a,`all the sprites' URLs must be unique, but ${a[x].url} is duplicated`)),v.push(a[x].url),n=n.concat(hi({key:`${d}[${x}]`,value:a[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return n}return Oo({key:d,value:a})}const Jp={"*":()=>[],array:nl,boolean:function(s){const n=s.value,a=s.key,d=rr(n);return d!=="boolean"?[new Ke(a,n,`boolean expected, ${d} found`)]:[]},number:Yl,color:function(s){const n=s.key,a=s.value,d=rr(a);return d!=="string"?[new Ke(n,a,`color expected, ${d} found`)]:ur.parse(String(a))?[]:[new Ke(n,a,`color expected, "${a}" found`)]},constants:Gp,enum:Jl,filter:il,function:du,layer:Kp,object:hi,source:zi,light:ec,terrain:Xp,string:Oo,formatted:function(s){return Oo(s).length===0?[]:ga(s)},resolvedImage:function(s){return Oo(s).length===0?[]:ga(s)},padding:function(s){const n=s.key,a=s.value;if(rr(a)==="array"){if(a.length<1||a.length>4)return[new Ke(n,a,`padding requires 1 to 4 values; ${a.length} values found`)];const d={type:"number"};let p=[];for(let v=0;v<a.length;v++)p=p.concat(s.validateSpec({key:`${n}[${v}]`,value:a[v],validateSpec:s.validateSpec,valueSpec:d}));return p}return Yl({key:n,value:a,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const n=s.key,a=s.value,d=rr(a),p=s.styleSpec;if(d!=="array"||a.length<1||a.length%2!=0)return[new Ke(n,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<a.length;x+=2)v=v.concat(Jl({key:`${n}[${x}]`,value:a[x],valueSpec:p.layout_symbol["text-anchor"]})),v=v.concat(nl({key:`${n}[${x+1}]`,value:a[x+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:p}));return v},sprite:Yp};function us(s){const n=s.value,a=s.valueSpec,d=s.styleSpec;return s.validateSpec=us,a.expression&&Dr(Nr(n))?du(s):a.expression&&su(ma(n))?ga(s):a.type&&Jp[a.type]?Jp[a.type](s):hi(qi({},s,{valueSpec:a.type?d[a.type]:a}))}function Qp(s){const n=s.value,a=s.key,d=Oo(s);return d.length||(n.indexOf("{fontstack}")===-1&&d.push(new Ke(a,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&d.push(new Ke(a,n,'"glyphs" url must include a "{range}" token'))),d}function Yi(s,n=Me){let a=[];return a=a.concat(us({key:"",value:s,valueSpec:n.$root,styleSpec:n,style:s,validateSpec:us,objectElementValidators:{glyphs:Qp,"*":()=>[]}})),s.constants&&(a=a.concat(Gp({key:"constants",value:s.constants,style:s,styleSpec:n,validateSpec:us}))),fu(a)}function hs(s){return function(n){return s({...n,validateSpec:us})}}function fu(s){return[].concat(s).sort((n,a)=>n.line-a.line)}function ds(s){return function(...n){return fu(s.apply(this,n))}}Yi.source=ds(hs(zi)),Yi.sprite=ds(hs(Yp)),Yi.glyphs=ds(hs(Qp)),Yi.light=ds(hs(ec)),Yi.terrain=ds(hs(Xp)),Yi.layer=ds(hs(Kp)),Yi.filter=ds(hs(il)),Yi.paintProperty=ds(hs(Wp)),Yi.layoutProperty=ds(hs(Zp));const fs=Yi,H0=fs.light,cd=fs.paintProperty,em=fs.layoutProperty;function pu(s,n){let a=!1;if(n&&n.length)for(const d of n)s.fire(new Cn(new Error(d.message))),a=!0;return a}class ol{constructor(n,a,d){const p=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(a=x[1])+2*(d=x[2]);for(let T=0;T<this.d*this.d;T++){const I=x[3+T],M=x[3+T+1];p.push(I===M?null:x.subarray(I,M))}const w=x[3+p.length+1];this.keys=x.subarray(x[3+p.length],w),this.bboxes=x.subarray(w),this.insert=this._insertReadonly}else{this.d=a+2*d;for(let x=0;x<this.d*this.d;x++)p.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=n,this.padding=d,this.scale=a/n,this.uid=0;const v=d/a*n;this.min=-v,this.max=n+v}insert(n,a,d,p,v){this._forEachCell(a,d,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(a),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,a,d,p,v,x){this.cells[v].push(x)}query(n,a,d,p,v){const x=this.min,w=this.max;if(n<=x&&a<=x&&w<=d&&w<=p&&!v)return Array.prototype.slice.call(this.keys);{const T=[];return this._forEachCell(n,a,d,p,this._queryCell,T,{},v),T}}_queryCell(n,a,d,p,v,x,w,T){const I=this.cells[v];if(I!==null){const M=this.keys,D=this.bboxes;for(let $=0;$<I.length;$++){const H=I[$];if(w[H]===void 0){const q=4*H;(T?T(D[q+0],D[q+1],D[q+2],D[q+3]):n<=D[q+2]&&a<=D[q+3]&&d>=D[q+0]&&p>=D[q+1])?(w[H]=!0,x.push(M[H])):w[H]=!1}}}}_forEachCell(n,a,d,p,v,x,w,T){const I=this._convertToCellCoord(n),M=this._convertToCellCoord(a),D=this._convertToCellCoord(d),$=this._convertToCellCoord(p);for(let H=I;H<=D;H++)for(let q=M;q<=$;q++){const X=this.d*q+H;if((!T||T(this._convertFromCellCoord(H),this._convertFromCellCoord(q),this._convertFromCellCoord(H+1),this._convertFromCellCoord(q+1)))&&v.call(this,n,a,d,p,X,x,w,T))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,a=3+this.cells.length+1+1;let d=0;for(let x=0;x<this.cells.length;x++)d+=this.cells[x].length;const p=new Int32Array(a+d+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=a;for(let x=0;x<n.length;x++){const w=n[x];p[3+x]=v,p.set(w,v),v+=w.length}return p[3+n.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+n.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(n,a){const d=n.toArrayBuffer();return a&&a.push(d),{buffer:d}}static deserialize(n){return new ol(n.buffer)}}const ps={};function ct(s,n,a={}){if(ps[s])throw new Error(`${s} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:s,writeable:!1}),ps[s]={klass:n,omit:a.omit||[],shallow:a.shallow||[]}}ct("Object",Object),ct("TransferableGridIndex",ol),ct("Color",ur),ct("Error",Error),ct("AJAXError",at),ct("ResolvedImage",An),ct("StylePropertyFunction",Wl),ct("StyleExpression",id,{omit:["_evaluator"]}),ct("ZoomDependentExpression",lu),ct("ZoomConstantExpression",od),ct("CompoundExpression",Xi,{omit:["_evaluate"]});for(const s in tl)tl[s]._classRegistryKey||ct(`Expression_${s}`,tl[s]);function mu(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Gs(s,n){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob)return s;if(mu(s)||st(s))return n&&n.push(s),s;if(ArrayBuffer.isView(s)){const a=s;return n&&n.push(a.buffer),a}if(s instanceof ImageData)return n&&n.push(s.data.buffer),s;if(Array.isArray(s)){const a=[];for(const d of s)a.push(Gs(d,n));return a}if(typeof s=="object"){const a=s.constructor,d=a._classRegistryKey;if(!d)throw new Error("can't serialize object of unregistered class");if(!ps[d])throw new Error(`${d} is not registered.`);const p=a.serialize?a.serialize(s,n):{};if(a.serialize){if(n&&p===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in s){if(!s.hasOwnProperty(v)||ps[d].omit.indexOf(v)>=0)continue;const x=s[v];p[v]=ps[d].shallow.indexOf(v)>=0?x:Gs(x,n)}s instanceof Error&&(p.message=s.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(p.$name=d),p}throw new Error("can't serialize object of type "+typeof s)}function sl(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||mu(s)||st(s)||ArrayBuffer.isView(s)||s instanceof ImageData)return s;if(Array.isArray(s))return s.map(sl);if(typeof s=="object"){const n=s.$name||"Object";if(!ps[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:a}=ps[n];if(!a)throw new Error(`can't deserialize unregistered class ${n}`);if(a.deserialize)return a.deserialize(s);const d=Object.create(a.prototype);for(const p of Object.keys(s)){if(p==="$name")continue;const v=s[p];d[p]=ps[n].shallow.indexOf(p)>=0?v:sl(v)}return d}throw new Error("can't deserialize object of type "+typeof s)}class tm{constructor(){this.first=!0}update(n,a){const d=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=a),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=d,!0))}}const nt={"Latin-1 Supplement":s=>s>=128&&s<=255,Arabic:s=>s>=1536&&s<=1791,"Arabic Supplement":s=>s>=1872&&s<=1919,"Arabic Extended-A":s=>s>=2208&&s<=2303,"Hangul Jamo":s=>s>=4352&&s<=4607,"Unified Canadian Aboriginal Syllabics":s=>s>=5120&&s<=5759,Khmer:s=>s>=6016&&s<=6143,"Unified Canadian Aboriginal Syllabics Extended":s=>s>=6320&&s<=6399,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"CJK Radicals Supplement":s=>s>=11904&&s<=12031,"Kangxi Radicals":s=>s>=12032&&s<=12255,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Bopomofo:s=>s>=12544&&s<=12591,"Hangul Compatibility Jamo":s=>s>=12592&&s<=12687,Kanbun:s=>s>=12688&&s<=12703,"Bopomofo Extended":s=>s>=12704&&s<=12735,"CJK Strokes":s=>s>=12736&&s<=12783,"Katakana Phonetic Extensions":s=>s>=12784&&s<=12799,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"CJK Unified Ideographs Extension A":s=>s>=13312&&s<=19903,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Yi Syllables":s=>s>=40960&&s<=42127,"Yi Radicals":s=>s>=42128&&s<=42191,"Hangul Jamo Extended-A":s=>s>=43360&&s<=43391,"Hangul Syllables":s=>s>=44032&&s<=55215,"Hangul Jamo Extended-B":s=>s>=55216&&s<=55295,"Private Use Area":s=>s>=57344&&s<=63743,"CJK Compatibility Ideographs":s=>s>=63744&&s<=64255,"Arabic Presentation Forms-A":s=>s>=64336&&s<=65023,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Arabic Presentation Forms-B":s=>s>=65136&&s<=65279,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function ud(s){for(const n of s)if(dd(n.charCodeAt(0)))return!0;return!1}function hd(s){for(const n of s)if(!q0(n.charCodeAt(0)))return!1;return!0}function q0(s){return!(nt.Arabic(s)||nt["Arabic Supplement"](s)||nt["Arabic Extended-A"](s)||nt["Arabic Presentation Forms-A"](s)||nt["Arabic Presentation Forms-B"](s))}function dd(s){return!(s!==746&&s!==747&&(s<4352||!(nt["Bopomofo Extended"](s)||nt.Bopomofo(s)||nt["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||nt["CJK Compatibility Ideographs"](s)||nt["CJK Compatibility"](s)||nt["CJK Radicals Supplement"](s)||nt["CJK Strokes"](s)||!(!nt["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||nt["CJK Unified Ideographs Extension A"](s)||nt["CJK Unified Ideographs"](s)||nt["Enclosed CJK Letters and Months"](s)||nt["Hangul Compatibility Jamo"](s)||nt["Hangul Jamo Extended-A"](s)||nt["Hangul Jamo Extended-B"](s)||nt["Hangul Jamo"](s)||nt["Hangul Syllables"](s)||nt.Hiragana(s)||nt["Ideographic Description Characters"](s)||nt.Kanbun(s)||nt["Kangxi Radicals"](s)||nt["Katakana Phonetic Extensions"](s)||nt.Katakana(s)&&s!==12540||!(!nt["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!nt["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||nt["Unified Canadian Aboriginal Syllabics"](s)||nt["Unified Canadian Aboriginal Syllabics Extended"](s)||nt["Vertical Forms"](s)||nt["Yijing Hexagram Symbols"](s)||nt["Yi Syllables"](s)||nt["Yi Radicals"](s))))}function rm(s){return!(dd(s)||function(n){return!!(nt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||nt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||nt["Letterlike Symbols"](n)||nt["Number Forms"](n)||nt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||nt["Control Pictures"](n)&&n!==9251||nt["Optical Character Recognition"](n)||nt["Enclosed Alphanumerics"](n)||nt["Geometric Shapes"](n)||nt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||nt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||nt["CJK Symbols and Punctuation"](n)||nt.Katakana(n)||nt["Private Use Area"](n)||nt["CJK Compatibility Forms"](n)||nt["Small Form Variants"](n)||nt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(s))}function nm(s){return s>=1424&&s<=2303||nt["Arabic Presentation Forms-A"](s)||nt["Arabic Presentation Forms-B"](s)}function im(s,n){return!(!n&&nm(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||nt.Khmer(s))}function W0(s){for(const n of s)if(nm(n.charCodeAt(0)))return!0;return!1}const fd="deferred",pd="loading",md="loaded";let gd=null,di="unavailable",Hs=null;const tc=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(di="error"),gd&&gd(s)};function yd(){rc.fire(new ui("pluginStateChange",{pluginStatus:di,pluginURL:Hs}))}const rc=new as,vd=function(){return di},om=function(){if(di!==fd||!Hs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");di=pd,yd(),Hs&&co({url:Hs},s=>{s?tc(s):(di=md,yd())})},Li={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>di===md||Li.applyArabicShaping!=null,isLoading:()=>di===pd,setState(s){if(!ot())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");di=s.pluginStatus,Hs=s.pluginURL},isParsed(){if(!ot())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Li.applyArabicShaping!=null&&Li.processBidirectionalText!=null&&Li.processStyledBidirectionalText!=null},getPluginURL(){if(!ot())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Hs}};class Cr{constructor(n,a){this.zoom=n,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new tm,this.transition={})}isSupportedScript(n){return function(a,d){for(const p of a)if(!im(p.charCodeAt(0),d))return!1;return!0}(n,Li.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,a=n-Math.floor(n),d=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*a}}}class gu{constructor(n,a){this.property=n,this.value=a,this.expression=function(d,p){if(Dr(d))return new Wl(d,p);if(su(d)){const v=sd(d,p);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=d;return p.type==="color"&&typeof d=="string"?v=ur.parse(d):p.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(d)&&(v=Zi.parse(d)):v=Pi.parse(d),{kind:"constant",evaluate:()=>v}}}(a===void 0?n.specification.default:a,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,a,d){return this.property.possiblyEvaluate(this,n,a,d)}}class _d{constructor(n){this.property=n,this.value=new gu(n,void 0)}transitioned(n,a){return new am(this.property,this.value,a,Ce({},n.transition,this.transition),n.now)}untransitioned(){return new am(this.property,this.value,null,{},0)}}class sm{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return We(this._values[n].value.value)}setValue(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new _d(this._values[n].property)),this._values[n].value=new gu(this._values[n].property,a===null?void 0:We(a))}getTransition(n){return We(this._values[n].transition)}setTransition(n,a){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new _d(this._values[n].property)),this._values[n].transition=We(a)||void 0}serialize(){const n={};for(const a of Object.keys(this._values)){const d=this.getValue(a);d!==void 0&&(n[a]=d);const p=this.getTransition(a);p!==void 0&&(n[`${a}-transition`]=p)}return n}transitioned(n,a){const d=new lm(this._properties);for(const p of Object.keys(this._values))d._values[p]=this._values[p].transitioned(n,a._values[p]);return d}untransitioned(){const n=new lm(this._properties);for(const a of Object.keys(this._values))n._values[a]=this._values[a].untransitioned();return n}}class am{constructor(n,a,d,p,v){this.property=n,this.value=a,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,n.specification.transition&&(p.delay||p.duration)&&(this.prior=d)}possiblyEvaluate(n,a,d){const p=n.now||0,v=this.value.possiblyEvaluate(n,a,d),x=this.prior;if(x){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return x.possiblyEvaluate(n,a,d);{const w=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,a,d),v,function(T){if(T<=0)return 0;if(T>=1)return 1;const I=T*T,M=I*T;return 4*(T<.5?M:3*(T-I)+M-.75)}(w))}}return v}}class lm{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,a,d){const p=new yu(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,a,d);return p}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Z0{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return We(this._values[n].value)}setValue(n,a){this._values[n]=new gu(this._values[n].property,a===null?void 0:We(a))}serialize(){const n={};for(const a of Object.keys(this._values)){const d=this.getValue(a);d!==void 0&&(n[a]=d)}return n}possiblyEvaluate(n,a,d){const p=new yu(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(n,a,d);return p}}class Qn{constructor(n,a,d){this.property=n,this.value=a,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,a,d,p){return this.property.evaluate(this.value,this.parameters,n,a,d,p)}}class yu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class vt{constructor(n){this.specification=n}possiblyEvaluate(n,a){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(a)}interpolate(n,a,d){const p=Ai[this.specification.type];return p?p(n,a,d):n}}class kt{constructor(n,a){this.specification=n,this.overrides=a}possiblyEvaluate(n,a,d,p){return new Qn(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(a,null,{},d,p)}:n.expression,a)}interpolate(n,a,d){if(n.value.kind!=="constant"||a.value.kind!=="constant")return n;if(n.value.value===void 0||a.value.value===void 0)return new Qn(this,{kind:"constant",value:void 0},n.parameters);const p=Ai[this.specification.type];if(p){const v=p(n.value.value,a.value.value,d);return new Qn(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,a,d,p,v,x){return n.kind==="constant"?n.value:n.evaluate(a,d,p,v,x)}}class nc extends kt{possiblyEvaluate(n,a,d,p){if(n.value===void 0)return new Qn(this,{kind:"constant",value:void 0},a);if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},d,p),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,w=this._calculate(x,x,x,a);return new Qn(this,{kind:"constant",value:w},a)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:a.zoom-1}),n.expression.evaluate({zoom:a.zoom}),n.expression.evaluate({zoom:a.zoom+1}),a);return new Qn(this,{kind:"constant",value:v},a)}return new Qn(this,n.expression,a)}evaluate(n,a,d,p,v,x){if(n.kind==="source"){const w=n.evaluate(a,d,p,v,x);return this._calculate(w,w,w,a)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(a.zoom)-1},d,p),n.evaluate({zoom:Math.floor(a.zoom)},d,p),n.evaluate({zoom:Math.floor(a.zoom)+1},d,p),a):n.value}_calculate(n,a,d,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:d,to:a}}interpolate(n){return n}}class xd{constructor(n){this.specification=n}possiblyEvaluate(n,a,d,p){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(a,null,{},d,p);return this._calculate(v,v,v,a)}return this._calculate(n.expression.evaluate(new Cr(Math.floor(a.zoom-1),a)),n.expression.evaluate(new Cr(Math.floor(a.zoom),a)),n.expression.evaluate(new Cr(Math.floor(a.zoom+1),a)),a)}}_calculate(n,a,d,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:n,to:a}:{from:d,to:a}}interpolate(n){return n}}class bd{constructor(n){this.specification=n}possiblyEvaluate(n,a,d,p){return!!n.expression.evaluate(a,null,{},d,p)}interpolate(){return!1}}class Xr{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in n){const d=n[a];d.specification.overridable&&this.overridableProperties.push(a);const p=this.defaultPropertyValues[a]=new gu(d,void 0),v=this.defaultTransitionablePropertyValues[a]=new _d(d);this.defaultTransitioningPropertyValues[a]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=p.possiblyEvaluate({})}}}ct("DataDrivenProperty",kt),ct("DataConstantProperty",vt),ct("CrossFadedDataDrivenProperty",nc),ct("CrossFadedProperty",xd),ct("ColorRampProperty",bd);const wd="-transition";class Ji extends as{constructor(n,a){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),a.layout&&(this._unevaluatedLayout=new Z0(a.layout)),a.paint)){this._transitionablePaint=new sm(a.paint);for(const d in n.paint)this.setPaintProperty(d,n.paint[d],{validate:!1});for(const d in n.layout)this.setLayoutProperty(d,n.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new yu(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,a,d={}){a!=null&&this._validate(em,`layers.${this.id}.layout.${n}`,n,a,d)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,a):this.visibility=a)}getPaintProperty(n){return n.endsWith(wd)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,a,d={}){if(a!=null&&this._validate(cd,`layers.${this.id}.paint.${n}`,n,a,d))return!1;if(n.endsWith(wd))return this._transitionablePaint.setTransition(n.slice(0,-11),a||void 0),!1;{const p=this._transitionablePaint._values[n],v=p.property.specification["property-type"]==="cross-faded-data-driven",x=p.value.isDataDriven(),w=p.value;this._transitionablePaint.setValue(n,a),this._handleSpecialPaintPropertyUpdate(n);const T=this._transitionablePaint._values[n].value;return T.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,w,T)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,a,d){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,a){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,a)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Re(n,(a,d)=>!(a===void 0||d==="layout"&&!Object.keys(a).length||d==="paint"&&!Object.keys(a).length))}_validate(n,a,d,p,v={}){return(!v||v.validate!==!1)&&pu(this,n.call(fs,{key:a,layerType:this.type,objectKey:d,value:p,styleSpec:Me,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const a=this.paint.get(n);if(a instanceof Qn&&rl(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}const cm={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ya{constructor(n,a){this._structArray=n,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class jr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,a){return n._trim(),a&&(n.isTransferred=!0,a.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const a=Object.create(this.prototype);return a.arrayBuffer=n.arrayBuffer,a.length=n.length,a.capacity=n.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Or(s,n=1){let a=0,d=0;return{members:s.map(p=>{const v=cm[p.type].BYTES_PER_ELEMENT,x=a=al(a,Math.max(n,v)),w=p.components||1;return d=Math.max(d,v),a+=v*w,{name:p.name,type:p.type,components:w,offset:x}}),size:al(a,Math.max(d,n)),alignment:n}}function al(s,n){return Math.ceil(s/n)*n}class ic extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a){const d=this.length;return this.resize(d+1),this.emplace(d,n,a)}emplace(n,a,d){const p=2*n;return this.int16[p+0]=a,this.int16[p+1]=d,n}}ic.prototype.bytesPerElement=4,ct("StructArrayLayout2i4",ic);class oc extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,d){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,d)}emplace(n,a,d,p){const v=3*n;return this.int16[v+0]=a,this.int16[v+1]=d,this.int16[v+2]=p,n}}oc.prototype.bytesPerElement=6,ct("StructArrayLayout3i6",oc);class va extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,d,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,d,p)}emplace(n,a,d,p,v){const x=4*n;return this.int16[x+0]=a,this.int16[x+1]=d,this.int16[x+2]=p,this.int16[x+3]=v,n}}va.prototype.bytesPerElement=8,ct("StructArrayLayout4i8",va);class Sd extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,d,p,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,a,d,p,v,x)}emplace(n,a,d,p,v,x,w){const T=6*n;return this.int16[T+0]=a,this.int16[T+1]=d,this.int16[T+2]=p,this.int16[T+3]=v,this.int16[T+4]=x,this.int16[T+5]=w,n}}Sd.prototype.bytesPerElement=12,ct("StructArrayLayout2i4i12",Sd);class Cd extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,d,p,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,a,d,p,v,x)}emplace(n,a,d,p,v,x,w){const T=4*n,I=8*n;return this.int16[T+0]=a,this.int16[T+1]=d,this.uint8[I+4]=p,this.uint8[I+5]=v,this.uint8[I+6]=x,this.uint8[I+7]=w,n}}Cd.prototype.bytesPerElement=8,ct("StructArrayLayout2i4ub8",Cd);class ll extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a){const d=this.length;return this.resize(d+1),this.emplace(d,n,a)}emplace(n,a,d){const p=2*n;return this.float32[p+0]=a,this.float32[p+1]=d,n}}ll.prototype.bytesPerElement=8,ct("StructArrayLayout2f8",ll);class kd extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,d,p,v,x,w,T,I,M){const D=this.length;return this.resize(D+1),this.emplace(D,n,a,d,p,v,x,w,T,I,M)}emplace(n,a,d,p,v,x,w,T,I,M,D){const $=10*n;return this.uint16[$+0]=a,this.uint16[$+1]=d,this.uint16[$+2]=p,this.uint16[$+3]=v,this.uint16[$+4]=x,this.uint16[$+5]=w,this.uint16[$+6]=T,this.uint16[$+7]=I,this.uint16[$+8]=M,this.uint16[$+9]=D,n}}kd.prototype.bytesPerElement=20,ct("StructArrayLayout10ui20",kd);class Td extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,d,p,v,x,w,T,I,M,D,$){const H=this.length;return this.resize(H+1),this.emplace(H,n,a,d,p,v,x,w,T,I,M,D,$)}emplace(n,a,d,p,v,x,w,T,I,M,D,$,H){const q=12*n;return this.int16[q+0]=a,this.int16[q+1]=d,this.int16[q+2]=p,this.int16[q+3]=v,this.uint16[q+4]=x,this.uint16[q+5]=w,this.uint16[q+6]=T,this.uint16[q+7]=I,this.int16[q+8]=M,this.int16[q+9]=D,this.int16[q+10]=$,this.int16[q+11]=H,n}}Td.prototype.bytesPerElement=24,ct("StructArrayLayout4i4ui4i24",Td);class nr extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,d){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,d)}emplace(n,a,d,p){const v=3*n;return this.float32[v+0]=a,this.float32[v+1]=d,this.float32[v+2]=p,n}}nr.prototype.bytesPerElement=12,ct("StructArrayLayout3f12",nr);class y extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint32[1*n+0]=a,n}}y.prototype.bytesPerElement=4,ct("StructArrayLayout1ul4",y);class i extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,d,p,v,x,w,T,I){const M=this.length;return this.resize(M+1),this.emplace(M,n,a,d,p,v,x,w,T,I)}emplace(n,a,d,p,v,x,w,T,I,M){const D=10*n,$=5*n;return this.int16[D+0]=a,this.int16[D+1]=d,this.int16[D+2]=p,this.int16[D+3]=v,this.int16[D+4]=x,this.int16[D+5]=w,this.uint32[$+3]=T,this.uint16[D+8]=I,this.uint16[D+9]=M,n}}i.prototype.bytesPerElement=20,ct("StructArrayLayout6i1ul2ui20",i);class u extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,d,p,v,x){const w=this.length;return this.resize(w+1),this.emplace(w,n,a,d,p,v,x)}emplace(n,a,d,p,v,x,w){const T=6*n;return this.int16[T+0]=a,this.int16[T+1]=d,this.int16[T+2]=p,this.int16[T+3]=v,this.int16[T+4]=x,this.int16[T+5]=w,n}}u.prototype.bytesPerElement=12,ct("StructArrayLayout2i2i2i12",u);class f extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,a,d,p,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,a,d,p,v)}emplace(n,a,d,p,v,x){const w=4*n,T=8*n;return this.float32[w+0]=a,this.float32[w+1]=d,this.float32[w+2]=p,this.int16[T+6]=v,this.int16[T+7]=x,n}}f.prototype.bytesPerElement=16,ct("StructArrayLayout2f1f2i16",f);class g extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,d,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,d,p)}emplace(n,a,d,p,v){const x=12*n,w=3*n;return this.uint8[x+0]=a,this.uint8[x+1]=d,this.float32[w+1]=p,this.float32[w+2]=v,n}}g.prototype.bytesPerElement=12,ct("StructArrayLayout2ub2f12",g);class _ extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,d){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,d)}emplace(n,a,d,p){const v=3*n;return this.uint16[v+0]=a,this.uint16[v+1]=d,this.uint16[v+2]=p,n}}_.prototype.bytesPerElement=6,ct("StructArrayLayout3ui6",_);class S extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,d,p,v,x,w,T,I,M,D,$,H,q,X,se,ue){const be=this.length;return this.resize(be+1),this.emplace(be,n,a,d,p,v,x,w,T,I,M,D,$,H,q,X,se,ue)}emplace(n,a,d,p,v,x,w,T,I,M,D,$,H,q,X,se,ue,be){const me=24*n,Se=12*n,Te=48*n;return this.int16[me+0]=a,this.int16[me+1]=d,this.uint16[me+2]=p,this.uint16[me+3]=v,this.uint32[Se+2]=x,this.uint32[Se+3]=w,this.uint32[Se+4]=T,this.uint16[me+10]=I,this.uint16[me+11]=M,this.uint16[me+12]=D,this.float32[Se+7]=$,this.float32[Se+8]=H,this.uint8[Te+36]=q,this.uint8[Te+37]=X,this.uint8[Te+38]=se,this.uint32[Se+10]=ue,this.int16[me+22]=be,n}}S.prototype.bytesPerElement=48,ct("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",S);class C extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,d,p,v,x,w,T,I,M,D,$,H,q,X,se,ue,be,me,Se,Te,Be,it,ft,rt,tt,Xe,ut){const Je=this.length;return this.resize(Je+1),this.emplace(Je,n,a,d,p,v,x,w,T,I,M,D,$,H,q,X,se,ue,be,me,Se,Te,Be,it,ft,rt,tt,Xe,ut)}emplace(n,a,d,p,v,x,w,T,I,M,D,$,H,q,X,se,ue,be,me,Se,Te,Be,it,ft,rt,tt,Xe,ut,Je){const Ve=32*n,bt=16*n;return this.int16[Ve+0]=a,this.int16[Ve+1]=d,this.int16[Ve+2]=p,this.int16[Ve+3]=v,this.int16[Ve+4]=x,this.int16[Ve+5]=w,this.int16[Ve+6]=T,this.int16[Ve+7]=I,this.uint16[Ve+8]=M,this.uint16[Ve+9]=D,this.uint16[Ve+10]=$,this.uint16[Ve+11]=H,this.uint16[Ve+12]=q,this.uint16[Ve+13]=X,this.uint16[Ve+14]=se,this.uint16[Ve+15]=ue,this.uint16[Ve+16]=be,this.uint16[Ve+17]=me,this.uint16[Ve+18]=Se,this.uint16[Ve+19]=Te,this.uint16[Ve+20]=Be,this.uint16[Ve+21]=it,this.uint16[Ve+22]=ft,this.uint32[bt+12]=rt,this.float32[bt+13]=tt,this.float32[bt+14]=Xe,this.uint16[Ve+30]=ut,this.uint16[Ve+31]=Je,n}}C.prototype.bytesPerElement=64,ct("StructArrayLayout8i15ui1ul2f2ui64",C);class E extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.float32[1*n+0]=a,n}}E.prototype.bytesPerElement=4,ct("StructArrayLayout1f4",E);class P extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,d){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,d)}emplace(n,a,d,p){const v=3*n;return this.uint16[6*n+0]=a,this.float32[v+1]=d,this.float32[v+2]=p,n}}P.prototype.bytesPerElement=12,ct("StructArrayLayout1ui2f12",P);class z extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a,d){const p=this.length;return this.resize(p+1),this.emplace(p,n,a,d)}emplace(n,a,d,p){const v=4*n;return this.uint32[2*n+0]=a,this.uint16[v+2]=d,this.uint16[v+3]=p,n}}z.prototype.bytesPerElement=8,ct("StructArrayLayout1ul2ui8",z);class L extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,a){const d=this.length;return this.resize(d+1),this.emplace(d,n,a)}emplace(n,a,d){const p=2*n;return this.uint16[p+0]=a,this.uint16[p+1]=d,n}}L.prototype.bytesPerElement=4,ct("StructArrayLayout2ui4",L);class V extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const a=this.length;return this.resize(a+1),this.emplace(a,n)}emplace(n,a){return this.uint16[1*n+0]=a,n}}V.prototype.bytesPerElement=2,ct("StructArrayLayout1ui2",V);class J extends jr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,a,d,p){const v=this.length;return this.resize(v+1),this.emplace(v,n,a,d,p)}emplace(n,a,d,p,v){const x=4*n;return this.float32[x+0]=a,this.float32[x+1]=d,this.float32[x+2]=p,this.float32[x+3]=v,n}}J.prototype.bytesPerElement=16,ct("StructArrayLayout4f16",J);class Y extends ya{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new O(this.anchorPointX,this.anchorPointY)}}Y.prototype.size=20;class ne extends i{get(n){return new Y(this,n)}}ct("CollisionBoxArray",ne);class K extends ya{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}K.prototype.size=48;class ve extends S{get(n){return new K(this,n)}}ct("PlacedSymbolArray",ve);class ke extends ya{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ke.prototype.size=64;class le extends C{get(n){return new ke(this,n)}}ct("SymbolInstanceArray",le);class _e extends E{getoffsetX(n){return this.float32[1*n+0]}}ct("GlyphOffsetArray",_e);class Ee extends oc{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}ct("SymbolLineVertexArray",Ee);class Ie extends ya{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ie.prototype.size=12;class De extends P{get(n){return new Ie(this,n)}}ct("TextAnchorOffsetArray",De);class je extends ya{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}je.prototype.size=8;class Ne extends z{get(n){return new je(this,n)}}ct("FeatureIndexArray",Ne);class qe extends ic{}class dt extends ic{}class Gt extends ic{}class et extends Sd{}class Tt extends Cd{}class pt extends ll{}class hr extends kd{}class Vt extends Td{}class $t extends nr{}class Ht extends y{}class Gr extends u{}class br extends g{}class Mn extends _{}class fn extends L{}const Yr=Or([{name:"a_pos",components:2,type:"Int16"}],4),{members:Di}=Yr;class kr{constructor(n=[]){this.segments=n}prepareSegment(n,a,d,p){let v=this.segments[this.segments.length-1];return n>kr.MAX_VERTEX_ARRAY_LENGTH&&Ze(`Max vertices per segment is ${kr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>kr.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p)&&(v={vertexOffset:a.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},p!==void 0&&(v.sortKey=p),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const a in n.vaos)n.vaos[a].destroy()}static simpleSegment(n,a,d,p){return new kr([{vertexOffset:n,primitiveOffset:a,vertexLength:d,primitiveLength:p,vaos:{},sortKey:0}])}}function Bo(s,n){return 256*(s=F(Math.floor(s),0,255))+F(Math.floor(n),0,255)}kr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ct("SegmentVector",kr);const $o=Or([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var qs={exports:{}},_a={exports:{}};_a.exports=function(s,n){var a,d,p,v,x,w,T,I;for(d=s.length-(a=3&s.length),p=n,x=3432918353,w=461845907,I=0;I<d;)T=255&s.charCodeAt(I)|(255&s.charCodeAt(++I))<<8|(255&s.charCodeAt(++I))<<16|(255&s.charCodeAt(++I))<<24,++I,p=27492+(65535&(v=5*(65535&(p=(p^=T=(65535&(T=(T=(65535&T)*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*w+(((T>>>16)*w&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(T=0,a){case 3:T^=(255&s.charCodeAt(I+2))<<16;case 2:T^=(255&s.charCodeAt(I+1))<<8;case 1:p^=T=(65535&(T=(T=(65535&(T^=255&s.charCodeAt(I)))*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*w+(((T>>>16)*w&65535)<<16)&4294967295}return p^=s.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var cl=_a.exports,Nn={exports:{}};Nn.exports=function(s,n){for(var a,d=s.length,p=n^d,v=0;d>=4;)a=1540483477*(65535&(a=255&s.charCodeAt(v)|(255&s.charCodeAt(++v))<<8|(255&s.charCodeAt(++v))<<16|(255&s.charCodeAt(++v))<<24))+((1540483477*(a>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),d-=4,++v;switch(d){case 3:p^=(255&s.charCodeAt(v+2))<<16;case 2:p^=(255&s.charCodeAt(v+1))<<8;case 1:p=1540483477*(65535&(p^=255&s.charCodeAt(v)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var zn=cl,ei=Nn.exports;qs.exports=zn,qs.exports.murmur3=zn,qs.exports.murmur2=ei;var xa=k(qs.exports);class Hr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,a,d,p){this.ids.push(pn(n)),this.positions.push(a,d,p)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=pn(n);let d=0,p=this.ids.length-1;for(;d<p;){const x=d+p>>1;this.ids[x]>=a?p=x:d=x+1}const v=[];for(;this.ids[d]===a;)v.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return v}static serialize(n,a){const d=new Float64Array(n.ids),p=new Uint32Array(n.positions);return fi(d,p,0,d.length-1),a&&a.push(d.buffer,p.buffer),{ids:d,positions:p}}static deserialize(n){const a=new Hr;return a.ids=n.ids,a.positions=n.positions,a.indexed=!0,a}}function pn(s){const n=+s;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:xa(String(s))}function fi(s,n,a,d){for(;a<d;){const p=s[a+d>>1];let v=a-1,x=d+1;for(;;){do v++;while(s[v]<p);do x--;while(s[x]>p);if(v>=x)break;qr(s,v,x),qr(n,3*v,3*x),qr(n,3*v+1,3*x+1),qr(n,3*v+2,3*x+2)}x-a<d-x?(fi(s,n,a,x),a=x+1):(fi(s,n,x+1,d),d=x)}}function qr(s,n,a){const d=s[n];s[n]=s[a],s[a]=d}ct("FeaturePositionMap",Hr);class ba{constructor(n,a){this.gl=n.gl,this.location=a}}class vu extends ba{constructor(n,a){super(n,a),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class um extends ba{constructor(n,a){super(n,a),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class hm extends ba{constructor(n,a){super(n,a),this.current=ur.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const K0=new Float32Array(16);function Ed(s){return[Bo(255*s.r,255*s.g),Bo(255*s.b,255*s.a)]}class Fo{constructor(n,a,d){this.value=n,this.uniformNames=a.map(p=>`u_${p}`),this.type=d}setUniform(n,a,d){n.set(d.constantOr(this.value))}getBinding(n,a,d){return this.type==="color"?new hm(n,a):new vu(n,a)}}class wa{constructor(n,a){this.uniformNames=a.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=n.tlbr}setUniform(n,a,d,p){const v=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,a,d){return d.substr(0,9)==="u_pattern"?new um(n,a):new vu(n,a)}}class No{constructor(n,a,d,p){this.expression=n,this.type=d,this.maxValue=0,this.paintVertexAttributes=a.map(v=>({name:`a_${v}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(n,a,d,p,v){const x=this.paintVertexArray.length,w=this.expression.evaluate(new Cr(0),a,{},p,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,w)}updatePaintArray(n,a,d,p){const v=this.expression.evaluate({zoom:0},d,p);this._setPaintValue(n,a,v)}_setPaintValue(n,a,d){if(this.type==="color"){const p=Ed(d);for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=n;p<a;p++)this.paintVertexArray.emplace(p,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qi{constructor(n,a,d,p,v,x){this.expression=n,this.uniformNames=a.map(w=>`u_${w}_t`),this.type=d,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=a.map(w=>({name:`a_${w}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,a,d,p,v){const x=this.expression.evaluate(new Cr(this.zoom),a,{},p,[],v),w=this.expression.evaluate(new Cr(this.zoom+1),a,{},p,[],v),T=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(T,n,x,w)}updatePaintArray(n,a,d,p){const v=this.expression.evaluate({zoom:this.zoom},d,p),x=this.expression.evaluate({zoom:this.zoom+1},d,p);this._setPaintValue(n,a,v,x)}_setPaintValue(n,a,d,p){if(this.type==="color"){const v=Ed(d),x=Ed(p);for(let w=n;w<a;w++)this.paintVertexArray.emplace(w,v[0],v[1],x[0],x[1])}else{for(let v=n;v<a;v++)this.paintVertexArray.emplace(v,d,p);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(p))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,a){const d=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,p=F(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);n.set(p)}getBinding(n,a,d){return new vu(n,a)}}class jo{constructor(n,a,d,p,v,x){this.expression=n,this.type=a,this.useIntegerZoom=d,this.zoom=p,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,a,d){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(p,n,a.patterns&&a.patterns[this.layerId],d)}updatePaintArray(n,a,d,p,v){this._setPaintValues(n,a,d.patterns&&d.patterns[this.layerId],v)}_setPaintValues(n,a,d,p){if(!p||!d)return;const{min:v,mid:x,max:w}=d,T=p[v],I=p[x],M=p[w];if(T&&I&&M)for(let D=n;D<a;D++)this.zoomInPaintVertexArray.emplace(D,I.tl[0],I.tl[1],I.br[0],I.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],I.pixelRatio,T.pixelRatio),this.zoomOutPaintVertexArray.emplace(D,I.tl[0],I.tl[1],I.br[0],I.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],I.pixelRatio,M.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,$o.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,$o.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Id{constructor(n,a,d){this.binders={},this._buffers=[];const p=[];for(const v in n.paint._values){if(!d(v))continue;const x=n.paint.get(v);if(!(x instanceof Qn&&rl(x.property.specification)))continue;const w=EP(v,n.type),T=x.value,I=x.property.specification.type,M=x.property.useIntegerZoom,D=x.property.specification["property-type"],$=D==="cross-faded"||D==="cross-faded-data-driven";if(T.kind==="constant")this.binders[v]=$?new wa(T.value,w):new Fo(T.value,w,I),p.push(`/u_${v}`);else if(T.kind==="source"||$){const H=rw(v,I,"source");this.binders[v]=$?new jo(T,I,M,a,H,n.id):new No(T,w,I,H),p.push(`/a_${v}`)}else{const H=rw(v,I,"composite");this.binders[v]=new Qi(T,w,I,M,a,H),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(n){const a=this.binders[n];return a instanceof No||a instanceof Qi?a.maxValue:0}populatePaintArrays(n,a,d,p,v){for(const x in this.binders){const w=this.binders[x];(w instanceof No||w instanceof Qi||w instanceof jo)&&w.populatePaintArray(n,a,d,p,v)}}setConstantPatternPositions(n,a){for(const d in this.binders){const p=this.binders[d];p instanceof wa&&p.setConstantPatternPositions(n,a)}}updatePaintArrays(n,a,d,p,v){let x=!1;for(const w in n){const T=a.getPositions(w);for(const I of T){const M=d.feature(I.index);for(const D in this.binders){const $=this.binders[D];if(($ instanceof No||$ instanceof Qi||$ instanceof jo)&&$.expression.isStateDependent===!0){const H=p.paint.get(D);$.expression=H.value,$.updatePaintArray(I.start,I.end,M,n[w],v),x=!0}}}}return x}defines(){const n=[];for(const a in this.binders){const d=this.binders[a];(d instanceof Fo||d instanceof wa)&&n.push(...d.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return n}getBinderAttributes(){const n=[];for(const a in this.binders){const d=this.binders[a];if(d instanceof No||d instanceof Qi)for(let p=0;p<d.paintVertexAttributes.length;p++)n.push(d.paintVertexAttributes[p].name);else if(d instanceof jo)for(let p=0;p<$o.members.length;p++)n.push($o.members[p].name)}return n}getBinderUniforms(){const n=[];for(const a in this.binders){const d=this.binders[a];if(d instanceof Fo||d instanceof wa||d instanceof Qi)for(const p of d.uniformNames)n.push(p)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,a){const d=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof Fo||v instanceof wa||v instanceof Qi){for(const x of v.uniformNames)if(a[x]){const w=v.getBinding(n,a[x],x);d.push({name:x,property:p,binding:w})}}}return d}setUniforms(n,a,d,p){for(const{name:v,property:x,binding:w}of a)this.binders[x].setUniform(w,p,d.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const a in this.binders){const d=this.binders[a];if(n&&d instanceof jo){const p=n.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(d instanceof No||d instanceof Qi)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(n){for(const a in this.binders){const d=this.binders[a];(d instanceof No||d instanceof Qi||d instanceof jo)&&d.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const a=this.binders[n];(a instanceof No||a instanceof Qi||a instanceof jo)&&a.destroy()}}}class ms{constructor(n,a,d=()=>!0){this.programConfigurations={};for(const p of n)this.programConfigurations[p.id]=new Id(p,a,d);this.needsUpload=!1,this._featureMap=new Hr,this._bufferOffset=0}populatePaintArrays(n,a,d,p,v,x){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(n,a,p,v,x);a.id!==void 0&&this._featureMap.add(a.id,d,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,a,d,p){for(const v of d)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,a,v,p)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function EP(s,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${n}-`,"").replace(/-/g,"_")]}function rw(s,n,a){const d={color:{source:ll,composite:J},number:{source:E,composite:ll}},p=function(v){return{"line-pattern":{source:hr,composite:hr},"fill-pattern":{source:hr,composite:hr},"fill-extrusion-pattern":{source:hr,composite:hr}}[v]}(s);return p&&p[a]||d[n][a]}ct("ConstantBinder",Fo),ct("CrossFadedConstantBinder",wa),ct("SourceExpressionBinder",No),ct("CrossFadedCompositeBinder",jo),ct("CompositeExpressionBinder",Qi),ct("ProgramConfiguration",Id,{omit:["_buffers"]}),ct("ProgramConfigurationSet",ms);const on=8192,X0=Math.pow(2,14)-1,nw=-X0-1;function sc(s){const n=on/s.extent,a=s.loadGeometry();for(let d=0;d<a.length;d++){const p=a[d];for(let v=0;v<p.length;v++){const x=p[v],w=Math.round(x.x*n),T=Math.round(x.y*n);x.x=F(w,nw,X0),x.y=F(T,nw,X0),(w<x.x||w>x.x+1||T<x.y||T>x.y+1)&&Ze("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function ac(s,n){return{type:s.type,id:s.id,properties:s.properties,geometry:n?sc(s):[]}}function dm(s,n,a,d,p){s.emplaceBack(2*n+(d+1)/2,2*a+(p+1)/2)}class Y0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new dt,this.indexArray=new Mn,this.segments=new kr,this.programConfigurations=new ms(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,d){const p=this.layers[0],v=[];let x=null,w=!1;p.type==="circle"&&(x=p.layout.get("circle-sort-key"),w=!x.isConstant());for(const{feature:T,id:I,index:M,sourceLayerIndex:D}of n){const $=this.layers[0]._featureFilter.needGeometry,H=ac(T,$);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),H,d))continue;const q=w?x.evaluate(H,{},d):void 0,X={id:I,properties:T.properties,type:T.type,sourceLayerIndex:D,index:M,geometry:$?H.geometry:sc(T),patterns:{},sortKey:q};v.push(X)}w&&v.sort((T,I)=>T.sortKey-I.sortKey);for(const T of v){const{geometry:I,index:M,sourceLayerIndex:D}=T,$=n[M].feature;this.addFeature(T,I,M,d),a.featureIndex.insert($,I,M,D,this.index)}}update(n,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Di),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,a,d,p){for(const v of a)for(const x of v){const w=x.x,T=x.y;if(w<0||w>=on||T<0||T>=on)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),M=I.vertexLength;dm(this.layoutVertexArray,w,T,-1,-1),dm(this.layoutVertexArray,w,T,1,-1),dm(this.layoutVertexArray,w,T,1,1),dm(this.layoutVertexArray,w,T,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{},p)}}function iw(s,n){for(let a=0;a<s.length;a++)if(_u(n,s[a]))return!0;for(let a=0;a<n.length;a++)if(_u(s,n[a]))return!0;return!!J0(s,n)}function IP(s,n,a){return!!_u(s,n)||!!Q0(n,s,a)}function ow(s,n){if(s.length===1)return aw(n,s[0]);for(let a=0;a<n.length;a++){const d=n[a];for(let p=0;p<d.length;p++)if(_u(s,d[p]))return!0}for(let a=0;a<s.length;a++)if(aw(n,s[a]))return!0;for(let a=0;a<n.length;a++)if(J0(s,n[a]))return!0;return!1}function PP(s,n,a){if(s.length>1){if(J0(s,n))return!0;for(let d=0;d<n.length;d++)if(Q0(n[d],s,a))return!0}for(let d=0;d<s.length;d++)if(Q0(s[d],n,a))return!0;return!1}function J0(s,n){if(s.length===0||n.length===0)return!1;for(let a=0;a<s.length-1;a++){const d=s[a],p=s[a+1];for(let v=0;v<n.length-1;v++)if(AP(d,p,n[v],n[v+1]))return!0}return!1}function AP(s,n,a,d){return Ge(s,a,d)!==Ge(n,a,d)&&Ge(s,n,a)!==Ge(s,n,d)}function Q0(s,n,a){const d=a*a;if(n.length===1)return s.distSqr(n[0])<d;for(let p=1;p<n.length;p++)if(sw(s,n[p-1],n[p])<d)return!0;return!1}function sw(s,n,a){const d=n.distSqr(a);if(d===0)return s.distSqr(n);const p=((s.x-n.x)*(a.x-n.x)+(s.y-n.y)*(a.y-n.y))/d;return s.distSqr(p<0?n:p>1?a:a.sub(n)._mult(p)._add(n))}function aw(s,n){let a,d,p,v=!1;for(let x=0;x<s.length;x++){a=s[x];for(let w=0,T=a.length-1;w<a.length;T=w++)d=a[w],p=a[T],d.y>n.y!=p.y>n.y&&n.x<(p.x-d.x)*(n.y-d.y)/(p.y-d.y)+d.x&&(v=!v)}return v}function _u(s,n){let a=!1;for(let d=0,p=s.length-1;d<s.length;p=d++){const v=s[d],x=s[p];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(a=!a)}return a}function MP(s,n,a){const d=a[0],p=a[2];if(s.x<d.x&&n.x<d.x||s.x>p.x&&n.x>p.x||s.y<d.y&&n.y<d.y||s.y>p.y&&n.y>p.y)return!1;const v=Ge(s,n,a[0]);return v!==Ge(s,n,a[1])||v!==Ge(s,n,a[2])||v!==Ge(s,n,a[3])}function Pd(s,n,a){const d=n.paint.get(s).value;return d.kind==="constant"?d.value:a.programConfigurations.get(n.id).getMaxValue(s)}function fm(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function pm(s,n,a,d,p){if(!n[0]&&!n[1])return s;const v=O.convert(n)._mult(p);a==="viewport"&&v._rotate(-d);const x=[];for(let w=0;w<s.length;w++)x.push(s[w].sub(v));return x}let lw,cw;ct("CircleBucket",Y0,{omit:["layers"]});var zP={get paint(){return cw=cw||new Xr({"circle-radius":new kt(Me.paint_circle["circle-radius"]),"circle-color":new kt(Me.paint_circle["circle-color"]),"circle-blur":new kt(Me.paint_circle["circle-blur"]),"circle-opacity":new kt(Me.paint_circle["circle-opacity"]),"circle-translate":new vt(Me.paint_circle["circle-translate"]),"circle-translate-anchor":new vt(Me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new vt(Me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new vt(Me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new kt(Me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new kt(Me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new kt(Me.paint_circle["circle-stroke-opacity"])})},get layout(){return lw=lw||new Xr({"circle-sort-key":new kt(Me.layout_circle["circle-sort-key"])})}},pi=1e-6,xu=typeof Float32Array<"u"?Float32Array:Array;function ev(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function uw(s,n,a){var d=n[0],p=n[1],v=n[2],x=n[3],w=n[4],T=n[5],I=n[6],M=n[7],D=n[8],$=n[9],H=n[10],q=n[11],X=n[12],se=n[13],ue=n[14],be=n[15],me=a[0],Se=a[1],Te=a[2],Be=a[3];return s[0]=me*d+Se*w+Te*D+Be*X,s[1]=me*p+Se*T+Te*$+Be*se,s[2]=me*v+Se*I+Te*H+Be*ue,s[3]=me*x+Se*M+Te*q+Be*be,s[4]=(me=a[4])*d+(Se=a[5])*w+(Te=a[6])*D+(Be=a[7])*X,s[5]=me*p+Se*T+Te*$+Be*se,s[6]=me*v+Se*I+Te*H+Be*ue,s[7]=me*x+Se*M+Te*q+Be*be,s[8]=(me=a[8])*d+(Se=a[9])*w+(Te=a[10])*D+(Be=a[11])*X,s[9]=me*p+Se*T+Te*$+Be*se,s[10]=me*v+Se*I+Te*H+Be*ue,s[11]=me*x+Se*M+Te*q+Be*be,s[12]=(me=a[12])*d+(Se=a[13])*w+(Te=a[14])*D+(Be=a[15])*X,s[13]=me*p+Se*T+Te*$+Be*se,s[14]=me*v+Se*I+Te*H+Be*ue,s[15]=me*x+Se*M+Te*q+Be*be,s}Math.hypot||(Math.hypot=function(){for(var s=0,n=arguments.length;n--;)s+=arguments[n]*arguments[n];return Math.sqrt(s)});var Ad,LP=uw;function mm(s,n,a){var d=n[0],p=n[1],v=n[2],x=n[3];return s[0]=a[0]*d+a[4]*p+a[8]*v+a[12]*x,s[1]=a[1]*d+a[5]*p+a[9]*v+a[13]*x,s[2]=a[2]*d+a[6]*p+a[10]*v+a[14]*x,s[3]=a[3]*d+a[7]*p+a[11]*v+a[15]*x,s}Ad=new xu(4),xu!=Float32Array&&(Ad[0]=0,Ad[1]=0,Ad[2]=0,Ad[3]=0);class DP extends Ji{constructor(n){super(n,zP)}createBucket(n){return new Y0(n)}queryRadius(n){const a=n;return Pd("circle-radius",this,a)+Pd("circle-stroke-width",this,a)+fm(this.paint.get("circle-translate"))}queryIntersectsFeature(n,a,d,p,v,x,w,T){const I=pm(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,w),M=this.paint.get("circle-radius").evaluate(a,d)+this.paint.get("circle-stroke-width").evaluate(a,d),D=this.paint.get("circle-pitch-alignment")==="map",$=D?I:function(q,X){return q.map(se=>hw(se,X))}(I,T),H=D?M*w:M;for(const q of p)for(const X of q){const se=D?X:hw(X,T);let ue=H;const be=mm([],[X.x,X.y,0,1],T);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ue*=be[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ue*=x.cameraToCenterDistance/be[3]),IP($,se,ue))return!0}return!1}}function hw(s,n){const a=mm([],[s.x,s.y,0,1],n);return new O(a[0]/a[3],a[1]/a[3])}class dw extends Y0{}let fw;ct("HeatmapBucket",dw,{omit:["layers"]});var RP={get paint(){return fw=fw||new Xr({"heatmap-radius":new kt(Me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new kt(Me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new vt(Me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new bd(Me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new vt(Me.paint_heatmap["heatmap-opacity"])})}};function tv(s,{width:n,height:a},d,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==n*a*d)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${n*a*d}`)}else p=new Uint8Array(n*a*d);return s.width=n,s.height=a,s.data=p,s}function pw(s,{width:n,height:a},d){if(n===s.width&&a===s.height)return;const p=tv({},{width:n,height:a},d);rv(s,p,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,n),height:Math.min(s.height,a)},d),s.width=n,s.height=a,s.data=p.data}function rv(s,n,a,d,p,v){if(p.width===0||p.height===0)return n;if(p.width>s.width||p.height>s.height||a.x>s.width-p.width||a.y>s.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>n.width||p.height>n.height||d.x>n.width-p.width||d.y>n.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,w=n.data;if(x===w)throw new Error("srcData equals dstData, so image is already copied");for(let T=0;T<p.height;T++){const I=((a.y+T)*s.width+a.x)*v,M=((d.y+T)*n.width+d.x)*v;for(let D=0;D<p.width*v;D++)w[M+D]=x[I+D]}return n}class Md{constructor(n,a){tv(this,n,1,a)}resize(n){pw(this,n,1)}clone(){return new Md({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,d,p,v){rv(n,a,d,p,v,1)}}class ho{constructor(n,a){tv(this,n,4,a)}resize(n){pw(this,n,4)}replace(n,a){a?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new ho({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,a,d,p,v){rv(n,a,d,p,v,4)}}function mw(s){const n={},a=s.resolution||256,d=s.clips?s.clips.length:1,p=s.image||new ho({width:a,height:d});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const v=(x,w,T)=>{n[s.evaluationKey]=T;const I=s.expression.evaluate(n);p.data[x+w+0]=Math.floor(255*I.r/I.a),p.data[x+w+1]=Math.floor(255*I.g/I.a),p.data[x+w+2]=Math.floor(255*I.b/I.a),p.data[x+w+3]=Math.floor(255*I.a)};if(s.clips)for(let x=0,w=0;x<d;++x,w+=4*a)for(let T=0,I=0;T<a;T++,I+=4){const M=T/(a-1),{start:D,end:$}=s.clips[x];v(w,I,D*(1-M)+$*M)}else for(let x=0,w=0;x<a;x++,w+=4)v(0,w,x/(a-1));return p}ct("AlphaImage",Md),ct("RGBAImage",ho);class OP extends Ji{createBucket(n){return new dw(n)}constructor(n){super(n,RP),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=mw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let gw;var BP={get paint(){return gw=gw||new Xr({"hillshade-illumination-direction":new vt(Me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new vt(Me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new vt(Me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new vt(Me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new vt(Me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new vt(Me.paint_hillshade["hillshade-accent-color"])})}};class $P extends Ji{constructor(n){super(n,BP)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const FP=Or([{name:"a_pos",components:2,type:"Int16"}],4),{members:NP}=FP;var nv={exports:{}};function gm(s,n,a){a=a||2;var d,p,v,x,w,T,I,M=n&&n.length,D=M?n[0]*a:s.length,$=yw(s,0,D,a,!0),H=[];if(!$||$.next===$.prev)return H;if(M&&($=function(X,se,ue,be){var me,Se,Te,Be=[];for(me=0,Se=se.length;me<Se;me++)(Te=yw(X,se[me]*be,me<Se-1?se[me+1]*be:X.length,be,!1))===Te.next&&(Te.steiner=!0),Be.push(ZP(Te));for(Be.sort(HP),me=0;me<Be.length;me++)ue=qP(Be[me],ue);return ue}(s,n,$,a)),s.length>80*a){d=v=s[0],p=x=s[1];for(var q=a;q<D;q+=a)(w=s[q])<d&&(d=w),(T=s[q+1])<p&&(p=T),w>v&&(v=w),T>x&&(x=T);I=(I=Math.max(v-d,x-p))!==0?32767/I:0}return zd($,H,a,d,p,I,0),H}function yw(s,n,a,d,p){var v,x;if(p===sv(s,n,a,d)>0)for(v=n;v<a;v+=d)x=xw(v,s[v],s[v+1],x);else for(v=a-d;v>=n;v-=d)x=xw(v,s[v],s[v+1],x);return x&&ym(x,x.next)&&(Dd(x),x=x.next),x}function lc(s,n){if(!s)return s;n||(n=s);var a,d=s;do if(a=!1,d.steiner||!ym(d,d.next)&&Jr(d.prev,d,d.next)!==0)d=d.next;else{if(Dd(d),(d=n=d.prev)===d.next)break;a=!0}while(a||d!==n);return n}function zd(s,n,a,d,p,v,x){if(s){!x&&v&&function(M,D,$,H){var q=M;do q.z===0&&(q.z=iv(q.x,q.y,D,$,H)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==M);q.prevZ.nextZ=null,q.prevZ=null,function(X){var se,ue,be,me,Se,Te,Be,it,ft=1;do{for(ue=X,X=null,Se=null,Te=0;ue;){for(Te++,be=ue,Be=0,se=0;se<ft&&(Be++,be=be.nextZ);se++);for(it=ft;Be>0||it>0&&be;)Be!==0&&(it===0||!be||ue.z<=be.z)?(me=ue,ue=ue.nextZ,Be--):(me=be,be=be.nextZ,it--),Se?Se.nextZ=me:X=me,me.prevZ=Se,Se=me;ue=be}Se.nextZ=null,ft*=2}while(Te>1)}(q)}(s,d,p,v);for(var w,T,I=s;s.prev!==s.next;)if(w=s.prev,T=s.next,v?VP(s,d,p,v):jP(s))n.push(w.i/a|0),n.push(s.i/a|0),n.push(T.i/a|0),Dd(s),s=T.next,I=T.next;else if((s=T)===I){x?x===1?zd(s=UP(lc(s),n,a),n,a,d,p,v,2):x===2&&GP(s,n,a,d,p,v):zd(lc(s),n,a,d,p,v,1);break}}}function jP(s){var n=s.prev,a=s,d=s.next;if(Jr(n,a,d)>=0)return!1;for(var p=n.x,v=a.x,x=d.x,w=n.y,T=a.y,I=d.y,M=p<v?p<x?p:x:v<x?v:x,D=w<T?w<I?w:I:T<I?T:I,$=p>v?p>x?p:x:v>x?v:x,H=w>T?w>I?w:I:T>I?T:I,q=d.next;q!==n;){if(q.x>=M&&q.x<=$&&q.y>=D&&q.y<=H&&bu(p,w,v,T,x,I,q.x,q.y)&&Jr(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function VP(s,n,a,d){var p=s.prev,v=s,x=s.next;if(Jr(p,v,x)>=0)return!1;for(var w=p.x,T=v.x,I=x.x,M=p.y,D=v.y,$=x.y,H=w<T?w<I?w:I:T<I?T:I,q=M<D?M<$?M:$:D<$?D:$,X=w>T?w>I?w:I:T>I?T:I,se=M>D?M>$?M:$:D>$?D:$,ue=iv(H,q,n,a,d),be=iv(X,se,n,a,d),me=s.prevZ,Se=s.nextZ;me&&me.z>=ue&&Se&&Se.z<=be;){if(me.x>=H&&me.x<=X&&me.y>=q&&me.y<=se&&me!==p&&me!==x&&bu(w,M,T,D,I,$,me.x,me.y)&&Jr(me.prev,me,me.next)>=0||(me=me.prevZ,Se.x>=H&&Se.x<=X&&Se.y>=q&&Se.y<=se&&Se!==p&&Se!==x&&bu(w,M,T,D,I,$,Se.x,Se.y)&&Jr(Se.prev,Se,Se.next)>=0))return!1;Se=Se.nextZ}for(;me&&me.z>=ue;){if(me.x>=H&&me.x<=X&&me.y>=q&&me.y<=se&&me!==p&&me!==x&&bu(w,M,T,D,I,$,me.x,me.y)&&Jr(me.prev,me,me.next)>=0)return!1;me=me.prevZ}for(;Se&&Se.z<=be;){if(Se.x>=H&&Se.x<=X&&Se.y>=q&&Se.y<=se&&Se!==p&&Se!==x&&bu(w,M,T,D,I,$,Se.x,Se.y)&&Jr(Se.prev,Se,Se.next)>=0)return!1;Se=Se.nextZ}return!0}function UP(s,n,a){var d=s;do{var p=d.prev,v=d.next.next;!ym(p,v)&&vw(p,d,d.next,v)&&Ld(p,v)&&Ld(v,p)&&(n.push(p.i/a|0),n.push(d.i/a|0),n.push(v.i/a|0),Dd(d),Dd(d.next),d=s=v),d=d.next}while(d!==s);return lc(d)}function GP(s,n,a,d,p,v){var x=s;do{for(var w=x.next.next;w!==x.prev;){if(x.i!==w.i&&KP(x,w)){var T=_w(x,w);return x=lc(x,x.next),T=lc(T,T.next),zd(x,n,a,d,p,v,0),void zd(T,n,a,d,p,v,0)}w=w.next}x=x.next}while(x!==s)}function HP(s,n){return s.x-n.x}function qP(s,n){var a=function(p,v){var x,w=v,T=p.x,I=p.y,M=-1/0;do{if(I<=w.y&&I>=w.next.y&&w.next.y!==w.y){var D=w.x+(I-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(D<=T&&D>M&&(M=D,x=w.x<w.next.x?w:w.next,D===T))return x}w=w.next}while(w!==v);if(!x)return null;var $,H=x,q=x.x,X=x.y,se=1/0;w=x;do T>=w.x&&w.x>=q&&T!==w.x&&bu(I<X?T:M,I,q,X,I<X?M:T,I,w.x,w.y)&&($=Math.abs(I-w.y)/(T-w.x),Ld(w,p)&&($<se||$===se&&(w.x>x.x||w.x===x.x&&WP(x,w)))&&(x=w,se=$)),w=w.next;while(w!==H);return x}(s,n);if(!a)return n;var d=_w(a,s);return lc(d,d.next),lc(a,a.next)}function WP(s,n){return Jr(s.prev,s,n.prev)<0&&Jr(n.next,s,s.next)<0}function iv(s,n,a,d,p){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-a)*p|0)|s<<8))|s<<4))|s<<2))|s<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-d)*p|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function ZP(s){var n=s,a=s;do(n.x<a.x||n.x===a.x&&n.y<a.y)&&(a=n),n=n.next;while(n!==s);return a}function bu(s,n,a,d,p,v,x,w){return(p-x)*(n-w)>=(s-x)*(v-w)&&(s-x)*(d-w)>=(a-x)*(n-w)&&(a-x)*(v-w)>=(p-x)*(d-w)}function KP(s,n){return s.next.i!==n.i&&s.prev.i!==n.i&&!function(a,d){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==d.i&&p.next.i!==d.i&&vw(p,p.next,a,d))return!0;p=p.next}while(p!==a);return!1}(s,n)&&(Ld(s,n)&&Ld(n,s)&&function(a,d){var p=a,v=!1,x=(a.x+d.x)/2,w=(a.y+d.y)/2;do p.y>w!=p.next.y>w&&p.next.y!==p.y&&x<(p.next.x-p.x)*(w-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==a);return v}(s,n)&&(Jr(s.prev,s,n.prev)||Jr(s,n.prev,n))||ym(s,n)&&Jr(s.prev,s,s.next)>0&&Jr(n.prev,n,n.next)>0)}function Jr(s,n,a){return(n.y-s.y)*(a.x-n.x)-(n.x-s.x)*(a.y-n.y)}function ym(s,n){return s.x===n.x&&s.y===n.y}function vw(s,n,a,d){var p=_m(Jr(s,n,a)),v=_m(Jr(s,n,d)),x=_m(Jr(a,d,s)),w=_m(Jr(a,d,n));return p!==v&&x!==w||!(p!==0||!vm(s,a,n))||!(v!==0||!vm(s,d,n))||!(x!==0||!vm(a,s,d))||!(w!==0||!vm(a,n,d))}function vm(s,n,a){return n.x<=Math.max(s.x,a.x)&&n.x>=Math.min(s.x,a.x)&&n.y<=Math.max(s.y,a.y)&&n.y>=Math.min(s.y,a.y)}function _m(s){return s>0?1:s<0?-1:0}function Ld(s,n){return Jr(s.prev,s,s.next)<0?Jr(s,n,s.next)>=0&&Jr(s,s.prev,n)>=0:Jr(s,n,s.prev)<0||Jr(s,s.next,n)<0}function _w(s,n){var a=new ov(s.i,s.x,s.y),d=new ov(n.i,n.x,n.y),p=s.next,v=n.prev;return s.next=n,n.prev=s,a.next=p,p.prev=a,d.next=a,a.prev=d,v.next=d,d.prev=v,d}function xw(s,n,a,d){var p=new ov(s,n,a);return d?(p.next=d.next,p.prev=d,d.next.prev=p,d.next=p):(p.prev=p,p.next=p),p}function Dd(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function ov(s,n,a){this.i=s,this.x=n,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function sv(s,n,a,d){for(var p=0,v=n,x=a-d;v<a;v+=d)p+=(s[x]-s[v])*(s[v+1]+s[x+1]),x=v;return p}nv.exports=gm,nv.exports.default=gm,gm.deviation=function(s,n,a,d){var p=n&&n.length,v=Math.abs(sv(s,0,p?n[0]*a:s.length,a));if(p)for(var x=0,w=n.length;x<w;x++)v-=Math.abs(sv(s,n[x]*a,x<w-1?n[x+1]*a:s.length,a));var T=0;for(x=0;x<d.length;x+=3){var I=d[x]*a,M=d[x+1]*a,D=d[x+2]*a;T+=Math.abs((s[I]-s[D])*(s[M+1]-s[I+1])-(s[I]-s[M])*(s[D+1]-s[I+1]))}return v===0&&T===0?0:Math.abs((T-v)/v)},gm.flatten=function(s){for(var n=s[0][0].length,a={vertices:[],holes:[],dimensions:n},d=0,p=0;p<s.length;p++){for(var v=0;v<s[p].length;v++)for(var x=0;x<n;x++)a.vertices.push(s[p][v][x]);p>0&&a.holes.push(d+=s[p-1].length)}return a};var bw=k(nv.exports);function XP(s,n,a,d,p){ww(s,n,a,d||s.length-1,p)}function ww(s,n,a,d,p){for(;d>a;){if(d-a>600){var v=d-a+1,x=n-a+1,w=Math.log(v),T=.5*Math.exp(2*w/3),I=.5*Math.sqrt(w*T*(v-T)/v)*(x-v/2<0?-1:1);ww(s,n,Math.max(a,Math.floor(n-x*T/v+I)),Math.min(d,Math.floor(n+(v-x)*T/v+I)),p)}var M=s[n],D=a,$=d;for(Rd(s,a,n),p(s[d],M)>0&&Rd(s,a,d);D<$;){for(Rd(s,D,$),D++,$--;p(s[D],M)<0;)D++;for(;p(s[$],M)>0;)$--}p(s[a],M)===0?Rd(s,a,$):Rd(s,++$,d),$<=n&&(a=$+1),n<=$&&(d=$-1)}}function Rd(s,n,a){var d=s[n];s[n]=s[a],s[a]=d}function av(s,n){const a=s.length;if(a<=1)return[s];const d=[];let p,v;for(let x=0;x<a;x++){const w=Fe(s[x]);w!==0&&(s[x].area=Math.abs(w),v===void 0&&(v=w<0),v===w<0?(p&&d.push(p),p=[s[x]]):p.push(s[x]))}if(p&&d.push(p),n>1)for(let x=0;x<d.length;x++)d[x].length<=n||(XP(d[x],n,1,d[x].length-1,YP),d[x]=d[x].slice(0,n));return d}function YP(s,n){return n.area-s.area}function lv(s,n,a){const d=a.patternDependencies;let p=!1;for(const v of n){const x=v.paint.get(`${s}-pattern`);x.isConstant()||(p=!0);const w=x.constantOr(null);w&&(p=!0,d[w.to]=!0,d[w.from]=!0)}return p}function cv(s,n,a,d,p){const v=p.patternDependencies;for(const x of n){const w=x.paint.get(`${s}-pattern`).value;if(w.kind!=="constant"){let T=w.evaluate({zoom:d-1},a,{},p.availableImages),I=w.evaluate({zoom:d},a,{},p.availableImages),M=w.evaluate({zoom:d+1},a,{},p.availableImages);T=T&&T.name?T.name:T,I=I&&I.name?I.name:I,M=M&&M.name?M.name:M,v[T]=!0,v[I]=!0,v[M]=!0,a.patterns[x.id]={min:T,mid:I,max:M}}}return a}class uv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Gt,this.indexArray=new Mn,this.indexArray2=new fn,this.programConfigurations=new ms(n.layers,n.zoom),this.segments=new kr,this.segments2=new kr,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,d){this.hasPattern=lv("fill",this.layers,a);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),x=[];for(const{feature:w,id:T,index:I,sourceLayerIndex:M}of n){const D=this.layers[0]._featureFilter.needGeometry,$=ac(w,D);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),$,d))continue;const H=v?p.evaluate($,{},d,a.availableImages):void 0,q={id:T,properties:w.properties,type:w.type,sourceLayerIndex:M,index:I,geometry:D?$.geometry:sc(w),patterns:{},sortKey:H};x.push(q)}v&&x.sort((w,T)=>w.sortKey-T.sortKey);for(const w of x){const{geometry:T,index:I,sourceLayerIndex:M}=w;if(this.hasPattern){const D=cv("fill",this.layers,w,this.zoom,a);this.patternFeatures.push(D)}else this.addFeature(w,T,I,d,{});a.featureIndex.insert(n[I].feature,T,I,M,this.index)}}update(n,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,d)}addFeatures(n,a,d){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,a,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,NP),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,a,d,p,v){for(const x of av(a,500)){let w=0;for(const H of x)w+=H.length;const T=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),I=T.vertexLength,M=[],D=[];for(const H of x){if(H.length===0)continue;H!==x[0]&&D.push(M.length/2);const q=this.segments2.prepareSegment(H.length,this.layoutVertexArray,this.indexArray2),X=q.vertexLength;this.layoutVertexArray.emplaceBack(H[0].x,H[0].y),this.indexArray2.emplaceBack(X+H.length-1,X),M.push(H[0].x),M.push(H[0].y);for(let se=1;se<H.length;se++)this.layoutVertexArray.emplaceBack(H[se].x,H[se].y),this.indexArray2.emplaceBack(X+se-1,X+se),M.push(H[se].x),M.push(H[se].y);q.vertexLength+=H.length,q.primitiveLength+=H.length}const $=bw(M,D);for(let H=0;H<$.length;H+=3)this.indexArray.emplaceBack(I+$[H],I+$[H+1],I+$[H+2]);T.vertexLength+=w,T.primitiveLength+=$.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,v,p)}}let Sw,Cw;ct("FillBucket",uv,{omit:["layers","patternFeatures"]});var JP={get paint(){return Cw=Cw||new Xr({"fill-antialias":new vt(Me.paint_fill["fill-antialias"]),"fill-opacity":new kt(Me.paint_fill["fill-opacity"]),"fill-color":new kt(Me.paint_fill["fill-color"]),"fill-outline-color":new kt(Me.paint_fill["fill-outline-color"]),"fill-translate":new vt(Me.paint_fill["fill-translate"]),"fill-translate-anchor":new vt(Me.paint_fill["fill-translate-anchor"]),"fill-pattern":new nc(Me.paint_fill["fill-pattern"])})},get layout(){return Sw=Sw||new Xr({"fill-sort-key":new kt(Me.layout_fill["fill-sort-key"])})}};class QP extends Ji{constructor(n){super(n,JP)}recalculate(n,a){super.recalculate(n,a);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new uv(n)}queryRadius(){return fm(this.paint.get("fill-translate"))}queryIntersectsFeature(n,a,d,p,v,x,w){return ow(pm(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,w),p)}isTileClipped(){return!0}}const eA=Or([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),tA=Or([{name:"a_centroid",components:2,type:"Int16"}],4),{members:rA}=eA;var ul={},nA=A,kw=wu;function wu(s,n,a,d,p){this.properties={},this.extent=a,this.type=0,this._pbf=s,this._geometry=-1,this._keys=d,this._values=p,s.readFields(iA,this,n)}function iA(s,n,a){s==1?n.id=a.readVarint():s==2?function(d,p){for(var v=d.readVarint()+d.pos;d.pos<v;){var x=p._keys[d.readVarint()],w=p._values[d.readVarint()];p.properties[x]=w}}(a,n):s==3?n.type=a.readVarint():s==4&&(n._geometry=a.pos)}function oA(s){for(var n,a,d=0,p=0,v=s.length,x=v-1;p<v;x=p++)d+=((a=s[x]).x-(n=s[p]).x)*(n.y+a.y);return d}wu.types=["Unknown","Point","LineString","Polygon"],wu.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var n,a=s.readVarint()+s.pos,d=1,p=0,v=0,x=0,w=[];s.pos<a;){if(p<=0){var T=s.readVarint();d=7&T,p=T>>3}if(p--,d===1||d===2)v+=s.readSVarint(),x+=s.readSVarint(),d===1&&(n&&w.push(n),n=[]),n.push(new nA(v,x));else{if(d!==7)throw new Error("unknown command "+d);n&&n.push(n[0].clone())}}return n&&w.push(n),w},wu.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var n=s.readVarint()+s.pos,a=1,d=0,p=0,v=0,x=1/0,w=-1/0,T=1/0,I=-1/0;s.pos<n;){if(d<=0){var M=s.readVarint();a=7&M,d=M>>3}if(d--,a===1||a===2)(p+=s.readSVarint())<x&&(x=p),p>w&&(w=p),(v+=s.readSVarint())<T&&(T=v),v>I&&(I=v);else if(a!==7)throw new Error("unknown command "+a)}return[x,T,w,I]},wu.prototype.toGeoJSON=function(s,n,a){var d,p,v=this.extent*Math.pow(2,a),x=this.extent*s,w=this.extent*n,T=this.loadGeometry(),I=wu.types[this.type];function M(H){for(var q=0;q<H.length;q++){var X=H[q];H[q]=[360*(X.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(X.y+w)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var D=[];for(d=0;d<T.length;d++)D[d]=T[d][0];M(T=D);break;case 2:for(d=0;d<T.length;d++)M(T[d]);break;case 3:for(T=function(H){var q=H.length;if(q<=1)return[H];for(var X,se,ue=[],be=0;be<q;be++){var me=oA(H[be]);me!==0&&(se===void 0&&(se=me<0),se===me<0?(X&&ue.push(X),X=[H[be]]):X.push(H[be]))}return X&&ue.push(X),ue}(T),d=0;d<T.length;d++)for(p=0;p<T[d].length;p++)M(T[d][p])}T.length===1?T=T[0]:I="Multi"+I;var $={type:"Feature",geometry:{type:I,coordinates:T},properties:this.properties};return"id"in this&&($.id=this.id),$};var sA=kw,Tw=Ew;function Ew(s,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(aA,this,n),this.length=this._features.length}function aA(s,n,a){s===15?n.version=a.readVarint():s===1?n.name=a.readString():s===5?n.extent=a.readVarint():s===2?n._features.push(a.pos):s===3?n._keys.push(a.readString()):s===4&&n._values.push(function(d){for(var p=null,v=d.readVarint()+d.pos;d.pos<v;){var x=d.readVarint()>>3;p=x===1?d.readString():x===2?d.readFloat():x===3?d.readDouble():x===4?d.readVarint64():x===5?d.readVarint():x===6?d.readSVarint():x===7?d.readBoolean():null}return p}(a))}Ew.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var n=this._pbf.readVarint()+this._pbf.pos;return new sA(this._pbf,n,this.extent,this._keys,this._values)};var lA=Tw;function cA(s,n,a){if(s===3){var d=new lA(a,a.readVarint()+a.pos);d.length&&(n[d.name]=d)}}ul.VectorTile=function(s,n){this.layers=s.readFields(cA,{},n)},ul.VectorTileFeature=kw,ul.VectorTileLayer=Tw;const uA=ul.VectorTileFeature.types,hv=Math.pow(2,13);function Od(s,n,a,d,p,v,x,w){s.emplaceBack(n,a,2*Math.floor(d*hv)+x,p*hv*2,v*hv*2,Math.round(w))}class dv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new et,this.centroidVertexArray=new qe,this.indexArray=new Mn,this.programConfigurations=new ms(n.layers,n.zoom),this.segments=new kr,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,d){this.features=[],this.hasPattern=lv("fill-extrusion",this.layers,a);for(const{feature:p,id:v,index:x,sourceLayerIndex:w}of n){const T=this.layers[0]._featureFilter.needGeometry,I=ac(p,T);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),I,d))continue;const M={id:v,sourceLayerIndex:w,index:x,geometry:T?I.geometry:sc(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(cv("fill-extrusion",this.layers,M,this.zoom,a)):this.addFeature(M,M.geometry,x,d,{}),a.featureIndex.insert(p,M.geometry,x,w,this.index,!0)}}addFeatures(n,a,d){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,a,d)}}update(n,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,rA),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,tA.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,a,d,p,v){const x={x:0,y:0,vertexCount:0};for(const w of av(a,500)){let T=0;for(const q of w)T+=q.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const q of w){if(q.length===0||dA(q))continue;let X=0;for(let se=0;se<q.length;se++){const ue=q[se];if(se>=1){const be=q[se-1];if(!hA(ue,be)){I.vertexLength+4>kr.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const me=ue.sub(be)._perp()._unit(),Se=be.dist(ue);X+Se>32768&&(X=0),Od(this.layoutVertexArray,ue.x,ue.y,me.x,me.y,0,0,X),Od(this.layoutVertexArray,ue.x,ue.y,me.x,me.y,0,1,X),x.x+=2*ue.x,x.y+=2*ue.y,x.vertexCount+=2,X+=Se,Od(this.layoutVertexArray,be.x,be.y,me.x,me.y,0,0,X),Od(this.layoutVertexArray,be.x,be.y,me.x,me.y,0,1,X),x.x+=2*be.x,x.y+=2*be.y,x.vertexCount+=2;const Te=I.vertexLength;this.indexArray.emplaceBack(Te,Te+2,Te+1),this.indexArray.emplaceBack(Te+1,Te+2,Te+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+T>kr.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray)),uA[n.type]!=="Polygon")continue;const M=[],D=[],$=I.vertexLength;for(const q of w)if(q.length!==0){q!==w[0]&&D.push(M.length/2);for(let X=0;X<q.length;X++){const se=q[X];Od(this.layoutVertexArray,se.x,se.y,0,0,1,1,0),x.x+=se.x,x.y+=se.y,x.vertexCount+=1,M.push(se.x),M.push(se.y)}}const H=bw(M,D);for(let q=0;q<H.length;q+=3)this.indexArray.emplaceBack($+H[q],$+H[q+2],$+H[q+1]);I.primitiveLength+=H.length/3,I.vertexLength+=T}for(let w=0;w<x.vertexCount;w++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,v,p)}}function hA(s,n){return s.x===n.x&&(s.x<0||s.x>on)||s.y===n.y&&(s.y<0||s.y>on)}function dA(s){return s.every(n=>n.x<0)||s.every(n=>n.x>on)||s.every(n=>n.y<0)||s.every(n=>n.y>on)}let Iw;ct("FillExtrusionBucket",dv,{omit:["layers","features"]});var fA={get paint(){return Iw=Iw||new Xr({"fill-extrusion-opacity":new vt(Me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new kt(Me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new vt(Me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new vt(Me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new nc(Me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new kt(Me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new kt(Me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new vt(Me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class pA extends Ji{constructor(n){super(n,fA)}createBucket(n){return new dv(n)}queryRadius(){return fm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,a,d,p,v,x,w,T){const I=pm(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,w),M=this.paint.get("fill-extrusion-height").evaluate(a,d),D=this.paint.get("fill-extrusion-base").evaluate(a,d),$=function(q,X,se,ue){const be=[];for(const me of q){const Se=[me.x,me.y,0,1];mm(Se,Se,X),be.push(new O(Se[0]/Se[3],Se[1]/Se[3]))}return be}(I,T),H=function(q,X,se,ue){const be=[],me=[],Se=ue[8]*X,Te=ue[9]*X,Be=ue[10]*X,it=ue[11]*X,ft=ue[8]*se,rt=ue[9]*se,tt=ue[10]*se,Xe=ue[11]*se;for(const ut of q){const Je=[],Ve=[];for(const bt of ut){const gt=bt.x,Nt=bt.y,Tr=ue[0]*gt+ue[4]*Nt+ue[12],Pr=ue[1]*gt+ue[5]*Nt+ue[13],gn=ue[2]*gt+ue[6]*Nt+ue[14],eo=ue[3]*gt+ue[7]*Nt+ue[15],mi=gn+Be,sn=eo+it,Ln=Tr+ft,Vn=Pr+rt,gi=gn+tt,yi=eo+Xe,yn=new O((Tr+Se)/sn,(Pr+Te)/sn);yn.z=mi/sn,Je.push(yn);const vn=new O(Ln/yi,Vn/yi);vn.z=gi/yi,Ve.push(vn)}be.push(Je),me.push(Ve)}return[be,me]}(p,D,M,T);return function(q,X,se){let ue=1/0;ow(se,X)&&(ue=Pw(se,X[0]));for(let be=0;be<X.length;be++){const me=X[be],Se=q[be];for(let Te=0;Te<me.length-1;Te++){const Be=me[Te],it=[Be,me[Te+1],Se[Te+1],Se[Te],Be];iw(se,it)&&(ue=Math.min(ue,Pw(se,it)))}}return ue!==1/0&&ue}(H[0],H[1],$)}}function Bd(s,n){return s.x*n.x+s.y*n.y}function Pw(s,n){if(s.length===1){let a=0;const d=n[a++];let p;for(;!p||d.equals(p);)if(p=n[a++],!p)return 1/0;for(;a<n.length;a++){const v=n[a],x=s[0],w=p.sub(d),T=v.sub(d),I=x.sub(d),M=Bd(w,w),D=Bd(w,T),$=Bd(T,T),H=Bd(I,w),q=Bd(I,T),X=M*$-D*D,se=($*H-D*q)/X,ue=(M*q-D*H)/X,be=d.z*(1-se-ue)+p.z*se+v.z*ue;if(isFinite(be))return be}return 1/0}{let a=1/0;for(const d of n)a=Math.min(a,d.z);return a}}const mA=Or([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:gA}=mA,yA=Or([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:vA}=yA,_A=ul.VectorTileFeature.types,xA=Math.cos(Math.PI/180*37.5),Aw=Math.pow(2,14)/.5;class fv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(a=>a.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new Tt,this.layoutVertexArray2=new pt,this.indexArray=new Mn,this.programConfigurations=new ms(n.layers,n.zoom),this.segments=new kr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(n,a,d){this.hasPattern=lv("line",this.layers,a);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),x=[];for(const{feature:w,id:T,index:I,sourceLayerIndex:M}of n){const D=this.layers[0]._featureFilter.needGeometry,$=ac(w,D);if(!this.layers[0]._featureFilter.filter(new Cr(this.zoom),$,d))continue;const H=v?p.evaluate($,{},d):void 0,q={id:T,properties:w.properties,type:w.type,sourceLayerIndex:M,index:I,geometry:D?$.geometry:sc(w),patterns:{},sortKey:H};x.push(q)}v&&x.sort((w,T)=>w.sortKey-T.sortKey);for(const w of x){const{geometry:T,index:I,sourceLayerIndex:M}=w;if(this.hasPattern){const D=cv("line",this.layers,w,this.zoom,a);this.patternFeatures.push(D)}else this.addFeature(w,T,I,d,{});a.featureIndex.insert(n[I].feature,T,I,M,this.index)}}update(n,a,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,a,this.stateDependentLayers,d)}addFeatures(n,a,d){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,a,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,vA)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,gA),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,a,d,p,v){const x=this.layers[0].layout,w=x.get("line-join").evaluate(n,{}),T=x.get("line-cap"),I=x.get("line-miter-limit"),M=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const D of a)this.addLine(D,n,w,T,I,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,v,p)}addLine(n,a,d,p,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ue=0;ue<n.length-1;ue++)this.totalDistance+=n[ue].dist(n[ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=_A[a.type]==="Polygon";let T=n.length;for(;T>=2&&n[T-1].equals(n[T-2]);)T--;let I=0;for(;I<T-1&&n[I].equals(n[I+1]);)I++;if(T<(w?3:2))return;d==="bevel"&&(v=1.05);const M=this.overscaling<=16?15*on/(512*this.overscaling):0,D=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let $,H,q,X,se;this.e1=this.e2=-1,w&&($=n[T-2],se=n[I].sub($)._unit()._perp());for(let ue=I;ue<T;ue++){if(q=ue===T-1?w?n[I+1]:void 0:n[ue+1],q&&n[ue].equals(q))continue;se&&(X=se),$&&(H=$),$=n[ue],se=q?q.sub($)._unit()._perp():X,X=X||se;let be=X.add(se);be.x===0&&be.y===0||be._unit();const me=X.x*se.x+X.y*se.y,Se=be.x*se.x+be.y*se.y,Te=Se!==0?1/Se:1/0,Be=2*Math.sqrt(2-2*Se),it=Se<xA&&H&&q,ft=X.x*se.y-X.y*se.x>0;if(it&&ue>I){const Xe=$.dist(H);if(Xe>2*M){const ut=$.sub($.sub(H)._mult(M/Xe)._round());this.updateDistance(H,ut),this.addCurrentVertex(ut,X,0,0,D),H=ut}}const rt=H&&q;let tt=rt?d:w?"butt":p;if(rt&&tt==="round"&&(Te<x?tt="miter":Te<=2&&(tt="fakeround")),tt==="miter"&&Te>v&&(tt="bevel"),tt==="bevel"&&(Te>2&&(tt="flipbevel"),Te<v&&(tt="miter")),H&&this.updateDistance(H,$),tt==="miter")be._mult(Te),this.addCurrentVertex($,be,0,0,D);else if(tt==="flipbevel"){if(Te>100)be=se.mult(-1);else{const Xe=Te*X.add(se).mag()/X.sub(se).mag();be._perp()._mult(Xe*(ft?-1:1))}this.addCurrentVertex($,be,0,0,D),this.addCurrentVertex($,be.mult(-1),0,0,D)}else if(tt==="bevel"||tt==="fakeround"){const Xe=-Math.sqrt(Te*Te-1),ut=ft?Xe:0,Je=ft?0:Xe;if(H&&this.addCurrentVertex($,X,ut,Je,D),tt==="fakeround"){const Ve=Math.round(180*Be/Math.PI/20);for(let bt=1;bt<Ve;bt++){let gt=bt/Ve;if(gt!==.5){const Tr=gt-.5;gt+=gt*Tr*(gt-1)*((1.0904+me*(me*(3.55645-1.43519*me)-3.2452))*Tr*Tr+(.848013+me*(.215638*me-1.06021)))}const Nt=se.sub(X)._mult(gt)._add(X)._unit()._mult(ft?-1:1);this.addHalfVertex($,Nt.x,Nt.y,!1,ft,0,D)}}q&&this.addCurrentVertex($,se,-ut,-Je,D)}else if(tt==="butt")this.addCurrentVertex($,be,0,0,D);else if(tt==="square"){const Xe=H?1:-1;this.addCurrentVertex($,be,Xe,Xe,D)}else tt==="round"&&(H&&(this.addCurrentVertex($,X,0,0,D),this.addCurrentVertex($,X,1,1,D,!0)),q&&(this.addCurrentVertex($,se,-1,-1,D,!0),this.addCurrentVertex($,se,0,0,D)));if(it&&ue<T-1){const Xe=$.dist(q);if(Xe>2*M){const ut=$.add(q.sub($)._mult(M/Xe)._round());this.updateDistance($,ut),this.addCurrentVertex(ut,se,0,0,D),$=ut}}}}addCurrentVertex(n,a,d,p,v,x=!1){const w=a.y*p-a.x,T=-a.y-a.x*p;this.addHalfVertex(n,a.x+a.y*d,a.y-a.x*d,x,!1,d,v),this.addHalfVertex(n,w,T,x,!0,-p,v),this.distance>Aw/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,a,d,p,v,x))}addHalfVertex({x:n,y:a},d,p,v,x,w,T){const I=.5*(this.lineClips?this.scaledDistance*(Aw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(a<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*p)+128,1+(w===0?0:w<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const M=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),T.primitiveLength++),x?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,a){this.distance+=n.dist(a),this.updateScaledDistance()}}let Mw,zw;ct("LineBucket",fv,{omit:["layers","patternFeatures"]});var Lw={get paint(){return zw=zw||new Xr({"line-opacity":new kt(Me.paint_line["line-opacity"]),"line-color":new kt(Me.paint_line["line-color"]),"line-translate":new vt(Me.paint_line["line-translate"]),"line-translate-anchor":new vt(Me.paint_line["line-translate-anchor"]),"line-width":new kt(Me.paint_line["line-width"]),"line-gap-width":new kt(Me.paint_line["line-gap-width"]),"line-offset":new kt(Me.paint_line["line-offset"]),"line-blur":new kt(Me.paint_line["line-blur"]),"line-dasharray":new xd(Me.paint_line["line-dasharray"]),"line-pattern":new nc(Me.paint_line["line-pattern"]),"line-gradient":new bd(Me.paint_line["line-gradient"])})},get layout(){return Mw=Mw||new Xr({"line-cap":new vt(Me.layout_line["line-cap"]),"line-join":new kt(Me.layout_line["line-join"]),"line-miter-limit":new vt(Me.layout_line["line-miter-limit"]),"line-round-limit":new vt(Me.layout_line["line-round-limit"]),"line-sort-key":new kt(Me.layout_line["line-sort-key"])})}};class bA extends kt{possiblyEvaluate(n,a){return a=new Cr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(n,a)}evaluate(n,a,d,p){return a=Ce({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(n,a,d,p)}}let xm;class wA extends Ji{constructor(n){super(n,Lw),this.gradientVersion=0,xm||(xm=new bA(Lw.paint.properties["line-width"].specification),xm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(a)&&a._styleExpression.expression instanceof Vs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,a){super.recalculate(n,a),this.paint._values["line-floorwidth"]=xm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new fv(n)}queryRadius(n){const a=n,d=Dw(Pd("line-width",this,a),Pd("line-gap-width",this,a)),p=Pd("line-offset",this,a);return d/2+Math.abs(p)+fm(this.paint.get("line-translate"))}queryIntersectsFeature(n,a,d,p,v,x,w){const T=pm(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,w),I=w/2*Dw(this.paint.get("line-width").evaluate(a,d),this.paint.get("line-gap-width").evaluate(a,d)),M=this.paint.get("line-offset").evaluate(a,d);return M&&(p=function(D,$){const H=[];for(let q=0;q<D.length;q++){const X=D[q],se=[];for(let ue=0;ue<X.length;ue++){const be=X[ue-1],me=X[ue],Se=X[ue+1],Te=ue===0?new O(0,0):me.sub(be)._unit()._perp(),Be=ue===X.length-1?new O(0,0):Se.sub(me)._unit()._perp(),it=Te._add(Be)._unit(),ft=it.x*Be.x+it.y*Be.y;ft!==0&&it._mult(1/ft),se.push(it._mult($)._add(me))}H.push(se)}return H}(p,M*w)),function(D,$,H){for(let q=0;q<$.length;q++){const X=$[q];if(D.length>=3){for(let se=0;se<X.length;se++)if(_u(D,X[se]))return!0}if(PP(D,X,H))return!0}return!1}(T,p,I)}isTileClipped(){return!0}}function Dw(s,n){return n>0?n+2*s:s}const SA=Or([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),CA=Or([{name:"a_projected_pos",components:3,type:"Float32"}],4);Or([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const kA=Or([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Or([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Rw=Or([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),TA=Or([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function EA(s,n,a){return s.sections.forEach(d=>{d.text=function(p,v,x){const w=v.layout.get("text-transform").evaluate(x,{});return w==="uppercase"?p=p.toLocaleUpperCase():w==="lowercase"&&(p=p.toLocaleLowerCase()),Li.applyArabicShaping&&(p=Li.applyArabicShaping(p)),p}(d.text,n,a)}),s}Or([{name:"triangle",components:3,type:"Uint16"}]),Or([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Or([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Or([{type:"Float32",name:"offsetX"}]),Or([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Or([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const $d={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var mn=24,Ow=mr,Bw=function(s,n,a,d,p){var v,x,w=8*p-d-1,T=(1<<w)-1,I=T>>1,M=-7,D=p-1,$=-1,H=s[n+D];for(D+=$,v=H&(1<<-M)-1,H>>=-M,M+=w;M>0;v=256*v+s[n+D],D+=$,M-=8);for(x=v&(1<<-M)-1,v>>=-M,M+=d;M>0;x=256*x+s[n+D],D+=$,M-=8);if(v===0)v=1-I;else{if(v===T)return x?NaN:1/0*(H?-1:1);x+=Math.pow(2,d),v-=I}return(H?-1:1)*x*Math.pow(2,v-d)},$w=function(s,n,a,d,p,v){var x,w,T,I=8*v-p-1,M=(1<<I)-1,D=M>>1,$=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=0,q=1,X=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(w=isNaN(n)?1:0,x=M):(x=Math.floor(Math.log(n)/Math.LN2),n*(T=Math.pow(2,-x))<1&&(x--,T*=2),(n+=x+D>=1?$/T:$*Math.pow(2,1-D))*T>=2&&(x++,T/=2),x+D>=M?(w=0,x=M):x+D>=1?(w=(n*T-1)*Math.pow(2,p),x+=D):(w=n*Math.pow(2,D-1)*Math.pow(2,p),x=0));p>=8;s[a+H]=255&w,H+=q,w/=256,p-=8);for(x=x<<p|w,I+=p;I>0;s[a+H]=255&x,H+=q,x/=256,I-=8);s[a+H-q]|=128*X};function mr(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}mr.Varint=0,mr.Fixed64=1,mr.Bytes=2,mr.Fixed32=5;var pv=4294967296,Fw=1/pv,Nw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Sa(s){return s.type===mr.Bytes?s.readVarint()+s.pos:s.pos+1}function Su(s,n,a){return a?4294967296*n+(s>>>0):4294967296*(n>>>0)+(s>>>0)}function jw(s,n,a){var d=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));a.realloc(d);for(var p=a.pos-1;p>=s;p--)a.buf[p+d]=a.buf[p]}function IA(s,n){for(var a=0;a<s.length;a++)n.writeVarint(s[a])}function PA(s,n){for(var a=0;a<s.length;a++)n.writeSVarint(s[a])}function AA(s,n){for(var a=0;a<s.length;a++)n.writeFloat(s[a])}function MA(s,n){for(var a=0;a<s.length;a++)n.writeDouble(s[a])}function zA(s,n){for(var a=0;a<s.length;a++)n.writeBoolean(s[a])}function LA(s,n){for(var a=0;a<s.length;a++)n.writeFixed32(s[a])}function DA(s,n){for(var a=0;a<s.length;a++)n.writeSFixed32(s[a])}function RA(s,n){for(var a=0;a<s.length;a++)n.writeFixed64(s[a])}function OA(s,n){for(var a=0;a<s.length;a++)n.writeSFixed64(s[a])}function bm(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+16777216*s[n+3]}function Cu(s,n,a){s[a]=n,s[a+1]=n>>>8,s[a+2]=n>>>16,s[a+3]=n>>>24}function Vw(s,n){return(s[n]|s[n+1]<<8|s[n+2]<<16)+(s[n+3]<<24)}mr.prototype={destroy:function(){this.buf=null},readFields:function(s,n,a){for(a=a||this.length;this.pos<a;){var d=this.readVarint(),p=d>>3,v=this.pos;this.type=7&d,s(p,n,this),this.pos===v&&this.skip(d)}return n},readMessage:function(s,n){return this.readFields(s,n,this.readVarint()+this.pos)},readFixed32:function(){var s=bm(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=Vw(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=bm(this.buf,this.pos)+bm(this.buf,this.pos+4)*pv;return this.pos+=8,s},readSFixed64:function(){var s=bm(this.buf,this.pos)+Vw(this.buf,this.pos+4)*pv;return this.pos+=8,s},readFloat:function(){var s=Bw(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=Bw(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var n,a,d=this.buf;return n=127&(a=d[this.pos++]),a<128?n:(n|=(127&(a=d[this.pos++]))<<7,a<128?n:(n|=(127&(a=d[this.pos++]))<<14,a<128?n:(n|=(127&(a=d[this.pos++]))<<21,a<128?n:function(p,v,x){var w,T,I=x.buf;if(w=(112&(T=I[x.pos++]))>>4,T<128||(w|=(127&(T=I[x.pos++]))<<3,T<128)||(w|=(127&(T=I[x.pos++]))<<10,T<128)||(w|=(127&(T=I[x.pos++]))<<17,T<128)||(w|=(127&(T=I[x.pos++]))<<24,T<128)||(w|=(1&(T=I[x.pos++]))<<31,T<128))return Su(p,w,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(a=d[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,n=this.pos;return this.pos=s,s-n>=12&&Nw?function(a,d,p){return Nw.decode(a.subarray(d,p))}(this.buf,n,s):function(a,d,p){for(var v="",x=d;x<p;){var w,T,I,M=a[x],D=null,$=M>239?4:M>223?3:M>191?2:1;if(x+$>p)break;$===1?M<128&&(D=M):$===2?(192&(w=a[x+1]))==128&&(D=(31&M)<<6|63&w)<=127&&(D=null):$===3?(T=a[x+2],(192&(w=a[x+1]))==128&&(192&T)==128&&((D=(15&M)<<12|(63&w)<<6|63&T)<=2047||D>=55296&&D<=57343)&&(D=null)):$===4&&(T=a[x+2],I=a[x+3],(192&(w=a[x+1]))==128&&(192&T)==128&&(192&I)==128&&((D=(15&M)<<18|(63&w)<<12|(63&T)<<6|63&I)<=65535||D>=1114112)&&(D=null)),D===null?(D=65533,$=1):D>65535&&(D-=65536,v+=String.fromCharCode(D>>>10&1023|55296),D=56320|1023&D),v+=String.fromCharCode(D),x+=$}return v}(this.buf,n,s)},readBytes:function(){var s=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,s);return this.pos=s,n},readPackedVarint:function(s,n){if(this.type!==mr.Bytes)return s.push(this.readVarint(n));var a=Sa(this);for(s=s||[];this.pos<a;)s.push(this.readVarint(n));return s},readPackedSVarint:function(s){if(this.type!==mr.Bytes)return s.push(this.readSVarint());var n=Sa(this);for(s=s||[];this.pos<n;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==mr.Bytes)return s.push(this.readBoolean());var n=Sa(this);for(s=s||[];this.pos<n;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==mr.Bytes)return s.push(this.readFloat());var n=Sa(this);for(s=s||[];this.pos<n;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==mr.Bytes)return s.push(this.readDouble());var n=Sa(this);for(s=s||[];this.pos<n;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==mr.Bytes)return s.push(this.readFixed32());var n=Sa(this);for(s=s||[];this.pos<n;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==mr.Bytes)return s.push(this.readSFixed32());var n=Sa(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==mr.Bytes)return s.push(this.readFixed64());var n=Sa(this);for(s=s||[];this.pos<n;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==mr.Bytes)return s.push(this.readSFixed64());var n=Sa(this);for(s=s||[];this.pos<n;)s.push(this.readSFixed64());return s},skip:function(s){var n=7&s;if(n===mr.Varint)for(;this.buf[this.pos++]>127;);else if(n===mr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===mr.Fixed32)this.pos+=4;else{if(n!==mr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(s,n){this.writeVarint(s<<3|n)},realloc:function(s){for(var n=this.length||16;n<this.pos+s;)n*=2;if(n!==this.length){var a=new Uint8Array(n);a.set(this.buf),this.buf=a,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Cu(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Cu(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Cu(this.buf,-1&s,this.pos),Cu(this.buf,Math.floor(s*Fw),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Cu(this.buf,-1&s,this.pos),Cu(this.buf,Math.floor(s*Fw),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(n,a){var d,p;if(n>=0?(d=n%4294967296|0,p=n/4294967296|0):(p=~(-n/4294967296),4294967295^(d=~(-n%4294967296))?d=d+1|0:(d=0,p=p+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(v,x,w){w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,v>>>=7,w.buf[w.pos++]=127&v|128,w.buf[w.pos]=127&(v>>>=7)}(d,0,a),function(v,x){var w=(7&v)<<4;x.buf[x.pos++]|=w|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(p,a)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var n=this.pos;this.pos=function(d,p,v){for(var x,w,T=0;T<p.length;T++){if((x=p.charCodeAt(T))>55295&&x<57344){if(!w){x>56319||T+1===p.length?(d[v++]=239,d[v++]=191,d[v++]=189):w=x;continue}if(x<56320){d[v++]=239,d[v++]=191,d[v++]=189,w=x;continue}x=w-55296<<10|x-56320|65536,w=null}else w&&(d[v++]=239,d[v++]=191,d[v++]=189,w=null);x<128?d[v++]=x:(x<2048?d[v++]=x>>6|192:(x<65536?d[v++]=x>>12|224:(d[v++]=x>>18|240,d[v++]=x>>12&63|128),d[v++]=x>>6&63|128),d[v++]=63&x|128)}return v}(this.buf,s,this.pos);var a=this.pos-n;a>=128&&jw(n,a,this),this.pos=n-1,this.writeVarint(a),this.pos+=a},writeFloat:function(s){this.realloc(4),$w(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),$w(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var n=s.length;this.writeVarint(n),this.realloc(n);for(var a=0;a<n;a++)this.buf[this.pos++]=s[a]},writeRawMessage:function(s,n){this.pos++;var a=this.pos;s(n,this);var d=this.pos-a;d>=128&&jw(a,d,this),this.pos=a-1,this.writeVarint(d),this.pos+=d},writeMessage:function(s,n,a){this.writeTag(s,mr.Bytes),this.writeRawMessage(n,a)},writePackedVarint:function(s,n){n.length&&this.writeMessage(s,IA,n)},writePackedSVarint:function(s,n){n.length&&this.writeMessage(s,PA,n)},writePackedBoolean:function(s,n){n.length&&this.writeMessage(s,zA,n)},writePackedFloat:function(s,n){n.length&&this.writeMessage(s,AA,n)},writePackedDouble:function(s,n){n.length&&this.writeMessage(s,MA,n)},writePackedFixed32:function(s,n){n.length&&this.writeMessage(s,LA,n)},writePackedSFixed32:function(s,n){n.length&&this.writeMessage(s,DA,n)},writePackedFixed64:function(s,n){n.length&&this.writeMessage(s,RA,n)},writePackedSFixed64:function(s,n){n.length&&this.writeMessage(s,OA,n)},writeBytesField:function(s,n){this.writeTag(s,mr.Bytes),this.writeBytes(n)},writeFixed32Field:function(s,n){this.writeTag(s,mr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(s,n){this.writeTag(s,mr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(s,n){this.writeTag(s,mr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(s,n){this.writeTag(s,mr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(s,n){this.writeTag(s,mr.Varint),this.writeVarint(n)},writeSVarintField:function(s,n){this.writeTag(s,mr.Varint),this.writeSVarint(n)},writeStringField:function(s,n){this.writeTag(s,mr.Bytes),this.writeString(n)},writeFloatField:function(s,n){this.writeTag(s,mr.Fixed32),this.writeFloat(n)},writeDoubleField:function(s,n){this.writeTag(s,mr.Fixed64),this.writeDouble(n)},writeBooleanField:function(s,n){this.writeVarintField(s,!!n)}};var mv=k(Ow);const gv=3;function BA(s,n,a){s===1&&a.readMessage($A,n)}function $A(s,n,a){if(s===3){const{id:d,bitmap:p,width:v,height:x,left:w,top:T,advance:I}=a.readMessage(FA,{});n.push({id:d,bitmap:new Md({width:v+2*gv,height:x+2*gv},p),metrics:{width:v,height:x,left:w,top:T,advance:I}})}}function FA(s,n,a){s===1?n.id=a.readVarint():s===2?n.bitmap=a.readBytes():s===3?n.width=a.readVarint():s===4?n.height=a.readVarint():s===5?n.left=a.readSVarint():s===6?n.top=a.readSVarint():s===7&&(n.advance=a.readVarint())}const Uw=gv;function Gw(s){let n=0,a=0;for(const x of s)n+=x.w*x.h,a=Math.max(a,x.w);s.sort((x,w)=>w.h-x.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),a),h:1/0}];let p=0,v=0;for(const x of s)for(let w=d.length-1;w>=0;w--){const T=d[w];if(!(x.w>T.w||x.h>T.h)){if(x.x=T.x,x.y=T.y,v=Math.max(v,x.y+x.h),p=Math.max(p,x.x+x.w),x.w===T.w&&x.h===T.h){const I=d.pop();w<d.length&&(d[w]=I)}else x.h===T.h?(T.x+=x.w,T.w-=x.w):x.w===T.w?(T.y+=x.h,T.h-=x.h):(d.push({x:T.x+x.w,y:T.y,w:T.w-x.w,h:x.h}),T.y+=x.h,T.h-=x.h);break}}return{w:p,h:v,fill:n/(p*v)||0}}const Ri=1;class yv{constructor(n,{pixelRatio:a,version:d,stretchX:p,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=a,this.stretchX=p,this.stretchY=v,this.content=x,this.version=d}get tl(){return[this.paddedRect.x+Ri,this.paddedRect.y+Ri]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ri,this.paddedRect.y+this.paddedRect.h-Ri]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ri)/this.pixelRatio,(this.paddedRect.h-2*Ri)/this.pixelRatio]}}class Hw{constructor(n,a){const d={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,d,v),this.addImages(a,p,v);const{w:x,h:w}=Gw(v),T=new ho({width:x||1,height:w||1});for(const I in n){const M=n[I],D=d[I].paddedRect;ho.copy(M.data,T,{x:0,y:0},{x:D.x+Ri,y:D.y+Ri},M.data)}for(const I in a){const M=a[I],D=p[I].paddedRect,$=D.x+Ri,H=D.y+Ri,q=M.data.width,X=M.data.height;ho.copy(M.data,T,{x:0,y:0},{x:$,y:H},M.data),ho.copy(M.data,T,{x:0,y:X-1},{x:$,y:H-1},{width:q,height:1}),ho.copy(M.data,T,{x:0,y:0},{x:$,y:H+X},{width:q,height:1}),ho.copy(M.data,T,{x:q-1,y:0},{x:$-1,y:H},{width:1,height:X}),ho.copy(M.data,T,{x:0,y:0},{x:$+q,y:H},{width:1,height:X})}this.image=T,this.iconPositions=d,this.patternPositions=p}addImages(n,a,d){for(const p in n){const v=n[p],x={x:0,y:0,w:v.data.width+2*Ri,h:v.data.height+2*Ri};d.push(x),a[p]=new yv(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(n,a){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in n.updatedImages)this.patchUpdatedImage(this.iconPositions[d],n.getImage(d),a),this.patchUpdatedImage(this.patternPositions[d],n.getImage(d),a)}patchUpdatedImage(n,a,d){if(!n||!a||n.version===a.version)return;n.version=a.version;const[p,v]=n.tl;d.update(a.data,void 0,{x:p,y:v})}}var hl;ct("ImagePosition",yv),ct("ImageAtlas",Hw),c.ai=void 0,(hl=c.ai||(c.ai={}))[hl.none=0]="none",hl[hl.horizontal=1]="horizontal",hl[hl.vertical=2]="vertical",hl[hl.horizontalOnly=3]="horizontalOnly";const Fd=-17;class Nd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,a){const d=new Nd;return d.scale=n||1,d.fontStack=a,d}static forImage(n){const a=new Nd;return a.imageName=n,a}}class ku{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,a){const d=new ku;for(let p=0;p<n.sections.length;p++){const v=n.sections[p];v.image?d.addImageSection(v):d.addTextSection(v,a)}return d}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let a="";for(let d=0;d<n.length;d++){const p=n.charCodeAt(d+1)||null,v=n.charCodeAt(d-1)||null;a+=p&&rm(p)&&!$d[n[d+1]]||v&&rm(v)&&!$d[n[d-1]]||!$d[n[d]]?n[d]:$d[n[d]]}return a}(this.text)}trim(){let n=0;for(let d=0;d<this.text.length&&Sm[this.text.charCodeAt(d)];d++)n++;let a=this.text.length;for(let d=this.text.length-1;d>=0&&d>=n&&Sm[this.text.charCodeAt(d)];d--)a--;this.text=this.text.substring(n,a),this.sectionIndex=this.sectionIndex.slice(n,a)}substring(n,a){const d=new ku;return d.text=this.text.substring(n,a),d.sectionIndex=this.sectionIndex.slice(n,a),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,a)=>Math.max(n,this.sections[a].scale),0)}addTextSection(n,a){this.text+=n.text,this.sections.push(Nd.forText(n.scale,n.fontStack||a));const d=this.sections.length-1;for(let p=0;p<n.text.length;++p)this.sectionIndex.push(d)}addImageSection(n){const a=n.image?n.image.name:"";if(a.length===0)return void Ze("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Nd.forImage(a)),this.sectionIndex.push(this.sections.length-1)):Ze("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function wm(s,n,a,d,p,v,x,w,T,I,M,D,$,H,q,X){const se=ku.fromFeature(s,p);let ue;D===c.ai.vertical&&se.verticalizePunctuation();const{processBidirectionalText:be,processStyledBidirectionalText:me}=Li;if(be&&se.sections.length===1){ue=[];const Be=be(se.toString(),vv(se,I,v,n,d,H,q));for(const it of Be){const ft=new ku;ft.text=it,ft.sections=se.sections;for(let rt=0;rt<it.length;rt++)ft.sectionIndex.push(0);ue.push(ft)}}else if(me){ue=[];const Be=me(se.text,se.sectionIndex,vv(se,I,v,n,d,H,q));for(const it of Be){const ft=new ku;ft.text=it[0],ft.sectionIndex=it[1],ft.sections=se.sections,ue.push(ft)}}else ue=function(Be,it){const ft=[],rt=Be.text;let tt=0;for(const Xe of it)ft.push(Be.substring(tt,Xe)),tt=Xe;return tt<rt.length&&ft.push(Be.substring(tt,rt.length)),ft}(se,vv(se,I,v,n,d,H,q));const Se=[],Te={positionedLines:Se,text:se.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:D,iconsInText:!1,verticalizable:!1};return function(Be,it,ft,rt,tt,Xe,ut,Je,Ve,bt,gt,Nt){let Tr=0,Pr=Fd,gn=0,eo=0;const mi=Je==="right"?1:Je==="left"?0:.5;let sn=0;for(const yn of tt){yn.trim();const vn=yn.getMaxScale(),ti=(vn-1)*mn,vi={positionedGlyphs:[],lineOffset:0};Be.positionedLines[sn]=vi;const ri=vi.positionedGlyphs;let Oi=0;if(!yn.length()){Pr+=Xe,++sn;continue}for(let _n=0;_n<yn.length();_n++){const qt=yn.getSection(_n),ni=yn.getSectionIndex(_n),Un=yn.getCharCode(_n);let xn=0,Vo=null,gs=null,ys=null,Ca=mn;const Uo=!(Ve===c.ai.horizontal||!gt&&!dd(Un)||gt&&(Sm[Un]||(Ln=Un,nt.Arabic(Ln)||nt["Arabic Supplement"](Ln)||nt["Arabic Extended-A"](Ln)||nt["Arabic Presentation Forms-A"](Ln)||nt["Arabic Presentation Forms-B"](Ln))));if(qt.imageName){const po=rt[qt.imageName];if(!po)continue;ys=qt.imageName,Be.iconsInText=Be.iconsInText||!0,gs=po.paddedRect;const $i=po.displaySize;qt.scale=qt.scale*mn/Nt,Vo={width:$i[0],height:$i[1],left:Ri,top:-Uw,advance:Uo?$i[1]:$i[0]},xn=ti+(mn-$i[1]*qt.scale),Ca=Vo.advance;const ka=Uo?$i[0]*qt.scale-mn*vn:$i[1]*qt.scale-mn*vn;ka>0&&ka>Oi&&(Oi=ka)}else{const po=ft[qt.fontStack],$i=po&&po[Un];if($i&&$i.rect)gs=$i.rect,Vo=$i.metrics;else{const ka=it[qt.fontStack],Hd=ka&&ka[Un];if(!Hd)continue;Vo=Hd.metrics}xn=(vn-qt.scale)*mn}Uo?(Be.verticalizable=!0,ri.push({glyph:Un,imageName:ys,x:Tr,y:Pr+xn,vertical:Uo,scale:qt.scale,fontStack:qt.fontStack,sectionIndex:ni,metrics:Vo,rect:gs}),Tr+=Ca*qt.scale+bt):(ri.push({glyph:Un,imageName:ys,x:Tr,y:Pr+xn,vertical:Uo,scale:qt.scale,fontStack:qt.fontStack,sectionIndex:ni,metrics:Vo,rect:gs}),Tr+=Vo.advance*qt.scale+bt)}ri.length!==0&&(gn=Math.max(Tr-bt,gn),VA(ri,0,ri.length-1,mi,Oi)),Tr=0;const Bi=Xe*vn+Oi;vi.lineOffset=Math.max(Oi,ti),Pr+=Bi,eo=Math.max(Bi,eo),++sn}var Ln;const Vn=Pr-Fd,{horizontalAlign:gi,verticalAlign:yi}=_v(ut);(function(yn,vn,ti,vi,ri,Oi,Bi,_n,qt){const ni=(vn-ti)*ri;let Un=0;Un=Oi!==Bi?-_n*vi-Fd:(-vi*qt+.5)*Bi;for(const xn of yn)for(const Vo of xn.positionedGlyphs)Vo.x+=ni,Vo.y+=Un})(Be.positionedLines,mi,gi,yi,gn,eo,Xe,Vn,tt.length),Be.top+=-yi*Vn,Be.bottom=Be.top+Vn,Be.left+=-gi*gn,Be.right=Be.left+gn}(Te,n,a,d,ue,x,w,T,D,I,$,X),!function(Be){for(const it of Be)if(it.positionedGlyphs.length!==0)return!1;return!0}(Se)&&Te}const Sm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},NA={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function qw(s,n,a,d,p,v){if(n.imageName){const x=d[n.imageName];return x?x.displaySize[0]*n.scale*mn/v+p:0}{const x=a[n.fontStack],w=x&&x[s];return w?w.metrics.advance*n.scale+p:0}}function Ww(s,n,a,d){const p=Math.pow(s-n,2);return d?s<n?p/2:2*p:p+Math.abs(a)*a}function jA(s,n,a){let d=0;return s===10&&(d-=1e4),a&&(d+=150),s!==40&&s!==65288||(d+=50),n!==41&&n!==65289||(d+=50),d}function Zw(s,n,a,d,p,v){let x=null,w=Ww(n,a,p,v);for(const T of d){const I=Ww(n-T.x,a,p,v)+T.badness;I<=w&&(x=T,w=I)}return{index:s,x:n,priorBreak:x,badness:w}}function Kw(s){return s?Kw(s.priorBreak).concat(s.index):[]}function vv(s,n,a,d,p,v,x){if(v!=="point")return[];if(!s)return[];const w=[],T=function($,H,q,X,se,ue){let be=0;for(let me=0;me<$.length();me++){const Se=$.getSection(me);be+=qw($.getCharCode(me),Se,X,se,H,ue)}return be/Math.max(1,Math.ceil(be/q))}(s,n,a,d,p,x),I=s.text.indexOf("​")>=0;let M=0;for(let $=0;$<s.length();$++){const H=s.getSection($),q=s.getCharCode($);if(Sm[q]||(M+=qw(q,H,d,p,n,x)),$<s.length()-1){const X=!((D=q)<11904||!(nt["Bopomofo Extended"](D)||nt.Bopomofo(D)||nt["CJK Compatibility Forms"](D)||nt["CJK Compatibility Ideographs"](D)||nt["CJK Compatibility"](D)||nt["CJK Radicals Supplement"](D)||nt["CJK Strokes"](D)||nt["CJK Symbols and Punctuation"](D)||nt["CJK Unified Ideographs Extension A"](D)||nt["CJK Unified Ideographs"](D)||nt["Enclosed CJK Letters and Months"](D)||nt["Halfwidth and Fullwidth Forms"](D)||nt.Hiragana(D)||nt["Ideographic Description Characters"](D)||nt["Kangxi Radicals"](D)||nt["Katakana Phonetic Extensions"](D)||nt.Katakana(D)||nt["Vertical Forms"](D)||nt["Yi Radicals"](D)||nt["Yi Syllables"](D)));(NA[q]||X||H.imageName)&&w.push(Zw($+1,M,T,w,jA(q,s.getCharCode($+1),X&&I),!1))}}var D;return Kw(Zw(s.length(),M,T,w,0,!0))}function _v(s){let n=.5,a=.5;switch(s){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:n,verticalAlign:a}}function VA(s,n,a,d,p){if(!d&&!p)return;const v=s[a],x=(s[a].x+v.metrics.advance*v.scale)*d;for(let w=n;w<=a;w++)s[w].x-=x,s[w].y+=p}function UA(s,n,a){const{horizontalAlign:d,verticalAlign:p}=_v(a),v=n[0]-s.displaySize[0]*d,x=n[1]-s.displaySize[1]*p;return{image:s,top:x,bottom:x+s.displaySize[1],left:v,right:v+s.displaySize[0]}}function Xw(s,n,a,d,p,v){const x=s.image;let w;if(x.content){const se=x.content,ue=x.pixelRatio||1;w=[se[0]/ue,se[1]/ue,x.displaySize[0]-se[2]/ue,x.displaySize[1]-se[3]/ue]}const T=n.left*v,I=n.right*v;let M,D,$,H;a==="width"||a==="both"?(H=p[0]+T-d[3],D=p[0]+I+d[1]):(H=p[0]+(T+I-x.displaySize[0])/2,D=H+x.displaySize[0]);const q=n.top*v,X=n.bottom*v;return a==="height"||a==="both"?(M=p[1]+q-d[0],$=p[1]+X+d[2]):(M=p[1]+(q+X-x.displaySize[1])/2,$=M+x.displaySize[1]),{image:x,top:M,right:D,bottom:$,left:H,collisionPadding:w}}const jd=255,Ws=128,dl=jd*Ws;function Yw(s,n){const{expression:a}=n;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new Cr(s+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:p}=a;let v=0;for(;v<d.length&&d[v]<=s;)v++;v=Math.max(0,v-1);let x=v;for(;x<d.length&&d[x]<s+1;)x++;x=Math.min(d.length-1,x);const w=d[v],T=d[x];return a.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:T,interpolationType:p}:{kind:"camera",minZoom:w,maxZoom:T,minSize:a.evaluate(new Cr(w)),maxSize:a.evaluate(new Cr(T)),interpolationType:p}}}function xv(s,n,a){let d="never";const p=s.get(n);return p?d=p:s.get(a)&&(d="always"),d}const GA=ul.VectorTileFeature.types,HA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Cm(s,n,a,d,p,v,x,w,T,I,M,D,$){const H=w?Math.min(dl,Math.round(w[0])):0,q=w?Math.min(dl,Math.round(w[1])):0;s.emplaceBack(n,a,Math.round(32*d),Math.round(32*p),v,x,(H<<1)+(T?1:0),q,16*I,16*M,256*D,256*$)}function bv(s,n,a){s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a),s.emplaceBack(n.x,n.y,a)}function qA(s){for(const n of s.sections)if(W0(n.text))return!0;return!1}class wv{constructor(n){this.layoutVertexArray=new Vt,this.indexArray=new Mn,this.programConfigurations=n,this.segments=new kr,this.dynamicLayoutVertexArray=new $t,this.opacityVertexArray=new Ht,this.hasVisibleVertices=!1,this.placedSymbolArray=new ve}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,a,d,p){this.isEmpty()||(d&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,SA.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,CA.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,HA,!0),this.opacityVertexBuffer.itemSize=1),(d||p)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ct("SymbolBuffers",wv);class Sv{constructor(n,a,d){this.layoutVertexArray=new n,this.layoutAttributes=a,this.indexArray=new d,this.segments=new kr,this.collisionVertexArray=new br}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,kA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ct("CollisionBuffers",Sv);class Tu{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ev([]),this.placementViewportMatrix=ev([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Yw(this.zoom,a["text-size"]),this.iconSizeData=Yw(this.zoom,a["icon-size"]);const d=this.layers[0].layout,p=d.get("symbol-sort-key"),v=d.get("symbol-z-order");this.canOverlap=xv(d,"text-overlap","text-allow-overlap")!=="never"||xv(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(x=>c.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new wv(new ms(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new wv(new ms(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new _e,this.lineVertexArray=new Ee,this.symbolInstances=new le,this.textAnchorOffsets=new De}calculateGlyphDependencies(n,a,d,p,v){for(let x=0;x<n.length;x++)if(a[n.charCodeAt(x)]=!0,(d||p)&&v){const w=$d[n.charAt(x)];w&&(a[w.charCodeAt(0)]=!0)}}populate(n,a,d){const p=this.layers[0],v=p.layout,x=v.get("text-font"),w=v.get("text-field"),T=v.get("icon-image"),I=(w.value.kind!=="constant"||w.value.value instanceof Fn&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),M=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,D=v.get("symbol-sort-key");if(this.features=[],!I&&!M)return;const $=a.iconDependencies,H=a.glyphDependencies,q=a.availableImages,X=new Cr(this.zoom);for(const{feature:se,id:ue,index:be,sourceLayerIndex:me}of n){const Se=p._featureFilter.needGeometry,Te=ac(se,Se);if(!p._featureFilter.filter(X,Te,d))continue;let Be,it;if(Se||(Te.geometry=sc(se)),I){const rt=p.getValueAndResolveTokens("text-field",Te,d,q),tt=Fn.factory(rt);qA(tt)&&(this.hasRTLText=!0),(!this.hasRTLText||vd()==="unavailable"||this.hasRTLText&&Li.isParsed())&&(Be=EA(tt,p,Te))}if(M){const rt=p.getValueAndResolveTokens("icon-image",Te,d,q);it=rt instanceof An?rt:An.fromString(rt)}if(!Be&&!it)continue;const ft=this.sortFeaturesByKey?D.evaluate(Te,{},d):void 0;if(this.features.push({id:ue,text:Be,icon:it,index:be,sourceLayerIndex:me,geometry:Te.geometry,properties:se.properties,type:GA[se.type],sortKey:ft}),it&&($[it.name]=!0),Be){const rt=x.evaluate(Te,{},d).join(","),tt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ai.vertical)>=0;for(const Xe of Be.sections)if(Xe.image)$[Xe.image.name]=!0;else{const ut=ud(Be.toString()),Je=Xe.fontStack||rt,Ve=H[Je]=H[Je]||{};this.calculateGlyphDependencies(Xe.text,Ve,tt,this.allowVerticalPlacement,ut)}}}v.get("symbol-placement")==="line"&&(this.features=function(se){const ue={},be={},me=[];let Se=0;function Te(rt){me.push(se[rt]),Se++}function Be(rt,tt,Xe){const ut=be[rt];return delete be[rt],be[tt]=ut,me[ut].geometry[0].pop(),me[ut].geometry[0]=me[ut].geometry[0].concat(Xe[0]),ut}function it(rt,tt,Xe){const ut=ue[tt];return delete ue[tt],ue[rt]=ut,me[ut].geometry[0].shift(),me[ut].geometry[0]=Xe[0].concat(me[ut].geometry[0]),ut}function ft(rt,tt,Xe){const ut=Xe?tt[0][tt[0].length-1]:tt[0][0];return`${rt}:${ut.x}:${ut.y}`}for(let rt=0;rt<se.length;rt++){const tt=se[rt],Xe=tt.geometry,ut=tt.text?tt.text.toString():null;if(!ut){Te(rt);continue}const Je=ft(ut,Xe),Ve=ft(ut,Xe,!0);if(Je in be&&Ve in ue&&be[Je]!==ue[Ve]){const bt=it(Je,Ve,Xe),gt=Be(Je,Ve,me[bt].geometry);delete ue[Je],delete be[Ve],be[ft(ut,me[gt].geometry,!0)]=gt,me[bt].geometry=null}else Je in be?Be(Je,Ve,Xe):Ve in ue?it(Je,Ve,Xe):(Te(rt),ue[Je]=Se-1,be[Ve]=Se-1)}return me.filter(rt=>rt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((se,ue)=>se.sortKey-ue.sortKey)}update(n,a,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,a,this.layers,d),this.icon.programConfigurations.updatePaintArrays(n,a,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,a){const d=this.lineVertexArray.length;if(n.segment!==void 0){let p=n.dist(a[n.segment+1]),v=n.dist(a[n.segment]);const x={};for(let w=n.segment+1;w<a.length;w++)x[w]={x:a[w].x,y:a[w].y,tileUnitDistanceFromAnchor:p},w<a.length-1&&(p+=a[w+1].dist(a[w]));for(let w=n.segment||0;w>=0;w--)x[w]={x:a[w].x,y:a[w].y,tileUnitDistanceFromAnchor:v},w>0&&(v+=a[w-1].dist(a[w]));for(let w=0;w<a.length;w++){const T=x[w];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(n,a,d,p,v,x,w,T,I,M,D,$){const H=n.indexArray,q=n.layoutVertexArray,X=n.segments.prepareSegment(4*a.length,q,H,this.canOverlap?x.sortKey:void 0),se=this.glyphOffsetArray.length,ue=X.vertexLength,be=this.allowVerticalPlacement&&w===c.ai.vertical?Math.PI/2:0,me=x.text&&x.text.sections;for(let Se=0;Se<a.length;Se++){const{tl:Te,tr:Be,bl:it,br:ft,tex:rt,pixelOffsetTL:tt,pixelOffsetBR:Xe,minFontScaleX:ut,minFontScaleY:Je,glyphOffset:Ve,isSDF:bt,sectionIndex:gt}=a[Se],Nt=X.vertexLength,Tr=Ve[1];Cm(q,T.x,T.y,Te.x,Tr+Te.y,rt.x,rt.y,d,bt,tt.x,tt.y,ut,Je),Cm(q,T.x,T.y,Be.x,Tr+Be.y,rt.x+rt.w,rt.y,d,bt,Xe.x,tt.y,ut,Je),Cm(q,T.x,T.y,it.x,Tr+it.y,rt.x,rt.y+rt.h,d,bt,tt.x,Xe.y,ut,Je),Cm(q,T.x,T.y,ft.x,Tr+ft.y,rt.x+rt.w,rt.y+rt.h,d,bt,Xe.x,Xe.y,ut,Je),bv(n.dynamicLayoutVertexArray,T,be),H.emplaceBack(Nt,Nt+1,Nt+2),H.emplaceBack(Nt+1,Nt+2,Nt+3),X.vertexLength+=4,X.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ve[0]),Se!==a.length-1&&gt===a[Se+1].sectionIndex||n.programConfigurations.populatePaintArrays(q.length,x,x.index,{},$,me&&me[gt])}n.placedSymbolArray.emplaceBack(T.x,T.y,se,this.glyphOffsetArray.length-se,ue,I,M,T.segment,d?d[0]:0,d?d[1]:0,p[0],p[1],w,0,!1,0,D)}_addCollisionDebugVertex(n,a,d,p,v,x){return a.emplaceBack(0,0),n.emplaceBack(d.x,d.y,p,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,a,d,p,v,x,w){const T=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),I=T.vertexLength,M=v.layoutVertexArray,D=v.collisionVertexArray,$=w.anchorX,H=w.anchorY;this._addCollisionDebugVertex(M,D,x,$,H,new O(n,a)),this._addCollisionDebugVertex(M,D,x,$,H,new O(d,a)),this._addCollisionDebugVertex(M,D,x,$,H,new O(d,p)),this._addCollisionDebugVertex(M,D,x,$,H,new O(n,p)),T.vertexLength+=4;const q=v.indexArray;q.emplaceBack(I,I+1),q.emplaceBack(I+1,I+2),q.emplaceBack(I+2,I+3),q.emplaceBack(I+3,I),T.primitiveLength+=4}addDebugCollisionBoxes(n,a,d,p){for(let v=n;v<a;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,p?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Sv(Gr,Rw.members,fn),this.iconCollisionBox=new Sv(Gr,Rw.members,fn);for(let n=0;n<this.symbolInstances.length;n++){const a=this.symbolInstances.get(n);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(n,a,d,p,v,x,w,T,I){const M={};for(let D=a;D<d;D++){const $=n.get(D);M.textBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},M.textFeatureIndex=$.featureIndex;break}for(let D=p;D<v;D++){const $=n.get(D);M.verticalTextBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},M.verticalTextFeatureIndex=$.featureIndex;break}for(let D=x;D<w;D++){const $=n.get(D);M.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},M.iconFeatureIndex=$.featureIndex;break}for(let D=T;D<I;D++){const $=n.get(D);M.verticalIconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},M.verticalIconFeatureIndex=$.featureIndex;break}return M}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const d=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,a){const d=n.placedSymbolArray.get(a),p=d.vertexStartIndex+4*d.numGlyphs;for(let v=d.vertexStartIndex;v<p;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(n),d=Math.cos(n),p=[],v=[],x=[];for(let w=0;w<this.symbolInstances.length;++w){x.push(w);const T=this.symbolInstances.get(w);p.push(0|Math.round(a*T.anchorX+d*T.anchorY)),v.push(T.featureIndex)}return x.sort((w,T)=>p[w]-p[T]||v[T]-v[w]),x}addToSortKeyRanges(n,a){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===a?d.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const d=this.symbolInstances.get(a);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((p,v,x)=>{p>=0&&x.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Jw,Qw;ct("SymbolBucket",Tu,{omit:["layers","collisionBoxArray","features","compareText"]}),Tu.MAX_GLYPHS=65535,Tu.addDynamicAttributes=bv;var Cv={get paint(){return Qw=Qw||new Xr({"icon-opacity":new kt(Me.paint_symbol["icon-opacity"]),"icon-color":new kt(Me.paint_symbol["icon-color"]),"icon-halo-color":new kt(Me.paint_symbol["icon-halo-color"]),"icon-halo-width":new kt(Me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new kt(Me.paint_symbol["icon-halo-blur"]),"icon-translate":new vt(Me.paint_symbol["icon-translate"]),"icon-translate-anchor":new vt(Me.paint_symbol["icon-translate-anchor"]),"text-opacity":new kt(Me.paint_symbol["text-opacity"]),"text-color":new kt(Me.paint_symbol["text-color"],{runtimeType:Jn,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new kt(Me.paint_symbol["text-halo-color"]),"text-halo-width":new kt(Me.paint_symbol["text-halo-width"]),"text-halo-blur":new kt(Me.paint_symbol["text-halo-blur"]),"text-translate":new vt(Me.paint_symbol["text-translate"]),"text-translate-anchor":new vt(Me.paint_symbol["text-translate-anchor"])})},get layout(){return Jw=Jw||new Xr({"symbol-placement":new vt(Me.layout_symbol["symbol-placement"]),"symbol-spacing":new vt(Me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new vt(Me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new kt(Me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new vt(Me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new vt(Me.layout_symbol["icon-allow-overlap"]),"icon-overlap":new vt(Me.layout_symbol["icon-overlap"]),"icon-ignore-placement":new vt(Me.layout_symbol["icon-ignore-placement"]),"icon-optional":new vt(Me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new vt(Me.layout_symbol["icon-rotation-alignment"]),"icon-size":new kt(Me.layout_symbol["icon-size"]),"icon-text-fit":new vt(Me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new vt(Me.layout_symbol["icon-text-fit-padding"]),"icon-image":new kt(Me.layout_symbol["icon-image"]),"icon-rotate":new kt(Me.layout_symbol["icon-rotate"]),"icon-padding":new kt(Me.layout_symbol["icon-padding"]),"icon-keep-upright":new vt(Me.layout_symbol["icon-keep-upright"]),"icon-offset":new kt(Me.layout_symbol["icon-offset"]),"icon-anchor":new kt(Me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new vt(Me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new vt(Me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new vt(Me.layout_symbol["text-rotation-alignment"]),"text-field":new kt(Me.layout_symbol["text-field"]),"text-font":new kt(Me.layout_symbol["text-font"]),"text-size":new kt(Me.layout_symbol["text-size"]),"text-max-width":new kt(Me.layout_symbol["text-max-width"]),"text-line-height":new vt(Me.layout_symbol["text-line-height"]),"text-letter-spacing":new kt(Me.layout_symbol["text-letter-spacing"]),"text-justify":new kt(Me.layout_symbol["text-justify"]),"text-radial-offset":new kt(Me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new vt(Me.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new kt(Me.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new kt(Me.layout_symbol["text-anchor"]),"text-max-angle":new vt(Me.layout_symbol["text-max-angle"]),"text-writing-mode":new vt(Me.layout_symbol["text-writing-mode"]),"text-rotate":new kt(Me.layout_symbol["text-rotate"]),"text-padding":new vt(Me.layout_symbol["text-padding"]),"text-keep-upright":new vt(Me.layout_symbol["text-keep-upright"]),"text-transform":new kt(Me.layout_symbol["text-transform"]),"text-offset":new kt(Me.layout_symbol["text-offset"]),"text-allow-overlap":new vt(Me.layout_symbol["text-allow-overlap"]),"text-overlap":new vt(Me.layout_symbol["text-overlap"]),"text-ignore-placement":new vt(Me.layout_symbol["text-ignore-placement"]),"text-optional":new vt(Me.layout_symbol["text-optional"])})}};class e2{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:ls,this.defaultValue=n}evaluate(n){if(n.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(n.formattedSection))return a.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ct("FormatSectionOverride",e2,{omit:["defaultValue"]});class km extends Ji{constructor(n){super(n,Cv)}recalculate(n,a){if(super.recalculate(n,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const p=[];for(const v of d)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,a,d,p){const v=this.layout.get(n).evaluate(a,{},d,p),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||su(x.value)||!v?v:function(w,T){return T.replace(/{([^{}]+)}/g,(I,M)=>w&&M in w?String(w[M]):"")}(a.properties,v)}createBucket(n){return new Tu(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of Cv.paint.overridableProperties){if(!km.hasPaintOverride(this.layout,n))continue;const a=this.paint.get(n),d=new e2(a),p=new id(d,a.property.specification);let v=null;v=a.value.kind==="constant"||a.value.kind==="source"?new od("source",p):new lu("composite",p,a.value.zoomStops),this.paint._values[n]=new Qn(a.property,v,a.parameters)}}_handleOverridablePaintPropertyUpdate(n,a,d){return!(!this.layout||a.isDataDriven()||d.isDataDriven())&&km.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,a){const d=n.get("text-field"),p=Cv.paint.properties[a];let v=!1;const x=w=>{for(const T of w)if(p.overrides&&p.overrides.hasOverride(T))return void(v=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Fn)x(d.value.value.sections);else if(d.value.kind==="source"){const w=I=>{v||(I instanceof ha&&Lr(I.value)===re?x(I.value.sections):I instanceof ou?x(I.sections):I.eachChild(w))},T=d.value;T._styleExpression&&w(T._styleExpression.expression)}return v}}let t2;var WA={get paint(){return t2=t2||new Xr({"background-color":new vt(Me.paint_background["background-color"]),"background-pattern":new xd(Me.paint_background["background-pattern"]),"background-opacity":new vt(Me.paint_background["background-opacity"])})}};class ZA extends Ji{constructor(n){super(n,WA)}}let r2;var KA={get paint(){return r2=r2||new Xr({"raster-opacity":new vt(Me.paint_raster["raster-opacity"]),"raster-hue-rotate":new vt(Me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new vt(Me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new vt(Me.paint_raster["raster-brightness-max"]),"raster-saturation":new vt(Me.paint_raster["raster-saturation"]),"raster-contrast":new vt(Me.paint_raster["raster-contrast"]),"raster-resampling":new vt(Me.paint_raster["raster-resampling"]),"raster-fade-duration":new vt(Me.paint_raster["raster-fade-duration"])})}};class XA extends Ji{constructor(n){super(n,KA)}}class YA extends Ji{constructor(n){super(n,{}),this.onAdd=a=>{this.implementation.onAdd&&this.implementation.onAdd(a,a.painter.context.gl)},this.onRemove=a=>{this.implementation.onRemove&&this.implementation.onRemove(a,a.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class JA{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const kv=63710088e-1;class fl{constructor(n,a){if(isNaN(n)||isNaN(a))throw new Error(`Invalid LngLat object: (${n}, ${a})`);if(this.lng=+n,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new fl(ce(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const a=Math.PI/180,d=this.lat*a,p=n.lat*a,v=Math.sin(d)*Math.sin(p)+Math.cos(d)*Math.cos(p)*Math.cos((n.lng-this.lng)*a);return kv*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof fl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new fl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new fl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const n2=2*Math.PI*kv;function i2(s){return n2*Math.cos(s*Math.PI/180)}function o2(s){return(180+s)/360}function s2(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function a2(s,n){return s/i2(n)}function l2(s){return 360*s-180}function Tv(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class Tm{constructor(n,a,d=0){this.x=+n,this.y=+a,this.z=+d}static fromLngLat(n,a=0){const d=fl.convert(n);return new Tm(o2(d.lng),s2(d.lat),a2(a,d.lat))}toLngLat(){return new fl(l2(this.x),Tv(this.y))}toAltitude(){return this.z*i2(Tv(this.y))}meterInMercatorCoordinateUnits(){return 1/n2*(n=Tv(this.y),1/Math.cos(n*Math.PI/180));var n}}function c2(s,n,a){var d=2*Math.PI*6378137/256/Math.pow(2,a);return[s*d-2*Math.PI*6378137/2,n*d-2*Math.PI*6378137/2]}class Ev{constructor(n,a,d){if(n<0||n>25||d<0||d>=Math.pow(2,n)||a<0||a>=Math.pow(2,n))throw new Error(`x=${a}, y=${d}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=a,this.y=d,this.key=Vd(0,n,n,a,d)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,a,d){const p=(x=this.y,w=this.z,T=c2(256*(v=this.x),256*(x=Math.pow(2,w)-x-1),w),I=c2(256*(v+1),256*(x+1),w),T[0]+","+T[1]+","+I[0]+","+I[1]);var v,x,w,T,I;const M=function(D,$,H){let q,X="";for(let se=D;se>0;se--)q=1<<se-1,X+=($&q?1:0)+(H&q?2:0);return X}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,p)}isChildOf(n){const a=this.z-n.z;return a>0&&n.x===this.x>>a&&n.y===this.y>>a}getTilePoint(n){const a=Math.pow(2,this.z);return new O((n.x*a-this.x)*on,(n.y*a-this.y)*on)}toString(){return`${this.z}/${this.x}/${this.y}`}}class u2{constructor(n,a){this.wrap=n,this.canonical=a,this.key=Vd(n,a.z,a.z,a.x,a.y)}}class fo{constructor(n,a,d,p,v){if(n<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${d}`);this.overscaledZ=n,this.wrap=a,this.canonical=new Ev(d,+p,+v),this.key=Vd(a,n,d,p,v)}clone(){return new fo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-n;return n>this.canonical.z?new fo(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fo(n,this.wrap,n,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(n,a){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-n;return n>this.canonical.z?Vd(this.wrap*+a,n,this.canonical.z,this.canonical.x,this.canonical.y):Vd(this.wrap*+a,n,n,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const a=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>a&&n.canonical.y===this.canonical.y>>a}children(n){if(this.overscaledZ>=n)return[new fo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,d=2*this.canonical.x,p=2*this.canonical.y;return[new fo(a,this.wrap,a,d,p),new fo(a,this.wrap,a,d+1,p),new fo(a,this.wrap,a,d,p+1),new fo(a,this.wrap,a,d+1,p+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new fo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new fo(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new u2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Tm(n.x-this.wrap,n.y))}}function Vd(s,n,a,d,p){(s*=2)<0&&(s=-1*s-1);const v=1<<a;return(v*v*s+v*p+d).toString(36)+a.toString(36)+n.toString(36)}ct("CanonicalTileID",Ev),ct("OverscaledTileID",fo,{omit:["posMatrix"]});class h2{constructor(n,a,d,p=1,v=1,x=1,w=0){if(this.uid=n,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Ze(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const T=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=v,this.blueFactor=x,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let I=0;I<T;I++)this.data[this._idx(-1,I)]=this.data[this._idx(0,I)],this.data[this._idx(T,I)]=this.data[this._idx(T-1,I)],this.data[this._idx(I,-1)]=this.data[this._idx(I,0)],this.data[this._idx(I,T)]=this.data[this._idx(I,T-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(T,-1)]=this.data[this._idx(T-1,0)],this.data[this._idx(-1,T)]=this.data[this._idx(0,T-1)],this.data[this._idx(T,T)]=this.data[this._idx(T-1,T-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let I=0;I<T;I++)for(let M=0;M<T;M++){const D=this.get(I,M);D>this.max&&(this.max=D),D<this.min&&(this.min=D)}}get(n,a){const d=new Uint8Array(this.data.buffer),p=4*this._idx(n,a);return this.unpack(d[p],d[p+1],d[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,a){if(n<-1||n>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(n+1)}unpack(n,a,d){return n*this.redFactor+a*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new ho({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,a,d){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let p=a*this.dim,v=a*this.dim+this.dim,x=d*this.dim,w=d*this.dim+this.dim;switch(a){case-1:p=v-1;break;case 1:v=p+1}switch(d){case-1:x=w-1;break;case 1:w=x+1}const T=-a*this.dim,I=-d*this.dim;for(let M=x;M<w;M++)for(let D=p;D<v;D++)this.data[this._idx(D,M)]=n.data[this._idx(D+T,M+I)]}}ct("DEMData",h2);class d2{constructor(n){this._stringToNumber={},this._numberToString=[];for(let a=0;a<n.length;a++){const d=n[a];this._stringToNumber[d]=a,this._numberToString[a]=d}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class f2{constructor(n,a,d,p,v){this.type="Feature",this._vectorTileFeature=n,n._z=a,n._x=d,n._y=p,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&(n[a]=this[a]);return n}}class p2{constructor(n,a){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new ol(on,16,0),this.grid3D=new ol(on,16,0),this.featureIndexArray=new Ne,this.promoteId=a}insert(n,a,d,p,v,x){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,p,v);const T=x?this.grid3D:this.grid;for(let I=0;I<a.length;I++){const M=a[I],D=[1/0,1/0,-1/0,-1/0];for(let $=0;$<M.length;$++){const H=M[$];D[0]=Math.min(D[0],H.x),D[1]=Math.min(D[1],H.y),D[2]=Math.max(D[2],H.x),D[3]=Math.max(D[3],H.y)}D[0]<on&&D[1]<on&&D[2]>=0&&D[3]>=0&&T.insert(w,D[0],D[1],D[2],D[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new ul.VectorTile(new mv(this.rawTileData)).layers,this.sourceLayerCoder=new d2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,a,d,p){this.loadVTLayers();const v=n.params||{},x=on/n.tileSize/n.scale,w=ad(v.filter),T=n.queryGeometry,I=n.queryPadding*x,M=g2(T),D=this.grid.query(M.minX-I,M.minY-I,M.maxX+I,M.maxY+I),$=g2(n.cameraQueryGeometry),H=this.grid3D.query($.minX-I,$.minY-I,$.maxX+I,$.maxY+I,(se,ue,be,me)=>function(Se,Te,Be,it,ft){for(const tt of Se)if(Te<=tt.x&&Be<=tt.y&&it>=tt.x&&ft>=tt.y)return!0;const rt=[new O(Te,Be),new O(Te,ft),new O(it,ft),new O(it,Be)];if(Se.length>2){for(const tt of rt)if(_u(Se,tt))return!0}for(let tt=0;tt<Se.length-1;tt++)if(MP(Se[tt],Se[tt+1],rt))return!0;return!1}(n.cameraQueryGeometry,se-I,ue-I,be+I,me+I));for(const se of H)D.push(se);D.sort(QA);const q={};let X;for(let se=0;se<D.length;se++){const ue=D[se];if(ue===X)continue;X=ue;const be=this.featureIndexArray.get(ue);let me=null;this.loadMatchingFeature(q,be.bucketIndex,be.sourceLayerIndex,be.featureIndex,w,v.layers,v.availableImages,a,d,p,(Se,Te,Be)=>(me||(me=sc(Se)),Te.queryIntersectsFeature(T,Se,Be,me,this.z,n.transform,x,n.pixelPosMatrix)))}return q}loadMatchingFeature(n,a,d,p,v,x,w,T,I,M,D){const $=this.bucketLayerIDs[a];if(x&&!function(se,ue){for(let be=0;be<se.length;be++)if(ue.indexOf(se[be])>=0)return!0;return!1}(x,$))return;const H=this.sourceLayerCoder.decode(d),q=this.vtLayers[H].feature(p);if(v.needGeometry){const se=ac(q,!0);if(!v.filter(new Cr(this.tileID.overscaledZ),se,this.tileID.canonical))return}else if(!v.filter(new Cr(this.tileID.overscaledZ),q))return;const X=this.getId(q,H);for(let se=0;se<$.length;se++){const ue=$[se];if(x&&x.indexOf(ue)<0)continue;const be=T[ue];if(!be)continue;let me={};X&&M&&(me=M.getState(be.sourceLayer||"_geojsonTileLayer",X));const Se=Ce({},I[ue]);Se.paint=m2(Se.paint,be.paint,q,me,w),Se.layout=m2(Se.layout,be.layout,q,me,w);const Te=!D||D(q,be,me);if(!Te)continue;const Be=new f2(q,this.z,this.x,this.y,X);Be.layer=Se;let it=n[ue];it===void 0&&(it=n[ue]=[]),it.push({featureIndex:p,feature:Be,intersectionZ:Te})}}lookupSymbolFeatures(n,a,d,p,v,x,w,T){const I={};this.loadVTLayers();const M=ad(v);for(const D of n)this.loadMatchingFeature(I,d,p,D,M,x,w,T,a);return I}hasLayer(n){for(const a of this.bucketLayerIDs)for(const d of a)if(n===d)return!0;return!1}getId(n,a){let d=n.id;return this.promoteId&&(d=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof d=="boolean"&&(d=Number(d))),d}}function m2(s,n,a,d,p){return Ae(s,(v,x)=>{const w=n instanceof yu?n.get(x):null;return w&&w.evaluate?w.evaluate(a,d,p):w})}function g2(s){let n=1/0,a=1/0,d=-1/0,p=-1/0;for(const v of s)n=Math.min(n,v.x),a=Math.min(a,v.y),d=Math.max(d,v.x),p=Math.max(p,v.y);return{minX:n,minY:a,maxX:d,maxY:p}}function QA(s,n){return n-s}function y2(s,n,a,d,p){const v=[];for(let x=0;x<s.length;x++){const w=s[x];let T;for(let I=0;I<w.length-1;I++){let M=w[I],D=w[I+1];M.x<n&&D.x<n||(M.x<n?M=new O(n,M.y+(n-M.x)/(D.x-M.x)*(D.y-M.y))._round():D.x<n&&(D=new O(n,M.y+(n-M.x)/(D.x-M.x)*(D.y-M.y))._round()),M.y<a&&D.y<a||(M.y<a?M=new O(M.x+(a-M.y)/(D.y-M.y)*(D.x-M.x),a)._round():D.y<a&&(D=new O(M.x+(a-M.y)/(D.y-M.y)*(D.x-M.x),a)._round()),M.x>=d&&D.x>=d||(M.x>=d?M=new O(d,M.y+(d-M.x)/(D.x-M.x)*(D.y-M.y))._round():D.x>=d&&(D=new O(d,M.y+(d-M.x)/(D.x-M.x)*(D.y-M.y))._round()),M.y>=p&&D.y>=p||(M.y>=p?M=new O(M.x+(p-M.y)/(D.y-M.y)*(D.x-M.x),p)._round():D.y>=p&&(D=new O(M.x+(p-M.y)/(D.y-M.y)*(D.x-M.x),p)._round()),T&&M.equals(T[T.length-1])||(T=[M],v.push(T)),T.push(D)))))}}return v}ct("FeatureIndex",p2,{omit:["rawTileData","sourceLayerCoder"]});class pl extends O{constructor(n,a,d,p){super(n,a),this.angle=d,p!==void 0&&(this.segment=p)}clone(){return new pl(this.x,this.y,this.angle,this.segment)}}function v2(s,n,a,d,p){if(n.segment===void 0||a===0)return!0;let v=n,x=n.segment+1,w=0;for(;w>-a/2;){if(x--,x<0)return!1;w-=s[x].dist(v),v=s[x]}w+=s[x].dist(s[x+1]),x++;const T=[];let I=0;for(;w<a/2;){const M=s[x],D=s[x+1];if(!D)return!1;let $=s[x-1].angleTo(M)-M.angleTo(D);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:w,angleDelta:$}),I+=$;w-T[0].distance>d;)I-=T.shift().angleDelta;if(I>p)return!1;x++,w+=M.dist(D)}return!0}function _2(s){let n=0;for(let a=0;a<s.length-1;a++)n+=s[a].dist(s[a+1]);return n}function x2(s,n,a){return s?.6*n*a:0}function b2(s,n){return Math.max(s?s.right-s.left:0,n?n.right-n.left:0)}function eM(s,n,a,d,p,v){const x=x2(a,p,v),w=b2(a,d)*v;let T=0;const I=_2(s)/2;for(let M=0;M<s.length-1;M++){const D=s[M],$=s[M+1],H=D.dist($);if(T+H>I){const q=(I-T)/H,X=Ai.number(D.x,$.x,q),se=Ai.number(D.y,$.y,q),ue=new pl(X,se,$.angleTo(D),M);return ue._round(),!x||v2(s,ue,w,x,n)?ue:void 0}T+=H}}function tM(s,n,a,d,p,v,x,w,T){const I=x2(d,v,x),M=b2(d,p),D=M*x,$=s[0].x===0||s[0].x===T||s[0].y===0||s[0].y===T;return n-D<n/4&&(n=D+n/4),w2(s,$?n/2*w%n:(M/2+2*v)*x*w%n,n,I,a,D,$,!1,T)}function w2(s,n,a,d,p,v,x,w,T){const I=v/2,M=_2(s);let D=0,$=n-a,H=[];for(let q=0;q<s.length-1;q++){const X=s[q],se=s[q+1],ue=X.dist(se),be=se.angleTo(X);for(;$+a<D+ue;){$+=a;const me=($-D)/ue,Se=Ai.number(X.x,se.x,me),Te=Ai.number(X.y,se.y,me);if(Se>=0&&Se<T&&Te>=0&&Te<T&&$-I>=0&&$+I<=M){const Be=new pl(Se,Te,be,q);Be._round(),d&&!v2(s,Be,v,d,p)||H.push(Be)}}D+=ue}return w||H.length||x||(H=w2(s,D/2,a,d,p,v,x,!0,T)),H}ct("Anchor",pl);const Eu=Ri;function S2(s,n,a,d){const p=[],v=s.image,x=v.pixelRatio,w=v.paddedRect.w-2*Eu,T=v.paddedRect.h-2*Eu,I=s.right-s.left,M=s.bottom-s.top,D=v.stretchX||[[0,w]],$=v.stretchY||[[0,T]],H=(Xe,ut)=>Xe+ut[1]-ut[0],q=D.reduce(H,0),X=$.reduce(H,0),se=w-q,ue=T-X;let be=0,me=q,Se=0,Te=X,Be=0,it=se,ft=0,rt=ue;if(v.content&&d){const Xe=v.content;be=Em(D,0,Xe[0]),Se=Em($,0,Xe[1]),me=Em(D,Xe[0],Xe[2]),Te=Em($,Xe[1],Xe[3]),Be=Xe[0]-be,ft=Xe[1]-Se,it=Xe[2]-Xe[0]-me,rt=Xe[3]-Xe[1]-Te}const tt=(Xe,ut,Je,Ve)=>{const bt=Im(Xe.stretch-be,me,I,s.left),gt=Pm(Xe.fixed-Be,it,Xe.stretch,q),Nt=Im(ut.stretch-Se,Te,M,s.top),Tr=Pm(ut.fixed-ft,rt,ut.stretch,X),Pr=Im(Je.stretch-be,me,I,s.left),gn=Pm(Je.fixed-Be,it,Je.stretch,q),eo=Im(Ve.stretch-Se,Te,M,s.top),mi=Pm(Ve.fixed-ft,rt,Ve.stretch,X),sn=new O(bt,Nt),Ln=new O(Pr,Nt),Vn=new O(Pr,eo),gi=new O(bt,eo),yi=new O(gt/x,Tr/x),yn=new O(gn/x,mi/x),vn=n*Math.PI/180;if(vn){const ri=Math.sin(vn),Oi=Math.cos(vn),Bi=[Oi,-ri,ri,Oi];sn._matMult(Bi),Ln._matMult(Bi),gi._matMult(Bi),Vn._matMult(Bi)}const ti=Xe.stretch+Xe.fixed,vi=ut.stretch+ut.fixed;return{tl:sn,tr:Ln,bl:gi,br:Vn,tex:{x:v.paddedRect.x+Eu+ti,y:v.paddedRect.y+Eu+vi,w:Je.stretch+Je.fixed-ti,h:Ve.stretch+Ve.fixed-vi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:yi,pixelOffsetBR:yn,minFontScaleX:it/x/I,minFontScaleY:rt/x/M,isSDF:a}};if(d&&(v.stretchX||v.stretchY)){const Xe=C2(D,se,q),ut=C2($,ue,X);for(let Je=0;Je<Xe.length-1;Je++){const Ve=Xe[Je],bt=Xe[Je+1];for(let gt=0;gt<ut.length-1;gt++)p.push(tt(Ve,ut[gt],bt,ut[gt+1]))}}else p.push(tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:T+1}));return p}function Em(s,n,a){let d=0;for(const p of s)d+=Math.max(n,Math.min(a,p[1]))-Math.max(n,Math.min(a,p[0]));return d}function C2(s,n,a){const d=[{fixed:-Eu,stretch:0}];for(const[p,v]of s){const x=d[d.length-1];d.push({fixed:p-x.stretch,stretch:x.stretch}),d.push({fixed:p-x.stretch,stretch:x.stretch+(v-p)})}return d.push({fixed:n+Eu,stretch:a}),d}function Im(s,n,a,d){return s/n*a+d}function Pm(s,n,a,d){return s-n*a/d}class Am{constructor(n,a,d,p,v,x,w,T,I,M){if(this.boxStartIndex=n.length,I){let D=x.top,$=x.bottom;const H=x.collisionPadding;H&&(D-=H[1],$+=H[3]);let q=$-D;q>0&&(q=Math.max(10,q),this.circleDiameter=q)}else{let D=x.top*w-T[0],$=x.bottom*w+T[2],H=x.left*w-T[3],q=x.right*w+T[1];const X=x.collisionPadding;if(X&&(H-=X[0]*w,D-=X[1]*w,q+=X[2]*w,$+=X[3]*w),M){const se=new O(H,D),ue=new O(q,D),be=new O(H,$),me=new O(q,$),Se=M*Math.PI/180;se._rotate(Se),ue._rotate(Se),be._rotate(Se),me._rotate(Se),H=Math.min(se.x,ue.x,be.x,me.x),q=Math.max(se.x,ue.x,be.x,me.x),D=Math.min(se.y,ue.y,be.y,me.y),$=Math.max(se.y,ue.y,be.y,me.y)}n.emplaceBack(a.x,a.y,H,D,q,$,d,p,v)}this.boxEndIndex=n.length}}class rM{constructor(n=[],a=nM){if(this.data=n,this.length=this.data.length,this.compare=a,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:a,compare:d}=this,p=a[n];for(;n>0;){const v=n-1>>1,x=a[v];if(d(p,x)>=0)break;a[n]=x,n=v}a[n]=p}_down(n){const{data:a,compare:d}=this,p=this.length>>1,v=a[n];for(;n<p;){let x=1+(n<<1),w=a[x];const T=x+1;if(T<this.length&&d(a[T],w)<0&&(x=T,w=a[T]),d(w,v)>=0)break;a[n]=w,n=x}a[n]=v}}function nM(s,n){return s<n?-1:s>n?1:0}function iM(s,n=1,a=!1){let d=1/0,p=1/0,v=-1/0,x=-1/0;const w=s[0];for(let H=0;H<w.length;H++){const q=w[H];(!H||q.x<d)&&(d=q.x),(!H||q.y<p)&&(p=q.y),(!H||q.x>v)&&(v=q.x),(!H||q.y>x)&&(x=q.y)}const T=Math.min(v-d,x-p);let I=T/2;const M=new rM([],oM);if(T===0)return new O(d,p);for(let H=d;H<v;H+=T)for(let q=p;q<x;q+=T)M.push(new Iu(H+I,q+I,I,s));let D=function(H){let q=0,X=0,se=0;const ue=H[0];for(let be=0,me=ue.length,Se=me-1;be<me;Se=be++){const Te=ue[be],Be=ue[Se],it=Te.x*Be.y-Be.x*Te.y;X+=(Te.x+Be.x)*it,se+=(Te.y+Be.y)*it,q+=3*it}return new Iu(X/q,se/q,0,H)}(s),$=M.length;for(;M.length;){const H=M.pop();(H.d>D.d||!D.d)&&(D=H,a&&console.log("found best %d after %d probes",Math.round(1e4*H.d)/1e4,$)),H.max-D.d<=n||(I=H.h/2,M.push(new Iu(H.p.x-I,H.p.y-I,I,s)),M.push(new Iu(H.p.x+I,H.p.y-I,I,s)),M.push(new Iu(H.p.x-I,H.p.y+I,I,s)),M.push(new Iu(H.p.x+I,H.p.y+I,I,s)),$+=4)}return a&&(console.log(`num probes: ${$}`),console.log(`best distance: ${D.d}`)),D.p}function oM(s,n){return n.max-s.max}function Iu(s,n,a,d){this.p=new O(s,n),this.h=a,this.d=function(p,v){let x=!1,w=1/0;for(let T=0;T<v.length;T++){const I=v[T];for(let M=0,D=I.length,$=D-1;M<D;$=M++){const H=I[M],q=I[$];H.y>p.y!=q.y>p.y&&p.x<(q.x-H.x)*(p.y-H.y)/(q.y-H.y)+H.x&&(x=!x),w=Math.min(w,sw(p,H,q))}}return(x?1:-1)*Math.sqrt(w)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var jn;c.aq=void 0,(jn=c.aq||(c.aq={}))[jn.center=1]="center",jn[jn.left=2]="left",jn[jn.right=3]="right",jn[jn.top=4]="top",jn[jn.bottom=5]="bottom",jn[jn["top-left"]=6]="top-left",jn[jn["top-right"]=7]="top-right",jn[jn["bottom-left"]=8]="bottom-left",jn[jn["bottom-right"]=9]="bottom-right";const ml=7,Iv=Number.POSITIVE_INFINITY;function k2(s,n){return n[1]!==Iv?function(a,d,p){let v=0,x=0;switch(d=Math.abs(d),p=Math.abs(p),a){case"top-right":case"top-left":case"top":x=p-ml;break;case"bottom-right":case"bottom-left":case"bottom":x=-p+ml}switch(a){case"top-right":case"bottom-right":case"right":v=-d;break;case"top-left":case"bottom-left":case"left":v=d}return[v,x]}(s,n[0],n[1]):function(a,d){let p=0,v=0;d<0&&(d=0);const x=d/Math.SQRT2;switch(a){case"top-right":case"top-left":v=x-ml;break;case"bottom-right":case"bottom-left":v=-x+ml;break;case"bottom":v=-d+ml;break;case"top":v=d-ml}switch(a){case"top-right":case"bottom-right":p=-x;break;case"top-left":case"bottom-left":p=x;break;case"left":p=d;break;case"right":p=-d}return[p,v]}(s,n[0])}function T2(s,n,a){var d;const p=s.layout,v=(d=p.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(n,{},a);if(v){const w=v.values,T=[];for(let I=0;I<w.length;I+=2){const M=T[I]=w[I],D=w[I+1].map($=>$*mn);M.startsWith("top")?D[1]-=ml:M.startsWith("bottom")&&(D[1]+=ml),T[I+1]=D}return new Zi(T)}const x=p.get("text-variable-anchor");if(x){let w;w=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(n,{},a)*mn,Iv]:p.get("text-offset").evaluate(n,{},a).map(I=>I*mn);const T=[];for(const I of x)T.push(I,k2(I,w));return new Zi(T)}return null}function Pv(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function sM(s,n,a,d,p,v,x,w,T,I,M){let D=v.textMaxSize.evaluate(n,{});D===void 0&&(D=x);const $=s.layers[0].layout,H=$.get("icon-offset").evaluate(n,{},M),q=I2(a.horizontal),X=x/24,se=s.tilePixelRatio*X,ue=s.tilePixelRatio*D/24,be=s.tilePixelRatio*w,me=s.tilePixelRatio*$.get("symbol-spacing"),Se=$.get("text-padding")*s.tilePixelRatio,Te=function(Ve,bt,gt,Nt=1){const Tr=Ve.get("icon-padding").evaluate(bt,{},gt),Pr=Tr&&Tr.values;return[Pr[0]*Nt,Pr[1]*Nt,Pr[2]*Nt,Pr[3]*Nt]}($,n,M,s.tilePixelRatio),Be=$.get("text-max-angle")/180*Math.PI,it=$.get("text-rotation-alignment")!=="viewport"&&$.get("symbol-placement")!=="point",ft=$.get("icon-rotation-alignment")==="map"&&$.get("symbol-placement")!=="point",rt=$.get("symbol-placement"),tt=me/2,Xe=$.get("icon-text-fit");let ut;d&&Xe!=="none"&&(s.allowVerticalPlacement&&a.vertical&&(ut=Xw(d,a.vertical,Xe,$.get("icon-text-fit-padding"),H,X)),q&&(d=Xw(d,q,Xe,$.get("icon-text-fit-padding"),H,X)));const Je=(Ve,bt)=>{bt.x<0||bt.x>=on||bt.y<0||bt.y>=on||function(gt,Nt,Tr,Pr,gn,eo,mi,sn,Ln,Vn,gi,yi,yn,vn,ti,vi,ri,Oi,Bi,_n,qt,ni,Un,xn,Vo){const gs=gt.addToLineVertexArray(Nt,Tr);let ys,Ca,Uo,po,$i=0,ka=0,Hd=0,z2=0,Bv=-1,$v=-1;const Ta={};let L2=xa("");if(gt.allowVerticalPlacement&&Pr.vertical){const ii=sn.layout.get("text-rotate").evaluate(qt,{},xn)+90;Uo=new Am(Ln,Nt,Vn,gi,yi,Pr.vertical,yn,vn,ti,ii),mi&&(po=new Am(Ln,Nt,Vn,gi,yi,mi,ri,Oi,ti,ii))}if(gn){const ii=sn.layout.get("icon-rotate").evaluate(qt,{}),mo=sn.layout.get("icon-text-fit")!=="none",cc=S2(gn,ii,Un,mo),_s=mi?S2(mi,ii,Un,mo):void 0;Ca=new Am(Ln,Nt,Vn,gi,yi,gn,ri,Oi,!1,ii),$i=4*cc.length;const uc=gt.iconSizeData;let Zs=null;uc.kind==="source"?(Zs=[Ws*sn.layout.get("icon-size").evaluate(qt,{})],Zs[0]>dl&&Ze(`${gt.layerIds[0]}: Value for "icon-size" is >= ${jd}. Reduce your "icon-size".`)):uc.kind==="composite"&&(Zs=[Ws*ni.compositeIconSizes[0].evaluate(qt,{},xn),Ws*ni.compositeIconSizes[1].evaluate(qt,{},xn)],(Zs[0]>dl||Zs[1]>dl)&&Ze(`${gt.layerIds[0]}: Value for "icon-size" is >= ${jd}. Reduce your "icon-size".`)),gt.addSymbols(gt.icon,cc,Zs,_n,Bi,qt,c.ai.none,Nt,gs.lineStartIndex,gs.lineLength,-1,xn),Bv=gt.icon.placedSymbolArray.length-1,_s&&(ka=4*_s.length,gt.addSymbols(gt.icon,_s,Zs,_n,Bi,qt,c.ai.vertical,Nt,gs.lineStartIndex,gs.lineLength,-1,xn),$v=gt.icon.placedSymbolArray.length-1)}const D2=Object.keys(Pr.horizontal);for(const ii of D2){const mo=Pr.horizontal[ii];if(!ys){L2=xa(mo.text);const _s=sn.layout.get("text-rotate").evaluate(qt,{},xn);ys=new Am(Ln,Nt,Vn,gi,yi,mo,yn,vn,ti,_s)}const cc=mo.positionedLines.length===1;if(Hd+=E2(gt,Nt,mo,eo,sn,ti,qt,vi,gs,Pr.vertical?c.ai.horizontal:c.ai.horizontalOnly,cc?D2:[ii],Ta,Bv,ni,xn),cc)break}Pr.vertical&&(z2+=E2(gt,Nt,Pr.vertical,eo,sn,ti,qt,vi,gs,c.ai.vertical,["vertical"],Ta,$v,ni,xn));const cM=ys?ys.boxStartIndex:gt.collisionBoxArray.length,uM=ys?ys.boxEndIndex:gt.collisionBoxArray.length,hM=Uo?Uo.boxStartIndex:gt.collisionBoxArray.length,dM=Uo?Uo.boxEndIndex:gt.collisionBoxArray.length,fM=Ca?Ca.boxStartIndex:gt.collisionBoxArray.length,pM=Ca?Ca.boxEndIndex:gt.collisionBoxArray.length,mM=po?po.boxStartIndex:gt.collisionBoxArray.length,gM=po?po.boxEndIndex:gt.collisionBoxArray.length;let vs=-1;const zm=(ii,mo)=>ii&&ii.circleDiameter?Math.max(ii.circleDiameter,mo):mo;vs=zm(ys,vs),vs=zm(Uo,vs),vs=zm(Ca,vs),vs=zm(po,vs);const R2=vs>-1?1:0;R2&&(vs*=Vo/mn),gt.glyphOffsetArray.length>=Tu.MAX_GLYPHS&&Ze("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),qt.sortKey!==void 0&&gt.addToSortKeyRanges(gt.symbolInstances.length,qt.sortKey);const yM=T2(sn,qt,xn),[vM,_M]=function(ii,mo){const cc=ii.length,_s=mo==null?void 0:mo.values;if((_s==null?void 0:_s.length)>0)for(let uc=0;uc<_s.length;uc+=2){const Zs=_s[uc+1];ii.emplaceBack(c.aq[_s[uc]],Zs[0],Zs[1])}return[cc,ii.length]}(gt.textAnchorOffsets,yM);gt.symbolInstances.emplaceBack(Nt.x,Nt.y,Ta.right>=0?Ta.right:-1,Ta.center>=0?Ta.center:-1,Ta.left>=0?Ta.left:-1,Ta.vertical||-1,Bv,$v,L2,cM,uM,hM,dM,fM,pM,mM,gM,Vn,Hd,z2,$i,ka,R2,0,yn,vs,vM,_M)}(s,bt,Ve,a,d,p,ut,s.layers[0],s.collisionBoxArray,n.index,n.sourceLayerIndex,s.index,se,[Se,Se,Se,Se],it,T,be,Te,ft,H,n,v,I,M,x)};if(rt==="line")for(const Ve of y2(n.geometry,0,0,on,on)){const bt=tM(Ve,me,Be,a.vertical||q,d,24,ue,s.overscaling,on);for(const gt of bt)q&&aM(s,q.text,tt,gt)||Je(Ve,gt)}else if(rt==="line-center"){for(const Ve of n.geometry)if(Ve.length>1){const bt=eM(Ve,Be,a.vertical||q,d,24,ue);bt&&Je(Ve,bt)}}else if(n.type==="Polygon")for(const Ve of av(n.geometry,0)){const bt=iM(Ve,16);Je(Ve[0],new pl(bt.x,bt.y,0))}else if(n.type==="LineString")for(const Ve of n.geometry)Je(Ve,new pl(Ve[0].x,Ve[0].y,0));else if(n.type==="Point")for(const Ve of n.geometry)for(const bt of Ve)Je([bt],new pl(bt.x,bt.y,0))}function E2(s,n,a,d,p,v,x,w,T,I,M,D,$,H,q){const X=function(be,me,Se,Te,Be,it,ft,rt){const tt=Te.layout.get("text-rotate").evaluate(it,{})*Math.PI/180,Xe=[];for(const ut of me.positionedLines)for(const Je of ut.positionedGlyphs){if(!Je.rect)continue;const Ve=Je.rect||{};let bt=Uw+1,gt=!0,Nt=1,Tr=0;const Pr=(Be||rt)&&Je.vertical,gn=Je.metrics.advance*Je.scale/2;if(rt&&me.verticalizable&&(Tr=ut.lineOffset/2-(Je.imageName?-(mn-Je.metrics.width*Je.scale)/2:(Je.scale-1)*mn)),Je.imageName){const _n=ft[Je.imageName];gt=_n.sdf,Nt=_n.pixelRatio,bt=Ri/Nt}const eo=Be?[Je.x+gn,Je.y]:[0,0];let mi=Be?[0,0]:[Je.x+gn+Se[0],Je.y+Se[1]-Tr],sn=[0,0];Pr&&(sn=mi,mi=[0,0]);const Ln=Je.metrics.isDoubleResolution?2:1,Vn=(Je.metrics.left-bt)*Je.scale-gn+mi[0],gi=(-Je.metrics.top-bt)*Je.scale+mi[1],yi=Vn+Ve.w/Ln*Je.scale/Nt,yn=gi+Ve.h/Ln*Je.scale/Nt,vn=new O(Vn,gi),ti=new O(yi,gi),vi=new O(Vn,yn),ri=new O(yi,yn);if(Pr){const _n=new O(-gn,gn-Fd),qt=-Math.PI/2,ni=mn/2-gn,Un=new O(5-Fd-ni,-(Je.imageName?ni:0)),xn=new O(...sn);vn._rotateAround(qt,_n)._add(Un)._add(xn),ti._rotateAround(qt,_n)._add(Un)._add(xn),vi._rotateAround(qt,_n)._add(Un)._add(xn),ri._rotateAround(qt,_n)._add(Un)._add(xn)}if(tt){const _n=Math.sin(tt),qt=Math.cos(tt),ni=[qt,-_n,_n,qt];vn._matMult(ni),ti._matMult(ni),vi._matMult(ni),ri._matMult(ni)}const Oi=new O(0,0),Bi=new O(0,0);Xe.push({tl:vn,tr:ti,bl:vi,br:ri,tex:Ve,writingMode:me.writingMode,glyphOffset:eo,sectionIndex:Je.sectionIndex,isSDF:gt,pixelOffsetTL:Oi,pixelOffsetBR:Bi,minFontScaleX:0,minFontScaleY:0})}return Xe}(0,a,w,p,v,x,d,s.allowVerticalPlacement),se=s.textSizeData;let ue=null;se.kind==="source"?(ue=[Ws*p.layout.get("text-size").evaluate(x,{})],ue[0]>dl&&Ze(`${s.layerIds[0]}: Value for "text-size" is >= ${jd}. Reduce your "text-size".`)):se.kind==="composite"&&(ue=[Ws*H.compositeTextSizes[0].evaluate(x,{},q),Ws*H.compositeTextSizes[1].evaluate(x,{},q)],(ue[0]>dl||ue[1]>dl)&&Ze(`${s.layerIds[0]}: Value for "text-size" is >= ${jd}. Reduce your "text-size".`)),s.addSymbols(s.text,X,ue,w,v,x,I,n,T.lineStartIndex,T.lineLength,$,q);for(const be of M)D[be]=s.text.placedSymbolArray.length-1;return 4*X.length}function I2(s){for(const n in s)return s[n];return null}function aM(s,n,a,d){const p=s.compareText;if(n in p){const v=p[n];for(let x=v.length-1;x>=0;x--)if(d.dist(v[x])<a)return!0}else p[n]=[];return p[n].push(d),!1}const P2=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Av{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,d]=new Uint8Array(n,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=d>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=P2[15&d];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[w]=new Uint32Array(n,4,1);return new Av(w,x,v,n)}constructor(n,a=64,d=Float64Array,p){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=d,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=P2.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,w=n*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-w%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${d}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+T,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+w+T),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+w+T,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=n)}add(n,a){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=n,this.coords[this._pos++]=a,d}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return Mv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,a,d,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:w}=this,T=[0,v.length-1,0],I=[];for(;T.length;){const M=T.pop()||0,D=T.pop()||0,$=T.pop()||0;if(D-$<=w){for(let se=$;se<=D;se++){const ue=x[2*se],be=x[2*se+1];ue>=n&&ue<=d&&be>=a&&be<=p&&I.push(v[se])}continue}const H=$+D>>1,q=x[2*H],X=x[2*H+1];q>=n&&q<=d&&X>=a&&X<=p&&I.push(v[H]),(M===0?n<=q:a<=X)&&(T.push($),T.push(H-1),T.push(1-M)),(M===0?d>=q:p>=X)&&(T.push(H+1),T.push(D),T.push(1-M))}return I}within(n,a,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:x}=this,w=[0,p.length-1,0],T=[],I=d*d;for(;w.length;){const M=w.pop()||0,D=w.pop()||0,$=w.pop()||0;if(D-$<=x){for(let se=$;se<=D;se++)M2(v[2*se],v[2*se+1],n,a)<=I&&T.push(p[se]);continue}const H=$+D>>1,q=v[2*H],X=v[2*H+1];M2(q,X,n,a)<=I&&T.push(p[H]),(M===0?n-d<=q:a-d<=X)&&(w.push($),w.push(H-1),w.push(1-M)),(M===0?n+d>=q:a+d>=X)&&(w.push(H+1),w.push(D),w.push(1-M))}return T}}function Mv(s,n,a,d,p,v){if(p-d<=a)return;const x=d+p>>1;A2(s,n,x,d,p,v),Mv(s,n,a,d,x-1,1-v),Mv(s,n,a,x+1,p,1-v)}function A2(s,n,a,d,p,v){for(;p>d;){if(p-d>600){const I=p-d+1,M=a-d+1,D=Math.log(I),$=.5*Math.exp(2*D/3),H=.5*Math.sqrt(D*$*(I-$)/I)*(M-I/2<0?-1:1);A2(s,n,a,Math.max(d,Math.floor(a-M*$/I+H)),Math.min(p,Math.floor(a+(I-M)*$/I+H)),v)}const x=n[2*a+v];let w=d,T=p;for(Ud(s,n,d,a),n[2*p+v]>x&&Ud(s,n,d,p);w<T;){for(Ud(s,n,w,T),w++,T--;n[2*w+v]<x;)w++;for(;n[2*T+v]>x;)T--}n[2*d+v]===x?Ud(s,n,d,T):(T++,Ud(s,n,T,p)),T<=a&&(d=T+1),a<=T&&(p=T-1)}}function Ud(s,n,a,d){zv(s,a,d),zv(n,2*a,2*d),zv(n,2*a+1,2*d+1)}function zv(s,n,a){const d=s[n];s[n]=s[a],s[a]=d}function M2(s,n,a,d){const p=s-a,v=n-d;return p*p+v*v}var Lv;c.bh=void 0,(Lv=c.bh||(c.bh={})).create="create",Lv.load="load",Lv.fullLoad="fullLoad";let Mm=null,Gd=[];const Dv=1e3/60,Rv="loadTime",Ov="fullLoadTime",lM={mark(s){performance.mark(s)},frame(s){const n=s;Mm!=null&&Gd.push(n-Mm),Mm=n},clearMetrics(){Mm=null,Gd=[],performance.clearMeasures(Rv),performance.clearMeasures(Ov);for(const s in c.bh)performance.clearMarks(c.bh[s])},getPerformanceMetrics(){performance.measure(Rv,c.bh.create,c.bh.load),performance.measure(Ov,c.bh.create,c.bh.fullLoad);const s=performance.getEntriesByName(Rv)[0].duration,n=performance.getEntriesByName(Ov)[0].duration,a=Gd.length,d=1/(Gd.reduce((v,x)=>v+x,0)/a/1e3),p=Gd.filter(v=>v>Dv).reduce((v,x)=>v+(x-Dv)/Dv,0);return{loadTime:s,fullLoadTime:n,fps:d,percentDroppedFrames:p/(a+p)*100,totalFrames:a}}};c.$=function(s,n,a){var d,p,v,x,w,T,I,M,D,$,H,q,X=a[0],se=a[1],ue=a[2];return n===s?(s[12]=n[0]*X+n[4]*se+n[8]*ue+n[12],s[13]=n[1]*X+n[5]*se+n[9]*ue+n[13],s[14]=n[2]*X+n[6]*se+n[10]*ue+n[14],s[15]=n[3]*X+n[7]*se+n[11]*ue+n[15]):(p=n[1],v=n[2],x=n[3],w=n[4],T=n[5],I=n[6],M=n[7],D=n[8],$=n[9],H=n[10],q=n[11],s[0]=d=n[0],s[1]=p,s[2]=v,s[3]=x,s[4]=w,s[5]=T,s[6]=I,s[7]=M,s[8]=D,s[9]=$,s[10]=H,s[11]=q,s[12]=d*X+w*se+D*ue+n[12],s[13]=p*X+T*se+$*ue+n[13],s[14]=v*X+I*se+H*ue+n[14],s[15]=x*X+M*se+q*ue+n[15]),s},c.A=xu,c.B=Ai,c.C=class{constructor(s,n,a){this.receive=d=>{const p=d.data,v=p.id;if(v&&(!p.targetMapId||this.mapId===p.targetMapId))if(p.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else ot()||p.mustQueue?(this.tasks[v]=p,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,p)},this.process=()=>{if(!this.taskQueue.length)return;const d=this.taskQueue.shift(),p=this.tasks[d];delete this.tasks[d],this.taskQueue.length&&this.invoker.trigger(),p&&this.processTask(d,p)},this.target=s,this.parent=n,this.mapId=a,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new JA(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ot()?s:window}send(s,n,a,d,p=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(this.callbacks[v]=a);const x=[],w={id:v,type:s,hasCallback:!!a,targetMapId:d,mustQueue:p,sourceMapId:this.mapId,data:Gs(n,x)};return this.target.postMessage(w,{transfer:x}),{cancel:()=>{a&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}processTask(s,n){if(n.type==="<response>"){const a=this.callbacks[s];delete this.callbacks[s],a&&(n.error?a(sl(n.error)):a(null,sl(n.data)))}else{let a=!1;const d=[],p=n.hasCallback?(w,T)=>{a=!0,delete this.cancelCallbacks[s];const I={id:s,type:"<response>",sourceMapId:this.mapId,error:w?Gs(w):null,data:Gs(T,d)};this.target.postMessage(I,{transfer:d})}:w=>{a=!0};let v=null;const x=sl(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,p);else if("getWorkerSource"in this.parent){const w=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,w[0],x.source)[w[1]](x,p)}else p(new Error(`Could not find function ${n.type}`));!a&&v&&v.cancel&&(this.cancelCallbacks[s]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.D=vt,c.E=as,c.F=function(s,n){const a={};for(let d=0;d<n.length;d++){const p=n[d];p in s&&(a[p]=s[p])}return a},c.G=o2,c.H=s2,c.I=yv,c.J=j,c.K=U,c.L=fl,c.M=Et,c.N=on,c.O=fo,c.P=O,c.Q=Or,c.R=ho,c.S=kr,c.T=sm,c.U=Tm,c.V=class extends va{},c.W=Ev,c.X=function(s,n){const a=window.document.createElement("video");a.muted=!0,a.onloadstart=function(){n(null,a)};for(let d=0;d<s.length;d++){const p=window.document.createElement("source");Ui(s[d])||(a.crossOrigin="Anonymous"),p.src=s[d],a.appendChild(p)}return{cancel:()=>{}}},c.Y=Ke,c.Z=function(){var s=new xu(16);return xu!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},c._=b,c.a=st,c.a$=class extends V{},c.a0=function(s,n,a){var d=a[0],p=a[1],v=a[2];return s[0]=n[0]*d,s[1]=n[1]*d,s[2]=n[2]*d,s[3]=n[3]*d,s[4]=n[4]*p,s[5]=n[5]*p,s[6]=n[6]*p,s[7]=n[7]*p,s[8]=n[8]*v,s[9]=n[9]*v,s[10]=n[10]*v,s[11]=n[11]*v,s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},c.a1=uw,c.a2=function(){return Ue++},c.a3=ne,c.a4=Tu,c.a5=function(){Li.isLoading()||Li.isLoaded()||vd()!=="deferred"||om()},c.a6=ad,c.a7=ac,c.a8=Cr,c.a9=f2,c.aA=tc,c.aB=function(s){s=s.slice();const n=Object.create(null);for(let a=0;a<s.length;a++)n[s[a].id]=s[a];for(let a=0;a<s.length;a++)"ref"in s[a]&&(s[a]=Yn(s[a],n[s[a].ref]));return s},c.aC=function(s){if(s.type==="custom")return new YA(s);switch(s.type){case"background":return new ZA(s);case"circle":return new DP(s);case"fill":return new QP(s);case"fill-extrusion":return new pA(s);case"heatmap":return new OP(s);case"hillshade":return new $P(s);case"line":return new wA(s);case"raster":return new XA(s);case"symbol":return new km(s)}},c.aD=We,c.aE=function(s,n){if(!s)return[{command:Zt.setStyle,args:[n]}];let a=[];try{if(!Ut(s.version,n.version))return[{command:Zt.setStyle,args:[n]}];Ut(s.center,n.center)||a.push({command:Zt.setCenter,args:[n.center]}),Ut(s.zoom,n.zoom)||a.push({command:Zt.setZoom,args:[n.zoom]}),Ut(s.bearing,n.bearing)||a.push({command:Zt.setBearing,args:[n.bearing]}),Ut(s.pitch,n.pitch)||a.push({command:Zt.setPitch,args:[n.pitch]}),Ut(s.sprite,n.sprite)||a.push({command:Zt.setSprite,args:[n.sprite]}),Ut(s.glyphs,n.glyphs)||a.push({command:Zt.setGlyphs,args:[n.glyphs]}),Ut(s.transition,n.transition)||a.push({command:Zt.setTransition,args:[n.transition]}),Ut(s.light,n.light)||a.push({command:Zt.setLight,args:[n.light]});const d={},p=[];(function(x,w,T,I){let M;for(M in w=w||{},x=x||{})Object.prototype.hasOwnProperty.call(x,M)&&(Object.prototype.hasOwnProperty.call(w,M)||Fs(M,T,I));for(M in w)Object.prototype.hasOwnProperty.call(w,M)&&(Object.prototype.hasOwnProperty.call(x,M)?Ut(x[M],w[M])||(x[M].type==="geojson"&&w[M].type==="geojson"&&ua(x,w,M)?T.push({command:Zt.setGeoJSONSourceData,args:[M,w[M].data]}):Gi(M,w,T,I)):Ii(M,w,T))})(s.sources,n.sources,p,d);const v=[];s.layers&&s.layers.forEach(x=>{d[x.source]?a.push({command:Zt.removeLayer,args:[x.id]}):v.push(x)}),a=a.concat(p),function(x,w,T){w=w||[];const I=(x=x||[]).map(kn),M=w.map(kn),D=x.reduce(Hi,{}),$=w.reduce(Hi,{}),H=I.slice(),q=Object.create(null);let X,se,ue,be,me,Se,Te;for(X=0,se=0;X<I.length;X++)ue=I[X],Object.prototype.hasOwnProperty.call($,ue)?se++:(T.push({command:Zt.removeLayer,args:[ue]}),H.splice(H.indexOf(ue,se),1));for(X=0,se=0;X<M.length;X++)ue=M[M.length-1-X],H[H.length-1-X]!==ue&&(Object.prototype.hasOwnProperty.call(D,ue)?(T.push({command:Zt.removeLayer,args:[ue]}),H.splice(H.lastIndexOf(ue,H.length-se),1)):se++,Se=H[H.length-X],T.push({command:Zt.addLayer,args:[$[ue],Se]}),H.splice(H.length-X,0,ue),q[ue]=!0);for(X=0;X<M.length;X++)if(ue=M[X],be=D[ue],me=$[ue],!q[ue]&&!Ut(be,me))if(Ut(be.source,me.source)&&Ut(be["source-layer"],me["source-layer"])&&Ut(be.type,me.type)){for(Te in dn(be.layout,me.layout,T,ue,null,Zt.setLayoutProperty),dn(be.paint,me.paint,T,ue,null,Zt.setPaintProperty),Ut(be.filter,me.filter)||T.push({command:Zt.setFilter,args:[ue,me.filter]}),Ut(be.minzoom,me.minzoom)&&Ut(be.maxzoom,me.maxzoom)||T.push({command:Zt.setLayerZoomRange,args:[ue,me.minzoom,me.maxzoom]}),be)Object.prototype.hasOwnProperty.call(be,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?dn(be[Te],me[Te],T,ue,Te.slice(6),Zt.setPaintProperty):Ut(be[Te],me[Te])||T.push({command:Zt.setLayerProperty,args:[ue,Te,me[Te]]}));for(Te in me)Object.prototype.hasOwnProperty.call(me,Te)&&!Object.prototype.hasOwnProperty.call(be,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?dn(be[Te],me[Te],T,ue,Te.slice(6),Zt.setPaintProperty):Ut(be[Te],me[Te])||T.push({command:Zt.setLayerProperty,args:[ue,Te,me[Te]]}))}else T.push({command:Zt.removeLayer,args:[ue]}),Se=H[H.lastIndexOf(ue)+1],T.push({command:Zt.addLayer,args:[me,Se]})}(v,n.layers,a)}catch(d){console.warn("Unable to compute style diff:",d),a=[{command:Zt.setStyle,args:[n]}]}return a},c.aF=function(s){const n=[],a=s.id;return a===void 0&&n.push({message:`layers.${a}: missing required property "id"`}),s.render===void 0&&n.push({message:`layers.${a}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&n.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),n},c.aG=function s(n,a){if(Array.isArray(n)){if(!Array.isArray(a)||n.length!==a.length)return!1;for(let d=0;d<n.length;d++)if(!s(n[d],a[d]))return!1;return!0}if(typeof n=="object"&&n!==null&&a!==null){if(typeof a!="object"||Object.keys(n).length!==Object.keys(a).length)return!1;for(const d in n)if(!s(n[d],a[d]))return!1;return!0}return n===a},c.aH=Ae,c.aI=Re,c.aJ=rc,c.aK=function(s){return s({pluginStatus:di,pluginURL:Hs}),rc.on("pluginStateChange",s),s},c.aL=class extends ba{constructor(s,n){super(s,n),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},c.aM=vu,c.aN=class extends ba{constructor(s,n){super(s,n),this.current=K0}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let n=1;n<16;n++)if(s[n]!==this.current[n]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},c.aO=um,c.aP=class extends ba{constructor(s,n){super(s,n),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},c.aQ=class extends ba{constructor(s,n){super(s,n),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},c.aR=hm,c.aS=function(s,n,a,d,p,v,x){var w=1/(n-a),T=1/(d-p),I=1/(v-x);return s[0]=-2*w,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*T,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*I,s[11]=0,s[12]=(n+a)*w,s[13]=(p+d)*T,s[14]=(x+v)*I,s[15]=1,s},c.aT=ur,c.aU=LP,c.aV=class extends f{},c.aW=TA,c.aX=class extends _{},c.aY=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},c.aZ=mw,c.a_=qe,c.aa=function(s){const n={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,d,p,v)=>{const x=p||v;return n[d]=!x||x.toLowerCase(),""}),n["max-age"]){const a=parseInt(n["max-age"],10);isNaN(a)?delete n["max-age"]:n["max-age"]=a}return n},c.ab=function(s,n){const a=[];for(const d in s)d in n||a.push(d);return a},c.ac=function(s){if(Pe==null){const n=s.navigator?s.navigator.userAgent:null;Pe=!!s.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Pe},c.ad=F,c.ae=function(s,n,a){var d=Math.sin(a),p=Math.cos(a),v=n[0],x=n[1],w=n[2],T=n[3],I=n[4],M=n[5],D=n[6],$=n[7];return n!==s&&(s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[0]=v*p+I*d,s[1]=x*p+M*d,s[2]=w*p+D*d,s[3]=T*p+$*d,s[4]=I*p-v*d,s[5]=M*p-x*d,s[6]=D*p-w*d,s[7]=$*p-T*d,s},c.af=function(s){var n=new xu(16);return n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],n[4]=s[4],n[5]=s[5],n[6]=s[6],n[7]=s[7],n[8]=s[8],n[9]=s[9],n[10]=s[10],n[11]=s[11],n[12]=s[12],n[13]=s[13],n[14]=s[14],n[15]=s[15],n},c.ag=mm,c.ah=function(s,n){let a=0,d=0;if(s.kind==="constant")d=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:x}=s,w=p?F(Mi.interpolationFactor(p,n,v,x),0,1):0;s.kind==="camera"?d=Ai.number(s.minSize,s.maxSize,w):a=w}return{uSizeT:a,uSize:d}},c.aj=function(s,{uSize:n,uSizeT:a},{lowerSize:d,upperSize:p}){return s.kind==="source"?d/Ws:s.kind==="composite"?Ai.number(d/Ws,p/Ws,a):n},c.ak=bv,c.al=function(s,n,a,d){const p=n.y-s.y,v=n.x-s.x,x=d.y-a.y,w=d.x-a.x,T=x*v-w*p;if(T===0)return null;const I=(w*(s.y-a.y)-x*(s.x-a.x))/T;return new O(s.x+I*v,s.y+I*p)},c.am=y2,c.an=iw,c.ao=ev,c.ap=mn,c.ar=xv,c.as=function(s,n){var a=n[0],d=n[1],p=n[2],v=n[3],x=n[4],w=n[5],T=n[6],I=n[7],M=n[8],D=n[9],$=n[10],H=n[11],q=n[12],X=n[13],se=n[14],ue=n[15],be=a*w-d*x,me=a*T-p*x,Se=a*I-v*x,Te=d*T-p*w,Be=d*I-v*w,it=p*I-v*T,ft=M*X-D*q,rt=M*se-$*q,tt=M*ue-H*q,Xe=D*se-$*X,ut=D*ue-H*X,Je=$*ue-H*se,Ve=be*Je-me*ut+Se*Xe+Te*tt-Be*rt+it*ft;return Ve?(s[0]=(w*Je-T*ut+I*Xe)*(Ve=1/Ve),s[1]=(p*ut-d*Je-v*Xe)*Ve,s[2]=(X*it-se*Be+ue*Te)*Ve,s[3]=($*Be-D*it-H*Te)*Ve,s[4]=(T*tt-x*Je-I*rt)*Ve,s[5]=(a*Je-p*tt+v*rt)*Ve,s[6]=(se*Se-q*it-ue*me)*Ve,s[7]=(M*it-$*Se+H*me)*Ve,s[8]=(x*ut-w*tt+I*ft)*Ve,s[9]=(d*tt-a*ut-v*ft)*Ve,s[10]=(q*Be-X*Se+ue*be)*Ve,s[11]=(D*Se-M*Be-H*be)*Ve,s[12]=(w*rt-x*Xe-T*ft)*Ve,s[13]=(a*Xe-d*rt+p*ft)*Ve,s[14]=(X*me-q*Te-se*be)*Ve,s[15]=(M*Te-D*me+$*be)*Ve,s):null},c.at=Pv,c.au=_v,c.av=Av,c.aw=function(){const s={},n=Me.$version;for(const a in Me.$root){const d=Me.$root[a];if(d.required){let p=null;p=a==="version"?n:d.type==="array"?[]:{},p!=null&&(s[a]=p)}}return s},c.ax=Zt,c.ay=tm,c.az=At,c.b=function(s,n){const a=new Blob([new Uint8Array(s)],{type:"image/png"});createImageBitmap(a).then(d=>{n(null,d)}).catch(d=>{n(new Error(`Could not load image because of ${d.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},c.b0=Mn,c.b1=function(s,n){var a=s[0],d=s[1],p=s[2],v=s[3],x=s[4],w=s[5],T=s[6],I=s[7],M=s[8],D=s[9],$=s[10],H=s[11],q=s[12],X=s[13],se=s[14],ue=s[15],be=n[0],me=n[1],Se=n[2],Te=n[3],Be=n[4],it=n[5],ft=n[6],rt=n[7],tt=n[8],Xe=n[9],ut=n[10],Je=n[11],Ve=n[12],bt=n[13],gt=n[14],Nt=n[15];return Math.abs(a-be)<=pi*Math.max(1,Math.abs(a),Math.abs(be))&&Math.abs(d-me)<=pi*Math.max(1,Math.abs(d),Math.abs(me))&&Math.abs(p-Se)<=pi*Math.max(1,Math.abs(p),Math.abs(Se))&&Math.abs(v-Te)<=pi*Math.max(1,Math.abs(v),Math.abs(Te))&&Math.abs(x-Be)<=pi*Math.max(1,Math.abs(x),Math.abs(Be))&&Math.abs(w-it)<=pi*Math.max(1,Math.abs(w),Math.abs(it))&&Math.abs(T-ft)<=pi*Math.max(1,Math.abs(T),Math.abs(ft))&&Math.abs(I-rt)<=pi*Math.max(1,Math.abs(I),Math.abs(rt))&&Math.abs(M-tt)<=pi*Math.max(1,Math.abs(M),Math.abs(tt))&&Math.abs(D-Xe)<=pi*Math.max(1,Math.abs(D),Math.abs(Xe))&&Math.abs($-ut)<=pi*Math.max(1,Math.abs($),Math.abs(ut))&&Math.abs(H-Je)<=pi*Math.max(1,Math.abs(H),Math.abs(Je))&&Math.abs(q-Ve)<=pi*Math.max(1,Math.abs(q),Math.abs(Ve))&&Math.abs(X-bt)<=pi*Math.max(1,Math.abs(X),Math.abs(bt))&&Math.abs(se-gt)<=pi*Math.max(1,Math.abs(se),Math.abs(gt))&&Math.abs(ue-Nt)<=pi*Math.max(1,Math.abs(ue),Math.abs(Nt))},c.b2=function(s,n){return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],s[9]=n[9],s[10]=n[10],s[11]=n[11],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15],s},c.b3=function(s,n,a){return s[0]=n[0]*a[0],s[1]=n[1]*a[1],s[2]=n[2]*a[2],s[3]=n[3]*a[3],s},c.b4=function(s,n){return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]+s[3]*n[3]},c.b5=ce,c.b6=u2,c.b7=a2,c.b8=function(s,n,a,d,p){var v,x=1/Math.tan(n/2);return s[0]=x/a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,p!=null&&p!==1/0?(s[10]=(p+d)*(v=1/(d-p)),s[14]=2*p*d*v):(s[10]=-1,s[14]=-2*d),s},c.b9=function(s,n,a){var d=Math.sin(a),p=Math.cos(a),v=n[4],x=n[5],w=n[6],T=n[7],I=n[8],M=n[9],D=n[10],$=n[11];return n!==s&&(s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[12]=n[12],s[13]=n[13],s[14]=n[14],s[15]=n[15]),s[4]=v*p+I*d,s[5]=x*p+M*d,s[6]=w*p+D*d,s[7]=T*p+$*d,s[8]=I*p-v*d,s[9]=M*p-x*d,s[10]=D*p-w*d,s[11]=$*p-T*d,s},c.bA=A,c.bB=Ow,c.bC=au,c.bD=Li,c.ba=fe,c.bb=ie,c.bc=function(s,n){return s[0]=n[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=n[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=n[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},c.bd=class extends oc{},c.be=kv,c.bf=l2,c.bg=lM,c.bi=at,c.bj=function(s,n,a=!1){if(di===fd||di===pd||di===md)throw new Error("setRTLTextPlugin cannot be called multiple times.");Hs=Ct.resolveURL(s),di=fd,gd=n,yd(),a||om()},c.bk=vd,c.bl=function(s,n){const a={};for(let p=0;p<s.length;p++){const v=n&&n[s[p].id]||hu(s[p]);n&&(n[s[p].id]=v);let x=a[v];x||(x=a[v]=[]),x.push(s[p])}const d=[];for(const p in a)d.push(a[p]);return d},c.bm=ct,c.bn=d2,c.bo=p2,c.bp=Hw,c.bq=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=on/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const n=s.bucket.layers[0],a=n.layout,d=n._unevaluatedLayout._values,p={layoutIconSize:d["icon-size"].possiblyEvaluate(new Cr(s.bucket.zoom+1),s.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Cr(s.bucket.zoom+1),s.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Cr(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:I,maxZoom:M}=s.bucket.textSizeData;p.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Cr(I),s.canonical),d["text-size"].possiblyEvaluate(new Cr(M),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:I,maxZoom:M}=s.bucket.iconSizeData;p.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Cr(I),s.canonical),d["icon-size"].possiblyEvaluate(new Cr(M),s.canonical)]}const v=a.get("text-line-height")*mn,x=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",w=a.get("text-keep-upright"),T=a.get("text-size");for(const I of s.bucket.features){const M=a.get("text-font").evaluate(I,{},s.canonical).join(","),D=T.evaluate(I,{},s.canonical),$=p.layoutTextSize.evaluate(I,{},s.canonical),H=p.layoutIconSize.evaluate(I,{},s.canonical),q={horizontal:{},vertical:void 0},X=I.text;let se,ue=[0,0];if(X){const Se=X.toString(),Te=a.get("text-letter-spacing").evaluate(I,{},s.canonical)*mn,Be=hd(Se)?Te:0,it=a.get("text-anchor").evaluate(I,{},s.canonical),ft=T2(n,I,s.canonical);if(!ft){const Je=a.get("text-radial-offset").evaluate(I,{},s.canonical);ue=Je?k2(it,[Je*mn,Iv]):a.get("text-offset").evaluate(I,{},s.canonical).map(Ve=>Ve*mn)}let rt=x?"center":a.get("text-justify").evaluate(I,{},s.canonical);const tt=a.get("symbol-placement"),Xe=tt==="point"?a.get("text-max-width").evaluate(I,{},s.canonical)*mn:0,ut=()=>{s.bucket.allowVerticalPlacement&&ud(Se)&&(q.vertical=wm(X,s.glyphMap,s.glyphPositions,s.imagePositions,M,Xe,v,it,"left",Be,ue,c.ai.vertical,!0,tt,$,D))};if(!x&&ft){const Je=new Set;if(rt==="auto")for(let bt=0;bt<ft.values.length;bt+=2)Je.add(Pv(ft.values[bt]));else Je.add(rt);let Ve=!1;for(const bt of Je)if(!q.horizontal[bt])if(Ve)q.horizontal[bt]=q.horizontal[0];else{const gt=wm(X,s.glyphMap,s.glyphPositions,s.imagePositions,M,Xe,v,"center",bt,Be,ue,c.ai.horizontal,!1,tt,$,D);gt&&(q.horizontal[bt]=gt,Ve=gt.positionedLines.length===1)}ut()}else{rt==="auto"&&(rt=Pv(it));const Je=wm(X,s.glyphMap,s.glyphPositions,s.imagePositions,M,Xe,v,it,rt,Be,ue,c.ai.horizontal,!1,tt,$,D);Je&&(q.horizontal[rt]=Je),ut(),ud(Se)&&x&&w&&(q.vertical=wm(X,s.glyphMap,s.glyphPositions,s.imagePositions,M,Xe,v,it,rt,Be,ue,c.ai.vertical,!1,tt,$,D))}}let be=!1;if(I.icon&&I.icon.name){const Se=s.imageMap[I.icon.name];Se&&(se=UA(s.imagePositions[I.icon.name],a.get("icon-offset").evaluate(I,{},s.canonical),a.get("icon-anchor").evaluate(I,{},s.canonical)),be=!!Se.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=be:s.bucket.sdfIcons!==be&&Ze("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Se.pixelRatio!==s.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const me=I2(q.horizontal)||q.vertical;s.bucket.iconsInText=!!me&&me.iconsInText,(me||se)&&sM(s.bucket,I,q,se,s.imageMap,p,$,H,ue,be,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},c.br=fv,c.bs=uv,c.bt=dv,c.bu=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},c.bv=mv,c.bw=ul,c.bx=function(s,n,a,d,p){return b(this,void 0,void 0,function*(){if(U())try{return yield Et(s,n,a,d,p)}catch{}return function(v,x,w,T,I){const M=v.width,D=v.height;mt&&Dt||(mt=new OffscreenCanvas(M,D),Dt=mt.getContext("2d",{willReadFrequently:!0})),mt.width=M,mt.height=D,Dt.drawImage(v,0,0,M,D);const $=Dt.getImageData(x,w,T,I);return Dt.clearRect(0,0,M,D),$.data}(s,n,a,d,p)})},c.by=h2,c.bz=k,c.c=Pt,c.d=function(s,n){const a=new Image;a.onload=()=>{n(null,a),URL.revokeObjectURL(a.src),a.onload=null,window.requestAnimationFrame(()=>{a.src=yt})},a.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const d=new Blob([new Uint8Array(s)],{type:"image/png"});a.src=s.byteLength?URL.createObjectURL(d):yt},c.e=Ce,c.f=function(s,n){return rn(Ce(s,{type:"json"}),n)},c.g=Rt,c.h=Ct,c.i=ot,c.j=Cn,c.k=ui,c.l=co,c.m=rn,c.n=function(s){return new mv(s).readFields(BA,[])},c.o=function(s,n,a){if(!s.length)return a(null,[]);let d=s.length;const p=new Array(s.length);let v=null;s.forEach((x,w)=>{n(x,(T,I)=>{T&&(v=T),p[w]=I,--d==0&&a(v,p)})})},c.p=Gw,c.q=Md,c.r=Xr,c.s=Ui,c.t=H0,c.u=nt,c.v=Me,c.w=Ze,c.x=pu,c.y=fs,c.z=function([s,n,a]){return n+=90,n*=Math.PI/180,a*=Math.PI/180,{x:s*Math.cos(n)*Math.sin(a),y:s*Math.sin(n)*Math.sin(a),z:s*Math.cos(a)}}}),h(["./shared"],function(c){class b{constructor(B){this.keyCache={},B&&this.replace(B)}replace(B){this._layerConfigs={},this._layers={},this.update(B,[])}update(B,N){for(const oe of B){this._layerConfigs[oe.id]=oe;const ae=this._layers[oe.id]=c.aC(oe);ae._featureFilter=c.a6(ae.filter),this.keyCache[oe.id]&&delete this.keyCache[oe.id]}for(const oe of N)delete this.keyCache[oe],delete this._layerConfigs[oe],delete this._layers[oe];this.familiesBySource={};const Z=c.bl(Object.values(this._layerConfigs),this.keyCache);for(const oe of Z){const ae=oe.map(Le=>this._layers[Le.id]),we=ae[0];if(we.visibility==="none")continue;const ye=we.source||"";let he=this.familiesBySource[ye];he||(he=this.familiesBySource[ye]={});const xe=we.sourceLayer||"_geojsonTileLayer";let ze=he[xe];ze||(ze=he[xe]=[]),ze.push(ae)}}}class k{constructor(B){const N={},Z=[];for(const ye in B){const he=B[ye],xe=N[ye]={};for(const ze in he){const Le=he[+ze];if(!Le||Le.bitmap.width===0||Le.bitmap.height===0)continue;const $e={x:0,y:0,w:Le.bitmap.width+2,h:Le.bitmap.height+2};Z.push($e),xe[ze]={rect:$e,metrics:Le.metrics}}}const{w:oe,h:ae}=c.p(Z),we=new c.q({width:oe||1,height:ae||1});for(const ye in B){const he=B[ye];for(const xe in he){const ze=he[+xe];if(!ze||ze.bitmap.width===0||ze.bitmap.height===0)continue;const Le=N[ye][xe].rect;c.q.copy(ze.bitmap,we,{x:0,y:0},{x:Le.x+1,y:Le.y+1},ze.bitmap)}}this.image=we,this.positions=N}}c.bm("GlyphAtlas",k);class A{constructor(B){this.tileID=new c.O(B.tileID.overscaledZ,B.tileID.wrap,B.tileID.canonical.z,B.tileID.canonical.x,B.tileID.canonical.y),this.uid=B.uid,this.zoom=B.zoom,this.pixelRatio=B.pixelRatio,this.tileSize=B.tileSize,this.source=B.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=B.showCollisionBoxes,this.collectResourceTiming=!!B.collectResourceTiming,this.returnDependencies=!!B.returnDependencies,this.promoteId=B.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(B,N,Z,oe,ae){this.status="parsing",this.data=B,this.collisionBoxArray=new c.a3;const we=new c.bn(Object.keys(B.layers).sort()),ye=new c.bo(this.tileID,this.promoteId);ye.bucketLayerIDs=[];const he={},xe={featureIndex:ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Z},ze=N.familiesBySource[this.source];for(const Jt in ze){const Yt=B.layers[Jt];if(!Yt)continue;Yt.version===1&&c.w(`Vector tile source "${this.source}" layer "${Jt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const $n=we.encode(Jt),xr=[];for(let nn=0;nn<Yt.length;nn++){const Pn=Yt.feature(nn),Wi=ye.getId(Pn,Jt);xr.push({feature:Pn,id:Wi,index:nn,sourceLayerIndex:$n})}for(const nn of ze[Jt]){const Pn=nn[0];Pn.source!==this.source&&c.w(`layer.source = ${Pn.source} does not equal this.source = ${this.source}`),Pn.minzoom&&this.zoom<Math.floor(Pn.minzoom)||Pn.maxzoom&&this.zoom>=Pn.maxzoom||Pn.visibility!=="none"&&(R(nn,this.zoom,Z),(he[Pn.id]=Pn.createBucket({index:ye.bucketLayerIDs.length,layers:nn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:$n,sourceID:this.source})).populate(xr,xe,this.tileID.canonical),ye.bucketLayerIDs.push(nn.map(Wi=>Wi.id)))}}let Le,$e,xt,It;const ht=c.aH(xe.glyphDependencies,Jt=>Object.keys(Jt).map(Number));this.inFlightDependencies.forEach(Jt=>Jt==null?void 0:Jt.cancel()),this.inFlightDependencies=[];const wt=++this.dependencySentinel;Object.keys(ht).length?this.inFlightDependencies.push(oe.send("getGlyphs",{uid:this.uid,stacks:ht,source:this.source,tileID:this.tileID,type:"glyphs"},(Jt,Yt)=>{wt===this.dependencySentinel&&(Le||(Le=Jt,$e=Yt,pr.call(this)))})):$e={};const zt=Object.keys(xe.iconDependencies);zt.length?this.inFlightDependencies.push(oe.send("getImages",{icons:zt,source:this.source,tileID:this.tileID,type:"icons"},(Jt,Yt)=>{wt===this.dependencySentinel&&(Le||(Le=Jt,xt=Yt,pr.call(this)))})):xt={};const ir=Object.keys(xe.patternDependencies);function pr(){if(Le)return ae(Le);if($e&&xt&&It){const Jt=new k($e),Yt=new c.bp(xt,It);for(const $n in he){const xr=he[$n];xr instanceof c.a4?(R(xr.layers,this.zoom,Z),c.bq({bucket:xr,glyphMap:$e,glyphPositions:Jt.positions,imageMap:xt,imagePositions:Yt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):xr.hasPattern&&(xr instanceof c.br||xr instanceof c.bs||xr instanceof c.bt)&&(R(xr.layers,this.zoom,Z),xr.addFeatures(xe,this.tileID.canonical,Yt.patternPositions))}this.status="done",ae(null,{buckets:Object.values(he).filter($n=>!$n.isEmpty()),featureIndex:ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Jt.image,imageAtlas:Yt,glyphMap:this.returnDependencies?$e:null,iconMap:this.returnDependencies?xt:null,glyphPositions:this.returnDependencies?Jt.positions:null})}}ir.length?this.inFlightDependencies.push(oe.send("getImages",{icons:ir,source:this.source,tileID:this.tileID,type:"patterns"},(Jt,Yt)=>{wt===this.dependencySentinel&&(Le||(Le=Jt,It=Yt,pr.call(this)))})):It={},pr.call(this)}}function R(re,B,N){const Z=new c.a8(B);for(const oe of re)oe.recalculate(Z,N)}function O(re,B){const N=c.l(re.request,(Z,oe,ae,we)=>{if(Z)B(Z);else if(oe)try{const ye=new c.bw.VectorTile(new c.bv(oe));B(null,{vectorTile:ye,rawData:oe,cacheControl:ae,expires:we})}catch(ye){const he=new Uint8Array(oe);let xe=`Unable to parse the tile at ${re.request.url}, `;xe+=he[0]===31&&he[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ye.messge}`,B(new Error(xe))}});return()=>{N.cancel(),B()}}class Q{constructor(B,N,Z,oe){this.actor=B,this.layerIndex=N,this.availableImages=Z,this.loadVectorData=oe||O,this.fetching={},this.loading={},this.loaded={}}loadTile(B,N){const Z=B.uid;this.loading||(this.loading={});const oe=!!(B&&B.request&&B.request.collectResourceTiming)&&new c.bu(B.request),ae=this.loading[Z]=new A(B);ae.abort=this.loadVectorData(B,(we,ye)=>{if(delete this.loading[Z],we||!ye)return ae.status="done",this.loaded[Z]=ae,N(we);const he=ye.rawData,xe={};ye.expires&&(xe.expires=ye.expires),ye.cacheControl&&(xe.cacheControl=ye.cacheControl);const ze={};if(oe){const Le=oe.finish();Le&&(ze.resourceTiming=JSON.parse(JSON.stringify(Le)))}ae.vectorTile=ye.vectorTile,ae.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,(Le,$e)=>{if(delete this.fetching[Z],Le||!$e)return N(Le);N(null,c.e({rawTileData:he.slice(0)},$e,xe,ze))}),this.loaded=this.loaded||{},this.loaded[Z]=ae,this.fetching[Z]={rawTileData:he,cacheControl:xe,resourceTiming:ze}})}reloadTile(B,N){const Z=this.loaded,oe=B.uid;if(Z&&Z[oe]){const ae=Z[oe];ae.showCollisionBoxes=B.showCollisionBoxes,ae.status==="parsing"?ae.parse(ae.vectorTile,this.layerIndex,this.availableImages,this.actor,(we,ye)=>{if(we||!ye)return N(we,ye);let he;if(this.fetching[oe]){const{rawTileData:xe,cacheControl:ze,resourceTiming:Le}=this.fetching[oe];delete this.fetching[oe],he=c.e({rawTileData:xe.slice(0)},ye,ze,Le)}else he=ye;N(null,he)}):ae.status==="done"&&(ae.vectorTile?ae.parse(ae.vectorTile,this.layerIndex,this.availableImages,this.actor,N):N())}}abortTile(B,N){const Z=this.loading,oe=B.uid;Z&&Z[oe]&&Z[oe].abort&&(Z[oe].abort(),delete Z[oe]),N()}removeTile(B,N){const Z=this.loaded,oe=B.uid;Z&&Z[oe]&&delete Z[oe],N()}}class te{constructor(){this.loaded={}}loadTile(B,N){return c._(this,void 0,void 0,function*(){const{uid:Z,encoding:oe,rawImageData:ae,redFactor:we,greenFactor:ye,blueFactor:he,baseShift:xe}=B,ze=ae.width+2,Le=ae.height+2,$e=c.a(ae)?new c.R({width:ze,height:Le},yield c.bx(ae,-1,-1,ze,Le)):ae,xt=new c.by(Z,$e,oe,we,ye,he,xe);this.loaded=this.loaded||{},this.loaded[Z]=xt,N(null,xt)})}removeTile(B){const N=this.loaded,Z=B.uid;N&&N[Z]&&delete N[Z]}}function ee(re,B){if(re.length!==0){de(re[0],B);for(var N=1;N<re.length;N++)de(re[N],!B)}}function de(re,B){for(var N=0,Z=0,oe=0,ae=re.length,we=ae-1;oe<ae;we=oe++){var ye=(re[oe][0]-re[we][0])*(re[we][1]+re[oe][1]),he=N+ye;Z+=Math.abs(N)>=Math.abs(ye)?N-he+ye:ye-he+N,N=he}N+Z>=0!=!!B&&re.reverse()}var G=c.bz(function re(B,N){var Z,oe=B&&B.type;if(oe==="FeatureCollection")for(Z=0;Z<B.features.length;Z++)re(B.features[Z],N);else if(oe==="GeometryCollection")for(Z=0;Z<B.geometries.length;Z++)re(B.geometries[Z],N);else if(oe==="Feature")re(B.geometry,N);else if(oe==="Polygon")ee(B.coordinates,N);else if(oe==="MultiPolygon")for(Z=0;Z<B.coordinates.length;Z++)ee(B.coordinates[Z],N);return B});const j=c.bw.VectorTileFeature.prototype.toGeoJSON;var U={exports:{}},fe=c.bA,ie=c.bw.VectorTileFeature,F=ce;function ce(re,B){this.options=B||{},this.features=re,this.length=re.length}function Ce(re,B){this.id=typeof re.id=="number"?re.id:void 0,this.type=re.type,this.rawGeometry=re.type===1?[re.geometry]:re.geometry,this.properties=re.tags,this.extent=B||4096}ce.prototype.feature=function(re){return new Ce(this.features[re],this.options.extent)},Ce.prototype.loadGeometry=function(){var re=this.rawGeometry;this.geometry=[];for(var B=0;B<re.length;B++){for(var N=re[B],Z=[],oe=0;oe<N.length;oe++)Z.push(new fe(N[oe][0],N[oe][1]));this.geometry.push(Z)}return this.geometry},Ce.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var re=this.geometry,B=1/0,N=-1/0,Z=1/0,oe=-1/0,ae=0;ae<re.length;ae++)for(var we=re[ae],ye=0;ye<we.length;ye++){var he=we[ye];B=Math.min(B,he.x),N=Math.max(N,he.x),Z=Math.min(Z,he.y),oe=Math.max(oe,he.y)}return[B,Z,N,oe]},Ce.prototype.toGeoJSON=ie.prototype.toGeoJSON;var Ue=c.bB,Ae=F;function Re(re){var B=new Ue;return function(N,Z){for(var oe in N.layers)Z.writeMessage(3,We,N.layers[oe])}(re,B),B.finish()}function We(re,B){var N;B.writeVarintField(15,re.version||1),B.writeStringField(1,re.name||""),B.writeVarintField(5,re.extent||4096);var Z={keys:[],values:[],keycache:{},valuecache:{}};for(N=0;N<re.length;N++)Z.feature=re.feature(N),B.writeMessage(2,He,Z);var oe=Z.keys;for(N=0;N<oe.length;N++)B.writeStringField(3,oe[N]);var ae=Z.values;for(N=0;N<ae.length;N++)B.writeMessage(4,Pe,ae[N])}function He(re,B){var N=re.feature;N.id!==void 0&&B.writeVarintField(1,N.id),B.writeMessage(2,Ze,re),B.writeVarintField(3,N.type),B.writeMessage(4,ot,N)}function Ze(re,B){var N=re.feature,Z=re.keys,oe=re.values,ae=re.keycache,we=re.valuecache;for(var ye in N.properties){var he=N.properties[ye],xe=ae[ye];if(he!==null){xe===void 0&&(Z.push(ye),ae[ye]=xe=Z.length-1),B.writeVarint(xe);var ze=typeof he;ze!=="string"&&ze!=="boolean"&&ze!=="number"&&(he=JSON.stringify(he));var Le=ze+":"+he,$e=we[Le];$e===void 0&&(oe.push(he),we[Le]=$e=oe.length-1),B.writeVarint($e)}}}function Ge(re,B){return(B<<3)+(7&re)}function Fe(re){return re<<1^re>>31}function ot(re,B){for(var N=re.loadGeometry(),Z=re.type,oe=0,ae=0,we=N.length,ye=0;ye<we;ye++){var he=N[ye],xe=1;Z===1&&(xe=he.length),B.writeVarint(Ge(1,xe));for(var ze=Z===3?he.length-1:he.length,Le=0;Le<ze;Le++){Le===1&&Z!==1&&B.writeVarint(Ge(2,ze-1));var $e=he[Le].x-oe,xt=he[Le].y-ae;B.writeVarint(Fe($e)),B.writeVarint(Fe(xt)),oe+=$e,ae+=xt}Z===3&&B.writeVarint(Ge(7,1))}}function Pe(re,B){var N=typeof re;N==="string"?B.writeStringField(1,re):N==="boolean"?B.writeBooleanField(7,re):N==="number"&&(re%1!=0?B.writeDoubleField(3,re):re<0?B.writeSVarintField(6,re):B.writeVarintField(5,re))}U.exports=Re,U.exports.fromVectorTileJs=Re,U.exports.fromGeojsonVt=function(re,B){B=B||{};var N={};for(var Z in re)N[Z]=new Ae(re[Z].features,B),N[Z].name=Z,N[Z].version=B.version,N[Z].extent=B.extent;return Re({layers:N})},U.exports.GeoJSONWrapper=Ae;var st=c.bz(U.exports);const yt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:re=>re},Et=Math.fround||(mt=new Float32Array(1),re=>(mt[0]=+re,mt[0]));var mt;const Dt=3,jt=5,_r=6;class Ct{constructor(B){this.options=Object.assign(Object.create(yt),B),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(B){const{log:N,minZoom:Z,maxZoom:oe}=this.options;N&&console.time("total time");const ae=`prepare ${B.length} points`;N&&console.time(ae),this.points=B;const we=[];for(let he=0;he<B.length;he++){const xe=B[he];if(!xe.geometry)continue;const[ze,Le]=xe.geometry.coordinates,$e=Et(At(ze)),xt=Et(Rt(Le));we.push($e,xt,1/0,he,-1,1),this.options.reduce&&we.push(0)}let ye=this.trees[oe+1]=this._createTree(we);N&&console.timeEnd(ae);for(let he=oe;he>=Z;he--){const xe=+Date.now();ye=this.trees[he]=this._createTree(this._cluster(ye,he)),N&&console.log("z%d: %d clusters in %dms",he,ye.numItems,+Date.now()-xe)}return N&&console.timeEnd("total time"),this}getClusters(B,N){let Z=((B[0]+180)%360+360)%360-180;const oe=Math.max(-90,Math.min(90,B[1]));let ae=B[2]===180?180:((B[2]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,B[3]));if(B[2]-B[0]>=360)Z=-180,ae=180;else if(Z>ae){const Le=this.getClusters([Z,oe,180,we],N),$e=this.getClusters([-180,oe,ae,we],N);return Le.concat($e)}const ye=this.trees[this._limitZoom(N)],he=ye.range(At(Z),Rt(we),At(ae),Rt(oe)),xe=ye.data,ze=[];for(const Le of he){const $e=this.stride*Le;ze.push(xe[$e+jt]>1?Pt(xe,$e,this.clusterProps):this.points[xe[$e+Dt]])}return ze}getChildren(B){const N=this._getOriginId(B),Z=this._getOriginZoom(B),oe="No cluster with the specified id.",ae=this.trees[Z];if(!ae)throw new Error(oe);const we=ae.data;if(N*this.stride>=we.length)throw new Error(oe);const ye=this.options.radius/(this.options.extent*Math.pow(2,Z-1)),he=ae.within(we[N*this.stride],we[N*this.stride+1],ye),xe=[];for(const ze of he){const Le=ze*this.stride;we[Le+4]===B&&xe.push(we[Le+jt]>1?Pt(we,Le,this.clusterProps):this.points[we[Le+Dt]])}if(xe.length===0)throw new Error(oe);return xe}getLeaves(B,N,Z){const oe=[];return this._appendLeaves(oe,B,N=N||10,Z=Z||0,0),oe}getTile(B,N,Z){const oe=this.trees[this._limitZoom(B)],ae=Math.pow(2,B),{extent:we,radius:ye}=this.options,he=ye/we,xe=(Z-he)/ae,ze=(Z+1+he)/ae,Le={features:[]};return this._addTileFeatures(oe.range((N-he)/ae,xe,(N+1+he)/ae,ze),oe.data,N,Z,ae,Le),N===0&&this._addTileFeatures(oe.range(1-he/ae,xe,1,ze),oe.data,ae,Z,ae,Le),N===ae-1&&this._addTileFeatures(oe.range(0,xe,he/ae,ze),oe.data,-1,Z,ae,Le),Le.features.length?Le:null}getClusterExpansionZoom(B){let N=this._getOriginZoom(B)-1;for(;N<=this.options.maxZoom;){const Z=this.getChildren(B);if(N++,Z.length!==1)break;B=Z[0].properties.cluster_id}return N}_appendLeaves(B,N,Z,oe,ae){const we=this.getChildren(N);for(const ye of we){const he=ye.properties;if(he&&he.cluster?ae+he.point_count<=oe?ae+=he.point_count:ae=this._appendLeaves(B,he.cluster_id,Z,oe,ae):ae<oe?ae++:B.push(ye),B.length===Z)break}return ae}_createTree(B){const N=new c.av(B.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Z=0;Z<B.length;Z+=this.stride)N.add(B[Z],B[Z+1]);return N.finish(),N.data=B,N}_addTileFeatures(B,N,Z,oe,ae,we){for(const ye of B){const he=ye*this.stride,xe=N[he+jt]>1;let ze,Le,$e;if(xe)ze=at(N,he,this.clusterProps),Le=N[he],$e=N[he+1];else{const ht=this.points[N[he+Dt]];ze=ht.properties;const[wt,zt]=ht.geometry.coordinates;Le=At(wt),$e=Rt(zt)}const xt={type:1,geometry:[[Math.round(this.options.extent*(Le*ae-Z)),Math.round(this.options.extent*($e*ae-oe))]],tags:ze};let It;It=xe||this.options.generateId?N[he+Dt]:this.points[N[he+Dt]].id,It!==void 0&&(xt.id=It),we.features.push(xt)}}_limitZoom(B){return Math.max(this.options.minZoom,Math.min(Math.floor(+B),this.options.maxZoom+1))}_cluster(B,N){const{radius:Z,extent:oe,reduce:ae,minPoints:we}=this.options,ye=Z/(oe*Math.pow(2,N)),he=B.data,xe=[],ze=this.stride;for(let Le=0;Le<he.length;Le+=ze){if(he[Le+2]<=N)continue;he[Le+2]=N;const $e=he[Le],xt=he[Le+1],It=B.within(he[Le],he[Le+1],ye),ht=he[Le+jt];let wt=ht;for(const zt of It){const ir=zt*ze;he[ir+2]>N&&(wt+=he[ir+jt])}if(wt>ht&&wt>=we){let zt,ir=$e*ht,pr=xt*ht,Jt=-1;const Yt=((Le/ze|0)<<5)+(N+1)+this.points.length;for(const $n of It){const xr=$n*ze;if(he[xr+2]<=N)continue;he[xr+2]=N;const nn=he[xr+jt];ir+=he[xr]*nn,pr+=he[xr+1]*nn,he[xr+4]=Yt,ae&&(zt||(zt=this._map(he,Le,!0),Jt=this.clusterProps.length,this.clusterProps.push(zt)),ae(zt,this._map(he,xr)))}he[Le+4]=Yt,xe.push(ir/wt,pr/wt,1/0,Yt,-1,wt),ae&&xe.push(Jt)}else{for(let zt=0;zt<ze;zt++)xe.push(he[Le+zt]);if(wt>1)for(const zt of It){const ir=zt*ze;if(!(he[ir+2]<=N)){he[ir+2]=N;for(let pr=0;pr<ze;pr++)xe.push(he[ir+pr])}}}}return xe}_getOriginId(B){return B-this.points.length>>5}_getOriginZoom(B){return(B-this.points.length)%32}_map(B,N,Z){if(B[N+jt]>1){const we=this.clusterProps[B[N+_r]];return Z?Object.assign({},we):we}const oe=this.points[B[N+Dt]].properties,ae=this.options.map(oe);return Z&&ae===oe?Object.assign({},ae):ae}}function Pt(re,B,N){return{type:"Feature",id:re[B+Dt],properties:at(re,B,N),geometry:{type:"Point",coordinates:[(Z=re[B],360*(Z-.5)),or(re[B+1])]}};var Z}function at(re,B,N){const Z=re[B+jt],oe=Z>=1e4?`${Math.round(Z/1e3)}k`:Z>=1e3?Math.round(Z/100)/10+"k":Z,ae=re[B+_r],we=ae===-1?{}:Object.assign({},N[ae]);return Object.assign(we,{cluster:!0,cluster_id:re[B+Dt],point_count:Z,point_count_abbreviated:oe})}function At(re){return re/360+.5}function Rt(re){const B=Math.sin(re*Math.PI/180),N=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return N<0?0:N>1?1:N}function or(re){const B=(180-360*re)*Math.PI/180;return 360*Math.atan(Math.exp(B))/Math.PI-90}function rn(re,B,N,Z){for(var oe,ae=Z,we=N-B>>1,ye=N-B,he=re[B],xe=re[B+1],ze=re[N],Le=re[N+1],$e=B+3;$e<N;$e+=3){var xt=co(re[$e],re[$e+1],he,xe,ze,Le);if(xt>ae)oe=$e,ae=xt;else if(xt===ae){var It=Math.abs($e-we);It<ye&&(oe=$e,ye=It)}}ae>Z&&(oe-B>3&&rn(re,B,oe,Z),re[oe+2]=ae,N-oe>3&&rn(re,oe,N,Z))}function co(re,B,N,Z,oe,ae){var we=oe-N,ye=ae-Z;if(we!==0||ye!==0){var he=((re-N)*we+(B-Z)*ye)/(we*we+ye*ye);he>1?(N=oe,Z=ae):he>0&&(N+=we*he,Z+=ye*he)}return(we=re-N)*we+(ye=B-Z)*ye}function Ui(re,B,N,Z){var oe={id:re===void 0?null:re,type:B,geometry:N,tags:Z,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ae){var we=ae.geometry,ye=ae.type;if(ye==="Point"||ye==="MultiPoint"||ye==="LineString")$s(ae,we);else if(ye==="Polygon"||ye==="MultiLineString")for(var he=0;he<we.length;he++)$s(ae,we[he]);else if(ye==="MultiPolygon")for(he=0;he<we.length;he++)for(var xe=0;xe<we[he].length;xe++)$s(ae,we[he][xe])}(oe),oe}function $s(re,B){for(var N=0;N<B.length;N+=3)re.minX=Math.min(re.minX,B[N]),re.minY=Math.min(re.minY,B[N+1]),re.maxX=Math.max(re.maxX,B[N]),re.maxY=Math.max(re.maxY,B[N+1])}function Do(re,B,N,Z){if(B.geometry){var oe=B.geometry.coordinates,ae=B.geometry.type,we=Math.pow(N.tolerance/((1<<N.maxZoom)*N.extent),2),ye=[],he=B.id;if(N.promoteId?he=B.properties[N.promoteId]:N.generateId&&(he=Z||0),ae==="Point")ui(oe,ye);else if(ae==="MultiPoint")for(var xe=0;xe<oe.length;xe++)ui(oe[xe],ye);else if(ae==="LineString")Cn(oe,ye,we,!1);else if(ae==="MultiLineString"){if(N.lineMetrics){for(xe=0;xe<oe.length;xe++)Cn(oe[xe],ye=[],we,!1),re.push(Ui(he,"LineString",ye,B.properties));return}as(oe,ye,we,!1)}else if(ae==="Polygon")as(oe,ye,we,!0);else{if(ae!=="MultiPolygon"){if(ae==="GeometryCollection"){for(xe=0;xe<B.geometry.geometries.length;xe++)Do(re,{id:he,geometry:B.geometry.geometries[xe],properties:B.properties},N,Z);return}throw new Error("Input data is not a valid GeoJSON object.")}for(xe=0;xe<oe.length;xe++){var ze=[];as(oe[xe],ze,we,!0),ye.push(ze)}}re.push(Ui(he,ae,ye,B.properties))}}function ui(re,B){B.push(Me(re[0])),B.push(Bn(re[1])),B.push(0)}function Cn(re,B,N,Z){for(var oe,ae,we=0,ye=0;ye<re.length;ye++){var he=Me(re[ye][0]),xe=Bn(re[ye][1]);B.push(he),B.push(xe),B.push(0),ye>0&&(we+=Z?(oe*xe-he*ae)/2:Math.sqrt(Math.pow(he-oe,2)+Math.pow(xe-ae,2))),oe=he,ae=xe}var ze=B.length-3;B[2]=1,rn(B,0,ze,N),B[ze+2]=1,B.size=Math.abs(we),B.start=0,B.end=B.size}function as(re,B,N,Z){for(var oe=0;oe<re.length;oe++){var ae=[];Cn(re[oe],ae,N,Z),B.push(ae)}}function Me(re){return re/360+.5}function Bn(re){var B=Math.sin(re*Math.PI/180),N=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return N<0?0:N>1?1:N}function Yn(re,B,N,Z,oe,ae,we,ye){if(Z/=B,ae>=(N/=B)&&we<Z)return re;if(we<N||ae>=Z)return null;for(var he=[],xe=0;xe<re.length;xe++){var ze=re[xe],Le=ze.geometry,$e=ze.type,xt=oe===0?ze.minX:ze.minY,It=oe===0?ze.maxX:ze.maxY;if(xt>=N&&It<Z)he.push(ze);else if(!(It<N||xt>=Z)){var ht=[];if($e==="Point"||$e==="MultiPoint")Ut(Le,ht,N,Z,oe);else if($e==="LineString")Zt(Le,ht,N,Z,oe,!1,ye.lineMetrics);else if($e==="MultiLineString")Fs(Le,ht,N,Z,oe,!1);else if($e==="Polygon")Fs(Le,ht,N,Z,oe,!0);else if($e==="MultiPolygon")for(var wt=0;wt<Le.length;wt++){var zt=[];Fs(Le[wt],zt,N,Z,oe,!0),zt.length&&ht.push(zt)}if(ht.length){if(ye.lineMetrics&&$e==="LineString"){for(wt=0;wt<ht.length;wt++)he.push(Ui(ze.id,$e,ht[wt],ze.tags));continue}$e!=="LineString"&&$e!=="MultiLineString"||(ht.length===1?($e="LineString",ht=ht[0]):$e="MultiLineString"),$e!=="Point"&&$e!=="MultiPoint"||($e=ht.length===3?"Point":"MultiPoint"),he.push(Ui(ze.id,$e,ht,ze.tags))}}}return he.length?he:null}function Ut(re,B,N,Z,oe){for(var ae=0;ae<re.length;ae+=3){var we=re[ae+oe];we>=N&&we<=Z&&(B.push(re[ae]),B.push(re[ae+1]),B.push(re[ae+2]))}}function Zt(re,B,N,Z,oe,ae,we){for(var ye,he,xe=Ii(re),ze=oe===0?ua:dn,Le=re.start,$e=0;$e<re.length-3;$e+=3){var xt=re[$e],It=re[$e+1],ht=re[$e+2],wt=re[$e+3],zt=re[$e+4],ir=oe===0?xt:It,pr=oe===0?wt:zt,Jt=!1;we&&(ye=Math.sqrt(Math.pow(xt-wt,2)+Math.pow(It-zt,2))),ir<N?pr>N&&(he=ze(xe,xt,It,wt,zt,N),we&&(xe.start=Le+ye*he)):ir>Z?pr<Z&&(he=ze(xe,xt,It,wt,zt,Z),we&&(xe.start=Le+ye*he)):Gi(xe,xt,It,ht),pr<N&&ir>=N&&(he=ze(xe,xt,It,wt,zt,N),Jt=!0),pr>Z&&ir<=Z&&(he=ze(xe,xt,It,wt,zt,Z),Jt=!0),!ae&&Jt&&(we&&(xe.end=Le+ye*he),B.push(xe),xe=Ii(re)),we&&(Le+=ye)}var Yt=re.length-3;xt=re[Yt],It=re[Yt+1],ht=re[Yt+2],(ir=oe===0?xt:It)>=N&&ir<=Z&&Gi(xe,xt,It,ht),Yt=xe.length-3,ae&&Yt>=3&&(xe[Yt]!==xe[0]||xe[Yt+1]!==xe[1])&&Gi(xe,xe[0],xe[1],xe[2]),xe.length&&B.push(xe)}function Ii(re){var B=[];return B.size=re.size,B.start=re.start,B.end=re.end,B}function Fs(re,B,N,Z,oe,ae){for(var we=0;we<re.length;we++)Zt(re[we],B,N,Z,oe,ae,!1)}function Gi(re,B,N,Z){re.push(B),re.push(N),re.push(Z)}function ua(re,B,N,Z,oe,ae){var we=(ae-B)/(Z-B);return re.push(ae),re.push(N+(oe-N)*we),re.push(1),we}function dn(re,B,N,Z,oe,ae){var we=(ae-N)/(oe-N);return re.push(B+(Z-B)*we),re.push(ae),re.push(1),we}function kn(re,B){for(var N=[],Z=0;Z<re.length;Z++){var oe,ae=re[Z],we=ae.type;if(we==="Point"||we==="MultiPoint"||we==="LineString")oe=Hi(ae.geometry,B);else if(we==="MultiLineString"||we==="Polygon"){oe=[];for(var ye=0;ye<ae.geometry.length;ye++)oe.push(Hi(ae.geometry[ye],B))}else if(we==="MultiPolygon")for(oe=[],ye=0;ye<ae.geometry.length;ye++){for(var he=[],xe=0;xe<ae.geometry[ye].length;xe++)he.push(Hi(ae.geometry[ye][xe],B));oe.push(he)}N.push(Ui(ae.id,we,oe,ae.tags))}return N}function Hi(re,B){var N=[];N.size=re.size,re.start!==void 0&&(N.start=re.start,N.end=re.end);for(var Z=0;Z<re.length;Z+=3)N.push(re[Z]+B,re[Z+1],re[Z+2]);return N}function Ke(re,B){if(re.transformed)return re;var N,Z,oe,ae=1<<re.z,we=re.x,ye=re.y;for(N=0;N<re.features.length;N++){var he=re.features[N],xe=he.geometry,ze=he.type;if(he.geometry=[],ze===1)for(Z=0;Z<xe.length;Z+=2)he.geometry.push(qi(xe[Z],xe[Z+1],B,ae,we,ye));else for(Z=0;Z<xe.length;Z++){var Le=[];for(oe=0;oe<xe[Z].length;oe+=2)Le.push(qi(xe[Z][oe],xe[Z][oe+1],B,ae,we,ye));he.geometry.push(Le)}}return re.transformed=!0,re}function qi(re,B,N,Z,oe,ae){return[Math.round(N*(re*Z-oe)),Math.round(N*(B*Z-ae))]}function er(re,B,N,Z,oe){for(var ae=B===oe.maxZoom?0:oe.tolerance/((1<<B)*oe.extent),we={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:N,y:Z,z:B,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ye=0;ye<re.length;ye++){we.numFeatures++,uo(we,re[ye],ae,oe);var he=re[ye].minX,xe=re[ye].minY,ze=re[ye].maxX,Le=re[ye].maxY;he<we.minX&&(we.minX=he),xe<we.minY&&(we.minY=xe),ze>we.maxX&&(we.maxX=ze),Le>we.maxY&&(we.maxY=Le)}return we}function uo(re,B,N,Z){var oe=B.geometry,ae=B.type,we=[];if(ae==="Point"||ae==="MultiPoint")for(var ye=0;ye<oe.length;ye+=3)we.push(oe[ye]),we.push(oe[ye+1]),re.numPoints++,re.numSimplified++;else if(ae==="LineString")ls(we,oe,re,N,!1,!1);else if(ae==="MultiLineString"||ae==="Polygon")for(ye=0;ye<oe.length;ye++)ls(we,oe[ye],re,N,ae==="Polygon",ye===0);else if(ae==="MultiPolygon")for(var he=0;he<oe.length;he++){var xe=oe[he];for(ye=0;ye<xe.length;ye++)ls(we,xe[ye],re,N,!0,ye===0)}if(we.length){var ze=B.tags||null;if(ae==="LineString"&&Z.lineMetrics){for(var Le in ze={},B.tags)ze[Le]=B.tags[Le];ze.mapbox_clip_start=oe.start/oe.size,ze.mapbox_clip_end=oe.end/oe.size}var $e={geometry:we,type:ae==="Polygon"||ae==="MultiPolygon"?3:ae==="LineString"||ae==="MultiLineString"?2:1,tags:ze};B.id!==null&&($e.id=B.id),re.features.push($e)}}function ls(re,B,N,Z,oe,ae){var we=Z*Z;if(Z>0&&B.size<(oe?we:Z))N.numPoints+=B.length/3;else{for(var ye=[],he=0;he<B.length;he+=3)(Z===0||B[he+2]>we)&&(N.numSimplified++,ye.push(B[he]),ye.push(B[he+1])),N.numPoints++;oe&&function(xe,ze){for(var Le=0,$e=0,xt=xe.length,It=xt-2;$e<xt;It=$e,$e+=2)Le+=(xe[$e]-xe[It])*(xe[$e+1]+xe[It+1]);if(Le>0===ze)for($e=0,xt=xe.length;$e<xt/2;$e+=2){var ht=xe[$e],wt=xe[$e+1];xe[$e]=xe[xt-2-$e],xe[$e+1]=xe[xt-1-$e],xe[xt-2-$e]=ht,xe[xt-1-$e]=wt}}(ye,ae),re.push(ye)}}function Qe(re,B){var N=(B=this.options=function(oe,ae){for(var we in ae)oe[we]=ae[we];return oe}(Object.create(this.options),B)).debug;if(N&&console.time("preprocess data"),B.maxZoom<0||B.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(B.promoteId&&B.generateId)throw new Error("promoteId and generateId cannot be used together.");var Z=function(oe,ae){var we=[];if(oe.type==="FeatureCollection")for(var ye=0;ye<oe.features.length;ye++)Do(we,oe.features[ye],ae,ye);else Do(we,oe.type==="Feature"?oe:{geometry:oe},ae);return we}(re,B);this.tiles={},this.tileCoords=[],N&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",B.indexMaxZoom,B.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Z=function(oe,ae){var we=ae.buffer/ae.extent,ye=oe,he=Yn(oe,1,-1-we,we,0,-1,2,ae),xe=Yn(oe,1,1-we,2+we,0,-1,2,ae);return(he||xe)&&(ye=Yn(oe,1,-we,1+we,0,-1,2,ae)||[],he&&(ye=kn(he,1).concat(ye)),xe&&(ye=ye.concat(kn(xe,-1)))),ye}(Z,B),Z.length&&this.splitTile(Z,0,0,0),N&&(Z.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ft(re,B,N){return 32*((1<<re)*N+B)+re}function Mt(re,B){return B?re.properties[B]:re.id}function Jn(re,B){if(re==null)return!0;if(re.type==="Feature")return Mt(re,B)!=null;if(re.type==="FeatureCollection"){const N=new Set;for(const Z of re.features){const oe=Mt(Z,B);if(oe==null||N.has(oe))return!1;N.add(oe)}return!0}return!1}function Ro(re,B){const N=new Map;if(re!=null)if(re.type==="Feature")N.set(Mt(re,B),re);else for(const Z of re.features)N.set(Mt(Z,B),Z);return N}Qe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Qe.prototype.splitTile=function(re,B,N,Z,oe,ae,we){for(var ye=[re,B,N,Z],he=this.options,xe=he.debug;ye.length;){Z=ye.pop(),N=ye.pop(),B=ye.pop(),re=ye.pop();var ze=1<<B,Le=Ft(B,N,Z),$e=this.tiles[Le];if(!$e&&(xe>1&&console.time("creation"),$e=this.tiles[Le]=er(re,B,N,Z,he),this.tileCoords.push({z:B,x:N,y:Z}),xe)){xe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",B,N,Z,$e.numFeatures,$e.numPoints,$e.numSimplified),console.timeEnd("creation"));var xt="z"+B;this.stats[xt]=(this.stats[xt]||0)+1,this.total++}if($e.source=re,oe){if(B===he.maxZoom||B===oe)continue;var It=1<<oe-B;if(N!==Math.floor(ae/It)||Z!==Math.floor(we/It))continue}else if(B===he.indexMaxZoom||$e.numPoints<=he.indexMaxPoints)continue;if($e.source=null,re.length!==0){xe>1&&console.time("clipping");var ht,wt,zt,ir,pr,Jt,Yt=.5*he.buffer/he.extent,$n=.5-Yt,xr=.5+Yt,nn=1+Yt;ht=wt=zt=ir=null,pr=Yn(re,ze,N-Yt,N+xr,0,$e.minX,$e.maxX,he),Jt=Yn(re,ze,N+$n,N+nn,0,$e.minX,$e.maxX,he),re=null,pr&&(ht=Yn(pr,ze,Z-Yt,Z+xr,1,$e.minY,$e.maxY,he),wt=Yn(pr,ze,Z+$n,Z+nn,1,$e.minY,$e.maxY,he),pr=null),Jt&&(zt=Yn(Jt,ze,Z-Yt,Z+xr,1,$e.minY,$e.maxY,he),ir=Yn(Jt,ze,Z+$n,Z+nn,1,$e.minY,$e.maxY,he),Jt=null),xe>1&&console.timeEnd("clipping"),ye.push(ht||[],B+1,2*N,2*Z),ye.push(wt||[],B+1,2*N,2*Z+1),ye.push(zt||[],B+1,2*N+1,2*Z),ye.push(ir||[],B+1,2*N+1,2*Z+1)}}},Qe.prototype.getTile=function(re,B,N){var Z=this.options,oe=Z.extent,ae=Z.debug;if(re<0||re>24)return null;var we=1<<re,ye=Ft(re,B=(B%we+we)%we,N);if(this.tiles[ye])return Ke(this.tiles[ye],oe);ae>1&&console.log("drilling down to z%d-%d-%d",re,B,N);for(var he,xe=re,ze=B,Le=N;!he&&xe>0;)xe--,ze=Math.floor(ze/2),Le=Math.floor(Le/2),he=this.tiles[Ft(xe,ze,Le)];return he&&he.source?(ae>1&&console.log("found parent tile z%d-%d-%d",xe,ze,Le),ae>1&&console.time("drilling down"),this.splitTile(he.source,xe,ze,Le,re,B,N),ae>1&&console.timeEnd("drilling down"),this.tiles[ye]?Ke(this.tiles[ye],oe):null):null};class Ot extends Q{constructor(B,N,Z,oe){super(B,N,Z),this._dataUpdateable=new Map,this.loadGeoJSON=(ae,we)=>{const{promoteId:ye}=ae;if(ae.request)return c.f(ae.request,(he,xe,ze,Le)=>{this._dataUpdateable=Jn(xe,ye)?Ro(xe,ye):void 0,we(he,xe,ze,Le)});if(typeof ae.data=="string")try{const he=JSON.parse(ae.data);this._dataUpdateable=Jn(he,ye)?Ro(he,ye):void 0,we(null,he)}catch{we(new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`))}else ae.dataDiff?this._dataUpdateable?(function(he,xe,ze){var Le,$e,xt,It;if(xe.removeAll&&he.clear(),xe.remove)for(const ht of xe.remove)he.delete(ht);if(xe.add)for(const ht of xe.add){const wt=Mt(ht,ze);wt!=null&&he.set(wt,ht)}if(xe.update)for(const ht of xe.update){let wt=he.get(ht.id);if(wt==null)continue;const zt=!ht.removeAllProperties&&(((Le=ht.removeProperties)===null||Le===void 0?void 0:Le.length)>0||(($e=ht.addOrUpdateProperties)===null||$e===void 0?void 0:$e.length)>0);if((ht.newGeometry||ht.removeAllProperties||zt)&&(wt=Object.assign({},wt),he.set(ht.id,wt),zt&&(wt.properties=Object.assign({},wt.properties))),ht.newGeometry&&(wt.geometry=ht.newGeometry),ht.removeAllProperties)wt.properties={};else if(((xt=ht.removeProperties)===null||xt===void 0?void 0:xt.length)>0)for(const ir of ht.removeProperties)Object.prototype.hasOwnProperty.call(wt.properties,ir)&&delete wt.properties[ir];if(((It=ht.addOrUpdateProperties)===null||It===void 0?void 0:It.length)>0)for(const{key:ir,value:pr}of ht.addOrUpdateProperties)wt.properties[ir]=pr}}(this._dataUpdateable,ae.dataDiff,ye),we(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):we(new Error(`Cannot update existing geojson data in ${ae.source}`)):we(new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,oe&&(this.loadGeoJSON=oe)}loadGeoJSONTile(B,N){const Z=B.tileID.canonical;if(!this._geoJSONIndex)return N(null,null);const oe=this._geoJSONIndex.getTile(Z.z,Z.x,Z.y);if(!oe)return N(null,null);const ae=new class{constructor(ye){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.N,this.length=ye.length,this._features=ye}feature(ye){return new class{constructor(he){this._feature=he,this.extent=c.N,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))}loadGeometry(){if(this._feature.type===1){const he=[];for(const xe of this._feature.geometry)he.push([new c.P(xe[0],xe[1])]);return he}{const he=[];for(const xe of this._feature.geometry){const ze=[];for(const Le of xe)ze.push(new c.P(Le[0],Le[1]));he.push(ze)}return he}}toGeoJSON(he,xe,ze){return j.call(this,he,xe,ze)}}(this._features[ye])}}(oe.features);let we=st(ae);we.byteOffset===0&&we.byteLength===we.buffer.byteLength||(we=new Uint8Array(we)),N(null,{vectorTile:ae,rawData:we.buffer})}loadData(B,N){var Z;(Z=this._pendingRequest)===null||Z===void 0||Z.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const oe=!!(B&&B.request&&B.request.collectResourceTiming)&&new c.bu(B.request);this._pendingCallback=N,this._pendingRequest=this.loadGeoJSON(B,(ae,we)=>{if(delete this._pendingCallback,delete this._pendingRequest,ae||!we)return N(ae);if(typeof we!="object")return N(new Error(`Input data given to '${B.source}' is not a valid GeoJSON object.`));{G(we,!0);try{if(B.filter){const he=c.bC(B.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(he.result==="error")throw new Error(he.value.map(ze=>`${ze.key}: ${ze.message}`).join(", "));we={type:"FeatureCollection",features:we.features.filter(ze=>he.value.evaluate({zoom:0},ze))}}this._geoJSONIndex=B.cluster?new Ct(function({superclusterOptions:he,clusterProperties:xe}){if(!xe||!he)return he;const ze={},Le={},$e={accumulated:null,zoom:0},xt={properties:null},It=Object.keys(xe);for(const ht of It){const[wt,zt]=xe[ht],ir=c.bC(zt),pr=c.bC(typeof wt=="string"?[wt,["accumulated"],["get",ht]]:wt);ze[ht]=ir.value,Le[ht]=pr.value}return he.map=ht=>{xt.properties=ht;const wt={};for(const zt of It)wt[zt]=ze[zt].evaluate($e,xt);return wt},he.reduce=(ht,wt)=>{xt.properties=wt;for(const zt of It)$e.accumulated=ht[zt],ht[zt]=Le[zt].evaluate($e,xt)},he}(B)).load(we.features):function(he,xe){return new Qe(he,xe)}(we,B.geojsonVtOptions)}catch(he){return N(he)}this.loaded={};const ye={};if(oe){const he=oe.finish();he&&(ye.resourceTiming={},ye.resourceTiming[B.source]=JSON.parse(JSON.stringify(he)))}N(null,ye)}})}reloadTile(B,N){const Z=this.loaded;return Z&&Z[B.uid]?super.reloadTile(B,N):this.loadTile(B,N)}removeSource(B,N){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),N()}getClusterExpansionZoom(B,N){try{N(null,this._geoJSONIndex.getClusterExpansionZoom(B.clusterId))}catch(Z){N(Z)}}getClusterChildren(B,N){try{N(null,this._geoJSONIndex.getChildren(B.clusterId))}catch(Z){N(Z)}}getClusterLeaves(B,N){try{N(null,this._geoJSONIndex.getLeaves(B.clusterId,B.limit,B.offset))}catch(Z){N(Z)}}}class cs{constructor(B){this.self=B,this.actor=new c.C(B,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Q,geojson:Ot},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(N,Z)=>{if(this.workerSourceTypes[N])throw new Error(`Worker source with name "${N}" already registered.`);this.workerSourceTypes[N]=Z},this.self.registerRTLTextPlugin=N=>{if(c.bD.isParsed())throw new Error("RTL text plugin already registered.");c.bD.applyArabicShaping=N.applyArabicShaping,c.bD.processBidirectionalText=N.processBidirectionalText,c.bD.processStyledBidirectionalText=N.processStyledBidirectionalText}}setReferrer(B,N){this.referrer=N}setImages(B,N,Z){this.availableImages[B]=N;for(const oe in this.workerSources[B]){const ae=this.workerSources[B][oe];for(const we in ae)ae[we].availableImages=N}Z()}setLayers(B,N,Z){this.getLayerIndex(B).replace(N),Z()}updateLayers(B,N,Z){this.getLayerIndex(B).update(N.layers,N.removedIds),Z()}loadTile(B,N,Z){this.getWorkerSource(B,N.type,N.source).loadTile(N,Z)}loadDEMTile(B,N,Z){this.getDEMWorkerSource(B,N.source).loadTile(N,Z)}reloadTile(B,N,Z){this.getWorkerSource(B,N.type,N.source).reloadTile(N,Z)}abortTile(B,N,Z){this.getWorkerSource(B,N.type,N.source).abortTile(N,Z)}removeTile(B,N,Z){this.getWorkerSource(B,N.type,N.source).removeTile(N,Z)}removeDEMTile(B,N){this.getDEMWorkerSource(B,N.source).removeTile(N)}removeSource(B,N,Z){if(!this.workerSources[B]||!this.workerSources[B][N.type]||!this.workerSources[B][N.type][N.source])return;const oe=this.workerSources[B][N.type][N.source];delete this.workerSources[B][N.type][N.source],oe.removeSource!==void 0?oe.removeSource(N,Z):Z()}loadWorkerSource(B,N,Z){try{this.self.importScripts(N.url),Z()}catch(oe){Z(oe.toString())}}syncRTLPluginState(B,N,Z){try{c.bD.setState(N);const oe=c.bD.getPluginURL();if(c.bD.isLoaded()&&!c.bD.isParsed()&&oe!=null){this.self.importScripts(oe);const ae=c.bD.isParsed();Z(ae?void 0:new Error(`RTL Text Plugin failed to import scripts from ${oe}`),ae)}}catch(oe){Z(oe.toString())}}getAvailableImages(B){let N=this.availableImages[B];return N||(N=[]),N}getLayerIndex(B){let N=this.layerIndexes[B];return N||(N=this.layerIndexes[B]=new b),N}getWorkerSource(B,N,Z){return this.workerSources[B]||(this.workerSources[B]={}),this.workerSources[B][N]||(this.workerSources[B][N]={}),this.workerSources[B][N][Z]||(this.workerSources[B][N][Z]=new this.workerSourceTypes[N]({send:(oe,ae,we)=>{this.actor.send(oe,ae,we,B)}},this.getLayerIndex(B),this.getAvailableImages(B))),this.workerSources[B][N][Z]}getDEMWorkerSource(B,N){return this.demWorkerSources[B]||(this.demWorkerSources[B]={}),this.demWorkerSources[B][N]||(this.demWorkerSources[B][N]=new te),this.demWorkerSources[B][N]}}return c.i()&&(self.worker=new cs(self)),cs}),h(["./shared"],function(c){var b="3.6.2";class k{static testProp(i){if(!k.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in k.docStyle)return i[u];return i[0]}static create(i,u,f){const g=window.document.createElement(i);return u!==void 0&&(g.className=u),f&&f.appendChild(g),g}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){k.docStyle&&k.selectProp&&(k.userSelect=k.docStyle[k.selectProp],k.docStyle[k.selectProp]="none")}static enableDrag(){k.docStyle&&k.selectProp&&(k.docStyle[k.selectProp]=k.userSelect)}static setTransform(i,u){i.style[k.transformProp]=u}static addEventListener(i,u,f,g={}){i.addEventListener(u,f,"passive"in g?g:g.capture)}static removeEventListener(i,u,f,g={}){i.removeEventListener(u,f,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",k.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",k.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",k.suppressClickInternal,!0)},0)}static mousePos(i,u){const f=i.getBoundingClientRect();return new c.P(u.clientX-f.left-i.clientLeft,u.clientY-f.top-i.clientTop)}static touchPos(i,u){const f=i.getBoundingClientRect(),g=[];for(let _=0;_<u.length;_++)g.push(new c.P(u[_].clientX-f.left-i.clientLeft,u[_].clientY-f.top-i.clientTop));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}k.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,k.selectProp=k.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),k.transformProp=k.testProp(["transform","WebkitTransform"]);const A={supported:!1,testSupport:function(y){!Q&&O&&(te?ee(y):R=y)}};let R,O,Q=!1,te=!1;function ee(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,O),y.isContextLost())return;A.supported=!0}catch{}y.deleteTexture(i),Q=!0}var de,G;typeof document<"u"&&(O=document.createElement("img"),O.onload=function(){R&&ee(R),R=null,te=!0},O.onerror=function(){Q=!0,R=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,u,f,g;y.resetRequestQueue=()=>{i=[],u=0,f=0,g={}},y.addThrottleControl=P=>{const z=f++;return g[z]=P,z},y.removeThrottleControl=P=>{delete g[P],C()},y.getImage=(P,z,L=!0)=>{A.supported&&(P.headers||(P.headers={}),P.headers.accept="image/webp,*/*");const V={requestParameters:P,supportImageRefresh:L,callback:z,cancelled:!1,completed:!1,cancel:()=>{V.completed||V.cancelled||(V.cancelled=!0,V.innerRequest&&(V.innerRequest.cancel(),u--),C())}};return i.push(V),C(),V};const _=P=>{const{requestParameters:z,supportImageRefresh:L,callback:V}=P;return c.e(z,{type:"image"}),(L!==!1||c.i()||c.g(z.url)||z.headers&&!Object.keys(z.headers).reduce((J,Y)=>J&&Y==="accept",!0)?c.m:E)(z,(J,Y,ne,K)=>{S(P,V,J,Y,ne,K)})},S=(P,z,L,V,J,Y)=>{L?z(L):V instanceof HTMLImageElement||c.a(V)?z(null,V):V&&((ne,K)=>{typeof createImageBitmap=="function"?c.b(ne,K):c.d(ne,K)})(V,(ne,K)=>{ne!=null?z(ne):K!=null&&z(null,K,{cacheControl:J,expires:Y})}),P.cancelled||(P.completed=!0,u--,C())},C=()=>{const P=(()=>{const z=Object.keys(g);let L=!1;if(z.length>0){for(const V of z)if(L=g[V](),L)break}return L})()?c.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=u;z<P&&i.length>0;z++){const L=i.shift();if(L.cancelled){z--;continue}const V=_(L);u++,L.innerRequest=V}},E=(P,z)=>{const L=new Image,V=P.url;let J=!1;const Y=P.credentials;return Y&&Y==="include"?L.crossOrigin="use-credentials":(Y&&Y==="same-origin"||!c.s(V))&&(L.crossOrigin="anonymous"),L.fetchPriority="high",L.onload=()=>{z(null,L),L.onerror=L.onload=null},L.onerror=()=>{J||z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),L.onerror=L.onload=null},L.src=V,{cancel:()=>{J=!0,L.src=""}}}}(de||(de={})),de.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(G||(G={}));class j{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,f){const g=function(_){const S=_.match(U);if(!S)throw new Error(`Unable to parse URL "${_}"`);return{protocol:S[1],authority:S[2],path:S[3]||"/",params:S[4]?S[4].split("&"):[]}}(i);return g.path+=`${u}${f}`,function(_){const S=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${S}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const U=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function fe(y){var i=new c.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var ie,F=function(y,i,u){return y[0]=i[0]-u[0],y[1]=i[1]-u[1],y[2]=i[2]-u[2],y};ie=new c.A(3),c.A!=Float32Array&&(ie[0]=0,ie[1]=0,ie[2]=0);var ce=function(y){var i=y[0],u=y[1];return i*i+u*u};function Ce(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:f,url:g}of y){const _=`${f}${g}`;u.indexOf(_)===-1&&(u.push(_),i.push({id:f,url:g}))}}return i}function Ue(y,i,u,f,g){if(f)return void y(f);if(g!==Object.values(i).length||g!==Object.values(u).length)return;const _={};for(const S in i){_[S]={};const C=c.h.getImageCanvasContext(u[S]),E=i[S];for(const P in E){const{width:z,height:L,x:V,y:J,sdf:Y,pixelRatio:ne,stretchX:K,stretchY:ve,content:ke}=E[P];_[S][P]={data:null,pixelRatio:ne,sdf:Y,stretchX:K,stretchY:ve,content:ke,spriteData:{width:z,height:L,x:V,y:J,context:C}}}}y(null,_)}(function(){var y=new c.A(2);c.A!=Float32Array&&(y[0]=0,y[1]=0)})();class Ae{constructor(i,u,f,g){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(u,g)}update(i,u,f){const{width:g,height:_}=i,S=!(this.size&&this.size[0]===g&&this.size[1]===_||f),{context:C}=this,{gl:E}=C;if(this.useMipmap=!!(u&&u.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!u||u.premultiply!==!1)),S)this.size=[g,_],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,i):E.texImage2D(E.TEXTURE_2D,0,this.format,g,_,0,this.format,E.UNSIGNED_BYTE,i.data);else{const{x:P,y:z}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?E.texSubImage2D(E.TEXTURE_2D,0,P,z,E.RGBA,E.UNSIGNED_BYTE,i):E.texSubImage2D(E.TEXTURE_2D,0,P,z,g,_,E.RGBA,E.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D)}bind(i,u,f){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),f!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,f||i),this.filter=i),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Re(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class We extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:f}of this.requestors)this._notify(u,f);this.requestors=[]}}getImage(i){const u=this.images[i];if(u&&!u.data&&u.spriteData){const f=u.spriteData;u.data=new c.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),u.spriteData=null}return u}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let f=!0;const g=u.data||u.spriteData;return this._validateStretch(u.stretchX,g&&g.width)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,g&&g.height)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,u){if(!i)return!0;let f=0;for(const g of i){if(g[0]<f||g[1]<g[0]||u<g[1])return!1;f=g[1]}return!0}_validateContent(i,u){if(!i)return!0;if(i.length!==4)return!1;const f=u.spriteData,g=f&&f.width||u.data.width,_=f&&f.height||u.data.height;return!(i[0]<0||g<i[0]||i[1]<0||_<i[1]||i[2]<0||g<i[2]||i[3]<0||_<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,u,f=!0){const g=this.getImage(i);if(f&&(g.data.width!==u.data.width||g.data.height!==u.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let f=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(f=!1);this.isLoaded()||f?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const f={};for(const g of i){let _=this.getImage(g);_||(this.fire(new c.k("styleimagemissing",{id:g})),_=this.getImage(g)),_?f[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:c.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,f)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],f=this.getImage(i);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},_=new c.I(g,f);this.patterns[i]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ae(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const _ in this.patterns)i.push(this.patterns[_].bin);const{w:u,h:f}=c.p(i),g=this.atlasImage;g.resize({width:u||1,height:f||1});for(const _ in this.patterns){const{bin:S}=this.patterns[_],C=S.x+1,E=S.y+1,P=this.getImage(_).data,z=P.width,L=P.height;c.R.copy(P,g,{x:0,y:0},{x:C,y:E},{width:z,height:L}),c.R.copy(P,g,{x:0,y:L-1},{x:C,y:E-1},{width:z,height:1}),c.R.copy(P,g,{x:0,y:0},{x:C,y:E+L},{width:z,height:1}),c.R.copy(P,g,{x:z-1,y:0},{x:C-1,y:E},{width:1,height:L}),c.R.copy(P,g,{x:0,y:0},{x:C+z,y:E},{width:1,height:L})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.getImage(u);f||c.w(`Image with ID: "${u}" was not found`),Re(f)&&this.updateImage(u,f)}}}const He=1e20;function Ze(y,i,u,f,g,_,S,C,E){for(let P=i;P<i+f;P++)Ge(y,u*_+P,_,g,S,C,E);for(let P=u;P<u+g;P++)Ge(y,P*_+i,1,f,S,C,E)}function Ge(y,i,u,f,g,_,S){_[0]=0,S[0]=-He,S[1]=He,g[0]=y[i];for(let C=1,E=0,P=0;C<f;C++){g[C]=y[i+C*u];const z=C*C;do{const L=_[E];P=(g[C]-g[L]+z-L*L)/(C-L)/2}while(P<=S[E]&&--E>-1);E++,_[E]=C,S[E]=P,S[E+1]=He}for(let C=0,E=0;C<f;C++){for(;S[E+1]<C;)E++;const P=_[E],z=C-P;y[i+C*u]=g[P]+z*z}}class Fe{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const f=[];for(const g in i)for(const _ of i[g])f.push({stack:g,id:_});c.o(f,({stack:g,id:_},S)=>{let C=this.entries[g];C||(C=this.entries[g]={glyphs:{},requests:{},ranges:{}});let E=C.glyphs[_];if(E!==void 0)return void S(null,{stack:g,id:_,glyph:E});if(E=this._tinySDF(C,g,_),E)return C.glyphs[_]=E,void S(null,{stack:g,id:_,glyph:E});const P=Math.floor(_/256);if(256*P>65535)return void S(new Error("glyphs > 65535 not supported"));if(C.ranges[P])return void S(null,{stack:g,id:_,glyph:E});if(!this.url)return void S(new Error("glyphsUrl is not set"));let z=C.requests[P];z||(z=C.requests[P]=[],Fe.loadGlyphRange(g,P,this.url,this.requestManager,(L,V)=>{if(V){for(const J in V)this._doesCharSupportLocalGlyph(+J)||(C.glyphs[+J]=V[+J]);C.ranges[P]=!0}for(const J of z)J(L,V);delete C.requests[P]})),z.push((L,V)=>{L?S(L):V&&S(null,{stack:g,id:_,glyph:V[_]||null})})},(g,_)=>{if(g)u(g);else if(_){const S={};for(const{stack:C,id:E,glyph:P}of _)(S[C]||(S[C]={}))[E]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};u(null,S)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(c.u["CJK Unified Ideographs"](i)||c.u["Hangul Syllables"](i)||c.u.Hiragana(i)||c.u.Katakana(i))}_tinySDF(i,u,f){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let _=i.tinySDF;if(!_){let C="400";/bold/i.test(u)?C="900":/medium/i.test(u)?C="500":/light/i.test(u)&&(C="200"),_=i.tinySDF=new Fe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:C})}const S=_.draw(String.fromCharCode(f));return{id:f,bitmap:new c.q({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}Fe.loadGlyphRange=function(y,i,u,f,g){const _=256*i,S=_+255,C=f.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${_}-${S}`),G.Glyphs);c.l(C,(E,P)=>{if(E)g(E);else if(P){const z={};for(const L of c.n(P))z[L.id]=L;g(null,z)}})},Fe.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:u=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:S="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=u;const C=this.size=y+4*i,E=this._createCanvas(C),P=this.ctx=E.getContext("2d",{willReadFrequently:!0});P.font=`${S} ${_} ${y}px ${g}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(y),S=Math.ceil(u),C=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),E=Math.min(this.size-this.buffer,S+Math.ceil(f)),P=C+2*this.buffer,z=E+2*this.buffer,L=Math.max(P*z,0),V=new Uint8ClampedArray(L),J={data:V,width:P,height:z,glyphWidth:C,glyphHeight:E,glyphTop:S,glyphLeft:0,glyphAdvance:i};if(C===0||E===0)return J;const{ctx:Y,buffer:ne,gridInner:K,gridOuter:ve}=this;Y.clearRect(ne,ne,C,E),Y.fillText(y,ne,ne+S);const ke=Y.getImageData(ne,ne,C,E);ve.fill(He,0,L),K.fill(0,0,L);for(let le=0;le<E;le++)for(let _e=0;_e<C;_e++){const Ee=ke.data[4*(le*C+_e)+3]/255;if(Ee===0)continue;const Ie=(le+ne)*P+_e+ne;if(Ee===1)ve[Ie]=0,K[Ie]=He;else{const De=.5-Ee;ve[Ie]=De>0?De*De:0,K[Ie]=De<0?De*De:0}}Ze(ve,0,0,P,z,P,this.f,this.v,this.z),Ze(K,ne,ne,C,E,P,this.f,this.v,this.z);for(let le=0;le<L;le++){const _e=Math.sqrt(ve[le])-Math.sqrt(K[le]);V[le]=Math.round(255-255*(_e/this.radius+this.cutoff))}return J}};class ot{constructor(){this.specification=c.v.light.position}possiblyEvaluate(i,u){return c.z(i.expression.evaluate(u))}interpolate(i,u,f){return{x:c.B.number(i.x,u.x,f),y:c.B.number(i.y,u.y,f),z:c.B.number(i.z,u.z,f)}}}let Pe;class st extends c.E{constructor(i){super(),Pe=Pe||new c.r({anchor:new c.D(c.v.light.anchor),position:new ot,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(Pe),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(c.t,i,u))for(const f in i){const g=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,f){return(!f||f.validate!==!1)&&c.x(this,i.call(c.y,c.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}}class yt{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const f=i.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,u)),this.dashEntry[f]}getDashRanges(i,u,f){const g=[];let _=i.length%2==1?-i[i.length-1]*f:0,S=i[0]*f,C=!0;g.push({left:_,right:S,isDash:C,zeroLength:i[0]===0});let E=i[0];for(let P=1;P<i.length;P++){C=!C;const z=i[P];_=E*f,E+=z,S=E*f,g.push({left:_,right:S,isDash:C,zeroLength:z===0})}return g}addRoundDash(i,u,f){const g=u/2;for(let _=-f;_<=f;_++){const S=this.width*(this.nextRow+f+_);let C=0,E=i[C];for(let P=0;P<this.width;P++){P/E.right>1&&(E=i[++C]);const z=Math.abs(P-E.left),L=Math.abs(P-E.right),V=Math.min(z,L);let J;const Y=_/f*(g+1);if(E.isDash){const ne=g-Math.abs(Y);J=Math.sqrt(V*V+ne*ne)}else J=g-Math.sqrt(V*V+Y*Y);this.data[S+P]=Math.max(0,Math.min(255,J+128))}}}addRegularDash(i){for(let C=i.length-1;C>=0;--C){const E=i[C],P=i[C+1];E.zeroLength?i.splice(C,1):P&&P.isDash===E.isDash&&(P.left=E.left,i.splice(C,1))}const u=i[0],f=i[i.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const g=this.width*this.nextRow;let _=0,S=i[_];for(let C=0;C<this.width;C++){C/S.right>1&&(S=i[++_]);const E=Math.abs(C-S.left),P=Math.abs(C-S.right),z=Math.min(E,P);this.data[g+C]=Math.max(0,Math.min(255,(S.isDash?z:-z)+128))}}addDash(i,u){const f=u?7:0,g=2*f+1;if(this.nextRow+g>this.height)return c.w("LineAtlas out of space"),null;let _=0;for(let C=0;C<i.length;C++)_+=i[C];if(_!==0){const C=this.width/_,E=this.getDashRanges(i,this.width,C);u?this.addRoundDash(E,C,f):this.addRegularDash(E)}const S={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:_};return this.nextRow+=g,this.dirty=!0,S}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class Et{constructor(i,u,f){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=f;const g=this.workerPool.acquire(f);for(let _=0;_<g.length;_++){const S=new c.C(g[_],u,f);S.name=`Worker ${_}`,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,f){c.o(this.actors,(g,_)=>{g.send(i,u,_)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function mt(y,i,u){const f=function(g,_){if(g)return u(g);if(_){const S=c.F(c.e(_,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(S.vectorLayers=_.vector_layers,S.vectorLayerIds=S.vectorLayers.map(C=>C.id)),u(null,S)}};return y.url?c.f(i.transformRequest(y.url,G.Source),f):c.h.frame(()=>f(null,y))}class Dt{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}extend(i){const u=this._sw,f=this._ne;let g,_;if(i instanceof c.L)g=i,_=i;else{if(!(i instanceof Dt))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Dt.convert(i)):this.extend(c.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(c.L.convert(i)):this;if(g=i._sw,_=i._ne,!g||!_)return this}return u||f?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),f.lng=Math.max(_.lng,f.lng),f.lat=Math.max(_.lat,f.lat)):(this._sw=new c.L(g.lng,g.lat),this._ne=new c.L(_.lng,_.lat)),this}getCenter(){return new c.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.L(this.getWest(),this.getNorth())}getSouthEast(){return new c.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:f}=c.L.convert(i);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(i){return i instanceof Dt?i:i&&new Dt(i)}static fromLngLat(i,u=0){const f=360*u/40075017,g=f/Math.cos(Math.PI/180*i.lat);return new Dt(new c.L(i.lng-g,i.lat-f),new c.L(i.lng+g,i.lat+f))}}class jt{constructor(i,u,f){this.bounds=Dt.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),f=Math.floor(c.G(this.bounds.getWest())*u),g=Math.floor(c.H(this.bounds.getNorth())*u),_=Math.ceil(c.G(this.bounds.getEast())*u),S=Math.ceil(c.H(this.bounds.getSouth())*u);return i.x>=f&&i.x<_&&i.y>=g&&i.y<S}}class _r extends c.E{constructor(i,u,f,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=mt(this._options,this.map._requestManager,(_,S)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new c.j(_)):S&&(c.e(this,S),S.bounds&&(this.tileBounds=new jt(S.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>c.e({},this._options),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.F(u,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(f,G.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(S,C){return delete i.request,i.aborted?u(null):S&&S.status!==404?u(S):(C&&C.resourceTiming&&(i.resourceTiming=C.resourceTiming),this.map._refreshExpiredTiles&&C&&i.setExpiryData(C),i.loadVectorData(C,this.map.painter),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",g,_.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",g,_.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Ct extends c.E{constructor(i,u,f,g){super(),this.id=i,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},u),c.e(this,c.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=mt(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new c.j(i)):u&&(c.e(this,u),u.bounds&&(this.tileBounds=new jt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return c.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=de.getImage(this.map._requestManager.transformRequest(f,G.Tile),(g,_,S)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(g)i.state="errored",u(g);else if(_){this.map._refreshExpiredTiles&&S&&i.setExpiryData(S);const C=this.map.painter.context,E=C.gl;i.texture=this.map.painter.getTileTexture(_.width),i.texture?i.texture.update(_,{useMipmap:!0}):(i.texture=new Ae(C,_,E.RGBA,{useMipmap:!0}),i.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),C.extTextureFilterAnisotropic&&E.texParameterf(E.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax)),i.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}class Pt extends Ct{constructor(i,u,f,g){super(i,u,f,g),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(f,G.Tile);function _(S,C){S&&(i.state="errored",u(S)),C&&(i.dem=C,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=de.getImage(g,(S,C,E)=>c._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(S)i.state="errored",u(S);else if(C){this.map._refreshExpiredTiles&&i.setExpiryData(E);const P=c.a(C)&&c.J()?C:yield function(L){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.K()){const V=L.width+2,J=L.height+2;try{return new c.R({width:V,height:J},yield c.M(L,-1,-1,V,J))}catch{}}return c.h.getImageData(L,1)})}(C),z={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:P,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",z,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const u=i.canonical,f=Math.pow(2,u.z),g=(u.x-1+f)%f,_=u.x===0?i.wrap-1:i.wrap,S=(u.x+1+f)%f,C=u.x+1===f?i.wrap+1:i.wrap,E={};return E[new c.O(i.overscaledZ,_,u.z,g,u.y).key]={backfilled:!1},E[new c.O(i.overscaledZ,C,u.z,S,u.y).key]={backfilled:!1},u.y>0&&(E[new c.O(i.overscaledZ,_,u.z,g,u.y-1).key]={backfilled:!1},E[new c.O(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},E[new c.O(i.overscaledZ,C,u.z,S,u.y-1).key]={backfilled:!1}),u.y+1<f&&(E[new c.O(i.overscaledZ,_,u.z,g,u.y+1).key]={backfilled:!1},E[new c.O(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},E[new c.O(i.overscaledZ,C,u.z,S,u.y+1).key]={backfilled:!1}),E}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class at extends c.E{constructor(i,u,f,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>c.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(g),this._data=u.data,this._options=c.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=c.N/this.tileSize;this.workerOptions=c.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:c.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:c.N,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,f,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:f},g),this}_updateWorkerData(i){const u=c.e({},this.workerOptions);i?u.dataDiff=i:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(c.h.resolveURL(this._data),G.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(f,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let _=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(_=g.resourceTiming[this.id].slice(0)),f)return void this.fire(new c.j(f));const S={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&c.e(S,{resourceTiming:_}),this.fire(new c.k("data",Object.assign(Object.assign({},S),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},S),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const f=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(f,g,(_,S)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):_?u(_):(i.loadVectorData(S,this.map.painter,f==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var At=c.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Rt extends c.E{constructor(i,u,f,g){super(),this.load=(_,S)=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=de.getImage(this.map._requestManager.transformRequest(this.url,G.Image),(C,E)=>{this._request=null,this._loaded=!0,C?this.fire(new c.j(C)):E&&(this.image=E,_&&(this.coordinates=_),S&&S(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,S=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,At.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ae(_,this.image,S.RGBA),this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE));let C=!1;for(const E in this.tiles){const P=this.tiles[E];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,C=!0)}C&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const u=i.map(c.U.fromLngLat);this.tileID=function(g){let _=1/0,S=1/0,C=-1/0,E=-1/0;for(const V of g)_=Math.min(_,V.x),S=Math.min(S,V.y),C=Math.max(C,V.x),E=Math.max(E,V.y);const P=Math.max(C-_,E-S),z=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),L=Math.pow(2,z);return new c.W(z,Math.floor((_+C)/2*L),Math.floor((S+E)/2*L))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new c.V,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,c.N,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,c.N),this._boundsArray.emplaceBack(f[2].x,f[2].y,c.N,c.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}hasTransition(){return!1}}class or extends Rt{constructor(i,u,f,g){super(i,u,f,g),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const S of _.urls)this.urls.push(this.map._requestManager.transformRequest(S,G.Source).url);c.X(this.urls,(S,C)=>{this._loaded=!0,S?this.fire(new c.j(S)):C&&(this.video=C,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,S=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,At.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE),S.texSubImage2D(S.TEXTURE_2D,0,0,0,S.RGBA,S.UNSIGNED_BYTE,this.video)):(this.texture=new Ae(_,this.video,S.RGBA),this.texture.bind(S.LINEAR,S.CLAMP_TO_EDGE));let C=!1;for(const E in this.tiles){const P=this.tiles[E];P.state!=="loaded"&&(P.state="loaded",P.texture=this.texture,C=!0)}C&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new c.j(new c.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class rn extends Rt{constructor(i,u,f,g){super(i,u,f,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const S=this.map.painter.context,C=S.gl;this.boundsBuffer||(this.boundsBuffer=S.createVertexBuffer(this._boundsArray,At.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ae(S,this.canvas,C.RGBA,{premultiply:!0});let E=!1;for(const P in this.tiles){const z=this.tiles[P];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture,E=!0)}E&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(S=>typeof S!="number"))||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new c.j(new c.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const co={},Ui=y=>{switch(y){case"geojson":return at;case"image":return Rt;case"raster":return Ct;case"raster-dem":return Pt;case"vector":return _r;case"video":return or;case"canvas":return rn}return co[y]};function $s(y,i){const u=c.Z();return c.$(u,u,[1,1,0]),c.a0(u,u,[.5*y.width,.5*y.height,1]),c.a1(u,u,y.calculatePosMatrix(i.toUnwrapped()))}function Do(y,i,u,f,g,_){const S=function(L,V,J){if(L)for(const Y of L){const ne=V[Y];if(ne&&ne.source===J&&ne.type==="fill-extrusion")return!0}else for(const Y in V){const ne=V[Y];if(ne.source===J&&ne.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,y.id),C=_.maxPitchScaleFactor(),E=y.tilesIn(f,C,S);E.sort(ui);const P=[];for(const L of E)P.push({wrappedTileID:L.tileID.wrapped().key,queryResults:L.tile.queryRenderedFeatures(i,u,y._state,L.queryGeometry,L.cameraQueryGeometry,L.scale,g,_,C,$s(y.transform,L.tileID))});const z=function(L){const V={},J={};for(const Y of L){const ne=Y.queryResults,K=Y.wrappedTileID,ve=J[K]=J[K]||{};for(const ke in ne){const le=ne[ke],_e=ve[ke]=ve[ke]||{},Ee=V[ke]=V[ke]||[];for(const Ie of le)_e[Ie.featureIndex]||(_e[Ie.featureIndex]=!0,Ee.push(Ie))}}return V}(P);for(const L in z)z[L].forEach(V=>{const J=V.feature,Y=y.getFeatureState(J.layer["source-layer"],J.id);J.source=J.layer.source,J.layer["source-layer"]&&(J.sourceLayer=J.layer["source-layer"]),J.state=Y});return z}function ui(y,i){const u=y.tileID,f=i.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}class Cn{constructor(i,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=c.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,_){const S={};if(!_)return S;for(const C of g){const E=C.layerIds.map(P=>_.getLayer(P)).filter(Boolean);if(E.length!==0){C.layers=E,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(P=>E.filter(z=>z.id===P)[0]));for(const P of E)S[P.id]=C}}return S}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof c.a4){if(this.hasSymbolBuckets=!0,!f)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof c.a4&&_.hasRTLText){this.hasRTLText=!0,c.a5();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(_))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new c.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ae(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ae(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,f,g,_,S,C,E,P,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:S,tileSize:this.tileSize,pixelPosMatrix:z,transform:E,params:C,queryPadding:this.queryPadding*P},i,u,f):{}}querySourceFeatures(i,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",S=g._geojsonTileLayer||g[_];if(!S)return;const C=c.a6(u&&u.filter),{z:E,x:P,y:z}=this.tileID.canonical,L={z:E,x:P,y:z};for(let V=0;V<S.length;V++){const J=S.feature(V);if(C.needGeometry){const K=c.a7(J,!0);if(!C.filter(new c.a8(this.tileID.overscaledZ),K,this.tileID.canonical))continue}else if(!C.filter(new c.a8(this.tileID.overscaledZ),J))continue;const Y=f.getId(J,_),ne=new c.a9(J,E,P,z,Y);ne.tile=L,i.push(ne)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const f=c.aa(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const _=this.expirationTime-u;_?this.expirationTime=f+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const _=this.buckets[g],S=_.layers[0].sourceLayer||"_geojsonTileLayer",C=f[S],E=i[S];if(!C||!E||Object.keys(E).length===0)continue;_.update(E,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const P=u&&u.style&&u.style.getLayer(g);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=c.h.now()+i}setDependencies(i,u){const f={};for(const g of u)f[g]=!0;this.dependencies[i]=f}hasDependency(i,u){for(const f of i){const g=this.dependencies[f];if(g){for(const _ of u)if(g[_])return!0}}return!1}}class as{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,f){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:u,timeout:void 0};if(f!==void 0&&(_.timeout=setTimeout(()=>{this.remove(i,_)},f)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const f=i.wrapped().key,g=u===void 0?0:this.data[f].indexOf(u),_=this.data[f][g];return this.data[f].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(_.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const f in this.data)for(const g of this.data[f])i(g.value)||u.push(g);for(const f of u)this.remove(f.value.tileID,f)}}class Me{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,f){const g=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},c.e(this.stateChanges[i][g],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const _ in this.state[i])_!==g&&(this.deletedStates[i][_]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const _ in this.state[i][g])f[_]||(this.deletedStates[i][g][_]=null)}else for(const _ in f)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][_]===null&&delete this.deletedStates[i][g][_]}removeFeatureState(i,u,f){if(this.deletedStates[i]===null)return;const g=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&u!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][f]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(f in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][f]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,u){const f=String(u),g=c.e({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const _=this.deletedStates[i][u];if(_===null)return{};for(const S in _)delete g[S]}return g}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const S in this.stateChanges[g])this.state[g][S]||(this.state[g][S]={}),c.e(this.state[g][S],this.stateChanges[g][S]),_[S]=this.state[g][S];f[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const S in this.state[g])_[S]={},this.state[g][S]={};else for(const S in this.deletedStates[g]){if(this.deletedStates[g][S]===null)this.state[g][S]={};else for(const C of Object.keys(this.deletedStates[g][S]))delete this.state[g][S][C];_[S]=this.state[g][S]}f[g]=f[g]||{},c.e(f[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in i)i[g].setFeatureState(f,u)}}class Bn extends c.E{constructor(i,u,f){super(),this.id=i,this.dispatcher=f,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,S,C)=>{const E=new(Ui(_.type))(g,_,S,C);if(E.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${E.id}`);return E})(i,u,f,this),this._tiles={},this._cache=new as(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Me,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new c.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Yn).map(i=>i.key)}getRenderableIds(i){const u=[];for(const f in this._tiles)this._isIdRenderable(f,i)&&u.push(this._tiles[f]);return i?u.sort((f,g)=>{const _=f.tileID,S=g.tileID,C=new c.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),E=new c.P(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-S.overscaledZ||E.y-C.y||E.x-C.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(Yn).map(f=>f.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,i,u)))}_tileLoaded(i,u,f,g){if(g)return i.state="errored",void(g.status!==404?this._source.fire(new c.j(g,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=c.h.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const _=u[g];if(i.neighboringTiles&&i.neighboringTiles[_]){const S=this.getTileByID(_);f(i,S),f(S,i)}}function f(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let S=_.tileID.canonical.x-g.tileID.canonical.x;const C=_.tileID.canonical.y-g.tileID.canonical.y,E=Math.pow(2,g.tileID.canonical.z),P=_.tileID.key;S===0&&C===0||Math.abs(C)>1||(Math.abs(S)>1&&(Math.abs(S+E)===1?S+=E:Math.abs(S-E)===1&&(S-=E)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,S,C),g.neighboringTiles&&g.neighboringTiles[P]&&(g.neighboringTiles[P].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,f,g){for(const _ in this._tiles){let S=this._tiles[_];if(g[_]||!S.hasData()||S.tileID.overscaledZ<=u||S.tileID.overscaledZ>f)continue;let C=S.tileID;for(;S&&S.tileID.overscaledZ>u+1;){const P=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[P.key],S&&S.hasData()&&(C=P)}let E=C;for(;E.overscaledZ>u;)if(E=E.scaledTo(E.overscaledZ-1),i[E.key]){g[C.key]=C;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=i.overscaledZ-1;f>=u;f--){const g=i.scaledTo(f),_=this._getLoadedTile(g);if(_)return _}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(u*f*(this._maxTileCacheZoomLevels===null?c.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const f={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),f[_.tileID.key]=_}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new c.O(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(f=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(f=f.filter(z=>this._source.hasTile(z)))):f=[];const g=i.coveringZoomLevel(this._source),_=Math.max(g-Bn.maxOverzooming,this._source.minzoom),S=Math.max(g+Bn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const z={};for(const L of f)if(L.canonical.z>this._source.minzoom){const V=L.scaledTo(L.canonical.z-1);z[V.key]=V;const J=L.scaledTo(Math.max(this._source.minzoom,Math.min(L.canonical.z,5)));z[J.key]=J}f=f.concat(Object.values(z))}const C=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,C&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const E=this._updateRetainedTiles(f,g);if(Ut(this._source.type)){const z={},L={},V=Object.keys(E),J=c.h.now();for(const Y of V){const ne=E[Y],K=this._tiles[Y];if(!K||K.fadeEndTime!==0&&K.fadeEndTime<=J)continue;const ve=this.findLoadedParent(ne,_);ve&&(this._addTile(ve.tileID),z[ve.tileID.key]=ve.tileID),L[Y]=ne}this._retainLoadedChildren(L,g,S,E);for(const Y in z)E[Y]||(this._coveredTiles[Y]=!0,E[Y]=z[Y]);if(u){const Y={},ne={};for(const K of f)this._tiles[K.key].hasData()?Y[K.key]=K:ne[K.key]=K;for(const K in ne){const ve=ne[K].children(this._source.maxzoom);this._tiles[ve[0].key]&&this._tiles[ve[1].key]&&this._tiles[ve[2].key]&&this._tiles[ve[3].key]&&(Y[ve[0].key]=E[ve[0].key]=ve[0],Y[ve[1].key]=E[ve[1].key]=ve[1],Y[ve[2].key]=E[ve[2].key]=ve[2],Y[ve[3].key]=E[ve[3].key]=ve[3],delete ne[K])}for(const K in ne){const ve=this.findLoadedParent(ne[K],this._source.minzoom);if(ve){Y[ve.tileID.key]=E[ve.tileID.key]=ve.tileID;for(const ke in Y)Y[ke].isChildOf(ve.tileID)&&delete Y[ke]}}for(const K in this._tiles)Y[K]||(this._coveredTiles[K]=!0)}}for(const z in E)this._tiles[z].clearFadeHold();const P=c.ab(this._tiles,E);for(const z of P){const L=this._tiles[z];L.hasSymbolBuckets&&!L.holdingForFade()?L.setHoldDuration(this.map._fadeDuration):L.hasSymbolBuckets&&!L.symbolFadeFinished()||this._removeTile(z)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const f={},g={},_=Math.max(u-Bn.maxOverzooming,this._source.minzoom),S=Math.max(u+Bn.maxUnderzooming,this._source.minzoom),C={};for(const E of i){const P=this._addTile(E);f[E.key]=E,P.hasData()||u<this._source.maxzoom&&(C[E.key]=E)}this._retainLoadedChildren(C,u,S,f);for(const E of i){let P=this._tiles[E.key];if(P.hasData())continue;if(u+1>this._source.maxzoom){const L=E.children(this._source.maxzoom)[0],V=this.getTile(L);if(V&&V.hasData()){f[L.key]=L;continue}}else{const L=E.children(this._source.maxzoom);if(f[L[0].key]&&f[L[1].key]&&f[L[2].key]&&f[L[3].key])continue}let z=P.wasRequested();for(let L=E.overscaledZ-1;L>=_;--L){const V=E.scaledTo(L);if(g[V.key])break;if(g[V.key]=!0,P=this.getTile(V),!P&&z&&(P=this._addTile(V)),P){const J=P.hasData();if((z||J)&&(f[V.key]=V),z=P.wasRequested(),J)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let f,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}u.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(_),f)break;g=_}for(const _ of u)this._loadedParentTiles[_]=f}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const f=u;return u||(u=new Cn(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,f||this._source.fire(new c.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=u.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,f){const g=[],_=this.transform;if(!_)return g;const S=f?_.getCameraQueryGeometry(i):i,C=i.map(Y=>_.pointCoordinate(Y,this.terrain)),E=S.map(Y=>_.pointCoordinate(Y,this.terrain)),P=this.getIds();let z=1/0,L=1/0,V=-1/0,J=-1/0;for(const Y of E)z=Math.min(z,Y.x),L=Math.min(L,Y.y),V=Math.max(V,Y.x),J=Math.max(J,Y.y);for(let Y=0;Y<P.length;Y++){const ne=this._tiles[P[Y]];if(ne.holdingForFade())continue;const K=ne.tileID,ve=Math.pow(2,_.zoom-ne.tileID.overscaledZ),ke=u*ne.queryPadding*c.N/ne.tileSize/ve,le=[K.getTilePoint(new c.U(z,L)),K.getTilePoint(new c.U(V,J))];if(le[0].x-ke<c.N&&le[0].y-ke<c.N&&le[1].x+ke>=0&&le[1].y+ke>=0){const _e=C.map(Ie=>K.getTilePoint(Ie)),Ee=E.map(Ie=>K.getTilePoint(Ie));g.push({tile:ne,tileID:K,queryGeometry:_e,cameraQueryGeometry:Ee,scale:ve})}}return g}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Ut(this._source.type)){const i=c.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=i)return!0}return!1}setFeatureState(i,u,f){this._state.updateState(i=i||"_geojsonTileLayer",u,f)}removeFeatureState(i,u,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,f)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,f){const g=this._tiles[i];g&&g.setDependencies(u,f)}reloadTilesForDependencies(i,u){for(const f in this._tiles)this._tiles[f].hasDependency(i,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,u))}}function Yn(y,i){const u=Math.abs(2*y.wrap)-+(y.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||f-u||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function Ut(y){return y==="raster"||y==="image"||y==="video"}Bn.maxOverzooming=10,Bn.maxUnderzooming=3;const Zt="mapboxgl_preloaded_worker_pool";class Ii{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Ii.workerCount;)this.workers.push(new Worker(c.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Zt]}numActive(){return Object.keys(this.active).length}}const Fs=Math.floor(c.h.hardwareConcurrency/2);let Gi;function ua(){return Gi||(Gi=new Ii),Gi}Ii.workerCount=c.ac(globalThis)?Math.max(Math.min(Fs,3),1):1;class dn{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=c.ad(i,0,1);let u=1,f=this._distances[u];const g=i*this.paddedLength+this.padding;for(;f<g&&u<this._distances.length;)f=this._distances[++u];const _=u-1,S=this._distances[_],C=f-S,E=C>0?(g-S)/C:0;return this.points[_].mult(1-E).add(this.points[u].mult(E))}}function kn(y,i){let u=!0;return y==="always"||y!=="never"&&i!=="never"||(u=!1),u}class Hi{constructor(i,u,f){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(u/f);for(let S=0;S<this.xCellCount*this.yCellCount;S++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,f,g,_){this._forEachCell(u,f,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(i,u,f,g){this._forEachCell(u-g,f-g,u+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(f),this.circles.push(g)}_insertBoxCell(i,u,f,g,_,S){this.boxCells[_].push(S)}_insertCircleCell(i,u,f,g,_,S){this.circleCells[_].push(S)}_query(i,u,f,g,_,S,C){if(f<0||i>this.width||g<0||u>this.height)return[];const E=[];if(i<=0&&u<=0&&this.width<=f&&this.height<=g){if(_)return[{key:null,x1:i,y1:u,x2:f,y2:g}];for(let P=0;P<this.boxKeys.length;P++)E.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){const z=this.circles[3*P],L=this.circles[3*P+1],V=this.circles[3*P+2];E.push({key:this.circleKeys[P],x1:z-V,y1:L-V,x2:z+V,y2:L+V})}}else this._forEachCell(i,u,f,g,this._queryCell,E,{hitTest:_,overlapMode:S,seenUids:{box:{},circle:{}}},C);return E}query(i,u,f,g){return this._query(i,u,f,g,!1,null)}hitTest(i,u,f,g,_,S){return this._query(i,u,f,g,!0,_,S).length>0}hitTestCircle(i,u,f,g,_){const S=i-f,C=i+f,E=u-f,P=u+f;if(C<0||S>this.width||P<0||E>this.height)return!1;const z=[];return this._forEachCell(S,E,C,P,this._queryCellCircle,z,{hitTest:!0,overlapMode:g,circle:{x:i,y:u,radius:f},seenUids:{box:{},circle:{}}},_),z.length>0}_queryCell(i,u,f,g,_,S,C,E){const{seenUids:P,hitTest:z,overlapMode:L}=C,V=this.boxCells[_];if(V!==null){const Y=this.bboxes;for(const ne of V)if(!P.box[ne]){P.box[ne]=!0;const K=4*ne,ve=this.boxKeys[ne];if(i<=Y[K+2]&&u<=Y[K+3]&&f>=Y[K+0]&&g>=Y[K+1]&&(!E||E(ve))&&(!z||!kn(L,ve.overlapMode))&&(S.push({key:ve,x1:Y[K],y1:Y[K+1],x2:Y[K+2],y2:Y[K+3]}),z))return!0}}const J=this.circleCells[_];if(J!==null){const Y=this.circles;for(const ne of J)if(!P.circle[ne]){P.circle[ne]=!0;const K=3*ne,ve=this.circleKeys[ne];if(this._circleAndRectCollide(Y[K],Y[K+1],Y[K+2],i,u,f,g)&&(!E||E(ve))&&(!z||!kn(L,ve.overlapMode))){const ke=Y[K],le=Y[K+1],_e=Y[K+2];if(S.push({key:ve,x1:ke-_e,y1:le-_e,x2:ke+_e,y2:le+_e}),z)return!0}}}return!1}_queryCellCircle(i,u,f,g,_,S,C,E){const{circle:P,seenUids:z,overlapMode:L}=C,V=this.boxCells[_];if(V!==null){const Y=this.bboxes;for(const ne of V)if(!z.box[ne]){z.box[ne]=!0;const K=4*ne,ve=this.boxKeys[ne];if(this._circleAndRectCollide(P.x,P.y,P.radius,Y[K+0],Y[K+1],Y[K+2],Y[K+3])&&(!E||E(ve))&&!kn(L,ve.overlapMode))return S.push(!0),!0}}const J=this.circleCells[_];if(J!==null){const Y=this.circles;for(const ne of J)if(!z.circle[ne]){z.circle[ne]=!0;const K=3*ne,ve=this.circleKeys[ne];if(this._circlesCollide(Y[K],Y[K+1],Y[K+2],P.x,P.y,P.radius)&&(!E||E(ve))&&!kn(L,ve.overlapMode))return S.push(!0),!0}}}_forEachCell(i,u,f,g,_,S,C,E){const P=this._convertToXCellCoord(i),z=this._convertToYCellCoord(u),L=this._convertToXCellCoord(f),V=this._convertToYCellCoord(g);for(let J=P;J<=L;J++)for(let Y=z;Y<=V;Y++)if(_.call(this,i,u,f,g,this.xCellCount*Y+J,S,C,E))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,f,g,_,S){const C=g-i,E=_-u,P=f+S;return P*P>C*C+E*E}_circleAndRectCollide(i,u,f,g,_,S,C){const E=(S-g)/2,P=Math.abs(i-(g+E));if(P>E+f)return!1;const z=(C-_)/2,L=Math.abs(u-(_+z));if(L>z+f)return!1;if(P<=E||L<=z)return!0;const V=P-E,J=L-z;return V*V+J*J<=f*f}}function Ke(y,i,u,f,g){const _=c.Z();return i?(c.a0(_,_,[1/g,1/g,1]),u||c.ae(_,_,f.angle)):c.a1(_,f.labelPlaneMatrix,y),_}function qi(y,i,u,f,g){if(i){const _=c.af(y);return c.a0(_,_,[g,g,1]),u||c.ae(_,_,-f.angle),_}return f.glCoordMatrix}function er(y,i,u){let f;u?(f=[y.x,y.y,u(y.x,y.y),1],c.ag(f,f,i)):(f=[y.x,y.y,0,1],oe(f,f,i));const g=f[3];return{point:new c.P(f[0]/g,f[1]/g),signedDistanceFromCamera:g}}function uo(y,i){return .5+y/i*.5}function ls(y,i){const u=y[0]/y[3],f=y[1]/y[3];return u>=-i[0]&&u<=i[0]&&f>=-i[1]&&f<=i[1]}function Qe(y,i,u,f,g,_,S,C,E,P){const z=f?y.textSizeData:y.iconSizeData,L=c.ah(z,u.transform.zoom),V=[256/u.width*2+1,256/u.height*2+1],J=f?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;J.clear();const Y=y.lineVertexArray,ne=f?y.text.placedSymbolArray:y.icon.placedSymbolArray,K=u.transform.width/u.transform.height;let ve=!1;for(let ke=0;ke<ne.length;ke++){const le=ne.get(ke);if(le.hidden||le.writingMode===c.ai.vertical&&!ve){Z(le.numGlyphs,J);continue}let _e;if(ve=!1,P?(_e=[le.anchorX,le.anchorY,P(le.anchorX,le.anchorY),1],c.ag(_e,_e,i)):(_e=[le.anchorX,le.anchorY,0,1],oe(_e,_e,i)),!ls(_e,V)){Z(le.numGlyphs,J);continue}const Ee=uo(u.transform.cameraToCenterDistance,_e[3]),Ie=c.aj(z,L,le),De=S?Ie/Ee:Ie*Ee,je=new c.P(le.anchorX,le.anchorY),Ne=er(je,g,P).point,qe={projections:{},offsets:{}},dt=Jn(le,De,!1,C,i,g,_,y.glyphOffsetArray,Y,J,Ne,je,qe,K,E,P);ve=dt.useVertical,(dt.notEnoughRoom||ve||dt.needsFlipping&&Jn(le,De,!0,C,i,g,_,y.glyphOffsetArray,Y,J,Ne,je,qe,K,E,P).notEnoughRoom)&&Z(le.numGlyphs,J)}f?y.text.dynamicLayoutVertexBuffer.updateData(J):y.icon.dynamicLayoutVertexBuffer.updateData(J)}function Ft(y,i,u,f,g,_,S,C,E,P,z,L,V){const J=C.glyphStartIndex+C.numGlyphs,Y=C.lineStartIndex,ne=C.lineStartIndex+C.lineLength,K=i.getoffsetX(C.glyphStartIndex),ve=i.getoffsetX(J-1),ke=B(y*K,u,f,g,_,S,C.segment,Y,ne,E,P,z,L,V);if(!ke)return null;const le=B(y*ve,u,f,g,_,S,C.segment,Y,ne,E,P,z,L,V);return le?{first:ke,last:le}:null}function Mt(y,i,u,f){return y===c.ai.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*f?{useVertical:!0}:(y===c.ai.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function Jn(y,i,u,f,g,_,S,C,E,P,z,L,V,J,Y,ne){const K=i/24,ve=y.lineOffsetX*K,ke=y.lineOffsetY*K;let le;if(y.numGlyphs>1){const _e=y.glyphStartIndex+y.numGlyphs,Ee=y.lineStartIndex,Ie=y.lineStartIndex+y.lineLength,De=Ft(K,C,ve,ke,u,z,L,y,E,_,V,Y,ne);if(!De)return{notEnoughRoom:!0};const je=er(De.first.point,S,ne).point,Ne=er(De.last.point,S,ne).point;if(f&&!u){const qe=Mt(y.writingMode,je,Ne,J);if(qe)return qe}le=[De.first];for(let qe=y.glyphStartIndex+1;qe<_e-1;qe++)le.push(B(K*C.getoffsetX(qe),ve,ke,u,z,L,y.segment,Ee,Ie,E,_,V,Y,ne));le.push(De.last)}else{if(f&&!u){const Ee=er(L,g,ne).point,Ie=y.lineStartIndex+y.segment+1,De=new c.P(E.getx(Ie),E.gety(Ie)),je=er(De,g,ne),Ne=je.signedDistanceFromCamera>0?je.point:Ro(L,De,Ee,1,g,ne),qe=Mt(y.writingMode,Ee,Ne,J);if(qe)return qe}const _e=B(K*C.getoffsetX(y.glyphStartIndex),ve,ke,u,z,L,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,E,_,V,Y,ne);if(!_e)return{notEnoughRoom:!0};le=[_e]}for(const _e of le)c.ak(P,_e.point,_e.angle);return{}}function Ro(y,i,u,f,g,_){const S=er(y.add(y.sub(i)._unit()),g,_).point,C=u.sub(S);return u.add(C._mult(f/C.mag()))}function Ot(y,i){const{projectionCache:u,lineVertexArray:f,labelPlaneMatrix:g,tileAnchorPoint:_,distanceFromAnchor:S,getElevation:C,previousVertex:E,direction:P,absOffsetX:z}=i;if(u.projections[y])return u.projections[y];const L=new c.P(f.getx(y),f.gety(y)),V=er(L,g,C);if(V.signedDistanceFromCamera>0)return u.projections[y]=V.point,V.point;const J=y-P;return Ro(S===0?_:new c.P(f.getx(J),f.gety(J)),L,E,z-S+1,g,C)}function cs(y,i,u){return y._unit()._perp()._mult(i*u)}function re(y,i,u,f,g,_,S,C){const{projectionCache:E,direction:P}=C;if(E.offsets[y])return E.offsets[y];const z=u.add(i);if(y+P<f||y+P>=g)return E.offsets[y]=z,z;const L=Ot(y+P,C),V=cs(L.sub(u),S,P),J=u.add(V),Y=L.add(V);return E.offsets[y]=c.al(_,z,J,Y)||z,E.offsets[y]}function B(y,i,u,f,g,_,S,C,E,P,z,L,V,J){const Y=f?y-i:y+i;let ne=Y>0?1:-1,K=0;f&&(ne*=-1,K=Math.PI),ne<0&&(K+=Math.PI);let ve,ke,le=ne>0?C+S:C+S+1,_e=g,Ee=g,Ie=0,De=0;const je=Math.abs(Y),Ne=[];let qe;for(;Ie+De<=je;){if(le+=ne,le<C||le>=E)return null;Ie+=De,Ee=_e,ke=ve;const et={projectionCache:L,lineVertexArray:P,labelPlaneMatrix:z,tileAnchorPoint:_,distanceFromAnchor:Ie,getElevation:J,previousVertex:Ee,direction:ne,absOffsetX:je};if(_e=Ot(le,et),u===0)Ne.push(Ee),qe=_e.sub(Ee);else{let Tt;const pt=_e.sub(Ee);Tt=pt.mag()===0?cs(Ot(le+ne,et).sub(_e),u,ne):cs(pt,u,ne),ke||(ke=Ee.add(Tt)),ve=re(le,Tt,_e,C,E,ke,u,et),Ne.push(ke),qe=ve.sub(ke)}De=qe.mag()}const dt=qe._mult((je-Ie)/De)._add(ke||Ee),Gt=K+Math.atan2(_e.y-Ee.y,_e.x-Ee.x);return Ne.push(dt),{point:dt,angle:V?Gt:0,path:Ne}}const N=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Z(y,i){for(let u=0;u<y;u++){const f=i.length;i.resize(f+4),i.float32.set(N,3*f)}}function oe(y,i,u){const f=i[0],g=i[1];return y[0]=u[0]*f+u[4]*g+u[12],y[1]=u[1]*f+u[5]*g+u[13],y[3]=u[3]*f+u[7]*g+u[15],y}const ae=100;class we{constructor(i,u=new Hi(i.width+200,i.height+200,25),f=new Hi(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+ae,this.screenBottomBoundary=i.height+ae,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,f,g,_,S){const C=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY,S),E=f*C.perspectiveRatio,P=i.x1*E+C.point.x,z=i.y1*E+C.point.y,L=i.x2*E+C.point.x,V=i.y2*E+C.point.y;return!this.isInsideGrid(P,z,L,V)||u!=="always"&&this.grid.hitTest(P,z,L,V,u,_)||C.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[P,z,L,V],offscreen:this.isOffscreen(P,z,L,V)}}placeCollisionCircles(i,u,f,g,_,S,C,E,P,z,L,V,J,Y){const ne=[],K=new c.P(u.anchorX,u.anchorY),ve=er(K,S,Y),ke=uo(this.transform.cameraToCenterDistance,ve.signedDistanceFromCamera),le=(z?_/ke:_*ke)/c.ap,_e=er(K,C,Y).point,Ee=Ft(le,g,u.lineOffsetX*le,u.lineOffsetY*le,!1,_e,K,u,f,C,{projections:{},offsets:{}},!1,Y);let Ie=!1,De=!1,je=!0;if(Ee){const Ne=.5*V*ke+J,qe=new c.P(-100,-100),dt=new c.P(this.screenRightBoundary,this.screenBottomBoundary),Gt=new dn,et=Ee.first,Tt=Ee.last;let pt=[];for(let $t=et.path.length-1;$t>=1;$t--)pt.push(et.path[$t]);for(let $t=1;$t<Tt.path.length;$t++)pt.push(Tt.path[$t]);const hr=2.5*Ne;if(E){const $t=pt.map(Ht=>er(Ht,E,Y));pt=$t.some(Ht=>Ht.signedDistanceFromCamera<=0)?[]:$t.map(Ht=>Ht.point)}let Vt=[];if(pt.length>0){const $t=pt[0].clone(),Ht=pt[0].clone();for(let Gr=1;Gr<pt.length;Gr++)$t.x=Math.min($t.x,pt[Gr].x),$t.y=Math.min($t.y,pt[Gr].y),Ht.x=Math.max(Ht.x,pt[Gr].x),Ht.y=Math.max(Ht.y,pt[Gr].y);Vt=$t.x>=qe.x&&Ht.x<=dt.x&&$t.y>=qe.y&&Ht.y<=dt.y?[pt]:Ht.x<qe.x||$t.x>dt.x||Ht.y<qe.y||$t.y>dt.y?[]:c.am([pt],qe.x,qe.y,dt.x,dt.y)}for(const $t of Vt){Gt.reset($t,.25*Ne);let Ht=0;Ht=Gt.length<=.5*Ne?1:Math.ceil(Gt.paddedLength/hr)+1;for(let Gr=0;Gr<Ht;Gr++){const br=Gr/Math.max(Ht-1,1),Mn=Gt.lerp(br),fn=Mn.x+ae,Yr=Mn.y+ae;ne.push(fn,Yr,Ne,0);const Di=fn-Ne,kr=Yr-Ne,Bo=fn+Ne,$o=Yr+Ne;if(je=je&&this.isOffscreen(Di,kr,Bo,$o),De=De||this.isInsideGrid(Di,kr,Bo,$o),i!=="always"&&this.grid.hitTestCircle(fn,Yr,Ne,i,L)&&(Ie=!0,!P))return{circles:[],offscreen:!1,collisionDetected:Ie}}}}return{circles:!P&&Ie||!De||ke<this.perspectiveRatioCutoff?[]:ne,offscreen:je,collisionDetected:Ie}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,g=1/0,_=-1/0,S=-1/0;for(const z of i){const L=new c.P(z.x+ae,z.y+ae);f=Math.min(f,L.x),g=Math.min(g,L.y),_=Math.max(_,L.x),S=Math.max(S,L.y),u.push(L)}const C=this.grid.query(f,g,_,S).concat(this.ignoredGrid.query(f,g,_,S)),E={},P={};for(const z of C){const L=z.key;if(E[L.bucketInstanceId]===void 0&&(E[L.bucketInstanceId]={}),E[L.bucketInstanceId][L.featureIndex])continue;const V=[new c.P(z.x1,z.y1),new c.P(z.x2,z.y1),new c.P(z.x2,z.y2),new c.P(z.x1,z.y2)];c.an(u,V)&&(E[L.bucketInstanceId][L.featureIndex]=!0,P[L.bucketInstanceId]===void 0&&(P[L.bucketInstanceId]=[]),P[L.bucketInstanceId].push(L.featureIndex))}return P}insertCollisionBox(i,u,f,g,_,S){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:S,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,f,g,_,S){const C=f?this.ignoredGrid:this.grid,E={bucketInstanceId:g,featureIndex:_,collisionGroupID:S,overlapMode:u};for(let P=0;P<i.length;P+=4)C.insertCircle(E,i[P],i[P+1],i[P+2])}projectAndGetPerspectiveRatio(i,u,f,g){let _;return g?(_=[u,f,g(u,f),1],c.ag(_,_,i)):(_=[u,f,0,1],oe(_,_,i)),{point:new c.P((_[0]/_[3]+1)/2*this.transform.width+ae,(-_[1]/_[3]+1)/2*this.transform.height+ae),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(i,u,f,g){return f<ae||i>=this.screenRightBoundary||g<ae||u>this.screenBottomBoundary}isInsideGrid(i,u,f,g){return f>=0&&i<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=c.ao([]);return c.$(i,i,[-100,-100,0]),i}}function ye(y,i,u){return i*(c.N/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class he{constructor(i,u,f,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):g&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class xe{constructor(i,u,f,g,_){this.text=new he(i?i.text:null,u,f,_),this.icon=new he(i?i.icon:null,u,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ze{constructor(i,u,f){this.text=i,this.icon=u,this.skipFade=f}}class Le{constructor(){this.invProjMatrix=c.Z(),this.viewportMatrix=c.Z(),this.circles=[]}}class $e{constructor(i,u,f,g,_){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=_}}class xt{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[i]}}function It(y,i,u,f,g){const{horizontalAlign:_,verticalAlign:S}=c.au(y);return new c.P(-(_-.5)*i+f[0]*g,-(S-.5)*u+f[1]*g)}function ht(y,i,u,f,g,_){const{x1:S,x2:C,y1:E,y2:P,anchorPointX:z,anchorPointY:L}=y,V=new c.P(i,u);return f&&V._rotate(g?_:-_),{x1:S+V.x,y1:E+V.y,x2:C+V.x,y2:P+V.y,anchorPointX:z,anchorPointY:L}}class wt{constructor(i,u,f,g,_){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new we(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new xt(g),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,f,g){const _=f.getBucket(u),S=f.latestFeatureIndex;if(!_||!S||u.id!==_.layerIds[0])return;const C=f.collisionBoxArray,E=_.layers[0].layout,P=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),z=f.tileSize/c.N,L=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),V=E.get("text-pitch-alignment")==="map",J=E.get("text-rotation-alignment")==="map",Y=ye(f,1,this.transform.zoom),ne=Ke(L,V,J,this.transform,Y);let K=null;if(V){const ke=qi(L,V,J,this.transform,Y);K=c.a1([],this.transform.labelPlaneMatrix,ke)}this.retainedQueryData[_.bucketInstanceId]=new $e(_.bucketInstanceId,S,_.sourceLayerIndex,_.index,f.tileID);const ve={bucket:_,layout:E,posMatrix:L,textLabelPlaneMatrix:ne,labelToScreenMatrix:K,scale:P,textPixelRatio:z,holdingForFade:f.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:c.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const ke of _.sortKeyRanges){const{sortKey:le,symbolInstanceStart:_e,symbolInstanceEnd:Ee}=ke;i.push({sortKey:le,symbolInstanceStart:_e,symbolInstanceEnd:Ee,parameters:ve})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:ve})}attemptAnchorPlacement(i,u,f,g,_,S,C,E,P,z,L,V,J,Y,ne,K){const ve=c.aq[i.textAnchor],ke=[i.textOffset0,i.textOffset1],le=It(ve,f,g,ke,_),_e=this.collisionIndex.placeCollisionBox(ht(u,le.x,le.y,S,C,this.transform.angle),L,E,P,z.predicate,K);if((!ne||this.collisionIndex.placeCollisionBox(ht(ne,le.x,le.y,S,C,this.transform.angle),L,E,P,z.predicate,K).box.length!==0)&&_e.box.length>0){let Ee;if(this.prevPlacement&&this.prevPlacement.variableOffsets[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID]&&this.prevPlacement.placements[V.crossTileID].text&&(Ee=this.prevPlacement.variableOffsets[V.crossTileID].anchor),V.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[V.crossTileID]={textOffset:ke,width:f,height:g,anchor:ve,textBoxScale:_,prevAnchor:Ee},this.markUsedJustification(J,ve,V,Y),J.allowVerticalPlacement&&(this.markUsedOrientation(J,Y,V),this.placedOrientations[V.crossTileID]=Y),{shift:le,placedGlyphBoxes:_e}}}placeLayerBucketPart(i,u,f){const{bucket:g,layout:_,posMatrix:S,textLabelPlaneMatrix:C,labelToScreenMatrix:E,textPixelRatio:P,holdingForFade:z,collisionBoxArray:L,partiallyEvaluatedTextSize:V,collisionGroup:J}=i.parameters,Y=_.get("text-optional"),ne=_.get("icon-optional"),K=c.ar(_,"text-overlap","text-allow-overlap"),ve=K==="always",ke=c.ar(_,"icon-overlap","icon-allow-overlap"),le=ke==="always",_e=_.get("text-rotation-alignment")==="map",Ee=_.get("text-pitch-alignment")==="map",Ie=_.get("icon-text-fit")!=="none",De=_.get("symbol-z-order")==="viewport-y",je=ve&&(le||!g.hasIconData()||ne),Ne=le&&(ve||!g.hasTextData()||Y);!g.collisionArrays&&L&&g.deserializeCollisionBoxes(L);const qe=this.retainedQueryData[g.bucketInstanceId].tileID,dt=this.terrain?(et,Tt)=>this.terrain.getElevation(qe,et,Tt):null,Gt=(et,Tt)=>{var pt,hr;if(u[et.crossTileID])return;if(z)return void(this.placements[et.crossTileID]=new ze(!1,!1,!1));let Vt=!1,$t=!1,Ht=!0,Gr=null,br={box:null,offscreen:null},Mn={box:null,offscreen:null},fn=null,Yr=null,Di=null,kr=0,Bo=0,$o=0;Tt.textFeatureIndex?kr=Tt.textFeatureIndex:et.useRuntimeCollisionCircles&&(kr=et.featureIndex),Tt.verticalTextFeatureIndex&&(Bo=Tt.verticalTextFeatureIndex);const qs=Tt.textBox;if(qs){const Nn=Hr=>{let pn=c.ai.horizontal;if(g.allowVerticalPlacement&&!Hr&&this.prevPlacement){const fi=this.prevPlacement.placedOrientations[et.crossTileID];fi&&(this.placedOrientations[et.crossTileID]=fi,pn=fi,this.markUsedOrientation(g,pn,et))}return pn},zn=(Hr,pn)=>{if(g.allowVerticalPlacement&&et.numVerticalGlyphVertices>0&&Tt.verticalTextBox){for(const fi of g.writingModes)if(fi===c.ai.vertical?(br=pn(),Mn=br):br=Hr(),br&&br.box&&br.box.length)break}else br=Hr()},ei=et.textAnchorOffsetStartIndex,xa=et.textAnchorOffsetEndIndex;if(xa===ei){const Hr=(pn,fi)=>{const qr=this.collisionIndex.placeCollisionBox(pn,K,P,S,J.predicate,dt);return qr&&qr.box&&qr.box.length&&(this.markUsedOrientation(g,fi,et),this.placedOrientations[et.crossTileID]=fi),qr};zn(()=>Hr(qs,c.ai.horizontal),()=>{const pn=Tt.verticalTextBox;return g.allowVerticalPlacement&&et.numVerticalGlyphVertices>0&&pn?Hr(pn,c.ai.vertical):{box:null,offscreen:null}}),Nn(br&&br.box&&br.box.length)}else{let Hr=c.aq[(hr=(pt=this.prevPlacement)===null||pt===void 0?void 0:pt.variableOffsets[et.crossTileID])===null||hr===void 0?void 0:hr.anchor];const pn=(qr,ba,vu)=>{const um=qr.x2-qr.x1,hm=qr.y2-qr.y1,K0=et.textBoxScale,Ed=Ie&&ke==="never"?ba:null;let Fo={box:[],offscreen:!1},wa=K==="never"?1:2,No="never";Hr&&wa++;for(let Qi=0;Qi<wa;Qi++){for(let jo=ei;jo<xa;jo++){const Id=g.textAnchorOffsets.get(jo);if(Hr&&Id.textAnchor!==Hr)continue;const ms=this.attemptAnchorPlacement(Id,qr,um,hm,K0,_e,Ee,P,S,J,No,et,g,vu,Ed,dt);if(ms&&(Fo=ms.placedGlyphBoxes,Fo&&Fo.box&&Fo.box.length))return Vt=!0,Gr=ms.shift,Fo}Hr?Hr=null:No=K}return Fo};zn(()=>pn(qs,Tt.iconBox,c.ai.horizontal),()=>{const qr=Tt.verticalTextBox;return g.allowVerticalPlacement&&!(br&&br.box&&br.box.length)&&et.numVerticalGlyphVertices>0&&qr?pn(qr,Tt.verticalIconBox,c.ai.vertical):{box:null,offscreen:null}}),br&&(Vt=br.box,Ht=br.offscreen);const fi=Nn(br&&br.box);if(!Vt&&this.prevPlacement){const qr=this.prevPlacement.variableOffsets[et.crossTileID];qr&&(this.variableOffsets[et.crossTileID]=qr,this.markUsedJustification(g,qr.anchor,et,fi))}}}if(fn=br,Vt=fn&&fn.box&&fn.box.length>0,Ht=fn&&fn.offscreen,et.useRuntimeCollisionCircles){const Nn=g.text.placedSymbolArray.get(et.centerJustifiedTextSymbolIndex),zn=c.aj(g.textSizeData,V,Nn),ei=_.get("text-padding");Yr=this.collisionIndex.placeCollisionCircles(K,Nn,g.lineVertexArray,g.glyphOffsetArray,zn,S,C,E,f,Ee,J.predicate,et.collisionCircleDiameter,ei,dt),Yr.circles.length&&Yr.collisionDetected&&!f&&c.w("Collisions detected, but collision boxes are not shown"),Vt=ve||Yr.circles.length>0&&!Yr.collisionDetected,Ht=Ht&&Yr.offscreen}if(Tt.iconFeatureIndex&&($o=Tt.iconFeatureIndex),Tt.iconBox){const Nn=zn=>{const ei=Ie&&Gr?ht(zn,Gr.x,Gr.y,_e,Ee,this.transform.angle):zn;return this.collisionIndex.placeCollisionBox(ei,ke,P,S,J.predicate,dt)};Mn&&Mn.box&&Mn.box.length&&Tt.verticalIconBox?(Di=Nn(Tt.verticalIconBox),$t=Di.box.length>0):(Di=Nn(Tt.iconBox),$t=Di.box.length>0),Ht=Ht&&Di.offscreen}const _a=Y||et.numHorizontalGlyphVertices===0&&et.numVerticalGlyphVertices===0,cl=ne||et.numIconVertices===0;if(_a||cl?cl?_a||($t=$t&&Vt):Vt=$t&&Vt:$t=Vt=$t&&Vt,Vt&&fn&&fn.box&&this.collisionIndex.insertCollisionBox(fn.box,K,_.get("text-ignore-placement"),g.bucketInstanceId,Mn&&Mn.box&&Bo?Bo:kr,J.ID),$t&&Di&&this.collisionIndex.insertCollisionBox(Di.box,ke,_.get("icon-ignore-placement"),g.bucketInstanceId,$o,J.ID),Yr&&(Vt&&this.collisionIndex.insertCollisionCircles(Yr.circles,K,_.get("text-ignore-placement"),g.bucketInstanceId,kr,J.ID),f)){const Nn=g.bucketInstanceId;let zn=this.collisionCircleArrays[Nn];zn===void 0&&(zn=this.collisionCircleArrays[Nn]=new Le);for(let ei=0;ei<Yr.circles.length;ei+=4)zn.circles.push(Yr.circles[ei+0]),zn.circles.push(Yr.circles[ei+1]),zn.circles.push(Yr.circles[ei+2]),zn.circles.push(Yr.collisionDetected?1:0)}if(et.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[et.crossTileID]=new ze(Vt||je,$t||Ne,Ht||g.justReloaded),u[et.crossTileID]=!0};if(De){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const et=g.getSortedSymbolIndexes(this.transform.angle);for(let Tt=et.length-1;Tt>=0;--Tt){const pt=et[Tt];Gt(g.symbolInstances.get(pt),g.collisionArrays[pt])}}else for(let et=i.symbolInstanceStart;et<i.symbolInstanceEnd;et++)Gt(g.symbolInstances.get(et),g.collisionArrays[et]);if(f&&g.bucketInstanceId in this.collisionCircleArrays){const et=this.collisionCircleArrays[g.bucketInstanceId];c.as(et.invProjMatrix,S),et.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,u,f,g){let _;_=g===c.ai.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[c.at(u)];const S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const C of S)C>=0&&(i.text.placedSymbolArray.get(C).crossTileID=_>=0&&C!==_?0:f.crossTileID)}markUsedOrientation(i,u,f){const g=u===c.ai.horizontal||u===c.ai.horizontalOnly?u:0,_=u===c.ai.vertical?u:0,S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const C of S)i.text.placedSymbolArray.get(C).placedOrientation=g;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(i):1,_=u?u.opacities:{},S=u?u.variableOffsets:{},C=u?u.placedOrientations:{};for(const E in this.placements){const P=this.placements[E],z=_[E];z?(this.opacities[E]=new xe(z,g,P.text,P.icon),f=f||P.text!==z.text.placed||P.icon!==z.icon.placed):(this.opacities[E]=new xe(null,g,P.text,P.icon,P.skipFade),f=f||P.text||P.icon)}for(const E in _){const P=_[E];if(!this.opacities[E]){const z=new xe(P,g,!1,!1);z.isHidden()||(this.opacities[E]=z,f=f||P.text.placed||P.icon.placed)}}for(const E in S)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=S[E]);for(const E in C)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=C[E]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const f={};for(const g of u){const _=g.getBucket(i);_&&g.latestFeatureIndex&&i.id===_.layerIds[0]&&this.updateBucketOpacities(_,f,g.collisionBoxArray)}}updateBucketOpacities(i,u,f){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0],_=g.layout,S=new xe(null,0,!1,!1,!0),C=_.get("text-allow-overlap"),E=_.get("icon-allow-overlap"),P=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),z=_.get("text-rotation-alignment")==="map",L=_.get("text-pitch-alignment")==="map",V=_.get("icon-text-fit")!=="none",J=new xe(null,0,C&&(E||!i.hasIconData()||_.get("icon-optional")),E&&(C||!i.hasTextData()||_.get("text-optional")),!0);!i.collisionArrays&&f&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(f);const Y=(ne,K,ve)=>{for(let ke=0;ke<K/4;ke++)ne.opacityVertexArray.emplaceBack(ve);ne.hasVisibleVertices=ne.hasVisibleVertices||ve!==Wi};for(let ne=0;ne<i.symbolInstances.length;ne++){const K=i.symbolInstances.get(ne),{numHorizontalGlyphVertices:ve,numVerticalGlyphVertices:ke,crossTileID:le}=K;let _e=this.opacities[le];u[le]?_e=S:_e||(_e=J,this.opacities[le]=_e),u[le]=!0;const Ee=K.numIconVertices>0,Ie=this.placedOrientations[K.crossTileID],De=Ie===c.ai.vertical,je=Ie===c.ai.horizontal||Ie===c.ai.horizontalOnly;if(ve>0||ke>0){const Ne=Pn(_e.text);Y(i.text,ve,De?Wi:Ne),Y(i.text,ke,je?Wi:Ne);const qe=_e.text.isHidden();[K.rightJustifiedTextSymbolIndex,K.centerJustifiedTextSymbolIndex,K.leftJustifiedTextSymbolIndex].forEach(et=>{et>=0&&(i.text.placedSymbolArray.get(et).hidden=qe||De?1:0)}),K.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(K.verticalPlacedTextSymbolIndex).hidden=qe||je?1:0);const dt=this.variableOffsets[K.crossTileID];dt&&this.markUsedJustification(i,dt.anchor,K,Ie);const Gt=this.placedOrientations[K.crossTileID];Gt&&(this.markUsedJustification(i,"left",K,Gt),this.markUsedOrientation(i,Gt,K))}if(Ee){const Ne=Pn(_e.icon),qe=!(V&&K.verticalPlacedIconSymbolIndex&&De);K.placedIconSymbolIndex>=0&&(Y(i.icon,K.numIconVertices,qe?Ne:Wi),i.icon.placedSymbolArray.get(K.placedIconSymbolIndex).hidden=_e.icon.isHidden()),K.verticalPlacedIconSymbolIndex>=0&&(Y(i.icon,K.numVerticalIconVertices,qe?Wi:Ne),i.icon.placedSymbolArray.get(K.verticalPlacedIconSymbolIndex).hidden=_e.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Ne=i.collisionArrays[ne];if(Ne){let qe=new c.P(0,0);if(Ne.textBox||Ne.verticalTextBox){let Gt=!0;if(P){const et=this.variableOffsets[le];et?(qe=It(et.anchor,et.width,et.height,et.textOffset,et.textBoxScale),z&&qe._rotate(L?this.transform.angle:-this.transform.angle)):Gt=!1}Ne.textBox&&zt(i.textCollisionBox.collisionVertexArray,_e.text.placed,!Gt||De,qe.x,qe.y),Ne.verticalTextBox&&zt(i.textCollisionBox.collisionVertexArray,_e.text.placed,!Gt||je,qe.x,qe.y)}const dt=!!(!je&&Ne.verticalIconBox);Ne.iconBox&&zt(i.iconCollisionBox.collisionVertexArray,_e.icon.placed,dt,V?qe.x:0,V?qe.y:0),Ne.verticalIconBox&&zt(i.iconCollisionBox.collisionVertexArray,_e.icon.placed,!dt,V?qe.x:0,V?qe.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const ne=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=ne.invProjMatrix,i.placementViewportMatrix=ne.viewportMatrix,i.collisionCircleArray=ne.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function zt(y,i,u,f,g){y.emplaceBack(i?1:0,u?1:0,f||0,g||0),y.emplaceBack(i?1:0,u?1:0,f||0,g||0),y.emplaceBack(i?1:0,u?1:0,f||0,g||0),y.emplaceBack(i?1:0,u?1:0,f||0,g||0)}const ir=Math.pow(2,25),pr=Math.pow(2,24),Jt=Math.pow(2,17),Yt=Math.pow(2,16),$n=Math.pow(2,9),xr=Math.pow(2,8),nn=Math.pow(2,1);function Pn(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,u=Math.floor(127*y.opacity);return u*ir+i*pr+u*Jt+i*Yt+u*$n+i*xr+u*nn+i}const Wi=0;class Tp{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,f,g,_){const S=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(S,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((C,E)=>C.sortKey-E.sortKey));this._currentPartIndex<S.length;)if(u.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,_())return!0;return!1}}class Xa{constructor(i,u,f,g,_,S,C,E){this.placement=new wt(i,u,S,C,E),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,u,f){const g=c.h.now(),_=()=>!this._forceFullPlacement&&c.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const S=u[i[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=C)&&(!S.maxzoom||S.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new Tp(S)),this._inProgressLayer.continuePlacement(f[S.source],this.placement,this._showCollisionBoxes,S,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Ya=512/c.N/2;class z0{constructor(i,u,f){this.tileID=i,this.bucketInstanceId=f,this._symbolsByKey={};const g=new Map;for(let _=0;_<u.length;_++){const S=u.get(_),C=S.key,E=g.get(C);E?E.push(S):g.set(C,[S])}for(const[_,S]of g){const C={positions:S.map(E=>({x:Math.floor(E.anchorX*Ya),y:Math.floor(E.anchorY*Ya)})),crossTileIDs:S.map(E=>E.crossTileID)};if(C.positions.length>128){const E=new c.av(C.positions.length,16,Uint16Array);for(const{x:P,y:z}of C.positions)E.add(P,z);E.finish(),delete C.positions,C.index=E}this._symbolsByKey[_]=C}}getScaledCoordinates(i,u){const{x:f,y:g,z:_}=this.tileID.canonical,{x:S,y:C,z:E}=u.canonical,P=Ya/Math.pow(2,E-_),z=(C*c.N+i.anchorY)*P,L=g*c.N*Ya;return{x:Math.floor((S*c.N+i.anchorX)*P-f*c.N*Ya),y:Math.floor(z-L)}}findMatches(i,u,f){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<i.length;_++){const S=i.get(_);if(S.crossTileID)continue;const C=this._symbolsByKey[S.key];if(!C)continue;const E=this.getScaledCoordinates(S,u);if(C.index){const P=C.index.range(E.x-g,E.y-g,E.x+g,E.y+g).sort();for(const z of P){const L=C.crossTileIDs[z];if(!f[L]){f[L]=!0,S.crossTileID=L;break}}}else if(C.positions)for(let P=0;P<C.positions.length;P++){const z=C.positions[P],L=C.crossTileIDs[P];if(Math.abs(z.x-E.x)<=g&&Math.abs(z.y-E.y)<=g&&!f[L]){f[L]=!0,S.crossTileID=L;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class ur{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Nh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const f in this.indexes){const g=this.indexes[f],_={};for(const S in g){const C=g[S];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+u),_[C.tileID.key]=C}this.indexes[f]=_}this.lng=i}addBucket(i,u,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const _ in this.indexes){const S=this.indexes[_];if(Number(_)>i.overscaledZ)for(const C in S){const E=S[C];E.tileID.isChildOf(i)&&E.findMatches(u.symbolInstances,i,g)}else{const C=S[i.scaledTo(Number(_)).key];C&&C.findMatches(u.symbolInstances,i,g)}}for(let _=0;_<u.symbolInstances.length;_++){const S=u.symbolInstances.get(_);S.crossTileID||(S.crossTileID=f.generate(),g[S.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new z0(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const f of u.getCrossTileIDsLists())for(const g of f)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let u=!1;for(const f in this.indexes){const g=this.indexes[f];for(const _ in g)i[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[_]),delete g[_],u=!0)}return u}}class Gc{constructor(){this.layerIndexes={},this.crossTileIDs=new ur,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,f){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new Nh);let _=!1;const S={};g.handleWrapJump(f);for(const C of u){const E=C.getBucket(i);E&&i.id===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(C.tileID,E,this.crossTileIDs)&&(_=!0),S[E.bucketInstanceId]=!0)}return g.removeStaleBuckets(S)&&(_=!0),_}pruneUnusedLayers(i){const u={};i.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}const Fn=(y,i)=>c.x(y,i&&i.filter(u=>u.identifier!=="source.canvas")),Pi=c.F(c.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),L0=c.F(c.ax,["setCenter","setZoom","setBearing","setPitch"]),Zi=c.aw();class An extends c.E{constructor(i,u={}){super(),this.map=i,this.dispatcher=new Et(ua(),this,i._getMapId()),this.imageManager=new We,this.imageManager.setEventedParent(this),this.glyphManager=new Fe(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new yt(256,512),this.crossTileSymbolIndex=new Gc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.az());const f=this;this._rtlTextPluginCallback=An.registerForPluginStateChange(g=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(_,S)=>{if(c.aA(_),S&&S.every(C=>C))for(const C in f.sourceCaches){const E=f.sourceCaches[C].getSource().type;E!=="vector"&&E!=="geojson"||f.sourceCaches[C].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const _=this.sourceCaches[g.sourceId];if(!_)return;const S=_.getSource();if(S&&S.vectorLayerIds)for(const C in this._layers){const E=this._layers[C];E.source===S.id&&this._validateLayer(E)}})}loadURL(i,u={},f){this.fire(new c.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const g=this.map._requestManager.transformRequest(i,G.Style);this._request=c.f(g,(_,S)=>{this._request=null,_?this.fire(new c.j(_)):S&&this._load(S,u,f)})}loadJSON(i,u={},f){this.fire(new c.k("dataloading",{dataType:"style"})),this._request=c.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(i,u,f)})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(Zi,{validate:!1})}_load(i,u,f){var g;const _=u.transformStyle?u.transformStyle(f,i):i;if(!u.validate||!Fn(this,c.y(_))){this._loaded=!0,this.stylesheet=_;for(const S in _.sources)this.addSource(S,_.sources[S],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new st(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const i=c.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of i){const f=c.aC(u);f.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=f}}_loadSprite(i,u=!1,f=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,_,S,C){const E=Ce(g),P=E.length,z=S>1?"@2x":"",L={},V={},J={};for(const{id:Y,url:ne}of E){const K=_.transformRequest(_.normalizeSpriteURL(ne,z,".json"),G.SpriteJSON),ve=`${Y}_${K.url}`;L[ve]=c.f(K,(_e,Ee)=>{delete L[ve],V[Y]=Ee,Ue(C,V,J,_e,P)});const ke=_.transformRequest(_.normalizeSpriteURL(ne,z,".png"),G.SpriteImage),le=`${Y}_${ke.url}`;L[le]=de.getImage(ke,(_e,Ee)=>{delete L[le],J[Y]=Ee,Ue(C,V,J,_e,P)})}return{cancel(){for(const Y of Object.values(L))Y.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(g,_)=>{if(this._spriteRequest=null,g)this.fire(new c.j(g));else if(_)for(const S in _){this._spritesImagesIds[S]=[];const C=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(E=>!(E in _)):[];for(const E of C)this.imageManager.removeImage(E),this._changedImages[E]=!0;for(const E in _[S]){const P=S==="default"?E:`${S}:${E}`;this._spritesImagesIds[S].push(P),P in this.imageManager.images?this.imageManager.updateImage(P,_[S][E],!1):this.imageManager.addImage(P,_[S][E]),u&&(this._changedImages[P]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),f&&f(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const f=i.sourceLayer;if(!f)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(f)===-1)&&this.fire(new c.j(new Error(`Source layer "${f}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const u=this._serializedAllLayers();if(!i||i.length===0)return Object.values(u);const f=[];for(const g of i)u[g]&&f.push(u[g]);return f}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const u=Object.keys(this._layers);for(const f of u){const g=this._layers[f];g.type!=="custom"&&(i[f]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const S in this._updatedSources){const C=this._updatedSources[S];if(C==="reload")this._reloadSource(S);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const f={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];f[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(i,this._availableImages),!_.isHidden(i.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in f){const _=this.sourceCaches[g];f[g]!==_.used&&_.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,u={}){this._checkLoaded();const f=this.serialize();if(i=u.transformStyle?u.transformStyle(f,i):i,Fn(this,c.y(i)))return!1;(i=c.aD(i)).layers=c.aB(i.layers);const g=c.aE(f,i).filter(S=>!(S.command in L0));if(g.length===0)return!1;const _=g.filter(S=>!(S.command in Pi));if(_.length>0)throw new Error(`Unimplemented: ${_.map(S=>S.command).join(", ")}.`);for(const S of g)S.command!=="setTransition"&&this[S.command].apply(this,S.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,u){if(this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.y.source,`sources.${i}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[i]=new Bn(i,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===i)return this.fire(new c.j(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const f=this.sourceCaches[i].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,f={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new c.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(i.type==="custom"){if(Fn(this,c.aF(i)))return;_=c.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(g,i.source),i=c.aD(i),i=c.e(i,{source:g})),this._validate(c.y.layer,`layers.${g}`,i,{arrayIndex:-1},f))return;_=c.aC(i),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const S=u?this._order.indexOf(u):this._order.length;if(u&&S===-1)this.fire(new c.j(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(S,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const C=this._removedLayers[g];delete this._removedLayers[g],C.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new c.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const f=this._order.indexOf(i);this._order.splice(f,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new c.j(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,f){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===u&&g.maxzoom===f||(u!=null&&(g.minzoom=u),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,f={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!c.aG(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(c.y.filter,`layers.${g.id}.filter`,u,null,f)||(g.filter=c.aD(u),this._updateLayer(g)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return c.aD(this.getLayer(i).filter)}setLayoutProperty(i,u,f,g={}){this._checkLoaded();const _=this.getLayer(i);_?c.aG(_.getLayoutProperty(u),f)||(_.setLayoutProperty(u,f,g),this._updateLayer(_)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const f=this.getLayer(i);if(f)return f.getLayoutProperty(u);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,f,g={}){this._checkLoaded();const _=this.getLayer(i);_?c.aG(_.getPaintProperty(u),f)||(_.setPaintProperty(u,f,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const f=i.source,g=i.sourceLayer,_=this.sourceCaches[f];if(_===void 0)return void this.fire(new c.j(new Error(`The source '${f}' does not exist in the map's style.`)));const S=_.getSource().type;S==="geojson"&&g?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||g?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,i.id,u)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const f=i.source,g=this.sourceCaches[f];if(g===void 0)return void this.fire(new c.j(new Error(`The source '${f}' does not exist in the map's style.`)));const _=g.getSource().type,S=_==="vector"?i.sourceLayer:void 0;_!=="vector"||S?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(S,i.id,u):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,f=i.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(f,i.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=c.aH(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),f=this.map.getTerrain()||void 0,g=this.stylesheet;return c.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:i,layers:u,terrain:f},_=>_!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=S=>this._layers[S].type==="fill-extrusion",f={},g=[];for(let S=this._order.length-1;S>=0;S--){const C=this._order[S];if(u(C)){f[C]=S;for(const E of i){const P=E[C];if(P)for(const z of P)g.push(z)}}}g.sort((S,C)=>C.intersectionZ-S.intersectionZ);const _=[];for(let S=this._order.length-1;S>=0;S--){const C=this._order[S];if(u(C))for(let E=g.length-1;E>=0;E--){const P=g[E].feature;if(f[P.layer.id]<S)break;_.push(P),g.pop()}else for(const E of i){const P=E[C];if(P)for(const z of P)_.push(z.feature)}}return _}queryRenderedFeatures(i,u,f){u&&u.filter&&this._validate(c.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const C of u.layers){const E=this._layers[C];if(!E)return this.fire(new c.j(new Error(`The layer '${C}' does not exist in the map's style and cannot be queried for features.`))),[];g[E.source]=!0}}const _=[];u.availableImages=this._availableImages;const S=this._serializedAllLayers();for(const C in this.sourceCaches)u.layers&&!g[C]||_.push(Do(this.sourceCaches[C],this._layers,S,i,u,f));return this.placement&&_.push(function(C,E,P,z,L,V,J){const Y={},ne=V.queryRenderedSymbols(z),K=[];for(const ve of Object.keys(ne).map(Number))K.push(J[ve]);K.sort(ui);for(const ve of K){const ke=ve.featureIndex.lookupSymbolFeatures(ne[ve.bucketInstanceId],E,ve.bucketIndex,ve.sourceLayerIndex,L.filter,L.layers,L.availableImages,C);for(const le in ke){const _e=Y[le]=Y[le]||[],Ee=ke[le];Ee.sort((Ie,De)=>{const je=ve.featureSortOrder;if(je){const Ne=je.indexOf(Ie.featureIndex);return je.indexOf(De.featureIndex)-Ne}return De.featureIndex-Ie.featureIndex});for(const Ie of Ee)_e.push(Ie)}}for(const ve in Y)Y[ve].forEach(ke=>{const le=ke.feature,_e=P[C[ve].source].getFeatureState(le.layer["source-layer"],le.id);le.source=le.layer.source,le.layer["source-layer"]&&(le.sourceLayer=le.layer["source-layer"]),le.state=_e});return Y}(this._layers,S,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(i,u){u&&u.filter&&this._validate(c.y.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[i];return f?function(g,_){const S=g.getRenderableIds().map(P=>g.getTileByID(P)),C=[],E={};for(let P=0;P<S.length;P++){const z=S[P],L=z.tileID.canonical.key;E[L]||(E[L]=!0,z.querySourceFeatures(C,_))}return C}(f,u):[]}addSourceType(i,u,f){return Ui(i)?f(new Error(`A source type called "${i}" already exists.`)):(((g,_)=>{co[g]=_})(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const f=this.light.getLight();let g=!1;for(const S in i)if(!c.aG(i[S],f[S])){g=!0;break}if(!g)return;const _={now:c.h.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(_)}_validate(i,u,f,g,_={}){return(!_||_.validate!==!1)&&Fn(this,i.call(c.y,c.e({key:u,style:this.serialize(),value:f,styleSpec:c.v},g)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const f=this.sourceCaches[u];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,f,g,_=!1){let S=!1,C=!1;const E={};for(const P of this._order){const z=this._layers[P];if(z.type!=="symbol")continue;if(!E[z.source]){const V=this.sourceCaches[z.source];E[z.source]=V.getRenderableIds(!0).map(J=>V.getTileByID(J)).sort((J,Y)=>Y.tileID.overscaledZ-J.tileID.overscaledZ||(J.tileID.isLessThan(Y.tileID)?-1:1))}const L=this.crossTileSymbolIndex.addLayer(z,E[z.source],i.center.lng);S=S||L}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.h.now(),i.zoom))&&(this.pauseablePlacement=new Xa(i,this.map.terrain,this._order,_,u,f,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.h.now()),C=!0),S&&this.pauseablePlacement.placement.setStale()),C||S)for(const P of this._order){const z=this._layers[P];z.type==="symbol"&&this.placement.updateLayerOpacities(z,E[z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,f){this.imageManager.getImages(u.icons,f),this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,f){this.glyphManager.getGlyphs(u.stacks,f);const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,[""])}getResource(i,u,f){return c.m(u,f)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,u={}){this._checkLoaded(),i&&this._validate(c.y.glyphs,"glyphs",i,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,u,f={},g){this._checkLoaded();const _=[{id:i,url:u}],S=[...Ce(this.stylesheet.sprite),..._];this._validate(c.y.sprite,"sprite",S,null,f)||(this.stylesheet.sprite=S,this._loadSprite(_,!0,g))}removeSprite(i){this._checkLoaded();const u=Ce(this.stylesheet.sprite);if(u.find(f=>f.id===i)){if(this._spritesImagesIds[i])for(const f of this._spritesImagesIds[i])this.imageManager.removeImage(f),this._changedImages[f]=!0;u.splice(u.findIndex(f=>f.id===i),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Ce(this.stylesheet.sprite)}setSprite(i,u={},f){this._checkLoaded(),i&&this._validate(c.y.sprite,"sprite",i,null,u)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,f):(this._unloadSprite(),f&&f(null)))}}An.registerForPluginStateChange=c.aK;var Hc=c.Q([{name:"a_pos",type:"Int16",components:2}]),Ja="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Lr={prelude:tr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:tr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:tr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:tr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:tr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:tr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:tr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:tr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:tr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:tr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:tr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:tr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:tr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:tr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:tr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:tr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:tr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:tr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:tr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:tr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:tr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ja),terrainDepth:tr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ja),terrainCoords:tr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ja)};function tr(y,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=_?_.concat(g):g,C={};return{fragmentSource:y=y.replace(u,(E,P,z,L,V)=>(C[V]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${V}
varying ${z} ${L} ${V};
#else
uniform ${z} ${L} u_${V};
#endif
`:`
#ifdef HAS_UNIFORM_u_${V}
    ${z} ${L} ${V} = u_${V};
#endif
`)),vertexSource:i=i.replace(u,(E,P,z,L,V)=>{const J=L==="float"?"vec2":"vec4",Y=V.match(/color/)?"color":J;return C[V]?P==="define"?`
#ifndef HAS_UNIFORM_u_${V}
uniform lowp float u_${V}_t;
attribute ${z} ${J} a_${V};
varying ${z} ${L} ${V};
#else
uniform ${z} ${L} u_${V};
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_${V}
    ${V} = a_${V};
#else
    ${z} ${L} ${V} = u_${V};
#endif
`:`
#ifndef HAS_UNIFORM_u_${V}
    ${V} = unpack_mix_${Y}(a_${V}, u_${V}_t);
#else
    ${z} ${L} ${V} = u_${V};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${V}
uniform lowp float u_${V}_t;
attribute ${z} ${J} a_${V};
#else
uniform ${z} ${L} u_${V};
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_${V}
    ${z} ${L} ${V} = a_${V};
#else
    ${z} ${L} ${V} = u_${V};
#endif
`:`
#ifndef HAS_UNIFORM_u_${V}
    ${z} ${L} ${V} = unpack_mix_${Y}(a_${V}, u_${V}_t);
#else
    ${z} ${L} ${V} = u_${V};
#endif
`}),staticAttributes:f,staticUniforms:S}}class ha{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,f,g,_,S,C,E,P){this.context=i;let z=this.boundPaintVertexBuffers.length!==g.length;for(let L=0;!z&&L<g.length;L++)this.boundPaintVertexBuffers[L]!==g[L]&&(z=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==f||z||this.boundIndexBuffer!==_||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==C||this.boundDynamicVertexBuffer2!==E||this.boundDynamicVertexBuffer3!==P?this.freshBind(u,f,g,_,S,C,E,P):(i.bindVertexArray.set(this.vao),C&&C.bind(),_&&_.dynamicDraw&&_.bind(),E&&E.bind(),P&&P.bind())}freshBind(i,u,f,g,_,S,C,E){const P=i.numAttributes,z=this.context,L=z.gl;this.vao&&this.destroy(),this.vao=z.createVertexArray(),z.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=E,u.enableAttributes(L,i);for(const V of f)V.enableAttributes(L,i);S&&S.enableAttributes(L,i),C&&C.enableAttributes(L,i),E&&E.enableAttributes(L,i),u.bind(),u.setVertexAttribPointers(L,i,_);for(const V of f)V.bind(),V.setVertexAttribPointers(L,i,_);S&&(S.bind(),S.setVertexAttribPointers(L,i,_)),g&&g.bind(),C&&(C.bind(),C.setVertexAttribPointers(L,i,_)),E&&(E.bind(),E.setVertexAttribPointers(L,i,_)),z.currentNumAttributes=P}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function Fr(y){const i=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const f=y[u].split(" ");i.push(f.pop())}return i}class qc{constructor(i,u,f,g,_,S){const C=i.gl;this.program=C.createProgram();const E=Fr(u.staticAttributes),P=f?f.getBinderAttributes():[],z=E.concat(P),L=Lr.prelude.staticUniforms?Fr(Lr.prelude.staticUniforms):[],V=u.staticUniforms?Fr(u.staticUniforms):[],J=f?f.getBinderUniforms():[],Y=L.concat(V).concat(J),ne=[];for(const Ie of Y)ne.indexOf(Ie)<0&&ne.push(Ie);const K=f?f.defines():[];_&&K.push("#define OVERDRAW_INSPECTOR;"),S&&K.push("#define TERRAIN3D;");const ve=K.concat(Lr.prelude.fragmentSource,u.fragmentSource).join(`
`),ke=K.concat(Lr.prelude.vertexSource,u.vertexSource).join(`
`),le=C.createShader(C.FRAGMENT_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(le,ve),C.compileShader(le),!C.getShaderParameter(le,C.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${C.getShaderInfoLog(le)}`);C.attachShader(this.program,le);const _e=C.createShader(C.VERTEX_SHADER);if(C.isContextLost())return void(this.failedToCreate=!0);if(C.shaderSource(_e,ke),C.compileShader(_e),!C.getShaderParameter(_e,C.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${C.getShaderInfoLog(_e)}`);C.attachShader(this.program,_e),this.attributes={};const Ee={};this.numAttributes=z.length;for(let Ie=0;Ie<this.numAttributes;Ie++)z[Ie]&&(C.bindAttribLocation(this.program,Ie,z[Ie]),this.attributes[z[Ie]]=Ie);if(C.linkProgram(this.program),!C.getProgramParameter(this.program,C.LINK_STATUS))throw new Error(`Program failed to link: ${C.getProgramInfoLog(this.program)}`);C.deleteShader(_e),C.deleteShader(le);for(let Ie=0;Ie<ne.length;Ie++){const De=ne[Ie];if(De&&!Ee[De]){const je=C.getUniformLocation(this.program,De);je&&(Ee[De]=je)}}this.fixedUniforms=g(i,Ee),this.terrainUniforms=((Ie,De)=>({u_depth:new c.aL(Ie,De.u_depth),u_terrain:new c.aL(Ie,De.u_terrain),u_terrain_dim:new c.aM(Ie,De.u_terrain_dim),u_terrain_matrix:new c.aN(Ie,De.u_terrain_matrix),u_terrain_unpack:new c.aO(Ie,De.u_terrain_unpack),u_terrain_exaggeration:new c.aM(Ie,De.u_terrain_exaggeration)}))(i,Ee),this.binderUniforms=f?f.getUniforms(i,Ee):[]}draw(i,u,f,g,_,S,C,E,P,z,L,V,J,Y,ne,K,ve,ke){const le=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(g),i.setColorMode(_),i.setCullFace(S),E){i.activeTexture.set(le.TEXTURE2),le.bindTexture(le.TEXTURE_2D,E.depthTexture),i.activeTexture.set(le.TEXTURE3),le.bindTexture(le.TEXTURE_2D,E.texture);for(const Ee in this.terrainUniforms)this.terrainUniforms[Ee].set(E[Ee])}for(const Ee in this.fixedUniforms)this.fixedUniforms[Ee].set(C[Ee]);ne&&ne.setUniforms(i,this.binderUniforms,J,{zoom:Y});let _e=0;switch(u){case le.LINES:_e=2;break;case le.TRIANGLES:_e=3;break;case le.LINE_STRIP:_e=1}for(const Ee of V.get()){const Ie=Ee.vaos||(Ee.vaos={});(Ie[P]||(Ie[P]=new ha)).bind(i,this,z,ne?ne.getPaintVertexBuffers():[],L,Ee.vertexOffset,K,ve,ke),le.drawElements(u,Ee.primitiveLength*_e,le.UNSIGNED_SHORT,Ee.primitiveOffset*_e*2)}}}function Ki(y,i,u){const f=1/ye(u,1,i.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,i.transform.tileZoom)/g,S=_*(u.tileID.canonical.x+u.tileID.wrap*g),C=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[S>>16,C>>16],u_pixel_coord_lower:[65535&S,65535&C]}}const jh=(y,i,u,f)=>{const g=i.style.light,_=g.properties.get("position"),S=[_.x,_.y,_.z],C=function(){var P=new c.A(9);return c.A!=Float32Array&&(P[1]=0,P[2]=0,P[3]=0,P[5]=0,P[6]=0,P[7]=0),P[0]=1,P[4]=1,P[8]=1,P}();g.properties.get("anchor")==="viewport"&&function(P,z){var L=Math.sin(z),V=Math.cos(z);P[0]=V,P[1]=L,P[2]=0,P[3]=-L,P[4]=V,P[5]=0,P[6]=0,P[7]=0,P[8]=1}(C,-i.transform.angle),function(P,z,L){var V=z[0],J=z[1],Y=z[2];P[0]=V*L[0]+J*L[3]+Y*L[6],P[1]=V*L[1]+J*L[4]+Y*L[7],P[2]=V*L[2]+J*L[5]+Y*L[8]}(S,S,C);const E=g.properties.get("color");return{u_matrix:y,u_lightpos:S,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[E.r,E.g,E.b],u_vertical_gradient:+u,u_opacity:f}},Ns=(y,i,u,f,g,_,S)=>c.e(jh(y,i,u,f),Ki(_,i,S),{u_height_factor:-Math.pow(2,g.overscaledZ)/S.tileSize/8}),Ep=y=>({u_matrix:y}),Vh=(y,i,u,f)=>c.e(Ep(y),Ki(u,i,f)),Wc=(y,i)=>({u_matrix:y,u_world:i}),Zc=(y,i,u,f,g)=>c.e(Vh(y,i,u,f),{u_world:g}),js=(y,i,u,f)=>{const g=y.transform;let _,S;if(f.paint.get("circle-pitch-alignment")==="map"){const C=ye(u,1,g.zoom);_=!0,S=[C,C]}else _=!1,S=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:S}},Uh=(y,i,u)=>{const f=ye(u,1,i.zoom),g=Math.pow(2,i.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[i.pixelsToGLUnits[0]/(f*g),i.pixelsToGLUnits[1]/(f*g)],u_overscale_factor:_}},Gl=(y,i,u=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:u}),Ip=y=>({u_matrix:y}),D0=(y,i,u,f)=>({u_matrix:y,u_extrude_scale:ye(i,1,u),u_intensity:f});function Gh(y,i){const u=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new c.U(0,f/u).toLngLat().lat,new c.U(0,(f+1)/u).toLngLat().lat]}const Hh=(y,i,u,f)=>{const g=y.transform;return{u_matrix:Kc(y,i,u,f),u_ratio:1/ye(i,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Pp=(y,i,u,f,g)=>c.e(Hh(y,i,u,g),{u_image:0,u_image_height:f}),R0=(y,i,u,f,g)=>{const _=y.transform,S=Mp(i,_);return{u_matrix:Kc(y,i,u,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/ye(i,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[S,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Ap=(y,i,u,f,g,_)=>{const S=y.lineAtlas,C=Mp(i,y.transform),E=u.layout.get("line-cap")==="round",P=S.getDash(f.from,E),z=S.getDash(f.to,E),L=P.width*g.fromScale,V=z.width*g.toScale;return c.e(Hh(y,i,u,_),{u_patternscale_a:[C/L,-P.height/2],u_patternscale_b:[C/V,-z.height/2],u_sdfgamma:S.width/(256*Math.min(L,V)*y.pixelRatio)/2,u_image:0,u_tex_y_a:P.y,u_tex_y_b:z.y,u_mix:g.t})};function Mp(y,i){return 1/ye(y,1,i.tileZoom)}function Kc(y,i,u,f){return y.translatePosMatrix(f?f.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const zp=(y,i,u,f,g)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(S=g.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Lp(g.paint.get("raster-hue-rotate"))};var _,S};function Lp(y){y*=Math.PI/180;const i=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const qh=(y,i,u,f,g,_,S,C,E,P)=>{const z=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:z.cameraToCenterDistance,u_pitch:z.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:z.width/z.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:S,u_coord_matrix:C,u_is_text:+E,u_pitch_with_map:+f,u_texsize:P,u_texture:0}},Wh=(y,i,u,f,g,_,S,C,E,P,z)=>{const L=g.transform;return c.e(qh(y,i,u,f,g,_,S,C,E,P),{u_gamma_scale:f?Math.cos(L._pitch)*L.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+z})},da=(y,i,u,f,g,_,S,C,E,P)=>c.e(Wh(y,i,u,f,g,_,S,C,!0,E,!0),{u_texsize_icon:P,u_texture_icon:1}),Xc=(y,i,u)=>({u_matrix:y,u_opacity:i,u_color:u}),Xi=(y,i,u,f,g,_)=>c.e(function(S,C,E,P){const z=E.imageManager.getPattern(S.from.toString()),L=E.imageManager.getPattern(S.to.toString()),{width:V,height:J}=E.imageManager.getPixelSize(),Y=Math.pow(2,P.tileID.overscaledZ),ne=P.tileSize*Math.pow(2,E.transform.tileZoom)/Y,K=ne*(P.tileID.canonical.x+P.tileID.wrap*Y),ve=ne*P.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:L.tl,u_pattern_br_b:L.br,u_texsize:[V,J],u_mix:C.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:L.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/ye(P,1,E.transform.tileZoom),u_pixel_coord_upper:[K>>16,ve>>16],u_pixel_coord_lower:[65535&K,65535&ve]}}(f,_,u,g),{u_matrix:y,u_opacity:i}),Yc={fillExtrusion:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_lightpos:new c.aP(y,i.u_lightpos),u_lightintensity:new c.aM(y,i.u_lightintensity),u_lightcolor:new c.aP(y,i.u_lightcolor),u_vertical_gradient:new c.aM(y,i.u_vertical_gradient),u_opacity:new c.aM(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_lightpos:new c.aP(y,i.u_lightpos),u_lightintensity:new c.aM(y,i.u_lightintensity),u_lightcolor:new c.aP(y,i.u_lightcolor),u_vertical_gradient:new c.aM(y,i.u_vertical_gradient),u_height_factor:new c.aM(y,i.u_height_factor),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade),u_opacity:new c.aM(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_scale_with_map:new c.aL(y,i.u_scale_with_map),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_extrude_scale:new c.aQ(y,i.u_extrude_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_matrix:new c.aN(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pixels_to_tile_units:new c.aM(y,i.u_pixels_to_tile_units),u_extrude_scale:new c.aQ(y,i.u_extrude_scale),u_overscale_factor:new c.aM(y,i.u_overscale_factor)}),collisionCircle:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_inv_matrix:new c.aN(y,i.u_inv_matrix),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_viewport_size:new c.aQ(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new c.aR(y,i.u_color),u_matrix:new c.aN(y,i.u_matrix),u_overlay:new c.aL(y,i.u_overlay),u_overlay_scale:new c.aM(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new c.aM(y,i.u_extrude_scale),u_intensity:new c.aM(y,i.u_intensity),u_matrix:new c.aN(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world),u_image:new c.aL(y,i.u_image),u_color_ramp:new c.aL(y,i.u_color_ramp),u_opacity:new c.aM(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_latrange:new c.aQ(y,i.u_latrange),u_light:new c.aQ(y,i.u_light),u_shadow:new c.aR(y,i.u_shadow),u_highlight:new c.aR(y,i.u_highlight),u_accent:new c.aR(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_dimension:new c.aQ(y,i.u_dimension),u_zoom:new c.aM(y,i.u_zoom),u_unpack:new c.aO(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_image:new c.aL(y,i.u_image),u_image_height:new c.aM(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texsize:new c.aQ(y,i.u_texsize),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_image:new c.aL(y,i.u_image),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_patternscale_a:new c.aQ(y,i.u_patternscale_a),u_patternscale_b:new c.aQ(y,i.u_patternscale_b),u_sdfgamma:new c.aM(y,i.u_sdfgamma),u_image:new c.aL(y,i.u_image),u_tex_y_a:new c.aM(y,i.u_tex_y_a),u_tex_y_b:new c.aM(y,i.u_tex_y_b),u_mix:new c.aM(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_tl_parent:new c.aQ(y,i.u_tl_parent),u_scale_parent:new c.aM(y,i.u_scale_parent),u_buffer_scale:new c.aM(y,i.u_buffer_scale),u_fade_t:new c.aM(y,i.u_fade_t),u_opacity:new c.aM(y,i.u_opacity),u_image0:new c.aL(y,i.u_image0),u_image1:new c.aL(y,i.u_image1),u_brightness_low:new c.aM(y,i.u_brightness_low),u_brightness_high:new c.aM(y,i.u_brightness_high),u_saturation_factor:new c.aM(y,i.u_saturation_factor),u_contrast_factor:new c.aM(y,i.u_contrast_factor),u_spin_weights:new c.aP(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texture:new c.aL(y,i.u_texture)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texture:new c.aL(y,i.u_texture),u_gamma_scale:new c.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_is_halo:new c.aL(y,i.u_is_halo)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texsize_icon:new c.aQ(y,i.u_texsize_icon),u_texture:new c.aL(y,i.u_texture),u_texture_icon:new c.aL(y,i.u_texture_icon),u_gamma_scale:new c.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_is_halo:new c.aL(y,i.u_is_halo)}),background:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_opacity:new c.aM(y,i.u_opacity),u_color:new c.aR(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_opacity:new c.aM(y,i.u_opacity),u_image:new c.aL(y,i.u_image),u_pattern_tl_a:new c.aQ(y,i.u_pattern_tl_a),u_pattern_br_a:new c.aQ(y,i.u_pattern_br_a),u_pattern_tl_b:new c.aQ(y,i.u_pattern_tl_b),u_pattern_br_b:new c.aQ(y,i.u_pattern_br_b),u_texsize:new c.aQ(y,i.u_texsize),u_mix:new c.aM(y,i.u_mix),u_pattern_size_a:new c.aQ(y,i.u_pattern_size_a),u_pattern_size_b:new c.aQ(y,i.u_pattern_size_b),u_scale_a:new c.aM(y,i.u_scale_a),u_scale_b:new c.aM(y,i.u_scale_b),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aM(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texture:new c.aL(y,i.u_texture),u_ele_delta:new c.aM(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ele_delta:new c.aM(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texture:new c.aL(y,i.u_texture),u_terrain_coords_id:new c.aM(y,i.u_terrain_coords_id),u_ele_delta:new c.aM(y,i.u_ele_delta)})};class Jc{constructor(i,u,f){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Hl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Qc{constructor(i,u,f,g){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=i;const _=i.gl;this.buffer=_.createBuffer(),i.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let f=0;f<this.attributes.length;f++){const g=u.attributes[this.attributes[f].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,u,f){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],S=u.attributes[_.name];S!==void 0&&i.vertexAttribPointer(S,_.components,i[Hl[_.type]],!1,this.itemSize,_.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Qa=new WeakMap;function Vs(y){var i;if(Qa.has(y))return Qa.get(y);{const u=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Qa.set(y,u),u}}class Kt{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class eu extends Kt{getDefault(){return c.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Ai extends Kt{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Mi extends Kt{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Zh extends Kt{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class tu extends Kt{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class ru extends Kt{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Kh extends Kt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Xh extends Kt{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class nu extends Kt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class Yh extends Kt{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Jh extends Kt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class iu extends Kt{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Dp extends Kt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class Rp extends Kt{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class el extends Kt{getDefault(){return c.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class O0 extends Kt{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class B0 extends Kt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class $0 extends Kt{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class F0 extends Kt{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class N0 extends Kt{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class j0 extends Kt{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Qh extends Kt{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class ou extends Kt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class ed extends Kt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class td extends Kt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class tl extends Kt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Op extends Kt{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Bp extends Kt{getDefault(){return null}set(i){var u;if(i===this.current&&!this.dirty)return;const f=this.gl;Vs(f)?f.bindVertexArray(i):(u=f.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class rd extends Kt{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class fa extends Kt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class $p extends Kt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Us extends Kt{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class rl extends Us{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Fp extends Us{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class nd extends Us{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class rr{constructor(i,u,f,g,_){this.context=i,this.width=u,this.height=f;const S=i.gl,C=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new rl(i,C),g)this.depthAttachment=_?new nd(i,C):new Fp(i,C);else if(_)throw new Error("Stencil cannot be setted without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class Dr{constructor(i,u,f){this.blendFunction=i,this.blendColor=u,this.mask=f}}Dr.Replace=[1,0],Dr.disabled=new Dr(Dr.Replace,c.aT.transparent,[!1,!1,!1,!1]),Dr.unblended=new Dr(Dr.Replace,c.aT.transparent,[!0,!0,!0,!0]),Dr.alphaBlended=new Dr([1,771],c.aT.transparent,[!0,!0,!0,!0]);class V0{constructor(i){var u,f;if(this.gl=i,this.clearColor=new eu(this),this.clearDepth=new Ai(this),this.clearStencil=new Mi(this),this.colorMask=new Zh(this),this.depthMask=new tu(this),this.stencilMask=new ru(this),this.stencilFunc=new Kh(this),this.stencilOp=new Xh(this),this.stencilTest=new nu(this),this.depthRange=new Yh(this),this.depthTest=new Jh(this),this.depthFunc=new iu(this),this.blend=new Dp(this),this.blendFunc=new Rp(this),this.blendColor=new el(this),this.blendEquation=new O0(this),this.cullFace=new B0(this),this.cullFaceSide=new $0(this),this.frontFace=new F0(this),this.program=new N0(this),this.activeTexture=new j0(this),this.viewport=new Qh(this),this.bindFramebuffer=new ou(this),this.bindRenderbuffer=new ed(this),this.bindTexture=new td(this),this.bindVertexBuffer=new tl(this),this.bindElementBuffer=new Op(this),this.bindVertexArray=new Bp(this),this.pixelStoreUnpack=new rd(this),this.pixelStoreUnpackPremultiplyAlpha=new fa(this),this.pixelStoreUnpackFlipY=new $p(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Vs(i)){this.HALF_FLOAT=i.HALF_FLOAT;const g=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=i.RGBA16F)!==null&&u!==void 0?u:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(f=i.RGB16F)!==null&&f!==void 0?f:g==null?void 0:g.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const g=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new Jc(this,i,u)}createVertexBuffer(i,u,f){return new Qc(this,i,u,f)}createRenderbuffer(i,u,f){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,i,u,f),this.bindRenderbuffer.set(null),_}createFramebuffer(i,u,f,g){return new rr(this,i,u,f,g)}clear({color:i,depth:u,stencil:f}){const g=this.gl;let _=0;i&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),g.clear(_)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){c.aG(i.blendFunction,Dr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Vs(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var u;return Vs(this.gl)?this.gl.deleteVertexArray(i):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Xt{constructor(i,u,f){this.func=i,this.mask=u,this.range=f}}Xt.ReadOnly=!1,Xt.ReadWrite=!0,Xt.disabled=new Xt(519,Xt.ReadOnly,[0,1]);const pa=7680;class Rr{constructor(i,u,f,g,_,S){this.test=i,this.ref=u,this.mask=f,this.fail=g,this.depthFail=_,this.pass=S}}Rr.disabled=new Rr({func:519,mask:0},0,0,pa,pa,pa);class Ir{constructor(i,u,f){this.enable=i,this.mode=u,this.frontFace=f}}let ql;function Np(y,i,u,f,g,_,S){const C=y.context,E=C.gl,P=y.useProgram("collisionBox"),z=[];let L=0,V=0;for(let le=0;le<f.length;le++){const _e=f[le],Ee=i.getTile(_e),Ie=Ee.getBucket(u);if(!Ie)continue;let De=_e.posMatrix;g[0]===0&&g[1]===0||(De=y.translatePosMatrix(_e.posMatrix,Ee,g,_));const je=S?Ie.textCollisionBox:Ie.iconCollisionBox,Ne=Ie.collisionCircleArray;if(Ne.length>0){const qe=c.Z(),dt=De;c.aU(qe,Ie.placementInvProjMatrix,y.transform.glCoordMatrix),c.aU(qe,qe,Ie.placementViewportMatrix),z.push({circleArray:Ne,circleOffset:V,transform:dt,invTransform:qe,coord:_e}),L+=Ne.length/4,V=L}je&&P.draw(C,E.LINES,Xt.disabled,Rr.disabled,y.colorModeForRenderPass(),Ir.disabled,Uh(De,y.transform,Ee),y.style.map.terrain&&y.style.map.terrain.getTerrainData(_e),u.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,null,y.transform.zoom,null,null,je.collisionVertexBuffer)}if(!S||!z.length)return;const J=y.useProgram("collisionCircle"),Y=new c.aV;Y.resize(4*L),Y._trim();let ne=0;for(const le of z)for(let _e=0;_e<le.circleArray.length/4;_e++){const Ee=4*_e,Ie=le.circleArray[Ee+0],De=le.circleArray[Ee+1],je=le.circleArray[Ee+2],Ne=le.circleArray[Ee+3];Y.emplace(ne++,Ie,De,je,Ne,0),Y.emplace(ne++,Ie,De,je,Ne,1),Y.emplace(ne++,Ie,De,je,Ne,2),Y.emplace(ne++,Ie,De,je,Ne,3)}(!ql||ql.length<2*L)&&(ql=function(le){const _e=2*le,Ee=new c.aX;Ee.resize(_e),Ee._trim();for(let Ie=0;Ie<_e;Ie++){const De=6*Ie;Ee.uint16[De+0]=4*Ie+0,Ee.uint16[De+1]=4*Ie+1,Ee.uint16[De+2]=4*Ie+2,Ee.uint16[De+3]=4*Ie+2,Ee.uint16[De+4]=4*Ie+3,Ee.uint16[De+5]=4*Ie+0}return Ee}(L));const K=C.createIndexBuffer(ql,!0),ve=C.createVertexBuffer(Y,c.aW.members,!0);for(const le of z){const _e={u_matrix:le.transform,u_inv_matrix:le.invTransform,u_camera_to_center_distance:(ke=y.transform).cameraToCenterDistance,u_viewport_size:[ke.width,ke.height]};J.draw(C,E.TRIANGLES,Xt.disabled,Rr.disabled,y.colorModeForRenderPass(),Ir.disabled,_e,y.style.map.terrain&&y.style.map.terrain.getTerrainData(le.coord),u.id,ve,K,c.S.simpleSegment(0,2*le.circleOffset,le.circleArray.length,le.circleArray.length/2),null,y.transform.zoom,null,null,null)}var ke;ve.destroy(),K.destroy()}Ir.disabled=new Ir(!1,1029,2305),Ir.backCCW=new Ir(!0,1029,2305);const id=c.ao(new Float32Array(16));function su(y,i,u,f,g,_){const{horizontalAlign:S,verticalAlign:C}=c.au(y);return new c.P((-(S-.5)*i/g+f[0])*_,(-(C-.5)*u/g+f[1])*_)}function au(y,i,u,f,g,_,S,C,E,P,z){const L=y.text.placedSymbolArray,V=y.text.dynamicLayoutVertexArray,J=y.icon.dynamicLayoutVertexArray,Y={};V.clear();for(let ne=0;ne<L.length;ne++){const K=L.get(ne),ve=K.hidden||!K.crossTileID||y.allowVerticalPlacement&&!K.placedOrientation?null:f[K.crossTileID];if(ve){const ke=new c.P(K.anchorX,K.anchorY),le=er(ke,u?S:_,z),_e=uo(g.cameraToCenterDistance,le.signedDistanceFromCamera);let Ee=c.aj(y.textSizeData,E,K)*_e/c.ap;u&&(Ee*=y.tilePixelRatio/C);const{width:Ie,height:De,anchor:je,textOffset:Ne,textBoxScale:qe}=ve,dt=su(je,Ie,De,Ne,qe,Ee),Gt=u?er(ke.add(dt),_,z).point:le.point.add(i?dt.rotate(-g.angle):dt),et=y.allowVerticalPlacement&&K.placedOrientation===c.ai.vertical?Math.PI/2:0;for(let Tt=0;Tt<K.numGlyphs;Tt++)c.ak(V,Gt,et);P&&K.associatedIconIndex>=0&&(Y[K.associatedIconIndex]={shiftedAnchor:Gt,angle:et})}else Z(K.numGlyphs,V)}if(P){J.clear();const ne=y.icon.placedSymbolArray;for(let K=0;K<ne.length;K++){const ve=ne.get(K);if(ve.hidden)Z(ve.numGlyphs,J);else{const ke=Y[K];if(ke)for(let le=0;le<ve.numGlyphs;le++)c.ak(J,ke.shiftedAnchor,ke.angle);else Z(ve.numGlyphs,J)}}y.icon.dynamicLayoutVertexBuffer.updateData(J)}y.text.dynamicLayoutVertexBuffer.updateData(V)}function od(y,i,u){return u.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function lu(y,i,u,f,g,_,S,C,E,P,z,L){const V=y.context,J=V.gl,Y=y.transform,ne=C==="map",K=E==="map",ve=C!=="viewport"&&u.layout.get("symbol-placement")!=="point",ke=ne&&!K&&!ve,le=!u.layout.get("symbol-sort-key").isConstant();let _e=!1;const Ee=y.depthModeForSublayer(0,Xt.ReadOnly),Ie=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),De=[];for(const je of f){const Ne=i.getTile(je),qe=Ne.getBucket(u);if(!qe)continue;const dt=g?qe.text:qe.icon;if(!dt||!dt.segments.get().length||!dt.hasVisibleVertices)continue;const Gt=dt.programConfigurations.get(u.id),et=g||qe.sdfIcons,Tt=g?qe.textSizeData:qe.iconSizeData,pt=K||Y.pitch!==0,hr=y.useProgram(od(et,g,qe),Gt),Vt=c.ah(Tt,Y.zoom),$t=y.style.map.terrain&&y.style.map.terrain.getTerrainData(je);let Ht,Gr,br,Mn,fn=[0,0],Yr=null;if(g)Gr=Ne.glyphAtlasTexture,br=J.LINEAR,Ht=Ne.glyphAtlasTexture.size,qe.iconsInText&&(fn=Ne.imageAtlasTexture.size,Yr=Ne.imageAtlasTexture,Mn=pt||y.options.rotating||y.options.zooming||Tt.kind==="composite"||Tt.kind==="camera"?J.LINEAR:J.NEAREST);else{const Hr=u.layout.get("icon-size").constantOr(0)!==1||qe.iconsNeedLinear;Gr=Ne.imageAtlasTexture,br=et||y.options.rotating||y.options.zooming||Hr||pt?J.LINEAR:J.NEAREST,Ht=Ne.imageAtlasTexture.size}const Di=ye(Ne,1,y.transform.zoom),kr=Ke(je.posMatrix,K,ne,y.transform,Di),Bo=qi(je.posMatrix,K,ne,y.transform,Di),$o=Ie&&qe.hasTextData(),qs=u.layout.get("icon-text-fit")!=="none"&&$o&&qe.hasIconData();if(ve){const Hr=y.style.map.terrain?(fi,qr)=>y.style.map.terrain.getElevation(je,fi,qr):null,pn=u.layout.get("text-rotation-alignment")==="map";Qe(qe,je.posMatrix,y,g,kr,Bo,K,P,pn,Hr)}const _a=y.translatePosMatrix(je.posMatrix,Ne,_,S),cl=ve||g&&Ie||qs?id:kr,Nn=y.translatePosMatrix(Bo,Ne,_,S,!0),zn=et&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ei;ei=et?qe.iconsInText?da(Tt.kind,Vt,ke,K,y,_a,cl,Nn,Ht,fn):Wh(Tt.kind,Vt,ke,K,y,_a,cl,Nn,g,Ht,!0):qh(Tt.kind,Vt,ke,K,y,_a,cl,Nn,g,Ht);const xa={program:hr,buffers:dt,uniformValues:ei,atlasTexture:Gr,atlasTextureIcon:Yr,atlasInterpolation:br,atlasInterpolationIcon:Mn,isSDF:et,hasHalo:zn};if(le&&qe.canOverlap){_e=!0;const Hr=dt.segments.get();for(const pn of Hr)De.push({segments:new c.S([pn]),sortKey:pn.sortKey,state:xa,terrainData:$t})}else De.push({segments:dt.segments,sortKey:0,state:xa,terrainData:$t})}_e&&De.sort((je,Ne)=>je.sortKey-Ne.sortKey);for(const je of De){const Ne=je.state;if(V.activeTexture.set(J.TEXTURE0),Ne.atlasTexture.bind(Ne.atlasInterpolation,J.CLAMP_TO_EDGE),Ne.atlasTextureIcon&&(V.activeTexture.set(J.TEXTURE1),Ne.atlasTextureIcon&&Ne.atlasTextureIcon.bind(Ne.atlasInterpolationIcon,J.CLAMP_TO_EDGE)),Ne.isSDF){const qe=Ne.uniformValues;Ne.hasHalo&&(qe.u_is_halo=1,sd(Ne.buffers,je.segments,u,y,Ne.program,Ee,z,L,qe,je.terrainData)),qe.u_is_halo=0}sd(Ne.buffers,je.segments,u,y,Ne.program,Ee,z,L,Ne.uniformValues,je.terrainData)}}function sd(y,i,u,f,g,_,S,C,E,P){const z=f.context;g.draw(z,z.gl.TRIANGLES,_,S,C,Ir.disabled,E,P,u.id,y.layoutVertexBuffer,y.indexBuffer,i,u.paint,f.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Wl(y,i,u,f,g){if(!u||!f||!f.imageAtlas)return;const _=f.imageAtlas.patternPositions;let S=_[u.to.toString()],C=_[u.from.toString()];if(!S&&C&&(S=C),!C&&S&&(C=S),!S||!C){const E=g.getPaintProperty(i);S=_[E],C=_[E]}S&&C&&y.setConstantPatternPositions(S,C)}function Zl(y,i,u,f,g,_,S){const C=y.context.gl,E="fill-pattern",P=u.paint.get(E),z=P&&P.constantOr(1),L=u.getCrossfadeParameters();let V,J,Y,ne,K;S?(J=z&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",V=C.LINES):(J=z?"fillPattern":"fill",V=C.TRIANGLES);const ve=P.constantOr(null);for(const ke of f){const le=i.getTile(ke);if(z&&!le.patternsLoaded())continue;const _e=le.getBucket(u);if(!_e)continue;const Ee=_e.programConfigurations.get(u.id),Ie=y.useProgram(J,Ee),De=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ke);z&&(y.context.activeTexture.set(C.TEXTURE0),le.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Ee.updatePaintBuffers(L)),Wl(Ee,E,ve,le,u);const je=De?ke:null,Ne=y.translatePosMatrix(je?je.posMatrix:ke.posMatrix,le,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(S){ne=_e.indexBuffer2,K=_e.segments2;const qe=[C.drawingBufferWidth,C.drawingBufferHeight];Y=J==="fillOutlinePattern"&&z?Zc(Ne,y,L,le,qe):Wc(Ne,qe)}else ne=_e.indexBuffer,K=_e.segments,Y=z?Vh(Ne,y,L,le):Ep(Ne);Ie.draw(y.context,V,g,y.stencilModeForClipping(ke),_,Ir.disabled,Y,De,u.id,_e.layoutVertexBuffer,ne,K,u.paint,y.transform.zoom,Ee)}}function Kl(y,i,u,f,g,_,S){const C=y.context,E=C.gl,P="fill-extrusion-pattern",z=u.paint.get(P),L=z.constantOr(1),V=u.getCrossfadeParameters(),J=u.paint.get("fill-extrusion-opacity"),Y=z.constantOr(null);for(const ne of f){const K=i.getTile(ne),ve=K.getBucket(u);if(!ve)continue;const ke=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ne),le=ve.programConfigurations.get(u.id),_e=y.useProgram(L?"fillExtrusionPattern":"fillExtrusion",le);L&&(y.context.activeTexture.set(E.TEXTURE0),K.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),le.updatePaintBuffers(V)),Wl(le,P,Y,K,u);const Ee=y.translatePosMatrix(ne.posMatrix,K,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Ie=u.paint.get("fill-extrusion-vertical-gradient"),De=L?Ns(Ee,y,Ie,J,ne,V,K):jh(Ee,y,Ie,J);_e.draw(C,C.gl.TRIANGLES,g,_,S,Ir.backCCW,De,ke,u.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,u.paint,y.transform.zoom,le,y.style.map.terrain&&ve.centroidVertexBuffer)}}function U0(y,i,u,f,g,_,S){const C=y.context,E=C.gl,P=u.fbo;if(!P)return;const z=y.useProgram("hillshade"),L=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);C.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,P.colorAttachment.get()),z.draw(C,E.TRIANGLES,g,_,S,Ir.disabled,((V,J,Y,ne)=>{const K=Y.paint.get("hillshade-shadow-color"),ve=Y.paint.get("hillshade-highlight-color"),ke=Y.paint.get("hillshade-accent-color");let le=Y.paint.get("hillshade-illumination-direction")*(Math.PI/180);Y.paint.get("hillshade-illumination-anchor")==="viewport"&&(le-=V.transform.angle);const _e=!V.options.moving;return{u_matrix:ne?ne.posMatrix:V.transform.calculatePosMatrix(J.tileID.toUnwrapped(),_e),u_image:0,u_latrange:Gh(0,J.tileID),u_light:[Y.paint.get("hillshade-exaggeration"),le],u_shadow:K,u_highlight:ve,u_accent:ke}})(y,u,f,L?i:null),L,f.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function ad(y,i,u,f,g,_){const S=y.context,C=S.gl,E=i.dem;if(E&&E.data){const P=E.dim,z=E.stride,L=E.getPixels();if(S.activeTexture.set(C.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(z),i.demTexture){const J=i.demTexture;J.update(L,{premultiply:!1}),J.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else i.demTexture=new Ae(S,L,C.RGBA,{premultiply:!1}),i.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);S.activeTexture.set(C.TEXTURE0);let V=i.fbo;if(!V){const J=new Ae(S,{width:P,height:P,data:null},C.RGBA);J.bind(C.LINEAR,C.CLAMP_TO_EDGE),V=i.fbo=S.createFramebuffer(P,P,!0,!1),V.colorAttachment.set(J.texture)}S.bindFramebuffer.set(V.framebuffer),S.viewport.set([0,0,P,P]),y.useProgram("hillshadePrepare").draw(S,C.TRIANGLES,f,g,_,Ir.disabled,((J,Y)=>{const ne=Y.stride,K=c.Z();return c.aS(K,0,c.N,-c.N,0,0,1),c.$(K,K,[0,-c.N,0]),{u_matrix:K,u_image:1,u_dimension:[ne,ne],u_zoom:J.overscaledZ,u_unpack:Y.getUnpackVector()}})(i.tileID,E),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function G0(y,i,u,f,g,_){const S=f.paint.get("raster-fade-duration");if(!_&&S>0){const C=c.h.now(),E=(C-y.timeAdded)/S,P=i?(C-i.timeAdded)/S:-1,z=u.getSource(),L=g.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),V=!i||Math.abs(i.tileID.overscaledZ-L)>Math.abs(y.tileID.overscaledZ-L),J=V&&y.refreshedUponExpiration?1:c.ad(V?E:1-P,0,1);return y.refreshedUponExpiration&&E>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-J}:{opacity:J,mix:0}}return{opacity:1,mix:0}}const jp=new c.aT(1,0,0,1),cu=new c.aT(0,1,0,1),ld=new c.aT(0,0,1,1),Vp=new c.aT(1,0,1,1),Up=new c.aT(0,1,1,1);function Xl(y,i,u,f){hu(y,0,i+u/2,y.transform.width,u,f)}function uu(y,i,u,f){hu(y,i-u/2,0,u,y.transform.height,f)}function hu(y,i,u,f,g,_){const S=y.context,C=S.gl;C.enable(C.SCISSOR_TEST),C.scissor(i*y.pixelRatio,u*y.pixelRatio,f*y.pixelRatio,g*y.pixelRatio),S.clear({color:_}),C.disable(C.SCISSOR_TEST)}function Gp(y,i,u){const f=y.context,g=f.gl,_=u.posMatrix,S=y.useProgram("debug"),C=Xt.disabled,E=Rr.disabled,P=y.colorModeForRenderPass(),z="$debug",L=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);f.activeTexture.set(g.TEXTURE0);const V=i.getTileByID(u.key).latestRawTileData,J=Math.floor((V&&V.byteLength||0)/1024),Y=i.getTile(u).tileSize,ne=512/Math.min(Y,512)*(u.overscaledZ/y.transform.zoom)*.5;let K=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(K+=` => ${u.overscaledZ}`),function(ve,ke){ve.initDebugOverlayCanvas();const le=ve.debugOverlayCanvas,_e=ve.context.gl,Ee=ve.debugOverlayCanvas.getContext("2d");Ee.clearRect(0,0,le.width,le.height),Ee.shadowColor="white",Ee.shadowBlur=2,Ee.lineWidth=1.5,Ee.strokeStyle="white",Ee.textBaseline="top",Ee.font="bold 36px Open Sans, sans-serif",Ee.fillText(ke,5,5),Ee.strokeText(ke,5,5),ve.debugOverlayTexture.update(le),ve.debugOverlayTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE)}(y,`${K} ${J}kB`),S.draw(f,g.TRIANGLES,C,E,Dr.alphaBlended,Ir.disabled,Gl(_,c.aT.transparent,ne),null,z,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),S.draw(f,g.LINE_STRIP,C,E,P,Ir.disabled,Gl(_,c.aT.red),L,z,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function Nr(y,i,u){const f=y.context,g=f.gl,_=y.colorModeForRenderPass(),S=new Xt(g.LEQUAL,Xt.ReadWrite,y.depthRangeFor3D),C=y.useProgram("terrain"),E=i.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,y.width,y.height]);for(const P of u){const z=y.renderToTexture.getTexture(P),L=i.getTerrainData(P.tileID);f.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,z.texture);const V={u_matrix:y.transform.calculatePosMatrix(P.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};C.draw(f,g.TRIANGLES,S,Rr.disabled,_,Ir.backCCW,V,L,"terrain",E.vertexBuffer,E.indexBuffer,E.segments)}}class ma{constructor(i,u){this.context=new V0(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.Z(),renderTime:0},this.setup(),this.numSublayers=Bn.maxUnderzooming+Bn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Gc}resize(i,u,f){if(this.width=Math.floor(i*f),this.height=Math.floor(u*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,u=new c.a_;u.emplaceBack(0,0),u.emplaceBack(c.N,0),u.emplaceBack(0,c.N),u.emplaceBack(c.N,c.N),this.tileExtentBuffer=i.createVertexBuffer(u,Hc.members),this.tileExtentSegments=c.S.simpleSegment(0,0,4,2);const f=new c.a_;f.emplaceBack(0,0),f.emplaceBack(c.N,0),f.emplaceBack(0,c.N),f.emplaceBack(c.N,c.N),this.debugBuffer=i.createVertexBuffer(f,Hc.members),this.debugSegments=c.S.simpleSegment(0,0,4,5);const g=new c.V;g.emplaceBack(0,0,0,0),g.emplaceBack(c.N,0,c.N,0),g.emplaceBack(0,c.N,0,c.N),g.emplaceBack(c.N,c.N,c.N,c.N),this.rasterBoundsBuffer=i.createVertexBuffer(g,At.members),this.rasterBoundsSegments=c.S.simpleSegment(0,0,4,2);const _=new c.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(_,Hc.members),this.viewportSegments=c.S.simpleSegment(0,0,4,2);const S=new c.a$;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(S);const C=new c.b0;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(C);const E=this.context.gl;this.stencilClearMode=new Rr({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=c.Z();c.aS(f,0,this.width,this.height,0,0,1),c.a0(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,Xt.disabled,this.stencilClearMode,Dr.disabled,Ir.disabled,Ip(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const f=this.context,g=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(Dr.disabled),f.setDepthMode(Xt.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of u){const C=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,E=this.style.map.terrain&&this.style.map.terrain.getTerrainData(S);_.draw(f,g.TRIANGLES,Xt.disabled,new Rr({func:g.ALWAYS,mask:0},C,255,g.KEEP,g.KEEP,g.REPLACE),Dr.disabled,Ir.disabled,Ip(S.posMatrix),E,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new Rr({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new Rr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,f=i.sort((S,C)=>C.overscaledZ-S.overscaledZ),g=f[f.length-1].overscaledZ,_=f[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const S={};for(let C=0;C<_;C++)S[C+g]=new Rr({func:u.GEQUAL,mask:255},C+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[S,f]}return[{[g]:Rr.disabled},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Dr([i.CONSTANT_COLOR,i.ONE],new c.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Dr.unblended:Dr.alphaBlended}depthModeForSublayer(i,u,f){if(!this.opaquePassEnabledForLayer())return Xt.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Xt(f||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(c.h.now()),this.imageManager.beginFrame();const f=this.style._order,g=this.style.sourceCaches,_={},S={},C={};for(const E in g){const P=g[E];P.used&&P.prepare(this.context),_[E]=P.getVisibleCoordinates(),S[E]=_[E].slice().reverse(),C[E]=P.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let E=0;E<f.length;E++)if(this.style._layers[f[E]].is3D()){this.opaquePassCutoff=E;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const E=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!c.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||E.length)&&(c.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(P,z){const L=P.context,V=L.gl,J=Dr.unblended,Y=new Xt(V.LEQUAL,Xt.ReadWrite,[0,1]),ne=z.getTerrainMesh(),K=z.sourceCache.getRenderableTiles(),ve=P.useProgram("terrainDepth");L.bindFramebuffer.set(z.getFramebuffer("depth").framebuffer),L.viewport.set([0,0,P.width/devicePixelRatio,P.height/devicePixelRatio]),L.clear({color:c.aT.transparent,depth:1});for(const ke of K){const le=z.getTerrainData(ke.tileID),_e={u_matrix:P.transform.calculatePosMatrix(ke.tileID.toUnwrapped()),u_ele_delta:z.getMeshFrameDelta(P.transform.zoom)};ve.draw(L,V.TRIANGLES,Y,Rr.disabled,J,Ir.backCCW,_e,le,"terrain",ne.vertexBuffer,ne.indexBuffer,ne.segments)}L.bindFramebuffer.set(null),L.viewport.set([0,0,P.width,P.height])}(this,this.style.map.terrain),function(P,z){const L=P.context,V=L.gl,J=Dr.unblended,Y=new Xt(V.LEQUAL,Xt.ReadWrite,[0,1]),ne=z.getTerrainMesh(),K=z.getCoordsTexture(),ve=z.sourceCache.getRenderableTiles(),ke=P.useProgram("terrainCoords");L.bindFramebuffer.set(z.getFramebuffer("coords").framebuffer),L.viewport.set([0,0,P.width/devicePixelRatio,P.height/devicePixelRatio]),L.clear({color:c.aT.transparent,depth:1}),z.coordsIndex=[];for(const le of ve){const _e=z.getTerrainData(le.tileID);L.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,K.texture);const Ee={u_matrix:P.transform.calculatePosMatrix(le.tileID.toUnwrapped()),u_terrain_coords_id:(255-z.coordsIndex.length)/255,u_texture:0,u_ele_delta:z.getMeshFrameDelta(P.transform.zoom)};ke.draw(L,V.TRIANGLES,Y,Rr.disabled,J,Ir.backCCW,Ee,_e,"terrain",ne.vertexBuffer,ne.indexBuffer,ne.segments),z.coordsIndex.push(le.tileID.key)}L.bindFramebuffer.set(null),L.viewport.set([0,0,P.width,P.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const E of f){const P=this.style._layers[E];if(!P.hasOffscreenPass()||P.isHidden(this.transform.zoom))continue;const z=S[P.source];(P.type==="custom"||z.length)&&this.renderLayer(this,g[P.source],P,z)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?c.aT.black:c.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const E=this.style._layers[f[this.currentLayer]],P=g[E.source],z=_[E.source];this._renderTileClippingMasks(E,z),this.renderLayer(this,P,E,z)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const E=this.style._layers[f[this.currentLayer]],P=g[E.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(E))continue;const z=(E.type==="symbol"?C:S)[E.source];this._renderTileClippingMasks(E,_[E.source]),this.renderLayer(this,P,E,z)}if(this.options.showTileBoundaries){const E=function(P,z){let L=null;const V=Object.values(P._layers).flatMap(K=>K.source&&!K.isHidden(z)?[P.sourceCaches[K.source]]:[]),J=V.filter(K=>K.getSource().type==="vector"),Y=V.filter(K=>K.getSource().type!=="vector"),ne=K=>{(!L||L.getSource().maxzoom<K.getSource().maxzoom)&&(L=K)};return J.forEach(K=>ne(K)),L||Y.forEach(K=>ne(K)),L}(this.style,this.transform.zoom);E&&function(P,z,L){for(let V=0;V<L.length;V++)Gp(P,z,L[V])}(this,E,E.getVisibleCoordinates())}this.options.showPadding&&function(E){const P=E.transform.padding;Xl(E,E.transform.height-(P.top||0),3,jp),Xl(E,P.bottom||0,3,cu),uu(E,P.left||0,3,ld),uu(E,E.transform.width-(P.right||0),3,Vp);const z=E.transform.centerPoint;(function(L,V,J,Y){hu(L,V-1,J-10,2,20,Y),hu(L,V-10,J-1,20,2,Y)})(E,z.x,E.transform.height-z.y,Up)}(this),this.context.setDefault()}renderLayer(i,u,f,g){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(g||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(_,S,C,E,P){if(_.renderPass!=="translucent")return;const z=Rr.disabled,L=_.colorModeForRenderPass();(C._unevaluatedLayout.hasValue("text-variable-anchor")||C._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(V,J,Y,ne,K,ve,ke){const le=J.transform,_e=K==="map",Ee=ve==="map";for(const Ie of V){const De=ne.getTile(Ie),je=De.getBucket(Y);if(!je||!je.text||!je.text.segments.get().length)continue;const Ne=c.ah(je.textSizeData,le.zoom),qe=ye(De,1,J.transform.zoom),dt=Ke(Ie.posMatrix,Ee,_e,J.transform,qe),Gt=Y.layout.get("icon-text-fit")!=="none"&&je.hasIconData();if(Ne){const et=Math.pow(2,le.zoom-De.tileID.overscaledZ);au(je,_e,Ee,ke,le,dt,Ie.posMatrix,et,Ne,Gt,J.style.map.terrain?(Tt,pt)=>J.style.map.terrain.getElevation(Ie,Tt,pt):null)}}}(E,_,C,S,C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),P),C.paint.get("icon-opacity").constantOr(1)!==0&&lu(_,S,C,E,!1,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),C.layout.get("icon-rotation-alignment"),C.layout.get("icon-pitch-alignment"),C.layout.get("icon-keep-upright"),z,L),C.paint.get("text-opacity").constantOr(1)!==0&&lu(_,S,C,E,!0,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),C.layout.get("text-rotation-alignment"),C.layout.get("text-pitch-alignment"),C.layout.get("text-keep-upright"),z,L),S.map.showCollisionBoxes&&(Np(_,S,C,E,C.paint.get("text-translate"),C.paint.get("text-translate-anchor"),!0),Np(_,S,C,E,C.paint.get("icon-translate"),C.paint.get("icon-translate-anchor"),!1))})(i,u,f,g,this.style.placement.variableOffsets);break;case"circle":(function(_,S,C,E){if(_.renderPass!=="translucent")return;const P=C.paint.get("circle-opacity"),z=C.paint.get("circle-stroke-width"),L=C.paint.get("circle-stroke-opacity"),V=!C.layout.get("circle-sort-key").isConstant();if(P.constantOr(1)===0&&(z.constantOr(1)===0||L.constantOr(1)===0))return;const J=_.context,Y=J.gl,ne=_.depthModeForSublayer(0,Xt.ReadOnly),K=Rr.disabled,ve=_.colorModeForRenderPass(),ke=[];for(let le=0;le<E.length;le++){const _e=E[le],Ee=S.getTile(_e),Ie=Ee.getBucket(C);if(!Ie)continue;const De=Ie.programConfigurations.get(C.id),je=_.useProgram("circle",De),Ne=Ie.layoutVertexBuffer,qe=Ie.indexBuffer,dt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(_e),Gt={programConfiguration:De,program:je,layoutVertexBuffer:Ne,indexBuffer:qe,uniformValues:js(_,_e,Ee,C),terrainData:dt};if(V){const et=Ie.segments.get();for(const Tt of et)ke.push({segments:new c.S([Tt]),sortKey:Tt.sortKey,state:Gt})}else ke.push({segments:Ie.segments,sortKey:0,state:Gt})}V&&ke.sort((le,_e)=>le.sortKey-_e.sortKey);for(const le of ke){const{programConfiguration:_e,program:Ee,layoutVertexBuffer:Ie,indexBuffer:De,uniformValues:je,terrainData:Ne}=le.state;Ee.draw(J,Y.TRIANGLES,ne,K,ve,Ir.disabled,je,Ne,C.id,Ie,De,le.segments,C.paint,_.transform.zoom,_e)}})(i,u,f,g);break;case"heatmap":(function(_,S,C,E){if(C.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const P=_.context,z=P.gl,L=Rr.disabled,V=new Dr([z.ONE,z.ONE],c.aT.transparent,[!0,!0,!0,!0]);(function(J,Y,ne){const K=J.gl;J.activeTexture.set(K.TEXTURE1),J.viewport.set([0,0,Y.width/4,Y.height/4]);let ve=ne.heatmapFbo;if(ve)K.bindTexture(K.TEXTURE_2D,ve.colorAttachment.get()),J.bindFramebuffer.set(ve.framebuffer);else{const ke=K.createTexture();K.bindTexture(K.TEXTURE_2D,ke),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,K.LINEAR),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,K.LINEAR),ve=ne.heatmapFbo=J.createFramebuffer(Y.width/4,Y.height/4,!1,!1),function(le,_e,Ee,Ie){var De,je;const Ne=le.gl,qe=(De=le.HALF_FLOAT)!==null&&De!==void 0?De:Ne.UNSIGNED_BYTE,dt=(je=le.RGBA16F)!==null&&je!==void 0?je:Ne.RGBA;Ne.texImage2D(Ne.TEXTURE_2D,0,dt,_e.width/4,_e.height/4,0,Ne.RGBA,qe,null),Ie.colorAttachment.set(Ee)}(J,Y,ke,ve)}})(P,_,C),P.clear({color:c.aT.transparent});for(let J=0;J<E.length;J++){const Y=E[J];if(S.hasRenderableParent(Y))continue;const ne=S.getTile(Y),K=ne.getBucket(C);if(!K)continue;const ve=K.programConfigurations.get(C.id),ke=_.useProgram("heatmap",ve),{zoom:le}=_.transform;ke.draw(P,z.TRIANGLES,Xt.disabled,L,V,Ir.disabled,D0(Y.posMatrix,ne,le,C.paint.get("heatmap-intensity")),null,C.id,K.layoutVertexBuffer,K.indexBuffer,K.segments,C.paint,_.transform.zoom,ve)}P.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(P,z){const L=P.context,V=L.gl,J=z.heatmapFbo;if(!J)return;L.activeTexture.set(V.TEXTURE0),V.bindTexture(V.TEXTURE_2D,J.colorAttachment.get()),L.activeTexture.set(V.TEXTURE1);let Y=z.colorRampTexture;Y||(Y=z.colorRampTexture=new Ae(L,z.colorRamp,V.RGBA)),Y.bind(V.LINEAR,V.CLAMP_TO_EDGE),P.useProgram("heatmapTexture").draw(L,V.TRIANGLES,Xt.disabled,Rr.disabled,P.colorModeForRenderPass(),Ir.disabled,((ne,K,ve,ke)=>{const le=c.Z();c.aS(le,0,ne.width,ne.height,0,0,1);const _e=ne.context.gl;return{u_matrix:le,u_world:[_e.drawingBufferWidth,_e.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:K.paint.get("heatmap-opacity")}})(P,z),null,z.id,P.viewportBuffer,P.quadTriangleIndexBuffer,P.viewportSegments,z.paint,P.transform.zoom)}(_,C))})(i,u,f,g);break;case"line":(function(_,S,C,E){if(_.renderPass!=="translucent")return;const P=C.paint.get("line-opacity"),z=C.paint.get("line-width");if(P.constantOr(1)===0||z.constantOr(1)===0)return;const L=_.depthModeForSublayer(0,Xt.ReadOnly),V=_.colorModeForRenderPass(),J=C.paint.get("line-dasharray"),Y=C.paint.get("line-pattern"),ne=Y.constantOr(1),K=C.paint.get("line-gradient"),ve=C.getCrossfadeParameters(),ke=ne?"linePattern":J?"lineSDF":K?"lineGradient":"line",le=_.context,_e=le.gl;let Ee=!0;for(const Ie of E){const De=S.getTile(Ie);if(ne&&!De.patternsLoaded())continue;const je=De.getBucket(C);if(!je)continue;const Ne=je.programConfigurations.get(C.id),qe=_.context.program.get(),dt=_.useProgram(ke,Ne),Gt=Ee||dt.program!==qe,et=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ie),Tt=Y.constantOr(null);if(Tt&&De.imageAtlas){const Vt=De.imageAtlas,$t=Vt.patternPositions[Tt.to.toString()],Ht=Vt.patternPositions[Tt.from.toString()];$t&&Ht&&Ne.setConstantPatternPositions($t,Ht)}const pt=et?Ie:null,hr=ne?R0(_,De,C,ve,pt):J?Ap(_,De,C,J,ve,pt):K?Pp(_,De,C,je.lineClipsArray.length,pt):Hh(_,De,C,pt);if(ne)le.activeTexture.set(_e.TEXTURE0),De.imageAtlasTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE),Ne.updatePaintBuffers(ve);else if(J&&(Gt||_.lineAtlas.dirty))le.activeTexture.set(_e.TEXTURE0),_.lineAtlas.bind(le);else if(K){const Vt=je.gradients[C.id];let $t=Vt.texture;if(C.gradientVersion!==Vt.version){let Ht=256;if(C.stepInterpolant){const Gr=S.getSource().maxzoom,br=Ie.canonical.z===Gr?Math.ceil(1<<_.transform.maxZoom-Ie.canonical.z):1;Ht=c.ad(c.aY(je.maxLineLength/c.N*1024*br),256,le.maxTextureSize)}Vt.gradient=c.aZ({expression:C.gradientExpression(),evaluationKey:"lineProgress",resolution:Ht,image:Vt.gradient||void 0,clips:je.lineClipsArray}),Vt.texture?Vt.texture.update(Vt.gradient):Vt.texture=new Ae(le,Vt.gradient,_e.RGBA),Vt.version=C.gradientVersion,$t=Vt.texture}le.activeTexture.set(_e.TEXTURE0),$t.bind(C.stepInterpolant?_e.NEAREST:_e.LINEAR,_e.CLAMP_TO_EDGE)}dt.draw(le,_e.TRIANGLES,L,_.stencilModeForClipping(Ie),V,Ir.disabled,hr,et,C.id,je.layoutVertexBuffer,je.indexBuffer,je.segments,C.paint,_.transform.zoom,Ne,je.layoutVertexBuffer2),Ee=!1}})(i,u,f,g);break;case"fill":(function(_,S,C,E){const P=C.paint.get("fill-color"),z=C.paint.get("fill-opacity");if(z.constantOr(1)===0)return;const L=_.colorModeForRenderPass(),V=C.paint.get("fill-pattern"),J=_.opaquePassEnabledForLayer()&&!V.constantOr(1)&&P.constantOr(c.aT.transparent).a===1&&z.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===J){const Y=_.depthModeForSublayer(1,_.renderPass==="opaque"?Xt.ReadWrite:Xt.ReadOnly);Zl(_,S,C,E,Y,L,!1)}if(_.renderPass==="translucent"&&C.paint.get("fill-antialias")){const Y=_.depthModeForSublayer(C.getPaintProperty("fill-outline-color")?2:0,Xt.ReadOnly);Zl(_,S,C,E,Y,L,!0)}})(i,u,f,g);break;case"fill-extrusion":(function(_,S,C,E){const P=C.paint.get("fill-extrusion-opacity");if(P!==0&&_.renderPass==="translucent"){const z=new Xt(_.context.gl.LEQUAL,Xt.ReadWrite,_.depthRangeFor3D);if(P!==1||C.paint.get("fill-extrusion-pattern").constantOr(1))Kl(_,S,C,E,z,Rr.disabled,Dr.disabled),Kl(_,S,C,E,z,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const L=_.colorModeForRenderPass();Kl(_,S,C,E,z,Rr.disabled,L)}}})(i,u,f,g);break;case"hillshade":(function(_,S,C,E){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const P=_.context,z=_.depthModeForSublayer(0,Xt.ReadOnly),L=_.colorModeForRenderPass(),[V,J]=_.renderPass==="translucent"?_.stencilConfigForOverlap(E):[{},E];for(const Y of J){const ne=S.getTile(Y);ne.needsHillshadePrepare!==void 0&&ne.needsHillshadePrepare&&_.renderPass==="offscreen"?ad(_,ne,C,z,Rr.disabled,L):_.renderPass==="translucent"&&U0(_,Y,ne,C,z,V[Y.overscaledZ],L)}P.viewport.set([0,0,_.width,_.height])})(i,u,f,g);break;case"raster":(function(_,S,C,E){if(_.renderPass!=="translucent"||C.paint.get("raster-opacity")===0||!E.length)return;const P=_.context,z=P.gl,L=S.getSource(),V=_.useProgram("raster"),J=_.colorModeForRenderPass(),[Y,ne]=L instanceof Rt?[{},E]:_.stencilConfigForOverlap(E),K=ne[ne.length-1].overscaledZ,ve=!_.options.moving;for(const ke of ne){const le=_.depthModeForSublayer(ke.overscaledZ-K,C.paint.get("raster-opacity")===1?Xt.ReadWrite:Xt.ReadOnly,z.LESS),_e=S.getTile(ke);_e.registerFadeDuration(C.paint.get("raster-fade-duration"));const Ee=S.findLoadedParent(ke,0),Ie=G0(_e,Ee,S,C,_.transform,_.style.map.terrain);let De,je;const Ne=C.paint.get("raster-resampling")==="nearest"?z.NEAREST:z.LINEAR;P.activeTexture.set(z.TEXTURE0),_e.texture.bind(Ne,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),P.activeTexture.set(z.TEXTURE1),Ee?(Ee.texture.bind(Ne,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),De=Math.pow(2,Ee.tileID.overscaledZ-_e.tileID.overscaledZ),je=[_e.tileID.canonical.x*De%1,_e.tileID.canonical.y*De%1]):_e.texture.bind(Ne,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST);const qe=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ke),dt=qe?ke:null,Gt=dt?dt.posMatrix:_.transform.calculatePosMatrix(ke.toUnwrapped(),ve),et=zp(Gt,je||[0,0],De||1,Ie,C);L instanceof Rt?V.draw(P,z.TRIANGLES,le,Rr.disabled,J,Ir.disabled,et,qe,C.id,L.boundsBuffer,_.quadTriangleIndexBuffer,L.boundsSegments):V.draw(P,z.TRIANGLES,le,Y[ke.overscaledZ],J,Ir.disabled,et,qe,C.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(i,u,f,g);break;case"background":(function(_,S,C,E){const P=C.paint.get("background-color"),z=C.paint.get("background-opacity");if(z===0)return;const L=_.context,V=L.gl,J=_.transform,Y=J.tileSize,ne=C.paint.get("background-pattern");if(_.isPatternMissing(ne))return;const K=!ne&&P.a===1&&z===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==K)return;const ve=Rr.disabled,ke=_.depthModeForSublayer(0,K==="opaque"?Xt.ReadWrite:Xt.ReadOnly),le=_.colorModeForRenderPass(),_e=_.useProgram(ne?"backgroundPattern":"background"),Ee=E||J.coveringTiles({tileSize:Y,terrain:_.style.map.terrain});ne&&(L.activeTexture.set(V.TEXTURE0),_.imageManager.bind(_.context));const Ie=C.getCrossfadeParameters();for(const De of Ee){const je=E?De.posMatrix:_.transform.calculatePosMatrix(De.toUnwrapped()),Ne=ne?Xi(je,z,_,ne,{tileID:De,tileSize:Y},Ie):Xc(je,z,P),qe=_.style.map.terrain&&_.style.map.terrain.getTerrainData(De);_e.draw(L,V.TRIANGLES,ke,ve,le,Ir.disabled,Ne,qe,C.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(i,0,f,g);break;case"custom":(function(_,S,C){const E=_.context,P=C.implementation;if(_.renderPass==="offscreen"){const z=P.prerender;z&&(_.setCustomLayerDefaults(),E.setColorMode(_.colorModeForRenderPass()),z.call(P,E.gl,_.transform.customLayerMatrix()),E.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),E.setColorMode(_.colorModeForRenderPass()),E.setStencilMode(Rr.disabled);const z=P.renderingMode==="3d"?new Xt(_.context.gl.LEQUAL,Xt.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,Xt.ReadOnly);E.setDepthMode(z),P.render(E.gl,_.transform.customLayerMatrix()),E.setDirty(),_.setBaseState(),E.bindFramebuffer.set(null)}})(i,0,f)}}translatePosMatrix(i,u,f,g,_){if(!f[0]&&!f[1])return i;const S=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(S){const P=Math.sin(S),z=Math.cos(S);f=[f[0]*z-f[1]*P,f[0]*P+f[1]*z]}const C=[_?f[0]:ye(u,f[0],this.transform.zoom),_?f[1]:ye(u,f[1],this.transform.zoom),0],E=new Float32Array(16);return c.$(E,i,C),E}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!u||!f}useProgram(i,u){this.cache=this.cache||{};const f=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new qc(this.context,Lr[i],u,Yc[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ae(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:u}=this.context.gl;return this.width!==i||this.height!==u}}class hi{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,f){const g=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const E=1/(C=c.ag([],C,i))[3]/u*g;return c.b3(C,C,[E,E,1/C[3],E])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const E=function(V,J){var Y=J[0],ne=J[1],K=J[2],ve=Y*Y+ne*ne+K*K;return ve>0&&(ve=1/Math.sqrt(ve)),V[0]=J[0]*ve,V[1]=J[1]*ve,V[2]=J[2]*ve,V}([],function(V,J,Y){var ne=J[0],K=J[1],ve=J[2],ke=Y[0],le=Y[1],_e=Y[2];return V[0]=K*_e-ve*le,V[1]=ve*ke-ne*_e,V[2]=ne*le-K*ke,V}([],F([],_[C[0]],_[C[1]]),F([],_[C[2]],_[C[1]]))),P=-((z=E)[0]*(L=_[C[1]])[0]+z[1]*L[1]+z[2]*L[2]);var z,L;return E.concat(P)});return new hi(_,S)}}class nl{constructor(i,u){this.min=i,this.max=u,this.center=function(f,g,_){return f[0]=.5*g[0],f[1]=.5*g[1],f[2]=.5*g[2],f}([],function(f,g,_){return f[0]=g[0]+_[0],f[1]=g[1]+_[1],f[2]=g[2]+_[2],f}([],this.min,this.max))}quadrant(i){const u=[i%2==0,i<2],f=fe(this.min),g=fe(this.max);for(let _=0;_<u.length;_++)f[_]=u[_]?this.min[_]:this.center[_],g[_]=u[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new nl(f,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let g=0;g<i.planes.length;g++){const _=i.planes[g];let S=0;for(let C=0;C<u.length;C++)c.b4(_,u[C])>=0&&S++;if(S===0)return 0;S!==u.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let C=0;C<i.points.length;C++){const E=i.points[C][g]-this.min[g];_=Math.min(_,E),S=Math.max(S,E)}if(S<0||_>this.max[g]-this.min[g])return 0}return 1}}class Yl{constructor(i=0,u=0,f=0,g=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=f,this.right=g}interpolate(i,u,f){return u.top!=null&&i.top!=null&&(this.top=c.B.number(i.top,u.top,f)),u.bottom!=null&&i.bottom!=null&&(this.bottom=c.B.number(i.bottom,u.bottom,f)),u.left!=null&&i.left!=null&&(this.left=c.B.number(i.left,u.left,f)),u.right!=null&&i.right!=null&&(this.right=c.B.number(i.right,u.right,f)),this}getCenter(i,u){const f=c.ad((this.left+i-this.right)/2,0,i),g=c.ad((this.top+u-this.bottom)/2,0,u);return new c.P(f,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Yl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class du{constructor(i,u,f,g,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=f??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Yl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new du(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-c.b5(i,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var f=new c.A(4);return c.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,g,_){var S=g[0],C=g[1],E=g[2],P=g[3],z=Math.sin(_),L=Math.cos(_);f[0]=S*L+E*z,f[1]=C*L+P*z,f[2]=S*-z+E*L,f[3]=C*-z+P*L}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=c.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,f){this._unmodified=!1,this._edgeInsets.interpolate(i,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new c.b6(0,i)];if(this._renderWorldCopies){const f=this.pointCoordinate(new c.P(0,0)),g=this.pointCoordinate(new c.P(this.width,0)),_=this.pointCoordinate(new c.P(this.width,this.height)),S=this.pointCoordinate(new c.P(0,this.height)),C=Math.floor(Math.min(f.x,g.x,_.x,S.x)),E=Math.floor(Math.max(f.x,g.x,_.x,S.x)),P=1;for(let z=C-P;z<=E+P;z++)z!==0&&u.push(new c.b6(z,i))}return u}coveringTiles(i){var u,f;let g=this.coveringZoomLevel(i);const _=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const S=this.pointCoordinate(this.getCameraPoint()),C=c.U.fromLngLat(this.center),E=Math.pow(2,g),P=[E*S.x,E*S.y,0],z=[E*C.x,E*C.y,0],L=hi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let V=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(V=g);const J=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,Y=le=>({aabb:new nl([le*E,0,0],[(le+1)*E,E,0]),zoom:0,x:0,y:0,wrap:le,fullyVisible:!1}),ne=[],K=[],ve=g,ke=i.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let le=1;le<=3;le++)ne.push(Y(-le)),ne.push(Y(le));for(ne.push(Y(0));ne.length>0;){const le=ne.pop(),_e=le.x,Ee=le.y;let Ie=le.fullyVisible;if(!Ie){const dt=le.aabb.intersects(L);if(dt===0)continue;Ie=dt===2}const De=i.terrain?P:z,je=le.aabb.distanceX(De),Ne=le.aabb.distanceY(De),qe=Math.max(Math.abs(je),Math.abs(Ne));if(le.zoom===ve||qe>J+(1<<ve-le.zoom)-2&&le.zoom>=V){const dt=ve-le.zoom,Gt=P[0]-.5-(_e<<dt),et=P[1]-.5-(Ee<<dt);K.push({tileID:new c.O(le.zoom===ve?ke:le.zoom,le.wrap,le.zoom,_e,Ee),distanceSq:ce([z[0]-.5-_e,z[1]-.5-Ee]),tileDistanceToCamera:Math.sqrt(Gt*Gt+et*et)})}else for(let dt=0;dt<4;dt++){const Gt=(_e<<1)+dt%2,et=(Ee<<1)+(dt>>1),Tt=le.zoom+1;let pt=le.aabb.quadrant(dt);if(i.terrain){const hr=new c.O(Tt,le.wrap,Tt,Gt,et),Vt=i.terrain.getMinMaxElevation(hr),$t=(u=Vt.minElevation)!==null&&u!==void 0?u:this.elevation,Ht=(f=Vt.maxElevation)!==null&&f!==void 0?f:this.elevation;pt=new nl([pt.min[0],pt.min[1],$t],[pt.max[0],pt.max[1],Ht])}ne.push({aabb:pt,zoom:Tt,x:Gt,y:et,wrap:le.wrap,fullyVisible:Ie})}}return K.sort((le,_e)=>le.distanceSq-_e.distanceSq).map(le=>le.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=c.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.P(c.G(i.lng)*this.worldSize,c.H(u)*this.worldSize)}unproject(i){return new c.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),f=i.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-f))return;const g=this.getCameraPosition(),_=c.U.fromLngLat(g.lngLat,g.altitude),S=c.U.fromLngLat(u,f),C=_.x-S.x,E=_.y-S.y,P=_.z-S.z,z=Math.sqrt(C*C+E*E+P*P),L=this.scaleZoom(this.cameraToCenterDistance/z/this.tileSize);this._elevation=f,this._center=u,this.zoom=L}setLocationAtPoint(i,u){const f=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(i),S=new c.U(_.x-(f.x-g.x),_.y-(f.y-g.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),u.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return c.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const V=u.pointCoordinate(i);if(V!=null)return V}const f=[i.x,i.y,0,1],g=[i.x,i.y,1,1];c.ag(f,f,this.pixelMatrixInverse),c.ag(g,g,this.pixelMatrixInverse);const _=f[3],S=g[3],C=f[1]/_,E=g[1]/S,P=f[2]/_,z=g[2]/S,L=P===z?0:(0-P)/(z-P);return new c.U(c.B.number(f[0]/_,g[0]/S,L)/this.worldSize,c.B.number(C,E,L)/this.worldSize)}coordinatePoint(i,u=0,f=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,u,1];return c.ag(g,g,f),new c.P(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Dt().extend(this.pointLocation(new c.P(0,i))).extend(this.pointLocation(new c.P(this.width,i))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Dt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const f=i.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[f])return g[f];const _=i.canonical,S=this.worldSize/this.zoomScale(_.z),C=_.x+Math.pow(2,_.z)*i.wrap,E=c.ao(new Float64Array(16));return c.$(E,E,[C*S,_.y*S,0]),c.a0(E,E,[S/c.N,S/c.N,1]),c.a1(E,u?this.alignedProjMatrix:this.projMatrix,E),g[f]=new Float32Array(E),g[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,f,g,_=-90,S=90,C=-180,E=180;const P=this.size,z=this._unmodified;if(this.latRange){const J=this.latRange;_=c.H(J[1])*this.worldSize,S=c.H(J[0])*this.worldSize,i=S-_<P.y?P.y/(S-_):0}if(this.lngRange){const J=this.lngRange;C=c.b5(c.G(J[0])*this.worldSize,0,this.worldSize),E=c.b5(c.G(J[1])*this.worldSize,0,this.worldSize),E<C&&(E+=this.worldSize),u=E-C<P.x?P.x/(E-C):0}const L=this.point,V=Math.max(u||0,i||0);if(V)return this.center=this.unproject(new c.P(u?(E+C)/2:L.x,i?(S+_)/2:L.y)),this.zoom+=this.scaleZoom(V),this._unmodified=z,void(this._constraining=!1);if(this.latRange){const J=L.y,Y=P.y/2;J-Y<_&&(g=_+Y),J+Y>S&&(g=S-Y)}if(this.lngRange){const J=(C+E)/2,Y=c.b5(L.x,J-this.worldSize/2,J+this.worldSize/2),ne=P.x/2;Y-ne<C&&(f=C+ne),Y+ne>E&&(f=E-ne)}f===void 0&&g===void 0||(this.center=this.unproject(new c.P(f!==void 0?f:L.x,g!==void 0?g:L.y)).wrap()),this._unmodified=z,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b7(1,this.center.lat)*this.worldSize;let g=c.ao(new Float64Array(16));c.a0(g,g,[this.width/2,-this.height/2,1]),c.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=c.ao(new Float64Array(16)),c.a0(g,g,[1,-1,1]),c.$(g,g,[-1,-1,0]),c.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),S=Math.min(this.elevation,this._minEleveationForCurrentTile),C=_-S*this._pixelPerMeter/Math.cos(this._pitch),E=S<0?C:_,P=Math.PI/2+this._pitch,z=this._fov*(.5+i.y/this.height),L=Math.sin(z)*E/Math.sin(c.ad(Math.PI-P-z,.01,Math.PI-.01)),V=this.getHorizon(),J=2*Math.atan(V/this.cameraToCenterDistance)*(.5+i.y/(2*V)),Y=Math.sin(J)*E/Math.sin(c.ad(Math.PI-P-J,.01,Math.PI-.01)),ne=Math.min(L,Y),K=1.01*(Math.cos(Math.PI/2-this._pitch)*ne+E),ve=this.height/50;g=new Float64Array(16),c.b8(g,this._fov,this.width/this.height,ve,K),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,c.a0(g,g,[1,-1,1]),c.$(g,g,[0,0,-this.cameraToCenterDistance]),c.b9(g,g,this._pitch),c.ae(g,g,this.angle),c.$(g,g,[-u,-f,0]),this.mercatorMatrix=c.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),c.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.a1(new Float64Array(16),this.labelPlaneMatrix,g),c.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=c.as([],g),this.pixelMatrix3D=c.a1(new Float64Array(16),this.labelPlaneMatrix,g);const ke=this.width%2/2,le=this.height%2/2,_e=Math.cos(this.angle),Ee=Math.sin(this.angle),Ie=u-Math.round(u)+_e*ke+Ee*le,De=f-Math.round(f)+_e*le+Ee*ke,je=new Float64Array(g);if(c.$(je,je,[Ie>.5?Ie-1:Ie,De>.5?De-1:De,0]),this.alignedProjMatrix=je,g=c.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new c.P(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return c.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let f=u.x,g=u.y,_=u.x,S=u.y;for(const C of i)f=Math.min(f,C.x),g=Math.min(g,C.y),_=Math.max(_,C.x),S=Math.max(S,C.y);return[new c.P(f,g),new c.P(_,g),new c.P(_,S),new c.P(f,S),new c.P(f,g)]}}}function ga(y,i){let u,f=!1,g=null,_=null;const S=()=>{g=null,f&&(y.apply(_,u),g=setTimeout(S,i),f=!1)};return(...C)=>(f=!0,_=this,u=C,g||S(),g)}class Jl{constructor(i){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let f;return u.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(f=g)}),(f&&f[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:f,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=ga(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),S=Math.round(u.lng*_)/_,C=Math.round(u.lat*_)/_,E=this._map.getBearing(),P=this._map.getPitch();let z="";if(z+=i?`/${S}/${C}/${f}`:`${f}/${C}/${S}`,(E||P)&&(z+="/"+Math.round(10*E)/10),P&&(z+=`/${Math.round(P)}`),this._hashName){const L=this._hashName;let V=!1;const J=window.location.hash.slice(1).split("&").map(Y=>{const ne=Y.split("=")[0];return ne===L?(V=!0,`${ne}=${z}`):Y}).filter(Y=>Y);return V||J.push(`${L}=${z}`),`#${J.join("&")}`}return`#${z}`}}const il={linearity:.3,easing:c.ba(0,0,.3,1)},Hp=c.e({deceleration:2500,maxSpeed:1400},il),qp=c.e({deceleration:20,maxSpeed:1400},il),Wp=c.e({deceleration:1e3,maxSpeed:360},il),Zp=c.e({deceleration:1e3,maxSpeed:90},il);class Kp{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=c.h.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const _=Ql(u.pan.mag(),f,c.e({},Hp,i||{}));g.offset=u.pan.mult(_.amount/u.pan.mag()),g.center=this._map.transform.center,Oo(g,_)}if(u.zoom){const _=Ql(u.zoom,f,qp);g.zoom=this._map.transform.zoom+_.amount,Oo(g,_)}if(u.bearing){const _=Ql(u.bearing,f,Wp);g.bearing=this._map.transform.bearing+c.ad(_.amount,-179,179),Oo(g,_)}if(u.pitch){const _=Ql(u.pitch,f,Zp);g.pitch=this._map.transform.pitch+_.amount,Oo(g,_)}if(g.zoom||g.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),c.e(g,{noMoveStart:!0})}}function Oo(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Ql(y,i,u){const{maxSpeed:f,linearity:g,deceleration:_}=u,S=c.ad(y*g/(i/1e3),-f,f),C=Math.abs(S)/(_*g);return{easing:u.easing,duration:1e3*C,amount:S*(C/2)}}class zi extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,f,g={}){const _=k.mousePos(u.getCanvasContainer(),f),S=u.unproject(_);super(i,c.e({point:_,lngLat:S,originalEvent:f},g)),this._defaultPrevented=!1,this.target=u}}class ec extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,f){const g=i==="touchend"?f.changedTouches:f.touches,_=k.touchPos(u.getCanvasContainer(),g),S=_.map(E=>u.unproject(E)),C=_.reduce((E,P,z,L)=>E.add(P.div(L.length)),new c.P(0,0));super(i,{points:_,point:C,lngLats:S,lngLat:u.unproject(C),originalEvent:f}),this._defaultPrevented=!1}}class Xp extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}}class Yp{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Xp(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new zi(i.type,this._map,i))}mouseup(i){this._map.fire(new zi(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new zi(i.type,this._map,i))}dblclick(i){return this._firePreventable(new zi(i.type,this._map,i))}mouseover(i){this._map.fire(new zi(i.type,this._map,i))}mouseout(i){this._map.fire(new zi(i.type,this._map,i))}touchstart(i){return this._firePreventable(new ec(i.type,this._map,i))}touchmove(i){this._map.fire(new ec(i.type,this._map,i))}touchend(i){this._map.fire(new ec(i.type,this._map,i))}touchcancel(i){this._map.fire(new ec(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Jp{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new zi(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new zi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new zi(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class us{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(c.P.convert(i),this._map.terrain)}}class Qp{constructor(i,u){this._map=i,this._tr=new us(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(k.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=f,this._box||(this._box=k.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const _=Math.min(g.x,f.x),S=Math.max(g.x,f.x),C=Math.min(g.y,f.y),E=Math.max(g.y,f.y);k.setTransform(this._box,`translate(${_}px,${C}px)`),this._box.style.width=S-_+"px",this._box.style.height=E-C+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const f=this._startPos,g=u;if(this.reset(),k.suppressClick(),f.x!==g.x||f.y!==g.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:i})),{cameraAnimation:_=>_.fitScreenCoordinates(f,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new c.k(i,{originalEvent:u}))}}function Yi(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const u={};for(let f=0;f<y.length;f++)u[y[f].identifier]=i[f];return u}class hs{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){const _=new c.P(0,0);for(const S of g)_._add(S);return _.div(g.length)}(u),this.touches=Yi(f,u)))}touchmove(i,u,f){if(this.aborted||!this.centroid)return;const g=Yi(f,u);for(const _ in this.touches){const S=g[_];(!S||S.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(i,u,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class fu{constructor(i){this.singleTap=new hs(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,f){this.singleTap.touchstart(i,u,f)}touchmove(i,u,f){this.singleTap.touchmove(i,u,f)}touchend(i,u,f){const g=this.singleTap.touchend(i,u,f);if(g){const _=i.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(g)<30;if(_&&S||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class ds{constructor(i){this._tr=new us(i),this._zoomIn=new fu({numTouches:1,numTaps:2}),this._zoomOut=new fu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,f){this._zoomIn.touchstart(i,u,f),this._zoomOut.touchstart(i,u,f)}touchmove(i,u,f){this._zoomIn.touchmove(i,u,f),this._zoomOut.touchmove(i,u,f)}touchend(i,u,f){const g=this._zoomIn.touchend(i,u,f),_=this._zoomOut.touchend(i,u,f),S=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(g)},{originalEvent:i})}):_?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(_)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fs{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const u=this._moveFunction(...i);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(i,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,u){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=u.length?u[0]:u;return!this._moved&&g.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(f,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&k.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const H0={0:1,2:2};class cd{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const u=k.mouseButton(i);this._eventButton=u}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(u,f){const g=H0[f];return u.buttons===void 0||(u.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return k.mouseButton(i)===this._eventButton}}class em{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const pu=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(i){i.preventDefault()}},ol=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:u=.8})=>{const f=new cd({checkCorrectEvent:g=>k.mouseButton(g)===0&&g.ctrlKey||k.mouseButton(g)===2});return new fs({clickTolerance:i,move:(g,_)=>({bearingDelta:(_.x-g.x)*u}),moveStateManager:f,enable:y,assignEvents:pu})},ps=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:u=-.5})=>{const f=new cd({checkCorrectEvent:g=>k.mouseButton(g)===0&&g.ctrlKey||k.mouseButton(g)===2});return new fs({clickTolerance:i,move:(g,_)=>({pitchDelta:(_.y-g.y)*u}),moveStateManager:f,enable:y,assignEvents:pu})};class ct{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,f){return this._calculateTransform(i,u,f)}touchmove(i,u,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,f)}touchend(i,u,f){this._calculateTransform(i,u,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,f){f.length>0&&(this._active=!0);const g=Yi(f,u),_=new c.P(0,0),S=new c.P(0,0);let C=0;for(const P in g){const z=g[P],L=this._touches[P];L&&(_._add(z),S._add(z.sub(L)),C++,g[P]=z)}if(this._touches=g,C<this._minTouches||!S.mag())return;const E=S.div(C);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(C),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mu{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,f){if(!this._firstTwoTouches)return;i.preventDefault();const[g,_]=this._firstTwoTouches,S=Gs(f,u,g),C=Gs(f,u,_);if(!S||!C)return;const E=this._aroundCenter?null:S.add(C).div(2);return this._move([S,C],E,i)}touchend(i,u,f){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,S=Gs(f,u,g),C=Gs(f,u,_);S&&C||(this._active&&k.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Gs(y,i,u){for(let f=0;f<y.length;f++)if(y[f].identifier===u)return i[f]}function sl(y,i){return Math.log(y/i)/Math.LN2}class tm extends mu{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(sl(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:sl(this._distance,f),pinchAround:u}}}function nt(y,i){return 180*y.angleWith(i)/Math.PI}class ud extends mu{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const f=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:nt(this._vector,f),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,f=nt(i,this._startVector);return Math.abs(f)<u}}function hd(y){return Math.abs(y.y)>Math.abs(y.x)}class q0 extends mu{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,f){super.touchstart(i,u,f),this._currentTouchCount=f.length}_start(i){this._lastPoints=i,hd(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),_=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,f.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,f){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,_=u.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const S=i.y>0==u.y>0;return hd(i)&&hd(u)&&S}}const dd={panStep:100,bearingStep:15,pitchStep:10};class rm{constructor(i){this._tr=new us(i);const u=dd;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,f=0,g=0,_=0,S=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),_=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),_=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),S=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:C=>{const E=this._tr;C.easeTo({duration:300,easeId:"keyboardHandler",easing:nm,zoom:u?Math.round(E.zoom)+u*(i.shiftKey?2:1):E.zoom,bearing:E.bearing+f*this._bearingStep,pitch:E.pitch+g*this._pitchStep,offset:[-_*this._panStep,-S*this._panStep],center:E.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function nm(y){return y*(2-y)}const im=4.000244140625;class W0{constructor(i,u){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=i,this._tr=new us(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=c.h.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%im==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=k.mousePos(this._el,i),f=this._tr;this._around=c.L.convert(this._aroundCenter?f.center:f.unproject(u)),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const C=this._type==="wheel"&&Math.abs(this._delta)>im?this._wheelZoomRate:this._defaultZoomRate;let E=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&E!==0&&(E=1/E);const P=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(P*E))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,f=this._startZoom,g=this._easing;let _,S=!1;if(this._type==="wheel"&&f&&g){const C=Math.min((c.h.now()-this._lastWheelEventTime)/200,1),E=g(C);_=c.B.number(f,u,E),C<1?this._frameId||(this._frameId=!0):S=!0}else _=u,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:_-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=c.bb;if(this._prevEase){const f=this._prevEase,g=(c.h.now()-f.start)/f.duration,_=f.easing(g+.01)-f.easing(g),S=.27/Math.sqrt(_*_+1e-4)*.01,C=Math.sqrt(.0729-S*S);u=c.ba(S,C,.25,1)}return this._prevEase={start:c.h.now(),duration:i,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class fd{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class pd{constructor(i){this._tr=new us(i),this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class md{constructor(){this._tap=new fu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,u,f){if(!this._swipePoint)if(this._tapTime){const g=u[0],_=i.timeStamp-this._tapTime<500,S=this._tapPoint.dist(g)<30;_&&S?f.length>0&&(this._swipePoint=g,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(i,u,f)}touchmove(i,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const g=u[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(i,u,f)}touchend(i,u,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const g=this._tap.touchend(i,u,f);g&&(this._tapTime=i.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gd{constructor(i,u,f){this._el=i,this._mousePan=u,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class di{constructor(i,u,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Hs{constructor(i,u,f,g){this._el=i,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const tc=y=>y.zoom||y.drag||y.pitch||y.rotate;class yd extends c.k{}function rc(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class vd{constructor(i,u){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=g.type==="renderFrame"?void 0:g,C={needsRenderFrame:!1},E={},P={},z=g.touches,L=z?this._getMapTouches(z):void 0,V=L?k.touchPos(this._el,L):k.mousePos(this._el,g);for(const{handlerName:ne,handler:K,allowed:ve}of this._handlers){if(!K.isEnabled())continue;let ke;this._blockedByActive(P,ve,ne)?K.reset():K[_||g.type]&&(ke=K[_||g.type](g,V,L),this.mergeHandlerResult(C,E,ke,ne,S),ke&&ke.needsRenderFrame&&this._triggerRenderFrame()),(ke||K.isActive())&&(P[ne]=K)}const J={};for(const ne in this._previousActiveHandlers)P[ne]||(J[ne]=S);this._previousActiveHandlers=P,(Object.keys(J).length||rc(C))&&(this._changes.push([C,E,J]),this._triggerRenderFrame()),(Object.keys(P).length||rc(C))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Y}=C;Y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Y(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Kp(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,S]of this._listeners)k.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[i,u,f]of this._listeners)k.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new Yp(u,i));const g=u.boxZoom=new Qp(u,i);this._add("boxZoom",g),i.interactive&&i.boxZoom&&g.enable();const _=new ds(u),S=new pd(u);u.doubleClickZoom=new fd(S,_),this._add("tapZoom",_),this._add("clickZoom",S),i.interactive&&i.doubleClickZoom&&u.doubleClickZoom.enable();const C=new md;this._add("tapDragZoom",C);const E=u.touchPitch=new q0(u);this._add("touchPitch",E),i.interactive&&i.touchPitch&&u.touchPitch.enable(i.touchPitch);const P=ol(i),z=ps(i);u.dragRotate=new di(i,P,z),this._add("mouseRotate",P,["mousePitch"]),this._add("mousePitch",z,["mouseRotate"]),i.interactive&&i.dragRotate&&u.dragRotate.enable();const L=(({enable:ve,clickTolerance:ke})=>{const le=new cd({checkCorrectEvent:_e=>k.mouseButton(_e)===0&&!_e.ctrlKey});return new fs({clickTolerance:ke,move:(_e,Ee)=>({around:Ee,panDelta:Ee.sub(_e)}),activateOnStart:!0,moveStateManager:le,enable:ve,assignEvents:pu})})(i),V=new ct(i,u);u.dragPan=new gd(f,L,V),this._add("mousePan",L),this._add("touchPan",V,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&u.dragPan.enable(i.dragPan);const J=new ud,Y=new tm;u.touchZoomRotate=new Hs(f,Y,J,C),this._add("touchRotate",J,["touchPan","touchZoom"]),this._add("touchZoom",Y,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&u.touchZoomRotate.enable(i.touchZoomRotate);const ne=u.scrollZoom=new W0(u,()=>this._triggerRenderFrame());this._add("scrollZoom",ne,["mousePan"]),i.interactive&&i.scrollZoom&&u.scrollZoom.enable(i.scrollZoom);const K=u.keyboard=new rm(u);this._add("keyboard",K),i.interactive&&i.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Jp(u))}_add(i,u,f){this._handlers.push({handlerName:i,handler:u,allowed:f}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!tc(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,u,f){for(const g in i)if(g!==f&&(!u||u.indexOf(g)<0))return!0;return!1}_getMapTouches(i){const u=[];for(const f of i)this._el.contains(f.target)&&u.push(f);return u}mergeHandlerResult(i,u,f,g,_){if(!f)return;c.e(i,f);const S={handlerName:g,originalEvent:f.originalEvent||_};f.zoomDelta!==void 0&&(u.zoom=S),f.panDelta!==void 0&&(u.drag=S),f.pitchDelta!==void 0&&(u.pitch=S),f.bearingDelta!==void 0&&(u.rotate=S)}_applyChanges(){const i={},u={},f={};for(const[g,_,S]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new c.P(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),c.e(u,_),c.e(f,S);this._updateMapTransform(i,u,f),this._changes=[]}_updateMapTransform(i,u,f){const g=this._map,_=g._getTransformForUpdate(),S=g.terrain;if(!(rc(i)||S&&this._terrainMovement))return this._fireEvents(u,f,!0);let{panDelta:C,zoomDelta:E,bearingDelta:P,pitchDelta:z,around:L,pinchAround:V}=i;V!==void 0&&(L=V),g._stop(!0),L=L||g.transform.centerPoint;const J=_.pointLocation(C?L.sub(C):L);P&&(_.bearing+=P),z&&(_.pitch+=z),E&&(_.zoom+=E),S?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(C)):_.setLocationAtPoint(J,L):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(J,L),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(g.terrain)})):_.setLocationAtPoint(J,L),g._applyUpdatedTransform(_),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,f,!0)}_fireEvents(i,u,f){const g=tc(this._eventsInProgress),_=tc(i),S={};for(const z in i){const{originalEvent:L}=i[z];this._eventsInProgress[z]||(S[`${z}start`]=L),this._eventsInProgress[z]=i[z]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const z in S)this._fireEvent(z,S[z]);_&&this._fireEvent("move",_.originalEvent);for(const z in i){const{originalEvent:L}=i[z];this._fireEvent(z,L)}const C={};let E;for(const z in this._eventsInProgress){const{handlerName:L,originalEvent:V}=this._eventsInProgress[z];this._handlersById[L].isActive()||(delete this._eventsInProgress[z],E=u[L]||V,C[`${z}end`]=E)}for(const z in C)this._fireEvent(z,C[z]);const P=tc(this._eventsInProgress);if(f&&(g||_)&&!P){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),L=V=>V!==0&&-this._bearingSnap<V&&V<this._bearingSnap;!z||!z.essential&&c.h.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:E})),L(this._map.getBearing())&&this._map.resetNorth()):(L(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:E})),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new c.k(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new yd("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class om extends c.E{constructor(i,u){super(),this._renderFrameCallback=()=>{const f=Math.min((c.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,f){return i=c.P.convert(i).mult(-1),this.panTo(this.transform.center,c.e({offset:i},u),f)}panTo(i,u,f){return this.easeTo(c.e({center:i},u),f)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,f){return this.easeTo(c.e({zoom:i},u),f)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,f){return this.easeTo(c.e({bearing:i},u),f)}resetNorth(i,u){return this.rotateTo(0,c.e({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=Dt.convert(i);const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,u)}_cameraForBoxAndBearing(i,u,f,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=c.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const Ee=g.padding;g.padding={top:Ee,bottom:Ee,right:Ee,left:Ee}}g.padding=c.e(_,g.padding);const S=this.transform,C=S.padding,E=S.project(c.L.convert(i)),P=S.project(c.L.convert(u)),z=E.rotate(-f*Math.PI/180),L=P.rotate(-f*Math.PI/180),V=new c.P(Math.max(z.x,L.x),Math.max(z.y,L.y)),J=new c.P(Math.min(z.x,L.x),Math.min(z.y,L.y)),Y=V.sub(J),ne=(S.width-(C.left+C.right+g.padding.left+g.padding.right))/Y.x,K=(S.height-(C.top+C.bottom+g.padding.top+g.padding.bottom))/Y.y;if(K<0||ne<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ve=Math.min(S.scaleZoom(S.scale*Math.min(ne,K)),g.maxZoom),ke=c.P.convert(g.offset),le=new c.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(f*Math.PI/180),_e=ke.add(le).mult(S.scale/S.zoomScale(ve));return{center:S.unproject(E.add(P).div(2).sub(_e)),zoom:ve,bearing:f}}fitBounds(i,u,f){return this._fitInternal(this.cameraForBounds(i,u),u,f)}fitScreenCoordinates(i,u,f,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(i)),this.transform.pointLocation(c.P.convert(u)),f,g),g,_)}_fitInternal(i,u,f){return i?(delete(u=c.e(i,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(i,u){this.stop();const f=this._getTransformForUpdate();let g=!1,_=!1,S=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(g=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=c.L.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(_=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(S=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),this._applyUpdatedTransform(f),this.fire(new c.k("movestart",u)).fire(new c.k("move",u)),g&&this.fire(new c.k("zoomstart",u)).fire(new c.k("zoom",u)).fire(new c.k("zoomend",u)),_&&this.fire(new c.k("rotatestart",u)).fire(new c.k("rotate",u)).fire(new c.k("rotateend",u)),S&&this.fire(new c.k("pitchstart",u)).fire(new c.k("pitch",u)).fire(new c.k("pitchend",u)),this.fire(new c.k("moveend",u))}calculateCameraOptionsFromTo(i,u,f,g=0){const _=c.U.fromLngLat(i,u),S=c.U.fromLngLat(f,g),C=S.x-_.x,E=S.y-_.y,P=S.z-_.z,z=Math.hypot(C,E,P);if(z===0)throw new Error("Can't calculate camera options with same From and To");const L=Math.hypot(C,E),V=this.transform.scaleZoom(this.transform.cameraToCenterDistance/z/this.transform.tileSize),J=180*Math.atan2(C,-E)/Math.PI;let Y=180*Math.acos(L/z)/Math.PI;return Y=P<0?90-Y:90+Y,{center:S.toLngLat(),zoom:V,pitch:Y,bearing:J}}easeTo(i,u){this._stop(!1,i.easeId),((i=c.e({offset:[0,0],duration:500,easing:c.bb},i)).animate===!1||!i.essential&&c.h.prefersReducedMotion)&&(i.duration=0);const f=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),S=this.getPitch(),C=this.getPadding(),E="zoom"in i?+i.zoom:g,P="bearing"in i?this._normalizeBearing(i.bearing,_):_,z="pitch"in i?+i.pitch:S,L="padding"in i?i.padding:f.padding,V=c.P.convert(i.offset);let J=f.centerPoint.add(V);const Y=f.pointLocation(J),ne=c.L.convert(i.center||Y);this._normalizeCenter(ne);const K=f.project(Y),ve=f.project(ne).sub(K),ke=f.zoomScale(E-g);let le,_e;i.around&&(le=c.L.convert(i.around),_e=f.locationPoint(le));const Ee={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||E!==g,this._rotating=this._rotating||_!==P,this._pitching=this._pitching||z!==S,this._padding=!f.isPaddingEqual(L),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,Ee),this.terrain&&this._prepareElevation(ne),this._ease(Ie=>{if(this._zooming&&(f.zoom=c.B.number(g,E,Ie)),this._rotating&&(f.bearing=c.B.number(_,P,Ie)),this._pitching&&(f.pitch=c.B.number(S,z,Ie)),this._padding&&(f.interpolatePadding(C,L,Ie),J=f.centerPoint.add(V)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ie),le)f.setLocationAtPoint(le,_e);else{const De=f.zoomScale(f.zoom-g),je=E>g?Math.min(2,ke):Math.max(.5,ke),Ne=Math.pow(je,1-Ie),qe=f.unproject(K.add(ve.mult(Ie*Ne)).mult(De));f.setLocationAtPoint(f.renderWorldCopies?qe.wrap():qe,J)}this._applyUpdatedTransform(f),this._fireMoveEvents(u)},Ie=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,Ie)},i),this}_prepareEase(i,u,f={}){this._moving=!0,u||f.moving||this.fire(new c.k("movestart",i)),this._zooming&&!f.zooming&&this.fire(new c.k("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new c.k("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new c.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&u!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(f-(u-(f*i+this._elevationStart))/(1-i)),this._elevationTarget=u}this.transform.elevation=c.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const u=i.clone(),{center:f,zoom:g,pitch:_,bearing:S,elevation:C}=this.transformCameraUpdate(u);f&&(u.center=f),g!==void 0&&(u.zoom=g),_!==void 0&&(u.pitch=_),S!==void 0&&(u.bearing=S),C!==void 0&&(u.elevation=C),this.transform.apply(u)}_fireMoveEvents(i){this.fire(new c.k("move",i)),this._zooming&&this.fire(new c.k("zoom",i)),this._rotating&&this.fire(new c.k("rotate",i)),this._pitching&&this.fire(new c.k("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const f=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new c.k("zoomend",i)),g&&this.fire(new c.k("rotateend",i)),_&&this.fire(new c.k("pitchend",i)),this.fire(new c.k("moveend",i))}flyTo(i,u){if(!i.essential&&c.h.prefersReducedMotion){const pt=c.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(pt,u)}this.stop(),i=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.bb},i);const f=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),S=this.getPitch(),C=this.getPadding(),E="zoom"in i?c.ad(+i.zoom,f.minZoom,f.maxZoom):g,P="bearing"in i?this._normalizeBearing(i.bearing,_):_,z="pitch"in i?+i.pitch:S,L="padding"in i?i.padding:f.padding,V=f.zoomScale(E-g),J=c.P.convert(i.offset);let Y=f.centerPoint.add(J);const ne=f.pointLocation(Y),K=c.L.convert(i.center||ne);this._normalizeCenter(K);const ve=f.project(ne),ke=f.project(K).sub(ve);let le=i.curve;const _e=Math.max(f.width,f.height),Ee=_e/V,Ie=ke.mag();if("minZoom"in i){const pt=c.ad(Math.min(i.minZoom,g,E),f.minZoom,f.maxZoom),hr=_e/f.zoomScale(pt-g);le=Math.sqrt(hr/Ie*2)}const De=le*le;function je(pt){const hr=(Ee*Ee-_e*_e+(pt?-1:1)*De*De*Ie*Ie)/(2*(pt?Ee:_e)*De*Ie);return Math.log(Math.sqrt(hr*hr+1)-hr)}function Ne(pt){return(Math.exp(pt)-Math.exp(-pt))/2}function qe(pt){return(Math.exp(pt)+Math.exp(-pt))/2}const dt=je(!1);let Gt=function(pt){return qe(dt)/qe(dt+le*pt)},et=function(pt){return _e*((qe(dt)*(Ne(hr=dt+le*pt)/qe(hr))-Ne(dt))/De)/Ie;var hr},Tt=(je(!0)-dt)/le;if(Math.abs(Ie)<1e-6||!isFinite(Tt)){if(Math.abs(_e-Ee)<1e-6)return this.easeTo(i,u);const pt=Ee<_e?-1:1;Tt=Math.abs(Math.log(Ee/_e))/le,et=function(){return 0},Gt=function(hr){return Math.exp(pt*le*hr)}}return i.duration="duration"in i?+i.duration:1e3*Tt/("screenSpeed"in i?+i.screenSpeed/le:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=_!==P,this._pitching=z!==S,this._padding=!f.isPaddingEqual(L),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(K),this._ease(pt=>{const hr=pt*Tt,Vt=1/Gt(hr);f.zoom=pt===1?E:g+f.scaleZoom(Vt),this._rotating&&(f.bearing=c.B.number(_,P,pt)),this._pitching&&(f.pitch=c.B.number(S,z,pt)),this._padding&&(f.interpolatePadding(C,L,pt),Y=f.centerPoint.add(J)),this.terrain&&!i.freezeElevation&&this._updateElevation(pt);const $t=pt===1?K:f.unproject(ve.add(ke.mult(et(hr))).mult(Vt));f.setLocationAtPoint(f.renderWorldCopies?$t.wrap():$t,Y),this._applyUpdatedTransform(f),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}if(!i){const f=this.handlers;f&&f.stop(!1)}return this}_ease(i,u,f){f.animate===!1||f.duration===0?(i(1),u()):(this._easeStart=c.h.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,u){i=c.b5(i,-180,180);const f=Math.abs(i-u);return Math.abs(i-360-u)<f&&(i-=360),Math.abs(i+360-u)<f&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const f=i.lng-u.center.lng;i.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(c.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class Li{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=k.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=k.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const f=this._map._getUIString(`AttributionControl.${u}`);i.title=f,i.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const _=u[g];if(_.used||_.usedForTerrain){const S=_.getSource();S.attribution&&i.indexOf(S.attribution)<0&&i.push(S.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,_)=>g.length-_.length),i=i.filter((g,_)=>{for(let S=_+1;S<i.length;S++)if(i[S].indexOf(g)>=0)return!1;return!0});const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Cr{constructor(i={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const f=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=k.create("div","maplibregl-ctrl");const u=k.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){k.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class gu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const g of f)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const _d={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var sm=c.Q([{name:"a_pos3d",type:"Int16",components:3}]);class am extends c.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];const f={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))f[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),c.aS(g.posMatrix,0,c.N,0,c.N,0,1),this._tiles[g.key]=new Cn(g,this.tileSize));for(const g in this._tiles)f[g]||delete this._tiles[g]}freeRtt(i){for(const u in this._tiles){const f=this._tiles[u];(!i||f.tileID.equals(i)||f.tileID.isChildOf(i)||i.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const f of this._renderableTilesKeys){const g=this._tiles[f].tileID;if(g.canonical.equals(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16),c.aS(_.posMatrix,0,c.N,0,c.N,0,1),u[f]=_}else if(g.canonical.isChildOf(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const S=g.canonical.z-i.canonical.z,C=g.canonical.x-(g.canonical.x>>S<<S),E=g.canonical.y-(g.canonical.y>>S<<S),P=c.N>>S;c.aS(_.posMatrix,0,P,0,P,0,1),c.$(_.posMatrix,_.posMatrix,[-C*P,-E*P,0]),u[f]=_}else if(i.canonical.isChildOf(g.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const S=i.canonical.z-g.canonical.z,C=i.canonical.x-(i.canonical.x>>S<<S),E=i.canonical.y-(i.canonical.y>>S<<S),P=c.N>>S;c.aS(_.posMatrix,0,c.N,0,c.N,0,1),c.$(_.posMatrix,_.posMatrix,[C*P,E*P,0]),c.a0(_.posMatrix,_.posMatrix,[1/2**S,1/2**S,0]),u[f]=_}}return u}getSourceTile(i,u){const f=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>f.maxzoom&&(g=f.maxzoom),g<f.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!_||!_.dem)&&u)for(;g>=f.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(i.scaledTo(g--).key);return _}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=i)}}class lm{constructor(i,u,f){this.painter=i,this.sourceCache=new am(u),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,u,f,g=c.N){var _;if(!(u>=0&&u<g&&f>=0&&f<g))return 0;const S=this.getTerrainData(i),C=(_=S.tile)===null||_===void 0?void 0:_.dem;if(!C)return 0;const E=function(Y,ne,K){var ve=ne[0],ke=ne[1];return Y[0]=K[0]*ve+K[4]*ke+K[12],Y[1]=K[1]*ve+K[5]*ke+K[13],Y}([],[u/g*c.N,f/g*c.N],S.u_terrain_matrix),P=[E[0]*C.dim,E[1]*C.dim],z=Math.floor(P[0]),L=Math.floor(P[1]),V=P[0]-z,J=P[1]-L;return C.get(z,L)*(1-V)*(1-J)+C.get(z+1,L)*V*(1-J)+C.get(z,L+1)*(1-V)*J+C.get(z+1,L+1)*V*J}getElevationForLngLatZoom(i,u){const{tileID:f,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(i,u);return this.getElevation(f,g%c.N,_%c.N,c.N)}getElevation(i,u,f,g=c.N){return this.getDEMElevation(i,u,f,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,_=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ae(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ae(g,new c.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ao([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new Ae(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const f=u&&u+u.tileID.key+i.key;if(f&&!this._demMatrixCache[f]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?_=i.canonical.z-g:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=i.canonical.x-(i.canonical.x>>_<<_),C=i.canonical.y-(i.canonical.y>>_<<_),E=c.bc(new Float64Array(16),[1/(c.N<<_),1/(c.N<<_),0]);c.$(E,E,[S*c.N,C*c.N,0]),this._demMatrixCache[i.key]={matrix:E,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(i){const u=this.painter,f=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ae(u.context,{width:f,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ae(u.context,{width:f,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(f,g,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,f,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,S=0;_<this._coordsTextureSize;_++)for(let C=0;C<this._coordsTextureSize;C++,S+=4)u[S+0]=255&C,u[S+1]=255&_,u[S+2]=C>>8<<4|_>>8,u[S+3]=0;const f=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new Ae(i,f,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){const u=new Uint8Array(4),f=this.painter.context,g=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),f.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),S=u[1]+((15&u[2])<<8),C=this.coordsIndex[255-u[3]],E=C&&this.sourceCache.getTileByID(C);if(!E)return null;const P=this._coordsTextureSize,z=(1<<E.tileID.canonical.z)*P;return new c.U(this._allowMercatorOverflow(i,(E.tileID.canonical.x*P+_)/z),(E.tileID.canonical.y*P+S)/z,this.getElevation(E.tileID,_,S,P))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,u=new c.bd,f=new c.b0,g=this.meshSize,_=c.N/g,S=g*g;for(let L=0;L<=g;L++)for(let V=0;V<=g;V++)u.emplaceBack(V*_,L*_,0);for(let L=0;L<S;L+=g+1)for(let V=0;V<g;V++)f.emplaceBack(V+L,g+V+L+1,g+V+L+2),f.emplaceBack(V+L,g+V+L+2,V+L+1);const C=u.length,E=C+2*(g+1);for(const L of[0,1])for(let V=0;V<=g;V++)for(const J of[0,1])u.emplaceBack(V*_,L*c.N,J);for(let L=0;L<2*g;L+=2)f.emplaceBack(E+L,E+L+1,E+L+3),f.emplaceBack(E+L,E+L+3,E+L+2),f.emplaceBack(C+L,C+L+3,C+L+1),f.emplaceBack(C+L,C+L+2,C+L+3);const P=u.length,z=P+2*(g+1);for(const L of[0,1])for(let V=0;V<=g;V++)for(const J of[0,1])u.emplaceBack(L*c.N,V*_,J);for(let L=0;L<2*g;L+=2)f.emplaceBack(P+L,P+L+1,P+L+3),f.emplaceBack(P+L,P+L+3,P+L+2),f.emplaceBack(z+L,z+L+3,z+L+1),f.emplaceBack(z+L,z+L+2,z+L+3);return this._mesh={indexBuffer:i.createIndexBuffer(f),vertexBuffer:i.createVertexBuffer(u,sm.members),segments:c.S.simpleSegment(0,0,u.length,f.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*c.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,u){var f;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(i,u);return(f=this.getMinMaxElevation(g).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,f={minElevation:null,maxElevation:null};return u&&u.dem&&(f.minElevation=u.dem.min*this.exaggeration,f.maxElevation=u.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(i,u){const f=c.U.fromLngLat(i.wrap()),g=(1<<u)*c.N,_=f.x*g,S=f.y*g,C=Math.floor(_/c.N),E=Math.floor(S/c.N);return{tileID:new c.O(u,0,u,C,E),mercatorX:_,mercatorY:S}}_allowMercatorOverflow(i,u){const f=i.x<this.painter.width/2;let g=c.bf(u);const _=this.painter.transform.center.lng;return f&&Math.sign(g)>0&&Math.sign(_)<0||!f&&Math.sign(g)<0&&Math.sign(_)>0?(g=360*Math.sign(_)+g,c.G(g)):u}}class Z0{constructor(i,u,f){this._context=i,this._size=u,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new Ae(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(f.texture),{id:i,fbo:u,texture:f,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>i.id!==u),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const Qn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class yu{constructor(i,u){this.painter=i,this.terrain=u,this.pool=new Z0(i.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(f=>!i._layers[f].isHidden(u)),this._coordsDescendingInv={};for(const f in i.sourceCaches){this._coordsDescendingInv[f]={};const g=i.sourceCaches[f].getVisibleCoordinates();for(const _ of g){const S=this.terrain.sourceCache.getTerrainCoords(_);for(const C in S)this._coordsDescendingInv[f][C]||(this._coordsDescendingInv[f][C]=[]),this._coordsDescendingInv[f][C].push(S[C])}}this._coordsDescendingInvStr={};for(const f of i._order){const g=i._layers[f],_=g.source;if(Qn[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const S in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][S]=this._coordsDescendingInv[_][S].map(C=>C.key).sort().join()}}for(const f of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][f.tileID.key];_&&_!==f.rttCoords[g]&&(f.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const u=i.type,f=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(Qn[u]&&(this._prevType&&Qn[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(Qn[this._prevType]||Qn[u]&&g){this._prevType=u;const _=this._stacks.length-1,S=this._stacks[_]||[];for(const C of this._renderableTiles){if(this.pool.isFull()&&(Nr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(C),C.rtt[_]){const P=this.pool.getObjectForId(C.rtt[_].id);if(P.stamp===C.rtt[_].stamp){this.pool.useObject(P);continue}}const E=this.pool.getOrCreateFreeObject();this.pool.useObject(E),this.pool.stampObject(E),C.rtt[_]={id:E.id,stamp:E.stamp},f.context.bindFramebuffer.set(E.fbo.framebuffer),f.context.clear({color:c.aT.transparent,stencil:0}),f.currentStencilSource=void 0;for(let P=0;P<S.length;P++){const z=f.style._layers[S[P]],L=z.source?this._coordsDescendingInv[z.source][C.tileID.key]:[C.tileID];f.context.viewport.set([0,0,E.fbo.width,E.fbo.height]),f._renderTileClippingMasks(z,L),f.renderLayer(f,f.style.sourceCaches[z.source],z,L),z.source&&(C.rttCoords[z.source]=this._coordsDescendingInvStr[z.source][C.tileID.key])}}return Nr(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Qn[u]}return!1}}const vt=b,kt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},nc=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},xd={showCompass:!0,showZoom:!0,visualizePitch:!1};class bd{constructor(i,u,f=!1){this.mousedown=S=>{this.startMouse(c.e({},S,{ctrlKey:!0,preventDefault:()=>S.preventDefault()}),k.mousePos(this.element,S)),k.addEventListener(window,"mousemove",this.mousemove),k.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=S=>{this.moveMouse(S,k.mousePos(this.element,S))},this.mouseup=S=>{this.mouseRotate.dragEnd(S),this.mousePitch&&this.mousePitch.dragEnd(S),this.offTemp()},this.touchstart=S=>{S.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,S.targetTouches)[0],this.startTouch(S,this._startPos),k.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.addEventListener(window,"touchend",this.touchend))},this.touchmove=S=>{S.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,S.targetTouches)[0],this.moveTouch(S,this._lastPos))},this.touchend=S=>{S.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),_=i.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=ol({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:S,clickTolerance:C,bearingDegreesPerPixelMoved:E=.8})=>{const P=new em;return new fs({clickTolerance:C,move:(z,L)=>({bearingDelta:(L.x-z.x)*E}),moveStateManager:P,enable:S,assignEvents:nc})})({clickTolerance:g,enable:!0}),this.map=i,f&&(this.mousePitch=ps({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:S,clickTolerance:C,pitchDegreesPerPixelMoved:E=-.5})=>{const P=new em;return new fs({clickTolerance:C,move:(z,L)=>({pitchDelta:(L.y-z.y)*E}),moveStateManager:P,enable:S,assignEvents:nc})})({clickTolerance:_,enable:!0})),k.addEventListener(u,"mousedown",this.mousedown),k.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(u,"touchcancel",this.reset)}startMouse(i,u){this.mouseRotate.dragStart(i,u),this.mousePitch&&this.mousePitch.dragStart(i,u),k.disableDrag()}startTouch(i,u){this.touchRotate.dragStart(i,u),this.touchPitch&&this.touchPitch.dragStart(i,u),k.disableDrag()}moveMouse(i,u){const f=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,u)||{};if(g&&f.setBearing(f.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(i,u)||{};_&&f.setPitch(f.getPitch()+_)}}moveTouch(i,u){const f=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,u)||{};if(g&&f.setBearing(f.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(i,u)||{};_&&f.setPitch(f.getPitch()+_)}}off(){const i=this.element;k.removeEventListener(i,"mousedown",this.mousedown),k.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.removeEventListener(window,"touchend",this.touchend),k.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){k.enableDrag(),k.removeEventListener(window,"mousemove",this.mousemove),k.removeEventListener(window,"mouseup",this.mouseup),k.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.removeEventListener(window,"touchend",this.touchend)}}let Xr;function wd(y,i,u){if(y=new c.L(y.lng,y.lat),i){const f=new c.L(y.lng-360,y.lat),g=new c.L(y.lng+360,y.lat),_=u.locationPoint(y).distSqr(i);u.locationPoint(f).distSqr(i)<_?y=f:u.locationPoint(g).distSqr(i)<_&&(y=g)}for(;Math.abs(y.lng-u.center.lng)>180;){const f=u.locationPoint(y);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const Ji={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function cm(y,i,u){const f=y.classList;for(const g in Ji)f.remove(`maplibregl-${u}-anchor-${g}`);f.add(`maplibregl-${u}-anchor-${i}`)}class ya extends c.E{constructor(i){if(super(),this._onKeyPress=u=>{const f=u.code,g=u.charCode||u.keyCode;f!=="Space"&&f!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=u=>{const f=u.originalEvent.target,g=this._element;this._popup&&(f===g||g.contains(f))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!f)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=wd(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,`${Ji[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const S=this._map.unproject(this._pos),C=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=S.distanceTo(this._lngLat)>20*C?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=c.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div"),this._element.setAttribute("aria-label","Map marker");const u=k.createNS("http://www.w3.org/2000/svg","svg"),f=41,g=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${f}px`),u.setAttributeNS(null,"width",`${g}px`),u.setAttributeNS(null,"viewBox",`0 0 ${g} ${f}`);const _=k.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const S=k.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const C=k.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"transform","translate(3.0, 29.0)"),C.setAttributeNS(null,"fill","#000000");const E=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ve of E){const ke=k.createNS("http://www.w3.org/2000/svg","ellipse");ke.setAttributeNS(null,"opacity","0.04"),ke.setAttributeNS(null,"cx","10.5"),ke.setAttributeNS(null,"cy","5.80029008"),ke.setAttributeNS(null,"rx",ve.rx),ke.setAttributeNS(null,"ry",ve.ry),C.appendChild(ke)}const P=k.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"fill",this._color);const z=k.createNS("http://www.w3.org/2000/svg","path");z.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),P.appendChild(z);const L=k.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"opacity","0.25"),L.setAttributeNS(null,"fill","#000000");const V=k.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),L.appendChild(V);const J=k.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(6.0, 7.0)"),J.setAttributeNS(null,"fill","#FFFFFF");const Y=k.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ne=k.createNS("http://www.w3.org/2000/svg","circle");ne.setAttributeNS(null,"fill","#000000"),ne.setAttributeNS(null,"opacity","0.25"),ne.setAttributeNS(null,"cx","5.5"),ne.setAttributeNS(null,"cy","5.5"),ne.setAttributeNS(null,"r","5.4999962");const K=k.createNS("http://www.w3.org/2000/svg","circle");K.setAttributeNS(null,"fill","#FFFFFF"),K.setAttributeNS(null,"cx","5.5"),K.setAttributeNS(null,"cy","5.5"),K.setAttributeNS(null,"r","5.4999962"),Y.appendChild(ne),Y.appendChild(K),S.appendChild(C),S.appendChild(P),S.appendChild(L),S.appendChild(J),S.appendChild(Y),u.appendChild(S),u.setAttributeNS(null,"height",f*this._scale+"px"),u.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(u),this._offset=c.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),cm(this._element,this._anchor,"marker"),i&&i.className)for(const u of i.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=c.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=c.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const jr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Or=0,al=!1;const ic={maxWidth:100,unit:"metric"};function oc(y,i,u){const f=u&&u.maxWidth||100,g=y._container.clientHeight/2,_=y.unproject([0,g]),S=y.unproject([f,g]),C=_.distanceTo(S);if(u&&u.unit==="imperial"){const E=3.2808*C;E>5280?va(i,f,E/5280,y._getUIString("ScaleControl.Miles")):va(i,f,E,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?va(i,f,C/1852,y._getUIString("ScaleControl.NauticalMiles")):C>=1e3?va(i,f,C/1e3,y._getUIString("ScaleControl.Kilometers")):va(i,f,C,y._getUIString("ScaleControl.Meters"))}function va(y,i,u,f){const g=function(_){const S=Math.pow(10,`${Math.floor(_)}`.length-1);let C=_/S;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(E){const P=Math.pow(10,Math.ceil(-Math.log(E)/Math.LN10));return Math.round(E*P)/P}(C),S*C}(u);y.style.width=i*(g/u)+"px",y.innerHTML=`${g}&nbsp;${f}`}const Sd={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Cd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ll(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,y),"top-left":new c.P(i,i),"top-right":new c.P(-i,i),bottom:new c.P(0,-y),"bottom-left":new c.P(i,-i),"bottom-right":new c.P(-i,-i),left:new c.P(y,0),right:new c.P(-y,0)}}if(y instanceof c.P||Array.isArray(y)){const i=c.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:c.P.convert(y.center||[0,0]),top:c.P.convert(y.top||[0,0]),"top-left":c.P.convert(y["top-left"]||[0,0]),"top-right":c.P.convert(y["top-right"]||[0,0]),bottom:c.P.convert(y.bottom||[0,0]),"bottom-left":c.P.convert(y["bottom-left"]||[0,0]),"bottom-right":c.P.convert(y["bottom-right"]||[0,0]),left:c.P.convert(y.left||[0,0]),right:c.P.convert(y.right||[0,0])}}return ll(new c.P(0,0))}const kd={extend:(y,...i)=>c.e(y,...i),run(y){y()},logToElement(y,i=!1,u="log"){const f=window.document.getElementById(u);f&&(i&&(f.innerHTML=""),f.innerHTML+=`<br>${y}`)}},Td=b;class nr{static get version(){return Td}static get workerCount(){return Ii.workerCount}static set workerCount(i){Ii.workerCount=i}static get maxParallelImageRequests(){return c.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){c.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return c.c.WORKER_URL}static set workerUrl(i){c.c.WORKER_URL=i}static addProtocol(i,u){c.c.REGISTERED_PROTOCOLS[i]=u}static removeProtocol(i){delete c.c.REGISTERED_PROTOCOLS[i]}}return nr.Map=class extends om{constructor(y){if(c.bg.mark(c.bh.create),(y=c.e({},kt,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new du(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new gu,this._controls=[],this._mapId=c.a2(),this._locale=c.e({},_d,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=de.addThrottleControl(()=>this.isMoving()),this._requestManager=new j(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const u=ga(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{i?u(f):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new vd(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Jl(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,c.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Li({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new Cr,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new c.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new c.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new c.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,u,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,u,f)}resize(y){var i;const u=this._containerDimensions(),f=u[0],g=u[1],_=this._getClampedPixelRatio(f,g);if(this._resizeCanvas(f,g,_),this.painter.resize(f,g,_),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const E=this._getClampedPixelRatio(f,g);this._resizeCanvas(f,g,E),this.painter.resize(f,g,E)}this.transform.resize(f,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(f,g);const S=!this._moving;return S&&(this.stop(),this.fire(new c.k("movestart",y)).fire(new c.k("move",y))),this.fire(new c.k("resize",y)),S&&this.fire(new c.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:u,1:f}=this._maxCanvasSize,g=this.getPixelRatio(),_=y*g,S=i*g;return Math.min(_>u?u/_:1,S>f?f/S:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Dt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(c.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(c.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,u){if(y==="mouseenter"||y==="mouseover"){let f=!1;return{layer:i,listener:u,delegates:{mousemove:_=>{const S=this.getLayer(i)?this.queryRenderedFeatures(_.point,{layers:[i]}):[];S.length?f||(f=!0,u.call(this,new zi(y,this,_.originalEvent,{features:S}))):f=!1},mouseout:()=>{f=!1}}}}if(y==="mouseleave"||y==="mouseout"){let f=!1;return{layer:i,listener:u,delegates:{mousemove:S=>{(this.getLayer(i)?this.queryRenderedFeatures(S.point,{layers:[i]}):[]).length?f=!0:f&&(f=!1,u.call(this,new zi(y,this,S.originalEvent)))},mouseout:S=>{f&&(f=!1,u.call(this,new zi(y,this,S.originalEvent)))}}}}{const f=g=>{const _=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];_.length&&(g.features=_,u.call(this,g),delete g.features)};return{layer:i,listener:u,delegates:{[y]:f}}}}on(y,i,u){if(u===void 0)return super.on(y,i);const f=this._createDelegatedListener(y,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(f);for(const g in f.delegates)this.on(g,f.delegates[g]);return this}once(y,i,u){if(u===void 0)return super.once(y,i);const f=this._createDelegatedListener(y,i,u);for(const g in f.delegates)this.once(g,f.delegates[g]);return this}off(y,i,u){return u===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(f=>{const g=this._delegatedListeners[y];for(let _=0;_<g.length;_++){const S=g[_];if(S.layer===i&&S.listener===u){for(const C in S.delegates)this.off(C,S.delegates[C]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let u;const f=y instanceof c.P||Array.isArray(y),g=f?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(f?{}:y)||{},g instanceof c.P||typeof g[0]=="number")u=[c.P.convert(g)];else{const _=c.P.convert(g[0]),S=c.P.convert(g[1]);u=[_,new c.P(S.x,_.y),S,new c.P(_.x,S.y),_]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const u=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new An(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,u):this.style.loadJSON(y,i,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new An(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,G.Style);c.f(u,(f,g)=>{f?this.fire(new c.j(f)):g&&this._updateDiff(g,i)})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(u){c.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new c.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const u in this.style._layers){const f=this.style._layers[u];f.type==="hillshade"&&f.source===y.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new lm(this.painter,i,y),this.painter.renderToTexture=new yu(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const u=y[i]._tiles;for(const f in u){const g=u[f];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(y,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,i,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,u={}){const{pixelRatio:f=1,sdf:g=!1,stretchX:_,stretchY:S,content:C}=u;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||c.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:E,height:P,data:z}=i,L=i;return this.style.addImage(y,{data:new c.R({width:E,height:P},new Uint8Array(z)),pixelRatio:f,stretchX:_,stretchY:S,content:C,sdf:g,version:0,userImage:L}),L.onAdd&&L.onAdd(this,y),this}}{const{width:E,height:P,data:z}=c.h.getImageData(i);this.style.addImage(y,{data:new c.R({width:E,height:P},z),pixelRatio:f,stretchX:_,stretchY:S,content:C,sdf:g,version:0})}}updateImage(y,i){const u=this.style.getImage(y);if(!u)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof HTMLImageElement||c.a(i)?c.h.getImageData(i):i,{width:g,height:_,data:S}=f;if(g===void 0||_===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||_!==u.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(i instanceof HTMLImageElement||c.a(i));return u.data.replace(S,C),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,i){de.getImage(this._requestManager.transformRequest(y,G.Image),i)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,u){return this.style.setLayerZoomRange(y,i,u),this._update(!0)}setFilter(y,i,u={}){return this.style.setFilter(y,i,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,u,f={}){return this.style.setPaintProperty(y,i,u,f),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,u,f={}){return this.style.setLayoutProperty(y,i,u,f),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,u,f=>{f||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,u=>{u||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=k.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=k.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),f=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],f);const g=this._controlContainer=k.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{_[S]=k.create("div",`maplibregl-ctrl-${S} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=k.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){k.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,i,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{i={requestedAttributes:y},f&&(i.statusMessage=f.statusMessage,i.type=f.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const f="Failed to initialize WebGL";throw i?(i.message=f,new Error(JSON.stringify(i))):new Error(f)}this.painter=new ma(u,this.transform),A.testSupport(u)}_onCooperativeGesture(y,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=c.h.now();this.style.zoomHistory.update(g,_);const S=new c.a8(g,{now:_,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),C=S.crossFadingFactor();C===1&&C===this._crossFadingFactor||(u=!0,this._crossFadingFactor=C),this.style.update(S)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bg.mark(c.bh.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,c.bg.mark(c.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),de.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),k.remove(this._canvasContainer),k.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),c.bg.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=c.h.frame(y=>{c.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return vt}getCameraTargetElevation(){return this.transform.elevation}},nr.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),u=i===this._map.getMaxZoom(),f=i===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,u)=>{const f=this._map._getUIString(`NavigationControl.${u}`);i.title=f,i.setAttribute("aria-label",f)},this.options=c.e({},xd,y),this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),k.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),k.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=k.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new bd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const u=k.create("button",y,this._container);return u.type="button",u.addEventListener("click",i),u}},nr.GeolocateControl=class extends c.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const u=new c.L(i.coords.longitude,i.coords.latitude),f=i.coords.accuracy,g=this._map.getBearing(),_=c.e({bearing:g},this.options.fitBoundsOptions),S=Dt.fromLngLat(u,f);this._map.fitBounds(S,_,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const u=new c.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&al)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=k.create("button","maplibregl-ctrl-geolocate",this._container),k.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ya({element:this._dotElement}),this._circleElement=k.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ya({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")))})}},this.options=c.e({},jr,y)}onAdd(y){return this._map=y,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,u=!1){Xr===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{Xr=f.state!=="denied",i(Xr)}).catch(()=>{Xr=!!window.navigator.geolocation,i(Xr)}):(Xr=!!window.navigator.geolocation,i(Xr)):i(Xr)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Or=0,al=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),u=y.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),u=y.getNorthEast(),f=i.distanceTo(u),g=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Or--,al=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Or++,Or>1?(y={maximumAge:6e5,timeout:0},al=!0):(y=this.options.positionOptions,al=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},nr.AttributionControl=Li,nr.LogoControl=Cr,nr.ScaleControl=class{constructor(y){this._onMove=()=>{oc(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,oc(this._map,this._container,this.options)},this.options=c.e({},ic,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},nr.FullscreenControl=class extends c.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){k.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=k.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);k.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},nr.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=k.create("button","maplibregl-ctrl-terrain",this._container),k.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){k.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},nr.Popup=class extends c.E{constructor(y){super(),this.remove=()=>(this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=k.create("div","maplibregl-popup",this._map.getContainer()),this._tip=k.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const S of this.options.className.split(" "))this._container.classList.add(S);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=wd(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const u=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let f=this.options.anchor;const g=ll(this.options.offset);if(!f){const S=this._container.offsetWidth,C=this._container.offsetHeight;let E;E=u.y+g.bottom.y<C?["top"]:u.y>this._map.transform.height-C?["bottom"]:[],u.x<S/2?E.push("left"):u.x>this._map.transform.width-S/2&&E.push("right"),f=E.length===0?"bottom":E.join("-")}const _=u.add(g[f]).round();k.setTransform(this._container,`${Ji[f]} translate(${_.x}px,${_.y}px)`),cm(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Sd),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=c.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=y;f=u.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=k.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=k.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(Cd);y&&y.focus()}},nr.Marker=ya,nr.Style=An,nr.LngLat=c.L,nr.LngLatBounds=Dt,nr.Point=c.P,nr.MercatorCoordinate=c.U,nr.Evented=c.E,nr.AJAXError=c.bi,nr.config=c.c,nr.CanvasSource=rn,nr.GeoJSONSource=at,nr.ImageSource=Rt,nr.RasterDEMTileSource=Pt,nr.RasterTileSource=Ct,nr.VectorTileSource=_r,nr.VideoSource=or,nr.setRTLTextPlugin=c.bj,nr.getRTLTextPluginStatus=c.bk,nr.prewarm=function(){ua().acquire(Zt)},nr.clearPrewarmedResources=function(){const y=Gi;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Zt),Gi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},kd.extend(nr,{isSafari:c.ac,getPerformanceMetrics:c.bg.getPerformanceMetrics}),nr});var m=l;return m})})(nP);var oP=nP.exports;const sP=by(oP),ej=vk({__proto__:null,default:sP},[oP]);var dh=Math.pow,ai=(e,t,r)=>new Promise((o,l)=>{var h=b=>{try{c(r.next(b))}catch(k){l(k)}},m=b=>{try{c(r.throw(b))}catch(k){l(k)}},c=b=>b.done?o(b.value):Promise.resolve(b.value).then(h,m);c((r=r.apply(e,t)).next())}),So=Uint8Array,If=Uint16Array,tj=Int32Array,aP=new So([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lP=new So([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rj=new So([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),cP=function(e,t){for(var r=new If(31),o=0;o<31;++o)r[o]=t+=1<<e[o-1];for(var l=new tj(r[30]),o=1;o<30;++o)for(var h=r[o];h<r[o+1];++h)l[h]=h-r[o]<<5|o;return{b:r,r:l}},uP=cP(aP,2),hP=uP.b,nj=uP.r;hP[28]=258,nj[258]=28;var ij=cP(lP,0),oj=ij.b,dP=new If(32768);for(vr=0;vr<32768;++vr)Ia=(vr&43690)>>1|(vr&21845)<<1,Ia=(Ia&52428)>>2|(Ia&13107)<<2,Ia=(Ia&61680)>>4|(Ia&3855)<<4,dP[vr]=((Ia&65280)>>8|(Ia&255)<<8)>>1;var Ia,vr,Pf=function(e,t,r){for(var o=e.length,l=0,h=new If(t);l<o;++l)e[l]&&++h[e[l]-1];var m=new If(t);for(l=1;l<t;++l)m[l]=m[l-1]+h[l-1]<<1;var c;{c=new If(1<<t);var b=15-t;for(l=0;l<o;++l)if(e[l])for(var k=l<<4|e[l],A=t-e[l],R=m[e[l]-1]++<<A,O=R|(1<<A)-1;R<=O;++R)c[dP[R]>>b]=k}return c},kp=new So(288);for(vr=0;vr<144;++vr)kp[vr]=8;var vr;for(vr=144;vr<256;++vr)kp[vr]=9;var vr;for(vr=256;vr<280;++vr)kp[vr]=7;var vr;for(vr=280;vr<288;++vr)kp[vr]=8;var vr,fP=new So(32);for(vr=0;vr<32;++vr)fP[vr]=5;var vr,sj=Pf(kp,9),aj=Pf(fP,5),M_=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},bs=function(e,t,r){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(t&7)&r},z_=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},lj=function(e){return(e+7)/8|0},cj=function(e,t,r){(r==null||r>e.length)&&(r=e.length);var o=new So(r-t);return o.set(e.subarray(t,r)),o},uj=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],yo=function(e,t,r){var o=new Error(t||uj[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,yo),!r)throw o;return o},ew=function(e,t,r,o){var l=e.length,h=0;if(!l||t.f&&!t.l)return r||new So(0);var m=!r||t.i!=2,c=t.i;r||(r=new So(l*3));var b=function(Rt){var or=r.length;if(Rt>or){var rn=new So(Math.max(or*2,Rt));rn.set(r),r=rn}},k=t.f||0,A=t.p||0,R=t.b||0,O=t.l,Q=t.d,te=t.m,ee=t.n,de=l*8;do{if(!O){k=bs(e,A,1);var G=bs(e,A+1,3);if(A+=3,G)if(G==1)O=sj,Q=aj,te=9,ee=5;else if(G==2){var ie=bs(e,A,31)+257,F=bs(e,A+10,15)+4,ce=ie+bs(e,A+5,31)+1;A+=14;for(var Ce=new So(ce),Ue=new So(19),Ae=0;Ae<F;++Ae)Ue[rj[Ae]]=bs(e,A+Ae*3,7);A+=F*3;for(var Re=M_(Ue),We=(1<<Re)-1,He=Pf(Ue,Re),Ae=0;Ae<ce;){var Ze=He[bs(e,A,We)];A+=Ze&15;var j=Ze>>4;if(j<16)Ce[Ae++]=j;else{var Ge=0,Fe=0;for(j==16?(Fe=3+bs(e,A,3),A+=2,Ge=Ce[Ae-1]):j==17?(Fe=3+bs(e,A,7),A+=3):j==18&&(Fe=11+bs(e,A,127),A+=7);Fe--;)Ce[Ae++]=Ge}}var ot=Ce.subarray(0,ie),Pe=Ce.subarray(ie);te=M_(ot),ee=M_(Pe),O=Pf(ot,te),Q=Pf(Pe,ee)}else yo(1);else{var j=lj(A)+4,U=e[j-4]|e[j-3]<<8,fe=j+U;if(fe>l){c&&yo(0);break}m&&b(R+U),r.set(e.subarray(j,fe),R),t.b=R+=U,t.p=A=fe*8,t.f=k;continue}if(A>de){c&&yo(0);break}}m&&b(R+131072);for(var st=(1<<te)-1,yt=(1<<ee)-1,Et=A;;Et=A){var Ge=O[z_(e,A)&st],mt=Ge>>4;if(A+=Ge&15,A>de){c&&yo(0);break}if(Ge||yo(2),mt<256)r[R++]=mt;else if(mt==256){Et=A,O=null;break}else{var Dt=mt-254;if(mt>264){var Ae=mt-257,jt=aP[Ae];Dt=bs(e,A,(1<<jt)-1)+hP[Ae],A+=jt}var _r=Q[z_(e,A)&yt],Ct=_r>>4;_r||yo(3),A+=_r&15;var Pe=oj[Ct];if(Ct>3){var jt=lP[Ct];Pe+=z_(e,A)&(1<<jt)-1,A+=jt}if(A>de){c&&yo(0);break}m&&b(R+131072);var Pt=R+Dt;if(R<Pe){var at=h-Pe,At=Math.min(Pe,Pt);for(at+R<0&&yo(3);R<At;++R)r[R]=o[at+R]}for(;R<Pt;R+=4)r[R]=r[R-Pe],r[R+1]=r[R+1-Pe],r[R+2]=r[R+2-Pe],r[R+3]=r[R+3-Pe];R=Pt}}t.l=O,t.p=Et,t.b=R,t.f=k,O&&(k=1,t.m=te,t.d=Q,t.n=ee)}while(!k);return R==r.length?r:cj(r,0,R)},hj=new So(0),dj=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&yo(6,"invalid gzip data");var t=e[3],r=10;t&4&&(r+=(e[10]|e[11]<<8)+2);for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[r++]);return r+(t&2)},fj=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},pj=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&yo(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&yo(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function mj(e,t){return ew(e,{i:2},t,t)}function gj(e,t){var r=dj(e);return r+8>e.length&&yo(6,"invalid gzip data"),ew(e.subarray(r,-8),{i:2},new So(fj(e)),t)}function yj(e,t){return ew(e.subarray(pj(e,t),-4),{i:2},t,t)}function ix(e,t){return e[0]==31&&e[1]==139&&e[2]==8?gj(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?mj(e,t):yj(e,t)}var vj=typeof TextDecoder<"u"&&new TextDecoder,_j=0;try{vj.decode(hj,{stream:!0}),_j=1}catch{}var pP=(e,t)=>e*dh(2,t),sf=(e,t)=>Math.floor(e/dh(2,t)),xy=(e,t)=>pP(e.getUint16(t+1,!0),8)+e.getUint8(t),mP=(e,t)=>pP(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),xj=(e,t,r,o,l)=>{if(e!==o.getUint8(l))return e-o.getUint8(l);const h=xy(o,l+1);if(t!==h)return t-h;const m=xy(o,l+4);return r!==m?r-m:0},bj=(e,t,r,o)=>{const l=gP(e,t|128,r,o);return l?{z:t,x:r,y:o,offset:l[0],length:l[1],isDir:!0}:null},nk=(e,t,r,o)=>{const l=gP(e,t,r,o);return l?{z:t,x:r,y:o,offset:l[0],length:l[1],isDir:!1}:null},gP=(e,t,r,o)=>{let l=0,h=e.byteLength/17-1;for(;l<=h;){const m=h+l>>1,c=xj(t,r,o,e,m*17);if(c>0)l=m+1;else if(c<0)h=m-1;else return[mP(e,m*17+7),e.getUint32(m*17+13,!0)]}return null},wj=(e,t)=>e.isDir&&!t.isDir?1:!e.isDir&&t.isDir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,yP=(e,t)=>{const r=e.getUint8(t*17);return{z:r&127,x:xy(e,t*17+1),y:xy(e,t*17+4),offset:mP(e,t*17+7),length:e.getUint32(t*17+13,!0),isDir:r>>7===1}},ik=e=>{const t=[],r=new DataView(e);for(let o=0;o<r.byteLength/17;o++)t.push(yP(r,o));return Sj(t)},Sj=e=>{e.sort(wj);const t=new ArrayBuffer(17*e.length),r=new Uint8Array(t);for(let o=0;o<e.length;o++){const l=e[o];let h=l.z;l.isDir&&(h=h|128),r[o*17]=h,r[o*17+1]=l.x&255,r[o*17+2]=l.x>>8&255,r[o*17+3]=l.x>>16&255,r[o*17+4]=l.y&255,r[o*17+5]=l.y>>8&255,r[o*17+6]=l.y>>16&255,r[o*17+7]=l.offset&255,r[o*17+8]=sf(l.offset,8)&255,r[o*17+9]=sf(l.offset,16)&255,r[o*17+10]=sf(l.offset,24)&255,r[o*17+11]=sf(l.offset,32)&255,r[o*17+12]=sf(l.offset,48)&255,r[o*17+13]=l.length&255,r[o*17+14]=l.length>>8&255,r[o*17+15]=l.length>>16&255,r[o*17+16]=l.length>>24&255}return t},Cj=(e,t)=>{if(e.byteLength<17)return null;const r=e.byteLength/17,o=yP(e,r-1);if(o.isDir){const l=o.z,h=t.z-l,m=Math.trunc(t.x/(1<<h)),c=Math.trunc(t.y/(1<<h));return{z:l,x:m,y:c}}return null};function kj(e){return ai(this,null,function*(){const t=yield e.getBytes(0,512e3),r=new DataView(t.data),o=r.getUint32(4,!0),l=r.getUint16(8,!0),h=new TextDecoder("utf-8"),m=JSON.parse(h.decode(new DataView(t.data,10,o)));let c=0;m.compression==="gzip"&&(c=2);let b=0;"minzoom"in m&&(b=+m.minzoom);let k=0;"maxzoom"in m&&(k=+m.maxzoom);let A=0,R=0,O=0,Q=-180,te=-85,ee=180,de=85;if(m.bounds){const j=m.bounds.split(",");Q=+j[0],te=+j[1],ee=+j[2],de=+j[3]}if(m.center){const j=m.center.split(",");A=+j[0],R=+j[1],O=+j[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+o,rootDirectoryLength:l*17,jsonMetadataOffset:10,jsonMetadataLength:o,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:c,tileType:1,minZoom:b,maxZoom:k,minLon:Q,minLat:te,maxLon:ee,maxLat:de,centerZoom:O,centerLon:A,centerLat:R,etag:t.etag}})}function Tj(e,t,r,o,l,h,m){return ai(this,null,function*(){let c=yield r.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(c=ik(c));const b=nk(new DataView(c),o,l,h);if(b){let R=(yield t.getBytes(b.offset,b.length,m)).data;const O=new DataView(R);return O.getUint8(0)===31&&O.getUint8(1)===139&&(R=ix(new Uint8Array(R))),{data:R}}const k=Cj(new DataView(c),{z:o,x:l,y:h});if(k){const A=bj(new DataView(c),k.z,k.x,k.y);if(A){let R=yield r.getArrayBuffer(t,A.offset,A.length,e);e.specVersion===1&&(R=ik(R));const O=nk(new DataView(R),o,l,h);if(O){let te=(yield t.getBytes(O.offset,O.length,m)).data;const ee=new DataView(te);return ee.getUint8(0)===31&&ee.getUint8(1)===139&&(te=ix(new Uint8Array(te))),{data:te}}}}})}var vP={getHeader:kj,getZxy:Tj},Ej=e=>(t,r)=>{if(r instanceof AbortController)return e(t,r);const o=new AbortController;return e(t,o).then(l=>r(void 0,l.data,l.cacheControl||"",l.expires||""),l=>r(l)).catch(l=>r(l)),{cancel:()=>o.abort()}},Ij=class{constructor(e){this.tilev4=(t,r)=>ai(this,null,function*(){if(t.type==="json"){const O=t.url.substr(10);let Q=this.tiles.get(O);if(Q||(Q=new ok(O),this.tiles.set(O,Q)),this.metadata)return{data:yield Q.getTileJson(t.url)};const te=yield Q.getHeader();return{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:te.minZoom,maxzoom:te.maxZoom,bounds:[te.minLon,te.minLat,te.maxLon,te.maxLat]}}}const o=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),l=t.url.match(o);if(!l)throw new Error("Invalid PMTiles protocol URL");const h=l[1];let m=this.tiles.get(h);m||(m=new ok(h),this.tiles.set(h,m));const c=l[2],b=l[3],k=l[4],A=yield m.getHeader(),R=yield m==null?void 0:m.getZxy(+c,+b,+k,r.signal);return R?{data:new Uint8Array(R.data),cacheControl:R.cacheControl,expires:R.expires}:A.tileType===1?{data:new Uint8Array}:{data:null}}),this.tile=Ej(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function $u(e,t){return(t>>>0)*4294967296+(e>>>0)}function Pj(e,t){const r=t.buf;let o=r[t.pos++],l=(o&112)>>4;if(o<128||(o=r[t.pos++],l|=(o&127)<<3,o<128)||(o=r[t.pos++],l|=(o&127)<<10,o<128)||(o=r[t.pos++],l|=(o&127)<<17,o<128)||(o=r[t.pos++],l|=(o&127)<<24,o<128)||(o=r[t.pos++],l|=(o&1)<<31,o<128))return $u(e,l);throw new Error("Expected varint not more than 10 bytes")}function af(e){const t=e.buf;let r=t[e.pos++],o=r&127;return r<128||(r=t[e.pos++],o|=(r&127)<<7,r<128)||(r=t[e.pos++],o|=(r&127)<<14,r<128)||(r=t[e.pos++],o|=(r&127)<<21,r<128)?o:(r=t[e.pos],o|=(r&15)<<28,Pj(o,e))}function Aj(e,t,r,o){if(o===0){r===1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const l=t[0];t[0]=t[1],t[1]=l}}var Mj=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function zj(e,t,r){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>dh(2,e)-1||r>dh(2,e)-1)throw Error("tile x/y outside zoom level bounds");const o=Mj[e],l=dh(2,e);let h=0,m=0,c=0;const b=[t,r];let k=l/2;for(;k>0;)h=(b[0]&k)>0?1:0,m=(b[1]&k)>0?1:0,c+=k*k*(3*h^m),Aj(k,b,h,m),k=k/2;return o+c}function _P(e,t){return ai(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return ix(new Uint8Array(e));const r=new Response(e).body;if(!r)throw Error("Failed to read response stream");const o=r.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(o).arrayBuffer()}throw Error("Compression method not supported")})}function Lj(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":""}var Dj=127;function Rj(e,t){let r=0,o=e.length-1;for(;r<=o;){const l=o+r>>1,h=t-e[l].tileId;if(h>0)r=l+1;else if(h<0)o=l-1;else return e[l]}return o>=0&&(e[o].runLength===0||t-e[o].tileId<e[o].runLength)?e[o]:null}var Oj=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");const o=r.indexOf("Windows")>-1,l=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,o&&l&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,o){return ai(this,null,function*(){let l,h;r?h=r:(l=new AbortController,h=l.signal);const m=new Headers(this.customHeaders);m.set("range",`bytes=${e}-${e+t-1}`);let c;this.mustReload?c="reload":this.chromeWindowsNoCache&&(c="no-store");let b=yield fetch(this.url,{signal:h,cache:c,headers:m});if(e===0&&b.status===416){const O=b.headers.get("Content-Range");if(!O||!O.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const Q=+O.substr(8);b=yield fetch(this.url,{signal:h,cache:"reload",headers:{range:`bytes=0-${Q-1}`}})}let k=b.headers.get("Etag");if(k!=null&&k.startsWith("W/")&&(k=null),b.status===416||o&&k&&k!==o)throw this.mustReload=!0,new ox(`Server returned non-matching ETag ${o} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(b.status>=300)throw Error(`Bad response code: ${b.status}`);const A=b.headers.get("Content-Length");if(b.status===200&&(!A||+A>t))throw l&&l.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield b.arrayBuffer(),etag:k||void 0,cacheControl:b.headers.get("Cache-Control")||void 0,expires:b.headers.get("Expires")||void 0}})}};function ws(e,t){const r=e.getUint32(t+4,!0),o=e.getUint32(t+0,!0);return r*dh(2,32)+o}function Bj(e,t){const r=new DataView(e),o=r.getUint8(7);if(o>3)throw Error(`Archive is spec version ${o} but this library supports up to spec version 3`);return{specVersion:o,rootDirectoryOffset:ws(r,8),rootDirectoryLength:ws(r,16),jsonMetadataOffset:ws(r,24),jsonMetadataLength:ws(r,32),leafDirectoryOffset:ws(r,40),leafDirectoryLength:ws(r,48),tileDataOffset:ws(r,56),tileDataLength:ws(r,64),numAddressedTiles:ws(r,72),numTileEntries:ws(r,80),numTileContents:ws(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:t}}function xP(e){const t={buf:new Uint8Array(e),pos:0},r=af(t),o=[];let l=0;for(let h=0;h<r;h++){const m=af(t);o.push({tileId:l+m,offset:0,length:0,runLength:1}),l+=m}for(let h=0;h<r;h++)o[h].runLength=af(t);for(let h=0;h<r;h++)o[h].length=af(t);for(let h=0;h<r;h++){const m=af(t);m===0&&h>0?o[h].offset=o[h-1].offset+o[h-1].length:o[h].offset=m-1}return o}function $j(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var ox=class extends Error{};function Fj(e,t){return ai(this,null,function*(){const r=yield e.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if($j(r.data)<3)return[yield vP.getHeader(e)];const l=r.data.slice(0,Dj),h=Bj(l,r.etag),m=r.data.slice(h.rootDirectoryOffset,h.rootDirectoryOffset+h.rootDirectoryLength),c=`${e.getKey()}|${h.etag||""}|${h.rootDirectoryOffset}|${h.rootDirectoryLength}`,b=xP(yield t(m,h.internalCompression));return[h,[c,b.length,b]]})}function Nj(e,t,r,o,l){return ai(this,null,function*(){const h=yield e.getBytes(r,o,void 0,l.etag),m=yield t(h.data,l.internalCompression),c=xP(m);if(c.length===0)throw new Error("Empty directory is invalid");return c})}var jj=class{constructor(e=100,t=!0,r=_P){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return ai(this,null,function*(){const t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;const o=new Promise((l,h)=>{Fj(e,this.decompress).then(m=>{m[1]&&this.cache.set(m[1][0],{lastUsed:this.counter++,data:Promise.resolve(m[1][2])}),l(m[0]),this.prune()}).catch(m=>{h(m)})});return this.cache.set(t,{lastUsed:this.counter++,data:o}),o})}getDirectory(e,t,r,o){return ai(this,null,function*(){const l=`${e.getKey()}|${o.etag||""}|${t}|${r}`,h=this.cache.get(l);if(h)return h.lastUsed=this.counter++,yield h.data;const m=new Promise((c,b)=>{Nj(e,this.decompress,t,r,o).then(k=>{c(k),this.prune()}).catch(k=>{b(k)})});return this.cache.set(l,{lastUsed:this.counter++,data:m}),m})}getArrayBuffer(e,t,r,o){return ai(this,null,function*(){const l=`${e.getKey()}|${o.etag||""}|${t}|${r}`,h=this.cache.get(l);if(h)return h.lastUsed=this.counter++,yield h.data;const m=new Promise((c,b)=>{e.getBytes(t,r,void 0,o.etag).then(k=>{c(k.data),this.cache.has(l),this.prune()}).catch(k=>{b(k)})});return this.cache.set(l,{lastUsed:this.counter++,data:m}),m})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,o)=>{r.lastUsed<e&&(e=r.lastUsed,t=o)}),t&&this.cache.delete(t)}}invalidate(e){return ai(this,null,function*(){const t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());const r=new Promise((o,l)=>{this.getHeader(e).then(h=>{o(),this.invalidations.delete(t)}).catch(h=>{l(h)})});this.invalidations.set(t,r)})}},ok=class{constructor(e,t,r){typeof e=="string"?this.source=new Oj(e):this.source=e,r?this.decompress=r:this.decompress=_P,t?this.cache=t:this.cache=new jj}getHeader(){return ai(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,o){return ai(this,null,function*(){const l=zj(e,t,r),h=yield this.cache.getHeader(this.source);if(h.specVersion<3)return vP.getZxy(h,this.source,this.cache,e,t,r,o);if(e<h.minZoom||e>h.maxZoom)return;let m=h.rootDirectoryOffset,c=h.rootDirectoryLength;for(let b=0;b<=3;b++){const k=yield this.cache.getDirectory(this.source,m,c,h),A=Rj(k,l);if(A){if(A.runLength>0){const R=yield this.source.getBytes(h.tileDataOffset+A.offset,A.length,o,h.etag);return{data:yield this.decompress(R.data,h.tileCompression),cacheControl:R.cacheControl,expires:R.expires}}m=h.leafDirectoryOffset+A.offset,c=A.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,r,o){return ai(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,o)}catch(l){if(l instanceof ox)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,o);throw l}})}getMetadataAttempt(){return ai(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),o=new TextDecoder("utf-8");return JSON.parse(o.decode(r))})}getMetadata(){return ai(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof ox)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return ai(this,null,function*(){const t=yield this.getHeader(),r=yield this.getMetadata(),o=Lj(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${o}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};let sk=!1;function bP(){if(sk)return;const e=new Ij;sP.addProtocol("pmtiles",e.tile),sk=!0}const Vj=e=>{bP();const{mode:t="light",children:r}=e,o=Qb[t];return W.jsxs(W.Fragment,{children:[W.jsx(sr,{id:"background",type:"background",paint:{"background-color":o.land}}),W.jsxs(Ih,{id:"world",type:"vector",url:"pmtiles:///world.pmtiles",children:[W.jsx(sr,{"source-layer":"water",type:"fill",paint:{"fill-color":o.water}}),r,W.jsx(sr,{"source-layer":"states",type:"line",paint:{"line-color":o.stateBorder,"line-width":1,"line-opacity":1,"line-dasharray":[2,2]}}),W.jsx(sr,{"source-layer":"countries",type:"line",filter:["!=",["get","name"],"Serbia-Kosovo"],paint:{"line-color":o.countryBorder,"line-width":2,"line-opacity":1}}),W.jsx(sr,{"source-layer":"countries",type:"line",filter:["==",["get","name"],"Serbia-Kosovo"],paint:{"line-color":o.countryBorder,"line-width":2,"line-opacity":1,"line-dasharray":[3,2]}})]})]})},Uj=new Set([7,0,8,10,13,12,3,2,14,5,11,9,4,6,1]),wP={0:new Set,1:new Set([7]),2:new Set([0]),3:new Set([8]),4:new Set([10]),5:new Set([13]),6:new Set([13,10]),7:new Set([12]),8:new Set([12,8]),9:new Set([3]),10:new Set([3,10]),11:new Set([3,12]),12:new Set([3,13]),13:new Set([2]),14:new Set([2,8]),15:new Set([2,12]),16:new Set([14]),17:new Set([14,2]),18:new Set([14,3]),19:new Set([14,12]),20:new Set([11]),21:new Set([11,8]),22:new Set([5]),23:new Set([5,3]),24:new Set([5,14]),25:new Set([9]),26:new Set([9,2]),27:new Set([9,8]),28:new Set([9,11]),29:new Set([4]),30:new Set([4,2]),31:new Set([4,9]),32:new Set([6]),33:new Set([6,2]),34:new Set([6,4]),35:new Set([6,14]),36:new Set([1]),37:new Set([1,9]),38:new Set([1,11])},Gj={1:0,2:1,3:2,7:13,13:9,31:3,37:4,43:20,44:7,47:5,17:29,27:22,36:25,50:16,18:32,19:36};for(const e of Object.values(Gj))e!==0&&Yb(wP[e].size===1);function Hj(e){const t=new Set;for(const[r,o]of Object.entries(wP))[...o].every(l=>e.has(l))&&t.add(Number(r));return t}const qj=new Set([]);var SP=(e=>(e[e.Road=0]="Road",e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.Green=3]="Green",e[e.NavRed=4]="NavRed",e[e.NavGreen=5]="NavGreen",e[e.NavBlue=6]="NavBlue",e[e.NavYellow=7]="NavYellow",e[e.NavPurple=8]="NavPurple",e))(SP||{});const Wj=new Set(Array.from({length:17},(e,t)=>t)),ak=e=>{const{game:t,visibleIcons:r=Wj,enableIconAutoHide:o=!0,mode:l="light"}=e,h=t==="ats"?uk(t,e.dlcs??Uj):uk(t,e.dlcs??qj),m=Qb[l];return bP(),W.jsxs(Ih,{id:t,type:"vector",url:`pmtiles:///${t}.pmtiles`,children:[W.jsx(sr,{id:t+"mapAreas","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"mapArea"],h],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":D_(l),"fill-outline-color":["case",["==",["get","color"],SP.Road],m.mapAreaOutline,D_(l)]}}),W.jsx(sr,{id:t+"prefabs","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"prefab"],h],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":D_(l)}}),W.jsx(Zj,{game:t,mode:l,color:m.footprint}),W.jsx(sr,{id:t+"hidden-roads","source-layer":t,type:"line",minzoom:9,filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","hidden"],!0],h],paint:{"line-color":m.hiddenRoad,"line-width":1,"line-opacity":.7}}),W.jsx(sr,{id:t+"visible-roads-case","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],h],layout:hk,paint:{"line-color":Jj(l),"line-gap-width":dk,"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,14,2,16,3]}}),W.jsx(sr,{id:t+"visible-roads","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],h],layout:hk,paint:{"line-color":Yj(l),"line-width":dk}}),W.jsx(sr,{id:t+"ferries","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],paint:{"line-color":m.ferryLine,"line-width":1,"line-opacity":.8,"line-dasharray":[2,2]}}),W.jsx(sr,{id:t+"trains-a","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":m.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,-6]}}),W.jsx(sr,{id:t+"trains-b","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":m.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,6]}}),W.jsx(sr,{id:t+"train-hatch","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":m.trainLine,"line-width":10,"line-opacity":.8,"line-dasharray":[.1,1]}}),W.jsx(sr,{id:t+"ferry-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],layout:{...Pa,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":m.ferryHalo,"text-color":m.ferryLabel}}),W.jsx(sr,{id:t+"train-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],layout:{...Pa,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":m.trainHalo,"text-color":m.trainLabel}}),r.has(15)&&W.jsx(sr,{id:t+"company-icons","source-layer":t,type:"symbol",minzoom:o?8:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"company"],h],layout:dc(o,1,1.25,3.5)}),t==="ets2"&&r.has(16)&&W.jsx(sr,{id:"euro-road-overlays","source-layer":t,minzoom:o?4.5:0,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["!",["in",["get","sprite"],["literal",lk]]]],layout:dc(o,.4*1.25,.75*1.25,1.25*1.25)}),t==="ats"&&r.has(16)&&W.jsx(sr,{id:t+"road-interstate-overlays","source-layer":t,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","is",["get","sprite"]],0],h],layout:dc(o,.4,.75,1.25)}),t==="ats"&&r.has(16)&&W.jsx(sr,{id:t+"road-us-route-overlays","source-layer":t,type:"symbol",minzoom:o?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","us",["get","sprite"]],0],h],layout:dc(o,.4,.75,1.25)}),t==="ats"&&r.has(16)&&W.jsx(sr,{id:t+"road-state-route-overlays","source-layer":t,type:"symbol",minzoom:o?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],h,["!",["any",["==",["index-of","is",["get","sprite"]],0],["==",["index-of","us",["get","sprite"]],0],["in",["get","sprite"],["literal",lk]]]]],layout:dc(o,.4,.75,1.25)}),r.has(14)&&W.jsx(sr,{id:t+"city-labels-small","source-layer":t,type:"symbol",minzoom:o?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],[">",["get","scaleRank"],6],h],layout:{...Pa,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Vu,"text-size":12,"icon-image":L_,"icon-allow-overlap":!o,"icon-size":.6},paint:m.primaryTextPaint}),r.has(14)&&W.jsx(sr,{id:t+"city-labels-medium","source-layer":t,type:"symbol",minzoom:o?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],6],[">",["get","scaleRank"],3],h],layout:{...Pa,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Vu,"text-size":13,"icon-image":L_,"icon-allow-overlap":!o,"icon-size":.6},paint:m.primaryTextPaint}),r.has(14)&&W.jsx(sr,{id:t+"city-labels-big","source-layer":t,type:"symbol",minzoom:o?4:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],3],h],layout:{...Pa,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Vu,"text-size":14,"icon-image":L_,"icon-allow-overlap":!o,"icon-size":.8},paint:m.primaryTextPaint}),t==="ets2"&&r.has(14)&&W.jsx(sr,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...Pa,"text-font":["Klokantech Noto Sans Bold"],"text-field":"{name}","text-variable-anchor":Vu,"text-size":14},paint:m.primaryTextPaint}),t==="ats"&&r.has(14)&&W.jsx(sr,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...Pa,"text-font":["Open Sans Light"],"text-field":"{name}","text-transform":"uppercase","text-variable-anchor":Vu,"text-size":["step",["zoom"],10,5,13]},paint:m.secondaryTextPaint}),sx(r)&&W.jsx(sr,{id:t+"poi-icons","source-layer":t,type:"symbol",minzoom:o?7:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],ck(r),h],layout:dc(o,.6,1.25,2.5,{vertical:2,horizontal:2})}),sx(r)&&(r.has(8)||r.has(9))&&W.jsx(sr,{id:t+"poi-icon-labels","source-layer":t,type:"symbol",minzoom:o?9.5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["in",["get","poiType"],["literal",["viewpoint","landmark"]]],ck(r),h],layout:{...dc(o,.6,1.25,2.5,{vertical:2,horizontal:2}),...Pa,"text-field":"{poiName}","text-allow-overlap":!o,"text-variable-anchor":["left","right","top","bottom"],"text-radial-offset":1.5,"text-size":10},paint:m.primaryTextPaint})]})},Zj=({game:e,color:t,mode:r})=>W.jsxs(Ih,{id:e+"footprints",type:"vector",url:`pmtiles:///${e}-footprints.pmtiles`,children:[W.jsx(sr,{id:e+"footprints","source-layer":"footprints",type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-color":t,"fill-opacity":["step",["zoom"],1,9,.8]}}),W.jsx(sr,{id:e+"extrusions",minzoom:9,"source-layer":"footprints",type:"fill-extrusion",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-extrusion-color":t,"fill-extrusion-height":["interpolate",["exponential",1.5],["zoom"],9,["*",10,["get","height"]],13,["*",20,["get","height"]]],"fill-extrusion-opacity":r==="light"?.33:.67}})]});function dc(e,t,r,o,l={vertical:10,horizontal:30}){const h=["literal",[l.vertical,l.horizontal]];return{"icon-image":"{sprite}","icon-allow-overlap":!e,"icon-padding":h,"icon-size":["interpolate",["exponential",1.5],["zoom"],4,t,9,r,13,o]}}const L_=["step",["zoom"],["case",["==",["get","capital"],2],"dotdot","dot"],8,""],Kj=[9,8,6,7,2,0,4,5,12,3,13,1,10,11],lk=["weigh_ico","toll_ico","agri_check","border_ico"];function sx(e){return Kj.some(t=>e.has(t))}function ck(e){nx.checkArgument(sx(e));const t=[];e.has(9)&&t.push("landmark"),e.has(8)&&t.push("viewpoint"),e.has(6)&&t.push("ferry"),e.has(7)&&t.push("train");const r=[];e.has(0)&&r.push("gas_ico"),e.has(4)&&r.push("service_ico"),e.has(13)&&r.push("weigh_station_ico"),e.has(5)&&r.push("dealer_ico"),e.has(12)&&r.push("garage_large_ico"),e.has(3)&&r.push("recruitment_ico"),e.has(2)&&r.push("parking_ico");const o=[];e.has(13)&&o.push("weigh_ico"),e.has(1)&&o.push("toll_ico"),e.has(10)&&o.push("agri_check"),e.has(11)&&o.push("border_ico");const l=t.length>0?["in",["get","poiType"],["literal",t]]:!1,h=r.length>0?["all",["==",["get","poiType"],"facility"],["in",["get","sprite"],["literal",r]]]:!1,m=o.length>0?["all",["==",["get","poiType"],"road"],["in",["get","sprite"],["literal",o]]]:!1;return["any",l,h,m]}function uk(e,t){if(e!=="ats")return["boolean",!0];const r=Hj(t);return["in",["get","dlcGuard"],["literal",[...r]]]}const Vu=["step",["zoom"],["literal",["top","bottom","right","left"]],7,["literal",["center"]]],Pa={"text-radial-offset":.5,"text-justify":"auto","text-font":["Klokantech Noto Sans Regular"]},hk={"line-cap":"round","line-join":"bevel"},dk=["interpolate",["exponential",1.5],["zoom"],3,.8,14,30,16,150],CP={light:{freeway:["#fde293","#f8c248"],divided:["#ffffff","#dddddd"],no_vehicles:["#aaaaaa","#888888"],local:["#f1f3f4","#dddddd"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]},dark:{freeway:["#95813e","#372f21"],divided:["#3c4043","#4c5043"],no_vehicles:["#606166","#888888"],local:["#606166","#333"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]}},Xj={light:{0:"hsl(200, 8%, 92%)",1:"hsl(38, 59%, 76%)",2:"hsl(38, 64%, 58%)",3:"hsl(92, 31%, 70%)",4:"hsl(0, 100%, 30%)",5:"hsl(107, 51%, 43%)",6:"hsl(201, 53%, 39%)",7:"hsl(53, 84%, 53%)",8:"hsl(267,46% ,45%)"},dark:{0:"hsl(200, 2%, 36%)",1:"hsl(38, 25%, 35%)",2:"hsl(38, 25%, 25%)",3:"hsl(143, 20%, 25%)",4:"hsl(0, 100%, 25%)",5:"hsl(107, 51%, 25%)",6:"hsl(201, 53%, 25%)",7:"hsl(53, 84%, 25%)",8:"hsl(267, 46%, 25%)"}},Yj=e=>["match",["get","roadType"],...Object.entries(CP[e]).flatMap(([t,[r]])=>[t,r]),"#f0f"],Jj=e=>["match",["get","roadType"],...Object.entries(CP[e]).flatMap(([t,[,r]])=>[t,r]),"#b0b"],D_=e=>["match",["get","color"],...Object.entries(Xj[e]).flatMap(([t,r])=>[Number(t),r]),"#b0b"],Qj="https://raw.githubusercontent.com/nautofon/ats-towns/california/all-towns.geojson",eV="/ets2-villages.geojson",tV={AR:void 0,AZ:void 0,CA:void 0,CO:void 0,ID:void 0,KS:void 0,MT:void 0,NE:void 0,NM:void 0,NV:void 0,OK:void 0,OR:void 0,TX:void 0,UT:void 0,WA:void 0,WY:void 0},rV=new Set(Object.keys(tV)),fk=e=>{const{game:t,enableAutoHide:r=!0,mode:o="light"}=e,l=t==="ats"?Qj:eV,h=t==="ats"?["in",["get","state"],["literal",[...e.enabledStates??rV]]]:["boolean",!0],m=Qb[o];return W.jsx(Ih,{id:`${t}-scenery-towns`,type:"geojson",data:l,children:W.jsx(sr,{id:`${t}-scenery-towns`,type:"symbol",minzoom:r?7:0,filter:h,layout:{...Pa,"text-field":"{name}","text-allow-overlap":!r,"text-variable-anchor":Vu,"text-size":10.5},paint:m.primaryTextPaint})})},nV=new Proxy({version:8,sprite:"/sprites",glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[]},{get(e,t,r){var o;return t==="sprite"&&((o=e.sprite)!=null&&o.toString().match(/^\/\w/))?window.location.origin+e.sprite.toString():Reflect.get(e,t,r)}}),iV=e=>{console.log("render slippy map");const{Destinations:t,TrailerOrWaypointMarkers:r,PlayerMarker:o,center:l=[0,0],mode:h="light"}=e,m=pe.useRef(null),c=pe.useRef(null);return W.jsxs(tN,{ref:m,initialViewState:{longitude:l[0],latitude:l[1]},onLoad:()=>e.onLoad(Wa(m.current),Wa(c.current)),onDragStart:()=>e.onDragStart(),onZoomStart:b=>{b.originalEvent&&e.onDragStart()},style:{position:"absolute",top:0,left:0,width:"100vw",height:"100vh"},minZoom:4,maxZoom:15,mapStyle:nV,children:[W.jsx(Vj,{mode:h}),W.jsx(ak,{mode:h,game:"ats"}),W.jsx(ak,{mode:h,game:"ets2"}),W.jsx(fk,{mode:h,game:"ats"}),W.jsx(fk,{mode:h,game:"ets2"}),W.jsx(Ih,{id:"activeRoute",type:"geojson",data:{type:"FeatureCollection",features:[]},children:W.jsx(sr,{id:"activeRouteLayer",type:"line",paint:{"line-color":"#f00","line-width":5,"line-opacity":1}})}),Array.from({length:2},(b,k)=>W.jsx(Ih,{id:`previewRoute-${k}`,type:"geojson",data:{type:"FeatureCollection",features:[]},children:W.jsx(sr,{id:`previewRouteLayer-${k}`,type:"line",paint:{"line-color":"#f00","line-width":5,"line-opacity":1}})},`previewRoute-${k}`)),W.jsx(t,{}),W.jsx(r,{}),W.jsx(o,{mode:e.mode,ref:c}),W.jsx(rN,{compact:!0,style:{marginLeft:54,opacity:.5},customAttribution:"© Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a> and <a href='https://forum.scssoft.com/viewtopic.php?p=1946956#p1946956'>krmarci</a>."})]})},oV=e=>{if(console.log("render trailer or waypoints"),e.trailerPoint)return W.jsx(gy,{color:"#0f0",longitude:e.trailerPoint[0],latitude:e.trailerPoint[1]});if(!e.activeRoute)return null;const t=[],r=e.activeRoute.segments.length;for(let o=0;o<r;o++){const l=e.activeRoute.segments[o],h=Wa(l.lonLats.at(-1)),m=o===r-1;t.push(W.jsx(gy,{color:m?"red":"blue",longitude:h[0],latitude:h[1]},h.join()+o))}return t};function sV(e){let t=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(const h of e)Array.isArray(h)?(t=Math.min(t,h[0]),o=Math.max(o,h[0]),r=Math.min(r,h[1]),l=Math.max(l,h[1])):(t=Math.min(t,h.x),o=Math.max(o,h.x),r=Math.min(r,h.y),l=Math.max(l,h.y));return[t,r,o,l]}var $a=(e=>(e[e.FOLLOW=0]="FOLLOW",e[e.FREE=1]="FREE",e))($a||{}),Wn=(e=>(e[e.CATEGORIES=0]="CATEGORIES",e[e.DESTINATIONS=1]="DESTINATIONS",e[e.ROUTES=2]="ROUTES",e))(Wn||{});class aV{constructor(){Gn(this,"themeMode","light");Gn(this,"cameraMode",$a.FOLLOW);Gn(this,"activeRoute");Gn(this,"activeRouteDirection");Gn(this,"trailerPoint");Gn(this,"showNavSheet",!1);Gb(this,{activeRoute:Kr.ref,activeRouteDirection:Kr.ref,trailerPoint:Kr.ref})}}class lV{constructor(){Gn(this,"map");Gn(this,"playerMarker")}fitPoints(t){if(!this.map||!this.playerMarker){console.warn("tried to view points but map/marker hasn't loaded");return}const r=sV([...t,this.playerMarker.getLngLat().toArray()]),o=[r[0],r[1]],l=[r[2],r[3]];this.map.fitBounds([o,l],{duration:500,linear:!0,pitch:0,bearing:0,padding:50})}onMapLoad(t,r){nx.checkState(this.map==null),nx.checkState(this.playerMarker==null),this.map=t,this.playerMarker=r}onMapDragStart(t){t.cameraMode=$a.FREE}setFollow(t){t.cameraMode=$a.FOLLOW}startRouteFlow(t){t.showNavSheet=!0}hideNavSheet(t){console.log("hide nav sheet"),t.showNavSheet=!1}setDestinationNodeUid(t,r,o){o.previewRoutes.query({toNodeUid:r}).then(dr(([l])=>{l||console.warn("could not find route to",r),this.setActiveRoute(t,l,o)}))}setActiveRoute(t,r,o){t.activeRoute=r,this.renderActiveRoute(r),o.setActiveRoute.mutate(r==null?void 0:r.segments.map(l=>l.key))}startListening(t,r){let o=[0,0],l=[0,0];const h=[0,0];let m=0,c=0,b=0;console.log("subscribing"),r.onRouteUpdate.subscribe(void 0,{onData:dr(k=>{t.activeRoute=k,this.renderActiveRoute(k)})}),r.onPositionUpdate.subscribe(void 0,{onData:dr(k=>{const{map:A,playerMarker:R}=this;if(!A||!R)return;const{speedMph:O,position:Q,bearing:te}=k;switch(o.every(ee=>!ee)&&A.setCenter(Q),o=l,l=Q,m=c,c=te,t.cameraMode){case $a.FOLLOW:A.easeTo({...uV(Q,te,O),duration:500,padding:{left:t.showNavSheet?440:0,top:400},easing:ee=>(h[0]=o[0]+ee*(l[0]-o[0]),h[1]=o[1]+ee*(l[1]-o[1]),b=m+ee*cV(m,c),R.setLngLat(h),R.setRotation(b),ee)});break;case $a.FREE:R.setLngLat(Q),R.setRotation(te);break;default:throw new Ts(t.cameraMode)}})}),r.onTrailerUpdate.subscribe(void 0,{onData:dr(k=>t.trailerPoint=k==null?void 0:k.position)}),r.onThemeModeUpdate.subscribe(void 0,{onData:dr(k=>{t.themeMode=k;const A=document.documentElement;A.setAttribute("data-joy-color-scheme",k),A.setAttribute("data-mui-color-scheme",k)})})}renderActiveRoute(t){const{map:r}=this;if(!r)return;const o=Wa(r.getSource("activeRoute"));if(!t){o.setData(pk);return}console.log("setting route data",t),o.setData(mk(t)),r.getMap().setLayoutProperty("activeRouteLayer","visibility","visible")}renderRoutePreview(t,r){const{map:o}=this;if(!o)return;console.log("rendering route preview");const l=Wa(o.getSource(`previewRoute-${r.index}`));if(!t){l.setData(pk);return}l.setData(mk(t)),o.getMap().setPaintProperty(`previewRouteLayer-${r.index}`,"line-opacity",r.highlight?1:.25).setLayoutProperty("activeRouteLayer","visibility","none")}}const pk={type:"FeatureCollection",features:[]};function mk(e){return{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"LineString",coordinates:e.segments.flatMap(t=>t.lonLats)},properties:null}]}}function cV(e,t){const r=e%360;let l=(t>0?t:t+360)-r;return l>180&&(l-=360),l}function uV(e,t,r){let o,l;return r>60?(o=11.5,l=30):r>30?(o=13,l=45):(o=14,l=50),{center:e,bearing:t,zoom:o,pitch:l}}const hV={p:2,borderRadius:"50%",boxShadow:"rgba(0, 0, 0, 0.2) 0px 3px 5px -1px, rgba(0, 0, 0, 0.14) 0px 6px 10px 0px, rgba(0, 0, 0, 0.12) 0px 1px 18px 0px"},R_=e=>W.jsx(YF,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,children:W.jsx(Yf,{size:"lg",color:"primary",variant:e.variant??"solid",sx:{...hV,backgroundColor:e.backgroundColor??"primary.500"},onClick:e.onClick,children:W.jsx(e.Icon,{})})}),dV=e=>(console.log("render controls"),W.jsxs(Ci,{padding:2,paddingBlockEnd:6,height:"100vh",direction:"column",justifyContent:"space-between",sx:{position:"absolute",top:0,right:0},children:[W.jsxs(Ci,{gap:1,alignSelf:"end",alignItems:"center",children:[W.jsx(e.Direction,{}),W.jsx(e.SpeedLimit,{})]}),W.jsxs(Ci,{gap:2,alignSelf:"end",alignItems:"center",children:[W.jsx(e.RecenterFab,{}),W.jsx(e.RouteFab,{}),W.jsx(e.SearchFab,{})]})]})),fV=pe.forwardRef((e,t)=>e.limitMph!=null?W.jsx(pV,{limitMph:e.limitMph,ref:t}):e.limitKph!=null?W.jsx(mV,{limitKph:e.limitKph,ref:t}):null),pV=pe.forwardRef((e,t)=>W.jsx(Ei,{boxShadow:"0 0 2px 0 #0008",padding:.25,borderRadius:4,sx:{backgroundColor:"white"},ref:t,children:W.jsxs(Ei,{border:2,borderColor:"common.black",padding:.5,paddingBottom:0,borderRadius:4,children:[W.jsxs(Zn,{textAlign:"center",lineHeight:1.2,level:"body-xs",sx:{color:"common.black"},children:["SPEED",W.jsx("br",{}),"LIMIT"]}),W.jsx(Zn,{textAlign:"center",level:"title-lg",fontSize:"xl2",fontWeight:"bold",sx:{color:"common.black",WebkitTextStroke:1.25},children:e.limitMph})]})})),mV=pe.forwardRef((e,t)=>W.jsx(Ei,{boxShadow:"0 0 2px 0 #0004",padding:.2,borderRadius:"50%",border:1,borderColor:"#f22",sx:{backgroundColor:"white"},ref:t,children:W.jsx(Ei,{display:"flex",alignItems:"center",border:6,borderColor:"#f22",padding:1,borderRadius:"50%",sx:{aspectRatio:1},children:W.jsx(Zn,{textAlign:"center",level:"title-lg",fontSize:"xl2",fontWeight:"bold",sx:{color:"common.black",WebkitTextStroke:1.25},children:e.limitKph})})})),gV=e=>W.jsx(MI,{variant:"solid",sx:{p:.5,px:2,borderRadius:8,fontWeight:"bold"},children:e.direction});function kP(e){const t=e>=0?e:360+e;return 337.5<=t||t<22.5?"N":22.5<=t&&t<67.5?"NE":67.5<=t&&t<112.5?"E":112.5<=t&&t<157.5?"SE":157.5<=t&&t<202.5?"S":202.5<=t&&t<247.5?"SW":247.5<=t&&t<292.5?"W":(Yb(292.5<=t&&t<337.5),"NW")}class yV{constructor(t){Gn(this,"direction","N");Gn(this,"limitMph",0);this.appStore=t,Gb(this)}get showRecenterFab(){return this.appStore.cameraMode===$a.FREE}get showRouteFab(){return!this.appStore.activeRoute&&!this.appStore.showNavSheet}get showSearchFab(){return!!this.appStore.activeRoute&&!this.appStore.showNavSheet}}class vV{startListening(t,r){r.onPositionUpdate.subscribe(void 0,{onData:dr(o=>{t.direction=kP(o.bearing),t.limitMph=o.speedLimit})})}}function _V(e){const{appStore:t}=e,r=new yV(t),o=new vV,l=ki(()=>W.jsx(gV,{direction:r.direction})),h=ki(()=>W.jsx(Xb,{in:r.limitMph>=5,direction:"left",mountOnEnter:!0,unmountOnExit:!0,children:W.jsx(fV,{limitMph:r.limitMph})})),m=ki(c=>W.jsx(R_,{show:r.showRecenterFab,variant:"plain",backgroundColor:"background.body",Icon:()=>W.jsx(GN,{sx:{transform:"scale(1.25) rotate(30deg)"}}),onClick:c.onClick}));return ki(c=>W.jsx(R_,{show:r.showRouteFab,Icon:()=>W.jsx(FN,{sx:{transform:"scale(1.25)"}}),onClick:c.onClick})),ki(c=>W.jsx(R_,{show:r.showSearchFab,Icon:()=>W.jsx(qN,{sx:{transform:"scale(1.25)"}}),onClick:c.onClick})),{Controls:c=>W.jsx(dV,{Direction:l,SpeedLimit:h,RecenterFab:()=>W.jsx(m,{onClick:c.onRecenterFabClick}),RouteFab:()=>W.jsx(W.Fragment,{}),SearchFab:()=>W.jsx(W.Fragment,{})}),store:r,controller:o}}const xV=e=>(console.log("render collapsible button bar"),W.jsx(Kb,{in:e.visible,children:W.jsxs(NO,{variant:"outlined",size:"lg",buttonFlex:"1 0 50%",sx:{mt:2,mb:1},children:[W.jsx(Jf,{startDecorator:W.jsx(RN,{}),onClick:t=>{e.onDestinationRoutesClick(),t.stopPropagation()},children:"Routes"}),W.jsx(Jf,{variant:"solid",color:"success",onClick:t=>{e.onDestinationGoClick(),t.stopPropagation()},children:"Go!"})]})})),bV=e=>W.jsxs(W.Fragment,{children:[W.jsx(Ib,{children:W.jsxs(kI,{onClick:e.onDestinationHighlight,sx:{display:"flex",flexDirection:"column",gap:0,alignItems:"normal"},children:[W.jsxs(Ci,{direction:"row",gap:1,children:[W.jsx(Ei,{width:"1em",mr:1,children:W.jsxs(Zn,{fontSize:"lg",textAlign:"right",children:[e.index+1,"."]})}),W.jsx(Ei,{marginTop:.5,children:W.jsx("img",{src:e.destination.logoUrl,style:{width:"4rem"}})}),W.jsxs(Ci,{flexDirection:"column",flexGrow:1,children:[W.jsxs(Ci,{flexDirection:"row",gap:1,justifyContent:"space-between",children:[W.jsx(Zn,{fontSize:"lg",children:e.destination.name}),W.jsx(Ci,{direction:"row",alignItems:"center",gap:.5,children:e.destination.facilityUrls.map(t=>W.jsx("img",{src:t,style:{width:"1.5rem"}},t))})]}),W.jsxs(Ci,{flexDirection:"row",gap:1,alignItems:"baseline",children:[W.jsxs(Zn,{noWrap:!0,color:"neutral",fontSize:"sm",flexGrow:1,width:100,children:[e.destination.isCityStateApproximate?"Near ":"",e.destination.city,", ",e.destination.state]}),W.jsxs(Zn,{color:"neutral",fontSize:"md",flexGrow:0,children:[Number((e.destination.distanceMeters/1609.344).toFixed(1)).toLocaleString(),W.jsx(Zn,{fontSize:"xs",children:"mi"})]}),W.jsx(Zn,{color:"neutral",fontSize:"md",fontWeight:"bold",flex:"0 1 2em",textAlign:"center",children:kP(e.destination.bearing)})]})]})]}),W.jsx(e.CollapsibleButtonBar,{})]})}),W.jsx(AI,{})]}),wV=e=>(console.log("render dest list"),W.jsx(CI,{size:"lg",children:e.destinations.map((t,r)=>W.jsx(bV,{destination:t,index:r,onDestinationHighlight:()=>e.onDestinationHighlight(t),CollapsibleButtonBar:()=>W.jsx(e.CollapsibleButtonBar,{destination:t})},t.nodeUid))})),SV={[yc.COMPANY]:{Icon:WN,label:"Companies",color:"orange"},[yc.FUEL]:{Icon:jN,label:"Fuel Stations",color:"#008234"},[yc.REST]:{Icon:NN,label:"Rest Stops",color:"#1f6eb7"},[yc.SERVICE]:{Icon:BN,label:"Service Centers",color:"#8e0d0d"},[yc.DEALER]:{Icon:VN,label:"Dealerships",color:"#7c2391"},[yc.RECRUITING]:{Icon:HN,label:"Recruitment Agencies",color:"#918d00"}},CV=e=>W.jsx(Ei,{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:2,children:Object.entries(SV).map(([t,{Icon:r,label:o,color:l}])=>W.jsx(kV,{Icon:r,color:l,label:o,onClick:()=>e.onClick(Number(t),o)},t))}),kV=({Icon:e,color:t,label:r,onClick:o})=>W.jsx(W.Fragment,{children:W.jsxs(Ei,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:1,children:[W.jsx(Yf,{size:"lg",variant:"solid",sx:{borderRadius:"50%",p:2.5,backgroundColor:t},onClick:o,children:W.jsx(e,{sx:{transform:"scale(1.25)"}})}),W.jsx(Zn,{children:r})]})}),TV=e=>W.jsx(MI,{variant:"outlined",sx:{p:2,borderRadius:12,height:"100%"},children:W.jsxs(Ci,{gap:2,height:"100%",overflow:"hidden",children:[W.jsx(e.TitleControls,{}),W.jsx(Lb,{}),W.jsx(Ei,{overflow:"auto",display:"flex",justifyContent:"center",sx:{m:-2,p:2},children:W.jsx(e.CurrentPage,{})})]})}),EV=e=>W.jsxs(W.Fragment,{children:[W.jsx(Ib,{children:W.jsxs(kI,{onClick:e.onRouteHighlight,sx:{gap:1},children:[W.jsxs(Ci,{direction:"column",flexGrow:1,children:[W.jsx(Zn,{fontSize:"lg",children:"12 hours, 34 minutes"}),W.jsxs(Zn,{color:"neutral",fontSize:"sm",children:[(500+Math.round(Math.random()*1e3)).toLocaleString()," miles · ",IV(e.route.segments[0].strategy)]})]}),W.jsx(Jf,{size:"lg",variant:"solid",color:"success",onClick:t=>{e.onRouteGoClick(),t.stopPropagation()},children:"Go!"})]})}),W.jsx(AI,{})]});function IV(e){switch(e){case"shortest":return"Shortest";case"smallRoads":return"Prefer small roads";default:throw new Ts(e)}}const PV=e=>{console.log("render route list");const{onRouteHighlight:t,onRouteGoClick:r}=e,o=l=>W.jsx(EV,{route:l.route,onRouteHighlight:()=>t(l.route),onRouteGoClick:()=>r(l.route)});return W.jsx(CI,{size:"lg",children:e.routes.map(l=>W.jsx(o,{route:l},l.id))})},AV=e=>W.jsxs(Ci,{gap:1,direction:"row",alignItems:"center",children:[W.jsx(Kb,{in:e.showBackButton,orientation:"horizontal",children:W.jsx(Yf,{onClick:e.onBackClick,children:W.jsx(ON,{})})}),W.jsx(Zn,{flexGrow:1,level:"title-lg",fontSize:"xl",children:e.title}),W.jsx(Yf,{onClick:e.onCloseClick,children:W.jsx($N,{})})]});function gk(e){return function(t){return t.isLoading?W.jsx(zb,{size:"lg"}):W.jsx(e,{...t})}}class MV{constructor(){Gn(this,"currentPageKey",Wn.CATEGORIES);Gn(this,"isLoading",!1);Gn(this,"selectedPoiTypeLabel");Gn(this,"destinations",[]);Gn(this,"selectedDestination");Gn(this,"routes",[]);Gn(this,"selectedRoute");Gb(this,{destinations:Kr.ref,selectedDestination:Kr.ref,routes:Kr.ref,selectedRoute:Kr.ref})}get title(){switch(this.currentPageKey){case Wn.CATEGORIES:return"Choose destination";case Wn.DESTINATIONS:return Wa(this.selectedPoiTypeLabel);case Wn.ROUTES:return`Routes to ${Wa(this.selectedDestination).name}`;default:throw new Ts(this.currentPageKey)}}get showBackButton(){return this.currentPageKey!==Wn.CATEGORIES}}class zV{constructor(t){this.appClient=t}onBackClick(t){switch(t.currentPageKey){case Wn.CATEGORIES:throw new Error;case Wn.DESTINATIONS:this.reset(t);break;case Wn.ROUTES:t.currentPageKey=Wn.DESTINATIONS,t.selectedDestination=void 0,t.routes=[],t.selectedRoute=void 0;break;default:throw new Ts(t.currentPageKey)}}onDestinationTypeClick(t,r,o){t.selectedPoiTypeLabel=o,t.currentPageKey=Wn.DESTINATIONS,t.isLoading=!0,this.appClient.search.query({type:r,scope:rP.NEARBY}).then(dr(l=>{t.destinations=l,t.selectedDestination=void 0})).finally(dr(()=>t.isLoading=!1))}onDestinationHighlight(t,r){t.selectedDestination=r===t.selectedDestination?void 0:r}onDestinationGoClick(t,r){console.log("go",r),t.selectedDestination=r}onDestinationRoutesClick(t,r){console.log("routes",r),t.selectedDestination=r,t.currentPageKey=Wn.ROUTES,t.isLoading=!0,this.appClient.previewRoutes.query({toNodeUid:r.nodeUid}).then(dr(o=>{t.isLoading=!1,t.routes=o,t.selectedRoute=t.routes[0]}))}onRouteHighlight(t,r){console.log("highlight route",r),t.selectedRoute=r}onRouteGoClick(t,r){console.log("go route",r),t.selectedRoute=r}reset(t){console.log("nav sheet reset"),t.currentPageKey=Wn.CATEGORIES,t.isLoading=!1,t.selectedPoiTypeLabel=void 0,t.destinations=[],t.selectedDestination=void 0,t.routes=[],t.selectedRoute=void 0}}function LV({appClient:e}){const t=new MV,r=new zV(e),{CurrentNavPage:o}=DV({store:t,controller:r}),l=ki(m=>W.jsx(AV,{showBackButton:t.showBackButton,title:t.title,onBackClick:dr(()=>r.onBackClick(t)),onCloseClick:m.onCloseClick}));return{NavSheet:m=>W.jsx(TV,{TitleControls:()=>W.jsx(l,{onCloseClick:m.onCloseClick}),CurrentPage:()=>W.jsx(o,{onDestinationGoClick:m.onDestinationGoClick,onRouteGoClick:m.onRouteGoClick})}),store:t,controller:r}}function DV(e){const{store:t,controller:r}=e,o=()=>W.jsx(CV,{onClick:dr((b,k)=>r.onDestinationTypeClick(t,b,k))}),l=gk(wV),h=ki(b=>{const k=ki(({destination:A})=>{const R=xp(()=>t.selectedDestination===A);return W.jsx(xV,{visible:R.get(),onDestinationRoutesClick:dr(()=>r.onDestinationRoutesClick(t,A)),onDestinationGoClick:dr(()=>{r.onDestinationGoClick(t,A),b.onDestinationGoClick()})})});return W.jsx(l,{isLoading:t.isLoading,destinations:t.destinations,CollapsibleButtonBar:k,onDestinationHighlight:dr(A=>r.onDestinationHighlight(t,A))})}),m=gk(PV),c=ki(b=>W.jsx(m,{isLoading:t.isLoading,routes:t.routes,onRouteHighlight:dr(k=>r.onRouteHighlight(t,k)),onRouteGoClick:dr(k=>{r.onRouteGoClick(t,k),b.onRouteGoClick()})}));return{CurrentNavPage:ki(b=>{switch(console.log("render current nav pag",t.currentPageKey),t.currentPageKey){case Wn.CATEGORIES:return W.jsx(o,{});case Wn.DESTINATIONS:return W.jsx(h,{onDestinationGoClick:b.onDestinationGoClick});case Wn.ROUTES:return W.jsx(c,{onRouteGoClick:b.onRouteGoClick});default:throw new Ts(t.currentPageKey)}})}}function RV({appClient:e,transitionDurationMs:t}){const r=new aV,o=new lV,{NavSheet:l,controller:h,store:m}=LV({appClient:e}),c=dr(()=>{o.hideNavSheet(r),FV(t).then(dr(()=>h.reset(m))),m.destinations=[]}),b=()=>W.jsx(l,{onCloseClick:c,onDestinationGoClick:()=>{o.setDestinationNodeUid(r,Wa(m.selectedDestination).nodeUid,e),c()},onRouteGoClick:dr(()=>{o.setActiveRoute(r,m.selectedRoute,e),c()})});b_(()=>m.destinations.length>0,j=>r.cameraMode=j?$a.FREE:$a.FOLLOW),b_(()=>{if(!(m.destinations.length===0||m.currentPageKey!==Wn.DESTINATIONS))return m.destinations.map(j=>j.lonLat)},j=>j&&o.fitPoints(j)),b_(()=>({routes:m.routes,selected:m.selectedRoute}),({routes:j,selected:U})=>{[0,1].forEach(fe=>{var ie;return o.renderRoutePreview(j[fe],{index:fe,highlight:(U==null?void 0:U.id)===((ie=j[fe])==null?void 0:ie.id)})}),j.length===0&&!U&&o.renderActiveRoute(r.activeRoute)});const{Controls:k,controller:A,store:R}=_V({appStore:r}),O=()=>W.jsx(k,{onRecenterFabClick:dr(()=>o.setFollow(r)),onRouteFabClick:dr(()=>o.startRouteFlow(r)),onSearchFabClick:dr(()=>o.startRouteFlow(r))}),Q=dr((j,U)=>{o.onMapLoad(j,U),o.startListening(r,e),A.startListening(R,e)}),te=ki(()=>{var j;return W.jsx(nN,{destinations:m.destinations,selectedDestinationNodeUid:(j=m.selectedDestination)==null?void 0:j.nodeUid,forceDisplay:m.currentPageKey===Wn.DESTINATIONS,onDestinationClick:dr(U=>h.onDestinationRoutesClick(m,U))})}),ee=ki(()=>W.jsx(oV,{trailerPoint:r.trailerPoint,activeRoute:r.activeRoute})),de=ki(()=>W.jsx(iV,{mode:r.themeMode,onLoad:Q,onDragStart:dr(()=>o.onMapDragStart(r)),Destinations:te,TrailerOrWaypointMarkers:ee,PlayerMarker:KN})),G=ki(()=>r.activeRouteDirection?W.jsx(MN,{direction:r.activeRouteDirection.direction,distanceMeters:r.activeRouteDirection.distanceMeters,laneHint:r.activeRouteDirection.laneHint,thenHint:r.activeRouteDirection.thenHint}):W.jsx(W.Fragment,{}));return{App:()=>W.jsx(OV,{store:r,SlippyMap:de,NavSheet:b,Directions:G,Controls:O})}}const OV=e=>{console.log("render app");const{SlippyMap:t,NavSheet:r,Directions:o,Controls:l}=e;return W.jsxs(W.Fragment,{children:[W.jsx(t,{}),W.jsx(l,{}),W.jsx(BV,{store:e.store,children:W.jsx(r,{})}),W.jsx($V,{store:e.store,children:W.jsx(o,{})})]})},BV=ki(e=>W.jsx(Xb,{in:e.store.showNavSheet,direction:"right",children:W.jsx(Ei,{padding:1,height:"100vh",width:"42vw",sx:{position:"absolute",top:0,left:0,zIndex:999},children:e.children})})),$V=ki(e=>W.jsx(Xb,{in:e.store.activeRoute!=null,direction:"right",children:W.jsx(Ei,{padding:1,height:"100vh",width:"42vw",sx:{position:"absolute",top:0,left:0,pointerEvents:"none"},children:e.children})})),FV=e=>new Promise(t=>setTimeout(t,e)),vc=36.282,_c=-114.806,O_=[[_c,vc],[_c+1,vc+1]];let B_="light";const NV={setActiveRoute:{mutate:()=>Promise.resolve(void 0)},onRouteUpdate:{subscribe:(e,t)=>(setTimeout(()=>{var r;return(r=t.onData)==null?void 0:r.call(t,{id:"active",segments:[{key:"key",lonLats:O_,distance:0,time:0,strategy:"shortest"}]})},500),{unsubscribe:()=>{}})},onDirectionUpdate:{subscribe:(e,t)=>{const r=setInterval(()=>{var o;return(o=t.onData)==null?void 0:o.call(t,{direction:Math.random()>.5?Lt.THROUGH:Lt.LEFT,distanceMeters:Math.random()*2e3,laneHint:{lanes:Array.from({length:Math.round(Math.random()*4)},()=>({branches:Array.from({length:Math.ceil(Math.random()*3)},()=>Math.random()>.5?Lt.THROUGH:Lt.LEFT),activeBranch:Math.random()>.5?Lt.LEFT:Lt.THROUGH}))}})},2e3);return{unsubscribe:()=>clearInterval(r)}}},onThemeModeUpdate:{subscribe:(e,t)=>{const r=setInterval(()=>{var o;(o=t.onData)==null||o.call(t,B_),B_=B_==="light"?"dark":"light"},5e3);return{unsubscribe:()=>clearInterval(r)}}},onTrailerUpdate:{subscribe:(e,t)=>{const r=setInterval(()=>{var o;return(o=t.onData)==null?void 0:o.call(t,Math.random()<.5?{position:[_c,vc],attached:!1}:void 0)},1e3);return{unsubscribe:()=>clearInterval(r)}}},onPositionUpdate:{subscribe:(e,t)=>{let r=0;const o=setInterval(()=>{var l;(l=t.onData)==null||l.call(t,{bearing:0,position:[++r*2e-4+_c,vc],scale:0,speedLimit:30,speedMph:60})},500);return{unsubscribe:()=>clearInterval(o)}}},previewRoutes:{query:async()=>(await yk(2e3),Array.from({length:2},(e,t)=>({id:`preview-${t}`,segments:[{key:`key-0-${t}`,lonLats:[O_.at(0),[_c+Math.pow(.3,t+1),vc+Math.pow(.6,t+1)]],nodeUids:["0","1"],distance:0,time:0,strategy:"shortest"},{key:`key-1-${t}`,lonLats:[[_c+Math.pow(.3,t+1),vc+Math.pow(.6,t+1)],O_.at(-1)],nodeUids:["1","2"],distance:0,time:0,strategy:"shortest"}]})))},search:{query:async()=>(await yk(2e3),Array.from({length:3},(e,t)=>({nodeUid:t.toString(),lonLat:[_c+t*.1,vc+.1],distanceMeters:0,bearing:0,name:"search result",logoUrl:"/icons/gas_ico.png",city:"city",state:"state",isCityStateApproximate:!1,facilityUrls:t===1?["/icons/gas_ico.png","/icons/parking_ico.png","/icons/service_ico.png"]:[]})))}},yk=e=>new Promise(t=>setTimeout(t,e));I5({enforceActions:"always",computedRequiresReaction:!0,reactionRequiresObservable:!0,observableRequiresReaction:!0,disableErrorBoundaries:!0});const TP=GI(),jV=document.getElementById("root"),VV=N5(jV),tw=new URLSearchParams(window.location.search),UV=tw.has("fake"),GV=tw.get("host")??"localhost",HV=tw.get("port")??62840,qV=UV?NV:B6({links:[z6({client:M6({url:`ws://${GV}:${HV}`})})]}),{App:WV}=RV({appClient:qV,transitionDurationMs:TP.transitions.duration.standard});VV.render(W.jsx(pe.StrictMode,{children:W.jsx(m6,{theme:{[x0]:TP},children:W.jsxs(SD,{children:[W.jsx(VO,{}),W.jsx(WV,{})]})})}));
