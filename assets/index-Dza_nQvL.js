var e5=Object.defineProperty;var t5=(e,t,r)=>t in e?e5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var k2=(e,t,r)=>t5(e,typeof t!="symbol"?t+"":t,r);function zb(e,t){for(var r=0;r<t.length;r++){const o=t[r];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in e)){const d=Object.getOwnPropertyDescriptor(o,s);d&&Object.defineProperty(e,s,d.get?d:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function r(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(s){if(s.ep)return;s.ep=!0;const d=r(s);fetch(s.href,d)}})();var s1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gy(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function cs(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}),r}var gE={exports:{}},qy={},yE={exports:{}},Mr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff=Symbol.for("react.element"),r5=Symbol.for("react.portal"),n5=Symbol.for("react.fragment"),i5=Symbol.for("react.strict_mode"),o5=Symbol.for("react.profiler"),a5=Symbol.for("react.provider"),s5=Symbol.for("react.context"),l5=Symbol.for("react.forward_ref"),c5=Symbol.for("react.suspense"),u5=Symbol.for("react.memo"),d5=Symbol.for("react.lazy"),E2=Symbol.iterator;function h5(e){return e===null||typeof e!="object"?null:(e=E2&&e[E2]||e["@@iterator"],typeof e=="function"?e:null)}var vE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_E=Object.assign,xE={};function Ed(e,t,r){this.props=e,this.context=t,this.refs=xE,this.updater=r||vE}Ed.prototype.isReactComponent={};Ed.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ed.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bE(){}bE.prototype=Ed.prototype;function Rb(e,t,r){this.props=e,this.context=t,this.refs=xE,this.updater=r||vE}var Mb=Rb.prototype=new bE;Mb.constructor=Rb;_E(Mb,Ed.prototype);Mb.isPureReactComponent=!0;var A2=Array.isArray,wE=Object.prototype.hasOwnProperty,Db={current:null},SE={key:!0,ref:!0,__self:!0,__source:!0};function CE(e,t,r){var o,s={},d=null,p=null;if(t!=null)for(o in t.ref!==void 0&&(p=t.ref),t.key!==void 0&&(d=""+t.key),t)wE.call(t,o)&&!SE.hasOwnProperty(o)&&(s[o]=t[o]);var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){for(var x=Array(c),w=0;w<c;w++)x[w]=arguments[w+2];s.children=x}if(e&&e.defaultProps)for(o in c=e.defaultProps,c)s[o]===void 0&&(s[o]=c[o]);return{$$typeof:ff,type:e,key:d,ref:p,props:s,_owner:Db.current}}function p5(e,t){return{$$typeof:ff,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lb(e){return typeof e=="object"&&e!==null&&e.$$typeof===ff}function f5(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var z2=/\/+/g;function y_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?f5(""+e.key):t.toString(36)}function Ig(e,t,r,o,s){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(d){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case ff:case r5:p=!0}}if(p)return p=e,s=s(p),e=o===""?"."+y_(p,0):o,A2(s)?(r="",e!=null&&(r=e.replace(z2,"$&/")+"/"),Ig(s,t,r,"",function(w){return w})):s!=null&&(Lb(s)&&(s=p5(s,r+(!s.key||p&&p.key===s.key?"":(""+s.key).replace(z2,"$&/")+"/")+e)),t.push(s)),1;if(p=0,o=o===""?".":o+":",A2(e))for(var c=0;c<e.length;c++){d=e[c];var x=o+y_(d,c);p+=Ig(d,t,r,x,s)}else if(x=h5(e),typeof x=="function")for(e=x.call(e),c=0;!(d=e.next()).done;)d=d.value,x=o+y_(d,c++),p+=Ig(d,t,r,x,s);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return p}function Xm(e,t,r){if(e==null)return e;var o=[],s=0;return Ig(e,o,"","",function(d){return t.call(r,d,s++)}),o}function m5(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var uo={current:null},Tg={transition:null},g5={ReactCurrentDispatcher:uo,ReactCurrentBatchConfig:Tg,ReactCurrentOwner:Db};function IE(){throw Error("act(...) is not supported in production builds of React.")}Mr.Children={map:Xm,forEach:function(e,t,r){Xm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Xm(e,function(){t++}),t},toArray:function(e){return Xm(e,function(t){return t})||[]},only:function(e){if(!Lb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mr.Component=Ed;Mr.Fragment=n5;Mr.Profiler=o5;Mr.PureComponent=Rb;Mr.StrictMode=i5;Mr.Suspense=c5;Mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g5;Mr.act=IE;Mr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=_E({},e.props),s=e.key,d=e.ref,p=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,p=Db.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(x in t)wE.call(t,x)&&!SE.hasOwnProperty(x)&&(o[x]=t[x]===void 0&&c!==void 0?c[x]:t[x])}var x=arguments.length-2;if(x===1)o.children=r;else if(1<x){c=Array(x);for(var w=0;w<x;w++)c[w]=arguments[w+2];o.children=c}return{$$typeof:ff,type:e.type,key:s,ref:d,props:o,_owner:p}};Mr.createContext=function(e){return e={$$typeof:s5,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:a5,_context:e},e.Consumer=e};Mr.createElement=CE;Mr.createFactory=function(e){var t=CE.bind(null,e);return t.type=e,t};Mr.createRef=function(){return{current:null}};Mr.forwardRef=function(e){return{$$typeof:l5,render:e}};Mr.isValidElement=Lb;Mr.lazy=function(e){return{$$typeof:d5,_payload:{_status:-1,_result:e},_init:m5}};Mr.memo=function(e,t){return{$$typeof:u5,type:e,compare:t===void 0?null:t}};Mr.startTransition=function(e){var t=Tg.transition;Tg.transition={};try{e()}finally{Tg.transition=t}};Mr.unstable_act=IE;Mr.useCallback=function(e,t){return uo.current.useCallback(e,t)};Mr.useContext=function(e){return uo.current.useContext(e)};Mr.useDebugValue=function(){};Mr.useDeferredValue=function(e){return uo.current.useDeferredValue(e)};Mr.useEffect=function(e,t){return uo.current.useEffect(e,t)};Mr.useId=function(){return uo.current.useId()};Mr.useImperativeHandle=function(e,t,r){return uo.current.useImperativeHandle(e,t,r)};Mr.useInsertionEffect=function(e,t){return uo.current.useInsertionEffect(e,t)};Mr.useLayoutEffect=function(e,t){return uo.current.useLayoutEffect(e,t)};Mr.useMemo=function(e,t){return uo.current.useMemo(e,t)};Mr.useReducer=function(e,t,r){return uo.current.useReducer(e,t,r)};Mr.useRef=function(e){return uo.current.useRef(e)};Mr.useState=function(e){return uo.current.useState(e)};Mr.useSyncExternalStore=function(e,t,r){return uo.current.useSyncExternalStore(e,t,r)};Mr.useTransition=function(){return uo.current.useTransition()};Mr.version="18.3.1";yE.exports=Mr;var R=yE.exports;const Pg=Gy(R),ey=zb({__proto__:null,default:Pg},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y5=R,v5=Symbol.for("react.element"),_5=Symbol.for("react.fragment"),x5=Object.prototype.hasOwnProperty,b5=y5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w5={key:!0,ref:!0,__self:!0,__source:!0};function TE(e,t,r){var o,s={},d=null,p=null;r!==void 0&&(d=""+r),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(p=t.ref);for(o in t)x5.call(t,o)&&!w5.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)s[o]===void 0&&(s[o]=t[o]);return{$$typeof:v5,type:e,key:d,ref:p,props:s,_owner:b5.current}}qy.Fragment=_5;qy.jsx=TE;qy.jsxs=TE;gE.exports=qy;var te=gE.exports;const Xh={grey:{50:"#FBFCFE",100:"#F0F4F8",200:"#DDE7EE",300:"#CDD7E1",400:"#9FA6AD",500:"#636B74",600:"#555E68",700:"#32383E",800:"#171A1C",900:"#0B0D0E"},blue:{50:"#EDF5FD",100:"#E3EFFB",200:"#C7DFF7",300:"#97C3F0",400:"#4393E4",500:"#0B6BCB",600:"#185EA5",700:"#12467B",800:"#0A2744",900:"#051423"},yellow:{50:"#FEFAF6",100:"#FDF0E1",200:"#FCE1C2",300:"#F3C896",400:"#EA9A3E",500:"#9A5B13",600:"#72430D",700:"#492B08",800:"#2E1B05",900:"#1D1002"},red:{50:"#FEF6F6",100:"#FCE4E4",200:"#F7C5C5",300:"#F09898",400:"#E47474",500:"#C41C1C",600:"#A51818",700:"#7D1212",800:"#430A0A",900:"#240505"},green:{50:"#F6FEF6",100:"#E3FBE3",200:"#C7F7C7",300:"#A1E8A1",400:"#51BC51",500:"#1F7A1F",600:"#136C13",700:"#0A470A",800:"#042F04",900:"#021D02"}},Zy="$$joy";function $s(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const S5=Object.freeze(Object.defineProperty({__proto__:null,default:$s},Symbol.toStringTag,{value:"Module"}));function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},G.apply(null,arguments)}const C5=Object.freeze(Object.defineProperty({__proto__:null,get default(){return G}},Symbol.toStringTag,{value:"Module"}));var I5=!1;function T5(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function P5(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var k5=function(){function e(r){var o=this;this._insertTag=function(s){var d;o.tags.length===0?o.insertionPoint?d=o.insertionPoint.nextSibling:o.prepend?d=o.container.firstChild:d=o.before:d=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(s,d),o.tags.push(s)},this.isSpeedy=r.speedy===void 0?!I5:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(P5(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var d=T5(s);try{d.insertRule(o,d.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){var s;return(s=o.parentNode)==null?void 0:s.removeChild(o)}),this.tags=[],this.ctr=0},e}(),Zi="-ms-",ty="-moz-",Xr="-webkit-",PE="comm",$b="rule",Ob="decl",E5="@import",kE="@keyframes",A5="@layer",z5=Math.abs,Ky=String.fromCharCode,R5=Object.assign;function M5(e,t){return zi(e,0)^45?(((t<<2^zi(e,0))<<2^zi(e,1))<<2^zi(e,2))<<2^zi(e,3):0}function EE(e){return e.trim()}function D5(e,t){return(e=t.exec(e))?e[0]:e}function Jr(e,t,r){return e.replace(t,r)}function l1(e,t){return e.indexOf(t)}function zi(e,t){return e.charCodeAt(t)|0}function Fp(e,t,r){return e.slice(t,r)}function es(e){return e.length}function Bb(e){return e.length}function Jm(e,t){return t.push(e),e}function L5(e,t){return e.map(t).join("")}var Xy=1,dd=1,AE=0,ko=0,ri=0,Ad="";function Jy(e,t,r,o,s,d,p){return{value:e,root:t,parent:r,type:o,props:s,children:d,line:Xy,column:dd,length:p,return:""}}function Jh(e,t){return R5(Jy("",null,null,"",null,null,0),e,{length:-e.length},t)}function $5(){return ri}function O5(){return ri=ko>0?zi(Ad,--ko):0,dd--,ri===10&&(dd=1,Xy--),ri}function Vo(){return ri=ko<AE?zi(Ad,ko++):0,dd++,ri===10&&(dd=1,Xy++),ri}function ns(){return zi(Ad,ko)}function kg(){return ko}function mf(e,t){return Fp(Ad,e,t)}function Np(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function zE(e){return Xy=dd=1,AE=es(Ad=e),ko=0,[]}function RE(e){return Ad="",e}function Eg(e){return EE(mf(ko-1,c1(e===91?e+2:e===40?e+1:e)))}function B5(e){for(;(ri=ns())&&ri<33;)Vo();return Np(e)>2||Np(ri)>3?"":" "}function F5(e,t){for(;--t&&Vo()&&!(ri<48||ri>102||ri>57&&ri<65||ri>70&&ri<97););return mf(e,kg()+(t<6&&ns()==32&&Vo()==32))}function c1(e){for(;Vo();)switch(ri){case e:return ko;case 34:case 39:e!==34&&e!==39&&c1(ri);break;case 40:e===41&&c1(e);break;case 92:Vo();break}return ko}function N5(e,t){for(;Vo()&&e+ri!==57;)if(e+ri===84&&ns()===47)break;return"/*"+mf(t,ko-1)+"*"+Ky(e===47?e:Vo())}function j5(e){for(;!Np(ns());)Vo();return mf(e,ko)}function V5(e){return RE(Ag("",null,null,null,[""],e=zE(e),0,[0],e))}function Ag(e,t,r,o,s,d,p,c,x){for(var w=0,T=0,k=p,E=0,M=0,N=0,j=1,q=1,B=1,D=0,$="",ie=s,J=d,K=o,se=$;q;)switch(N=D,D=Vo()){case 40:if(N!=108&&zi(se,k-1)==58){l1(se+=Jr(Eg(D),"&","&\f"),"&\f")!=-1&&(B=-1);break}case 34:case 39:case 91:se+=Eg(D);break;case 9:case 10:case 13:case 32:se+=B5(N);break;case 92:se+=F5(kg()-1,7);continue;case 47:switch(ns()){case 42:case 47:Jm(U5(N5(Vo(),kg()),t,r),x);break;default:se+="/"}break;case 123*j:c[w++]=es(se)*B;case 125*j:case 59:case 0:switch(D){case 0:case 125:q=0;case 59+T:B==-1&&(se=Jr(se,/\f/g,"")),M>0&&es(se)-k&&Jm(M>32?M2(se+";",o,r,k-1):M2(Jr(se," ","")+";",o,r,k-2),x);break;case 59:se+=";";default:if(Jm(K=R2(se,t,r,w,T,s,c,$,ie=[],J=[],k),d),D===123)if(T===0)Ag(se,t,K,K,ie,d,k,c,J);else switch(E===99&&zi(se,3)===110?100:E){case 100:case 108:case 109:case 115:Ag(e,K,K,o&&Jm(R2(e,K,K,0,0,s,c,$,s,ie=[],k),J),s,J,k,c,o?ie:J);break;default:Ag(se,K,K,K,[""],J,0,c,J)}}w=T=M=0,j=B=1,$=se="",k=p;break;case 58:k=1+es(se),M=N;default:if(j<1){if(D==123)--j;else if(D==125&&j++==0&&O5()==125)continue}switch(se+=Ky(D),D*j){case 38:B=T>0?1:(se+="\f",-1);break;case 44:c[w++]=(es(se)-1)*B,B=1;break;case 64:ns()===45&&(se+=Eg(Vo())),E=ns(),T=k=es($=se+=j5(kg())),D++;break;case 45:N===45&&es(se)==2&&(j=0)}}return d}function R2(e,t,r,o,s,d,p,c,x,w,T){for(var k=s-1,E=s===0?d:[""],M=Bb(E),N=0,j=0,q=0;N<o;++N)for(var B=0,D=Fp(e,k+1,k=z5(j=p[N])),$=e;B<M;++B)($=EE(j>0?E[B]+" "+D:Jr(D,/&\f/g,E[B])))&&(x[q++]=$);return Jy(e,t,r,s===0?$b:c,x,w,T)}function U5(e,t,r){return Jy(e,t,r,PE,Ky($5()),Fp(e,2,-2),0)}function M2(e,t,r,o){return Jy(e,t,r,Ob,Fp(e,0,o),Fp(e,o+1,-1),o)}function Qu(e,t){for(var r="",o=Bb(e),s=0;s<o;s++)r+=t(e[s],s,e,t)||"";return r}function H5(e,t,r,o){switch(e.type){case A5:if(e.children.length)break;case E5:case Ob:return e.return=e.return||e.value;case PE:return"";case kE:return e.return=e.value+"{"+Qu(e.children,o)+"}";case $b:e.value=e.props.join(",")}return es(r=Qu(e.children,o))?e.return=e.value+"{"+r+"}":""}function W5(e){var t=Bb(e);return function(r,o,s,d){for(var p="",c=0;c<t;c++)p+=e[c](r,o,s,d)||"";return p}}function G5(e){return function(t){t.root||(t=t.return)&&e(t)}}function ME(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var q5=function(t,r,o){for(var s=0,d=0;s=d,d=ns(),s===38&&d===12&&(r[o]=1),!Np(d);)Vo();return mf(t,ko)},Z5=function(t,r){var o=-1,s=44;do switch(Np(s)){case 0:s===38&&ns()===12&&(r[o]=1),t[o]+=q5(ko-1,r,o);break;case 2:t[o]+=Eg(s);break;case 4:if(s===44){t[++o]=ns()===58?"&\f":"",r[o]=t[o].length;break}default:t[o]+=Ky(s)}while(s=Vo());return t},K5=function(t,r){return RE(Z5(zE(t),r))},D2=new WeakMap,X5=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,o=t.parent,s=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!D2.get(o))&&!s){D2.set(t,!0);for(var d=[],p=K5(r,d),c=o.props,x=0,w=0;x<p.length;x++)for(var T=0;T<c.length;T++,w++)t.props[w]=d[x]?p[x].replace(/&\f/g,c[T]):c[T]+" "+p[x]}}},J5=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function DE(e,t){switch(M5(e,t)){case 5103:return Xr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Xr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Xr+e+ty+e+Zi+e+e;case 6828:case 4268:return Xr+e+Zi+e+e;case 6165:return Xr+e+Zi+"flex-"+e+e;case 5187:return Xr+e+Jr(e,/(\w+).+(:[^]+)/,Xr+"box-$1$2"+Zi+"flex-$1$2")+e;case 5443:return Xr+e+Zi+"flex-item-"+Jr(e,/flex-|-self/,"")+e;case 4675:return Xr+e+Zi+"flex-line-pack"+Jr(e,/align-content|flex-|-self/,"")+e;case 5548:return Xr+e+Zi+Jr(e,"shrink","negative")+e;case 5292:return Xr+e+Zi+Jr(e,"basis","preferred-size")+e;case 6060:return Xr+"box-"+Jr(e,"-grow","")+Xr+e+Zi+Jr(e,"grow","positive")+e;case 4554:return Xr+Jr(e,/([^-])(transform)/g,"$1"+Xr+"$2")+e;case 6187:return Jr(Jr(Jr(e,/(zoom-|grab)/,Xr+"$1"),/(image-set)/,Xr+"$1"),e,"")+e;case 5495:case 3959:return Jr(e,/(image-set\([^]*)/,Xr+"$1$`$1");case 4968:return Jr(Jr(e,/(.+:)(flex-)?(.*)/,Xr+"box-pack:$3"+Zi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Xr+e+e;case 4095:case 3583:case 4068:case 2532:return Jr(e,/(.+)-inline(.+)/,Xr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(es(e)-1-t>6)switch(zi(e,t+1)){case 109:if(zi(e,t+4)!==45)break;case 102:return Jr(e,/(.+:)(.+)-([^]+)/,"$1"+Xr+"$2-$3$1"+ty+(zi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~l1(e,"stretch")?DE(Jr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(zi(e,t+1)!==115)break;case 6444:switch(zi(e,es(e)-3-(~l1(e,"!important")&&10))){case 107:return Jr(e,":",":"+Xr)+e;case 101:return Jr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Xr+(zi(e,14)===45?"inline-":"")+"box$3$1"+Xr+"$2$3$1"+Zi+"$2box$3")+e}break;case 5936:switch(zi(e,t+11)){case 114:return Xr+e+Zi+Jr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Xr+e+Zi+Jr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Xr+e+Zi+Jr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Xr+e+Zi+e+e}return e}var Y5=function(t,r,o,s){if(t.length>-1&&!t.return)switch(t.type){case Ob:t.return=DE(t.value,t.length);break;case kE:return Qu([Jh(t,{value:Jr(t.value,"@","@"+Xr)})],s);case $b:if(t.length)return L5(t.props,function(d){switch(D5(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Qu([Jh(t,{props:[Jr(d,/:(read-\w+)/,":"+ty+"$1")]})],s);case"::placeholder":return Qu([Jh(t,{props:[Jr(d,/:(plac\w+)/,":"+Xr+"input-$1")]}),Jh(t,{props:[Jr(d,/:(plac\w+)/,":"+ty+"$1")]}),Jh(t,{props:[Jr(d,/:(plac\w+)/,Zi+"input-$1")]})],s)}return""})}},Q5=[Y5],LE=function(t){var r=t.key;if(r==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(j){var q=j.getAttribute("data-emotion");q.indexOf(" ")!==-1&&(document.head.appendChild(j),j.setAttribute("data-s",""))})}var s=t.stylisPlugins||Q5,d={},p,c=[];p=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(j){for(var q=j.getAttribute("data-emotion").split(" "),B=1;B<q.length;B++)d[q[B]]=!0;c.push(j)});var x,w=[X5,J5];{var T,k=[H5,G5(function(j){T.insert(j)})],E=W5(w.concat(s,k)),M=function(q){return Qu(V5(q),E)};x=function(q,B,D,$){T=D,M(q?q+"{"+B.styles+"}":B.styles),$&&(N.inserted[B.name]=!0)}}var N={key:r,sheet:new k5({key:r,container:p,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:x};return N.sheet.hydrate(c),N},$E={exports:{}},nn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xi=typeof Symbol=="function"&&Symbol.for,Fb=xi?Symbol.for("react.element"):60103,Nb=xi?Symbol.for("react.portal"):60106,Yy=xi?Symbol.for("react.fragment"):60107,Qy=xi?Symbol.for("react.strict_mode"):60108,ev=xi?Symbol.for("react.profiler"):60114,tv=xi?Symbol.for("react.provider"):60109,rv=xi?Symbol.for("react.context"):60110,jb=xi?Symbol.for("react.async_mode"):60111,nv=xi?Symbol.for("react.concurrent_mode"):60111,iv=xi?Symbol.for("react.forward_ref"):60112,ov=xi?Symbol.for("react.suspense"):60113,e3=xi?Symbol.for("react.suspense_list"):60120,av=xi?Symbol.for("react.memo"):60115,sv=xi?Symbol.for("react.lazy"):60116,t3=xi?Symbol.for("react.block"):60121,r3=xi?Symbol.for("react.fundamental"):60117,n3=xi?Symbol.for("react.responder"):60118,i3=xi?Symbol.for("react.scope"):60119;function Go(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Fb:switch(e=e.type,e){case jb:case nv:case Yy:case ev:case Qy:case ov:return e;default:switch(e=e&&e.$$typeof,e){case rv:case iv:case sv:case av:case tv:return e;default:return t}}case Nb:return t}}}function OE(e){return Go(e)===nv}nn.AsyncMode=jb;nn.ConcurrentMode=nv;nn.ContextConsumer=rv;nn.ContextProvider=tv;nn.Element=Fb;nn.ForwardRef=iv;nn.Fragment=Yy;nn.Lazy=sv;nn.Memo=av;nn.Portal=Nb;nn.Profiler=ev;nn.StrictMode=Qy;nn.Suspense=ov;nn.isAsyncMode=function(e){return OE(e)||Go(e)===jb};nn.isConcurrentMode=OE;nn.isContextConsumer=function(e){return Go(e)===rv};nn.isContextProvider=function(e){return Go(e)===tv};nn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fb};nn.isForwardRef=function(e){return Go(e)===iv};nn.isFragment=function(e){return Go(e)===Yy};nn.isLazy=function(e){return Go(e)===sv};nn.isMemo=function(e){return Go(e)===av};nn.isPortal=function(e){return Go(e)===Nb};nn.isProfiler=function(e){return Go(e)===ev};nn.isStrictMode=function(e){return Go(e)===Qy};nn.isSuspense=function(e){return Go(e)===ov};nn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Yy||e===nv||e===ev||e===Qy||e===ov||e===e3||typeof e=="object"&&e!==null&&(e.$$typeof===sv||e.$$typeof===av||e.$$typeof===tv||e.$$typeof===rv||e.$$typeof===iv||e.$$typeof===r3||e.$$typeof===n3||e.$$typeof===i3||e.$$typeof===t3)};nn.typeOf=Go;$E.exports=nn;var o3=$E.exports,BE=o3,a3={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s3={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},FE={};FE[BE.ForwardRef]=a3;FE[BE.Memo]=s3;var l3=!0;function NE(e,t,r){var o="";return r.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(o+=s+" ")}),o}var Vb=function(t,r,o){var s=t.key+"-"+r.name;(o===!1||l3===!1)&&t.registered[s]===void 0&&(t.registered[s]=r.styles)},Ub=function(t,r,o){Vb(t,r,o);var s=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var d=r;do t.insert(r===d?"."+s:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function c3(e){for(var t=0,r,o=0,s=e.length;s>=4;++o,s-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var u3={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},d3=/[A-Z]|^ms/g,h3=/_EMO_([^_]+?)_([^]*?)_EMO_/g,jE=function(t){return t.charCodeAt(1)===45},L2=function(t){return t!=null&&typeof t!="boolean"},v_=ME(function(e){return jE(e)?e:e.replace(d3,"-$&").toLowerCase()}),$2=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(h3,function(o,s,d){return ts={name:s,styles:d,next:ts},s})}return u3[t]!==1&&!jE(t)&&typeof r=="number"&&r!==0?r+"px":r};function jp(e,t,r){if(r==null)return"";var o=r;if(o.__emotion_styles!==void 0)return o;switch(typeof r){case"boolean":return"";case"object":{var s=r;if(s.anim===1)return ts={name:s.name,styles:s.styles,next:ts},s.name;var d=r;if(d.styles!==void 0){var p=d.next;if(p!==void 0)for(;p!==void 0;)ts={name:p.name,styles:p.styles,next:ts},p=p.next;var c=d.styles+";";return c}return p3(e,t,r)}case"function":{if(e!==void 0){var x=ts,w=r(e);return ts=x,jp(e,t,w)}break}}var T=r;if(t==null)return T;var k=t[T];return k!==void 0?k:T}function p3(e,t,r){var o="";if(Array.isArray(r))for(var s=0;s<r.length;s++)o+=jp(e,t,r[s])+";";else for(var d in r){var p=r[d];if(typeof p!="object"){var c=p;t!=null&&t[c]!==void 0?o+=d+"{"+t[c]+"}":L2(c)&&(o+=v_(d)+":"+$2(d,c)+";")}else if(Array.isArray(p)&&typeof p[0]=="string"&&(t==null||t[p[0]]===void 0))for(var x=0;x<p.length;x++)L2(p[x])&&(o+=v_(d)+":"+$2(d,p[x])+";");else{var w=jp(e,t,p);switch(d){case"animation":case"animationName":{o+=v_(d)+":"+w+";";break}default:o+=d+"{"+w+"}"}}}return o}var O2=/label:\s*([^\s;{]+)\s*(;|$)/g,ts;function lv(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var o=!0,s="";ts=void 0;var d=e[0];if(d==null||d.raw===void 0)o=!1,s+=jp(r,t,d);else{var p=d;s+=p[0]}for(var c=1;c<e.length;c++)if(s+=jp(r,t,e[c]),o){var x=d;s+=x[c]}O2.lastIndex=0;for(var w="",T;(T=O2.exec(s))!==null;)w+="-"+T[1];var k=c3(s)+w;return{name:k,styles:s,next:ts}}var f3=function(t){return t()},VE=ey.useInsertionEffect?ey.useInsertionEffect:!1,UE=VE||f3,B2=VE||R.useLayoutEffect,m3=!1,HE=R.createContext(typeof HTMLElement<"u"?LE({key:"css"}):null),g3=HE.Provider,Hb=function(t){return R.forwardRef(function(r,o){var s=R.useContext(HE);return t(r,s,o)})},zd=R.createContext({}),Wb={}.hasOwnProperty,u1="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",y3=function(t,r){var o={};for(var s in r)Wb.call(r,s)&&(o[s]=r[s]);return o[u1]=t,o},v3=function(t){var r=t.cache,o=t.serialized,s=t.isStringTag;return Vb(r,o,s),UE(function(){return Ub(r,o,s)}),null},_3=Hb(function(e,t,r){var o=e.css;typeof o=="string"&&t.registered[o]!==void 0&&(o=t.registered[o]);var s=e[u1],d=[o],p="";typeof e.className=="string"?p=NE(t.registered,d,e.className):e.className!=null&&(p=e.className+" ");var c=lv(d,void 0,R.useContext(zd));p+=t.key+"-"+c.name;var x={};for(var w in e)Wb.call(e,w)&&w!=="css"&&w!==u1&&!m3&&(x[w]=e[w]);return x.className=p,r&&(x.ref=r),R.createElement(R.Fragment,null,R.createElement(v3,{cache:t,serialized:c,isStringTag:typeof s=="string"}),R.createElement(s,x))}),x3=_3,b3=function(t,r){var o=arguments;if(r==null||!Wb.call(r,"css"))return R.createElement.apply(void 0,o);var s=o.length,d=new Array(s);d[0]=x3,d[1]=y3(t,r);for(var p=2;p<s;p++)d[p]=o[p];return R.createElement.apply(null,d)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(b3);var w3=Hb(function(e,t){var r=e.styles,o=lv([r],void 0,R.useContext(zd)),s=R.useRef();return B2(function(){var d=t.key+"-global",p=new t.sheet.constructor({key:d,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),c=!1,x=document.querySelector('style[data-emotion="'+d+" "+o.name+'"]');return t.sheet.tags.length&&(p.before=t.sheet.tags[0]),x!==null&&(c=!0,x.setAttribute("data-emotion",d),p.hydrate([x])),s.current=[p,c],function(){p.flush()}},[t]),B2(function(){var d=s.current,p=d[0],c=d[1];if(c){d[1]=!1;return}if(o.next!==void 0&&Ub(t,o.next,!0),p.tags.length){var x=p.tags[p.tags.length-1].nextElementSibling;p.before=x,p.flush()}t.insert("",o,p,!1)},[t,o.name]),null});function Gb(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return lv(t)}function WE(){var e=Gb.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var S3=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,C3=ME(function(e){return S3.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),I3=C3,T3=function(t){return t!=="theme"},F2=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?I3:T3},N2=function(t,r,o){var s;if(r){var d=r.shouldForwardProp;s=t.__emotion_forwardProp&&d?function(p){return t.__emotion_forwardProp(p)&&d(p)}:d}return typeof s!="function"&&o&&(s=t.__emotion_forwardProp),s},P3=function(t){var r=t.cache,o=t.serialized,s=t.isStringTag;return Vb(r,o,s),UE(function(){return Ub(r,o,s)}),null},k3=function e(t,r){var o=t.__emotion_real===t,s=o&&t.__emotion_base||t,d,p;r!==void 0&&(d=r.label,p=r.target);var c=N2(t,r,o),x=c||F2(s),w=!x("as");return function(){var T=arguments,k=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&k.push("label:"+d+";"),T[0]==null||T[0].raw===void 0)k.push.apply(k,T);else{var E=T[0];k.push(E[0]);for(var M=T.length,N=1;N<M;N++)k.push(T[N],E[N])}var j=Hb(function(q,B,D){var $=w&&q.as||s,ie="",J=[],K=q;if(q.theme==null){K={};for(var se in q)K[se]=q[se];K.theme=R.useContext(zd)}typeof q.className=="string"?ie=NE(B.registered,J,q.className):q.className!=null&&(ie=q.className+" ");var ae=lv(k.concat(J),B.registered,K);ie+=B.key+"-"+ae.name,p!==void 0&&(ie+=" "+p);var we=w&&c===void 0?F2($):x,xe={};for(var ke in q)w&&ke==="as"||we(ke)&&(xe[ke]=q[ke]);return xe.className=ie,D&&(xe.ref=D),R.createElement(R.Fragment,null,R.createElement(P3,{cache:B,serialized:ae,isStringTag:typeof $=="string"}),R.createElement($,xe))});return j.displayName=d!==void 0?d:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",j.defaultProps=t.defaultProps,j.__emotion_real=j,j.__emotion_base=s,j.__emotion_styles=k,j.__emotion_forwardProp=c,Object.defineProperty(j,"toString",{value:function(){return"."+p}}),j.withComponent=function(q,B){var D=e(q,G({},r,B,{shouldForwardProp:N2(j,B,!0)}));return D.apply(void 0,k)},j}},E3=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],d1=k3.bind(null);E3.forEach(function(e){d1[e]=d1(e)});let h1;typeof document=="object"&&(h1=LE({key:"css",prepend:!0}));function A3(e){const{injectFirst:t,children:r}=e;return t&&h1?te.jsx(g3,{value:h1,children:r}):r}function z3(e){return e==null||Object.keys(e).length===0}function Sp(e){const{styles:t,defaultTheme:r={}}=e,o=typeof t=="function"?s=>t(z3(s)?r:s):t;return te.jsx(w3,{styles:o})}function GE(e,t){return d1(e,t)}const qE=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},R3=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:Sp,StyledEngineProvider:A3,ThemeContext:zd,css:Gb,default:GE,internal_processStyles:qE,keyframes:WE},Symbol.toStringTag,{value:"Module"}));function er(e,t){if(e==null)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.includes(o))continue;r[o]=e[o]}return r}function Rs(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function ZE(e){if(R.isValidElement(e)||!Rs(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=ZE(e[r])}),t}function di(e,t,r={clone:!0}){const o=r.clone?G({},e):e;return Rs(e)&&Rs(t)&&Object.keys(t).forEach(s=>{R.isValidElement(t[s])?o[s]=t[s]:Rs(t[s])&&Object.prototype.hasOwnProperty.call(e,s)&&Rs(e[s])?o[s]=di(e[s],t[s],r):r.clone?o[s]=Rs(t[s])?ZE(t[s]):t[s]:o[s]=t[s]}),o}const M3=Object.freeze(Object.defineProperty({__proto__:null,default:di,isPlainObject:Rs},Symbol.toStringTag,{value:"Module"})),D3=["values","unit","step"],L3=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,o)=>r.val-o.val),t.reduce((r,o)=>G({},r,{[o.key]:o.val}),{})};function qb(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:o=5}=e,s=er(e,D3),d=L3(t),p=Object.keys(d);function c(E){return`@media (min-width:${typeof t[E]=="number"?t[E]:E}${r})`}function x(E){return`@media (max-width:${(typeof t[E]=="number"?t[E]:E)-o/100}${r})`}function w(E,M){const N=p.indexOf(M);return`@media (min-width:${typeof t[E]=="number"?t[E]:E}${r}) and (max-width:${(N!==-1&&typeof t[p[N]]=="number"?t[p[N]]:M)-o/100}${r})`}function T(E){return p.indexOf(E)+1<p.length?w(E,p[p.indexOf(E)+1]):c(E)}function k(E){const M=p.indexOf(E);return M===0?c(p[1]):M===p.length-1?x(p[M]):w(E,p[p.indexOf(E)+1]).replace("@media","@media not all and")}return G({keys:p,values:d,up:c,down:x,between:w,only:T,not:k,unit:r},s)}const $3={borderRadius:4};function Cp(e,t){return t?di(e,t,{clone:!1}):e}const Zb={xs:0,sm:600,md:900,lg:1200,xl:1536},j2={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Zb[e]}px)`};function Oa(e,t,r){const o=e.theme||{};if(Array.isArray(t)){const d=o.breakpoints||j2;return t.reduce((p,c,x)=>(p[d.up(d.keys[x])]=r(t[x]),p),{})}if(typeof t=="object"){const d=o.breakpoints||j2;return Object.keys(t).reduce((p,c)=>{if(Object.keys(d.values||Zb).indexOf(c)!==-1){const x=d.up(c);p[x]=r(t[c],c)}else{const x=c;p[x]=t[x]}return p},{})}return r(t)}function KE(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,s)=>{const d=e.up(s);return o[d]={},o},{}))||{}}function XE(e,t){return e.reduce((r,o)=>{const s=r[o];return(!s||Object.keys(s).length===0)&&delete r[o],r},t)}function O3(e,...t){const r=KE(e),o=[r,...t].reduce((s,d)=>di(s,d),{});return XE(Object.keys(r),o)}function B3(e,t){if(typeof e!="object")return{};const r={},o=Object.keys(t);return Array.isArray(e)?o.forEach((s,d)=>{d<e.length&&(r[s]=!0)}):o.forEach(s=>{e[s]!=null&&(r[s]=!0)}),r}function __({values:e,breakpoints:t,base:r}){const o=r||B3(e,t),s=Object.keys(o);if(s.length===0)return e;let d;return s.reduce((p,c,x)=>(Array.isArray(e)?(p[c]=e[x]!=null?e[x]:e[d],d=x):typeof e=="object"?(p[c]=e[c]!=null?e[c]:e[d],d=c):p[c]=e,p),{})}function Et(e){if(typeof e!="string")throw new Error($s(7));return e.charAt(0).toUpperCase()+e.slice(1)}const F3=Object.freeze(Object.defineProperty({__proto__:null,default:Et},Symbol.toStringTag,{value:"Module"}));function zl(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const o=`vars.${t}`.split(".").reduce((s,d)=>s&&s[d]?s[d]:null,e);if(o!=null)return o}return t.split(".").reduce((o,s)=>o&&o[s]!=null?o[s]:null,e)}function ry(e,t,r,o=r){let s;return typeof e=="function"?s=e(r):Array.isArray(e)?s=e[r]||o:s=zl(e,r)||o,t&&(s=t(s,o,e)),s}function Yn(e){const{prop:t,cssProperty:r=e.prop,themeKey:o,transform:s}=e,d=p=>{if(p[t]==null)return null;const c=p[t],x=p.theme,w=zl(x,o)||{};return Oa(p,c,k=>{let E=ry(w,s,k);return k===E&&typeof k=="string"&&(E=ry(w,s,`${t}${k==="default"?"":Et(k)}`,k)),r===!1?E:{[r]:E}})};return d.propTypes={},d.filterProps=[t],d}function N3(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const j3={m:"margin",p:"padding"},V3={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},V2={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},U3=N3(e=>{if(e.length>2)if(V2[e])e=V2[e];else return[e];const[t,r]=e.split(""),o=j3[t],s=V3[r]||"";return Array.isArray(s)?s.map(d=>o+d):[o+s]}),Kb=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Xb=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Kb,...Xb];function gf(e,t,r,o){var s;const d=(s=zl(e,t,!1))!=null?s:r;return typeof d=="number"?p=>typeof p=="string"?p:d*p:Array.isArray(d)?p=>typeof p=="string"?p:d[p]:typeof d=="function"?d:()=>{}}function Jb(e){return gf(e,"spacing",8)}function kc(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),o=e(r);return t>=0?o:typeof o=="number"?-o:`-${o}`}function H3(e,t){return r=>e.reduce((o,s)=>(o[s]=kc(t,r),o),{})}function W3(e,t,r,o){if(t.indexOf(r)===-1)return null;const s=U3(r),d=H3(s,o),p=e[r];return Oa(e,p,d)}function JE(e,t){const r=Jb(e.theme);return Object.keys(e).map(o=>W3(e,t,o,r)).reduce(Cp,{})}function Nn(e){return JE(e,Kb)}Nn.propTypes={};Nn.filterProps=Kb;function jn(e){return JE(e,Xb)}jn.propTypes={};jn.filterProps=Xb;function YE(e=8){if(e.mui)return e;const t=Jb({spacing:e}),r=(...o)=>(o.length===0?[1]:o).map(d=>{const p=t(d);return typeof p=="number"?`${p}px`:p}).join(" ");return r.mui=!0,r}function cv(...e){const t=e.reduce((o,s)=>(s.filterProps.forEach(d=>{o[d]=s}),o),{}),r=o=>Object.keys(o).reduce((s,d)=>t[d]?Cp(s,t[d](o)):s,{});return r.propTypes={},r.filterProps=e.reduce((o,s)=>o.concat(s.filterProps),[]),r}function ia(e){return typeof e!="number"?e:`${e}px solid`}function ma(e,t){return Yn({prop:e,themeKey:"borders",transform:t})}const G3=ma("border",ia),q3=ma("borderTop",ia),Z3=ma("borderRight",ia),K3=ma("borderBottom",ia),X3=ma("borderLeft",ia),J3=ma("borderColor"),Y3=ma("borderTopColor"),Q3=ma("borderRightColor"),eO=ma("borderBottomColor"),tO=ma("borderLeftColor"),rO=ma("outline",ia),nO=ma("outlineColor"),uv=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=gf(e.theme,"shape.borderRadius",4),r=o=>({borderRadius:kc(t,o)});return Oa(e,e.borderRadius,r)}return null};uv.propTypes={};uv.filterProps=["borderRadius"];cv(G3,q3,Z3,K3,X3,J3,Y3,Q3,eO,tO,uv,rO,nO);const dv=e=>{if(e.gap!==void 0&&e.gap!==null){const t=gf(e.theme,"spacing",8),r=o=>({gap:kc(t,o)});return Oa(e,e.gap,r)}return null};dv.propTypes={};dv.filterProps=["gap"];const hv=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=gf(e.theme,"spacing",8),r=o=>({columnGap:kc(t,o)});return Oa(e,e.columnGap,r)}return null};hv.propTypes={};hv.filterProps=["columnGap"];const pv=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=gf(e.theme,"spacing",8),r=o=>({rowGap:kc(t,o)});return Oa(e,e.rowGap,r)}return null};pv.propTypes={};pv.filterProps=["rowGap"];const iO=Yn({prop:"gridColumn"}),oO=Yn({prop:"gridRow"}),aO=Yn({prop:"gridAutoFlow"}),sO=Yn({prop:"gridAutoColumns"}),lO=Yn({prop:"gridAutoRows"}),cO=Yn({prop:"gridTemplateColumns"}),uO=Yn({prop:"gridTemplateRows"}),dO=Yn({prop:"gridTemplateAreas"}),hO=Yn({prop:"gridArea"});cv(dv,hv,pv,iO,oO,aO,sO,lO,cO,uO,dO,hO);function ed(e,t){return t==="grey"?t:e}const pO=Yn({prop:"color",themeKey:"palette",transform:ed}),fO=Yn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ed}),mO=Yn({prop:"backgroundColor",themeKey:"palette",transform:ed});cv(pO,fO,mO);function Bo(e){return e<=1&&e!==0?`${e*100}%`:e}const gO=Yn({prop:"width",transform:Bo}),Yb=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var o,s;const d=((o=e.theme)==null||(o=o.breakpoints)==null||(o=o.values)==null?void 0:o[r])||Zb[r];return d?((s=e.theme)==null||(s=s.breakpoints)==null?void 0:s.unit)!=="px"?{maxWidth:`${d}${e.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:Bo(r)}};return Oa(e,e.maxWidth,t)}return null};Yb.filterProps=["maxWidth"];const yO=Yn({prop:"minWidth",transform:Bo}),vO=Yn({prop:"height",transform:Bo}),_O=Yn({prop:"maxHeight",transform:Bo}),xO=Yn({prop:"minHeight",transform:Bo});Yn({prop:"size",cssProperty:"width",transform:Bo});Yn({prop:"size",cssProperty:"height",transform:Bo});const bO=Yn({prop:"boxSizing"});cv(gO,Yb,yO,vO,_O,xO,bO);const Rd={border:{themeKey:"borders",transform:ia},borderTop:{themeKey:"borders",transform:ia},borderRight:{themeKey:"borders",transform:ia},borderBottom:{themeKey:"borders",transform:ia},borderLeft:{themeKey:"borders",transform:ia},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ia},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:uv},color:{themeKey:"palette",transform:ed},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ed},backgroundColor:{themeKey:"palette",transform:ed},p:{style:jn},pt:{style:jn},pr:{style:jn},pb:{style:jn},pl:{style:jn},px:{style:jn},py:{style:jn},padding:{style:jn},paddingTop:{style:jn},paddingRight:{style:jn},paddingBottom:{style:jn},paddingLeft:{style:jn},paddingX:{style:jn},paddingY:{style:jn},paddingInline:{style:jn},paddingInlineStart:{style:jn},paddingInlineEnd:{style:jn},paddingBlock:{style:jn},paddingBlockStart:{style:jn},paddingBlockEnd:{style:jn},m:{style:Nn},mt:{style:Nn},mr:{style:Nn},mb:{style:Nn},ml:{style:Nn},mx:{style:Nn},my:{style:Nn},margin:{style:Nn},marginTop:{style:Nn},marginRight:{style:Nn},marginBottom:{style:Nn},marginLeft:{style:Nn},marginX:{style:Nn},marginY:{style:Nn},marginInline:{style:Nn},marginInlineStart:{style:Nn},marginInlineEnd:{style:Nn},marginBlock:{style:Nn},marginBlockStart:{style:Nn},marginBlockEnd:{style:Nn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:dv},rowGap:{style:pv},columnGap:{style:hv},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Bo},maxWidth:{style:Yb},minWidth:{transform:Bo},height:{transform:Bo},maxHeight:{transform:Bo},minHeight:{transform:Bo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function wO(...e){const t=e.reduce((o,s)=>o.concat(Object.keys(s)),[]),r=new Set(t);return e.every(o=>r.size===Object.keys(o).length)}function SO(e,t){return typeof e=="function"?e(t):e}function QE(){function e(r,o,s,d){const p={[r]:o,theme:s},c=d[r];if(!c)return{[r]:o};const{cssProperty:x=r,themeKey:w,transform:T,style:k}=c;if(o==null)return null;if(w==="typography"&&o==="inherit")return{[r]:o};const E=zl(s,w)||{};return k?k(p):Oa(p,o,N=>{let j=ry(E,T,N);return N===j&&typeof N=="string"&&(j=ry(E,T,`${r}${N==="default"?"":Et(N)}`,N)),x===!1?j:{[x]:j}})}function t(r){var o;const{sx:s,theme:d={}}=r||{};if(!s)return null;const p=(o=d.unstable_sxConfig)!=null?o:Rd;function c(x){let w=x;if(typeof x=="function")w=x(d);else if(typeof x!="object")return x;if(!w)return null;const T=KE(d.breakpoints),k=Object.keys(T);let E=T;return Object.keys(w).forEach(M=>{const N=SO(w[M],d);if(N!=null)if(typeof N=="object")if(p[M])E=Cp(E,e(M,N,d,p));else{const j=Oa({theme:d},N,q=>({[M]:q}));wO(j,N)?E[M]=t({sx:N,theme:d}):E=Cp(E,j)}else E=Cp(E,e(M,N,d,p))}),XE(k,E)}return Array.isArray(s)?s.map(c):c(s)}return t}const Md=QE();Md.filterProps=["sx"];function Qb(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const CO=["breakpoints","palette","spacing","shape"];function yf(e={},...t){const{breakpoints:r={},palette:o={},spacing:s,shape:d={}}=e,p=er(e,CO),c=qb(r),x=YE(s);let w=di({breakpoints:c,direction:"ltr",components:{},palette:G({mode:"light"},o),spacing:x,shape:G({},$3,d)},p);return w.applyStyles=Qb,w=t.reduce((T,k)=>di(T,k),w),w.unstable_sxConfig=G({},Rd,p==null?void 0:p.unstable_sxConfig),w.unstable_sx=function(k){return Md({sx:k,theme:this})},w}const IO=Object.freeze(Object.defineProperty({__proto__:null,default:yf,private_createBreakpoints:qb,unstable_applyStyles:Qb},Symbol.toStringTag,{value:"Module"}));function TO(e){return Object.keys(e).length===0}function eA(e=null){const t=R.useContext(zd);return!t||TO(t)?e:t}const PO=yf();function tA(e=PO){return eA(e)}function kO({styles:e,themeId:t,defaultTheme:r={}}){const o=tA(r),s=typeof e=="function"?e(t&&o[t]||o):e;return te.jsx(Sp,{styles:s})}const EO=["sx"],AO=e=>{var t,r;const o={systemProps:{},otherProps:{}},s=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:Rd;return Object.keys(e).forEach(d=>{s[d]?o.systemProps[d]=e[d]:o.otherProps[d]=e[d]}),o};function ew(e){const{sx:t}=e,r=er(e,EO),{systemProps:o,otherProps:s}=AO(r);let d;return Array.isArray(t)?d=[o,...t]:typeof t=="function"?d=(...p)=>{const c=t(...p);return Rs(c)?G({},o,c):o}:d=G({},o,t),G({},s,{sx:d})}const zO=Object.freeze(Object.defineProperty({__proto__:null,default:Md,extendSxProp:ew,unstable_createStyleFunctionSx:QE,unstable_defaultSxConfig:Rd},Symbol.toStringTag,{value:"Module"})),U2=e=>e,RO=()=>{let e=U2;return{configure(t){e=t},generate(t){return e(t)},reset(){e=U2}}},MO=RO();function rA(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=rA(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function ii(){for(var e,t,r=0,o="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=rA(e))&&(o&&(o+=" "),o+=t);return o}const nA={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function fv(e,t,r="Mui"){const o=nA[t];return o?`${r}-${o}`:`${MO.generate(e)}-${t}`}function iA(e,t,r="Mui"){const o={};return t.forEach(s=>{o[s]=fv(e,s,r)}),o}var oA={exports:{}},pn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tw=Symbol.for("react.transitional.element"),rw=Symbol.for("react.portal"),mv=Symbol.for("react.fragment"),gv=Symbol.for("react.strict_mode"),yv=Symbol.for("react.profiler"),vv=Symbol.for("react.consumer"),_v=Symbol.for("react.context"),xv=Symbol.for("react.forward_ref"),bv=Symbol.for("react.suspense"),wv=Symbol.for("react.suspense_list"),Sv=Symbol.for("react.memo"),Cv=Symbol.for("react.lazy"),DO=Symbol.for("react.offscreen"),LO=Symbol.for("react.client.reference");function ga(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case tw:switch(e=e.type,e){case mv:case yv:case gv:case bv:case wv:return e;default:switch(e=e&&e.$$typeof,e){case _v:case xv:case Cv:case Sv:return e;case vv:return e;default:return t}}case rw:return t}}}pn.ContextConsumer=vv;pn.ContextProvider=_v;pn.Element=tw;pn.ForwardRef=xv;pn.Fragment=mv;pn.Lazy=Cv;pn.Memo=Sv;pn.Portal=rw;pn.Profiler=yv;pn.StrictMode=gv;pn.Suspense=bv;pn.SuspenseList=wv;pn.isContextConsumer=function(e){return ga(e)===vv};pn.isContextProvider=function(e){return ga(e)===_v};pn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===tw};pn.isForwardRef=function(e){return ga(e)===xv};pn.isFragment=function(e){return ga(e)===mv};pn.isLazy=function(e){return ga(e)===Cv};pn.isMemo=function(e){return ga(e)===Sv};pn.isPortal=function(e){return ga(e)===rw};pn.isProfiler=function(e){return ga(e)===yv};pn.isStrictMode=function(e){return ga(e)===gv};pn.isSuspense=function(e){return ga(e)===bv};pn.isSuspenseList=function(e){return ga(e)===wv};pn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===mv||e===yv||e===gv||e===bv||e===wv||e===DO||typeof e=="object"&&e!==null&&(e.$$typeof===Cv||e.$$typeof===Sv||e.$$typeof===_v||e.$$typeof===vv||e.$$typeof===xv||e.$$typeof===LO||e.getModuleId!==void 0)};pn.typeOf=ga;oA.exports=pn;var H2=oA.exports;const $O=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function aA(e){const t=`${e}`.match($O);return t&&t[1]||""}function sA(e,t=""){return e.displayName||e.name||aA(e)||t}function W2(e,t,r){const o=sA(t);return e.displayName||(o!==""?`${r}(${o})`:r)}function OO(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return sA(e,"Component");if(typeof e=="object")switch(e.$$typeof){case H2.ForwardRef:return W2(e,e.render,"ForwardRef");case H2.Memo:return W2(e,e.type,"memo");default:return}}}const BO=Object.freeze(Object.defineProperty({__proto__:null,default:OO,getFunctionName:aA},Symbol.toStringTag,{value:"Module"})),FO=["ownerState"],NO=["variants"],jO=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function VO(e){return Object.keys(e).length===0}function UO(e){return typeof e=="string"&&e.charCodeAt(0)>96}function x_(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const HO=yf(),WO=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Ym({defaultTheme:e,theme:t,themeId:r}){return VO(t)?e:t[r]||t}function GO(e){return e?(t,r)=>r[e]:null}function zg(e,t){let{ownerState:r}=t,o=er(t,FO);const s=typeof e=="function"?e(G({ownerState:r},o)):e;if(Array.isArray(s))return s.flatMap(d=>zg(d,G({ownerState:r},o)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:d=[]}=s;let c=er(s,NO);return d.forEach(x=>{let w=!0;typeof x.props=="function"?w=x.props(G({ownerState:r},o,r)):Object.keys(x.props).forEach(T=>{(r==null?void 0:r[T])!==x.props[T]&&o[T]!==x.props[T]&&(w=!1)}),w&&(Array.isArray(c)||(c=[c]),c.push(typeof x.style=="function"?x.style(G({ownerState:r},o,r)):x.style))}),c}return s}function lA(e={}){const{themeId:t,defaultTheme:r=HO,rootShouldForwardProp:o=x_,slotShouldForwardProp:s=x_}=e,d=p=>Md(G({},p,{theme:Ym(G({},p,{defaultTheme:r,themeId:t}))}));return d.__mui_systemSx=!0,(p,c={})=>{qE(p,J=>J.filter(K=>!(K!=null&&K.__mui_systemSx)));const{name:x,slot:w,skipVariantsResolver:T,skipSx:k,overridesResolver:E=GO(WO(w))}=c,M=er(c,jO),N=T!==void 0?T:w&&w!=="Root"&&w!=="root"||!1,j=k||!1;let q,B=x_;w==="Root"||w==="root"?B=o:w?B=s:UO(p)&&(B=void 0);const D=GE(p,G({shouldForwardProp:B,label:q},M)),$=J=>typeof J=="function"&&J.__emotion_real!==J||Rs(J)?K=>zg(J,G({},K,{theme:Ym({theme:K.theme,defaultTheme:r,themeId:t})})):J,ie=(J,...K)=>{let se=$(J);const ae=K?K.map($):[];x&&E&&ae.push(ke=>{const Ee=Ym(G({},ke,{defaultTheme:r,themeId:t}));if(!Ee.components||!Ee.components[x]||!Ee.components[x].styleOverrides)return null;const $e=Ee.components[x].styleOverrides,Je={};return Object.entries($e).forEach(([je,Se])=>{Je[je]=zg(Se,G({},ke,{theme:Ee}))}),E(ke,Je)}),x&&!N&&ae.push(ke=>{var Ee;const $e=Ym(G({},ke,{defaultTheme:r,themeId:t})),Je=$e==null||(Ee=$e.components)==null||(Ee=Ee[x])==null?void 0:Ee.variants;return zg({variants:Je},G({},ke,{theme:$e}))}),j||ae.push(d);const we=ae.length-K.length;if(Array.isArray(J)&&we>0){const ke=new Array(we).fill("");se=[...J,...ke],se.raw=[...J.raw,...ke]}const xe=D(se,...ae);return p.muiName&&(xe.muiName=p.muiName),xe};return D.withConfig&&(ie.withConfig=D.withConfig),ie}}const qO=lA();function ny(e,t){const r=G({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))r[o]=G({},e[o],r[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const s=e[o]||{},d=t[o];r[o]={},!d||!Object.keys(d)?r[o]=s:!s||!Object.keys(s)?r[o]=d:(r[o]=G({},d),Object.keys(s).forEach(p=>{r[o][p]=ny(s[p],d[p])}))}else r[o]===void 0&&(r[o]=e[o])}),r}function ZO(e){const{theme:t,name:r,props:o}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?o:ny(t.components[r].defaultProps,o)}function cA({props:e,name:t,defaultTheme:r,themeId:o}){let s=tA(r);return o&&(s=s[o]||s),ZO({theme:s,name:t,props:e})}const Os=typeof window<"u"?R.useLayoutEffect:R.useEffect;function KO(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}const XO=Object.freeze(Object.defineProperty({__proto__:null,default:KO},Symbol.toStringTag,{value:"Module"}));function JO(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,s)=>s<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function uA(e){if(e.type)return e;if(e.charAt(0)==="#")return uA(JO(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error($s(9,e));let o=e.substring(t+1,e.length-1),s;if(r==="color"){if(o=o.split(" "),s=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error($s(10,s))}else o=o.split(",");return o=o.map(d=>parseFloat(d)),{type:r,values:o,colorSpace:s}}const dc=e=>{const t=uA(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};function G2(...e){return e.reduce((t,r)=>r==null?t:function(...s){t.apply(this,s),r.apply(this,s)},()=>{})}function nw(e,t){var r,o;return R.isValidElement(e)&&t.indexOf((r=e.type.muiName)!=null?r:(o=e.type)==null||(o=o._payload)==null||(o=o.value)==null?void 0:o.muiName)!==-1}function is(e){return e&&e.ownerDocument||document}function iw(e){return is(e).defaultView||window}function iy(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let q2=0;function YO(e){const[t,r]=R.useState(e),o=e||t;return R.useEffect(()=>{t==null&&(q2+=1,r(`mui-${q2}`))},[t]),o}const Z2=ey.useId;function Eo(e){if(Z2!==void 0){const t=Z2();return e??t}return YO(e)}function td({controlled:e,default:t,name:r,state:o="value"}){const{current:s}=R.useRef(e!==void 0),[d,p]=R.useState(t),c=s?e:d,x=R.useCallback(w=>{s||p(w)},[]);return[c,x]}function vl(e){const t=R.useRef(e);return Os(()=>{t.current=e}),R.useRef((...r)=>(0,t.current)(...r)).current}function tn(...e){return R.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{iy(r,t)})},e)}const K2={};function QO(e,t){const r=R.useRef(K2);return r.current===K2&&(r.current=e(t)),r}const eB=[];function tB(e){R.useEffect(e,eB)}class vf{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new vf}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function Qm(){const e=QO(vf.create).current;return tB(e.disposeEffect),e}let Iv=!0,p1=!1;const rB=new vf,nB={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function iB(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&nB[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function oB(e){e.metaKey||e.altKey||e.ctrlKey||(Iv=!0)}function b_(){Iv=!1}function aB(){this.visibilityState==="hidden"&&p1&&(Iv=!0)}function sB(e){e.addEventListener("keydown",oB,!0),e.addEventListener("mousedown",b_,!0),e.addEventListener("pointerdown",b_,!0),e.addEventListener("touchstart",b_,!0),e.addEventListener("visibilitychange",aB,!0)}function lB(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return Iv||iB(t)}function ow(){const e=R.useCallback(s=>{s!=null&&sB(s.ownerDocument)},[]),t=R.useRef(!1);function r(){return t.current?(p1=!0,rB.start(100,()=>{p1=!1}),t.current=!1,!0):!1}function o(s){return lB(s)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:o,onBlur:r,ref:e}}function cB(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const uB=e=>{const t=R.useRef({});return R.useEffect(()=>{t.current=e}),t.current},dB={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Dr(e,t,r=void 0){const o={};return Object.keys(e).forEach(s=>{o[s]=e[s].reduce((d,p)=>{if(p){const c=t(p);c!==""&&d.push(c),r&&r[p]&&d.push(r[p])}return d},[]).join(" ")}),o}function hB(e){return typeof e=="string"}function dA(e,t,r){return e===void 0||hB(e)?t:G({},t,{ownerState:G({},t.ownerState,r)})}function Mi(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(o=>o.match(/^on[A-Z]/)&&typeof e[o]=="function"&&!t.includes(o)).forEach(o=>{r[o]=e[o]}),r}function X2(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function hA(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:o,externalForwardedProps:s,className:d}=e;if(!t){const M=ii(r==null?void 0:r.className,d,s==null?void 0:s.className,o==null?void 0:o.className),N=G({},r==null?void 0:r.style,s==null?void 0:s.style,o==null?void 0:o.style),j=G({},r,s,o);return M.length>0&&(j.className=M),Object.keys(N).length>0&&(j.style=N),{props:j,internalRef:void 0}}const p=Mi(G({},s,o)),c=X2(o),x=X2(s),w=t(p),T=ii(w==null?void 0:w.className,r==null?void 0:r.className,d,s==null?void 0:s.className,o==null?void 0:o.className),k=G({},w==null?void 0:w.style,r==null?void 0:r.style,s==null?void 0:s.style,o==null?void 0:o.style),E=G({},w,r,x,c);return T.length>0&&(E.className=T),Object.keys(k).length>0&&(E.style=k),{props:E,internalRef:w.ref}}function pA(e,t,r){return typeof e=="function"?e(t,r):e}const pB=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function fA(e){var t;const{elementType:r,externalSlotProps:o,ownerState:s,skipResolvingSlotProps:d=!1}=e,p=er(e,pB),c=d?{}:pA(o,s),{props:x,internalRef:w}=hA(G({},p,{externalSlotProps:c})),T=tn(w,c==null?void 0:c.ref,(t=e.additionalProps)==null?void 0:t.ref);return dA(r,G({},x,{ref:T}),s)}function aw(e){if(parseInt(R.version,10)>=19){var t;return(e==null||(t=e.props)==null?void 0:t.ref)||null}return(e==null?void 0:e.ref)||null}const mA=R.createContext(null);function sw(){return R.useContext(mA)}const fB=typeof Symbol=="function"&&Symbol.for,mB=fB?Symbol.for("mui.nested"):"__THEME_NESTED__";function gB(e,t){return typeof t=="function"?t(e):G({},e,t)}function yB(e){const{children:t,theme:r}=e,o=sw(),s=R.useMemo(()=>{const d=o===null?r:gB(o,r);return d!=null&&(d[mB]=o!==null),d},[r,o]);return te.jsx(mA.Provider,{value:s,children:t})}const vB=["value"],_B=R.createContext();function xB(e){let{value:t}=e,r=er(e,vB);return te.jsx(_B.Provider,G({value:t??!0},r))}const gA=R.createContext(void 0);function bB({value:e,children:t}){return te.jsx(gA.Provider,{value:e,children:t})}function wB(e){const{theme:t,name:r,props:o}=e;if(!t||!t.components||!t.components[r])return o;const s=t.components[r];return s.defaultProps?ny(s.defaultProps,o):!s.styleOverrides&&!s.variants?ny(s,o):o}function SB({props:e,name:t}){const r=R.useContext(gA);return wB({props:e,name:t,theme:{components:r}})}const J2={};function Y2(e,t,r,o=!1){return R.useMemo(()=>{const s=e&&t[e]||t;if(typeof r=="function"){const d=r(s),p=e?G({},t,{[e]:d}):d;return o?()=>p:p}return e?G({},t,{[e]:r}):G({},t,r)},[e,t,r,o])}function CB(e){const{children:t,theme:r,themeId:o}=e,s=eA(J2),d=sw()||J2,p=Y2(o,s,r),c=Y2(o,d,r,!0),x=p.direction==="rtl";return te.jsx(yB,{theme:c,children:te.jsx(zd.Provider,{value:p,children:te.jsx(xB,{value:x,children:te.jsx(bB,{value:p==null?void 0:p.components,children:t})})})})}const lw="mode",cw="color-scheme",yA="data-color-scheme";function IB(e){const{defaultMode:t="light",defaultLightColorScheme:r="light",defaultDarkColorScheme:o="dark",modeStorageKey:s=lw,colorSchemeStorageKey:d=cw,attribute:p=yA,colorSchemeNode:c="document.documentElement",nonce:x}=e||{};return te.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?x:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${s}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${d}-dark') || '${o}';
    } else {
      colorScheme = localStorage.getItem('${d}-light') || '${r}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${d}-light') || '${r}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${d}-dark') || '${o}';
  }
  if (colorScheme) {
    ${c}.setAttribute('${p}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function Q2(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function vA(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function TB(e){return vA(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function w_(e,t){if(typeof window>"u")return;let r;try{r=localStorage.getItem(e)||void 0,r||localStorage.setItem(e,t)}catch{}return r||t}function PB(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:o,supportedColorSchemes:s=[],modeStorageKey:d=lw,colorSchemeStorageKey:p=cw,storageWindow:c=typeof window>"u"?void 0:window}=e,x=s.join(","),[w,T]=R.useState(()=>{const q=w_(d,t),B=w_(`${p}-light`,r),D=w_(`${p}-dark`,o);return{mode:q,systemMode:Q2(q),lightColorScheme:B,darkColorScheme:D}}),k=TB(w),E=R.useCallback(q=>{T(B=>{if(q===B.mode)return B;const D=q??t;try{localStorage.setItem(d,D)}catch{}return G({},B,{mode:D,systemMode:Q2(D)})})},[d,t]),M=R.useCallback(q=>{q?typeof q=="string"?q&&!x.includes(q)?console.error(`\`${q}\` does not exist in \`theme.colorSchemes\`.`):T(B=>{const D=G({},B);return vA(B,$=>{try{localStorage.setItem(`${p}-${$}`,q)}catch{}$==="light"&&(D.lightColorScheme=q),$==="dark"&&(D.darkColorScheme=q)}),D}):T(B=>{const D=G({},B),$=q.light===null?r:q.light,ie=q.dark===null?o:q.dark;if($)if(!x.includes($))console.error(`\`${$}\` does not exist in \`theme.colorSchemes\`.`);else{D.lightColorScheme=$;try{localStorage.setItem(`${p}-light`,$)}catch{}}if(ie)if(!x.includes(ie))console.error(`\`${ie}\` does not exist in \`theme.colorSchemes\`.`);else{D.darkColorScheme=ie;try{localStorage.setItem(`${p}-dark`,ie)}catch{}}return D}):T(B=>{try{localStorage.setItem(`${p}-light`,r),localStorage.setItem(`${p}-dark`,o)}catch{}return G({},B,{lightColorScheme:r,darkColorScheme:o})})},[x,p,r,o]),N=R.useCallback(q=>{w.mode==="system"&&T(B=>{const D=q!=null&&q.matches?"dark":"light";return B.systemMode===D?B:G({},B,{systemMode:D})})},[w.mode]),j=R.useRef(N);return j.current=N,R.useEffect(()=>{const q=(...D)=>j.current(...D),B=window.matchMedia("(prefers-color-scheme: dark)");return B.addListener(q),q(B),()=>{B.removeListener(q)}},[]),R.useEffect(()=>{if(c){const q=B=>{const D=B.newValue;typeof B.key=="string"&&B.key.startsWith(p)&&(!D||x.match(D))&&(B.key.endsWith("light")&&M({light:D}),B.key.endsWith("dark")&&M({dark:D})),B.key===d&&(!D||["light","dark","system"].includes(D))&&E(D||t)};return c.addEventListener("storage",q),()=>{c.removeEventListener("storage",q)}}},[M,E,d,p,x,t,c]),G({},w,{colorScheme:k,setMode:E,setColorScheme:M})}const kB=["colorSchemes","components","generateCssVars","cssVarPrefix"],EB="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function AB(e){const{themeId:t,theme:r={},attribute:o=yA,modeStorageKey:s=lw,colorSchemeStorageKey:d=cw,defaultMode:p="light",defaultColorScheme:c,disableTransitionOnChange:x=!1,resolveTheme:w,excludeVariablesFromRoot:T}=e;(!r.colorSchemes||typeof c=="string"&&!r.colorSchemes[c]||typeof c=="object"&&!r.colorSchemes[c==null?void 0:c.light]||typeof c=="object"&&!r.colorSchemes[c==null?void 0:c.dark])&&console.error(`MUI: \`${c}\` does not exist in \`theme.colorSchemes\`.`);const k=R.createContext(void 0),E=()=>{const B=R.useContext(k);if(!B)throw new Error($s(19));return B};function M(B){const{children:D,theme:$=r,modeStorageKey:ie=s,colorSchemeStorageKey:J=d,attribute:K=o,defaultMode:se=p,defaultColorScheme:ae=c,disableTransitionOnChange:we=x,storageWindow:xe=typeof window>"u"?void 0:window,documentNode:ke=typeof document>"u"?void 0:document,colorSchemeNode:Ee=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:$e=":root",disableNestedContext:Je=!1,disableStyleSheetGeneration:je=!1}=B,Se=R.useRef(!1),Le=sw(),Be=R.useContext(k),Ve=!!Be&&!Je,Qe=$[t],st=Qe||$,{colorSchemes:ct={},components:Mt={},generateCssVars:vt=()=>({vars:{},css:{}}),cssVarPrefix:Dt}=st,tr=er(st,kB),ht=Object.keys(ct),Ke=typeof ae=="string"?ae:ae.light,ft=typeof ae=="string"?ae:ae.dark,{mode:Ct,setMode:jt,systemMode:Gt,lightColorScheme:vr,darkColorScheme:Cr,colorScheme:Ut,setColorScheme:Pt}=PB({supportedColorSchemes:ht,defaultLightColorScheme:Ke,defaultDarkColorScheme:ft,modeStorageKey:ie,colorSchemeStorageKey:J,defaultMode:se,storageWindow:xe});let sr=Ct,Ft=Ut;Ve&&(sr=Be.mode,Ft=Be.colorScheme);const _r=sr||(se==="system"?p:se),Ue=Ft||(_r==="dark"?ft:Ke),{css:xr,vars:Er}=vt(),Vt=G({},tr,{components:Mt,colorSchemes:ct,cssVarPrefix:Dt,vars:Er,getColorSchemeSelector:Kt=>`[${K}="${Kt}"] &`}),Jt={},Ar={};Object.entries(ct).forEach(([Kt,lr])=>{const{css:Wr,vars:Oe}=vt(Kt);Vt.vars=di(Vt.vars,Oe),Kt===Ue&&(Object.keys(lr).forEach(_t=>{lr[_t]&&typeof lr[_t]=="object"?Vt[_t]=G({},Vt[_t],lr[_t]):Vt[_t]=lr[_t]}),Vt.palette&&(Vt.palette.colorScheme=Kt));const St=typeof ae=="string"?ae:se==="dark"?ae.dark:ae.light;if(Kt===St){if(T){const _t={};T(Dt).forEach(Ce=>{_t[Ce]=Wr[Ce],delete Wr[Ce]}),Jt[`[${K}="${Kt}"]`]=_t}Jt[`${$e}, [${K}="${Kt}"]`]=Wr}else Ar[`${$e===":root"?"":$e}[${K}="${Kt}"]`]=Wr}),Vt.vars=di(Vt.vars,Er),R.useEffect(()=>{Ft&&Ee&&Ee.setAttribute(K,Ft)},[Ft,K,Ee]),R.useEffect(()=>{let Kt;if(we&&Se.current&&ke){const lr=ke.createElement("style");lr.appendChild(ke.createTextNode(EB)),ke.head.appendChild(lr),window.getComputedStyle(ke.body),Kt=setTimeout(()=>{ke.head.removeChild(lr)},1)}return()=>{clearTimeout(Kt)}},[Ft,we,ke]),R.useEffect(()=>(Se.current=!0,()=>{Se.current=!1}),[]);const Br=R.useMemo(()=>({allColorSchemes:ht,colorScheme:Ft,darkColorScheme:Cr,lightColorScheme:vr,mode:sr,setColorScheme:Pt,setMode:jt,systemMode:Gt}),[ht,Ft,Cr,vr,sr,Pt,jt,Gt]);let cr=!0;(je||Ve&&(Le==null?void 0:Le.cssVarPrefix)===Dt)&&(cr=!1);const nr=te.jsxs(R.Fragment,{children:[cr&&te.jsxs(R.Fragment,{children:[te.jsx(Sp,{styles:{[$e]:xr}}),te.jsx(Sp,{styles:Jt}),te.jsx(Sp,{styles:Ar})]}),te.jsx(CB,{themeId:Qe?t:void 0,theme:w?w(Vt):Vt,children:D})]});return Ve?nr:te.jsx(k.Provider,{value:Br,children:nr})}const N=typeof c=="string"?c:c.light,j=typeof c=="string"?c:c.dark;return{CssVarsProvider:M,useColorScheme:E,getInitColorSchemeScript:B=>IB(G({attribute:o,colorSchemeStorageKey:d,defaultMode:p,defaultLightColorScheme:N,defaultDarkColorScheme:j,modeStorageKey:s},B))}}function uw(e=""){function t(...o){if(!o.length)return"";const s=o[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${s}${t(...o.slice(1))})`:`, ${s}`}return(o,...s)=>`var(--${e?`${e}-`:""}${o}${t(...s)})`}const eI=(e,t,r,o=[])=>{let s=e;t.forEach((d,p)=>{p===t.length-1?Array.isArray(s)?s[Number(d)]=r:s&&typeof s=="object"&&(s[d]=r):s&&typeof s=="object"&&(s[d]||(s[d]=o.includes(d)?[]:{}),s=s[d])})},zB=(e,t,r)=>{function o(s,d=[],p=[]){Object.entries(s).forEach(([c,x])=>{(!r||!r([...d,c]))&&x!=null&&(typeof x=="object"&&Object.keys(x).length>0?o(x,[...d,c],Array.isArray(x)?[...p,c]:p):t([...d,c],x,p))})}o(e)},RB=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(o=>e.includes(o))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function S_(e,t){const{prefix:r,shouldSkipGeneratingVar:o}=t,s={},d={},p={};return zB(e,(c,x,w)=>{if((typeof x=="string"||typeof x=="number")&&(!o||!o(c,x))){const T=`--${r?`${r}-`:""}${c.join("-")}`;Object.assign(s,{[T]:RB(c,x)}),eI(d,c,`var(${T})`,w),eI(p,c,`var(${T}, ${x})`,w)}},c=>c[0]==="vars"),{css:s,vars:d,varsWithDefaults:p}}function Vp(e){"@babel/helpers - typeof";return Vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vp(e)}function MB(e,t){if(Vp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t);if(Vp(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function DB(e){var t=MB(e,"string");return Vp(t)=="symbol"?t:t+""}const LB=["colorSchemes","components","defaultColorScheme"];function $B(e,t){const{colorSchemes:r={},defaultColorScheme:o="light"}=e,s=er(e,LB),{vars:d,css:p,varsWithDefaults:c}=S_(s,t);let x=c;const w={},{[o]:T}=r,k=er(r,[o].map(DB));if(Object.entries(k||{}).forEach(([M,N])=>{const{vars:j,css:q,varsWithDefaults:B}=S_(N,t);x=di(x,B),w[M]={css:q,vars:j}}),T){const{css:M,vars:N,varsWithDefaults:j}=S_(T,t);x=di(x,j),w[o]={css:M,vars:N}}return{vars:x,generateCssVars:M=>{var N;if(!M){var j;const B=G({},p);return{css:B,vars:d,selector:(t==null||(j=t.getSelector)==null?void 0:j.call(t,M,B))||":root"}}const q=G({},w[M].css);return{css:q,vars:w[M].vars,selector:(t==null||(N=t.getSelector)==null?void 0:N.call(t,M,q))||":root"}}}}const OB=["component","direction","spacing","divider","children","className","useFlexGap"],BB=yf(),FB=qO("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function NB(e){return cA({props:e,name:"MuiStack",defaultTheme:BB})}function jB(e,t){const r=R.Children.toArray(e).filter(Boolean);return r.reduce((o,s,d)=>(o.push(s),d<r.length-1&&o.push(R.cloneElement(t,{key:`separator-${d}`})),o),[])}const VB=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],UB=({ownerState:e,theme:t})=>{let r=G({display:"flex",flexDirection:"column"},Oa({theme:t},__({values:e.direction,breakpoints:t.breakpoints.values}),o=>({flexDirection:o})));if(e.spacing){const o=Jb(t),s=Object.keys(t.breakpoints.values).reduce((x,w)=>((typeof e.spacing=="object"&&e.spacing[w]!=null||typeof e.direction=="object"&&e.direction[w]!=null)&&(x[w]=!0),x),{}),d=__({values:e.direction,base:s}),p=__({values:e.spacing,base:s});typeof d=="object"&&Object.keys(d).forEach((x,w,T)=>{if(!d[x]){const E=w>0?d[T[w-1]]:"column";d[x]=E}}),r=di(r,Oa({theme:t},p,(x,w)=>e.useFlexGap?{gap:kc(o,x)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${VB(w?d[w]:e.direction)}`]:kc(o,x)}}))}return r=O3(t.breakpoints,r),r};function HB(e={}){const{createStyledComponent:t=FB,useThemeProps:r=NB,componentName:o="MuiStack"}=e,s=()=>Dr({root:["root"]},x=>fv(o,x),{}),d=t(UB);return R.forwardRef(function(x,w){const T=r(x),k=ew(T),{component:E="div",direction:M="column",spacing:N=0,divider:j,children:q,className:B,useFlexGap:D=!1}=k,$=er(k,OB),ie={direction:M,spacing:N,useFlexGap:D},J=s();return te.jsx(d,G({as:E,ownerState:ie,ref:w,className:ii(J.root,B)},$,{children:j?jB(q,j):q}))})}const WB=G({},Rd,{borderRadius:{themeKey:"radius"},boxShadow:{themeKey:"shadow"},fontFamily:{themeKey:"fontFamily"},fontSize:{themeKey:"fontSize"},fontWeight:{themeKey:"fontWeight"},letterSpacing:{themeKey:"letterSpacing"},lineHeight:{themeKey:"lineHeight"}});function GB(e){var t;return!!e[0].match(/^(typography|variants|breakpoints)$/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/^(mode)$/))||e[0]==="focus"&&e[1]!=="thickness"}const Vr=(e,t)=>fv(e,t,"Mui"),Lr=(e,t)=>iA(e,t,"Mui"),qB=e=>e&&typeof e=="object"&&Object.keys(e).some(t=>{var r;return(r=t.match)==null?void 0:r.call(t,/^(plain(Hover|Active|Disabled)?(Color|Bg)|outlined(Hover|Active|Disabled)?(Color|Border|Bg)|soft(Hover|Active|Disabled)?(Color|Bg)|solid(Hover|Active|Disabled)?(Color|Bg))$/)}),tI=(e,t,r)=>{t.includes("Color")&&(e.color=r),t.includes("Bg")&&(e.backgroundColor=r),t.includes("Border")&&(e.borderColor=r)},rI=(e,t,r)=>{const o={};return Object.entries(t||{}).forEach(([s,d])=>{if(s.match(new RegExp(`${e}(color|bg|border)`,"i"))&&d){const p=r?r(s):d;s.includes("Disabled")&&(o.pointerEvents="none",o.cursor="default",o["--Icon-color"]="currentColor"),s.match(/(Hover|Active|Disabled)/)||(o["--variant-borderWidth"]||(o["--variant-borderWidth"]="0px"),s.includes("Border")&&(o["--variant-borderWidth"]="1px",o.border="var(--variant-borderWidth) solid")),tI(o,s,p)}}),o},Wi=(e,t)=>{let r={};{const{getCssVar:o,palette:s}=t;Object.entries(s).forEach(d=>{const[p,c]=d;qB(c)&&typeof c=="object"&&(r=G({},r,{[p]:rI(e,c,x=>`var(--variant-${x}, ${o(`palette-${p}-${x}`,s[p][x])})`)}))})}return r.context=rI(e,{plainColor:"var(--variant-plainColor)",plainHoverColor:"var(--variant-plainHoverColor)",plainHoverBg:"var(--variant-plainHoverBg)",plainActiveBg:"var(--variant-plainActiveBg)",plainDisabledColor:"var(--variant-plainDisabledColor)",outlinedColor:"var(--variant-outlinedColor)",outlinedBorder:"var(--variant-outlinedBorder)",outlinedHoverColor:"var(--variant-outlinedHoverColor)",outlinedHoverBorder:"var(--variant-outlinedHoverBorder)",outlinedHoverBg:"var(--variant-outlinedHoverBg)",outlinedActiveBg:"var(--variant-outlinedActiveBg)",outlinedDisabledColor:"var(--variant-outlinedDisabledColor)",outlinedDisabledBorder:"var(--variant-outlinedDisabledBorder)",softColor:"var(--variant-softColor)",softBg:"var(--variant-softBg)",softHoverColor:"var(--variant-softHoverColor)",softHoverBg:"var(--variant-softHoverBg)",softActiveBg:"var(--variant-softActiveBg)",softDisabledColor:"var(--variant-softDisabledColor)",softDisabledBg:"var(--variant-softDisabledBg)",solidColor:"var(--variant-solidColor)",solidBg:"var(--variant-solidBg)",solidHoverBg:"var(--variant-solidHoverBg)",solidActiveBg:"var(--variant-solidActiveBg)",solidDisabledColor:"var(--variant-solidDisabledColor)",solidDisabledBg:"var(--variant-solidDisabledBg)"}),r},ZB=["cssVarPrefix","breakpoints","spacing","components","variants","shouldSkipGeneratingVar"],KB=["colorSchemes"],XB=(e="joy")=>uw(e);function _A(e){var t,r,o,s,d,p,c,x,w,T;const k=e||{},{cssVarPrefix:E="joy",breakpoints:M,spacing:N,components:j,variants:q,shouldSkipGeneratingVar:B=GB}=k,D=er(k,ZB),$=XB(E),ie={primary:Xh.blue,neutral:Xh.grey,danger:Xh.red,success:Xh.green,warning:Xh.yellow,common:{white:"#FFF",black:"#000"}},J=Ke=>{var ft;const Ct=Ke.split("-"),jt=Ct[1],Gt=Ct[2];return $(Ke,(ft=ie[jt])==null?void 0:ft[Gt])},K=Ke=>({plainColor:J(`palette-${Ke}-500`),plainHoverBg:J(`palette-${Ke}-100`),plainActiveBg:J(`palette-${Ke}-200`),plainDisabledColor:J("palette-neutral-400"),outlinedColor:J(`palette-${Ke}-500`),outlinedBorder:J(`palette-${Ke}-300`),outlinedHoverBg:J(`palette-${Ke}-100`),outlinedActiveBg:J(`palette-${Ke}-200`),outlinedDisabledColor:J("palette-neutral-400"),outlinedDisabledBorder:J("palette-neutral-200"),softColor:J(`palette-${Ke}-700`),softBg:J(`palette-${Ke}-100`),softHoverBg:J(`palette-${Ke}-200`),softActiveColor:J(`palette-${Ke}-800`),softActiveBg:J(`palette-${Ke}-300`),softDisabledColor:J("palette-neutral-400"),softDisabledBg:J("palette-neutral-50"),solidColor:J("palette-common-white"),solidBg:J(`palette-${Ke}-500`),solidHoverBg:J(`palette-${Ke}-600`),solidActiveBg:J(`palette-${Ke}-700`),solidDisabledColor:J("palette-neutral-400"),solidDisabledBg:J("palette-neutral-100")}),se=Ke=>({plainColor:J(`palette-${Ke}-300`),plainHoverBg:J(`palette-${Ke}-800`),plainActiveBg:J(`palette-${Ke}-700`),plainDisabledColor:J("palette-neutral-500"),outlinedColor:J(`palette-${Ke}-200`),outlinedBorder:J(`palette-${Ke}-700`),outlinedHoverBg:J(`palette-${Ke}-800`),outlinedActiveBg:J(`palette-${Ke}-700`),outlinedDisabledColor:J("palette-neutral-500"),outlinedDisabledBorder:J("palette-neutral-800"),softColor:J(`palette-${Ke}-200`),softBg:J(`palette-${Ke}-800`),softHoverBg:J(`palette-${Ke}-700`),softActiveColor:J(`palette-${Ke}-100`),softActiveBg:J(`palette-${Ke}-600`),softDisabledColor:J("palette-neutral-500"),softDisabledBg:J("palette-neutral-800"),solidColor:J("palette-common-white"),solidBg:J(`palette-${Ke}-500`),solidHoverBg:J(`palette-${Ke}-600`),solidActiveBg:J(`palette-${Ke}-700`),solidDisabledColor:J("palette-neutral-500"),solidDisabledBg:J("palette-neutral-800")}),ae={palette:{mode:"light",primary:G({},ie.primary,K("primary")),neutral:G({},ie.neutral,K("neutral"),{plainColor:J("palette-neutral-700"),plainHoverColor:J("palette-neutral-900"),outlinedColor:J("palette-neutral-700")}),danger:G({},ie.danger,K("danger")),success:G({},ie.success,K("success")),warning:G({},ie.warning,K("warning")),common:{white:"#FFF",black:"#000"},text:{primary:J("palette-neutral-800"),secondary:J("palette-neutral-700"),tertiary:J("palette-neutral-600"),icon:J("palette-neutral-500")},background:{body:J("palette-common-white"),surface:J("palette-neutral-50"),popup:J("palette-common-white"),level1:J("palette-neutral-100"),level2:J("palette-neutral-200"),level3:J("palette-neutral-300"),tooltip:J("palette-neutral-500"),backdrop:`rgba(${$("palette-neutral-darkChannel",dc(ie.neutral[900]))} / 0.25)`},divider:`rgba(${$("palette-neutral-mainChannel",dc(ie.neutral[500]))} / 0.2)`,focusVisible:J("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"21 21 21",shadowOpacity:"0.08"},we={palette:{mode:"dark",primary:G({},ie.primary,se("primary")),neutral:G({},ie.neutral,se("neutral"),{plainColor:J("palette-neutral-300"),plainHoverColor:J("palette-neutral-300")}),danger:G({},ie.danger,se("danger")),success:G({},ie.success,se("success")),warning:G({},ie.warning,se("warning")),common:{white:"#FFF",black:"#000"},text:{primary:J("palette-neutral-100"),secondary:J("palette-neutral-300"),tertiary:J("palette-neutral-400"),icon:J("palette-neutral-400")},background:{body:J("palette-common-black"),surface:J("palette-neutral-900"),popup:J("palette-common-black"),level1:J("palette-neutral-800"),level2:J("palette-neutral-700"),level3:J("palette-neutral-600"),tooltip:J("palette-neutral-600"),backdrop:`rgba(${$("palette-neutral-darkChannel",dc(ie.neutral[50]))} / 0.25)`},divider:`rgba(${$("palette-neutral-mainChannel",dc(ie.neutral[500]))} / 0.16)`,focusVisible:J("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"0 0 0",shadowOpacity:"0.6"},xe='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',ke=G({body:`"Inter", ${$(`fontFamily-fallback, ${xe}`)}`,display:`"Inter", ${$(`fontFamily-fallback, ${xe}`)}`,code:"Source Code Pro,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace",fallback:xe},D.fontFamily),Ee=G({sm:300,md:500,lg:600,xl:700},D.fontWeight),$e=G({xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem",xl2:"1.5rem",xl3:"1.875rem",xl4:"2.25rem"},D.fontSize),Je=G({xs:"1.33334",sm:"1.42858",md:"1.5",lg:"1.55556",xl:"1.66667"},D.lineHeight),je=(t=(r=D.colorSchemes)==null||(r=r.light)==null?void 0:r.shadowRing)!=null?t:ae.shadowRing,Se=(o=(s=D.colorSchemes)==null||(s=s.light)==null?void 0:s.shadowChannel)!=null?o:ae.shadowChannel,Le=(d=(p=D.colorSchemes)==null||(p=p.light)==null?void 0:p.shadowOpacity)!=null?d:ae.shadowOpacity,Be={colorSchemes:{light:ae,dark:we},fontSize:$e,fontFamily:ke,fontWeight:Ee,focus:{thickness:"2px",selector:`&.${Vr("","focusVisible")}, &:focus-visible`,default:{outlineOffset:`var(--focus-outline-offset, ${$("focus-thickness",(c=(x=D.focus)==null?void 0:x.thickness)!=null?c:"2px")})`,outline:`${$("focus-thickness",(w=(T=D.focus)==null?void 0:T.thickness)!=null?w:"2px")} solid ${$("palette-focusVisible",ie.primary[500])}`}},lineHeight:Je,radius:{xs:"2px",sm:"6px",md:"8px",lg:"12px",xl:"16px"},shadow:{xs:`${$("shadowRing",je)}, 0px 1px 2px 0px rgba(${$("shadowChannel",Se)} / ${$("shadowOpacity",Le)})`,sm:`${$("shadowRing",je)}, 0px 1px 2px 0px rgba(${$("shadowChannel",Se)} / ${$("shadowOpacity",Le)}), 0px 2px 4px 0px rgba(${$("shadowChannel",Se)} / ${$("shadowOpacity",Le)})`,md:`${$("shadowRing",je)}, 0px 2px 8px -2px rgba(${$("shadowChannel",Se)} / ${$("shadowOpacity",Le)}), 0px 6px 12px -2px rgba(${$("shadowChannel",Se)} / ${$("shadowOpacity",Le)})`,lg:`${$("shadowRing",je)}, 0px 2px 8px -2px rgba(${$("shadowChannel",Se)} / ${$("shadowOpacity",Le)}), 0px 12px 16px -4px rgba(${$("shadowChannel",Se)} / ${$("shadowOpacity",Le)})`,xl:`${$("shadowRing",je)}, 0px 2px 8px -2px rgba(${$("shadowChannel",Se)} / ${$("shadowOpacity",Le)}), 0px 20px 24px -4px rgba(${$("shadowChannel",Se)} / ${$("shadowOpacity",Le)})`},zIndex:{badge:1,table:10,popup:1e3,modal:1300,snackbar:1400,tooltip:1500},typography:{h1:{fontFamily:$(`fontFamily-display, ${ke.display}`),fontWeight:$(`fontWeight-xl, ${Ee.xl}`),fontSize:$(`fontSize-xl4, ${$e.xl4}`),lineHeight:$(`lineHeight-xs, ${Je.xs}`),letterSpacing:"-0.025em",color:$(`palette-text-primary, ${ae.palette.text.primary}`)},h2:{fontFamily:$(`fontFamily-display, ${ke.display}`),fontWeight:$(`fontWeight-xl, ${Ee.xl}`),fontSize:$(`fontSize-xl3, ${$e.xl3}`),lineHeight:$(`lineHeight-xs, ${Je.xs}`),letterSpacing:"-0.025em",color:$(`palette-text-primary, ${ae.palette.text.primary}`)},h3:{fontFamily:$(`fontFamily-display, ${ke.display}`),fontWeight:$(`fontWeight-lg, ${Ee.lg}`),fontSize:$(`fontSize-xl2, ${$e.xl2}`),lineHeight:$(`lineHeight-xs, ${Je.xs}`),letterSpacing:"-0.025em",color:$(`palette-text-primary, ${ae.palette.text.primary}`)},h4:{fontFamily:$(`fontFamily-display, ${ke.display}`),fontWeight:$(`fontWeight-lg, ${Ee.lg}`),fontSize:$(`fontSize-xl, ${$e.xl}`),lineHeight:$(`lineHeight-md, ${Je.md}`),letterSpacing:"-0.025em",color:$(`palette-text-primary, ${ae.palette.text.primary}`)},"title-lg":{fontFamily:$(`fontFamily-body, ${ke.body}`),fontWeight:$(`fontWeight-lg, ${Ee.lg}`),fontSize:$(`fontSize-lg, ${$e.lg}`),lineHeight:$(`lineHeight-xs, ${Je.xs}`),color:$(`palette-text-primary, ${ae.palette.text.primary}`)},"title-md":{fontFamily:$(`fontFamily-body, ${ke.body}`),fontWeight:$(`fontWeight-md, ${Ee.md}`),fontSize:$(`fontSize-md, ${$e.md}`),lineHeight:$(`lineHeight-md, ${Je.md}`),color:$(`palette-text-primary, ${ae.palette.text.primary}`)},"title-sm":{fontFamily:$(`fontFamily-body, ${ke.body}`),fontWeight:$(`fontWeight-md, ${Ee.md}`),fontSize:$(`fontSize-sm, ${$e.sm}`),lineHeight:$(`lineHeight-sm, ${Je.sm}`),color:$(`palette-text-primary, ${ae.palette.text.primary}`)},"body-lg":{fontFamily:$(`fontFamily-body, ${ke.body}`),fontSize:$(`fontSize-lg, ${$e.lg}`),lineHeight:$(`lineHeight-md, ${Je.md}`),color:$(`palette-text-secondary, ${ae.palette.text.secondary}`)},"body-md":{fontFamily:$(`fontFamily-body, ${ke.body}`),fontSize:$(`fontSize-md, ${$e.md}`),lineHeight:$(`lineHeight-md, ${Je.md}`),color:$(`palette-text-secondary, ${ae.palette.text.secondary}`)},"body-sm":{fontFamily:$(`fontFamily-body, ${ke.body}`),fontSize:$(`fontSize-sm, ${$e.sm}`),lineHeight:$(`lineHeight-md, ${Je.md}`),color:$(`palette-text-tertiary, ${ae.palette.text.tertiary}`)},"body-xs":{fontFamily:$(`fontFamily-body, ${ke.body}`),fontWeight:$(`fontWeight-md, ${Ee.md}`),fontSize:$(`fontSize-xs, ${$e.xs}`),lineHeight:$(`lineHeight-md, ${Je.md}`),color:$(`palette-text-tertiary, ${ae.palette.text.tertiary}`)}}},Ve=D?di(Be,D):Be,{colorSchemes:Qe}=Ve,st=er(Ve,KB),ct=G({colorSchemes:Qe},st,{breakpoints:qb(M??{}),components:di({MuiSvgIcon:{defaultProps:{fontSize:"xl2"},styleOverrides:{root:({ownerState:Ke,theme:ft})=>{var Ct;const jt=Ke.instanceFontSize;return G({margin:"var(--Icon-margin)"},Ke.fontSize&&Ke.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${ft.vars.fontSize[Ke.fontSize]})`},!Ke.htmlColor&&G({color:`var(--Icon-color, ${ct.vars.palette.text.icon})`},Ke.color&&Ke.color!=="inherit"&&ft.vars.palette[Ke.color]&&{color:`rgba(${(Ct=ft.vars.palette[Ke.color])==null?void 0:Ct.mainChannel} / 1)`}),jt&&jt!=="inherit"&&{"--Icon-fontSize":ft.vars.fontSize[jt]})}}}},j),cssVarPrefix:E,getCssVar:$,spacing:YE(N)});function Mt(Ke,ft){Object.keys(ft).forEach(Ct=>{const jt={main:"500",light:"200",dark:"700"};Ke==="dark"&&(jt.main=400),!ft[Ct].mainChannel&&ft[Ct][jt.main]&&(ft[Ct].mainChannel=dc(ft[Ct][jt.main])),!ft[Ct].lightChannel&&ft[Ct][jt.light]&&(ft[Ct].lightChannel=dc(ft[Ct][jt.light])),!ft[Ct].darkChannel&&ft[Ct][jt.dark]&&(ft[Ct].darkChannel=dc(ft[Ct][jt.dark]))})}Object.entries(ct.colorSchemes).forEach(([Ke,ft])=>{Mt(Ke,ft.palette)});const vt={prefix:E,shouldSkipGeneratingVar:B},{vars:Dt,generateCssVars:tr}=$B(G({colorSchemes:Qe},st),vt);ct.vars=Dt,ct.generateCssVars=tr,ct.unstable_sxConfig=G({},WB,e==null?void 0:e.unstable_sxConfig),ct.unstable_sx=function(ft){return Md({sx:ft,theme:this})},ct.getColorSchemeSelector=Ke=>Ke==="light"?"&":`&[data-joy-color-scheme="${Ke}"], [data-joy-color-scheme="${Ke}"] &`;const ht={getCssVar:$,palette:ct.colorSchemes.light.palette};return ct.variants=di({plain:Wi("plain",ht),plainHover:Wi("plainHover",ht),plainActive:Wi("plainActive",ht),plainDisabled:Wi("plainDisabled",ht),outlined:Wi("outlined",ht),outlinedHover:Wi("outlinedHover",ht),outlinedActive:Wi("outlinedActive",ht),outlinedDisabled:Wi("outlinedDisabled",ht),soft:Wi("soft",ht),softHover:Wi("softHover",ht),softActive:Wi("softActive",ht),softDisabled:Wi("softDisabled",ht),solid:Wi("solid",ht),solidHover:Wi("solidHover",ht),solidActive:Wi("solidActive",ht),solidDisabled:Wi("solidDisabled",ht)},q),ct.palette=G({},ct.colorSchemes.light.palette,{colorScheme:"light"}),ct.shouldSkipGeneratingVar=B,ct.applyStyles=Qb,ct}const _f=_A(),Yh={attribute:"data-joy-color-scheme",colorSchemeStorageKey:"joy-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"joy-mode"},{CssVarsProvider:JB,useColorScheme:dw,getInitColorSchemeScript:mQ}=AB({themeId:Zy,theme:_f,attribute:Yh.attribute,modeStorageKey:Yh.modeStorageKey,colorSchemeStorageKey:Yh.colorSchemeStorageKey,defaultColorScheme:{light:Yh.defaultLightColorScheme,dark:Yh.defaultDarkColorScheme}}),mt=lA({defaultTheme:_f,themeId:Zy});function Ur({props:e,name:t}){return cA({props:e,name:t,defaultTheme:G({},_f,{components:{}}),themeId:Zy})}function YB(e){return te.jsx(kO,G({},e,{defaultTheme:_f,themeId:Zy}))}function nI(e,t,r=(o,s)=>o===s){return e.length===t.length&&e.every((o,s)=>r(o,t[s]))}const QB={disableDefaultClasses:!1},e4=R.createContext(QB);function t4(e){const{disableDefaultClasses:t}=R.useContext(e4);return r=>t?"":e(r)}function r4(e){const{rootElementName:t="",componentName:r}=e,[o,s]=R.useState(t.toUpperCase()),d=R.useCallback(p=>{var c;s((c=p==null?void 0:p.tagName)!=null?c:"")},[]);return[o,d]}const xA="base";function n4(e){return`${xA}--${e}`}function i4(e,t){return`${xA}-${e}-${t}`}function bA(e,t){const r=nA[t];return r?n4(r):i4(e,t)}function o4(e,t){const r={};return t.forEach(o=>{r[o]=bA(e,o)}),r}function us(e={}){const{disabled:t=!1,focusableWhenDisabled:r,href:o,rootRef:s,tabIndex:d,to:p,type:c,rootElementName:x}=e,w=R.useRef(null),[T,k]=R.useState(!1),{isFocusVisibleRef:E,onFocus:M,onBlur:N,ref:j}=ow(),[q,B]=R.useState(!1);t&&!r&&q&&B(!1),R.useEffect(()=>{E.current=q},[q,E]);const[D,$]=r4({rootElementName:x??(o||p?"a":void 0),componentName:"Button"}),ie=je=>Se=>{var Le;q&&Se.preventDefault(),(Le=je.onMouseLeave)==null||Le.call(je,Se)},J=je=>Se=>{var Le;N(Se),E.current===!1&&B(!1),(Le=je.onBlur)==null||Le.call(je,Se)},K=je=>Se=>{var Le;if(w.current||(w.current=Se.currentTarget),M(Se),E.current===!0){var Be;B(!0),(Be=je.onFocusVisible)==null||Be.call(je,Se)}(Le=je.onFocus)==null||Le.call(je,Se)},se=()=>{const je=w.current;return D==="BUTTON"||D==="INPUT"&&["button","submit","reset"].includes(je==null?void 0:je.type)||D==="A"&&(je==null?void 0:je.href)},ae=je=>Se=>{if(!t){var Le;(Le=je.onClick)==null||Le.call(je,Se)}},we=je=>Se=>{var Le;t||(k(!0),document.addEventListener("mouseup",()=>{k(!1)},{once:!0})),(Le=je.onMouseDown)==null||Le.call(je,Se)},xe=je=>Se=>{var Le;if((Le=je.onKeyDown)==null||Le.call(je,Se),!Se.defaultMuiPrevented&&(Se.target===Se.currentTarget&&!se()&&Se.key===" "&&Se.preventDefault(),Se.target===Se.currentTarget&&Se.key===" "&&!t&&k(!0),Se.target===Se.currentTarget&&!se()&&Se.key==="Enter"&&!t)){var Be;(Be=je.onClick)==null||Be.call(je,Se),Se.preventDefault()}},ke=je=>Se=>{var Le;if(Se.target===Se.currentTarget&&k(!1),(Le=je.onKeyUp)==null||Le.call(je,Se),Se.target===Se.currentTarget&&!se()&&!t&&Se.key===" "&&!Se.defaultMuiPrevented){var Be;(Be=je.onClick)==null||Be.call(je,Se)}},Ee=tn($,s,j,w),$e={};return d!==void 0&&($e.tabIndex=d),D==="BUTTON"?($e.type=c??"button",r?$e["aria-disabled"]=t:$e.disabled=t):D==="INPUT"?c&&["button","submit","reset"].includes(c)&&(r?$e["aria-disabled"]=t:$e.disabled=t):D!==""&&(!o&&!p&&($e.role="button",$e.tabIndex=d??0),t&&($e["aria-disabled"]=t,$e.tabIndex=r?d??0:-1)),{getRootProps:(je={})=>{const Se=G({},Mi(e),Mi(je)),Le=G({type:c},Se,$e,je,{onBlur:J(Se),onClick:ae(Se),onFocus:K(Se),onKeyDown:xe(Se),onKeyUp:ke(Se),onMouseDown:we(Se),onMouseLeave:ie(Se),ref:Ee});return delete Le.onFocusVisible,Le},focusVisible:q,setFocusVisible:B,active:T,rootRef:Ee}}const Tv=R.createContext(null);function a4(e,t){return e===t}const C_={},iI=()=>{};function f1(e,t){const r=G({},e);return Object.keys(t).forEach(o=>{t[o]!==void 0&&(r[o]=t[o])}),r}function s4(e){const{nextState:t,initialState:r,stateComparers:o,onStateChange:s,controlledProps:d,lastActionRef:p}=e,c=R.useRef(r);R.useEffect(()=>{if(p.current===null)return;const x=f1(c.current,d);Object.keys(t).forEach(w=>{var T;const k=(T=o[w])!=null?T:a4,E=t[w],M=x[w];if(M==null&&E!=null||M!=null&&E==null||M!=null&&E!=null&&!k(E,M)){var N,j;s==null||s((N=p.current.event)!=null?N:null,w,E,(j=p.current.type)!=null?j:"",t)}}),c.current=t,p.current=null},[c,t,p,s,o,d])}function wA(e){const t=R.useRef(null),{reducer:r,initialState:o,controlledProps:s=C_,stateComparers:d=C_,onStateChange:p=iI,actionContext:c,componentName:x=""}=e;R.useRef(s);const w=R.useCallback((M,N)=>{t.current=N;const j=f1(M,s);return r(j,N)},[s,r]),[T,k]=R.useReducer(w,o),E=R.useCallback(M=>{k(G({},M,{context:c}))},[c]);return s4({nextState:T,initialState:o,stateComparers:d??C_,onStateChange:p??iI,controlledProps:s,lastActionRef:t}),[f1(T,s),E]}const Da={blur:"dropdown:blur",escapeKeyDown:"dropdown:escapeKeyDown",toggle:"dropdown:toggle",open:"dropdown:open",close:"dropdown:close"};function l4(e,t){switch(t.type){case Da.blur:return{open:!1,changeReason:t.event};case Da.escapeKeyDown:return{open:!1,changeReason:t.event};case Da.toggle:return{open:!e.open,changeReason:t.event};case Da.open:return{open:!0,changeReason:t.event};case Da.close:return{open:!1,changeReason:t.event};default:throw new Error("Unhandled action")}}function c4(e={}){const{defaultOpen:t,onOpenChange:r,open:o,componentName:s="useDropdown"}=e,[d,p]=R.useState(""),[c,x]=R.useState(null),w=R.useRef(null),T=R.useCallback((j,q,B,D)=>{q==="open"&&(r==null||r(j,B)),w.current=D},[r]),k=R.useMemo(()=>o!==void 0?{open:o}:{},[o]),[E,M]=wA({controlledProps:k,initialState:t?{open:!0,changeReason:null}:{open:!1,changeReason:null},onStateChange:T,reducer:l4,componentName:s});return R.useEffect(()=>{!E.open&&w.current!==null&&w.current!==Da.blur&&(c==null||c.focus())},[E.open,c]),{contextValue:{state:E,dispatch:M,popupId:d,registerPopup:p,registerTrigger:x,triggerElement:c},open:E.open}}function u4(e){const{children:t,open:r,defaultOpen:o,onOpenChange:s}=e,{contextValue:d}=c4({defaultOpen:o,onOpenChange:s,open:r});return te.jsx(Tv.Provider,{value:d,children:t})}const d4=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function h4(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function p4(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=o=>e.ownerDocument.querySelector(`input[type="radio"]${o}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function f4(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||p4(e))}function m4(e){const t=[],r=[];return Array.from(e.querySelectorAll(d4)).forEach((o,s)=>{const d=h4(o);d===-1||!f4(o)||(d===0?t.push(o):r.push({documentOrder:s,tabIndex:d,node:o}))}),r.sort((o,s)=>o.tabIndex===s.tabIndex?o.documentOrder-s.documentOrder:o.tabIndex-s.tabIndex).map(o=>o.node).concat(t)}function g4(){return!0}function y4(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:o=!1,disableRestoreFocus:s=!1,getTabbable:d=m4,isEnabled:p=g4,open:c}=e,x=R.useRef(!1),w=R.useRef(null),T=R.useRef(null),k=R.useRef(null),E=R.useRef(null),M=R.useRef(!1),N=R.useRef(null),j=tn(aw(t),N),q=R.useRef(null);R.useEffect(()=>{!c||!N.current||(M.current=!r)},[r,c]),R.useEffect(()=>{if(!c||!N.current)return;const $=is(N.current);return N.current.contains($.activeElement)||(N.current.hasAttribute("tabIndex")||N.current.setAttribute("tabIndex","-1"),M.current&&N.current.focus()),()=>{s||(k.current&&k.current.focus&&(x.current=!0,k.current.focus()),k.current=null)}},[c]),R.useEffect(()=>{if(!c||!N.current)return;const $=is(N.current),ie=se=>{q.current=se,!(o||!p()||se.key!=="Tab")&&$.activeElement===N.current&&se.shiftKey&&(x.current=!0,T.current&&T.current.focus())},J=()=>{const se=N.current;if(se===null)return;if(!$.hasFocus()||!p()||x.current){x.current=!1;return}if(se.contains($.activeElement)||o&&$.activeElement!==w.current&&$.activeElement!==T.current)return;if($.activeElement!==E.current)E.current=null;else if(E.current!==null)return;if(!M.current)return;let ae=[];if(($.activeElement===w.current||$.activeElement===T.current)&&(ae=d(N.current)),ae.length>0){var we,xe;const ke=!!((we=q.current)!=null&&we.shiftKey&&((xe=q.current)==null?void 0:xe.key)==="Tab"),Ee=ae[0],$e=ae[ae.length-1];typeof Ee!="string"&&typeof $e!="string"&&(ke?$e.focus():Ee.focus())}else se.focus()};$.addEventListener("focusin",J),$.addEventListener("keydown",ie,!0);const K=setInterval(()=>{$.activeElement&&$.activeElement.tagName==="BODY"&&J()},50);return()=>{clearInterval(K),$.removeEventListener("focusin",J),$.removeEventListener("keydown",ie,!0)}},[r,o,s,p,c,d]);const B=$=>{k.current===null&&(k.current=$.relatedTarget),M.current=!0,E.current=$.target;const ie=t.props.onFocus;ie&&ie($)},D=$=>{k.current===null&&(k.current=$.relatedTarget),M.current=!0};return te.jsxs(R.Fragment,{children:[te.jsx("div",{tabIndex:c?0:-1,onFocus:D,ref:w,"data-testid":"sentinelStart"}),R.cloneElement(t,{ref:j,onFocus:B}),te.jsx("div",{tabIndex:c?0:-1,onFocus:D,ref:T,"data-testid":"sentinelEnd"})]})}const v4=R.createContext(void 0);function _4(){return R.useContext(v4)}function x4(e={}){const{defaultValue:t,disabled:r=!1,error:o=!1,onBlur:s,onChange:d,onFocus:p,required:c=!1,value:x,inputRef:w}=e,T=_4();let k,E,M,N,j;if(T){var q,B,D;k=void 0,E=(q=T.disabled)!=null?q:!1,M=(B=T.error)!=null?B:!1,N=(D=T.required)!=null?D:!1,j=T.value}else k=t,E=r,M=o,N=c,j=x;const{current:$}=R.useRef(j!=null),ie=R.useCallback(je=>{},[]),J=R.useRef(null),K=tn(J,w,ie),[se,ae]=R.useState(!1);R.useEffect(()=>{!T&&E&&se&&(ae(!1),s==null||s())},[T,E,se,s]);const we=je=>Se=>{var Le;if(T!=null&&T.disabled){Se.stopPropagation();return}if((Le=je.onFocus)==null||Le.call(je,Se),T&&T.onFocus){var Be;T==null||(Be=T.onFocus)==null||Be.call(T)}else ae(!0)},xe=je=>Se=>{var Le;(Le=je.onBlur)==null||Le.call(je,Se),T&&T.onBlur?T.onBlur():ae(!1)},ke=je=>(Se,...Le)=>{var Be,Ve;if(!$&&(Se.target||J.current)==null)throw new Error($s(17));T==null||(Be=T.onChange)==null||Be.call(T,Se),(Ve=je.onChange)==null||Ve.call(je,Se,...Le)},Ee=je=>Se=>{var Le;J.current&&Se.currentTarget===Se.target&&J.current.focus(),(Le=je.onClick)==null||Le.call(je,Se)};return{disabled:E,error:M,focused:se,formControlContext:T,getInputProps:(je={})=>{const Le=G({},{onBlur:s,onChange:d,onFocus:p},Mi(je)),Be=G({},Le,{onBlur:xe(Le),onChange:ke(Le),onFocus:we(Le)});return G({},Be,{"aria-invalid":M||void 0,defaultValue:k,value:j,required:N,disabled:E},je,{ref:K},Be)},getRootProps:(je={})=>{const Se=Mi(e,["onBlur","onChange","onFocus"]),Le=G({},Se,Mi(je));return G({},je,Le,{onClick:Ee(Le)})},inputRef:K,required:N,value:j}}const cn={blur:"list:blur",focus:"list:focus",itemClick:"list:itemClick",itemHover:"list:itemHover",itemsChange:"list:itemsChange",keyDown:"list:keyDown",resetHighlight:"list:resetHighlight",highlightLast:"list:highlightLast",textNavigation:"list:textNavigation",clearSelection:"list:clearSelection"};function b4(e,t,r,o,s,d){if(r.length===0||!o&&r.every((c,x)=>s(c,x)))return-1;let p=e;for(;;){if(!d&&t==="next"&&p===r.length||!d&&t==="previous"&&p===-1)return-1;if(o?!1:s(r[p],p))p+=t==="next"?1:-1,d&&(p=(p+r.length)%r.length);else return p}}function yi(e,t,r){var o;const{items:s,isItemDisabled:d,disableListWrap:p,disabledItemsFocusable:c,itemComparer:x,focusManagement:w}=r,T=w==="DOM"?0:-1,k=s.length-1,E=e==null?-1:s.findIndex(B=>x(B,e));let M,N,j=!p;switch(t){case"reset":if(T===-1)return null;M=0,N="next",j=!1;break;case"start":M=0,N="next",j=!1;break;case"end":M=k,N="previous",j=!1;break;default:{const B=E+t;B<0?!j&&E!==-1||Math.abs(t)>1?(M=0,N="next"):(M=k,N="previous"):B>k?!j||Math.abs(t)>1?(M=k,N="previous"):(M=0,N="next"):(M=B,N=t>=0?"next":"previous")}}const q=b4(M,N,s,c,d,j);return q===-1&&e!==null&&!d(e,E)?e:(o=s[q])!=null?o:null}function w4(e,t,r,o){return r==="none"?[]:r==="single"?o(t[0],e)?t:[e]:t.some(s=>o(s,e))?t.filter(s=>!o(s,e)):[...t,e]}function hw(e,t,r){const{itemComparer:o,isItemDisabled:s,selectionMode:d,items:p}=r,{selectedValues:c}=t,x=p.findIndex(T=>o(e,T));if(s(e,x))return t;const w=w4(e,c,d,o);return G({},t,{selectedValues:w,highlightedValue:e})}function S4(e,t,r){const o=t.highlightedValue,{orientation:s,pageSize:d}=r;switch(e){case"Home":return G({},t,{highlightedValue:yi(o,"start",r)});case"End":return G({},t,{highlightedValue:yi(o,"end",r)});case"PageUp":return G({},t,{highlightedValue:yi(o,-d,r)});case"PageDown":return G({},t,{highlightedValue:yi(o,d,r)});case"ArrowUp":if(s!=="vertical")break;return G({},t,{highlightedValue:yi(o,-1,r)});case"ArrowDown":if(s!=="vertical")break;return G({},t,{highlightedValue:yi(o,1,r)});case"ArrowLeft":{if(s==="vertical")break;return G({},t,{highlightedValue:yi(o,s==="horizontal-ltr"?-1:1,r)})}case"ArrowRight":{if(s==="vertical")break;return G({},t,{highlightedValue:yi(o,s==="horizontal-ltr"?1:-1,r)})}case"Enter":case" ":return t.highlightedValue===null?t:hw(t.highlightedValue,t,r)}return t}function C4(e,t){return t.focusManagement==="DOM"?e:G({},e,{highlightedValue:null})}function I4(e,t,r){var o;const s=(o=r(e))==null?void 0:o.trim().toLowerCase();return!s||s.length===0?!1:s.indexOf(t)===0}function T4(e,t,r){const{items:o,isItemDisabled:s,disabledItemsFocusable:d,getItemAsString:p}=r,c=t.length>1;let x=c?e.highlightedValue:yi(e.highlightedValue,1,r);for(let w=0;w<o.length;w+=1){if(!x||!c&&e.highlightedValue===x)return e;if(I4(x,t,p)&&(!s(x,o.indexOf(x))||d))return G({},e,{highlightedValue:x});x=yi(x,1,r)}return e}function P4(e,t,r,o){var s;const{itemComparer:d,focusManagement:p}=o;let c=null;if(r.highlightedValue!=null){var x;c=(x=e.find(k=>d(k,r.highlightedValue)))!=null?x:null}else p==="DOM"&&t.length===0&&(c=yi(null,"reset",o));const T=((s=r.selectedValues)!=null?s:[]).filter(k=>e.some(E=>d(E,k)));return G({},r,{highlightedValue:c,selectedValues:T})}function k4(e,t){return G({},e,{highlightedValue:yi(null,"reset",t)})}function E4(e,t){return G({},e,{highlightedValue:yi(null,"end",t)})}function A4(e,t){return G({},e,{selectedValues:[],highlightedValue:yi(null,"reset",t)})}function Pv(e,t){const{type:r,context:o}=t;switch(r){case cn.keyDown:return S4(t.key,e,o);case cn.itemClick:return hw(t.item,e,o);case cn.blur:return C4(e,o);case cn.textNavigation:return T4(e,t.searchString,o);case cn.itemsChange:return P4(t.items,t.previousItems,e,o);case cn.resetHighlight:return k4(e,o);case cn.highlightLast:return E4(e,o);case cn.clearSelection:return A4(e,o);default:return e}}const z4=500;function R4(e){const t=R.useRef({searchString:"",lastTime:null});return R.useCallback(r=>{if(r.key.length===1&&r.key!==" "){const o=t.current,s=r.key.toLowerCase(),d=performance.now();o.searchString.length>0&&o.lastTime&&d-o.lastTime>z4?o.searchString=s:(o.searchString.length!==1||s!==o.searchString)&&(o.searchString+=s),o.lastTime=d,e(o.searchString,r)}},[e])}const oI={},M4=()=>{},D4=(e,t)=>e===t,L4=()=>!1,$4=e=>typeof e=="string"?e:String(e),O4=()=>({highlightedValue:null,selectedValues:[]});function pw(e){const{controlledProps:t=oI,disabledItemsFocusable:r=!1,disableListWrap:o=!1,focusManagement:s="activeDescendant",getInitialState:d=O4,getItemDomElement:p,getItemId:c,isItemDisabled:x=L4,rootRef:w,onStateChange:T=M4,items:k,itemComparer:E=D4,getItemAsString:M=$4,onChange:N,onHighlightChange:j,onItemsChange:q,orientation:B="vertical",pageSize:D=5,reducerActionContext:$=oI,selectionMode:ie="single",stateReducer:J,componentName:K="useList"}=e,se=R.useRef(null),ae=tn(w,se),we=R.useCallback((ht,Ke,ft)=>{if(j==null||j(ht,Ke,ft),s==="DOM"&&Ke!=null&&(ft===cn.itemClick||ft===cn.keyDown||ft===cn.textNavigation)){var Ct;p==null||(Ct=p(Ke))==null||Ct.focus()}},[p,j,s]),xe=R.useMemo(()=>({highlightedValue:E,selectedValues:(ht,Ke)=>nI(ht,Ke,E)}),[E]),ke=R.useCallback((ht,Ke,ft,Ct,jt)=>{switch(T==null||T(ht,Ke,ft,Ct,jt),Ke){case"highlightedValue":we(ht,ft,Ct);break;case"selectedValues":N==null||N(ht,ft,Ct);break}},[we,N,T]),Ee=R.useMemo(()=>({disabledItemsFocusable:r,disableListWrap:o,focusManagement:s,isItemDisabled:x,itemComparer:E,items:k,getItemAsString:M,onHighlightChange:we,orientation:B,pageSize:D,selectionMode:ie,stateComparers:xe}),[r,o,s,x,E,k,M,we,B,D,ie,xe]),$e=d(),Je=J??Pv,je=R.useMemo(()=>G({},$,Ee),[$,Ee]),[Se,Le]=wA({reducer:Je,actionContext:je,initialState:$e,controlledProps:t,stateComparers:xe,onStateChange:ke,componentName:K}),{highlightedValue:Be,selectedValues:Ve}=Se,Qe=R4((ht,Ke)=>Le({type:cn.textNavigation,event:Ke,searchString:ht})),st=R.useRef([]);R.useEffect(()=>{nI(st.current,k,E)||(Le({type:cn.itemsChange,event:null,items:k,previousItems:st.current}),st.current=k,q==null||q(k))},[k,E,Le,q]);const ct=ht=>Ke=>{var ft;if((ft=ht.onKeyDown)==null||ft.call(ht,Ke),Ke.defaultMuiPrevented)return;const Ct=["Home","End","PageUp","PageDown"];B==="vertical"?Ct.push("ArrowUp","ArrowDown"):Ct.push("ArrowLeft","ArrowRight"),s==="activeDescendant"&&Ct.push(" ","Enter"),Ct.includes(Ke.key)&&Ke.preventDefault(),Le({type:cn.keyDown,key:Ke.key,event:Ke}),Qe(Ke)},Mt=ht=>Ke=>{var ft,Ct;(ft=ht.onBlur)==null||ft.call(ht,Ke),!Ke.defaultMuiPrevented&&((Ct=se.current)!=null&&Ct.contains(Ke.relatedTarget)||Le({type:cn.blur,event:Ke}))},vt=(ht={})=>{const Ke=Mi(ht);return G({},ht,{"aria-activedescendant":s==="activeDescendant"&&Be!=null?c(Be):void 0,tabIndex:s==="DOM"?-1:0,ref:ae},Ke,{onBlur:Mt(Ke),onKeyDown:ct(Ke)})},Dt=R.useCallback(ht=>{const Ke=(Ve??[]).some(jt=>jt!=null&&E(ht,jt)),ft=Be!=null&&E(ht,Be);return{focusable:s==="DOM",highlighted:ft,selected:Ke}},[E,Ve,Be,s]),tr=R.useMemo(()=>({dispatch:Le,getItemState:Dt}),[Le,Dt]);return R.useDebugValue({state:Se}),{contextValue:tr,dispatch:Le,getRootProps:vt,rootRef:ae,state:Se}}const Ll=R.createContext(null);function fw(e){const{handlePointerOverEvents:t=!1,item:r}=e,o=R.useContext(Ll);if(!o)throw new Error("useListItem must be used within a ListProvider");const{dispatch:s,getItemState:d}=o,{highlighted:p,selected:c,focusable:x}=d(r),w=R.useCallback(M=>N=>{var j;(j=M.onClick)==null||j.call(M,N),!N.defaultPrevented&&s({type:cn.itemClick,item:r,event:N})},[s,r]),T=R.useCallback(M=>N=>{var j;(j=M.onMouseOver)==null||j.call(M,N),!N.defaultPrevented&&s({type:cn.itemHover,item:r,event:N})},[s,r]);let k;return x&&(k=p?0:-1),{getRootProps:(M={})=>{const N=Mi(M);return G({},M,{onClick:w(N),onPointerOver:t?T(N):void 0,tabIndex:k})},highlighted:p,selected:c}}function B4(e,t){if(t.type===cn.itemHover)return G({},e,{highlightedValue:t.item});const r=Pv(e,t);if(r.highlightedValue===null&&t.context.items.length>0)return G({},r,{highlightedValue:t.context.items[0]});if(t.type===cn.keyDown&&t.event.key==="Escape")return G({},r,{open:!1});if(t.type===cn.blur){var o;if(!((o=t.context.listboxRef.current)!=null&&o.contains(t.event.relatedTarget))){var s,d;const p=(s=t.context.listboxRef.current)==null?void 0:s.getAttribute("id"),c=(d=t.event.relatedTarget)==null?void 0:d.getAttribute("aria-controls");return p&&c&&p===c?r:G({},r,{open:!1,highlightedValue:t.context.items[0]})}}return r}const xf=R.createContext(null);function F4(e){const t=Array.from(e.keys()).map(r=>{const o=e.get(r);return{key:r,subitem:o}});return t.sort((r,o)=>{const s=r.subitem.ref.current,d=o.subitem.ref.current;return s===null||d===null||s===d?0:s.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}),new Map(t.map(r=>[r.key,r.subitem]))}function kv(){const[e,t]=R.useState(new Map),r=R.useRef(new Set),o=R.useCallback(function(w){r.current.delete(w),t(T=>{const k=new Map(T);return k.delete(w),k})},[]),s=R.useCallback(function(w,T){let k;return typeof w=="function"?k=w(r.current):k=w,r.current.add(k),t(E=>{const M=new Map(E);return M.set(k,T),M}),{id:k,deregister:()=>o(k)}},[o]),d=R.useMemo(()=>F4(e),[e]),p=R.useCallback(function(w){return Array.from(d.keys()).indexOf(w)},[d]);return{contextValue:R.useMemo(()=>({getItemIndex:p,registerItem:s,totalSubitemCount:e.size}),[p,s,e.size]),subitems:d}}function Ev(e,t){const r=R.useContext(xf);if(r===null)throw new Error("useCompoundItem must be used within a useCompoundParent");const{registerItem:o}=r,[s,d]=R.useState(typeof e=="function"?void 0:e);return Os(()=>{const{id:p,deregister:c}=o(e,t);return d(p),c},[o,t,e]),{id:s,index:s!==void 0?r.getItemIndex(s):-1,totalItemCount:r.totalSubitemCount}}function Bs(e,t){return function(o={}){const s=G({},o,e(o));return G({},s,t(s))}}const N4={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function j4(e={}){var t,r;const{listboxRef:o,onItemsChange:s,id:d,disabledItemsFocusable:p=!0,disableListWrap:c=!1,autoFocus:x=!0,componentName:w="useMenu"}=e,T=R.useRef(null),k=tn(T,o),E=(t=Eo(d))!=null?t:"",{state:{open:M,changeReason:N},dispatch:j,triggerElement:q,registerPopup:B}=(r=R.useContext(Tv))!=null?r:N4,D=R.useRef(M),{subitems:$,contextValue:ie}=kv(),J=R.useMemo(()=>Array.from($.keys()),[$]),K=R.useCallback(Ve=>{var Qe,st;return Ve==null?null:(Qe=(st=$.get(Ve))==null?void 0:st.ref.current)!=null?Qe:null},[$]),se=R.useCallback(Ve=>{var Qe;return($==null||(Qe=$.get(Ve))==null?void 0:Qe.disabled)||!1},[$]),ae=R.useCallback(Ve=>{var Qe,st;return((Qe=$.get(Ve))==null?void 0:Qe.label)||((st=$.get(Ve))==null||(st=st.ref.current)==null?void 0:st.innerText)},[$]),we=R.useMemo(()=>({listboxRef:T}),[T]),{dispatch:xe,getRootProps:ke,contextValue:Ee,state:{highlightedValue:$e},rootRef:Je}=pw({disabledItemsFocusable:p,disableListWrap:c,focusManagement:"DOM",getItemDomElement:K,getInitialState:()=>({selectedValues:[],highlightedValue:null}),isItemDisabled:se,items:J,getItemAsString:ae,rootRef:k,onItemsChange:s,reducerActionContext:we,selectionMode:"none",stateReducer:B4,componentName:w});Os(()=>{B(E)},[E,B]),Os(()=>{M&&(N==null?void 0:N.type)==="keydown"&&N.key==="ArrowUp"&&xe({type:cn.highlightLast,event:N})},[M,N,xe]),R.useEffect(()=>{if(M&&x&&$e&&!D.current){var Ve;(Ve=$.get($e))==null||(Ve=Ve.ref)==null||(Ve=Ve.current)==null||Ve.focus()}},[M,x,$e,$,J]),R.useEffect(()=>{var Ve;if((Ve=T.current)!=null&&Ve.contains(document.activeElement)&&$e!==null){var Qe;$==null||(Qe=$.get($e))==null||(Qe=Qe.ref.current)==null||Qe.focus()}},[$e,$]);const je=Ve=>Qe=>{var st,ct;(st=Ve.onBlur)==null||st.call(Ve,Qe),!Qe.defaultMuiPrevented&&((ct=T.current)!=null&&ct.contains(Qe.relatedTarget)||Qe.relatedTarget===q||j({type:Da.blur,event:Qe}))},Se=Ve=>Qe=>{var st;(st=Ve.onKeyDown)==null||st.call(Ve,Qe),!Qe.defaultMuiPrevented&&Qe.key==="Escape"&&j({type:Da.escapeKeyDown,event:Qe})},Le=(Ve={})=>({onBlur:je(Ve),onKeyDown:Se(Ve)}),Be=(Ve={})=>{const Qe=Bs(Le,ke),st=Mi(Ve);return G({},Ve,st,Qe(st),{id:E,role:"menu"})};return R.useDebugValue({subitems:$,highlightedValue:$e}),{contextValue:G({},ie,Ee),dispatch:xe,getListboxProps:Be,highlightedValue:$e,listboxRef:Je,menuItems:$,open:M,triggerElement:q}}function V4(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:s,getItemState:d,registerItem:p,totalSubitemCount:c}=t,x=R.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:s}),[o,s,d]),w=R.useMemo(()=>({getItemIndex:s,registerItem:p,totalSubitemCount:c}),[p,s,c]);return te.jsx(xf.Provider,{value:w,children:te.jsx(Ll.Provider,{value:x,children:r})})}var SA={exports:{}},qo={},CA={exports:{}},IA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Be,Ve){var Qe=Be.length;Be.push(Ve);e:for(;0<Qe;){var st=Qe-1>>>1,ct=Be[st];if(0<s(ct,Ve))Be[st]=Ve,Be[Qe]=ct,Qe=st;else break e}}function r(Be){return Be.length===0?null:Be[0]}function o(Be){if(Be.length===0)return null;var Ve=Be[0],Qe=Be.pop();if(Qe!==Ve){Be[0]=Qe;e:for(var st=0,ct=Be.length,Mt=ct>>>1;st<Mt;){var vt=2*(st+1)-1,Dt=Be[vt],tr=vt+1,ht=Be[tr];if(0>s(Dt,Qe))tr<ct&&0>s(ht,Dt)?(Be[st]=ht,Be[tr]=Qe,st=tr):(Be[st]=Dt,Be[vt]=Qe,st=vt);else if(tr<ct&&0>s(ht,Qe))Be[st]=ht,Be[tr]=Qe,st=tr;else break e}}return Ve}function s(Be,Ve){var Qe=Be.sortIndex-Ve.sortIndex;return Qe!==0?Qe:Be.id-Ve.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var p=Date,c=p.now();e.unstable_now=function(){return p.now()-c}}var x=[],w=[],T=1,k=null,E=3,M=!1,N=!1,j=!1,q=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function $(Be){for(var Ve=r(w);Ve!==null;){if(Ve.callback===null)o(w);else if(Ve.startTime<=Be)o(w),Ve.sortIndex=Ve.expirationTime,t(x,Ve);else break;Ve=r(w)}}function ie(Be){if(j=!1,$(Be),!N)if(r(x)!==null)N=!0,Se(J);else{var Ve=r(w);Ve!==null&&Le(ie,Ve.startTime-Be)}}function J(Be,Ve){N=!1,j&&(j=!1,B(ae),ae=-1),M=!0;var Qe=E;try{for($(Ve),k=r(x);k!==null&&(!(k.expirationTime>Ve)||Be&&!ke());){var st=k.callback;if(typeof st=="function"){k.callback=null,E=k.priorityLevel;var ct=st(k.expirationTime<=Ve);Ve=e.unstable_now(),typeof ct=="function"?k.callback=ct:k===r(x)&&o(x),$(Ve)}else o(x);k=r(x)}if(k!==null)var Mt=!0;else{var vt=r(w);vt!==null&&Le(ie,vt.startTime-Ve),Mt=!1}return Mt}finally{k=null,E=Qe,M=!1}}var K=!1,se=null,ae=-1,we=5,xe=-1;function ke(){return!(e.unstable_now()-xe<we)}function Ee(){if(se!==null){var Be=e.unstable_now();xe=Be;var Ve=!0;try{Ve=se(!0,Be)}finally{Ve?$e():(K=!1,se=null)}}else K=!1}var $e;if(typeof D=="function")$e=function(){D(Ee)};else if(typeof MessageChannel<"u"){var Je=new MessageChannel,je=Je.port2;Je.port1.onmessage=Ee,$e=function(){je.postMessage(null)}}else $e=function(){q(Ee,0)};function Se(Be){se=Be,K||(K=!0,$e())}function Le(Be,Ve){ae=q(function(){Be(e.unstable_now())},Ve)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Be){Be.callback=null},e.unstable_continueExecution=function(){N||M||(N=!0,Se(J))},e.unstable_forceFrameRate=function(Be){0>Be||125<Be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<Be?Math.floor(1e3/Be):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_getFirstCallbackNode=function(){return r(x)},e.unstable_next=function(Be){switch(E){case 1:case 2:case 3:var Ve=3;break;default:Ve=E}var Qe=E;E=Ve;try{return Be()}finally{E=Qe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Be,Ve){switch(Be){case 1:case 2:case 3:case 4:case 5:break;default:Be=3}var Qe=E;E=Be;try{return Ve()}finally{E=Qe}},e.unstable_scheduleCallback=function(Be,Ve,Qe){var st=e.unstable_now();switch(typeof Qe=="object"&&Qe!==null?(Qe=Qe.delay,Qe=typeof Qe=="number"&&0<Qe?st+Qe:st):Qe=st,Be){case 1:var ct=-1;break;case 2:ct=250;break;case 5:ct=1073741823;break;case 4:ct=1e4;break;default:ct=5e3}return ct=Qe+ct,Be={id:T++,callback:Ve,priorityLevel:Be,startTime:Qe,expirationTime:ct,sortIndex:-1},Qe>st?(Be.sortIndex=Qe,t(w,Be),r(x)===null&&Be===r(w)&&(j?(B(ae),ae=-1):j=!0,Le(ie,Qe-st))):(Be.sortIndex=ct,t(x,Be),N||M||(N=!0,Se(J))),Be},e.unstable_shouldYield=ke,e.unstable_wrapCallback=function(Be){var Ve=E;return function(){var Qe=E;E=Ve;try{return Be.apply(this,arguments)}finally{E=Qe}}}})(IA);CA.exports=IA;var U4=CA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H4=R,Ho=U4;function xt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var TA=new Set,Up={};function Lc(e,t){hd(e,t),hd(e+"Capture",t)}function hd(e,t){for(Up[e]=t,e=0;e<t.length;e++)TA.add(t[e])}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m1=Object.prototype.hasOwnProperty,W4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aI={},sI={};function G4(e){return m1.call(sI,e)?!0:m1.call(aI,e)?!1:W4.test(e)?sI[e]=!0:(aI[e]=!0,!1)}function q4(e,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Z4(e,t,r,o){if(t===null||typeof t>"u"||q4(e,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ho(e,t,r,o,s,d,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=p}var Li={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Li[e]=new ho(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Li[t]=new ho(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Li[e]=new ho(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Li[e]=new ho(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Li[e]=new ho(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Li[e]=new ho(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Li[e]=new ho(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Li[e]=new ho(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Li[e]=new ho(e,5,!1,e.toLowerCase(),null,!1,!1)});var mw=/[\-:]([a-z])/g;function gw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mw,gw);Li[t]=new ho(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mw,gw);Li[t]=new ho(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mw,gw);Li[t]=new ho(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Li[e]=new ho(e,1,!1,e.toLowerCase(),null,!1,!1)});Li.xlinkHref=new ho("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Li[e]=new ho(e,1,!1,e.toLowerCase(),null,!0,!0)});function yw(e,t,r,o){var s=Li.hasOwnProperty(t)?Li[t]:null;(s!==null?s.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Z4(t,r,s,o)&&(r=null),o||s===null?G4(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,o=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}var Hs=H4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,eg=Symbol.for("react.element"),Nu=Symbol.for("react.portal"),ju=Symbol.for("react.fragment"),vw=Symbol.for("react.strict_mode"),g1=Symbol.for("react.profiler"),PA=Symbol.for("react.provider"),kA=Symbol.for("react.context"),_w=Symbol.for("react.forward_ref"),y1=Symbol.for("react.suspense"),v1=Symbol.for("react.suspense_list"),xw=Symbol.for("react.memo"),pl=Symbol.for("react.lazy"),EA=Symbol.for("react.offscreen"),lI=Symbol.iterator;function Qh(e){return e===null||typeof e!="object"?null:(e=lI&&e[lI]||e["@@iterator"],typeof e=="function"?e:null)}var On=Object.assign,I_;function vp(e){if(I_===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);I_=t&&t[1]||""}return`
`+I_+e}var T_=!1;function P_(e,t){if(!e||T_)return"";T_=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var o=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){o=w}e.call(t.prototype)}else{try{throw Error()}catch(w){o=w}e()}}catch(w){if(w&&o&&typeof w.stack=="string"){for(var s=w.stack.split(`
`),d=o.stack.split(`
`),p=s.length-1,c=d.length-1;1<=p&&0<=c&&s[p]!==d[c];)c--;for(;1<=p&&0<=c;p--,c--)if(s[p]!==d[c]){if(p!==1||c!==1)do if(p--,c--,0>c||s[p]!==d[c]){var x=`
`+s[p].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=p&&0<=c);break}}}finally{T_=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?vp(e):""}function K4(e){switch(e.tag){case 5:return vp(e.type);case 16:return vp("Lazy");case 13:return vp("Suspense");case 19:return vp("SuspenseList");case 0:case 2:case 15:return e=P_(e.type,!1),e;case 11:return e=P_(e.type.render,!1),e;case 1:return e=P_(e.type,!0),e;default:return""}}function _1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ju:return"Fragment";case Nu:return"Portal";case g1:return"Profiler";case vw:return"StrictMode";case y1:return"Suspense";case v1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kA:return(e.displayName||"Context")+".Consumer";case PA:return(e._context.displayName||"Context")+".Provider";case _w:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xw:return t=e.displayName||null,t!==null?t:_1(e.type)||"Memo";case pl:t=e._payload,e=e._init;try{return _1(e(t))}catch{}}return null}function X4(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _1(t);case 8:return t===vw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Rl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function AA(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function J4(e){var t=AA(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(p){o=""+p,d.call(this,p)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(p){o=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function tg(e){e._valueTracker||(e._valueTracker=J4(e))}function zA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=AA(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function oy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function x1(e,t){var r=t.checked;return On({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function cI(e,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=Rl(t.value!=null?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function RA(e,t){t=t.checked,t!=null&&yw(e,"checked",t,!1)}function b1(e,t){RA(e,t);var r=Rl(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?w1(e,t.type,r):t.hasOwnProperty("defaultValue")&&w1(e,t.type,Rl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function uI(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function w1(e,t,r){(t!=="number"||oy(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var _p=Array.isArray;function rd(e,t,r,o){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&o&&(e[r].defaultSelected=!0)}else{for(r=""+Rl(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,o&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function S1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(xt(91));return On({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dI(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(xt(92));if(_p(r)){if(1<r.length)throw Error(xt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Rl(r)}}function MA(e,t){var r=Rl(t.value),o=Rl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),o!=null&&(e.defaultValue=""+o)}function hI(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function DA(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?DA(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rg,LA=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,o,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,o,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(rg=rg||document.createElement("div"),rg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ip={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Y4=["Webkit","ms","Moz","O"];Object.keys(Ip).forEach(function(e){Y4.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ip[t]=Ip[e]})});function $A(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ip.hasOwnProperty(e)&&Ip[e]?(""+t).trim():t+"px"}function OA(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,s=$A(r,t[r],o);r==="float"&&(r="cssFloat"),o?e.setProperty(r,s):e[r]=s}}var Q4=On({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function I1(e,t){if(t){if(Q4[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(xt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(xt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(xt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(xt(62))}}function T1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var P1=null;function bw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var k1=null,nd=null,id=null;function pI(e){if(e=Sf(e)){if(typeof k1!="function")throw Error(xt(280));var t=e.stateNode;t&&(t=Dv(t),k1(e.stateNode,e.type,t))}}function BA(e){nd?id?id.push(e):id=[e]:nd=e}function FA(){if(nd){var e=nd,t=id;if(id=nd=null,pI(e),t)for(e=0;e<t.length;e++)pI(t[e])}}function NA(e,t){return e(t)}function jA(){}var k_=!1;function VA(e,t,r){if(k_)return e(t,r);k_=!0;try{return NA(e,t,r)}finally{k_=!1,(nd!==null||id!==null)&&(jA(),FA())}}function Wp(e,t){var r=e.stateNode;if(r===null)return null;var o=Dv(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(xt(231,t,typeof r));return r}var E1=!1;if(Fs)try{var ep={};Object.defineProperty(ep,"passive",{get:function(){E1=!0}}),window.addEventListener("test",ep,ep),window.removeEventListener("test",ep,ep)}catch{E1=!1}function eF(e,t,r,o,s,d,p,c,x){var w=Array.prototype.slice.call(arguments,3);try{t.apply(r,w)}catch(T){this.onError(T)}}var Tp=!1,ay=null,sy=!1,A1=null,tF={onError:function(e){Tp=!0,ay=e}};function rF(e,t,r,o,s,d,p,c,x){Tp=!1,ay=null,eF.apply(tF,arguments)}function nF(e,t,r,o,s,d,p,c,x){if(rF.apply(this,arguments),Tp){if(Tp){var w=ay;Tp=!1,ay=null}else throw Error(xt(198));sy||(sy=!0,A1=w)}}function $c(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function UA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fI(e){if($c(e)!==e)throw Error(xt(188))}function iF(e){var t=e.alternate;if(!t){if(t=$c(e),t===null)throw Error(xt(188));return t!==e?null:e}for(var r=e,o=t;;){var s=r.return;if(s===null)break;var d=s.alternate;if(d===null){if(o=s.return,o!==null){r=o;continue}break}if(s.child===d.child){for(d=s.child;d;){if(d===r)return fI(s),e;if(d===o)return fI(s),t;d=d.sibling}throw Error(xt(188))}if(r.return!==o.return)r=s,o=d;else{for(var p=!1,c=s.child;c;){if(c===r){p=!0,r=s,o=d;break}if(c===o){p=!0,o=s,r=d;break}c=c.sibling}if(!p){for(c=d.child;c;){if(c===r){p=!0,r=d,o=s;break}if(c===o){p=!0,o=d,r=s;break}c=c.sibling}if(!p)throw Error(xt(189))}}if(r.alternate!==o)throw Error(xt(190))}if(r.tag!==3)throw Error(xt(188));return r.stateNode.current===r?e:t}function HA(e){return e=iF(e),e!==null?WA(e):null}function WA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=WA(e);if(t!==null)return t;e=e.sibling}return null}var GA=Ho.unstable_scheduleCallback,mI=Ho.unstable_cancelCallback,oF=Ho.unstable_shouldYield,aF=Ho.unstable_requestPaint,Jn=Ho.unstable_now,sF=Ho.unstable_getCurrentPriorityLevel,ww=Ho.unstable_ImmediatePriority,qA=Ho.unstable_UserBlockingPriority,ly=Ho.unstable_NormalPriority,lF=Ho.unstable_LowPriority,ZA=Ho.unstable_IdlePriority,Av=null,os=null;function cF(e){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(Av,e,void 0,(e.current.flags&128)===128)}catch{}}var La=Math.clz32?Math.clz32:hF,uF=Math.log,dF=Math.LN2;function hF(e){return e>>>=0,e===0?32:31-(uF(e)/dF|0)|0}var ng=64,ig=4194304;function xp(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function cy(e,t){var r=e.pendingLanes;if(r===0)return 0;var o=0,s=e.suspendedLanes,d=e.pingedLanes,p=r&268435455;if(p!==0){var c=p&~s;c!==0?o=xp(c):(d&=p,d!==0&&(o=xp(d)))}else p=r&~s,p!==0?o=xp(p):d!==0&&(o=xp(d));if(o===0)return 0;if(t!==0&&t!==o&&!(t&s)&&(s=o&-o,d=t&-t,s>=d||s===16&&(d&4194240)!==0))return t;if(o&4&&(o|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)r=31-La(t),s=1<<r,o|=e[r],t&=~s;return o}function pF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fF(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,s=e.expirationTimes,d=e.pendingLanes;0<d;){var p=31-La(d),c=1<<p,x=s[p];x===-1?(!(c&r)||c&o)&&(s[p]=pF(c,t)):x<=t&&(e.expiredLanes|=c),d&=~c}}function z1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function KA(){var e=ng;return ng<<=1,!(ng&4194240)&&(ng=64),e}function E_(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bf(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-La(t),e[t]=r}function mF(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-La(r),d=1<<s;t[s]=0,o[s]=-1,e[s]=-1,r&=~d}}function Sw(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-La(r),s=1<<o;s&t|e[o]&t&&(e[o]|=t),r&=~s}}var rn=0;function XA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var JA,Cw,YA,QA,ez,R1=!1,og=[],wl=null,Sl=null,Cl=null,Gp=new Map,qp=new Map,ml=[],gF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gI(e,t){switch(e){case"focusin":case"focusout":wl=null;break;case"dragenter":case"dragleave":Sl=null;break;case"mouseover":case"mouseout":Cl=null;break;case"pointerover":case"pointerout":Gp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qp.delete(t.pointerId)}}function tp(e,t,r,o,s,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:d,targetContainers:[s]},t!==null&&(t=Sf(t),t!==null&&Cw(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function yF(e,t,r,o,s){switch(t){case"focusin":return wl=tp(wl,e,t,r,o,s),!0;case"dragenter":return Sl=tp(Sl,e,t,r,o,s),!0;case"mouseover":return Cl=tp(Cl,e,t,r,o,s),!0;case"pointerover":var d=s.pointerId;return Gp.set(d,tp(Gp.get(d)||null,e,t,r,o,s)),!0;case"gotpointercapture":return d=s.pointerId,qp.set(d,tp(qp.get(d)||null,e,t,r,o,s)),!0}return!1}function tz(e){var t=_c(e.target);if(t!==null){var r=$c(t);if(r!==null){if(t=r.tag,t===13){if(t=UA(r),t!==null){e.blockedOn=t,ez(e.priority,function(){YA(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=M1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);P1=o,r.target.dispatchEvent(o),P1=null}else return t=Sf(r),t!==null&&Cw(t),e.blockedOn=r,!1;t.shift()}return!0}function yI(e,t,r){Rg(e)&&r.delete(t)}function vF(){R1=!1,wl!==null&&Rg(wl)&&(wl=null),Sl!==null&&Rg(Sl)&&(Sl=null),Cl!==null&&Rg(Cl)&&(Cl=null),Gp.forEach(yI),qp.forEach(yI)}function rp(e,t){e.blockedOn===t&&(e.blockedOn=null,R1||(R1=!0,Ho.unstable_scheduleCallback(Ho.unstable_NormalPriority,vF)))}function Zp(e){function t(s){return rp(s,e)}if(0<og.length){rp(og[0],e);for(var r=1;r<og.length;r++){var o=og[r];o.blockedOn===e&&(o.blockedOn=null)}}for(wl!==null&&rp(wl,e),Sl!==null&&rp(Sl,e),Cl!==null&&rp(Cl,e),Gp.forEach(t),qp.forEach(t),r=0;r<ml.length;r++)o=ml[r],o.blockedOn===e&&(o.blockedOn=null);for(;0<ml.length&&(r=ml[0],r.blockedOn===null);)tz(r),r.blockedOn===null&&ml.shift()}var od=Hs.ReactCurrentBatchConfig,uy=!0;function _F(e,t,r,o){var s=rn,d=od.transition;od.transition=null;try{rn=1,Iw(e,t,r,o)}finally{rn=s,od.transition=d}}function xF(e,t,r,o){var s=rn,d=od.transition;od.transition=null;try{rn=4,Iw(e,t,r,o)}finally{rn=s,od.transition=d}}function Iw(e,t,r,o){if(uy){var s=M1(e,t,r,o);if(s===null)F_(e,t,o,dy,r),gI(e,o);else if(yF(s,e,t,r,o))o.stopPropagation();else if(gI(e,o),t&4&&-1<gF.indexOf(e)){for(;s!==null;){var d=Sf(s);if(d!==null&&JA(d),d=M1(e,t,r,o),d===null&&F_(e,t,o,dy,r),d===s)break;s=d}s!==null&&o.stopPropagation()}else F_(e,t,o,null,r)}}var dy=null;function M1(e,t,r,o){if(dy=null,e=bw(o),e=_c(e),e!==null)if(t=$c(e),t===null)e=null;else if(r=t.tag,r===13){if(e=UA(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return dy=e,null}function rz(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sF()){case ww:return 1;case qA:return 4;case ly:case lF:return 16;case ZA:return 536870912;default:return 16}default:return 16}}var _l=null,Tw=null,Mg=null;function nz(){if(Mg)return Mg;var e,t=Tw,r=t.length,o,s="value"in _l?_l.value:_l.textContent,d=s.length;for(e=0;e<r&&t[e]===s[e];e++);var p=r-e;for(o=1;o<=p&&t[r-o]===s[d-o];o++);return Mg=s.slice(e,1<o?1-o:void 0)}function Dg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ag(){return!0}function vI(){return!1}function Zo(e){function t(r,o,s,d,p){this._reactName=r,this._targetInst=s,this.type=o,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(d):d[c]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ag:vI,this.isPropagationStopped=vI,this}return On(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ag)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ag)},persist:function(){},isPersistent:ag}),t}var Dd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pw=Zo(Dd),wf=On({},Dd,{view:0,detail:0}),bF=Zo(wf),A_,z_,np,zv=On({},wf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==np&&(np&&e.type==="mousemove"?(A_=e.screenX-np.screenX,z_=e.screenY-np.screenY):z_=A_=0,np=e),A_)},movementY:function(e){return"movementY"in e?e.movementY:z_}}),_I=Zo(zv),wF=On({},zv,{dataTransfer:0}),SF=Zo(wF),CF=On({},wf,{relatedTarget:0}),R_=Zo(CF),IF=On({},Dd,{animationName:0,elapsedTime:0,pseudoElement:0}),TF=Zo(IF),PF=On({},Dd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kF=Zo(PF),EF=On({},Dd,{data:0}),xI=Zo(EF),AF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RF[e])?!!t[e]:!1}function kw(){return MF}var DF=On({},wf,{key:function(e){if(e.key){var t=AF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Dg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kw,charCode:function(e){return e.type==="keypress"?Dg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Dg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),LF=Zo(DF),$F=On({},zv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bI=Zo($F),OF=On({},wf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kw}),BF=Zo(OF),FF=On({},Dd,{propertyName:0,elapsedTime:0,pseudoElement:0}),NF=Zo(FF),jF=On({},zv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),VF=Zo(jF),UF=[9,13,27,32],Ew=Fs&&"CompositionEvent"in window,Pp=null;Fs&&"documentMode"in document&&(Pp=document.documentMode);var HF=Fs&&"TextEvent"in window&&!Pp,iz=Fs&&(!Ew||Pp&&8<Pp&&11>=Pp),wI=" ",SI=!1;function oz(e,t){switch(e){case"keyup":return UF.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function az(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vu=!1;function WF(e,t){switch(e){case"compositionend":return az(t);case"keypress":return t.which!==32?null:(SI=!0,wI);case"textInput":return e=t.data,e===wI&&SI?null:e;default:return null}}function GF(e,t){if(Vu)return e==="compositionend"||!Ew&&oz(e,t)?(e=nz(),Mg=Tw=_l=null,Vu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return iz&&t.locale!=="ko"?null:t.data;default:return null}}var qF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qF[e.type]:t==="textarea"}function sz(e,t,r,o){BA(o),t=hy(t,"onChange"),0<t.length&&(r=new Pw("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var kp=null,Kp=null;function ZF(e){vz(e,0)}function Rv(e){var t=Wu(e);if(zA(t))return e}function KF(e,t){if(e==="change")return t}var lz=!1;if(Fs){var M_;if(Fs){var D_="oninput"in document;if(!D_){var II=document.createElement("div");II.setAttribute("oninput","return;"),D_=typeof II.oninput=="function"}M_=D_}else M_=!1;lz=M_&&(!document.documentMode||9<document.documentMode)}function TI(){kp&&(kp.detachEvent("onpropertychange",cz),Kp=kp=null)}function cz(e){if(e.propertyName==="value"&&Rv(Kp)){var t=[];sz(t,Kp,e,bw(e)),VA(ZF,t)}}function XF(e,t,r){e==="focusin"?(TI(),kp=t,Kp=r,kp.attachEvent("onpropertychange",cz)):e==="focusout"&&TI()}function JF(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rv(Kp)}function YF(e,t){if(e==="click")return Rv(t)}function QF(e,t){if(e==="input"||e==="change")return Rv(t)}function e6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ba=typeof Object.is=="function"?Object.is:e6;function Xp(e,t){if(Ba(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var s=r[o];if(!m1.call(t,s)||!Ba(e[s],t[s]))return!1}return!0}function PI(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kI(e,t){var r=PI(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=PI(r)}}function uz(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uz(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function dz(){for(var e=window,t=oy();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=oy(e.document)}return t}function Aw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function t6(e){var t=dz(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&uz(r.ownerDocument.documentElement,r)){if(o!==null&&Aw(r)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,d=Math.min(o.start,s);o=o.end===void 0?d:Math.min(o.end,s),!e.extend&&d>o&&(s=o,o=d,d=s),s=kI(r,d);var p=kI(r,o);s&&p&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),d>o?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var r6=Fs&&"documentMode"in document&&11>=document.documentMode,Uu=null,D1=null,Ep=null,L1=!1;function EI(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;L1||Uu==null||Uu!==oy(o)||(o=Uu,"selectionStart"in o&&Aw(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ep&&Xp(Ep,o)||(Ep=o,o=hy(D1,"onSelect"),0<o.length&&(t=new Pw("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=Uu)))}function sg(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Hu={animationend:sg("Animation","AnimationEnd"),animationiteration:sg("Animation","AnimationIteration"),animationstart:sg("Animation","AnimationStart"),transitionend:sg("Transition","TransitionEnd")},L_={},hz={};Fs&&(hz=document.createElement("div").style,"AnimationEvent"in window||(delete Hu.animationend.animation,delete Hu.animationiteration.animation,delete Hu.animationstart.animation),"TransitionEvent"in window||delete Hu.transitionend.transition);function Mv(e){if(L_[e])return L_[e];if(!Hu[e])return e;var t=Hu[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in hz)return L_[e]=t[r];return e}var pz=Mv("animationend"),fz=Mv("animationiteration"),mz=Mv("animationstart"),gz=Mv("transitionend"),yz=new Map,AI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $l(e,t){yz.set(e,t),Lc(t,[e])}for(var $_=0;$_<AI.length;$_++){var O_=AI[$_],n6=O_.toLowerCase(),i6=O_[0].toUpperCase()+O_.slice(1);$l(n6,"on"+i6)}$l(pz,"onAnimationEnd");$l(fz,"onAnimationIteration");$l(mz,"onAnimationStart");$l("dblclick","onDoubleClick");$l("focusin","onFocus");$l("focusout","onBlur");$l(gz,"onTransitionEnd");hd("onMouseEnter",["mouseout","mouseover"]);hd("onMouseLeave",["mouseout","mouseover"]);hd("onPointerEnter",["pointerout","pointerover"]);hd("onPointerLeave",["pointerout","pointerover"]);Lc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o6=new Set("cancel close invalid load scroll toggle".split(" ").concat(bp));function zI(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,nF(o,t,void 0,e),e.currentTarget=null}function vz(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],s=o.event;o=o.listeners;e:{var d=void 0;if(t)for(var p=o.length-1;0<=p;p--){var c=o[p],x=c.instance,w=c.currentTarget;if(c=c.listener,x!==d&&s.isPropagationStopped())break e;zI(s,c,w),d=x}else for(p=0;p<o.length;p++){if(c=o[p],x=c.instance,w=c.currentTarget,c=c.listener,x!==d&&s.isPropagationStopped())break e;zI(s,c,w),d=x}}}if(sy)throw e=A1,sy=!1,A1=null,e}function Sn(e,t){var r=t[N1];r===void 0&&(r=t[N1]=new Set);var o=e+"__bubble";r.has(o)||(_z(t,e,2,!1),r.add(o))}function B_(e,t,r){var o=0;t&&(o|=4),_z(r,e,o,t)}var lg="_reactListening"+Math.random().toString(36).slice(2);function Jp(e){if(!e[lg]){e[lg]=!0,TA.forEach(function(r){r!=="selectionchange"&&(o6.has(r)||B_(r,!1,e),B_(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[lg]||(t[lg]=!0,B_("selectionchange",!1,t))}}function _z(e,t,r,o){switch(rz(t)){case 1:var s=_F;break;case 4:s=xF;break;default:s=Iw}r=s.bind(null,t,r,e),s=void 0,!E1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),o?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function F_(e,t,r,o,s){var d=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var p=o.tag;if(p===3||p===4){var c=o.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(p===4)for(p=o.return;p!==null;){var x=p.tag;if((x===3||x===4)&&(x=p.stateNode.containerInfo,x===s||x.nodeType===8&&x.parentNode===s))return;p=p.return}for(;c!==null;){if(p=_c(c),p===null)return;if(x=p.tag,x===5||x===6){o=d=p;continue e}c=c.parentNode}}o=o.return}VA(function(){var w=d,T=bw(r),k=[];e:{var E=yz.get(e);if(E!==void 0){var M=Pw,N=e;switch(e){case"keypress":if(Dg(r)===0)break e;case"keydown":case"keyup":M=LF;break;case"focusin":N="focus",M=R_;break;case"focusout":N="blur",M=R_;break;case"beforeblur":case"afterblur":M=R_;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=_I;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=SF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=BF;break;case pz:case fz:case mz:M=TF;break;case gz:M=NF;break;case"scroll":M=bF;break;case"wheel":M=VF;break;case"copy":case"cut":case"paste":M=kF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=bI}var j=(t&4)!==0,q=!j&&e==="scroll",B=j?E!==null?E+"Capture":null:E;j=[];for(var D=w,$;D!==null;){$=D;var ie=$.stateNode;if($.tag===5&&ie!==null&&($=ie,B!==null&&(ie=Wp(D,B),ie!=null&&j.push(Yp(D,ie,$)))),q)break;D=D.return}0<j.length&&(E=new M(E,N,null,r,T),k.push({event:E,listeners:j}))}}if(!(t&7)){e:{if(E=e==="mouseover"||e==="pointerover",M=e==="mouseout"||e==="pointerout",E&&r!==P1&&(N=r.relatedTarget||r.fromElement)&&(_c(N)||N[Ns]))break e;if((M||E)&&(E=T.window===T?T:(E=T.ownerDocument)?E.defaultView||E.parentWindow:window,M?(N=r.relatedTarget||r.toElement,M=w,N=N?_c(N):null,N!==null&&(q=$c(N),N!==q||N.tag!==5&&N.tag!==6)&&(N=null)):(M=null,N=w),M!==N)){if(j=_I,ie="onMouseLeave",B="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(j=bI,ie="onPointerLeave",B="onPointerEnter",D="pointer"),q=M==null?E:Wu(M),$=N==null?E:Wu(N),E=new j(ie,D+"leave",M,r,T),E.target=q,E.relatedTarget=$,ie=null,_c(T)===w&&(j=new j(B,D+"enter",N,r,T),j.target=$,j.relatedTarget=q,ie=j),q=ie,M&&N)t:{for(j=M,B=N,D=0,$=j;$;$=Iu($))D++;for($=0,ie=B;ie;ie=Iu(ie))$++;for(;0<D-$;)j=Iu(j),D--;for(;0<$-D;)B=Iu(B),$--;for(;D--;){if(j===B||B!==null&&j===B.alternate)break t;j=Iu(j),B=Iu(B)}j=null}else j=null;M!==null&&RI(k,E,M,j,!1),N!==null&&q!==null&&RI(k,q,N,j,!0)}}e:{if(E=w?Wu(w):window,M=E.nodeName&&E.nodeName.toLowerCase(),M==="select"||M==="input"&&E.type==="file")var J=KF;else if(CI(E))if(lz)J=QF;else{J=JF;var K=XF}else(M=E.nodeName)&&M.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(J=YF);if(J&&(J=J(e,w))){sz(k,J,r,T);break e}K&&K(e,E,w),e==="focusout"&&(K=E._wrapperState)&&K.controlled&&E.type==="number"&&w1(E,"number",E.value)}switch(K=w?Wu(w):window,e){case"focusin":(CI(K)||K.contentEditable==="true")&&(Uu=K,D1=w,Ep=null);break;case"focusout":Ep=D1=Uu=null;break;case"mousedown":L1=!0;break;case"contextmenu":case"mouseup":case"dragend":L1=!1,EI(k,r,T);break;case"selectionchange":if(r6)break;case"keydown":case"keyup":EI(k,r,T)}var se;if(Ew)e:{switch(e){case"compositionstart":var ae="onCompositionStart";break e;case"compositionend":ae="onCompositionEnd";break e;case"compositionupdate":ae="onCompositionUpdate";break e}ae=void 0}else Vu?oz(e,r)&&(ae="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ae="onCompositionStart");ae&&(iz&&r.locale!=="ko"&&(Vu||ae!=="onCompositionStart"?ae==="onCompositionEnd"&&Vu&&(se=nz()):(_l=T,Tw="value"in _l?_l.value:_l.textContent,Vu=!0)),K=hy(w,ae),0<K.length&&(ae=new xI(ae,e,null,r,T),k.push({event:ae,listeners:K}),se?ae.data=se:(se=az(r),se!==null&&(ae.data=se)))),(se=HF?WF(e,r):GF(e,r))&&(w=hy(w,"onBeforeInput"),0<w.length&&(T=new xI("onBeforeInput","beforeinput",null,r,T),k.push({event:T,listeners:w}),T.data=se))}vz(k,t)})}function Yp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function hy(e,t){for(var r=t+"Capture",o=[];e!==null;){var s=e,d=s.stateNode;s.tag===5&&d!==null&&(s=d,d=Wp(e,r),d!=null&&o.unshift(Yp(e,d,s)),d=Wp(e,t),d!=null&&o.push(Yp(e,d,s))),e=e.return}return o}function Iu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function RI(e,t,r,o,s){for(var d=t._reactName,p=[];r!==null&&r!==o;){var c=r,x=c.alternate,w=c.stateNode;if(x!==null&&x===o)break;c.tag===5&&w!==null&&(c=w,s?(x=Wp(r,d),x!=null&&p.unshift(Yp(r,x,c))):s||(x=Wp(r,d),x!=null&&p.push(Yp(r,x,c)))),r=r.return}p.length!==0&&e.push({event:t,listeners:p})}var a6=/\r\n?/g,s6=/\u0000|\uFFFD/g;function MI(e){return(typeof e=="string"?e:""+e).replace(a6,`
`).replace(s6,"")}function cg(e,t,r){if(t=MI(t),MI(e)!==t&&r)throw Error(xt(425))}function py(){}var $1=null,O1=null;function B1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var F1=typeof setTimeout=="function"?setTimeout:void 0,l6=typeof clearTimeout=="function"?clearTimeout:void 0,DI=typeof Promise=="function"?Promise:void 0,c6=typeof queueMicrotask=="function"?queueMicrotask:typeof DI<"u"?function(e){return DI.resolve(null).then(e).catch(u6)}:F1;function u6(e){setTimeout(function(){throw e})}function N_(e,t){var r=t,o=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(o===0){e.removeChild(s),Zp(t);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=s}while(r);Zp(t)}function Il(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function LI(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ld=Math.random().toString(36).slice(2),rs="__reactFiber$"+Ld,Qp="__reactProps$"+Ld,Ns="__reactContainer$"+Ld,N1="__reactEvents$"+Ld,d6="__reactListeners$"+Ld,h6="__reactHandles$"+Ld;function _c(e){var t=e[rs];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ns]||r[rs]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=LI(e);e!==null;){if(r=e[rs])return r;e=LI(e)}return t}e=r,r=e.parentNode}return null}function Sf(e){return e=e[rs]||e[Ns],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(xt(33))}function Dv(e){return e[Qp]||null}var j1=[],Gu=-1;function Ol(e){return{current:e}}function In(e){0>Gu||(e.current=j1[Gu],j1[Gu]=null,Gu--)}function _n(e,t){Gu++,j1[Gu]=e.current,e.current=t}var Ml={},Ji=Ol(Ml),So=Ol(!1),Ec=Ml;function pd(e,t){var r=e.type.contextTypes;if(!r)return Ml;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var s={},d;for(d in r)s[d]=t[d];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Co(e){return e=e.childContextTypes,e!=null}function fy(){In(So),In(Ji)}function $I(e,t,r){if(Ji.current!==Ml)throw Error(xt(168));_n(Ji,t),_n(So,r)}function xz(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var s in o)if(!(s in t))throw Error(xt(108,X4(e)||"Unknown",s));return On({},r,o)}function my(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ml,Ec=Ji.current,_n(Ji,e),_n(So,So.current),!0}function OI(e,t,r){var o=e.stateNode;if(!o)throw Error(xt(169));r?(e=xz(e,t,Ec),o.__reactInternalMemoizedMergedChildContext=e,In(So),In(Ji),_n(Ji,e)):In(So),_n(So,r)}var zs=null,Lv=!1,j_=!1;function bz(e){zs===null?zs=[e]:zs.push(e)}function p6(e){Lv=!0,bz(e)}function Bl(){if(!j_&&zs!==null){j_=!0;var e=0,t=rn;try{var r=zs;for(rn=1;e<r.length;e++){var o=r[e];do o=o(!0);while(o!==null)}zs=null,Lv=!1}catch(s){throw zs!==null&&(zs=zs.slice(e+1)),GA(ww,Bl),s}finally{rn=t,j_=!1}}return null}var qu=[],Zu=0,gy=null,yy=0,oa=[],aa=0,Ac=null,Ms=1,Ds="";function fc(e,t){qu[Zu++]=yy,qu[Zu++]=gy,gy=e,yy=t}function wz(e,t,r){oa[aa++]=Ms,oa[aa++]=Ds,oa[aa++]=Ac,Ac=e;var o=Ms;e=Ds;var s=32-La(o)-1;o&=~(1<<s),r+=1;var d=32-La(t)+s;if(30<d){var p=s-s%5;d=(o&(1<<p)-1).toString(32),o>>=p,s-=p,Ms=1<<32-La(t)+s|r<<s|o,Ds=d+e}else Ms=1<<d|r<<s|o,Ds=e}function zw(e){e.return!==null&&(fc(e,1),wz(e,1,0))}function Rw(e){for(;e===gy;)gy=qu[--Zu],qu[Zu]=null,yy=qu[--Zu],qu[Zu]=null;for(;e===Ac;)Ac=oa[--aa],oa[aa]=null,Ds=oa[--aa],oa[aa]=null,Ms=oa[--aa],oa[aa]=null}var Uo=null,jo=null,zn=!1,Ma=null;function Sz(e,t){var r=sa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function BI(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Uo=e,jo=Il(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Uo=e,jo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ac!==null?{id:Ms,overflow:Ds}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=sa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Uo=e,jo=null,!0):!1;default:return!1}}function V1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function U1(e){if(zn){var t=jo;if(t){var r=t;if(!BI(e,t)){if(V1(e))throw Error(xt(418));t=Il(r.nextSibling);var o=Uo;t&&BI(e,t)?Sz(o,r):(e.flags=e.flags&-4097|2,zn=!1,Uo=e)}}else{if(V1(e))throw Error(xt(418));e.flags=e.flags&-4097|2,zn=!1,Uo=e}}}function FI(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Uo=e}function ug(e){if(e!==Uo)return!1;if(!zn)return FI(e),zn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!B1(e.type,e.memoizedProps)),t&&(t=jo)){if(V1(e))throw Cz(),Error(xt(418));for(;t;)Sz(e,t),t=Il(t.nextSibling)}if(FI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(xt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){jo=Il(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}jo=null}}else jo=Uo?Il(e.stateNode.nextSibling):null;return!0}function Cz(){for(var e=jo;e;)e=Il(e.nextSibling)}function fd(){jo=Uo=null,zn=!1}function Mw(e){Ma===null?Ma=[e]:Ma.push(e)}var f6=Hs.ReactCurrentBatchConfig;function ip(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(xt(309));var o=r.stateNode}if(!o)throw Error(xt(147,e));var s=o,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(p){var c=s.refs;p===null?delete c[d]:c[d]=p},t._stringRef=d,t)}if(typeof e!="string")throw Error(xt(284));if(!r._owner)throw Error(xt(290,e))}return e}function dg(e,t){throw e=Object.prototype.toString.call(t),Error(xt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function NI(e){var t=e._init;return t(e._payload)}function Iz(e){function t(B,D){if(e){var $=B.deletions;$===null?(B.deletions=[D],B.flags|=16):$.push(D)}}function r(B,D){if(!e)return null;for(;D!==null;)t(B,D),D=D.sibling;return null}function o(B,D){for(B=new Map;D!==null;)D.key!==null?B.set(D.key,D):B.set(D.index,D),D=D.sibling;return B}function s(B,D){return B=El(B,D),B.index=0,B.sibling=null,B}function d(B,D,$){return B.index=$,e?($=B.alternate,$!==null?($=$.index,$<D?(B.flags|=2,D):$):(B.flags|=2,D)):(B.flags|=1048576,D)}function p(B){return e&&B.alternate===null&&(B.flags|=2),B}function c(B,D,$,ie){return D===null||D.tag!==6?(D=Z_($,B.mode,ie),D.return=B,D):(D=s(D,$),D.return=B,D)}function x(B,D,$,ie){var J=$.type;return J===ju?T(B,D,$.props.children,ie,$.key):D!==null&&(D.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===pl&&NI(J)===D.type)?(ie=s(D,$.props),ie.ref=ip(B,D,$),ie.return=B,ie):(ie=jg($.type,$.key,$.props,null,B.mode,ie),ie.ref=ip(B,D,$),ie.return=B,ie)}function w(B,D,$,ie){return D===null||D.tag!==4||D.stateNode.containerInfo!==$.containerInfo||D.stateNode.implementation!==$.implementation?(D=K_($,B.mode,ie),D.return=B,D):(D=s(D,$.children||[]),D.return=B,D)}function T(B,D,$,ie,J){return D===null||D.tag!==7?(D=Cc($,B.mode,ie,J),D.return=B,D):(D=s(D,$),D.return=B,D)}function k(B,D,$){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Z_(""+D,B.mode,$),D.return=B,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case eg:return $=jg(D.type,D.key,D.props,null,B.mode,$),$.ref=ip(B,null,D),$.return=B,$;case Nu:return D=K_(D,B.mode,$),D.return=B,D;case pl:var ie=D._init;return k(B,ie(D._payload),$)}if(_p(D)||Qh(D))return D=Cc(D,B.mode,$,null),D.return=B,D;dg(B,D)}return null}function E(B,D,$,ie){var J=D!==null?D.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return J!==null?null:c(B,D,""+$,ie);if(typeof $=="object"&&$!==null){switch($.$$typeof){case eg:return $.key===J?x(B,D,$,ie):null;case Nu:return $.key===J?w(B,D,$,ie):null;case pl:return J=$._init,E(B,D,J($._payload),ie)}if(_p($)||Qh($))return J!==null?null:T(B,D,$,ie,null);dg(B,$)}return null}function M(B,D,$,ie,J){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return B=B.get($)||null,c(D,B,""+ie,J);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case eg:return B=B.get(ie.key===null?$:ie.key)||null,x(D,B,ie,J);case Nu:return B=B.get(ie.key===null?$:ie.key)||null,w(D,B,ie,J);case pl:var K=ie._init;return M(B,D,$,K(ie._payload),J)}if(_p(ie)||Qh(ie))return B=B.get($)||null,T(D,B,ie,J,null);dg(D,ie)}return null}function N(B,D,$,ie){for(var J=null,K=null,se=D,ae=D=0,we=null;se!==null&&ae<$.length;ae++){se.index>ae?(we=se,se=null):we=se.sibling;var xe=E(B,se,$[ae],ie);if(xe===null){se===null&&(se=we);break}e&&se&&xe.alternate===null&&t(B,se),D=d(xe,D,ae),K===null?J=xe:K.sibling=xe,K=xe,se=we}if(ae===$.length)return r(B,se),zn&&fc(B,ae),J;if(se===null){for(;ae<$.length;ae++)se=k(B,$[ae],ie),se!==null&&(D=d(se,D,ae),K===null?J=se:K.sibling=se,K=se);return zn&&fc(B,ae),J}for(se=o(B,se);ae<$.length;ae++)we=M(se,B,ae,$[ae],ie),we!==null&&(e&&we.alternate!==null&&se.delete(we.key===null?ae:we.key),D=d(we,D,ae),K===null?J=we:K.sibling=we,K=we);return e&&se.forEach(function(ke){return t(B,ke)}),zn&&fc(B,ae),J}function j(B,D,$,ie){var J=Qh($);if(typeof J!="function")throw Error(xt(150));if($=J.call($),$==null)throw Error(xt(151));for(var K=J=null,se=D,ae=D=0,we=null,xe=$.next();se!==null&&!xe.done;ae++,xe=$.next()){se.index>ae?(we=se,se=null):we=se.sibling;var ke=E(B,se,xe.value,ie);if(ke===null){se===null&&(se=we);break}e&&se&&ke.alternate===null&&t(B,se),D=d(ke,D,ae),K===null?J=ke:K.sibling=ke,K=ke,se=we}if(xe.done)return r(B,se),zn&&fc(B,ae),J;if(se===null){for(;!xe.done;ae++,xe=$.next())xe=k(B,xe.value,ie),xe!==null&&(D=d(xe,D,ae),K===null?J=xe:K.sibling=xe,K=xe);return zn&&fc(B,ae),J}for(se=o(B,se);!xe.done;ae++,xe=$.next())xe=M(se,B,ae,xe.value,ie),xe!==null&&(e&&xe.alternate!==null&&se.delete(xe.key===null?ae:xe.key),D=d(xe,D,ae),K===null?J=xe:K.sibling=xe,K=xe);return e&&se.forEach(function(Ee){return t(B,Ee)}),zn&&fc(B,ae),J}function q(B,D,$,ie){if(typeof $=="object"&&$!==null&&$.type===ju&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case eg:e:{for(var J=$.key,K=D;K!==null;){if(K.key===J){if(J=$.type,J===ju){if(K.tag===7){r(B,K.sibling),D=s(K,$.props.children),D.return=B,B=D;break e}}else if(K.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===pl&&NI(J)===K.type){r(B,K.sibling),D=s(K,$.props),D.ref=ip(B,K,$),D.return=B,B=D;break e}r(B,K);break}else t(B,K);K=K.sibling}$.type===ju?(D=Cc($.props.children,B.mode,ie,$.key),D.return=B,B=D):(ie=jg($.type,$.key,$.props,null,B.mode,ie),ie.ref=ip(B,D,$),ie.return=B,B=ie)}return p(B);case Nu:e:{for(K=$.key;D!==null;){if(D.key===K)if(D.tag===4&&D.stateNode.containerInfo===$.containerInfo&&D.stateNode.implementation===$.implementation){r(B,D.sibling),D=s(D,$.children||[]),D.return=B,B=D;break e}else{r(B,D);break}else t(B,D);D=D.sibling}D=K_($,B.mode,ie),D.return=B,B=D}return p(B);case pl:return K=$._init,q(B,D,K($._payload),ie)}if(_p($))return N(B,D,$,ie);if(Qh($))return j(B,D,$,ie);dg(B,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,D!==null&&D.tag===6?(r(B,D.sibling),D=s(D,$),D.return=B,B=D):(r(B,D),D=Z_($,B.mode,ie),D.return=B,B=D),p(B)):r(B,D)}return q}var md=Iz(!0),Tz=Iz(!1),vy=Ol(null),_y=null,Ku=null,Dw=null;function Lw(){Dw=Ku=_y=null}function $w(e){var t=vy.current;In(vy),e._currentValue=t}function H1(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function ad(e,t){_y=e,Dw=Ku=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wo=!0),e.firstContext=null)}function ua(e){var t=e._currentValue;if(Dw!==e)if(e={context:e,memoizedValue:t,next:null},Ku===null){if(_y===null)throw Error(xt(308));Ku=e,_y.dependencies={lanes:0,firstContext:e}}else Ku=Ku.next=e;return t}var xc=null;function Ow(e){xc===null?xc=[e]:xc.push(e)}function Pz(e,t,r,o){var s=t.interleaved;return s===null?(r.next=r,Ow(t)):(r.next=s.next,s.next=r),t.interleaved=r,js(e,o)}function js(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var fl=!1;function Bw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kz(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ls(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Tl(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,qr&2){var s=o.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),o.pending=t,js(e,r)}return s=o.interleaved,s===null?(t.next=t,Ow(o)):(t.next=s.next,s.next=t),o.interleaved=t,js(e,r)}function Lg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Sw(e,r)}}function jI(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var s=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var p={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?s=d=p:d=d.next=p,r=r.next}while(r!==null);d===null?s=d=t:d=d.next=t}else s=d=t;r={baseState:o.baseState,firstBaseUpdate:s,lastBaseUpdate:d,shared:o.shared,effects:o.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function xy(e,t,r,o){var s=e.updateQueue;fl=!1;var d=s.firstBaseUpdate,p=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var x=c,w=x.next;x.next=null,p===null?d=w:p.next=w,p=x;var T=e.alternate;T!==null&&(T=T.updateQueue,c=T.lastBaseUpdate,c!==p&&(c===null?T.firstBaseUpdate=w:c.next=w,T.lastBaseUpdate=x))}if(d!==null){var k=s.baseState;p=0,T=w=x=null,c=d;do{var E=c.lane,M=c.eventTime;if((o&E)===E){T!==null&&(T=T.next={eventTime:M,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var N=e,j=c;switch(E=t,M=r,j.tag){case 1:if(N=j.payload,typeof N=="function"){k=N.call(M,k,E);break e}k=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=j.payload,E=typeof N=="function"?N.call(M,k,E):N,E==null)break e;k=On({},k,E);break e;case 2:fl=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,E=s.effects,E===null?s.effects=[c]:E.push(c))}else M={eventTime:M,lane:E,tag:c.tag,payload:c.payload,callback:c.callback,next:null},T===null?(w=T=M,x=k):T=T.next=M,p|=E;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;E=c,c=E.next,E.next=null,s.lastBaseUpdate=E,s.shared.pending=null}}while(!0);if(T===null&&(x=k),s.baseState=x,s.firstBaseUpdate=w,s.lastBaseUpdate=T,t=s.shared.interleaved,t!==null){s=t;do p|=s.lane,s=s.next;while(s!==t)}else d===null&&(s.shared.lanes=0);Rc|=p,e.lanes=p,e.memoizedState=k}}function VI(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],s=o.callback;if(s!==null){if(o.callback=null,o=r,typeof s!="function")throw Error(xt(191,s));s.call(o)}}}var Cf={},as=Ol(Cf),ef=Ol(Cf),tf=Ol(Cf);function bc(e){if(e===Cf)throw Error(xt(174));return e}function Fw(e,t){switch(_n(tf,t),_n(ef,e),_n(as,Cf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:C1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=C1(t,e)}In(as),_n(as,t)}function gd(){In(as),In(ef),In(tf)}function Ez(e){bc(tf.current);var t=bc(as.current),r=C1(t,e.type);t!==r&&(_n(ef,e),_n(as,r))}function Nw(e){ef.current===e&&(In(as),In(ef))}var Ln=Ol(0);function by(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var V_=[];function jw(){for(var e=0;e<V_.length;e++)V_[e]._workInProgressVersionPrimary=null;V_.length=0}var $g=Hs.ReactCurrentDispatcher,U_=Hs.ReactCurrentBatchConfig,zc=0,$n=null,ci=null,vi=null,wy=!1,Ap=!1,rf=0,m6=0;function Gi(){throw Error(xt(321))}function Vw(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ba(e[r],t[r]))return!1;return!0}function Uw(e,t,r,o,s,d){if(zc=d,$n=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$g.current=e===null||e.memoizedState===null?_6:x6,e=r(o,s),Ap){d=0;do{if(Ap=!1,rf=0,25<=d)throw Error(xt(301));d+=1,vi=ci=null,t.updateQueue=null,$g.current=b6,e=r(o,s)}while(Ap)}if($g.current=Sy,t=ci!==null&&ci.next!==null,zc=0,vi=ci=$n=null,wy=!1,t)throw Error(xt(300));return e}function Hw(){var e=rf!==0;return rf=0,e}function Qa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?$n.memoizedState=vi=e:vi=vi.next=e,vi}function da(){if(ci===null){var e=$n.alternate;e=e!==null?e.memoizedState:null}else e=ci.next;var t=vi===null?$n.memoizedState:vi.next;if(t!==null)vi=t,ci=e;else{if(e===null)throw Error(xt(310));ci=e,e={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},vi===null?$n.memoizedState=vi=e:vi=vi.next=e}return vi}function nf(e,t){return typeof t=="function"?t(e):t}function H_(e){var t=da(),r=t.queue;if(r===null)throw Error(xt(311));r.lastRenderedReducer=e;var o=ci,s=o.baseQueue,d=r.pending;if(d!==null){if(s!==null){var p=s.next;s.next=d.next,d.next=p}o.baseQueue=s=d,r.pending=null}if(s!==null){d=s.next,o=o.baseState;var c=p=null,x=null,w=d;do{var T=w.lane;if((zc&T)===T)x!==null&&(x=x.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),o=w.hasEagerState?w.eagerState:e(o,w.action);else{var k={lane:T,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};x===null?(c=x=k,p=o):x=x.next=k,$n.lanes|=T,Rc|=T}w=w.next}while(w!==null&&w!==d);x===null?p=o:x.next=c,Ba(o,t.memoizedState)||(wo=!0),t.memoizedState=o,t.baseState=p,t.baseQueue=x,r.lastRenderedState=o}if(e=r.interleaved,e!==null){s=e;do d=s.lane,$n.lanes|=d,Rc|=d,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function W_(e){var t=da(),r=t.queue;if(r===null)throw Error(xt(311));r.lastRenderedReducer=e;var o=r.dispatch,s=r.pending,d=t.memoizedState;if(s!==null){r.pending=null;var p=s=s.next;do d=e(d,p.action),p=p.next;while(p!==s);Ba(d,t.memoizedState)||(wo=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,o]}function Az(){}function zz(e,t){var r=$n,o=da(),s=t(),d=!Ba(o.memoizedState,s);if(d&&(o.memoizedState=s,wo=!0),o=o.queue,Ww(Dz.bind(null,r,o,e),[e]),o.getSnapshot!==t||d||vi!==null&&vi.memoizedState.tag&1){if(r.flags|=2048,of(9,Mz.bind(null,r,o,s,t),void 0,null),_i===null)throw Error(xt(349));zc&30||Rz(r,t,s)}return s}function Rz(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=$n.updateQueue,t===null?(t={lastEffect:null,stores:null},$n.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Mz(e,t,r,o){t.value=r,t.getSnapshot=o,Lz(t)&&$z(e)}function Dz(e,t,r){return r(function(){Lz(t)&&$z(e)})}function Lz(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ba(e,r)}catch{return!0}}function $z(e){var t=js(e,1);t!==null&&$a(t,e,1,-1)}function UI(e){var t=Qa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nf,lastRenderedState:e},t.queue=e,e=e.dispatch=v6.bind(null,$n,e),[t.memoizedState,e]}function of(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},t=$n.updateQueue,t===null?(t={lastEffect:null,stores:null},$n.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e)),e}function Oz(){return da().memoizedState}function Og(e,t,r,o){var s=Qa();$n.flags|=e,s.memoizedState=of(1|t,r,void 0,o===void 0?null:o)}function $v(e,t,r,o){var s=da();o=o===void 0?null:o;var d=void 0;if(ci!==null){var p=ci.memoizedState;if(d=p.destroy,o!==null&&Vw(o,p.deps)){s.memoizedState=of(t,r,d,o);return}}$n.flags|=e,s.memoizedState=of(1|t,r,d,o)}function HI(e,t){return Og(8390656,8,e,t)}function Ww(e,t){return $v(2048,8,e,t)}function Bz(e,t){return $v(4,2,e,t)}function Fz(e,t){return $v(4,4,e,t)}function Nz(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jz(e,t,r){return r=r!=null?r.concat([e]):null,$v(4,4,Nz.bind(null,t,e),r)}function Gw(){}function Vz(e,t){var r=da();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&Vw(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function Uz(e,t){var r=da();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&Vw(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function Hz(e,t,r){return zc&21?(Ba(r,t)||(r=KA(),$n.lanes|=r,Rc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=r)}function g6(e,t){var r=rn;rn=r!==0&&4>r?r:4,e(!0);var o=U_.transition;U_.transition={};try{e(!1),t()}finally{rn=r,U_.transition=o}}function Wz(){return da().memoizedState}function y6(e,t,r){var o=kl(e);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},Gz(e))qz(t,r);else if(r=Pz(e,t,r,o),r!==null){var s=co();$a(r,e,o,s),Zz(r,t,o)}}function v6(e,t,r){var o=kl(e),s={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(Gz(e))qz(t,s);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var p=t.lastRenderedState,c=d(p,r);if(s.hasEagerState=!0,s.eagerState=c,Ba(c,p)){var x=t.interleaved;x===null?(s.next=s,Ow(t)):(s.next=x.next,x.next=s),t.interleaved=s;return}}catch{}finally{}r=Pz(e,t,s,o),r!==null&&(s=co(),$a(r,e,o,s),Zz(r,t,o))}}function Gz(e){var t=e.alternate;return e===$n||t!==null&&t===$n}function qz(e,t){Ap=wy=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Zz(e,t,r){if(r&4194240){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Sw(e,r)}}var Sy={readContext:ua,useCallback:Gi,useContext:Gi,useEffect:Gi,useImperativeHandle:Gi,useInsertionEffect:Gi,useLayoutEffect:Gi,useMemo:Gi,useReducer:Gi,useRef:Gi,useState:Gi,useDebugValue:Gi,useDeferredValue:Gi,useTransition:Gi,useMutableSource:Gi,useSyncExternalStore:Gi,useId:Gi,unstable_isNewReconciler:!1},_6={readContext:ua,useCallback:function(e,t){return Qa().memoizedState=[e,t===void 0?null:t],e},useContext:ua,useEffect:HI,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Og(4194308,4,Nz.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Og(4194308,4,e,t)},useInsertionEffect:function(e,t){return Og(4,2,e,t)},useMemo:function(e,t){var r=Qa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=Qa();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=y6.bind(null,$n,e),[o.memoizedState,e]},useRef:function(e){var t=Qa();return e={current:e},t.memoizedState=e},useState:UI,useDebugValue:Gw,useDeferredValue:function(e){return Qa().memoizedState=e},useTransition:function(){var e=UI(!1),t=e[0];return e=g6.bind(null,e[1]),Qa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=$n,s=Qa();if(zn){if(r===void 0)throw Error(xt(407));r=r()}else{if(r=t(),_i===null)throw Error(xt(349));zc&30||Rz(o,t,r)}s.memoizedState=r;var d={value:r,getSnapshot:t};return s.queue=d,HI(Dz.bind(null,o,d,e),[e]),o.flags|=2048,of(9,Mz.bind(null,o,d,r,t),void 0,null),r},useId:function(){var e=Qa(),t=_i.identifierPrefix;if(zn){var r=Ds,o=Ms;r=(o&~(1<<32-La(o)-1)).toString(32)+r,t=":"+t+"R"+r,r=rf++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=m6++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},x6={readContext:ua,useCallback:Vz,useContext:ua,useEffect:Ww,useImperativeHandle:jz,useInsertionEffect:Bz,useLayoutEffect:Fz,useMemo:Uz,useReducer:H_,useRef:Oz,useState:function(){return H_(nf)},useDebugValue:Gw,useDeferredValue:function(e){var t=da();return Hz(t,ci.memoizedState,e)},useTransition:function(){var e=H_(nf)[0],t=da().memoizedState;return[e,t]},useMutableSource:Az,useSyncExternalStore:zz,useId:Wz,unstable_isNewReconciler:!1},b6={readContext:ua,useCallback:Vz,useContext:ua,useEffect:Ww,useImperativeHandle:jz,useInsertionEffect:Bz,useLayoutEffect:Fz,useMemo:Uz,useReducer:W_,useRef:Oz,useState:function(){return W_(nf)},useDebugValue:Gw,useDeferredValue:function(e){var t=da();return ci===null?t.memoizedState=e:Hz(t,ci.memoizedState,e)},useTransition:function(){var e=W_(nf)[0],t=da().memoizedState;return[e,t]},useMutableSource:Az,useSyncExternalStore:zz,useId:Wz,unstable_isNewReconciler:!1};function Aa(e,t){if(e&&e.defaultProps){t=On({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function W1(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:On({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ov={isMounted:function(e){return(e=e._reactInternals)?$c(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=co(),s=kl(e),d=Ls(o,s);d.payload=t,r!=null&&(d.callback=r),t=Tl(e,d,s),t!==null&&($a(t,e,s,o),Lg(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=co(),s=kl(e),d=Ls(o,s);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=Tl(e,d,s),t!==null&&($a(t,e,s,o),Lg(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=co(),o=kl(e),s=Ls(r,o);s.tag=2,t!=null&&(s.callback=t),t=Tl(e,s,o),t!==null&&($a(t,e,o,r),Lg(t,e,o))}};function WI(e,t,r,o,s,d,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,p):t.prototype&&t.prototype.isPureReactComponent?!Xp(r,o)||!Xp(s,d):!0}function Kz(e,t,r){var o=!1,s=Ml,d=t.contextType;return typeof d=="object"&&d!==null?d=ua(d):(s=Co(t)?Ec:Ji.current,o=t.contextTypes,d=(o=o!=null)?pd(e,s):Ml),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ov,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=d),t}function GI(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&Ov.enqueueReplaceState(t,t.state,null)}function G1(e,t,r,o){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Bw(e);var d=t.contextType;typeof d=="object"&&d!==null?s.context=ua(d):(d=Co(t)?Ec:Ji.current,s.context=pd(e,d)),s.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(W1(e,t,d,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ov.enqueueReplaceState(s,s.state,null),xy(e,r,s,o),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function yd(e,t){try{var r="",o=t;do r+=K4(o),o=o.return;while(o);var s=r}catch(d){s=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:s,digest:null}}function G_(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function q1(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var w6=typeof WeakMap=="function"?WeakMap:Map;function Xz(e,t,r){r=Ls(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){Iy||(Iy=!0,nb=o),q1(e,t)},r}function Jz(e,t,r){r=Ls(-1,r),r.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var s=t.value;r.payload=function(){return o(s)},r.callback=function(){q1(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){q1(e,t),typeof o!="function"&&(Pl===null?Pl=new Set([this]):Pl.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),r}function qI(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new w6;var s=new Set;o.set(t,s)}else s=o.get(t),s===void 0&&(s=new Set,o.set(t,s));s.has(r)||(s.add(r),e=$6.bind(null,e,t,r),t.then(e,e))}function ZI(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function KI(e,t,r,o,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ls(-1,1),t.tag=2,Tl(r,t,1))),r.lanes|=1),e)}var S6=Hs.ReactCurrentOwner,wo=!1;function lo(e,t,r,o){t.child=e===null?Tz(t,null,r,o):md(t,e.child,r,o)}function XI(e,t,r,o,s){r=r.render;var d=t.ref;return ad(t,s),o=Uw(e,t,r,o,d,s),r=Hw(),e!==null&&!wo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vs(e,t,s)):(zn&&r&&zw(t),t.flags|=1,lo(e,t,o,s),t.child)}function JI(e,t,r,o,s){if(e===null){var d=r.type;return typeof d=="function"&&!eS(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,Yz(e,t,d,o,s)):(e=jg(r.type,null,o,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&s)){var p=d.memoizedProps;if(r=r.compare,r=r!==null?r:Xp,r(p,o)&&e.ref===t.ref)return Vs(e,t,s)}return t.flags|=1,e=El(d,o),e.ref=t.ref,e.return=t,t.child=e}function Yz(e,t,r,o,s){if(e!==null){var d=e.memoizedProps;if(Xp(d,o)&&e.ref===t.ref)if(wo=!1,t.pendingProps=o=d,(e.lanes&s)!==0)e.flags&131072&&(wo=!0);else return t.lanes=e.lanes,Vs(e,t,s)}return Z1(e,t,r,o,s)}function Qz(e,t,r){var o=t.pendingProps,s=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(Ju,Lo),Lo|=r;else{if(!(r&1073741824))return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_n(Ju,Lo),Lo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=d!==null?d.baseLanes:r,_n(Ju,Lo),Lo|=o}else d!==null?(o=d.baseLanes|r,t.memoizedState=null):o=r,_n(Ju,Lo),Lo|=o;return lo(e,t,s,r),t.child}function eR(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Z1(e,t,r,o,s){var d=Co(r)?Ec:Ji.current;return d=pd(t,d),ad(t,s),r=Uw(e,t,r,o,d,s),o=Hw(),e!==null&&!wo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vs(e,t,s)):(zn&&o&&zw(t),t.flags|=1,lo(e,t,r,s),t.child)}function YI(e,t,r,o,s){if(Co(r)){var d=!0;my(t)}else d=!1;if(ad(t,s),t.stateNode===null)Bg(e,t),Kz(t,r,o),G1(t,r,o,s),o=!0;else if(e===null){var p=t.stateNode,c=t.memoizedProps;p.props=c;var x=p.context,w=r.contextType;typeof w=="object"&&w!==null?w=ua(w):(w=Co(r)?Ec:Ji.current,w=pd(t,w));var T=r.getDerivedStateFromProps,k=typeof T=="function"||typeof p.getSnapshotBeforeUpdate=="function";k||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(c!==o||x!==w)&&GI(t,p,o,w),fl=!1;var E=t.memoizedState;p.state=E,xy(t,o,p,s),x=t.memoizedState,c!==o||E!==x||So.current||fl?(typeof T=="function"&&(W1(t,r,T,o),x=t.memoizedState),(c=fl||WI(t,r,c,o,E,x,w))?(k||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=x),p.props=o,p.state=x,p.context=w,o=c):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{p=t.stateNode,kz(e,t),c=t.memoizedProps,w=t.type===t.elementType?c:Aa(t.type,c),p.props=w,k=t.pendingProps,E=p.context,x=r.contextType,typeof x=="object"&&x!==null?x=ua(x):(x=Co(r)?Ec:Ji.current,x=pd(t,x));var M=r.getDerivedStateFromProps;(T=typeof M=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(c!==k||E!==x)&&GI(t,p,o,x),fl=!1,E=t.memoizedState,p.state=E,xy(t,o,p,s);var N=t.memoizedState;c!==k||E!==N||So.current||fl?(typeof M=="function"&&(W1(t,r,M,o),N=t.memoizedState),(w=fl||WI(t,r,w,o,E,N,x)||!1)?(T||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(o,N,x),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(o,N,x)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=N),p.props=o,p.state=N,p.context=x,o=w):(typeof p.componentDidUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),o=!1)}return K1(e,t,r,o,d,s)}function K1(e,t,r,o,s,d){eR(e,t);var p=(t.flags&128)!==0;if(!o&&!p)return s&&OI(t,r,!1),Vs(e,t,d);o=t.stateNode,S6.current=t;var c=p&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&p?(t.child=md(t,e.child,null,d),t.child=md(t,null,c,d)):lo(e,t,c,d),t.memoizedState=o.state,s&&OI(t,r,!0),t.child}function tR(e){var t=e.stateNode;t.pendingContext?$I(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$I(e,t.context,!1),Fw(e,t.containerInfo)}function QI(e,t,r,o,s){return fd(),Mw(s),t.flags|=256,lo(e,t,r,o),t.child}var X1={dehydrated:null,treeContext:null,retryLane:0};function J1(e){return{baseLanes:e,cachePool:null,transitions:null}}function rR(e,t,r){var o=t.pendingProps,s=Ln.current,d=!1,p=(t.flags&128)!==0,c;if((c=p)||(c=e!==null&&e.memoizedState===null?!1:(s&2)!==0),c?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),_n(Ln,s&1),e===null)return U1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(p=o.children,e=o.fallback,d?(o=t.mode,d=t.child,p={mode:"hidden",children:p},!(o&1)&&d!==null?(d.childLanes=0,d.pendingProps=p):d=Nv(p,o,0,null),e=Cc(e,o,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=J1(r),t.memoizedState=X1,e):qw(t,p));if(s=e.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return C6(e,t,p,o,c,s,r);if(d){d=o.fallback,p=t.mode,s=e.child,c=s.sibling;var x={mode:"hidden",children:o.children};return!(p&1)&&t.child!==s?(o=t.child,o.childLanes=0,o.pendingProps=x,t.deletions=null):(o=El(s,x),o.subtreeFlags=s.subtreeFlags&14680064),c!==null?d=El(c,d):(d=Cc(d,p,r,null),d.flags|=2),d.return=t,o.return=t,o.sibling=d,t.child=o,o=d,d=t.child,p=e.child.memoizedState,p=p===null?J1(r):{baseLanes:p.baseLanes|r,cachePool:null,transitions:p.transitions},d.memoizedState=p,d.childLanes=e.childLanes&~r,t.memoizedState=X1,o}return d=e.child,e=d.sibling,o=El(d,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=r),o.return=t,o.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function qw(e,t){return t=Nv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hg(e,t,r,o){return o!==null&&Mw(o),md(t,e.child,null,r),e=qw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function C6(e,t,r,o,s,d,p){if(r)return t.flags&256?(t.flags&=-257,o=G_(Error(xt(422))),hg(e,t,p,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=o.fallback,s=t.mode,o=Nv({mode:"visible",children:o.children},s,0,null),d=Cc(d,s,p,null),d.flags|=2,o.return=t,d.return=t,o.sibling=d,t.child=o,t.mode&1&&md(t,e.child,null,p),t.child.memoizedState=J1(p),t.memoizedState=X1,d);if(!(t.mode&1))return hg(e,t,p,null);if(s.data==="$!"){if(o=s.nextSibling&&s.nextSibling.dataset,o)var c=o.dgst;return o=c,d=Error(xt(419)),o=G_(d,o,void 0),hg(e,t,p,o)}if(c=(p&e.childLanes)!==0,wo||c){if(o=_i,o!==null){switch(p&-p){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(o.suspendedLanes|p)?0:s,s!==0&&s!==d.retryLane&&(d.retryLane=s,js(e,s),$a(o,e,s,-1))}return Qw(),o=G_(Error(xt(421))),hg(e,t,p,o)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=O6.bind(null,e),s._reactRetry=t,null):(e=d.treeContext,jo=Il(s.nextSibling),Uo=t,zn=!0,Ma=null,e!==null&&(oa[aa++]=Ms,oa[aa++]=Ds,oa[aa++]=Ac,Ms=e.id,Ds=e.overflow,Ac=t),t=qw(t,o.children),t.flags|=4096,t)}function eT(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),H1(e.return,t,r)}function q_(e,t,r,o,s){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:s}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=r,d.tailMode=s)}function nR(e,t,r){var o=t.pendingProps,s=o.revealOrder,d=o.tail;if(lo(e,t,o.children,r),o=Ln.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&eT(e,r,t);else if(e.tag===19)eT(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(_n(Ln,o),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&by(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),q_(t,!1,s,r,d);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&by(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}q_(t,!0,r,null,d);break;case"together":q_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Rc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(xt(153));if(t.child!==null){for(e=t.child,r=El(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=El(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function I6(e,t,r){switch(t.tag){case 3:tR(t),fd();break;case 5:Ez(t);break;case 1:Co(t.type)&&my(t);break;case 4:Fw(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,s=t.memoizedProps.value;_n(vy,o._currentValue),o._currentValue=s;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(_n(Ln,Ln.current&1),t.flags|=128,null):r&t.child.childLanes?rR(e,t,r):(_n(Ln,Ln.current&1),e=Vs(e,t,r),e!==null?e.sibling:null);_n(Ln,Ln.current&1);break;case 19:if(o=(r&t.childLanes)!==0,e.flags&128){if(o)return nR(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_n(Ln,Ln.current),o)break;return null;case 22:case 23:return t.lanes=0,Qz(e,t,r)}return Vs(e,t,r)}var iR,Y1,oR,aR;iR=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Y1=function(){};oR=function(e,t,r,o){var s=e.memoizedProps;if(s!==o){e=t.stateNode,bc(as.current);var d=null;switch(r){case"input":s=x1(e,s),o=x1(e,o),d=[];break;case"select":s=On({},s,{value:void 0}),o=On({},o,{value:void 0}),d=[];break;case"textarea":s=S1(e,s),o=S1(e,o),d=[];break;default:typeof s.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=py)}I1(r,o);var p;r=null;for(w in s)if(!o.hasOwnProperty(w)&&s.hasOwnProperty(w)&&s[w]!=null)if(w==="style"){var c=s[w];for(p in c)c.hasOwnProperty(p)&&(r||(r={}),r[p]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(Up.hasOwnProperty(w)?d||(d=[]):(d=d||[]).push(w,null));for(w in o){var x=o[w];if(c=s!=null?s[w]:void 0,o.hasOwnProperty(w)&&x!==c&&(x!=null||c!=null))if(w==="style")if(c){for(p in c)!c.hasOwnProperty(p)||x&&x.hasOwnProperty(p)||(r||(r={}),r[p]="");for(p in x)x.hasOwnProperty(p)&&c[p]!==x[p]&&(r||(r={}),r[p]=x[p])}else r||(d||(d=[]),d.push(w,r)),r=x;else w==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,c=c?c.__html:void 0,x!=null&&c!==x&&(d=d||[]).push(w,x)):w==="children"?typeof x!="string"&&typeof x!="number"||(d=d||[]).push(w,""+x):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(Up.hasOwnProperty(w)?(x!=null&&w==="onScroll"&&Sn("scroll",e),d||c===x||(d=[])):(d=d||[]).push(w,x))}r&&(d=d||[]).push("style",r);var w=d;(t.updateQueue=w)&&(t.flags|=4)}};aR=function(e,t,r,o){r!==o&&(t.flags|=4)};function op(e,t){if(!zn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function qi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,o|=s.subtreeFlags&14680064,o|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,o|=s.subtreeFlags,o|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function T6(e,t,r){var o=t.pendingProps;switch(Rw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qi(t),null;case 1:return Co(t.type)&&fy(),qi(t),null;case 3:return o=t.stateNode,gd(),In(So),In(Ji),jw(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(ug(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ma!==null&&(ab(Ma),Ma=null))),Y1(e,t),qi(t),null;case 5:Nw(t);var s=bc(tf.current);if(r=t.type,e!==null&&t.stateNode!=null)oR(e,t,r,o,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(xt(166));return qi(t),null}if(e=bc(as.current),ug(t)){o=t.stateNode,r=t.type;var d=t.memoizedProps;switch(o[rs]=t,o[Qp]=d,e=(t.mode&1)!==0,r){case"dialog":Sn("cancel",o),Sn("close",o);break;case"iframe":case"object":case"embed":Sn("load",o);break;case"video":case"audio":for(s=0;s<bp.length;s++)Sn(bp[s],o);break;case"source":Sn("error",o);break;case"img":case"image":case"link":Sn("error",o),Sn("load",o);break;case"details":Sn("toggle",o);break;case"input":cI(o,d),Sn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!d.multiple},Sn("invalid",o);break;case"textarea":dI(o,d),Sn("invalid",o)}I1(r,d),s=null;for(var p in d)if(d.hasOwnProperty(p)){var c=d[p];p==="children"?typeof c=="string"?o.textContent!==c&&(d.suppressHydrationWarning!==!0&&cg(o.textContent,c,e),s=["children",c]):typeof c=="number"&&o.textContent!==""+c&&(d.suppressHydrationWarning!==!0&&cg(o.textContent,c,e),s=["children",""+c]):Up.hasOwnProperty(p)&&c!=null&&p==="onScroll"&&Sn("scroll",o)}switch(r){case"input":tg(o),uI(o,d,!0);break;case"textarea":tg(o),hI(o);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(o.onclick=py)}o=s,t.updateQueue=o,o!==null&&(t.flags|=4)}else{p=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=DA(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=p.createElement(r,{is:o.is}):(e=p.createElement(r),r==="select"&&(p=e,o.multiple?p.multiple=!0:o.size&&(p.size=o.size))):e=p.createElementNS(e,r),e[rs]=t,e[Qp]=o,iR(e,t,!1,!1),t.stateNode=e;e:{switch(p=T1(r,o),r){case"dialog":Sn("cancel",e),Sn("close",e),s=o;break;case"iframe":case"object":case"embed":Sn("load",e),s=o;break;case"video":case"audio":for(s=0;s<bp.length;s++)Sn(bp[s],e);s=o;break;case"source":Sn("error",e),s=o;break;case"img":case"image":case"link":Sn("error",e),Sn("load",e),s=o;break;case"details":Sn("toggle",e),s=o;break;case"input":cI(e,o),s=x1(e,o),Sn("invalid",e);break;case"option":s=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},s=On({},o,{value:void 0}),Sn("invalid",e);break;case"textarea":dI(e,o),s=S1(e,o),Sn("invalid",e);break;default:s=o}I1(r,s),c=s;for(d in c)if(c.hasOwnProperty(d)){var x=c[d];d==="style"?OA(e,x):d==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&LA(e,x)):d==="children"?typeof x=="string"?(r!=="textarea"||x!=="")&&Hp(e,x):typeof x=="number"&&Hp(e,""+x):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Up.hasOwnProperty(d)?x!=null&&d==="onScroll"&&Sn("scroll",e):x!=null&&yw(e,d,x,p))}switch(r){case"input":tg(e),uI(e,o,!1);break;case"textarea":tg(e),hI(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Rl(o.value));break;case"select":e.multiple=!!o.multiple,d=o.value,d!=null?rd(e,!!o.multiple,d,!1):o.defaultValue!=null&&rd(e,!!o.multiple,o.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=py)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qi(t),null;case 6:if(e&&t.stateNode!=null)aR(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(xt(166));if(r=bc(tf.current),bc(as.current),ug(t)){if(o=t.stateNode,r=t.memoizedProps,o[rs]=t,(d=o.nodeValue!==r)&&(e=Uo,e!==null))switch(e.tag){case 3:cg(o.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&cg(o.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[rs]=t,t.stateNode=o}return qi(t),null;case 13:if(In(Ln),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(zn&&jo!==null&&t.mode&1&&!(t.flags&128))Cz(),fd(),t.flags|=98560,d=!1;else if(d=ug(t),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(xt(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(xt(317));d[rs]=t}else fd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qi(t),d=!1}else Ma!==null&&(ab(Ma),Ma=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||Ln.current&1?ui===0&&(ui=3):Qw())),t.updateQueue!==null&&(t.flags|=4),qi(t),null);case 4:return gd(),Y1(e,t),e===null&&Jp(t.stateNode.containerInfo),qi(t),null;case 10:return $w(t.type._context),qi(t),null;case 17:return Co(t.type)&&fy(),qi(t),null;case 19:if(In(Ln),d=t.memoizedState,d===null)return qi(t),null;if(o=(t.flags&128)!==0,p=d.rendering,p===null)if(o)op(d,!1);else{if(ui!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(p=by(e),p!==null){for(t.flags|=128,op(d,!1),o=p.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;r!==null;)d=r,e=o,d.flags&=14680066,p=d.alternate,p===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=p.childLanes,d.lanes=p.lanes,d.child=p.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=p.memoizedProps,d.memoizedState=p.memoizedState,d.updateQueue=p.updateQueue,d.type=p.type,e=p.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return _n(Ln,Ln.current&1|2),t.child}e=e.sibling}d.tail!==null&&Jn()>vd&&(t.flags|=128,o=!0,op(d,!1),t.lanes=4194304)}else{if(!o)if(e=by(p),e!==null){if(t.flags|=128,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),op(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!zn)return qi(t),null}else 2*Jn()-d.renderingStartTime>vd&&r!==1073741824&&(t.flags|=128,o=!0,op(d,!1),t.lanes=4194304);d.isBackwards?(p.sibling=t.child,t.child=p):(r=d.last,r!==null?r.sibling=p:t.child=p,d.last=p)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Jn(),t.sibling=null,r=Ln.current,_n(Ln,o?r&1|2:r&1),t):(qi(t),null);case 22:case 23:return Yw(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?Lo&1073741824&&(qi(t),t.subtreeFlags&6&&(t.flags|=8192)):qi(t),null;case 24:return null;case 25:return null}throw Error(xt(156,t.tag))}function P6(e,t){switch(Rw(t),t.tag){case 1:return Co(t.type)&&fy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gd(),In(So),In(Ji),jw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Nw(t),null;case 13:if(In(Ln),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(xt(340));fd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return In(Ln),null;case 4:return gd(),null;case 10:return $w(t.type._context),null;case 22:case 23:return Yw(),null;case 24:return null;default:return null}}var pg=!1,Xi=!1,k6=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function Xu(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){Vn(e,t,o)}else r.current=null}function Q1(e,t,r){try{r()}catch(o){Vn(e,t,o)}}var tT=!1;function E6(e,t){if($1=uy,e=dz(),Aw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var s=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var p=0,c=-1,x=-1,w=0,T=0,k=e,E=null;t:for(;;){for(var M;k!==r||s!==0&&k.nodeType!==3||(c=p+s),k!==d||o!==0&&k.nodeType!==3||(x=p+o),k.nodeType===3&&(p+=k.nodeValue.length),(M=k.firstChild)!==null;)E=k,k=M;for(;;){if(k===e)break t;if(E===r&&++w===s&&(c=p),E===d&&++T===o&&(x=p),(M=k.nextSibling)!==null)break;k=E,E=k.parentNode}k=M}r=c===-1||x===-1?null:{start:c,end:x}}else r=null}r=r||{start:0,end:0}}else r=null;for(O1={focusedElem:e,selectionRange:r},uy=!1,Qt=t;Qt!==null;)if(t=Qt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Qt=e;else for(;Qt!==null;){t=Qt;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var j=N.memoizedProps,q=N.memoizedState,B=t.stateNode,D=B.getSnapshotBeforeUpdate(t.elementType===t.type?j:Aa(t.type,j),q);B.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var $=t.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(xt(163))}}catch(ie){Vn(t,t.return,ie)}if(e=t.sibling,e!==null){e.return=t.return,Qt=e;break}Qt=t.return}return N=tT,tT=!1,N}function zp(e,t,r){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var s=o=o.next;do{if((s.tag&e)===e){var d=s.destroy;s.destroy=void 0,d!==void 0&&Q1(t,r,d)}s=s.next}while(s!==o)}}function Bv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function eb(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function sR(e){var t=e.alternate;t!==null&&(e.alternate=null,sR(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rs],delete t[Qp],delete t[N1],delete t[d6],delete t[h6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lR(e){return e.tag===5||e.tag===3||e.tag===4}function rT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tb(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=py));else if(o!==4&&(e=e.child,e!==null))for(tb(e,t,r),e=e.sibling;e!==null;)tb(e,t,r),e=e.sibling}function rb(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(rb(e,t,r),e=e.sibling;e!==null;)rb(e,t,r),e=e.sibling}var Ai=null,za=!1;function ul(e,t,r){for(r=r.child;r!==null;)cR(e,t,r),r=r.sibling}function cR(e,t,r){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(Av,r)}catch{}switch(r.tag){case 5:Xi||Xu(r,t);case 6:var o=Ai,s=za;Ai=null,ul(e,t,r),Ai=o,za=s,Ai!==null&&(za?(e=Ai,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ai.removeChild(r.stateNode));break;case 18:Ai!==null&&(za?(e=Ai,r=r.stateNode,e.nodeType===8?N_(e.parentNode,r):e.nodeType===1&&N_(e,r),Zp(e)):N_(Ai,r.stateNode));break;case 4:o=Ai,s=za,Ai=r.stateNode.containerInfo,za=!0,ul(e,t,r),Ai=o,za=s;break;case 0:case 11:case 14:case 15:if(!Xi&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){s=o=o.next;do{var d=s,p=d.destroy;d=d.tag,p!==void 0&&(d&2||d&4)&&Q1(r,t,p),s=s.next}while(s!==o)}ul(e,t,r);break;case 1:if(!Xi&&(Xu(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(c){Vn(r,t,c)}ul(e,t,r);break;case 21:ul(e,t,r);break;case 22:r.mode&1?(Xi=(o=Xi)||r.memoizedState!==null,ul(e,t,r),Xi=o):ul(e,t,r);break;default:ul(e,t,r)}}function nT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new k6),t.forEach(function(o){var s=B6.bind(null,e,o);r.has(o)||(r.add(o),o.then(s,s))})}}function Pa(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var s=r[o];try{var d=e,p=t,c=p;e:for(;c!==null;){switch(c.tag){case 5:Ai=c.stateNode,za=!1;break e;case 3:Ai=c.stateNode.containerInfo,za=!0;break e;case 4:Ai=c.stateNode.containerInfo,za=!0;break e}c=c.return}if(Ai===null)throw Error(xt(160));cR(d,p,s),Ai=null,za=!1;var x=s.alternate;x!==null&&(x.return=null),s.return=null}catch(w){Vn(s,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)uR(t,e),t=t.sibling}function uR(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pa(t,e),Xa(e),o&4){try{zp(3,e,e.return),Bv(3,e)}catch(j){Vn(e,e.return,j)}try{zp(5,e,e.return)}catch(j){Vn(e,e.return,j)}}break;case 1:Pa(t,e),Xa(e),o&512&&r!==null&&Xu(r,r.return);break;case 5:if(Pa(t,e),Xa(e),o&512&&r!==null&&Xu(r,r.return),e.flags&32){var s=e.stateNode;try{Hp(s,"")}catch(j){Vn(e,e.return,j)}}if(o&4&&(s=e.stateNode,s!=null)){var d=e.memoizedProps,p=r!==null?r.memoizedProps:d,c=e.type,x=e.updateQueue;if(e.updateQueue=null,x!==null)try{c==="input"&&d.type==="radio"&&d.name!=null&&RA(s,d),T1(c,p);var w=T1(c,d);for(p=0;p<x.length;p+=2){var T=x[p],k=x[p+1];T==="style"?OA(s,k):T==="dangerouslySetInnerHTML"?LA(s,k):T==="children"?Hp(s,k):yw(s,T,k,w)}switch(c){case"input":b1(s,d);break;case"textarea":MA(s,d);break;case"select":var E=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!d.multiple;var M=d.value;M!=null?rd(s,!!d.multiple,M,!1):E!==!!d.multiple&&(d.defaultValue!=null?rd(s,!!d.multiple,d.defaultValue,!0):rd(s,!!d.multiple,d.multiple?[]:"",!1))}s[Qp]=d}catch(j){Vn(e,e.return,j)}}break;case 6:if(Pa(t,e),Xa(e),o&4){if(e.stateNode===null)throw Error(xt(162));s=e.stateNode,d=e.memoizedProps;try{s.nodeValue=d}catch(j){Vn(e,e.return,j)}}break;case 3:if(Pa(t,e),Xa(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Zp(t.containerInfo)}catch(j){Vn(e,e.return,j)}break;case 4:Pa(t,e),Xa(e);break;case 13:Pa(t,e),Xa(e),s=e.child,s.flags&8192&&(d=s.memoizedState!==null,s.stateNode.isHidden=d,!d||s.alternate!==null&&s.alternate.memoizedState!==null||(Xw=Jn())),o&4&&nT(e);break;case 22:if(T=r!==null&&r.memoizedState!==null,e.mode&1?(Xi=(w=Xi)||T,Pa(t,e),Xi=w):Pa(t,e),Xa(e),o&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!T&&e.mode&1)for(Qt=e,T=e.child;T!==null;){for(k=Qt=T;Qt!==null;){switch(E=Qt,M=E.child,E.tag){case 0:case 11:case 14:case 15:zp(4,E,E.return);break;case 1:Xu(E,E.return);var N=E.stateNode;if(typeof N.componentWillUnmount=="function"){o=E,r=E.return;try{t=o,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(j){Vn(o,r,j)}}break;case 5:Xu(E,E.return);break;case 22:if(E.memoizedState!==null){oT(k);continue}}M!==null?(M.return=E,Qt=M):oT(k)}T=T.sibling}e:for(T=null,k=e;;){if(k.tag===5){if(T===null){T=k;try{s=k.stateNode,w?(d=s.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(c=k.stateNode,x=k.memoizedProps.style,p=x!=null&&x.hasOwnProperty("display")?x.display:null,c.style.display=$A("display",p))}catch(j){Vn(e,e.return,j)}}}else if(k.tag===6){if(T===null)try{k.stateNode.nodeValue=w?"":k.memoizedProps}catch(j){Vn(e,e.return,j)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===e)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===e)break e;for(;k.sibling===null;){if(k.return===null||k.return===e)break e;T===k&&(T=null),k=k.return}T===k&&(T=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:Pa(t,e),Xa(e),o&4&&nT(e);break;case 21:break;default:Pa(t,e),Xa(e)}}function Xa(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(lR(r)){var o=r;break e}r=r.return}throw Error(xt(160))}switch(o.tag){case 5:var s=o.stateNode;o.flags&32&&(Hp(s,""),o.flags&=-33);var d=rT(e);rb(e,d,s);break;case 3:case 4:var p=o.stateNode.containerInfo,c=rT(e);tb(e,c,p);break;default:throw Error(xt(161))}}catch(x){Vn(e,e.return,x)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function A6(e,t,r){Qt=e,dR(e)}function dR(e,t,r){for(var o=(e.mode&1)!==0;Qt!==null;){var s=Qt,d=s.child;if(s.tag===22&&o){var p=s.memoizedState!==null||pg;if(!p){var c=s.alternate,x=c!==null&&c.memoizedState!==null||Xi;c=pg;var w=Xi;if(pg=p,(Xi=x)&&!w)for(Qt=s;Qt!==null;)p=Qt,x=p.child,p.tag===22&&p.memoizedState!==null?aT(s):x!==null?(x.return=p,Qt=x):aT(s);for(;d!==null;)Qt=d,dR(d),d=d.sibling;Qt=s,pg=c,Xi=w}iT(e)}else s.subtreeFlags&8772&&d!==null?(d.return=s,Qt=d):iT(e)}}function iT(e){for(;Qt!==null;){var t=Qt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xi||Bv(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Xi)if(r===null)o.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Aa(t.type,r.memoizedProps);o.componentDidUpdate(s,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&VI(t,d,o);break;case 3:var p=t.updateQueue;if(p!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}VI(t,p,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var x=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&r.focus();break;case"img":x.src&&(r.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var T=w.memoizedState;if(T!==null){var k=T.dehydrated;k!==null&&Zp(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(xt(163))}Xi||t.flags&512&&eb(t)}catch(E){Vn(t,t.return,E)}}if(t===e){Qt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Qt=r;break}Qt=t.return}}function oT(e){for(;Qt!==null;){var t=Qt;if(t===e){Qt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Qt=r;break}Qt=t.return}}function aT(e){for(;Qt!==null;){var t=Qt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Bv(4,t)}catch(x){Vn(t,r,x)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var s=t.return;try{o.componentDidMount()}catch(x){Vn(t,s,x)}}var d=t.return;try{eb(t)}catch(x){Vn(t,d,x)}break;case 5:var p=t.return;try{eb(t)}catch(x){Vn(t,p,x)}}}catch(x){Vn(t,t.return,x)}if(t===e){Qt=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Qt=c;break}Qt=t.return}}var z6=Math.ceil,Cy=Hs.ReactCurrentDispatcher,Zw=Hs.ReactCurrentOwner,la=Hs.ReactCurrentBatchConfig,qr=0,_i=null,ni=null,Di=0,Lo=0,Ju=Ol(0),ui=0,af=null,Rc=0,Fv=0,Kw=0,Rp=null,bo=null,Xw=0,vd=1/0,As=null,Iy=!1,nb=null,Pl=null,fg=!1,xl=null,Ty=0,Mp=0,ib=null,Fg=-1,Ng=0;function co(){return qr&6?Jn():Fg!==-1?Fg:Fg=Jn()}function kl(e){return e.mode&1?qr&2&&Di!==0?Di&-Di:f6.transition!==null?(Ng===0&&(Ng=KA()),Ng):(e=rn,e!==0||(e=window.event,e=e===void 0?16:rz(e.type)),e):1}function $a(e,t,r,o){if(50<Mp)throw Mp=0,ib=null,Error(xt(185));bf(e,r,o),(!(qr&2)||e!==_i)&&(e===_i&&(!(qr&2)&&(Fv|=r),ui===4&&gl(e,Di)),Io(e,o),r===1&&qr===0&&!(t.mode&1)&&(vd=Jn()+500,Lv&&Bl()))}function Io(e,t){var r=e.callbackNode;fF(e,t);var o=cy(e,e===_i?Di:0);if(o===0)r!==null&&mI(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(r!=null&&mI(r),t===1)e.tag===0?p6(sT.bind(null,e)):bz(sT.bind(null,e)),c6(function(){!(qr&6)&&Bl()}),r=null;else{switch(XA(o)){case 1:r=ww;break;case 4:r=qA;break;case 16:r=ly;break;case 536870912:r=ZA;break;default:r=ly}r=_R(r,hR.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function hR(e,t){if(Fg=-1,Ng=0,qr&6)throw Error(xt(327));var r=e.callbackNode;if(sd()&&e.callbackNode!==r)return null;var o=cy(e,e===_i?Di:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Py(e,o);else{t=o;var s=qr;qr|=2;var d=fR();(_i!==e||Di!==t)&&(As=null,vd=Jn()+500,Sc(e,t));do try{D6();break}catch(c){pR(e,c)}while(!0);Lw(),Cy.current=d,qr=s,ni!==null?t=0:(_i=null,Di=0,t=ui)}if(t!==0){if(t===2&&(s=z1(e),s!==0&&(o=s,t=ob(e,s))),t===1)throw r=af,Sc(e,0),gl(e,o),Io(e,Jn()),r;if(t===6)gl(e,o);else{if(s=e.current.alternate,!(o&30)&&!R6(s)&&(t=Py(e,o),t===2&&(d=z1(e),d!==0&&(o=d,t=ob(e,d))),t===1))throw r=af,Sc(e,0),gl(e,o),Io(e,Jn()),r;switch(e.finishedWork=s,e.finishedLanes=o,t){case 0:case 1:throw Error(xt(345));case 2:mc(e,bo,As);break;case 3:if(gl(e,o),(o&130023424)===o&&(t=Xw+500-Jn(),10<t)){if(cy(e,0)!==0)break;if(s=e.suspendedLanes,(s&o)!==o){co(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=F1(mc.bind(null,e,bo,As),t);break}mc(e,bo,As);break;case 4:if(gl(e,o),(o&4194240)===o)break;for(t=e.eventTimes,s=-1;0<o;){var p=31-La(o);d=1<<p,p=t[p],p>s&&(s=p),o&=~d}if(o=s,o=Jn()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*z6(o/1960))-o,10<o){e.timeoutHandle=F1(mc.bind(null,e,bo,As),o);break}mc(e,bo,As);break;case 5:mc(e,bo,As);break;default:throw Error(xt(329))}}}return Io(e,Jn()),e.callbackNode===r?hR.bind(null,e):null}function ob(e,t){var r=Rp;return e.current.memoizedState.isDehydrated&&(Sc(e,t).flags|=256),e=Py(e,t),e!==2&&(t=bo,bo=r,t!==null&&ab(t)),e}function ab(e){bo===null?bo=e:bo.push.apply(bo,e)}function R6(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var s=r[o],d=s.getSnapshot;s=s.value;try{if(!Ba(d(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gl(e,t){for(t&=~Kw,t&=~Fv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-La(t),o=1<<r;e[r]=-1,t&=~o}}function sT(e){if(qr&6)throw Error(xt(327));sd();var t=cy(e,0);if(!(t&1))return Io(e,Jn()),null;var r=Py(e,t);if(e.tag!==0&&r===2){var o=z1(e);o!==0&&(t=o,r=ob(e,o))}if(r===1)throw r=af,Sc(e,0),gl(e,t),Io(e,Jn()),r;if(r===6)throw Error(xt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mc(e,bo,As),Io(e,Jn()),null}function Jw(e,t){var r=qr;qr|=1;try{return e(t)}finally{qr=r,qr===0&&(vd=Jn()+500,Lv&&Bl())}}function Mc(e){xl!==null&&xl.tag===0&&!(qr&6)&&sd();var t=qr;qr|=1;var r=la.transition,o=rn;try{if(la.transition=null,rn=1,e)return e()}finally{rn=o,la.transition=r,qr=t,!(qr&6)&&Bl()}}function Yw(){Lo=Ju.current,In(Ju)}function Sc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,l6(r)),ni!==null)for(r=ni.return;r!==null;){var o=r;switch(Rw(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&fy();break;case 3:gd(),In(So),In(Ji),jw();break;case 5:Nw(o);break;case 4:gd();break;case 13:In(Ln);break;case 19:In(Ln);break;case 10:$w(o.type._context);break;case 22:case 23:Yw()}r=r.return}if(_i=e,ni=e=El(e.current,null),Di=Lo=t,ui=0,af=null,Kw=Fv=Rc=0,bo=Rp=null,xc!==null){for(t=0;t<xc.length;t++)if(r=xc[t],o=r.interleaved,o!==null){r.interleaved=null;var s=o.next,d=r.pending;if(d!==null){var p=d.next;d.next=s,o.next=p}r.pending=o}xc=null}return e}function pR(e,t){do{var r=ni;try{if(Lw(),$g.current=Sy,wy){for(var o=$n.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}wy=!1}if(zc=0,vi=ci=$n=null,Ap=!1,rf=0,Zw.current=null,r===null||r.return===null){ui=1,af=t,ni=null;break}e:{var d=e,p=r.return,c=r,x=t;if(t=Di,c.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var w=x,T=c,k=T.tag;if(!(T.mode&1)&&(k===0||k===11||k===15)){var E=T.alternate;E?(T.updateQueue=E.updateQueue,T.memoizedState=E.memoizedState,T.lanes=E.lanes):(T.updateQueue=null,T.memoizedState=null)}var M=ZI(p);if(M!==null){M.flags&=-257,KI(M,p,c,d,t),M.mode&1&&qI(d,w,t),t=M,x=w;var N=t.updateQueue;if(N===null){var j=new Set;j.add(x),t.updateQueue=j}else N.add(x);break e}else{if(!(t&1)){qI(d,w,t),Qw();break e}x=Error(xt(426))}}else if(zn&&c.mode&1){var q=ZI(p);if(q!==null){!(q.flags&65536)&&(q.flags|=256),KI(q,p,c,d,t),Mw(yd(x,c));break e}}d=x=yd(x,c),ui!==4&&(ui=2),Rp===null?Rp=[d]:Rp.push(d),d=p;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var B=Xz(d,x,t);jI(d,B);break e;case 1:c=x;var D=d.type,$=d.stateNode;if(!(d.flags&128)&&(typeof D.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Pl===null||!Pl.has($)))){d.flags|=65536,t&=-t,d.lanes|=t;var ie=Jz(d,c,t);jI(d,ie);break e}}d=d.return}while(d!==null)}gR(r)}catch(J){t=J,ni===r&&r!==null&&(ni=r=r.return);continue}break}while(!0)}function fR(){var e=Cy.current;return Cy.current=Sy,e===null?Sy:e}function Qw(){(ui===0||ui===3||ui===2)&&(ui=4),_i===null||!(Rc&268435455)&&!(Fv&268435455)||gl(_i,Di)}function Py(e,t){var r=qr;qr|=2;var o=fR();(_i!==e||Di!==t)&&(As=null,Sc(e,t));do try{M6();break}catch(s){pR(e,s)}while(!0);if(Lw(),qr=r,Cy.current=o,ni!==null)throw Error(xt(261));return _i=null,Di=0,ui}function M6(){for(;ni!==null;)mR(ni)}function D6(){for(;ni!==null&&!oF();)mR(ni)}function mR(e){var t=vR(e.alternate,e,Lo);e.memoizedProps=e.pendingProps,t===null?gR(e):ni=t,Zw.current=null}function gR(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=P6(r,t),r!==null){r.flags&=32767,ni=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ui=6,ni=null;return}}else if(r=T6(r,t,Lo),r!==null){ni=r;return}if(t=t.sibling,t!==null){ni=t;return}ni=t=e}while(t!==null);ui===0&&(ui=5)}function mc(e,t,r){var o=rn,s=la.transition;try{la.transition=null,rn=1,L6(e,t,r,o)}finally{la.transition=s,rn=o}return null}function L6(e,t,r,o){do sd();while(xl!==null);if(qr&6)throw Error(xt(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(xt(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(mF(e,d),e===_i&&(ni=_i=null,Di=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||fg||(fg=!0,_R(ly,function(){return sd(),null})),d=(r.flags&15990)!==0,r.subtreeFlags&15990||d){d=la.transition,la.transition=null;var p=rn;rn=1;var c=qr;qr|=4,Zw.current=null,E6(e,r),uR(r,e),t6(O1),uy=!!$1,O1=$1=null,e.current=r,A6(r),aF(),qr=c,rn=p,la.transition=d}else e.current=r;if(fg&&(fg=!1,xl=e,Ty=s),d=e.pendingLanes,d===0&&(Pl=null),cF(r.stateNode),Io(e,Jn()),t!==null)for(o=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],o(s.value,{componentStack:s.stack,digest:s.digest});if(Iy)throw Iy=!1,e=nb,nb=null,e;return Ty&1&&e.tag!==0&&sd(),d=e.pendingLanes,d&1?e===ib?Mp++:(Mp=0,ib=e):Mp=0,Bl(),null}function sd(){if(xl!==null){var e=XA(Ty),t=la.transition,r=rn;try{if(la.transition=null,rn=16>e?16:e,xl===null)var o=!1;else{if(e=xl,xl=null,Ty=0,qr&6)throw Error(xt(331));var s=qr;for(qr|=4,Qt=e.current;Qt!==null;){var d=Qt,p=d.child;if(Qt.flags&16){var c=d.deletions;if(c!==null){for(var x=0;x<c.length;x++){var w=c[x];for(Qt=w;Qt!==null;){var T=Qt;switch(T.tag){case 0:case 11:case 15:zp(8,T,d)}var k=T.child;if(k!==null)k.return=T,Qt=k;else for(;Qt!==null;){T=Qt;var E=T.sibling,M=T.return;if(sR(T),T===w){Qt=null;break}if(E!==null){E.return=M,Qt=E;break}Qt=M}}}var N=d.alternate;if(N!==null){var j=N.child;if(j!==null){N.child=null;do{var q=j.sibling;j.sibling=null,j=q}while(j!==null)}}Qt=d}}if(d.subtreeFlags&2064&&p!==null)p.return=d,Qt=p;else e:for(;Qt!==null;){if(d=Qt,d.flags&2048)switch(d.tag){case 0:case 11:case 15:zp(9,d,d.return)}var B=d.sibling;if(B!==null){B.return=d.return,Qt=B;break e}Qt=d.return}}var D=e.current;for(Qt=D;Qt!==null;){p=Qt;var $=p.child;if(p.subtreeFlags&2064&&$!==null)$.return=p,Qt=$;else e:for(p=D;Qt!==null;){if(c=Qt,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Bv(9,c)}}catch(J){Vn(c,c.return,J)}if(c===p){Qt=null;break e}var ie=c.sibling;if(ie!==null){ie.return=c.return,Qt=ie;break e}Qt=c.return}}if(qr=s,Bl(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(Av,e)}catch{}o=!0}return o}finally{rn=r,la.transition=t}}return!1}function lT(e,t,r){t=yd(r,t),t=Xz(e,t,1),e=Tl(e,t,1),t=co(),e!==null&&(bf(e,1,t),Io(e,t))}function Vn(e,t,r){if(e.tag===3)lT(e,e,r);else for(;t!==null;){if(t.tag===3){lT(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Pl===null||!Pl.has(o))){e=yd(r,e),e=Jz(t,e,1),t=Tl(t,e,1),e=co(),t!==null&&(bf(t,1,e),Io(t,e));break}}t=t.return}}function $6(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),t=co(),e.pingedLanes|=e.suspendedLanes&r,_i===e&&(Di&r)===r&&(ui===4||ui===3&&(Di&130023424)===Di&&500>Jn()-Xw?Sc(e,0):Kw|=r),Io(e,t)}function yR(e,t){t===0&&(e.mode&1?(t=ig,ig<<=1,!(ig&130023424)&&(ig=4194304)):t=1);var r=co();e=js(e,t),e!==null&&(bf(e,t,r),Io(e,r))}function O6(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),yR(e,r)}function B6(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(xt(314))}o!==null&&o.delete(t),yR(e,r)}var vR;vR=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||So.current)wo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return wo=!1,I6(e,t,r);wo=!!(e.flags&131072)}else wo=!1,zn&&t.flags&1048576&&wz(t,yy,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Bg(e,t),e=t.pendingProps;var s=pd(t,Ji.current);ad(t,r),s=Uw(null,t,o,e,s,r);var d=Hw();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Co(o)?(d=!0,my(t)):d=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bw(t),s.updater=Ov,t.stateNode=s,s._reactInternals=t,G1(t,o,e,r),t=K1(null,t,o,!0,d,r)):(t.tag=0,zn&&d&&zw(t),lo(null,t,s,r),t=t.child),t;case 16:o=t.elementType;e:{switch(Bg(e,t),e=t.pendingProps,s=o._init,o=s(o._payload),t.type=o,s=t.tag=N6(o),e=Aa(o,e),s){case 0:t=Z1(null,t,o,e,r);break e;case 1:t=YI(null,t,o,e,r);break e;case 11:t=XI(null,t,o,e,r);break e;case 14:t=JI(null,t,o,Aa(o.type,e),r);break e}throw Error(xt(306,o,""))}return t;case 0:return o=t.type,s=t.pendingProps,s=t.elementType===o?s:Aa(o,s),Z1(e,t,o,s,r);case 1:return o=t.type,s=t.pendingProps,s=t.elementType===o?s:Aa(o,s),YI(e,t,o,s,r);case 3:e:{if(tR(t),e===null)throw Error(xt(387));o=t.pendingProps,d=t.memoizedState,s=d.element,kz(e,t),xy(t,o,null,r);var p=t.memoizedState;if(o=p.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){s=yd(Error(xt(423)),t),t=QI(e,t,o,r,s);break e}else if(o!==s){s=yd(Error(xt(424)),t),t=QI(e,t,o,r,s);break e}else for(jo=Il(t.stateNode.containerInfo.firstChild),Uo=t,zn=!0,Ma=null,r=Tz(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fd(),o===s){t=Vs(e,t,r);break e}lo(e,t,o,r)}t=t.child}return t;case 5:return Ez(t),e===null&&U1(t),o=t.type,s=t.pendingProps,d=e!==null?e.memoizedProps:null,p=s.children,B1(o,s)?p=null:d!==null&&B1(o,d)&&(t.flags|=32),eR(e,t),lo(e,t,p,r),t.child;case 6:return e===null&&U1(t),null;case 13:return rR(e,t,r);case 4:return Fw(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=md(t,null,o,r):lo(e,t,o,r),t.child;case 11:return o=t.type,s=t.pendingProps,s=t.elementType===o?s:Aa(o,s),XI(e,t,o,s,r);case 7:return lo(e,t,t.pendingProps,r),t.child;case 8:return lo(e,t,t.pendingProps.children,r),t.child;case 12:return lo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,s=t.pendingProps,d=t.memoizedProps,p=s.value,_n(vy,o._currentValue),o._currentValue=p,d!==null)if(Ba(d.value,p)){if(d.children===s.children&&!So.current){t=Vs(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var c=d.dependencies;if(c!==null){p=d.child;for(var x=c.firstContext;x!==null;){if(x.context===o){if(d.tag===1){x=Ls(-1,r&-r),x.tag=2;var w=d.updateQueue;if(w!==null){w=w.shared;var T=w.pending;T===null?x.next=x:(x.next=T.next,T.next=x),w.pending=x}}d.lanes|=r,x=d.alternate,x!==null&&(x.lanes|=r),H1(d.return,r,t),c.lanes|=r;break}x=x.next}}else if(d.tag===10)p=d.type===t.type?null:d.child;else if(d.tag===18){if(p=d.return,p===null)throw Error(xt(341));p.lanes|=r,c=p.alternate,c!==null&&(c.lanes|=r),H1(p,r,t),p=d.sibling}else p=d.child;if(p!==null)p.return=d;else for(p=d;p!==null;){if(p===t){p=null;break}if(d=p.sibling,d!==null){d.return=p.return,p=d;break}p=p.return}d=p}lo(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,o=t.pendingProps.children,ad(t,r),s=ua(s),o=o(s),t.flags|=1,lo(e,t,o,r),t.child;case 14:return o=t.type,s=Aa(o,t.pendingProps),s=Aa(o.type,s),JI(e,t,o,s,r);case 15:return Yz(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,s=t.pendingProps,s=t.elementType===o?s:Aa(o,s),Bg(e,t),t.tag=1,Co(o)?(e=!0,my(t)):e=!1,ad(t,r),Kz(t,o,s),G1(t,o,s,r),K1(null,t,o,!0,e,r);case 19:return nR(e,t,r);case 22:return Qz(e,t,r)}throw Error(xt(156,t.tag))};function _R(e,t){return GA(e,t)}function F6(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sa(e,t,r,o){return new F6(e,t,r,o)}function eS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function N6(e){if(typeof e=="function")return eS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_w)return 11;if(e===xw)return 14}return 2}function El(e,t){var r=e.alternate;return r===null?(r=sa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function jg(e,t,r,o,s,d){var p=2;if(o=e,typeof e=="function")eS(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case ju:return Cc(r.children,s,d,t);case vw:p=8,s|=8;break;case g1:return e=sa(12,r,t,s|2),e.elementType=g1,e.lanes=d,e;case y1:return e=sa(13,r,t,s),e.elementType=y1,e.lanes=d,e;case v1:return e=sa(19,r,t,s),e.elementType=v1,e.lanes=d,e;case EA:return Nv(r,s,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case PA:p=10;break e;case kA:p=9;break e;case _w:p=11;break e;case xw:p=14;break e;case pl:p=16,o=null;break e}throw Error(xt(130,e==null?e:typeof e,""))}return t=sa(p,r,t,s),t.elementType=e,t.type=o,t.lanes=d,t}function Cc(e,t,r,o){return e=sa(7,e,o,t),e.lanes=r,e}function Nv(e,t,r,o){return e=sa(22,e,o,t),e.elementType=EA,e.lanes=r,e.stateNode={isHidden:!1},e}function Z_(e,t,r){return e=sa(6,e,null,t),e.lanes=r,e}function K_(e,t,r){return t=sa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function j6(e,t,r,o,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=E_(0),this.expirationTimes=E_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E_(0),this.identifierPrefix=o,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tS(e,t,r,o,s,d,p,c,x){return e=new j6(e,t,r,c,x),t===1?(t=1,d===!0&&(t|=8)):t=0,d=sa(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bw(d),e}function V6(e,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Nu,key:o==null?null:""+o,children:e,containerInfo:t,implementation:r}}function xR(e){if(!e)return Ml;e=e._reactInternals;e:{if($c(e)!==e||e.tag!==1)throw Error(xt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Co(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(xt(171))}if(e.tag===1){var r=e.type;if(Co(r))return xz(e,r,t)}return t}function bR(e,t,r,o,s,d,p,c,x){return e=tS(r,o,!0,e,s,d,p,c,x),e.context=xR(null),r=e.current,o=co(),s=kl(r),d=Ls(o,s),d.callback=t??null,Tl(r,d,s),e.current.lanes=s,bf(e,s,o),Io(e,o),e}function jv(e,t,r,o){var s=t.current,d=co(),p=kl(s);return r=xR(r),t.context===null?t.context=r:t.pendingContext=r,t=Ls(d,p),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=Tl(s,t,p),e!==null&&($a(e,s,p,d),Lg(e,s,p)),p}function ky(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function cT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function rS(e,t){cT(e,t),(e=e.alternate)&&cT(e,t)}var wR=typeof reportError=="function"?reportError:function(e){console.error(e)};function nS(e){this._internalRoot=e}Vv.prototype.render=nS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(xt(409));jv(e,t,null,null)};Vv.prototype.unmount=nS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mc(function(){jv(null,e,null,null)}),t[Ns]=null}};function Vv(e){this._internalRoot=e}Vv.prototype.unstable_scheduleHydration=function(e){if(e){var t=QA();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ml.length&&t!==0&&t<ml[r].priority;r++);ml.splice(r,0,e),r===0&&tz(e)}};function iS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Uv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uT(){}function U6(e,t,r,o,s){if(s){if(typeof o=="function"){var d=o;o=function(){var w=ky(p);d.call(w)}}var p=bR(t,o,e,0,null,!1,!1,"",uT);return e._reactRootContainer=p,e[Ns]=p.current,Jp(e.nodeType===8?e.parentNode:e),Mc(),p}for(;s=e.lastChild;)e.removeChild(s);if(typeof o=="function"){var c=o;o=function(){var w=ky(x);c.call(w)}}var x=tS(e,0,!1,null,null,!1,!1,"",uT);return e._reactRootContainer=x,e[Ns]=x.current,Jp(e.nodeType===8?e.parentNode:e),Mc(function(){jv(t,x,r,o)}),x}function Hv(e,t,r,o,s){var d=r._reactRootContainer;if(d){var p=d;if(typeof s=="function"){var c=s;s=function(){var x=ky(p);c.call(x)}}jv(t,p,e,s)}else p=U6(r,t,e,s,o);return ky(p)}JA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=xp(t.pendingLanes);r!==0&&(Sw(t,r|1),Io(t,Jn()),!(qr&6)&&(vd=Jn()+500,Bl()))}break;case 13:Mc(function(){var o=js(e,1);if(o!==null){var s=co();$a(o,e,1,s)}}),rS(e,1)}};Cw=function(e){if(e.tag===13){var t=js(e,134217728);if(t!==null){var r=co();$a(t,e,134217728,r)}rS(e,134217728)}};YA=function(e){if(e.tag===13){var t=kl(e),r=js(e,t);if(r!==null){var o=co();$a(r,e,t,o)}rS(e,t)}};QA=function(){return rn};ez=function(e,t){var r=rn;try{return rn=e,t()}finally{rn=r}};k1=function(e,t,r){switch(t){case"input":if(b1(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var s=Dv(o);if(!s)throw Error(xt(90));zA(o),b1(o,s)}}}break;case"textarea":MA(e,r);break;case"select":t=r.value,t!=null&&rd(e,!!r.multiple,t,!1)}};NA=Jw;jA=Mc;var H6={usingClientEntryPoint:!1,Events:[Sf,Wu,Dv,BA,FA,Jw]},ap={findFiberByHostInstance:_c,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},W6={bundleType:ap.bundleType,version:ap.version,rendererPackageName:ap.rendererPackageName,rendererConfig:ap.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=HA(e),e===null?null:e.stateNode},findFiberByHostInstance:ap.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mg.isDisabled&&mg.supportsFiber)try{Av=mg.inject(W6),os=mg}catch{}}qo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H6;qo.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iS(t))throw Error(xt(200));return V6(e,t,null,r)};qo.createRoot=function(e,t){if(!iS(e))throw Error(xt(299));var r=!1,o="",s=wR;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=tS(e,1,!1,null,null,r,!1,o,s),e[Ns]=t.current,Jp(e.nodeType===8?e.parentNode:e),new nS(t)};qo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(xt(188)):(e=Object.keys(e).join(","),Error(xt(268,e)));return e=HA(t),e=e===null?null:e.stateNode,e};qo.flushSync=function(e){return Mc(e)};qo.hydrate=function(e,t,r){if(!Uv(t))throw Error(xt(200));return Hv(null,e,t,!0,r)};qo.hydrateRoot=function(e,t,r){if(!iS(e))throw Error(xt(405));var o=r!=null&&r.hydratedSources||null,s=!1,d="",p=wR;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(p=r.onRecoverableError)),t=bR(t,null,e,1,r??null,s,!1,d,p),e[Ns]=t.current,Jp(e),o)for(e=0;e<o.length;e++)r=o[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Vv(t)};qo.render=function(e,t,r){if(!Uv(t))throw Error(xt(200));return Hv(null,e,t,!1,r)};qo.unmountComponentAtNode=function(e){if(!Uv(e))throw Error(xt(40));return e._reactRootContainer?(Mc(function(){Hv(null,null,e,!1,function(){e._reactRootContainer=null,e[Ns]=null})}),!0):!1};qo.unstable_batchedUpdates=Jw;qo.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!Uv(r))throw Error(xt(200));if(e==null||e._reactInternals===void 0)throw Error(xt(38));return Hv(e,t,r,!1,o)};qo.version="18.3.1-next-f1338f8080-20240426";function SR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(SR)}catch(e){console.error(e)}}SR(),SA.exports=qo;var $d=SA.exports;const G6=Gy($d),q6=zb({__proto__:null,default:G6},[$d]);function Z6(e){return typeof e=="function"?e():e}const CR=R.forwardRef(function(t,r){const{children:o,container:s,disablePortal:d=!1}=t,[p,c]=R.useState(null),x=tn(R.isValidElement(o)?aw(o):null,r);if(Os(()=>{d||c(Z6(s)||document.body)},[s,d]),Os(()=>{if(p&&!d)return iy(r,p),()=>{iy(r,null)}},[r,p,d]),d){if(R.isValidElement(o)){const w={ref:x};return R.cloneElement(o,w)}return te.jsx(R.Fragment,{children:o})}return te.jsx(R.Fragment,{children:p&&$d.createPortal(o,p)})});function K6(e={}){const{disabled:t=!1,focusableWhenDisabled:r,rootRef:o}=e,s=R.useContext(Tv);if(s===null)throw new Error("useMenuButton: no menu context available.");const{state:d,dispatch:p,registerTrigger:c,popupId:x}=s,{getRootProps:w,rootRef:T,active:k}=us({disabled:t,focusableWhenDisabled:r,rootRef:o}),E=tn(T,c),M=B=>D=>{var $;($=B.onClick)==null||$.call(B,D),!D.defaultMuiPrevented&&p({type:Da.toggle,event:D})},N=B=>D=>{var $;($=B.onKeyDown)==null||$.call(B,D),!D.defaultMuiPrevented&&(D.key==="ArrowDown"||D.key==="ArrowUp")&&(D.preventDefault(),p({type:Da.open,event:D}))},j=(B={})=>({onClick:M(B),onKeyDown:N(B)});return{active:k,getRootProps:(B={})=>{const D=Mi(B),$=Bs(j,w);return G({"aria-haspopup":"menu","aria-expanded":d.open,"aria-controls":x},B,D,$(D),{tabIndex:0,ref:E})},open:d.open,rootRef:E}}function X6(e){return`menu-item-${e.size}`}const J6={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function Y6(e){var t;const{disabled:r=!1,id:o,rootRef:s,label:d,disableFocusOnHover:p=!1}=e,c=Eo(o),x=R.useRef(null),w=R.useMemo(()=>({disabled:r,id:c??"",label:d,ref:x}),[r,c,d]),{dispatch:T}=(t=R.useContext(Tv))!=null?t:J6,{getRootProps:k,highlighted:E}=fw({item:c,handlePointerOverEvents:!p}),{index:M,totalItemCount:N}=Ev(c??X6,w),{getRootProps:j,focusVisible:q,rootRef:B}=us({disabled:r,focusableWhenDisabled:!0}),D=tn(B,s,x);R.useDebugValue({id:c,highlighted:E,disabled:r,label:d});const $=K=>se=>{var ae;(ae=K.onClick)==null||ae.call(K,se),!se.defaultMuiPrevented&&T({type:Da.close,event:se})},ie=(K={})=>G({},K,{onClick:$(K)});function J(K={}){const se=Mi(K),ae=Bs(ie,Bs(j,k));return G({},K,se,ae(se),{id:c,ref:D,role:"menuitem"})}return c===void 0?{getRootProps:J,disabled:!1,focusVisible:q,highlighted:!1,index:-1,totalItemCount:0,rootRef:D}:{getRootProps:J,disabled:r,focusVisible:q,highlighted:E,index:M,totalItemCount:N,rootRef:D}}function Q6(e){const t=R.useContext(Ll);if(!t)throw new Error("MenuItem: ListContext was not found.");const r=Eo(e),{getItemState:o,dispatch:s}=t;let d;r!=null?d=o(r):d={focusable:!0,highlighted:!1,selected:!1};const{highlighted:p,selected:c,focusable:x}=d,w=R.useCallback(k=>{if(k!==r)throw new Error(["Base UI MenuItem: Tried to access the state of another MenuItem.",`itemValue: ${k} | id: ${r}`,"This is unsupported when the MenuItem uses the MenuItemContextStabilizer as a performance optimization."].join("/n"));return{highlighted:p,selected:c,focusable:x}},[p,c,x,r]);return{contextValue:R.useMemo(()=>({dispatch:s,getItemState:w}),[s,w]),id:r}}function eN(e){const t=is(e);return t.body===e?iw(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Dp(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function dT(e){return parseInt(iw(e).getComputedStyle(e).paddingRight,10)||0}function tN(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,o=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||o}function hT(e,t,r,o,s){const d=[t,r,...o];[].forEach.call(e.children,p=>{const c=d.indexOf(p)===-1,x=!tN(p);c&&x&&Dp(p,s)})}function X_(e,t){let r=-1;return e.some((o,s)=>t(o)?(r=s,!0):!1),r}function rN(e,t){const r=[],o=e.container;if(!t.disableScrollLock){if(eN(o)){const p=cB(is(o));r.push({value:o.style.paddingRight,property:"padding-right",el:o}),o.style.paddingRight=`${dT(o)+p}px`;const c=is(o).querySelectorAll(".mui-fixed");[].forEach.call(c,x=>{r.push({value:x.style.paddingRight,property:"padding-right",el:x}),x.style.paddingRight=`${dT(x)+p}px`})}let d;if(o.parentNode instanceof DocumentFragment)d=is(o).body;else{const p=o.parentElement,c=iw(o);d=(p==null?void 0:p.nodeName)==="HTML"&&c.getComputedStyle(p).overflowY==="scroll"?p:o}r.push({value:d.style.overflow,property:"overflow",el:d},{value:d.style.overflowX,property:"overflow-x",el:d},{value:d.style.overflowY,property:"overflow-y",el:d}),d.style.overflow="hidden"}return()=>{r.forEach(({value:d,el:p,property:c})=>{d?p.style.setProperty(c,d):p.style.removeProperty(c)})}}function nN(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class iN{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,r){let o=this.modals.indexOf(t);if(o!==-1)return o;o=this.modals.length,this.modals.push(t),t.modalRef&&Dp(t.modalRef,!1);const s=nN(r);hT(r,t.mount,t.modalRef,s,!0);const d=X_(this.containers,p=>p.container===r);return d!==-1?(this.containers[d].modals.push(t),o):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:s}),o)}mount(t,r){const o=X_(this.containers,d=>d.modals.indexOf(t)!==-1),s=this.containers[o];s.restore||(s.restore=rN(s,r))}remove(t,r=!0){const o=this.modals.indexOf(t);if(o===-1)return o;const s=X_(this.containers,p=>p.modals.indexOf(t)!==-1),d=this.containers[s];if(d.modals.splice(d.modals.indexOf(t),1),this.modals.splice(o,1),d.modals.length===0)d.restore&&d.restore(),t.modalRef&&Dp(t.modalRef,r),hT(d.container,t.mount,t.modalRef,d.hiddenSiblings,!1),this.containers.splice(s,1);else{const p=d.modals[d.modals.length-1];p.modalRef&&Dp(p.modalRef,!1)}return o}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function oN(e){return typeof e=="function"?e():e}function aN(e){return e?e.props.hasOwnProperty("in"):!1}const sN=new iN;function lN(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:o=!1,manager:s=sN,closeAfterTransition:d=!1,onTransitionEnter:p,onTransitionExited:c,children:x,onClose:w,open:T,rootRef:k}=e,E=R.useRef({}),M=R.useRef(null),N=R.useRef(null),j=tn(N,k),[q,B]=R.useState(!T),D=aN(x);let $=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&($=!1);const ie=()=>is(M.current),J=()=>(E.current.modalRef=N.current,E.current.mount=M.current,E.current),K=()=>{s.mount(J(),{disableScrollLock:o}),N.current&&(N.current.scrollTop=0)},se=vl(()=>{const Se=oN(t)||ie().body;s.add(J(),Se),N.current&&K()}),ae=R.useCallback(()=>s.isTopModal(J()),[s]),we=vl(Se=>{M.current=Se,Se&&(T&&ae()?K():N.current&&Dp(N.current,$))}),xe=R.useCallback(()=>{s.remove(J(),$)},[$,s]);R.useEffect(()=>()=>{xe()},[xe]),R.useEffect(()=>{T?se():(!D||!d)&&xe()},[T,xe,D,d,se]);const ke=Se=>Le=>{var Be;(Be=Se.onKeyDown)==null||Be.call(Se,Le),!(Le.key!=="Escape"||Le.which===229||!ae())&&(r||(Le.stopPropagation(),w&&w(Le,"escapeKeyDown")))},Ee=Se=>Le=>{var Be;(Be=Se.onClick)==null||Be.call(Se,Le),Le.target===Le.currentTarget&&w&&w(Le,"backdropClick")};return{getRootProps:(Se={})=>{const Le=Mi(e);delete Le.onTransitionEnter,delete Le.onTransitionExited;const Be=G({},Le,Se);return G({role:"presentation"},Be,{onKeyDown:ke(Be),ref:j})},getBackdropProps:(Se={})=>{const Le=Se;return G({"aria-hidden":!0},Le,{onClick:Ee(Le),open:T})},getTransitionProps:()=>{const Se=()=>{B(!1),p&&p()},Le=()=>{B(!0),c&&c(),d&&xe()};return{onEnter:G2(Se,x==null?void 0:x.props.onEnter),onExited:G2(Le,x==null?void 0:x.props.onExited)}},rootRef:j,portalRef:we,isTopModal:ae,exited:q,hasTransition:D}}function cN(e){const{value:t,label:r,disabled:o,rootRef:s,id:d}=e,{getRootProps:p,highlighted:c,selected:x}=fw({item:t}),{getRootProps:w,rootRef:T}=us({disabled:o,focusableWhenDisabled:!0}),k=Eo(d),E=R.useRef(null),M=R.useMemo(()=>({disabled:o,label:r,value:t,ref:E,id:k}),[o,r,t,k]),{index:N}=Ev(t,M),j=tn(s,E,T),q=D=>$=>{var ie;(ie=D.onKeyDown)==null||ie.call(D,$),!$.defaultMuiPrevented&&[" ","Enter"].includes($.key)&&($.defaultMuiPrevented=!0)},B=(D={})=>({onKeyDown:q(D)});return{getRootProps:(D={})=>{const $=Mi(D),ie=Bs(p,Bs(w,B));return G({},D,$,ie($),{id:k,ref:j,role:"option","aria-selected":x})},highlighted:c,index:N,selected:x,rootRef:j}}function uN(e){const t=R.useContext(Ll);if(!t)throw new Error("Option: ListContext was not found.");const{getItemState:r,dispatch:o}=t,{highlighted:s,selected:d,focusable:p}=r(e),c=R.useCallback(w=>{if(w!==e)throw new Error(["Base UI Option: Tried to access the state of another Option.","This is unsupported when the Option uses the OptionContextStabilizer as a performance optimization."].join("/n"));return{highlighted:s,selected:d,focusable:p}},[s,d,p,e]);return{contextValue:R.useMemo(()=>({dispatch:o,getItemState:c}),[o,c])}}var To="top",ha="bottom",pa="right",Po="left",oS="auto",If=[To,ha,pa,Po],_d="start",sf="end",dN="clippingParents",IR="viewport",sp="popper",hN="reference",pT=If.reduce(function(e,t){return e.concat([t+"-"+_d,t+"-"+sf])},[]),TR=[].concat(If,[oS]).reduce(function(e,t){return e.concat([t,t+"-"+_d,t+"-"+sf])},[]),pN="beforeRead",fN="read",mN="afterRead",gN="beforeMain",yN="main",vN="afterMain",_N="beforeWrite",xN="write",bN="afterWrite",wN=[pN,fN,mN,gN,yN,vN,_N,xN,bN];function ls(e){return e?(e.nodeName||"").toLowerCase():null}function Wo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Dc(e){var t=Wo(e).Element;return e instanceof t||e instanceof Element}function ca(e){var t=Wo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function aS(e){if(typeof ShadowRoot>"u")return!1;var t=Wo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function SN(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var o=t.styles[r]||{},s=t.attributes[r]||{},d=t.elements[r];!ca(d)||!ls(d)||(Object.assign(d.style,o),Object.keys(s).forEach(function(p){var c=s[p];c===!1?d.removeAttribute(p):d.setAttribute(p,c===!0?"":c)}))})}function CN(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(o){var s=t.elements[o],d=t.attributes[o]||{},p=Object.keys(t.styles.hasOwnProperty(o)?t.styles[o]:r[o]),c=p.reduce(function(x,w){return x[w]="",x},{});!ca(s)||!ls(s)||(Object.assign(s.style,c),Object.keys(d).forEach(function(x){s.removeAttribute(x)}))})}}const IN={name:"applyStyles",enabled:!0,phase:"write",fn:SN,effect:CN,requires:["computeStyles"]};function ss(e){return e.split("-")[0]}var Ic=Math.max,Ey=Math.min,xd=Math.round;function sb(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function PR(){return!/^((?!chrome|android).)*safari/i.test(sb())}function bd(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var o=e.getBoundingClientRect(),s=1,d=1;t&&ca(e)&&(s=e.offsetWidth>0&&xd(o.width)/e.offsetWidth||1,d=e.offsetHeight>0&&xd(o.height)/e.offsetHeight||1);var p=Dc(e)?Wo(e):window,c=p.visualViewport,x=!PR()&&r,w=(o.left+(x&&c?c.offsetLeft:0))/s,T=(o.top+(x&&c?c.offsetTop:0))/d,k=o.width/s,E=o.height/d;return{width:k,height:E,top:T,right:w+k,bottom:T+E,left:w,x:w,y:T}}function sS(e){var t=bd(e),r=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:o}}function kR(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&aS(r)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Us(e){return Wo(e).getComputedStyle(e)}function TN(e){return["table","td","th"].indexOf(ls(e))>=0}function Fl(e){return((Dc(e)?e.ownerDocument:e.document)||window.document).documentElement}function Wv(e){return ls(e)==="html"?e:e.assignedSlot||e.parentNode||(aS(e)?e.host:null)||Fl(e)}function fT(e){return!ca(e)||Us(e).position==="fixed"?null:e.offsetParent}function PN(e){var t=/firefox/i.test(sb()),r=/Trident/i.test(sb());if(r&&ca(e)){var o=Us(e);if(o.position==="fixed")return null}var s=Wv(e);for(aS(s)&&(s=s.host);ca(s)&&["html","body"].indexOf(ls(s))<0;){var d=Us(s);if(d.transform!=="none"||d.perspective!=="none"||d.contain==="paint"||["transform","perspective"].indexOf(d.willChange)!==-1||t&&d.willChange==="filter"||t&&d.filter&&d.filter!=="none")return s;s=s.parentNode}return null}function Tf(e){for(var t=Wo(e),r=fT(e);r&&TN(r)&&Us(r).position==="static";)r=fT(r);return r&&(ls(r)==="html"||ls(r)==="body"&&Us(r).position==="static")?t:r||PN(e)||t}function lS(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Lp(e,t,r){return Ic(e,Ey(t,r))}function kN(e,t,r){var o=Lp(e,t,r);return o>r?r:o}function ER(){return{top:0,right:0,bottom:0,left:0}}function AR(e){return Object.assign({},ER(),e)}function zR(e,t){return t.reduce(function(r,o){return r[o]=e,r},{})}var EN=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,AR(typeof t!="number"?t:zR(t,If))};function AN(e){var t,r=e.state,o=e.name,s=e.options,d=r.elements.arrow,p=r.modifiersData.popperOffsets,c=ss(r.placement),x=lS(c),w=[Po,pa].indexOf(c)>=0,T=w?"height":"width";if(!(!d||!p)){var k=EN(s.padding,r),E=sS(d),M=x==="y"?To:Po,N=x==="y"?ha:pa,j=r.rects.reference[T]+r.rects.reference[x]-p[x]-r.rects.popper[T],q=p[x]-r.rects.reference[x],B=Tf(d),D=B?x==="y"?B.clientHeight||0:B.clientWidth||0:0,$=j/2-q/2,ie=k[M],J=D-E[T]-k[N],K=D/2-E[T]/2+$,se=Lp(ie,K,J),ae=x;r.modifiersData[o]=(t={},t[ae]=se,t.centerOffset=se-K,t)}}function zN(e){var t=e.state,r=e.options,o=r.element,s=o===void 0?"[data-popper-arrow]":o;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||kR(t.elements.popper,s)&&(t.elements.arrow=s))}const RN={name:"arrow",enabled:!0,phase:"main",fn:AN,effect:zN,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function wd(e){return e.split("-")[1]}var MN={top:"auto",right:"auto",bottom:"auto",left:"auto"};function DN(e,t){var r=e.x,o=e.y,s=t.devicePixelRatio||1;return{x:xd(r*s)/s||0,y:xd(o*s)/s||0}}function mT(e){var t,r=e.popper,o=e.popperRect,s=e.placement,d=e.variation,p=e.offsets,c=e.position,x=e.gpuAcceleration,w=e.adaptive,T=e.roundOffsets,k=e.isFixed,E=p.x,M=E===void 0?0:E,N=p.y,j=N===void 0?0:N,q=typeof T=="function"?T({x:M,y:j}):{x:M,y:j};M=q.x,j=q.y;var B=p.hasOwnProperty("x"),D=p.hasOwnProperty("y"),$=Po,ie=To,J=window;if(w){var K=Tf(r),se="clientHeight",ae="clientWidth";if(K===Wo(r)&&(K=Fl(r),Us(K).position!=="static"&&c==="absolute"&&(se="scrollHeight",ae="scrollWidth")),K=K,s===To||(s===Po||s===pa)&&d===sf){ie=ha;var we=k&&K===J&&J.visualViewport?J.visualViewport.height:K[se];j-=we-o.height,j*=x?1:-1}if(s===Po||(s===To||s===ha)&&d===sf){$=pa;var xe=k&&K===J&&J.visualViewport?J.visualViewport.width:K[ae];M-=xe-o.width,M*=x?1:-1}}var ke=Object.assign({position:c},w&&MN),Ee=T===!0?DN({x:M,y:j},Wo(r)):{x:M,y:j};if(M=Ee.x,j=Ee.y,x){var $e;return Object.assign({},ke,($e={},$e[ie]=D?"0":"",$e[$]=B?"0":"",$e.transform=(J.devicePixelRatio||1)<=1?"translate("+M+"px, "+j+"px)":"translate3d("+M+"px, "+j+"px, 0)",$e))}return Object.assign({},ke,(t={},t[ie]=D?j+"px":"",t[$]=B?M+"px":"",t.transform="",t))}function LN(e){var t=e.state,r=e.options,o=r.gpuAcceleration,s=o===void 0?!0:o,d=r.adaptive,p=d===void 0?!0:d,c=r.roundOffsets,x=c===void 0?!0:c,w={placement:ss(t.placement),variation:wd(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,mT(Object.assign({},w,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:p,roundOffsets:x})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,mT(Object.assign({},w,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:x})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const $N={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:LN,data:{}};var gg={passive:!0};function ON(e){var t=e.state,r=e.instance,o=e.options,s=o.scroll,d=s===void 0?!0:s,p=o.resize,c=p===void 0?!0:p,x=Wo(t.elements.popper),w=[].concat(t.scrollParents.reference,t.scrollParents.popper);return d&&w.forEach(function(T){T.addEventListener("scroll",r.update,gg)}),c&&x.addEventListener("resize",r.update,gg),function(){d&&w.forEach(function(T){T.removeEventListener("scroll",r.update,gg)}),c&&x.removeEventListener("resize",r.update,gg)}}const BN={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ON,data:{}};var FN={left:"right",right:"left",bottom:"top",top:"bottom"};function Vg(e){return e.replace(/left|right|bottom|top/g,function(t){return FN[t]})}var NN={start:"end",end:"start"};function gT(e){return e.replace(/start|end/g,function(t){return NN[t]})}function cS(e){var t=Wo(e),r=t.pageXOffset,o=t.pageYOffset;return{scrollLeft:r,scrollTop:o}}function uS(e){return bd(Fl(e)).left+cS(e).scrollLeft}function jN(e,t){var r=Wo(e),o=Fl(e),s=r.visualViewport,d=o.clientWidth,p=o.clientHeight,c=0,x=0;if(s){d=s.width,p=s.height;var w=PR();(w||!w&&t==="fixed")&&(c=s.offsetLeft,x=s.offsetTop)}return{width:d,height:p,x:c+uS(e),y:x}}function VN(e){var t,r=Fl(e),o=cS(e),s=(t=e.ownerDocument)==null?void 0:t.body,d=Ic(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),p=Ic(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),c=-o.scrollLeft+uS(e),x=-o.scrollTop;return Us(s||r).direction==="rtl"&&(c+=Ic(r.clientWidth,s?s.clientWidth:0)-d),{width:d,height:p,x:c,y:x}}function dS(e){var t=Us(e),r=t.overflow,o=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+o)}function RR(e){return["html","body","#document"].indexOf(ls(e))>=0?e.ownerDocument.body:ca(e)&&dS(e)?e:RR(Wv(e))}function $p(e,t){var r;t===void 0&&(t=[]);var o=RR(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),d=Wo(o),p=s?[d].concat(d.visualViewport||[],dS(o)?o:[]):o,c=t.concat(p);return s?c:c.concat($p(Wv(p)))}function lb(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function UN(e,t){var r=bd(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function yT(e,t,r){return t===IR?lb(jN(e,r)):Dc(t)?UN(t,r):lb(VN(Fl(e)))}function HN(e){var t=$p(Wv(e)),r=["absolute","fixed"].indexOf(Us(e).position)>=0,o=r&&ca(e)?Tf(e):e;return Dc(o)?t.filter(function(s){return Dc(s)&&kR(s,o)&&ls(s)!=="body"}):[]}function WN(e,t,r,o){var s=t==="clippingParents"?HN(e):[].concat(t),d=[].concat(s,[r]),p=d[0],c=d.reduce(function(x,w){var T=yT(e,w,o);return x.top=Ic(T.top,x.top),x.right=Ey(T.right,x.right),x.bottom=Ey(T.bottom,x.bottom),x.left=Ic(T.left,x.left),x},yT(e,p,o));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function MR(e){var t=e.reference,r=e.element,o=e.placement,s=o?ss(o):null,d=o?wd(o):null,p=t.x+t.width/2-r.width/2,c=t.y+t.height/2-r.height/2,x;switch(s){case To:x={x:p,y:t.y-r.height};break;case ha:x={x:p,y:t.y+t.height};break;case pa:x={x:t.x+t.width,y:c};break;case Po:x={x:t.x-r.width,y:c};break;default:x={x:t.x,y:t.y}}var w=s?lS(s):null;if(w!=null){var T=w==="y"?"height":"width";switch(d){case _d:x[w]=x[w]-(t[T]/2-r[T]/2);break;case sf:x[w]=x[w]+(t[T]/2-r[T]/2);break}}return x}function lf(e,t){t===void 0&&(t={});var r=t,o=r.placement,s=o===void 0?e.placement:o,d=r.strategy,p=d===void 0?e.strategy:d,c=r.boundary,x=c===void 0?dN:c,w=r.rootBoundary,T=w===void 0?IR:w,k=r.elementContext,E=k===void 0?sp:k,M=r.altBoundary,N=M===void 0?!1:M,j=r.padding,q=j===void 0?0:j,B=AR(typeof q!="number"?q:zR(q,If)),D=E===sp?hN:sp,$=e.rects.popper,ie=e.elements[N?D:E],J=WN(Dc(ie)?ie:ie.contextElement||Fl(e.elements.popper),x,T,p),K=bd(e.elements.reference),se=MR({reference:K,element:$,strategy:"absolute",placement:s}),ae=lb(Object.assign({},$,se)),we=E===sp?ae:K,xe={top:J.top-we.top+B.top,bottom:we.bottom-J.bottom+B.bottom,left:J.left-we.left+B.left,right:we.right-J.right+B.right},ke=e.modifiersData.offset;if(E===sp&&ke){var Ee=ke[s];Object.keys(xe).forEach(function($e){var Je=[pa,ha].indexOf($e)>=0?1:-1,je=[To,ha].indexOf($e)>=0?"y":"x";xe[$e]+=Ee[je]*Je})}return xe}function GN(e,t){t===void 0&&(t={});var r=t,o=r.placement,s=r.boundary,d=r.rootBoundary,p=r.padding,c=r.flipVariations,x=r.allowedAutoPlacements,w=x===void 0?TR:x,T=wd(o),k=T?c?pT:pT.filter(function(N){return wd(N)===T}):If,E=k.filter(function(N){return w.indexOf(N)>=0});E.length===0&&(E=k);var M=E.reduce(function(N,j){return N[j]=lf(e,{placement:j,boundary:s,rootBoundary:d,padding:p})[ss(j)],N},{});return Object.keys(M).sort(function(N,j){return M[N]-M[j]})}function qN(e){if(ss(e)===oS)return[];var t=Vg(e);return[gT(e),t,gT(t)]}function ZN(e){var t=e.state,r=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var s=r.mainAxis,d=s===void 0?!0:s,p=r.altAxis,c=p===void 0?!0:p,x=r.fallbackPlacements,w=r.padding,T=r.boundary,k=r.rootBoundary,E=r.altBoundary,M=r.flipVariations,N=M===void 0?!0:M,j=r.allowedAutoPlacements,q=t.options.placement,B=ss(q),D=B===q,$=x||(D||!N?[Vg(q)]:qN(q)),ie=[q].concat($).reduce(function(vt,Dt){return vt.concat(ss(Dt)===oS?GN(t,{placement:Dt,boundary:T,rootBoundary:k,padding:w,flipVariations:N,allowedAutoPlacements:j}):Dt)},[]),J=t.rects.reference,K=t.rects.popper,se=new Map,ae=!0,we=ie[0],xe=0;xe<ie.length;xe++){var ke=ie[xe],Ee=ss(ke),$e=wd(ke)===_d,Je=[To,ha].indexOf(Ee)>=0,je=Je?"width":"height",Se=lf(t,{placement:ke,boundary:T,rootBoundary:k,altBoundary:E,padding:w}),Le=Je?$e?pa:Po:$e?ha:To;J[je]>K[je]&&(Le=Vg(Le));var Be=Vg(Le),Ve=[];if(d&&Ve.push(Se[Ee]<=0),c&&Ve.push(Se[Le]<=0,Se[Be]<=0),Ve.every(function(vt){return vt})){we=ke,ae=!1;break}se.set(ke,Ve)}if(ae)for(var Qe=N?3:1,st=function(Dt){var tr=ie.find(function(ht){var Ke=se.get(ht);if(Ke)return Ke.slice(0,Dt).every(function(ft){return ft})});if(tr)return we=tr,"break"},ct=Qe;ct>0;ct--){var Mt=st(ct);if(Mt==="break")break}t.placement!==we&&(t.modifiersData[o]._skip=!0,t.placement=we,t.reset=!0)}}const KN={name:"flip",enabled:!0,phase:"main",fn:ZN,requiresIfExists:["offset"],data:{_skip:!1}};function vT(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function _T(e){return[To,pa,ha,Po].some(function(t){return e[t]>=0})}function XN(e){var t=e.state,r=e.name,o=t.rects.reference,s=t.rects.popper,d=t.modifiersData.preventOverflow,p=lf(t,{elementContext:"reference"}),c=lf(t,{altBoundary:!0}),x=vT(p,o),w=vT(c,s,d),T=_T(x),k=_T(w);t.modifiersData[r]={referenceClippingOffsets:x,popperEscapeOffsets:w,isReferenceHidden:T,hasPopperEscaped:k},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":T,"data-popper-escaped":k})}const JN={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:XN};function YN(e,t,r){var o=ss(e),s=[Po,To].indexOf(o)>=0?-1:1,d=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,p=d[0],c=d[1];return p=p||0,c=(c||0)*s,[Po,pa].indexOf(o)>=0?{x:c,y:p}:{x:p,y:c}}function QN(e){var t=e.state,r=e.options,o=e.name,s=r.offset,d=s===void 0?[0,0]:s,p=TR.reduce(function(T,k){return T[k]=YN(k,t.rects,d),T},{}),c=p[t.placement],x=c.x,w=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=x,t.modifiersData.popperOffsets.y+=w),t.modifiersData[o]=p}const ej={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:QN};function tj(e){var t=e.state,r=e.name;t.modifiersData[r]=MR({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const rj={name:"popperOffsets",enabled:!0,phase:"read",fn:tj,data:{}};function nj(e){return e==="x"?"y":"x"}function ij(e){var t=e.state,r=e.options,o=e.name,s=r.mainAxis,d=s===void 0?!0:s,p=r.altAxis,c=p===void 0?!1:p,x=r.boundary,w=r.rootBoundary,T=r.altBoundary,k=r.padding,E=r.tether,M=E===void 0?!0:E,N=r.tetherOffset,j=N===void 0?0:N,q=lf(t,{boundary:x,rootBoundary:w,padding:k,altBoundary:T}),B=ss(t.placement),D=wd(t.placement),$=!D,ie=lS(B),J=nj(ie),K=t.modifiersData.popperOffsets,se=t.rects.reference,ae=t.rects.popper,we=typeof j=="function"?j(Object.assign({},t.rects,{placement:t.placement})):j,xe=typeof we=="number"?{mainAxis:we,altAxis:we}:Object.assign({mainAxis:0,altAxis:0},we),ke=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Ee={x:0,y:0};if(K){if(d){var $e,Je=ie==="y"?To:Po,je=ie==="y"?ha:pa,Se=ie==="y"?"height":"width",Le=K[ie],Be=Le+q[Je],Ve=Le-q[je],Qe=M?-ae[Se]/2:0,st=D===_d?se[Se]:ae[Se],ct=D===_d?-ae[Se]:-se[Se],Mt=t.elements.arrow,vt=M&&Mt?sS(Mt):{width:0,height:0},Dt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:ER(),tr=Dt[Je],ht=Dt[je],Ke=Lp(0,se[Se],vt[Se]),ft=$?se[Se]/2-Qe-Ke-tr-xe.mainAxis:st-Ke-tr-xe.mainAxis,Ct=$?-se[Se]/2+Qe+Ke+ht+xe.mainAxis:ct+Ke+ht+xe.mainAxis,jt=t.elements.arrow&&Tf(t.elements.arrow),Gt=jt?ie==="y"?jt.clientTop||0:jt.clientLeft||0:0,vr=($e=ke==null?void 0:ke[ie])!=null?$e:0,Cr=Le+ft-vr-Gt,Ut=Le+Ct-vr,Pt=Lp(M?Ey(Be,Cr):Be,Le,M?Ic(Ve,Ut):Ve);K[ie]=Pt,Ee[ie]=Pt-Le}if(c){var sr,Ft=ie==="x"?To:Po,_r=ie==="x"?ha:pa,Ue=K[J],xr=J==="y"?"height":"width",Er=Ue+q[Ft],Vt=Ue-q[_r],Jt=[To,Po].indexOf(B)!==-1,Ar=(sr=ke==null?void 0:ke[J])!=null?sr:0,Br=Jt?Er:Ue-se[xr]-ae[xr]-Ar+xe.altAxis,cr=Jt?Ue+se[xr]+ae[xr]-Ar-xe.altAxis:Vt,nr=M&&Jt?kN(Br,Ue,cr):Lp(M?Br:Er,Ue,M?cr:Vt);K[J]=nr,Ee[J]=nr-Ue}t.modifiersData[o]=Ee}}const oj={name:"preventOverflow",enabled:!0,phase:"main",fn:ij,requiresIfExists:["offset"]};function aj(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function sj(e){return e===Wo(e)||!ca(e)?cS(e):aj(e)}function lj(e){var t=e.getBoundingClientRect(),r=xd(t.width)/e.offsetWidth||1,o=xd(t.height)/e.offsetHeight||1;return r!==1||o!==1}function cj(e,t,r){r===void 0&&(r=!1);var o=ca(t),s=ca(t)&&lj(t),d=Fl(t),p=bd(e,s,r),c={scrollLeft:0,scrollTop:0},x={x:0,y:0};return(o||!o&&!r)&&((ls(t)!=="body"||dS(d))&&(c=sj(t)),ca(t)?(x=bd(t,!0),x.x+=t.clientLeft,x.y+=t.clientTop):d&&(x.x=uS(d))),{x:p.left+c.scrollLeft-x.x,y:p.top+c.scrollTop-x.y,width:p.width,height:p.height}}function uj(e){var t=new Map,r=new Set,o=[];e.forEach(function(d){t.set(d.name,d)});function s(d){r.add(d.name);var p=[].concat(d.requires||[],d.requiresIfExists||[]);p.forEach(function(c){if(!r.has(c)){var x=t.get(c);x&&s(x)}}),o.push(d)}return e.forEach(function(d){r.has(d.name)||s(d)}),o}function dj(e){var t=uj(e);return wN.reduce(function(r,o){return r.concat(t.filter(function(s){return s.phase===o}))},[])}function hj(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function pj(e){var t=e.reduce(function(r,o){var s=r[o.name];return r[o.name]=s?Object.assign({},s,o,{options:Object.assign({},s.options,o.options),data:Object.assign({},s.data,o.data)}):o,r},{});return Object.keys(t).map(function(r){return t[r]})}var xT={placement:"bottom",modifiers:[],strategy:"absolute"};function bT(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function fj(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,o=r===void 0?[]:r,s=t.defaultOptions,d=s===void 0?xT:s;return function(c,x,w){w===void 0&&(w=d);var T={placement:"bottom",orderedModifiers:[],options:Object.assign({},xT,d),modifiersData:{},elements:{reference:c,popper:x},attributes:{},styles:{}},k=[],E=!1,M={state:T,setOptions:function(B){var D=typeof B=="function"?B(T.options):B;j(),T.options=Object.assign({},d,T.options,D),T.scrollParents={reference:Dc(c)?$p(c):c.contextElement?$p(c.contextElement):[],popper:$p(x)};var $=dj(pj([].concat(o,T.options.modifiers)));return T.orderedModifiers=$.filter(function(ie){return ie.enabled}),N(),M.update()},forceUpdate:function(){if(!E){var B=T.elements,D=B.reference,$=B.popper;if(bT(D,$)){T.rects={reference:cj(D,Tf($),T.options.strategy==="fixed"),popper:sS($)},T.reset=!1,T.placement=T.options.placement,T.orderedModifiers.forEach(function(xe){return T.modifiersData[xe.name]=Object.assign({},xe.data)});for(var ie=0;ie<T.orderedModifiers.length;ie++){if(T.reset===!0){T.reset=!1,ie=-1;continue}var J=T.orderedModifiers[ie],K=J.fn,se=J.options,ae=se===void 0?{}:se,we=J.name;typeof K=="function"&&(T=K({state:T,options:ae,name:we,instance:M})||T)}}}},update:hj(function(){return new Promise(function(q){M.forceUpdate(),q(T)})}),destroy:function(){j(),E=!0}};if(!bT(c,x))return M;M.setOptions(w).then(function(q){!E&&w.onFirstUpdate&&w.onFirstUpdate(q)});function N(){T.orderedModifiers.forEach(function(q){var B=q.name,D=q.options,$=D===void 0?{}:D,ie=q.effect;if(typeof ie=="function"){var J=ie({state:T,name:B,instance:M,options:$}),K=function(){};k.push(J||K)}})}function j(){k.forEach(function(q){return q()}),k=[]}return M}}var mj=[BN,rj,$N,IN,ej,KN,oj,RN,JN],gj=fj({defaultModifiers:mj});const DR="Popper";function yj(e){return bA(DR,e)}o4(DR,["root"]);const vj=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],_j=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function xj(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function cb(e){return typeof e=="function"?e():e}function bj(e){return e.nodeType!==void 0}const wj=()=>Dr({root:["root"]},t4(yj)),Sj={},Cj=R.forwardRef(function(t,r){var o;const{anchorEl:s,children:d,direction:p,disablePortal:c,modifiers:x,open:w,placement:T,popperOptions:k,popperRef:E,slotProps:M={},slots:N={},TransitionProps:j}=t,q=er(t,vj),B=R.useRef(null),D=tn(B,r),$=R.useRef(null),ie=tn($,E),J=R.useRef(ie);Os(()=>{J.current=ie},[ie]),R.useImperativeHandle(E,()=>$.current,[]);const K=xj(T,p),[se,ae]=R.useState(K),[we,xe]=R.useState(cb(s));R.useEffect(()=>{$.current&&$.current.forceUpdate()}),R.useEffect(()=>{s&&xe(cb(s))},[s]),Os(()=>{if(!we||!w)return;const je=Be=>{ae(Be.placement)};let Se=[{name:"preventOverflow",options:{altBoundary:c}},{name:"flip",options:{altBoundary:c}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Be})=>{je(Be)}}];x!=null&&(Se=Se.concat(x)),k&&k.modifiers!=null&&(Se=Se.concat(k.modifiers));const Le=gj(we,B.current,G({placement:K},k,{modifiers:Se}));return J.current(Le),()=>{Le.destroy(),J.current(null)}},[we,c,x,w,k,K]);const ke={placement:se};j!==null&&(ke.TransitionProps=j);const Ee=wj(),$e=(o=N.root)!=null?o:"div",Je=fA({elementType:$e,externalSlotProps:M.root,externalForwardedProps:q,additionalProps:{role:"tooltip",ref:D},ownerState:t,className:Ee.root});return te.jsx($e,G({},Je,{children:typeof d=="function"?d(ke):d}))}),Gv=R.forwardRef(function(t,r){const{anchorEl:o,children:s,container:d,direction:p="ltr",disablePortal:c=!1,keepMounted:x=!1,modifiers:w,open:T,placement:k="bottom",popperOptions:E=Sj,popperRef:M,style:N,transition:j=!1,slotProps:q={},slots:B={}}=t,D=er(t,_j),[$,ie]=R.useState(!0),J=()=>{ie(!1)},K=()=>{ie(!0)};if(!x&&!T&&(!j||$))return null;let se;if(d)se=d;else if(o){const xe=cb(o);se=xe&&bj(xe)?is(xe).body:is(null).body}const ae=!T&&x&&(!j||$)?"none":void 0,we=j?{in:T,onEnter:J,onExited:K}:void 0;return te.jsx(CR,{disablePortal:c,container:se,children:te.jsx(Cj,G({anchorEl:o,direction:p,disablePortal:c,modifiers:w,ref:r,open:j?!$:T,placement:k,popperOptions:E,popperRef:M,slotProps:q,slots:B},D,{style:G({position:"fixed",top:0,left:0,display:ae},N),TransitionProps:we,children:s}))})}),Ay={buttonClick:"buttonClick",browserAutoFill:"browserAutoFill"},Ij=e=>{const{label:t,value:r}=e;return typeof t=="string"?t:typeof r=="string"?r:String(e)};function Tj(e,t){const{open:r}=e,{context:{selectionMode:o}}=t;if(t.type===Ay.buttonClick){var s;const x=(s=e.selectedValues[0])!=null?s:yi(null,"start",t.context);return G({},e,{open:!r,highlightedValue:r?null:x})}if(t.type===Ay.browserAutoFill)return hw(t.item,e,t.context);const d=Pv(e,t);switch(t.type){case cn.keyDown:if(e.open){if(t.event.key==="Escape")return G({},d,{open:!1})}else{if(t.event.key==="ArrowDown"){var p;return G({},e,{open:!0,highlightedValue:(p=e.selectedValues[0])!=null?p:yi(null,"start",t.context)})}if(t.event.key==="ArrowUp"){var c;return G({},e,{open:!0,highlightedValue:(c=e.selectedValues[0])!=null?c:yi(null,"end",t.context)})}}break;case cn.itemClick:if(o==="single")return G({},d,{open:!1});break;case cn.blur:return G({},d,{open:!1});default:return d}return d}function Pj(e){return Array.isArray(e)?e.length===0?"":JSON.stringify(e.map(t=>t.value)):(e==null?void 0:e.value)==null?"":typeof e.value=="string"||typeof e.value=="number"?e.value:JSON.stringify(e.value)}function kj(e){const{areOptionsEqual:t,buttonRef:r,defaultOpen:o=!1,defaultValue:s,disabled:d=!1,listboxId:p,listboxRef:c,multiple:x=!1,name:w,required:T,onChange:k,onHighlightChange:E,onOpenChange:M,open:N,options:j,getOptionAsString:q=Ij,getSerializedValue:B=Pj,value:D,componentName:$="useSelect"}=e,ie=R.useRef(null),J=tn(r,ie),K=R.useRef(null),se=Eo(p);let ae;D===void 0&&s===void 0?ae=[]:s!==void 0&&(x?ae=s:ae=s==null?[]:[s]);const we=R.useMemo(()=>{if(D!==void 0)return x?D:D==null?[]:[D]},[D,x]),{subitems:xe,contextValue:ke}=kv(),Ee=R.useMemo(()=>j!=null?new Map(j.map((Oe,St)=>[Oe.value,{value:Oe.value,label:Oe.label,disabled:Oe.disabled,ref:R.createRef(),id:`${se}_${St}`}])):xe,[j,xe,se]),$e=tn(c,K),{getRootProps:Je,active:je,focusVisible:Se,rootRef:Le}=us({disabled:d,rootRef:J}),Be=R.useMemo(()=>Array.from(Ee.keys()),[Ee]),Ve=R.useCallback(Oe=>{if(t!==void 0){const St=Be.find(_t=>t(_t,Oe));return Ee.get(St)}return Ee.get(Oe)},[Ee,t,Be]),Qe=R.useCallback(Oe=>{var St;const _t=Ve(Oe);return(St=_t==null?void 0:_t.disabled)!=null?St:!1},[Ve]),st=R.useCallback(Oe=>{const St=Ve(Oe);return St?q(St):""},[Ve,q]),ct=R.useMemo(()=>({selectedValues:we,open:N}),[we,N]),Mt=R.useCallback(Oe=>{var St;return(St=Ee.get(Oe))==null?void 0:St.id},[Ee]),vt=R.useCallback((Oe,St)=>{if(x)k==null||k(Oe,St);else{var _t;k==null||k(Oe,(_t=St[0])!=null?_t:null)}},[x,k]),Dt=R.useCallback((Oe,St)=>{E==null||E(Oe,St??null)},[E]),tr=R.useCallback((Oe,St,_t)=>{if(St==="open"&&(M==null||M(_t),_t===!1&&(Oe==null?void 0:Oe.type)!=="blur")){var Ce;(Ce=ie.current)==null||Ce.focus()}},[M]),ht=R.useCallback(Oe=>{var St,_t;return Oe==null?null:(St=(_t=xe.get(Oe))==null?void 0:_t.ref.current)!=null?St:null},[xe]),Ke={getInitialState:()=>{var Oe;return{highlightedValue:null,selectedValues:(Oe=ae)!=null?Oe:[],open:o}},getItemId:Mt,controlledProps:ct,focusManagement:"DOM",getItemDomElement:ht,itemComparer:t,isItemDisabled:Qe,rootRef:$e,onChange:vt,onHighlightChange:Dt,onStateChange:tr,reducerActionContext:R.useMemo(()=>({multiple:x}),[x]),items:Be,getItemAsString:st,selectionMode:x?"multiple":"single",stateReducer:Tj,componentName:$},{dispatch:ft,getRootProps:Ct,contextValue:jt,state:{open:Gt,highlightedValue:vr,selectedValues:Cr},rootRef:Ut}=pw(Ke),Pt=R.useRef(Gt);Os(()=>{if(Gt&&vr!==null){var Oe;const St=(Oe=Ve(vr))==null?void 0:Oe.ref;if(!K.current||!(St!=null&&St.current))return;Pt.current||St.current.focus({preventScroll:!0});const _t=K.current.getBoundingClientRect(),Ce=St.current.getBoundingClientRect();Ce.top<_t.top?K.current.scrollTop-=_t.top-Ce.top:Ce.bottom>_t.bottom&&(K.current.scrollTop+=Ce.bottom-_t.bottom)}},[Gt,vr,Ve]);const sr=R.useCallback(Oe=>Ve(Oe),[Ve]),Ft=Oe=>St=>{var _t;if(Oe==null||(_t=Oe.onClick)==null||_t.call(Oe,St),!St.defaultMuiPrevented){const Ce={type:Ay.buttonClick,event:St};ft(Ce)}},_r=Oe=>St=>{var _t;(_t=Oe.onKeyDown)==null||_t.call(Oe,St),!St.defaultMuiPrevented&&(St.key==="ArrowDown"||St.key==="ArrowUp")&&(St.preventDefault(),ft({type:cn.keyDown,key:St.key,event:St}))},Ue=(Oe={})=>({onClick:Ft(Oe),onKeyDown:_r(Oe)}),xr=(Oe={})=>G({},Oe,Ue(Oe),{role:"combobox","aria-expanded":Gt,"aria-controls":se}),Er=(Oe={})=>{const St=Mi(Oe),_t=Bs(xr,Je);return G({},Oe,_t(St))},Vt=Oe=>St=>{var _t,Ce;(_t=Oe.onBlur)==null||_t.call(Oe,St),!St.defaultMuiPrevented&&((Ce=K.current)!=null&&Ce.contains(St.relatedTarget)||St.relatedTarget===ie.current)&&(St.defaultMuiPrevented=!0)},Jt=(Oe={})=>({onBlur:Vt(Oe)}),Ar=(Oe={})=>{const St=Mi(Oe),_t=Bs(Jt,Ct);return G({id:se,role:"listbox","aria-multiselectable":x?"true":void 0},Oe,_t(St))};R.useDebugValue({selectedOptions:Cr,highlightedOption:vr,open:Gt});const Br=R.useMemo(()=>G({},jt,ke),[jt,ke]);let cr;e.multiple?cr=Cr:cr=Cr.length>0?Cr[0]:null;let nr;if(x)nr=cr.map(Oe=>sr(Oe)).filter(Oe=>Oe!==void 0);else{var Kt;nr=(Kt=sr(cr))!=null?Kt:null}const lr=Oe=>St=>{var _t;if(Oe==null||(_t=Oe.onChange)==null||_t.call(Oe,St),St.defaultMuiPrevented)return;const Ce=Ee.get(St.target.value);St.target.value===""?ft({type:cn.clearSelection}):Ce!==void 0&&ft({type:Ay.browserAutoFill,item:Ce.value,event:St})};return{buttonActive:je,buttonFocusVisible:Se,buttonRef:Le,contextValue:Br,disabled:d,dispatch:ft,getButtonProps:Er,getHiddenInputProps:(Oe={})=>{const St=Mi(Oe);return G({name:w,tabIndex:-1,"aria-hidden":!0,required:T?!0:void 0,value:B(nr),style:dB},Oe,{onChange:lr(St)})},getListboxProps:Ar,getOptionMetadata:sr,listboxRef:Ut,open:Gt,options:Be,value:cr,highlightedOption:vr}}function Ej(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:s,getItemState:d,registerItem:p,totalSubitemCount:c}=t,x=R.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:s}),[o,s,d]),w=R.useMemo(()=>({getItemIndex:s,registerItem:p,totalSubitemCount:c}),[p,s,c]);return te.jsx(xf.Provider,{value:w,children:te.jsx(Ll.Provider,{value:x,children:r})})}function Aj(e){const{checked:t,defaultChecked:r,disabled:o,onBlur:s,onChange:d,onFocus:p,onFocusVisible:c,readOnly:x,required:w}=e,[T,k]=td({controlled:t,default:!!r,name:"Switch",state:"checked"}),E=ae=>we=>{var xe;we.nativeEvent.defaultPrevented||(k(we.target.checked),d==null||d(we),(xe=ae.onChange)==null||xe.call(ae,we))},{isFocusVisibleRef:M,onBlur:N,onFocus:j,ref:q}=ow(),[B,D]=R.useState(!1);o&&B&&D(!1),R.useEffect(()=>{M.current=B},[B,M]);const $=R.useRef(null),ie=ae=>we=>{var xe;$.current||($.current=we.currentTarget),j(we),M.current===!0&&(D(!0),c==null||c(we)),p==null||p(we),(xe=ae.onFocus)==null||xe.call(ae,we)},J=ae=>we=>{var xe;N(we),M.current===!1&&D(!1),s==null||s(we),(xe=ae.onBlur)==null||xe.call(ae,we)},K=tn(q,$);return{checked:T,disabled:!!o,focusVisible:B,getInputProps:(ae={})=>G({checked:t,defaultChecked:r,disabled:o,readOnly:x,ref:K,required:w,type:"checkbox",role:"switch","aria-checked":t},ae,{onChange:E(ae),onFocus:ie(ae),onBlur:J(ae)}),inputRef:K,readOnly:!!x}}function zj(e){const{value:t,defaultValue:r,onChange:o,orientation:s="horizontal",direction:d="ltr",selectionFollowsFocus:p=!1}=e,[c,x]=td({controlled:t,default:r,name:"Tabs",state:"value"}),w=R.useCallback((q,B)=>{x(B),o==null||o(q,B)},[o,x]),{subitems:T,contextValue:k}=kv(),E=R.useRef(()=>{}),M=R.useCallback(q=>{var B;return(B=T.get(q))==null?void 0:B.id},[T]),N=R.useCallback(q=>E.current(q),[]),j=R.useCallback(q=>{E.current=q},[]);return{contextValue:G({direction:d,getTabId:N,getTabPanelId:M,onSelected:w,orientation:s,registerTabIdLookup:j,selectionFollowsFocus:p,value:c},k)}}const LR=R.createContext(null);function qv(){const e=R.useContext(LR);if(e==null)throw new Error("No TabsContext provided");return e}function Rj(e){const{value:t,children:r}=e,{direction:o,getItemIndex:s,onSelected:d,orientation:p,registerItem:c,registerTabIdLookup:x,selectionFollowsFocus:w,totalSubitemCount:T,value:k,getTabId:E,getTabPanelId:M}=t,N=R.useMemo(()=>({getItemIndex:s,registerItem:c,totalSubitemCount:T}),[c,s,T]),j=R.useMemo(()=>({direction:o,getTabId:E,getTabPanelId:M,onSelected:d,orientation:p,registerTabIdLookup:x,selectionFollowsFocus:w,value:k}),[o,E,M,d,p,x,w,k]);return te.jsx(xf.Provider,{value:N,children:te.jsx(LR.Provider,{value:j,children:r})})}function Mj(e){return e.size}function Dj(e){const{value:t,id:r,rootRef:o}=e,s=qv();if(s===null)throw new Error("No TabContext provided");const{value:d,getTabId:p}=s,c=Eo(r),x=R.useRef(null),w=tn(x,o),T=R.useMemo(()=>({id:c,ref:x}),[c]),{id:k}=Ev(t??Mj,T),E=k!==d,M=k!==void 0?p(k):void 0;return{hidden:E,getRootProps:(j={})=>G({"aria-labelledby":M??void 0,hidden:E,id:c??void 0},j,{ref:w}),rootRef:w}}const $R={valueChange:"valueChange"};function Lj(e,t){if(t.type===$R.valueChange)return G({},e,{highlightedValue:t.value});const r=Pv(e,t),{context:{selectionFollowsFocus:o}}=t;if(t.type===cn.itemsChange){if(r.selectedValues.length>0)return G({},r,{highlightedValue:r.selectedValues[0]});yi(null,"reset",t.context)}return o&&r.highlightedValue!=null?G({},r,{selectedValues:[r.highlightedValue]}):r}function $j(e){var t;const{rootRef:r}=e,{direction:o="ltr",onSelected:s,orientation:d="horizontal",value:p,registerTabIdLookup:c,selectionFollowsFocus:x}=qv(),{subitems:w,contextValue:T}=kv(),k=R.useCallback(ke=>{var Ee;return(Ee=w.get(ke))==null?void 0:Ee.id},[w]);c(k);const E=R.useMemo(()=>Array.from(w.keys()),[w]),M=R.useCallback(ke=>{var Ee,$e;return ke==null?null:(Ee=($e=w.get(ke))==null?void 0:$e.ref.current)!=null?Ee:null},[w]),N=o==="rtl";let j;d==="vertical"?j="vertical":j=N?"horizontal-rtl":"horizontal-ltr";const q=R.useCallback((ke,Ee)=>{var $e;s(ke,($e=Ee[0])!=null?$e:null)},[s]),B=R.useMemo(()=>p===void 0?{}:p!=null?{selectedValues:[p]}:{selectedValues:[]},[p]),D=R.useCallback(ke=>{var Ee,$e;return(Ee=($e=w.get(ke))==null?void 0:$e.disabled)!=null?Ee:!1},[w]),{contextValue:$,dispatch:ie,getRootProps:J,state:{highlightedValue:K,selectedValues:se},rootRef:ae}=pw({controlledProps:B,disabledItemsFocusable:!x,focusManagement:"DOM",getItemDomElement:M,isItemDisabled:D,items:E,rootRef:r,onChange:q,orientation:j,reducerActionContext:R.useMemo(()=>({selectionFollowsFocus:x||!1}),[x]),selectionMode:"single",stateReducer:Lj});R.useEffect(()=>{p!==void 0&&p!=null&&ie({type:$R.valueChange,value:p})},[ie,p]);const we=(ke={})=>G({},ke,J(ke),{"aria-orientation":d==="vertical"?"vertical":void 0,role:"tablist"});return{contextValue:R.useMemo(()=>G({},T,$),[T,$]),dispatch:ie,getRootProps:we,highlightedValue:K,isRtl:N,orientation:d,rootRef:ae,selectedValue:(t=se[0])!=null?t:null}}function Oj(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:s,getItemState:d,registerItem:p,totalSubitemCount:c}=t,x=R.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:s}),[o,s,d]),w=R.useMemo(()=>({getItemIndex:s,registerItem:p,totalSubitemCount:c}),[p,s,c]);return te.jsx(xf.Provider,{value:w,children:te.jsx(Ll.Provider,{value:x,children:r})})}function Bj(e){return e.size}function Fj(e){const{value:t,rootRef:r,disabled:o=!1,id:s}=e,d=R.useRef(null),p=Eo(s),{value:c,selectionFollowsFocus:x,getTabPanelId:w}=qv(),T=R.useMemo(()=>({disabled:o,ref:d,id:p}),[o,d,p]),{id:k,index:E,totalItemCount:M}=Ev(t??Bj,T),{getRootProps:N,highlighted:j,selected:q}=fw({item:k}),{getRootProps:B,rootRef:D,active:$,focusVisible:ie,setFocusVisible:J}=us({disabled:o,focusableWhenDisabled:!x,type:"button"}),K=tn(d,r,D),se=k!==void 0?w(k):void 0;return{getRootProps:(we={})=>{const xe=Mi(we),ke=Bs(N,B);return G({},we,ke(xe),{role:"tab","aria-controls":se,"aria-selected":q,id:p,ref:K})},active:$,focusVisible:ie,highlighted:j,index:E,rootRef:K,selected:q||k===c,setFocusVisible:J,totalTabsCount:M}}function wT(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function hS(e={}){const{ignoreAccents:t=!0,ignoreCase:r=!0,limit:o,matchFrom:s="any",stringify:d,trim:p=!1}=e;return(c,{inputValue:x,getOptionLabel:w})=>{let T=p?x.trim():x;r&&(T=T.toLowerCase()),t&&(T=wT(T));const k=T?c.filter(E=>{let M=(d||w)(E);return r&&(M=M.toLowerCase()),t&&(M=wT(M)),s==="start"?M.indexOf(T)===0:M.indexOf(T)>-1}):c;return typeof o=="number"?k.slice(0,o):k}}function yg(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return-1}const Nj=hS(),ST=5,jj=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))},Vj=[];function Uj(e){const{unstable_isActiveElementInListbox:t=jj,unstable_classNamePrefix:r="Mui",autoComplete:o=!1,autoHighlight:s=!1,autoSelect:d=!1,blurOnSelect:p=!1,clearOnBlur:c=!e.freeSolo,clearOnEscape:x=!1,componentName:w="useAutocomplete",defaultValue:T=e.multiple?Vj:null,disableClearable:k=!1,disableCloseOnSelect:E=!1,disabled:M,disabledItemsFocusable:N=!1,disableListWrap:j=!1,filterOptions:q=Nj,filterSelectedOptions:B=!1,freeSolo:D=!1,getOptionDisabled:$,getOptionKey:ie,getOptionLabel:J=Ie=>{var Ae;return(Ae=Ie.label)!=null?Ae:Ie},groupBy:K,handleHomeEndKeys:se=!e.freeSolo,id:ae,includeInputInList:we=!1,inputValue:xe,isOptionEqualToValue:ke=(Ie,Ae)=>Ie===Ae,multiple:Ee=!1,onChange:$e,onClose:Je,onHighlightChange:je,onInputChange:Se,onOpen:Le,open:Be,openOnFocus:Ve=!1,options:Qe,readOnly:st=!1,selectOnFocus:ct=!e.freeSolo,value:Mt}=e,vt=Eo(ae);let Dt=J;Dt=Ie=>{const Ae=J(Ie);return typeof Ae!="string"?String(Ae):Ae};const tr=R.useRef(!1),ht=R.useRef(!0),Ke=R.useRef(null),ft=R.useRef(null),[Ct,jt]=R.useState(null),[Gt,vr]=R.useState(-1),Cr=s?0:-1,Ut=R.useRef(Cr),[Pt,sr]=td({controlled:Mt,default:T,name:w}),[Ft,_r]=td({controlled:xe,default:"",name:w,state:"inputValue"}),[Ue,xr]=R.useState(!1),Er=R.useCallback((Ie,Ae)=>{if(!(Ee?Pt.length<Ae.length:Ae!==null)&&!c)return;let ot;if(Ee)ot="";else if(Ae==null)ot="";else{const lt=Dt(Ae);ot=typeof lt=="string"?lt:""}Ft!==ot&&(_r(ot),Se&&Se(Ie,ot,"reset"))},[Dt,Ft,Ee,Se,_r,c,Pt]),[Vt,Jt]=td({controlled:Be,default:!1,name:w,state:"open"}),[Ar,Br]=R.useState(!0),cr=!Ee&&Pt!=null&&Ft===Dt(Pt),nr=Vt&&!st,Kt=nr?q(Qe.filter(Ie=>!(B&&(Ee?Pt:[Pt]).some(Ae=>Ae!==null&&ke(Ie,Ae)))),{inputValue:cr&&Ar?"":Ft,getOptionLabel:Dt}):[],lr=uB({filteredOptions:Kt,value:Pt,inputValue:Ft});R.useEffect(()=>{const Ie=Pt!==lr.value;Ue&&!Ie||D&&!Ie||Er(null,Pt)},[Pt,Er,Ue,lr.value,D]);const Wr=Vt&&Kt.length>0&&!st,Oe=vl(Ie=>{Ie===-1?Ke.current.focus():Ct.querySelector(`[data-tag-index="${Ie}"]`).focus()});R.useEffect(()=>{Ee&&Gt>Pt.length-1&&(vr(-1),Oe(-1))},[Pt,Ee,Gt,Oe]);function St(Ie,Ae){if(!ft.current||Ie<0||Ie>=Kt.length)return-1;let it=Ie;for(;;){const ot=ft.current.querySelector(`[data-option-index="${it}"]`),lt=N?!1:!ot||ot.disabled||ot.getAttribute("aria-disabled")==="true";if(ot&&ot.hasAttribute("tabindex")&&!lt)return it;if(Ae==="next"?it=(it+1)%Kt.length:it=(it-1+Kt.length)%Kt.length,it===Ie)return-1}}const _t=vl(({event:Ie,index:Ae,reason:it="auto"})=>{if(Ut.current=Ae,Ae===-1?Ke.current.removeAttribute("aria-activedescendant"):Ke.current.setAttribute("aria-activedescendant",`${vt}-option-${Ae}`),je&&je(Ie,Ae===-1?null:Kt[Ae],it),!ft.current)return;const ot=ft.current.querySelector(`[role="option"].${r}-focused`);ot&&(ot.classList.remove(`${r}-focused`),ot.classList.remove(`${r}-focusVisible`));let lt=ft.current;if(ft.current.getAttribute("role")!=="listbox"&&(lt=ft.current.parentElement.querySelector('[role="listbox"]')),!lt)return;if(Ae===-1){lt.scrollTop=0;return}const Yt=ft.current.querySelector(`[data-option-index="${Ae}"]`);if(Yt&&(Yt.classList.add(`${r}-focused`),it==="keyboard"&&Yt.classList.add(`${r}-focusVisible`),lt.scrollHeight>lt.clientHeight&&it!=="mouse"&&it!=="touch")){const ir=Yt,br=lt.clientHeight+lt.scrollTop,Hr=ir.offsetTop+ir.offsetHeight;Hr>br?lt.scrollTop=Hr-lt.clientHeight:ir.offsetTop-ir.offsetHeight*(K?1.3:0)<lt.scrollTop&&(lt.scrollTop=ir.offsetTop-ir.offsetHeight*(K?1.3:0))}}),Ce=vl(({event:Ie,diff:Ae,direction:it="next",reason:ot="auto"})=>{if(!nr)return;const Yt=St((()=>{const ir=Kt.length-1;if(Ae==="reset")return Cr;if(Ae==="start")return 0;if(Ae==="end")return ir;const br=Ut.current+Ae;return br<0?br===-1&&we?-1:j&&Ut.current!==-1||Math.abs(Ae)>1?0:ir:br>ir?br===ir+1&&we?-1:j||Math.abs(Ae)>1?ir:0:br})(),it);if(_t({index:Yt,reason:ot,event:Ie}),o&&Ae!=="reset")if(Yt===-1)Ke.current.value=Ft;else{const ir=Dt(Kt[Yt]);Ke.current.value=ir,ir.toLowerCase().indexOf(Ft.toLowerCase())===0&&Ft.length>0&&Ke.current.setSelectionRange(Ft.length,ir.length)}}),He=()=>{const Ie=(Ae,it)=>{const ot=Ae?Dt(Ae):"",lt=it?Dt(it):"";return ot===lt};if(Ut.current!==-1&&lr.filteredOptions&&lr.filteredOptions.length!==Kt.length&&lr.inputValue===Ft&&(Ee?Pt.length===lr.value.length&&lr.value.every((Ae,it)=>Dt(Pt[it])===Dt(Ae)):Ie(lr.value,Pt))){const Ae=lr.filteredOptions[Ut.current];if(Ae)return yg(Kt,it=>Dt(it)===Dt(Ae))}return-1},Ze=R.useCallback(()=>{if(!nr)return;const Ie=He();if(Ie!==-1){Ut.current=Ie;return}const Ae=Ee?Pt[0]:Pt;if(Kt.length===0||Ae==null){Ce({diff:"reset"});return}if(ft.current){if(Ae!=null){const it=Kt[Ut.current];if(Ee&&it&&yg(Pt,lt=>ke(it,lt))!==-1)return;const ot=yg(Kt,lt=>ke(lt,Ae));ot===-1?Ce({diff:"reset"}):_t({index:ot});return}if(Ut.current>=Kt.length-1){_t({index:Kt.length-1});return}_t({index:Ut.current})}},[Kt.length,Ee?!1:Pt,B,Ce,_t,nr,Ft,Ee]),wt=vl(Ie=>{iy(ft,Ie),Ie&&Ze()});R.useEffect(()=>{Ze()},[Ze]);const gt=Ie=>{Vt||(Jt(!0),Br(!0),Le&&Le(Ie))},kt=(Ie,Ae)=>{Vt&&(Jt(!1),Je&&Je(Ie,Ae))},ur=(Ie,Ae,it,ot)=>{if(Ee){if(Pt.length===Ae.length&&Pt.every((lt,Yt)=>lt===Ae[Yt]))return}else if(Pt===Ae)return;$e&&$e(Ie,Ae,it,ot),sr(Ae)},Lt=R.useRef(!1),dr=(Ie,Ae,it="selectOption",ot="options")=>{let lt=it,Yt=Ae;if(Ee){Yt=Array.isArray(Pt)?Pt.slice():[];const ir=yg(Yt,br=>ke(Ae,br));ir===-1?Yt.push(Ae):ot!=="freeSolo"&&(Yt.splice(ir,1),lt="removeOption")}Er(Ie,Yt),ur(Ie,Yt,lt,{option:Ae}),!E&&(!Ie||!Ie.ctrlKey&&!Ie.metaKey)&&kt(Ie,lt),(p===!0||p==="touch"&&Lt.current||p==="mouse"&&!Lt.current)&&Ke.current.blur()};function pe(Ie,Ae){if(Ie===-1)return-1;let it=Ie;for(;;){if(Ae==="next"&&it===Pt.length||Ae==="previous"&&it===-1)return-1;const ot=Ct.querySelector(`[data-tag-index="${it}"]`);if(!ot||!ot.hasAttribute("tabindex")||ot.disabled||ot.getAttribute("aria-disabled")==="true")it+=Ae==="next"?1:-1;else return it}}const H=(Ie,Ae)=>{if(!Ee)return;Ft===""&&kt(Ie,"toggleInput");let it=Gt;Gt===-1?Ft===""&&Ae==="previous"&&(it=Pt.length-1):(it+=Ae==="next"?1:-1,it<0&&(it=0),it===Pt.length&&(it=-1)),it=pe(it,Ae),vr(it),Oe(it)},W=Ie=>{tr.current=!0,_r(""),Se&&Se(Ie,"","clear"),ur(Ie,Ee?[]:null,"clear")},ne=Ie=>Ae=>{if(Ie.onKeyDown&&Ie.onKeyDown(Ae),!Ae.defaultMuiPrevented&&(Gt!==-1&&["ArrowLeft","ArrowRight"].indexOf(Ae.key)===-1&&(vr(-1),Oe(-1)),Ae.which!==229))switch(Ae.key){case"Home":nr&&se&&(Ae.preventDefault(),Ce({diff:"start",direction:"next",reason:"keyboard",event:Ae}));break;case"End":nr&&se&&(Ae.preventDefault(),Ce({diff:"end",direction:"previous",reason:"keyboard",event:Ae}));break;case"PageUp":Ae.preventDefault(),Ce({diff:-ST,direction:"previous",reason:"keyboard",event:Ae}),gt(Ae);break;case"PageDown":Ae.preventDefault(),Ce({diff:ST,direction:"next",reason:"keyboard",event:Ae}),gt(Ae);break;case"ArrowDown":Ae.preventDefault(),Ce({diff:1,direction:"next",reason:"keyboard",event:Ae}),gt(Ae);break;case"ArrowUp":Ae.preventDefault(),Ce({diff:-1,direction:"previous",reason:"keyboard",event:Ae}),gt(Ae);break;case"ArrowLeft":H(Ae,"previous");break;case"ArrowRight":H(Ae,"next");break;case"Enter":if(Ut.current!==-1&&nr){const it=Kt[Ut.current],ot=$?$(it):!1;if(Ae.preventDefault(),ot)return;dr(Ae,it,"selectOption"),o&&Ke.current.setSelectionRange(Ke.current.value.length,Ke.current.value.length)}else D&&Ft!==""&&cr===!1&&(Ee&&Ae.preventDefault(),dr(Ae,Ft,"createOption","freeSolo"));break;case"Escape":nr?(Ae.preventDefault(),Ae.stopPropagation(),kt(Ae,"escape")):x&&(Ft!==""||Ee&&Pt.length>0)&&(Ae.preventDefault(),Ae.stopPropagation(),W(Ae));break;case"Backspace":if(Ee&&!st&&Ft===""&&Pt.length>0){const it=Gt===-1?Pt.length-1:Gt,ot=Pt.slice();ot.splice(it,1),ur(Ae,ot,"removeOption",{option:Pt[it]})}break;case"Delete":if(Ee&&!st&&Ft===""&&Pt.length>0&&Gt!==-1){const it=Gt,ot=Pt.slice();ot.splice(it,1),ur(Ae,ot,"removeOption",{option:Pt[it]})}break}},fe=Ie=>{xr(!0),Ve&&!tr.current&&gt(Ie)},ge=Ie=>{if(t(ft)){Ke.current.focus();return}xr(!1),ht.current=!0,tr.current=!1,d&&Ut.current!==-1&&nr?dr(Ie,Kt[Ut.current],"blur"):d&&D&&Ft!==""?dr(Ie,Ft,"blur","freeSolo"):c&&Er(Ie,Pt),kt(Ie,"blur")},X=Ie=>{const Ae=Ie.target.value;Ft!==Ae&&(_r(Ae),Br(!1),Se&&Se(Ie,Ae,"input")),Ae===""?!k&&!Ee&&ur(Ie,null,"clear"):gt(Ie)},Y=Ie=>{const Ae=Number(Ie.currentTarget.getAttribute("data-option-index"));Ut.current!==Ae&&_t({event:Ie,index:Ae,reason:"mouse"})},Q=Ie=>{_t({event:Ie,index:Number(Ie.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Lt.current=!0},le=Ie=>{const Ae=Number(Ie.currentTarget.getAttribute("data-option-index"));dr(Ie,Kt[Ae],"selectOption"),Lt.current=!1},Pe=Ie=>Ae=>{const it=Pt.slice();it.splice(Ie,1),ur(Ae,it,"removeOption",{option:Pt[Ie]})},Me=Ie=>{Vt?kt(Ie,"toggleInput"):gt(Ie)},Fe=Ie=>{Ie.currentTarget.contains(Ie.target)&&Ie.target.getAttribute("id")!==vt&&Ie.preventDefault()},Ye=Ie=>{Ie.currentTarget.contains(Ie.target)&&(Ke.current.focus(),ct&&ht.current&&Ke.current.selectionEnd-Ke.current.selectionStart===0&&Ke.current.select(),ht.current=!1)},rt=Ie=>{!M&&(Ft===""||!Vt)&&Me(Ie)};let Xe=D&&Ft.length>0;Xe=Xe||(Ee?Pt.length>0:Pt!==null);let et=Kt;return K&&(et=Kt.reduce((Ie,Ae,it)=>{const ot=K(Ae);return Ie.length>0&&Ie[Ie.length-1].group===ot?Ie[Ie.length-1].options.push(Ae):Ie.push({key:it,index:it,group:ot,options:[Ae]}),Ie},[])),M&&Ue&&ge(),{getRootProps:(Ie={})=>G({"aria-owns":Wr?`${vt}-listbox`:null},Ie,{onKeyDown:ne(Ie),onMouseDown:Fe,onClick:Ye}),getInputLabelProps:()=>({id:`${vt}-label`,htmlFor:vt}),getInputProps:()=>({id:vt,value:Ft,onBlur:ge,onFocus:fe,onChange:X,onMouseDown:rt,"aria-activedescendant":nr?"":null,"aria-autocomplete":o?"both":"list","aria-controls":Wr?`${vt}-listbox`:void 0,"aria-expanded":Wr,autoComplete:"off",ref:Ke,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:M}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:W}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Me}),getTagProps:({index:Ie})=>G({key:Ie,"data-tag-index":Ie,tabIndex:-1},!st&&{onDelete:Pe(Ie)}),getListboxProps:()=>({role:"listbox",id:`${vt}-listbox`,"aria-labelledby":`${vt}-label`,ref:wt,onMouseDown:Ie=>{Ie.preventDefault()}}),getOptionProps:({index:Ie,option:Ae})=>{var it;const ot=(Ee?Pt:[Pt]).some(Yt=>Yt!=null&&ke(Ae,Yt)),lt=$?$(Ae):!1;return{key:(it=ie==null?void 0:ie(Ae))!=null?it:Dt(Ae),tabIndex:-1,role:"option",id:`${vt}-option-${Ie}`,onMouseMove:Y,onClick:le,onTouchStart:Q,"data-option-index":Ie,"aria-disabled":lt,"aria-selected":ot}},id:vt,inputValue:Ft,value:Pt,dirty:Xe,expanded:nr&&Ct,popupOpen:nr,focused:Ue||Gt!==-1,anchorEl:Ct,setAnchorEl:jt,focusedTag:Gt,groupedOptions:et}}const Hj=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],Wj=["component","slots","slotProps"],Gj=["component"];function Ot(e,t){const{className:r,elementType:o,ownerState:s,externalForwardedProps:d,getSlotOwnerState:p,internalForwardedProps:c}=t,x=er(t,Hj),{component:w,slots:T={[e]:void 0},slotProps:k={[e]:void 0}}=d,E=er(d,Wj),M=T[e]||o,N=pA(k[e],s),j=hA(G({className:r},x,{externalForwardedProps:e==="root"?E:void 0,externalSlotProps:N})),{props:{component:q},internalRef:B}=j,D=er(j.props,Gj),$=tn(B,N==null?void 0:N.ref,t.ref),ie=p?p(D):{},J=G({},s,ie),K=e==="root"?q||w:q,se=dA(M,G({},e==="root"&&!w&&!T[e]&&c,e!=="root"&&!T[e]&&c,D,K&&{as:K},{ref:$}),J);return Object.keys(ie).forEach(ae=>{delete se[ae]}),[M,se]}function qj(e){return Vr("MuiListItem",e)}const zy=Lr("MuiListItem",["root","startAction","endAction","nested","nesting","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]),Ry=R.createContext(!1),Od=R.createContext(!1),OR=R.createContext(!1),pS=R.createContext(void 0),BR=R.createContext(void 0),Zv=R.createContext(void 0),Zj=["component","className","children","nested","sticky","variant","color","startAction","endAction","role","slots","slotProps"],Kj=e=>{const{sticky:t,nested:r,nesting:o,variant:s,color:d}=e,p={root:["root",r&&"nested",o&&"nesting",t&&"sticky",d&&`color${Et(d)}`,s&&`variant${Et(s)}`],startAction:["startAction"],endAction:["endAction"]};return Dr(p,qj,{})},Xj=mt("li")(({theme:e,ownerState:t})=>{var r;return[!t.nested&&{"--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItemButton-marginBlock":"calc(-1 * var(--ListItem-paddingY))",alignItems:"center",gap:"var(--ListItem-gap)",marginInline:"var(--ListItem-marginInline)"},t.nested&&{"--NestedList-marginRight":"calc(-1 * var(--ListItem-paddingRight))","--NestedList-marginLeft":"calc(-1 * var(--ListItem-paddingLeft))","--NestedListItem-paddingLeft":"calc(var(--ListItem-paddingLeft) + var(--List-nestedInsetStart))","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItem-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))",flexDirection:"column"},G({"--unstable_actionRadius":"calc(var(--ListItem-radius) - var(--variant-borderWidth, 0px))"},t.startAction&&{"--unstable_startActionWidth":"2rem"},t.endAction&&{"--unstable_endActionWidth":"2.5rem"},{boxSizing:"border-box",borderRadius:"var(--ListItem-radius)",display:"var(--_ListItem-display)","&:not([hidden])":{"--_ListItem-display":"var(--_List-markerDisplay, flex)"},flex:"none",listStyleType:"var(--_List-markerType, disc)",position:"relative",paddingBlockStart:t.nested?0:"var(--ListItem-paddingY)",paddingBlockEnd:t.nested?0:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)"},t["data-first-child"]===void 0&&G({},t.row?{marginInlineStart:"var(--List-gap)"}:{marginBlockStart:"var(--List-gap)"}),t.row&&t.wrap&&{marginInlineStart:"var(--List-gap)",marginBlockStart:"var(--List-gap)"},{minBlockSize:"var(--ListItem-minHeight)"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:`var(--ListItem-stickyBackground, ${e.vars.palette.background.body})`},{[`.${zy.nested} > &`]:{"--_ListItem-display":"flex"}}),(r=e.variants[t.variant])==null?void 0:r[t.color]]}),Jj=mt(Xj,{name:"JoyListItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Yj=mt("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",left:0,transform:"translate(var(--ListItem-startActionTranslateX), -50%)",zIndex:1})),Qj=mt("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",right:0,transform:"translate(var(--ListItem-endActionTranslateX), -50%)"})),Oc=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyListItem"}),s=R.useContext(Zv),d=R.useContext(pS),p=R.useContext(Od),c=R.useContext(OR),x=R.useContext(Ry),{component:w,className:T,children:k,nested:E=!1,sticky:M=!1,variant:N="plain",color:j="neutral",startAction:q,endAction:B,role:D,slots:$={},slotProps:ie={}}=o,J=er(o,Zj),[K,se]=R.useState(""),[ae,we]=(d==null?void 0:d.split(":"))||["",""],xe=w||(ae&&!ae.match(/^(ul|ol|menu)$/)?"div":void 0);let ke=s==="menu"?"none":void 0;d&&(ke={menu:"none",menubar:"none",group:"presentation"}[we]),D&&(ke=D);const Ee=G({},o,{sticky:M,startAction:q,endAction:B,row:p,wrap:c,variant:N,color:j,nesting:x,nested:E,component:xe,role:ke}),$e=Kj(Ee),Je=G({},J,{component:xe,slots:$,slotProps:ie}),[je,Se]=Ot("root",{additionalProps:{role:ke},ref:r,className:ii($e.root,T),elementType:Jj,externalForwardedProps:Je,ownerState:Ee}),[Le,Be]=Ot("startAction",{className:$e.startAction,elementType:Yj,externalForwardedProps:Je,ownerState:Ee}),[Ve,Qe]=Ot("endAction",{className:$e.endAction,elementType:Qj,externalForwardedProps:Je,ownerState:Ee});return te.jsx(BR.Provider,{value:se,children:te.jsx(Ry.Provider,{value:E?K||!0:!1,children:te.jsxs(je,G({},Se,{children:[q&&te.jsx(Le,G({},Be,{children:q})),R.Children.map(k,(st,ct)=>{var Mt;return R.isValidElement(st)?R.cloneElement(st,G({},ct===0&&{"data-first-child":""},nw(st,["ListItem"])&&{component:((Mt=st.props)==null?void 0:Mt.component)||"div"})):st}),B&&te.jsx(Ve,G({},Qe,{children:B}))]}))})})});Oc.muiName="ListItem";const Kv={"--NestedList-marginRight":"0px","--NestedList-marginLeft":"0px","--NestedListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px"};function Pf(e){const{children:t,nested:r,row:o=!1,wrap:s=!1}=e,d=te.jsx(Od.Provider,{value:o,children:te.jsx(OR.Provider,{value:s,children:R.Children.map(t,(p,c)=>R.isValidElement(p)?R.cloneElement(p,G({},c===0&&{"data-first-child":""},c===R.Children.count(t)-1&&{"data-last-child":""})):p)})});return r===void 0?d:te.jsx(Ry.Provider,{value:r,children:d})}const Bd=({theme:e,ownerState:t},r)=>{let o={};function s(d){if(typeof d=="function"){const p=d(e);s(p)}else Array.isArray(d)?d.forEach(p=>{typeof p!="boolean"&&s(p)}):typeof d=="object"&&(o=G({},o,d))}return t.sx&&(s(t.sx),r.forEach(d=>{const p=o[d];if(typeof p=="string"||typeof p=="number")if(d==="borderRadius")if(typeof p=="number")o[d]=`${p}px`;else{var c;o[d]=((c=e.vars)==null?void 0:c.radius[p])||p}else["p","padding","m","margin"].indexOf(d)!==-1&&typeof p=="number"?o[d]=e.spacing(p):o[d]=p;else typeof p=="function"?o[d]=p(e):o[d]=void 0})),o};function eV(e){return Vr("MuiList",e)}const tV=Lr("MuiList",["root","nesting","scoped","sizeSm","sizeMd","sizeLg","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","horizontal","vertical"]),rV=R.createContext(void 0),nV=["component","className","children","size","orientation","wrap","variant","color","role","slots","slotProps"],iV=e=>{const{variant:t,color:r,size:o,nesting:s,orientation:d,instanceSize:p}=e,c={root:["root",d,t&&`variant${Et(t)}`,r&&`color${Et(r)}`,!p&&!s&&o&&`size${Et(o)}`,p&&`size${Et(p)}`,s&&"nesting"]};return Dr(c,eV,{})},kf=mt("ul")(({theme:e,ownerState:t})=>{var r;const{p:o,padding:s,borderRadius:d}=Bd({theme:e,ownerState:t},["p","padding","borderRadius"]);function p(c){return c==="sm"?{"--ListDivider-gap":"0.25rem","--ListItem-minHeight":"2rem","--ListItem-paddingY":"3px","--ListItem-paddingX":t.marker?"3px":"0.5rem","--ListItem-gap":"0.5rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.5rem":"2rem","--Icon-fontSize":e.vars.fontSize.lg}:c==="md"?{"--ListDivider-gap":"0.375rem","--ListItem-minHeight":"2.25rem","--ListItem-paddingY":"0.25rem","--ListItem-paddingX":t.marker?"0.25rem":"0.75rem","--ListItem-gap":"0.625rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.75rem":"2.5rem","--Icon-fontSize":e.vars.fontSize.xl}:c==="lg"?{"--ListDivider-gap":"0.5rem","--ListItem-minHeight":"2.75rem","--ListItem-paddingY":"0.375rem","--ListItem-paddingX":t.marker?"0.5rem":"1rem","--ListItem-gap":"0.75rem","--ListItemDecorator-size":t.orientation==="horizontal"?"2.25rem":"3rem","--Icon-fontSize":e.vars.fontSize.xl2}:{}}return[t.nesting&&G({},p(t.instanceSize),{"--ListItem-paddingRight":"var(--ListItem-paddingX)","--ListItem-paddingLeft":"var(--NestedListItem-paddingLeft)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px",padding:0},t.marker&&{paddingInlineStart:"calc(3ch - var(--_List-markerDeduct, 0px))"},{marginInlineStart:"var(--NestedList-marginLeft)",marginInlineEnd:"var(--NestedList-marginRight)",marginBlockStart:"var(--List-gap)",marginBlockEnd:"initial"}),!t.nesting&&G({},p(t.size),{"--List-gap":"0px","--List-nestedInsetStart":"0px","--ListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItem-paddingRight":"var(--ListItem-paddingX)"},t.marker&&{"--_List-markerDeduct":"1ch"},{"--unstable_List-childRadius":"calc(max(var(--List-radius) - var(--List-padding), min(var(--List-padding) / 2, var(--List-radius) / 2)) - var(--variant-borderWidth, 0px))","--ListItem-radius":"var(--unstable_List-childRadius)","--ListItem-startActionTranslateX":"calc(0.5 * var(--ListItem-paddingLeft))","--ListItem-endActionTranslateX":"calc(-0.5 * var(--ListItem-paddingRight))",margin:"initial"},e.typography[`body-${t.size}`],t.orientation==="horizontal"?G({},t.wrap?{padding:"var(--List-padding)",marginInlineStart:"calc(-1 * var(--List-gap))",marginBlockStart:"calc(-1 * var(--List-gap))"}:{paddingInline:"var(--List-padding, var(--ListDivider-gap))",paddingBlock:"var(--List-padding)"}):{paddingBlock:"var(--List-padding, var(--ListDivider-gap))",paddingInline:"var(--List-padding)"},t.marker&&{paddingInlineStart:"3ch"}),G({boxSizing:"border-box",borderRadius:"var(--List-radius)",listStyle:"none",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},t.wrap&&{flexWrap:"wrap"},t.marker&&{"--_List-markerDisplay":"list-item","--_List-markerType":t.marker,lineHeight:"calc(var(--ListItem-minHeight) - 2 * var(--ListItem-paddingY))"},{flexGrow:1,position:"relative"},(r=e.variants[t.variant])==null?void 0:r[t.color],{"--unstable_List-borderWidth":"var(--variant-borderWidth, 0px)"},d!==void 0&&{"--List-radius":d},o!==void 0&&{"--List-padding":o},s!==void 0&&{"--List-padding":s})]}),oV=mt(kf,{name:"JoyList",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Ef=R.forwardRef(function(t,r){var o;const s=R.useContext(Ry),d=R.useContext(Zv),p=R.useContext(rV),c=Ur({props:t,name:"JoyList"}),{component:x,className:w,children:T,size:k,orientation:E="vertical",wrap:M=!1,variant:N="plain",color:j="neutral",role:q,slots:B={},slotProps:D={}}=c,$=er(c,nV),ie=k||((o=t.size)!=null?o:"md");let J;d&&(J="group"),p&&(J="presentation"),q&&(J=q);const K=G({},c,{instanceSize:t.size,size:ie,nesting:s,orientation:E,wrap:M,variant:N,color:j,role:J}),se=iV(K),ae=G({},$,{component:x,slots:B,slotProps:D}),[we,xe]=Ot("root",{ref:r,className:ii(se.root,w),elementType:oV,externalForwardedProps:ae,ownerState:K,additionalProps:{as:x,role:J,"aria-labelledby":typeof s=="string"?s:void 0}});return te.jsx(we,G({},xe,{children:te.jsx(pS.Provider,{value:`${typeof x=="string"?x:""}:${J||""}`,children:te.jsx(Pf,{row:E==="horizontal",wrap:M,children:T})})}))}),Ug=Lr("MuiListItemButton",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","variantPlain","variantSoft","variantOutlined","variantSolid"]),fS=R.createContext("horizontal"),Af=mt("div")(({theme:e,ownerState:t})=>{var r,o,s,d,p,c;return G({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",font:"inherit",display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"stretch",gap:"var(--ListItem-gap)"},t.orientation==="vertical"&&{flexDirection:"column",justifyContent:"center"},{textAlign:"initial",textDecoration:"initial",backgroundColor:"initial",cursor:"pointer",marginInline:"var(--ListItemButton-marginInline)",marginBlock:"var(--ListItemButton-marginBlock)"},t["data-first-child"]===void 0&&{marginInlineStart:t.row?"var(--List-gap)":void 0,marginBlockStart:t.row?void 0:"var(--List-gap)"},{paddingBlock:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px))",paddingInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItem-startActionWidth, var(--unstable_startActionWidth, 0px)))",paddingInlineEnd:"calc(var(--ListItem-paddingRight) + var(--ListItem-endActionWidth, var(--unstable_endActionWidth, 0px)))",minBlockSize:"var(--ListItem-minHeight)",border:"1px solid transparent",borderRadius:"var(--ListItem-radius)",flex:"var(--unstable_ListItem-flex, none)",fontSize:"inherit",lineHeight:"inherit",minInlineSize:0,[e.focus.selector]:G({},e.focus.default,{zIndex:1})},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:active":(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color],[`.${zy.root} > &`]:{"--unstable_ListItem-flex":"1 0 0%"},[`&.${Ug.selected}`]:G({},(s=e.variants[`${t.variant}Active`])==null?void 0:s[t.color],{"--Icon-color":"currentColor"}),[`&:not(.${Ug.selected}, [aria-selected="true"])`]:{"&:hover":(d=e.variants[`${t.variant}Hover`])==null?void 0:d[t.color],"&:active":(p=e.variants[`${t.variant}Active`])==null?void 0:p[t.color]},[`&.${Ug.disabled}`]:G({},(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color])})});mt(Af,{name:"JoyListItemButton",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>G({},!e.row&&{[`&.${Ug.selected}`]:{fontWeight:t.vars.fontWeight.md}}));function aV(e){return Vr("MuiSvgIcon",e)}Lr("MuiSvgIcon",["root","colorInherit","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","fontSizeInherit","fontSizeXs","fontSizeSm","fontSizeMd","fontSizeLg","fontSizeXl","fontSizeXl2","fontSizeXl3","fontSizeXl4","sizeSm","sizeMd","sizeLg"]);const sV=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox","size","slots","slotProps"],lV=e=>{const{color:t,size:r,fontSize:o}=e,s={root:["root",t&&t!=="inherit"&&`color${Et(t)}`,r&&`size${Et(r)}`,o&&`fontSize${Et(o)}`]};return Dr(s,aV,{})},CT={sm:"xl",md:"xl2",lg:"xl3"},cV=mt("svg",{name:"JoySvgIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return G({},t.instanceSize&&{"--Icon-fontSize":e.vars.fontSize[CT[t.instanceSize]]},t.instanceFontSize&&t.instanceFontSize!=="inherit"&&{"--Icon-fontSize":e.vars.fontSize[t.instanceFontSize]},{userSelect:"none",margin:"var(--Icon-margin)",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,fontSize:`var(--Icon-fontSize, ${e.vars.fontSize[CT[t.size]]||"unset"})`},t.fontSize&&t.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${e.fontSize[t.fontSize]})`},!t.htmlColor&&G({color:`var(--Icon-color, ${e.vars.palette.text.icon})`},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&e.vars.palette[t.color]&&{color:`rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1)`}))}),IT=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoySvgIcon"}),{children:s,className:d,color:p,component:c="svg",fontSize:x,htmlColor:w,inheritViewBox:T=!1,titleAccess:k,viewBox:E="0 0 24 24",size:M="md",slots:N={},slotProps:j={}}=o,q=er(o,sV),B=R.isValidElement(s)&&s.type==="svg",D=G({},o,{color:p,component:c,size:M,instanceSize:t.size,fontSize:x,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:E,hasSvgAsChild:B}),$=lV(D),ie=G({},q,{component:c,slots:N,slotProps:j}),[J,K]=Ot("root",{ref:r,className:ii($.root,d),elementType:cV,externalForwardedProps:ie,ownerState:D,additionalProps:G({color:w,focusable:!1},k&&{role:"img"},!k&&{"aria-hidden":!0},!T&&{viewBox:E},B&&s.props)});return te.jsxs(J,G({},K,{children:[B?s.props.children:s,k?te.jsx("title",{children:k}):null]}))});function Fd(e,t){function r(o,s){return te.jsx(IT,G({"data-testid":`${t}Icon`,ref:s},o,{children:e}))}return r.muiName=IT.muiName,R.memo(R.forwardRef(r))}const mS=e=>t=>`--${e?`${e}-`:""}${t.replace(/^--/,"")}`,Sd="data-skip-inverted-colors",FR=`& :not([${Sd}], [${Sd}] *)`,NR=e=>{var t,r,o,s,d,p,c,x,w,T,k,E,M,N,j,q,B,D,$,ie,J,K;const se=mS(e.cssVarPrefix);return{"--variant-plainColor":"var(--variant-plainColor) !important","--variant-plainHoverColor":"var(--variant-plainHoverColor) !important","--variant-plainHoverBg":"var(--variant-plainHoverBg) !important","--variant-plainActiveBg":"var(--variant-plainActiveBg) !important","--variant-plainDisabledColor":"var(--variant-plainDisabledColor) !important","--variant-outlinedColor":"var(--variant-outlinedColor) !important","--variant-outlinedBorder":"var(--variant-outlinedBorder) !important","--variant-outlinedHoverColor":"var(--variant-outlinedHoverColor) !important","--variant-outlinedHoverBorder":"var(--variant-outlinedHoverBorder) !important","--variant-outlinedHoverBg":"var(--variant-outlinedHoverBg) !important","--variant-outlinedActiveBg":"var(--variant-outlinedActiveBg) !important","--variant-outlinedDisabledColor":"var(--variant-outlinedDisabledColor) !important","--variant-outlinedDisabledBorder":"var(--variant-outlinedDisabledBorder) !important","--variant-softColor":"var(--variant-softColor) !important","--variant-softHoverColor":"var(--variant-softHoverColor) !important","--variant-softBg":"var(--variant-softBg) !important","--variant-softHoverBg":"var(--variant-softHoverBg) !important","--variant-softActiveBg":"var(--variant-softActiveBg) !important","--variant-softActiveColor":"var(--variant-softActiveColor) !important","--variant-softDisabledColor":"var(--variant-softDisabledColor) !important","--variant-softDisabledBg":"var(--variant-softDisabledBg) !important","--variant-solidColor":"var(--variant-solidColor) !important","--variant-solidBg":"var(--variant-solidBg) !important","--variant-solidHoverBg":"var(--variant-solidHoverBg) !important","--variant-solidActiveBg":"var(--variant-solidActiveBg) !important","--variant-solidDisabledColor":"var(--variant-solidDisabledColor) !important","--variant-solidDisabledBg":"var(--variant-solidDisabledBg) !important","--Badge-ringColor":"var(--Badge-ringColor) !important",colorScheme:"unset",[e.getColorSchemeSelector("light")]:{[se("--palette-focusVisible")]:`${(t=e.colorSchemes.light)==null?void 0:t.palette.focusVisible} !important`,[se("--palette-background-body")]:`${(r=e.colorSchemes.light)==null?void 0:r.palette.background.body} !important`,[se("--palette-background-surface")]:`${(o=e.colorSchemes.light)==null?void 0:o.palette.background.surface} !important`,[se("--palette-background-popup")]:`${(s=e.colorSchemes.light)==null?void 0:s.palette.background.popup} !important`,[se("--palette-background-level1")]:`${(d=e.colorSchemes.light)==null?void 0:d.palette.background.level1} !important`,[se("--palette-background-level2")]:`${(p=e.colorSchemes.light)==null?void 0:p.palette.background.level2} !important`,[se("--palette-background-level3")]:`${(c=e.colorSchemes.light)==null?void 0:c.palette.background.level3} !important`,[se("--palette-text-primary")]:`${(x=e.colorSchemes.light)==null?void 0:x.palette.text.primary} !important`,[se("--palette-text-secondary")]:`${(w=e.colorSchemes.light)==null?void 0:w.palette.text.secondary} !important`,[se("--palette-text-tertiary")]:`${(T=e.colorSchemes.light)==null?void 0:T.palette.text.tertiary} !important`,[se("--palette-divider")]:`${(k=e.colorSchemes.light)==null?void 0:k.palette.divider} !important`},[e.getColorSchemeSelector("dark")]:{[se("--palette-focusVisible")]:`${(E=e.colorSchemes.dark)==null?void 0:E.palette.focusVisible} !important`,[se("--palette-background-body")]:`${(M=e.colorSchemes.dark)==null?void 0:M.palette.background.body} !important`,[se("--palette-background-surface")]:`${(N=e.colorSchemes.dark)==null?void 0:N.palette.background.surface} !important`,[se("--palette-background-popup")]:`${(j=e.colorSchemes.dark)==null?void 0:j.palette.background.popup} !important`,[se("--palette-background-level1")]:`${(q=e.colorSchemes.dark)==null?void 0:q.palette.background.level1} !important`,[se("--palette-background-level2")]:`${(B=e.colorSchemes.dark)==null?void 0:B.palette.background.level2} !important`,[se("--palette-background-level3")]:`${(D=e.colorSchemes.dark)==null?void 0:D.palette.background.level3} !important`,[se("--palette-text-primary")]:`${($=e.colorSchemes.dark)==null?void 0:$.palette.text.primary} !important`,[se("--palette-text-secondary")]:`${(ie=e.colorSchemes.dark)==null?void 0:ie.palette.text.secondary} !important`,[se("--palette-text-tertiary")]:`${(J=e.colorSchemes.dark)==null?void 0:J.palette.text.tertiary} !important`,[se("--palette-divider")]:`${(K=e.colorSchemes.dark)==null?void 0:K.palette.divider} !important`}}};function uV(e){return e.theme!==void 0}const Xv=e=>t=>{const r=uV(t)?t.theme:t,o=uw(r.cssVarPrefix),s=mS(r.cssVarPrefix),d=p=>{const c=p.split("-");return o(p,r.palette[c[1]][c[2]])};return{[FR]:{"--Badge-ringColor":d(`palette-${e}-solidBg`),"--Icon-color":"currentColor",[`${r.getColorSchemeSelector("light")}, ${r.getColorSchemeSelector("dark")}`]:{colorScheme:"dark",[s("--palette-focusVisible")]:d(`palette-${e}-200`),[s("--palette-background-body")]:"rgba(0 0 0 / 0.1)",[s("--palette-background-surface")]:"rgba(0 0 0 / 0.06)",[s("--palette-background-popup")]:d(`palette-${e}-700`),[s("--palette-background-level1")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.2)`,[s("--palette-background-level2")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.36)`,[s("--palette-background-level3")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.6)`,[s("--palette-text-primary")]:d("palette-common-white"),[s("--palette-text-secondary")]:d(`palette-${e}-200`),[s("--palette-text-tertiary")]:d(`palette-${e}-300`),[s("--palette-text-icon")]:d(`palette-${e}-200`),[s("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainColor":d(`palette-${e}-50`),"--variant-plainHoverColor":"#fff","--variant-plainHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedColor":d(`palette-${e}-50`),"--variant-outlinedBorder":`rgba(${d(`palette-${e}-lightChannel`)} / 0.5)`,"--variant-outlinedHoverColor":"#fff","--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":"rgba(255 255 255 / 0.2)","--variant-softColor":d("palette-common-white"),"--variant-softHoverColor":d("palette-common-white"),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.24)`,"--variant-softHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.36)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.16)`,"--variant-softActiveColor":"#fff","--variant-softDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`,"--variant-solidColor":d(`palette-${e}-${e==="neutral"?"600":"500"}`),"--variant-solidBg":d("palette-common-white"),"--variant-solidHoverBg":d("palette-common-white"),"--variant-solidActiveBg":d(`palette-${e}-100`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`}},[`&, & [${Sd}]`]:NR(r)}},Jv=e=>t=>{const{theme:r=t}=t,o=uw(r.cssVarPrefix),s=mS(r.cssVarPrefix),d=p=>{const c=p.split("-");return o(p,r.palette[c[1]][c[2]])};return{[FR]:{"--Badge-ringColor":d(`palette-${e}-softBg`),"--Icon-color":"currentColor",[r.getColorSchemeSelector("dark")]:{[s("--palette-focusVisible")]:d(`palette-${e}-300`),[s("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[s("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[s("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[s("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,[s("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,[s("--palette-text-primary")]:d(`palette-${e}-100`),[s("--palette-text-secondary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,[s("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[s("--palette-text-icon")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[s("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.2)`,"--variant-plainColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-plainHoverColor":d(`palette-${e}-50`),"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-outlinedHoverColor":d(`palette-${e}-50`),"--variant-outlinedBg":"initial","--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverBorder":d(`palette-${e}-600`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,"--variant-softColor":d(`palette-${e}-200`),"--variant-softBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-softHoverColor":"#fff","--variant-softHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-solidColor":"#fff","--variant-solidBg":d(`palette-${e}-500`),"--variant-solidHoverColor":"#fff","--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`},[r.getColorSchemeSelector("light")]:{[s("--palette-focusVisible")]:d(`palette-${e}-500`),[s("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[s("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[s("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[s("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,[s("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,[s("--palette-text-primary")]:d(`palette-${e}-700`),[s("--palette-text-secondary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,[s("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.68)`,[s("--palette-text-icon")]:d(`palette-${e}-500`),[s("--palette-divider")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainColor":`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,"--variant-plainHoverColor":`rgba(${d(`palette-${e}-darkChannel`)} / 1)`,"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-mainChannel`)} / 1)`,"--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverColor":d(`palette-${e}-600`),"--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-softColor":d(`palette-${e}-600`),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.8)`,"--variant-softHoverColor":d(`palette-${e}-700`),"--variant-softHoverBg":d(`palette-${e}-200`),"--variant-softActiveBg":d(`palette-${e}-300`),"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,"--variant-solidColor":d("palette-common-white"),"--variant-solidBg":d(`palette-${e}-${e==="neutral"?"700":"500"}`),"--variant-solidHoverColor":d("palette-common-white"),"--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`}},[`&, & [${Sd}]`]:NR(r)}},jR=Fd(te.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),dV=Fd(te.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),VR=R.createContext(void 0);function gc(e,t){let r=t,o=e;return e==="outlined"&&(r="neutral",o="plain"),e==="plain"&&(r="neutral"),{variant:o,color:r}}function Yv(e,t,r=!1){const o=R.useContext(VR),[s,d]=typeof o=="string"?o.split(":"):[],p=gc(s||void 0,d||void 0);return p.variant=e||p.variant,p.color=t||(r?d:p.color),p}function Qv({children:e,color:t,variant:r}){return te.jsx(VR.Provider,{value:`${r||""}:${t||""}`,children:e})}function hV(e){return Vr("MuiIconButton",e)}Lr("MuiIconButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","loading","loadingIndicator"]);const gS=R.createContext({}),UR=R.createContext(void 0);function pV(e){return Vr("MuiCircularProgress",e)}Lr("MuiCircularProgress",["root","determinate","svg","track","progress","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);let fV=e=>e,TT;const mV=["color","backgroundColor"],gV=["children","className","color","size","variant","thickness","determinate","value","component","slots","slotProps"],yV=WE({"0%":{transform:"rotate(-90deg)"},"100%":{transform:"rotate(270deg)"}}),vV=e=>{const{determinate:t,color:r,variant:o,size:s}=e,d={root:["root",t&&"determinate",r&&`color${Et(r)}`,o&&`variant${Et(o)}`,s&&`size${Et(s)}`],svg:["svg"],track:["track"],progress:["progress"]};return Dr(d,pV,{})};function Tu(e,t){return`var(--CircularProgress-${e}Thickness, var(--CircularProgress-thickness, ${t}))`}const _V=mt("span",{name:"JoyCircularProgress",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,s,d;const p=((r=t.variants[e.variant])==null?void 0:r[e.color])||{},{color:c,backgroundColor:x}=p,w=er(p,mV);return G({"--Icon-fontSize":"calc(0.4 * var(--_root-size))","--CircularProgress-trackColor":x,"--CircularProgress-progressColor":c,"--CircularProgress-percent":e.value,"--CircularProgress-linecap":"round"},e.size==="sm"&&{"--_root-size":"var(--CircularProgress-size, 24px)","--_track-thickness":Tu("track","3px"),"--_progress-thickness":Tu("progress","3px")},e.instanceSize==="sm"&&{"--CircularProgress-size":"24px"},e.size==="md"&&{"--_track-thickness":Tu("track","6px"),"--_progress-thickness":Tu("progress","6px"),"--_root-size":"var(--CircularProgress-size, 40px)"},e.instanceSize==="md"&&{"--CircularProgress-size":"40px"},e.size==="lg"&&{"--_track-thickness":Tu("track","8px"),"--_progress-thickness":Tu("progress","8px"),"--_root-size":"var(--CircularProgress-size, 64px)"},e.instanceSize==="lg"&&{"--CircularProgress-size":"64px"},e.thickness&&{"--_track-thickness":`${e.thickness}px`,"--_progress-thickness":`${e.thickness}px`},{"--_thickness-diff":"calc(var(--_track-thickness) - var(--_progress-thickness))","--_inner-size":"calc(var(--_root-size) - 2 * var(--variant-borderWidth, 0px))","--_outlined-inset":"max(var(--_track-thickness), var(--_progress-thickness))",width:"var(--_root-size)",height:"var(--_root-size)",borderRadius:"var(--_root-size)",margin:"var(--CircularProgress-margin)",boxSizing:"border-box",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0,position:"relative",color:c},e.children&&{fontFamily:t.vars.fontFamily.body,fontWeight:t.vars.fontWeight.md,fontSize:"calc(0.2 * var(--_root-size))"},w,e.variant==="outlined"&&{"&::before":G({content:'""',display:"block",position:"absolute",borderRadius:"inherit",top:"var(--_outlined-inset)",left:"var(--_outlined-inset)",right:"var(--_outlined-inset)",bottom:"var(--_outlined-inset)"},w)},e.variant==="soft"&&{"--CircularProgress-trackColor":t.variants.soft.neutral.backgroundColor,"--CircularProgress-progressColor":(o=t.variants.solid)==null?void 0:o[e.color].backgroundColor},e.variant==="solid"&&{"--CircularProgress-trackColor":(s=t.variants.softHover)==null?void 0:s[e.color].backgroundColor,"--CircularProgress-progressColor":(d=t.variants.solid)==null?void 0:d[e.color].backgroundColor})}),xV=mt("svg",{name:"JoyCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({width:"inherit",height:"inherit",display:"inherit",boxSizing:"inherit",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))"}),bV=mt("circle",{name:"JoyCircularProgress",slot:"track",overridesResolver:(e,t)=>t.track})({cx:"50%",cy:"50%",r:"calc(var(--_inner-size) / 2 - var(--_track-thickness) / 2 + min(0px, var(--_thickness-diff) / 2))",fill:"transparent",strokeWidth:"var(--_track-thickness)",stroke:"var(--CircularProgress-trackColor)"}),wV=mt("circle",{name:"JoyCircularProgress",slot:"progress",overridesResolver:(e,t)=>t.progress})({"--_progress-radius":"calc(var(--_inner-size) / 2 - var(--_progress-thickness) / 2 - max(0px, var(--_thickness-diff) / 2))","--_progress-length":"calc(2 * 3.1415926535 * var(--_progress-radius))",cx:"50%",cy:"50%",r:"var(--_progress-radius)",fill:"transparent",strokeWidth:"var(--_progress-thickness)",stroke:"var(--CircularProgress-progressColor)",strokeLinecap:"var(--CircularProgress-linecap, round)",strokeDasharray:"var(--_progress-length)",strokeDashoffset:"calc(var(--_progress-length) - var(--CircularProgress-percent) * var(--_progress-length) / 100)",transformOrigin:"center",transform:"rotate(-90deg)"},({ownerState:e})=>!e.determinate&&Gb(TT||(TT=fV`
      animation: var(--CircularProgress-circulation, 0.8s linear 0s infinite normal none running)
        ${0};
    `),yV)),yS=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyCircularProgress"}),{children:s,className:d,color:p="primary",size:c="md",variant:x="soft",thickness:w,determinate:T=!1,value:k=T?0:25,component:E,slots:M={},slotProps:N={}}=o,j=er(o,gV),q=G({},o,{color:p,size:c,variant:x,thickness:w,value:k,determinate:T,instanceSize:t.size}),B=vV(q),D=G({},j,{component:E,slots:M,slotProps:N}),[$,ie]=Ot("root",{ref:r,className:ii(B.root,d),elementType:_V,externalForwardedProps:D,ownerState:q,additionalProps:G({role:"progressbar",style:{"--CircularProgress-percent":k}},k&&T&&{"aria-valuenow":Math.round(typeof k=="number"?k:Number(k||0))})}),[J,K]=Ot("svg",{className:B.svg,elementType:xV,externalForwardedProps:D,ownerState:q}),[se,ae]=Ot("track",{className:B.track,elementType:bV,externalForwardedProps:D,ownerState:q}),[we,xe]=Ot("progress",{className:B.progress,elementType:wV,externalForwardedProps:D,ownerState:q});return te.jsxs($,G({},ie,{children:[te.jsxs(J,G({},K,{children:[te.jsx(se,G({},ae)),te.jsx(we,G({},xe))]})),s]}))}),SV=["children","action","component","color","disabled","variant","loading","loadingIndicator","size","slots","slotProps"],CV=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:s,size:d,variant:p,loading:c}=e,x={root:["root",r&&"disabled",o&&"focusVisible",p&&`variant${Et(p)}`,t&&`color${Et(t)}`,d&&`size${Et(d)}`,c&&"loading"],loadingIndicator:["loadingIndicator"]},w=Dr(x,hV,{});return o&&s&&(w.root+=` ${s}`),w},zf=mt("button")(({theme:e,ownerState:t})=>{var r,o,s,d;return[G({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.instanceSize&&{"--IconButton-size":{sm:"2rem",md:"2.25rem",lg:"2.75rem"}[t.instanceSize]},t.size==="sm"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.6)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px"},t.size==="md"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.25rem) / 1.5)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2.25rem)",minHeight:"var(--IconButton-size, 2.25rem)",fontSize:e.vars.fontSize.md,paddingInline:"0.25rem"},t.size==="lg"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.75rem) / 1.571)","--CircularProgress-size":"28px","--CircularProgress-thickness":"4px",minWidth:"var(--IconButton-size, 2.75rem)",minHeight:"var(--IconButton-size, 2.75rem)",fontSize:e.vars.fontSize.lg,paddingInline:"0.375rem"},{WebkitTapHighlightColor:"transparent",paddingBlock:0,fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.md,margin:"var(--IconButton-margin)",borderRadius:`var(--IconButton-radius, ${e.vars.radius.sm})`,border:"none",boxSizing:"border-box",backgroundColor:"transparent",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",[e.focus.selector]:G({"--Icon-color":"currentColor"},e.focus.default)}),G({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":G({"--Icon-color":"currentColor"},(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color])},'&:active, &[aria-pressed="true"]':G({"--Icon-color":"currentColor"},(s=e.variants[`${t.variant}Active`])==null?void 0:s[t.color]),"&:disabled":(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]})]}),IV=mt(zf,{name:"JoyIconButton",slot:"Root",overridesResolver:(e,t)=>t.root})({}),TV=mt("span",{name:"JoyIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e,ownerState:t})=>{var r,o;return G({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color})}),e0=R.forwardRef(function(t,r){var o;const s=Ur({props:t,name:"JoyIconButton"}),{children:d,action:p,component:c="button",color:x="neutral",disabled:w,variant:T="plain",loading:k=!1,loadingIndicator:E,size:M="md",slots:N={},slotProps:j={}}=s,q=er(s,SV),B=R.useContext(gS),D=R.useContext(UR),$=t.variant||B.variant||T,ie=t.size||B.size||M,J=t.color||B.color||x,K=(o=t.loading||t.disabled)!=null?o:B.disabled||k||w,se=R.useRef(null),ae=tn(se,r),{focusVisible:we,setFocusVisible:xe,getRootProps:ke}=us(G({},s,{disabled:K,rootRef:ae})),Ee=E??te.jsx(yS,{color:J,thickness:{sm:2,md:3,lg:4}[ie]||3});R.useImperativeHandle(p,()=>({focusVisible:()=>{var ct;xe(!0),(ct=se.current)==null||ct.focus()}}),[xe]);const $e=G({},s,{component:c,color:J,disabled:K,variant:$,loading:k,size:ie,focusVisible:we,instanceSize:t.size}),Je=CV($e),je=ct=>{var Mt;let vt=s.onClick;if(typeof j.root=="function"?vt=j.root($e).onClick:j.root&&(vt=j.root.onClick),(Mt=vt)==null||Mt(ct),D){var Dt;(Dt=D.onClick)==null||Dt.call(D,ct,s.value)}};let Se=s["aria-pressed"];typeof j.root=="function"?Se=j.root($e)["aria-pressed"]:j.root&&(Se=j.root["aria-pressed"]),D!=null&&D.value&&(Array.isArray(D.value)?Se=D.value.indexOf(s.value)!==-1:Se=D.value===s.value);const Le=G({},q,{component:c,slots:N,slotProps:j}),[Be,Ve]=Ot("root",{ref:r,className:Je.root,elementType:IV,getSlotProps:ke,externalForwardedProps:Le,ownerState:$e,additionalProps:{onClick:je,"aria-pressed":Se}}),[Qe,st]=Ot("loadingIndicator",{className:Je.loadingIndicator,elementType:TV,externalForwardedProps:Le,ownerState:$e});return te.jsx(Be,G({},Ve,{children:k?te.jsx(Qe,G({},st,{children:Ee})):d}))});e0.muiName="IconButton";function PV(e){return Vr("MuiChip",e)}const ub=Lr("MuiChip",["root","clickable","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","disabled","endDecorator","focusVisible","label","labelSm","labelMd","labelLg","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantSolid","variantSoft","variantOutlined"]),HR=R.createContext({disabled:void 0,variant:void 0,color:void 0}),kV=["children","className","color","onClick","disabled","size","variant","startDecorator","endDecorator","component","slots","slotProps"],EV=e=>{const{disabled:t,size:r,color:o,clickable:s,variant:d,focusVisible:p}=e,c={root:["root",t&&"disabled",o&&`color${Et(o)}`,r&&`size${Et(r)}`,d&&`variant${Et(d)}`,s&&"clickable"],action:["action",t&&"disabled",p&&"focusVisible"],label:["label",r&&`label${Et(r)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Dr(c,PV,{})},AV=mt("div",{name:"JoyChip",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o,s;const d=(r=e.variants[t.variant])==null?void 0:r[t.color],{borderRadius:p}=Bd({theme:e,ownerState:t},["borderRadius"]);return[G({"--Chip-decoratorChildOffset":"min(calc(var(--Chip-paddingInline) - (var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2), var(--Chip-paddingInline))","--Chip-decoratorChildRadius":"max(var(--_Chip-radius) - var(--variant-borderWidth, 0px) - var(--_Chip-paddingBlock), min(var(--_Chip-paddingBlock) + var(--variant-borderWidth, 0px), var(--_Chip-radius) / 2))","--Chip-deleteRadius":"var(--Chip-decoratorChildRadius)","--Chip-deleteSize":"var(--Chip-decoratorChildHeight)","--Avatar-radius":"var(--Chip-decoratorChildRadius)","--Avatar-size":"var(--Chip-decoratorChildHeight)","--Icon-margin":"initial","--Icon-color":"currentColor","--unstable_actionRadius":"var(--_Chip-radius)"},t.size==="sm"&&{"--Chip-paddingInline":"0.375rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.sm,"--_Chip-minHeight":"var(--Chip-minHeight, 1.25rem)",gap:"3px"},t.size==="md"&&{"--Chip-paddingInline":"0.5rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.25rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.md,"--_Chip-minHeight":"var(--Chip-minHeight, 1.5rem)",gap:"0.25rem"},t.size==="lg"&&{"--Chip-paddingInline":"0.75rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.375rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.lg,"--_Chip-minHeight":"var(--Chip-minHeight, 1.75rem)",gap:"0.375rem"},{"--_Chip-radius":"var(--Chip-radius, 1.5rem)","--_Chip-paddingBlock":"max((var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2, 0px)",minHeight:"var(--_Chip-minHeight)",maxWidth:"max-content",paddingInline:"var(--Chip-paddingInline)",borderRadius:"var(--_Chip-radius)",position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",verticalAlign:"middle",boxSizing:"border-box"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[t.size]}`],{fontWeight:e.vars.fontWeight.md,[`&.${ub.disabled}`]:{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color}}),...t.clickable?[{"--variant-borderWidth":"0px",color:d==null?void 0:d.color}]:[G({backgroundColor:e.vars.palette.background.surface},d,{[`&.${ub.disabled}`]:(s=e.variants[`${t.variant}Disabled`])==null?void 0:s[t.color]})],p!==void 0&&{"--_Chip-radius":p}]}),zV=mt("span",{name:"JoyChip",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>G({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",order:1,minInlineSize:0,flexGrow:1},e.clickable&&{zIndex:1,pointerEvents:"none"})),RV=mt("button",{name:"JoyChip",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,o,s,d;return[{"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,position:"absolute",zIndex:0,top:0,left:0,bottom:0,right:0,width:"100%",border:"none",cursor:"pointer",padding:"initial",margin:"initial",backgroundColor:"initial",textDecoration:"none",borderRadius:"inherit",[e.focus.selector]:e.focus.default},G({backgroundColor:e.vars.palette.background.surface},(r=e.variants[t.variant])==null?void 0:r[t.color]),{"&:hover":{"@media (hover: hover)":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]}},{"&:active":(s=e.variants[`${t.variant}Active`])==null?void 0:s[t.color]},{[`&.${ub.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]}),MV=mt("span",{name:"JoyChip",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Avatar-marginInlineStart":"calc(var(--Chip-decoratorChildOffset) * -1)","--IconButton-margin":"0 calc(-1 * var(--Chip-paddingInline) / 3) 0 calc(var(--Chip-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Chip-paddingInline) / -4)",display:"inherit",order:0,zIndex:1,pointerEvents:"none"}),DV=mt("span",{name:"JoyChip",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--IconButton-margin":"0 calc(var(--Chip-decoratorChildOffset) * -1) 0 calc(-1 * var(--Chip-paddingInline) / 3)","--Icon-margin":"0 calc(var(--Chip-paddingInline) / -4) 0 0",display:"inherit",order:2,zIndex:1,pointerEvents:"none"}),LV=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyChip"}),{children:s,className:d,color:p="neutral",onClick:c,disabled:x=!1,size:w="md",variant:T="soft",startDecorator:k,endDecorator:E,component:M,slots:N={},slotProps:j={}}=o,q=er(o,kV),B=!!c||!!j.action,D=G({},o,{disabled:x,size:w,color:p,variant:T,clickable:B,focusVisible:!1}),$=typeof j.action=="function"?j.action(D):j.action,ie=R.useRef(null),{focusVisible:J,getRootProps:K}=us(G({},$,{disabled:x,rootRef:ie}));D.focusVisible=J;const se=EV(D),ae=G({},q,{component:M,slots:N,slotProps:j}),[we,xe]=Ot("root",{ref:r,className:ii(se.root,d),elementType:AV,externalForwardedProps:ae,ownerState:D}),[ke,Ee]=Ot("label",{className:se.label,elementType:zV,externalForwardedProps:ae,ownerState:D}),$e=Eo(Ee.id),[Je,je]=Ot("action",{className:se.action,elementType:RV,externalForwardedProps:ae,ownerState:D,getSlotProps:K,additionalProps:{"aria-labelledby":$e,as:$==null?void 0:$.component,onClick:c}}),[Se,Le]=Ot("startDecorator",{className:se.startDecorator,elementType:MV,externalForwardedProps:ae,ownerState:D}),[Be,Ve]=Ot("endDecorator",{className:se.endDecorator,elementType:DV,externalForwardedProps:ae,ownerState:D}),Qe=R.useMemo(()=>({disabled:x}),[x]);return te.jsx(HR.Provider,{value:Qe,children:te.jsx(Qv,{variant:T,color:p,children:te.jsxs(we,G({},xe,{children:[B&&te.jsx(Je,G({},je)),te.jsx(ke,G({},Ee,{id:$e,children:s})),k&&te.jsx(Se,G({},Le,{children:k})),E&&te.jsx(Be,G({},Ve,{children:E}))]}))})})}),$V=Fd(te.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Cancel");function OV(e){return Vr("MuiChipDelete",e)}Lr("MuiChipDelete",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSolid","variantSoft","variantOutlined"]);var PT;const BV=["children","variant","color","disabled","onKeyDown","onDelete","onClick","component","slots","slotProps"],FV=["onDelete"],NV=e=>{const{focusVisible:t,variant:r,color:o,disabled:s}=e,d={root:["root",s&&"disabled",t&&"focusVisible",r&&`variant${Et(r)}`,o&&`color${Et(o)}`]};return Dr(d,OV,{})},jV=mt(zf,{name:"JoyChipDelete",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({"--IconButton-size":"var(--Chip-deleteSize, 2rem)","--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.3)",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px",pointerEvents:"visible",borderRadius:"var(--Chip-deleteRadius, 50%)",zIndex:1,padding:0})),VV=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyChipDelete"}),{children:s,variant:d="plain",color:p="neutral",disabled:c,onKeyDown:x,onDelete:w,onClick:T,component:k,slots:E={},slotProps:M={}}=o,N=er(o,BV),j=R.useContext(HR),{variant:q=d,color:B=p}=Yv(t.variant,t.color,!0),D=t.color||B,$=c??j.disabled,ie=R.useRef(null),J=tn(ie,r),{focusVisible:K,getRootProps:se}=us(G({},o,{disabled:$,rootRef:J})),ae=G({},o,{disabled:$,variant:q,color:D,focusVisible:K}),we=NV(ae),xe=G({},N,{component:k,slots:E,slotProps:M}),ke=Se=>{!$&&w&&w(Se),T&&T(Se)},Ee=Se=>{["Backspace","Enter","Delete"].includes(Se.key)&&(Se.preventDefault(),!$&&w&&w(Se)),x&&x(Se)},[$e,Je]=Ot("root",{ref:r,elementType:jV,getSlotProps:se,externalForwardedProps:xe,ownerState:ae,additionalProps:{as:k,onKeyDown:Ee,onClick:ke},className:we.root}),je=er(Je,FV);return te.jsx($e,G({},je,{children:s??(PT||(PT=te.jsx($V,{})))}))});function UV(e){return Vr("MuiInput",e)}const WR=Lr("MuiInput",["root","input","formControl","focused","disabled","error","adornedStart","adornedEnd","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid","fullWidth","startDecorator","endDecorator"]),t0=R.createContext(void 0),HV=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoFocus","className","defaultValue","disabled","disabledInProp","error","id","name","onClick","onChange","onKeyDown","onKeyUp","onFocus","onBlur","placeholder","readOnly","required","type","value"];function WV(e,t){var r;const o=R.useContext(t0),{"aria-describedby":s,"aria-label":d,"aria-labelledby":p,autoComplete:c,autoFocus:x,className:w,defaultValue:T,disabled:k,disabledInProp:E,error:M,id:N,name:j,onClick:q,onChange:B,onKeyDown:D,onKeyUp:$,onFocus:ie,onBlur:J,placeholder:K,readOnly:se,required:ae,type:we,value:xe}=e,ke=er(e,HV),{getRootProps:Ee,getInputProps:$e,focused:Je,error:je,disabled:Se}=x4({disabled:(r=E??(o==null?void 0:o.disabled))!=null?r:k,defaultValue:T,error:M,onBlur:J,onClick:q,onChange:B,onFocus:ie,required:ae??(o==null?void 0:o.required),value:xe}),Le={[t.disabled]:Se,[t.error]:je,[t.focused]:Je,[t.formControl]:!!o,[w]:w},Be={[t.disabled]:Se};return G({formControl:o,propsToForward:{"aria-describedby":s,"aria-label":d,"aria-labelledby":p,autoComplete:c,autoFocus:x,disabled:Se,id:N,onKeyDown:D,onKeyUp:$,name:j,placeholder:K,readOnly:se,type:we},rootStateClasses:Le,inputStateClasses:Be,getRootProps:Ee,getInputProps:$e,focused:Je,error:je,disabled:Se},ke)}const GV=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","fullWidth","size","color","variant","startDecorator","endDecorator","component","slots","slotProps"],qV=e=>{const{disabled:t,fullWidth:r,variant:o,color:s,size:d}=e,p={root:["root",t&&"disabled",r&&"fullWidth",o&&`variant${Et(o)}`,s&&`color${Et(s)}`,d&&`size${Et(d)}`],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Dr(p,UV,{})},GR=mt("div")(({theme:e,ownerState:t})=>{var r,o,s,d,p,c;const x=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color];return[G({"--Input-radius":e.vars.radius.sm,"--Input-gap":"0.5rem","--Input-placeholderColor":"inherit","--Input-placeholderOpacity":.64,"--Input-decoratorColor":e.vars.palette.text.icon,"--Input-focused":"0","--Input-focusedThickness":e.vars.focus.thickness,"--Input-focusedHighlight":(o=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:o[500],[`&:not([${Sd}])`]:G({},t.instanceColor&&{"--_Input-focusedHighlight":(s=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:s[500]},{"--Input-focusedHighlight":`var(--_Input-focusedHighlight, ${e.vars.palette.focusVisible})`})},t.size==="sm"&&{"--Input-minHeight":"2rem","--Input-paddingInline":"0.5rem","--Input-decoratorChildHeight":"min(1.5rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Input-minHeight":"2.25rem","--Input-paddingInline":"0.75rem","--Input-decoratorChildHeight":"min(1.75rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Input-minHeight":"2.75rem","--Input-paddingInline":"1rem","--Input-gap":"0.75rem","--Input-decoratorChildHeight":"min(2.25rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Input-decoratorChildOffset":"min(calc(var(--Input-paddingInline) - (var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2), var(--Input-paddingInline))","--_Input-paddingBlock":"max((var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2, 0px)","--Input-decoratorChildRadius":"max(var(--Input-radius) - var(--variant-borderWidth, 0px) - var(--_Input-paddingBlock), min(var(--_Input-paddingBlock) + var(--variant-borderWidth, 0px), var(--Input-radius) / 2))","--Button-minHeight":"var(--Input-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Input-decoratorChildHeight)","--Button-radius":"var(--Input-decoratorChildRadius)","--IconButton-radius":"var(--Input-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Input-minHeight)"},t.fullWidth&&{width:"100%"},{cursor:"text",position:"relative",display:"flex",paddingInline:"var(--Input-paddingInline)",borderRadius:"var(--Input-radius)"},e.typography[`body-${t.size}`],x,{backgroundColor:(d=x==null?void 0:x.backgroundColor)!=null?d:e.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Input-focusedInset, inset) 0 0 0 calc(var(--Input-focused) * var(--Input-focusedThickness)) var(--Input-focusedHighlight)"}}),{"&:hover":G({},(p=e.variants[`${t.variant}Hover`])==null?void 0:p[t.color],{backgroundColor:null}),[`&.${WR.disabled}`]:(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color],"&:focus-within::before":{"--Input-focused":"1"}}]}),qR=mt("input")(({ownerState:e})=>({border:"none",minWidth:0,outline:0,padding:0,flex:1,color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",textOverflow:"ellipsis","&:-webkit-autofill":G({paddingInline:"var(--Input-paddingInline)"},!e.startDecorator&&{marginInlineStart:"calc(-1 * var(--Input-paddingInline))",paddingInlineStart:"var(--Input-paddingInline)",borderTopLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"},!e.endDecorator&&{marginInlineEnd:"calc(-1 * var(--Input-paddingInline))",paddingInlineEnd:"var(--Input-paddingInline)",borderTopRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"}),"&::-webkit-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"}})),ZR=mt("div")({"--Button-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Input-paddingInline) / -4)",display:"inherit",alignItems:"center",paddingBlock:"var(--unstable_InputPaddingBlock)",flexWrap:"wrap",marginInlineEnd:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),KR=mt("div")({"--Button-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Input-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",marginInlineStart:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),ZV=mt(GR,{name:"JoyInput",slot:"Root",overridesResolver:(e,t)=>t.root})({}),KV=mt(qR,{name:"JoyInput",slot:"Input",overridesResolver:(e,t)=>t.input})({}),XV=mt(ZR,{name:"JoyInput",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),JV=mt(KR,{name:"JoyInput",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({}),YV=R.forwardRef(function(t,r){var o,s,d,p,c,x;const w=Ur({props:t,name:"JoyInput"}),T=WV(G({},w,{disabledInProp:t.disabled}),WR),{propsToForward:k,rootStateClasses:E,inputStateClasses:M,getRootProps:N,getInputProps:j,formControl:q,focused:B,error:D=!1,disabled:$,fullWidth:ie=!1,size:J="md",color:K="neutral",variant:se="outlined",startDecorator:ae,endDecorator:we,component:xe,slots:ke={},slotProps:Ee={}}=T,$e=er(T,GV),Je=(o=(s=t.error)!=null?s:q==null?void 0:q.error)!=null?o:D,je=(d=(p=t.size)!=null?p:q==null?void 0:q.size)!=null?d:J,Se=(c=t.color)!=null?c:Je?"danger":(x=q==null?void 0:q.color)!=null?x:K,Le=G({instanceColor:Je?"danger":t.color},w,{fullWidth:ie,color:Se,disabled:$,error:Je,focused:B,size:je,variant:se}),Be=qV(Le),Ve=G({},$e,{component:xe,slots:ke,slotProps:Ee}),[Qe,st]=Ot("root",{ref:r,className:[Be.root,E],elementType:ZV,getSlotProps:N,externalForwardedProps:Ve,ownerState:Le}),[ct,Mt]=Ot("input",G({},q&&{additionalProps:{id:q.htmlFor,"aria-describedby":q["aria-describedby"]}},{className:[Be.input,M],elementType:KV,getSlotProps:j,internalForwardedProps:k,externalForwardedProps:Ve,ownerState:Le})),[vt,Dt]=Ot("startDecorator",{className:Be.startDecorator,elementType:XV,externalForwardedProps:Ve,ownerState:Le}),[tr,ht]=Ot("endDecorator",{className:Be.endDecorator,elementType:JV,externalForwardedProps:Ve,ownerState:Le});return te.jsxs(Qe,G({},st,{children:[ae&&te.jsx(vt,G({},Dt,{children:ae})),te.jsx(ct,G({},Mt)),we&&te.jsx(tr,G({},ht,{children:we}))]}))});function QV(e){return Vr("MuiListSubheader",e)}Lr("MuiListSubheader",["root","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const e8=["component","className","children","id","sticky","variant","color","slots","slotProps"],t8=e=>{const{variant:t,color:r,sticky:o}=e,s={root:["root",o&&"sticky",r&&`color${Et(r)}`,t&&`variant${Et(t)}`]};return Dr(s,QV,{})},r8=mt("div",{name:"JoyListSubheader",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;return G({boxSizing:"border-box",display:"flex",alignItems:"center",marginInline:"var(--ListItem-marginInline)",paddingBlock:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)",minBlockSize:"var(--ListItem-minHeight)"},e.typography["body-xs"],{fontSize:"max(0.75em, 0.625rem)",textTransform:"uppercase",letterSpacing:"0.1em"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:"var(--ListItem-stickyBackground)"},{color:t.color?`var(--_Link-color, rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1))`:e.vars.palette.text.tertiary},t.instanceColor&&{[`&:not([${Sd}])`]:{"--_Link-color":e.vars.palette.text.secondary}},(o=e.variants[t.variant])==null?void 0:o[t.color])}),n8=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyListSubheader"}),{component:s,className:d,children:p,id:c,sticky:x=!1,variant:w,color:T,slots:k={},slotProps:E={}}=o,M=er(o,e8),N=Eo(c),j=R.useContext(BR);R.useEffect(()=>{j&&j(N||"")},[j,N]);const q=G({instanceColor:t.color},o,{id:N,sticky:x,variant:w,color:w?T??"neutral":T}),B=t8(q),D=G({},M,{component:s,slots:k,slotProps:E}),[$,ie]=Ot("root",{ref:r,className:ii(B.root,d),elementType:r8,externalForwardedProps:D,ownerState:q,additionalProps:{as:s,id:N}});return te.jsx($,G({},ie,{children:p}))});function i8(e){return Vr("MuiAutocomplete",e)}const yl=Lr("MuiAutocomplete",["root","wrapper","input","startDecorator","endDecorator","formControl","focused","disabled","error","multiple","limitTag","hasPopupIcon","hasClearIcon","clearIndicator","popupIndicator","popupIndicatorOpen","listbox","option","loading","noOptions","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]),XR=mt(kf)(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[t.variant])==null?void 0:r[t.color];return G({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(o==null?void 0:o.backgroundColor)||(o==null?void 0:o.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Kv,{boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`},!(o!=null&&o.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},{zIndex:e.vars.zIndex.popup,overflow:"auto",maxHeight:"40vh",position:"relative","&:empty":{visibility:"hidden"},[`& .${zy.nested}, & .${zy.nested} .${tV.root}`]:{position:"initial"}})});mt(XR,{name:"JoyAutocompleteListbox",slot:"Root",overridesResolver:(e,t)=>t.root})({});function o8(e){return Vr("MuiAutocompleteOption",e)}Lr("MuiAutocompleteOption",["root","focused","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const a8=["children","component","color","variant","className","slots","slotProps"],s8=e=>{const{color:t,variant:r}=e,o={root:["root",t&&`color${Et(t)}`,r&&`variant${Et(r)}`]};return Dr(o,o8,{})},JR=mt(Af)(({theme:e,ownerState:t})=>{var r,o;return{'&[aria-disabled="true"]':(r=e.variants[`${t.variant}Disabled`])==null?void 0:r[t.color],'&[aria-selected="true"]':G({},(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color],{fontWeight:e.vars.fontWeight.md})}}),l8=mt(JR,{name:"JoyAutocompleteOption",slot:"Root",overridesResolver:(e,t)=>t.root})({}),c8=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyAutocompleteOption"}),{children:s,component:d="li",color:p="neutral",variant:c="plain",className:x,slots:w={},slotProps:T={}}=o,k=er(o,a8),{variant:E=c,color:M=p}=Yv(t.variant,t.color),N=G({},o,{component:d,color:M,variant:E}),j=s8(N),q=G({},k,{component:d,slots:w,slotProps:T}),[B,D]=Ot("root",{ref:r,className:ii(j.root,x),elementType:l8,externalForwardedProps:q,ownerState:N,additionalProps:{as:d,role:"option"}});return te.jsx(B,G({},D,{children:s}))});var kT,ET;const u8=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoHighlight","autoSelect","autoFocus","blurOnSelect","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","defaultValue","disableCloseOnSelect","disabledItemsFocusable","disableListWrap","disableClearable","disabled","endDecorator","error","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","handleHomeEndKeys","includeInputInList","isOptionEqualToValue","groupBy","id","inputValue","limitTags","loading","loadingText","multiple","name","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","placeholder","popupIcon","readOnly","renderGroup","renderOption","renderTags","required","type","startDecorator","size","color","variant","value","component","selectOnFocus","slots","slotProps"],d8=["onDelete"],h8=["key"],p8=["onBlur","onFocus","onMouseDown"],f8=["key"],m8=e=>e.current!==null&&e.current.contains(document.activeElement),g8=e=>{var t;return(t=e.label)!=null?t:e},y8=e=>`+${e}`,v8=e=>te.jsxs(Oc,{nested:!0,children:[te.jsx(n8,{sticky:!0,children:e.group}),te.jsx(Ef,{children:e.children})]},e.key),_8=e=>{const{disabled:t,focused:r,hasClearIcon:o,hasPopupIcon:s,popupOpen:d,variant:p,color:c,size:x,multiple:w}=e,T={root:["root",r&&"focused",o&&"hasClearIcon",s&&"hasPopupIcon",p&&`variant${Et(p)}`,c&&`color${Et(c)}`,x&&`size${Et(x)}`],wrapper:["wrapper",w&&"multiple"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",d&&"popupIndicatorOpen",t&&"disabled"],listbox:["listbox"],option:["option"],loading:["loading"],noOptions:["noOptions"],limitTag:["limitTag"]};return Dr(T,i8,{})},x8=mt(GR,{name:"JoyAutocomplete",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>G({},e.size==="sm"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="md"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="lg"&&{"--Autocomplete-wrapperGap":"4px"},{"@media (pointer: fine)":{[`&:hover .${yl.clearIndicator}`]:{visibility:"visible"}}},e.multiple&&!e.startDecorator&&{paddingInlineStart:0})),b8=mt("div",{name:"JoyAutocomplete",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>({flex:1,minWidth:0,display:"flex",alignItems:"center",flexWrap:"wrap",gap:"var(--Autocomplete-wrapperGap)",[`&.${yl.multiple}`]:G({paddingBlock:"var(--Autocomplete-wrapperGap)"},!e.startDecorator&&{paddingInlineStart:"var(--Autocomplete-wrapperGap)"},!e.endDecorator&&{paddingInlineEnd:"var(--Autocomplete-wrapperGap)"})})),w8=mt(qR,{name:"JoyAutocomplete",slot:"Input",overridesResolver:(e,t)=>t.input})(({ownerState:e})=>G({minWidth:30,minHeight:"var(--Chip-minHeight)"},e.multiple&&{marginInlineStart:"calc(var(--Autocomplete-wrapperGap) * 2.5)"})),S8=mt(ZR,{name:"JoyAutocomplete",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),C8=mt(KR,{name:"JoyAutocomplete",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})(({ownerState:e})=>G({},(e.hasClearIcon||e.hasPopupIcon)&&{"--Button-margin":"0px","--IconButton-margin":"0px","--Icon-margin":"0px"})),I8=mt(zf,{name:"JoyAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})(({ownerState:e})=>G({alignSelf:"center"},!e.hasPopupIcon&&{marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)"},{marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",visibility:e.focused?"visible":"hidden"})),T8=mt(zf,{name:"JoyAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>t.popupIndicator})({alignSelf:"center",marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)",[`&.${yl.popupIndicatorOpen}`]:{transform:"rotate(180deg)","--Icon-color":"currentColor"}}),P8=mt(XR,{name:"JoyAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`})),k8=mt(JR,{name:"JoyAutocomplete",slot:"Option",overridesResolver:(e,t)=>t.option})({}),E8=mt(Oc,{name:"JoyAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),A8=mt(Oc,{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),z8=mt("div",{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})({marginInlineStart:"calc(var(--Input-paddingInline) / 2)",marginBlockStart:"var(--_Input-paddingBlock)"}),My=R.forwardRef(function(t,r){var o,s,d,p,c,x,w;const T=Ur({props:t,name:"JoyAutocomplete"}),{"aria-describedby":k,"aria-label":E,"aria-labelledby":M,autoFocus:N,clearIcon:j=kT||(kT=te.jsx(jR,{fontSize:"md"})),clearText:q="Clear",closeText:B="Close",disableClearable:D=!1,disabled:$,endDecorator:ie,error:J=!1,forcePopupIcon:K="auto",freeSolo:se=!1,getLimitTagsText:ae=y8,getOptionLabel:we=g8,groupBy:xe,id:ke,limitTags:Ee=-1,loading:$e=!1,loadingText:Je="Loading…",multiple:je=!1,name:Se,noOptionsText:Le="No options",openText:Be="Open",placeholder:Ve,popupIcon:Qe=ET||(ET=te.jsx(dV,{})),readOnly:st=!1,renderGroup:ct=v8,renderOption:Mt,renderTags:vt,required:Dt,type:tr,startDecorator:ht,size:Ke="md",color:ft="neutral",variant:Ct="outlined",component:jt,slots:Gt={},slotProps:vr={}}=T,Cr=er(T,u8),Ut=R.useContext(t0),Pt=(o=(s=t.error)!=null?s:Ut==null?void 0:Ut.error)!=null?o:J,sr=(d=(p=t.size)!=null?p:Ut==null?void 0:Ut.size)!=null?d:Ke,Ft=(c=t.color)!=null?c:Pt?"danger":(x=Ut==null?void 0:Ut.color)!=null?x:ft,_r=(w=$??(Ut==null?void 0:Ut.disabled))!=null?w:!1,{getRootProps:Ue,getInputProps:xr,getPopupIndicatorProps:Er,getClearProps:Vt,getTagProps:Jt,getListboxProps:Ar,getOptionProps:Br,value:cr,dirty:nr,popupOpen:Kt,focused:lr,focusedTag:Wr,anchorEl:Oe,setAnchorEl:St,inputValue:_t,groupedOptions:Ce}=Uj(G({},T,{id:ke??(Ut==null?void 0:Ut.htmlFor),componentName:"Autocomplete",unstable_classNamePrefix:"Mui",unstable_isActiveElementInListbox:m8})),{onMouseDown:He}=xr(),{onClick:Ze}=Ue(),wt=!D&&!_r&&nr&&!st,gt=(!se||K===!0)&&K!==!1,kt=G({instanceColor:t.color},T,{value:cr,disabled:_r,focused:lr,getOptionLabel:we,hasOptions:!!Ce.length,hasClearIcon:wt,hasPopupIcon:gt,inputFocused:Wr===-1,popupOpen:Kt,size:sr,color:Ft,variant:Ct}),ur=_8(kt),Lt=G({},Cr,{component:jt,slots:Gt,slotProps:vr});let dr;if(je&&cr.length>0){const Nt=zr=>{const Tr=Jt(zr),{onDelete:$r}=Tr,Qr=er(Tr,d8);return G({disabled:_r,size:sr,onClick:$r},Qr)};vt?dr=vt(cr,Nt,kt):dr=cr.map((zr,Tr)=>{const $r=Nt({index:Tr}),{key:Qr}=$r,fn=er($r,h8);return te.jsx(LV,{size:sr,variant:"soft",color:"neutral",endDecorator:te.jsx(VV,G({},fn),Qr),sx:{minWidth:0},children:we(zr)},Tr)})}const pe=tn(r,St),H={[yl.disabled]:_r,[yl.error]:Pt,[yl.focused]:lr,[yl.formControl]:!!Ut},[W,ne]=Ot("root",{ref:pe,className:[ur.root,H],elementType:x8,externalForwardedProps:Lt,ownerState:kt,getSlotProps:Ue,additionalProps:{onClick:Nt=>{Ze&&Ze(Nt),Nt.currentTarget===Nt.target&&He&&He(Nt)}}}),[fe,ge]=Ot("wrapper",{className:ur.wrapper,elementType:b8,externalForwardedProps:Lt,ownerState:kt}),X={[yl.disabled]:_r},[Y,Q]=Ot("input",{className:[ur.input,X],elementType:w8,getSlotProps:Nt=>{const zr=xr(),{onBlur:Tr,onFocus:$r,onMouseDown:Qr}=zr,fn=er(zr,p8);return G({},fn,{onBlur:bi=>{var wi;Tr==null||Tr(bi),(wi=Nt.onBlur)==null||wi.call(Nt,bi)},onFocus:bi=>{var wi;$r==null||$r(bi),(wi=Nt.onFocus)==null||wi.call(Nt,bi)},onMouseDown:bi=>{var wi;Qr==null||Qr(bi),(wi=Nt.onMouseDown)==null||wi.call(Nt,bi)}})},externalForwardedProps:Lt,ownerState:kt,additionalProps:{autoFocus:N,placeholder:Ve,name:Se,readOnly:st,disabled:_r,required:Dt??(Ut==null?void 0:Ut.required),type:tr,"aria-invalid":Pt||void 0,"aria-label":E,"aria-labelledby":M,"aria-describedby":k??(Ut==null?void 0:Ut["aria-describedby"])}}),[le,Pe]=Ot("startDecorator",{className:ur.startDecorator,elementType:S8,externalForwardedProps:Lt,ownerState:kt}),[Me,Fe]=Ot("endDecorator",{className:ur.endDecorator,elementType:C8,externalForwardedProps:Lt,ownerState:kt}),[Ye,rt]=Ot("clearIndicator",{className:ur.clearIndicator,elementType:I8,getSlotProps:Vt,externalForwardedProps:Lt,ownerState:kt,getSlotOwnerState:Nt=>({size:Nt.size||sr,variant:Nt.variant||gc(Ct,Ft).variant||"plain",color:Nt.color||gc(Ct,Ft).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{"aria-label":q,title:q}}),[Xe,et]=Ot("popupIndicator",{className:ur.popupIndicator,elementType:T8,getSlotProps:Er,externalForwardedProps:Lt,ownerState:kt,getSlotOwnerState:Nt=>({size:Nt.size||sr,variant:Nt.variant||gc(Ct,Ft).variant||"plain",color:Nt.color||gc(Ct,Ft).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{disabled:_r,"aria-label":Kt?B:Be,title:Kt?B:Be,type:"button"}}),[Ie,Ae]=Ot("listbox",{className:ur.listbox,elementType:P8,getSlotProps:Ar,externalForwardedProps:Lt,ownerState:kt,getSlotOwnerState:Nt=>({size:Nt.size||sr,variant:Nt.variant||Ct,color:Nt.color||Ft,disableColorInversion:!Nt.disablePortal}),additionalProps:{anchorEl:Oe,open:Kt,style:Oe?{width:Oe.clientWidth}:{}}}),[it,ot]=Ot("loading",{className:ur.loading,elementType:E8,externalForwardedProps:Lt,ownerState:kt}),[lt,Yt]=Ot("noOptions",{className:ur.noOptions,elementType:A8,externalForwardedProps:Lt,ownerState:kt,additionalProps:{role:"presentation",onMouseDown:Nt=>{Nt.preventDefault()}}}),[ir,br]=Ot("limitTag",{className:ur.limitTag,elementType:z8,externalForwardedProps:Lt,ownerState:kt});if(Ee>-1&&Array.isArray(dr)){const Nt=dr.length-Ee;!lr&&Nt>0&&(dr=dr.splice(0,Ee),dr.push(te.jsx(ir,G({},br,{children:ae(Nt)}),dr.length)))}const[Hr,un]=Ot("option",{className:ur.option,elementType:k8,externalForwardedProps:Lt,ownerState:kt,getSlotOwnerState:Nt=>({variant:Nt.variant||gc(Ct,Ft).variant||"plain",color:Nt.color||gc(Ct,Ft).color||"neutral",disableColorInversion:!Ae.disablePortal}),additionalProps:{as:"li"}}),$i=Mt||((Nt,zr)=>{const{key:Tr}=Nt,$r=er(Nt,f8);return te.jsx(Hr,G({},$r,{children:we(zr)}),Tr)}),oi=(Nt,zr)=>{const Tr=Br({option:Nt,index:zr});return $i(G({},un,Tr),Nt,{selected:!!Tr["aria-selected"],inputValue:_t,ownerState:kt})},Na=R.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...Ae.modifiers||[]],[Ae.modifiers]);let Ir=null;if(Oe){var wr;Ir=te.jsx(Qv,{variant:Ct,color:Ft,children:te.jsx(Pf,{nested:!0,children:te.jsxs(Ie,G({},Ae,{className:ii(Ae.className),modifiers:Na},!((wr=T.slots)!=null&&wr.listbox)&&{as:Gv,slots:{root:Ae.as||"ul"}},{children:[Ce.map((Nt,zr)=>{if(xe){const Tr=Nt;return ct({key:String(Tr.key),group:Tr.group,children:Tr.options.map(($r,Qr)=>oi($r,Tr.index+Qr))})}return oi(Nt,zr)}),$e&&Ce.length===0?te.jsx(it,G({},ot,{children:Je})):null,Ce.length===0&&!se&&!$e?te.jsx(lt,G({},Yt,{children:Le})):null]}))})})}return te.jsxs(R.Fragment,{children:[te.jsxs(W,G({},ne,{children:[ht&&te.jsx(le,G({},Pe,{children:ht})),te.jsxs(fe,G({},ge,{children:[dr,te.jsx(Y,G({},Q))]})),ie&&te.jsx(Me,G({},Fe,{children:ie})),wt?te.jsx(Ye,G({},rt,{children:j})):null,gt?te.jsx(Xe,G({},et,{children:Qe})):null]})),Ir]})});function R8(e){return Vr("MuiTypography",e)}Lr("MuiTypography",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","noWrap","gutterBottom","startDecorator","endDecorator","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const M8=["color","textColor"],D8=["component","gutterBottom","noWrap","level","levelMapping","children","endDecorator","startDecorator","variant","slots","slotProps"],db=R.createContext(!1),L8=R.createContext(!1),$8=e=>{const{gutterBottom:t,noWrap:r,level:o,color:s,variant:d}=e,p={root:["root",o,t&&"gutterBottom",r&&"noWrap",s&&`color${Et(s)}`,d&&`variant${Et(d)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Dr(p,R8,{})},O8=mt("span",{name:"JoyTypography",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),B8=mt("span",{name:"JoyTypography",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),F8=mt("span",{name:"JoyTypography",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o,s,d,p;const c=t.level!=="inherit"?(r=e.typography[t.level])==null?void 0:r.lineHeight:"1";return G({"--Icon-fontSize":`calc(1em * ${c})`},t.color&&{"--Icon-color":"currentColor"},{margin:"var(--Typography-margin, 0px)"},t.nesting?{display:"inline"}:G({display:"block"},t.unstable_hasSkeleton&&{position:"relative"}),(t.startDecorator||t.endDecorator)&&G({display:"flex",alignItems:"center"},t.nesting&&G({display:"inline-flex"},t.startDecorator&&{verticalAlign:"bottom"})),t.level&&t.level!=="inherit"&&e.typography[t.level],{fontSize:`var(--Typography-fontSize, ${t.level&&t.level!=="inherit"&&(o=(s=e.typography[t.level])==null?void 0:s.fontSize)!=null?o:"inherit"})`},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.color&&{color:`var(--variant-plainColor, rgba(${(d=e.vars.palette[t.color])==null?void 0:d.mainChannel} / 1))`},t.variant&&G({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"},(p=e.variants[t.variant])==null?void 0:p[t.color]))}),AT={h1:"h1",h2:"h2",h3:"h3",h4:"h4","title-lg":"p","title-md":"p","title-sm":"p","body-lg":"p","body-md":"p","body-sm":"p","body-xs":"span",inherit:"p"},Fa=R.forwardRef(function(t,r){var o;const s=Ur({props:t,name:"JoyTypography"}),{color:d,textColor:p}=s,c=er(s,M8),x=R.useContext(db),w=R.useContext(L8),T=ew(G({},c,{color:p})),{component:k,gutterBottom:E=!1,noWrap:M=!1,level:N="body-md",levelMapping:j=AT,children:q,endDecorator:B,startDecorator:D,variant:$,slots:ie={},slotProps:J={}}=T,K=er(T,D8),se=(o=t.color)!=null?o:$?d??"neutral":d,ae=x||w?t.level||"inherit":N,we=nw(q,["Skeleton"]),xe=k||(x?"span":j[ae]||AT[ae]||"span"),ke=G({},T,{level:ae,component:xe,color:se,gutterBottom:E,noWrap:M,nesting:x,variant:$,unstable_hasSkeleton:we}),Ee=$8(ke),$e=G({},K,{component:xe,slots:ie,slotProps:J}),[Je,je]=Ot("root",{ref:r,className:Ee.root,elementType:F8,externalForwardedProps:$e,ownerState:ke}),[Se,Le]=Ot("startDecorator",{className:Ee.startDecorator,elementType:O8,externalForwardedProps:$e,ownerState:ke}),[Be,Ve]=Ot("endDecorator",{className:Ee.endDecorator,elementType:B8,externalForwardedProps:$e,ownerState:ke});return te.jsx(db.Provider,{value:!0,children:te.jsxs(Je,G({},je,{children:[D&&te.jsx(Se,G({},Le,{children:D})),we?R.cloneElement(q,{variant:q.props.variant||"inline"}):q,B&&te.jsx(Be,G({},Ve,{children:B}))]}))})});Fa.muiName="Typography";function N8(e){return Vr("MuiButton",e)}const zT=Lr("MuiButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]),j8=["children","action","color","variant","size","fullWidth","startDecorator","endDecorator","loading","loadingPosition","loadingIndicator","disabled","component","slots","slotProps"],V8=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:s,fullWidth:d,size:p,variant:c,loading:x}=e,w={root:["root",r&&"disabled",o&&"focusVisible",d&&"fullWidth",c&&`variant${Et(c)}`,t&&`color${Et(t)}`,p&&`size${Et(p)}`,x&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]},T=Dr(w,N8,{});return o&&s&&(T.root+=` ${s}`),T},U8=mt("span",{name:"JoyButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),H8=mt("span",{name:"JoyButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),W8=mt("span",{name:"JoyButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,o;return G({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color})}),YR=({theme:e,ownerState:t})=>{var r,o,s,d;return[G({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.size==="sm"&&{"--Icon-fontSize":e.vars.fontSize.lg,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.375rem",minHeight:"var(--Button-minHeight, 2rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.25rem)",paddingInline:"0.75rem"},t.size==="md"&&{"--Icon-fontSize":e.vars.fontSize.xl,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.5rem",minHeight:"var(--Button-minHeight, 2.25rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.375rem)",paddingInline:"1rem"},t.size==="lg"&&{"--Icon-fontSize":e.vars.fontSize.xl2,"--CircularProgress-size":"28px","--CircularProgress-thickness":"4px","--Button-gap":"0.75rem",minHeight:"var(--Button-minHeight, 2.75rem)",fontSize:e.vars.fontSize.md,paddingBlock:"var(--Button-paddingBlock, 0.5rem)",paddingInline:"1.5rem"},{WebkitTapHighlightColor:"transparent",boxSizing:"border-box",borderRadius:`var(--Button-radius, ${e.vars.radius.sm})`,margin:"var(--Button-margin)",border:"none",backgroundColor:"transparent",cursor:"pointer",userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",textDecoration:"none",fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.lg,lineHeight:e.vars.lineHeight.md},t.fullWidth&&{width:"100%"},{[e.focus.selector]:e.focus.default}),G({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]},'&:active, &[aria-pressed="true"]':(s=e.variants[`${t.variant}Active`])==null?void 0:s[t.color],[`&.${zT.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]},t.loadingPosition==="center"&&{[`&.${zT.loading}`]:{color:"transparent"}})]},G8=mt("button",{name:"JoyButton",slot:"Root",overridesResolver:(e,t)=>t.root})(YR),QR=R.forwardRef(function(t,r){var o;const s=Ur({props:t,name:"JoyButton"}),{children:d,action:p,color:c="primary",variant:x="solid",size:w="md",fullWidth:T=!1,startDecorator:k,endDecorator:E,loading:M=!1,loadingPosition:N="center",loadingIndicator:j,disabled:q,component:B,slots:D={},slotProps:$={}}=s,ie=er(s,j8),J=R.useContext(gS),K=R.useContext(UR),se=t.variant||J.variant||x,ae=t.size||J.size||w,we=t.color||J.color||c,xe=(o=t.loading||t.disabled)!=null?o:J.disabled||M||q,ke=R.useRef(null),Ee=tn(ke,r),{focusVisible:$e,setFocusVisible:Je,getRootProps:je}=us(G({},s,{disabled:xe,rootRef:Ee})),Se=j??te.jsx(yS,{color:we,thickness:{sm:2,md:3,lg:4}[ae]||3});R.useImperativeHandle(p,()=>({focusVisible:()=>{var Ct;Je(!0),(Ct=ke.current)==null||Ct.focus()}}),[Je]);const Le=G({},s,{color:we,fullWidth:T,variant:se,size:ae,focusVisible:$e,loading:M,loadingPosition:N,disabled:xe}),Be=V8(Le),Ve=Ct=>{var jt;let Gt=s.onClick;if(typeof $.root=="function"?Gt=$.root(Le).onClick:$.root&&(Gt=$.root.onClick),(jt=Gt)==null||jt(Ct),K){var vr;(vr=K.onClick)==null||vr.call(K,Ct,s.value)}};let Qe=s["aria-pressed"];typeof $.root=="function"?Qe=$.root(Le)["aria-pressed"]:$.root&&(Qe=$.root["aria-pressed"]),K!=null&&K.value&&(Array.isArray(K.value)?Qe=K.value.indexOf(s.value)!==-1:Qe=K.value===s.value);const st=G({},ie,{component:B,slots:D,slotProps:$}),[ct,Mt]=Ot("root",{ref:r,className:Be.root,elementType:G8,externalForwardedProps:st,getSlotProps:je,ownerState:Le,additionalProps:{onClick:Ve,"aria-pressed":Qe}}),[vt,Dt]=Ot("startDecorator",{className:Be.startDecorator,elementType:U8,externalForwardedProps:st,ownerState:Le}),[tr,ht]=Ot("endDecorator",{className:Be.endDecorator,elementType:H8,externalForwardedProps:st,ownerState:Le}),[Ke,ft]=Ot("loadingIndicatorCenter",{className:Be.loadingIndicatorCenter,elementType:W8,externalForwardedProps:st,ownerState:Le});return te.jsxs(ct,G({},Mt,{children:[(k||M&&N==="start")&&te.jsx(vt,G({},Dt,{children:M&&N==="start"?Se:k})),d,M&&N==="center"&&te.jsx(Ke,G({},ft,{children:Se})),(E||M&&N==="end")&&te.jsx(tr,G({},ht,{children:M&&N==="end"?Se:E}))]}))});QR.muiName="Button";function q8(e){return Vr("MuiCard",e)}Lr("MuiCard",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]);const Z8=["className","color","component","invertedColors","size","variant","children","orientation","slots","slotProps"],K8=e=>{const{size:t,variant:r,color:o,orientation:s}=e,d={root:["root",s,r&&`variant${Et(r)}`,o&&`color${Et(o)}`,t&&`size${Et(t)}`]};return Dr(d,q8,{})},X8=mt("div")(({theme:e,ownerState:t})=>{var r;const{p:o,padding:s,borderRadius:d}=Bd({theme:e,ownerState:t},["p","padding","borderRadius"]);return[G({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--Card-childRadius":"max((var(--Card-radius) - var(--variant-borderWidth, 0px)) - var(--Card-padding), min(var(--Card-padding) / 2, (var(--Card-radius) - var(--variant-borderWidth, 0px)) / 2))","--AspectRatio-radius":"var(--Card-childRadius)","--unstable_actionMargin":"calc(-1 * var(--variant-borderWidth, 0px))","--unstable_actionRadius":"var(--Card-radius)","--CardCover-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--CardOverflow-offset":"calc(-1 * var(--Card-padding))","--CardOverflow-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--Divider-inset":"calc(-1 * var(--Card-padding))"},t.size==="sm"&&{"--Card-radius":e.vars.radius.sm,"--Card-padding":"0.625rem",gap:"0.5rem"},t.size==="md"&&{"--Card-radius":e.vars.radius.md,"--Card-padding":"1rem",gap:"0.75rem 1rem"},t.size==="lg"&&{"--Card-radius":e.vars.radius.lg,"--Card-padding":"1.5rem",gap:"1rem 1.5rem"},{padding:"var(--Card-padding)",borderRadius:"var(--Card-radius)",backgroundColor:e.vars.palette.background.surface,position:"relative",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},e.typography[`body-${t.size}`],t.variant==="solid"&&t.color&&t.invertedColors&&Xv(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Jv(t.color)(e),(r=e.variants[t.variant])==null?void 0:r[t.color]),o!==void 0&&{"--Card-padding":o},s!==void 0&&{"--Card-padding":s},d!==void 0&&{"--Card-radius":d}]}),J8=mt(X8,{name:"JoyCard",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Y8=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyCard"}),{className:s,color:d="neutral",component:p="div",invertedColors:c=!1,size:x="md",variant:w="outlined",children:T,orientation:k="vertical",slots:E={},slotProps:M={}}=o,N=er(o,Z8),j=G({},o,{color:d,component:p,orientation:k,size:x,variant:w,invertedColors:c}),q=K8(j),B=G({},N,{component:p,slots:E,slotProps:M}),[D,$]=Ot("root",{ref:r,className:ii(q.root,s),elementType:J8,externalForwardedProps:B,ownerState:j});return te.jsx(D,G({},$,{children:R.Children.map(T,(ie,J)=>{if(!R.isValidElement(ie))return ie;const K={};if(nw(ie,["Divider"])){var se,ae;const we=ie.props;K.inset=(se=we==null?void 0:we.inset)!=null?se:"context";const xe=k==="vertical"?"horizontal":"vertical";K.orientation=(ae=we==null?void 0:we.orientation)!=null?ae:xe}return J===0&&(K["data-first-child"]=""),J===R.Children.count(T)-1&&(K["data-last-child"]=""),R.cloneElement(ie,K)})}))}),eM=Lr("MuiCardOverflow",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);function Q8(e){return Vr("MuiDivider",e)}Lr("MuiDivider",["root","horizontal","vertical","insetContext","insetNone"]);const tM=mt("div")(({ownerState:e})=>({display:"flex",flexDirection:e.orientation==="horizontal"?"row":"column",flex:9999,zIndex:1,columnGap:"var(--Card-padding)",rowGap:"max(2px, calc(0.1875 * var(--Card-padding)))",padding:"var(--unstable_padding)",[`.${eM.root} > &`]:{"--unstable_padding":"calc(var(--Card-padding) * 0.75) 0px"}}));mt(tM,{name:"JoyCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({});const eU=Lr("MuiModalDialog",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","layoutCenter","layoutFullscreen"]);function tU(e){return Vr("MuiCheckbox",e)}const Tc=Lr("MuiCheckbox",["root","checkbox","action","input","label","checked","disabled","focusVisible","indeterminate","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid"]),rU=Fd(te.jsx("path",{d:"M9 16.17 5.53 12.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L9 16.17z"}),"Check"),nU=Fd(te.jsx("path",{d:"M19 13H5c-.55 0-1-.45-1-1s.45-1 1-1h14c.55 0 1 .45 1 1s-.45 1-1 1z"}),"HorizontalRule"),iU=["checked","uncheckedIcon","checkedIcon","label","defaultChecked","disabled","disableIcon","overlay","id","indeterminate","indeterminateIcon","name","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","value","color","variant","size","component","slots","slotProps"],oU=e=>{const{checked:t,disabled:r,disableIcon:o,focusVisible:s,color:d,variant:p,size:c,indeterminate:x}=e,w={root:["root",t&&"checked",r&&"disabled",s&&"focusVisible",p&&`variant${Et(p)}`,d&&`color${Et(d)}`,c&&`size${Et(c)}`],checkbox:["checkbox",t&&"checked",x&&"indeterminate",r&&"disabled"],action:["action",t&&"checked",o&&r&&"disabled",s&&"focusVisible"],input:["input"],label:["label"]};return Dr(w,tU,{})},aU=mt("span",{name:"JoyCheckbox",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,s;return G({"--Icon-fontSize":"var(--Checkbox-size)"},e.size==="sm"&&{"--Checkbox-size":"1rem","& ~ *":{"--FormHelperText-margin":"0 0 0 1.5rem"},fontSize:t.vars.fontSize.sm,gap:"var(--Checkbox-gap, 0.5rem)"},e.size==="md"&&{"--Checkbox-size":"1.25rem","& ~ *":{"--FormHelperText-margin":"0.25rem 0 0 1.875rem"},fontSize:t.vars.fontSize.md,gap:"var(--Checkbox-gap, 0.625rem)"},e.size==="lg"&&{"--Checkbox-size":"1.5rem","& ~ *":{"--FormHelperText-margin":"0.375rem 0 0 2.25rem"},fontSize:t.vars.fontSize.lg,gap:"var(--Checkbox-gap, 0.75rem)"},{position:e.overlay?"initial":"relative",display:"inline-flex",fontFamily:t.vars.fontFamily.body,lineHeight:"var(--Checkbox-size)",color:t.vars.palette.text.primary,[`&.${Tc.disabled}`]:{color:(r=t.variants.plainDisabled)==null||(r=r[e.color])==null?void 0:r.color}},e.disableIcon&&{color:(o=t.variants[e.variant])==null||(o=o[e.color])==null?void 0:o.color,[`&.${Tc.disabled}`]:{color:(s=t.variants[`${e.variant}Disabled`])==null||(s=s[e.color])==null?void 0:s.color}})}),sU=mt("span",{name:"JoyCheckbox",slot:"Checkbox",overridesResolver:(e,t)=>t.checkbox})(({theme:e,ownerState:t})=>{var r,o,s,d,p;const c=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color];return[G({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,boxSizing:"border-box",borderRadius:`min(${e.vars.radius.sm}, 0.25rem)`,width:"var(--Checkbox-size)",height:"var(--Checkbox-size)",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0},t.disableIcon&&{display:"contents"},{[`&.${Tc.checked}, &.${Tc.indeterminate}`]:{"--Icon-color":"currentColor"}}),...t.disableIcon?[]:[G({},c,{backgroundColor:(o=c==null?void 0:c.backgroundColor)!=null?o:e.vars.palette.background.surface}),{"&:hover":{"@media (hover: hover)":(s=e.variants[`${t.variant}Hover`])==null?void 0:s[t.color]}},{"&:active":(d=e.variants[`${t.variant}Active`])==null?void 0:d[t.color]},{[`&.${Tc.disabled}`]:(p=e.variants[`${t.variant}Disabled`])==null?void 0:p[t.color]}]]}),lU=mt("span",{name:"JoyCheckbox",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,o,s,d;return[{borderRadius:`var(--Checkbox-actionRadius, ${t.overlay?"var(--unstable_actionRadius, inherit)":"inherit"})`,textAlign:"left",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",zIndex:1,[e.focus.selector]:e.focus.default},...t.disableIcon?[(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]},{"&:active":(s=e.variants[`${t.variant}Active`])==null?void 0:s[t.color]},{[`&.${Tc.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]:[]]}),cU=mt("input",{name:"JoyCheckbox",slot:"Input",overridesResolver:(e,t)=>t.input})(()=>({margin:0,opacity:0,position:"absolute",width:"100%",height:"100%",cursor:"pointer"})),uU=mt("label",{name:"JoyCheckbox",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>G({flex:1,minWidth:0},e.disableIcon&&{zIndex:1,pointerEvents:"none"})),dU=te.jsx(rU,{}),hU=te.jsx(nU,{}),Cd=R.forwardRef(function(t,r){var o,s,d,p,c;const x=Ur({props:t,name:"JoyCheckbox"}),{checked:w,uncheckedIcon:T,checkedIcon:k=dU,label:E,defaultChecked:M,disabled:N,disableIcon:j=!1,overlay:q,id:B,indeterminate:D=!1,indeterminateIcon:$=hU,name:ie,onBlur:J,onChange:K,onFocus:se,onFocusVisible:ae,readOnly:we,required:xe,value:ke,color:Ee,variant:$e,size:Je="md",component:je,slots:Se={},slotProps:Le={}}=x,Be=er(x,iU),Ve=R.useContext(t0),Qe=(o=(s=t.disabled)!=null?s:Ve==null?void 0:Ve.disabled)!=null?o:N,st=(d=(p=t.size)!=null?p:Ve==null?void 0:Ve.size)!=null?d:Je,ct=Eo(B??(Ve==null?void 0:Ve.htmlFor)),Mt={checked:w,defaultChecked:M,disabled:Qe,onBlur:J,onChange:K,onFocus:se,onFocusVisible:ae},{getInputProps:vt,checked:Dt,disabled:tr,focusVisible:ht}=Aj(Mt),Ke=Dt||D,jt=Ke?$e||"solid":$e||"outlined",Gt=t.color||(Ve!=null&&Ve.error?"danger":(c=Ve==null?void 0:Ve.color)!=null?c:Ee),Ut=G({},x,{checked:Dt,disabled:tr,disableIcon:j,overlay:q,focusVisible:ht,color:Ke?Gt||"primary":Gt||"neutral",variant:jt,size:st}),Pt=oU(Ut),sr=G({},Be,{component:je,slots:Se,slotProps:Le}),[Ft,_r]=Ot("root",{ref:r,className:Pt.root,elementType:aU,externalForwardedProps:sr,ownerState:Ut}),[Ue,xr]=Ot("checkbox",{className:Pt.checkbox,elementType:sU,externalForwardedProps:sr,ownerState:Ut}),[Er,Vt]=Ot("action",{className:Pt.action,elementType:lU,externalForwardedProps:sr,ownerState:Ut}),[Jt,Ar]=Ot("input",{additionalProps:G({id:ct,name:ie,value:ke,readOnly:we,role:void 0,required:xe??(Ve==null?void 0:Ve.required),"aria-describedby":Ve==null?void 0:Ve["aria-describedby"]},D&&{"aria-checked":"mixed"}),className:Pt.input,elementType:cU,externalForwardedProps:sr,getSlotProps:vt,ownerState:Ut}),[Br,cr]=Ot("label",{additionalProps:{htmlFor:ct},className:Pt.label,elementType:uU,externalForwardedProps:sr,ownerState:Ut});let nr=T;return j?nr=null:D?nr=$:Dt&&(nr=k),te.jsxs(Ft,G({},_r,{children:[te.jsxs(Ue,G({},xr,{children:[te.jsx(Er,G({},Vt,{children:te.jsx(Jt,G({},Ar))})),nr]})),E&&te.jsx(db.Provider,{value:!0,children:te.jsx(Br,G({},cr,{children:E}))})]}))});function pU(e){const{children:t,disableColorScheme:r=!1}=e;return te.jsxs(R.Fragment,{children:[te.jsx(YB,{styles:o=>{var s,d;const p={};r||Object.entries(o.colorSchemes).forEach(([x,w])=>{var T;p[o.getColorSchemeSelector(x).replace(/\s*&/,"")]={colorScheme:(T=w.palette)==null?void 0:T.mode}});const c=(s=(d=o.components)==null||(d=d.JoyTypography)==null||(d=d.defaultProps)==null?void 0:d.level)!=null?s:"body-md";return G({html:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:o.vars.fontWeight.lg},body:G({margin:0,color:o.vars.palette.text.primary,fontFamily:o.vars.fontFamily.body},o.typography[c],{backgroundColor:o.vars.palette.background.body,"@media print":{backgroundColor:o.vars.palette.common.white},"&::backdrop":{backgroundColor:o.vars.palette.background.backdrop}})},p)},defaultTheme:_f}),t]})}function fU(e){return Vr("MuiDialogContent",e)}Lr("MuiDialogContent",["root"]);const r0=R.createContext(void 0);function mU(e){return Vr("MuiDialogTitle",e)}const rM=Lr("MuiDialogTitle",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),gU=["component","children","orientation","slots","slotProps"],yU=()=>Dr({root:["root"]},fU,{}),vU=mt(tM,{name:"JoyDialogContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({color:`var(--DialogContent-color, ${e.vars.palette.text.tertiary})`,overflow:"auto",margin:"var(--unstable_DialogContent-margin)",[`.${eU.root} > .${rM.root} + &`]:{"--unstable_DialogContent-margin":"-0.375em 0 0 0"}})),nM=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyDialogContent"}),s=R.useContext(r0),{component:d="div",children:p,orientation:c="vertical",slots:x={},slotProps:w={}}=o,T=er(o,gU),k=G({},T,{component:d,slots:x,slotProps:w}),E=G({},o,{component:d,orientation:c}),M=yU(),[N,j]=Ot("root",{ref:r,className:M.root,elementType:vU,externalForwardedProps:k,ownerState:E,additionalProps:{id:s==null?void 0:s.describedBy}});return te.jsx(N,G({},j,{children:p}))}),vS=R.createContext(void 0),_U=["component","children","variant","color","level","slots","slotProps"],xU=e=>{const{level:t,color:r,variant:o}=e,s={root:["root",t,r&&`color${Et(r)}`,o&&`variant${Et(o)}`]};return Dr(s,mU,{})},bU=mt("h2",{name:"JoyDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;const s=t.level!=="inherit"?(r=e.typography[t.level])==null?void 0:r.lineHeight:"1";return G({"--Icon-fontSize":`calc(1em * ${s})`},t.color&&{"--Icon-color":"currentColor"},{display:"flex",gap:"clamp(4px, 0.375em, 0.75rem)",margin:"var(--unstable_DialogTitle-margin, 0px)"},t.level&&t.level!=="inherit"&&e.typography[t.level],{color:"inherit"},t.variant&&G({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},(o=e.variants[t.variant])==null?void 0:o[t.color]),{[`.${eM.root} > &`]:{"--unstable_DialogTitle-margin":"var(--Card-padding) 0"}})}),wU={sm:"title-md",md:"title-lg",lg:"h4"},iM=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyDialogTitle"}),s=R.useContext(vS),d=R.useContext(r0),{component:p="h2",children:c,variant:x,color:w,level:T=wU[s||"md"],slots:k={},slotProps:E={}}=o,M=er(o,_U),N=t.color||(x?w??"neutral":w),j=G({},M,{component:p,slots:k,slotProps:E}),q=G({},o,{component:p,color:N,variant:x,level:T}),B=xU(q),[D,$]=Ot("root",{ref:r,className:B.root,elementType:bU,externalForwardedProps:j,ownerState:q,additionalProps:{id:d==null?void 0:d.labelledBy}});return te.jsx(D,G({},$,{children:c}))}),SU=["className","children","component","inset","orientation","role","slots","slotProps"],CU=e=>{const{orientation:t,inset:r}=e,o={root:["root",t,r&&`inset${Et(r)}`]};return Dr(o,Q8,{})},oM=mt("hr",{name:"JoyDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>G({"--Divider-thickness":"1px","--Divider-lineColor":e.vars.palette.divider},t.inset==="none"&&{"--_Divider-inset":"0px"},t.inset==="context"&&{"--_Divider-inset":"var(--Divider-inset, 0px)"},{margin:"initial",marginInline:t.orientation==="vertical"?"initial":"var(--_Divider-inset)",marginBlock:t.orientation==="vertical"?"var(--_Divider-inset)":"initial",position:"relative",alignSelf:"stretch",flexShrink:0},t.children?G({"--Divider-gap":e.spacing(1),"--Divider-childPosition":"50%",display:"flex",flexDirection:t.orientation==="vertical"?"column":"row",alignItems:"center",whiteSpace:"nowrap",textAlign:"center",border:0},e.typography["body-sm"],{"&::before, &::after":{position:"relative",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)",backgroundColor:"var(--Divider-lineColor)",content:'""'},"&::before":{marginInlineEnd:t.orientation==="vertical"?"initial":"min(var(--Divider-childPosition) * 999, var(--Divider-gap))",marginBlockEnd:t.orientation==="vertical"?"min(var(--Divider-childPosition) * 999, var(--Divider-gap))":"initial",flexBasis:"var(--Divider-childPosition)"},"&::after":{marginInlineStart:t.orientation==="vertical"?"initial":"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))",marginBlockStart:t.orientation==="vertical"?"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))":"initial",flexBasis:"calc(100% - var(--Divider-childPosition))"}}):{border:"none",listStyle:"none",backgroundColor:"var(--Divider-lineColor)",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)"})),_S=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyDivider"}),{className:s,children:d,component:p=d!=null?"div":"hr",inset:c,orientation:x="horizontal",role:w=p!=="hr"?"separator":void 0,slots:T={},slotProps:k={}}=o,E=er(o,SU),M=G({},o,{inset:c,role:w,orientation:x,component:p}),N=CU(M),j=G({},E,{component:p,slots:T,slotProps:k}),[q,B]=Ot("root",{ref:r,className:ii(N.root,s),elementType:oM,externalForwardedProps:j,ownerState:M,additionalProps:G({as:p,role:w},w==="separator"&&x==="vertical"&&{"aria-orientation":"vertical"})});return te.jsx(q,G({},B,{children:d}))});_S.muiName="Divider";const aM=R.createContext(void 0),sM=mt("div")(({ownerState:e,theme:t})=>G({"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`,'& ~ [role="listbox"]':{"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`},position:"fixed",zIndex:t.vars.zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&{visibility:"hidden"}));mt(sM,{name:"JoyModal",slot:"Root",overridesResolver:(e,t)=>t.root})({});const lM=mt("div")(({theme:e})=>({zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:e.vars.palette.background.backdrop,WebkitTapHighlightColor:"transparent",backdropFilter:"blur(8px)"}));mt(lM,{name:"JoyModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({});function IU(e){return Vr("MuiDrawer",e)}Lr("MuiDrawer",["root","hidden","backdrop","content","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const TU=["children","anchor","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","color","variant","invertedColors","size","onClose","onKeyDown","open","component","slots","slotProps"],PU=e=>{const{open:t,variant:r,color:o,size:s}=e,d={root:["root",!t&&"hidden",r&&`variant${Et(r)}`,o&&`color${Et(o)}`,s&&`size${Et(s)}`],backdrop:["backdrop"],content:["content"]};return Dr(d,IU,{})},kU=mt(sM,{name:"JoyDrawer",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>G({"--Drawer-transitionDuration":"0.3s","--Drawer-transitionFunction":"ease","--ModalClose-radius":"max((var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) - var(--ModalClose-inset), min(var(--ModalClose-inset) / 2, (var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) / 2))"},e.size==="sm"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(350px, 30%, 100%)","--Drawer-horizontalSize":"clamp(256px, 20%, 100%)","--Drawer-titleMargin":"0.625rem 0.75rem calc(0.625rem / 2)"},e.size==="md"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(400px, 45%, 100%)","--Drawer-horizontalSize":"clamp(300px, 30%, 100%)","--Drawer-titleMargin":"0.75rem 0.75rem calc(0.75rem / 2)"},e.size==="lg"&&{"--ModalClose-inset":"0.75rem","--Drawer-verticalSize":"clamp(500px, 60%, 100%)","--Drawer-horizontalSize":"clamp(440px, 60%, 100%)","--Drawer-titleMargin":"1rem 1rem calc(1rem / 2)"},{transitionProperty:"visibility",transitionDelay:e.open?"0s":"var(--Drawer-transitionDuration)"},!e.open&&{visibility:"hidden"})),EU=mt(lM,{name:"JoyDrawer",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})(({ownerState:e})=>({opacity:e.open?1:0,transition:"opacity var(--Drawer-transitionDuration) ease-in-out"})),AU=mt("div",{name:"JoyDrawer",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>{var r;return G({},e.typography[`body-${t.size}`],{boxShadow:e.shadow.md,backgroundColor:e.vars.palette.background.surface,outline:0,display:"flex",flexDirection:"column",position:"fixed",boxSizing:"border-box",overflow:"auto"},t.anchor==="left"&&{top:0,left:0,transform:t.open?"translateX(0)":"translateX(-100%)"},t.anchor==="right"&&{top:0,right:0,transform:t.open?"translateX(0)":"translateX(100%)"},t.anchor==="top"&&{top:0,transform:t.open?"translateY(0)":"translateY(-100%)"},t.anchor==="bottom"&&{bottom:0,transform:t.open?"translateY(0)":"translateY(100%)"},{height:t.anchor.match(/(left|right)/)?"100%":"min(100vh, var(--Drawer-verticalSize))",width:t.anchor.match(/(top|bottom)/)?"100vw":"min(100vw, var(--Drawer-horizontalSize))",transition:"transform var(--Drawer-transitionDuration) var(--Drawer-transitionFunction)"},t.variant==="solid"&&t.color&&t.invertedColors&&Xv(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Jv(t.color)(e),(r=e.variants[t.variant])==null?void 0:r[t.color],{[`& > .${rM.root}`]:{"--unstable_DialogTitle-margin":"var(--Drawer-titleMargin)"}})}),cM=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyDrawer"}),{children:s,anchor:d="left",container:p,disableAutoFocus:c=!1,disableEnforceFocus:x=!1,disableEscapeKeyDown:w=!1,disablePortal:T=!1,disableRestoreFocus:k=!1,disableScrollLock:E=!1,hideBackdrop:M=!1,color:N="neutral",variant:j="plain",invertedColors:q=!1,size:B="md",onClose:D,open:$,component:ie,slots:J={},slotProps:K={}}=o,se=er(o,TU),ae=G({},o,{anchor:d,disableAutoFocus:c,disableEnforceFocus:x,disableEscapeKeyDown:w,disablePortal:T,disableRestoreFocus:k,disableScrollLock:E,hideBackdrop:M,invertedColors:q,color:N,variant:j,size:B}),{getRootProps:we,getBackdropProps:xe,rootRef:ke,portalRef:Ee,isTopModal:$e}=lN(G({},ae,{rootRef:r,children:null})),Je=PU(ae),je=G({},se,{component:ie,slots:J,slotProps:K}),Se=Eo(),Le=Eo(),Be=R.useMemo(()=>({variant:j,color:N,labelledBy:Se,describedBy:Le}),[N,j,Se,Le]),[Ve,Qe]=Ot("root",{ref:ke,className:Je.root,elementType:kU,externalForwardedProps:je,getSlotProps:we,ownerState:ae}),[st,ct]=Ot("backdrop",{className:Je.backdrop,elementType:EU,externalForwardedProps:je,getSlotProps:xe,ownerState:ae}),[Mt,vt]=Ot("content",{className:Je.content,elementType:AU,additionalProps:{tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":Se,"aria-describedby":Le},externalForwardedProps:je,ownerState:ae});return te.jsx(aM.Provider,{value:D,children:te.jsx(vS.Provider,{value:B,children:te.jsx(r0.Provider,{value:Be,children:te.jsx(CR,{ref:Ee,container:p,disablePortal:T,children:te.jsxs(Ve,G({},Qe,{children:[M?null:te.jsx(st,G({},ct)),te.jsx(y4,{disableEnforceFocus:x,disableAutoFocus:c,disableRestoreFocus:k,isEnabled:$e,open:$,children:te.jsx(Mt,G({},vt,{children:s}))})]}))})})})})});function zU(e){return Vr("MuiListDivider",e)}Lr("MuiListDivider",["root","insetGutter","insetStartDecorator","insetStartContent","horizontal","vertical"]);const RU=["component","role","className","children","inset","orientation","slots","slotProps"],MU=e=>{const{orientation:t,inset:r}=e,o={root:["root",t,r&&r!=="context"&&`inset${Et(r)}`]};return Dr(o,zU,{})},DU=mt(oM,{name:"JoyListDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>G({},e.inset==="context"&&{"--Divider-inset":"calc(-1 * var(--List-padding))"},e.row&&G({marginInline:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginBlock:"var(--ListItem-paddingY)"},e["data-first-child"]===void 0&&{marginInlineStart:"calc(var(--List-gap) + var(--ListDivider-gap))"}),!e.row&&G({},e["data-first-child"]===void 0&&{marginBlockStart:"calc(var(--List-gap) + var(--ListDivider-gap))"},{marginBlockEnd:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginInlineStart:"var(--ListItem-paddingLeft)",marginInlineEnd:"var(--ListItem-paddingRight)"},e.inset==="startDecorator"&&{marginInlineStart:"var(--ListItem-paddingLeft)"},e.inset==="startContent"&&{marginInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItemDecorator-size))"}))),uM=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyListDivider"}),s=R.useContext(Od),d=R.useContext(pS),{component:p,role:c,className:x,children:w,inset:T="context",orientation:k,slots:E={},slotProps:M={}}=o,N=er(o,RU),[j]=(d==null?void 0:d.split(":"))||["",""],q=p||(j&&!j.match(/^(ul|ol|menu)$/)?"div":"li"),B=c||(q==="li"?"separator":void 0),D=k||(s?"vertical":"horizontal"),$=G({},o,{inset:T,row:s,orientation:D,component:q,role:B}),ie=MU($),J=G({},N,{component:q,slots:E,slotProps:M}),[K,se]=Ot("root",{ref:r,className:ii(ie.root,x),elementType:DU,externalForwardedProps:J,ownerState:$,additionalProps:G({as:q,role:B},B==="separator"&&D==="vertical"&&{"aria-orientation":"vertical"})});return te.jsx(K,G({},se,{children:w}))});function LU(e){return Vr("MuiListItemContent",e)}Lr("MuiListItemContent",["root"]);const $U=["component","className","children","slots","slotProps"],OU=()=>Dr({root:["root"]},LU,{}),BU=mt("div",{name:"JoyListItemContent",slot:"Root",overridesResolver:(e,t)=>t.root})({flex:"1 1 auto",minWidth:0}),FU=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyListItemContent"}),{component:s,className:d,children:p,slots:c={},slotProps:x={}}=o,w=er(o,$U),T=G({},o),k=OU(),E=G({},w,{component:s,slots:c,slotProps:x}),[M,N]=Ot("root",{ref:r,className:ii(k.root,d),elementType:BU,externalForwardedProps:E,ownerState:T});return te.jsx(M,G({},N,{children:p}))});function NU(e){return Vr("MuiListItemDecorator",e)}Lr("MuiListItemDecorator",["root"]);const jU=["component","className","children","slots","slotProps"],VU=()=>Dr({root:["root"]},NU,{}),UU=mt("span",{name:"JoyListItemDecorator",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>G({boxSizing:"border-box",display:"inline-flex",alignItems:`var(--unstable_ListItemDecorator-alignItems, ${e.parentOrientation==="horizontal"?"center":"initial"})`},e.parentOrientation==="horizontal"?{minInlineSize:"var(--ListItemDecorator-size)",marginInlineEnd:"calc(-1 * var(--ListItem-gap))"}:{minBlockSize:"var(--ListItemDecorator-size)",justifyContent:"center",marginBlockEnd:"calc(-1 * var(--ListItem-gap))"})),Hg=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyListItemDecorator"}),{component:s,className:d,children:p,slots:c={},slotProps:x={}}=o,w=er(o,jU),T=R.useContext(fS),k=G({parentOrientation:T},o),E=VU(),M=G({},w,{component:s,slots:c,slotProps:x}),[N,j]=Ot("root",{ref:r,className:ii(E.root,d),elementType:UU,externalForwardedProps:M,ownerState:k});return te.jsx(N,G({},j,{children:p}))});function HU(e){return Vr("MuiMenu",e)}Lr("MuiMenu",["root","listbox","expanded","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const WU=["actions","children","color","component","disablePortal","keepMounted","id","invertedColors","onItemsChange","modifiers","variant","size","slots","slotProps"],GU=e=>{const{open:t,variant:r,color:o,size:s}=e,d={root:["root",t&&"expanded",r&&`variant${Et(r)}`,o&&`color${Et(o)}`,s&&`size${Et(s)}`],listbox:["listbox"]};return Dr(d,HU,{})},RT=mt(kf,{name:"JoyMenu",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;const s=(r=e.variants[t.variant])==null?void 0:r[t.color];return[G({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(s==null?void 0:s.backgroundColor)||(s==null?void 0:s.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Kv,{borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,boxShadow:e.shadow.md,overflow:"auto",zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(s!=null&&s.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},t.variant==="solid"&&t.color&&t.invertedColors&&Xv(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Jv(t.color)(e),(o=e.variants[t.variant])==null?void 0:o[t.color])]}),qU=R.forwardRef(function(t,r){var o;const s=Ur({props:t,name:"JoyMenu"}),{actions:d,children:p,color:c="neutral",component:x,disablePortal:w=!1,keepMounted:T=!1,id:k,invertedColors:E=!1,onItemsChange:M,modifiers:N,variant:j="outlined",size:q="md",slots:B={},slotProps:D={}}=s,$=er(s,WU),{contextValue:ie,getListboxProps:J,dispatch:K,open:se,triggerElement:ae}=j4({onItemsChange:M,id:k,listboxRef:r});R.useImperativeHandle(d,()=>({dispatch:K,resetHighlight:()=>K({type:cn.resetHighlight,event:null})}),[K]);const we=G({},s,{disablePortal:w,invertedColors:E,color:c,variant:j,size:q,open:se,nesting:!1,row:!1}),xe=GU(we),ke=G({},$,{component:x,slots:B,slotProps:D}),Ee=R.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...N||[]],[N]),$e=fA({elementType:RT,getSlotProps:J,externalForwardedProps:ke,externalSlotProps:{},ownerState:we,additionalProps:{anchorEl:ae,open:se&&ae!==null,disablePortal:w,keepMounted:T,modifiers:Ee},className:xe.root});return te.jsx(RT,G({},$e,!((o=s.slots)!=null&&o.root)&&{as:Gv,slots:{root:x||"ul"}},{children:te.jsx(V4,{value:ie,children:te.jsx(Qv,{variant:E?void 0:j,color:c,children:te.jsx(Zv.Provider,{value:"menu",children:te.jsx(Pf,{nested:!0,children:p})})})})}))});function ZU(e){return Vr("MuiMenuButton",e)}Lr("MuiMenuButton",["root","colorPrimary","colorNeutral","colorDanger","colorInfo","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]);const KU=["children","color","component","disabled","endDecorator","loading","loadingPosition","loadingIndicator","size","slotProps","slots","startDecorator","variant"],XU=e=>{const{color:t,disabled:r,fullWidth:o,size:s,variant:d,loading:p}=e,c={root:["root",r&&"disabled",o&&"fullWidth",d&&`variant${Et(d)}`,t&&`color${Et(t)}`,s&&`size${Et(s)}`,p&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]};return Dr(c,ZU,{})},JU=mt("button",{name:"JoyMenuButton",slot:"Root",overridesResolver:(e,t)=>t.root})(YR),YU=mt("span",{name:"JoyMenuButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),QU=mt("span",{name:"JoyMenuButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),e9=mt("span",{name:"JoyMenuButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,o;return G({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color})}),t9=R.forwardRef(function(t,r){var o;const s=Ur({props:t,name:"JoyMenuButton"}),{children:d,color:p="neutral",component:c,disabled:x=!1,endDecorator:w,loading:T=!1,loadingPosition:k="center",loadingIndicator:E,size:M="md",slotProps:N={},slots:j={},startDecorator:q,variant:B="outlined"}=s,D=er(s,KU),$=R.useContext(gS),ie=t.variant||$.variant||B,J=t.size||$.size||M,K=(o=t.disabled)!=null?o:$.disabled||x||T,{getRootProps:se,open:ae,active:we}=K6({rootRef:r,disabled:K}),xe=E??te.jsx(yS,{color:p,thickness:{sm:2,md:3,lg:4}[J]||3}),ke=G({},s,{active:we,color:p,disabled:K,open:ae,size:J,variant:ie}),Ee=XU(ke),$e=G({},D,{component:c,slots:j,slotProps:N}),[Je,je]=Ot("root",{elementType:JU,getSlotProps:se,externalForwardedProps:$e,ref:r,ownerState:ke,className:Ee.root}),[Se,Le]=Ot("startDecorator",{className:Ee.startDecorator,elementType:YU,externalForwardedProps:$e,ownerState:ke}),[Be,Ve]=Ot("endDecorator",{className:Ee.endDecorator,elementType:QU,externalForwardedProps:$e,ownerState:ke}),[Qe,st]=Ot("loadingIndicatorCenter",{className:Ee.loadingIndicatorCenter,elementType:e9,externalForwardedProps:$e,ownerState:ke});return te.jsxs(Je,G({},je,{children:[(q||T&&k==="start")&&te.jsx(Se,G({},Le,{children:T&&k==="start"?xe:q})),d,T&&k==="center"&&te.jsx(Qe,G({},st,{children:xe})),(w||T&&k==="end")&&te.jsx(Be,G({},Ve,{children:T&&k==="end"?xe:w}))]}))});function r9(e){return Vr("MuiMenuItem",e)}Lr("MuiMenuItem",["root","focusVisible","disabled","selected","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const n9=["children","disabled","component","selected","color","orientation","variant","slots","slotProps","id"],i9=e=>{const{focusVisible:t,disabled:r,selected:o,color:s,variant:d}=e,p={root:["root",t&&"focusVisible",r&&"disabled",o&&"selected",s&&`color${Et(s)}`,d&&`variant${Et(d)}`]};return Dr(p,r9,{})},o9=mt(Af,{name:"JoyMenuItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),a9=R.memo(R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyMenuItem"}),s=R.useContext(Od),{children:d,disabled:p=!1,component:c="li",selected:x=!1,color:w="neutral",orientation:T="horizontal",variant:k="plain",slots:E={},slotProps:M={},id:N}=o,j=er(o,n9),{variant:q=k,color:B=w}=Yv(t.variant,t.color),{getRootProps:D,disabled:$,focusVisible:ie}=Y6({id:N,disabled:p,rootRef:r}),J=G({},o,{component:c,color:B,disabled:$,focusVisible:ie,orientation:T,selected:x,row:s,variant:q}),K=i9(J),se=G({},j,{component:c,slots:E,slotProps:M}),[ae,we]=Ot("root",{ref:r,elementType:o9,getSlotProps:D,externalForwardedProps:se,className:K.root,ownerState:J});return te.jsx(fS.Provider,{value:T,children:te.jsx(ae,G({},we,{children:d}))})})),J_=R.forwardRef(function(t,r){const{contextValue:o,id:s}=Q6(t.id);return te.jsx(Ll.Provider,{value:o,children:te.jsx(a9,G({},t,{id:s,ref:r}))})});function s9(e){return Vr("MuiModalClose",e)}Lr("MuiModalClose",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);var MT;const l9=["component","color","variant","size","onClick","slots","slotProps"],c9=e=>{const{variant:t,color:r,disabled:o,focusVisible:s,size:d}=e,p={root:["root",o&&"disabled",s&&"focusVisible",t&&`variant${Et(t)}`,r&&`color${Et(r)}`,d&&`size${Et(d)}`]};return Dr(p,s9,{})},u9=mt(zf,{name:"JoyModalClose",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r;return G({},e.size==="sm"&&{"--IconButton-size":"1.75rem"},e.size==="md"&&{"--IconButton-size":"2rem"},e.size==="lg"&&{"--IconButton-size":"2.25rem"},{position:"absolute",zIndex:1,top:"var(--ModalClose-inset, 0.625rem)",right:"var(--ModalClose-inset, 0.625rem)",borderRadius:`var(--ModalClose-radius, ${t.vars.radius.sm})`},!((r=t.variants[e.variant])!=null&&(r=r[e.color])!=null&&r.backgroundColor)&&{color:t.vars.palette.text.secondary})}),d9={plain:"plain",outlined:"plain",soft:"soft",solid:"solid"},dM=R.forwardRef(function(t,r){var o,s,d,p,c,x;const w=Ur({props:t,name:"JoyModalClose"}),{component:T="button",color:k="neutral",variant:E="plain",size:M="md",onClick:N,slots:j={},slotProps:q={}}=w,B=er(w,l9),D=R.useContext(aM),$=R.useContext(r0),ie=(o=(s=t.variant)!=null?s:d9[$==null?void 0:$.variant])!=null?o:E,J=(d=(p=t.color)!=null?p:$==null?void 0:$.color)!=null?d:k,K=R.useContext(vS),se=(c=(x=t.size)!=null?x:K)!=null?c:M,{focusVisible:ae,getRootProps:we}=us(G({},w,{rootRef:r})),xe=G({},w,{color:J,component:T,variant:ie,size:se,focusVisible:ae}),ke=c9(xe),[Ee,$e]=Ot("root",{ref:r,elementType:u9,getSlotProps:we,externalForwardedProps:G({onClick:Je=>{D==null||D(Je,"closeClick"),N==null||N(Je)}},B,{component:T,slots:j,slotProps:q}),className:ke.root,ownerState:xe});return te.jsx(Ee,G({},$e,{children:MT||(MT=te.jsx(jR,{}))}))});function h9(e){return Vr("MuiOption",e)}const p9=Lr("MuiOption",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","highlighted","variantPlain","variantSoft","variantOutlined","variantSolid"]),f9=["component","children","disabled","value","label","variant","color","slots","slotProps"],m9=e=>{const{disabled:t,highlighted:r,selected:o}=e;return Dr({root:["root",t&&"disabled",r&&"highlighted",o&&"selected"]},h9,{})},g9=mt(Af,{name:"JoyOption",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[`${t.variant}Hover`])==null?void 0:r[t.color];return{[`&.${p9.highlighted}:not([aria-selected="true"])`]:{backgroundColor:o==null?void 0:o.backgroundColor}}}),y9=R.memo(R.forwardRef(function(t,r){var o;const s=Ur({props:t,name:"JoyOption"}),{component:d="li",children:p,disabled:c=!1,value:x,label:w,variant:T="plain",color:k="neutral",slots:E={},slotProps:M={}}=s,N=er(s,f9),j=R.useContext(Od),{variant:q=T,color:B=k}=Yv(t.variant,t.color),D=R.useRef(null),$=tn(D,r),ie=w??(typeof p=="string"?p:(o=D.current)==null?void 0:o.innerText),{getRootProps:J,selected:K,highlighted:se,index:ae}=cN({disabled:c,label:ie,value:x,rootRef:$}),we=G({},s,{disabled:c,selected:K,highlighted:se,index:ae,component:d,variant:q,color:B,row:j}),xe=m9(we),ke=G({},N,{component:d,slots:E,slotProps:M}),[Ee,$e]=Ot("root",{ref:r,getSlotProps:J,elementType:g9,externalForwardedProps:ke,className:xe.root,ownerState:we});return te.jsx(Ee,G({},$e,{children:p}))})),v9=R.forwardRef(function(t,r){const{contextValue:o}=uN(t.value);return te.jsx(Ll.Provider,{value:o,children:te.jsx(y9,G({},t,{ref:r}))})}),_9=Fd(te.jsx("path",{d:"m12 5.83 2.46 2.46c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 3.7a.9959.9959 0 0 0-1.41 0L8.12 6.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 5.83zm0 12.34-2.46-2.46a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l3.17 3.18c.39.39 1.02.39 1.41 0l3.17-3.17c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L12 18.17z"}),"Unfold");function x9(e){return Vr("MuiSelect",e)}const ld=Lr("MuiSelect",["root","button","indicator","startDecorator","endDecorator","popper","listbox","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","focusVisible","disabled","expanded","multiple"]);var DT;const b9=["action","autoFocus","children","defaultValue","defaultListboxOpen","disabled","getSerializedValue","placeholder","listboxId","listboxOpen","onChange","onListboxOpenChange","onClose","renderValue","required","value","size","variant","color","startDecorator","endDecorator","indicator","aria-describedby","aria-label","aria-labelledby","id","name","multiple","slots","slotProps"];function w9(e){var t;return Array.isArray(e)?te.jsx(R.Fragment,{children:e.map(r=>r.label).join(", ")}):(t=e==null?void 0:e.label)!=null?t:""}const S9=[{name:"offset",options:{offset:[0,4]}},{name:"equalWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`}}],C9=e=>{const{color:t,disabled:r,focusVisible:o,size:s,variant:d,open:p,multiple:c}=e,x={root:["root",r&&"disabled",o&&"focusVisible",p&&"expanded",d&&`variant${Et(d)}`,t&&`color${Et(t)}`,s&&`size${Et(s)}`,c&&"multiple"],button:["button"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],indicator:["indicator",p&&"expanded"],listbox:["listbox",p&&"expanded",r&&"disabled"]};return Dr(x,x9,{})},I9=mt("div",{name:"JoySelect",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o,s,d,p;const c=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color],{borderRadius:x}=Bd({theme:e,ownerState:t},["borderRadius"]);return[G({"--Select-radius":e.vars.radius.sm,"--Select-gap":"0.5rem","--Select-placeholderOpacity":.64,"--Select-decoratorColor":e.vars.palette.text.icon,"--Select-focusedThickness":e.vars.focus.thickness,"--Select-focusedHighlight":(o=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:o[500],'&:not([data-inverted-colors="false"])':G({},t.instanceColor&&{"--_Select-focusedHighlight":(s=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:s[500]},{"--Select-focusedHighlight":e.vars.palette.focusVisible}),"--Select-indicatorColor":c!=null&&c.backgroundColor?c==null?void 0:c.color:e.vars.palette.text.tertiary},t.size==="sm"&&{"--Select-minHeight":"2rem","--Select-paddingInline":"0.5rem","--Select-decoratorChildHeight":"min(1.5rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Select-minHeight":"2.25rem","--Select-paddingInline":"0.75rem","--Select-decoratorChildHeight":"min(1.75rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Select-minHeight":"2.75rem","--Select-paddingInline":"1rem","--Select-decoratorChildHeight":"min(2.375rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Select-decoratorChildOffset":"min(calc(var(--Select-paddingInline) - (var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2), var(--Select-paddingInline))","--_Select-paddingBlock":"max((var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2, 0px)","--Select-decoratorChildRadius":"max(var(--Select-radius) - var(--variant-borderWidth, 0px) - var(--_Select-paddingBlock), min(var(--_Select-paddingBlock) + var(--variant-borderWidth, 0px), var(--Select-radius) / 2))","--Button-minHeight":"var(--Select-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Select-decoratorChildHeight)","--Button-radius":"var(--Select-decoratorChildRadius)","--IconButton-radius":"var(--Select-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Select-minHeight)",position:"relative",display:"flex",alignItems:"center",borderRadius:"var(--Select-radius)",cursor:"pointer"},!(c!=null&&c.backgroundColor)&&{backgroundColor:e.vars.palette.background.surface},t.size&&{paddingBlock:{sm:2,md:3,lg:4}[t.size]},{paddingInline:"var(--Select-paddingInline)"},e.typography[`body-${t.size}`],c,{"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)"},[`&.${ld.focusVisible}`]:{"--Select-indicatorColor":c==null?void 0:c.color,"&::before":{boxShadow:"inset 0 0 0 var(--Select-focusedThickness) var(--Select-focusedHighlight)"}},[`&.${ld.disabled}`]:{"--Select-indicatorColor":"inherit"}}),{"&:hover":(d=e.variants[`${t.variant}Hover`])==null?void 0:d[t.color],[`&.${ld.disabled}`]:(p=e.variants[`${t.variant}Disabled`])==null?void 0:p[t.color]},x!==void 0&&{"--Select-radius":x}]}),T9=mt("button",{name:"JoySelect",slot:"Button",overridesResolver:(e,t)=>t.button})(({ownerState:e})=>G({border:0,outline:0,background:"none",padding:0,fontSize:"inherit",color:"inherit",alignSelf:"stretch",display:"flex",alignItems:"center",flex:1,fontFamily:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden"},(e.value===null||e.value===void 0)&&{opacity:"var(--Select-placeholderOpacity)"},{"&::before":{content:'""',display:"block",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",borderRadius:"var(--Select-radius)"}})),P9=mt(kf,{name:"JoySelect",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[t.variant])==null?void 0:r[t.color];return G({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(o==null?void 0:o.backgroundColor)||(o==null?void 0:o.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Kv,{minWidth:"max-content",maxHeight:"44vh",overflow:"auto",outline:0,boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(o!=null&&o.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup})}),k9=mt("span",{name:"JoySelect",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Button-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Select-paddingInline) / -4)",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineEnd:"var(--Select-gap)"}),E9=mt("span",{name:"JoySelect",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Button-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Select-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineStart:"var(--Select-gap)"}),A9=mt("span",{name:"JoySelect",slot:"Indicator"})(({ownerState:e,theme:t})=>G({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.lg},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.xl},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl2},{"--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,display:"inherit",alignItems:"center",marginInlineStart:"var(--Select-gap)",marginInlineEnd:"calc(var(--Select-paddingInline) / -4)",[`.${ld.endDecorator} + &`]:{marginInlineStart:"calc(var(--Select-gap) / 2)"},[`&.${ld.expanded}, .${ld.disabled} > &`]:{"--Icon-color":"currentColor"}})),z9=R.forwardRef(function(t,r){var o,s,d,p,c,x,w;const T=Ur({props:t,name:"JoySelect"}),k=T,{action:E,autoFocus:M,children:N,defaultValue:j,defaultListboxOpen:q=!1,disabled:B,getSerializedValue:D,placeholder:$,listboxId:ie,listboxOpen:J,onChange:K,onListboxOpenChange:se,onClose:ae,renderValue:we,required:xe=!1,value:ke,size:Ee="md",variant:$e="outlined",color:Je="neutral",startDecorator:je,endDecorator:Se,indicator:Le=DT||(DT=te.jsx(_9,{})),"aria-describedby":Be,"aria-label":Ve,"aria-labelledby":Qe,id:st,name:ct,multiple:Mt=!1,slots:vt={},slotProps:Dt={}}=k,tr=er(k,b9),ht=R.useContext(t0),Ke=(o=(s=t.disabled)!=null?s:ht==null?void 0:ht.disabled)!=null?o:B,ft=(d=(p=t.size)!=null?p:ht==null?void 0:ht.size)!=null?d:Ee,Ct=(c=t.color)!=null?c:ht!=null&&ht.error?"danger":(x=ht==null?void 0:ht.color)!=null?x:Je,jt=we??w9,[Gt,vr]=R.useState(null),Cr=R.useRef(null),Ut=R.useRef(null),Pt=tn(r,Cr);R.useImperativeHandle(E,()=>({focusVisible:()=>{var W;(W=Ut.current)==null||W.focus()}}),[]),R.useEffect(()=>{vr(Cr.current)},[]),R.useEffect(()=>{M&&Ut.current.focus()},[M]);const sr=R.useCallback(W=>{se==null||se(W),W||ae==null||ae()},[ae,se]),{buttonActive:Ft,buttonFocusVisible:_r,contextValue:Ue,disabled:xr,getButtonProps:Er,getListboxProps:Vt,getHiddenInputProps:Jt,getOptionMetadata:Ar,open:Br,value:cr}=kj({buttonRef:Ut,defaultOpen:q,defaultValue:j,disabled:Ke,getSerializedValue:D,listboxId:ie,multiple:Mt,name:ct,required:xe,onChange:K,onOpenChange:sr,open:J,value:ke}),nr=G({},T,{active:Ft,defaultListboxOpen:q,disabled:xr,focusVisible:_r,open:Br,renderValue:jt,value:cr,size:ft,variant:$e,color:Ct}),Kt=C9(nr),lr=G({},tr,{slots:vt,slotProps:Dt}),Wr=R.useMemo(()=>{let W;if(Mt)W=cr.map(fe=>Ar(fe)).filter(fe=>fe!==void 0);else{var ne;W=(ne=Ar(cr))!=null?ne:null}return W},[Ar,cr,Mt]),[Oe,St]=Ot("root",{ref:Pt,className:Kt.root,elementType:I9,externalForwardedProps:lr,ownerState:nr}),[_t,Ce]=Ot("button",{additionalProps:{"aria-describedby":Be??(ht==null?void 0:ht["aria-describedby"]),"aria-label":Ve,"aria-labelledby":Qe??(ht==null?void 0:ht.labelId),"aria-required":xe?"true":void 0,id:st??(ht==null?void 0:ht.htmlFor),name:ct},className:Kt.button,elementType:T9,externalForwardedProps:lr,getSlotProps:Er,ownerState:nr}),[He,Ze]=Ot("listbox",{additionalProps:{anchorEl:Gt,open:Br,placement:"bottom",keepMounted:!0},className:Kt.listbox,elementType:P9,externalForwardedProps:lr,getSlotProps:Vt,ownerState:G({},nr,{nesting:!1,row:!1,wrap:!1}),getSlotOwnerState:W=>({size:W.size||ft,variant:W.variant||$e,color:W.color||(W.disablePortal?Ct:Je),disableColorInversion:!W.disablePortal})}),[wt,gt]=Ot("startDecorator",{className:Kt.startDecorator,elementType:k9,externalForwardedProps:lr,ownerState:nr}),[kt,ur]=Ot("endDecorator",{className:Kt.endDecorator,elementType:E9,externalForwardedProps:lr,ownerState:nr}),[Lt,dr]=Ot("indicator",{className:Kt.indicator,elementType:A9,externalForwardedProps:lr,ownerState:nr}),pe=R.useMemo(()=>[...S9,...Ze.modifiers||[]],[Ze.modifiers]);let H=$;return(Array.isArray(Wr)&&Wr.length>0||!Array.isArray(Wr)&&Wr)&&(H=jt(Wr)),te.jsxs(R.Fragment,{children:[te.jsxs(Oe,G({},St,{children:[je&&te.jsx(wt,G({},gt,{children:je})),te.jsx(_t,G({},Ce,{children:H})),Se&&te.jsx(kt,G({},ur,{children:Se})),Le&&te.jsx(Lt,G({},dr,{children:Le})),te.jsx("input",G({},Jt()))]})),Gt&&te.jsx(He,G({},Ze,{className:ii(Ze.className),modifiers:pe},!((w=T.slots)!=null&&w.listbox)&&{as:Gv,slots:{root:Ze.as||"ul"}},{children:te.jsx(Ej,{value:Ue,children:te.jsx(Qv,{variant:$e,color:Je,children:te.jsx(Zv.Provider,{value:"select",children:te.jsx(Pf,{nested:!0,children:N})})})})}))]})});function R9(e){return Vr("MuiSheet",e)}Lr("MuiSheet",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const M9=["className","color","component","variant","invertedColors","slots","slotProps"],D9=e=>{const{variant:t,color:r}=e,o={root:["root",t&&`variant${Et(t)}`,r&&`color${Et(r)}`]};return Dr(o,R9,{})},L9=mt("div",{name:"JoySheet",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;const s=(r=e.variants[t.variant])==null?void 0:r[t.color],{borderRadius:d,bgcolor:p,backgroundColor:c,background:x}=Bd({theme:e,ownerState:t},["borderRadius","bgcolor","backgroundColor","background"]),w=zl(e,`palette.${p}`)||p||zl(e,`palette.${c}`)||c||x||(s==null?void 0:s.backgroundColor)||(s==null?void 0:s.background)||e.vars.palette.background.surface;return[G({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--ListItem-stickyBackground":w==="transparent"?"initial":w,"--Sheet-background":w==="transparent"?"initial":w},d!==void 0&&{"--List-radius":`calc(${d} - var(--variant-borderWidth, 0px))`,"--unstable_actionRadius":`calc(${d} - var(--variant-borderWidth, 0px))`},{backgroundColor:e.vars.palette.background.surface,position:"relative"}),G({},e.typography["body-md"],t.variant==="solid"&&t.color&&t.invertedColors&&Xv(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&Jv(t.color)(e),(o=e.variants[t.variant])==null?void 0:o[t.color],s)]}),hM=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoySheet"}),{className:s,color:d="neutral",component:p="div",variant:c="plain",invertedColors:x=!1,slots:w={},slotProps:T={}}=o,k=er(o,M9),E=G({},o,{color:d,component:p,invertedColors:x,variant:c}),M=D9(E),N=G({},k,{component:p,slots:w,slotProps:T}),[j,q]=Ot("root",{ref:r,className:ii(M.root,s),elementType:L9,externalForwardedProps:N,ownerState:E});return te.jsx(j,G({},q))}),Rf=HB({createStyledComponent:mt("div",{name:"JoyStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>Ur({props:e,name:"JoyStack"})});function $9(e){return Vr("MuiTab",e)}const O9=Lr("MuiTab",["root","disabled","focusVisible","selected","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),B9=["action","children","value","disabled","onChange","onClick","onFocus","component","orientation","variant","color","disableIndicator","indicatorPlacement","indicatorInset","slots","slotProps"],F9=e=>{const{selected:t,disabled:r,focusVisible:o,variant:s,color:d,orientation:p}=e,c={root:["root",p,r&&"disabled",o&&"focusVisible",t&&"selected",s&&`variant${Et(s)}`,d&&`color${Et(d)}`]};return Dr(c,$9,{})},N9=mt(Af,{name:"JoyTab",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>[{flex:"initial",justifyContent:e.row?"center":"initial","--unstable_ListItemDecorator-alignItems":"center","--unstable_offset":"min(calc(-1 * var(--variant-borderWidth, 0px)), -1px)"},!e.disableIndicator&&{'&[aria-selected="true"]':{"--Tab-indicatorColor":"currentColor",zIndex:1},"&::after":{content:'""',display:"block",position:"absolute",margin:"auto",background:"var(--Tab-indicatorColor)",borderRadius:"var(--Tab-indicatorRadius)"}},!e.disableIndicator&&e.indicatorPlacement==="bottom"&&{paddingBottom:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",bottom:"calc(-1px - var(--unstable_TabList-underlineBottom, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="top"&&{paddingTop:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",top:"calc(-1px - var(--unstable_TabList-underlineTop, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="right"&&{paddingRight:"calc(var(--ListItem-paddingRight) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",right:"calc(-1px - var(--unstable_TabList-underlineRight, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="left"&&{paddingLeft:"calc(var(--ListItem-paddingLeft) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",left:"calc(-1px - var(--unstable_TabList-underlineLeft, 0px))"}}]),Y_=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyTab"}),s=R.useContext(Od),{action:d,children:p,disabled:c=!1,component:x="button",orientation:w="horizontal",variant:T="plain",color:k="neutral",disableIndicator:E=!1,indicatorPlacement:M=s?"bottom":"right",indicatorInset:N=!1,slots:j={},slotProps:q={}}=o,B=er(o,B9),D=R.useRef(null),$=tn(D,r),{active:ie,focusVisible:J,setFocusVisible:K,selected:se,getRootProps:ae}=Fj(G({},o,{rootRef:$}));R.useImperativeHandle(d,()=>({focusVisible:()=>{K(!0),D.current.focus()}}),[K]);const we=G({},o,{disableIndicator:E,indicatorPlacement:M,indicatorInset:N,orientation:w,row:s,active:ie,focusVisible:J,disabled:c,selected:se,variant:T,color:k}),xe=F9(we),ke=G({},B,{component:x,slots:j,slotProps:q}),[Ee,$e]=Ot("root",{ref:r,elementType:N9,getSlotProps:ae,externalForwardedProps:ke,ownerState:we,className:xe.root});return te.jsx(fS.Provider,{value:w,children:te.jsx(Ee,G({},$e,{children:p}))})}),xS=R.createContext("md");function j9(e){return Vr("MuiTabList",e)}Lr("MuiTabList",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const V9=["component","children","variant","color","size","disableUnderline","underlinePlacement","tabFlex","sticky","slots","slotProps"],U9=e=>{const{orientation:t,size:r,variant:o,color:s}=e,d={root:["root",t,o&&`variant${Et(o)}`,s&&`color${Et(s)}`,r&&`size${Et(r)}`]};return Dr(d,j9,{})},H9=mt(kf,{name:"JoyTabList",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[t.variant])==null?void 0:r[t.color];return G({"--List-gap":"0px","--ListDivider-gap":"0px","--ListItem-paddingX":"var(--Tabs-spacing)","--ListItem-gap":"0.375rem","--unstable_TabList-hasUnderline":t.disableUnderline?"var(--unknown,)":"initial"},Kv,{flexGrow:"initial",flexDirection:t.orientation==="vertical"?"column":"row",borderRadius:"var(--List-radius, 0px)",padding:"var(--List-padding, 0px)",zIndex:1},t.sticky&&{position:"sticky",top:t.sticky==="top"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",bottom:t.sticky==="bottom"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",backgroundColor:(o==null?void 0:o.backgroundColor)||`var(--TabList-stickyBackground, ${e.vars.palette.background.body})`},!t.disableUnderline&&G({},t.underlinePlacement==="bottom"&&{"--unstable_TabList-underlineBottom":"1px",paddingBottom:1,boxShadow:`inset 0 -1px ${e.vars.palette.divider}`},t.underlinePlacement==="top"&&{"--unstable_TabList-underlineTop":"1px",paddingTop:1,boxShadow:`inset 0 1px ${e.vars.palette.divider}`},t.underlinePlacement==="right"&&{"--unstable_TabList-underlineRight":"1px",paddingRight:1,boxShadow:`inset -1px 0 ${e.vars.palette.divider}`},t.underlinePlacement==="left"&&{"--unstable_TabList-underlineLeft":"1px",paddingLeft:1,boxShadow:`inset 1px 0 ${e.vars.palette.divider}`}),t.tabFlex&&{[`& .${O9.root}`]:{flex:t.tabFlex}})}),W9=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyTabList"}),s=R.useContext(xS),{isRtl:d,orientation:p,getRootProps:c,contextValue:x}=$j({rootRef:r}),{component:w="div",children:T,variant:k="plain",color:E="neutral",size:M,disableUnderline:N=!1,underlinePlacement:j=p==="horizontal"?"bottom":"right",tabFlex:q,sticky:B,slots:D={},slotProps:$={}}=o,ie=er(o,V9),K=G({},o,{isRtl:d,orientation:p,variant:k,color:E,size:M??s,sticky:B,tabFlex:q,nesting:!1,disableUnderline:N,underlinePlacement:j}),se=U9(K),ae=G({},ie,{component:w,slots:D,slotProps:$}),[we,xe]=Ot("root",{ref:r,elementType:H9,getSlotProps:c,externalForwardedProps:ae,ownerState:K,className:se.root});return te.jsx(we,G({},xe,{children:te.jsx(Oj,{value:x,children:te.jsx(Pf,{row:p==="horizontal",nested:!0,children:T})})}))});function G9(e){return Vr("MuiTabPanel",e)}Lr("MuiTabPanel",["root","hidden","sizeSm","sizeMd","sizeLg","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const q9=["children","value","component","color","variant","size","slots","slotProps","keepMounted"],Z9=e=>{const{hidden:t,size:r,variant:o,color:s,orientation:d}=e,p={root:["root",t&&"hidden",r&&`size${Et(r)}`,d,o&&`variant${Et(o)}`,s&&`color${Et(s)}`,r&&`size${Et(r)}`]};return Dr(p,G9,{})},K9=mt("div",{name:"JoyTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return G({display:t.hidden?"none":"block",padding:"var(--Tabs-spacing)",flexGrow:1,fontFamily:e.vars.fontFamily.body},e.typography[`body-${t.size}`],(r=e.variants[t.variant])==null?void 0:r[t.color])}),Q_=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyTabPanel"}),{orientation:s}=qv()||{orientation:"horizontal"},d=R.useContext(xS),{children:p,value:c=0,component:x,color:w="neutral",variant:T="plain",size:k,slots:E={},slotProps:M={},keepMounted:N=!1}=o,j=er(o,q9),{hidden:q,getRootProps:B}=Dj(G({},o,{value:c})),$=G({},o,{orientation:s,hidden:q,size:k??d,color:w,variant:T}),ie=Z9($),J=G({},j,{component:x,slots:E,slotProps:M}),[K,se]=Ot("root",{ref:r,elementType:K9,getSlotProps:B,externalForwardedProps:J,additionalProps:{role:"tabpanel",ref:r,as:x},ownerState:$,className:ie.root});return N?te.jsx(K,G({},se,{children:p})):te.jsx(K,G({},se,{children:!q&&p}))});function X9(e){return Vr("MuiTabs",e)}Lr("MuiTabs",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const J9=["children","value","defaultValue","orientation","direction","component","onChange","selectionFollowsFocus","variant","color","size","slots","slotProps"],Y9=e=>{const{orientation:t,variant:r,color:o,size:s}=e,d={root:["root",t,r&&`variant${Et(r)}`,o&&`color${Et(o)}`,s&&`size${Et(s)}`]};return Dr(d,X9,{})},Q9=mt("div",{name:"JoyTabs",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o;const s=(r=t.variants[e.variant])==null?void 0:r[e.color],{bgcolor:d,backgroundColor:p,background:c,p:x,padding:w}=Bd({theme:t,ownerState:e},["bgcolor","backgroundColor","background","p","padding"]),T=zl(t,`palette.${d}`)||d||zl(t,`palette.${p}`)||p||c||(s==null?void 0:s.backgroundColor)||(s==null?void 0:s.background)||t.vars.palette.background.surface;return G({},e.size==="sm"&&{"--Tabs-spacing":"0.75rem"},e.size==="md"&&{"--Tabs-spacing":"1rem"},e.size==="lg"&&{"--Tabs-spacing":"1.25rem"},{"--Tab-indicatorThickness":"2px","--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,"--TabList-stickyBackground":T==="transparent"?"initial":T,display:"flex",flexDirection:"column"},e.orientation==="vertical"&&{flexDirection:"row"},{backgroundColor:t.vars.palette.background.surface,position:"relative"},t.typography[`body-${e.size}`],(o=t.variants[e.variant])==null?void 0:o[e.color],x!==void 0&&{"--Tabs-padding":x},w!==void 0&&{"--Tabs-padding":w})}),LT=R.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyTabs"}),{children:s,value:d,defaultValue:p,orientation:c="horizontal",direction:x="ltr",component:w,variant:T="plain",color:k="neutral",size:E="md",slots:M={},slotProps:N={}}=o,j=er(o,J9),q=p||(d===void 0?0:void 0),{contextValue:B}=zj(G({},o,{orientation:c,defaultValue:q})),D=G({},o,{orientation:c,direction:x,variant:T,color:k,size:E}),$=Y9(D),ie=G({},j,{component:w,slots:M,slotProps:N}),[J,K]=Ot("root",{ref:r,elementType:Q9,externalForwardedProps:ie,additionalProps:{ref:r,as:w},ownerState:D,className:$.root});return te.jsx(J,G({},K,{children:te.jsx(Rj,{value:B,children:te.jsx(xS.Provider,{value:E,children:s})})}))});function e7(e){return Vr("MuiTooltip",e)}Lr("MuiTooltip",["root","tooltipArrow","arrow","touch","placementLeft","placementRight","placementTop","placementBottom","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);const t7=["children","className","component","arrow","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","disablePortal","direction","keepMounted","modifiers","placement","title","color","variant","size","slots","slotProps"],r7=e=>{const{arrow:t,variant:r,color:o,size:s,placement:d,touch:p}=e,c={root:["root",t&&"tooltipArrow",p&&"touch",s&&`size${Et(s)}`,o&&`color${Et(o)}`,r&&`variant${Et(r)}`,`tooltipPlacement${Et(d.split("-")[0])}`],arrow:["arrow"]};return Dr(c,e7,{})},n7=mt("div",{name:"JoyTooltip",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,s;const d=(r=t.variants[e.variant])==null?void 0:r[e.color];return G({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.md,"--Tooltip-arrowSize":"8px",padding:t.spacing(.25,.625)},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.lg,"--Tooltip-arrowSize":"10px",padding:t.spacing(.5,.75)},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl,"--Tooltip-arrowSize":"12px",padding:t.spacing(.75,1)},{zIndex:t.vars.zIndex.tooltip,borderRadius:t.vars.radius.sm,boxShadow:t.shadow.sm,wordWrap:"break-word",position:"relative"},e.disableInteractive&&{pointerEvents:"none"},t.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[e.size]}`],d,!d.backgroundColor&&{backgroundColor:t.vars.palette.background.surface},{"&::before":{content:'""',display:"block",position:"absolute",width:(o=e.placement)!=null&&o.match(/(top|bottom)/)?"100%":"calc(10px + var(--variant-borderWidth, 0px))",height:(s=e.placement)!=null&&s.match(/(top|bottom)/)?"calc(10px + var(--variant-borderWidth, 0px))":"100%"},'&[data-popper-placement*="bottom"]::before':{top:0,left:0,transform:"translateY(-100%)"},'&[data-popper-placement*="left"]::before':{top:0,right:0,transform:"translateX(100%)"},'&[data-popper-placement*="right"]::before':{top:0,left:0,transform:"translateX(-100%)"},'&[data-popper-placement*="top"]::before':{bottom:0,left:0,transform:"translateY(100%)"}})}),i7=mt("span",{name:"JoyTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e,ownerState:t})=>{var r,o,s;const d=(r=e.variants[t.variant])==null?void 0:r[t.color];return{"--unstable_Tooltip-arrowRotation":0,width:"var(--Tooltip-arrowSize)",height:"var(--Tooltip-arrowSize)",boxSizing:"border-box","&::before":{content:'""',display:"block",position:"absolute",width:0,height:0,border:"calc(var(--Tooltip-arrowSize) / 2) solid",borderLeftColor:"transparent",borderBottomColor:"transparent",borderTopColor:(o=d==null?void 0:d.backgroundColor)!=null?o:e.vars.palette.background.surface,borderRightColor:(s=d==null?void 0:d.backgroundColor)!=null?s:e.vars.palette.background.surface,borderRadius:"0px 2px 0px 0px",boxShadow:`var(--variant-borderWidth, 0px) calc(-1 * var(--variant-borderWidth, 0px)) 0px 0px ${d.borderColor}`,transformOrigin:"center center",transform:"rotate(calc(-45deg + 90deg * var(--unstable_Tooltip-arrowRotation)))"},'[data-popper-placement*="bottom"] &':{top:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="top"] &':{"--unstable_Tooltip-arrowRotation":2,bottom:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="left"] &':{"--unstable_Tooltip-arrowRotation":1,right:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="right"] &':{"--unstable_Tooltip-arrowRotation":3,left:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"}}});let vg=!1;const $T=new vf;let lp={x:0,y:0};function OT(e,t){return r=>{t&&t(r),e(r)}}function BT(e,t){return(r,...o)=>{t&&t(r,...o),e(r,...o)}}const o7=R.forwardRef(function(t,r){var o;const s=Ur({props:t,name:"JoyTooltip"}),{children:d,className:p,component:c,arrow:x=!1,describeChild:w=!1,disableFocusListener:T=!1,disableHoverListener:k=!1,disableInteractive:E=!1,disableTouchListener:M=!1,enterDelay:N=100,enterNextDelay:j=0,enterTouchDelay:q=700,followCursor:B=!1,id:D,leaveDelay:$=0,leaveTouchDelay:ie=1500,onClose:J,onOpen:K,open:se,disablePortal:ae,direction:we,keepMounted:xe,modifiers:ke,placement:Ee="bottom",title:$e,color:Je="neutral",variant:je="solid",size:Se="md",slots:Le={},slotProps:Be={}}=s,Ve=er(s,t7),[Qe,st]=R.useState(),[ct,Mt]=R.useState(null),vt=R.useRef(!1),Dt=E||B,tr=Qm(),ht=Qm(),Ke=Qm(),ft=Qm(),[Ct,jt]=td({controlled:se,default:!1,name:"Tooltip",state:"open"});let Gt=Ct;const vr=Eo(D),Cr=R.useRef(void 0),Ut=vl(()=>{Cr.current!==void 0&&(document.body.style.WebkitUserSelect=Cr.current,Cr.current=void 0),ft.clear()});R.useEffect(()=>Ut,[Ut]);const Pt=ne=>{$T.clear(),vg=!0,jt(!0),K&&!Gt&&K(ne)},sr=vl(ne=>{$T.start(800+$,()=>{vg=!1}),jt(!1),J&&Gt&&J(ne),tr.start(150,()=>{vt.current=!1})}),Ft=ne=>{vt.current&&ne.type!=="touchstart"||(Qe&&Qe.removeAttribute("title"),ht.clear(),Ke.clear(),N||vg&&j?ht.start(vg?j:N,()=>{Pt(ne)}):Pt(ne))},_r=ne=>{ht.clear(),Ke.start($,()=>{sr(ne)})},{isFocusVisibleRef:Ue,onBlur:xr,onFocus:Er,ref:Vt}=ow(),[,Jt]=R.useState(!1),Ar=ne=>{xr(ne),Ue.current===!1&&(Jt(!1),_r(ne))},Br=ne=>{Qe||st(ne.currentTarget),Er(ne),Ue.current===!0&&(Jt(!0),Ft(ne))},cr=ne=>{vt.current=!0;const fe=d.props;fe.onTouchStart&&fe.onTouchStart(ne)},nr=ne=>{cr(ne),Ke.clear(),tr.clear(),Ut(),Cr.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ft.start(q,()=>{document.body.style.WebkitUserSelect=Cr.current,Ft(ne)})},Kt=ne=>{d.props.onTouchEnd&&d.props.onTouchEnd(ne),Ut(),Ke.start(ie,()=>{sr(ne)})};R.useEffect(()=>{if(!Gt)return;function ne(fe){(fe.key==="Escape"||fe.key==="Esc")&&sr(fe)}return document.addEventListener("keydown",ne),()=>{document.removeEventListener("keydown",ne)}},[sr,Gt]);const lr=tn(st,r),Wr=tn(Vt,lr),Oe=tn(aw(d),Wr);typeof $e!="number"&&!$e&&(Gt=!1);const St=R.useRef(null),_t=ne=>{const fe=d.props;fe.onMouseMove&&fe.onMouseMove(ne),lp={x:ne.clientX,y:ne.clientY},St.current&&St.current.update()},Ce={},He=typeof $e=="string";w?(Ce.title=!Gt&&He&&!k?$e:null,Ce["aria-describedby"]=Gt?vr:null):(Ce["aria-label"]=He?$e:null,Ce["aria-labelledby"]=Gt&&!He?vr:null);const Ze=G({},Ce,Ve,{component:c},d.props,{className:ii(p,d.props.className),onTouchStart:cr,ref:Oe},B?{onMouseMove:_t}:{}),wt={};M||(Ze.onTouchStart=nr,Ze.onTouchEnd=Kt),k||(Ze.onMouseOver=OT(Ft,Ze.onMouseOver),Ze.onMouseLeave=OT(_r,Ze.onMouseLeave),Dt||(wt.onMouseOver=Ft,wt.onMouseLeave=_r)),T||(Ze.onFocus=BT(Br,Ze.onFocus),Ze.onBlur=BT(Ar,Ze.onBlur),Dt||(wt.onFocus=Br,wt.onBlur=Ar));const gt=G({},s,{arrow:x,disableInteractive:Dt,placement:Ee,touch:vt.current,color:Je,variant:je,size:Se}),kt=r7(gt),ur=G({},Ve,{component:c,slots:Le,slotProps:Be}),Lt=R.useMemo(()=>[{name:"arrow",enabled:!!ct,options:{element:ct,padding:6}},{name:"offset",options:{offset:[0,10]}},...ke||[]],[ct,ke]),[dr,pe]=Ot("root",{additionalProps:G({id:vr,popperRef:St,placement:Ee,anchorEl:B?{getBoundingClientRect:()=>({top:lp.y,left:lp.x,right:lp.x,bottom:lp.y,width:0,height:0})}:Qe,open:Qe?Gt:!1,disablePortal:ae,keepMounted:xe,direction:we,modifiers:Lt},wt),ref:null,className:kt.root,elementType:n7,externalForwardedProps:ur,ownerState:gt}),[H,W]=Ot("arrow",{ref:Mt,className:kt.arrow,elementType:i7,externalForwardedProps:ur,ownerState:gt});return te.jsxs(R.Fragment,{children:[R.isValidElement(d)&&R.cloneElement(d,Ze),te.jsxs(dr,G({},pe,!((o=s.slots)!=null&&o.root)&&{as:Gv,slots:{root:c||"div"}},{children:[$e,x?te.jsx(H,G({},W)):null]}))]})});var pM,FT=$d;pM=FT.createRoot,FT.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function An(){return An=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},An.apply(this,arguments)}var ti;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ti||(ti={}));const NT="popstate";function a7(e){e===void 0&&(e={});function t(o,s){let{pathname:d,search:p,hash:c}=o.location;return cf("",{pathname:d,search:p,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(o,s){return typeof s=="string"?s:Mf(s)}return l7(t,r,null,e)}function Rr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Id(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function s7(){return Math.random().toString(36).substr(2,8)}function jT(e,t){return{usr:e.state,key:e.key,idx:t}}function cf(e,t,r,o){return r===void 0&&(r=null),An({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Nl(t):t,{state:r,key:t&&t.key||o||s7()})}function Mf(e){let{pathname:t="/",search:r="",hash:o=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function Nl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function l7(e,t,r,o){o===void 0&&(o={});let{window:s=document.defaultView,v5Compat:d=!1}=o,p=s.history,c=ti.Pop,x=null,w=T();w==null&&(w=0,p.replaceState(An({},p.state,{idx:w}),""));function T(){return(p.state||{idx:null}).idx}function k(){c=ti.Pop;let q=T(),B=q==null?null:q-w;w=q,x&&x({action:c,location:j.location,delta:B})}function E(q,B){c=ti.Push;let D=cf(j.location,q,B);w=T()+1;let $=jT(D,w),ie=j.createHref(D);try{p.pushState($,"",ie)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;s.location.assign(ie)}d&&x&&x({action:c,location:j.location,delta:1})}function M(q,B){c=ti.Replace;let D=cf(j.location,q,B);w=T();let $=jT(D,w),ie=j.createHref(D);p.replaceState($,"",ie),d&&x&&x({action:c,location:j.location,delta:0})}function N(q){let B=s.location.origin!=="null"?s.location.origin:s.location.href,D=typeof q=="string"?q:Mf(q);return D=D.replace(/ $/,"%20"),Rr(B,"No window.location.(origin|href) available to create URL for href: "+D),new URL(D,B)}let j={get action(){return c},get location(){return e(s,p)},listen(q){if(x)throw new Error("A history only accepts one active listener");return s.addEventListener(NT,k),x=q,()=>{s.removeEventListener(NT,k),x=null}},createHref(q){return t(s,q)},createURL:N,encodeLocation(q){let B=N(q);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:E,replace:M,go(q){return p.go(q)}};return j}var ln;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ln||(ln={}));const c7=new Set(["lazy","caseSensitive","path","id","index","children"]);function u7(e){return e.index===!0}function Dy(e,t,r,o){return r===void 0&&(r=[]),o===void 0&&(o={}),e.map((s,d)=>{let p=[...r,String(d)],c=typeof s.id=="string"?s.id:p.join("-");if(Rr(s.index!==!0||!s.children,"Cannot specify children on an index route"),Rr(!o[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),u7(s)){let x=An({},s,t(s),{id:c});return o[c]=x,x}else{let x=An({},s,t(s),{id:c,children:void 0});return o[c]=x,s.children&&(x.children=Dy(s.children,t,p,o)),x}})}function yc(e,t,r){return r===void 0&&(r="/"),Wg(e,t,r,!1)}function Wg(e,t,r,o){let s=typeof t=="string"?Nl(t):t,d=Df(s.pathname||"/",r);if(d==null)return null;let p=fM(e);h7(p);let c=null;for(let x=0;c==null&&x<p.length;++x){let w=S7(d);c=b7(p[x],w,o)}return c}function d7(e,t){let{route:r,pathname:o,params:s}=e;return{id:r.id,pathname:o,params:s,data:t[r.id],handle:r.handle}}function fM(e,t,r,o){t===void 0&&(t=[]),r===void 0&&(r=[]),o===void 0&&(o="");let s=(d,p,c)=>{let x={relativePath:c===void 0?d.path||"":c,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};x.relativePath.startsWith("/")&&(Rr(x.relativePath.startsWith(o),'Absolute route path "'+x.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),x.relativePath=x.relativePath.slice(o.length));let w=Al([o,x.relativePath]),T=r.concat(x);d.children&&d.children.length>0&&(Rr(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),fM(d.children,t,T,w)),!(d.path==null&&!d.index)&&t.push({path:w,score:_7(w,d.index),routesMeta:T})};return e.forEach((d,p)=>{var c;if(d.path===""||!((c=d.path)!=null&&c.includes("?")))s(d,p);else for(let x of mM(d.path))s(d,p,x)}),t}function mM(e){let t=e.split("/");if(t.length===0)return[];let[r,...o]=t,s=r.endsWith("?"),d=r.replace(/\?$/,"");if(o.length===0)return s?[d,""]:[d];let p=mM(o.join("/")),c=[];return c.push(...p.map(x=>x===""?d:[d,x].join("/"))),s&&c.push(...p),c.map(x=>e.startsWith("/")&&x===""?"/":x)}function h7(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:x7(t.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const p7=/^:[\w-]+$/,f7=3,m7=2,g7=1,y7=10,v7=-2,VT=e=>e==="*";function _7(e,t){let r=e.split("/"),o=r.length;return r.some(VT)&&(o+=v7),t&&(o+=m7),r.filter(s=>!VT(s)).reduce((s,d)=>s+(p7.test(d)?f7:d===""?g7:y7),o)}function x7(e,t){return e.length===t.length&&e.slice(0,-1).every((o,s)=>o===t[s])?e[e.length-1]-t[t.length-1]:0}function b7(e,t,r){r===void 0&&(r=!1);let{routesMeta:o}=e,s={},d="/",p=[];for(let c=0;c<o.length;++c){let x=o[c],w=c===o.length-1,T=d==="/"?t:t.slice(d.length)||"/",k=UT({path:x.relativePath,caseSensitive:x.caseSensitive,end:w},T),E=x.route;if(!k&&w&&r&&!o[o.length-1].route.index&&(k=UT({path:x.relativePath,caseSensitive:x.caseSensitive,end:!1},T)),!k)return null;Object.assign(s,k.params),p.push({params:s,pathname:Al([d,k.pathname]),pathnameBase:T7(Al([d,k.pathnameBase])),route:E}),k.pathnameBase!=="/"&&(d=Al([d,k.pathnameBase]))}return p}function UT(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,o]=w7(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let d=s[0],p=d.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:o.reduce((w,T,k)=>{let{paramName:E,isOptional:M}=T;if(E==="*"){let j=c[k]||"";p=d.slice(0,d.length-j.length).replace(/(.)\/+$/,"$1")}const N=c[k];return M&&!N?w[E]=void 0:w[E]=(N||"").replace(/%2F/g,"/"),w},{}),pathname:d,pathnameBase:p,pattern:e}}function w7(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Id(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,c,x)=>(o.push({paramName:c,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),o]}function S7(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Id(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Df(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,o=e.charAt(r);return o&&o!=="/"?null:e.slice(r)||"/"}function C7(e,t){t===void 0&&(t="/");let{pathname:r,search:o="",hash:s=""}=typeof e=="string"?Nl(e):e;return{pathname:r?r.startsWith("/")?r:I7(r,t):t,search:P7(o),hash:k7(s)}}function I7(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function ex(e,t,r,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gM(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function yM(e,t){let r=gM(e);return t?r.map((o,s)=>s===r.length-1?o.pathname:o.pathnameBase):r.map(o=>o.pathnameBase)}function vM(e,t,r,o){o===void 0&&(o=!1);let s;typeof e=="string"?s=Nl(e):(s=An({},e),Rr(!s.pathname||!s.pathname.includes("?"),ex("?","pathname","search",s)),Rr(!s.pathname||!s.pathname.includes("#"),ex("#","pathname","hash",s)),Rr(!s.search||!s.search.includes("#"),ex("#","search","hash",s)));let d=e===""||s.pathname==="",p=d?"/":s.pathname,c;if(p==null)c=r;else{let k=t.length-1;if(!o&&p.startsWith("..")){let E=p.split("/");for(;E[0]==="..";)E.shift(),k-=1;s.pathname=E.join("/")}c=k>=0?t[k]:"/"}let x=C7(s,c),w=p&&p!=="/"&&p.endsWith("/"),T=(d||p===".")&&r.endsWith("/");return!x.pathname.endsWith("/")&&(w||T)&&(x.pathname+="/"),x}const Al=e=>e.join("/").replace(/\/\/+/g,"/"),T7=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),P7=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,k7=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Ly{constructor(t,r,o,s){s===void 0&&(s=!1),this.status=t,this.statusText=r||"",this.internal=s,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}}function n0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const _M=["post","put","patch","delete"],E7=new Set(_M),A7=["get",..._M],z7=new Set(A7),R7=new Set([301,302,303,307,308]),M7=new Set([307,308]),tx={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},D7={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},cp={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},bS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L7=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),xM="remix-router-transitions";function $7(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",o=!r;Rr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(e.mapRouteProperties)s=e.mapRouteProperties;else if(e.detectErrorBoundary){let X=e.detectErrorBoundary;s=Y=>({hasErrorBoundary:X(Y)})}else s=L7;let d={},p=Dy(e.routes,s,void 0,d),c,x=e.basename||"/",w=e.dataStrategy||N7,T=e.patchRoutesOnNavigation,k=An({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),E=null,M=new Set,N=null,j=null,q=null,B=e.hydrationData!=null,D=yc(p,e.history.location,x),$=null;if(D==null&&!T){let X=xo(404,{pathname:e.history.location.pathname}),{matches:Y,route:Q}=eP(p);D=Y,$={[Q.id]:X}}D&&!e.hydrationData&&W(D,p,e.history.location.pathname).active&&(D=null);let ie;if(D)if(D.some(X=>X.route.lazy))ie=!1;else if(!D.some(X=>X.route.loader))ie=!0;else if(k.v7_partialHydration){let X=e.hydrationData?e.hydrationData.loaderData:null,Y=e.hydrationData?e.hydrationData.errors:null;if(Y){let Q=D.findIndex(le=>Y[le.route.id]!==void 0);ie=D.slice(0,Q+1).every(le=>!pb(le.route,X,Y))}else ie=D.every(Q=>!pb(Q.route,X,Y))}else ie=e.hydrationData!=null;else if(ie=!1,D=[],k.v7_partialHydration){let X=W(null,p,e.history.location.pathname);X.active&&X.matches&&(D=X.matches)}let J,K={historyAction:e.history.action,location:e.history.location,matches:D,initialized:ie,navigation:tx,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||$,fetchers:new Map,blockers:new Map},se=ti.Pop,ae=!1,we,xe=!1,ke=new Map,Ee=null,$e=!1,Je=!1,je=[],Se=new Set,Le=new Map,Be=0,Ve=-1,Qe=new Map,st=new Set,ct=new Map,Mt=new Map,vt=new Set,Dt=new Map,tr=new Map,ht;function Ke(){if(E=e.history.listen(X=>{let{action:Y,location:Q,delta:le}=X;if(ht){ht(),ht=void 0;return}Id(tr.size===0||le!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Pe=gt({currentLocation:K.location,nextLocation:Q,historyAction:Y});if(Pe&&le!=null){let Me=new Promise(Fe=>{ht=Fe});e.history.go(le*-1),wt(Pe,{state:"blocked",location:Q,proceed(){wt(Pe,{state:"proceeding",proceed:void 0,reset:void 0,location:Q}),Me.then(()=>e.history.go(le))},reset(){let Fe=new Map(K.blockers);Fe.set(Pe,cp),jt({blockers:Fe})}});return}return Ut(Y,Q)}),r){eH(t,ke);let X=()=>tH(t,ke);t.addEventListener("pagehide",X),Ee=()=>t.removeEventListener("pagehide",X)}return K.initialized||Ut(ti.Pop,K.location,{initialHydration:!0}),J}function ft(){E&&E(),Ee&&Ee(),M.clear(),we&&we.abort(),K.fetchers.forEach((X,Y)=>lr(Y)),K.blockers.forEach((X,Y)=>Ze(Y))}function Ct(X){return M.add(X),()=>M.delete(X)}function jt(X,Y){Y===void 0&&(Y={}),K=An({},K,X);let Q=[],le=[];k.v7_fetcherPersist&&K.fetchers.forEach((Pe,Me)=>{Pe.state==="idle"&&(vt.has(Me)?le.push(Me):Q.push(Me))}),[...M].forEach(Pe=>Pe(K,{deletedFetchers:le,viewTransitionOpts:Y.viewTransitionOpts,flushSync:Y.flushSync===!0})),k.v7_fetcherPersist&&(Q.forEach(Pe=>K.fetchers.delete(Pe)),le.forEach(Pe=>lr(Pe)))}function Gt(X,Y,Q){var le,Pe;let{flushSync:Me}=Q===void 0?{}:Q,Fe=K.actionData!=null&&K.navigation.formMethod!=null&&Ra(K.navigation.formMethod)&&K.navigation.state==="loading"&&((le=X.state)==null?void 0:le._isRedirect)!==!0,Ye;Y.actionData?Object.keys(Y.actionData).length>0?Ye=Y.actionData:Ye=null:Fe?Ye=K.actionData:Ye=null;let rt=Y.loaderData?YT(K.loaderData,Y.loaderData,Y.matches||[],Y.errors):K.loaderData,Xe=K.blockers;Xe.size>0&&(Xe=new Map(Xe),Xe.forEach((Ae,it)=>Xe.set(it,cp)));let et=ae===!0||K.navigation.formMethod!=null&&Ra(K.navigation.formMethod)&&((Pe=X.state)==null?void 0:Pe._isRedirect)!==!0;c&&(p=c,c=void 0),$e||se===ti.Pop||(se===ti.Push?e.history.push(X,X.state):se===ti.Replace&&e.history.replace(X,X.state));let Ie;if(se===ti.Pop){let Ae=ke.get(K.location.pathname);Ae&&Ae.has(X.pathname)?Ie={currentLocation:K.location,nextLocation:X}:ke.has(X.pathname)&&(Ie={currentLocation:X,nextLocation:K.location})}else if(xe){let Ae=ke.get(K.location.pathname);Ae?Ae.add(X.pathname):(Ae=new Set([X.pathname]),ke.set(K.location.pathname,Ae)),Ie={currentLocation:K.location,nextLocation:X}}jt(An({},Y,{actionData:Ye,loaderData:rt,historyAction:se,location:X,initialized:!0,navigation:tx,revalidation:"idle",restoreScrollPosition:H(X,Y.matches||K.matches),preventScrollReset:et,blockers:Xe}),{viewTransitionOpts:Ie,flushSync:Me===!0}),se=ti.Pop,ae=!1,xe=!1,$e=!1,Je=!1,je=[]}async function vr(X,Y){if(typeof X=="number"){e.history.go(X);return}let Q=hb(K.location,K.matches,x,k.v7_prependBasename,X,k.v7_relativeSplatPath,Y==null?void 0:Y.fromRouteId,Y==null?void 0:Y.relative),{path:le,submission:Pe,error:Me}=HT(k.v7_normalizeFormMethod,!1,Q,Y),Fe=K.location,Ye=cf(K.location,le,Y&&Y.state);Ye=An({},Ye,e.history.encodeLocation(Ye));let rt=Y&&Y.replace!=null?Y.replace:void 0,Xe=ti.Push;rt===!0?Xe=ti.Replace:rt===!1||Pe!=null&&Ra(Pe.formMethod)&&Pe.formAction===K.location.pathname+K.location.search&&(Xe=ti.Replace);let et=Y&&"preventScrollReset"in Y?Y.preventScrollReset===!0:void 0,Ie=(Y&&Y.flushSync)===!0,Ae=gt({currentLocation:Fe,nextLocation:Ye,historyAction:Xe});if(Ae){wt(Ae,{state:"blocked",location:Ye,proceed(){wt(Ae,{state:"proceeding",proceed:void 0,reset:void 0,location:Ye}),vr(X,Y)},reset(){let it=new Map(K.blockers);it.set(Ae,cp),jt({blockers:it})}});return}return await Ut(Xe,Ye,{submission:Pe,pendingError:Me,preventScrollReset:et,replace:Y&&Y.replace,enableViewTransition:Y&&Y.viewTransition,flushSync:Ie})}function Cr(){if(Br(),jt({revalidation:"loading"}),K.navigation.state!=="submitting"){if(K.navigation.state==="idle"){Ut(K.historyAction,K.location,{startUninterruptedRevalidation:!0});return}Ut(se||K.historyAction,K.navigation.location,{overrideNavigation:K.navigation,enableViewTransition:xe===!0})}}async function Ut(X,Y,Q){we&&we.abort(),we=null,se=X,$e=(Q&&Q.startUninterruptedRevalidation)===!0,pe(K.location,K.matches),ae=(Q&&Q.preventScrollReset)===!0,xe=(Q&&Q.enableViewTransition)===!0;let le=c||p,Pe=Q&&Q.overrideNavigation,Me=yc(le,Y,x),Fe=(Q&&Q.flushSync)===!0,Ye=W(Me,le,Y.pathname);if(Ye.active&&Ye.matches&&(Me=Ye.matches),!Me){let{error:ot,notFoundMatches:lt,route:Yt}=kt(Y.pathname);Gt(Y,{matches:lt,loaderData:{},errors:{[Yt.id]:ot}},{flushSync:Fe});return}if(K.initialized&&!Je&&G7(K.location,Y)&&!(Q&&Q.submission&&Ra(Q.submission.formMethod))){Gt(Y,{matches:Me},{flushSync:Fe});return}we=new AbortController;let rt=Pu(e.history,Y,we.signal,Q&&Q.submission),Xe;if(Q&&Q.pendingError)Xe=[vc(Me).route.id,{type:ln.error,error:Q.pendingError}];else if(Q&&Q.submission&&Ra(Q.submission.formMethod)){let ot=await Pt(rt,Y,Q.submission,Me,Ye.active,{replace:Q.replace,flushSync:Fe});if(ot.shortCircuited)return;if(ot.pendingActionResult){let[lt,Yt]=ot.pendingActionResult;if(Oo(Yt)&&n0(Yt.error)&&Yt.error.status===404){we=null,Gt(Y,{matches:ot.matches,loaderData:{},errors:{[lt]:Yt.error}});return}}Me=ot.matches||Me,Xe=ot.pendingActionResult,Pe=rx(Y,Q.submission),Fe=!1,Ye.active=!1,rt=Pu(e.history,rt.url,rt.signal)}let{shortCircuited:et,matches:Ie,loaderData:Ae,errors:it}=await sr(rt,Y,Me,Ye.active,Pe,Q&&Q.submission,Q&&Q.fetcherSubmission,Q&&Q.replace,Q&&Q.initialHydration===!0,Fe,Xe);et||(we=null,Gt(Y,An({matches:Ie||Me},QT(Xe),{loaderData:Ae,errors:it})))}async function Pt(X,Y,Q,le,Pe,Me){Me===void 0&&(Me={}),Br();let Fe=Y7(Y,Q);if(jt({navigation:Fe},{flushSync:Me.flushSync===!0}),Pe){let Xe=await ne(le,Y.pathname,X.signal);if(Xe.type==="aborted")return{shortCircuited:!0};if(Xe.type==="error"){let et=vc(Xe.partialMatches).route.id;return{matches:Xe.partialMatches,pendingActionResult:[et,{type:ln.error,error:Xe.error}]}}else if(Xe.matches)le=Xe.matches;else{let{notFoundMatches:et,error:Ie,route:Ae}=kt(Y.pathname);return{matches:et,pendingActionResult:[Ae.id,{type:ln.error,error:Ie}]}}}let Ye,rt=wp(le,Y);if(!rt.route.action&&!rt.route.lazy)Ye={type:ln.error,error:xo(405,{method:X.method,pathname:Y.pathname,routeId:rt.route.id})};else if(Ye=(await Jt("action",K,X,[rt],le,null))[rt.route.id],X.signal.aborted)return{shortCircuited:!0};if(wc(Ye)){let Xe;return Me&&Me.replace!=null?Xe=Me.replace:Xe=KT(Ye.response.headers.get("Location"),new URL(X.url),x)===K.location.pathname+K.location.search,await Vt(X,Ye,!0,{submission:Q,replace:Xe}),{shortCircuited:!0}}if(bl(Ye))throw xo(400,{type:"defer-action"});if(Oo(Ye)){let Xe=vc(le,rt.route.id);return(Me&&Me.replace)!==!0&&(se=ti.Push),{matches:le,pendingActionResult:[Xe.route.id,Ye]}}return{matches:le,pendingActionResult:[rt.route.id,Ye]}}async function sr(X,Y,Q,le,Pe,Me,Fe,Ye,rt,Xe,et){let Ie=Pe||rx(Y,Me),Ae=Me||Fe||rP(Ie),it=!$e&&(!k.v7_partialHydration||!rt);if(le){if(it){let Nt=Ft(et);jt(An({navigation:Ie},Nt!==void 0?{actionData:Nt}:{}),{flushSync:Xe})}let wr=await ne(Q,Y.pathname,X.signal);if(wr.type==="aborted")return{shortCircuited:!0};if(wr.type==="error"){let Nt=vc(wr.partialMatches).route.id;return{matches:wr.partialMatches,loaderData:{},errors:{[Nt]:wr.error}}}else if(wr.matches)Q=wr.matches;else{let{error:Nt,notFoundMatches:zr,route:Tr}=kt(Y.pathname);return{matches:zr,loaderData:{},errors:{[Tr.id]:Nt}}}}let ot=c||p,[lt,Yt]=GT(e.history,K,Q,Ae,Y,k.v7_partialHydration&&rt===!0,k.v7_skipActionErrorRevalidation,Je,je,Se,vt,ct,st,ot,x,et);if(ur(wr=>!(Q&&Q.some(Nt=>Nt.route.id===wr))||lt&&lt.some(Nt=>Nt.route.id===wr)),Ve=++Be,lt.length===0&&Yt.length===0){let wr=_t();return Gt(Y,An({matches:Q,loaderData:{},errors:et&&Oo(et[1])?{[et[0]]:et[1].error}:null},QT(et),wr?{fetchers:new Map(K.fetchers)}:{}),{flushSync:Xe}),{shortCircuited:!0}}if(it){let wr={};if(!le){wr.navigation=Ie;let Nt=Ft(et);Nt!==void 0&&(wr.actionData=Nt)}Yt.length>0&&(wr.fetchers=_r(Yt)),jt(wr,{flushSync:Xe})}Yt.forEach(wr=>{Oe(wr.key),wr.controller&&Le.set(wr.key,wr.controller)});let ir=()=>Yt.forEach(wr=>Oe(wr.key));we&&we.signal.addEventListener("abort",ir);let{loaderResults:br,fetcherResults:Hr}=await Ar(K,Q,lt,Yt,X);if(X.signal.aborted)return{shortCircuited:!0};we&&we.signal.removeEventListener("abort",ir),Yt.forEach(wr=>Le.delete(wr.key));let un=_g(br);if(un)return await Vt(X,un.result,!0,{replace:Ye}),{shortCircuited:!0};if(un=_g(Hr),un)return st.add(un.key),await Vt(X,un.result,!0,{replace:Ye}),{shortCircuited:!0};let{loaderData:ds,errors:$i}=JT(K,Q,br,et,Yt,Hr,Dt);Dt.forEach((wr,Nt)=>{wr.subscribe(zr=>{(zr||wr.done)&&Dt.delete(Nt)})}),k.v7_partialHydration&&rt&&K.errors&&($i=An({},K.errors,$i));let oi=_t(),Na=Ce(Ve),Ir=oi||Na||Yt.length>0;return An({matches:Q,loaderData:ds,errors:$i},Ir?{fetchers:new Map(K.fetchers)}:{})}function Ft(X){if(X&&!Oo(X[1]))return{[X[0]]:X[1].data};if(K.actionData)return Object.keys(K.actionData).length===0?null:K.actionData}function _r(X){return X.forEach(Y=>{let Q=K.fetchers.get(Y.key),le=up(void 0,Q?Q.data:void 0);K.fetchers.set(Y.key,le)}),new Map(K.fetchers)}function Ue(X,Y,Q,le){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Oe(X);let Pe=(le&&le.flushSync)===!0,Me=c||p,Fe=hb(K.location,K.matches,x,k.v7_prependBasename,Q,k.v7_relativeSplatPath,Y,le==null?void 0:le.relative),Ye=yc(Me,Fe,x),rt=W(Ye,Me,Fe);if(rt.active&&rt.matches&&(Ye=rt.matches),!Ye){nr(X,Y,xo(404,{pathname:Fe}),{flushSync:Pe});return}let{path:Xe,submission:et,error:Ie}=HT(k.v7_normalizeFormMethod,!0,Fe,le);if(Ie){nr(X,Y,Ie,{flushSync:Pe});return}let Ae=wp(Ye,Xe),it=(le&&le.preventScrollReset)===!0;if(et&&Ra(et.formMethod)){xr(X,Y,Xe,Ae,Ye,rt.active,Pe,it,et);return}ct.set(X,{routeId:Y,path:Xe}),Er(X,Y,Xe,Ae,Ye,rt.active,Pe,it,et)}async function xr(X,Y,Q,le,Pe,Me,Fe,Ye,rt){Br(),ct.delete(X);function Xe($r){if(!$r.route.action&&!$r.route.lazy){let Qr=xo(405,{method:rt.formMethod,pathname:Q,routeId:Y});return nr(X,Y,Qr,{flushSync:Fe}),!0}return!1}if(!Me&&Xe(le))return;let et=K.fetchers.get(X);cr(X,Q7(rt,et),{flushSync:Fe});let Ie=new AbortController,Ae=Pu(e.history,Q,Ie.signal,rt);if(Me){let $r=await ne(Pe,Q,Ae.signal);if($r.type==="aborted")return;if($r.type==="error"){nr(X,Y,$r.error,{flushSync:Fe});return}else if($r.matches){if(Pe=$r.matches,le=wp(Pe,Q),Xe(le))return}else{nr(X,Y,xo(404,{pathname:Q}),{flushSync:Fe});return}}Le.set(X,Ie);let it=Be,lt=(await Jt("action",K,Ae,[le],Pe,X))[le.route.id];if(Ae.signal.aborted){Le.get(X)===Ie&&Le.delete(X);return}if(k.v7_fetcherPersist&&vt.has(X)){if(wc(lt)||Oo(lt)){cr(X,hl(void 0));return}}else{if(wc(lt))if(Le.delete(X),Ve>it){cr(X,hl(void 0));return}else return st.add(X),cr(X,up(rt)),Vt(Ae,lt,!1,{fetcherSubmission:rt,preventScrollReset:Ye});if(Oo(lt)){nr(X,Y,lt.error);return}}if(bl(lt))throw xo(400,{type:"defer-action"});let Yt=K.navigation.location||K.location,ir=Pu(e.history,Yt,Ie.signal),br=c||p,Hr=K.navigation.state!=="idle"?yc(br,K.navigation.location,x):K.matches;Rr(Hr,"Didn't find any matches after fetcher action");let un=++Be;Qe.set(X,un);let ds=up(rt,lt.data);K.fetchers.set(X,ds);let[$i,oi]=GT(e.history,K,Hr,rt,Yt,!1,k.v7_skipActionErrorRevalidation,Je,je,Se,vt,ct,st,br,x,[le.route.id,lt]);oi.filter($r=>$r.key!==X).forEach($r=>{let Qr=$r.key,fn=K.fetchers.get(Qr),bi=up(void 0,fn?fn.data:void 0);K.fetchers.set(Qr,bi),Oe(Qr),$r.controller&&Le.set(Qr,$r.controller)}),jt({fetchers:new Map(K.fetchers)});let Na=()=>oi.forEach($r=>Oe($r.key));Ie.signal.addEventListener("abort",Na);let{loaderResults:Ir,fetcherResults:wr}=await Ar(K,Hr,$i,oi,ir);if(Ie.signal.aborted)return;Ie.signal.removeEventListener("abort",Na),Qe.delete(X),Le.delete(X),oi.forEach($r=>Le.delete($r.key));let Nt=_g(Ir);if(Nt)return Vt(ir,Nt.result,!1,{preventScrollReset:Ye});if(Nt=_g(wr),Nt)return st.add(Nt.key),Vt(ir,Nt.result,!1,{preventScrollReset:Ye});let{loaderData:zr,errors:Tr}=JT(K,Hr,Ir,void 0,oi,wr,Dt);if(K.fetchers.has(X)){let $r=hl(lt.data);K.fetchers.set(X,$r)}Ce(un),K.navigation.state==="loading"&&un>Ve?(Rr(se,"Expected pending action"),we&&we.abort(),Gt(K.navigation.location,{matches:Hr,loaderData:zr,errors:Tr,fetchers:new Map(K.fetchers)})):(jt({errors:Tr,loaderData:YT(K.loaderData,zr,Hr,Tr),fetchers:new Map(K.fetchers)}),Je=!1)}async function Er(X,Y,Q,le,Pe,Me,Fe,Ye,rt){let Xe=K.fetchers.get(X);cr(X,up(rt,Xe?Xe.data:void 0),{flushSync:Fe});let et=new AbortController,Ie=Pu(e.history,Q,et.signal);if(Me){let lt=await ne(Pe,Q,Ie.signal);if(lt.type==="aborted")return;if(lt.type==="error"){nr(X,Y,lt.error,{flushSync:Fe});return}else if(lt.matches)Pe=lt.matches,le=wp(Pe,Q);else{nr(X,Y,xo(404,{pathname:Q}),{flushSync:Fe});return}}Le.set(X,et);let Ae=Be,ot=(await Jt("loader",K,Ie,[le],Pe,X))[le.route.id];if(bl(ot)&&(ot=await wS(ot,Ie.signal,!0)||ot),Le.get(X)===et&&Le.delete(X),!Ie.signal.aborted){if(vt.has(X)){cr(X,hl(void 0));return}if(wc(ot))if(Ve>Ae){cr(X,hl(void 0));return}else{st.add(X),await Vt(Ie,ot,!1,{preventScrollReset:Ye});return}if(Oo(ot)){nr(X,Y,ot.error);return}Rr(!bl(ot),"Unhandled fetcher deferred data"),cr(X,hl(ot.data))}}async function Vt(X,Y,Q,le){let{submission:Pe,fetcherSubmission:Me,preventScrollReset:Fe,replace:Ye}=le===void 0?{}:le;Y.response.headers.has("X-Remix-Revalidate")&&(Je=!0);let rt=Y.response.headers.get("Location");Rr(rt,"Expected a Location header on the redirect Response"),rt=KT(rt,new URL(X.url),x);let Xe=cf(K.location,rt,{_isRedirect:!0});if(r){let lt=!1;if(Y.response.headers.has("X-Remix-Reload-Document"))lt=!0;else if(bS.test(rt)){const Yt=e.history.createURL(rt);lt=Yt.origin!==t.location.origin||Df(Yt.pathname,x)==null}if(lt){Ye?t.location.replace(rt):t.location.assign(rt);return}}we=null;let et=Ye===!0||Y.response.headers.has("X-Remix-Replace")?ti.Replace:ti.Push,{formMethod:Ie,formAction:Ae,formEncType:it}=K.navigation;!Pe&&!Me&&Ie&&Ae&&it&&(Pe=rP(K.navigation));let ot=Pe||Me;if(M7.has(Y.response.status)&&ot&&Ra(ot.formMethod))await Ut(et,Xe,{submission:An({},ot,{formAction:rt}),preventScrollReset:Fe||ae,enableViewTransition:Q?xe:void 0});else{let lt=rx(Xe,Pe);await Ut(et,Xe,{overrideNavigation:lt,fetcherSubmission:Me,preventScrollReset:Fe||ae,enableViewTransition:Q?xe:void 0})}}async function Jt(X,Y,Q,le,Pe,Me){let Fe,Ye={};try{Fe=await j7(w,X,Y,Q,le,Pe,Me,d,s)}catch(rt){return le.forEach(Xe=>{Ye[Xe.route.id]={type:ln.error,error:rt}}),Ye}for(let[rt,Xe]of Object.entries(Fe))if(q7(Xe)){let et=Xe.result;Ye[rt]={type:ln.redirect,response:H7(et,Q,rt,Pe,x,k.v7_relativeSplatPath)}}else Ye[rt]=await U7(Xe);return Ye}async function Ar(X,Y,Q,le,Pe){let Me=X.matches,Fe=Jt("loader",X,Pe,Q,Y,null),Ye=Promise.all(le.map(async et=>{if(et.matches&&et.match&&et.controller){let Ae=(await Jt("loader",X,Pu(e.history,et.path,et.controller.signal),[et.match],et.matches,et.key))[et.match.route.id];return{[et.key]:Ae}}else return Promise.resolve({[et.key]:{type:ln.error,error:xo(404,{pathname:et.path})}})})),rt=await Fe,Xe=(await Ye).reduce((et,Ie)=>Object.assign(et,Ie),{});return await Promise.all([X7(Y,rt,Pe.signal,Me,X.loaderData),J7(Y,Xe,le)]),{loaderResults:rt,fetcherResults:Xe}}function Br(){Je=!0,je.push(...ur()),ct.forEach((X,Y)=>{Le.has(Y)&&Se.add(Y),Oe(Y)})}function cr(X,Y,Q){Q===void 0&&(Q={}),K.fetchers.set(X,Y),jt({fetchers:new Map(K.fetchers)},{flushSync:(Q&&Q.flushSync)===!0})}function nr(X,Y,Q,le){le===void 0&&(le={});let Pe=vc(K.matches,Y);lr(X),jt({errors:{[Pe.route.id]:Q},fetchers:new Map(K.fetchers)},{flushSync:(le&&le.flushSync)===!0})}function Kt(X){return k.v7_fetcherPersist&&(Mt.set(X,(Mt.get(X)||0)+1),vt.has(X)&&vt.delete(X)),K.fetchers.get(X)||D7}function lr(X){let Y=K.fetchers.get(X);Le.has(X)&&!(Y&&Y.state==="loading"&&Qe.has(X))&&Oe(X),ct.delete(X),Qe.delete(X),st.delete(X),vt.delete(X),Se.delete(X),K.fetchers.delete(X)}function Wr(X){if(k.v7_fetcherPersist){let Y=(Mt.get(X)||0)-1;Y<=0?(Mt.delete(X),vt.add(X)):Mt.set(X,Y)}else lr(X);jt({fetchers:new Map(K.fetchers)})}function Oe(X){let Y=Le.get(X);Y&&(Y.abort(),Le.delete(X))}function St(X){for(let Y of X){let Q=Kt(Y),le=hl(Q.data);K.fetchers.set(Y,le)}}function _t(){let X=[],Y=!1;for(let Q of st){let le=K.fetchers.get(Q);Rr(le,"Expected fetcher: "+Q),le.state==="loading"&&(st.delete(Q),X.push(Q),Y=!0)}return St(X),Y}function Ce(X){let Y=[];for(let[Q,le]of Qe)if(le<X){let Pe=K.fetchers.get(Q);Rr(Pe,"Expected fetcher: "+Q),Pe.state==="loading"&&(Oe(Q),Qe.delete(Q),Y.push(Q))}return St(Y),Y.length>0}function He(X,Y){let Q=K.blockers.get(X)||cp;return tr.get(X)!==Y&&tr.set(X,Y),Q}function Ze(X){K.blockers.delete(X),tr.delete(X)}function wt(X,Y){let Q=K.blockers.get(X)||cp;Rr(Q.state==="unblocked"&&Y.state==="blocked"||Q.state==="blocked"&&Y.state==="blocked"||Q.state==="blocked"&&Y.state==="proceeding"||Q.state==="blocked"&&Y.state==="unblocked"||Q.state==="proceeding"&&Y.state==="unblocked","Invalid blocker state transition: "+Q.state+" -> "+Y.state);let le=new Map(K.blockers);le.set(X,Y),jt({blockers:le})}function gt(X){let{currentLocation:Y,nextLocation:Q,historyAction:le}=X;if(tr.size===0)return;tr.size>1&&Id(!1,"A router only supports one blocker at a time");let Pe=Array.from(tr.entries()),[Me,Fe]=Pe[Pe.length-1],Ye=K.blockers.get(Me);if(!(Ye&&Ye.state==="proceeding")&&Fe({currentLocation:Y,nextLocation:Q,historyAction:le}))return Me}function kt(X){let Y=xo(404,{pathname:X}),Q=c||p,{matches:le,route:Pe}=eP(Q);return ur(),{notFoundMatches:le,route:Pe,error:Y}}function ur(X){let Y=[];return Dt.forEach((Q,le)=>{(!X||X(le))&&(Q.cancel(),Y.push(le),Dt.delete(le))}),Y}function Lt(X,Y,Q){if(N=X,q=Y,j=Q||null,!B&&K.navigation===tx){B=!0;let le=H(K.location,K.matches);le!=null&&jt({restoreScrollPosition:le})}return()=>{N=null,q=null,j=null}}function dr(X,Y){return j&&j(X,Y.map(le=>d7(le,K.loaderData)))||X.key}function pe(X,Y){if(N&&q){let Q=dr(X,Y);N[Q]=q()}}function H(X,Y){if(N){let Q=dr(X,Y),le=N[Q];if(typeof le=="number")return le}return null}function W(X,Y,Q){if(T)if(X){if(Object.keys(X[0].params).length>0)return{active:!0,matches:Wg(Y,Q,x,!0)}}else return{active:!0,matches:Wg(Y,Q,x,!0)||[]};return{active:!1,matches:null}}async function ne(X,Y,Q){if(!T)return{type:"success",matches:X};let le=X;for(;;){let Pe=c==null,Me=c||p,Fe=d;try{await T({path:Y,matches:le,patch:(Xe,et)=>{Q.aborted||ZT(Xe,et,Me,Fe,s)}})}catch(Xe){return{type:"error",error:Xe,partialMatches:le}}finally{Pe&&!Q.aborted&&(p=[...p])}if(Q.aborted)return{type:"aborted"};let Ye=yc(Me,Y,x);if(Ye)return{type:"success",matches:Ye};let rt=Wg(Me,Y,x,!0);if(!rt||le.length===rt.length&&le.every((Xe,et)=>Xe.route.id===rt[et].route.id))return{type:"success",matches:null};le=rt}}function fe(X){d={},c=Dy(X,s,void 0,d)}function ge(X,Y){let Q=c==null;ZT(X,Y,c||p,d,s),Q&&(p=[...p],jt({}))}return J={get basename(){return x},get future(){return k},get state(){return K},get routes(){return p},get window(){return t},initialize:Ke,subscribe:Ct,enableScrollRestoration:Lt,navigate:vr,fetch:Ue,revalidate:Cr,createHref:X=>e.history.createHref(X),encodeLocation:X=>e.history.encodeLocation(X),getFetcher:Kt,deleteFetcher:Wr,dispose:ft,getBlocker:He,deleteBlocker:Ze,patchRoutes:ge,_internalFetchControllers:Le,_internalActiveDeferreds:Dt,_internalSetRoutes:fe},J}function O7(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function hb(e,t,r,o,s,d,p,c){let x,w;if(p){x=[];for(let k of t)if(x.push(k),k.route.id===p){w=k;break}}else x=t,w=t[t.length-1];let T=vM(s||".",yM(x,d),Df(e.pathname,r)||e.pathname,c==="path");if(s==null&&(T.search=e.search,T.hash=e.hash),(s==null||s===""||s===".")&&w){let k=SS(T.search);if(w.route.index&&!k)T.search=T.search?T.search.replace(/^\?/,"?index&"):"?index";else if(!w.route.index&&k){let E=new URLSearchParams(T.search),M=E.getAll("index");E.delete("index"),M.filter(j=>j).forEach(j=>E.append("index",j));let N=E.toString();T.search=N?"?"+N:""}}return o&&r!=="/"&&(T.pathname=T.pathname==="/"?r:Al([r,T.pathname])),Mf(T)}function HT(e,t,r,o){if(!o||!O7(o))return{path:r};if(o.formMethod&&!K7(o.formMethod))return{path:r,error:xo(405,{method:o.formMethod})};let s=()=>({path:r,error:xo(400,{type:"invalid-body"})}),d=o.formMethod||"get",p=e?d.toUpperCase():d.toLowerCase(),c=SM(r);if(o.body!==void 0){if(o.formEncType==="text/plain"){if(!Ra(p))return s();let E=typeof o.body=="string"?o.body:o.body instanceof FormData||o.body instanceof URLSearchParams?Array.from(o.body.entries()).reduce((M,N)=>{let[j,q]=N;return""+M+j+"="+q+`
`},""):String(o.body);return{path:r,submission:{formMethod:p,formAction:c,formEncType:o.formEncType,formData:void 0,json:void 0,text:E}}}else if(o.formEncType==="application/json"){if(!Ra(p))return s();try{let E=typeof o.body=="string"?JSON.parse(o.body):o.body;return{path:r,submission:{formMethod:p,formAction:c,formEncType:o.formEncType,formData:void 0,json:E,text:void 0}}}catch{return s()}}}Rr(typeof FormData=="function","FormData is not available in this environment");let x,w;if(o.formData)x=fb(o.formData),w=o.formData;else if(o.body instanceof FormData)x=fb(o.body),w=o.body;else if(o.body instanceof URLSearchParams)x=o.body,w=XT(x);else if(o.body==null)x=new URLSearchParams,w=new FormData;else try{x=new URLSearchParams(o.body),w=XT(x)}catch{return s()}let T={formMethod:p,formAction:c,formEncType:o&&o.formEncType||"application/x-www-form-urlencoded",formData:w,json:void 0,text:void 0};if(Ra(T.formMethod))return{path:r,submission:T};let k=Nl(r);return t&&k.search&&SS(k.search)&&x.append("index",""),k.search="?"+x,{path:Mf(k),submission:T}}function WT(e,t,r){r===void 0&&(r=!1);let o=e.findIndex(s=>s.route.id===t);return o>=0?e.slice(0,r?o+1:o):e}function GT(e,t,r,o,s,d,p,c,x,w,T,k,E,M,N,j){let q=j?Oo(j[1])?j[1].error:j[1].data:void 0,B=e.createURL(t.location),D=e.createURL(s),$=r;d&&t.errors?$=WT(r,Object.keys(t.errors)[0],!0):j&&Oo(j[1])&&($=WT(r,j[0]));let ie=j?j[1].statusCode:void 0,J=p&&ie&&ie>=400,K=$.filter((ae,we)=>{let{route:xe}=ae;if(xe.lazy)return!0;if(xe.loader==null)return!1;if(d)return pb(xe,t.loaderData,t.errors);if(B7(t.loaderData,t.matches[we],ae)||x.some($e=>$e===ae.route.id))return!0;let ke=t.matches[we],Ee=ae;return qT(ae,An({currentUrl:B,currentParams:ke.params,nextUrl:D,nextParams:Ee.params},o,{actionResult:q,actionStatus:ie,defaultShouldRevalidate:J?!1:c||B.pathname+B.search===D.pathname+D.search||B.search!==D.search||bM(ke,Ee)}))}),se=[];return k.forEach((ae,we)=>{if(d||!r.some(Je=>Je.route.id===ae.routeId)||T.has(we))return;let xe=yc(M,ae.path,N);if(!xe){se.push({key:we,routeId:ae.routeId,path:ae.path,matches:null,match:null,controller:null});return}let ke=t.fetchers.get(we),Ee=wp(xe,ae.path),$e=!1;E.has(we)?$e=!1:w.has(we)?(w.delete(we),$e=!0):ke&&ke.state!=="idle"&&ke.data===void 0?$e=c:$e=qT(Ee,An({currentUrl:B,currentParams:t.matches[t.matches.length-1].params,nextUrl:D,nextParams:r[r.length-1].params},o,{actionResult:q,actionStatus:ie,defaultShouldRevalidate:J?!1:c})),$e&&se.push({key:we,routeId:ae.routeId,path:ae.path,matches:xe,match:Ee,controller:new AbortController})}),[K,se]}function pb(e,t,r){if(e.lazy)return!0;if(!e.loader)return!1;let o=t!=null&&t[e.id]!==void 0,s=r!=null&&r[e.id]!==void 0;return!o&&s?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!o&&!s}function B7(e,t,r){let o=!t||r.route.id!==t.route.id,s=e[r.route.id]===void 0;return o||s}function bM(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function qT(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}function ZT(e,t,r,o,s){var d;let p;if(e){let w=o[e];Rr(w,"No route found to patch children into: routeId = "+e),w.children||(w.children=[]),p=w.children}else p=r;let c=t.filter(w=>!p.some(T=>wM(w,T))),x=Dy(c,s,[e||"_","patch",String(((d=p)==null?void 0:d.length)||"0")],o);p.push(...x)}function wM(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((r,o)=>{var s;return(s=t.children)==null?void 0:s.some(d=>wM(r,d))}):!1}async function F7(e,t,r){if(!e.lazy)return;let o=await e.lazy();if(!e.lazy)return;let s=r[e.id];Rr(s,"No route found in manifest");let d={};for(let p in o){let x=s[p]!==void 0&&p!=="hasErrorBoundary";Id(!x,'Route "'+s.id+'" has a static property "'+p+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+p+'" will be ignored.')),!x&&!c7.has(p)&&(d[p]=o[p])}Object.assign(s,d),Object.assign(s,An({},t(s),{lazy:void 0}))}async function N7(e){let{matches:t}=e,r=t.filter(s=>s.shouldLoad);return(await Promise.all(r.map(s=>s.resolve()))).reduce((s,d,p)=>Object.assign(s,{[r[p].route.id]:d}),{})}async function j7(e,t,r,o,s,d,p,c,x,w){let T=d.map(M=>M.route.lazy?F7(M.route,x,c):void 0),k=d.map((M,N)=>{let j=T[N],q=s.some(D=>D.route.id===M.route.id);return An({},M,{shouldLoad:q,resolve:async D=>(D&&o.method==="GET"&&(M.route.lazy||M.route.loader)&&(q=!0),q?V7(t,o,M,j,D,w):Promise.resolve({type:ln.data,result:void 0}))})}),E=await e({matches:k,request:o,params:d[0].params,fetcherKey:p,context:w});try{await Promise.all(T)}catch{}return E}async function V7(e,t,r,o,s,d){let p,c,x=w=>{let T,k=new Promise((N,j)=>T=j);c=()=>T(),t.signal.addEventListener("abort",c);let E=N=>typeof w!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):w({request:t,params:r.params,context:d},...N!==void 0?[N]:[]),M=(async()=>{try{return{type:"data",result:await(s?s(j=>E(j)):E())}}catch(N){return{type:"error",result:N}}})();return Promise.race([M,k])};try{let w=r.route[e];if(o)if(w){let T,[k]=await Promise.all([x(w).catch(E=>{T=E}),o]);if(T!==void 0)throw T;p=k}else if(await o,w=r.route[e],w)p=await x(w);else if(e==="action"){let T=new URL(t.url),k=T.pathname+T.search;throw xo(405,{method:t.method,pathname:k,routeId:r.route.id})}else return{type:ln.data,result:void 0};else if(w)p=await x(w);else{let T=new URL(t.url),k=T.pathname+T.search;throw xo(404,{pathname:k})}Rr(p.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(w){return{type:ln.error,result:w}}finally{c&&t.signal.removeEventListener("abort",c)}return p}async function U7(e){let{result:t,type:r}=e;if(CM(t)){let w;try{let T=t.headers.get("Content-Type");T&&/\bapplication\/json\b/.test(T)?t.body==null?w=null:w=await t.json():w=await t.text()}catch(T){return{type:ln.error,error:T}}return r===ln.error?{type:ln.error,error:new Ly(t.status,t.statusText,w),statusCode:t.status,headers:t.headers}:{type:ln.data,data:w,statusCode:t.status,headers:t.headers}}if(r===ln.error){if(tP(t)){var o;if(t.data instanceof Error){var s;return{type:ln.error,error:t.data,statusCode:(s=t.init)==null?void 0:s.status}}t=new Ly(((o=t.init)==null?void 0:o.status)||500,void 0,t.data)}return{type:ln.error,error:t,statusCode:n0(t)?t.status:void 0}}if(Z7(t)){var d,p;return{type:ln.deferred,deferredData:t,statusCode:(d=t.init)==null?void 0:d.status,headers:((p=t.init)==null?void 0:p.headers)&&new Headers(t.init.headers)}}if(tP(t)){var c,x;return{type:ln.data,data:t.data,statusCode:(c=t.init)==null?void 0:c.status,headers:(x=t.init)!=null&&x.headers?new Headers(t.init.headers):void 0}}return{type:ln.data,data:t}}function H7(e,t,r,o,s,d){let p=e.headers.get("Location");if(Rr(p,"Redirects returned/thrown from loaders/actions must have a Location header"),!bS.test(p)){let c=o.slice(0,o.findIndex(x=>x.route.id===r)+1);p=hb(new URL(t.url),c,s,!0,p,d),e.headers.set("Location",p)}return e}function KT(e,t,r){if(bS.test(e)){let o=e,s=o.startsWith("//")?new URL(t.protocol+o):new URL(o),d=Df(s.pathname,r)!=null;if(s.origin===t.origin&&d)return s.pathname+s.search+s.hash}return e}function Pu(e,t,r,o){let s=e.createURL(SM(t)).toString(),d={signal:r};if(o&&Ra(o.formMethod)){let{formMethod:p,formEncType:c}=o;d.method=p.toUpperCase(),c==="application/json"?(d.headers=new Headers({"Content-Type":c}),d.body=JSON.stringify(o.json)):c==="text/plain"?d.body=o.text:c==="application/x-www-form-urlencoded"&&o.formData?d.body=fb(o.formData):d.body=o.formData}return new Request(s,d)}function fb(e){let t=new URLSearchParams;for(let[r,o]of e.entries())t.append(r,typeof o=="string"?o:o.name);return t}function XT(e){let t=new FormData;for(let[r,o]of e.entries())t.append(r,o);return t}function W7(e,t,r,o,s){let d={},p=null,c,x=!1,w={},T=r&&Oo(r[1])?r[1].error:void 0;return e.forEach(k=>{if(!(k.route.id in t))return;let E=k.route.id,M=t[E];if(Rr(!wc(M),"Cannot handle redirect results in processLoaderData"),Oo(M)){let N=M.error;T!==void 0&&(N=T,T=void 0),p=p||{};{let j=vc(e,E);p[j.route.id]==null&&(p[j.route.id]=N)}d[E]=void 0,x||(x=!0,c=n0(M.error)?M.error.status:500),M.headers&&(w[E]=M.headers)}else bl(M)?(o.set(E,M.deferredData),d[E]=M.deferredData.data,M.statusCode!=null&&M.statusCode!==200&&!x&&(c=M.statusCode),M.headers&&(w[E]=M.headers)):(d[E]=M.data,M.statusCode&&M.statusCode!==200&&!x&&(c=M.statusCode),M.headers&&(w[E]=M.headers))}),T!==void 0&&r&&(p={[r[0]]:T},d[r[0]]=void 0),{loaderData:d,errors:p,statusCode:c||200,loaderHeaders:w}}function JT(e,t,r,o,s,d,p){let{loaderData:c,errors:x}=W7(t,r,o,p);return s.forEach(w=>{let{key:T,match:k,controller:E}=w,M=d[T];if(Rr(M,"Did not find corresponding fetcher result"),!(E&&E.signal.aborted))if(Oo(M)){let N=vc(e.matches,k==null?void 0:k.route.id);x&&x[N.route.id]||(x=An({},x,{[N.route.id]:M.error})),e.fetchers.delete(T)}else if(wc(M))Rr(!1,"Unhandled fetcher revalidation redirect");else if(bl(M))Rr(!1,"Unhandled fetcher deferred data");else{let N=hl(M.data);e.fetchers.set(T,N)}}),{loaderData:c,errors:x}}function YT(e,t,r,o){let s=An({},t);for(let d of r){let p=d.route.id;if(t.hasOwnProperty(p)?t[p]!==void 0&&(s[p]=t[p]):e[p]!==void 0&&d.route.loader&&(s[p]=e[p]),o&&o.hasOwnProperty(p))break}return s}function QT(e){return e?Oo(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function vc(e,t){return(t?e.slice(0,e.findIndex(o=>o.route.id===t)+1):[...e]).reverse().find(o=>o.route.hasErrorBoundary===!0)||e[0]}function eP(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function xo(e,t){let{pathname:r,routeId:o,method:s,type:d,message:p}=t===void 0?{}:t,c="Unknown Server Error",x="Unknown @remix-run/router error";return e===400?(c="Bad Request",s&&r&&o?x="You made a "+s+' request to "'+r+'" but '+('did not provide a `loader` for route "'+o+'", ')+"so there is no way to handle the request.":d==="defer-action"?x="defer() is not supported in actions":d==="invalid-body"&&(x="Unable to encode submission body")):e===403?(c="Forbidden",x='Route "'+o+'" does not match URL "'+r+'"'):e===404?(c="Not Found",x='No route matches URL "'+r+'"'):e===405&&(c="Method Not Allowed",s&&r&&o?x="You made a "+s.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+o+'", ')+"so there is no way to handle the request.":s&&(x='Invalid request method "'+s.toUpperCase()+'"')),new Ly(e||500,c,new Error(x),!0)}function _g(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[o,s]=t[r];if(wc(s))return{key:o,result:s}}}function SM(e){let t=typeof e=="string"?Nl(e):e;return Mf(An({},t,{hash:""}))}function G7(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function q7(e){return CM(e.result)&&R7.has(e.result.status)}function bl(e){return e.type===ln.deferred}function Oo(e){return e.type===ln.error}function wc(e){return(e&&e.type)===ln.redirect}function tP(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function Z7(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function CM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function K7(e){return z7.has(e.toLowerCase())}function Ra(e){return E7.has(e.toLowerCase())}async function X7(e,t,r,o,s){let d=Object.entries(t);for(let p=0;p<d.length;p++){let[c,x]=d[p],w=e.find(E=>(E==null?void 0:E.route.id)===c);if(!w)continue;let T=o.find(E=>E.route.id===w.route.id),k=T!=null&&!bM(T,w)&&(s&&s[w.route.id])!==void 0;bl(x)&&k&&await wS(x,r,!1).then(E=>{E&&(t[c]=E)})}}async function J7(e,t,r){for(let o=0;o<r.length;o++){let{key:s,routeId:d,controller:p}=r[o],c=t[s];e.find(w=>(w==null?void 0:w.route.id)===d)&&bl(c)&&(Rr(p,"Expected an AbortController for revalidating fetcher deferred result"),await wS(c,p.signal,!0).then(w=>{w&&(t[s]=w)}))}}async function wS(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:ln.data,data:e.deferredData.unwrappedData}}catch(s){return{type:ln.error,error:s}}return{type:ln.data,data:e.deferredData.data}}}function SS(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function wp(e,t){let r=typeof t=="string"?Nl(t).search:t.search;if(e[e.length-1].route.index&&SS(r||""))return e[e.length-1];let o=gM(e);return o[o.length-1]}function rP(e){let{formMethod:t,formAction:r,formEncType:o,text:s,formData:d,json:p}=e;if(!(!t||!r||!o)){if(s!=null)return{formMethod:t,formAction:r,formEncType:o,formData:void 0,json:void 0,text:s};if(d!=null)return{formMethod:t,formAction:r,formEncType:o,formData:d,json:void 0,text:void 0};if(p!==void 0)return{formMethod:t,formAction:r,formEncType:o,formData:void 0,json:p,text:void 0}}}function rx(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Y7(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function up(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Q7(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function hl(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function eH(e,t){try{let r=e.sessionStorage.getItem(xM);if(r){let o=JSON.parse(r);for(let[s,d]of Object.entries(o||{}))d&&Array.isArray(d)&&t.set(s,new Set(d||[]))}}catch{}}function tH(e,t){if(t.size>0){let r={};for(let[o,s]of t)r[o]=[...s];try{e.sessionStorage.setItem(xM,JSON.stringify(r))}catch(o){Id(!1,"Failed to save applied view transitions in sessionStorage ("+o+").")}}}/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $y(){return $y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},$y.apply(this,arguments)}const i0=R.createContext(null),IM=R.createContext(null),o0=R.createContext(null),CS=R.createContext(null),Nd=R.createContext({outlet:null,matches:[],isDataRoute:!1}),TM=R.createContext(null);function a0(){return R.useContext(CS)!=null}function IS(){return a0()||Rr(!1),R.useContext(CS).location}function PM(e){R.useContext(o0).static||R.useLayoutEffect(e)}function rH(){let{isDataRoute:e}=R.useContext(Nd);return e?fH():nH()}function nH(){a0()||Rr(!1);let e=R.useContext(i0),{basename:t,future:r,navigator:o}=R.useContext(o0),{matches:s}=R.useContext(Nd),{pathname:d}=IS(),p=JSON.stringify(yM(s,r.v7_relativeSplatPath)),c=R.useRef(!1);return PM(()=>{c.current=!0}),R.useCallback(function(w,T){if(T===void 0&&(T={}),!c.current)return;if(typeof w=="number"){o.go(w);return}let k=vM(w,JSON.parse(p),d,T.relative==="path");e==null&&t!=="/"&&(k.pathname=k.pathname==="/"?t:Al([t,k.pathname])),(T.replace?o.replace:o.push)(k,T.state,T)},[t,o,p,d,e])}function iH(e,t,r,o){a0()||Rr(!1);let{navigator:s}=R.useContext(o0),{matches:d}=R.useContext(Nd),p=d[d.length-1],c=p?p.params:{};p&&p.pathname;let x=p?p.pathnameBase:"/";p&&p.route;let w=IS(),T;T=w;let k=T.pathname||"/",E=k;if(x!=="/"){let j=x.replace(/^\//,"").split("/");E="/"+k.replace(/^\//,"").split("/").slice(j.length).join("/")}let M=yc(e,{pathname:E});return cH(M&&M.map(j=>Object.assign({},j,{params:Object.assign({},c,j.params),pathname:Al([x,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?x:Al([x,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),d,r,o)}function oH(){let e=pH(),t=n0(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),r?R.createElement("pre",{style:s},r):null,null)}const aH=R.createElement(oH,null);class sH extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?R.createElement(Nd.Provider,{value:this.props.routeContext},R.createElement(TM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lH(e){let{routeContext:t,match:r,children:o}=e,s=R.useContext(i0);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),R.createElement(Nd.Provider,{value:t},o)}function cH(e,t,r,o){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),o===void 0&&(o=null),e==null){var d;if(!r)return null;if(r.errors)e=r.matches;else if((d=o)!=null&&d.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let p=e,c=(s=r)==null?void 0:s.errors;if(c!=null){let T=p.findIndex(k=>k.route.id&&(c==null?void 0:c[k.route.id])!==void 0);T>=0||Rr(!1),p=p.slice(0,Math.min(p.length,T+1))}let x=!1,w=-1;if(r&&o&&o.v7_partialHydration)for(let T=0;T<p.length;T++){let k=p[T];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(w=T),k.route.id){let{loaderData:E,errors:M}=r,N=k.route.loader&&E[k.route.id]===void 0&&(!M||M[k.route.id]===void 0);if(k.route.lazy||N){x=!0,w>=0?p=p.slice(0,w+1):p=[p[0]];break}}}return p.reduceRight((T,k,E)=>{let M,N=!1,j=null,q=null;r&&(M=c&&k.route.id?c[k.route.id]:void 0,j=k.route.errorElement||aH,x&&(w<0&&E===0?(N=!0,q=null):w===E&&(N=!0,q=k.route.hydrateFallbackElement||null)));let B=t.concat(p.slice(0,E+1)),D=()=>{let $;return M?$=j:N?$=q:k.route.Component?$=R.createElement(k.route.Component,null):k.route.element?$=k.route.element:$=T,R.createElement(lH,{match:k,routeContext:{outlet:T,matches:B,isDataRoute:r!=null},children:$})};return r&&(k.route.ErrorBoundary||k.route.errorElement||E===0)?R.createElement(sH,{location:r.location,revalidation:r.revalidation,component:j,error:M,children:D(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):D()},null)}var kM=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(kM||{}),Oy=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Oy||{});function uH(e){let t=R.useContext(i0);return t||Rr(!1),t}function dH(e){let t=R.useContext(IM);return t||Rr(!1),t}function hH(e){let t=R.useContext(Nd);return t||Rr(!1),t}function EM(e){let t=hH(),r=t.matches[t.matches.length-1];return r.route.id||Rr(!1),r.route.id}function pH(){var e;let t=R.useContext(TM),r=dH(Oy.UseRouteError),o=EM(Oy.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[o]}function fH(){let{router:e}=uH(kM.UseNavigateStable),t=EM(Oy.UseNavigateStable),r=R.useRef(!1);return PM(()=>{r.current=!0}),R.useCallback(function(s,d){d===void 0&&(d={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,$y({fromRouteId:t},d)))},[e,t])}const nP={};function mH(e,t){nP[t]||(nP[t]=!0,console.warn(t))}const ku=(e,t,r)=>mH(e,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+r+"."));function gH(e,t){e!=null&&e.v7_startTransition||ku("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&(!t||!t.v7_relativeSplatPath)&&ku("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(t.v7_fetcherPersist||ku("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),t.v7_normalizeFormMethod||ku("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),t.v7_partialHydration||ku("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),t.v7_skipActionErrorRevalidation||ku("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function mb(e){Rr(!1)}function yH(e){let{basename:t="/",children:r=null,location:o,navigationType:s=ti.Pop,navigator:d,static:p=!1,future:c}=e;a0()&&Rr(!1);let x=t.replace(/^\/*/,"/"),w=R.useMemo(()=>({basename:x,navigator:d,static:p,future:$y({v7_relativeSplatPath:!1},c)}),[x,c,d,p]);typeof o=="string"&&(o=Nl(o));let{pathname:T="/",search:k="",hash:E="",state:M=null,key:N="default"}=o,j=R.useMemo(()=>{let q=Df(T,x);return q==null?null:{location:{pathname:q,search:k,hash:E,state:M,key:N},navigationType:s}},[x,T,k,E,M,N,s]);return j==null?null:R.createElement(o0.Provider,{value:w},R.createElement(CS.Provider,{children:r,value:j}))}new Promise(()=>{});function gb(e,t){t===void 0&&(t=[]);let r=[];return R.Children.forEach(e,(o,s)=>{if(!R.isValidElement(o))return;let d=[...t,s];if(o.type===R.Fragment){r.push.apply(r,gb(o.props.children,d));return}o.type!==mb&&Rr(!1),!o.props.index||!o.props.children||Rr(!1);let p={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(p.children=gb(o.props.children,d)),r.push(p)}),r}function vH(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:R.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:R.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:R.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},By.apply(this,arguments)}function yb(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let o=e[r];return t.concat(Array.isArray(o)?o.map(s=>[r,s]):[[r,o]])},[]))}function _H(e,t){let r=yb(e);return t&&t.forEach((o,s)=>{r.has(s)||t.getAll(s).forEach(d=>{r.append(s,d)})}),r}const xH="6";try{window.__reactRouterVersion=xH}catch{}function bH(e,t){return $7({basename:void 0,future:By({},void 0,{v7_prependBasename:!0}),history:a7({window:void 0}),hydrationData:wH(),routes:e,mapRouteProperties:vH,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function wH(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=By({},t,{errors:SH(t.errors)})),t}function SH(e){if(!e)return null;let t=Object.entries(e),r={};for(let[o,s]of t)if(s&&s.__type==="RouteErrorResponse")r[o]=new Ly(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let d=window[s.__subType];if(typeof d=="function")try{let p=new d(s.message);p.stack="",r[o]=p}catch{}}if(r[o]==null){let d=new Error(s.message);d.stack="",r[o]=d}}else r[o]=s;return r}const CH=R.createContext({isTransitioning:!1}),IH=R.createContext(new Map),TH="startTransition",iP=ey[TH],PH="flushSync",oP=q6[PH];function kH(e){iP?iP(e):e()}function dp(e){oP?oP(e):e()}class EH{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",t(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",r(o))}})}}function AH(e){let{fallbackElement:t,router:r,future:o}=e,[s,d]=R.useState(r.state),[p,c]=R.useState(),[x,w]=R.useState({isTransitioning:!1}),[T,k]=R.useState(),[E,M]=R.useState(),[N,j]=R.useState(),q=R.useRef(new Map),{v7_startTransition:B}=o||{},D=R.useCallback(ae=>{B?kH(ae):ae()},[B]),$=R.useCallback((ae,we)=>{let{deletedFetchers:xe,flushSync:ke,viewTransitionOpts:Ee}=we;xe.forEach(Je=>q.current.delete(Je)),ae.fetchers.forEach((Je,je)=>{Je.data!==void 0&&q.current.set(je,Je.data)});let $e=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!Ee||$e){ke?dp(()=>d(ae)):D(()=>d(ae));return}if(ke){dp(()=>{E&&(T&&T.resolve(),E.skipTransition()),w({isTransitioning:!0,flushSync:!0,currentLocation:Ee.currentLocation,nextLocation:Ee.nextLocation})});let Je=r.window.document.startViewTransition(()=>{dp(()=>d(ae))});Je.finished.finally(()=>{dp(()=>{k(void 0),M(void 0),c(void 0),w({isTransitioning:!1})})}),dp(()=>M(Je));return}E?(T&&T.resolve(),E.skipTransition(),j({state:ae,currentLocation:Ee.currentLocation,nextLocation:Ee.nextLocation})):(c(ae),w({isTransitioning:!0,flushSync:!1,currentLocation:Ee.currentLocation,nextLocation:Ee.nextLocation}))},[r.window,E,T,q,D]);R.useLayoutEffect(()=>r.subscribe($),[r,$]),R.useEffect(()=>{x.isTransitioning&&!x.flushSync&&k(new EH)},[x]),R.useEffect(()=>{if(T&&p&&r.window){let ae=p,we=T.promise,xe=r.window.document.startViewTransition(async()=>{D(()=>d(ae)),await we});xe.finished.finally(()=>{k(void 0),M(void 0),c(void 0),w({isTransitioning:!1})}),M(xe)}},[D,p,T,r.window]),R.useEffect(()=>{T&&p&&s.location.key===p.location.key&&T.resolve()},[T,E,s.location,p]),R.useEffect(()=>{!x.isTransitioning&&N&&(c(N.state),w({isTransitioning:!0,flushSync:!1,currentLocation:N.currentLocation,nextLocation:N.nextLocation}),j(void 0))},[x.isTransitioning,N]),R.useEffect(()=>{},[]);let ie=R.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:ae=>r.navigate(ae),push:(ae,we,xe)=>r.navigate(ae,{state:we,preventScrollReset:xe==null?void 0:xe.preventScrollReset}),replace:(ae,we,xe)=>r.navigate(ae,{replace:!0,state:we,preventScrollReset:xe==null?void 0:xe.preventScrollReset})}),[r]),J=r.basename||"/",K=R.useMemo(()=>({router:r,navigator:ie,static:!1,basename:J}),[r,ie,J]),se=R.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return R.useEffect(()=>gH(o,r.future),[o,r.future]),R.createElement(R.Fragment,null,R.createElement(i0.Provider,{value:K},R.createElement(IM.Provider,{value:s},R.createElement(IH.Provider,{value:q.current},R.createElement(CH.Provider,{value:x},R.createElement(yH,{basename:J,location:s.location,navigationType:s.historyAction,navigator:ie,future:se},s.initialized||r.future.v7_partialHydration?R.createElement(zH,{routes:r.routes,future:r.future,state:s}):t))))),null)}const zH=R.memo(RH);function RH(e){let{routes:t,future:r,state:o}=e;return iH(t,void 0,o,r)}var aP;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(aP||(aP={}));var sP;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(sP||(sP={}));function MH(e){let t=R.useRef(yb(e)),r=R.useRef(!1),o=IS(),s=R.useMemo(()=>_H(o.search,r.current?null:t.current),[o.search]),d=rH(),p=R.useCallback((c,x)=>{const w=yb(typeof c=="function"?c(s):c);r.current=!0,d("?"+w,x)},[d,s]);return[s,p]}function Cn(e,t){if(e==null)throw new Error(t);return e}function DH(e,t){if(!e)throw new Error(`assertion failed: ${t}`);return e}var Ki=(e=>(e[e.Arizona=0]="Arizona",e[e.Arkansas=1]="Arkansas",e[e.Colorado=2]="Colorado",e[e.Idaho=3]="Idaho",e[e.Kansas=4]="Kansas",e[e.Montana=5]="Montana",e[e.Nebraska=6]="Nebraska",e[e.Nevada=7]="Nevada",e[e.NewMexico=8]="NewMexico",e[e.Oklahoma=9]="Oklahoma",e[e.Oregon=10]="Oregon",e[e.Texas=11]="Texas",e[e.Utah=12]="Utah",e[e.Washington=13]="Washington",e[e.Wyoming=14]="Wyoming",e))(Ki||{});const uf=new Set([7,0,8,10,13,12,3,2,14,5,11,9,4,6,1]),LH={7:"Nevada",0:"Arizona",8:"New Mexico",10:"Oregon",13:"Washington",12:"Utah",3:"Idaho",2:"Colorado",14:"Wyoming",5:"Montana",11:"Texas",9:"Oklahoma",4:"Kansas",6:"Nebraska",1:"Arkansas"},AM={0:new Set,1:new Set([7]),2:new Set([0]),3:new Set([8]),4:new Set([10]),5:new Set([13]),6:new Set([13,10]),7:new Set([12]),8:new Set([12,8]),9:new Set([3]),10:new Set([3,10]),11:new Set([3,12]),12:new Set([3,13]),13:new Set([2]),14:new Set([2,8]),15:new Set([2,12]),16:new Set([14]),17:new Set([14,2]),18:new Set([14,3]),19:new Set([14,12]),20:new Set([11]),21:new Set([11,8]),22:new Set([5]),23:new Set([5,3]),24:new Set([5,14]),25:new Set([9]),26:new Set([9,2]),27:new Set([9,8]),28:new Set([9,11]),29:new Set([4]),30:new Set([4,2]),31:new Set([4,9]),32:new Set([6]),33:new Set([6,2]),34:new Set([6,4]),35:new Set([6,14]),36:new Set([1]),37:new Set([1,9]),38:new Set([1,11])},$H={1:0,2:1,3:2,7:13,13:9,31:3,37:4,43:20,44:7,47:5,17:29,27:22,36:25,50:16,18:32,19:36};for(const e of Object.values($H))e!==0&&DH(AM[e].size===1);function s0(e){const t=new Set;for(const[r,o]of Object.entries(AM))[...o].every(s=>e.has(s))&&t.add(Number(r));return t}const OH=new Set([]);var zM=(e=>(e[e.Road=0]="Road",e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.Green=3]="Green",e[e.NavRed=4]="NavRed",e[e.NavGreen=5]="NavGreen",e[e.NavBlue=6]="NavBlue",e[e.NavYellow=7]="NavYellow",e[e.NavPurple=8]="NavPurple",e))(zM||{});const BH="modulepreload",FH=function(e){return"/"+e},lP={},NH=function(t,r,o){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),c=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));s=Promise.allSettled(r.map(x=>{if(x=FH(x),x in lP)return;lP[x]=!0;const w=x.endsWith(".css"),T=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${T}`))return;const k=document.createElement("link");if(k.rel=w?"stylesheet":BH,w||(k.as="script"),k.crossOrigin="",k.href=x,c&&k.setAttribute("nonce",c),document.head.appendChild(k),w)return new Promise((E,M)=>{k.addEventListener("load",E),k.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${x}`)))})}))}function d(p){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=p,window.dispatchEvent(c),!c.defaultPrevented)throw p}return s.then(p=>{for(const c of p||[])c.status==="rejected"&&d(c.reason);return t().catch(d)})},RM=R.createContext(null);function jH(){var e;const t=(e=R.useContext(RM))===null||e===void 0?void 0:e.maps,r=R.useContext(Bc);return R.useMemo(()=>({...t,current:r==null?void 0:r.map}),[t,r])}function VH(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0,s=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return r===s&&o===d}function Fo(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Fo(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(const s of r)if(!t.hasOwnProperty(s)||!Fo(e[s],t[s]))return!1;return!0}return!1}function UH(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function cP(e,t){if(!e.getProjection)return;const r=e.getProjection(),o=t.getProjection();Fo(r,o)||t.setProjection(r)}function uP(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function dP(e,t){const r=t.viewState||t;let o=!1;if("zoom"in r){const s=e.zoom;e.zoom=r.zoom,o=o||s!==e.zoom}if("bearing"in r){const s=e.bearing;e.bearing=r.bearing,o=o||s!==e.bearing}if("pitch"in r){const s=e.pitch;e.pitch=r.pitch,o=o||s!==e.pitch}if(r.padding&&!e.isPaddingEqual(r.padding)&&(o=!0,e.padding=r.padding),"longitude"in r&&"latitude"in r){const s=e.center;e.center=new s.constructor(r.longitude,r.latitude),o=o||s!==e.center}return o}const HH=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function hP(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const o of e.layers)t[o.id]=o;const r=e.layers.map(o=>{let s=null;"interactive"in o&&(s=Object.assign({},o),delete s.interactive);const d=t[o.ref];if(d){s=s||Object.assign({},o),delete s.ref;for(const p of HH)p in d&&(s[p]=d[p])}return s||o});return{...e,layers:r}}var pP={};const fP={version:8,sources:{},layers:[]},mP={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},nx={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},gP={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},WH=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],GH=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Td{constructor(t,r,o){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=s=>{const d=this.props[gP[s.type]];d?d(s):s.type==="error"&&console.error(s.error)},this._onPointerEvent=s=>{(s.type==="mousemove"||s.type==="mouseout")&&this._updateHover(s);const d=this.props[mP[s.type]];d&&(this.props.interactiveLayerIds&&s.type!=="mouseover"&&s.type!=="mouseout"&&(s.features=this._hoveredFeatures||this._queryRenderedFeatures(s.point)),d(s),delete s.features)},this._onCameraEvent=s=>{if(!this._internalUpdate){const d=this.props[nx[s.type]];d&&d(s)}s.type in this._deferredEvents&&(this._deferredEvents[s.type]=!1)},this._MapClass=t,this.props=r,this._initialize(o)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const o=this._updateSettings(t,r);o&&this._createShadowTransform(this._map);const s=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(o||s||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const o=Td.savedMaps.pop();if(!o)return null;const s=o.map,d=s.getContainer();for(r.className=d.className;d.childNodes.length>0;)r.appendChild(d.childNodes[0]);s._container=r;const p=s._resizeObserver;p&&(p.disconnect(),p.observe(r)),o.setProps({...t,styleDiffing:!1}),s.resize();const{initialViewState:c}=t;return c&&(c.bounds?s.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):o._updateViewState(c,!1)),s.isStyleLoaded()?s.fire("load"):s.once("styledata",()=>s.fire("load")),s._update(),o}_initialize(t){const{props:r}=this,{mapStyle:o=fP}=r,s={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||qH()||null,container:t,style:hP(o)},d=s.initialViewState||s.viewState||s;if(Object.assign(s,{center:[d.longitude||0,d.latitude||0],zoom:d.zoom||0,pitch:d.pitch||0,bearing:d.bearing||0}),r.gl){const T=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=T,r.gl)}const p=new this._MapClass(s);d.padding&&p.setPadding(d.padding),r.cursor&&(p.getCanvas().style.cursor=r.cursor),this._createShadowTransform(p);const c=p._render;p._render=T=>{this._inRender=!0,c.call(p,T),this._inRender=!1};const x=p._renderTaskQueue.run;p._renderTaskQueue.run=T=>{x.call(p._renderTaskQueue,T),this._onBeforeRepaint()},p.on("render",()=>this._onAfterRepaint());const w=p.fire;p.fire=this._fireEvent.bind(this,w),p.on("resize",()=>{this._renderTransform.resize(p.transform.width,p.transform.height)}),p.on("styledata",()=>{this._updateStyleComponents(this.props,{}),cP(p.transform,this._renderTransform)}),p.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const T in mP)p.on(T,this._onPointerEvent);for(const T in nx)p.on(T,this._onCameraEvent);for(const T in gP)p.on(T,this._onEvent);this._map=p}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),Td.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=UH(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const o=this._map;if(r.width!==o.transform.width||r.height!==o.transform.height)return o.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const o=this._map,s=this._renderTransform,{zoom:d,pitch:p,bearing:c}=s,x=o.isMoving();x&&(s.cameraElevationReference="sea");const w=dP(s,{...uP(o.transform),...t});if(x&&(s.cameraElevationReference="ground"),w&&r){const T=this._deferredEvents;T.move=!0,T.zoom||(T.zoom=d!==s.zoom),T.rotate||(T.rotate=c!==s.bearing),T.pitch||(T.pitch=p!==s.pitch)}return x||dP(o.transform,t),w}_updateSettings(t,r){const o=this._map;let s=!1;for(const d of WH)if(d in t&&!Fo(t[d],r[d])){s=!0;const p=o[`set${d[0].toUpperCase()}${d.slice(1)}`];p==null||p.call(o,t[d])}return s}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==r.mapStyle){const{mapStyle:o=fP,styleDiffing:s=!0}=t,d={diff:s};return"localIdeographFontFamily"in t&&(d.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(hP(o),d),!0}return!1}_updateStyleComponents(t,r){const o=this._map;let s=!1;return o.isStyleLoaded()&&("light"in t&&o.setLight&&!Fo(t.light,r.light)&&(s=!0,o.setLight(t.light)),"fog"in t&&o.setFog&&!Fo(t.fog,r.fog)&&(s=!0,o.setFog(t.fog)),"terrain"in t&&o.setTerrain&&!Fo(t.terrain,r.terrain)&&(!t.terrain||o.getSource(t.terrain.source))&&(s=!0,o.setTerrain(t.terrain))),s}_updateHandlers(t,r){var o,s;const d=this._map;let p=!1;for(const c of GH){const x=(o=t[c])!==null&&o!==void 0?o:!0,w=(s=r[c])!==null&&s!==void 0?s:!0;Fo(x,w)||(p=!0,x?d[c].enable(x):d[c].disable())}return p}_queryRenderedFeatures(t){const r=this._map,o=r.transform,{interactiveLayerIds:s=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(t,{layers:s.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=o}}_updateHover(t){var r;const{props:o}=this;if(o.interactiveLayerIds&&(o.onMouseMove||o.onMouseEnter||o.onMouseLeave)){const d=t.type,p=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,c=this._queryRenderedFeatures(t.point),x=c.length>0;!x&&p&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=c,x&&!p&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,r,o){const s=this._map,d=s.transform,p=typeof r=="string"?r:r.type;return p==="move"&&this._updateViewState(this.props,!1),p in nx&&(typeof r=="object"&&(r.viewState=uP(d)),this._map.isMoving())?(s.transform=this._renderTransform,t.call(s,r,o),s.transform=d,s):(t.call(s,r,o),s)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const o in this._deferredEvents)this._deferredEvents[o]&&t.fire(o);this._internalUpdate=!1;const r=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{cP(this._renderTransform,r),t.transform=r}}}Td.savedMaps=[];function qH(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||pP.MapboxAccessToken}catch{}try{e=e||pP.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const ZH=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function KH(e){if(!e)return null;const t=e.map,r={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:o=>{const s=t.transform;t.transform=e.transform;const d=t.project(o);return t.transform=s,d},unproject:o=>{const s=t.transform;t.transform=e.transform;const d=t.unproject(o);return t.transform=s,d},queryTerrainElevation:(o,s)=>{const d=t.transform;t.transform=e.transform;const p=t.queryTerrainElevation(o,s);return t.transform=d,p},queryRenderedFeatures:(o,s)=>{const d=t.transform;t.transform=e.transform;const p=t.queryRenderedFeatures(o,s);return t.transform=d,p}};for(const o of XH(t))!(o in r)&&!ZH.includes(o)&&(r[o]=t[o].bind(t));return r}function XH(e){const t=new Set;let r=e;for(;r;){for(const o of Object.getOwnPropertyNames(r))o[0]!=="_"&&typeof e[o]=="function"&&o!=="fire"&&o!=="setEventedParent"&&t.add(o);r=Object.getPrototypeOf(r)}return Array.from(t)}const JH=typeof document<"u"?R.useLayoutEffect:R.useEffect,YH=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function QH(e,t){for(const o of YH)o in t&&(e[o]=t[o]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;r&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r,o=>{o&&console.error(o)},!0)}const Bc=R.createContext(null);function eW(e,t,r){const o=R.useContext(RM),[s,d]=R.useState(null),p=R.useRef(),{current:c}=R.useRef({mapLib:null,map:null});R.useEffect(()=>{const T=e.mapLib;let k=!0,E;return Promise.resolve(T||r).then(M=>{if(!k)return;if(!M)throw new Error("Invalid mapLib");const N="Map"in M?M:M.default;if(!N.Map)throw new Error("Invalid mapLib");if(QH(N,e),!N.supported||N.supported(e))e.reuseMaps&&(E=Td.reuse(e,p.current)),E||(E=new Td(N.Map,e,p.current)),c.map=KH(E),c.mapLib=N,d(E),o==null||o.onMapMount(c.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(M=>{const{onError:N}=e;N?N({type:"error",target:null,originalEvent:null,error:M}):console.error(M)}),()=>{k=!1,E&&(o==null||o.onMapUnmount(e.id),e.reuseMaps?E.recycle():E.destroy())}},[]),JH(()=>{s&&s.setProps(e)}),R.useImperativeHandle(t,()=>c.map,[s]);const x=R.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),w={height:"100%"};return R.createElement("div",{id:e.id,ref:p,style:x},s&&R.createElement(Bc.Provider,{value:c},R.createElement("div",{"mapboxgl-children":"",style:w},e.children)))}const tW=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Fc(e,t){if(!e||!t)return;const r=e.style;for(const o in t){const s=t[o];Number.isFinite(s)&&!tW.test(o)?r[o]=`${s}px`:r[o]=s}}function rW(e,t){const{map:r,mapLib:o}=R.useContext(Bc),s=R.useRef({props:e});s.current.props=e;const d=R.useMemo(()=>{let j=!1;R.Children.forEach(e.children,D=>{D&&(j=!0)});const q={...e,element:j?document.createElement("div"):null},B=new o.Marker(q);return B.setLngLat([e.longitude,e.latitude]),B.getElement().addEventListener("click",D=>{var $,ie;(ie=($=s.current.props).onClick)===null||ie===void 0||ie.call($,{type:"click",target:B,originalEvent:D})}),B.on("dragstart",D=>{var $,ie;const J=D;J.lngLat=d.getLngLat(),(ie=($=s.current.props).onDragStart)===null||ie===void 0||ie.call($,J)}),B.on("drag",D=>{var $,ie;const J=D;J.lngLat=d.getLngLat(),(ie=($=s.current.props).onDrag)===null||ie===void 0||ie.call($,J)}),B.on("dragend",D=>{var $,ie;const J=D;J.lngLat=d.getLngLat(),(ie=($=s.current.props).onDragEnd)===null||ie===void 0||ie.call($,J)}),B},[]);R.useEffect(()=>(d.addTo(r.getMap()),()=>{d.remove()}),[]);const{longitude:p,latitude:c,offset:x,style:w,draggable:T=!1,popup:k=null,rotation:E=0,rotationAlignment:M="auto",pitchAlignment:N="auto"}=e;return R.useEffect(()=>{Fc(d.getElement(),w)},[w]),R.useImperativeHandle(t,()=>d,[]),(d.getLngLat().lng!==p||d.getLngLat().lat!==c)&&d.setLngLat([p,c]),x&&!VH(d.getOffset(),x)&&d.setOffset(x),d.isDraggable()!==T&&d.setDraggable(T),d.getRotation()!==E&&d.setRotation(E),d.getRotationAlignment()!==M&&d.setRotationAlignment(M),d.getPitchAlignment()!==N&&d.setPitchAlignment(N),d.getPopup()!==k&&d.setPopup(k),$d.createPortal(e.children,d.getElement())}const nW=R.memo(R.forwardRef(rW));function yP(e){return new Set(e?e.trim().split(/\s+/):[])}function iW(e,t){const{map:r,mapLib:o}=R.useContext(Bc),s=R.useMemo(()=>document.createElement("div"),[]),d=R.useRef({props:e});d.current.props=e;const p=R.useMemo(()=>{const c={...e},x=new o.Popup(c);return x.setLngLat([e.longitude,e.latitude]),x.once("open",w=>{var T,k;(k=(T=d.current.props).onOpen)===null||k===void 0||k.call(T,w)}),x},[]);if(R.useEffect(()=>{const c=x=>{var w,T;(T=(w=d.current.props).onClose)===null||T===void 0||T.call(w,x)};return p.on("close",c),p.setDOMContent(s).addTo(r.getMap()),()=>{p.off("close",c),p.isOpen()&&p.remove()}},[]),R.useEffect(()=>{Fc(p.getElement(),e.style)},[e.style]),R.useImperativeHandle(t,()=>p,[]),p.isOpen()&&((p.getLngLat().lng!==e.longitude||p.getLngLat().lat!==e.latitude)&&p.setLngLat([e.longitude,e.latitude]),e.offset&&!Fo(p.options.offset,e.offset)&&p.setOffset(e.offset),(p.options.anchor!==e.anchor||p.options.maxWidth!==e.maxWidth)&&(p.options.anchor=e.anchor,p.setMaxWidth(e.maxWidth)),p.options.className!==e.className)){const c=yP(p.options.className),x=yP(e.className);for(const w of c)x.has(w)||p.removeClassName(w);for(const w of x)c.has(w)||p.addClassName(w);p.options.className=e.className}return $d.createPortal(e.children,s)}R.memo(R.forwardRef(iW));function Ws(e,t,r,o){const s=R.useContext(Bc),d=R.useMemo(()=>e(s),[]);return R.useEffect(()=>{const p=t,c=typeof t=="function"?t:null,{map:x}=s;return x.hasControl(d)||x.addControl(d,p==null?void 0:p.position),()=>{c&&c(s),x.hasControl(d)&&x.removeControl(d)}},[]),d}function oW(e){const t=Ws(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return R.useEffect(()=>{Fc(t._container,e.style)},[e.style]),null}const aW=R.memo(oW);function sW(e){const t=Ws(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return R.useEffect(()=>{Fc(t._controlContainer,e.style)},[e.style]),null}const lW=R.memo(sW);function cW(e,t){const r=R.useRef({props:e}),o=Ws(({mapLib:s})=>{const d=new s.GeolocateControl(e),p=d._setupUI;return d._setupUI=c=>{d._container.hasChildNodes()||p(c)},d.on("geolocate",c=>{var x,w;(w=(x=r.current.props).onGeolocate)===null||w===void 0||w.call(x,c)}),d.on("error",c=>{var x,w;(w=(x=r.current.props).onError)===null||w===void 0||w.call(x,c)}),d.on("outofmaxbounds",c=>{var x,w;(w=(x=r.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(x,c)}),d.on("trackuserlocationstart",c=>{var x,w;(w=(x=r.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(x,c)}),d.on("trackuserlocationend",c=>{var x,w;(w=(x=r.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(x,c)}),d},{position:e.position});return r.current.props=e,R.useImperativeHandle(t,()=>o,[]),R.useEffect(()=>{Fc(o._container,e.style)},[e.style]),null}R.memo(R.forwardRef(cW));function uW(e){const t=Ws(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return R.useEffect(()=>{Fc(t._container,e.style)},[e.style]),null}const dW=R.memo(uW);function hW(e){const t=Ws(({mapLib:d})=>new d.ScaleControl(e),{position:e.position}),r=R.useRef(e),o=r.current;r.current=e;const{style:s}=e;return e.maxWidth!==void 0&&e.maxWidth!==o.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==o.unit&&t.setUnit(e.unit),R.useEffect(()=>{Fc(t._container,s)},[s]),null}R.memo(hW);function Fy(e,t){if(!e)throw new Error(t)}function pW(e,t,r,o){if(Fy(r.id===o.id,"layer id changed"),Fy(r.type===o.type,"layer type changed"),r.type==="custom"||o.type==="custom")return;const{layout:s={},paint:d={},filter:p,minzoom:c,maxzoom:x,beforeId:w}=r;if(w!==o.beforeId&&e.moveLayer(t,w),s!==o.layout){const T=o.layout||{};for(const k in s)Fo(s[k],T[k])||e.setLayoutProperty(t,k,s[k]);for(const k in T)s.hasOwnProperty(k)||e.setLayoutProperty(t,k,void 0)}if(d!==o.paint){const T=o.paint||{};for(const k in d)Fo(d[k],T[k])||e.setPaintProperty(t,k,d[k]);for(const k in T)d.hasOwnProperty(k)||e.setPaintProperty(t,k,void 0)}Fo(p,o.filter)||e.setFilter(t,p),(c!==o.minzoom||x!==o.maxzoom)&&e.setLayerZoomRange(t,c,x)}function fW(e,t,r){if(e.style&&e.style._loaded&&(!("source"in r)||e.getSource(r.source))){const o={...r,id:t};delete o.beforeId,e.addLayer(o,r.beforeId)}}let mW=0;function gW(e){const t=R.useContext(Bc).map.getMap(),r=R.useRef(e),[,o]=R.useState(0),s=R.useMemo(()=>e.id||`jsx-layer-${mW++}`,[]);if(R.useEffect(()=>{if(t){const p=()=>o(c=>c+1);return t.on("styledata",p),p(),()=>{t.off("styledata",p),t.style&&t.style._loaded&&t.getLayer(s)&&t.removeLayer(s)}}},[t]),t&&t.style&&t.getLayer(s))try{pW(t,s,e,r.current)}catch(p){console.warn(p)}else fW(t,s,e);return r.current=e,null}let yW=0;function vW(e,t,r){if(e.style&&e.style._loaded){const o={...r};return delete o.id,delete o.children,e.addSource(t,o),e.getSource(t)}return null}function _W(e,t,r){Fy(t.id===r.id,"source id changed"),Fy(t.type===r.type,"source type changed");let o="",s=0;for(const p in t)p!=="children"&&p!=="id"&&!Fo(r[p],t[p])&&(o=p,s++);if(!s)return;const d=t.type;d==="geojson"?e.setData(t.data):d==="image"?e.updateImage({url:t.url,coordinates:t.coordinates}):"setCoordinates"in e&&s===1&&o==="coordinates"?e.setCoordinates(t.coordinates):"setUrl"in e&&o==="url"?e.setUrl(t.url):"setTiles"in e&&o==="tiles"?e.setTiles(t.tiles):console.warn(`Unable to update <Source> prop: ${o}`)}function xW(e){const t=R.useContext(Bc).map.getMap(),r=R.useRef(e),[,o]=R.useState(0),s=R.useMemo(()=>e.id||`jsx-source-${yW++}`,[]);R.useEffect(()=>{if(t){const p=()=>setTimeout(()=>o(c=>c+1),0);return t.on("styledata",p),p(),()=>{var c;if(t.off("styledata",p),t.style&&t.style._loaded&&t.getSource(s)){const x=(c=t.getStyle())===null||c===void 0?void 0:c.layers;if(x)for(const w of x)w.source===s&&t.removeLayer(w.id);t.removeSource(s)}}}},[t]);let d=t&&t.style&&t.getSource(s);return d?_W(d,e,r.current):d=vW(t,s,e),r.current=e,d&&R.Children.map(e.children,p=>p&&R.cloneElement(p,{source:s}))||null}function TS(){return jH()}const bW=NH(()=>Promise.resolve().then(()=>PW),void 0),MM=R.forwardRef(function(t,r){return eW(t,r,bW)}),wW=nW,DM=aW,LM=lW,$M=dW,Gr=gW,jd=xW,SW={"text-color":"hsl(42, 10%, 14%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},CW={"text-color":"hsl(42, 10%, 24%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},IW={"text-color":"hsl(42, 10%, 86%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},TW={"text-color":"hsl(42, 10%, 76%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},PS={light:{water:"#b2cdfb",land:"#f8f8f8",stateBorder:"#aaa",countryBorder:"#ccc",primaryTextPaint:SW,secondaryTextPaint:CW,hiddenRoad:"#e9e9e8",footprint:"#e9e9e8",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#eeeeffcc",trainLine:"#aaa",trainLabel:"#555c",trainHalo:"#eefc",mapAreaOutline:"#999a"},dark:{water:"#36415d",land:"#1a1a1a",stateBorder:"#555",countryBorder:"#333",primaryTextPaint:IW,secondaryTextPaint:TW,hiddenRoad:"#404038",footprint:"#30302f88",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#303028cc",trainLine:"#888",trainLabel:"#eeec",trainHalo:"#303028cc",mapAreaOutline:"#777a"}};var OM={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(s1,function(){var r,o,s;function d(c,x){if(!r)r=x;else if(!o)o=x;else{var w="var sharedChunk = {}; ("+r+")(sharedChunk); ("+o+")(sharedChunk);",T={};r(T),s=x(T),typeof window<"u"&&(s.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}d(["exports"],function(c){function x(a,n,l,h){return new(l||(l=Promise))(function(m,v){function b(z){try{P(h.next(z))}catch(O){v(O)}}function S(z){try{P(h.throw(z))}catch(O){v(O)}}function P(z){var O;z.done?m(z.value):(O=z.value,O instanceof l?O:new l(function(U){U(O)})).then(b,S)}P((h=h.apply(a,n||[])).next())})}function w(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var T=k;function k(a,n){this.x=a,this.y=n}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,n){return this.clone()._rotateAround(a,n)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var n=a.x-this.x,l=a.y-this.y;return n*n+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,n){return Math.atan2(this.x*n-this.y*a,this.x*a+this.y*n)},_matMult:function(a){var n=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=n,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var n=Math.cos(a),l=Math.sin(a),h=l*this.x+n*this.y;return this.x=n*this.x-l*this.y,this.y=h,this},_rotateAround:function(a,n){var l=Math.cos(a),h=Math.sin(a),m=n.y+h*(this.x-n.x)+l*(this.y-n.y);return this.x=n.x+l*(this.x-n.x)-h*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},k.convert=function(a){return a instanceof k?a:Array.isArray(a)?new k(a[0],a[1]):a};var E=w(T),M=N;function N(a,n,l,h){this.cx=3*a,this.bx=3*(l-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=n,this.p2x=l,this.p2y=h}N.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,n){if(n===void 0&&(n=1e-6),a<0)return 0;if(a>1)return 1;for(var l=a,h=0;h<8;h++){var m=this.sampleCurveX(l)-a;if(Math.abs(m)<n)return l;var v=this.sampleCurveDerivativeX(l);if(Math.abs(v)<1e-6)break;l-=m/v}var b=0,S=1;for(l=a,h=0;h<20&&(m=this.sampleCurveX(l),!(Math.abs(m-a)<n));h++)a>m?b=l:S=l,l=.5*(S-b)+b;return l},solve:function(a,n){return this.sampleCurveY(this.solveCurveX(a,n))}};var j=w(M);let q,B;function D(){return q==null&&(q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),q}function $(){if(B==null&&(B=!1,D())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const m=4*h;n.fillStyle=`rgb(${m},${m+1},${m+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const l=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&l[h]!==h){B=!0;break}}}return B||!1}function ie(a,n,l,h){const m=new j(a,n,l,h);return function(v){return m.solve(v)}}const J=ie(.25,.1,.25,1);function K(a,n,l){return Math.min(l,Math.max(n,a))}function se(a,n,l){const h=l-n,m=((a-n)%h+h)%h+n;return m===n?l:m}function ae(a,...n){for(const l of n)for(const h in l)a[h]=l[h];return a}let we=1;function xe(a,n,l){const h={};for(const m in a)h[m]=n.call(l||this,a[m],m,a);return h}function ke(a,n,l){const h={};for(const m in a)n.call(l||this,a[m],m,a)&&(h[m]=a[m]);return h}function Ee(a){return Array.isArray(a)?a.map(Ee):typeof a=="object"&&a?xe(a,Ee):a}const $e={};function Je(a){$e[a]||(typeof console<"u"&&console.warn(a),$e[a]=!0)}function je(a,n,l){return(l.y-a.y)*(n.x-a.x)>(n.y-a.y)*(l.x-a.x)}function Se(a){let n=0;for(let l,h,m=0,v=a.length,b=v-1;m<v;b=m++)l=a[m],h=a[b],n+=(h.x-l.x)*(l.y+h.y);return n}function Le(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let Be=null;function Ve(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const Qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function st(a,n,l,h,m){return x(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(a,{timestamp:0});try{const b=v==null?void 0:v.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const S=b.startsWith("BGR"),P=new Uint8ClampedArray(h*m*4);if(yield v.copyTo(P,function(z,O,U,Z,re){const oe=4*Math.max(-O,0),ue=(Math.max(0,U)-U)*Z*4+oe,ye=4*Z,_e=Math.max(0,O),Re=Math.max(0,U);return{rect:{x:_e,y:Re,width:Math.min(z.width,O+Z)-_e,height:Math.min(z.height,U+re)-Re},layout:[{offset:ue,stride:ye}]}}(a,n,l,h,m)),S)for(let z=0;z<P.length;z+=4){const O=P[z];P[z]=P[z+2],P[z+2]=O}return P}finally{v.close()}})}let ct,Mt,vt,Dt;const tr={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(a){const n=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(a,n=0){return this.getImageCanvasContext(a).getImageData(-n,-n,a.width+2*n,a.height+2*n)},getImageCanvasContext(a){const n=window.document.createElement("canvas"),l=n.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return n.width=a.width,n.height=a.height,l.drawImage(a,0,0,a.width,a.height),l},resolveURL:a=>(vt||(vt=document.createElement("a")),vt.href=a,vt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(Dt==null&&(Dt=matchMedia("(prefers-reduced-motion: reduce)")),Dt.matches)}},ht={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class Ke extends Error{constructor(n,l,h,m){super(`AJAXError: ${l} (${n}): ${h}`),this.status=n,this.statusText=l,this.url=h,this.body=m}}const ft=Le()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,Ct=a=>ht.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))];function jt(a,n){const l=new AbortController,h=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,cache:a.cache,referrer:ft(),signal:l.signal});let m=!1,v=!1;return a.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(b=>b.ok?(S=>{(a.type==="arrayBuffer"||a.type==="image"?S.arrayBuffer():a.type==="json"?S.json():S.text()).then(P=>{v||(m=!0,n(null,P,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(P=>{v||n(new Error(P.message))})})(b):b.blob().then(S=>n(new Ke(b.status,b.statusText,a.url,S)))).catch(b=>{b.code!==20&&n(new Error(b.message))}),{cancel:()=>{v=!0,m||l.abort()}}}const Gt=function(a,n){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(Le()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n);if(!Le())return(Ct(a.url)||jt)(a,n)}if(!(/^file:/.test(l=a.url)||/^file:/.test(ft())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return jt(a,n);if(Le()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n,void 0,!0)}var l;return function(h,m){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const b in h.headers)v.setRequestHeader(b,h.headers[b]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{m(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let b=v.response;if(h.type==="json")try{b=JSON.parse(v.response)}catch(S){return m(S)}m(null,b,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const b=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});m(new Ke(v.status,v.statusText,h.url,b))}},v.send(h.body),{cancel:()=>v.abort()}}(a,n)},vr=function(a,n){return Gt(ae(a,{type:"arrayBuffer"}),n)};function Cr(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const n=new URL(a),l=window.location;return n.protocol===l.protocol&&n.host===l.host}function Ut(a,n,l){l[a]&&l[a].indexOf(n)!==-1||(l[a]=l[a]||[],l[a].push(n))}function Pt(a,n,l){if(l&&l[a]){const h=l[a].indexOf(n);h!==-1&&l[a].splice(h,1)}}class sr{constructor(n,l={}){ae(this,l),this.type=n}}class Ft extends sr{constructor(n,l={}){super("error",ae({error:n},l))}}class _r{on(n,l){return this._listeners=this._listeners||{},Ut(n,l,this._listeners),this}off(n,l){return Pt(n,l,this._listeners),Pt(n,l,this._oneTimeListeners),this}once(n,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},Ut(n,l,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,l){typeof n=="string"&&(n=new sr(n,l||{}));const h=n.type;if(this.listens(h)){n.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of m)S.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of v)Pt(h,S,this._oneTimeListeners),S.call(this,n);const b=this._eventedParent;b&&(ae(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(n))}else n instanceof Ft&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,l){return this._eventedParent=n,this._eventedParentData=l,this}}var Ue={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const xr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Er(a,n){const l={};for(const h in a)h!=="ref"&&(l[h]=a[h]);return xr.forEach(h=>{h in n&&(l[h]=n[h])}),l}function Vt(a,n){if(Array.isArray(a)){if(!Array.isArray(n)||a.length!==n.length)return!1;for(let l=0;l<a.length;l++)if(!Vt(a[l],n[l]))return!1;return!0}if(typeof a=="object"&&a!==null&&n!==null){if(typeof n!="object"||Object.keys(a).length!==Object.keys(n).length)return!1;for(const l in a)if(!Vt(a[l],n[l]))return!1;return!0}return a===n}const Jt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ar(a,n,l){l.push({command:Jt.addSource,args:[a,n[a]]})}function Br(a,n,l){n.push({command:Jt.removeSource,args:[a]}),l[a]=!0}function cr(a,n,l,h){Br(a,l,h),Ar(a,n,l)}function nr(a,n,l){let h;for(h in a[l])if(Object.prototype.hasOwnProperty.call(a[l],h)&&h!=="data"&&!Vt(a[l][h],n[l][h]))return!1;for(h in n[l])if(Object.prototype.hasOwnProperty.call(n[l],h)&&h!=="data"&&!Vt(a[l][h],n[l][h]))return!1;return!0}function Kt(a,n,l,h,m,v){let b;for(b in n=n||{},a=a||{})Object.prototype.hasOwnProperty.call(a,b)&&(Vt(a[b],n[b])||l.push({command:v,args:[h,b,n[b],m]}));for(b in n)Object.prototype.hasOwnProperty.call(n,b)&&!Object.prototype.hasOwnProperty.call(a,b)&&(Vt(a[b],n[b])||l.push({command:v,args:[h,b,n[b],m]}))}function lr(a){return a.id}function Wr(a,n){return a[n.id]=n,a}class Oe{constructor(n,l,h,m){this.message=(n?`${n}: `:"")+h,m&&(this.identifier=m),l!=null&&l.__line__&&(this.line=l.__line__)}}function St(a,...n){for(const l of n)for(const h in l)a[h]=l[h];return a}class _t extends Error{constructor(n,l){super(l),this.message=l,this.key=n}}class Ce{constructor(n,l=[]){this.parent=n,this.bindings={};for(const[h,m]of l)this.bindings[h]=m}concat(n){return new Ce(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const He={kind:"null"},Ze={kind:"number"},wt={kind:"string"},gt={kind:"boolean"},kt={kind:"color"},ur={kind:"object"},Lt={kind:"value"},dr={kind:"collator"},pe={kind:"formatted"},H={kind:"padding"},W={kind:"resolvedImage"},ne={kind:"variableAnchorOffsetCollection"};function fe(a,n){return{kind:"array",itemType:a,N:n}}function ge(a){if(a.kind==="array"){const n=ge(a.itemType);return typeof a.N=="number"?`array<${n}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${n}>`}return a.kind}const X=[He,Ze,wt,gt,kt,pe,ur,fe(Lt),H,W,ne];function Y(a,n){if(n.kind==="error")return null;if(a.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Y(a.itemType,n.itemType))&&(typeof a.N!="number"||a.N===n.N))return null}else{if(a.kind===n.kind)return null;if(a.kind==="value"){for(const l of X)if(!Y(l,n))return null}}return`Expected ${ge(a)} but found ${ge(n)} instead.`}function Q(a,n){return n.some(l=>l.kind===a.kind)}function le(a,n){return n.some(l=>l==="null"?a===null:l==="array"?Array.isArray(a):l==="object"?a&&!Array.isArray(a)&&typeof a=="object":l===typeof a)}function Pe(a,n){return a.kind==="array"&&n.kind==="array"?a.itemType.kind===n.itemType.kind&&typeof a.N=="number":a.kind===n.kind}const Me=.96422,Fe=.82521,Ye=4/29,rt=6/29,Xe=3*rt*rt,et=rt*rt*rt,Ie=Math.PI/180,Ae=180/Math.PI;function it(a){return(a%=360)<0&&(a+=360),a}function ot([a,n,l,h]){let m,v;const b=Yt((.2225045*(a=lt(a))+.7168786*(n=lt(n))+.0606169*(l=lt(l)))/1);a===n&&n===l?m=v=b:(m=Yt((.4360747*a+.3850649*n+.1430804*l)/Me),v=Yt((.0139322*a+.0971045*n+.7141733*l)/Fe));const S=116*b-16;return[S<0?0:S,500*(m-b),200*(b-v),h]}function lt(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Yt(a){return a>et?Math.pow(a,1/3):a/Xe+Ye}function ir([a,n,l,h]){let m=(a+16)/116,v=isNaN(n)?m:m+n/500,b=isNaN(l)?m:m-l/200;return m=1*Hr(m),v=Me*Hr(v),b=Fe*Hr(b),[br(3.1338561*v-1.6168667*m-.4906146*b),br(-.9787684*v+1.9161415*m+.033454*b),br(.0719453*v-.2289914*m+1.4052427*b),h]}function br(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function Hr(a){return a>rt?a*a*a:Xe*(a-Ye)}function un(a){return parseInt(a.padEnd(2,a),16)/255}function ds(a,n){return $i(n?a/100:a,0,1)}function $i(a,n,l){return Math.min(Math.max(n,a),l)}function oi(a){return!a.some(Number.isNaN)}const Na={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Ir{constructor(n,l,h,m=1,v=!0){this.r=n,this.g=l,this.b=h,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[n,l,h,m]))}static parse(n){if(n instanceof Ir)return n;if(typeof n!="string")return;const l=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Na[h];if(m){const[b,S,P]=m;return[b/255,S/255,P/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const b=h.length<6?1:2;let S=1;return[un(h.slice(S,S+=b)),un(h.slice(S,S+=b)),un(h.slice(S,S+=b)),un(h.slice(S,S+b)||"ff")]}if(h.startsWith("rgb")){const b=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[S,P,z,O,U,Z,re,oe,ue,ye,_e,Re]=b,be=[O||" ",re||" ",ye].join("");if(be==="  "||be==="  /"||be===",,"||be===",,,"){const De=[z,Z,ue].join(""),We=De==="%%%"?100:De===""?255:0;if(We){const nt=[$i(+P/We,0,1),$i(+U/We,0,1),$i(+oe/We,0,1),_e?ds(+_e,Re):1];if(oi(nt))return nt}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[b,S,P,z,O,U,Z,re,oe]=v,ue=[P||" ",O||" ",Z].join("");if(ue==="  "||ue==="  /"||ue===",,"||ue===",,,"){const ye=[+S,$i(+z,0,100),$i(+U,0,100),re?ds(+re,oe):1];if(oi(ye))return function([_e,Re,be,De]){function We(nt){const Rt=(nt+_e/30)%12,Wt=Re*Math.min(be,1-be);return be-Wt*Math.max(-1,Math.min(Rt-3,9-Rt,1))}return _e=it(_e),Re/=100,be/=100,[We(0),We(8),We(4),De]}(ye)}}}(n);return l?new Ir(...l,!1):void 0}get rgb(){const{r:n,g:l,b:h,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[n/v,l/v,h/v,m])}get hcl(){return this.overwriteGetter("hcl",function(n){const[l,h,m,v]=ot(n),b=Math.sqrt(h*h+m*m);return[Math.round(1e4*b)?it(Math.atan2(m,h)*Ae):NaN,b,l,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ot(this.rgb))}overwriteGetter(n,l){return Object.defineProperty(this,n,{value:l}),l}toString(){const[n,l,h,m]=this.rgb;return`rgba(${[n,l,h].map(v=>Math.round(255*v)).join(",")},${m})`}}Ir.black=new Ir(0,0,0,1),Ir.white=new Ir(1,1,1,1),Ir.transparent=new Ir(0,0,0,0),Ir.red=new Ir(1,0,0,1);class wr{constructor(n,l,h){this.sensitivity=n?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,l){return this.collator.compare(n,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Nt{constructor(n,l,h,m,v){this.text=n,this.image=l,this.scale=h,this.fontStack=m,this.textColor=v}}class zr{constructor(n){this.sections=n}static fromString(n){return new zr([new Nt(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof zr?n:zr.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Tr{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Tr)return n;if(typeof n=="number")return new Tr([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const l of n)if(typeof l!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Tr(n)}}toString(){return JSON.stringify(this.values)}}const $r=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Qr{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Qr)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let l=0;l<n.length;l+=2){const h=n[l],m=n[l+1];if(typeof h!="string"||!$r.has(h)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Qr(n)}}toString(){return JSON.stringify(this.values)}}class fn{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new fn({name:n,available:!1}):null}}function bi(a,n,l,h){return typeof a=="number"&&a>=0&&a<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof l=="number"&&l>=0&&l<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[a,n,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[a,n,l,h]:[a,n,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function wi(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Ir||a instanceof wr||a instanceof zr||a instanceof Tr||a instanceof Qr||a instanceof fn)return!0;if(Array.isArray(a)){for(const n of a)if(!wi(n))return!1;return!0}if(typeof a=="object"){for(const n in a)if(!wi(a[n]))return!1;return!0}return!1}function mn(a){if(a===null)return He;if(typeof a=="string")return wt;if(typeof a=="boolean")return gt;if(typeof a=="number")return Ze;if(a instanceof Ir)return kt;if(a instanceof wr)return dr;if(a instanceof zr)return pe;if(a instanceof Tr)return H;if(a instanceof Qr)return ne;if(a instanceof fn)return W;if(Array.isArray(a)){const n=a.length;let l;for(const h of a){const m=mn(h);if(l){if(l===m)continue;l=Lt;break}l=m}return fe(l||Lt,n)}return ur}function Fr(a){const n=typeof a;return a===null?"":n==="string"||n==="number"||n==="boolean"?String(a):a instanceof Ir||a instanceof zr||a instanceof Tr||a instanceof Qr||a instanceof fn?a.toString():JSON.stringify(a)}class hs{constructor(n,l){this.type=n,this.value=l}static parse(n,l){if(n.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!wi(n[1]))return l.error("invalid value");const h=n[1];let m=mn(h);const v=l.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new hs(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class xn{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Vc={string:wt,number:Ze,boolean:gt,object:ur};class fo{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");let h,m=1;const v=n[0];if(v==="array"){let S,P;if(n.length>2){const z=n[1];if(typeof z!="string"||!(z in Vc)||z==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);S=Vc[z],m++}else S=Lt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return l.error('The length argument to "array" must be a positive integer literal',2);P=n[2],m++}h=fe(S,P)}else{if(!Vc[v])throw new Error(`Types doesn't contain name = ${v}`);h=Vc[v]}const b=[];for(;m<n.length;m++){const S=l.parse(n[m],m,Lt);if(!S)return null;b.push(S)}return new fo(h,b)}evaluate(n){for(let l=0;l<this.args.length;l++){const h=this.args[l].evaluate(n);if(!Y(this.type,mn(h)))return h;if(l===this.args.length-1)throw new xn(`Expected value to be of type ${ge(this.type)}, but found ${ge(mn(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Wd={"to-boolean":gt,"to-color":kt,"to-number":Ze,"to-string":wt};class ja{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");const h=n[0];if(!Wd[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return l.error("Expected one argument.");const m=Wd[h],v=[];for(let b=1;b<n.length;b++){const S=l.parse(n[b],b,Lt);if(!S)return null;v.push(S)}return new ja(m,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let l,h;for(const m of this.args){if(l=m.evaluate(n),h=null,l instanceof Ir)return l;if(typeof l=="string"){const v=n.parseColor(l);if(v)return v}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:bi(l[0],l[1],l[2],l[3]),!h))return new Ir(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new xn(h||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const h of this.args){l=h.evaluate(n);const m=Tr.parse(l);if(m)return m}throw new xn(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const h of this.args){l=h.evaluate(n);const m=Qr.parse(l);if(m)return m}throw new xn(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const h of this.args){if(l=h.evaluate(n),l===null)return 0;const m=Number(l);if(!isNaN(m))return m}throw new xn(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return zr.fromString(Fr(this.args[0].evaluate(n)));case"resolvedImage":return fn.fromString(Fr(this.args[0].evaluate(n)));default:return Fr(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Hf=["Unknown","Point","LineString","Polygon"];class Gd{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Hf[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let l=this._parseColorCache[n];return l||(l=this._parseColorCache[n]=Ir.parse(n)),l}}class Uc{constructor(n,l,h=[],m,v=new Ce,b=[]){this.registry=n,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=b,this.expectedType=m,this._isConstant=l}parse(n,l,h,m,v={}){return l?this.concat(l,h,m)._parse(n,v):this._parse(n,v)}_parse(n,l){function h(m,v,b){return b==="assert"?new fo(v,[m]):b==="coerce"?new ja(v,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let b=v.parse(n,this);if(!b)return null;if(this.expectedType){const S=this.expectedType,P=b.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||P.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||P.kind!=="value"&&P.kind!=="string")if(S.kind!=="padding"||P.kind!=="value"&&P.kind!=="number"&&P.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||P.kind!=="value"&&P.kind!=="array"){if(this.checkSubtype(S,P))return null}else b=h(b,S,l.typeAnnotation||"coerce");else b=h(b,S,l.typeAnnotation||"coerce");else b=h(b,S,l.typeAnnotation||"coerce");else b=h(b,S,l.typeAnnotation||"assert")}if(!(b instanceof hs)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const S=new Gd;try{b=new hs(b.type,b.evaluate(S))}catch(P){return this.error(P.message),null}}return b}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,l,h){const m=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new Uc(this.registry,this._isConstant,m,l||null,v,this.errors)}error(n,...l){const h=`${this.key}${l.map(m=>`[${m}]`).join("")}`;this.errors.push(new _t(h,n))}checkSubtype(n,l){const h=Y(n,l);return h&&this.error(h),h}}class Hc{constructor(n,l,h){this.type=dr,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=l}static parse(n,l){if(n.length!==2)return l.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return l.error("Collator options argument must be an object.");const m=l.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,gt);if(!m)return null;const v=l.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,gt);if(!v)return null;let b=null;return h.locale&&(b=l.parse(h.locale,1,wt),!b)?null:new Hc(m,v,b)}evaluate(n){return new wr(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Va=8192;function qd(a,n){a[0]=Math.min(a[0],n[0]),a[1]=Math.min(a[1],n[1]),a[2]=Math.max(a[2],n[0]),a[3]=Math.max(a[3],n[1])}function Hl(a,n){return!(a[0]<=n[0]||a[2]>=n[2]||a[1]<=n[1]||a[3]>=n[3])}function Wf(a,n){const l=(180+a[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(l*m*Va),Math.round(h*m*Va)]}function h0(a,n,l){const h=a[0]-n[0],m=a[1]-n[1],v=a[0]-l[0],b=a[1]-l[1];return h*b-v*m==0&&h*v<=0&&m*b<=0}function Zd(a,n){let l=!1;for(let b=0,S=n.length;b<S;b++){const P=n[b];for(let z=0,O=P.length;z<O-1;z++){if(h0(a,P[z],P[z+1]))return!1;(m=P[z])[1]>(h=a)[1]!=(v=P[z+1])[1]>h[1]&&h[0]<(v[0]-m[0])*(h[1]-m[1])/(v[1]-m[1])+m[0]&&(l=!l)}}var h,m,v;return l}function Kd(a,n){for(let l=0;l<n.length;l++)if(Zd(a,n[l]))return!0;return!1}function Gf(a,n,l,h){const m=h[0]-l[0],v=h[1]-l[1],b=(a[0]-l[0])*v-m*(a[1]-l[1]),S=(n[0]-l[0])*v-m*(n[1]-l[1]);return b>0&&S<0||b<0&&S>0}function p0(a,n,l){for(const z of l)for(let O=0;O<z.length-1;++O)if((S=[(b=z[O+1])[0]-(v=z[O])[0],b[1]-v[1]])[0]*(P=[(m=n)[0]-(h=a)[0],m[1]-h[1]])[1]-S[1]*P[0]!=0&&Gf(h,m,v,b)&&Gf(v,b,h,m))return!0;var h,m,v,b,S,P;return!1}function qf(a,n){for(let l=0;l<a.length;++l)if(!Zd(a[l],n))return!1;for(let l=0;l<a.length-1;++l)if(p0(a[l],a[l+1],n))return!1;return!0}function Zf(a,n){for(let l=0;l<n.length;l++)if(qf(a,n[l]))return!0;return!1}function Wc(a,n,l){const h=[];for(let m=0;m<a.length;m++){const v=[];for(let b=0;b<a[m].length;b++){const S=Wf(a[m][b],l);qd(n,S),v.push(S)}h.push(v)}return h}function Kf(a,n,l){const h=[];for(let m=0;m<a.length;m++){const v=Wc(a[m],n,l);h.push(v)}return h}function Xf(a,n,l,h){if(a[0]<l[0]||a[0]>l[2]){const m=.5*h;let v=a[0]-l[0]>m?-h:l[0]-a[0]>m?h:0;v===0&&(v=a[0]-l[2]>m?-h:l[2]-a[0]>m?h:0),a[0]+=v}qd(n,a)}function Xd(a,n,l,h){const m=Math.pow(2,h.z)*Va,v=[h.x*Va,h.y*Va],b=[];for(const S of a)for(const P of S){const z=[P.x+v[0],P.y+v[1]];Xf(z,n,l,m),b.push(z)}return b}function Jd(a,n,l,h){const m=Math.pow(2,h.z)*Va,v=[h.x*Va,h.y*Va],b=[];for(const P of a){const z=[];for(const O of P){const U=[O.x+v[0],O.y+v[1]];qd(n,U),z.push(U)}b.push(z)}if(n[2]-n[0]<=m/2){(S=n)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const P of b)for(const z of P)Xf(z,n,l,m)}var S;return b}class ps{constructor(n,l){this.type=gt,this.geojson=n,this.geometries=l}static parse(n,l){if(n.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(wi(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let m=0;m<h.features.length;++m){const v=h.features[m].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new ps(h,h.features[m].geometry)}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new ps(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ps(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(l,h){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],b=l.canonicalID();if(h.type==="Polygon"){const S=Wc(h.coordinates,v,b),P=Xd(l.geometry(),m,v,b);if(!Hl(m,v))return!1;for(const z of P)if(!Zd(z,S))return!1}if(h.type==="MultiPolygon"){const S=Kf(h.coordinates,v,b),P=Xd(l.geometry(),m,v,b);if(!Hl(m,v))return!1;for(const z of P)if(!Kd(z,S))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(l,h){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],b=l.canonicalID();if(h.type==="Polygon"){const S=Wc(h.coordinates,v,b),P=Jd(l.geometry(),m,v,b);if(!Hl(m,v))return!1;for(const z of P)if(!qf(z,S))return!1}if(h.type==="MultiPolygon"){const S=Kf(h.coordinates,v,b),P=Jd(l.geometry(),m,v,b);if(!Hl(m,v))return!1;for(const z of P)if(!Zf(z,S))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Gc{constructor(n,l){this.type=l.type,this.name=n,this.boundExpression=l}static parse(n,l){if(n.length!==2||typeof n[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const h=n[1];return l.scope.has(h)?new Gc(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class mo{constructor(n,l,h,m){this.name=n,this.type=l,this._evaluate=h,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,l){const h=n[0],m=mo.definitions[h];if(!m)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,b=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=b.filter(([z])=>!Array.isArray(z)||z.length===n.length-1);let P=null;for(const[z,O]of S){P=new Uc(l.registry,qc,l.path,null,l.scope);const U=[];let Z=!1;for(let re=1;re<n.length;re++){const oe=n[re],ue=Array.isArray(z)?z[re-1]:z.type,ye=P.parse(oe,1+U.length,ue);if(!ye){Z=!0;break}U.push(ye)}if(!Z)if(Array.isArray(z)&&z.length!==U.length)P.error(`Expected ${z.length} arguments, but found ${U.length} instead.`);else{for(let re=0;re<U.length;re++){const oe=Array.isArray(z)?z[re]:z.type,ue=U[re];P.concat(re+1).checkSubtype(oe,ue.type)}if(P.errors.length===0)return new mo(h,v,O,U)}}if(S.length===1)l.errors.push(...P.errors);else{const z=(S.length?S:b).map(([U])=>{return Z=U,Array.isArray(Z)?`(${Z.map(ge).join(", ")})`:`(${ge(Z.type)}...)`;var Z}).join(" | "),O=[];for(let U=1;U<n.length;U++){const Z=l.parse(n[U],1+O.length);if(!Z)return null;O.push(ge(Z.type))}l.error(`Expected arguments of type ${z}, but found (${O.join(", ")}) instead.`)}return null}static register(n,l){mo.definitions=l;for(const h in l)n[h]=mo}}function qc(a){if(a instanceof Gc)return qc(a.boundExpression);if(a instanceof mo&&a.name==="error"||a instanceof Hc||a instanceof ps)return!1;const n=a instanceof ja||a instanceof fo;let l=!0;return a.eachChild(h=>{l=n?l&&qc(h):l&&h instanceof hs}),!!l&&Zc(a)&&Kc(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Zc(a){if(a instanceof mo&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof ps)return!1;let n=!0;return a.eachChild(l=>{n&&!Zc(l)&&(n=!1)}),n}function Wl(a){if(a instanceof mo&&a.name==="feature-state")return!1;let n=!0;return a.eachChild(l=>{n&&!Wl(l)&&(n=!1)}),n}function Kc(a,n){if(a instanceof mo&&n.indexOf(a.name)>=0)return!1;let l=!0;return a.eachChild(h=>{l&&!Kc(h,n)&&(l=!1)}),l}function qs(a,n){const l=a.length-1;let h,m,v=0,b=l,S=0;for(;v<=b;)if(S=Math.floor((v+b)/2),h=a[S],m=a[S+1],h<=n){if(S===l||n<m)return S;v=S+1}else{if(!(h>n))throw new xn("Input is not a number.");b=S-1}return 0}class Ua{constructor(n,l,h){this.type=n,this.input=l,this.labels=[],this.outputs=[];for(const[m,v]of h)this.labels.push(m),this.outputs.push(v)}static parse(n,l){if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");const h=l.parse(n[1],1,Ze);if(!h)return null;const m=[];let v=null;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);for(let b=1;b<n.length;b+=2){const S=b===1?-1/0:n[b],P=n[b+1],z=b,O=b+1;if(typeof S!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(m.length&&m[m.length-1][0]>=S)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const U=l.parse(P,O,v);if(!U)return null;v=v||U.type,m.push([S,U])}return new Ua(v,h,m)}evaluate(n){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=l[0])return h[0].evaluate(n);const v=l.length;return m>=l[v-1]?h[v-1].evaluate(n):h[qs(l,m)].evaluate(n)}eachChild(n){n(this.input);for(const l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Pr(a,n,l){return a+l*(n-a)}function Xc(a,n,l){return a.map((h,m)=>Pr(h,n[m],l))}const Qi={number:Pr,color:function(a,n,l,h="rgb"){switch(h){case"rgb":{const[m,v,b,S]=Xc(a.rgb,n.rgb,l);return new Ir(m,v,b,S,!1)}case"hcl":{const[m,v,b,S]=a.hcl,[P,z,O,U]=n.hcl;let Z,re;if(isNaN(m)||isNaN(P))isNaN(m)?isNaN(P)?Z=NaN:(Z=P,b!==1&&b!==0||(re=z)):(Z=m,O!==1&&O!==0||(re=v));else{let Re=P-m;P>m&&Re>180?Re-=360:P<m&&m-P>180&&(Re+=360),Z=m+l*Re}const[oe,ue,ye,_e]=function([Re,be,De,We]){return Re=isNaN(Re)?0:Re*Ie,ir([De,Math.cos(Re)*be,Math.sin(Re)*be,We])}([Z,re??Pr(v,z,l),Pr(b,O,l),Pr(S,U,l)]);return new Ir(oe,ue,ye,_e,!1)}case"lab":{const[m,v,b,S]=ir(Xc(a.lab,n.lab,l));return new Ir(m,v,b,S,!1)}}},array:Xc,padding:function(a,n,l){return new Tr(Xc(a.values,n.values,l))},variableAnchorOffsetCollection:function(a,n,l){const h=a.values,m=n.values;if(h.length!==m.length)throw new xn(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${n.toString()}`);const v=[];for(let b=0;b<h.length;b+=2){if(h[b]!==m[b])throw new xn(`Cannot interpolate values containing mismatched anchors. from[${b}]: ${h[b]}, to[${b}]: ${m[b]}`);v.push(h[b]);const[S,P]=h[b+1],[z,O]=m[b+1];v.push([Pr(S,z,l),Pr(P,O,l)])}return new Qr(v)}};class eo{constructor(n,l,h,m,v){this.type=n,this.operator=l,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[b,S]of v)this.labels.push(b),this.outputs.push(S)}static interpolationFactor(n,l,h,m){let v=0;if(n.name==="exponential")v=Yd(l,n.base,h,m);else if(n.name==="linear")v=Yd(l,1,h,m);else if(n.name==="cubic-bezier"){const b=n.controlPoints;v=new j(b[0],b[1],b[2],b[3]).solve(Yd(l,1,h,m))}return v}static parse(n,l){let[h,m,v,...b]=n;if(!Array.isArray(m)||m.length===0)return l.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const z=m[1];if(typeof z!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:z}}else{if(m[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const z=m.slice(1);if(z.length!==4||z.some(O=>typeof O!="number"||O<0||O>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:z}}}if(n.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(v=l.parse(v,2,Ze),!v)return null;const S=[];let P=null;h==="interpolate-hcl"||h==="interpolate-lab"?P=kt:l.expectedType&&l.expectedType.kind!=="value"&&(P=l.expectedType);for(let z=0;z<b.length;z+=2){const O=b[z],U=b[z+1],Z=z+3,re=z+4;if(typeof O!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(S.length&&S[S.length-1][0]>=O)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const oe=l.parse(U,re,P);if(!oe)return null;P=P||oe.type,S.push([O,oe])}return Pe(P,Ze)||Pe(P,kt)||Pe(P,H)||Pe(P,ne)||Pe(P,fe(Ze))?new eo(P,h,m,v,S):l.error(`Type ${ge(P)} is not interpolatable.`)}evaluate(n){const l=this.labels,h=this.outputs;if(l.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=l[0])return h[0].evaluate(n);const v=l.length;if(m>=l[v-1])return h[v-1].evaluate(n);const b=qs(l,m),S=eo.interpolationFactor(this.interpolation,m,l[b],l[b+1]),P=h[b].evaluate(n),z=h[b+1].evaluate(n);switch(this.operator){case"interpolate":return Qi[this.type.kind](P,z,S);case"interpolate-hcl":return Qi.color(P,z,S,"hcl");case"interpolate-lab":return Qi.color(P,z,S,"lab")}}eachChild(n){n(this.input);for(const l of this.outputs)n(l)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Yd(a,n,l,h){const m=h-l,v=a-l;return m===0?0:n===1?v/m:(Math.pow(n,v)-1)/(Math.pow(n,m)-1)}class Jc{constructor(n,l){this.type=n,this.args=l}static parse(n,l){if(n.length<2)return l.error("Expectected at least one argument.");let h=null;const m=l.expectedType;m&&m.kind!=="value"&&(h=m);const v=[];for(const S of n.slice(1)){const P=l.parse(S,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!P)return null;h=h||P.type,v.push(P)}if(!h)throw new Error("No output type");const b=m&&v.some(S=>Y(m,S.type));return new Jc(b?Lt:h,v)}evaluate(n){let l,h=null,m=0;for(const v of this.args)if(m++,h=v.evaluate(n),h&&h instanceof fn&&!h.available&&(l||(l=h.name),h=null,m===this.args.length&&(h=l)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Yc{constructor(n,l){this.type=l.type,this.bindings=[].concat(n),this.result=l}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const l of this.bindings)n(l[1]);n(this.result)}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const b=n[v];if(typeof b!="string")return l.error(`Expected string, but found ${typeof b} instead.`,v);if(/[^a-zA-Z0-9_]/.test(b))return l.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=l.parse(n[v+1],v+1);if(!S)return null;h.push([b,S])}const m=l.parse(n[n.length-1],n.length-1,l.expectedType,h);return m?new Yc(h,m):null}outputDefined(){return this.result.outputDefined()}}class Qd{constructor(n,l,h){this.type=n,this.index=l,this.input=h}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=l.parse(n[1],1,Ze),m=l.parse(n[2],2,fe(l.expectedType||Lt));return h&&m?new Qd(m.type.itemType,h,m):null}evaluate(n){const l=this.index.evaluate(n),h=this.input.evaluate(n);if(l<0)throw new xn(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new xn(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new xn(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class eh{constructor(n,l){this.type=gt,this.needle=n,this.haystack=l}static parse(n,l){if(n.length!==3)return l.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=l.parse(n[1],1,Lt),m=l.parse(n[2],2,Lt);return h&&m?Q(h.type,[gt,wt,Ze,He,Lt])?new eh(h,m):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${ge(h.type)} instead`):null}evaluate(n){const l=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!le(l,["boolean","string","number","null"]))throw new xn(`Expected first argument to be of type boolean, string, number or null, but found ${ge(mn(l))} instead.`);if(!le(h,["string","array"]))throw new xn(`Expected second argument to be of type array or string, but found ${ge(mn(h))} instead.`);return h.indexOf(l)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Qc{constructor(n,l,h){this.type=Ze,this.needle=n,this.haystack=l,this.fromIndex=h}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=l.parse(n[1],1,Lt),m=l.parse(n[2],2,Lt);if(!h||!m)return null;if(!Q(h.type,[gt,wt,Ze,He,Lt]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${ge(h.type)} instead`);if(n.length===4){const v=l.parse(n[3],3,Ze);return v?new Qc(h,m,v):null}return new Qc(h,m)}evaluate(n){const l=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!le(l,["boolean","string","number","null"]))throw new xn(`Expected first argument to be of type boolean, string, number or null, but found ${ge(mn(l))} instead.`);if(!le(h,["string","array"]))throw new xn(`Expected second argument to be of type array or string, but found ${ge(mn(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(n);return h.indexOf(l,m)}return h.indexOf(l)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class th{constructor(n,l,h,m,v,b){this.inputType=n,this.type=l,this.input=h,this.cases=m,this.outputs=v,this.otherwise=b}static parse(n,l){if(n.length<5)return l.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return l.error("Expected an even number of arguments.");let h,m;l.expectedType&&l.expectedType.kind!=="value"&&(m=l.expectedType);const v={},b=[];for(let z=2;z<n.length-1;z+=2){let O=n[z];const U=n[z+1];Array.isArray(O)||(O=[O]);const Z=l.concat(z);if(O.length===0)return Z.error("Expected at least one branch label.");for(const oe of O){if(typeof oe!="number"&&typeof oe!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof oe=="number"&&Math.abs(oe)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof oe=="number"&&Math.floor(oe)!==oe)return Z.error("Numeric branch labels must be integer values.");if(h){if(Z.checkSubtype(h,mn(oe)))return null}else h=mn(oe);if(v[String(oe)]!==void 0)return Z.error("Branch labels must be unique.");v[String(oe)]=b.length}const re=l.parse(U,z,m);if(!re)return null;m=m||re.type,b.push(re)}const S=l.parse(n[1],1,Lt);if(!S)return null;const P=l.parse(n[n.length-1],n.length-1,m);return P?S.type.kind!=="value"&&l.concat(1).checkSubtype(h,S.type)?null:new th(h,m,S,v,b,P):null}evaluate(n){const l=this.input.evaluate(n);return(mn(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class rh{constructor(n,l,h){this.type=n,this.branches=l,this.otherwise=h}static parse(n,l){if(n.length<4)return l.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&l.expectedType.kind!=="value"&&(h=l.expectedType);const m=[];for(let b=1;b<n.length-1;b+=2){const S=l.parse(n[b],b,gt);if(!S)return null;const P=l.parse(n[b+1],b+1,h);if(!P)return null;m.push([S,P]),h=h||P.type}const v=l.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new rh(h,m,v)}evaluate(n){for(const[l,h]of this.branches)if(l.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[l,h]of this.branches)n(l),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class eu{constructor(n,l,h,m){this.type=n,this.input=l,this.beginIndex=h,this.endIndex=m}static parse(n,l){if(n.length<=2||n.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=l.parse(n[1],1,Lt),m=l.parse(n[2],2,Ze);if(!h||!m)return null;if(!Q(h.type,[fe(Lt),wt,Lt]))return l.error(`Expected first argument to be of type array or string, but found ${ge(h.type)} instead`);if(n.length===4){const v=l.parse(n[3],3,Ze);return v?new eu(h.type,h,m,v):null}return new eu(h.type,h,m)}evaluate(n){const l=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!le(l,["string","array"]))throw new xn(`Expected first argument to be of type array or string, but found ${ge(mn(l))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(n);return l.slice(h,m)}return l.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Jf(a,n){return a==="=="||a==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Yf(a,n,l,h){return h.compare(n,l)===0}function Zs(a,n,l){const h=a!=="=="&&a!=="!=";return class BM{constructor(v,b,S){this.type=gt,this.lhs=v,this.rhs=b,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||b.type.kind==="value"}static parse(v,b){if(v.length!==3&&v.length!==4)return b.error("Expected two or three arguments.");const S=v[0];let P=b.parse(v[1],1,Lt);if(!P)return null;if(!Jf(S,P.type))return b.concat(1).error(`"${S}" comparisons are not supported for type '${ge(P.type)}'.`);let z=b.parse(v[2],2,Lt);if(!z)return null;if(!Jf(S,z.type))return b.concat(2).error(`"${S}" comparisons are not supported for type '${ge(z.type)}'.`);if(P.type.kind!==z.type.kind&&P.type.kind!=="value"&&z.type.kind!=="value")return b.error(`Cannot compare types '${ge(P.type)}' and '${ge(z.type)}'.`);h&&(P.type.kind==="value"&&z.type.kind!=="value"?P=new fo(z.type,[P]):P.type.kind!=="value"&&z.type.kind==="value"&&(z=new fo(P.type,[z])));let O=null;if(v.length===4){if(P.type.kind!=="string"&&z.type.kind!=="string"&&P.type.kind!=="value"&&z.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(O=b.parse(v[3],3,dr),!O)return null}return new BM(P,z,O)}evaluate(v){const b=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const P=mn(b),z=mn(S);if(P.kind!==z.kind||P.kind!=="string"&&P.kind!=="number")throw new xn(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${P.kind}, ${z.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const P=mn(b),z=mn(S);if(P.kind!=="string"||z.kind!=="string")return n(v,b,S)}return this.collator?l(v,b,S,this.collator.evaluate(v)):n(v,b,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const f0=Zs("==",function(a,n,l){return n===l},Yf),m0=Zs("!=",function(a,n,l){return n!==l},function(a,n,l,h){return!Yf(0,n,l,h)}),g0=Zs("<",function(a,n,l){return n<l},function(a,n,l,h){return h.compare(n,l)<0}),y0=Zs(">",function(a,n,l){return n>l},function(a,n,l,h){return h.compare(n,l)>0}),v0=Zs("<=",function(a,n,l){return n<=l},function(a,n,l,h){return h.compare(n,l)<=0}),_0=Zs(">=",function(a,n,l){return n>=l},function(a,n,l,h){return h.compare(n,l)>=0});class nh{constructor(n,l,h,m,v){this.type=wt,this.number=n,this.locale=l,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(n,l){if(n.length!==3)return l.error("Expected two arguments.");const h=l.parse(n[1],1,Ze);if(!h)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return l.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=l.parse(m.locale,1,wt),!v))return null;let b=null;if(m.currency&&(b=l.parse(m.currency,1,wt),!b))return null;let S=null;if(m["min-fraction-digits"]&&(S=l.parse(m["min-fraction-digits"],1,Ze),!S))return null;let P=null;return m["max-fraction-digits"]&&(P=l.parse(m["max-fraction-digits"],1,Ze),!P)?null:new nh(h,v,b,S,P)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class tu{constructor(n){this.type=pe,this.sections=n}static parse(n,l){if(n.length<2)return l.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return l.error("First argument must be an image or text section.");const m=[];let v=!1;for(let b=1;b<=n.length-1;++b){const S=n[b];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let P=null;if(S["font-scale"]&&(P=l.parse(S["font-scale"],1,Ze),!P))return null;let z=null;if(S["text-font"]&&(z=l.parse(S["text-font"],1,fe(wt)),!z))return null;let O=null;if(S["text-color"]&&(O=l.parse(S["text-color"],1,kt),!O))return null;const U=m[m.length-1];U.scale=P,U.font=z,U.textColor=O}else{const P=l.parse(n[b],1,Lt);if(!P)return null;const z=P.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:P,scale:null,font:null,textColor:null})}}return new tu(m)}evaluate(n){return new zr(this.sections.map(l=>{const h=l.content.evaluate(n);return mn(h)===W?new Nt("",h,null,null,null):new Nt(Fr(h),null,l.scale?l.scale.evaluate(n):null,l.font?l.font.evaluate(n).join(","):null,l.textColor?l.textColor.evaluate(n):null)}))}eachChild(n){for(const l of this.sections)n(l.content),l.scale&&n(l.scale),l.font&&n(l.font),l.textColor&&n(l.textColor)}outputDefined(){return!1}}class ih{constructor(n){this.type=W,this.input=n}static parse(n,l){if(n.length!==2)return l.error("Expected two arguments.");const h=l.parse(n[1],1,wt);return h?new ih(h):l.error("No image name provided.")}evaluate(n){const l=this.input.evaluate(n),h=fn.fromString(l);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(l)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class oh{constructor(n){this.type=Ze,this.input=n}static parse(n,l){if(n.length!==2)return l.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=l.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${ge(h.type)} instead.`):new oh(h):null}evaluate(n){const l=this.input.evaluate(n);if(typeof l=="string"||Array.isArray(l))return l.length;throw new xn(`Expected value to be of type string or array, but found ${ge(mn(l))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Ks={"==":f0,"!=":m0,">":y0,"<":g0,">=":_0,"<=":v0,array:fo,at:Qd,boolean:fo,case:rh,coalesce:Jc,collator:Hc,format:tu,image:ih,in:eh,"index-of":Qc,interpolate:eo,"interpolate-hcl":eo,"interpolate-lab":eo,length:oh,let:Yc,literal:hs,match:th,number:fo,"number-format":nh,object:fo,slice:eu,step:Ua,string:fo,"to-boolean":ja,"to-color":ja,"to-number":ja,"to-string":ja,var:Gc,within:ps};function Qf(a,[n,l,h,m]){n=n.evaluate(a),l=l.evaluate(a),h=h.evaluate(a);const v=m?m.evaluate(a):1,b=bi(n,l,h,v);if(b)throw new xn(b);return new Ir(n/255,l/255,h/255,v,!1)}function em(a,n){return a in n}function ah(a,n){const l=n[a];return l===void 0?null:l}function fs(a){return{type:a}}function tm(a){return{result:"success",value:a}}function Ha(a){return{result:"error",value:a}}function Xs(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function rm(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function sh(a){return!!a.expression&&a.expression.interpolated}function Nr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function gn(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function x0(a){return a}function kr(a,n){const l=n.type==="color",h=a.stops&&typeof a.stops[0][0]=="object",m=h||!(h||a.property!==void 0),v=a.type||(sh(n)?"exponential":"interval");if(l||n.type==="padding"){const O=l?Ir.parse:Tr.parse;(a=St({},a)).stops&&(a.stops=a.stops.map(U=>[U[0],O(U[1])])),a.default=O(a.default?a.default:n.default)}if(a.colorSpace&&(b=a.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var b;let S,P,z;if(v==="exponential")S=Gl;else if(v==="interval")S=dn;else if(v==="categorical"){S=yn,P=Object.create(null);for(const O of a.stops)P[O[0]]=O[1];z=typeof a.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);S=nm}if(h){const O={},U=[];for(let oe=0;oe<a.stops.length;oe++){const ue=a.stops[oe],ye=ue[0].zoom;O[ye]===void 0&&(O[ye]={zoom:ye,type:a.type,property:a.property,default:a.default,stops:[]},U.push(ye)),O[ye].stops.push([ue[0].value,ue[1]])}const Z=[];for(const oe of U)Z.push([O[oe].zoom,kr(O[oe],n)]);const re={name:"linear"};return{kind:"composite",interpolationType:re,interpolationFactor:eo.interpolationFactor.bind(void 0,re),zoomStops:Z.map(oe=>oe[0]),evaluate:({zoom:oe},ue)=>Gl({stops:Z,base:a.base},n,oe).evaluate(oe,ue)}}if(m){const O=v==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:O,interpolationFactor:eo.interpolationFactor.bind(void 0,O),zoomStops:a.stops.map(U=>U[0]),evaluate:({zoom:U})=>S(a,n,U,P,z)}}return{kind:"source",evaluate(O,U){const Z=U&&U.properties?U.properties[a.property]:void 0;return Z===void 0?ms(a.default,n.default):S(a,n,Z,P,z)}}}function ms(a,n,l){return a!==void 0?a:n!==void 0?n:l!==void 0?l:void 0}function yn(a,n,l,h,m){return ms(typeof l===m?h[l]:void 0,a.default,n.default)}function dn(a,n,l){if(Nr(l)!=="number")return ms(a.default,n.default);const h=a.stops.length;if(h===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[h-1][0])return a.stops[h-1][1];const m=qs(a.stops.map(v=>v[0]),l);return a.stops[m][1]}function Gl(a,n,l){const h=a.base!==void 0?a.base:1;if(Nr(l)!=="number")return ms(a.default,n.default);const m=a.stops.length;if(m===1||l<=a.stops[0][0])return a.stops[0][1];if(l>=a.stops[m-1][0])return a.stops[m-1][1];const v=qs(a.stops.map(O=>O[0]),l),b=function(O,U,Z,re){const oe=re-Z,ue=O-Z;return oe===0?0:U===1?ue/oe:(Math.pow(U,ue)-1)/(Math.pow(U,oe)-1)}(l,h,a.stops[v][0],a.stops[v+1][0]),S=a.stops[v][1],P=a.stops[v+1][1],z=Qi[n.type]||x0;return typeof S.evaluate=="function"?{evaluate(...O){const U=S.evaluate.apply(void 0,O),Z=P.evaluate.apply(void 0,O);if(U!==void 0&&Z!==void 0)return z(U,Z,b,a.colorSpace)}}:z(S,P,b,a.colorSpace)}function nm(a,n,l){switch(n.type){case"color":l=Ir.parse(l);break;case"formatted":l=zr.fromString(l.toString());break;case"resolvedImage":l=fn.fromString(l.toString());break;case"padding":l=Tr.parse(l);break;default:Nr(l)===n.type||n.type==="enum"&&n.values[l]||(l=void 0)}return ms(l,a.default,n.default)}mo.register(Ks,{error:[{kind:"error"},[wt],(a,[n])=>{throw new xn(n.evaluate(a))}],typeof:[wt,[Lt],(a,[n])=>ge(mn(n.evaluate(a)))],"to-rgba":[fe(Ze,4),[kt],(a,[n])=>{const[l,h,m,v]=n.evaluate(a).rgb;return[255*l,255*h,255*m,v]}],rgb:[kt,[Ze,Ze,Ze],Qf],rgba:[kt,[Ze,Ze,Ze,Ze],Qf],has:{type:gt,overloads:[[[wt],(a,[n])=>em(n.evaluate(a),a.properties())],[[wt,ur],(a,[n,l])=>em(n.evaluate(a),l.evaluate(a))]]},get:{type:Lt,overloads:[[[wt],(a,[n])=>ah(n.evaluate(a),a.properties())],[[wt,ur],(a,[n,l])=>ah(n.evaluate(a),l.evaluate(a))]]},"feature-state":[Lt,[wt],(a,[n])=>ah(n.evaluate(a),a.featureState||{})],properties:[ur,[],a=>a.properties()],"geometry-type":[wt,[],a=>a.geometryType()],id:[Lt,[],a=>a.id()],zoom:[Ze,[],a=>a.globals.zoom],"heatmap-density":[Ze,[],a=>a.globals.heatmapDensity||0],"line-progress":[Ze,[],a=>a.globals.lineProgress||0],accumulated:[Lt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Ze,fs(Ze),(a,n)=>{let l=0;for(const h of n)l+=h.evaluate(a);return l}],"*":[Ze,fs(Ze),(a,n)=>{let l=1;for(const h of n)l*=h.evaluate(a);return l}],"-":{type:Ze,overloads:[[[Ze,Ze],(a,[n,l])=>n.evaluate(a)-l.evaluate(a)],[[Ze],(a,[n])=>-n.evaluate(a)]]},"/":[Ze,[Ze,Ze],(a,[n,l])=>n.evaluate(a)/l.evaluate(a)],"%":[Ze,[Ze,Ze],(a,[n,l])=>n.evaluate(a)%l.evaluate(a)],ln2:[Ze,[],()=>Math.LN2],pi:[Ze,[],()=>Math.PI],e:[Ze,[],()=>Math.E],"^":[Ze,[Ze,Ze],(a,[n,l])=>Math.pow(n.evaluate(a),l.evaluate(a))],sqrt:[Ze,[Ze],(a,[n])=>Math.sqrt(n.evaluate(a))],log10:[Ze,[Ze],(a,[n])=>Math.log(n.evaluate(a))/Math.LN10],ln:[Ze,[Ze],(a,[n])=>Math.log(n.evaluate(a))],log2:[Ze,[Ze],(a,[n])=>Math.log(n.evaluate(a))/Math.LN2],sin:[Ze,[Ze],(a,[n])=>Math.sin(n.evaluate(a))],cos:[Ze,[Ze],(a,[n])=>Math.cos(n.evaluate(a))],tan:[Ze,[Ze],(a,[n])=>Math.tan(n.evaluate(a))],asin:[Ze,[Ze],(a,[n])=>Math.asin(n.evaluate(a))],acos:[Ze,[Ze],(a,[n])=>Math.acos(n.evaluate(a))],atan:[Ze,[Ze],(a,[n])=>Math.atan(n.evaluate(a))],min:[Ze,fs(Ze),(a,n)=>Math.min(...n.map(l=>l.evaluate(a)))],max:[Ze,fs(Ze),(a,n)=>Math.max(...n.map(l=>l.evaluate(a)))],abs:[Ze,[Ze],(a,[n])=>Math.abs(n.evaluate(a))],round:[Ze,[Ze],(a,[n])=>{const l=n.evaluate(a);return l<0?-Math.round(-l):Math.round(l)}],floor:[Ze,[Ze],(a,[n])=>Math.floor(n.evaluate(a))],ceil:[Ze,[Ze],(a,[n])=>Math.ceil(n.evaluate(a))],"filter-==":[gt,[wt,Lt],(a,[n,l])=>a.properties()[n.value]===l.value],"filter-id-==":[gt,[Lt],(a,[n])=>a.id()===n.value],"filter-type-==":[gt,[wt],(a,[n])=>a.geometryType()===n.value],"filter-<":[gt,[wt,Lt],(a,[n,l])=>{const h=a.properties()[n.value],m=l.value;return typeof h==typeof m&&h<m}],"filter-id-<":[gt,[Lt],(a,[n])=>{const l=a.id(),h=n.value;return typeof l==typeof h&&l<h}],"filter->":[gt,[wt,Lt],(a,[n,l])=>{const h=a.properties()[n.value],m=l.value;return typeof h==typeof m&&h>m}],"filter-id->":[gt,[Lt],(a,[n])=>{const l=a.id(),h=n.value;return typeof l==typeof h&&l>h}],"filter-<=":[gt,[wt,Lt],(a,[n,l])=>{const h=a.properties()[n.value],m=l.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[gt,[Lt],(a,[n])=>{const l=a.id(),h=n.value;return typeof l==typeof h&&l<=h}],"filter->=":[gt,[wt,Lt],(a,[n,l])=>{const h=a.properties()[n.value],m=l.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[gt,[Lt],(a,[n])=>{const l=a.id(),h=n.value;return typeof l==typeof h&&l>=h}],"filter-has":[gt,[Lt],(a,[n])=>n.value in a.properties()],"filter-has-id":[gt,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[gt,[fe(wt)],(a,[n])=>n.value.indexOf(a.geometryType())>=0],"filter-id-in":[gt,[fe(Lt)],(a,[n])=>n.value.indexOf(a.id())>=0],"filter-in-small":[gt,[wt,fe(Lt)],(a,[n,l])=>l.value.indexOf(a.properties()[n.value])>=0],"filter-in-large":[gt,[wt,fe(Lt)],(a,[n,l])=>function(h,m,v,b){for(;v<=b;){const S=v+b>>1;if(m[S]===h)return!0;m[S]>h?b=S-1:v=S+1}return!1}(a.properties()[n.value],l.value,0,l.value.length-1)],all:{type:gt,overloads:[[[gt,gt],(a,[n,l])=>n.evaluate(a)&&l.evaluate(a)],[fs(gt),(a,n)=>{for(const l of n)if(!l.evaluate(a))return!1;return!0}]]},any:{type:gt,overloads:[[[gt,gt],(a,[n,l])=>n.evaluate(a)||l.evaluate(a)],[fs(gt),(a,n)=>{for(const l of n)if(l.evaluate(a))return!0;return!1}]]},"!":[gt,[gt],(a,[n])=>!n.evaluate(a)],"is-supported-script":[gt,[wt],(a,[n])=>{const l=a.globals&&a.globals.isSupportedScript;return!l||l(n.evaluate(a))}],upcase:[wt,[wt],(a,[n])=>n.evaluate(a).toUpperCase()],downcase:[wt,[wt],(a,[n])=>n.evaluate(a).toLowerCase()],concat:[wt,fs(Lt),(a,n)=>n.map(l=>Fr(l.evaluate(a))).join("")],"resolved-locale":[wt,[dr],(a,[n])=>n.evaluate(a).resolvedLocale()]});class lh{constructor(n,l){var h;this.expression=n,this._warningHistory={},this._evaluator=new Gd,this._defaultValue=l?(h=l).type==="color"&&gn(h.default)?new Ir(0,0,0,0):h.type==="color"?Ir.parse(h.default)||null:h.type==="padding"?Tr.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Qr.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(n,l,h,m,v,b){return this._evaluator.globals=n,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(n,l,h,m,v,b){this._evaluator.globals=n,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=b||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new xn(`Expected value to be one of ${Object.keys(this._enumValues).map(P=>JSON.stringify(P)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function ru(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Ks}function nu(a,n){const l=new Uc(Ks,qc,[],n?function(m){const v={color:kt,string:wt,number:Ze,enum:wt,boolean:gt,formatted:pe,padding:H,resolvedImage:W,variableAnchorOffsetCollection:ne};return m.type==="array"?fe(v[m.value]||Lt,m.length):v[m.type]}(n):void 0),h=l.parse(a,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?tm(new lh(h,n)):Ha(l.errors)}class ch{constructor(n,l){this.kind=n,this._styleExpression=l,this.isStateDependent=n!=="constant"&&!Wl(l.expression)}evaluateWithoutErrorHandling(n,l,h,m,v,b){return this._styleExpression.evaluateWithoutErrorHandling(n,l,h,m,v,b)}evaluate(n,l,h,m,v,b){return this._styleExpression.evaluate(n,l,h,m,v,b)}}class iu{constructor(n,l,h,m){this.kind=n,this.zoomStops=h,this._styleExpression=l,this.isStateDependent=n!=="camera"&&!Wl(l.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,l,h,m,v,b){return this._styleExpression.evaluateWithoutErrorHandling(n,l,h,m,v,b)}evaluate(n,l,h,m,v,b){return this._styleExpression.evaluate(n,l,h,m,v,b)}interpolationFactor(n,l,h){return this.interpolationType?eo.interpolationFactor(this.interpolationType,n,l,h):0}}function uh(a,n){const l=nu(a,n);if(l.result==="error")return l;const h=l.value.expression,m=Zc(h);if(!m&&!Xs(n))return Ha([new _t("","data expressions not supported")]);const v=Kc(h,["zoom"]);if(!v&&!rm(n))return Ha([new _t("","zoom expressions not supported")]);const b=Zl(h);return b||v?b instanceof _t?Ha([b]):b instanceof eo&&!sh(n)?Ha([new _t("",'"interpolate" expressions cannot be used with this property')]):tm(b?new iu(m?"camera":"composite",l.value,b.labels,b instanceof eo?b.interpolation:void 0):new ch(m?"constant":"source",l.value)):Ha([new _t("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ql{constructor(n,l){this._parameters=n,this._specification=l,St(this,kr(this._parameters,this._specification))}static deserialize(n){return new ql(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Zl(a){let n=null;if(a instanceof Yc)n=Zl(a.result);else if(a instanceof Jc){for(const l of a.args)if(n=Zl(l),n)break}else(a instanceof Ua||a instanceof eo)&&a.input instanceof mo&&a.input.name==="zoom"&&(n=a);return n instanceof _t||a.eachChild(l=>{const h=Zl(l);h instanceof _t?n=h:!n&&h?n=new _t("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new _t("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Kl(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const n of a.slice(1))if(!Kl(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const b0={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function dh(a){if(a==null)return{filter:()=>!0,needGeometry:!1};Kl(a)||(a=ou(a));const n=nu(a,b0);if(n.result==="error")throw new Error(n.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,h,m)=>n.value.evaluate(l,h,{},m),needGeometry:im(a)}}function w0(a,n){return a<n?-1:a>n?1:0}function im(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let n=1;n<a.length;n++)if(im(a[n]))return!0;return!1}function ou(a){if(!a)return!0;const n=a[0];return a.length<=1?n!=="any":n==="=="?hh(a[1],a[2],"=="):n==="!="?Xl(hh(a[1],a[2],"==")):n==="<"||n===">"||n==="<="||n===">="?hh(a[1],a[2],n):n==="any"?(l=a.slice(1),["any"].concat(l.map(ou))):n==="all"?["all"].concat(a.slice(1).map(ou)):n==="none"?["all"].concat(a.slice(1).map(ou).map(Xl)):n==="in"?om(a[1],a.slice(2)):n==="!in"?Xl(om(a[1],a.slice(2))):n==="has"?am(a[1]):n==="!has"?Xl(am(a[1])):n!=="within"||a;var l}function hh(a,n,l){switch(a){case"$type":return[`filter-type-${l}`,n];case"$id":return[`filter-id-${l}`,n];default:return[`filter-${l}`,a,n]}}function om(a,n){if(n.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(l=>typeof l!=typeof n[0])?["filter-in-large",a,["literal",n.sort(w0)]]:["filter-in-small",a,["literal",n]]}}function am(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Xl(a){return["!",a]}function au(a){const n=typeof a;if(n==="number"||n==="boolean"||n==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let m="[";for(const v of a)m+=`${au(v)},`;return`${m}]`}const l=Object.keys(a).sort();let h="{";for(let m=0;m<l.length;m++)h+=`${JSON.stringify(l[m])}:${au(a[l[m]])},`;return`${h}}`}function su(a){let n="";for(const l of xr)n+=`/${au(a[l])}`;return n}function sm(a){const n=a.value;return n?[new Oe(a.key,n,"constants have been deprecated as of v8")]:[]}function bn(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function gs(a){if(Array.isArray(a))return a.map(gs);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const n={};for(const l in a)n[l]=gs(a[l]);return n}return bn(a)}function Oi(a){const n=a.key,l=a.value,h=a.valueSpec||{},m=a.objectElementValidators||{},v=a.style,b=a.styleSpec,S=a.validateSpec;let P=[];const z=Nr(l);if(z!=="object")return[new Oe(n,l,`object expected, ${z} found`)];for(const O in l){const U=O.split(".")[0],Z=h[U]||h["*"];let re;if(m[U])re=m[U];else if(h[U])re=S;else if(m["*"])re=m["*"];else{if(!h["*"]){P.push(new Oe(n,l[O],`unknown property "${O}"`));continue}re=S}P=P.concat(re({key:(n&&`${n}.`)+O,value:l[O],valueSpec:Z,style:v,styleSpec:b,object:l,objectKey:O,validateSpec:S},l))}for(const O in h)m[O]||h[O].required&&h[O].default===void 0&&l[O]===void 0&&P.push(new Oe(n,l,`missing required property "${O}"`));return P}function Js(a){const n=a.value,l=a.valueSpec,h=a.style,m=a.styleSpec,v=a.key,b=a.arrayElementValidator||a.validateSpec;if(Nr(n)!=="array")return[new Oe(v,n,`array expected, ${Nr(n)} found`)];if(l.length&&n.length!==l.length)return[new Oe(v,n,`array length ${l.length} expected, length ${n.length} found`)];if(l["min-length"]&&n.length<l["min-length"])return[new Oe(v,n,`array length at least ${l["min-length"]} expected, length ${n.length} found`)];let S={type:l.value,values:l.values};m.$version<7&&(S.function=l.function),Nr(l.value)==="object"&&(S=l.value);let P=[];for(let z=0;z<n.length;z++)P=P.concat(b({array:n,arrayIndex:z,value:n[z],valueSpec:S,validateSpec:a.validateSpec,style:h,styleSpec:m,key:`${v}[${z}]`}));return P}function Jl(a){const n=a.key,l=a.value,h=a.valueSpec;let m=Nr(l);return m==="number"&&l!=l&&(m="NaN"),m!=="number"?[new Oe(n,l,`number expected, ${m} found`)]:"minimum"in h&&l<h.minimum?[new Oe(n,l,`${l} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&l>h.maximum?[new Oe(n,l,`${l} is greater than the maximum value ${h.maximum}`)]:[]}function lu(a){const n=a.valueSpec,l=bn(a.value.type);let h,m,v,b={};const S=l!=="categorical"&&a.value.property===void 0,P=!S,z=Nr(a.value.stops)==="array"&&Nr(a.value.stops[0])==="array"&&Nr(a.value.stops[0][0])==="object",O=Oi({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(re){if(l==="identity")return[new Oe(re.key,re.value,'identity function may not have a "stops" property')];let oe=[];const ue=re.value;return oe=oe.concat(Js({key:re.key,value:ue,valueSpec:re.valueSpec,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,arrayElementValidator:U})),Nr(ue)==="array"&&ue.length===0&&oe.push(new Oe(re.key,ue,"array must have at least one stop")),oe},default:function(re){return re.validateSpec({key:re.key,value:re.value,valueSpec:n,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec})}}});return l==="identity"&&S&&O.push(new Oe(a.key,a.value,'missing required property "property"')),l==="identity"||a.value.stops||O.push(new Oe(a.key,a.value,'missing required property "stops"')),l==="exponential"&&a.valueSpec.expression&&!sh(a.valueSpec)&&O.push(new Oe(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(P&&!Xs(a.valueSpec)?O.push(new Oe(a.key,a.value,"property functions not supported")):S&&!rm(a.valueSpec)&&O.push(new Oe(a.key,a.value,"zoom functions not supported"))),l!=="categorical"&&!z||a.value.property!==void 0||O.push(new Oe(a.key,a.value,'"property" property is required')),O;function U(re){let oe=[];const ue=re.value,ye=re.key;if(Nr(ue)!=="array")return[new Oe(ye,ue,`array expected, ${Nr(ue)} found`)];if(ue.length!==2)return[new Oe(ye,ue,`array length 2 expected, length ${ue.length} found`)];if(z){if(Nr(ue[0])!=="object")return[new Oe(ye,ue,`object expected, ${Nr(ue[0])} found`)];if(ue[0].zoom===void 0)return[new Oe(ye,ue,"object stop key must have zoom")];if(ue[0].value===void 0)return[new Oe(ye,ue,"object stop key must have value")];if(v&&v>bn(ue[0].zoom))return[new Oe(ye,ue[0].zoom,"stop zoom values must appear in ascending order")];bn(ue[0].zoom)!==v&&(v=bn(ue[0].zoom),m=void 0,b={}),oe=oe.concat(Oi({key:`${ye}[0]`,value:ue[0],valueSpec:{zoom:{}},validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,objectElementValidators:{zoom:Jl,value:Z}}))}else oe=oe.concat(Z({key:`${ye}[0]`,value:ue[0],valueSpec:{},validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec},ue));return ru(gs(ue[1]))?oe.concat([new Oe(`${ye}[1]`,ue[1],"expressions are not allowed in function stops.")]):oe.concat(re.validateSpec({key:`${ye}[1]`,value:ue[1],valueSpec:n,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec}))}function Z(re,oe){const ue=Nr(re.value),ye=bn(re.value),_e=re.value!==null?re.value:oe;if(h){if(ue!==h)return[new Oe(re.key,_e,`${ue} stop domain type must match previous stop domain type ${h}`)]}else h=ue;if(ue!=="number"&&ue!=="string"&&ue!=="boolean")return[new Oe(re.key,_e,"stop domain value must be a number, string, or boolean")];if(ue!=="number"&&l!=="categorical"){let Re=`number expected, ${ue} found`;return Xs(n)&&l===void 0&&(Re+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Oe(re.key,_e,Re)]}return l!=="categorical"||ue!=="number"||isFinite(ye)&&Math.floor(ye)===ye?l!=="categorical"&&ue==="number"&&m!==void 0&&ye<m?[new Oe(re.key,_e,"stop domain values must appear in ascending order")]:(m=ye,l==="categorical"&&ye in b?[new Oe(re.key,_e,"stop domain values must be unique")]:(b[ye]=!0,[])):[new Oe(re.key,_e,`integer expected, found ${ye}`)]}}function ys(a){const n=(a.expressionContext==="property"?uh:nu)(gs(a.value),a.valueSpec);if(n.result==="error")return n.value.map(h=>new Oe(`${a.key}${h.key}`,a.value,h.message));const l=n.value.expression||n.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!l.outputDefined())return[new Oe(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Wl(l))return[new Oe(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Wl(l))return[new Oe(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Kc(l,["zoom","feature-state"]))return[new Oe(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Zc(l))return[new Oe(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Yl(a){const n=a.key,l=a.value,h=a.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(bn(l))===-1&&m.push(new Oe(n,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(h.values).indexOf(bn(l))===-1&&m.push(new Oe(n,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),m}function Ys(a){return Kl(gs(a.value))?ys(St({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):lm(a)}function lm(a){const n=a.value,l=a.key;if(Nr(n)!=="array")return[new Oe(l,n,`array expected, ${Nr(n)} found`)];const h=a.styleSpec;let m,v=[];if(n.length<1)return[new Oe(l,n,"filter array must have at least 1 element")];switch(v=v.concat(Yl({key:`${l}[0]`,value:n[0],valueSpec:h.filter_operator,style:a.style,styleSpec:a.styleSpec})),bn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&bn(n[1])==="$type"&&v.push(new Oe(l,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Oe(l,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=Nr(n[1]),m!=="string"&&v.push(new Oe(`${l}[1]`,n[1],`string expected, ${m} found`)));for(let b=2;b<n.length;b++)m=Nr(n[b]),bn(n[1])==="$type"?v=v.concat(Yl({key:`${l}[${b}]`,value:n[b],valueSpec:h.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new Oe(`${l}[${b}]`,n[b],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let b=1;b<n.length;b++)v=v.concat(lm({key:`${l}[${b}]`,value:n[b],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=Nr(n[1]),n.length!==2?v.push(new Oe(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new Oe(`${l}[1]`,n[1],`string expected, ${m} found`));break;case"within":m=Nr(n[1]),n.length!==2?v.push(new Oe(l,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="object"&&v.push(new Oe(`${l}[1]`,n[1],`object expected, ${m} found`))}return v}function cm(a,n){const l=a.key,h=a.validateSpec,m=a.style,v=a.styleSpec,b=a.value,S=a.objectKey,P=v[`${n}_${a.layerType}`];if(!P)return[];const z=S.match(/^(.*)-transition$/);if(n==="paint"&&z&&P[z[1]]&&P[z[1]].transition)return h({key:l,value:b,valueSpec:v.transition,style:m,styleSpec:v});const O=a.valueSpec||P[S];if(!O)return[new Oe(l,b,`unknown property "${S}"`)];let U;if(Nr(b)==="string"&&Xs(O)&&!O.tokens&&(U=/^{([^}]+)}$/.exec(b)))return[new Oe(l,b,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(U[1])} }\`.`)];const Z=[];return a.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&Z.push(new Oe(l,b,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&gn(gs(b))&&bn(b.type)==="identity"&&Z.push(new Oe(l,b,'"text-font" does not support identity functions'))),Z.concat(h({key:a.key,value:b,valueSpec:O,style:m,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:S}))}function um(a){return cm(a,"paint")}function dm(a){return cm(a,"layout")}function hm(a){let n=[];const l=a.value,h=a.key,m=a.style,v=a.styleSpec;l.type||l.ref||n.push(new Oe(h,l,'either "type" or "ref" is required'));let b=bn(l.type);const S=bn(l.ref);if(l.id){const P=bn(l.id);for(let z=0;z<a.arrayIndex;z++){const O=m.layers[z];bn(O.id)===P&&n.push(new Oe(h,l.id,`duplicate layer id "${l.id}", previously used at line ${O.id.__line__}`))}}if("ref"in l){let P;["type","source","source-layer","filter","layout"].forEach(z=>{z in l&&n.push(new Oe(h,l[z],`"${z}" is prohibited for ref layers`))}),m.layers.forEach(z=>{bn(z.id)===S&&(P=z)}),P?P.ref?n.push(new Oe(h,l.ref,"ref cannot reference another ref layer")):b=bn(P.type):n.push(new Oe(h,l.ref,`ref layer "${S}" not found`))}else if(b!=="background")if(l.source){const P=m.sources&&m.sources[l.source],z=P&&bn(P.type);P?z==="vector"&&b==="raster"?n.push(new Oe(h,l.source,`layer "${l.id}" requires a raster source`)):z!=="raster-dem"&&b==="hillshade"?n.push(new Oe(h,l.source,`layer "${l.id}" requires a raster-dem source`)):z==="raster"&&b!=="raster"?n.push(new Oe(h,l.source,`layer "${l.id}" requires a vector source`)):z!=="vector"||l["source-layer"]?z==="raster-dem"&&b!=="hillshade"?n.push(new Oe(h,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!l.paint||!l.paint["line-gradient"]||z==="geojson"&&P.lineMetrics||n.push(new Oe(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Oe(h,l,`layer "${l.id}" must specify a "source-layer"`)):n.push(new Oe(h,l.source,`source "${l.source}" not found`))}else n.push(new Oe(h,l,'missing required property "source"'));return n=n.concat(Oi({key:h,value:l,valueSpec:v.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${h}.type`,value:l.type,valueSpec:v.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:l,objectKey:"type"}),filter:Ys,layout:P=>Oi({layer:l,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":z=>dm(St({layerType:b},z))}}),paint:P=>Oi({layer:l,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":z=>um(St({layerType:b},z))}})}})),n}function Ko(a){const n=a.value,l=a.key,h=Nr(n);return h!=="string"?[new Oe(l,n,`string expected, ${h} found`)]:[]}const Ql={promoteId:function({key:a,value:n}){if(Nr(n)==="string")return Ko({key:a,value:n});{const l=[];for(const h in n)l.push(...Ko({key:`${a}.${h}`,value:n[h]}));return l}}};function to(a){const n=a.value,l=a.key,h=a.styleSpec,m=a.style,v=a.validateSpec;if(!n.type)return[new Oe(l,n,'"type" is required')];const b=bn(n.type);let S;switch(b){case"vector":case"raster":return S=Oi({key:l,value:n,valueSpec:h[`source_${b.replace("-","_")}`],style:a.style,styleSpec:h,objectElementValidators:Ql,validateSpec:v}),S;case"raster-dem":return S=function(P){var z;const O=(z=P.sourceName)!==null&&z!==void 0?z:"",U=P.value,Z=P.styleSpec,re=Z.source_raster_dem,oe=P.style;let ue=[];const ye=Nr(U);if(U===void 0)return ue;if(ye!=="object")return ue.push(new Oe("source_raster_dem",U,`object expected, ${ye} found`)),ue;const _e=bn(U.encoding)==="custom",Re=["redFactor","greenFactor","blueFactor","baseShift"],be=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const De in U)!_e&&Re.includes(De)?ue.push(new Oe(De,U[De],`In "${O}": "${De}" is only valid when "encoding" is set to "custom". ${be} encoding found`)):re[De]?ue=ue.concat(P.validateSpec({key:De,value:U[De],valueSpec:re[De],validateSpec:P.validateSpec,style:oe,styleSpec:Z})):ue.push(new Oe(De,U[De],`unknown property "${De}"`));return ue}({sourceName:l,value:n,style:a.style,styleSpec:h,validateSpec:v}),S;case"geojson":if(S=Oi({key:l,value:n,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:v,objectElementValidators:Ql}),n.cluster)for(const P in n.clusterProperties){const[z,O]=n.clusterProperties[P],U=typeof z=="string"?[z,["accumulated"],["get",P]]:z;S.push(...ys({key:`${l}.${P}.map`,value:O,validateSpec:v,expressionContext:"cluster-map"})),S.push(...ys({key:`${l}.${P}.reduce`,value:U,validateSpec:v,expressionContext:"cluster-reduce"}))}return S;case"video":return Oi({key:l,value:n,valueSpec:h.source_video,style:m,validateSpec:v,styleSpec:h});case"image":return Oi({key:l,value:n,valueSpec:h.source_image,style:m,validateSpec:v,styleSpec:h});case"canvas":return[new Oe(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Yl({key:`${l}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:v,styleSpec:h})}}function ec(a){const n=a.value,l=a.styleSpec,h=l.light,m=a.style;let v=[];const b=Nr(n);if(n===void 0)return v;if(b!=="object")return v=v.concat([new Oe("light",n,`object expected, ${b} found`)]),v;for(const S in n){const P=S.match(/^(.*)-transition$/);v=v.concat(P&&h[P[1]]&&h[P[1]].transition?a.validateSpec({key:S,value:n[S],valueSpec:l.transition,validateSpec:a.validateSpec,style:m,styleSpec:l}):h[S]?a.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:a.validateSpec,style:m,styleSpec:l}):[new Oe(S,n[S],`unknown property "${S}"`)])}return v}function pm(a){const n=a.value,l=a.styleSpec,h=l.terrain,m=a.style;let v=[];const b=Nr(n);if(n===void 0)return v;if(b!=="object")return v=v.concat([new Oe("terrain",n,`object expected, ${b} found`)]),v;for(const S in n)v=v.concat(h[S]?a.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:a.validateSpec,style:m,styleSpec:l}):[new Oe(S,n[S],`unknown property "${S}"`)]);return v}function fm(a){let n=[];const l=a.value,h=a.key;if(Array.isArray(l)){const m=[],v=[];for(const b in l)l[b].id&&m.includes(l[b].id)&&n.push(new Oe(h,l,`all the sprites' ids must be unique, but ${l[b].id} is duplicated`)),m.push(l[b].id),l[b].url&&v.includes(l[b].url)&&n.push(new Oe(h,l,`all the sprites' URLs must be unique, but ${l[b].url} is duplicated`)),v.push(l[b].url),n=n.concat(Oi({key:`${h}[${b}]`,value:l[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return n}return Ko({key:h,value:l})}const mm={"*":()=>[],array:Js,boolean:function(a){const n=a.value,l=a.key,h=Nr(n);return h!=="boolean"?[new Oe(l,n,`boolean expected, ${h} found`)]:[]},number:Jl,color:function(a){const n=a.key,l=a.value,h=Nr(l);return h!=="string"?[new Oe(n,l,`color expected, ${h} found`)]:Ir.parse(String(l))?[]:[new Oe(n,l,`color expected, "${l}" found`)]},constants:sm,enum:Yl,filter:Ys,function:lu,layer:hm,object:Oi,source:to,light:ec,terrain:pm,string:Ko,formatted:function(a){return Ko(a).length===0?[]:ys(a)},resolvedImage:function(a){return Ko(a).length===0?[]:ys(a)},padding:function(a){const n=a.key,l=a.value;if(Nr(l)==="array"){if(l.length<1||l.length>4)return[new Oe(n,l,`padding requires 1 to 4 values; ${l.length} values found`)];const h={type:"number"};let m=[];for(let v=0;v<l.length;v++)m=m.concat(a.validateSpec({key:`${n}[${v}]`,value:l[v],validateSpec:a.validateSpec,valueSpec:h}));return m}return Jl({key:n,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(a){const n=a.key,l=a.value,h=Nr(l),m=a.styleSpec;if(h!=="array"||l.length<1||l.length%2!=0)return[new Oe(n,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let b=0;b<l.length;b+=2)v=v.concat(Yl({key:`${n}[${b}]`,value:l[b],valueSpec:m.layout_symbol["text-anchor"]})),v=v.concat(Js({key:`${n}[${b+1}]`,value:l[b+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:m}));return v},sprite:fm};function ya(a){const n=a.value,l=a.valueSpec,h=a.styleSpec;return a.validateSpec=ya,l.expression&&gn(bn(n))?lu(a):l.expression&&ru(gs(n))?ys(a):l.type&&mm[l.type]?mm[l.type](a):Oi(St({},a,{valueSpec:l.type?h[l.type]:l}))}function gm(a){const n=a.value,l=a.key,h=Ko(a);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Oe(l,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new Oe(l,n,'"glyphs" url must include a "{range}" token'))),h}function go(a,n=Ue){let l=[];return l=l.concat(ya({key:"",value:a,valueSpec:n.$root,styleSpec:n,style:a,validateSpec:ya,objectElementValidators:{glyphs:gm,"*":()=>[]}})),a.constants&&(l=l.concat(sm({key:"constants",value:a.constants,style:a,styleSpec:n,validateSpec:ya}))),cu(l)}function va(a){return function(n){return a({...n,validateSpec:ya})}}function cu(a){return[].concat(a).sort((n,l)=>n.line-l.line)}function _a(a){return function(...n){return cu(a.apply(this,n))}}go.source=_a(va(to)),go.sprite=_a(va(fm)),go.glyphs=_a(va(gm)),go.light=_a(va(ec)),go.terrain=_a(va(pm)),go.layer=_a(va(hm)),go.filter=_a(va(Ys)),go.paintProperty=_a(va(um)),go.layoutProperty=_a(va(dm));const xa=go,S0=xa.light,ph=xa.paintProperty,ym=xa.layoutProperty;function uu(a,n){let l=!1;if(n&&n.length)for(const h of n)a.fire(new Ft(new Error(h.message))),l=!0;return l}class Qs{constructor(n,l,h){const m=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const b=new Int32Array(this.arrayBuffer);n=b[0],this.d=(l=b[1])+2*(h=b[2]);for(let P=0;P<this.d*this.d;P++){const z=b[3+P],O=b[3+P+1];m.push(z===O?null:b.subarray(z,O))}const S=b[3+m.length+1];this.keys=b.subarray(b[3+m.length],S),this.bboxes=b.subarray(S),this.insert=this._insertReadonly}else{this.d=l+2*h;for(let b=0;b<this.d*this.d;b++)m.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=n,this.padding=h,this.scale=l/n,this.uid=0;const v=h/l*n;this.min=-v,this.max=n+v}insert(n,l,h,m,v){this._forEachCell(l,h,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,l,h,m,v,b){this.cells[v].push(b)}query(n,l,h,m,v){const b=this.min,S=this.max;if(n<=b&&l<=b&&S<=h&&S<=m&&!v)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(n,l,h,m,this._queryCell,P,{},v),P}}_queryCell(n,l,h,m,v,b,S,P){const z=this.cells[v];if(z!==null){const O=this.keys,U=this.bboxes;for(let Z=0;Z<z.length;Z++){const re=z[Z];if(S[re]===void 0){const oe=4*re;(P?P(U[oe+0],U[oe+1],U[oe+2],U[oe+3]):n<=U[oe+2]&&l<=U[oe+3]&&h>=U[oe+0]&&m>=U[oe+1])?(S[re]=!0,b.push(O[re])):S[re]=!1}}}}_forEachCell(n,l,h,m,v,b,S,P){const z=this._convertToCellCoord(n),O=this._convertToCellCoord(l),U=this._convertToCellCoord(h),Z=this._convertToCellCoord(m);for(let re=z;re<=U;re++)for(let oe=O;oe<=Z;oe++){const ue=this.d*oe+re;if((!P||P(this._convertFromCellCoord(re),this._convertFromCellCoord(oe),this._convertFromCellCoord(re+1),this._convertFromCellCoord(oe+1)))&&v.call(this,n,l,h,m,ue,b,S,P))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,l=3+this.cells.length+1+1;let h=0;for(let b=0;b<this.cells.length;b++)h+=this.cells[b].length;const m=new Int32Array(l+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=l;for(let b=0;b<n.length;b++){const S=n[b];m[3+b]=v,m.set(S,v),v+=S.length}return m[3+n.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+n.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(n,l){const h=n.toArrayBuffer();return l&&l.push(h),{buffer:h}}static deserialize(n){return new Qs(n.buffer)}}const ba={};function $t(a,n,l={}){if(ba[a])throw new Error(`${a} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:a,writeable:!1}),ba[a]={klass:n,omit:l.omit||[],shallow:l.shallow||[]}}$t("Object",Object),$t("TransferableGridIndex",Qs),$t("Color",Ir),$t("Error",Error),$t("AJAXError",Ke),$t("ResolvedImage",fn),$t("StylePropertyFunction",ql),$t("StyleExpression",lh,{omit:["_evaluator"]}),$t("ZoomDependentExpression",iu),$t("ZoomConstantExpression",ch),$t("CompoundExpression",mo,{omit:["_evaluate"]});for(const a in Ks)Ks[a]._classRegistryKey||$t(`Expression_${a}`,Ks[a]);function du(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Wa(a,n){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob)return a;if(du(a)||Ve(a))return n&&n.push(a),a;if(ArrayBuffer.isView(a)){const l=a;return n&&n.push(l.buffer),l}if(a instanceof ImageData)return n&&n.push(a.data.buffer),a;if(Array.isArray(a)){const l=[];for(const h of a)l.push(Wa(h,n));return l}if(typeof a=="object"){const l=a.constructor,h=l._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!ba[h])throw new Error(`${h} is not registered.`);const m=l.serialize?l.serialize(a,n):{};if(l.serialize){if(n&&m===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in a){if(!a.hasOwnProperty(v)||ba[h].omit.indexOf(v)>=0)continue;const b=a[v];m[v]=ba[h].shallow.indexOf(v)>=0?b:Wa(b,n)}a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof a)}function el(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||du(a)||Ve(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(el);if(typeof a=="object"){const n=a.$name||"Object";if(!ba[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:l}=ba[n];if(!l)throw new Error(`can't deserialize unregistered class ${n}`);if(l.deserialize)return l.deserialize(a);const h=Object.create(l.prototype);for(const m of Object.keys(a)){if(m==="$name")continue;const v=a[m];h[m]=ba[n].shallow.indexOf(m)>=0?v:el(v)}return h}throw new Error("can't deserialize object of type "+typeof a)}class vm{constructor(){this.first=!0}update(n,l){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=l),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const zt={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function fh(a){for(const n of a)if(gh(n.charCodeAt(0)))return!0;return!1}function mh(a){for(const n of a)if(!C0(n.charCodeAt(0)))return!1;return!0}function C0(a){return!(zt.Arabic(a)||zt["Arabic Supplement"](a)||zt["Arabic Extended-A"](a)||zt["Arabic Presentation Forms-A"](a)||zt["Arabic Presentation Forms-B"](a))}function gh(a){return!(a!==746&&a!==747&&(a<4352||!(zt["Bopomofo Extended"](a)||zt.Bopomofo(a)||zt["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||zt["CJK Compatibility Ideographs"](a)||zt["CJK Compatibility"](a)||zt["CJK Radicals Supplement"](a)||zt["CJK Strokes"](a)||!(!zt["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||zt["CJK Unified Ideographs Extension A"](a)||zt["CJK Unified Ideographs"](a)||zt["Enclosed CJK Letters and Months"](a)||zt["Hangul Compatibility Jamo"](a)||zt["Hangul Jamo Extended-A"](a)||zt["Hangul Jamo Extended-B"](a)||zt["Hangul Jamo"](a)||zt["Hangul Syllables"](a)||zt.Hiragana(a)||zt["Ideographic Description Characters"](a)||zt.Kanbun(a)||zt["Kangxi Radicals"](a)||zt["Katakana Phonetic Extensions"](a)||zt.Katakana(a)&&a!==12540||!(!zt["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!zt["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||zt["Unified Canadian Aboriginal Syllabics"](a)||zt["Unified Canadian Aboriginal Syllabics Extended"](a)||zt["Vertical Forms"](a)||zt["Yijing Hexagram Symbols"](a)||zt["Yi Syllables"](a)||zt["Yi Radicals"](a))))}function _m(a){return!(gh(a)||function(n){return!!(zt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||zt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||zt["Letterlike Symbols"](n)||zt["Number Forms"](n)||zt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||zt["Control Pictures"](n)&&n!==9251||zt["Optical Character Recognition"](n)||zt["Enclosed Alphanumerics"](n)||zt["Geometric Shapes"](n)||zt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||zt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||zt["CJK Symbols and Punctuation"](n)||zt.Katakana(n)||zt["Private Use Area"](n)||zt["CJK Compatibility Forms"](n)||zt["Small Form Variants"](n)||zt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(a))}function xm(a){return a>=1424&&a<=2303||zt["Arabic Presentation Forms-A"](a)||zt["Arabic Presentation Forms-B"](a)}function bm(a,n){return!(!n&&xm(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||zt.Khmer(a))}function I0(a){for(const n of a)if(xm(n.charCodeAt(0)))return!0;return!1}const yh="deferred",vh="loading",_h="loaded";let xh=null,Bi="unavailable",Ga=null;const tc=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(Bi="error"),xh&&xh(a)};function bh(){rc.fire(new sr("pluginStateChange",{pluginStatus:Bi,pluginURL:Ga}))}const rc=new _r,wh=function(){return Bi},wm=function(){if(Bi!==yh||!Ga)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Bi=vh,bh(),Ga&&vr({url:Ga},a=>{a?tc(a):(Bi=_h,bh())})},ro={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Bi===_h||ro.applyArabicShaping!=null,isLoading:()=>Bi===vh,setState(a){if(!Le())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Bi=a.pluginStatus,Ga=a.pluginURL},isParsed(){if(!Le())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ro.applyArabicShaping!=null&&ro.processBidirectionalText!=null&&ro.processStyledBidirectionalText!=null},getPluginURL(){if(!Le())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ga}};class on{constructor(n,l){this.zoom=n,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new vm,this.transition={})}isSupportedScript(n){return function(l,h){for(const m of l)if(!bm(m.charCodeAt(0),h))return!1;return!0}(n,ro.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,l=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*l}}}class hu{constructor(n,l){this.property=n,this.value=l,this.expression=function(h,m){if(gn(h))return new ql(h,m);if(ru(h)){const v=uh(h,m);if(v.result==="error")throw new Error(v.value.map(b=>`${b.key}: ${b.message}`).join(", "));return v.value}{let v=h;return m.type==="color"&&typeof h=="string"?v=Ir.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=Qr.parse(h)):v=Tr.parse(h),{kind:"constant",evaluate:()=>v}}}(l===void 0?n.specification.default:l,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,l,h){return this.property.possiblyEvaluate(this,n,l,h)}}class Sh{constructor(n){this.property=n,this.value=new hu(n,void 0)}transitioned(n,l){return new Cm(this.property,this.value,l,ae({},n.transition,this.transition),n.now)}untransitioned(){return new Cm(this.property,this.value,null,{},0)}}class Sm{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Ee(this._values[n].value.value)}setValue(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Sh(this._values[n].property)),this._values[n].value=new hu(this._values[n].property,l===null?void 0:Ee(l))}getTransition(n){return Ee(this._values[n].transition)}setTransition(n,l){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Sh(this._values[n].property)),this._values[n].transition=Ee(l)||void 0}serialize(){const n={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(n[l]=h);const m=this.getTransition(l);m!==void 0&&(n[`${l}-transition`]=m)}return n}transitioned(n,l){const h=new Im(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(n,l._values[m]);return h}untransitioned(){const n=new Im(this._properties);for(const l of Object.keys(this._values))n._values[l]=this._values[l].untransitioned();return n}}class Cm{constructor(n,l,h,m,v){this.property=n,this.value=l,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,n.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(n,l,h){const m=n.now||0,v=this.value.possiblyEvaluate(n,l,h),b=this.prior;if(b){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return b.possiblyEvaluate(n,l,h);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(n,l,h),v,function(P){if(P<=0)return 0;if(P>=1)return 1;const z=P*P,O=z*P;return 4*(P<.5?O:3*(P-z)+O-.75)}(S))}}return v}}class Im{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,l,h){const m=new pu(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,l,h);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class T0{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Ee(this._values[n].value)}setValue(n,l){this._values[n]=new hu(this._values[n].property,l===null?void 0:Ee(l))}serialize(){const n={};for(const l of Object.keys(this._values)){const h=this.getValue(l);h!==void 0&&(n[l]=h)}return n}possiblyEvaluate(n,l,h){const m=new pu(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,l,h);return m}}class Si{constructor(n,l,h){this.property=n,this.value=l,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,l,h,m){return this.property.evaluate(this.value,this.parameters,n,l,h,m)}}class pu{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Xt{constructor(n){this.specification=n}possiblyEvaluate(n,l){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(l)}interpolate(n,l,h){const m=Qi[this.specification.type];return m?m(n,l,h):n}}class or{constructor(n,l){this.specification=n,this.overrides=l}possiblyEvaluate(n,l,h,m){return new Si(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(l,null,{},h,m)}:n.expression,l)}interpolate(n,l,h){if(n.value.kind!=="constant"||l.value.kind!=="constant")return n;if(n.value.value===void 0||l.value.value===void 0)return new Si(this,{kind:"constant",value:void 0},n.parameters);const m=Qi[this.specification.type];if(m){const v=m(n.value.value,l.value.value,h);return new Si(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,l,h,m,v,b){return n.kind==="constant"?n.value:n.evaluate(l,h,m,v,b)}}class nc extends or{possiblyEvaluate(n,l,h,m){if(n.value===void 0)return new Si(this,{kind:"constant",value:void 0},l);if(n.expression.kind==="constant"){const v=n.expression.evaluate(l,null,{},h,m),b=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(b,b,b,l);return new Si(this,{kind:"constant",value:S},l)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:l.zoom-1}),n.expression.evaluate({zoom:l.zoom}),n.expression.evaluate({zoom:l.zoom+1}),l);return new Si(this,{kind:"constant",value:v},l)}return new Si(this,n.expression,l)}evaluate(n,l,h,m,v,b){if(n.kind==="source"){const S=n.evaluate(l,h,m,v,b);return this._calculate(S,S,S,l)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(l.zoom)-1},h,m),n.evaluate({zoom:Math.floor(l.zoom)},h,m),n.evaluate({zoom:Math.floor(l.zoom)+1},h,m),l):n.value}_calculate(n,l,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:h,to:l}}interpolate(n){return n}}class Ch{constructor(n){this.specification=n}possiblyEvaluate(n,l,h,m){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(l,null,{},h,m);return this._calculate(v,v,v,l)}return this._calculate(n.expression.evaluate(new on(Math.floor(l.zoom-1),l)),n.expression.evaluate(new on(Math.floor(l.zoom),l)),n.expression.evaluate(new on(Math.floor(l.zoom+1),l)),l)}}_calculate(n,l,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:l}:{from:h,to:l}}interpolate(n){return n}}class Ih{constructor(n){this.specification=n}possiblyEvaluate(n,l,h,m){return!!n.expression.evaluate(l,null,{},h,m)}interpolate(){return!1}}class Rn{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in n){const h=n[l];h.specification.overridable&&this.overridableProperties.push(l);const m=this.defaultPropertyValues[l]=new hu(h,void 0),v=this.defaultTransitionablePropertyValues[l]=new Sh(h);this.defaultTransitioningPropertyValues[l]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=m.possiblyEvaluate({})}}}$t("DataDrivenProperty",or),$t("DataConstantProperty",Xt),$t("CrossFadedDataDrivenProperty",nc),$t("CrossFadedProperty",Ch),$t("ColorRampProperty",Ih);const Th="-transition";class yo extends _r{constructor(n,l){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),l.layout&&(this._unevaluatedLayout=new T0(l.layout)),l.paint)){this._transitionablePaint=new Sm(l.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new pu(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,l,h={}){l!=null&&this._validate(ym,`layers.${this.id}.layout.${n}`,n,l,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,l):this.visibility=l)}getPaintProperty(n){return n.endsWith(Th)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,l,h={}){if(l!=null&&this._validate(ph,`layers.${this.id}.paint.${n}`,n,l,h))return!1;if(n.endsWith(Th))return this._transitionablePaint.setTransition(n.slice(0,-11),l||void 0),!1;{const m=this._transitionablePaint._values[n],v=m.property.specification["property-type"]==="cross-faded-data-driven",b=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(n,l),this._handleSpecialPaintPropertyUpdate(n);const P=this._transitionablePaint._values[n].value;return P.isDataDriven()||b||v||this._handleOverridablePaintPropertyUpdate(n,S,P)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,l,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,l){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,l)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),ke(n,(l,h)=>!(l===void 0||h==="layout"&&!Object.keys(l).length||h==="paint"&&!Object.keys(l).length))}_validate(n,l,h,m,v={}){return(!v||v.validate!==!1)&&uu(this,n.call(xa,{key:l,layerType:this.type,objectKey:h,value:m,styleSpec:Ue,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const l=this.paint.get(n);if(l instanceof Si&&Xs(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const Tm={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class vs{constructor(n,l){this._structArray=n,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class wn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,l){return n._trim(),l&&(n.isTransferred=!0,l.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const l=Object.create(this.prototype);return l.arrayBuffer=n.arrayBuffer,l.length=n.length,l.capacity=n.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function vn(a,n=1){let l=0,h=0;return{members:a.map(m=>{const v=Tm[m.type].BYTES_PER_ELEMENT,b=l=tl(l,Math.max(n,v)),S=m.components||1;return h=Math.max(h,v),l+=v*S,{name:m.name,type:m.type,components:S,offset:b}}),size:tl(l,Math.max(h,n)),alignment:n}}function tl(a,n){return Math.ceil(a/n)*n}class ic extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l){const h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){const m=2*n;return this.int16[m+0]=l,this.int16[m+1]=h,n}}ic.prototype.bytesPerElement=4,$t("StructArrayLayout2i4",ic);class oc extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const v=3*n;return this.int16[v+0]=l,this.int16[v+1]=h,this.int16[v+2]=m,n}}oc.prototype.bytesPerElement=6,$t("StructArrayLayout3i6",oc);class _s extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,h,m)}emplace(n,l,h,m,v){const b=4*n;return this.int16[b+0]=l,this.int16[b+1]=h,this.int16[b+2]=m,this.int16[b+3]=v,n}}_s.prototype.bytesPerElement=8,$t("StructArrayLayout4i8",_s);class Ph extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,b){const S=this.length;return this.resize(S+1),this.emplace(S,n,l,h,m,v,b)}emplace(n,l,h,m,v,b,S){const P=6*n;return this.int16[P+0]=l,this.int16[P+1]=h,this.int16[P+2]=m,this.int16[P+3]=v,this.int16[P+4]=b,this.int16[P+5]=S,n}}Ph.prototype.bytesPerElement=12,$t("StructArrayLayout2i4i12",Ph);class kh extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,b){const S=this.length;return this.resize(S+1),this.emplace(S,n,l,h,m,v,b)}emplace(n,l,h,m,v,b,S){const P=4*n,z=8*n;return this.int16[P+0]=l,this.int16[P+1]=h,this.uint8[z+4]=m,this.uint8[z+5]=v,this.uint8[z+6]=b,this.uint8[z+7]=S,n}}kh.prototype.bytesPerElement=8,$t("StructArrayLayout2i4ub8",kh);class rl extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l){const h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){const m=2*n;return this.float32[m+0]=l,this.float32[m+1]=h,n}}rl.prototype.bytesPerElement=8,$t("StructArrayLayout2f8",rl);class Eh extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,b,S,P,z,O){const U=this.length;return this.resize(U+1),this.emplace(U,n,l,h,m,v,b,S,P,z,O)}emplace(n,l,h,m,v,b,S,P,z,O,U){const Z=10*n;return this.uint16[Z+0]=l,this.uint16[Z+1]=h,this.uint16[Z+2]=m,this.uint16[Z+3]=v,this.uint16[Z+4]=b,this.uint16[Z+5]=S,this.uint16[Z+6]=P,this.uint16[Z+7]=z,this.uint16[Z+8]=O,this.uint16[Z+9]=U,n}}Eh.prototype.bytesPerElement=20,$t("StructArrayLayout10ui20",Eh);class Ah extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,b,S,P,z,O,U,Z){const re=this.length;return this.resize(re+1),this.emplace(re,n,l,h,m,v,b,S,P,z,O,U,Z)}emplace(n,l,h,m,v,b,S,P,z,O,U,Z,re){const oe=12*n;return this.int16[oe+0]=l,this.int16[oe+1]=h,this.int16[oe+2]=m,this.int16[oe+3]=v,this.uint16[oe+4]=b,this.uint16[oe+5]=S,this.uint16[oe+6]=P,this.uint16[oe+7]=z,this.int16[oe+8]=O,this.int16[oe+9]=U,this.int16[oe+10]=Z,this.int16[oe+11]=re,n}}Ah.prototype.bytesPerElement=24,$t("StructArrayLayout4i4ui4i24",Ah);class jr extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const v=3*n;return this.float32[v+0]=l,this.float32[v+1]=h,this.float32[v+2]=m,n}}jr.prototype.bytesPerElement=12,$t("StructArrayLayout3f12",jr);class y extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint32[1*n+0]=l,n}}y.prototype.bytesPerElement=4,$t("StructArrayLayout1ul4",y);class i extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,b,S,P,z){const O=this.length;return this.resize(O+1),this.emplace(O,n,l,h,m,v,b,S,P,z)}emplace(n,l,h,m,v,b,S,P,z,O){const U=10*n,Z=5*n;return this.int16[U+0]=l,this.int16[U+1]=h,this.int16[U+2]=m,this.int16[U+3]=v,this.int16[U+4]=b,this.int16[U+5]=S,this.uint32[Z+3]=P,this.uint16[U+8]=z,this.uint16[U+9]=O,n}}i.prototype.bytesPerElement=20,$t("StructArrayLayout6i1ul2ui20",i);class u extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,b){const S=this.length;return this.resize(S+1),this.emplace(S,n,l,h,m,v,b)}emplace(n,l,h,m,v,b,S){const P=6*n;return this.int16[P+0]=l,this.int16[P+1]=h,this.int16[P+2]=m,this.int16[P+3]=v,this.int16[P+4]=b,this.int16[P+5]=S,n}}u.prototype.bytesPerElement=12,$t("StructArrayLayout2i2i2i12",u);class f extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v){const b=this.length;return this.resize(b+1),this.emplace(b,n,l,h,m,v)}emplace(n,l,h,m,v,b){const S=4*n,P=8*n;return this.float32[S+0]=l,this.float32[S+1]=h,this.float32[S+2]=m,this.int16[P+6]=v,this.int16[P+7]=b,n}}f.prototype.bytesPerElement=16,$t("StructArrayLayout2f1f2i16",f);class g extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,h,m)}emplace(n,l,h,m,v){const b=12*n,S=3*n;return this.uint8[b+0]=l,this.uint8[b+1]=h,this.float32[S+1]=m,this.float32[S+2]=v,n}}g.prototype.bytesPerElement=12,$t("StructArrayLayout2ub2f12",g);class _ extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const v=3*n;return this.uint16[v+0]=l,this.uint16[v+1]=h,this.uint16[v+2]=m,n}}_.prototype.bytesPerElement=6,$t("StructArrayLayout3ui6",_);class C extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,b,S,P,z,O,U,Z,re,oe,ue,ye,_e){const Re=this.length;return this.resize(Re+1),this.emplace(Re,n,l,h,m,v,b,S,P,z,O,U,Z,re,oe,ue,ye,_e)}emplace(n,l,h,m,v,b,S,P,z,O,U,Z,re,oe,ue,ye,_e,Re){const be=24*n,De=12*n,We=48*n;return this.int16[be+0]=l,this.int16[be+1]=h,this.uint16[be+2]=m,this.uint16[be+3]=v,this.uint32[De+2]=b,this.uint32[De+3]=S,this.uint32[De+4]=P,this.uint16[be+10]=z,this.uint16[be+11]=O,this.uint16[be+12]=U,this.float32[De+7]=Z,this.float32[De+8]=re,this.uint8[We+36]=oe,this.uint8[We+37]=ue,this.uint8[We+38]=ye,this.uint32[De+10]=_e,this.int16[be+22]=Re,n}}C.prototype.bytesPerElement=48,$t("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",C);class I extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,m,v,b,S,P,z,O,U,Z,re,oe,ue,ye,_e,Re,be,De,We,nt,Rt,Wt,At,Tt,yt,Bt){const bt=this.length;return this.resize(bt+1),this.emplace(bt,n,l,h,m,v,b,S,P,z,O,U,Z,re,oe,ue,ye,_e,Re,be,De,We,nt,Rt,Wt,At,Tt,yt,Bt)}emplace(n,l,h,m,v,b,S,P,z,O,U,Z,re,oe,ue,ye,_e,Re,be,De,We,nt,Rt,Wt,At,Tt,yt,Bt,bt){const dt=32*n,rr=16*n;return this.int16[dt+0]=l,this.int16[dt+1]=h,this.int16[dt+2]=m,this.int16[dt+3]=v,this.int16[dt+4]=b,this.int16[dt+5]=S,this.int16[dt+6]=P,this.int16[dt+7]=z,this.uint16[dt+8]=O,this.uint16[dt+9]=U,this.uint16[dt+10]=Z,this.uint16[dt+11]=re,this.uint16[dt+12]=oe,this.uint16[dt+13]=ue,this.uint16[dt+14]=ye,this.uint16[dt+15]=_e,this.uint16[dt+16]=Re,this.uint16[dt+17]=be,this.uint16[dt+18]=De,this.uint16[dt+19]=We,this.uint16[dt+20]=nt,this.uint16[dt+21]=Rt,this.uint16[dt+22]=Wt,this.uint32[rr+12]=At,this.float32[rr+13]=Tt,this.float32[rr+14]=yt,this.uint16[dt+30]=Bt,this.uint16[dt+31]=bt,n}}I.prototype.bytesPerElement=64,$t("StructArrayLayout8i15ui1ul2f2ui64",I);class A extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.float32[1*n+0]=l,n}}A.prototype.bytesPerElement=4,$t("StructArrayLayout1f4",A);class L extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const v=3*n;return this.uint16[6*n+0]=l,this.float32[v+1]=h,this.float32[v+2]=m,n}}L.prototype.bytesPerElement=12,$t("StructArrayLayout1ui2f12",L);class F extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,l,h)}emplace(n,l,h,m){const v=4*n;return this.uint32[2*n+0]=l,this.uint16[v+2]=h,this.uint16[v+3]=m,n}}F.prototype.bytesPerElement=8,$t("StructArrayLayout1ul2ui8",F);class V extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,l){const h=this.length;return this.resize(h+1),this.emplace(h,n,l)}emplace(n,l,h){const m=2*n;return this.uint16[m+0]=l,this.uint16[m+1]=h,n}}V.prototype.bytesPerElement=4,$t("StructArrayLayout2ui4",V);class ee extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const l=this.length;return this.resize(l+1),this.emplace(l,n)}emplace(n,l){return this.uint16[1*n+0]=l,n}}ee.prototype.bytesPerElement=2,$t("StructArrayLayout1ui2",ee);class he extends wn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,l,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,l,h,m)}emplace(n,l,h,m,v){const b=4*n;return this.float32[b+0]=l,this.float32[b+1]=h,this.float32[b+2]=m,this.float32[b+3]=v,n}}he.prototype.bytesPerElement=16,$t("StructArrayLayout4f16",he);class de extends vs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new E(this.anchorPointX,this.anchorPointY)}}de.prototype.size=20;class me extends i{get(n){return new de(this,n)}}$t("CollisionBoxArray",me);class ce extends vs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ce.prototype.size=48;class Te extends C{get(n){return new ce(this,n)}}$t("PlacedSymbolArray",Te);class Ne extends vs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ne.prototype.size=64;class ve extends I{get(n){return new Ne(this,n)}}$t("SymbolInstanceArray",ve);class ze extends A{getoffsetX(n){return this.float32[1*n+0]}}$t("GlyphOffsetArray",ze);class Ge extends oc{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}$t("SymbolLineVertexArray",Ge);class qe extends vs{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}qe.prototype.size=12;class tt extends L{get(n){return new qe(this,n)}}$t("TextAnchorOffsetArray",tt);class ut extends vs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ut.prototype.size=8;class at extends F{get(n){return new ut(this,n)}}$t("FeatureIndexArray",at);class pt extends ic{}class Ht extends ic{}class mr extends ic{}class It extends Ph{}class ar extends kh{}class qt extends rl{}class Zr extends Eh{}class fr extends Ah{}class hr extends jr{}class gr extends y{}class Tn extends u{}class en extends g{}class ai extends _{}class Un extends V{}const Mn=vn([{name:"a_pos",components:2,type:"Int16"}],4),{members:no}=Mn;class an{constructor(n=[]){this.segments=n}prepareSegment(n,l,h,m){let v=this.segments[this.segments.length-1];return n>an.MAX_VERTEX_ARRAY_LENGTH&&Je(`Max vertices per segment is ${an.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>an.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:l.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const l in n.vaos)n.vaos[l].destroy()}static simpleSegment(n,l,h,m){return new an([{vertexOffset:n,primitiveOffset:l,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function Xo(a,n){return 256*(a=K(Math.floor(a),0,255))+K(Math.floor(n),0,255)}an.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$t("SegmentVector",an);const Jo=vn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var qa={exports:{}},xs={exports:{}};xs.exports=function(a,n){var l,h,m,v,b,S,P,z;for(h=a.length-(l=3&a.length),m=n,b=3432918353,S=461845907,z=0;z<h;)P=255&a.charCodeAt(z)|(255&a.charCodeAt(++z))<<8|(255&a.charCodeAt(++z))<<16|(255&a.charCodeAt(++z))<<24,++z,m=27492+(65535&(v=5*(65535&(m=(m^=P=(65535&(P=(P=(65535&P)*b+(((P>>>16)*b&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(P=0,l){case 3:P^=(255&a.charCodeAt(z+2))<<16;case 2:P^=(255&a.charCodeAt(z+1))<<8;case 1:m^=P=(65535&(P=(P=(65535&(P^=255&a.charCodeAt(z)))*b+(((P>>>16)*b&65535)<<16)&4294967295)<<15|P>>>17))*S+(((P>>>16)*S&65535)<<16)&4294967295}return m^=a.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var nl=xs.exports,hi={exports:{}};hi.exports=function(a,n){for(var l,h=a.length,m=n^h,v=0;h>=4;)l=1540483477*(65535&(l=255&a.charCodeAt(v)|(255&a.charCodeAt(++v))<<8|(255&a.charCodeAt(++v))<<16|(255&a.charCodeAt(++v))<<24))+((1540483477*(l>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:m^=(255&a.charCodeAt(v+2))<<16;case 2:m^=(255&a.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&a.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var si=nl,Ci=hi.exports;qa.exports=si,qa.exports.murmur3=si,qa.exports.murmur2=Ci;var bs=w(qa.exports);class Pn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,l,h,m){this.ids.push(Hn(n)),this.positions.push(l,h,m)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Hn(n);let h=0,m=this.ids.length-1;for(;h<m;){const b=h+m>>1;this.ids[b]>=l?m=b:h=b+1}const v=[];for(;this.ids[h]===l;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,l){const h=new Float64Array(n.ids),m=new Uint32Array(n.positions);return Fi(h,m,0,h.length-1),l&&l.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(n){const l=new Pn;return l.ids=n.ids,l.positions=n.positions,l.indexed=!0,l}}function Hn(a){const n=+a;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:bs(String(a))}function Fi(a,n,l,h){for(;l<h;){const m=a[l+h>>1];let v=l-1,b=h+1;for(;;){do v++;while(a[v]<m);do b--;while(a[b]>m);if(v>=b)break;kn(a,v,b),kn(n,3*v,3*b),kn(n,3*v+1,3*b+1),kn(n,3*v+2,3*b+2)}b-l<h-b?(Fi(a,n,l,b),l=b+1):(Fi(a,n,b+1,h),h=b)}}function kn(a,n,l){const h=a[n];a[n]=a[l],a[l]=h}$t("FeaturePositionMap",Pn);class ws{constructor(n,l){this.gl=n.gl,this.location=l}}class fu extends ws{constructor(n,l){super(n,l),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Pm extends ws{constructor(n,l){super(n,l),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class km extends ws{constructor(n,l){super(n,l),this.current=Ir.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const P0=new Float32Array(16);function zh(a){return[Xo(255*a.r,255*a.g),Xo(255*a.b,255*a.a)]}class Yo{constructor(n,l,h){this.value=n,this.uniformNames=l.map(m=>`u_${m}`),this.type=h}setUniform(n,l,h){n.set(h.constantOr(this.value))}getBinding(n,l,h){return this.type==="color"?new km(n,l):new fu(n,l)}}class Ss{constructor(n,l){this.uniformNames=l.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=n.tlbr}setUniform(n,l,h,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,l,h){return h.substr(0,9)==="u_pattern"?new Pm(n,l):new fu(n,l)}}class Qo{constructor(n,l,h,m){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(n,l,h,m,v){const b=this.paintVertexArray.length,S=this.expression.evaluate(new on(0),l,{},m,[],v);this.paintVertexArray.resize(n),this._setPaintValue(b,n,S)}updatePaintArray(n,l,h,m){const v=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(n,l,v)}_setPaintValue(n,l,h){if(this.type==="color"){const m=zh(h);for(let v=n;v<l;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=n;m<l;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class vo{constructor(n,l,h,m,v,b){this.expression=n,this.uniformNames=l.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=l.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(n,l,h,m,v){const b=this.expression.evaluate(new on(this.zoom),l,{},m,[],v),S=this.expression.evaluate(new on(this.zoom+1),l,{},m,[],v),P=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(P,n,b,S)}updatePaintArray(n,l,h,m){const v=this.expression.evaluate({zoom:this.zoom},h,m),b=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(n,l,v,b)}_setPaintValue(n,l,h,m){if(this.type==="color"){const v=zh(h),b=zh(m);for(let S=n;S<l;S++)this.paintVertexArray.emplace(S,v[0],v[1],b[0],b[1])}else{for(let v=n;v<l;v++)this.paintVertexArray.emplace(v,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,l){const h=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,m=K(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(m)}getBinding(n,l,h){return new fu(n,l)}}class ea{constructor(n,l,h,m,v,b){this.expression=n,this.type=l,this.useIntegerZoom=h,this.zoom=m,this.layerId=b,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,l,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(m,n,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(n,l,h,m,v){this._setPaintValues(n,l,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,l,h,m){if(!m||!h)return;const{min:v,mid:b,max:S}=h,P=m[v],z=m[b],O=m[S];if(P&&z&&O)for(let U=n;U<l;U++)this.zoomInPaintVertexArray.emplace(U,z.tl[0],z.tl[1],z.br[0],z.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],z.pixelRatio,P.pixelRatio),this.zoomOutPaintVertexArray.emplace(U,z.tl[0],z.tl[1],z.br[0],z.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],z.pixelRatio,O.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Jo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Jo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Rh{constructor(n,l,h){this.binders={},this._buffers=[];const m=[];for(const v in n.paint._values){if(!h(v))continue;const b=n.paint.get(v);if(!(b instanceof Si&&Xs(b.property.specification)))continue;const S=sL(v,n.type),P=b.value,z=b.property.specification.type,O=b.property.useIntegerZoom,U=b.property.specification["property-type"],Z=U==="cross-faded"||U==="cross-faded-data-driven";if(P.kind==="constant")this.binders[v]=Z?new Ss(P.value,S):new Yo(P.value,S,z),m.push(`/u_${v}`);else if(P.kind==="source"||Z){const re=ZS(v,z,"source");this.binders[v]=Z?new ea(P,z,O,l,re,n.id):new Qo(P,S,z,re),m.push(`/a_${v}`)}else{const re=ZS(v,z,"composite");this.binders[v]=new vo(P,S,z,O,l,re),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(n){const l=this.binders[n];return l instanceof Qo||l instanceof vo?l.maxValue:0}populatePaintArrays(n,l,h,m,v){for(const b in this.binders){const S=this.binders[b];(S instanceof Qo||S instanceof vo||S instanceof ea)&&S.populatePaintArray(n,l,h,m,v)}}setConstantPatternPositions(n,l){for(const h in this.binders){const m=this.binders[h];m instanceof Ss&&m.setConstantPatternPositions(n,l)}}updatePaintArrays(n,l,h,m,v){let b=!1;for(const S in n){const P=l.getPositions(S);for(const z of P){const O=h.feature(z.index);for(const U in this.binders){const Z=this.binders[U];if((Z instanceof Qo||Z instanceof vo||Z instanceof ea)&&Z.expression.isStateDependent===!0){const re=m.paint.get(U);Z.expression=re.value,Z.updatePaintArray(z.start,z.end,O,n[S],v),b=!0}}}}return b}defines(){const n=[];for(const l in this.binders){const h=this.binders[l];(h instanceof Yo||h instanceof Ss)&&n.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return n}getBinderAttributes(){const n=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof Qo||h instanceof vo)for(let m=0;m<h.paintVertexAttributes.length;m++)n.push(h.paintVertexAttributes[m].name);else if(h instanceof ea)for(let m=0;m<Jo.members.length;m++)n.push(Jo.members[m].name)}return n}getBinderUniforms(){const n=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof Yo||h instanceof Ss||h instanceof vo)for(const m of h.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,l){const h=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof Yo||v instanceof Ss||v instanceof vo){for(const b of v.uniformNames)if(l[b]){const S=v.getBinding(n,l[b],b);h.push({name:b,property:m,binding:S})}}}return h}setUniforms(n,l,h,m){for(const{name:v,property:b,binding:S}of l)this.binders[b].setUniform(S,m,h.get(b),v)}updatePaintBuffers(n){this._buffers=[];for(const l in this.binders){const h=this.binders[l];if(n&&h instanceof ea){const m=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof Qo||h instanceof vo)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const l in this.binders){const h=this.binders[l];(h instanceof Qo||h instanceof vo||h instanceof ea)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const l=this.binders[n];(l instanceof Qo||l instanceof vo||l instanceof ea)&&l.destroy()}}}class wa{constructor(n,l,h=()=>!0){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new Rh(m,l,h);this.needsUpload=!1,this._featureMap=new Pn,this._bufferOffset=0}populatePaintArrays(n,l,h,m,v,b){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,l,m,v,b);l.id!==void 0&&this._featureMap.add(l.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,l,h,m){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,l,v,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function sL(a,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${n}-`,"").replace(/-/g,"_")]}function ZS(a,n,l){const h={color:{source:rl,composite:he},number:{source:A,composite:rl}},m=function(v){return{"line-pattern":{source:Zr,composite:Zr},"fill-pattern":{source:Zr,composite:Zr},"fill-extrusion-pattern":{source:Zr,composite:Zr}}[v]}(a);return m&&m[l]||h[n][l]}$t("ConstantBinder",Yo),$t("CrossFadedConstantBinder",Ss),$t("SourceExpressionBinder",Qo),$t("CrossFadedCompositeBinder",ea),$t("CompositeExpressionBinder",vo),$t("ProgramConfiguration",Rh,{omit:["_buffers"]}),$t("ProgramConfigurationSet",wa);const Bn=8192,k0=Math.pow(2,14)-1,KS=-k0-1;function ac(a){const n=Bn/a.extent,l=a.loadGeometry();for(let h=0;h<l.length;h++){const m=l[h];for(let v=0;v<m.length;v++){const b=m[v],S=Math.round(b.x*n),P=Math.round(b.y*n);b.x=K(S,KS,k0),b.y=K(P,KS,k0),(S<b.x||S>b.x+1||P<b.y||P>b.y+1)&&Je("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function sc(a,n){return{type:a.type,id:a.id,properties:a.properties,geometry:n?ac(a):[]}}function Em(a,n,l,h,m){a.emplaceBack(2*n+(h+1)/2,2*l+(m+1)/2)}class E0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Ht,this.indexArray=new ai,this.segments=new an,this.programConfigurations=new wa(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){const m=this.layers[0],v=[];let b=null,S=!1;m.type==="circle"&&(b=m.layout.get("circle-sort-key"),S=!b.isConstant());for(const{feature:P,id:z,index:O,sourceLayerIndex:U}of n){const Z=this.layers[0]._featureFilter.needGeometry,re=sc(P,Z);if(!this.layers[0]._featureFilter.filter(new on(this.zoom),re,h))continue;const oe=S?b.evaluate(re,{},h):void 0,ue={id:z,properties:P.properties,type:P.type,sourceLayerIndex:U,index:O,geometry:Z?re.geometry:ac(P),patterns:{},sortKey:oe};v.push(ue)}S&&v.sort((P,z)=>P.sortKey-z.sortKey);for(const P of v){const{geometry:z,index:O,sourceLayerIndex:U}=P,Z=n[O].feature;this.addFeature(P,z,O,h),l.featureIndex.insert(Z,z,O,U,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,no),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,l,h,m){for(const v of l)for(const b of v){const S=b.x,P=b.y;if(S<0||S>=Bn||P<0||P>=Bn)continue;const z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),O=z.vertexLength;Em(this.layoutVertexArray,S,P,-1,-1),Em(this.layoutVertexArray,S,P,1,-1),Em(this.layoutVertexArray,S,P,1,1),Em(this.layoutVertexArray,S,P,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+3,O+2),z.vertexLength+=4,z.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},m)}}function XS(a,n){for(let l=0;l<a.length;l++)if(mu(n,a[l]))return!0;for(let l=0;l<n.length;l++)if(mu(a,n[l]))return!0;return!!A0(a,n)}function lL(a,n,l){return!!mu(a,n)||!!z0(n,a,l)}function JS(a,n){if(a.length===1)return QS(n,a[0]);for(let l=0;l<n.length;l++){const h=n[l];for(let m=0;m<h.length;m++)if(mu(a,h[m]))return!0}for(let l=0;l<a.length;l++)if(QS(n,a[l]))return!0;for(let l=0;l<n.length;l++)if(A0(a,n[l]))return!0;return!1}function cL(a,n,l){if(a.length>1){if(A0(a,n))return!0;for(let h=0;h<n.length;h++)if(z0(n[h],a,l))return!0}for(let h=0;h<a.length;h++)if(z0(a[h],n,l))return!0;return!1}function A0(a,n){if(a.length===0||n.length===0)return!1;for(let l=0;l<a.length-1;l++){const h=a[l],m=a[l+1];for(let v=0;v<n.length-1;v++)if(uL(h,m,n[v],n[v+1]))return!0}return!1}function uL(a,n,l,h){return je(a,l,h)!==je(n,l,h)&&je(a,n,l)!==je(a,n,h)}function z0(a,n,l){const h=l*l;if(n.length===1)return a.distSqr(n[0])<h;for(let m=1;m<n.length;m++)if(YS(a,n[m-1],n[m])<h)return!0;return!1}function YS(a,n,l){const h=n.distSqr(l);if(h===0)return a.distSqr(n);const m=((a.x-n.x)*(l.x-n.x)+(a.y-n.y)*(l.y-n.y))/h;return a.distSqr(m<0?n:m>1?l:l.sub(n)._mult(m)._add(n))}function QS(a,n){let l,h,m,v=!1;for(let b=0;b<a.length;b++){l=a[b];for(let S=0,P=l.length-1;S<l.length;P=S++)h=l[S],m=l[P],h.y>n.y!=m.y>n.y&&n.x<(m.x-h.x)*(n.y-h.y)/(m.y-h.y)+h.x&&(v=!v)}return v}function mu(a,n){let l=!1;for(let h=0,m=a.length-1;h<a.length;m=h++){const v=a[h],b=a[m];v.y>n.y!=b.y>n.y&&n.x<(b.x-v.x)*(n.y-v.y)/(b.y-v.y)+v.x&&(l=!l)}return l}function dL(a,n,l){const h=l[0],m=l[2];if(a.x<h.x&&n.x<h.x||a.x>m.x&&n.x>m.x||a.y<h.y&&n.y<h.y||a.y>m.y&&n.y>m.y)return!1;const v=je(a,n,l[0]);return v!==je(a,n,l[1])||v!==je(a,n,l[2])||v!==je(a,n,l[3])}function Mh(a,n,l){const h=n.paint.get(a).value;return h.kind==="constant"?h.value:l.programConfigurations.get(n.id).getMaxValue(a)}function Am(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function zm(a,n,l,h,m){if(!n[0]&&!n[1])return a;const v=E.convert(n)._mult(m);l==="viewport"&&v._rotate(-h);const b=[];for(let S=0;S<a.length;S++)b.push(a[S].sub(v));return b}let eC,tC;$t("CircleBucket",E0,{omit:["layers"]});var hL={get paint(){return tC=tC||new Rn({"circle-radius":new or(Ue.paint_circle["circle-radius"]),"circle-color":new or(Ue.paint_circle["circle-color"]),"circle-blur":new or(Ue.paint_circle["circle-blur"]),"circle-opacity":new or(Ue.paint_circle["circle-opacity"]),"circle-translate":new Xt(Ue.paint_circle["circle-translate"]),"circle-translate-anchor":new Xt(Ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Xt(Ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Xt(Ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new or(Ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new or(Ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new or(Ue.paint_circle["circle-stroke-opacity"])})},get layout(){return eC=eC||new Rn({"circle-sort-key":new or(Ue.layout_circle["circle-sort-key"])})}},Ni=1e-6,gu=typeof Float32Array<"u"?Float32Array:Array;function R0(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function rC(a,n,l){var h=n[0],m=n[1],v=n[2],b=n[3],S=n[4],P=n[5],z=n[6],O=n[7],U=n[8],Z=n[9],re=n[10],oe=n[11],ue=n[12],ye=n[13],_e=n[14],Re=n[15],be=l[0],De=l[1],We=l[2],nt=l[3];return a[0]=be*h+De*S+We*U+nt*ue,a[1]=be*m+De*P+We*Z+nt*ye,a[2]=be*v+De*z+We*re+nt*_e,a[3]=be*b+De*O+We*oe+nt*Re,a[4]=(be=l[4])*h+(De=l[5])*S+(We=l[6])*U+(nt=l[7])*ue,a[5]=be*m+De*P+We*Z+nt*ye,a[6]=be*v+De*z+We*re+nt*_e,a[7]=be*b+De*O+We*oe+nt*Re,a[8]=(be=l[8])*h+(De=l[9])*S+(We=l[10])*U+(nt=l[11])*ue,a[9]=be*m+De*P+We*Z+nt*ye,a[10]=be*v+De*z+We*re+nt*_e,a[11]=be*b+De*O+We*oe+nt*Re,a[12]=(be=l[12])*h+(De=l[13])*S+(We=l[14])*U+(nt=l[15])*ue,a[13]=be*m+De*P+We*Z+nt*ye,a[14]=be*v+De*z+We*re+nt*_e,a[15]=be*b+De*O+We*oe+nt*Re,a}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});var Dh,pL=rC;function Rm(a,n,l){var h=n[0],m=n[1],v=n[2],b=n[3];return a[0]=l[0]*h+l[4]*m+l[8]*v+l[12]*b,a[1]=l[1]*h+l[5]*m+l[9]*v+l[13]*b,a[2]=l[2]*h+l[6]*m+l[10]*v+l[14]*b,a[3]=l[3]*h+l[7]*m+l[11]*v+l[15]*b,a}Dh=new gu(4),gu!=Float32Array&&(Dh[0]=0,Dh[1]=0,Dh[2]=0,Dh[3]=0);class fL extends yo{constructor(n){super(n,hL)}createBucket(n){return new E0(n)}queryRadius(n){const l=n;return Mh("circle-radius",this,l)+Mh("circle-stroke-width",this,l)+Am(this.paint.get("circle-translate"))}queryIntersectsFeature(n,l,h,m,v,b,S,P){const z=zm(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,S),O=this.paint.get("circle-radius").evaluate(l,h)+this.paint.get("circle-stroke-width").evaluate(l,h),U=this.paint.get("circle-pitch-alignment")==="map",Z=U?z:function(oe,ue){return oe.map(ye=>nC(ye,ue))}(z,P),re=U?O*S:O;for(const oe of m)for(const ue of oe){const ye=U?ue:nC(ue,P);let _e=re;const Re=Rm([],[ue.x,ue.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?_e*=Re[3]/b.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(_e*=b.cameraToCenterDistance/Re[3]),lL(Z,ye,_e))return!0}return!1}}function nC(a,n){const l=Rm([],[a.x,a.y,0,1],n);return new E(l[0]/l[3],l[1]/l[3])}class iC extends E0{}let oC;$t("HeatmapBucket",iC,{omit:["layers"]});var mL={get paint(){return oC=oC||new Rn({"heatmap-radius":new or(Ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new or(Ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Xt(Ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ih(Ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Xt(Ue.paint_heatmap["heatmap-opacity"])})}};function M0(a,{width:n,height:l},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*l*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${n*l*h}`)}else m=new Uint8Array(n*l*h);return a.width=n,a.height=l,a.data=m,a}function aC(a,{width:n,height:l},h){if(n===a.width&&l===a.height)return;const m=M0({},{width:n,height:l},h);D0(a,m,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,n),height:Math.min(a.height,l)},h),a.width=n,a.height=l,a.data=m.data}function D0(a,n,l,h,m,v){if(m.width===0||m.height===0)return n;if(m.width>a.width||m.height>a.height||l.x>a.width-m.width||l.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||h.x>n.width-m.width||h.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const b=a.data,S=n.data;if(b===S)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<m.height;P++){const z=((l.y+P)*a.width+l.x)*v,O=((h.y+P)*n.width+h.x)*v;for(let U=0;U<m.width*v;U++)S[O+U]=b[z+U]}return n}class Lh{constructor(n,l){M0(this,n,1,l)}resize(n){aC(this,n,1)}clone(){return new Lh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,h,m,v){D0(n,l,h,m,v,1)}}class zo{constructor(n,l){M0(this,n,4,l)}resize(n){aC(this,n,4)}replace(n,l){l?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new zo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,l,h,m,v){D0(n,l,h,m,v,4)}}function sC(a){const n={},l=a.resolution||256,h=a.clips?a.clips.length:1,m=a.image||new zo({width:l,height:h});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const v=(b,S,P)=>{n[a.evaluationKey]=P;const z=a.expression.evaluate(n);m.data[b+S+0]=Math.floor(255*z.r/z.a),m.data[b+S+1]=Math.floor(255*z.g/z.a),m.data[b+S+2]=Math.floor(255*z.b/z.a),m.data[b+S+3]=Math.floor(255*z.a)};if(a.clips)for(let b=0,S=0;b<h;++b,S+=4*l)for(let P=0,z=0;P<l;P++,z+=4){const O=P/(l-1),{start:U,end:Z}=a.clips[b];v(S,z,U*(1-O)+Z*O)}else for(let b=0,S=0;b<l;b++,S+=4)v(0,S,b/(l-1));return m}$t("AlphaImage",Lh),$t("RGBAImage",zo);class gL extends yo{createBucket(n){return new iC(n)}constructor(n){super(n,mL),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=sC({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let lC;var yL={get paint(){return lC=lC||new Rn({"hillshade-illumination-direction":new Xt(Ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Xt(Ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Xt(Ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Xt(Ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Xt(Ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Xt(Ue.paint_hillshade["hillshade-accent-color"])})}};class vL extends yo{constructor(n){super(n,yL)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const _L=vn([{name:"a_pos",components:2,type:"Int16"}],4),{members:xL}=_L;var L0={exports:{}};function Mm(a,n,l){l=l||2;var h,m,v,b,S,P,z,O=n&&n.length,U=O?n[0]*l:a.length,Z=cC(a,0,U,l,!0),re=[];if(!Z||Z.next===Z.prev)return re;if(O&&(Z=function(ue,ye,_e,Re){var be,De,We,nt=[];for(be=0,De=ye.length;be<De;be++)(We=cC(ue,ye[be]*Re,be<De-1?ye[be+1]*Re:ue.length,Re,!1))===We.next&&(We.steiner=!0),nt.push(kL(We));for(nt.sort(IL),be=0;be<nt.length;be++)_e=TL(nt[be],_e);return _e}(a,n,Z,l)),a.length>80*l){h=v=a[0],m=b=a[1];for(var oe=l;oe<U;oe+=l)(S=a[oe])<h&&(h=S),(P=a[oe+1])<m&&(m=P),S>v&&(v=S),P>b&&(b=P);z=(z=Math.max(v-h,b-m))!==0?32767/z:0}return $h(Z,re,l,h,m,z,0),re}function cC(a,n,l,h,m){var v,b;if(m===B0(a,n,l,h)>0)for(v=n;v<l;v+=h)b=hC(v,a[v],a[v+1],b);else for(v=l-h;v>=n;v-=h)b=hC(v,a[v],a[v+1],b);return b&&Dm(b,b.next)&&(Bh(b),b=b.next),b}function lc(a,n){if(!a)return a;n||(n=a);var l,h=a;do if(l=!1,h.steiner||!Dm(h,h.next)&&Dn(h.prev,h,h.next)!==0)h=h.next;else{if(Bh(h),(h=n=h.prev)===h.next)break;l=!0}while(l||h!==n);return n}function $h(a,n,l,h,m,v,b){if(a){!b&&v&&function(O,U,Z,re){var oe=O;do oe.z===0&&(oe.z=$0(oe.x,oe.y,U,Z,re)),oe.prevZ=oe.prev,oe.nextZ=oe.next,oe=oe.next;while(oe!==O);oe.prevZ.nextZ=null,oe.prevZ=null,function(ue){var ye,_e,Re,be,De,We,nt,Rt,Wt=1;do{for(_e=ue,ue=null,De=null,We=0;_e;){for(We++,Re=_e,nt=0,ye=0;ye<Wt&&(nt++,Re=Re.nextZ);ye++);for(Rt=Wt;nt>0||Rt>0&&Re;)nt!==0&&(Rt===0||!Re||_e.z<=Re.z)?(be=_e,_e=_e.nextZ,nt--):(be=Re,Re=Re.nextZ,Rt--),De?De.nextZ=be:ue=be,be.prevZ=De,De=be;_e=Re}De.nextZ=null,Wt*=2}while(We>1)}(oe)}(a,h,m,v);for(var S,P,z=a;a.prev!==a.next;)if(S=a.prev,P=a.next,v?wL(a,h,m,v):bL(a))n.push(S.i/l|0),n.push(a.i/l|0),n.push(P.i/l|0),Bh(a),a=P.next,z=P.next;else if((a=P)===z){b?b===1?$h(a=SL(lc(a),n,l),n,l,h,m,v,2):b===2&&CL(a,n,l,h,m,v):$h(lc(a),n,l,h,m,v,1);break}}}function bL(a){var n=a.prev,l=a,h=a.next;if(Dn(n,l,h)>=0)return!1;for(var m=n.x,v=l.x,b=h.x,S=n.y,P=l.y,z=h.y,O=m<v?m<b?m:b:v<b?v:b,U=S<P?S<z?S:z:P<z?P:z,Z=m>v?m>b?m:b:v>b?v:b,re=S>P?S>z?S:z:P>z?P:z,oe=h.next;oe!==n;){if(oe.x>=O&&oe.x<=Z&&oe.y>=U&&oe.y<=re&&yu(m,S,v,P,b,z,oe.x,oe.y)&&Dn(oe.prev,oe,oe.next)>=0)return!1;oe=oe.next}return!0}function wL(a,n,l,h){var m=a.prev,v=a,b=a.next;if(Dn(m,v,b)>=0)return!1;for(var S=m.x,P=v.x,z=b.x,O=m.y,U=v.y,Z=b.y,re=S<P?S<z?S:z:P<z?P:z,oe=O<U?O<Z?O:Z:U<Z?U:Z,ue=S>P?S>z?S:z:P>z?P:z,ye=O>U?O>Z?O:Z:U>Z?U:Z,_e=$0(re,oe,n,l,h),Re=$0(ue,ye,n,l,h),be=a.prevZ,De=a.nextZ;be&&be.z>=_e&&De&&De.z<=Re;){if(be.x>=re&&be.x<=ue&&be.y>=oe&&be.y<=ye&&be!==m&&be!==b&&yu(S,O,P,U,z,Z,be.x,be.y)&&Dn(be.prev,be,be.next)>=0||(be=be.prevZ,De.x>=re&&De.x<=ue&&De.y>=oe&&De.y<=ye&&De!==m&&De!==b&&yu(S,O,P,U,z,Z,De.x,De.y)&&Dn(De.prev,De,De.next)>=0))return!1;De=De.nextZ}for(;be&&be.z>=_e;){if(be.x>=re&&be.x<=ue&&be.y>=oe&&be.y<=ye&&be!==m&&be!==b&&yu(S,O,P,U,z,Z,be.x,be.y)&&Dn(be.prev,be,be.next)>=0)return!1;be=be.prevZ}for(;De&&De.z<=Re;){if(De.x>=re&&De.x<=ue&&De.y>=oe&&De.y<=ye&&De!==m&&De!==b&&yu(S,O,P,U,z,Z,De.x,De.y)&&Dn(De.prev,De,De.next)>=0)return!1;De=De.nextZ}return!0}function SL(a,n,l){var h=a;do{var m=h.prev,v=h.next.next;!Dm(m,v)&&uC(m,h,h.next,v)&&Oh(m,v)&&Oh(v,m)&&(n.push(m.i/l|0),n.push(h.i/l|0),n.push(v.i/l|0),Bh(h),Bh(h.next),h=a=v),h=h.next}while(h!==a);return lc(h)}function CL(a,n,l,h,m,v){var b=a;do{for(var S=b.next.next;S!==b.prev;){if(b.i!==S.i&&EL(b,S)){var P=dC(b,S);return b=lc(b,b.next),P=lc(P,P.next),$h(b,n,l,h,m,v,0),void $h(P,n,l,h,m,v,0)}S=S.next}b=b.next}while(b!==a)}function IL(a,n){return a.x-n.x}function TL(a,n){var l=function(m,v){var b,S=v,P=m.x,z=m.y,O=-1/0;do{if(z<=S.y&&z>=S.next.y&&S.next.y!==S.y){var U=S.x+(z-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(U<=P&&U>O&&(O=U,b=S.x<S.next.x?S:S.next,U===P))return b}S=S.next}while(S!==v);if(!b)return null;var Z,re=b,oe=b.x,ue=b.y,ye=1/0;S=b;do P>=S.x&&S.x>=oe&&P!==S.x&&yu(z<ue?P:O,z,oe,ue,z<ue?O:P,z,S.x,S.y)&&(Z=Math.abs(z-S.y)/(P-S.x),Oh(S,m)&&(Z<ye||Z===ye&&(S.x>b.x||S.x===b.x&&PL(b,S)))&&(b=S,ye=Z)),S=S.next;while(S!==re);return b}(a,n);if(!l)return n;var h=dC(l,a);return lc(h,h.next),lc(l,l.next)}function PL(a,n){return Dn(a.prev,a,n.prev)<0&&Dn(n.next,a,a.next)<0}function $0(a,n,l,h,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-l)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function kL(a){var n=a,l=a;do(n.x<l.x||n.x===l.x&&n.y<l.y)&&(l=n),n=n.next;while(n!==a);return l}function yu(a,n,l,h,m,v,b,S){return(m-b)*(n-S)>=(a-b)*(v-S)&&(a-b)*(h-S)>=(l-b)*(n-S)&&(l-b)*(v-S)>=(m-b)*(h-S)}function EL(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!function(l,h){var m=l;do{if(m.i!==l.i&&m.next.i!==l.i&&m.i!==h.i&&m.next.i!==h.i&&uC(m,m.next,l,h))return!0;m=m.next}while(m!==l);return!1}(a,n)&&(Oh(a,n)&&Oh(n,a)&&function(l,h){var m=l,v=!1,b=(l.x+h.x)/2,S=(l.y+h.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&b<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==l);return v}(a,n)&&(Dn(a.prev,a,n.prev)||Dn(a,n.prev,n))||Dm(a,n)&&Dn(a.prev,a,a.next)>0&&Dn(n.prev,n,n.next)>0)}function Dn(a,n,l){return(n.y-a.y)*(l.x-n.x)-(n.x-a.x)*(l.y-n.y)}function Dm(a,n){return a.x===n.x&&a.y===n.y}function uC(a,n,l,h){var m=$m(Dn(a,n,l)),v=$m(Dn(a,n,h)),b=$m(Dn(l,h,a)),S=$m(Dn(l,h,n));return m!==v&&b!==S||!(m!==0||!Lm(a,l,n))||!(v!==0||!Lm(a,h,n))||!(b!==0||!Lm(l,a,h))||!(S!==0||!Lm(l,n,h))}function Lm(a,n,l){return n.x<=Math.max(a.x,l.x)&&n.x>=Math.min(a.x,l.x)&&n.y<=Math.max(a.y,l.y)&&n.y>=Math.min(a.y,l.y)}function $m(a){return a>0?1:a<0?-1:0}function Oh(a,n){return Dn(a.prev,a,a.next)<0?Dn(a,n,a.next)>=0&&Dn(a,a.prev,n)>=0:Dn(a,n,a.prev)<0||Dn(a,a.next,n)<0}function dC(a,n){var l=new O0(a.i,a.x,a.y),h=new O0(n.i,n.x,n.y),m=a.next,v=n.prev;return a.next=n,n.prev=a,l.next=m,m.prev=l,h.next=l,l.prev=h,v.next=h,h.prev=v,h}function hC(a,n,l,h){var m=new O0(a,n,l);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function Bh(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function O0(a,n,l){this.i=a,this.x=n,this.y=l,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function B0(a,n,l,h){for(var m=0,v=n,b=l-h;v<l;v+=h)m+=(a[b]-a[v])*(a[v+1]+a[b+1]),b=v;return m}L0.exports=Mm,L0.exports.default=Mm,Mm.deviation=function(a,n,l,h){var m=n&&n.length,v=Math.abs(B0(a,0,m?n[0]*l:a.length,l));if(m)for(var b=0,S=n.length;b<S;b++)v-=Math.abs(B0(a,n[b]*l,b<S-1?n[b+1]*l:a.length,l));var P=0;for(b=0;b<h.length;b+=3){var z=h[b]*l,O=h[b+1]*l,U=h[b+2]*l;P+=Math.abs((a[z]-a[U])*(a[O+1]-a[z+1])-(a[z]-a[O])*(a[U+1]-a[z+1]))}return v===0&&P===0?0:Math.abs((P-v)/v)},Mm.flatten=function(a){for(var n=a[0][0].length,l={vertices:[],holes:[],dimensions:n},h=0,m=0;m<a.length;m++){for(var v=0;v<a[m].length;v++)for(var b=0;b<n;b++)l.vertices.push(a[m][v][b]);m>0&&l.holes.push(h+=a[m-1].length)}return l};var pC=w(L0.exports);function AL(a,n,l,h,m){fC(a,n,l,h||a.length-1,m)}function fC(a,n,l,h,m){for(;h>l;){if(h-l>600){var v=h-l+1,b=n-l+1,S=Math.log(v),P=.5*Math.exp(2*S/3),z=.5*Math.sqrt(S*P*(v-P)/v)*(b-v/2<0?-1:1);fC(a,n,Math.max(l,Math.floor(n-b*P/v+z)),Math.min(h,Math.floor(n+(v-b)*P/v+z)),m)}var O=a[n],U=l,Z=h;for(Fh(a,l,n),m(a[h],O)>0&&Fh(a,l,h);U<Z;){for(Fh(a,U,Z),U++,Z--;m(a[U],O)<0;)U++;for(;m(a[Z],O)>0;)Z--}m(a[l],O)===0?Fh(a,l,Z):Fh(a,++Z,h),Z<=n&&(l=Z+1),n<=Z&&(h=Z-1)}}function Fh(a,n,l){var h=a[n];a[n]=a[l],a[l]=h}function F0(a,n){const l=a.length;if(l<=1)return[a];const h=[];let m,v;for(let b=0;b<l;b++){const S=Se(a[b]);S!==0&&(a[b].area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(m&&h.push(m),m=[a[b]]):m.push(a[b]))}if(m&&h.push(m),n>1)for(let b=0;b<h.length;b++)h[b].length<=n||(AL(h[b],n,1,h[b].length-1,zL),h[b]=h[b].slice(0,n));return h}function zL(a,n){return n.area-a.area}function N0(a,n,l){const h=l.patternDependencies;let m=!1;for(const v of n){const b=v.paint.get(`${a}-pattern`);b.isConstant()||(m=!0);const S=b.constantOr(null);S&&(m=!0,h[S.to]=!0,h[S.from]=!0)}return m}function j0(a,n,l,h,m){const v=m.patternDependencies;for(const b of n){const S=b.paint.get(`${a}-pattern`).value;if(S.kind!=="constant"){let P=S.evaluate({zoom:h-1},l,{},m.availableImages),z=S.evaluate({zoom:h},l,{},m.availableImages),O=S.evaluate({zoom:h+1},l,{},m.availableImages);P=P&&P.name?P.name:P,z=z&&z.name?z.name:z,O=O&&O.name?O.name:O,v[P]=!0,v[z]=!0,v[O]=!0,l.patterns[b.id]={min:P,mid:z,max:O}}}return l}class V0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new mr,this.indexArray=new ai,this.indexArray2=new Un,this.programConfigurations=new wa(n.layers,n.zoom),this.segments=new an,this.segments2=new an,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.hasPattern=N0("fill",this.layers,l);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),b=[];for(const{feature:S,id:P,index:z,sourceLayerIndex:O}of n){const U=this.layers[0]._featureFilter.needGeometry,Z=sc(S,U);if(!this.layers[0]._featureFilter.filter(new on(this.zoom),Z,h))continue;const re=v?m.evaluate(Z,{},h,l.availableImages):void 0,oe={id:P,properties:S.properties,type:S.type,sourceLayerIndex:O,index:z,geometry:U?Z.geometry:ac(S),patterns:{},sortKey:re};b.push(oe)}v&&b.sort((S,P)=>S.sortKey-P.sortKey);for(const S of b){const{geometry:P,index:z,sourceLayerIndex:O}=S;if(this.hasPattern){const U=j0("fill",this.layers,S,this.zoom,l);this.patternFeatures.push(U)}else this.addFeature(S,P,z,h,{});l.featureIndex.insert(n[z].feature,P,z,O,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}addFeatures(n,l,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,xL),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,l,h,m,v){for(const b of F0(l,500)){let S=0;for(const re of b)S+=re.length;const P=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),z=P.vertexLength,O=[],U=[];for(const re of b){if(re.length===0)continue;re!==b[0]&&U.push(O.length/2);const oe=this.segments2.prepareSegment(re.length,this.layoutVertexArray,this.indexArray2),ue=oe.vertexLength;this.layoutVertexArray.emplaceBack(re[0].x,re[0].y),this.indexArray2.emplaceBack(ue+re.length-1,ue),O.push(re[0].x),O.push(re[0].y);for(let ye=1;ye<re.length;ye++)this.layoutVertexArray.emplaceBack(re[ye].x,re[ye].y),this.indexArray2.emplaceBack(ue+ye-1,ue+ye),O.push(re[ye].x),O.push(re[ye].y);oe.vertexLength+=re.length,oe.primitiveLength+=re.length}const Z=pC(O,U);for(let re=0;re<Z.length;re+=3)this.indexArray.emplaceBack(z+Z[re],z+Z[re+1],z+Z[re+2]);P.vertexLength+=S,P.primitiveLength+=Z.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}}let mC,gC;$t("FillBucket",V0,{omit:["layers","patternFeatures"]});var RL={get paint(){return gC=gC||new Rn({"fill-antialias":new Xt(Ue.paint_fill["fill-antialias"]),"fill-opacity":new or(Ue.paint_fill["fill-opacity"]),"fill-color":new or(Ue.paint_fill["fill-color"]),"fill-outline-color":new or(Ue.paint_fill["fill-outline-color"]),"fill-translate":new Xt(Ue.paint_fill["fill-translate"]),"fill-translate-anchor":new Xt(Ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new nc(Ue.paint_fill["fill-pattern"])})},get layout(){return mC=mC||new Rn({"fill-sort-key":new or(Ue.layout_fill["fill-sort-key"])})}};class ML extends yo{constructor(n){super(n,RL)}recalculate(n,l){super.recalculate(n,l);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new V0(n)}queryRadius(){return Am(this.paint.get("fill-translate"))}queryIntersectsFeature(n,l,h,m,v,b,S){return JS(zm(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,S),m)}isTileClipped(){return!0}}const DL=vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),LL=vn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:$L}=DL;var il={},OL=T,yC=vu;function vu(a,n,l,h,m){this.properties={},this.extent=l,this.type=0,this._pbf=a,this._geometry=-1,this._keys=h,this._values=m,a.readFields(BL,this,n)}function BL(a,n,l){a==1?n.id=l.readVarint():a==2?function(h,m){for(var v=h.readVarint()+h.pos;h.pos<v;){var b=m._keys[h.readVarint()],S=m._values[h.readVarint()];m.properties[b]=S}}(l,n):a==3?n.type=l.readVarint():a==4&&(n._geometry=l.pos)}function FL(a){for(var n,l,h=0,m=0,v=a.length,b=v-1;m<v;b=m++)h+=((l=a[b]).x-(n=a[m]).x)*(n.y+l.y);return h}vu.types=["Unknown","Point","LineString","Polygon"],vu.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var n,l=a.readVarint()+a.pos,h=1,m=0,v=0,b=0,S=[];a.pos<l;){if(m<=0){var P=a.readVarint();h=7&P,m=P>>3}if(m--,h===1||h===2)v+=a.readSVarint(),b+=a.readSVarint(),h===1&&(n&&S.push(n),n=[]),n.push(new OL(v,b));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&S.push(n),S},vu.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var n=a.readVarint()+a.pos,l=1,h=0,m=0,v=0,b=1/0,S=-1/0,P=1/0,z=-1/0;a.pos<n;){if(h<=0){var O=a.readVarint();l=7&O,h=O>>3}if(h--,l===1||l===2)(m+=a.readSVarint())<b&&(b=m),m>S&&(S=m),(v+=a.readSVarint())<P&&(P=v),v>z&&(z=v);else if(l!==7)throw new Error("unknown command "+l)}return[b,P,S,z]},vu.prototype.toGeoJSON=function(a,n,l){var h,m,v=this.extent*Math.pow(2,l),b=this.extent*a,S=this.extent*n,P=this.loadGeometry(),z=vu.types[this.type];function O(re){for(var oe=0;oe<re.length;oe++){var ue=re[oe];re[oe]=[360*(ue.x+b)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(ue.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var U=[];for(h=0;h<P.length;h++)U[h]=P[h][0];O(P=U);break;case 2:for(h=0;h<P.length;h++)O(P[h]);break;case 3:for(P=function(re){var oe=re.length;if(oe<=1)return[re];for(var ue,ye,_e=[],Re=0;Re<oe;Re++){var be=FL(re[Re]);be!==0&&(ye===void 0&&(ye=be<0),ye===be<0?(ue&&_e.push(ue),ue=[re[Re]]):ue.push(re[Re]))}return ue&&_e.push(ue),_e}(P),h=0;h<P.length;h++)for(m=0;m<P[h].length;m++)O(P[h][m])}P.length===1?P=P[0]:z="Multi"+z;var Z={type:"Feature",geometry:{type:z,coordinates:P},properties:this.properties};return"id"in this&&(Z.id=this.id),Z};var NL=yC,vC=_C;function _C(a,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(jL,this,n),this.length=this._features.length}function jL(a,n,l){a===15?n.version=l.readVarint():a===1?n.name=l.readString():a===5?n.extent=l.readVarint():a===2?n._features.push(l.pos):a===3?n._keys.push(l.readString()):a===4&&n._values.push(function(h){for(var m=null,v=h.readVarint()+h.pos;h.pos<v;){var b=h.readVarint()>>3;m=b===1?h.readString():b===2?h.readFloat():b===3?h.readDouble():b===4?h.readVarint64():b===5?h.readVarint():b===6?h.readSVarint():b===7?h.readBoolean():null}return m}(l))}_C.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var n=this._pbf.readVarint()+this._pbf.pos;return new NL(this._pbf,n,this.extent,this._keys,this._values)};var VL=vC;function UL(a,n,l){if(a===3){var h=new VL(l,l.readVarint()+l.pos);h.length&&(n[h.name]=h)}}il.VectorTile=function(a,n){this.layers=a.readFields(UL,{},n)},il.VectorTileFeature=yC,il.VectorTileLayer=vC;const HL=il.VectorTileFeature.types,U0=Math.pow(2,13);function Nh(a,n,l,h,m,v,b,S){a.emplaceBack(n,l,2*Math.floor(h*U0)+b,m*U0*2,v*U0*2,Math.round(S))}class H0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new It,this.centroidVertexArray=new pt,this.indexArray=new ai,this.programConfigurations=new wa(n.layers,n.zoom),this.segments=new an,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.features=[],this.hasPattern=N0("fill-extrusion",this.layers,l);for(const{feature:m,id:v,index:b,sourceLayerIndex:S}of n){const P=this.layers[0]._featureFilter.needGeometry,z=sc(m,P);if(!this.layers[0]._featureFilter.filter(new on(this.zoom),z,h))continue;const O={id:v,sourceLayerIndex:S,index:b,geometry:P?z.geometry:ac(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(j0("fill-extrusion",this.layers,O,this.zoom,l)):this.addFeature(O,O.geometry,b,h,{}),l.featureIndex.insert(m,O.geometry,b,S,this.index,!0)}}addFeatures(n,l,h){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,l,h)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,$L),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,LL.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,l,h,m,v){const b={x:0,y:0,vertexCount:0};for(const S of F0(l,500)){let P=0;for(const oe of S)P+=oe.length;let z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const oe of S){if(oe.length===0||GL(oe))continue;let ue=0;for(let ye=0;ye<oe.length;ye++){const _e=oe[ye];if(ye>=1){const Re=oe[ye-1];if(!WL(_e,Re)){z.vertexLength+4>an.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const be=_e.sub(Re)._perp()._unit(),De=Re.dist(_e);ue+De>32768&&(ue=0),Nh(this.layoutVertexArray,_e.x,_e.y,be.x,be.y,0,0,ue),Nh(this.layoutVertexArray,_e.x,_e.y,be.x,be.y,0,1,ue),b.x+=2*_e.x,b.y+=2*_e.y,b.vertexCount+=2,ue+=De,Nh(this.layoutVertexArray,Re.x,Re.y,be.x,be.y,0,0,ue),Nh(this.layoutVertexArray,Re.x,Re.y,be.x,be.y,0,1,ue),b.x+=2*Re.x,b.y+=2*Re.y,b.vertexCount+=2;const We=z.vertexLength;this.indexArray.emplaceBack(We,We+2,We+1),this.indexArray.emplaceBack(We+1,We+2,We+3),z.vertexLength+=4,z.primitiveLength+=2}}}}if(z.vertexLength+P>an.MAX_VERTEX_ARRAY_LENGTH&&(z=this.segments.prepareSegment(P,this.layoutVertexArray,this.indexArray)),HL[n.type]!=="Polygon")continue;const O=[],U=[],Z=z.vertexLength;for(const oe of S)if(oe.length!==0){oe!==S[0]&&U.push(O.length/2);for(let ue=0;ue<oe.length;ue++){const ye=oe[ue];Nh(this.layoutVertexArray,ye.x,ye.y,0,0,1,1,0),b.x+=ye.x,b.y+=ye.y,b.vertexCount+=1,O.push(ye.x),O.push(ye.y)}}const re=pC(O,U);for(let oe=0;oe<re.length;oe+=3)this.indexArray.emplaceBack(Z+re[oe],Z+re[oe+2],Z+re[oe+1]);z.primitiveLength+=re.length/3,z.vertexLength+=P}for(let S=0;S<b.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(b.x/b.vertexCount),Math.floor(b.y/b.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}}function WL(a,n){return a.x===n.x&&(a.x<0||a.x>Bn)||a.y===n.y&&(a.y<0||a.y>Bn)}function GL(a){return a.every(n=>n.x<0)||a.every(n=>n.x>Bn)||a.every(n=>n.y<0)||a.every(n=>n.y>Bn)}let xC;$t("FillExtrusionBucket",H0,{omit:["layers","features"]});var qL={get paint(){return xC=xC||new Rn({"fill-extrusion-opacity":new Xt(Ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new or(Ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Xt(Ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Xt(Ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new nc(Ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new or(Ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new or(Ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Xt(Ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ZL extends yo{constructor(n){super(n,qL)}createBucket(n){return new H0(n)}queryRadius(){return Am(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,l,h,m,v,b,S,P){const z=zm(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,S),O=this.paint.get("fill-extrusion-height").evaluate(l,h),U=this.paint.get("fill-extrusion-base").evaluate(l,h),Z=function(oe,ue,ye,_e){const Re=[];for(const be of oe){const De=[be.x,be.y,0,1];Rm(De,De,ue),Re.push(new E(De[0]/De[3],De[1]/De[3]))}return Re}(z,P),re=function(oe,ue,ye,_e){const Re=[],be=[],De=_e[8]*ue,We=_e[9]*ue,nt=_e[10]*ue,Rt=_e[11]*ue,Wt=_e[8]*ye,At=_e[9]*ye,Tt=_e[10]*ye,yt=_e[11]*ye;for(const Bt of oe){const bt=[],dt=[];for(const rr of Bt){const Zt=rr.x,pr=rr.y,sn=_e[0]*Zt+_e[4]*pr+_e[12],hn=_e[1]*Zt+_e[5]*pr+_e[13],Gn=_e[2]*Zt+_e[6]*pr+_e[14],_o=_e[3]*Zt+_e[7]*pr+_e[15],ji=Gn+nt,Fn=_o+Rt,li=sn+Wt,fi=hn+At,Vi=Gn+Tt,Ui=_o+yt,qn=new E((sn+De)/Fn,(hn+We)/Fn);qn.z=ji/Fn,bt.push(qn);const Zn=new E(li/Ui,fi/Ui);Zn.z=Vi/Ui,dt.push(Zn)}Re.push(bt),be.push(dt)}return[Re,be]}(m,U,O,P);return function(oe,ue,ye){let _e=1/0;JS(ye,ue)&&(_e=bC(ye,ue[0]));for(let Re=0;Re<ue.length;Re++){const be=ue[Re],De=oe[Re];for(let We=0;We<be.length-1;We++){const nt=be[We],Rt=[nt,be[We+1],De[We+1],De[We],nt];XS(ye,Rt)&&(_e=Math.min(_e,bC(ye,Rt)))}}return _e!==1/0&&_e}(re[0],re[1],Z)}}function jh(a,n){return a.x*n.x+a.y*n.y}function bC(a,n){if(a.length===1){let l=0;const h=n[l++];let m;for(;!m||h.equals(m);)if(m=n[l++],!m)return 1/0;for(;l<n.length;l++){const v=n[l],b=a[0],S=m.sub(h),P=v.sub(h),z=b.sub(h),O=jh(S,S),U=jh(S,P),Z=jh(P,P),re=jh(z,S),oe=jh(z,P),ue=O*Z-U*U,ye=(Z*re-U*oe)/ue,_e=(O*oe-U*re)/ue,Re=h.z*(1-ye-_e)+m.z*ye+v.z*_e;if(isFinite(Re))return Re}return 1/0}{let l=1/0;for(const h of n)l=Math.min(l,h.z);return l}}const KL=vn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:XL}=KL,JL=vn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:YL}=JL,QL=il.VectorTileFeature.types,e$=Math.cos(Math.PI/180*37.5),wC=Math.pow(2,14)/.5;class W0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(l=>l.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new ar,this.layoutVertexArray2=new qt,this.indexArray=new ai,this.programConfigurations=new wa(n.layers,n.zoom),this.segments=new an,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(n,l,h){this.hasPattern=N0("line",this.layers,l);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),b=[];for(const{feature:S,id:P,index:z,sourceLayerIndex:O}of n){const U=this.layers[0]._featureFilter.needGeometry,Z=sc(S,U);if(!this.layers[0]._featureFilter.filter(new on(this.zoom),Z,h))continue;const re=v?m.evaluate(Z,{},h):void 0,oe={id:P,properties:S.properties,type:S.type,sourceLayerIndex:O,index:z,geometry:U?Z.geometry:ac(S),patterns:{},sortKey:re};b.push(oe)}v&&b.sort((S,P)=>S.sortKey-P.sortKey);for(const S of b){const{geometry:P,index:z,sourceLayerIndex:O}=S;if(this.hasPattern){const U=j0("line",this.layers,S,this.zoom,l);this.patternFeatures.push(U)}else this.addFeature(S,P,z,h,{});l.featureIndex.insert(n[z].feature,P,z,O,this.index)}}update(n,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,l,this.stateDependentLayers,h)}addFeatures(n,l,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,YL)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,XL),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,l,h,m,v){const b=this.layers[0].layout,S=b.get("line-join").evaluate(n,{}),P=b.get("line-cap"),z=b.get("line-miter-limit"),O=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const U of l)this.addLine(U,n,S,P,z,O);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}addLine(n,l,h,m,v,b){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let _e=0;_e<n.length-1;_e++)this.totalDistance+=n[_e].dist(n[_e+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=QL[l.type]==="Polygon";let P=n.length;for(;P>=2&&n[P-1].equals(n[P-2]);)P--;let z=0;for(;z<P-1&&n[z].equals(n[z+1]);)z++;if(P<(S?3:2))return;h==="bevel"&&(v=1.05);const O=this.overscaling<=16?15*Bn/(512*this.overscaling):0,U=this.segments.prepareSegment(10*P,this.layoutVertexArray,this.indexArray);let Z,re,oe,ue,ye;this.e1=this.e2=-1,S&&(Z=n[P-2],ye=n[z].sub(Z)._unit()._perp());for(let _e=z;_e<P;_e++){if(oe=_e===P-1?S?n[z+1]:void 0:n[_e+1],oe&&n[_e].equals(oe))continue;ye&&(ue=ye),Z&&(re=Z),Z=n[_e],ye=oe?oe.sub(Z)._unit()._perp():ue,ue=ue||ye;let Re=ue.add(ye);Re.x===0&&Re.y===0||Re._unit();const be=ue.x*ye.x+ue.y*ye.y,De=Re.x*ye.x+Re.y*ye.y,We=De!==0?1/De:1/0,nt=2*Math.sqrt(2-2*De),Rt=De<e$&&re&&oe,Wt=ue.x*ye.y-ue.y*ye.x>0;if(Rt&&_e>z){const yt=Z.dist(re);if(yt>2*O){const Bt=Z.sub(Z.sub(re)._mult(O/yt)._round());this.updateDistance(re,Bt),this.addCurrentVertex(Bt,ue,0,0,U),re=Bt}}const At=re&&oe;let Tt=At?h:S?"butt":m;if(At&&Tt==="round"&&(We<b?Tt="miter":We<=2&&(Tt="fakeround")),Tt==="miter"&&We>v&&(Tt="bevel"),Tt==="bevel"&&(We>2&&(Tt="flipbevel"),We<v&&(Tt="miter")),re&&this.updateDistance(re,Z),Tt==="miter")Re._mult(We),this.addCurrentVertex(Z,Re,0,0,U);else if(Tt==="flipbevel"){if(We>100)Re=ye.mult(-1);else{const yt=We*ue.add(ye).mag()/ue.sub(ye).mag();Re._perp()._mult(yt*(Wt?-1:1))}this.addCurrentVertex(Z,Re,0,0,U),this.addCurrentVertex(Z,Re.mult(-1),0,0,U)}else if(Tt==="bevel"||Tt==="fakeround"){const yt=-Math.sqrt(We*We-1),Bt=Wt?yt:0,bt=Wt?0:yt;if(re&&this.addCurrentVertex(Z,ue,Bt,bt,U),Tt==="fakeround"){const dt=Math.round(180*nt/Math.PI/20);for(let rr=1;rr<dt;rr++){let Zt=rr/dt;if(Zt!==.5){const sn=Zt-.5;Zt+=Zt*sn*(Zt-1)*((1.0904+be*(be*(3.55645-1.43519*be)-3.2452))*sn*sn+(.848013+be*(.215638*be-1.06021)))}const pr=ye.sub(ue)._mult(Zt)._add(ue)._unit()._mult(Wt?-1:1);this.addHalfVertex(Z,pr.x,pr.y,!1,Wt,0,U)}}oe&&this.addCurrentVertex(Z,ye,-Bt,-bt,U)}else if(Tt==="butt")this.addCurrentVertex(Z,Re,0,0,U);else if(Tt==="square"){const yt=re?1:-1;this.addCurrentVertex(Z,Re,yt,yt,U)}else Tt==="round"&&(re&&(this.addCurrentVertex(Z,ue,0,0,U),this.addCurrentVertex(Z,ue,1,1,U,!0)),oe&&(this.addCurrentVertex(Z,ye,-1,-1,U,!0),this.addCurrentVertex(Z,ye,0,0,U)));if(Rt&&_e<P-1){const yt=Z.dist(oe);if(yt>2*O){const Bt=Z.add(oe.sub(Z)._mult(O/yt)._round());this.updateDistance(Z,Bt),this.addCurrentVertex(Bt,ye,0,0,U),Z=Bt}}}}addCurrentVertex(n,l,h,m,v,b=!1){const S=l.y*m-l.x,P=-l.y-l.x*m;this.addHalfVertex(n,l.x+l.y*h,l.y-l.x*h,b,!1,h,v),this.addHalfVertex(n,S,P,b,!0,-m,v),this.distance>wC/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,l,h,m,v,b))}addHalfVertex({x:n,y:l},h,m,v,b,S,P){const z=.5*(this.lineClips?this.scaledDistance*(wC-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(l<<1)+(b?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const O=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,O),P.primitiveLength++),b?this.e2=O:this.e1=O}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,l){this.distance+=n.dist(l),this.updateScaledDistance()}}let SC,CC;$t("LineBucket",W0,{omit:["layers","patternFeatures"]});var IC={get paint(){return CC=CC||new Rn({"line-opacity":new or(Ue.paint_line["line-opacity"]),"line-color":new or(Ue.paint_line["line-color"]),"line-translate":new Xt(Ue.paint_line["line-translate"]),"line-translate-anchor":new Xt(Ue.paint_line["line-translate-anchor"]),"line-width":new or(Ue.paint_line["line-width"]),"line-gap-width":new or(Ue.paint_line["line-gap-width"]),"line-offset":new or(Ue.paint_line["line-offset"]),"line-blur":new or(Ue.paint_line["line-blur"]),"line-dasharray":new Ch(Ue.paint_line["line-dasharray"]),"line-pattern":new nc(Ue.paint_line["line-pattern"]),"line-gradient":new Ih(Ue.paint_line["line-gradient"])})},get layout(){return SC=SC||new Rn({"line-cap":new Xt(Ue.layout_line["line-cap"]),"line-join":new or(Ue.layout_line["line-join"]),"line-miter-limit":new Xt(Ue.layout_line["line-miter-limit"]),"line-round-limit":new Xt(Ue.layout_line["line-round-limit"]),"line-sort-key":new or(Ue.layout_line["line-sort-key"])})}};class t$ extends or{possiblyEvaluate(n,l){return l=new on(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(n,l)}evaluate(n,l,h,m){return l=ae({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(n,l,h,m)}}let Om;class r$ extends yo{constructor(n){super(n,IC),this.gradientVersion=0,Om||(Om=new t$(IC.paint.properties["line-width"].specification),Om.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof Ua,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,l){super.recalculate(n,l),this.paint._values["line-floorwidth"]=Om.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new W0(n)}queryRadius(n){const l=n,h=TC(Mh("line-width",this,l),Mh("line-gap-width",this,l)),m=Mh("line-offset",this,l);return h/2+Math.abs(m)+Am(this.paint.get("line-translate"))}queryIntersectsFeature(n,l,h,m,v,b,S){const P=zm(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,S),z=S/2*TC(this.paint.get("line-width").evaluate(l,h),this.paint.get("line-gap-width").evaluate(l,h)),O=this.paint.get("line-offset").evaluate(l,h);return O&&(m=function(U,Z){const re=[];for(let oe=0;oe<U.length;oe++){const ue=U[oe],ye=[];for(let _e=0;_e<ue.length;_e++){const Re=ue[_e-1],be=ue[_e],De=ue[_e+1],We=_e===0?new E(0,0):be.sub(Re)._unit()._perp(),nt=_e===ue.length-1?new E(0,0):De.sub(be)._unit()._perp(),Rt=We._add(nt)._unit(),Wt=Rt.x*nt.x+Rt.y*nt.y;Wt!==0&&Rt._mult(1/Wt),ye.push(Rt._mult(Z)._add(be))}re.push(ye)}return re}(m,O*S)),function(U,Z,re){for(let oe=0;oe<Z.length;oe++){const ue=Z[oe];if(U.length>=3){for(let ye=0;ye<ue.length;ye++)if(mu(U,ue[ye]))return!0}if(cL(U,ue,re))return!0}return!1}(P,m,z)}isTileClipped(){return!0}}function TC(a,n){return n>0?n+2*a:a}const n$=vn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),i$=vn([{name:"a_projected_pos",components:3,type:"Float32"}],4);vn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const o$=vn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);vn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const PC=vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),a$=vn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function s$(a,n,l){return a.sections.forEach(h=>{h.text=function(m,v,b){const S=v.layout.get("text-transform").evaluate(b,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),ro.applyArabicShaping&&(m=ro.applyArabicShaping(m)),m}(h.text,n,l)}),a}vn([{name:"triangle",components:3,type:"Uint16"}]),vn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),vn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),vn([{type:"Float32",name:"offsetX"}]),vn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),vn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Vh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Wn=24,kC=Kr,EC=function(a,n,l,h,m){var v,b,S=8*m-h-1,P=(1<<S)-1,z=P>>1,O=-7,U=m-1,Z=-1,re=a[n+U];for(U+=Z,v=re&(1<<-O)-1,re>>=-O,O+=S;O>0;v=256*v+a[n+U],U+=Z,O-=8);for(b=v&(1<<-O)-1,v>>=-O,O+=h;O>0;b=256*b+a[n+U],U+=Z,O-=8);if(v===0)v=1-z;else{if(v===P)return b?NaN:1/0*(re?-1:1);b+=Math.pow(2,h),v-=z}return(re?-1:1)*b*Math.pow(2,v-h)},AC=function(a,n,l,h,m,v){var b,S,P,z=8*v-m-1,O=(1<<z)-1,U=O>>1,Z=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=0,oe=1,ue=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(S=isNaN(n)?1:0,b=O):(b=Math.floor(Math.log(n)/Math.LN2),n*(P=Math.pow(2,-b))<1&&(b--,P*=2),(n+=b+U>=1?Z/P:Z*Math.pow(2,1-U))*P>=2&&(b++,P/=2),b+U>=O?(S=0,b=O):b+U>=1?(S=(n*P-1)*Math.pow(2,m),b+=U):(S=n*Math.pow(2,U-1)*Math.pow(2,m),b=0));m>=8;a[l+re]=255&S,re+=oe,S/=256,m-=8);for(b=b<<m|S,z+=m;z>0;a[l+re]=255&b,re+=oe,b/=256,z-=8);a[l+re-oe]|=128*ue};function Kr(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Kr.Varint=0,Kr.Fixed64=1,Kr.Bytes=2,Kr.Fixed32=5;var G0=4294967296,zC=1/G0,RC=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Cs(a){return a.type===Kr.Bytes?a.readVarint()+a.pos:a.pos+1}function _u(a,n,l){return l?4294967296*n+(a>>>0):4294967296*(n>>>0)+(a>>>0)}function MC(a,n,l){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));l.realloc(h);for(var m=l.pos-1;m>=a;m--)l.buf[m+h]=l.buf[m]}function l$(a,n){for(var l=0;l<a.length;l++)n.writeVarint(a[l])}function c$(a,n){for(var l=0;l<a.length;l++)n.writeSVarint(a[l])}function u$(a,n){for(var l=0;l<a.length;l++)n.writeFloat(a[l])}function d$(a,n){for(var l=0;l<a.length;l++)n.writeDouble(a[l])}function h$(a,n){for(var l=0;l<a.length;l++)n.writeBoolean(a[l])}function p$(a,n){for(var l=0;l<a.length;l++)n.writeFixed32(a[l])}function f$(a,n){for(var l=0;l<a.length;l++)n.writeSFixed32(a[l])}function m$(a,n){for(var l=0;l<a.length;l++)n.writeFixed64(a[l])}function g$(a,n){for(var l=0;l<a.length;l++)n.writeSFixed64(a[l])}function Bm(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+16777216*a[n+3]}function xu(a,n,l){a[l]=n,a[l+1]=n>>>8,a[l+2]=n>>>16,a[l+3]=n>>>24}function DC(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+(a[n+3]<<24)}Kr.prototype={destroy:function(){this.buf=null},readFields:function(a,n,l){for(l=l||this.length;this.pos<l;){var h=this.readVarint(),m=h>>3,v=this.pos;this.type=7&h,a(m,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(a,n){return this.readFields(a,n,this.readVarint()+this.pos)},readFixed32:function(){var a=Bm(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=DC(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Bm(this.buf,this.pos)+Bm(this.buf,this.pos+4)*G0;return this.pos+=8,a},readSFixed64:function(){var a=Bm(this.buf,this.pos)+DC(this.buf,this.pos+4)*G0;return this.pos+=8,a},readFloat:function(){var a=EC(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=EC(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var n,l,h=this.buf;return n=127&(l=h[this.pos++]),l<128?n:(n|=(127&(l=h[this.pos++]))<<7,l<128?n:(n|=(127&(l=h[this.pos++]))<<14,l<128?n:(n|=(127&(l=h[this.pos++]))<<21,l<128?n:function(m,v,b){var S,P,z=b.buf;if(S=(112&(P=z[b.pos++]))>>4,P<128||(S|=(127&(P=z[b.pos++]))<<3,P<128)||(S|=(127&(P=z[b.pos++]))<<10,P<128)||(S|=(127&(P=z[b.pos++]))<<17,P<128)||(S|=(127&(P=z[b.pos++]))<<24,P<128)||(S|=(1&(P=z[b.pos++]))<<31,P<128))return _u(m,S,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(l=h[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,n=this.pos;return this.pos=a,a-n>=12&&RC?function(l,h,m){return RC.decode(l.subarray(h,m))}(this.buf,n,a):function(l,h,m){for(var v="",b=h;b<m;){var S,P,z,O=l[b],U=null,Z=O>239?4:O>223?3:O>191?2:1;if(b+Z>m)break;Z===1?O<128&&(U=O):Z===2?(192&(S=l[b+1]))==128&&(U=(31&O)<<6|63&S)<=127&&(U=null):Z===3?(P=l[b+2],(192&(S=l[b+1]))==128&&(192&P)==128&&((U=(15&O)<<12|(63&S)<<6|63&P)<=2047||U>=55296&&U<=57343)&&(U=null)):Z===4&&(P=l[b+2],z=l[b+3],(192&(S=l[b+1]))==128&&(192&P)==128&&(192&z)==128&&((U=(15&O)<<18|(63&S)<<12|(63&P)<<6|63&z)<=65535||U>=1114112)&&(U=null)),U===null?(U=65533,Z=1):U>65535&&(U-=65536,v+=String.fromCharCode(U>>>10&1023|55296),U=56320|1023&U),v+=String.fromCharCode(U),b+=Z}return v}(this.buf,n,a)},readBytes:function(){var a=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,a);return this.pos=a,n},readPackedVarint:function(a,n){if(this.type!==Kr.Bytes)return a.push(this.readVarint(n));var l=Cs(this);for(a=a||[];this.pos<l;)a.push(this.readVarint(n));return a},readPackedSVarint:function(a){if(this.type!==Kr.Bytes)return a.push(this.readSVarint());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Kr.Bytes)return a.push(this.readBoolean());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Kr.Bytes)return a.push(this.readFloat());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Kr.Bytes)return a.push(this.readDouble());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Kr.Bytes)return a.push(this.readFixed32());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Kr.Bytes)return a.push(this.readSFixed32());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Kr.Bytes)return a.push(this.readFixed64());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Kr.Bytes)return a.push(this.readSFixed64());var n=Cs(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed64());return a},skip:function(a){var n=7&a;if(n===Kr.Varint)for(;this.buf[this.pos++]>127;);else if(n===Kr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Kr.Fixed32)this.pos+=4;else{if(n!==Kr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(a,n){this.writeVarint(a<<3|n)},realloc:function(a){for(var n=this.length||16;n<this.pos+a;)n*=2;if(n!==this.length){var l=new Uint8Array(n);l.set(this.buf),this.buf=l,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),xu(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),xu(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),xu(this.buf,-1&a,this.pos),xu(this.buf,Math.floor(a*zC),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),xu(this.buf,-1&a,this.pos),xu(this.buf,Math.floor(a*zC),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(n,l){var h,m;if(n>=0?(h=n%4294967296|0,m=n/4294967296|0):(m=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,m=m+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(v,b,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(h,0,l),function(v,b){var S=(7&v)<<4;b.buf[b.pos++]|=S|((v>>>=3)?128:0),v&&(b.buf[b.pos++]=127&v|((v>>>=7)?128:0),v&&(b.buf[b.pos++]=127&v|((v>>>=7)?128:0),v&&(b.buf[b.pos++]=127&v|((v>>>=7)?128:0),v&&(b.buf[b.pos++]=127&v|((v>>>=7)?128:0),v&&(b.buf[b.pos++]=127&v)))))}(m,l)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var n=this.pos;this.pos=function(h,m,v){for(var b,S,P=0;P<m.length;P++){if((b=m.charCodeAt(P))>55295&&b<57344){if(!S){b>56319||P+1===m.length?(h[v++]=239,h[v++]=191,h[v++]=189):S=b;continue}if(b<56320){h[v++]=239,h[v++]=191,h[v++]=189,S=b;continue}b=S-55296<<10|b-56320|65536,S=null}else S&&(h[v++]=239,h[v++]=191,h[v++]=189,S=null);b<128?h[v++]=b:(b<2048?h[v++]=b>>6|192:(b<65536?h[v++]=b>>12|224:(h[v++]=b>>18|240,h[v++]=b>>12&63|128),h[v++]=b>>6&63|128),h[v++]=63&b|128)}return v}(this.buf,a,this.pos);var l=this.pos-n;l>=128&&MC(n,l,this),this.pos=n-1,this.writeVarint(l),this.pos+=l},writeFloat:function(a){this.realloc(4),AC(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),AC(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var n=a.length;this.writeVarint(n),this.realloc(n);for(var l=0;l<n;l++)this.buf[this.pos++]=a[l]},writeRawMessage:function(a,n){this.pos++;var l=this.pos;a(n,this);var h=this.pos-l;h>=128&&MC(l,h,this),this.pos=l-1,this.writeVarint(h),this.pos+=h},writeMessage:function(a,n,l){this.writeTag(a,Kr.Bytes),this.writeRawMessage(n,l)},writePackedVarint:function(a,n){n.length&&this.writeMessage(a,l$,n)},writePackedSVarint:function(a,n){n.length&&this.writeMessage(a,c$,n)},writePackedBoolean:function(a,n){n.length&&this.writeMessage(a,h$,n)},writePackedFloat:function(a,n){n.length&&this.writeMessage(a,u$,n)},writePackedDouble:function(a,n){n.length&&this.writeMessage(a,d$,n)},writePackedFixed32:function(a,n){n.length&&this.writeMessage(a,p$,n)},writePackedSFixed32:function(a,n){n.length&&this.writeMessage(a,f$,n)},writePackedFixed64:function(a,n){n.length&&this.writeMessage(a,m$,n)},writePackedSFixed64:function(a,n){n.length&&this.writeMessage(a,g$,n)},writeBytesField:function(a,n){this.writeTag(a,Kr.Bytes),this.writeBytes(n)},writeFixed32Field:function(a,n){this.writeTag(a,Kr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(a,n){this.writeTag(a,Kr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(a,n){this.writeTag(a,Kr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(a,n){this.writeTag(a,Kr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(a,n){this.writeTag(a,Kr.Varint),this.writeVarint(n)},writeSVarintField:function(a,n){this.writeTag(a,Kr.Varint),this.writeSVarint(n)},writeStringField:function(a,n){this.writeTag(a,Kr.Bytes),this.writeString(n)},writeFloatField:function(a,n){this.writeTag(a,Kr.Fixed32),this.writeFloat(n)},writeDoubleField:function(a,n){this.writeTag(a,Kr.Fixed64),this.writeDouble(n)},writeBooleanField:function(a,n){this.writeVarintField(a,!!n)}};var q0=w(kC);const Z0=3;function y$(a,n,l){a===1&&l.readMessage(v$,n)}function v$(a,n,l){if(a===3){const{id:h,bitmap:m,width:v,height:b,left:S,top:P,advance:z}=l.readMessage(_$,{});n.push({id:h,bitmap:new Lh({width:v+2*Z0,height:b+2*Z0},m),metrics:{width:v,height:b,left:S,top:P,advance:z}})}}function _$(a,n,l){a===1?n.id=l.readVarint():a===2?n.bitmap=l.readBytes():a===3?n.width=l.readVarint():a===4?n.height=l.readVarint():a===5?n.left=l.readSVarint():a===6?n.top=l.readSVarint():a===7&&(n.advance=l.readVarint())}const LC=Z0;function $C(a){let n=0,l=0;for(const b of a)n+=b.w*b.h,l=Math.max(l,b.w);a.sort((b,S)=>S.h-b.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),l),h:1/0}];let m=0,v=0;for(const b of a)for(let S=h.length-1;S>=0;S--){const P=h[S];if(!(b.w>P.w||b.h>P.h)){if(b.x=P.x,b.y=P.y,v=Math.max(v,b.y+b.h),m=Math.max(m,b.x+b.w),b.w===P.w&&b.h===P.h){const z=h.pop();S<h.length&&(h[S]=z)}else b.h===P.h?(P.x+=b.w,P.w-=b.w):b.w===P.w?(P.y+=b.h,P.h-=b.h):(h.push({x:P.x+b.w,y:P.y,w:P.w-b.w,h:b.h}),P.y+=b.h,P.h-=b.h);break}}return{w:m,h:v,fill:n/(m*v)||0}}const io=1;class K0{constructor(n,{pixelRatio:l,version:h,stretchX:m,stretchY:v,content:b}){this.paddedRect=n,this.pixelRatio=l,this.stretchX=m,this.stretchY=v,this.content=b,this.version=h}get tl(){return[this.paddedRect.x+io,this.paddedRect.y+io]}get br(){return[this.paddedRect.x+this.paddedRect.w-io,this.paddedRect.y+this.paddedRect.h-io]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*io)/this.pixelRatio,(this.paddedRect.h-2*io)/this.pixelRatio]}}class OC{constructor(n,l){const h={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(l,m,v);const{w:b,h:S}=$C(v),P=new zo({width:b||1,height:S||1});for(const z in n){const O=n[z],U=h[z].paddedRect;zo.copy(O.data,P,{x:0,y:0},{x:U.x+io,y:U.y+io},O.data)}for(const z in l){const O=l[z],U=m[z].paddedRect,Z=U.x+io,re=U.y+io,oe=O.data.width,ue=O.data.height;zo.copy(O.data,P,{x:0,y:0},{x:Z,y:re},O.data),zo.copy(O.data,P,{x:0,y:ue-1},{x:Z,y:re-1},{width:oe,height:1}),zo.copy(O.data,P,{x:0,y:0},{x:Z,y:re+ue},{width:oe,height:1}),zo.copy(O.data,P,{x:oe-1,y:0},{x:Z-1,y:re},{width:1,height:ue}),zo.copy(O.data,P,{x:0,y:0},{x:Z+oe,y:re},{width:1,height:ue})}this.image=P,this.iconPositions=h,this.patternPositions=m}addImages(n,l,h){for(const m in n){const v=n[m],b={x:0,y:0,w:v.data.width+2*io,h:v.data.height+2*io};h.push(b),l[m]=new K0(b,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,l){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),l)}patchUpdatedImage(n,l,h){if(!n||!l||n.version===l.version)return;n.version=l.version;const[m,v]=n.tl;h.update(l.data,void 0,{x:m,y:v})}}var ol;$t("ImagePosition",K0),$t("ImageAtlas",OC),c.ai=void 0,(ol=c.ai||(c.ai={}))[ol.none=0]="none",ol[ol.horizontal=1]="horizontal",ol[ol.vertical=2]="vertical",ol[ol.horizontalOnly=3]="horizontalOnly";const Uh=-17;class Hh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,l){const h=new Hh;return h.scale=n||1,h.fontStack=l,h}static forImage(n){const l=new Hh;return l.imageName=n,l}}class bu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,l){const h=new bu;for(let m=0;m<n.sections.length;m++){const v=n.sections[m];v.image?h.addImageSection(v):h.addTextSection(v,l)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let l="";for(let h=0;h<n.length;h++){const m=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;l+=m&&_m(m)&&!Vh[n[h+1]]||v&&_m(v)&&!Vh[n[h-1]]||!Vh[n[h]]?n[h]:Vh[n[h]]}return l}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&Nm[this.text.charCodeAt(h)];h++)n++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&Nm[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(n,l),this.sectionIndex=this.sectionIndex.slice(n,l)}substring(n,l){const h=new bu;return h.text=this.text.substring(n,l),h.sectionIndex=this.sectionIndex.slice(n,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,l)=>Math.max(n,this.sections[l].scale),0)}addTextSection(n,l){this.text+=n.text,this.sections.push(Hh.forText(n.scale,n.fontStack||l));const h=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(h)}addImageSection(n){const l=n.image?n.image.name:"";if(l.length===0)return void Je("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Hh.forImage(l)),this.sectionIndex.push(this.sections.length-1)):Je("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Fm(a,n,l,h,m,v,b,S,P,z,O,U,Z,re,oe,ue){const ye=bu.fromFeature(a,m);let _e;U===c.ai.vertical&&ye.verticalizePunctuation();const{processBidirectionalText:Re,processStyledBidirectionalText:be}=ro;if(Re&&ye.sections.length===1){_e=[];const nt=Re(ye.toString(),X0(ye,z,v,n,h,re,oe));for(const Rt of nt){const Wt=new bu;Wt.text=Rt,Wt.sections=ye.sections;for(let At=0;At<Rt.length;At++)Wt.sectionIndex.push(0);_e.push(Wt)}}else if(be){_e=[];const nt=be(ye.text,ye.sectionIndex,X0(ye,z,v,n,h,re,oe));for(const Rt of nt){const Wt=new bu;Wt.text=Rt[0],Wt.sectionIndex=Rt[1],Wt.sections=ye.sections,_e.push(Wt)}}else _e=function(nt,Rt){const Wt=[],At=nt.text;let Tt=0;for(const yt of Rt)Wt.push(nt.substring(Tt,yt)),Tt=yt;return Tt<At.length&&Wt.push(nt.substring(Tt,At.length)),Wt}(ye,X0(ye,z,v,n,h,re,oe));const De=[],We={positionedLines:De,text:ye.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:U,iconsInText:!1,verticalizable:!1};return function(nt,Rt,Wt,At,Tt,yt,Bt,bt,dt,rr,Zt,pr){let sn=0,hn=Uh,Gn=0,_o=0;const ji=bt==="right"?1:bt==="left"?0:.5;let Fn=0;for(const qn of Tt){qn.trim();const Zn=qn.getMaxScale(),Ii=(Zn-1)*Wn,Hi={positionedGlyphs:[],lineOffset:0};nt.positionedLines[Fn]=Hi;const Ti=Hi.positionedGlyphs;let oo=0;if(!qn.length()){hn+=yt,++Fn;continue}for(let Kn=0;Kn<qn.length();Kn++){const Sr=qn.getSection(Kn),Pi=qn.getSectionIndex(Kn),mi=qn.getCharCode(Kn);let Xn=0,ta=null,Sa=null,Ca=null,Is=Wn;const ra=!(dt===c.ai.horizontal||!Zt&&!gh(mi)||Zt&&(Nm[mi]||(li=mi,zt.Arabic(li)||zt["Arabic Supplement"](li)||zt["Arabic Extended-A"](li)||zt["Arabic Presentation Forms-A"](li)||zt["Arabic Presentation Forms-B"](li))));if(Sr.imageName){const Mo=At[Sr.imageName];if(!Mo)continue;Ca=Sr.imageName,nt.iconsInText=nt.iconsInText||!0,Sa=Mo.paddedRect;const so=Mo.displaySize;Sr.scale=Sr.scale*Wn/pr,ta={width:so[0],height:so[1],left:io,top:-LC,advance:ra?so[1]:so[0]},Xn=Ii+(Wn-so[1]*Sr.scale),Is=ta.advance;const Ts=ra?so[0]*Sr.scale-Wn*Zn:so[1]*Sr.scale-Wn*Zn;Ts>0&&Ts>oo&&(oo=Ts)}else{const Mo=Wt[Sr.fontStack],so=Mo&&Mo[mi];if(so&&so.rect)Sa=so.rect,ta=so.metrics;else{const Ts=Rt[Sr.fontStack],Kh=Ts&&Ts[mi];if(!Kh)continue;ta=Kh.metrics}Xn=(Zn-Sr.scale)*Wn}ra?(nt.verticalizable=!0,Ti.push({glyph:mi,imageName:Ca,x:sn,y:hn+Xn,vertical:ra,scale:Sr.scale,fontStack:Sr.fontStack,sectionIndex:Pi,metrics:ta,rect:Sa}),sn+=Is*Sr.scale+rr):(Ti.push({glyph:mi,imageName:Ca,x:sn,y:hn+Xn,vertical:ra,scale:Sr.scale,fontStack:Sr.fontStack,sectionIndex:Pi,metrics:ta,rect:Sa}),sn+=ta.advance*Sr.scale+rr)}Ti.length!==0&&(Gn=Math.max(sn-rr,Gn),w$(Ti,0,Ti.length-1,ji,oo)),sn=0;const ao=yt*Zn+oo;Hi.lineOffset=Math.max(oo,Ii),hn+=ao,_o=Math.max(ao,_o),++Fn}var li;const fi=hn-Uh,{horizontalAlign:Vi,verticalAlign:Ui}=J0(Bt);(function(qn,Zn,Ii,Hi,Ti,oo,ao,Kn,Sr){const Pi=(Zn-Ii)*Ti;let mi=0;mi=oo!==ao?-Kn*Hi-Uh:(-Hi*Sr+.5)*ao;for(const Xn of qn)for(const ta of Xn.positionedGlyphs)ta.x+=Pi,ta.y+=mi})(nt.positionedLines,ji,Vi,Ui,Gn,_o,yt,fi,Tt.length),nt.top+=-Ui*fi,nt.bottom=nt.top+fi,nt.left+=-Vi*Gn,nt.right=nt.left+Gn}(We,n,l,h,_e,b,S,P,U,z,Z,ue),!function(nt){for(const Rt of nt)if(Rt.positionedGlyphs.length!==0)return!1;return!0}(De)&&We}const Nm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},x$={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function BC(a,n,l,h,m,v){if(n.imageName){const b=h[n.imageName];return b?b.displaySize[0]*n.scale*Wn/v+m:0}{const b=l[n.fontStack],S=b&&b[a];return S?S.metrics.advance*n.scale+m:0}}function FC(a,n,l,h){const m=Math.pow(a-n,2);return h?a<n?m/2:2*m:m+Math.abs(l)*l}function b$(a,n,l){let h=0;return a===10&&(h-=1e4),l&&(h+=150),a!==40&&a!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function NC(a,n,l,h,m,v){let b=null,S=FC(n,l,m,v);for(const P of h){const z=FC(n-P.x,l,m,v)+P.badness;z<=S&&(b=P,S=z)}return{index:a,x:n,priorBreak:b,badness:S}}function jC(a){return a?jC(a.priorBreak).concat(a.index):[]}function X0(a,n,l,h,m,v,b){if(v!=="point")return[];if(!a)return[];const S=[],P=function(Z,re,oe,ue,ye,_e){let Re=0;for(let be=0;be<Z.length();be++){const De=Z.getSection(be);Re+=BC(Z.getCharCode(be),De,ue,ye,re,_e)}return Re/Math.max(1,Math.ceil(Re/oe))}(a,n,l,h,m,b),z=a.text.indexOf("​")>=0;let O=0;for(let Z=0;Z<a.length();Z++){const re=a.getSection(Z),oe=a.getCharCode(Z);if(Nm[oe]||(O+=BC(oe,re,h,m,n,b)),Z<a.length()-1){const ue=!((U=oe)<11904||!(zt["Bopomofo Extended"](U)||zt.Bopomofo(U)||zt["CJK Compatibility Forms"](U)||zt["CJK Compatibility Ideographs"](U)||zt["CJK Compatibility"](U)||zt["CJK Radicals Supplement"](U)||zt["CJK Strokes"](U)||zt["CJK Symbols and Punctuation"](U)||zt["CJK Unified Ideographs Extension A"](U)||zt["CJK Unified Ideographs"](U)||zt["Enclosed CJK Letters and Months"](U)||zt["Halfwidth and Fullwidth Forms"](U)||zt.Hiragana(U)||zt["Ideographic Description Characters"](U)||zt["Kangxi Radicals"](U)||zt["Katakana Phonetic Extensions"](U)||zt.Katakana(U)||zt["Vertical Forms"](U)||zt["Yi Radicals"](U)||zt["Yi Syllables"](U)));(x$[oe]||ue||re.imageName)&&S.push(NC(Z+1,O,P,S,b$(oe,a.getCharCode(Z+1),ue&&z),!1))}}var U;return jC(NC(a.length(),O,P,S,0,!0))}function J0(a){let n=.5,l=.5;switch(a){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:n,verticalAlign:l}}function w$(a,n,l,h,m){if(!h&&!m)return;const v=a[l],b=(a[l].x+v.metrics.advance*v.scale)*h;for(let S=n;S<=l;S++)a[S].x-=b,a[S].y+=m}function S$(a,n,l){const{horizontalAlign:h,verticalAlign:m}=J0(l),v=n[0]-a.displaySize[0]*h,b=n[1]-a.displaySize[1]*m;return{image:a,top:b,bottom:b+a.displaySize[1],left:v,right:v+a.displaySize[0]}}function VC(a,n,l,h,m,v){const b=a.image;let S;if(b.content){const ye=b.content,_e=b.pixelRatio||1;S=[ye[0]/_e,ye[1]/_e,b.displaySize[0]-ye[2]/_e,b.displaySize[1]-ye[3]/_e]}const P=n.left*v,z=n.right*v;let O,U,Z,re;l==="width"||l==="both"?(re=m[0]+P-h[3],U=m[0]+z+h[1]):(re=m[0]+(P+z-b.displaySize[0])/2,U=re+b.displaySize[0]);const oe=n.top*v,ue=n.bottom*v;return l==="height"||l==="both"?(O=m[1]+oe-h[0],Z=m[1]+ue+h[2]):(O=m[1]+(oe+ue-b.displaySize[1])/2,Z=O+b.displaySize[1]),{image:b,top:O,right:U,bottom:Z,left:re,collisionPadding:S}}const Wh=255,Za=128,al=Wh*Za;function UC(a,n){const{expression:l}=n;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new on(a+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=l;let v=0;for(;v<h.length&&h[v]<=a;)v++;v=Math.max(0,v-1);let b=v;for(;b<h.length&&h[b]<a+1;)b++;b=Math.min(h.length-1,b);const S=h[v],P=h[b];return l.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:P,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:P,minSize:l.evaluate(new on(S)),maxSize:l.evaluate(new on(P)),interpolationType:m}}}function Y0(a,n,l){let h="never";const m=a.get(n);return m?h=m:a.get(l)&&(h="always"),h}const C$=il.VectorTileFeature.types,I$=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function jm(a,n,l,h,m,v,b,S,P,z,O,U,Z){const re=S?Math.min(al,Math.round(S[0])):0,oe=S?Math.min(al,Math.round(S[1])):0;a.emplaceBack(n,l,Math.round(32*h),Math.round(32*m),v,b,(re<<1)+(P?1:0),oe,16*z,16*O,256*U,256*Z)}function Q0(a,n,l){a.emplaceBack(n.x,n.y,l),a.emplaceBack(n.x,n.y,l),a.emplaceBack(n.x,n.y,l),a.emplaceBack(n.x,n.y,l)}function T$(a){for(const n of a.sections)if(I0(n.text))return!0;return!1}class e_{constructor(n){this.layoutVertexArray=new fr,this.indexArray=new ai,this.programConfigurations=n,this.segments=new an,this.dynamicLayoutVertexArray=new hr,this.opacityVertexArray=new gr,this.hasVisibleVertices=!1,this.placedSymbolArray=new Te}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,l,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,n$.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,i$.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,I$,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}$t("SymbolBuffers",e_);class t_{constructor(n,l,h){this.layoutVertexArray=new n,this.layoutAttributes=l,this.indexArray=new h,this.segments=new an,this.collisionVertexArray=new en}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,o$.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}$t("CollisionBuffers",t_);class wu{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(b=>b.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=R0([]),this.placementViewportMatrix=R0([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=UC(this.zoom,l["text-size"]),this.iconSizeData=UC(this.zoom,l["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=Y0(h,"text-overlap","text-allow-overlap")!=="never"||Y0(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(b=>c.ai[b])),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=n.sourceID}createArrays(){this.text=new e_(new wa(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new e_(new wa(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new ze,this.lineVertexArray=new Ge,this.symbolInstances=new ve,this.textAnchorOffsets=new tt}calculateGlyphDependencies(n,l,h,m,v){for(let b=0;b<n.length;b++)if(l[n.charCodeAt(b)]=!0,(h||m)&&v){const S=Vh[n.charAt(b)];S&&(l[S.charCodeAt(0)]=!0)}}populate(n,l,h){const m=this.layers[0],v=m.layout,b=v.get("text-font"),S=v.get("text-field"),P=v.get("icon-image"),z=(S.value.kind!=="constant"||S.value.value instanceof zr&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),O=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,U=v.get("symbol-sort-key");if(this.features=[],!z&&!O)return;const Z=l.iconDependencies,re=l.glyphDependencies,oe=l.availableImages,ue=new on(this.zoom);for(const{feature:ye,id:_e,index:Re,sourceLayerIndex:be}of n){const De=m._featureFilter.needGeometry,We=sc(ye,De);if(!m._featureFilter.filter(ue,We,h))continue;let nt,Rt;if(De||(We.geometry=ac(ye)),z){const At=m.getValueAndResolveTokens("text-field",We,h,oe),Tt=zr.factory(At);T$(Tt)&&(this.hasRTLText=!0),(!this.hasRTLText||wh()==="unavailable"||this.hasRTLText&&ro.isParsed())&&(nt=s$(Tt,m,We))}if(O){const At=m.getValueAndResolveTokens("icon-image",We,h,oe);Rt=At instanceof fn?At:fn.fromString(At)}if(!nt&&!Rt)continue;const Wt=this.sortFeaturesByKey?U.evaluate(We,{},h):void 0;if(this.features.push({id:_e,text:nt,icon:Rt,index:Re,sourceLayerIndex:be,geometry:We.geometry,properties:ye.properties,type:C$[ye.type],sortKey:Wt}),Rt&&(Z[Rt.name]=!0),nt){const At=b.evaluate(We,{},h).join(","),Tt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ai.vertical)>=0;for(const yt of nt.sections)if(yt.image)Z[yt.image.name]=!0;else{const Bt=fh(nt.toString()),bt=yt.fontStack||At,dt=re[bt]=re[bt]||{};this.calculateGlyphDependencies(yt.text,dt,Tt,this.allowVerticalPlacement,Bt)}}}v.get("symbol-placement")==="line"&&(this.features=function(ye){const _e={},Re={},be=[];let De=0;function We(At){be.push(ye[At]),De++}function nt(At,Tt,yt){const Bt=Re[At];return delete Re[At],Re[Tt]=Bt,be[Bt].geometry[0].pop(),be[Bt].geometry[0]=be[Bt].geometry[0].concat(yt[0]),Bt}function Rt(At,Tt,yt){const Bt=_e[Tt];return delete _e[Tt],_e[At]=Bt,be[Bt].geometry[0].shift(),be[Bt].geometry[0]=yt[0].concat(be[Bt].geometry[0]),Bt}function Wt(At,Tt,yt){const Bt=yt?Tt[0][Tt[0].length-1]:Tt[0][0];return`${At}:${Bt.x}:${Bt.y}`}for(let At=0;At<ye.length;At++){const Tt=ye[At],yt=Tt.geometry,Bt=Tt.text?Tt.text.toString():null;if(!Bt){We(At);continue}const bt=Wt(Bt,yt),dt=Wt(Bt,yt,!0);if(bt in Re&&dt in _e&&Re[bt]!==_e[dt]){const rr=Rt(bt,dt,yt),Zt=nt(bt,dt,be[rr].geometry);delete _e[bt],delete Re[dt],Re[Wt(Bt,be[Zt].geometry,!0)]=Zt,be[rr].geometry=null}else bt in Re?nt(bt,dt,yt):dt in _e?Rt(bt,dt,yt):(We(At),_e[bt]=De-1,Re[dt]=De-1)}return be.filter(At=>At.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ye,_e)=>ye.sortKey-_e.sortKey)}update(n,l,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,l,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,l,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,l){const h=this.lineVertexArray.length;if(n.segment!==void 0){let m=n.dist(l[n.segment+1]),v=n.dist(l[n.segment]);const b={};for(let S=n.segment+1;S<l.length;S++)b[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:m},S<l.length-1&&(m+=l[S+1].dist(l[S]));for(let S=n.segment||0;S>=0;S--)b[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=l[S-1].dist(l[S]));for(let S=0;S<l.length;S++){const P=b[S];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,l,h,m,v,b,S,P,z,O,U,Z){const re=n.indexArray,oe=n.layoutVertexArray,ue=n.segments.prepareSegment(4*l.length,oe,re,this.canOverlap?b.sortKey:void 0),ye=this.glyphOffsetArray.length,_e=ue.vertexLength,Re=this.allowVerticalPlacement&&S===c.ai.vertical?Math.PI/2:0,be=b.text&&b.text.sections;for(let De=0;De<l.length;De++){const{tl:We,tr:nt,bl:Rt,br:Wt,tex:At,pixelOffsetTL:Tt,pixelOffsetBR:yt,minFontScaleX:Bt,minFontScaleY:bt,glyphOffset:dt,isSDF:rr,sectionIndex:Zt}=l[De],pr=ue.vertexLength,sn=dt[1];jm(oe,P.x,P.y,We.x,sn+We.y,At.x,At.y,h,rr,Tt.x,Tt.y,Bt,bt),jm(oe,P.x,P.y,nt.x,sn+nt.y,At.x+At.w,At.y,h,rr,yt.x,Tt.y,Bt,bt),jm(oe,P.x,P.y,Rt.x,sn+Rt.y,At.x,At.y+At.h,h,rr,Tt.x,yt.y,Bt,bt),jm(oe,P.x,P.y,Wt.x,sn+Wt.y,At.x+At.w,At.y+At.h,h,rr,yt.x,yt.y,Bt,bt),Q0(n.dynamicLayoutVertexArray,P,Re),re.emplaceBack(pr,pr+1,pr+2),re.emplaceBack(pr+1,pr+2,pr+3),ue.vertexLength+=4,ue.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(dt[0]),De!==l.length-1&&Zt===l[De+1].sectionIndex||n.programConfigurations.populatePaintArrays(oe.length,b,b.index,{},Z,be&&be[Zt])}n.placedSymbolArray.emplaceBack(P.x,P.y,ye,this.glyphOffsetArray.length-ye,_e,z,O,P.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],S,0,!1,0,U)}_addCollisionDebugVertex(n,l,h,m,v,b){return l.emplaceBack(0,0),n.emplaceBack(h.x,h.y,m,v,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(n,l,h,m,v,b,S){const P=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),z=P.vertexLength,O=v.layoutVertexArray,U=v.collisionVertexArray,Z=S.anchorX,re=S.anchorY;this._addCollisionDebugVertex(O,U,b,Z,re,new E(n,l)),this._addCollisionDebugVertex(O,U,b,Z,re,new E(h,l)),this._addCollisionDebugVertex(O,U,b,Z,re,new E(h,m)),this._addCollisionDebugVertex(O,U,b,Z,re,new E(n,m)),P.vertexLength+=4;const oe=v.indexArray;oe.emplaceBack(z,z+1),oe.emplaceBack(z+1,z+2),oe.emplaceBack(z+2,z+3),oe.emplaceBack(z+3,z),P.primitiveLength+=4}addDebugCollisionBoxes(n,l,h,m){for(let v=n;v<l;v++){const b=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,m?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new t_(Tn,PC.members,Un),this.iconCollisionBox=new t_(Tn,PC.members,Un);for(let n=0;n<this.symbolInstances.length;n++){const l=this.symbolInstances.get(n);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(n,l,h,m,v,b,S,P,z){const O={};for(let U=l;U<h;U++){const Z=n.get(U);O.textBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},O.textFeatureIndex=Z.featureIndex;break}for(let U=m;U<v;U++){const Z=n.get(U);O.verticalTextBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},O.verticalTextFeatureIndex=Z.featureIndex;break}for(let U=b;U<S;U++){const Z=n.get(U);O.iconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},O.iconFeatureIndex=Z.featureIndex;break}for(let U=P;U<z;U++){const Z=n.get(U);O.verticalIconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},O.verticalIconFeatureIndex=Z.featureIndex;break}return O}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,l){const h=n.placedSymbolArray.get(l),m=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<m;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(n),h=Math.cos(n),m=[],v=[],b=[];for(let S=0;S<this.symbolInstances.length;++S){b.push(S);const P=this.symbolInstances.get(S);m.push(0|Math.round(l*P.anchorX+h*P.anchorY)),v.push(P.featureIndex)}return b.sort((S,P)=>m[S]-m[P]||v[P]-v[S]),b}addToSortKeyRanges(n,l){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,v,b)=>{m>=0&&b.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let HC,WC;$t("SymbolBucket",wu,{omit:["layers","collisionBoxArray","features","compareText"]}),wu.MAX_GLYPHS=65535,wu.addDynamicAttributes=Q0;var r_={get paint(){return WC=WC||new Rn({"icon-opacity":new or(Ue.paint_symbol["icon-opacity"]),"icon-color":new or(Ue.paint_symbol["icon-color"]),"icon-halo-color":new or(Ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new or(Ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new or(Ue.paint_symbol["icon-halo-blur"]),"icon-translate":new Xt(Ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new Xt(Ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new or(Ue.paint_symbol["text-opacity"]),"text-color":new or(Ue.paint_symbol["text-color"],{runtimeType:kt,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new or(Ue.paint_symbol["text-halo-color"]),"text-halo-width":new or(Ue.paint_symbol["text-halo-width"]),"text-halo-blur":new or(Ue.paint_symbol["text-halo-blur"]),"text-translate":new Xt(Ue.paint_symbol["text-translate"]),"text-translate-anchor":new Xt(Ue.paint_symbol["text-translate-anchor"])})},get layout(){return HC=HC||new Rn({"symbol-placement":new Xt(Ue.layout_symbol["symbol-placement"]),"symbol-spacing":new Xt(Ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Xt(Ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new or(Ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Xt(Ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Xt(Ue.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Xt(Ue.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Xt(Ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new Xt(Ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Xt(Ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new or(Ue.layout_symbol["icon-size"]),"icon-text-fit":new Xt(Ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Xt(Ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new or(Ue.layout_symbol["icon-image"]),"icon-rotate":new or(Ue.layout_symbol["icon-rotate"]),"icon-padding":new or(Ue.layout_symbol["icon-padding"]),"icon-keep-upright":new Xt(Ue.layout_symbol["icon-keep-upright"]),"icon-offset":new or(Ue.layout_symbol["icon-offset"]),"icon-anchor":new or(Ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Xt(Ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Xt(Ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Xt(Ue.layout_symbol["text-rotation-alignment"]),"text-field":new or(Ue.layout_symbol["text-field"]),"text-font":new or(Ue.layout_symbol["text-font"]),"text-size":new or(Ue.layout_symbol["text-size"]),"text-max-width":new or(Ue.layout_symbol["text-max-width"]),"text-line-height":new Xt(Ue.layout_symbol["text-line-height"]),"text-letter-spacing":new or(Ue.layout_symbol["text-letter-spacing"]),"text-justify":new or(Ue.layout_symbol["text-justify"]),"text-radial-offset":new or(Ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Xt(Ue.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new or(Ue.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new or(Ue.layout_symbol["text-anchor"]),"text-max-angle":new Xt(Ue.layout_symbol["text-max-angle"]),"text-writing-mode":new Xt(Ue.layout_symbol["text-writing-mode"]),"text-rotate":new or(Ue.layout_symbol["text-rotate"]),"text-padding":new Xt(Ue.layout_symbol["text-padding"]),"text-keep-upright":new Xt(Ue.layout_symbol["text-keep-upright"]),"text-transform":new or(Ue.layout_symbol["text-transform"]),"text-offset":new or(Ue.layout_symbol["text-offset"]),"text-allow-overlap":new Xt(Ue.layout_symbol["text-allow-overlap"]),"text-overlap":new Xt(Ue.layout_symbol["text-overlap"]),"text-ignore-placement":new Xt(Ue.layout_symbol["text-ignore-placement"]),"text-optional":new Xt(Ue.layout_symbol["text-optional"])})}};class GC{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:He,this.defaultValue=n}evaluate(n){if(n.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(n.formattedSection))return l.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}$t("FormatSectionOverride",GC,{omit:["defaultValue"]});class Vm extends yo{constructor(n){super(n,r_)}recalculate(n,l){if(super.recalculate(n,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const v of h)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,l,h,m){const v=this.layout.get(n).evaluate(l,{},h,m),b=this._unevaluatedLayout._values[n];return b.isDataDriven()||ru(b.value)||!v?v:function(S,P){return P.replace(/{([^{}]+)}/g,(z,O)=>S&&O in S?String(S[O]):"")}(l.properties,v)}createBucket(n){return new wu(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of r_.paint.overridableProperties){if(!Vm.hasPaintOverride(this.layout,n))continue;const l=this.paint.get(n),h=new GC(l),m=new lh(h,l.property.specification);let v=null;v=l.value.kind==="constant"||l.value.kind==="source"?new ch("source",m):new iu("composite",m,l.value.zoomStops),this.paint._values[n]=new Si(l.property,v,l.parameters)}}_handleOverridablePaintPropertyUpdate(n,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&Vm.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,l){const h=n.get("text-field"),m=r_.paint.properties[l];let v=!1;const b=S=>{for(const P of S)if(m.overrides&&m.overrides.hasOverride(P))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof zr)b(h.value.value.sections);else if(h.value.kind==="source"){const S=z=>{v||(z instanceof hs&&mn(z.value)===pe?b(z.value.sections):z instanceof tu?b(z.sections):z.eachChild(S))},P=h.value;P._styleExpression&&S(P._styleExpression.expression)}return v}}let qC;var P$={get paint(){return qC=qC||new Rn({"background-color":new Xt(Ue.paint_background["background-color"]),"background-pattern":new Ch(Ue.paint_background["background-pattern"]),"background-opacity":new Xt(Ue.paint_background["background-opacity"])})}};class k$ extends yo{constructor(n){super(n,P$)}}let ZC;var E$={get paint(){return ZC=ZC||new Rn({"raster-opacity":new Xt(Ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new Xt(Ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Xt(Ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Xt(Ue.paint_raster["raster-brightness-max"]),"raster-saturation":new Xt(Ue.paint_raster["raster-saturation"]),"raster-contrast":new Xt(Ue.paint_raster["raster-contrast"]),"raster-resampling":new Xt(Ue.paint_raster["raster-resampling"]),"raster-fade-duration":new Xt(Ue.paint_raster["raster-fade-duration"])})}};class A$ extends yo{constructor(n){super(n,E$)}}class z$ extends yo{constructor(n){super(n,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class R${constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const n_=63710088e-1;class sl{constructor(n,l){if(isNaN(n)||isNaN(l))throw new Error(`Invalid LngLat object: (${n}, ${l})`);if(this.lng=+n,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new sl(se(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const l=Math.PI/180,h=this.lat*l,m=n.lat*l,v=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((n.lng-this.lng)*l);return n_*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof sl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new sl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new sl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const KC=2*Math.PI*n_;function XC(a){return KC*Math.cos(a*Math.PI/180)}function JC(a){return(180+a)/360}function YC(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function QC(a,n){return a/XC(n)}function e2(a){return 360*a-180}function i_(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class Um{constructor(n,l,h=0){this.x=+n,this.y=+l,this.z=+h}static fromLngLat(n,l=0){const h=sl.convert(n);return new Um(JC(h.lng),YC(h.lat),QC(l,h.lat))}toLngLat(){return new sl(e2(this.x),i_(this.y))}toAltitude(){return this.z*XC(i_(this.y))}meterInMercatorCoordinateUnits(){return 1/KC*(n=i_(this.y),1/Math.cos(n*Math.PI/180));var n}}function t2(a,n,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[a*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class o_{constructor(n,l,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||l<0||l>=Math.pow(2,n))throw new Error(`x=${l}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=l,this.y=h,this.key=Gh(0,n,n,l,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,l,h){const m=(b=this.y,S=this.z,P=t2(256*(v=this.x),256*(b=Math.pow(2,S)-b-1),S),z=t2(256*(v+1),256*(b+1),S),P[0]+","+P[1]+","+z[0]+","+z[1]);var v,b,S,P,z;const O=function(U,Z,re){let oe,ue="";for(let ye=U;ye>0;ye--)oe=1<<ye-1,ue+=(Z&oe?1:0)+(re&oe?2:0);return ue}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,O).replace(/{bbox-epsg-3857}/g,m)}isChildOf(n){const l=this.z-n.z;return l>0&&n.x===this.x>>l&&n.y===this.y>>l}getTilePoint(n){const l=Math.pow(2,this.z);return new E((n.x*l-this.x)*Bn,(n.y*l-this.y)*Bn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class r2{constructor(n,l){this.wrap=n,this.canonical=l,this.key=Gh(n,l.z,l.z,l.x,l.y)}}class Ro{constructor(n,l,h,m,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=l,this.canonical=new o_(h,+m,+v),this.key=Gh(l,n,h,m,v)}clone(){return new Ro(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-n;return n>this.canonical.z?new Ro(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ro(n,this.wrap,n,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(n,l){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?Gh(this.wrap*+l,n,this.canonical.z,this.canonical.x,this.canonical.y):Gh(this.wrap*+l,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const l=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>l&&n.canonical.y===this.canonical.y>>l}children(n){if(this.overscaledZ>=n)return[new Ro(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new Ro(l,this.wrap,l,h,m),new Ro(l,this.wrap,l,h+1,m),new Ro(l,this.wrap,l,h,m+1),new Ro(l,this.wrap,l,h+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Ro(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Ro(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new r2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new Um(n.x-this.wrap,n.y))}}function Gh(a,n,l,h,m){(a*=2)<0&&(a=-1*a-1);const v=1<<l;return(v*v*a+v*m+h).toString(36)+l.toString(36)+n.toString(36)}$t("CanonicalTileID",o_),$t("OverscaledTileID",Ro,{omit:["posMatrix"]});class n2{constructor(n,l,h,m=1,v=1,b=1,S=0){if(this.uid=n,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Je(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const P=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=v,this.blueFactor=b,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let z=0;z<P;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(P,z)]=this.data[this._idx(P-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,P)]=this.data[this._idx(z,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<P;z++)for(let O=0;O<P;O++){const U=this.get(z,O);U>this.max&&(this.max=U),U<this.min&&(this.min=U)}}get(n,l){const h=new Uint8Array(this.data.buffer),m=4*this._idx(n,l);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,l){if(n<-1||n>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(n+1)}unpack(n,l,h){return n*this.redFactor+l*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new zo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,l,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=l*this.dim,v=l*this.dim+this.dim,b=h*this.dim,S=h*this.dim+this.dim;switch(l){case-1:m=v-1;break;case 1:v=m+1}switch(h){case-1:b=S-1;break;case 1:S=b+1}const P=-l*this.dim,z=-h*this.dim;for(let O=b;O<S;O++)for(let U=m;U<v;U++)this.data[this._idx(U,O)]=n.data[this._idx(U+P,O+z)]}}$t("DEMData",n2);class i2{constructor(n){this._stringToNumber={},this._numberToString=[];for(let l=0;l<n.length;l++){const h=n[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class o2{constructor(n,l,h,m,v){this.type="Feature",this._vectorTileFeature=n,n._z=l,n._x=h,n._y=m,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(n[l]=this[l]);return n}}class a2{constructor(n,l){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Qs(Bn,16,0),this.grid3D=new Qs(Bn,16,0),this.featureIndexArray=new at,this.promoteId=l}insert(n,l,h,m,v,b){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,v);const P=b?this.grid3D:this.grid;for(let z=0;z<l.length;z++){const O=l[z],U=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<O.length;Z++){const re=O[Z];U[0]=Math.min(U[0],re.x),U[1]=Math.min(U[1],re.y),U[2]=Math.max(U[2],re.x),U[3]=Math.max(U[3],re.y)}U[0]<Bn&&U[1]<Bn&&U[2]>=0&&U[3]>=0&&P.insert(S,U[0],U[1],U[2],U[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new il.VectorTile(new q0(this.rawTileData)).layers,this.sourceLayerCoder=new i2(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,l,h,m){this.loadVTLayers();const v=n.params||{},b=Bn/n.tileSize/n.scale,S=dh(v.filter),P=n.queryGeometry,z=n.queryPadding*b,O=l2(P),U=this.grid.query(O.minX-z,O.minY-z,O.maxX+z,O.maxY+z),Z=l2(n.cameraQueryGeometry),re=this.grid3D.query(Z.minX-z,Z.minY-z,Z.maxX+z,Z.maxY+z,(ye,_e,Re,be)=>function(De,We,nt,Rt,Wt){for(const Tt of De)if(We<=Tt.x&&nt<=Tt.y&&Rt>=Tt.x&&Wt>=Tt.y)return!0;const At=[new E(We,nt),new E(We,Wt),new E(Rt,Wt),new E(Rt,nt)];if(De.length>2){for(const Tt of At)if(mu(De,Tt))return!0}for(let Tt=0;Tt<De.length-1;Tt++)if(dL(De[Tt],De[Tt+1],At))return!0;return!1}(n.cameraQueryGeometry,ye-z,_e-z,Re+z,be+z));for(const ye of re)U.push(ye);U.sort(M$);const oe={};let ue;for(let ye=0;ye<U.length;ye++){const _e=U[ye];if(_e===ue)continue;ue=_e;const Re=this.featureIndexArray.get(_e);let be=null;this.loadMatchingFeature(oe,Re.bucketIndex,Re.sourceLayerIndex,Re.featureIndex,S,v.layers,v.availableImages,l,h,m,(De,We,nt)=>(be||(be=ac(De)),We.queryIntersectsFeature(P,De,nt,be,this.z,n.transform,b,n.pixelPosMatrix)))}return oe}loadMatchingFeature(n,l,h,m,v,b,S,P,z,O,U){const Z=this.bucketLayerIDs[l];if(b&&!function(ye,_e){for(let Re=0;Re<ye.length;Re++)if(_e.indexOf(ye[Re])>=0)return!0;return!1}(b,Z))return;const re=this.sourceLayerCoder.decode(h),oe=this.vtLayers[re].feature(m);if(v.needGeometry){const ye=sc(oe,!0);if(!v.filter(new on(this.tileID.overscaledZ),ye,this.tileID.canonical))return}else if(!v.filter(new on(this.tileID.overscaledZ),oe))return;const ue=this.getId(oe,re);for(let ye=0;ye<Z.length;ye++){const _e=Z[ye];if(b&&b.indexOf(_e)<0)continue;const Re=P[_e];if(!Re)continue;let be={};ue&&O&&(be=O.getState(Re.sourceLayer||"_geojsonTileLayer",ue));const De=ae({},z[_e]);De.paint=s2(De.paint,Re.paint,oe,be,S),De.layout=s2(De.layout,Re.layout,oe,be,S);const We=!U||U(oe,Re,be);if(!We)continue;const nt=new o2(oe,this.z,this.x,this.y,ue);nt.layer=De;let Rt=n[_e];Rt===void 0&&(Rt=n[_e]=[]),Rt.push({featureIndex:m,feature:nt,intersectionZ:We})}}lookupSymbolFeatures(n,l,h,m,v,b,S,P){const z={};this.loadVTLayers();const O=dh(v);for(const U of n)this.loadMatchingFeature(z,h,m,U,O,b,S,P,l);return z}hasLayer(n){for(const l of this.bucketLayerIDs)for(const h of l)if(n===h)return!0;return!1}getId(n,l){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof h=="boolean"&&(h=Number(h))),h}}function s2(a,n,l,h,m){return xe(a,(v,b)=>{const S=n instanceof pu?n.get(b):null;return S&&S.evaluate?S.evaluate(l,h,m):S})}function l2(a){let n=1/0,l=1/0,h=-1/0,m=-1/0;for(const v of a)n=Math.min(n,v.x),l=Math.min(l,v.y),h=Math.max(h,v.x),m=Math.max(m,v.y);return{minX:n,minY:l,maxX:h,maxY:m}}function M$(a,n){return n-a}function c2(a,n,l,h,m){const v=[];for(let b=0;b<a.length;b++){const S=a[b];let P;for(let z=0;z<S.length-1;z++){let O=S[z],U=S[z+1];O.x<n&&U.x<n||(O.x<n?O=new E(n,O.y+(n-O.x)/(U.x-O.x)*(U.y-O.y))._round():U.x<n&&(U=new E(n,O.y+(n-O.x)/(U.x-O.x)*(U.y-O.y))._round()),O.y<l&&U.y<l||(O.y<l?O=new E(O.x+(l-O.y)/(U.y-O.y)*(U.x-O.x),l)._round():U.y<l&&(U=new E(O.x+(l-O.y)/(U.y-O.y)*(U.x-O.x),l)._round()),O.x>=h&&U.x>=h||(O.x>=h?O=new E(h,O.y+(h-O.x)/(U.x-O.x)*(U.y-O.y))._round():U.x>=h&&(U=new E(h,O.y+(h-O.x)/(U.x-O.x)*(U.y-O.y))._round()),O.y>=m&&U.y>=m||(O.y>=m?O=new E(O.x+(m-O.y)/(U.y-O.y)*(U.x-O.x),m)._round():U.y>=m&&(U=new E(O.x+(m-O.y)/(U.y-O.y)*(U.x-O.x),m)._round()),P&&O.equals(P[P.length-1])||(P=[O],v.push(P)),P.push(U)))))}}return v}$t("FeatureIndex",a2,{omit:["rawTileData","sourceLayerCoder"]});class ll extends E{constructor(n,l,h,m){super(n,l),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new ll(this.x,this.y,this.angle,this.segment)}}function u2(a,n,l,h,m){if(n.segment===void 0||l===0)return!0;let v=n,b=n.segment+1,S=0;for(;S>-l/2;){if(b--,b<0)return!1;S-=a[b].dist(v),v=a[b]}S+=a[b].dist(a[b+1]),b++;const P=[];let z=0;for(;S<l/2;){const O=a[b],U=a[b+1];if(!U)return!1;let Z=a[b-1].angleTo(O)-O.angleTo(U);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:S,angleDelta:Z}),z+=Z;S-P[0].distance>h;)z-=P.shift().angleDelta;if(z>m)return!1;b++,S+=O.dist(U)}return!0}function d2(a){let n=0;for(let l=0;l<a.length-1;l++)n+=a[l].dist(a[l+1]);return n}function h2(a,n,l){return a?.6*n*l:0}function p2(a,n){return Math.max(a?a.right-a.left:0,n?n.right-n.left:0)}function D$(a,n,l,h,m,v){const b=h2(l,m,v),S=p2(l,h)*v;let P=0;const z=d2(a)/2;for(let O=0;O<a.length-1;O++){const U=a[O],Z=a[O+1],re=U.dist(Z);if(P+re>z){const oe=(z-P)/re,ue=Qi.number(U.x,Z.x,oe),ye=Qi.number(U.y,Z.y,oe),_e=new ll(ue,ye,Z.angleTo(U),O);return _e._round(),!b||u2(a,_e,S,b,n)?_e:void 0}P+=re}}function L$(a,n,l,h,m,v,b,S,P){const z=h2(h,v,b),O=p2(h,m),U=O*b,Z=a[0].x===0||a[0].x===P||a[0].y===0||a[0].y===P;return n-U<n/4&&(n=U+n/4),f2(a,Z?n/2*S%n:(O/2+2*v)*b*S%n,n,z,l,U,Z,!1,P)}function f2(a,n,l,h,m,v,b,S,P){const z=v/2,O=d2(a);let U=0,Z=n-l,re=[];for(let oe=0;oe<a.length-1;oe++){const ue=a[oe],ye=a[oe+1],_e=ue.dist(ye),Re=ye.angleTo(ue);for(;Z+l<U+_e;){Z+=l;const be=(Z-U)/_e,De=Qi.number(ue.x,ye.x,be),We=Qi.number(ue.y,ye.y,be);if(De>=0&&De<P&&We>=0&&We<P&&Z-z>=0&&Z+z<=O){const nt=new ll(De,We,Re,oe);nt._round(),h&&!u2(a,nt,v,h,m)||re.push(nt)}}U+=_e}return S||re.length||b||(re=f2(a,U/2,l,h,m,v,b,!0,P)),re}$t("Anchor",ll);const Su=io;function m2(a,n,l,h){const m=[],v=a.image,b=v.pixelRatio,S=v.paddedRect.w-2*Su,P=v.paddedRect.h-2*Su,z=a.right-a.left,O=a.bottom-a.top,U=v.stretchX||[[0,S]],Z=v.stretchY||[[0,P]],re=(yt,Bt)=>yt+Bt[1]-Bt[0],oe=U.reduce(re,0),ue=Z.reduce(re,0),ye=S-oe,_e=P-ue;let Re=0,be=oe,De=0,We=ue,nt=0,Rt=ye,Wt=0,At=_e;if(v.content&&h){const yt=v.content;Re=Hm(U,0,yt[0]),De=Hm(Z,0,yt[1]),be=Hm(U,yt[0],yt[2]),We=Hm(Z,yt[1],yt[3]),nt=yt[0]-Re,Wt=yt[1]-De,Rt=yt[2]-yt[0]-be,At=yt[3]-yt[1]-We}const Tt=(yt,Bt,bt,dt)=>{const rr=Wm(yt.stretch-Re,be,z,a.left),Zt=Gm(yt.fixed-nt,Rt,yt.stretch,oe),pr=Wm(Bt.stretch-De,We,O,a.top),sn=Gm(Bt.fixed-Wt,At,Bt.stretch,ue),hn=Wm(bt.stretch-Re,be,z,a.left),Gn=Gm(bt.fixed-nt,Rt,bt.stretch,oe),_o=Wm(dt.stretch-De,We,O,a.top),ji=Gm(dt.fixed-Wt,At,dt.stretch,ue),Fn=new E(rr,pr),li=new E(hn,pr),fi=new E(hn,_o),Vi=new E(rr,_o),Ui=new E(Zt/b,sn/b),qn=new E(Gn/b,ji/b),Zn=n*Math.PI/180;if(Zn){const Ti=Math.sin(Zn),oo=Math.cos(Zn),ao=[oo,-Ti,Ti,oo];Fn._matMult(ao),li._matMult(ao),Vi._matMult(ao),fi._matMult(ao)}const Ii=yt.stretch+yt.fixed,Hi=Bt.stretch+Bt.fixed;return{tl:Fn,tr:li,bl:Vi,br:fi,tex:{x:v.paddedRect.x+Su+Ii,y:v.paddedRect.y+Su+Hi,w:bt.stretch+bt.fixed-Ii,h:dt.stretch+dt.fixed-Hi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ui,pixelOffsetBR:qn,minFontScaleX:Rt/b/z,minFontScaleY:At/b/O,isSDF:l}};if(h&&(v.stretchX||v.stretchY)){const yt=g2(U,ye,oe),Bt=g2(Z,_e,ue);for(let bt=0;bt<yt.length-1;bt++){const dt=yt[bt],rr=yt[bt+1];for(let Zt=0;Zt<Bt.length-1;Zt++)m.push(Tt(dt,Bt[Zt],rr,Bt[Zt+1]))}}else m.push(Tt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:P+1}));return m}function Hm(a,n,l){let h=0;for(const m of a)h+=Math.max(n,Math.min(l,m[1]))-Math.max(n,Math.min(l,m[0]));return h}function g2(a,n,l){const h=[{fixed:-Su,stretch:0}];for(const[m,v]of a){const b=h[h.length-1];h.push({fixed:m-b.stretch,stretch:b.stretch}),h.push({fixed:m-b.stretch,stretch:b.stretch+(v-m)})}return h.push({fixed:n+Su,stretch:l}),h}function Wm(a,n,l,h){return a/n*l+h}function Gm(a,n,l,h){return a-n*l/h}class qm{constructor(n,l,h,m,v,b,S,P,z,O){if(this.boxStartIndex=n.length,z){let U=b.top,Z=b.bottom;const re=b.collisionPadding;re&&(U-=re[1],Z+=re[3]);let oe=Z-U;oe>0&&(oe=Math.max(10,oe),this.circleDiameter=oe)}else{let U=b.top*S-P[0],Z=b.bottom*S+P[2],re=b.left*S-P[3],oe=b.right*S+P[1];const ue=b.collisionPadding;if(ue&&(re-=ue[0]*S,U-=ue[1]*S,oe+=ue[2]*S,Z+=ue[3]*S),O){const ye=new E(re,U),_e=new E(oe,U),Re=new E(re,Z),be=new E(oe,Z),De=O*Math.PI/180;ye._rotate(De),_e._rotate(De),Re._rotate(De),be._rotate(De),re=Math.min(ye.x,_e.x,Re.x,be.x),oe=Math.max(ye.x,_e.x,Re.x,be.x),U=Math.min(ye.y,_e.y,Re.y,be.y),Z=Math.max(ye.y,_e.y,Re.y,be.y)}n.emplaceBack(l.x,l.y,re,U,oe,Z,h,m,v)}this.boxEndIndex=n.length}}class $${constructor(n=[],l=O$){if(this.data=n,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:l,compare:h}=this,m=l[n];for(;n>0;){const v=n-1>>1,b=l[v];if(h(m,b)>=0)break;l[n]=b,n=v}l[n]=m}_down(n){const{data:l,compare:h}=this,m=this.length>>1,v=l[n];for(;n<m;){let b=1+(n<<1),S=l[b];const P=b+1;if(P<this.length&&h(l[P],S)<0&&(b=P,S=l[P]),h(S,v)>=0)break;l[n]=S,n=b}l[n]=v}}function O$(a,n){return a<n?-1:a>n?1:0}function B$(a,n=1,l=!1){let h=1/0,m=1/0,v=-1/0,b=-1/0;const S=a[0];for(let re=0;re<S.length;re++){const oe=S[re];(!re||oe.x<h)&&(h=oe.x),(!re||oe.y<m)&&(m=oe.y),(!re||oe.x>v)&&(v=oe.x),(!re||oe.y>b)&&(b=oe.y)}const P=Math.min(v-h,b-m);let z=P/2;const O=new $$([],F$);if(P===0)return new E(h,m);for(let re=h;re<v;re+=P)for(let oe=m;oe<b;oe+=P)O.push(new Cu(re+z,oe+z,z,a));let U=function(re){let oe=0,ue=0,ye=0;const _e=re[0];for(let Re=0,be=_e.length,De=be-1;Re<be;De=Re++){const We=_e[Re],nt=_e[De],Rt=We.x*nt.y-nt.x*We.y;ue+=(We.x+nt.x)*Rt,ye+=(We.y+nt.y)*Rt,oe+=3*Rt}return new Cu(ue/oe,ye/oe,0,re)}(a),Z=O.length;for(;O.length;){const re=O.pop();(re.d>U.d||!U.d)&&(U=re,l&&console.log("found best %d after %d probes",Math.round(1e4*re.d)/1e4,Z)),re.max-U.d<=n||(z=re.h/2,O.push(new Cu(re.p.x-z,re.p.y-z,z,a)),O.push(new Cu(re.p.x+z,re.p.y-z,z,a)),O.push(new Cu(re.p.x-z,re.p.y+z,z,a)),O.push(new Cu(re.p.x+z,re.p.y+z,z,a)),Z+=4)}return l&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${U.d}`)),U.p}function F$(a,n){return n.max-a.max}function Cu(a,n,l,h){this.p=new E(a,n),this.h=l,this.d=function(m,v){let b=!1,S=1/0;for(let P=0;P<v.length;P++){const z=v[P];for(let O=0,U=z.length,Z=U-1;O<U;Z=O++){const re=z[O],oe=z[Z];re.y>m.y!=oe.y>m.y&&m.x<(oe.x-re.x)*(m.y-re.y)/(oe.y-re.y)+re.x&&(b=!b),S=Math.min(S,YS(m,re,oe))}}return(b?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var pi;c.aq=void 0,(pi=c.aq||(c.aq={}))[pi.center=1]="center",pi[pi.left=2]="left",pi[pi.right=3]="right",pi[pi.top=4]="top",pi[pi.bottom=5]="bottom",pi[pi["top-left"]=6]="top-left",pi[pi["top-right"]=7]="top-right",pi[pi["bottom-left"]=8]="bottom-left",pi[pi["bottom-right"]=9]="bottom-right";const cl=7,a_=Number.POSITIVE_INFINITY;function y2(a,n){return n[1]!==a_?function(l,h,m){let v=0,b=0;switch(h=Math.abs(h),m=Math.abs(m),l){case"top-right":case"top-left":case"top":b=m-cl;break;case"bottom-right":case"bottom-left":case"bottom":b=-m+cl}switch(l){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,b]}(a,n[0],n[1]):function(l,h){let m=0,v=0;h<0&&(h=0);const b=h/Math.SQRT2;switch(l){case"top-right":case"top-left":v=b-cl;break;case"bottom-right":case"bottom-left":v=-b+cl;break;case"bottom":v=-h+cl;break;case"top":v=h-cl}switch(l){case"top-right":case"bottom-right":m=-b;break;case"top-left":case"bottom-left":m=b;break;case"left":m=h;break;case"right":m=-h}return[m,v]}(a,n[0])}function v2(a,n,l){var h;const m=a.layout,v=(h=m.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},l);if(v){const S=v.values,P=[];for(let z=0;z<S.length;z+=2){const O=P[z]=S[z],U=S[z+1].map(Z=>Z*Wn);O.startsWith("top")?U[1]-=cl:O.startsWith("bottom")&&(U[1]+=cl),P[z+1]=U}return new Qr(P)}const b=m.get("text-variable-anchor");if(b){let S;S=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(n,{},l)*Wn,a_]:m.get("text-offset").evaluate(n,{},l).map(z=>z*Wn);const P=[];for(const z of b)P.push(z,y2(z,S));return new Qr(P)}return null}function s_(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function N$(a,n,l,h,m,v,b,S,P,z,O){let U=v.textMaxSize.evaluate(n,{});U===void 0&&(U=b);const Z=a.layers[0].layout,re=Z.get("icon-offset").evaluate(n,{},O),oe=x2(l.horizontal),ue=b/24,ye=a.tilePixelRatio*ue,_e=a.tilePixelRatio*U/24,Re=a.tilePixelRatio*S,be=a.tilePixelRatio*Z.get("symbol-spacing"),De=Z.get("text-padding")*a.tilePixelRatio,We=function(dt,rr,Zt,pr=1){const sn=dt.get("icon-padding").evaluate(rr,{},Zt),hn=sn&&sn.values;return[hn[0]*pr,hn[1]*pr,hn[2]*pr,hn[3]*pr]}(Z,n,O,a.tilePixelRatio),nt=Z.get("text-max-angle")/180*Math.PI,Rt=Z.get("text-rotation-alignment")!=="viewport"&&Z.get("symbol-placement")!=="point",Wt=Z.get("icon-rotation-alignment")==="map"&&Z.get("symbol-placement")!=="point",At=Z.get("symbol-placement"),Tt=be/2,yt=Z.get("icon-text-fit");let Bt;h&&yt!=="none"&&(a.allowVerticalPlacement&&l.vertical&&(Bt=VC(h,l.vertical,yt,Z.get("icon-text-fit-padding"),re,ue)),oe&&(h=VC(h,oe,yt,Z.get("icon-text-fit-padding"),re,ue)));const bt=(dt,rr)=>{rr.x<0||rr.x>=Bn||rr.y<0||rr.y>=Bn||function(Zt,pr,sn,hn,Gn,_o,ji,Fn,li,fi,Vi,Ui,qn,Zn,Ii,Hi,Ti,oo,ao,Kn,Sr,Pi,mi,Xn,ta){const Sa=Zt.addToLineVertexArray(pr,sn);let Ca,Is,ra,Mo,so=0,Ts=0,Kh=0,C2=0,m_=-1,g_=-1;const Ps={};let I2=bs("");if(Zt.allowVerticalPlacement&&hn.vertical){const ki=Fn.layout.get("text-rotate").evaluate(Sr,{},Xn)+90;ra=new qm(li,pr,fi,Vi,Ui,hn.vertical,qn,Zn,Ii,ki),ji&&(Mo=new qm(li,pr,fi,Vi,Ui,ji,Ti,oo,Ii,ki))}if(Gn){const ki=Fn.layout.get("icon-rotate").evaluate(Sr,{}),Do=Fn.layout.get("icon-text-fit")!=="none",cc=m2(Gn,ki,mi,Do),Ta=ji?m2(ji,ki,mi,Do):void 0;Is=new qm(li,pr,fi,Vi,Ui,Gn,Ti,oo,!1,ki),so=4*cc.length;const uc=Zt.iconSizeData;let Ka=null;uc.kind==="source"?(Ka=[Za*Fn.layout.get("icon-size").evaluate(Sr,{})],Ka[0]>al&&Je(`${Zt.layerIds[0]}: Value for "icon-size" is >= ${Wh}. Reduce your "icon-size".`)):uc.kind==="composite"&&(Ka=[Za*Pi.compositeIconSizes[0].evaluate(Sr,{},Xn),Za*Pi.compositeIconSizes[1].evaluate(Sr,{},Xn)],(Ka[0]>al||Ka[1]>al)&&Je(`${Zt.layerIds[0]}: Value for "icon-size" is >= ${Wh}. Reduce your "icon-size".`)),Zt.addSymbols(Zt.icon,cc,Ka,Kn,ao,Sr,c.ai.none,pr,Sa.lineStartIndex,Sa.lineLength,-1,Xn),m_=Zt.icon.placedSymbolArray.length-1,Ta&&(Ts=4*Ta.length,Zt.addSymbols(Zt.icon,Ta,Ka,Kn,ao,Sr,c.ai.vertical,pr,Sa.lineStartIndex,Sa.lineLength,-1,Xn),g_=Zt.icon.placedSymbolArray.length-1)}const T2=Object.keys(hn.horizontal);for(const ki of T2){const Do=hn.horizontal[ki];if(!Ca){I2=bs(Do.text);const Ta=Fn.layout.get("text-rotate").evaluate(Sr,{},Xn);Ca=new qm(li,pr,fi,Vi,Ui,Do,qn,Zn,Ii,Ta)}const cc=Do.positionedLines.length===1;if(Kh+=_2(Zt,pr,Do,_o,Fn,Ii,Sr,Hi,Sa,hn.vertical?c.ai.horizontal:c.ai.horizontalOnly,cc?T2:[ki],Ps,m_,Pi,Xn),cc)break}hn.vertical&&(C2+=_2(Zt,pr,hn.vertical,_o,Fn,Ii,Sr,Hi,Sa,c.ai.vertical,["vertical"],Ps,g_,Pi,Xn));const U$=Ca?Ca.boxStartIndex:Zt.collisionBoxArray.length,H$=Ca?Ca.boxEndIndex:Zt.collisionBoxArray.length,W$=ra?ra.boxStartIndex:Zt.collisionBoxArray.length,G$=ra?ra.boxEndIndex:Zt.collisionBoxArray.length,q$=Is?Is.boxStartIndex:Zt.collisionBoxArray.length,Z$=Is?Is.boxEndIndex:Zt.collisionBoxArray.length,K$=Mo?Mo.boxStartIndex:Zt.collisionBoxArray.length,X$=Mo?Mo.boxEndIndex:Zt.collisionBoxArray.length;let Ia=-1;const Km=(ki,Do)=>ki&&ki.circleDiameter?Math.max(ki.circleDiameter,Do):Do;Ia=Km(Ca,Ia),Ia=Km(ra,Ia),Ia=Km(Is,Ia),Ia=Km(Mo,Ia);const P2=Ia>-1?1:0;P2&&(Ia*=ta/Wn),Zt.glyphOffsetArray.length>=wu.MAX_GLYPHS&&Je("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Sr.sortKey!==void 0&&Zt.addToSortKeyRanges(Zt.symbolInstances.length,Sr.sortKey);const J$=v2(Fn,Sr,Xn),[Y$,Q$]=function(ki,Do){const cc=ki.length,Ta=Do==null?void 0:Do.values;if((Ta==null?void 0:Ta.length)>0)for(let uc=0;uc<Ta.length;uc+=2){const Ka=Ta[uc+1];ki.emplaceBack(c.aq[Ta[uc]],Ka[0],Ka[1])}return[cc,ki.length]}(Zt.textAnchorOffsets,J$);Zt.symbolInstances.emplaceBack(pr.x,pr.y,Ps.right>=0?Ps.right:-1,Ps.center>=0?Ps.center:-1,Ps.left>=0?Ps.left:-1,Ps.vertical||-1,m_,g_,I2,U$,H$,W$,G$,q$,Z$,K$,X$,fi,Kh,C2,so,Ts,P2,0,qn,Ia,Y$,Q$)}(a,rr,dt,l,h,m,Bt,a.layers[0],a.collisionBoxArray,n.index,n.sourceLayerIndex,a.index,ye,[De,De,De,De],Rt,P,Re,We,Wt,re,n,v,z,O,b)};if(At==="line")for(const dt of c2(n.geometry,0,0,Bn,Bn)){const rr=L$(dt,be,nt,l.vertical||oe,h,24,_e,a.overscaling,Bn);for(const Zt of rr)oe&&j$(a,oe.text,Tt,Zt)||bt(dt,Zt)}else if(At==="line-center"){for(const dt of n.geometry)if(dt.length>1){const rr=D$(dt,nt,l.vertical||oe,h,24,_e);rr&&bt(dt,rr)}}else if(n.type==="Polygon")for(const dt of F0(n.geometry,0)){const rr=B$(dt,16);bt(dt[0],new ll(rr.x,rr.y,0))}else if(n.type==="LineString")for(const dt of n.geometry)bt(dt,new ll(dt[0].x,dt[0].y,0));else if(n.type==="Point")for(const dt of n.geometry)for(const rr of dt)bt([rr],new ll(rr.x,rr.y,0))}function _2(a,n,l,h,m,v,b,S,P,z,O,U,Z,re,oe){const ue=function(Re,be,De,We,nt,Rt,Wt,At){const Tt=We.layout.get("text-rotate").evaluate(Rt,{})*Math.PI/180,yt=[];for(const Bt of be.positionedLines)for(const bt of Bt.positionedGlyphs){if(!bt.rect)continue;const dt=bt.rect||{};let rr=LC+1,Zt=!0,pr=1,sn=0;const hn=(nt||At)&&bt.vertical,Gn=bt.metrics.advance*bt.scale/2;if(At&&be.verticalizable&&(sn=Bt.lineOffset/2-(bt.imageName?-(Wn-bt.metrics.width*bt.scale)/2:(bt.scale-1)*Wn)),bt.imageName){const Kn=Wt[bt.imageName];Zt=Kn.sdf,pr=Kn.pixelRatio,rr=io/pr}const _o=nt?[bt.x+Gn,bt.y]:[0,0];let ji=nt?[0,0]:[bt.x+Gn+De[0],bt.y+De[1]-sn],Fn=[0,0];hn&&(Fn=ji,ji=[0,0]);const li=bt.metrics.isDoubleResolution?2:1,fi=(bt.metrics.left-rr)*bt.scale-Gn+ji[0],Vi=(-bt.metrics.top-rr)*bt.scale+ji[1],Ui=fi+dt.w/li*bt.scale/pr,qn=Vi+dt.h/li*bt.scale/pr,Zn=new E(fi,Vi),Ii=new E(Ui,Vi),Hi=new E(fi,qn),Ti=new E(Ui,qn);if(hn){const Kn=new E(-Gn,Gn-Uh),Sr=-Math.PI/2,Pi=Wn/2-Gn,mi=new E(5-Uh-Pi,-(bt.imageName?Pi:0)),Xn=new E(...Fn);Zn._rotateAround(Sr,Kn)._add(mi)._add(Xn),Ii._rotateAround(Sr,Kn)._add(mi)._add(Xn),Hi._rotateAround(Sr,Kn)._add(mi)._add(Xn),Ti._rotateAround(Sr,Kn)._add(mi)._add(Xn)}if(Tt){const Kn=Math.sin(Tt),Sr=Math.cos(Tt),Pi=[Sr,-Kn,Kn,Sr];Zn._matMult(Pi),Ii._matMult(Pi),Hi._matMult(Pi),Ti._matMult(Pi)}const oo=new E(0,0),ao=new E(0,0);yt.push({tl:Zn,tr:Ii,bl:Hi,br:Ti,tex:dt,writingMode:be.writingMode,glyphOffset:_o,sectionIndex:bt.sectionIndex,isSDF:Zt,pixelOffsetTL:oo,pixelOffsetBR:ao,minFontScaleX:0,minFontScaleY:0})}return yt}(0,l,S,m,v,b,h,a.allowVerticalPlacement),ye=a.textSizeData;let _e=null;ye.kind==="source"?(_e=[Za*m.layout.get("text-size").evaluate(b,{})],_e[0]>al&&Je(`${a.layerIds[0]}: Value for "text-size" is >= ${Wh}. Reduce your "text-size".`)):ye.kind==="composite"&&(_e=[Za*re.compositeTextSizes[0].evaluate(b,{},oe),Za*re.compositeTextSizes[1].evaluate(b,{},oe)],(_e[0]>al||_e[1]>al)&&Je(`${a.layerIds[0]}: Value for "text-size" is >= ${Wh}. Reduce your "text-size".`)),a.addSymbols(a.text,ue,_e,S,v,b,z,n,P.lineStartIndex,P.lineLength,Z,oe);for(const Re of O)U[Re]=a.text.placedSymbolArray.length-1;return 4*ue.length}function x2(a){for(const n in a)return a[n];return null}function j$(a,n,l,h){const m=a.compareText;if(n in m){const v=m[n];for(let b=v.length-1;b>=0;b--)if(h.dist(v[b])<l)return!0}else m[n]=[];return m[n].push(h),!1}const b2=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class l_{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,h]=new Uint8Array(n,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=b2[15&h];if(!v)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(n,2,1),[S]=new Uint32Array(n,4,1);return new l_(S,b,v,n)}constructor(n,l=64,h=Float64Array,m){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=b2.indexOf(this.ArrayType),b=2*n*this.ArrayType.BYTES_PER_ELEMENT,S=n*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+P,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+b+S+P),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+P,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=n)}add(n,l){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=l,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return c_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,l,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:b,nodeSize:S}=this,P=[0,v.length-1,0],z=[];for(;P.length;){const O=P.pop()||0,U=P.pop()||0,Z=P.pop()||0;if(U-Z<=S){for(let ye=Z;ye<=U;ye++){const _e=b[2*ye],Re=b[2*ye+1];_e>=n&&_e<=h&&Re>=l&&Re<=m&&z.push(v[ye])}continue}const re=Z+U>>1,oe=b[2*re],ue=b[2*re+1];oe>=n&&oe<=h&&ue>=l&&ue<=m&&z.push(v[re]),(O===0?n<=oe:l<=ue)&&(P.push(Z),P.push(re-1),P.push(1-O)),(O===0?h>=oe:m>=ue)&&(P.push(re+1),P.push(U),P.push(1-O))}return z}within(n,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:b}=this,S=[0,m.length-1,0],P=[],z=h*h;for(;S.length;){const O=S.pop()||0,U=S.pop()||0,Z=S.pop()||0;if(U-Z<=b){for(let ye=Z;ye<=U;ye++)S2(v[2*ye],v[2*ye+1],n,l)<=z&&P.push(m[ye]);continue}const re=Z+U>>1,oe=v[2*re],ue=v[2*re+1];S2(oe,ue,n,l)<=z&&P.push(m[re]),(O===0?n-h<=oe:l-h<=ue)&&(S.push(Z),S.push(re-1),S.push(1-O)),(O===0?n+h>=oe:l+h>=ue)&&(S.push(re+1),S.push(U),S.push(1-O))}return P}}function c_(a,n,l,h,m,v){if(m-h<=l)return;const b=h+m>>1;w2(a,n,b,h,m,v),c_(a,n,l,h,b-1,1-v),c_(a,n,l,b+1,m,1-v)}function w2(a,n,l,h,m,v){for(;m>h;){if(m-h>600){const z=m-h+1,O=l-h+1,U=Math.log(z),Z=.5*Math.exp(2*U/3),re=.5*Math.sqrt(U*Z*(z-Z)/z)*(O-z/2<0?-1:1);w2(a,n,l,Math.max(h,Math.floor(l-O*Z/z+re)),Math.min(m,Math.floor(l+(z-O)*Z/z+re)),v)}const b=n[2*l+v];let S=h,P=m;for(qh(a,n,h,l),n[2*m+v]>b&&qh(a,n,h,m);S<P;){for(qh(a,n,S,P),S++,P--;n[2*S+v]<b;)S++;for(;n[2*P+v]>b;)P--}n[2*h+v]===b?qh(a,n,h,P):(P++,qh(a,n,P,m)),P<=l&&(h=P+1),l<=P&&(m=P-1)}}function qh(a,n,l,h){u_(a,l,h),u_(n,2*l,2*h),u_(n,2*l+1,2*h+1)}function u_(a,n,l){const h=a[n];a[n]=a[l],a[l]=h}function S2(a,n,l,h){const m=a-l,v=n-h;return m*m+v*v}var d_;c.bh=void 0,(d_=c.bh||(c.bh={})).create="create",d_.load="load",d_.fullLoad="fullLoad";let Zm=null,Zh=[];const h_=1e3/60,p_="loadTime",f_="fullLoadTime",V$={mark(a){performance.mark(a)},frame(a){const n=a;Zm!=null&&Zh.push(n-Zm),Zm=n},clearMetrics(){Zm=null,Zh=[],performance.clearMeasures(p_),performance.clearMeasures(f_);for(const a in c.bh)performance.clearMarks(c.bh[a])},getPerformanceMetrics(){performance.measure(p_,c.bh.create,c.bh.load),performance.measure(f_,c.bh.create,c.bh.fullLoad);const a=performance.getEntriesByName(p_)[0].duration,n=performance.getEntriesByName(f_)[0].duration,l=Zh.length,h=1/(Zh.reduce((v,b)=>v+b,0)/l/1e3),m=Zh.filter(v=>v>h_).reduce((v,b)=>v+(b-h_)/h_,0);return{loadTime:a,fullLoadTime:n,fps:h,percentDroppedFrames:m/(l+m)*100,totalFrames:l}}};c.$=function(a,n,l){var h,m,v,b,S,P,z,O,U,Z,re,oe,ue=l[0],ye=l[1],_e=l[2];return n===a?(a[12]=n[0]*ue+n[4]*ye+n[8]*_e+n[12],a[13]=n[1]*ue+n[5]*ye+n[9]*_e+n[13],a[14]=n[2]*ue+n[6]*ye+n[10]*_e+n[14],a[15]=n[3]*ue+n[7]*ye+n[11]*_e+n[15]):(m=n[1],v=n[2],b=n[3],S=n[4],P=n[5],z=n[6],O=n[7],U=n[8],Z=n[9],re=n[10],oe=n[11],a[0]=h=n[0],a[1]=m,a[2]=v,a[3]=b,a[4]=S,a[5]=P,a[6]=z,a[7]=O,a[8]=U,a[9]=Z,a[10]=re,a[11]=oe,a[12]=h*ue+S*ye+U*_e+n[12],a[13]=m*ue+P*ye+Z*_e+n[13],a[14]=v*ue+z*ye+re*_e+n[14],a[15]=b*ue+O*ye+oe*_e+n[15]),a},c.A=gu,c.B=Qi,c.C=class{constructor(a,n,l){this.receive=h=>{const m=h.data,v=m.id;if(v&&(!m.targetMapId||this.mapId===m.targetMapId))if(m.type==="<cancel>"){delete this.tasks[v];const b=this.cancelCallbacks[v];delete this.cancelCallbacks[v],b&&b()}else Le()||m.mustQueue?(this.tasks[v]=m,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,m)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),m=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),m&&this.processTask(h,m)},this.target=a,this.parent=n,this.mapId=l,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new R$(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Le()?a:window}send(a,n,l,h,m=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);l&&(this.callbacks[v]=l);const b=[],S={id:v,type:a,hasCallback:!!l,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:Wa(n,b)};return this.target.postMessage(S,{transfer:b}),{cancel:()=>{l&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(a,n){if(n.type==="<response>"){const l=this.callbacks[a];delete this.callbacks[a],l&&(n.error?l(el(n.error)):l(null,el(n.data)))}else{let l=!1;const h=[],m=n.hasCallback?(S,P)=>{l=!0,delete this.cancelCallbacks[a];const z={id:a,type:"<response>",sourceMapId:this.mapId,error:S?Wa(S):null,data:Wa(P,h)};this.target.postMessage(z,{transfer:h})}:S=>{l=!0};let v=null;const b=el(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,b,m);else if("getWorkerSource"in this.parent){const S=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,S[0],b.source)[S[1]](b,m)}else m(new Error(`Could not find function ${n.type}`));!l&&v&&v.cancel&&(this.cancelCallbacks[a]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.D=Xt,c.E=_r,c.F=function(a,n){const l={};for(let h=0;h<n.length;h++){const m=n[h];m in a&&(l[m]=a[m])}return l},c.G=JC,c.H=YC,c.I=K0,c.J=D,c.K=$,c.L=sl,c.M=st,c.N=Bn,c.O=Ro,c.P=E,c.Q=vn,c.R=zo,c.S=an,c.T=Sm,c.U=Um,c.V=class extends _s{},c.W=o_,c.X=function(a,n){const l=window.document.createElement("video");l.muted=!0,l.onloadstart=function(){n(null,l)};for(let h=0;h<a.length;h++){const m=window.document.createElement("source");Cr(a[h])||(l.crossOrigin="Anonymous"),m.src=a[h],l.appendChild(m)}return{cancel:()=>{}}},c.Y=Oe,c.Z=function(){var a=new gu(16);return gu!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},c._=x,c.a=Ve,c.a$=class extends ee{},c.a0=function(a,n,l){var h=l[0],m=l[1],v=l[2];return a[0]=n[0]*h,a[1]=n[1]*h,a[2]=n[2]*h,a[3]=n[3]*h,a[4]=n[4]*m,a[5]=n[5]*m,a[6]=n[6]*m,a[7]=n[7]*m,a[8]=n[8]*v,a[9]=n[9]*v,a[10]=n[10]*v,a[11]=n[11]*v,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},c.a1=rC,c.a2=function(){return we++},c.a3=me,c.a4=wu,c.a5=function(){ro.isLoading()||ro.isLoaded()||wh()!=="deferred"||wm()},c.a6=dh,c.a7=sc,c.a8=on,c.a9=o2,c.aA=tc,c.aB=function(a){a=a.slice();const n=Object.create(null);for(let l=0;l<a.length;l++)n[a[l].id]=a[l];for(let l=0;l<a.length;l++)"ref"in a[l]&&(a[l]=Er(a[l],n[a[l].ref]));return a},c.aC=function(a){if(a.type==="custom")return new z$(a);switch(a.type){case"background":return new k$(a);case"circle":return new fL(a);case"fill":return new ML(a);case"fill-extrusion":return new ZL(a);case"heatmap":return new gL(a);case"hillshade":return new vL(a);case"line":return new r$(a);case"raster":return new A$(a);case"symbol":return new Vm(a)}},c.aD=Ee,c.aE=function(a,n){if(!a)return[{command:Jt.setStyle,args:[n]}];let l=[];try{if(!Vt(a.version,n.version))return[{command:Jt.setStyle,args:[n]}];Vt(a.center,n.center)||l.push({command:Jt.setCenter,args:[n.center]}),Vt(a.zoom,n.zoom)||l.push({command:Jt.setZoom,args:[n.zoom]}),Vt(a.bearing,n.bearing)||l.push({command:Jt.setBearing,args:[n.bearing]}),Vt(a.pitch,n.pitch)||l.push({command:Jt.setPitch,args:[n.pitch]}),Vt(a.sprite,n.sprite)||l.push({command:Jt.setSprite,args:[n.sprite]}),Vt(a.glyphs,n.glyphs)||l.push({command:Jt.setGlyphs,args:[n.glyphs]}),Vt(a.transition,n.transition)||l.push({command:Jt.setTransition,args:[n.transition]}),Vt(a.light,n.light)||l.push({command:Jt.setLight,args:[n.light]});const h={},m=[];(function(b,S,P,z){let O;for(O in S=S||{},b=b||{})Object.prototype.hasOwnProperty.call(b,O)&&(Object.prototype.hasOwnProperty.call(S,O)||Br(O,P,z));for(O in S)Object.prototype.hasOwnProperty.call(S,O)&&(Object.prototype.hasOwnProperty.call(b,O)?Vt(b[O],S[O])||(b[O].type==="geojson"&&S[O].type==="geojson"&&nr(b,S,O)?P.push({command:Jt.setGeoJSONSourceData,args:[O,S[O].data]}):cr(O,S,P,z)):Ar(O,S,P))})(a.sources,n.sources,m,h);const v=[];a.layers&&a.layers.forEach(b=>{h[b.source]?l.push({command:Jt.removeLayer,args:[b.id]}):v.push(b)}),l=l.concat(m),function(b,S,P){S=S||[];const z=(b=b||[]).map(lr),O=S.map(lr),U=b.reduce(Wr,{}),Z=S.reduce(Wr,{}),re=z.slice(),oe=Object.create(null);let ue,ye,_e,Re,be,De,We;for(ue=0,ye=0;ue<z.length;ue++)_e=z[ue],Object.prototype.hasOwnProperty.call(Z,_e)?ye++:(P.push({command:Jt.removeLayer,args:[_e]}),re.splice(re.indexOf(_e,ye),1));for(ue=0,ye=0;ue<O.length;ue++)_e=O[O.length-1-ue],re[re.length-1-ue]!==_e&&(Object.prototype.hasOwnProperty.call(U,_e)?(P.push({command:Jt.removeLayer,args:[_e]}),re.splice(re.lastIndexOf(_e,re.length-ye),1)):ye++,De=re[re.length-ue],P.push({command:Jt.addLayer,args:[Z[_e],De]}),re.splice(re.length-ue,0,_e),oe[_e]=!0);for(ue=0;ue<O.length;ue++)if(_e=O[ue],Re=U[_e],be=Z[_e],!oe[_e]&&!Vt(Re,be))if(Vt(Re.source,be.source)&&Vt(Re["source-layer"],be["source-layer"])&&Vt(Re.type,be.type)){for(We in Kt(Re.layout,be.layout,P,_e,null,Jt.setLayoutProperty),Kt(Re.paint,be.paint,P,_e,null,Jt.setPaintProperty),Vt(Re.filter,be.filter)||P.push({command:Jt.setFilter,args:[_e,be.filter]}),Vt(Re.minzoom,be.minzoom)&&Vt(Re.maxzoom,be.maxzoom)||P.push({command:Jt.setLayerZoomRange,args:[_e,be.minzoom,be.maxzoom]}),Re)Object.prototype.hasOwnProperty.call(Re,We)&&We!=="layout"&&We!=="paint"&&We!=="filter"&&We!=="metadata"&&We!=="minzoom"&&We!=="maxzoom"&&(We.indexOf("paint.")===0?Kt(Re[We],be[We],P,_e,We.slice(6),Jt.setPaintProperty):Vt(Re[We],be[We])||P.push({command:Jt.setLayerProperty,args:[_e,We,be[We]]}));for(We in be)Object.prototype.hasOwnProperty.call(be,We)&&!Object.prototype.hasOwnProperty.call(Re,We)&&We!=="layout"&&We!=="paint"&&We!=="filter"&&We!=="metadata"&&We!=="minzoom"&&We!=="maxzoom"&&(We.indexOf("paint.")===0?Kt(Re[We],be[We],P,_e,We.slice(6),Jt.setPaintProperty):Vt(Re[We],be[We])||P.push({command:Jt.setLayerProperty,args:[_e,We,be[We]]}))}else P.push({command:Jt.removeLayer,args:[_e]}),De=re[re.lastIndexOf(_e)+1],P.push({command:Jt.addLayer,args:[be,De]})}(v,n.layers,l)}catch(h){console.warn("Unable to compute style diff:",h),l=[{command:Jt.setStyle,args:[n]}]}return l},c.aF=function(a){const n=[],l=a.id;return l===void 0&&n.push({message:`layers.${l}: missing required property "id"`}),a.render===void 0&&n.push({message:`layers.${l}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&n.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),n},c.aG=function a(n,l){if(Array.isArray(n)){if(!Array.isArray(l)||n.length!==l.length)return!1;for(let h=0;h<n.length;h++)if(!a(n[h],l[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&l!==null){if(typeof l!="object"||Object.keys(n).length!==Object.keys(l).length)return!1;for(const h in n)if(!a(n[h],l[h]))return!1;return!0}return n===l},c.aH=xe,c.aI=ke,c.aJ=rc,c.aK=function(a){return a({pluginStatus:Bi,pluginURL:Ga}),rc.on("pluginStateChange",a),a},c.aL=class extends ws{constructor(a,n){super(a,n),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},c.aM=fu,c.aN=class extends ws{constructor(a,n){super(a,n),this.current=P0}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let n=1;n<16;n++)if(a[n]!==this.current[n]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},c.aO=Pm,c.aP=class extends ws{constructor(a,n){super(a,n),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},c.aQ=class extends ws{constructor(a,n){super(a,n),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},c.aR=km,c.aS=function(a,n,l,h,m,v,b){var S=1/(n-l),P=1/(h-m),z=1/(v-b);return a[0]=-2*S,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*P,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*z,a[11]=0,a[12]=(n+l)*S,a[13]=(m+h)*P,a[14]=(b+v)*z,a[15]=1,a},c.aT=Ir,c.aU=pL,c.aV=class extends f{},c.aW=a$,c.aX=class extends _{},c.aY=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},c.aZ=sC,c.a_=pt,c.aa=function(a){const n={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,m,v)=>{const b=m||v;return n[h]=!b||b.toLowerCase(),""}),n["max-age"]){const l=parseInt(n["max-age"],10);isNaN(l)?delete n["max-age"]:n["max-age"]=l}return n},c.ab=function(a,n){const l=[];for(const h in a)h in n||l.push(h);return l},c.ac=function(a){if(Be==null){const n=a.navigator?a.navigator.userAgent:null;Be=!!a.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return Be},c.ad=K,c.ae=function(a,n,l){var h=Math.sin(l),m=Math.cos(l),v=n[0],b=n[1],S=n[2],P=n[3],z=n[4],O=n[5],U=n[6],Z=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=v*m+z*h,a[1]=b*m+O*h,a[2]=S*m+U*h,a[3]=P*m+Z*h,a[4]=z*m-v*h,a[5]=O*m-b*h,a[6]=U*m-S*h,a[7]=Z*m-P*h,a},c.af=function(a){var n=new gu(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},c.ag=Rm,c.ah=function(a,n){let l=0,h=0;if(a.kind==="constant")h=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:b}=a,S=m?K(eo.interpolationFactor(m,n,v,b),0,1):0;a.kind==="camera"?h=Qi.number(a.minSize,a.maxSize,S):l=S}return{uSizeT:l,uSize:h}},c.aj=function(a,{uSize:n,uSizeT:l},{lowerSize:h,upperSize:m}){return a.kind==="source"?h/Za:a.kind==="composite"?Qi.number(h/Za,m/Za,l):n},c.ak=Q0,c.al=function(a,n,l,h){const m=n.y-a.y,v=n.x-a.x,b=h.y-l.y,S=h.x-l.x,P=b*v-S*m;if(P===0)return null;const z=(S*(a.y-l.y)-b*(a.x-l.x))/P;return new E(a.x+z*v,a.y+z*m)},c.am=c2,c.an=XS,c.ao=R0,c.ap=Wn,c.ar=Y0,c.as=function(a,n){var l=n[0],h=n[1],m=n[2],v=n[3],b=n[4],S=n[5],P=n[6],z=n[7],O=n[8],U=n[9],Z=n[10],re=n[11],oe=n[12],ue=n[13],ye=n[14],_e=n[15],Re=l*S-h*b,be=l*P-m*b,De=l*z-v*b,We=h*P-m*S,nt=h*z-v*S,Rt=m*z-v*P,Wt=O*ue-U*oe,At=O*ye-Z*oe,Tt=O*_e-re*oe,yt=U*ye-Z*ue,Bt=U*_e-re*ue,bt=Z*_e-re*ye,dt=Re*bt-be*Bt+De*yt+We*Tt-nt*At+Rt*Wt;return dt?(a[0]=(S*bt-P*Bt+z*yt)*(dt=1/dt),a[1]=(m*Bt-h*bt-v*yt)*dt,a[2]=(ue*Rt-ye*nt+_e*We)*dt,a[3]=(Z*nt-U*Rt-re*We)*dt,a[4]=(P*Tt-b*bt-z*At)*dt,a[5]=(l*bt-m*Tt+v*At)*dt,a[6]=(ye*De-oe*Rt-_e*be)*dt,a[7]=(O*Rt-Z*De+re*be)*dt,a[8]=(b*Bt-S*Tt+z*Wt)*dt,a[9]=(h*Tt-l*Bt-v*Wt)*dt,a[10]=(oe*nt-ue*De+_e*Re)*dt,a[11]=(U*De-O*nt-re*Re)*dt,a[12]=(S*At-b*yt-P*Wt)*dt,a[13]=(l*yt-h*At+m*Wt)*dt,a[14]=(ue*be-oe*We-ye*Re)*dt,a[15]=(O*We-U*be+Z*Re)*dt,a):null},c.at=s_,c.au=J0,c.av=l_,c.aw=function(){const a={},n=Ue.$version;for(const l in Ue.$root){const h=Ue.$root[l];if(h.required){let m=null;m=l==="version"?n:h.type==="array"?[]:{},m!=null&&(a[l]=m)}}return a},c.ax=Jt,c.ay=vm,c.az=ft,c.b=function(a,n){const l=new Blob([new Uint8Array(a)],{type:"image/png"});createImageBitmap(l).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},c.b0=ai,c.b1=function(a,n){var l=a[0],h=a[1],m=a[2],v=a[3],b=a[4],S=a[5],P=a[6],z=a[7],O=a[8],U=a[9],Z=a[10],re=a[11],oe=a[12],ue=a[13],ye=a[14],_e=a[15],Re=n[0],be=n[1],De=n[2],We=n[3],nt=n[4],Rt=n[5],Wt=n[6],At=n[7],Tt=n[8],yt=n[9],Bt=n[10],bt=n[11],dt=n[12],rr=n[13],Zt=n[14],pr=n[15];return Math.abs(l-Re)<=Ni*Math.max(1,Math.abs(l),Math.abs(Re))&&Math.abs(h-be)<=Ni*Math.max(1,Math.abs(h),Math.abs(be))&&Math.abs(m-De)<=Ni*Math.max(1,Math.abs(m),Math.abs(De))&&Math.abs(v-We)<=Ni*Math.max(1,Math.abs(v),Math.abs(We))&&Math.abs(b-nt)<=Ni*Math.max(1,Math.abs(b),Math.abs(nt))&&Math.abs(S-Rt)<=Ni*Math.max(1,Math.abs(S),Math.abs(Rt))&&Math.abs(P-Wt)<=Ni*Math.max(1,Math.abs(P),Math.abs(Wt))&&Math.abs(z-At)<=Ni*Math.max(1,Math.abs(z),Math.abs(At))&&Math.abs(O-Tt)<=Ni*Math.max(1,Math.abs(O),Math.abs(Tt))&&Math.abs(U-yt)<=Ni*Math.max(1,Math.abs(U),Math.abs(yt))&&Math.abs(Z-Bt)<=Ni*Math.max(1,Math.abs(Z),Math.abs(Bt))&&Math.abs(re-bt)<=Ni*Math.max(1,Math.abs(re),Math.abs(bt))&&Math.abs(oe-dt)<=Ni*Math.max(1,Math.abs(oe),Math.abs(dt))&&Math.abs(ue-rr)<=Ni*Math.max(1,Math.abs(ue),Math.abs(rr))&&Math.abs(ye-Zt)<=Ni*Math.max(1,Math.abs(ye),Math.abs(Zt))&&Math.abs(_e-pr)<=Ni*Math.max(1,Math.abs(_e),Math.abs(pr))},c.b2=function(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},c.b3=function(a,n,l){return a[0]=n[0]*l[0],a[1]=n[1]*l[1],a[2]=n[2]*l[2],a[3]=n[3]*l[3],a},c.b4=function(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]},c.b5=se,c.b6=r2,c.b7=QC,c.b8=function(a,n,l,h,m){var v,b=1/Math.tan(n/2);return a[0]=b/l,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=b,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0?(a[10]=(m+h)*(v=1/(h-m)),a[14]=2*m*h*v):(a[10]=-1,a[14]=-2*h),a},c.b9=function(a,n,l){var h=Math.sin(l),m=Math.cos(l),v=n[4],b=n[5],S=n[6],P=n[7],z=n[8],O=n[9],U=n[10],Z=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=v*m+z*h,a[5]=b*m+O*h,a[6]=S*m+U*h,a[7]=P*m+Z*h,a[8]=z*m-v*h,a[9]=O*m-b*h,a[10]=U*m-S*h,a[11]=Z*m-P*h,a},c.bA=T,c.bB=kC,c.bC=nu,c.bD=ro,c.ba=ie,c.bb=J,c.bc=function(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},c.bd=class extends oc{},c.be=n_,c.bf=e2,c.bg=V$,c.bi=Ke,c.bj=function(a,n,l=!1){if(Bi===yh||Bi===vh||Bi===_h)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ga=tr.resolveURL(a),Bi=yh,xh=n,bh(),l||wm()},c.bk=wh,c.bl=function(a,n){const l={};for(let m=0;m<a.length;m++){const v=n&&n[a[m].id]||su(a[m]);n&&(n[a[m].id]=v);let b=l[v];b||(b=l[v]=[]),b.push(a[m])}const h=[];for(const m in l)h.push(l[m]);return h},c.bm=$t,c.bn=i2,c.bo=a2,c.bp=OC,c.bq=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=Bn/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const n=a.bucket.layers[0],l=n.layout,h=n._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new on(a.bucket.zoom+1),a.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new on(a.bucket.zoom+1),a.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new on(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:z,maxZoom:O}=a.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new on(z),a.canonical),h["text-size"].possiblyEvaluate(new on(O),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:z,maxZoom:O}=a.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new on(z),a.canonical),h["icon-size"].possiblyEvaluate(new on(O),a.canonical)]}const v=l.get("text-line-height")*Wn,b=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",S=l.get("text-keep-upright"),P=l.get("text-size");for(const z of a.bucket.features){const O=l.get("text-font").evaluate(z,{},a.canonical).join(","),U=P.evaluate(z,{},a.canonical),Z=m.layoutTextSize.evaluate(z,{},a.canonical),re=m.layoutIconSize.evaluate(z,{},a.canonical),oe={horizontal:{},vertical:void 0},ue=z.text;let ye,_e=[0,0];if(ue){const De=ue.toString(),We=l.get("text-letter-spacing").evaluate(z,{},a.canonical)*Wn,nt=mh(De)?We:0,Rt=l.get("text-anchor").evaluate(z,{},a.canonical),Wt=v2(n,z,a.canonical);if(!Wt){const bt=l.get("text-radial-offset").evaluate(z,{},a.canonical);_e=bt?y2(Rt,[bt*Wn,a_]):l.get("text-offset").evaluate(z,{},a.canonical).map(dt=>dt*Wn)}let At=b?"center":l.get("text-justify").evaluate(z,{},a.canonical);const Tt=l.get("symbol-placement"),yt=Tt==="point"?l.get("text-max-width").evaluate(z,{},a.canonical)*Wn:0,Bt=()=>{a.bucket.allowVerticalPlacement&&fh(De)&&(oe.vertical=Fm(ue,a.glyphMap,a.glyphPositions,a.imagePositions,O,yt,v,Rt,"left",nt,_e,c.ai.vertical,!0,Tt,Z,U))};if(!b&&Wt){const bt=new Set;if(At==="auto")for(let rr=0;rr<Wt.values.length;rr+=2)bt.add(s_(Wt.values[rr]));else bt.add(At);let dt=!1;for(const rr of bt)if(!oe.horizontal[rr])if(dt)oe.horizontal[rr]=oe.horizontal[0];else{const Zt=Fm(ue,a.glyphMap,a.glyphPositions,a.imagePositions,O,yt,v,"center",rr,nt,_e,c.ai.horizontal,!1,Tt,Z,U);Zt&&(oe.horizontal[rr]=Zt,dt=Zt.positionedLines.length===1)}Bt()}else{At==="auto"&&(At=s_(Rt));const bt=Fm(ue,a.glyphMap,a.glyphPositions,a.imagePositions,O,yt,v,Rt,At,nt,_e,c.ai.horizontal,!1,Tt,Z,U);bt&&(oe.horizontal[At]=bt),Bt(),fh(De)&&b&&S&&(oe.vertical=Fm(ue,a.glyphMap,a.glyphPositions,a.imagePositions,O,yt,v,Rt,At,nt,_e,c.ai.vertical,!1,Tt,Z,U))}}let Re=!1;if(z.icon&&z.icon.name){const De=a.imageMap[z.icon.name];De&&(ye=S$(a.imagePositions[z.icon.name],l.get("icon-offset").evaluate(z,{},a.canonical),l.get("icon-anchor").evaluate(z,{},a.canonical)),Re=!!De.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=Re:a.bucket.sdfIcons!==Re&&Je("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(De.pixelRatio!==a.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const be=x2(oe.horizontal)||oe.vertical;a.bucket.iconsInText=!!be&&be.iconsInText,(be||ye)&&N$(a.bucket,z,oe,ye,a.imageMap,m,Z,re,_e,Re,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},c.br=W0,c.bs=V0,c.bt=H0,c.bu=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},c.bv=q0,c.bw=il,c.bx=function(a,n,l,h,m){return x(this,void 0,void 0,function*(){if($())try{return yield st(a,n,l,h,m)}catch{}return function(v,b,S,P,z){const O=v.width,U=v.height;ct&&Mt||(ct=new OffscreenCanvas(O,U),Mt=ct.getContext("2d",{willReadFrequently:!0})),ct.width=O,ct.height=U,Mt.drawImage(v,0,0,O,U);const Z=Mt.getImageData(b,S,P,z);return Mt.clearRect(0,0,O,U),Z.data}(a,n,l,h,m)})},c.by=n2,c.bz=w,c.c=ht,c.d=function(a,n){const l=new Image;l.onload=()=>{n(null,l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=Qe})},l.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(a)],{type:"image/png"});l.src=a.byteLength?URL.createObjectURL(h):Qe},c.e=ae,c.f=function(a,n){return Gt(ae(a,{type:"json"}),n)},c.g=Ct,c.h=tr,c.i=Le,c.j=Ft,c.k=sr,c.l=vr,c.m=Gt,c.n=function(a){return new q0(a).readFields(y$,[])},c.o=function(a,n,l){if(!a.length)return l(null,[]);let h=a.length;const m=new Array(a.length);let v=null;a.forEach((b,S)=>{n(b,(P,z)=>{P&&(v=P),m[S]=z,--h==0&&l(v,m)})})},c.p=$C,c.q=Lh,c.r=Rn,c.s=Cr,c.t=S0,c.u=zt,c.v=Ue,c.w=Je,c.x=uu,c.y=xa,c.z=function([a,n,l]){return n+=90,n*=Math.PI/180,l*=Math.PI/180,{x:a*Math.cos(n)*Math.sin(l),y:a*Math.sin(n)*Math.sin(l),z:a*Math.cos(l)}}}),d(["./shared"],function(c){class x{constructor(H){this.keyCache={},H&&this.replace(H)}replace(H){this._layerConfigs={},this._layers={},this.update(H,[])}update(H,W){for(const fe of H){this._layerConfigs[fe.id]=fe;const ge=this._layers[fe.id]=c.aC(fe);ge._featureFilter=c.a6(ge.filter),this.keyCache[fe.id]&&delete this.keyCache[fe.id]}for(const fe of W)delete this.keyCache[fe],delete this._layerConfigs[fe],delete this._layers[fe];this.familiesBySource={};const ne=c.bl(Object.values(this._layerConfigs),this.keyCache);for(const fe of ne){const ge=fe.map(Me=>this._layers[Me.id]),X=ge[0];if(X.visibility==="none")continue;const Y=X.source||"";let Q=this.familiesBySource[Y];Q||(Q=this.familiesBySource[Y]={});const le=X.sourceLayer||"_geojsonTileLayer";let Pe=Q[le];Pe||(Pe=Q[le]=[]),Pe.push(ge)}}}class w{constructor(H){const W={},ne=[];for(const Y in H){const Q=H[Y],le=W[Y]={};for(const Pe in Q){const Me=Q[+Pe];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;const Fe={x:0,y:0,w:Me.bitmap.width+2,h:Me.bitmap.height+2};ne.push(Fe),le[Pe]={rect:Fe,metrics:Me.metrics}}}const{w:fe,h:ge}=c.p(ne),X=new c.q({width:fe||1,height:ge||1});for(const Y in H){const Q=H[Y];for(const le in Q){const Pe=Q[+le];if(!Pe||Pe.bitmap.width===0||Pe.bitmap.height===0)continue;const Me=W[Y][le].rect;c.q.copy(Pe.bitmap,X,{x:0,y:0},{x:Me.x+1,y:Me.y+1},Pe.bitmap)}}this.image=X,this.positions=W}}c.bm("GlyphAtlas",w);class T{constructor(H){this.tileID=new c.O(H.tileID.overscaledZ,H.tileID.wrap,H.tileID.canonical.z,H.tileID.canonical.x,H.tileID.canonical.y),this.uid=H.uid,this.zoom=H.zoom,this.pixelRatio=H.pixelRatio,this.tileSize=H.tileSize,this.source=H.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=H.showCollisionBoxes,this.collectResourceTiming=!!H.collectResourceTiming,this.returnDependencies=!!H.returnDependencies,this.promoteId=H.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(H,W,ne,fe,ge){this.status="parsing",this.data=H,this.collisionBoxArray=new c.a3;const X=new c.bn(Object.keys(H.layers).sort()),Y=new c.bo(this.tileID,this.promoteId);Y.bucketLayerIDs=[];const Q={},le={featureIndex:Y,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ne},Pe=W.familiesBySource[this.source];for(const ot in Pe){const lt=H.layers[ot];if(!lt)continue;lt.version===1&&c.w(`Vector tile source "${this.source}" layer "${ot}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Yt=X.encode(ot),ir=[];for(let br=0;br<lt.length;br++){const Hr=lt.feature(br),un=Y.getId(Hr,ot);ir.push({feature:Hr,id:un,index:br,sourceLayerIndex:Yt})}for(const br of Pe[ot]){const Hr=br[0];Hr.source!==this.source&&c.w(`layer.source = ${Hr.source} does not equal this.source = ${this.source}`),Hr.minzoom&&this.zoom<Math.floor(Hr.minzoom)||Hr.maxzoom&&this.zoom>=Hr.maxzoom||Hr.visibility!=="none"&&(k(br,this.zoom,ne),(Q[Hr.id]=Hr.createBucket({index:Y.bucketLayerIDs.length,layers:br,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Yt,sourceID:this.source})).populate(ir,le,this.tileID.canonical),Y.bucketLayerIDs.push(br.map(un=>un.id)))}}let Me,Fe,Ye,rt;const Xe=c.aH(le.glyphDependencies,ot=>Object.keys(ot).map(Number));this.inFlightDependencies.forEach(ot=>ot==null?void 0:ot.cancel()),this.inFlightDependencies=[];const et=++this.dependencySentinel;Object.keys(Xe).length?this.inFlightDependencies.push(fe.send("getGlyphs",{uid:this.uid,stacks:Xe,source:this.source,tileID:this.tileID,type:"glyphs"},(ot,lt)=>{et===this.dependencySentinel&&(Me||(Me=ot,Fe=lt,it.call(this)))})):Fe={};const Ie=Object.keys(le.iconDependencies);Ie.length?this.inFlightDependencies.push(fe.send("getImages",{icons:Ie,source:this.source,tileID:this.tileID,type:"icons"},(ot,lt)=>{et===this.dependencySentinel&&(Me||(Me=ot,Ye=lt,it.call(this)))})):Ye={};const Ae=Object.keys(le.patternDependencies);function it(){if(Me)return ge(Me);if(Fe&&Ye&&rt){const ot=new w(Fe),lt=new c.bp(Ye,rt);for(const Yt in Q){const ir=Q[Yt];ir instanceof c.a4?(k(ir.layers,this.zoom,ne),c.bq({bucket:ir,glyphMap:Fe,glyphPositions:ot.positions,imageMap:Ye,imagePositions:lt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):ir.hasPattern&&(ir instanceof c.br||ir instanceof c.bs||ir instanceof c.bt)&&(k(ir.layers,this.zoom,ne),ir.addFeatures(le,this.tileID.canonical,lt.patternPositions))}this.status="done",ge(null,{buckets:Object.values(Q).filter(Yt=>!Yt.isEmpty()),featureIndex:Y,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ot.image,imageAtlas:lt,glyphMap:this.returnDependencies?Fe:null,iconMap:this.returnDependencies?Ye:null,glyphPositions:this.returnDependencies?ot.positions:null})}}Ae.length?this.inFlightDependencies.push(fe.send("getImages",{icons:Ae,source:this.source,tileID:this.tileID,type:"patterns"},(ot,lt)=>{et===this.dependencySentinel&&(Me||(Me=ot,rt=lt,it.call(this)))})):rt={},it.call(this)}}function k(pe,H,W){const ne=new c.a8(H);for(const fe of pe)fe.recalculate(ne,W)}function E(pe,H){const W=c.l(pe.request,(ne,fe,ge,X)=>{if(ne)H(ne);else if(fe)try{const Y=new c.bw.VectorTile(new c.bv(fe));H(null,{vectorTile:Y,rawData:fe,cacheControl:ge,expires:X})}catch(Y){const Q=new Uint8Array(fe);let le=`Unable to parse the tile at ${pe.request.url}, `;le+=Q[0]===31&&Q[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Y.messge}`,H(new Error(le))}});return()=>{W.cancel(),H()}}class M{constructor(H,W,ne,fe){this.actor=H,this.layerIndex=W,this.availableImages=ne,this.loadVectorData=fe||E,this.fetching={},this.loading={},this.loaded={}}loadTile(H,W){const ne=H.uid;this.loading||(this.loading={});const fe=!!(H&&H.request&&H.request.collectResourceTiming)&&new c.bu(H.request),ge=this.loading[ne]=new T(H);ge.abort=this.loadVectorData(H,(X,Y)=>{if(delete this.loading[ne],X||!Y)return ge.status="done",this.loaded[ne]=ge,W(X);const Q=Y.rawData,le={};Y.expires&&(le.expires=Y.expires),Y.cacheControl&&(le.cacheControl=Y.cacheControl);const Pe={};if(fe){const Me=fe.finish();Me&&(Pe.resourceTiming=JSON.parse(JSON.stringify(Me)))}ge.vectorTile=Y.vectorTile,ge.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor,(Me,Fe)=>{if(delete this.fetching[ne],Me||!Fe)return W(Me);W(null,c.e({rawTileData:Q.slice(0)},Fe,le,Pe))}),this.loaded=this.loaded||{},this.loaded[ne]=ge,this.fetching[ne]={rawTileData:Q,cacheControl:le,resourceTiming:Pe}})}reloadTile(H,W){const ne=this.loaded,fe=H.uid;if(ne&&ne[fe]){const ge=ne[fe];ge.showCollisionBoxes=H.showCollisionBoxes,ge.status==="parsing"?ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,(X,Y)=>{if(X||!Y)return W(X,Y);let Q;if(this.fetching[fe]){const{rawTileData:le,cacheControl:Pe,resourceTiming:Me}=this.fetching[fe];delete this.fetching[fe],Q=c.e({rawTileData:le.slice(0)},Y,Pe,Me)}else Q=Y;W(null,Q)}):ge.status==="done"&&(ge.vectorTile?ge.parse(ge.vectorTile,this.layerIndex,this.availableImages,this.actor,W):W())}}abortTile(H,W){const ne=this.loading,fe=H.uid;ne&&ne[fe]&&ne[fe].abort&&(ne[fe].abort(),delete ne[fe]),W()}removeTile(H,W){const ne=this.loaded,fe=H.uid;ne&&ne[fe]&&delete ne[fe],W()}}class N{constructor(){this.loaded={}}loadTile(H,W){return c._(this,void 0,void 0,function*(){const{uid:ne,encoding:fe,rawImageData:ge,redFactor:X,greenFactor:Y,blueFactor:Q,baseShift:le}=H,Pe=ge.width+2,Me=ge.height+2,Fe=c.a(ge)?new c.R({width:Pe,height:Me},yield c.bx(ge,-1,-1,Pe,Me)):ge,Ye=new c.by(ne,Fe,fe,X,Y,Q,le);this.loaded=this.loaded||{},this.loaded[ne]=Ye,W(null,Ye)})}removeTile(H){const W=this.loaded,ne=H.uid;W&&W[ne]&&delete W[ne]}}function j(pe,H){if(pe.length!==0){q(pe[0],H);for(var W=1;W<pe.length;W++)q(pe[W],!H)}}function q(pe,H){for(var W=0,ne=0,fe=0,ge=pe.length,X=ge-1;fe<ge;X=fe++){var Y=(pe[fe][0]-pe[X][0])*(pe[X][1]+pe[fe][1]),Q=W+Y;ne+=Math.abs(W)>=Math.abs(Y)?W-Q+Y:Y-Q+W,W=Q}W+ne>=0!=!!H&&pe.reverse()}var B=c.bz(function pe(H,W){var ne,fe=H&&H.type;if(fe==="FeatureCollection")for(ne=0;ne<H.features.length;ne++)pe(H.features[ne],W);else if(fe==="GeometryCollection")for(ne=0;ne<H.geometries.length;ne++)pe(H.geometries[ne],W);else if(fe==="Feature")pe(H.geometry,W);else if(fe==="Polygon")j(H.coordinates,W);else if(fe==="MultiPolygon")for(ne=0;ne<H.coordinates.length;ne++)j(H.coordinates[ne],W);return H});const D=c.bw.VectorTileFeature.prototype.toGeoJSON;var $={exports:{}},ie=c.bA,J=c.bw.VectorTileFeature,K=se;function se(pe,H){this.options=H||{},this.features=pe,this.length=pe.length}function ae(pe,H){this.id=typeof pe.id=="number"?pe.id:void 0,this.type=pe.type,this.rawGeometry=pe.type===1?[pe.geometry]:pe.geometry,this.properties=pe.tags,this.extent=H||4096}se.prototype.feature=function(pe){return new ae(this.features[pe],this.options.extent)},ae.prototype.loadGeometry=function(){var pe=this.rawGeometry;this.geometry=[];for(var H=0;H<pe.length;H++){for(var W=pe[H],ne=[],fe=0;fe<W.length;fe++)ne.push(new ie(W[fe][0],W[fe][1]));this.geometry.push(ne)}return this.geometry},ae.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var pe=this.geometry,H=1/0,W=-1/0,ne=1/0,fe=-1/0,ge=0;ge<pe.length;ge++)for(var X=pe[ge],Y=0;Y<X.length;Y++){var Q=X[Y];H=Math.min(H,Q.x),W=Math.max(W,Q.x),ne=Math.min(ne,Q.y),fe=Math.max(fe,Q.y)}return[H,ne,W,fe]},ae.prototype.toGeoJSON=J.prototype.toGeoJSON;var we=c.bB,xe=K;function ke(pe){var H=new we;return function(W,ne){for(var fe in W.layers)ne.writeMessage(3,Ee,W.layers[fe])}(pe,H),H.finish()}function Ee(pe,H){var W;H.writeVarintField(15,pe.version||1),H.writeStringField(1,pe.name||""),H.writeVarintField(5,pe.extent||4096);var ne={keys:[],values:[],keycache:{},valuecache:{}};for(W=0;W<pe.length;W++)ne.feature=pe.feature(W),H.writeMessage(2,$e,ne);var fe=ne.keys;for(W=0;W<fe.length;W++)H.writeStringField(3,fe[W]);var ge=ne.values;for(W=0;W<ge.length;W++)H.writeMessage(4,Be,ge[W])}function $e(pe,H){var W=pe.feature;W.id!==void 0&&H.writeVarintField(1,W.id),H.writeMessage(2,Je,pe),H.writeVarintField(3,W.type),H.writeMessage(4,Le,W)}function Je(pe,H){var W=pe.feature,ne=pe.keys,fe=pe.values,ge=pe.keycache,X=pe.valuecache;for(var Y in W.properties){var Q=W.properties[Y],le=ge[Y];if(Q!==null){le===void 0&&(ne.push(Y),ge[Y]=le=ne.length-1),H.writeVarint(le);var Pe=typeof Q;Pe!=="string"&&Pe!=="boolean"&&Pe!=="number"&&(Q=JSON.stringify(Q));var Me=Pe+":"+Q,Fe=X[Me];Fe===void 0&&(fe.push(Q),X[Me]=Fe=fe.length-1),H.writeVarint(Fe)}}}function je(pe,H){return(H<<3)+(7&pe)}function Se(pe){return pe<<1^pe>>31}function Le(pe,H){for(var W=pe.loadGeometry(),ne=pe.type,fe=0,ge=0,X=W.length,Y=0;Y<X;Y++){var Q=W[Y],le=1;ne===1&&(le=Q.length),H.writeVarint(je(1,le));for(var Pe=ne===3?Q.length-1:Q.length,Me=0;Me<Pe;Me++){Me===1&&ne!==1&&H.writeVarint(je(2,Pe-1));var Fe=Q[Me].x-fe,Ye=Q[Me].y-ge;H.writeVarint(Se(Fe)),H.writeVarint(Se(Ye)),fe+=Fe,ge+=Ye}ne===3&&H.writeVarint(je(7,1))}}function Be(pe,H){var W=typeof pe;W==="string"?H.writeStringField(1,pe):W==="boolean"?H.writeBooleanField(7,pe):W==="number"&&(pe%1!=0?H.writeDoubleField(3,pe):pe<0?H.writeSVarintField(6,pe):H.writeVarintField(5,pe))}$.exports=ke,$.exports.fromVectorTileJs=ke,$.exports.fromGeojsonVt=function(pe,H){H=H||{};var W={};for(var ne in pe)W[ne]=new xe(pe[ne].features,H),W[ne].name=ne,W[ne].version=H.version,W[ne].extent=H.extent;return ke({layers:W})},$.exports.GeoJSONWrapper=xe;var Ve=c.bz($.exports);const Qe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:pe=>pe},st=Math.fround||(ct=new Float32Array(1),pe=>(ct[0]=+pe,ct[0]));var ct;const Mt=3,vt=5,Dt=6;class tr{constructor(H){this.options=Object.assign(Object.create(Qe),H),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(H){const{log:W,minZoom:ne,maxZoom:fe}=this.options;W&&console.time("total time");const ge=`prepare ${H.length} points`;W&&console.time(ge),this.points=H;const X=[];for(let Q=0;Q<H.length;Q++){const le=H[Q];if(!le.geometry)continue;const[Pe,Me]=le.geometry.coordinates,Fe=st(ft(Pe)),Ye=st(Ct(Me));X.push(Fe,Ye,1/0,Q,-1,1),this.options.reduce&&X.push(0)}let Y=this.trees[fe+1]=this._createTree(X);W&&console.timeEnd(ge);for(let Q=fe;Q>=ne;Q--){const le=+Date.now();Y=this.trees[Q]=this._createTree(this._cluster(Y,Q)),W&&console.log("z%d: %d clusters in %dms",Q,Y.numItems,+Date.now()-le)}return W&&console.timeEnd("total time"),this}getClusters(H,W){let ne=((H[0]+180)%360+360)%360-180;const fe=Math.max(-90,Math.min(90,H[1]));let ge=H[2]===180?180:((H[2]+180)%360+360)%360-180;const X=Math.max(-90,Math.min(90,H[3]));if(H[2]-H[0]>=360)ne=-180,ge=180;else if(ne>ge){const Me=this.getClusters([ne,fe,180,X],W),Fe=this.getClusters([-180,fe,ge,X],W);return Me.concat(Fe)}const Y=this.trees[this._limitZoom(W)],Q=Y.range(ft(ne),Ct(X),ft(ge),Ct(fe)),le=Y.data,Pe=[];for(const Me of Q){const Fe=this.stride*Me;Pe.push(le[Fe+vt]>1?ht(le,Fe,this.clusterProps):this.points[le[Fe+Mt]])}return Pe}getChildren(H){const W=this._getOriginId(H),ne=this._getOriginZoom(H),fe="No cluster with the specified id.",ge=this.trees[ne];if(!ge)throw new Error(fe);const X=ge.data;if(W*this.stride>=X.length)throw new Error(fe);const Y=this.options.radius/(this.options.extent*Math.pow(2,ne-1)),Q=ge.within(X[W*this.stride],X[W*this.stride+1],Y),le=[];for(const Pe of Q){const Me=Pe*this.stride;X[Me+4]===H&&le.push(X[Me+vt]>1?ht(X,Me,this.clusterProps):this.points[X[Me+Mt]])}if(le.length===0)throw new Error(fe);return le}getLeaves(H,W,ne){const fe=[];return this._appendLeaves(fe,H,W=W||10,ne=ne||0,0),fe}getTile(H,W,ne){const fe=this.trees[this._limitZoom(H)],ge=Math.pow(2,H),{extent:X,radius:Y}=this.options,Q=Y/X,le=(ne-Q)/ge,Pe=(ne+1+Q)/ge,Me={features:[]};return this._addTileFeatures(fe.range((W-Q)/ge,le,(W+1+Q)/ge,Pe),fe.data,W,ne,ge,Me),W===0&&this._addTileFeatures(fe.range(1-Q/ge,le,1,Pe),fe.data,ge,ne,ge,Me),W===ge-1&&this._addTileFeatures(fe.range(0,le,Q/ge,Pe),fe.data,-1,ne,ge,Me),Me.features.length?Me:null}getClusterExpansionZoom(H){let W=this._getOriginZoom(H)-1;for(;W<=this.options.maxZoom;){const ne=this.getChildren(H);if(W++,ne.length!==1)break;H=ne[0].properties.cluster_id}return W}_appendLeaves(H,W,ne,fe,ge){const X=this.getChildren(W);for(const Y of X){const Q=Y.properties;if(Q&&Q.cluster?ge+Q.point_count<=fe?ge+=Q.point_count:ge=this._appendLeaves(H,Q.cluster_id,ne,fe,ge):ge<fe?ge++:H.push(Y),H.length===ne)break}return ge}_createTree(H){const W=new c.av(H.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ne=0;ne<H.length;ne+=this.stride)W.add(H[ne],H[ne+1]);return W.finish(),W.data=H,W}_addTileFeatures(H,W,ne,fe,ge,X){for(const Y of H){const Q=Y*this.stride,le=W[Q+vt]>1;let Pe,Me,Fe;if(le)Pe=Ke(W,Q,this.clusterProps),Me=W[Q],Fe=W[Q+1];else{const Xe=this.points[W[Q+Mt]];Pe=Xe.properties;const[et,Ie]=Xe.geometry.coordinates;Me=ft(et),Fe=Ct(Ie)}const Ye={type:1,geometry:[[Math.round(this.options.extent*(Me*ge-ne)),Math.round(this.options.extent*(Fe*ge-fe))]],tags:Pe};let rt;rt=le||this.options.generateId?W[Q+Mt]:this.points[W[Q+Mt]].id,rt!==void 0&&(Ye.id=rt),X.features.push(Ye)}}_limitZoom(H){return Math.max(this.options.minZoom,Math.min(Math.floor(+H),this.options.maxZoom+1))}_cluster(H,W){const{radius:ne,extent:fe,reduce:ge,minPoints:X}=this.options,Y=ne/(fe*Math.pow(2,W)),Q=H.data,le=[],Pe=this.stride;for(let Me=0;Me<Q.length;Me+=Pe){if(Q[Me+2]<=W)continue;Q[Me+2]=W;const Fe=Q[Me],Ye=Q[Me+1],rt=H.within(Q[Me],Q[Me+1],Y),Xe=Q[Me+vt];let et=Xe;for(const Ie of rt){const Ae=Ie*Pe;Q[Ae+2]>W&&(et+=Q[Ae+vt])}if(et>Xe&&et>=X){let Ie,Ae=Fe*Xe,it=Ye*Xe,ot=-1;const lt=((Me/Pe|0)<<5)+(W+1)+this.points.length;for(const Yt of rt){const ir=Yt*Pe;if(Q[ir+2]<=W)continue;Q[ir+2]=W;const br=Q[ir+vt];Ae+=Q[ir]*br,it+=Q[ir+1]*br,Q[ir+4]=lt,ge&&(Ie||(Ie=this._map(Q,Me,!0),ot=this.clusterProps.length,this.clusterProps.push(Ie)),ge(Ie,this._map(Q,ir)))}Q[Me+4]=lt,le.push(Ae/et,it/et,1/0,lt,-1,et),ge&&le.push(ot)}else{for(let Ie=0;Ie<Pe;Ie++)le.push(Q[Me+Ie]);if(et>1)for(const Ie of rt){const Ae=Ie*Pe;if(!(Q[Ae+2]<=W)){Q[Ae+2]=W;for(let it=0;it<Pe;it++)le.push(Q[Ae+it])}}}}return le}_getOriginId(H){return H-this.points.length>>5}_getOriginZoom(H){return(H-this.points.length)%32}_map(H,W,ne){if(H[W+vt]>1){const X=this.clusterProps[H[W+Dt]];return ne?Object.assign({},X):X}const fe=this.points[H[W+Mt]].properties,ge=this.options.map(fe);return ne&&ge===fe?Object.assign({},ge):ge}}function ht(pe,H,W){return{type:"Feature",id:pe[H+Mt],properties:Ke(pe,H,W),geometry:{type:"Point",coordinates:[(ne=pe[H],360*(ne-.5)),jt(pe[H+1])]}};var ne}function Ke(pe,H,W){const ne=pe[H+vt],fe=ne>=1e4?`${Math.round(ne/1e3)}k`:ne>=1e3?Math.round(ne/100)/10+"k":ne,ge=pe[H+Dt],X=ge===-1?{}:Object.assign({},W[ge]);return Object.assign(X,{cluster:!0,cluster_id:pe[H+Mt],point_count:ne,point_count_abbreviated:fe})}function ft(pe){return pe/360+.5}function Ct(pe){const H=Math.sin(pe*Math.PI/180),W=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return W<0?0:W>1?1:W}function jt(pe){const H=(180-360*pe)*Math.PI/180;return 360*Math.atan(Math.exp(H))/Math.PI-90}function Gt(pe,H,W,ne){for(var fe,ge=ne,X=W-H>>1,Y=W-H,Q=pe[H],le=pe[H+1],Pe=pe[W],Me=pe[W+1],Fe=H+3;Fe<W;Fe+=3){var Ye=vr(pe[Fe],pe[Fe+1],Q,le,Pe,Me);if(Ye>ge)fe=Fe,ge=Ye;else if(Ye===ge){var rt=Math.abs(Fe-X);rt<Y&&(fe=Fe,Y=rt)}}ge>ne&&(fe-H>3&&Gt(pe,H,fe,ne),pe[fe+2]=ge,W-fe>3&&Gt(pe,fe,W,ne))}function vr(pe,H,W,ne,fe,ge){var X=fe-W,Y=ge-ne;if(X!==0||Y!==0){var Q=((pe-W)*X+(H-ne)*Y)/(X*X+Y*Y);Q>1?(W=fe,ne=ge):Q>0&&(W+=X*Q,ne+=Y*Q)}return(X=pe-W)*X+(Y=H-ne)*Y}function Cr(pe,H,W,ne){var fe={id:pe===void 0?null:pe,type:H,geometry:W,tags:ne,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ge){var X=ge.geometry,Y=ge.type;if(Y==="Point"||Y==="MultiPoint"||Y==="LineString")Ut(ge,X);else if(Y==="Polygon"||Y==="MultiLineString")for(var Q=0;Q<X.length;Q++)Ut(ge,X[Q]);else if(Y==="MultiPolygon")for(Q=0;Q<X.length;Q++)for(var le=0;le<X[Q].length;le++)Ut(ge,X[Q][le])}(fe),fe}function Ut(pe,H){for(var W=0;W<H.length;W+=3)pe.minX=Math.min(pe.minX,H[W]),pe.minY=Math.min(pe.minY,H[W+1]),pe.maxX=Math.max(pe.maxX,H[W]),pe.maxY=Math.max(pe.maxY,H[W+1])}function Pt(pe,H,W,ne){if(H.geometry){var fe=H.geometry.coordinates,ge=H.geometry.type,X=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2),Y=[],Q=H.id;if(W.promoteId?Q=H.properties[W.promoteId]:W.generateId&&(Q=ne||0),ge==="Point")sr(fe,Y);else if(ge==="MultiPoint")for(var le=0;le<fe.length;le++)sr(fe[le],Y);else if(ge==="LineString")Ft(fe,Y,X,!1);else if(ge==="MultiLineString"){if(W.lineMetrics){for(le=0;le<fe.length;le++)Ft(fe[le],Y=[],X,!1),pe.push(Cr(Q,"LineString",Y,H.properties));return}_r(fe,Y,X,!1)}else if(ge==="Polygon")_r(fe,Y,X,!0);else{if(ge!=="MultiPolygon"){if(ge==="GeometryCollection"){for(le=0;le<H.geometry.geometries.length;le++)Pt(pe,{id:Q,geometry:H.geometry.geometries[le],properties:H.properties},W,ne);return}throw new Error("Input data is not a valid GeoJSON object.")}for(le=0;le<fe.length;le++){var Pe=[];_r(fe[le],Pe,X,!0),Y.push(Pe)}}pe.push(Cr(Q,ge,Y,H.properties))}}function sr(pe,H){H.push(Ue(pe[0])),H.push(xr(pe[1])),H.push(0)}function Ft(pe,H,W,ne){for(var fe,ge,X=0,Y=0;Y<pe.length;Y++){var Q=Ue(pe[Y][0]),le=xr(pe[Y][1]);H.push(Q),H.push(le),H.push(0),Y>0&&(X+=ne?(fe*le-Q*ge)/2:Math.sqrt(Math.pow(Q-fe,2)+Math.pow(le-ge,2))),fe=Q,ge=le}var Pe=H.length-3;H[2]=1,Gt(H,0,Pe,W),H[Pe+2]=1,H.size=Math.abs(X),H.start=0,H.end=H.size}function _r(pe,H,W,ne){for(var fe=0;fe<pe.length;fe++){var ge=[];Ft(pe[fe],ge,W,ne),H.push(ge)}}function Ue(pe){return pe/360+.5}function xr(pe){var H=Math.sin(pe*Math.PI/180),W=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return W<0?0:W>1?1:W}function Er(pe,H,W,ne,fe,ge,X,Y){if(ne/=H,ge>=(W/=H)&&X<ne)return pe;if(X<W||ge>=ne)return null;for(var Q=[],le=0;le<pe.length;le++){var Pe=pe[le],Me=Pe.geometry,Fe=Pe.type,Ye=fe===0?Pe.minX:Pe.minY,rt=fe===0?Pe.maxX:Pe.maxY;if(Ye>=W&&rt<ne)Q.push(Pe);else if(!(rt<W||Ye>=ne)){var Xe=[];if(Fe==="Point"||Fe==="MultiPoint")Vt(Me,Xe,W,ne,fe);else if(Fe==="LineString")Jt(Me,Xe,W,ne,fe,!1,Y.lineMetrics);else if(Fe==="MultiLineString")Br(Me,Xe,W,ne,fe,!1);else if(Fe==="Polygon")Br(Me,Xe,W,ne,fe,!0);else if(Fe==="MultiPolygon")for(var et=0;et<Me.length;et++){var Ie=[];Br(Me[et],Ie,W,ne,fe,!0),Ie.length&&Xe.push(Ie)}if(Xe.length){if(Y.lineMetrics&&Fe==="LineString"){for(et=0;et<Xe.length;et++)Q.push(Cr(Pe.id,Fe,Xe[et],Pe.tags));continue}Fe!=="LineString"&&Fe!=="MultiLineString"||(Xe.length===1?(Fe="LineString",Xe=Xe[0]):Fe="MultiLineString"),Fe!=="Point"&&Fe!=="MultiPoint"||(Fe=Xe.length===3?"Point":"MultiPoint"),Q.push(Cr(Pe.id,Fe,Xe,Pe.tags))}}}return Q.length?Q:null}function Vt(pe,H,W,ne,fe){for(var ge=0;ge<pe.length;ge+=3){var X=pe[ge+fe];X>=W&&X<=ne&&(H.push(pe[ge]),H.push(pe[ge+1]),H.push(pe[ge+2]))}}function Jt(pe,H,W,ne,fe,ge,X){for(var Y,Q,le=Ar(pe),Pe=fe===0?nr:Kt,Me=pe.start,Fe=0;Fe<pe.length-3;Fe+=3){var Ye=pe[Fe],rt=pe[Fe+1],Xe=pe[Fe+2],et=pe[Fe+3],Ie=pe[Fe+4],Ae=fe===0?Ye:rt,it=fe===0?et:Ie,ot=!1;X&&(Y=Math.sqrt(Math.pow(Ye-et,2)+Math.pow(rt-Ie,2))),Ae<W?it>W&&(Q=Pe(le,Ye,rt,et,Ie,W),X&&(le.start=Me+Y*Q)):Ae>ne?it<ne&&(Q=Pe(le,Ye,rt,et,Ie,ne),X&&(le.start=Me+Y*Q)):cr(le,Ye,rt,Xe),it<W&&Ae>=W&&(Q=Pe(le,Ye,rt,et,Ie,W),ot=!0),it>ne&&Ae<=ne&&(Q=Pe(le,Ye,rt,et,Ie,ne),ot=!0),!ge&&ot&&(X&&(le.end=Me+Y*Q),H.push(le),le=Ar(pe)),X&&(Me+=Y)}var lt=pe.length-3;Ye=pe[lt],rt=pe[lt+1],Xe=pe[lt+2],(Ae=fe===0?Ye:rt)>=W&&Ae<=ne&&cr(le,Ye,rt,Xe),lt=le.length-3,ge&&lt>=3&&(le[lt]!==le[0]||le[lt+1]!==le[1])&&cr(le,le[0],le[1],le[2]),le.length&&H.push(le)}function Ar(pe){var H=[];return H.size=pe.size,H.start=pe.start,H.end=pe.end,H}function Br(pe,H,W,ne,fe,ge){for(var X=0;X<pe.length;X++)Jt(pe[X],H,W,ne,fe,ge,!1)}function cr(pe,H,W,ne){pe.push(H),pe.push(W),pe.push(ne)}function nr(pe,H,W,ne,fe,ge){var X=(ge-H)/(ne-H);return pe.push(ge),pe.push(W+(fe-W)*X),pe.push(1),X}function Kt(pe,H,W,ne,fe,ge){var X=(ge-W)/(fe-W);return pe.push(H+(ne-H)*X),pe.push(ge),pe.push(1),X}function lr(pe,H){for(var W=[],ne=0;ne<pe.length;ne++){var fe,ge=pe[ne],X=ge.type;if(X==="Point"||X==="MultiPoint"||X==="LineString")fe=Wr(ge.geometry,H);else if(X==="MultiLineString"||X==="Polygon"){fe=[];for(var Y=0;Y<ge.geometry.length;Y++)fe.push(Wr(ge.geometry[Y],H))}else if(X==="MultiPolygon")for(fe=[],Y=0;Y<ge.geometry.length;Y++){for(var Q=[],le=0;le<ge.geometry[Y].length;le++)Q.push(Wr(ge.geometry[Y][le],H));fe.push(Q)}W.push(Cr(ge.id,X,fe,ge.tags))}return W}function Wr(pe,H){var W=[];W.size=pe.size,pe.start!==void 0&&(W.start=pe.start,W.end=pe.end);for(var ne=0;ne<pe.length;ne+=3)W.push(pe[ne]+H,pe[ne+1],pe[ne+2]);return W}function Oe(pe,H){if(pe.transformed)return pe;var W,ne,fe,ge=1<<pe.z,X=pe.x,Y=pe.y;for(W=0;W<pe.features.length;W++){var Q=pe.features[W],le=Q.geometry,Pe=Q.type;if(Q.geometry=[],Pe===1)for(ne=0;ne<le.length;ne+=2)Q.geometry.push(St(le[ne],le[ne+1],H,ge,X,Y));else for(ne=0;ne<le.length;ne++){var Me=[];for(fe=0;fe<le[ne].length;fe+=2)Me.push(St(le[ne][fe],le[ne][fe+1],H,ge,X,Y));Q.geometry.push(Me)}}return pe.transformed=!0,pe}function St(pe,H,W,ne,fe,ge){return[Math.round(W*(pe*ne-fe)),Math.round(W*(H*ne-ge))]}function _t(pe,H,W,ne,fe){for(var ge=H===fe.maxZoom?0:fe.tolerance/((1<<H)*fe.extent),X={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:W,y:ne,z:H,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Y=0;Y<pe.length;Y++){X.numFeatures++,Ce(X,pe[Y],ge,fe);var Q=pe[Y].minX,le=pe[Y].minY,Pe=pe[Y].maxX,Me=pe[Y].maxY;Q<X.minX&&(X.minX=Q),le<X.minY&&(X.minY=le),Pe>X.maxX&&(X.maxX=Pe),Me>X.maxY&&(X.maxY=Me)}return X}function Ce(pe,H,W,ne){var fe=H.geometry,ge=H.type,X=[];if(ge==="Point"||ge==="MultiPoint")for(var Y=0;Y<fe.length;Y+=3)X.push(fe[Y]),X.push(fe[Y+1]),pe.numPoints++,pe.numSimplified++;else if(ge==="LineString")He(X,fe,pe,W,!1,!1);else if(ge==="MultiLineString"||ge==="Polygon")for(Y=0;Y<fe.length;Y++)He(X,fe[Y],pe,W,ge==="Polygon",Y===0);else if(ge==="MultiPolygon")for(var Q=0;Q<fe.length;Q++){var le=fe[Q];for(Y=0;Y<le.length;Y++)He(X,le[Y],pe,W,!0,Y===0)}if(X.length){var Pe=H.tags||null;if(ge==="LineString"&&ne.lineMetrics){for(var Me in Pe={},H.tags)Pe[Me]=H.tags[Me];Pe.mapbox_clip_start=fe.start/fe.size,Pe.mapbox_clip_end=fe.end/fe.size}var Fe={geometry:X,type:ge==="Polygon"||ge==="MultiPolygon"?3:ge==="LineString"||ge==="MultiLineString"?2:1,tags:Pe};H.id!==null&&(Fe.id=H.id),pe.features.push(Fe)}}function He(pe,H,W,ne,fe,ge){var X=ne*ne;if(ne>0&&H.size<(fe?X:ne))W.numPoints+=H.length/3;else{for(var Y=[],Q=0;Q<H.length;Q+=3)(ne===0||H[Q+2]>X)&&(W.numSimplified++,Y.push(H[Q]),Y.push(H[Q+1])),W.numPoints++;fe&&function(le,Pe){for(var Me=0,Fe=0,Ye=le.length,rt=Ye-2;Fe<Ye;rt=Fe,Fe+=2)Me+=(le[Fe]-le[rt])*(le[Fe+1]+le[rt+1]);if(Me>0===Pe)for(Fe=0,Ye=le.length;Fe<Ye/2;Fe+=2){var Xe=le[Fe],et=le[Fe+1];le[Fe]=le[Ye-2-Fe],le[Fe+1]=le[Ye-1-Fe],le[Ye-2-Fe]=Xe,le[Ye-1-Fe]=et}}(Y,ge),pe.push(Y)}}function Ze(pe,H){var W=(H=this.options=function(fe,ge){for(var X in ge)fe[X]=ge[X];return fe}(Object.create(this.options),H)).debug;if(W&&console.time("preprocess data"),H.maxZoom<0||H.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(H.promoteId&&H.generateId)throw new Error("promoteId and generateId cannot be used together.");var ne=function(fe,ge){var X=[];if(fe.type==="FeatureCollection")for(var Y=0;Y<fe.features.length;Y++)Pt(X,fe.features[Y],ge,Y);else Pt(X,fe.type==="Feature"?fe:{geometry:fe},ge);return X}(pe,H);this.tiles={},this.tileCoords=[],W&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",H.indexMaxZoom,H.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ne=function(fe,ge){var X=ge.buffer/ge.extent,Y=fe,Q=Er(fe,1,-1-X,X,0,-1,2,ge),le=Er(fe,1,1-X,2+X,0,-1,2,ge);return(Q||le)&&(Y=Er(fe,1,-X,1+X,0,-1,2,ge)||[],Q&&(Y=lr(Q,1).concat(Y)),le&&(Y=Y.concat(lr(le,-1)))),Y}(ne,H),ne.length&&this.splitTile(ne,0,0,0),W&&(ne.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function wt(pe,H,W){return 32*((1<<pe)*W+H)+pe}function gt(pe,H){return H?pe.properties[H]:pe.id}function kt(pe,H){if(pe==null)return!0;if(pe.type==="Feature")return gt(pe,H)!=null;if(pe.type==="FeatureCollection"){const W=new Set;for(const ne of pe.features){const fe=gt(ne,H);if(fe==null||W.has(fe))return!1;W.add(fe)}return!0}return!1}function ur(pe,H){const W=new Map;if(pe!=null)if(pe.type==="Feature")W.set(gt(pe,H),pe);else for(const ne of pe.features)W.set(gt(ne,H),ne);return W}Ze.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ze.prototype.splitTile=function(pe,H,W,ne,fe,ge,X){for(var Y=[pe,H,W,ne],Q=this.options,le=Q.debug;Y.length;){ne=Y.pop(),W=Y.pop(),H=Y.pop(),pe=Y.pop();var Pe=1<<H,Me=wt(H,W,ne),Fe=this.tiles[Me];if(!Fe&&(le>1&&console.time("creation"),Fe=this.tiles[Me]=_t(pe,H,W,ne,Q),this.tileCoords.push({z:H,x:W,y:ne}),le)){le>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",H,W,ne,Fe.numFeatures,Fe.numPoints,Fe.numSimplified),console.timeEnd("creation"));var Ye="z"+H;this.stats[Ye]=(this.stats[Ye]||0)+1,this.total++}if(Fe.source=pe,fe){if(H===Q.maxZoom||H===fe)continue;var rt=1<<fe-H;if(W!==Math.floor(ge/rt)||ne!==Math.floor(X/rt))continue}else if(H===Q.indexMaxZoom||Fe.numPoints<=Q.indexMaxPoints)continue;if(Fe.source=null,pe.length!==0){le>1&&console.time("clipping");var Xe,et,Ie,Ae,it,ot,lt=.5*Q.buffer/Q.extent,Yt=.5-lt,ir=.5+lt,br=1+lt;Xe=et=Ie=Ae=null,it=Er(pe,Pe,W-lt,W+ir,0,Fe.minX,Fe.maxX,Q),ot=Er(pe,Pe,W+Yt,W+br,0,Fe.minX,Fe.maxX,Q),pe=null,it&&(Xe=Er(it,Pe,ne-lt,ne+ir,1,Fe.minY,Fe.maxY,Q),et=Er(it,Pe,ne+Yt,ne+br,1,Fe.minY,Fe.maxY,Q),it=null),ot&&(Ie=Er(ot,Pe,ne-lt,ne+ir,1,Fe.minY,Fe.maxY,Q),Ae=Er(ot,Pe,ne+Yt,ne+br,1,Fe.minY,Fe.maxY,Q),ot=null),le>1&&console.timeEnd("clipping"),Y.push(Xe||[],H+1,2*W,2*ne),Y.push(et||[],H+1,2*W,2*ne+1),Y.push(Ie||[],H+1,2*W+1,2*ne),Y.push(Ae||[],H+1,2*W+1,2*ne+1)}}},Ze.prototype.getTile=function(pe,H,W){var ne=this.options,fe=ne.extent,ge=ne.debug;if(pe<0||pe>24)return null;var X=1<<pe,Y=wt(pe,H=(H%X+X)%X,W);if(this.tiles[Y])return Oe(this.tiles[Y],fe);ge>1&&console.log("drilling down to z%d-%d-%d",pe,H,W);for(var Q,le=pe,Pe=H,Me=W;!Q&&le>0;)le--,Pe=Math.floor(Pe/2),Me=Math.floor(Me/2),Q=this.tiles[wt(le,Pe,Me)];return Q&&Q.source?(ge>1&&console.log("found parent tile z%d-%d-%d",le,Pe,Me),ge>1&&console.time("drilling down"),this.splitTile(Q.source,le,Pe,Me,pe,H,W),ge>1&&console.timeEnd("drilling down"),this.tiles[Y]?Oe(this.tiles[Y],fe):null):null};class Lt extends M{constructor(H,W,ne,fe){super(H,W,ne),this._dataUpdateable=new Map,this.loadGeoJSON=(ge,X)=>{const{promoteId:Y}=ge;if(ge.request)return c.f(ge.request,(Q,le,Pe,Me)=>{this._dataUpdateable=kt(le,Y)?ur(le,Y):void 0,X(Q,le,Pe,Me)});if(typeof ge.data=="string")try{const Q=JSON.parse(ge.data);this._dataUpdateable=kt(Q,Y)?ur(Q,Y):void 0,X(null,Q)}catch{X(new Error(`Input data given to '${ge.source}' is not a valid GeoJSON object.`))}else ge.dataDiff?this._dataUpdateable?(function(Q,le,Pe){var Me,Fe,Ye,rt;if(le.removeAll&&Q.clear(),le.remove)for(const Xe of le.remove)Q.delete(Xe);if(le.add)for(const Xe of le.add){const et=gt(Xe,Pe);et!=null&&Q.set(et,Xe)}if(le.update)for(const Xe of le.update){let et=Q.get(Xe.id);if(et==null)continue;const Ie=!Xe.removeAllProperties&&(((Me=Xe.removeProperties)===null||Me===void 0?void 0:Me.length)>0||((Fe=Xe.addOrUpdateProperties)===null||Fe===void 0?void 0:Fe.length)>0);if((Xe.newGeometry||Xe.removeAllProperties||Ie)&&(et=Object.assign({},et),Q.set(Xe.id,et),Ie&&(et.properties=Object.assign({},et.properties))),Xe.newGeometry&&(et.geometry=Xe.newGeometry),Xe.removeAllProperties)et.properties={};else if(((Ye=Xe.removeProperties)===null||Ye===void 0?void 0:Ye.length)>0)for(const Ae of Xe.removeProperties)Object.prototype.hasOwnProperty.call(et.properties,Ae)&&delete et.properties[Ae];if(((rt=Xe.addOrUpdateProperties)===null||rt===void 0?void 0:rt.length)>0)for(const{key:Ae,value:it}of Xe.addOrUpdateProperties)et.properties[Ae]=it}}(this._dataUpdateable,ge.dataDiff,Y),X(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):X(new Error(`Cannot update existing geojson data in ${ge.source}`)):X(new Error(`Input data given to '${ge.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,fe&&(this.loadGeoJSON=fe)}loadGeoJSONTile(H,W){const ne=H.tileID.canonical;if(!this._geoJSONIndex)return W(null,null);const fe=this._geoJSONIndex.getTile(ne.z,ne.x,ne.y);if(!fe)return W(null,null);const ge=new class{constructor(Y){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.N,this.length=Y.length,this._features=Y}feature(Y){return new class{constructor(Q){this._feature=Q,this.extent=c.N,this.type=Q.type,this.properties=Q.tags,"id"in Q&&!isNaN(Q.id)&&(this.id=parseInt(Q.id,10))}loadGeometry(){if(this._feature.type===1){const Q=[];for(const le of this._feature.geometry)Q.push([new c.P(le[0],le[1])]);return Q}{const Q=[];for(const le of this._feature.geometry){const Pe=[];for(const Me of le)Pe.push(new c.P(Me[0],Me[1]));Q.push(Pe)}return Q}}toGeoJSON(Q,le,Pe){return D.call(this,Q,le,Pe)}}(this._features[Y])}}(fe.features);let X=Ve(ge);X.byteOffset===0&&X.byteLength===X.buffer.byteLength||(X=new Uint8Array(X)),W(null,{vectorTile:ge,rawData:X.buffer})}loadData(H,W){var ne;(ne=this._pendingRequest)===null||ne===void 0||ne.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const fe=!!(H&&H.request&&H.request.collectResourceTiming)&&new c.bu(H.request);this._pendingCallback=W,this._pendingRequest=this.loadGeoJSON(H,(ge,X)=>{if(delete this._pendingCallback,delete this._pendingRequest,ge||!X)return W(ge);if(typeof X!="object")return W(new Error(`Input data given to '${H.source}' is not a valid GeoJSON object.`));{B(X,!0);try{if(H.filter){const Q=c.bC(H.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Q.result==="error")throw new Error(Q.value.map(Pe=>`${Pe.key}: ${Pe.message}`).join(", "));X={type:"FeatureCollection",features:X.features.filter(Pe=>Q.value.evaluate({zoom:0},Pe))}}this._geoJSONIndex=H.cluster?new tr(function({superclusterOptions:Q,clusterProperties:le}){if(!le||!Q)return Q;const Pe={},Me={},Fe={accumulated:null,zoom:0},Ye={properties:null},rt=Object.keys(le);for(const Xe of rt){const[et,Ie]=le[Xe],Ae=c.bC(Ie),it=c.bC(typeof et=="string"?[et,["accumulated"],["get",Xe]]:et);Pe[Xe]=Ae.value,Me[Xe]=it.value}return Q.map=Xe=>{Ye.properties=Xe;const et={};for(const Ie of rt)et[Ie]=Pe[Ie].evaluate(Fe,Ye);return et},Q.reduce=(Xe,et)=>{Ye.properties=et;for(const Ie of rt)Fe.accumulated=Xe[Ie],Xe[Ie]=Me[Ie].evaluate(Fe,Ye)},Q}(H)).load(X.features):function(Q,le){return new Ze(Q,le)}(X,H.geojsonVtOptions)}catch(Q){return W(Q)}this.loaded={};const Y={};if(fe){const Q=fe.finish();Q&&(Y.resourceTiming={},Y.resourceTiming[H.source]=JSON.parse(JSON.stringify(Q)))}W(null,Y)}})}reloadTile(H,W){const ne=this.loaded;return ne&&ne[H.uid]?super.reloadTile(H,W):this.loadTile(H,W)}removeSource(H,W){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),W()}getClusterExpansionZoom(H,W){try{W(null,this._geoJSONIndex.getClusterExpansionZoom(H.clusterId))}catch(ne){W(ne)}}getClusterChildren(H,W){try{W(null,this._geoJSONIndex.getChildren(H.clusterId))}catch(ne){W(ne)}}getClusterLeaves(H,W){try{W(null,this._geoJSONIndex.getLeaves(H.clusterId,H.limit,H.offset))}catch(ne){W(ne)}}}class dr{constructor(H){this.self=H,this.actor=new c.C(H,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:M,geojson:Lt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(W,ne)=>{if(this.workerSourceTypes[W])throw new Error(`Worker source with name "${W}" already registered.`);this.workerSourceTypes[W]=ne},this.self.registerRTLTextPlugin=W=>{if(c.bD.isParsed())throw new Error("RTL text plugin already registered.");c.bD.applyArabicShaping=W.applyArabicShaping,c.bD.processBidirectionalText=W.processBidirectionalText,c.bD.processStyledBidirectionalText=W.processStyledBidirectionalText}}setReferrer(H,W){this.referrer=W}setImages(H,W,ne){this.availableImages[H]=W;for(const fe in this.workerSources[H]){const ge=this.workerSources[H][fe];for(const X in ge)ge[X].availableImages=W}ne()}setLayers(H,W,ne){this.getLayerIndex(H).replace(W),ne()}updateLayers(H,W,ne){this.getLayerIndex(H).update(W.layers,W.removedIds),ne()}loadTile(H,W,ne){this.getWorkerSource(H,W.type,W.source).loadTile(W,ne)}loadDEMTile(H,W,ne){this.getDEMWorkerSource(H,W.source).loadTile(W,ne)}reloadTile(H,W,ne){this.getWorkerSource(H,W.type,W.source).reloadTile(W,ne)}abortTile(H,W,ne){this.getWorkerSource(H,W.type,W.source).abortTile(W,ne)}removeTile(H,W,ne){this.getWorkerSource(H,W.type,W.source).removeTile(W,ne)}removeDEMTile(H,W){this.getDEMWorkerSource(H,W.source).removeTile(W)}removeSource(H,W,ne){if(!this.workerSources[H]||!this.workerSources[H][W.type]||!this.workerSources[H][W.type][W.source])return;const fe=this.workerSources[H][W.type][W.source];delete this.workerSources[H][W.type][W.source],fe.removeSource!==void 0?fe.removeSource(W,ne):ne()}loadWorkerSource(H,W,ne){try{this.self.importScripts(W.url),ne()}catch(fe){ne(fe.toString())}}syncRTLPluginState(H,W,ne){try{c.bD.setState(W);const fe=c.bD.getPluginURL();if(c.bD.isLoaded()&&!c.bD.isParsed()&&fe!=null){this.self.importScripts(fe);const ge=c.bD.isParsed();ne(ge?void 0:new Error(`RTL Text Plugin failed to import scripts from ${fe}`),ge)}}catch(fe){ne(fe.toString())}}getAvailableImages(H){let W=this.availableImages[H];return W||(W=[]),W}getLayerIndex(H){let W=this.layerIndexes[H];return W||(W=this.layerIndexes[H]=new x),W}getWorkerSource(H,W,ne){return this.workerSources[H]||(this.workerSources[H]={}),this.workerSources[H][W]||(this.workerSources[H][W]={}),this.workerSources[H][W][ne]||(this.workerSources[H][W][ne]=new this.workerSourceTypes[W]({send:(fe,ge,X)=>{this.actor.send(fe,ge,X,H)}},this.getLayerIndex(H),this.getAvailableImages(H))),this.workerSources[H][W][ne]}getDEMWorkerSource(H,W){return this.demWorkerSources[H]||(this.demWorkerSources[H]={}),this.demWorkerSources[H][W]||(this.demWorkerSources[H][W]=new N),this.demWorkerSources[H][W]}}return c.i()&&(self.worker=new dr(self)),dr}),d(["./shared"],function(c){var x="3.6.2";class w{static testProp(i){if(!w.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in w.docStyle)return i[u];return i[0]}static create(i,u,f){const g=window.document.createElement(i);return u!==void 0&&(g.className=u),f&&f.appendChild(g),g}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(i,u){i.style[w.transformProp]=u}static addEventListener(i,u,f,g={}){i.addEventListener(u,f,"passive"in g?g:g.capture)}static removeEventListener(i,u,f,g={}){i.removeEventListener(u,f,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(i,u){const f=i.getBoundingClientRect();return new c.P(u.clientX-f.left-i.clientLeft,u.clientY-f.top-i.clientTop)}static touchPos(i,u){const f=i.getBoundingClientRect(),g=[];for(let _=0;_<u.length;_++)g.push(new c.P(u[_].clientX-f.left-i.clientLeft,u[_].clientY-f.top-i.clientTop));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const T={supported:!1,testSupport:function(y){!M&&E&&(N?j(y):k=y)}};let k,E,M=!1,N=!1;function j(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,E),y.isContextLost())return;T.supported=!0}catch{}y.deleteTexture(i),M=!0}var q,B;typeof document<"u"&&(E=document.createElement("img"),E.onload=function(){k&&j(k),k=null,N=!0},E.onerror=function(){M=!0,k=null},E.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,u,f,g;y.resetRequestQueue=()=>{i=[],u=0,f=0,g={}},y.addThrottleControl=L=>{const F=f++;return g[F]=L,F},y.removeThrottleControl=L=>{delete g[L],I()},y.getImage=(L,F,V=!0)=>{T.supported&&(L.headers||(L.headers={}),L.headers.accept="image/webp,*/*");const ee={requestParameters:L,supportImageRefresh:V,callback:F,cancelled:!1,completed:!1,cancel:()=>{ee.completed||ee.cancelled||(ee.cancelled=!0,ee.innerRequest&&(ee.innerRequest.cancel(),u--),I())}};return i.push(ee),I(),ee};const _=L=>{const{requestParameters:F,supportImageRefresh:V,callback:ee}=L;return c.e(F,{type:"image"}),(V!==!1||c.i()||c.g(F.url)||F.headers&&!Object.keys(F.headers).reduce((he,de)=>he&&de==="accept",!0)?c.m:A)(F,(he,de,me,ce)=>{C(L,ee,he,de,me,ce)})},C=(L,F,V,ee,he,de)=>{V?F(V):ee instanceof HTMLImageElement||c.a(ee)?F(null,ee):ee&&((me,ce)=>{typeof createImageBitmap=="function"?c.b(me,ce):c.d(me,ce)})(ee,(me,ce)=>{me!=null?F(me):ce!=null&&F(null,ce,{cacheControl:he,expires:de})}),L.cancelled||(L.completed=!0,u--,I())},I=()=>{const L=(()=>{const F=Object.keys(g);let V=!1;if(F.length>0){for(const ee of F)if(V=g[ee](),V)break}return V})()?c.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let F=u;F<L&&i.length>0;F++){const V=i.shift();if(V.cancelled){F--;continue}const ee=_(V);u++,V.innerRequest=ee}},A=(L,F)=>{const V=new Image,ee=L.url;let he=!1;const de=L.credentials;return de&&de==="include"?V.crossOrigin="use-credentials":(de&&de==="same-origin"||!c.s(ee))&&(V.crossOrigin="anonymous"),V.fetchPriority="high",V.onload=()=>{F(null,V),V.onerror=V.onload=null},V.onerror=()=>{he||F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),V.onerror=V.onload=null},V.src=ee,{cancel:()=>{he=!0,V.src=""}}}}(q||(q={})),q.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(B||(B={}));class D{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,f){const g=function(_){const C=_.match($);if(!C)throw new Error(`Unable to parse URL "${_}"`);return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}(i);return g.path+=`${u}${f}`,function(_){const C=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${C}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const $=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ie(y){var i=new c.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var J,K=function(y,i,u){return y[0]=i[0]-u[0],y[1]=i[1]-u[1],y[2]=i[2]-u[2],y};J=new c.A(3),c.A!=Float32Array&&(J[0]=0,J[1]=0,J[2]=0);var se=function(y){var i=y[0],u=y[1];return i*i+u*u};function ae(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:f,url:g}of y){const _=`${f}${g}`;u.indexOf(_)===-1&&(u.push(_),i.push({id:f,url:g}))}}return i}function we(y,i,u,f,g){if(f)return void y(f);if(g!==Object.values(i).length||g!==Object.values(u).length)return;const _={};for(const C in i){_[C]={};const I=c.h.getImageCanvasContext(u[C]),A=i[C];for(const L in A){const{width:F,height:V,x:ee,y:he,sdf:de,pixelRatio:me,stretchX:ce,stretchY:Te,content:Ne}=A[L];_[C][L]={data:null,pixelRatio:me,sdf:de,stretchX:ce,stretchY:Te,content:Ne,spriteData:{width:F,height:V,x:ee,y:he,context:I}}}}y(null,_)}(function(){var y=new c.A(2);c.A!=Float32Array&&(y[0]=0,y[1]=0)})();class xe{constructor(i,u,f,g){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(u,g)}update(i,u,f){const{width:g,height:_}=i,C=!(this.size&&this.size[0]===g&&this.size[1]===_||f),{context:I}=this,{gl:A}=I;if(this.useMipmap=!!(u&&u.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!u||u.premultiply!==!1)),C)this.size=[g,_],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,i):A.texImage2D(A.TEXTURE_2D,0,this.format,g,_,0,this.format,A.UNSIGNED_BYTE,i.data);else{const{x:L,y:F}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?A.texSubImage2D(A.TEXTURE_2D,0,L,F,A.RGBA,A.UNSIGNED_BYTE,i):A.texSubImage2D(A.TEXTURE_2D,0,L,F,g,_,A.RGBA,A.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D)}bind(i,u,f){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),f!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,f||i),this.filter=i),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function ke(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class Ee extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:f}of this.requestors)this._notify(u,f);this.requestors=[]}}getImage(i){const u=this.images[i];if(u&&!u.data&&u.spriteData){const f=u.spriteData;u.data=new c.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),u.spriteData=null}return u}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let f=!0;const g=u.data||u.spriteData;return this._validateStretch(u.stretchX,g&&g.width)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,g&&g.height)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,u){if(!i)return!0;let f=0;for(const g of i){if(g[0]<f||g[1]<g[0]||u<g[1])return!1;f=g[1]}return!0}_validateContent(i,u){if(!i)return!0;if(i.length!==4)return!1;const f=u.spriteData,g=f&&f.width||u.data.width,_=f&&f.height||u.data.height;return!(i[0]<0||g<i[0]||i[1]<0||_<i[1]||i[2]<0||g<i[2]||i[3]<0||_<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,u,f=!0){const g=this.getImage(i);if(f&&(g.data.width!==u.data.width||g.data.height!==u.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let f=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(f=!1);this.isLoaded()||f?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const f={};for(const g of i){let _=this.getImage(g);_||(this.fire(new c.k("styleimagemissing",{id:g})),_=this.getImage(g)),_?f[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:c.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,f)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],f=this.getImage(i);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},_=new c.I(g,f);this.patterns[i]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new xe(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const _ in this.patterns)i.push(this.patterns[_].bin);const{w:u,h:f}=c.p(i),g=this.atlasImage;g.resize({width:u||1,height:f||1});for(const _ in this.patterns){const{bin:C}=this.patterns[_],I=C.x+1,A=C.y+1,L=this.getImage(_).data,F=L.width,V=L.height;c.R.copy(L,g,{x:0,y:0},{x:I,y:A},{width:F,height:V}),c.R.copy(L,g,{x:0,y:V-1},{x:I,y:A-1},{width:F,height:1}),c.R.copy(L,g,{x:0,y:0},{x:I,y:A+V},{width:F,height:1}),c.R.copy(L,g,{x:F-1,y:0},{x:I-1,y:A},{width:1,height:V}),c.R.copy(L,g,{x:0,y:0},{x:I+F,y:A},{width:1,height:V})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.getImage(u);f||c.w(`Image with ID: "${u}" was not found`),ke(f)&&this.updateImage(u,f)}}}const $e=1e20;function Je(y,i,u,f,g,_,C,I,A){for(let L=i;L<i+f;L++)je(y,u*_+L,_,g,C,I,A);for(let L=u;L<u+g;L++)je(y,L*_+i,1,f,C,I,A)}function je(y,i,u,f,g,_,C){_[0]=0,C[0]=-$e,C[1]=$e,g[0]=y[i];for(let I=1,A=0,L=0;I<f;I++){g[I]=y[i+I*u];const F=I*I;do{const V=_[A];L=(g[I]-g[V]+F-V*V)/(I-V)/2}while(L<=C[A]&&--A>-1);A++,_[A]=I,C[A]=L,C[A+1]=$e}for(let I=0,A=0;I<f;I++){for(;C[A+1]<I;)A++;const L=_[A],F=I-L;y[i+I*u]=g[L]+F*F}}class Se{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const f=[];for(const g in i)for(const _ of i[g])f.push({stack:g,id:_});c.o(f,({stack:g,id:_},C)=>{let I=this.entries[g];I||(I=this.entries[g]={glyphs:{},requests:{},ranges:{}});let A=I.glyphs[_];if(A!==void 0)return void C(null,{stack:g,id:_,glyph:A});if(A=this._tinySDF(I,g,_),A)return I.glyphs[_]=A,void C(null,{stack:g,id:_,glyph:A});const L=Math.floor(_/256);if(256*L>65535)return void C(new Error("glyphs > 65535 not supported"));if(I.ranges[L])return void C(null,{stack:g,id:_,glyph:A});if(!this.url)return void C(new Error("glyphsUrl is not set"));let F=I.requests[L];F||(F=I.requests[L]=[],Se.loadGlyphRange(g,L,this.url,this.requestManager,(V,ee)=>{if(ee){for(const he in ee)this._doesCharSupportLocalGlyph(+he)||(I.glyphs[+he]=ee[+he]);I.ranges[L]=!0}for(const he of F)he(V,ee);delete I.requests[L]})),F.push((V,ee)=>{V?C(V):ee&&C(null,{stack:g,id:_,glyph:ee[_]||null})})},(g,_)=>{if(g)u(g);else if(_){const C={};for(const{stack:I,id:A,glyph:L}of _)(C[I]||(C[I]={}))[A]=L&&{id:L.id,bitmap:L.bitmap.clone(),metrics:L.metrics};u(null,C)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(c.u["CJK Unified Ideographs"](i)||c.u["Hangul Syllables"](i)||c.u.Hiragana(i)||c.u.Katakana(i))}_tinySDF(i,u,f){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(f))return;let _=i.tinySDF;if(!_){let I="400";/bold/i.test(u)?I="900":/medium/i.test(u)?I="500":/light/i.test(u)&&(I="200"),_=i.tinySDF=new Se.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:I})}const C=_.draw(String.fromCharCode(f));return{id:f,bitmap:new c.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}Se.loadGlyphRange=function(y,i,u,f,g){const _=256*i,C=_+255,I=f.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${_}-${C}`),B.Glyphs);c.l(I,(A,L)=>{if(A)g(A);else if(L){const F={};for(const V of c.n(L))F[V.id]=V;g(null,F)}})},Se.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:u=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:C="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=u;const I=this.size=y+4*i,A=this._createCanvas(I),L=this.ctx=A.getContext("2d",{willReadFrequently:!0});L.font=`${C} ${_} ${y}px ${g}`,L.textBaseline="alphabetic",L.textAlign="left",L.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(y),C=Math.ceil(u),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),A=Math.min(this.size-this.buffer,C+Math.ceil(f)),L=I+2*this.buffer,F=A+2*this.buffer,V=Math.max(L*F,0),ee=new Uint8ClampedArray(V),he={data:ee,width:L,height:F,glyphWidth:I,glyphHeight:A,glyphTop:C,glyphLeft:0,glyphAdvance:i};if(I===0||A===0)return he;const{ctx:de,buffer:me,gridInner:ce,gridOuter:Te}=this;de.clearRect(me,me,I,A),de.fillText(y,me,me+C);const Ne=de.getImageData(me,me,I,A);Te.fill($e,0,V),ce.fill(0,0,V);for(let ve=0;ve<A;ve++)for(let ze=0;ze<I;ze++){const Ge=Ne.data[4*(ve*I+ze)+3]/255;if(Ge===0)continue;const qe=(ve+me)*L+ze+me;if(Ge===1)Te[qe]=0,ce[qe]=$e;else{const tt=.5-Ge;Te[qe]=tt>0?tt*tt:0,ce[qe]=tt<0?tt*tt:0}}Je(Te,0,0,L,F,L,this.f,this.v,this.z),Je(ce,me,me,I,A,L,this.f,this.v,this.z);for(let ve=0;ve<V;ve++){const ze=Math.sqrt(Te[ve])-Math.sqrt(ce[ve]);ee[ve]=Math.round(255-255*(ze/this.radius+this.cutoff))}return he}};class Le{constructor(){this.specification=c.v.light.position}possiblyEvaluate(i,u){return c.z(i.expression.evaluate(u))}interpolate(i,u,f){return{x:c.B.number(i.x,u.x,f),y:c.B.number(i.y,u.y,f),z:c.B.number(i.z,u.z,f)}}}let Be;class Ve extends c.E{constructor(i){super(),Be=Be||new c.r({anchor:new c.D(c.v.light.anchor),position:new Le,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(Be),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(c.t,i,u))for(const f in i){const g=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),g):this._transitionable.setValue(f,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,f){return(!f||f.validate!==!1)&&c.x(this,i.call(c.y,c.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}}class Qe{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const f=i.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,u)),this.dashEntry[f]}getDashRanges(i,u,f){const g=[];let _=i.length%2==1?-i[i.length-1]*f:0,C=i[0]*f,I=!0;g.push({left:_,right:C,isDash:I,zeroLength:i[0]===0});let A=i[0];for(let L=1;L<i.length;L++){I=!I;const F=i[L];_=A*f,A+=F,C=A*f,g.push({left:_,right:C,isDash:I,zeroLength:F===0})}return g}addRoundDash(i,u,f){const g=u/2;for(let _=-f;_<=f;_++){const C=this.width*(this.nextRow+f+_);let I=0,A=i[I];for(let L=0;L<this.width;L++){L/A.right>1&&(A=i[++I]);const F=Math.abs(L-A.left),V=Math.abs(L-A.right),ee=Math.min(F,V);let he;const de=_/f*(g+1);if(A.isDash){const me=g-Math.abs(de);he=Math.sqrt(ee*ee+me*me)}else he=g-Math.sqrt(ee*ee+de*de);this.data[C+L]=Math.max(0,Math.min(255,he+128))}}}addRegularDash(i){for(let I=i.length-1;I>=0;--I){const A=i[I],L=i[I+1];A.zeroLength?i.splice(I,1):L&&L.isDash===A.isDash&&(L.left=A.left,i.splice(I,1))}const u=i[0],f=i[i.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const g=this.width*this.nextRow;let _=0,C=i[_];for(let I=0;I<this.width;I++){I/C.right>1&&(C=i[++_]);const A=Math.abs(I-C.left),L=Math.abs(I-C.right),F=Math.min(A,L);this.data[g+I]=Math.max(0,Math.min(255,(C.isDash?F:-F)+128))}}addDash(i,u){const f=u?7:0,g=2*f+1;if(this.nextRow+g>this.height)return c.w("LineAtlas out of space"),null;let _=0;for(let I=0;I<i.length;I++)_+=i[I];if(_!==0){const I=this.width/_,A=this.getDashRanges(i,this.width,I);u?this.addRoundDash(A,I,f):this.addRegularDash(A)}const C={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:_};return this.nextRow+=g,this.dirty=!0,C}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class st{constructor(i,u,f){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=f;const g=this.workerPool.acquire(f);for(let _=0;_<g.length;_++){const C=new c.C(g[_],u,f);C.name=`Worker ${_}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,f){c.o(this.actors,(g,_)=>{g.send(i,u,_)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function ct(y,i,u){const f=function(g,_){if(g)return u(g);if(_){const C=c.F(c.e(_,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(C.vectorLayers=_.vector_layers,C.vectorLayerIds=C.vectorLayers.map(I=>I.id)),u(null,C)}};return y.url?c.f(i.transformRequest(y.url,B.Source),f):c.h.frame(()=>f(null,y))}class Mt{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}extend(i){const u=this._sw,f=this._ne;let g,_;if(i instanceof c.L)g=i,_=i;else{if(!(i instanceof Mt))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Mt.convert(i)):this.extend(c.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(c.L.convert(i)):this;if(g=i._sw,_=i._ne,!g||!_)return this}return u||f?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),f.lng=Math.max(_.lng,f.lng),f.lat=Math.max(_.lat,f.lat)):(this._sw=new c.L(g.lng,g.lat),this._ne=new c.L(_.lng,_.lat)),this}getCenter(){return new c.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.L(this.getWest(),this.getNorth())}getSouthEast(){return new c.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:f}=c.L.convert(i);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}static convert(i){return i instanceof Mt?i:i&&new Mt(i)}static fromLngLat(i,u=0){const f=360*u/40075017,g=f/Math.cos(Math.PI/180*i.lat);return new Mt(new c.L(i.lng-g,i.lat-f),new c.L(i.lng+g,i.lat+f))}}class vt{constructor(i,u,f){this.bounds=Mt.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),f=Math.floor(c.G(this.bounds.getWest())*u),g=Math.floor(c.H(this.bounds.getNorth())*u),_=Math.ceil(c.G(this.bounds.getEast())*u),C=Math.ceil(c.H(this.bounds.getSouth())*u);return i.x>=f&&i.x<_&&i.y>=g&&i.y<C}}class Dt extends c.E{constructor(i,u,f,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ct(this._options,this.map._requestManager,(_,C)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new c.j(_)):C&&(c.e(this,C),C.bounds&&(this.tileBounds=new vt(C.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>c.e({},this._options),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.F(u,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(f,B.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(C,I){return delete i.request,i.aborted?u(null):C&&C.status!==404?u(C):(I&&I.resourceTiming&&(i.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&i.setExpiryData(I),i.loadVectorData(I,this.map.painter),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",g,_.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",g,_.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class tr extends c.E{constructor(i,u,f,g){super(),this.id=i,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},u),c.e(this,c.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ct(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new c.j(i)):u&&(c.e(this,u),u.bounds&&(this.tileBounds=new vt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return c.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=q.getImage(this.map._requestManager.transformRequest(f,B.Tile),(g,_,C)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(g)i.state="errored",u(g);else if(_){this.map._refreshExpiredTiles&&C&&i.setExpiryData(C);const I=this.map.painter.context,A=I.gl;i.texture=this.map.painter.getTileTexture(_.width),i.texture?i.texture.update(_,{useMipmap:!0}):(i.texture=new xe(I,_,A.RGBA,{useMipmap:!0}),i.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE,A.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&A.texParameterf(A.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),i.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}class ht extends tr{constructor(i,u,f,g){super(i,u,f,g),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(f,B.Tile);function _(C,I){C&&(i.state="errored",u(C)),I&&(i.dem=I,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=q.getImage(g,(C,I,A)=>c._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(C)i.state="errored",u(C);else if(I){this.map._refreshExpiredTiles&&i.setExpiryData(A);const L=c.a(I)&&c.J()?I:yield function(V){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.K()){const ee=V.width+2,he=V.height+2;try{return new c.R({width:ee,height:he},yield c.M(V,-1,-1,ee,he))}catch{}}return c.h.getImageData(V,1)})}(I),F={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:L,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",F,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const u=i.canonical,f=Math.pow(2,u.z),g=(u.x-1+f)%f,_=u.x===0?i.wrap-1:i.wrap,C=(u.x+1+f)%f,I=u.x+1===f?i.wrap+1:i.wrap,A={};return A[new c.O(i.overscaledZ,_,u.z,g,u.y).key]={backfilled:!1},A[new c.O(i.overscaledZ,I,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(A[new c.O(i.overscaledZ,_,u.z,g,u.y-1).key]={backfilled:!1},A[new c.O(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},A[new c.O(i.overscaledZ,I,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<f&&(A[new c.O(i.overscaledZ,_,u.z,g,u.y+1).key]={backfilled:!1},A[new c.O(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},A[new c.O(i.overscaledZ,I,u.z,C,u.y+1).key]={backfilled:!1}),A}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class Ke extends c.E{constructor(i,u,f,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>c.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(g),this._data=u.data,this._options=c.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=c.N/this.tileSize;this.workerOptions=c.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:c.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:c.N,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,f,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:f},g),this}_updateWorkerData(i){const u=c.e({},this.workerOptions);i?u.dataDiff=i:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(c.h.resolveURL(this._data),B.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(f,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let _=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(_=g.resourceTiming[this.id].slice(0)),f)return void this.fire(new c.j(f));const C={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&c.e(C,{resourceTiming:_}),this.fire(new c.k("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const f=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(f,g,(_,C)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):_?u(_):(i.loadVectorData(C,this.map.painter,f==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var ft=c.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ct extends c.E{constructor(i,u,f,g){super(),this.load=(_,C)=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=q.getImage(this.map._requestManager.transformRequest(this.url,B.Image),(I,A)=>{this._request=null,this._loaded=!0,I?this.fire(new c.j(I)):A&&(this.image=A,_&&(this.coordinates=_),C&&C(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,ft.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new xe(_,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let I=!1;for(const A in this.tiles){const L=this.tiles[A];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,I=!0)}I&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const u=i.map(c.U.fromLngLat);this.tileID=function(g){let _=1/0,C=1/0,I=-1/0,A=-1/0;for(const ee of g)_=Math.min(_,ee.x),C=Math.min(C,ee.y),I=Math.max(I,ee.x),A=Math.max(A,ee.y);const L=Math.max(I-_,A-C),F=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),V=Math.pow(2,F);return new c.W(F,Math.floor((_+I)/2*V),Math.floor((C+A)/2*V))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new c.V,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,c.N,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,c.N),this._boundsArray.emplaceBack(f[2].x,f[2].y,c.N,c.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}hasTransition(){return!1}}class jt extends Ct{constructor(i,u,f,g){super(i,u,f,g),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const C of _.urls)this.urls.push(this.map._requestManager.transformRequest(C,B.Source).url);c.X(this.urls,(C,I)=>{this._loaded=!0,C?this.fire(new c.j(C)):I&&(this.video=I,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,ft.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new xe(_,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let I=!1;for(const A in this.tiles){const L=this.tiles[A];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture,I=!0)}I&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new c.j(new c.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Gt extends Ct{constructor(i,u,f,g){super(i,u,f,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const C=this.map.painter.context,I=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,ft.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new xe(C,this.canvas,I.RGBA,{premultiply:!0});let A=!1;for(const L in this.tiles){const F=this.tiles[L];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture,A=!0)}A&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(C=>typeof C!="number"))||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new c.j(new c.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const vr={},Cr=y=>{switch(y){case"geojson":return Ke;case"image":return Ct;case"raster":return tr;case"raster-dem":return ht;case"vector":return Dt;case"video":return jt;case"canvas":return Gt}return vr[y]};function Ut(y,i){const u=c.Z();return c.$(u,u,[1,1,0]),c.a0(u,u,[.5*y.width,.5*y.height,1]),c.a1(u,u,y.calculatePosMatrix(i.toUnwrapped()))}function Pt(y,i,u,f,g,_){const C=function(V,ee,he){if(V)for(const de of V){const me=ee[de];if(me&&me.source===he&&me.type==="fill-extrusion")return!0}else for(const de in ee){const me=ee[de];if(me.source===he&&me.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,y.id),I=_.maxPitchScaleFactor(),A=y.tilesIn(f,I,C);A.sort(sr);const L=[];for(const V of A)L.push({wrappedTileID:V.tileID.wrapped().key,queryResults:V.tile.queryRenderedFeatures(i,u,y._state,V.queryGeometry,V.cameraQueryGeometry,V.scale,g,_,I,Ut(y.transform,V.tileID))});const F=function(V){const ee={},he={};for(const de of V){const me=de.queryResults,ce=de.wrappedTileID,Te=he[ce]=he[ce]||{};for(const Ne in me){const ve=me[Ne],ze=Te[Ne]=Te[Ne]||{},Ge=ee[Ne]=ee[Ne]||[];for(const qe of ve)ze[qe.featureIndex]||(ze[qe.featureIndex]=!0,Ge.push(qe))}}return ee}(L);for(const V in F)F[V].forEach(ee=>{const he=ee.feature,de=y.getFeatureState(he.layer["source-layer"],he.id);he.source=he.layer.source,he.layer["source-layer"]&&(he.sourceLayer=he.layer["source-layer"]),he.state=de});return F}function sr(y,i){const u=y.tileID,f=i.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}class Ft{constructor(i,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=c.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,_){const C={};if(!_)return C;for(const I of g){const A=I.layerIds.map(L=>_.getLayer(L)).filter(Boolean);if(A.length!==0){I.layers=A,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(L=>A.filter(F=>F.id===L)[0]));for(const L of A)C[L.id]=I}}return C}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof c.a4){if(this.hasSymbolBuckets=!0,!f)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof c.a4&&_.hasRTLText){this.hasRTLText=!0,c.a5();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(_))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new c.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new xe(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new xe(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,f,g,_,C,I,A,L,F){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:C,tileSize:this.tileSize,pixelPosMatrix:F,transform:A,params:I,queryPadding:this.queryPadding*L},i,u,f):{}}querySourceFeatures(i,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",C=g._geojsonTileLayer||g[_];if(!C)return;const I=c.a6(u&&u.filter),{z:A,x:L,y:F}=this.tileID.canonical,V={z:A,x:L,y:F};for(let ee=0;ee<C.length;ee++){const he=C.feature(ee);if(I.needGeometry){const ce=c.a7(he,!0);if(!I.filter(new c.a8(this.tileID.overscaledZ),ce,this.tileID.canonical))continue}else if(!I.filter(new c.a8(this.tileID.overscaledZ),he))continue;const de=f.getId(he,_),me=new c.a9(he,A,L,F,de);me.tile=V,i.push(me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const f=c.aa(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const _=this.expirationTime-u;_?this.expirationTime=f+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const _=this.buckets[g],C=_.layers[0].sourceLayer||"_geojsonTileLayer",I=f[C],A=i[C];if(!I||!A||Object.keys(A).length===0)continue;_.update(A,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const L=u&&u.style&&u.style.getLayer(g);L&&(this.queryPadding=Math.max(this.queryPadding,L.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=c.h.now()+i}setDependencies(i,u){const f={};for(const g of u)f[g]=!0;this.dependencies[i]=f}hasDependency(i,u){for(const f of i){const g=this.dependencies[f];if(g){for(const _ of u)if(g[_])return!0}}return!1}}class _r{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,f){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:u,timeout:void 0};if(f!==void 0&&(_.timeout=setTimeout(()=>{this.remove(i,_)},f)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const f=i.wrapped().key,g=u===void 0?0:this.data[f].indexOf(u),_=this.data[f][g];return this.data[f].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(_.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const f in this.data)for(const g of this.data[f])i(g.value)||u.push(g);for(const f of u)this.remove(f.value.tileID,f)}}class Ue{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,f){const g=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},c.e(this.stateChanges[i][g],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const _ in this.state[i])_!==g&&(this.deletedStates[i][_]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const _ in this.state[i][g])f[_]||(this.deletedStates[i][g][_]=null)}else for(const _ in f)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][_]===null&&delete this.deletedStates[i][g][_]}removeFeatureState(i,u,f){if(this.deletedStates[i]===null)return;const g=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&u!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][f]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(f in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][f]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,u){const f=String(u),g=c.e({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const _=this.deletedStates[i][u];if(_===null)return{};for(const C in _)delete g[C]}return g}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const C in this.stateChanges[g])this.state[g][C]||(this.state[g][C]={}),c.e(this.state[g][C],this.stateChanges[g][C]),_[C]=this.state[g][C];f[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const C in this.state[g])_[C]={},this.state[g][C]={};else for(const C in this.deletedStates[g]){if(this.deletedStates[g][C]===null)this.state[g][C]={};else for(const I of Object.keys(this.deletedStates[g][C]))delete this.state[g][C][I];_[C]=this.state[g][C]}f[g]=f[g]||{},c.e(f[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const g in i)i[g].setFeatureState(f,u)}}class xr extends c.E{constructor(i,u,f){super(),this.id=i,this.dispatcher=f,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,C,I)=>{const A=new(Cr(_.type))(g,_,C,I);if(A.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${A.id}`);return A})(i,u,f,this),this._tiles={},this._cache=new _r(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ue,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new c.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Er).map(i=>i.key)}getRenderableIds(i){const u=[];for(const f in this._tiles)this._isIdRenderable(f,i)&&u.push(this._tiles[f]);return i?u.sort((f,g)=>{const _=f.tileID,C=g.tileID,I=new c.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),A=new c.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-C.overscaledZ||A.y-I.y||A.x-I.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(Er).map(f=>f.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,i,u)))}_tileLoaded(i,u,f,g){if(g)return i.state="errored",void(g.status!==404?this._source.fire(new c.j(g,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=c.h.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const _=u[g];if(i.neighboringTiles&&i.neighboringTiles[_]){const C=this.getTileByID(_);f(i,C),f(C,i)}}function f(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let C=_.tileID.canonical.x-g.tileID.canonical.x;const I=_.tileID.canonical.y-g.tileID.canonical.y,A=Math.pow(2,g.tileID.canonical.z),L=_.tileID.key;C===0&&I===0||Math.abs(I)>1||(Math.abs(C)>1&&(Math.abs(C+A)===1?C+=A:Math.abs(C-A)===1&&(C-=A)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,C,I),g.neighboringTiles&&g.neighboringTiles[L]&&(g.neighboringTiles[L].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,f,g){for(const _ in this._tiles){let C=this._tiles[_];if(g[_]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>f)continue;let I=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){const L=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[L.key],C&&C.hasData()&&(I=L)}let A=I;for(;A.overscaledZ>u;)if(A=A.scaledTo(A.overscaledZ-1),i[A.key]){g[I.key]=I;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=i.overscaledZ-1;f>=u;f--){const g=i.scaledTo(f),_=this._getLoadedTile(g);if(_)return _}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(u*f*(this._maxTileCacheZoomLevels===null?c.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const f={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),f[_.tileID.key]=_}this._tiles=f;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(F=>new c.O(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y)):(f=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(f=f.filter(F=>this._source.hasTile(F)))):f=[];const g=i.coveringZoomLevel(this._source),_=Math.max(g-xr.maxOverzooming,this._source.minzoom),C=Math.max(g+xr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const F={};for(const V of f)if(V.canonical.z>this._source.minzoom){const ee=V.scaledTo(V.canonical.z-1);F[ee.key]=ee;const he=V.scaledTo(Math.max(this._source.minzoom,Math.min(V.canonical.z,5)));F[he.key]=he}f=f.concat(Object.values(F))}const I=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const A=this._updateRetainedTiles(f,g);if(Vt(this._source.type)){const F={},V={},ee=Object.keys(A),he=c.h.now();for(const de of ee){const me=A[de],ce=this._tiles[de];if(!ce||ce.fadeEndTime!==0&&ce.fadeEndTime<=he)continue;const Te=this.findLoadedParent(me,_);Te&&(this._addTile(Te.tileID),F[Te.tileID.key]=Te.tileID),V[de]=me}this._retainLoadedChildren(V,g,C,A);for(const de in F)A[de]||(this._coveredTiles[de]=!0,A[de]=F[de]);if(u){const de={},me={};for(const ce of f)this._tiles[ce.key].hasData()?de[ce.key]=ce:me[ce.key]=ce;for(const ce in me){const Te=me[ce].children(this._source.maxzoom);this._tiles[Te[0].key]&&this._tiles[Te[1].key]&&this._tiles[Te[2].key]&&this._tiles[Te[3].key]&&(de[Te[0].key]=A[Te[0].key]=Te[0],de[Te[1].key]=A[Te[1].key]=Te[1],de[Te[2].key]=A[Te[2].key]=Te[2],de[Te[3].key]=A[Te[3].key]=Te[3],delete me[ce])}for(const ce in me){const Te=this.findLoadedParent(me[ce],this._source.minzoom);if(Te){de[Te.tileID.key]=A[Te.tileID.key]=Te.tileID;for(const Ne in de)de[Ne].isChildOf(Te.tileID)&&delete de[Ne]}}for(const ce in this._tiles)de[ce]||(this._coveredTiles[ce]=!0)}}for(const F in A)this._tiles[F].clearFadeHold();const L=c.ab(this._tiles,A);for(const F of L){const V=this._tiles[F];V.hasSymbolBuckets&&!V.holdingForFade()?V.setHoldDuration(this.map._fadeDuration):V.hasSymbolBuckets&&!V.symbolFadeFinished()||this._removeTile(F)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const f={},g={},_=Math.max(u-xr.maxOverzooming,this._source.minzoom),C=Math.max(u+xr.maxUnderzooming,this._source.minzoom),I={};for(const A of i){const L=this._addTile(A);f[A.key]=A,L.hasData()||u<this._source.maxzoom&&(I[A.key]=A)}this._retainLoadedChildren(I,u,C,f);for(const A of i){let L=this._tiles[A.key];if(L.hasData())continue;if(u+1>this._source.maxzoom){const V=A.children(this._source.maxzoom)[0],ee=this.getTile(V);if(ee&&ee.hasData()){f[V.key]=V;continue}}else{const V=A.children(this._source.maxzoom);if(f[V[0].key]&&f[V[1].key]&&f[V[2].key]&&f[V[3].key])continue}let F=L.wasRequested();for(let V=A.overscaledZ-1;V>=_;--V){const ee=A.scaledTo(V);if(g[ee.key])break;if(g[ee.key]=!0,L=this.getTile(ee),!L&&F&&(L=this._addTile(ee)),L){const he=L.hasData();if((F||he)&&(f[ee.key]=ee),F=L.wasRequested(),he)break}}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let f,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){f=this._loadedParentTiles[g.key];break}u.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(f=this._getLoadedTile(_),f)break;g=_}for(const _ of u)this._loadedParentTiles[_]=f}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const f=u;return u||(u=new Ft(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,f||this._source.fire(new c.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=u.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,f){const g=[],_=this.transform;if(!_)return g;const C=f?_.getCameraQueryGeometry(i):i,I=i.map(de=>_.pointCoordinate(de,this.terrain)),A=C.map(de=>_.pointCoordinate(de,this.terrain)),L=this.getIds();let F=1/0,V=1/0,ee=-1/0,he=-1/0;for(const de of A)F=Math.min(F,de.x),V=Math.min(V,de.y),ee=Math.max(ee,de.x),he=Math.max(he,de.y);for(let de=0;de<L.length;de++){const me=this._tiles[L[de]];if(me.holdingForFade())continue;const ce=me.tileID,Te=Math.pow(2,_.zoom-me.tileID.overscaledZ),Ne=u*me.queryPadding*c.N/me.tileSize/Te,ve=[ce.getTilePoint(new c.U(F,V)),ce.getTilePoint(new c.U(ee,he))];if(ve[0].x-Ne<c.N&&ve[0].y-Ne<c.N&&ve[1].x+Ne>=0&&ve[1].y+Ne>=0){const ze=I.map(qe=>ce.getTilePoint(qe)),Ge=A.map(qe=>ce.getTilePoint(qe));g.push({tile:me,tileID:ce,queryGeometry:ze,cameraQueryGeometry:Ge,scale:Te})}}return g}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Vt(this._source.type)){const i=c.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=i)return!0}return!1}setFeatureState(i,u,f){this._state.updateState(i=i||"_geojsonTileLayer",u,f)}removeFeatureState(i,u,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,f)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,f){const g=this._tiles[i];g&&g.setDependencies(u,f)}reloadTilesForDependencies(i,u){for(const f in this._tiles)this._tiles[f].hasDependency(i,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,u))}}function Er(y,i){const u=Math.abs(2*y.wrap)-+(y.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||f-u||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function Vt(y){return y==="raster"||y==="image"||y==="video"}xr.maxOverzooming=10,xr.maxUnderzooming=3;const Jt="mapboxgl_preloaded_worker_pool";class Ar{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Ar.workerCount;)this.workers.push(new Worker(c.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Jt]}numActive(){return Object.keys(this.active).length}}const Br=Math.floor(c.h.hardwareConcurrency/2);let cr;function nr(){return cr||(cr=new Ar),cr}Ar.workerCount=c.ac(globalThis)?Math.max(Math.min(Br,3),1):1;class Kt{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=c.ad(i,0,1);let u=1,f=this._distances[u];const g=i*this.paddedLength+this.padding;for(;f<g&&u<this._distances.length;)f=this._distances[++u];const _=u-1,C=this._distances[_],I=f-C,A=I>0?(g-C)/I:0;return this.points[_].mult(1-A).add(this.points[u].mult(A))}}function lr(y,i){let u=!0;return y==="always"||y!=="never"&&i!=="never"||(u=!1),u}class Wr{constructor(i,u,f){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(u/f);for(let C=0;C<this.xCellCount*this.yCellCount;C++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,f,g,_){this._forEachCell(u,f,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(i,u,f,g){this._forEachCell(u-g,f-g,u+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(f),this.circles.push(g)}_insertBoxCell(i,u,f,g,_,C){this.boxCells[_].push(C)}_insertCircleCell(i,u,f,g,_,C){this.circleCells[_].push(C)}_query(i,u,f,g,_,C,I){if(f<0||i>this.width||g<0||u>this.height)return[];const A=[];if(i<=0&&u<=0&&this.width<=f&&this.height<=g){if(_)return[{key:null,x1:i,y1:u,x2:f,y2:g}];for(let L=0;L<this.boxKeys.length;L++)A.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const F=this.circles[3*L],V=this.circles[3*L+1],ee=this.circles[3*L+2];A.push({key:this.circleKeys[L],x1:F-ee,y1:V-ee,x2:F+ee,y2:V+ee})}}else this._forEachCell(i,u,f,g,this._queryCell,A,{hitTest:_,overlapMode:C,seenUids:{box:{},circle:{}}},I);return A}query(i,u,f,g){return this._query(i,u,f,g,!1,null)}hitTest(i,u,f,g,_,C){return this._query(i,u,f,g,!0,_,C).length>0}hitTestCircle(i,u,f,g,_){const C=i-f,I=i+f,A=u-f,L=u+f;if(I<0||C>this.width||L<0||A>this.height)return!1;const F=[];return this._forEachCell(C,A,I,L,this._queryCellCircle,F,{hitTest:!0,overlapMode:g,circle:{x:i,y:u,radius:f},seenUids:{box:{},circle:{}}},_),F.length>0}_queryCell(i,u,f,g,_,C,I,A){const{seenUids:L,hitTest:F,overlapMode:V}=I,ee=this.boxCells[_];if(ee!==null){const de=this.bboxes;for(const me of ee)if(!L.box[me]){L.box[me]=!0;const ce=4*me,Te=this.boxKeys[me];if(i<=de[ce+2]&&u<=de[ce+3]&&f>=de[ce+0]&&g>=de[ce+1]&&(!A||A(Te))&&(!F||!lr(V,Te.overlapMode))&&(C.push({key:Te,x1:de[ce],y1:de[ce+1],x2:de[ce+2],y2:de[ce+3]}),F))return!0}}const he=this.circleCells[_];if(he!==null){const de=this.circles;for(const me of he)if(!L.circle[me]){L.circle[me]=!0;const ce=3*me,Te=this.circleKeys[me];if(this._circleAndRectCollide(de[ce],de[ce+1],de[ce+2],i,u,f,g)&&(!A||A(Te))&&(!F||!lr(V,Te.overlapMode))){const Ne=de[ce],ve=de[ce+1],ze=de[ce+2];if(C.push({key:Te,x1:Ne-ze,y1:ve-ze,x2:Ne+ze,y2:ve+ze}),F)return!0}}}return!1}_queryCellCircle(i,u,f,g,_,C,I,A){const{circle:L,seenUids:F,overlapMode:V}=I,ee=this.boxCells[_];if(ee!==null){const de=this.bboxes;for(const me of ee)if(!F.box[me]){F.box[me]=!0;const ce=4*me,Te=this.boxKeys[me];if(this._circleAndRectCollide(L.x,L.y,L.radius,de[ce+0],de[ce+1],de[ce+2],de[ce+3])&&(!A||A(Te))&&!lr(V,Te.overlapMode))return C.push(!0),!0}}const he=this.circleCells[_];if(he!==null){const de=this.circles;for(const me of he)if(!F.circle[me]){F.circle[me]=!0;const ce=3*me,Te=this.circleKeys[me];if(this._circlesCollide(de[ce],de[ce+1],de[ce+2],L.x,L.y,L.radius)&&(!A||A(Te))&&!lr(V,Te.overlapMode))return C.push(!0),!0}}}_forEachCell(i,u,f,g,_,C,I,A){const L=this._convertToXCellCoord(i),F=this._convertToYCellCoord(u),V=this._convertToXCellCoord(f),ee=this._convertToYCellCoord(g);for(let he=L;he<=V;he++)for(let de=F;de<=ee;de++)if(_.call(this,i,u,f,g,this.xCellCount*de+he,C,I,A))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,f,g,_,C){const I=g-i,A=_-u,L=f+C;return L*L>I*I+A*A}_circleAndRectCollide(i,u,f,g,_,C,I){const A=(C-g)/2,L=Math.abs(i-(g+A));if(L>A+f)return!1;const F=(I-_)/2,V=Math.abs(u-(_+F));if(V>F+f)return!1;if(L<=A||V<=F)return!0;const ee=L-A,he=V-F;return ee*ee+he*he<=f*f}}function Oe(y,i,u,f,g){const _=c.Z();return i?(c.a0(_,_,[1/g,1/g,1]),u||c.ae(_,_,f.angle)):c.a1(_,f.labelPlaneMatrix,y),_}function St(y,i,u,f,g){if(i){const _=c.af(y);return c.a0(_,_,[g,g,1]),u||c.ae(_,_,-f.angle),_}return f.glCoordMatrix}function _t(y,i,u){let f;u?(f=[y.x,y.y,u(y.x,y.y),1],c.ag(f,f,i)):(f=[y.x,y.y,0,1],fe(f,f,i));const g=f[3];return{point:new c.P(f[0]/g,f[1]/g),signedDistanceFromCamera:g}}function Ce(y,i){return .5+y/i*.5}function He(y,i){const u=y[0]/y[3],f=y[1]/y[3];return u>=-i[0]&&u<=i[0]&&f>=-i[1]&&f<=i[1]}function Ze(y,i,u,f,g,_,C,I,A,L){const F=f?y.textSizeData:y.iconSizeData,V=c.ah(F,u.transform.zoom),ee=[256/u.width*2+1,256/u.height*2+1],he=f?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;he.clear();const de=y.lineVertexArray,me=f?y.text.placedSymbolArray:y.icon.placedSymbolArray,ce=u.transform.width/u.transform.height;let Te=!1;for(let Ne=0;Ne<me.length;Ne++){const ve=me.get(Ne);if(ve.hidden||ve.writingMode===c.ai.vertical&&!Te){ne(ve.numGlyphs,he);continue}let ze;if(Te=!1,L?(ze=[ve.anchorX,ve.anchorY,L(ve.anchorX,ve.anchorY),1],c.ag(ze,ze,i)):(ze=[ve.anchorX,ve.anchorY,0,1],fe(ze,ze,i)),!He(ze,ee)){ne(ve.numGlyphs,he);continue}const Ge=Ce(u.transform.cameraToCenterDistance,ze[3]),qe=c.aj(F,V,ve),tt=C?qe/Ge:qe*Ge,ut=new c.P(ve.anchorX,ve.anchorY),at=_t(ut,g,L).point,pt={projections:{},offsets:{}},Ht=kt(ve,tt,!1,I,i,g,_,y.glyphOffsetArray,de,he,at,ut,pt,ce,A,L);Te=Ht.useVertical,(Ht.notEnoughRoom||Te||Ht.needsFlipping&&kt(ve,tt,!0,I,i,g,_,y.glyphOffsetArray,de,he,at,ut,pt,ce,A,L).notEnoughRoom)&&ne(ve.numGlyphs,he)}f?y.text.dynamicLayoutVertexBuffer.updateData(he):y.icon.dynamicLayoutVertexBuffer.updateData(he)}function wt(y,i,u,f,g,_,C,I,A,L,F,V,ee){const he=I.glyphStartIndex+I.numGlyphs,de=I.lineStartIndex,me=I.lineStartIndex+I.lineLength,ce=i.getoffsetX(I.glyphStartIndex),Te=i.getoffsetX(he-1),Ne=H(y*ce,u,f,g,_,C,I.segment,de,me,A,L,F,V,ee);if(!Ne)return null;const ve=H(y*Te,u,f,g,_,C,I.segment,de,me,A,L,F,V,ee);return ve?{first:Ne,last:ve}:null}function gt(y,i,u,f){return y===c.ai.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*f?{useVertical:!0}:(y===c.ai.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function kt(y,i,u,f,g,_,C,I,A,L,F,V,ee,he,de,me){const ce=i/24,Te=y.lineOffsetX*ce,Ne=y.lineOffsetY*ce;let ve;if(y.numGlyphs>1){const ze=y.glyphStartIndex+y.numGlyphs,Ge=y.lineStartIndex,qe=y.lineStartIndex+y.lineLength,tt=wt(ce,I,Te,Ne,u,F,V,y,A,_,ee,de,me);if(!tt)return{notEnoughRoom:!0};const ut=_t(tt.first.point,C,me).point,at=_t(tt.last.point,C,me).point;if(f&&!u){const pt=gt(y.writingMode,ut,at,he);if(pt)return pt}ve=[tt.first];for(let pt=y.glyphStartIndex+1;pt<ze-1;pt++)ve.push(H(ce*I.getoffsetX(pt),Te,Ne,u,F,V,y.segment,Ge,qe,A,_,ee,de,me));ve.push(tt.last)}else{if(f&&!u){const Ge=_t(V,g,me).point,qe=y.lineStartIndex+y.segment+1,tt=new c.P(A.getx(qe),A.gety(qe)),ut=_t(tt,g,me),at=ut.signedDistanceFromCamera>0?ut.point:ur(V,tt,Ge,1,g,me),pt=gt(y.writingMode,Ge,at,he);if(pt)return pt}const ze=H(ce*I.getoffsetX(y.glyphStartIndex),Te,Ne,u,F,V,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,A,_,ee,de,me);if(!ze)return{notEnoughRoom:!0};ve=[ze]}for(const ze of ve)c.ak(L,ze.point,ze.angle);return{}}function ur(y,i,u,f,g,_){const C=_t(y.add(y.sub(i)._unit()),g,_).point,I=u.sub(C);return u.add(I._mult(f/I.mag()))}function Lt(y,i){const{projectionCache:u,lineVertexArray:f,labelPlaneMatrix:g,tileAnchorPoint:_,distanceFromAnchor:C,getElevation:I,previousVertex:A,direction:L,absOffsetX:F}=i;if(u.projections[y])return u.projections[y];const V=new c.P(f.getx(y),f.gety(y)),ee=_t(V,g,I);if(ee.signedDistanceFromCamera>0)return u.projections[y]=ee.point,ee.point;const he=y-L;return ur(C===0?_:new c.P(f.getx(he),f.gety(he)),V,A,F-C+1,g,I)}function dr(y,i,u){return y._unit()._perp()._mult(i*u)}function pe(y,i,u,f,g,_,C,I){const{projectionCache:A,direction:L}=I;if(A.offsets[y])return A.offsets[y];const F=u.add(i);if(y+L<f||y+L>=g)return A.offsets[y]=F,F;const V=Lt(y+L,I),ee=dr(V.sub(u),C,L),he=u.add(ee),de=V.add(ee);return A.offsets[y]=c.al(_,F,he,de)||F,A.offsets[y]}function H(y,i,u,f,g,_,C,I,A,L,F,V,ee,he){const de=f?y-i:y+i;let me=de>0?1:-1,ce=0;f&&(me*=-1,ce=Math.PI),me<0&&(ce+=Math.PI);let Te,Ne,ve=me>0?I+C:I+C+1,ze=g,Ge=g,qe=0,tt=0;const ut=Math.abs(de),at=[];let pt;for(;qe+tt<=ut;){if(ve+=me,ve<I||ve>=A)return null;qe+=tt,Ge=ze,Ne=Te;const It={projectionCache:V,lineVertexArray:L,labelPlaneMatrix:F,tileAnchorPoint:_,distanceFromAnchor:qe,getElevation:he,previousVertex:Ge,direction:me,absOffsetX:ut};if(ze=Lt(ve,It),u===0)at.push(Ge),pt=ze.sub(Ge);else{let ar;const qt=ze.sub(Ge);ar=qt.mag()===0?dr(Lt(ve+me,It).sub(ze),u,me):dr(qt,u,me),Ne||(Ne=Ge.add(ar)),Te=pe(ve,ar,ze,I,A,Ne,u,It),at.push(Ne),pt=Te.sub(Ne)}tt=pt.mag()}const Ht=pt._mult((ut-qe)/tt)._add(Ne||Ge),mr=ce+Math.atan2(ze.y-Ge.y,ze.x-Ge.x);return at.push(Ht),{point:Ht,angle:ee?mr:0,path:at}}const W=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ne(y,i){for(let u=0;u<y;u++){const f=i.length;i.resize(f+4),i.float32.set(W,3*f)}}function fe(y,i,u){const f=i[0],g=i[1];return y[0]=u[0]*f+u[4]*g+u[12],y[1]=u[1]*f+u[5]*g+u[13],y[3]=u[3]*f+u[7]*g+u[15],y}const ge=100;class X{constructor(i,u=new Wr(i.width+200,i.height+200,25),f=new Wr(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+ge,this.screenBottomBoundary=i.height+ge,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,f,g,_,C){const I=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY,C),A=f*I.perspectiveRatio,L=i.x1*A+I.point.x,F=i.y1*A+I.point.y,V=i.x2*A+I.point.x,ee=i.y2*A+I.point.y;return!this.isInsideGrid(L,F,V,ee)||u!=="always"&&this.grid.hitTest(L,F,V,ee,u,_)||I.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[L,F,V,ee],offscreen:this.isOffscreen(L,F,V,ee)}}placeCollisionCircles(i,u,f,g,_,C,I,A,L,F,V,ee,he,de){const me=[],ce=new c.P(u.anchorX,u.anchorY),Te=_t(ce,C,de),Ne=Ce(this.transform.cameraToCenterDistance,Te.signedDistanceFromCamera),ve=(F?_/Ne:_*Ne)/c.ap,ze=_t(ce,I,de).point,Ge=wt(ve,g,u.lineOffsetX*ve,u.lineOffsetY*ve,!1,ze,ce,u,f,I,{projections:{},offsets:{}},!1,de);let qe=!1,tt=!1,ut=!0;if(Ge){const at=.5*ee*Ne+he,pt=new c.P(-100,-100),Ht=new c.P(this.screenRightBoundary,this.screenBottomBoundary),mr=new Kt,It=Ge.first,ar=Ge.last;let qt=[];for(let hr=It.path.length-1;hr>=1;hr--)qt.push(It.path[hr]);for(let hr=1;hr<ar.path.length;hr++)qt.push(ar.path[hr]);const Zr=2.5*at;if(A){const hr=qt.map(gr=>_t(gr,A,de));qt=hr.some(gr=>gr.signedDistanceFromCamera<=0)?[]:hr.map(gr=>gr.point)}let fr=[];if(qt.length>0){const hr=qt[0].clone(),gr=qt[0].clone();for(let Tn=1;Tn<qt.length;Tn++)hr.x=Math.min(hr.x,qt[Tn].x),hr.y=Math.min(hr.y,qt[Tn].y),gr.x=Math.max(gr.x,qt[Tn].x),gr.y=Math.max(gr.y,qt[Tn].y);fr=hr.x>=pt.x&&gr.x<=Ht.x&&hr.y>=pt.y&&gr.y<=Ht.y?[qt]:gr.x<pt.x||hr.x>Ht.x||gr.y<pt.y||hr.y>Ht.y?[]:c.am([qt],pt.x,pt.y,Ht.x,Ht.y)}for(const hr of fr){mr.reset(hr,.25*at);let gr=0;gr=mr.length<=.5*at?1:Math.ceil(mr.paddedLength/Zr)+1;for(let Tn=0;Tn<gr;Tn++){const en=Tn/Math.max(gr-1,1),ai=mr.lerp(en),Un=ai.x+ge,Mn=ai.y+ge;me.push(Un,Mn,at,0);const no=Un-at,an=Mn-at,Xo=Un+at,Jo=Mn+at;if(ut=ut&&this.isOffscreen(no,an,Xo,Jo),tt=tt||this.isInsideGrid(no,an,Xo,Jo),i!=="always"&&this.grid.hitTestCircle(Un,Mn,at,i,V)&&(qe=!0,!L))return{circles:[],offscreen:!1,collisionDetected:qe}}}}return{circles:!L&&qe||!tt||Ne<this.perspectiveRatioCutoff?[]:me,offscreen:ut,collisionDetected:qe}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,g=1/0,_=-1/0,C=-1/0;for(const F of i){const V=new c.P(F.x+ge,F.y+ge);f=Math.min(f,V.x),g=Math.min(g,V.y),_=Math.max(_,V.x),C=Math.max(C,V.y),u.push(V)}const I=this.grid.query(f,g,_,C).concat(this.ignoredGrid.query(f,g,_,C)),A={},L={};for(const F of I){const V=F.key;if(A[V.bucketInstanceId]===void 0&&(A[V.bucketInstanceId]={}),A[V.bucketInstanceId][V.featureIndex])continue;const ee=[new c.P(F.x1,F.y1),new c.P(F.x2,F.y1),new c.P(F.x2,F.y2),new c.P(F.x1,F.y2)];c.an(u,ee)&&(A[V.bucketInstanceId][V.featureIndex]=!0,L[V.bucketInstanceId]===void 0&&(L[V.bucketInstanceId]=[]),L[V.bucketInstanceId].push(V.featureIndex))}return L}insertCollisionBox(i,u,f,g,_,C){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,f,g,_,C){const I=f?this.ignoredGrid:this.grid,A={bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u};for(let L=0;L<i.length;L+=4)I.insertCircle(A,i[L],i[L+1],i[L+2])}projectAndGetPerspectiveRatio(i,u,f,g){let _;return g?(_=[u,f,g(u,f),1],c.ag(_,_,i)):(_=[u,f,0,1],fe(_,_,i)),{point:new c.P((_[0]/_[3]+1)/2*this.transform.width+ge,(-_[1]/_[3]+1)/2*this.transform.height+ge),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(i,u,f,g){return f<ge||i>=this.screenRightBoundary||g<ge||u>this.screenBottomBoundary}isInsideGrid(i,u,f,g){return f>=0&&i<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=c.ao([]);return c.$(i,i,[-100,-100,0]),i}}function Y(y,i,u){return i*(c.N/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class Q{constructor(i,u,f,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):g&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class le{constructor(i,u,f,g,_){this.text=new Q(i?i.text:null,u,f,_),this.icon=new Q(i?i.icon:null,u,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Pe{constructor(i,u,f){this.text=i,this.icon=u,this.skipFade=f}}class Me{constructor(){this.invProjMatrix=c.Z(),this.viewportMatrix=c.Z(),this.circles=[]}}class Fe{constructor(i,u,f,g,_){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=_}}class Ye{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[i]}}function rt(y,i,u,f,g){const{horizontalAlign:_,verticalAlign:C}=c.au(y);return new c.P(-(_-.5)*i+f[0]*g,-(C-.5)*u+f[1]*g)}function Xe(y,i,u,f,g,_){const{x1:C,x2:I,y1:A,y2:L,anchorPointX:F,anchorPointY:V}=y,ee=new c.P(i,u);return f&&ee._rotate(g?_:-_),{x1:C+ee.x,y1:A+ee.y,x2:I+ee.x,y2:L+ee.y,anchorPointX:F,anchorPointY:V}}class et{constructor(i,u,f,g,_){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new X(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Ye(g),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,f,g){const _=f.getBucket(u),C=f.latestFeatureIndex;if(!_||!C||u.id!==_.layerIds[0])return;const I=f.collisionBoxArray,A=_.layers[0].layout,L=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),F=f.tileSize/c.N,V=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),ee=A.get("text-pitch-alignment")==="map",he=A.get("text-rotation-alignment")==="map",de=Y(f,1,this.transform.zoom),me=Oe(V,ee,he,this.transform,de);let ce=null;if(ee){const Ne=St(V,ee,he,this.transform,de);ce=c.a1([],this.transform.labelPlaneMatrix,Ne)}this.retainedQueryData[_.bucketInstanceId]=new Fe(_.bucketInstanceId,C,_.sourceLayerIndex,_.index,f.tileID);const Te={bucket:_,layout:A,posMatrix:V,textLabelPlaneMatrix:me,labelToScreenMatrix:ce,scale:L,textPixelRatio:F,holdingForFade:f.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:c.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const Ne of _.sortKeyRanges){const{sortKey:ve,symbolInstanceStart:ze,symbolInstanceEnd:Ge}=Ne;i.push({sortKey:ve,symbolInstanceStart:ze,symbolInstanceEnd:Ge,parameters:Te})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:Te})}attemptAnchorPlacement(i,u,f,g,_,C,I,A,L,F,V,ee,he,de,me,ce){const Te=c.aq[i.textAnchor],Ne=[i.textOffset0,i.textOffset1],ve=rt(Te,f,g,Ne,_),ze=this.collisionIndex.placeCollisionBox(Xe(u,ve.x,ve.y,C,I,this.transform.angle),V,A,L,F.predicate,ce);if((!me||this.collisionIndex.placeCollisionBox(Xe(me,ve.x,ve.y,C,I,this.transform.angle),V,A,L,F.predicate,ce).box.length!==0)&&ze.box.length>0){let Ge;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(Ge=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ee.crossTileID]={textOffset:Ne,width:f,height:g,anchor:Te,textBoxScale:_,prevAnchor:Ge},this.markUsedJustification(he,Te,ee,de),he.allowVerticalPlacement&&(this.markUsedOrientation(he,de,ee),this.placedOrientations[ee.crossTileID]=de),{shift:ve,placedGlyphBoxes:ze}}}placeLayerBucketPart(i,u,f){const{bucket:g,layout:_,posMatrix:C,textLabelPlaneMatrix:I,labelToScreenMatrix:A,textPixelRatio:L,holdingForFade:F,collisionBoxArray:V,partiallyEvaluatedTextSize:ee,collisionGroup:he}=i.parameters,de=_.get("text-optional"),me=_.get("icon-optional"),ce=c.ar(_,"text-overlap","text-allow-overlap"),Te=ce==="always",Ne=c.ar(_,"icon-overlap","icon-allow-overlap"),ve=Ne==="always",ze=_.get("text-rotation-alignment")==="map",Ge=_.get("text-pitch-alignment")==="map",qe=_.get("icon-text-fit")!=="none",tt=_.get("symbol-z-order")==="viewport-y",ut=Te&&(ve||!g.hasIconData()||me),at=ve&&(Te||!g.hasTextData()||de);!g.collisionArrays&&V&&g.deserializeCollisionBoxes(V);const pt=this.retainedQueryData[g.bucketInstanceId].tileID,Ht=this.terrain?(It,ar)=>this.terrain.getElevation(pt,It,ar):null,mr=(It,ar)=>{var qt,Zr;if(u[It.crossTileID])return;if(F)return void(this.placements[It.crossTileID]=new Pe(!1,!1,!1));let fr=!1,hr=!1,gr=!0,Tn=null,en={box:null,offscreen:null},ai={box:null,offscreen:null},Un=null,Mn=null,no=null,an=0,Xo=0,Jo=0;ar.textFeatureIndex?an=ar.textFeatureIndex:It.useRuntimeCollisionCircles&&(an=It.featureIndex),ar.verticalTextFeatureIndex&&(Xo=ar.verticalTextFeatureIndex);const qa=ar.textBox;if(qa){const hi=Pn=>{let Hn=c.ai.horizontal;if(g.allowVerticalPlacement&&!Pn&&this.prevPlacement){const Fi=this.prevPlacement.placedOrientations[It.crossTileID];Fi&&(this.placedOrientations[It.crossTileID]=Fi,Hn=Fi,this.markUsedOrientation(g,Hn,It))}return Hn},si=(Pn,Hn)=>{if(g.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&ar.verticalTextBox){for(const Fi of g.writingModes)if(Fi===c.ai.vertical?(en=Hn(),ai=en):en=Pn(),en&&en.box&&en.box.length)break}else en=Pn()},Ci=It.textAnchorOffsetStartIndex,bs=It.textAnchorOffsetEndIndex;if(bs===Ci){const Pn=(Hn,Fi)=>{const kn=this.collisionIndex.placeCollisionBox(Hn,ce,L,C,he.predicate,Ht);return kn&&kn.box&&kn.box.length&&(this.markUsedOrientation(g,Fi,It),this.placedOrientations[It.crossTileID]=Fi),kn};si(()=>Pn(qa,c.ai.horizontal),()=>{const Hn=ar.verticalTextBox;return g.allowVerticalPlacement&&It.numVerticalGlyphVertices>0&&Hn?Pn(Hn,c.ai.vertical):{box:null,offscreen:null}}),hi(en&&en.box&&en.box.length)}else{let Pn=c.aq[(Zr=(qt=this.prevPlacement)===null||qt===void 0?void 0:qt.variableOffsets[It.crossTileID])===null||Zr===void 0?void 0:Zr.anchor];const Hn=(kn,ws,fu)=>{const Pm=kn.x2-kn.x1,km=kn.y2-kn.y1,P0=It.textBoxScale,zh=qe&&Ne==="never"?ws:null;let Yo={box:[],offscreen:!1},Ss=ce==="never"?1:2,Qo="never";Pn&&Ss++;for(let vo=0;vo<Ss;vo++){for(let ea=Ci;ea<bs;ea++){const Rh=g.textAnchorOffsets.get(ea);if(Pn&&Rh.textAnchor!==Pn)continue;const wa=this.attemptAnchorPlacement(Rh,kn,Pm,km,P0,ze,Ge,L,C,he,Qo,It,g,fu,zh,Ht);if(wa&&(Yo=wa.placedGlyphBoxes,Yo&&Yo.box&&Yo.box.length))return fr=!0,Tn=wa.shift,Yo}Pn?Pn=null:Qo=ce}return Yo};si(()=>Hn(qa,ar.iconBox,c.ai.horizontal),()=>{const kn=ar.verticalTextBox;return g.allowVerticalPlacement&&!(en&&en.box&&en.box.length)&&It.numVerticalGlyphVertices>0&&kn?Hn(kn,ar.verticalIconBox,c.ai.vertical):{box:null,offscreen:null}}),en&&(fr=en.box,gr=en.offscreen);const Fi=hi(en&&en.box);if(!fr&&this.prevPlacement){const kn=this.prevPlacement.variableOffsets[It.crossTileID];kn&&(this.variableOffsets[It.crossTileID]=kn,this.markUsedJustification(g,kn.anchor,It,Fi))}}}if(Un=en,fr=Un&&Un.box&&Un.box.length>0,gr=Un&&Un.offscreen,It.useRuntimeCollisionCircles){const hi=g.text.placedSymbolArray.get(It.centerJustifiedTextSymbolIndex),si=c.aj(g.textSizeData,ee,hi),Ci=_.get("text-padding");Mn=this.collisionIndex.placeCollisionCircles(ce,hi,g.lineVertexArray,g.glyphOffsetArray,si,C,I,A,f,Ge,he.predicate,It.collisionCircleDiameter,Ci,Ht),Mn.circles.length&&Mn.collisionDetected&&!f&&c.w("Collisions detected, but collision boxes are not shown"),fr=Te||Mn.circles.length>0&&!Mn.collisionDetected,gr=gr&&Mn.offscreen}if(ar.iconFeatureIndex&&(Jo=ar.iconFeatureIndex),ar.iconBox){const hi=si=>{const Ci=qe&&Tn?Xe(si,Tn.x,Tn.y,ze,Ge,this.transform.angle):si;return this.collisionIndex.placeCollisionBox(Ci,Ne,L,C,he.predicate,Ht)};ai&&ai.box&&ai.box.length&&ar.verticalIconBox?(no=hi(ar.verticalIconBox),hr=no.box.length>0):(no=hi(ar.iconBox),hr=no.box.length>0),gr=gr&&no.offscreen}const xs=de||It.numHorizontalGlyphVertices===0&&It.numVerticalGlyphVertices===0,nl=me||It.numIconVertices===0;if(xs||nl?nl?xs||(hr=hr&&fr):fr=hr&&fr:hr=fr=hr&&fr,fr&&Un&&Un.box&&this.collisionIndex.insertCollisionBox(Un.box,ce,_.get("text-ignore-placement"),g.bucketInstanceId,ai&&ai.box&&Xo?Xo:an,he.ID),hr&&no&&this.collisionIndex.insertCollisionBox(no.box,Ne,_.get("icon-ignore-placement"),g.bucketInstanceId,Jo,he.ID),Mn&&(fr&&this.collisionIndex.insertCollisionCircles(Mn.circles,ce,_.get("text-ignore-placement"),g.bucketInstanceId,an,he.ID),f)){const hi=g.bucketInstanceId;let si=this.collisionCircleArrays[hi];si===void 0&&(si=this.collisionCircleArrays[hi]=new Me);for(let Ci=0;Ci<Mn.circles.length;Ci+=4)si.circles.push(Mn.circles[Ci+0]),si.circles.push(Mn.circles[Ci+1]),si.circles.push(Mn.circles[Ci+2]),si.circles.push(Mn.collisionDetected?1:0)}if(It.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[It.crossTileID]=new Pe(fr||ut,hr||at,gr||g.justReloaded),u[It.crossTileID]=!0};if(tt){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const It=g.getSortedSymbolIndexes(this.transform.angle);for(let ar=It.length-1;ar>=0;--ar){const qt=It[ar];mr(g.symbolInstances.get(qt),g.collisionArrays[qt])}}else for(let It=i.symbolInstanceStart;It<i.symbolInstanceEnd;It++)mr(g.symbolInstances.get(It),g.collisionArrays[It]);if(f&&g.bucketInstanceId in this.collisionCircleArrays){const It=this.collisionCircleArrays[g.bucketInstanceId];c.as(It.invProjMatrix,C),It.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,u,f,g){let _;_=g===c.ai.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[c.at(u)];const C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const I of C)I>=0&&(i.text.placedSymbolArray.get(I).crossTileID=_>=0&&I!==_?0:f.crossTileID)}markUsedOrientation(i,u,f){const g=u===c.ai.horizontal||u===c.ai.horizontalOnly?u:0,_=u===c.ai.vertical?u:0,C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const I of C)i.text.placedSymbolArray.get(I).placedOrientation=g;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(i):1,_=u?u.opacities:{},C=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(const A in this.placements){const L=this.placements[A],F=_[A];F?(this.opacities[A]=new le(F,g,L.text,L.icon),f=f||L.text!==F.text.placed||L.icon!==F.icon.placed):(this.opacities[A]=new le(null,g,L.text,L.icon,L.skipFade),f=f||L.text||L.icon)}for(const A in _){const L=_[A];if(!this.opacities[A]){const F=new le(L,g,!1,!1);F.isHidden()||(this.opacities[A]=F,f=f||L.text.placed||L.icon.placed)}}for(const A in C)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=C[A]);for(const A in I)this.placedOrientations[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.placedOrientations[A]=I[A]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const f={};for(const g of u){const _=g.getBucket(i);_&&g.latestFeatureIndex&&i.id===_.layerIds[0]&&this.updateBucketOpacities(_,f,g.collisionBoxArray)}}updateBucketOpacities(i,u,f){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0],_=g.layout,C=new le(null,0,!1,!1,!0),I=_.get("text-allow-overlap"),A=_.get("icon-allow-overlap"),L=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=_.get("text-rotation-alignment")==="map",V=_.get("text-pitch-alignment")==="map",ee=_.get("icon-text-fit")!=="none",he=new le(null,0,I&&(A||!i.hasIconData()||_.get("icon-optional")),A&&(I||!i.hasTextData()||_.get("text-optional")),!0);!i.collisionArrays&&f&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(f);const de=(me,ce,Te)=>{for(let Ne=0;Ne<ce/4;Ne++)me.opacityVertexArray.emplaceBack(Te);me.hasVisibleVertices=me.hasVisibleVertices||Te!==un};for(let me=0;me<i.symbolInstances.length;me++){const ce=i.symbolInstances.get(me),{numHorizontalGlyphVertices:Te,numVerticalGlyphVertices:Ne,crossTileID:ve}=ce;let ze=this.opacities[ve];u[ve]?ze=C:ze||(ze=he,this.opacities[ve]=ze),u[ve]=!0;const Ge=ce.numIconVertices>0,qe=this.placedOrientations[ce.crossTileID],tt=qe===c.ai.vertical,ut=qe===c.ai.horizontal||qe===c.ai.horizontalOnly;if(Te>0||Ne>0){const at=Hr(ze.text);de(i.text,Te,tt?un:at),de(i.text,Ne,ut?un:at);const pt=ze.text.isHidden();[ce.rightJustifiedTextSymbolIndex,ce.centerJustifiedTextSymbolIndex,ce.leftJustifiedTextSymbolIndex].forEach(It=>{It>=0&&(i.text.placedSymbolArray.get(It).hidden=pt||tt?1:0)}),ce.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ce.verticalPlacedTextSymbolIndex).hidden=pt||ut?1:0);const Ht=this.variableOffsets[ce.crossTileID];Ht&&this.markUsedJustification(i,Ht.anchor,ce,qe);const mr=this.placedOrientations[ce.crossTileID];mr&&(this.markUsedJustification(i,"left",ce,mr),this.markUsedOrientation(i,mr,ce))}if(Ge){const at=Hr(ze.icon),pt=!(ee&&ce.verticalPlacedIconSymbolIndex&&tt);ce.placedIconSymbolIndex>=0&&(de(i.icon,ce.numIconVertices,pt?at:un),i.icon.placedSymbolArray.get(ce.placedIconSymbolIndex).hidden=ze.icon.isHidden()),ce.verticalPlacedIconSymbolIndex>=0&&(de(i.icon,ce.numVerticalIconVertices,pt?un:at),i.icon.placedSymbolArray.get(ce.verticalPlacedIconSymbolIndex).hidden=ze.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const at=i.collisionArrays[me];if(at){let pt=new c.P(0,0);if(at.textBox||at.verticalTextBox){let mr=!0;if(L){const It=this.variableOffsets[ve];It?(pt=rt(It.anchor,It.width,It.height,It.textOffset,It.textBoxScale),F&&pt._rotate(V?this.transform.angle:-this.transform.angle)):mr=!1}at.textBox&&Ie(i.textCollisionBox.collisionVertexArray,ze.text.placed,!mr||tt,pt.x,pt.y),at.verticalTextBox&&Ie(i.textCollisionBox.collisionVertexArray,ze.text.placed,!mr||ut,pt.x,pt.y)}const Ht=!!(!ut&&at.verticalIconBox);at.iconBox&&Ie(i.iconCollisionBox.collisionVertexArray,ze.icon.placed,Ht,ee?pt.x:0,ee?pt.y:0),at.verticalIconBox&&Ie(i.iconCollisionBox.collisionVertexArray,ze.icon.placed,!Ht,ee?pt.x:0,ee?pt.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const me=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=me.invProjMatrix,i.placementViewportMatrix=me.viewportMatrix,i.collisionCircleArray=me.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function Ie(y,i,u,f,g){y.emplaceBack(i?1:0,u?1:0,f||0,g||0),y.emplaceBack(i?1:0,u?1:0,f||0,g||0),y.emplaceBack(i?1:0,u?1:0,f||0,g||0),y.emplaceBack(i?1:0,u?1:0,f||0,g||0)}const Ae=Math.pow(2,25),it=Math.pow(2,24),ot=Math.pow(2,17),lt=Math.pow(2,16),Yt=Math.pow(2,9),ir=Math.pow(2,8),br=Math.pow(2,1);function Hr(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,u=Math.floor(127*y.opacity);return u*Ae+i*it+u*ot+i*lt+u*Yt+i*ir+u*br+i}const un=0;class ds{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,f,g,_){const C=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(C,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((I,A)=>I.sortKey-A.sortKey));this._currentPartIndex<C.length;)if(u.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,_())return!0;return!1}}class $i{constructor(i,u,f,g,_,C,I,A){this.placement=new et(i,u,C,I,A),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,u,f){const g=c.h.now(),_=()=>!this._forceFullPlacement&&c.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const C=u[i[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=I)&&(!C.maxzoom||C.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new ds(C)),this._inProgressLayer.continuePlacement(f[C.source],this.placement,this._showCollisionBoxes,C,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const oi=512/c.N/2;class Na{constructor(i,u,f){this.tileID=i,this.bucketInstanceId=f,this._symbolsByKey={};const g=new Map;for(let _=0;_<u.length;_++){const C=u.get(_),I=C.key,A=g.get(I);A?A.push(C):g.set(I,[C])}for(const[_,C]of g){const I={positions:C.map(A=>({x:Math.floor(A.anchorX*oi),y:Math.floor(A.anchorY*oi)})),crossTileIDs:C.map(A=>A.crossTileID)};if(I.positions.length>128){const A=new c.av(I.positions.length,16,Uint16Array);for(const{x:L,y:F}of I.positions)A.add(L,F);A.finish(),delete I.positions,I.index=A}this._symbolsByKey[_]=I}}getScaledCoordinates(i,u){const{x:f,y:g,z:_}=this.tileID.canonical,{x:C,y:I,z:A}=u.canonical,L=oi/Math.pow(2,A-_),F=(I*c.N+i.anchorY)*L,V=g*c.N*oi;return{x:Math.floor((C*c.N+i.anchorX)*L-f*c.N*oi),y:Math.floor(F-V)}}findMatches(i,u,f){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<i.length;_++){const C=i.get(_);if(C.crossTileID)continue;const I=this._symbolsByKey[C.key];if(!I)continue;const A=this.getScaledCoordinates(C,u);if(I.index){const L=I.index.range(A.x-g,A.y-g,A.x+g,A.y+g).sort();for(const F of L){const V=I.crossTileIDs[F];if(!f[V]){f[V]=!0,C.crossTileID=V;break}}}else if(I.positions)for(let L=0;L<I.positions.length;L++){const F=I.positions[L],V=I.crossTileIDs[L];if(Math.abs(F.x-A.x)<=g&&Math.abs(F.y-A.y)<=g&&!f[V]){f[V]=!0,C.crossTileID=V;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class Ir{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class wr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const f in this.indexes){const g=this.indexes[f],_={};for(const C in g){const I=g[C];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),_[I.tileID.key]=I}this.indexes[f]=_}this.lng=i}addBucket(i,u,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const _ in this.indexes){const C=this.indexes[_];if(Number(_)>i.overscaledZ)for(const I in C){const A=C[I];A.tileID.isChildOf(i)&&A.findMatches(u.symbolInstances,i,g)}else{const I=C[i.scaledTo(Number(_)).key];I&&I.findMatches(u.symbolInstances,i,g)}}for(let _=0;_<u.symbolInstances.length;_++){const C=u.symbolInstances.get(_);C.crossTileID||(C.crossTileID=f.generate(),g[C.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Na(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const f of u.getCrossTileIDsLists())for(const g of f)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let u=!1;for(const f in this.indexes){const g=this.indexes[f];for(const _ in g)i[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[_]),delete g[_],u=!0)}return u}}class Nt{constructor(){this.layerIndexes={},this.crossTileIDs=new Ir,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,f){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new wr);let _=!1;const C={};g.handleWrapJump(f);for(const I of u){const A=I.getBucket(i);A&&i.id===A.layerIds[0]&&(A.bucketInstanceId||(A.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(I.tileID,A,this.crossTileIDs)&&(_=!0),C[A.bucketInstanceId]=!0)}return g.removeStaleBuckets(C)&&(_=!0),_}pruneUnusedLayers(i){const u={};i.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}const zr=(y,i)=>c.x(y,i&&i.filter(u=>u.identifier!=="source.canvas")),Tr=c.F(c.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),$r=c.F(c.ax,["setCenter","setZoom","setBearing","setPitch"]),Qr=c.aw();class fn extends c.E{constructor(i,u={}){super(),this.map=i,this.dispatcher=new st(nr(),this,i._getMapId()),this.imageManager=new Ee,this.imageManager.setEventedParent(this),this.glyphManager=new Se(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Qe(256,512),this.crossTileSymbolIndex=new Nt,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.az());const f=this;this._rtlTextPluginCallback=fn.registerForPluginStateChange(g=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(_,C)=>{if(c.aA(_),C&&C.every(I=>I))for(const I in f.sourceCaches){const A=f.sourceCaches[I].getSource().type;A!=="vector"&&A!=="geojson"||f.sourceCaches[I].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const _=this.sourceCaches[g.sourceId];if(!_)return;const C=_.getSource();if(C&&C.vectorLayerIds)for(const I in this._layers){const A=this._layers[I];A.source===C.id&&this._validateLayer(A)}})}loadURL(i,u={},f){this.fire(new c.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const g=this.map._requestManager.transformRequest(i,B.Style);this._request=c.f(g,(_,C)=>{this._request=null,_?this.fire(new c.j(_)):C&&this._load(C,u,f)})}loadJSON(i,u={},f){this.fire(new c.k("dataloading",{dataType:"style"})),this._request=c.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(i,u,f)})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(Qr,{validate:!1})}_load(i,u,f){var g;const _=u.transformStyle?u.transformStyle(f,i):i;if(!u.validate||!zr(this,c.y(_))){this._loaded=!0,this.stylesheet=_;for(const C in _.sources)this.addSource(C,_.sources[C],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new Ve(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const i=c.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of i){const f=c.aC(u);f.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=f}}_loadSprite(i,u=!1,f=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,_,C,I){const A=ae(g),L=A.length,F=C>1?"@2x":"",V={},ee={},he={};for(const{id:de,url:me}of A){const ce=_.transformRequest(_.normalizeSpriteURL(me,F,".json"),B.SpriteJSON),Te=`${de}_${ce.url}`;V[Te]=c.f(ce,(ze,Ge)=>{delete V[Te],ee[de]=Ge,we(I,ee,he,ze,L)});const Ne=_.transformRequest(_.normalizeSpriteURL(me,F,".png"),B.SpriteImage),ve=`${de}_${Ne.url}`;V[ve]=q.getImage(Ne,(ze,Ge)=>{delete V[ve],he[de]=Ge,we(I,ee,he,ze,L)})}return{cancel(){for(const de of Object.values(V))de.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(g,_)=>{if(this._spriteRequest=null,g)this.fire(new c.j(g));else if(_)for(const C in _){this._spritesImagesIds[C]=[];const I=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(A=>!(A in _)):[];for(const A of I)this.imageManager.removeImage(A),this._changedImages[A]=!0;for(const A in _[C]){const L=C==="default"?A:`${C}:${A}`;this._spritesImagesIds[C].push(L),L in this.imageManager.images?this.imageManager.updateImage(L,_[C][A],!1):this.imageManager.addImage(L,_[C][A]),u&&(this._changedImages[L]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),f&&f(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const f=i.sourceLayer;if(!f)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(f)===-1)&&this.fire(new c.j(new Error(`Source layer "${f}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const u=this._serializedAllLayers();if(!i||i.length===0)return Object.values(u);const f=[];for(const g of i)u[g]&&f.push(u[g]);return f}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const u=Object.keys(this._layers);for(const f of u){const g=this._layers[f];g.type!=="custom"&&(i[f]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const C in this._updatedSources){const I=this._updatedSources[C];if(I==="reload")this._reloadSource(C);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const f={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];f[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(i,this._availableImages),!_.isHidden(i.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in f){const _=this.sourceCaches[g];f[g]!==_.used&&_.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,u={}){this._checkLoaded();const f=this.serialize();if(i=u.transformStyle?u.transformStyle(f,i):i,zr(this,c.y(i)))return!1;(i=c.aD(i)).layers=c.aB(i.layers);const g=c.aE(f,i).filter(C=>!(C.command in $r));if(g.length===0)return!1;const _=g.filter(C=>!(C.command in Tr));if(_.length>0)throw new Error(`Unimplemented: ${_.map(C=>C.command).join(", ")}.`);for(const C of g)C.command!=="setTransition"&&this[C.command].apply(this,C.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,u){if(this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.y.source,`sources.${i}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[i]=new xr(i,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===i)return this.fire(new c.j(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const f=this.sourceCaches[i].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,f={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new c.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(i.type==="custom"){if(zr(this,c.aF(i)))return;_=c.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(g,i.source),i=c.aD(i),i=c.e(i,{source:g})),this._validate(c.y.layer,`layers.${g}`,i,{arrayIndex:-1},f))return;_=c.aC(i),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const C=u?this._order.indexOf(u):this._order.length;if(u&&C===-1)this.fire(new c.j(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(C,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const I=this._removedLayers[g];delete this._removedLayers[g],I.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new c.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const f=this._order.indexOf(i);this._order.splice(f,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new c.j(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,f){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===u&&g.maxzoom===f||(u!=null&&(g.minzoom=u),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,f={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!c.aG(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(c.y.filter,`layers.${g.id}.filter`,u,null,f)||(g.filter=c.aD(u),this._updateLayer(g)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return c.aD(this.getLayer(i).filter)}setLayoutProperty(i,u,f,g={}){this._checkLoaded();const _=this.getLayer(i);_?c.aG(_.getLayoutProperty(u),f)||(_.setLayoutProperty(u,f,g),this._updateLayer(_)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const f=this.getLayer(i);if(f)return f.getLayoutProperty(u);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,f,g={}){this._checkLoaded();const _=this.getLayer(i);_?c.aG(_.getPaintProperty(u),f)||(_.setPaintProperty(u,f,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const f=i.source,g=i.sourceLayer,_=this.sourceCaches[f];if(_===void 0)return void this.fire(new c.j(new Error(`The source '${f}' does not exist in the map's style.`)));const C=_.getSource().type;C==="geojson"&&g?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||g?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,i.id,u)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const f=i.source,g=this.sourceCaches[f];if(g===void 0)return void this.fire(new c.j(new Error(`The source '${f}' does not exist in the map's style.`)));const _=g.getSource().type,C=_==="vector"?i.sourceLayer:void 0;_!=="vector"||C?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(C,i.id,u):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,f=i.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(f,i.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=c.aH(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),f=this.map.getTerrain()||void 0,g=this.stylesheet;return c.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:i,layers:u,terrain:f},_=>_!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=C=>this._layers[C].type==="fill-extrusion",f={},g=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(u(I)){f[I]=C;for(const A of i){const L=A[I];if(L)for(const F of L)g.push(F)}}}g.sort((C,I)=>I.intersectionZ-C.intersectionZ);const _=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(u(I))for(let A=g.length-1;A>=0;A--){const L=g[A].feature;if(f[L.layer.id]<C)break;_.push(L),g.pop()}else for(const A of i){const L=A[I];if(L)for(const F of L)_.push(F.feature)}}return _}queryRenderedFeatures(i,u,f){u&&u.filter&&this._validate(c.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const I of u.layers){const A=this._layers[I];if(!A)return this.fire(new c.j(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];g[A.source]=!0}}const _=[];u.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const I in this.sourceCaches)u.layers&&!g[I]||_.push(Pt(this.sourceCaches[I],this._layers,C,i,u,f));return this.placement&&_.push(function(I,A,L,F,V,ee,he){const de={},me=ee.queryRenderedSymbols(F),ce=[];for(const Te of Object.keys(me).map(Number))ce.push(he[Te]);ce.sort(sr);for(const Te of ce){const Ne=Te.featureIndex.lookupSymbolFeatures(me[Te.bucketInstanceId],A,Te.bucketIndex,Te.sourceLayerIndex,V.filter,V.layers,V.availableImages,I);for(const ve in Ne){const ze=de[ve]=de[ve]||[],Ge=Ne[ve];Ge.sort((qe,tt)=>{const ut=Te.featureSortOrder;if(ut){const at=ut.indexOf(qe.featureIndex);return ut.indexOf(tt.featureIndex)-at}return tt.featureIndex-qe.featureIndex});for(const qe of Ge)ze.push(qe)}}for(const Te in de)de[Te].forEach(Ne=>{const ve=Ne.feature,ze=L[I[Te].source].getFeatureState(ve.layer["source-layer"],ve.id);ve.source=ve.layer.source,ve.layer["source-layer"]&&(ve.sourceLayer=ve.layer["source-layer"]),ve.state=ze});return de}(this._layers,C,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(i,u){u&&u.filter&&this._validate(c.y.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[i];return f?function(g,_){const C=g.getRenderableIds().map(L=>g.getTileByID(L)),I=[],A={};for(let L=0;L<C.length;L++){const F=C[L],V=F.tileID.canonical.key;A[V]||(A[V]=!0,F.querySourceFeatures(I,_))}return I}(f,u):[]}addSourceType(i,u,f){return Cr(i)?f(new Error(`A source type called "${i}" already exists.`)):(((g,_)=>{vr[g]=_})(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const f=this.light.getLight();let g=!1;for(const C in i)if(!c.aG(i[C],f[C])){g=!0;break}if(!g)return;const _={now:c.h.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(_)}_validate(i,u,f,g,_={}){return(!_||_.validate!==!1)&&zr(this,i.call(c.y,c.e({key:u,style:this.serialize(),value:f,styleSpec:c.v},g)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const f=this.sourceCaches[u];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,f,g,_=!1){let C=!1,I=!1;const A={};for(const L of this._order){const F=this._layers[L];if(F.type!=="symbol")continue;if(!A[F.source]){const ee=this.sourceCaches[F.source];A[F.source]=ee.getRenderableIds(!0).map(he=>ee.getTileByID(he)).sort((he,de)=>de.tileID.overscaledZ-he.tileID.overscaledZ||(he.tileID.isLessThan(de.tileID)?-1:1))}const V=this.crossTileSymbolIndex.addLayer(F,A[F.source],i.center.lng);C=C||V}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.h.now(),i.zoom))&&(this.pauseablePlacement=new $i(i,this.map.terrain,this._order,_,u,f,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,A),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.h.now()),I=!0),C&&this.pauseablePlacement.placement.setStale()),I||C)for(const L of this._order){const F=this._layers[L];F.type==="symbol"&&this.placement.updateLayerOpacities(F,A[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,f){this.imageManager.getImages(u.icons,f),this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,f){this.glyphManager.getGlyphs(u.stacks,f);const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,[""])}getResource(i,u,f){return c.m(u,f)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,u={}){this._checkLoaded(),i&&this._validate(c.y.glyphs,"glyphs",i,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,u,f={},g){this._checkLoaded();const _=[{id:i,url:u}],C=[...ae(this.stylesheet.sprite),..._];this._validate(c.y.sprite,"sprite",C,null,f)||(this.stylesheet.sprite=C,this._loadSprite(_,!0,g))}removeSprite(i){this._checkLoaded();const u=ae(this.stylesheet.sprite);if(u.find(f=>f.id===i)){if(this._spritesImagesIds[i])for(const f of this._spritesImagesIds[i])this.imageManager.removeImage(f),this._changedImages[f]=!0;u.splice(u.findIndex(f=>f.id===i),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return ae(this.stylesheet.sprite)}setSprite(i,u={},f){this._checkLoaded(),i&&this._validate(c.y.sprite,"sprite",i,null,u)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,f):(this._unloadSprite(),f&&f(null)))}}fn.registerForPluginStateChange=c.aK;var bi=c.Q([{name:"a_pos",type:"Int16",components:2}]),wi="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const mn={prelude:Fr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Fr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Fr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Fr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Fr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Fr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Fr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Fr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Fr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Fr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Fr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Fr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Fr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Fr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Fr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Fr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Fr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Fr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Fr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Fr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Fr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Fr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Fr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Fr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Fr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Fr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Fr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",wi),terrainDepth:Fr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",wi),terrainCoords:Fr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",wi)};function Fr(y,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=_?_.concat(g):g,I={};return{fragmentSource:y=y.replace(u,(A,L,F,V,ee)=>(I[ee]=!0,L==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
varying ${F} ${V} ${ee};
#else
uniform ${F} ${V} u_${ee};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ee}
    ${F} ${V} ${ee} = u_${ee};
#endif
`)),vertexSource:i=i.replace(u,(A,L,F,V,ee)=>{const he=V==="float"?"vec2":"vec4",de=ee.match(/color/)?"color":he;return I[ee]?L==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
attribute ${F} ${he} a_${ee};
varying ${F} ${V} ${ee};
#else
uniform ${F} ${V} u_${ee};
#endif
`:de==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = a_${ee};
#else
    ${F} ${V} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = unpack_mix_${de}(a_${ee}, u_${ee}_t);
#else
    ${F} ${V} ${ee} = u_${ee};
#endif
`:L==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
attribute ${F} ${he} a_${ee};
#else
uniform ${F} ${V} u_${ee};
#endif
`:de==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${F} ${V} ${ee} = a_${ee};
#else
    ${F} ${V} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${F} ${V} ${ee} = unpack_mix_${de}(a_${ee}, u_${ee}_t);
#else
    ${F} ${V} ${ee} = u_${ee};
#endif
`}),staticAttributes:f,staticUniforms:C}}class hs{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,f,g,_,C,I,A,L){this.context=i;let F=this.boundPaintVertexBuffers.length!==g.length;for(let V=0;!F&&V<g.length;V++)this.boundPaintVertexBuffers[V]!==g[V]&&(F=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==f||F||this.boundIndexBuffer!==_||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==A||this.boundDynamicVertexBuffer3!==L?this.freshBind(u,f,g,_,C,I,A,L):(i.bindVertexArray.set(this.vao),I&&I.bind(),_&&_.dynamicDraw&&_.bind(),A&&A.bind(),L&&L.bind())}freshBind(i,u,f,g,_,C,I,A){const L=i.numAttributes,F=this.context,V=F.gl;this.vao&&this.destroy(),this.vao=F.createVertexArray(),F.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=A,u.enableAttributes(V,i);for(const ee of f)ee.enableAttributes(V,i);C&&C.enableAttributes(V,i),I&&I.enableAttributes(V,i),A&&A.enableAttributes(V,i),u.bind(),u.setVertexAttribPointers(V,i,_);for(const ee of f)ee.bind(),ee.setVertexAttribPointers(V,i,_);C&&(C.bind(),C.setVertexAttribPointers(V,i,_)),g&&g.bind(),I&&(I.bind(),I.setVertexAttribPointers(V,i,_)),A&&(A.bind(),A.setVertexAttribPointers(V,i,_)),F.currentNumAttributes=L}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function xn(y){const i=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const f=y[u].split(" ");i.push(f.pop())}return i}class Vc{constructor(i,u,f,g,_,C){const I=i.gl;this.program=I.createProgram();const A=xn(u.staticAttributes),L=f?f.getBinderAttributes():[],F=A.concat(L),V=mn.prelude.staticUniforms?xn(mn.prelude.staticUniforms):[],ee=u.staticUniforms?xn(u.staticUniforms):[],he=f?f.getBinderUniforms():[],de=V.concat(ee).concat(he),me=[];for(const qe of de)me.indexOf(qe)<0&&me.push(qe);const ce=f?f.defines():[];_&&ce.push("#define OVERDRAW_INSPECTOR;"),C&&ce.push("#define TERRAIN3D;");const Te=ce.concat(mn.prelude.fragmentSource,u.fragmentSource).join(`
`),Ne=ce.concat(mn.prelude.vertexSource,u.vertexSource).join(`
`),ve=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(ve,Te),I.compileShader(ve),!I.getShaderParameter(ve,I.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${I.getShaderInfoLog(ve)}`);I.attachShader(this.program,ve);const ze=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(ze,Ne),I.compileShader(ze),!I.getShaderParameter(ze,I.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${I.getShaderInfoLog(ze)}`);I.attachShader(this.program,ze),this.attributes={};const Ge={};this.numAttributes=F.length;for(let qe=0;qe<this.numAttributes;qe++)F[qe]&&(I.bindAttribLocation(this.program,qe,F[qe]),this.attributes[F[qe]]=qe);if(I.linkProgram(this.program),!I.getProgramParameter(this.program,I.LINK_STATUS))throw new Error(`Program failed to link: ${I.getProgramInfoLog(this.program)}`);I.deleteShader(ze),I.deleteShader(ve);for(let qe=0;qe<me.length;qe++){const tt=me[qe];if(tt&&!Ge[tt]){const ut=I.getUniformLocation(this.program,tt);ut&&(Ge[tt]=ut)}}this.fixedUniforms=g(i,Ge),this.terrainUniforms=((qe,tt)=>({u_depth:new c.aL(qe,tt.u_depth),u_terrain:new c.aL(qe,tt.u_terrain),u_terrain_dim:new c.aM(qe,tt.u_terrain_dim),u_terrain_matrix:new c.aN(qe,tt.u_terrain_matrix),u_terrain_unpack:new c.aO(qe,tt.u_terrain_unpack),u_terrain_exaggeration:new c.aM(qe,tt.u_terrain_exaggeration)}))(i,Ge),this.binderUniforms=f?f.getUniforms(i,Ge):[]}draw(i,u,f,g,_,C,I,A,L,F,V,ee,he,de,me,ce,Te,Ne){const ve=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(g),i.setColorMode(_),i.setCullFace(C),A){i.activeTexture.set(ve.TEXTURE2),ve.bindTexture(ve.TEXTURE_2D,A.depthTexture),i.activeTexture.set(ve.TEXTURE3),ve.bindTexture(ve.TEXTURE_2D,A.texture);for(const Ge in this.terrainUniforms)this.terrainUniforms[Ge].set(A[Ge])}for(const Ge in this.fixedUniforms)this.fixedUniforms[Ge].set(I[Ge]);me&&me.setUniforms(i,this.binderUniforms,he,{zoom:de});let ze=0;switch(u){case ve.LINES:ze=2;break;case ve.TRIANGLES:ze=3;break;case ve.LINE_STRIP:ze=1}for(const Ge of ee.get()){const qe=Ge.vaos||(Ge.vaos={});(qe[L]||(qe[L]=new hs)).bind(i,this,F,me?me.getPaintVertexBuffers():[],V,Ge.vertexOffset,ce,Te,Ne),ve.drawElements(u,Ge.primitiveLength*ze,ve.UNSIGNED_SHORT,Ge.primitiveOffset*ze*2)}}}function fo(y,i,u){const f=1/Y(u,1,i.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,i.transform.tileZoom)/g,C=_*(u.tileID.canonical.x+u.tileID.wrap*g),I=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[C>>16,I>>16],u_pixel_coord_lower:[65535&C,65535&I]}}const Wd=(y,i,u,f)=>{const g=i.style.light,_=g.properties.get("position"),C=[_.x,_.y,_.z],I=function(){var L=new c.A(9);return c.A!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[5]=0,L[6]=0,L[7]=0),L[0]=1,L[4]=1,L[8]=1,L}();g.properties.get("anchor")==="viewport"&&function(L,F){var V=Math.sin(F),ee=Math.cos(F);L[0]=ee,L[1]=V,L[2]=0,L[3]=-V,L[4]=ee,L[5]=0,L[6]=0,L[7]=0,L[8]=1}(I,-i.transform.angle),function(L,F,V){var ee=F[0],he=F[1],de=F[2];L[0]=ee*V[0]+he*V[3]+de*V[6],L[1]=ee*V[1]+he*V[4]+de*V[7],L[2]=ee*V[2]+he*V[5]+de*V[8]}(C,C,I);const A=g.properties.get("color");return{u_matrix:y,u_lightpos:C,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[A.r,A.g,A.b],u_vertical_gradient:+u,u_opacity:f}},ja=(y,i,u,f,g,_,C)=>c.e(Wd(y,i,u,f),fo(_,i,C),{u_height_factor:-Math.pow(2,g.overscaledZ)/C.tileSize/8}),Hf=y=>({u_matrix:y}),Gd=(y,i,u,f)=>c.e(Hf(y),fo(u,i,f)),Uc=(y,i)=>({u_matrix:y,u_world:i}),Hc=(y,i,u,f,g)=>c.e(Gd(y,i,u,f),{u_world:g}),Va=(y,i,u,f)=>{const g=y.transform;let _,C;if(f.paint.get("circle-pitch-alignment")==="map"){const I=Y(u,1,g.zoom);_=!0,C=[I,I]}else _=!1,C=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:C}},qd=(y,i,u)=>{const f=Y(u,1,i.zoom),g=Math.pow(2,i.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[i.pixelsToGLUnits[0]/(f*g),i.pixelsToGLUnits[1]/(f*g)],u_overscale_factor:_}},Hl=(y,i,u=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:u}),Wf=y=>({u_matrix:y}),h0=(y,i,u,f)=>({u_matrix:y,u_extrude_scale:Y(i,1,u),u_intensity:f});function Zd(y,i){const u=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new c.U(0,f/u).toLngLat().lat,new c.U(0,(f+1)/u).toLngLat().lat]}const Kd=(y,i,u,f)=>{const g=y.transform;return{u_matrix:Wc(y,i,u,f),u_ratio:1/Y(i,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Gf=(y,i,u,f,g)=>c.e(Kd(y,i,u,g),{u_image:0,u_image_height:f}),p0=(y,i,u,f,g)=>{const _=y.transform,C=Zf(i,_);return{u_matrix:Wc(y,i,u,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/Y(i,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[C,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},qf=(y,i,u,f,g,_)=>{const C=y.lineAtlas,I=Zf(i,y.transform),A=u.layout.get("line-cap")==="round",L=C.getDash(f.from,A),F=C.getDash(f.to,A),V=L.width*g.fromScale,ee=F.width*g.toScale;return c.e(Kd(y,i,u,_),{u_patternscale_a:[I/V,-L.height/2],u_patternscale_b:[I/ee,-F.height/2],u_sdfgamma:C.width/(256*Math.min(V,ee)*y.pixelRatio)/2,u_image:0,u_tex_y_a:L.y,u_tex_y_b:F.y,u_mix:g.t})};function Zf(y,i){return 1/Y(y,1,i.tileZoom)}function Wc(y,i,u,f){return y.translatePosMatrix(f?f.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Kf=(y,i,u,f,g)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(C=g.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:Xf(g.paint.get("raster-hue-rotate"))};var _,C};function Xf(y){y*=Math.PI/180;const i=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const Xd=(y,i,u,f,g,_,C,I,A,L)=>{const F=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:F.cameraToCenterDistance,u_pitch:F.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:F.width/F.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:C,u_coord_matrix:I,u_is_text:+A,u_pitch_with_map:+f,u_texsize:L,u_texture:0}},Jd=(y,i,u,f,g,_,C,I,A,L,F)=>{const V=g.transform;return c.e(Xd(y,i,u,f,g,_,C,I,A,L),{u_gamma_scale:f?Math.cos(V._pitch)*V.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+F})},ps=(y,i,u,f,g,_,C,I,A,L)=>c.e(Jd(y,i,u,f,g,_,C,I,!0,A,!0),{u_texsize_icon:L,u_texture_icon:1}),Gc=(y,i,u)=>({u_matrix:y,u_opacity:i,u_color:u}),mo=(y,i,u,f,g,_)=>c.e(function(C,I,A,L){const F=A.imageManager.getPattern(C.from.toString()),V=A.imageManager.getPattern(C.to.toString()),{width:ee,height:he}=A.imageManager.getPixelSize(),de=Math.pow(2,L.tileID.overscaledZ),me=L.tileSize*Math.pow(2,A.transform.tileZoom)/de,ce=me*(L.tileID.canonical.x+L.tileID.wrap*de),Te=me*L.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[ee,he],u_mix:I.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/Y(L,1,A.transform.tileZoom),u_pixel_coord_upper:[ce>>16,Te>>16],u_pixel_coord_lower:[65535&ce,65535&Te]}}(f,_,u,g),{u_matrix:y,u_opacity:i}),qc={fillExtrusion:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_lightpos:new c.aP(y,i.u_lightpos),u_lightintensity:new c.aM(y,i.u_lightintensity),u_lightcolor:new c.aP(y,i.u_lightcolor),u_vertical_gradient:new c.aM(y,i.u_vertical_gradient),u_opacity:new c.aM(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_lightpos:new c.aP(y,i.u_lightpos),u_lightintensity:new c.aM(y,i.u_lightintensity),u_lightcolor:new c.aP(y,i.u_lightcolor),u_vertical_gradient:new c.aM(y,i.u_vertical_gradient),u_height_factor:new c.aM(y,i.u_height_factor),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade),u_opacity:new c.aM(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_scale_with_map:new c.aL(y,i.u_scale_with_map),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_extrude_scale:new c.aQ(y,i.u_extrude_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_matrix:new c.aN(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pixels_to_tile_units:new c.aM(y,i.u_pixels_to_tile_units),u_extrude_scale:new c.aQ(y,i.u_extrude_scale),u_overscale_factor:new c.aM(y,i.u_overscale_factor)}),collisionCircle:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_inv_matrix:new c.aN(y,i.u_inv_matrix),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_viewport_size:new c.aQ(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new c.aR(y,i.u_color),u_matrix:new c.aN(y,i.u_matrix),u_overlay:new c.aL(y,i.u_overlay),u_overlay_scale:new c.aM(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new c.aM(y,i.u_extrude_scale),u_intensity:new c.aM(y,i.u_intensity),u_matrix:new c.aN(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world),u_image:new c.aL(y,i.u_image),u_color_ramp:new c.aL(y,i.u_color_ramp),u_opacity:new c.aM(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_latrange:new c.aQ(y,i.u_latrange),u_light:new c.aQ(y,i.u_light),u_shadow:new c.aR(y,i.u_shadow),u_highlight:new c.aR(y,i.u_highlight),u_accent:new c.aR(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_dimension:new c.aQ(y,i.u_dimension),u_zoom:new c.aM(y,i.u_zoom),u_unpack:new c.aO(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_image:new c.aL(y,i.u_image),u_image_height:new c.aM(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texsize:new c.aQ(y,i.u_texsize),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_image:new c.aL(y,i.u_image),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_patternscale_a:new c.aQ(y,i.u_patternscale_a),u_patternscale_b:new c.aQ(y,i.u_patternscale_b),u_sdfgamma:new c.aM(y,i.u_sdfgamma),u_image:new c.aL(y,i.u_image),u_tex_y_a:new c.aM(y,i.u_tex_y_a),u_tex_y_b:new c.aM(y,i.u_tex_y_b),u_mix:new c.aM(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_tl_parent:new c.aQ(y,i.u_tl_parent),u_scale_parent:new c.aM(y,i.u_scale_parent),u_buffer_scale:new c.aM(y,i.u_buffer_scale),u_fade_t:new c.aM(y,i.u_fade_t),u_opacity:new c.aM(y,i.u_opacity),u_image0:new c.aL(y,i.u_image0),u_image1:new c.aL(y,i.u_image1),u_brightness_low:new c.aM(y,i.u_brightness_low),u_brightness_high:new c.aM(y,i.u_brightness_high),u_saturation_factor:new c.aM(y,i.u_saturation_factor),u_contrast_factor:new c.aM(y,i.u_contrast_factor),u_spin_weights:new c.aP(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texture:new c.aL(y,i.u_texture)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texture:new c.aL(y,i.u_texture),u_gamma_scale:new c.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_is_halo:new c.aL(y,i.u_is_halo)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texsize_icon:new c.aQ(y,i.u_texsize_icon),u_texture:new c.aL(y,i.u_texture),u_texture_icon:new c.aL(y,i.u_texture_icon),u_gamma_scale:new c.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_is_halo:new c.aL(y,i.u_is_halo)}),background:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_opacity:new c.aM(y,i.u_opacity),u_color:new c.aR(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_opacity:new c.aM(y,i.u_opacity),u_image:new c.aL(y,i.u_image),u_pattern_tl_a:new c.aQ(y,i.u_pattern_tl_a),u_pattern_br_a:new c.aQ(y,i.u_pattern_br_a),u_pattern_tl_b:new c.aQ(y,i.u_pattern_tl_b),u_pattern_br_b:new c.aQ(y,i.u_pattern_br_b),u_texsize:new c.aQ(y,i.u_texsize),u_mix:new c.aM(y,i.u_mix),u_pattern_size_a:new c.aQ(y,i.u_pattern_size_a),u_pattern_size_b:new c.aQ(y,i.u_pattern_size_b),u_scale_a:new c.aM(y,i.u_scale_a),u_scale_b:new c.aM(y,i.u_scale_b),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aM(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texture:new c.aL(y,i.u_texture),u_ele_delta:new c.aM(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ele_delta:new c.aM(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texture:new c.aL(y,i.u_texture),u_terrain_coords_id:new c.aM(y,i.u_terrain_coords_id),u_ele_delta:new c.aM(y,i.u_ele_delta)})};class Zc{constructor(i,u,f){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Wl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Kc{constructor(i,u,f,g){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=i;const _=i.gl;this.buffer=_.createBuffer(),i.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let f=0;f<this.attributes.length;f++){const g=u.attributes[this.attributes[f].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,u,f){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],C=u.attributes[_.name];C!==void 0&&i.vertexAttribPointer(C,_.components,i[Wl[_.type]],!1,this.itemSize,_.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qs=new WeakMap;function Ua(y){var i;if(qs.has(y))return qs.get(y);{const u=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return qs.set(y,u),u}}class Pr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Xc extends Pr{getDefault(){return c.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Qi extends Pr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class eo extends Pr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Yd extends Pr{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Jc extends Pr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Yc extends Pr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Qd extends Pr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class eh extends Pr{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Qc extends Pr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class th extends Pr{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class rh extends Pr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class eu extends Pr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Jf extends Pr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class Yf extends Pr{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Zs extends Pr{getDefault(){return c.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class f0 extends Pr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class m0 extends Pr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class g0 extends Pr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class y0 extends Pr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class v0 extends Pr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class _0 extends Pr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class nh extends Pr{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class tu extends Pr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class ih extends Pr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class oh extends Pr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Ks extends Pr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Qf extends Pr{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class em extends Pr{getDefault(){return null}set(i){var u;if(i===this.current&&!this.dirty)return;const f=this.gl;Ua(f)?f.bindVertexArray(i):(u=f.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class ah extends Pr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class fs extends Pr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class tm extends Pr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Ha extends Pr{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class Xs extends Ha{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class rm extends Ha{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class sh extends Ha{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Nr{constructor(i,u,f,g,_){this.context=i,this.width=u,this.height=f;const C=i.gl,I=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new Xs(i,I),g)this.depthAttachment=_?new sh(i,I):new rm(i,I);else if(_)throw new Error("Stencil cannot be setted without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class gn{constructor(i,u,f){this.blendFunction=i,this.blendColor=u,this.mask=f}}gn.Replace=[1,0],gn.disabled=new gn(gn.Replace,c.aT.transparent,[!1,!1,!1,!1]),gn.unblended=new gn(gn.Replace,c.aT.transparent,[!0,!0,!0,!0]),gn.alphaBlended=new gn([1,771],c.aT.transparent,[!0,!0,!0,!0]);class x0{constructor(i){var u,f;if(this.gl=i,this.clearColor=new Xc(this),this.clearDepth=new Qi(this),this.clearStencil=new eo(this),this.colorMask=new Yd(this),this.depthMask=new Jc(this),this.stencilMask=new Yc(this),this.stencilFunc=new Qd(this),this.stencilOp=new eh(this),this.stencilTest=new Qc(this),this.depthRange=new th(this),this.depthTest=new rh(this),this.depthFunc=new eu(this),this.blend=new Jf(this),this.blendFunc=new Yf(this),this.blendColor=new Zs(this),this.blendEquation=new f0(this),this.cullFace=new m0(this),this.cullFaceSide=new g0(this),this.frontFace=new y0(this),this.program=new v0(this),this.activeTexture=new _0(this),this.viewport=new nh(this),this.bindFramebuffer=new tu(this),this.bindRenderbuffer=new ih(this),this.bindTexture=new oh(this),this.bindVertexBuffer=new Ks(this),this.bindElementBuffer=new Qf(this),this.bindVertexArray=new em(this),this.pixelStoreUnpack=new ah(this),this.pixelStoreUnpackPremultiplyAlpha=new fs(this),this.pixelStoreUnpackFlipY=new tm(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Ua(i)){this.HALF_FLOAT=i.HALF_FLOAT;const g=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=i.RGBA16F)!==null&&u!==void 0?u:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(f=i.RGB16F)!==null&&f!==void 0?f:g==null?void 0:g.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const g=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new Zc(this,i,u)}createVertexBuffer(i,u,f){return new Kc(this,i,u,f)}createRenderbuffer(i,u,f){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,i,u,f),this.bindRenderbuffer.set(null),_}createFramebuffer(i,u,f,g){return new Nr(this,i,u,f,g)}clear({color:i,depth:u,stencil:f}){const g=this.gl;let _=0;i&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),g.clear(_)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){c.aG(i.blendFunction,gn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Ua(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var u;return Ua(this.gl)?this.gl.deleteVertexArray(i):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class kr{constructor(i,u,f){this.func=i,this.mask=u,this.range=f}}kr.ReadOnly=!1,kr.ReadWrite=!0,kr.disabled=new kr(519,kr.ReadOnly,[0,1]);const ms=7680;class yn{constructor(i,u,f,g,_,C){this.test=i,this.ref=u,this.mask=f,this.fail=g,this.depthFail=_,this.pass=C}}yn.disabled=new yn({func:519,mask:0},0,0,ms,ms,ms);class dn{constructor(i,u,f){this.enable=i,this.mode=u,this.frontFace=f}}let Gl;function nm(y,i,u,f,g,_,C){const I=y.context,A=I.gl,L=y.useProgram("collisionBox"),F=[];let V=0,ee=0;for(let ve=0;ve<f.length;ve++){const ze=f[ve],Ge=i.getTile(ze),qe=Ge.getBucket(u);if(!qe)continue;let tt=ze.posMatrix;g[0]===0&&g[1]===0||(tt=y.translatePosMatrix(ze.posMatrix,Ge,g,_));const ut=C?qe.textCollisionBox:qe.iconCollisionBox,at=qe.collisionCircleArray;if(at.length>0){const pt=c.Z(),Ht=tt;c.aU(pt,qe.placementInvProjMatrix,y.transform.glCoordMatrix),c.aU(pt,pt,qe.placementViewportMatrix),F.push({circleArray:at,circleOffset:ee,transform:Ht,invTransform:pt,coord:ze}),V+=at.length/4,ee=V}ut&&L.draw(I,A.LINES,kr.disabled,yn.disabled,y.colorModeForRenderPass(),dn.disabled,qd(tt,y.transform,Ge),y.style.map.terrain&&y.style.map.terrain.getTerrainData(ze),u.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,null,y.transform.zoom,null,null,ut.collisionVertexBuffer)}if(!C||!F.length)return;const he=y.useProgram("collisionCircle"),de=new c.aV;de.resize(4*V),de._trim();let me=0;for(const ve of F)for(let ze=0;ze<ve.circleArray.length/4;ze++){const Ge=4*ze,qe=ve.circleArray[Ge+0],tt=ve.circleArray[Ge+1],ut=ve.circleArray[Ge+2],at=ve.circleArray[Ge+3];de.emplace(me++,qe,tt,ut,at,0),de.emplace(me++,qe,tt,ut,at,1),de.emplace(me++,qe,tt,ut,at,2),de.emplace(me++,qe,tt,ut,at,3)}(!Gl||Gl.length<2*V)&&(Gl=function(ve){const ze=2*ve,Ge=new c.aX;Ge.resize(ze),Ge._trim();for(let qe=0;qe<ze;qe++){const tt=6*qe;Ge.uint16[tt+0]=4*qe+0,Ge.uint16[tt+1]=4*qe+1,Ge.uint16[tt+2]=4*qe+2,Ge.uint16[tt+3]=4*qe+2,Ge.uint16[tt+4]=4*qe+3,Ge.uint16[tt+5]=4*qe+0}return Ge}(V));const ce=I.createIndexBuffer(Gl,!0),Te=I.createVertexBuffer(de,c.aW.members,!0);for(const ve of F){const ze={u_matrix:ve.transform,u_inv_matrix:ve.invTransform,u_camera_to_center_distance:(Ne=y.transform).cameraToCenterDistance,u_viewport_size:[Ne.width,Ne.height]};he.draw(I,A.TRIANGLES,kr.disabled,yn.disabled,y.colorModeForRenderPass(),dn.disabled,ze,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ve.coord),u.id,Te,ce,c.S.simpleSegment(0,2*ve.circleOffset,ve.circleArray.length,ve.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Ne;Te.destroy(),ce.destroy()}dn.disabled=new dn(!1,1029,2305),dn.backCCW=new dn(!0,1029,2305);const lh=c.ao(new Float32Array(16));function ru(y,i,u,f,g,_){const{horizontalAlign:C,verticalAlign:I}=c.au(y);return new c.P((-(C-.5)*i/g+f[0])*_,(-(I-.5)*u/g+f[1])*_)}function nu(y,i,u,f,g,_,C,I,A,L,F){const V=y.text.placedSymbolArray,ee=y.text.dynamicLayoutVertexArray,he=y.icon.dynamicLayoutVertexArray,de={};ee.clear();for(let me=0;me<V.length;me++){const ce=V.get(me),Te=ce.hidden||!ce.crossTileID||y.allowVerticalPlacement&&!ce.placedOrientation?null:f[ce.crossTileID];if(Te){const Ne=new c.P(ce.anchorX,ce.anchorY),ve=_t(Ne,u?C:_,F),ze=Ce(g.cameraToCenterDistance,ve.signedDistanceFromCamera);let Ge=c.aj(y.textSizeData,A,ce)*ze/c.ap;u&&(Ge*=y.tilePixelRatio/I);const{width:qe,height:tt,anchor:ut,textOffset:at,textBoxScale:pt}=Te,Ht=ru(ut,qe,tt,at,pt,Ge),mr=u?_t(Ne.add(Ht),_,F).point:ve.point.add(i?Ht.rotate(-g.angle):Ht),It=y.allowVerticalPlacement&&ce.placedOrientation===c.ai.vertical?Math.PI/2:0;for(let ar=0;ar<ce.numGlyphs;ar++)c.ak(ee,mr,It);L&&ce.associatedIconIndex>=0&&(de[ce.associatedIconIndex]={shiftedAnchor:mr,angle:It})}else ne(ce.numGlyphs,ee)}if(L){he.clear();const me=y.icon.placedSymbolArray;for(let ce=0;ce<me.length;ce++){const Te=me.get(ce);if(Te.hidden)ne(Te.numGlyphs,he);else{const Ne=de[ce];if(Ne)for(let ve=0;ve<Te.numGlyphs;ve++)c.ak(he,Ne.shiftedAnchor,Ne.angle);else ne(Te.numGlyphs,he)}}y.icon.dynamicLayoutVertexBuffer.updateData(he)}y.text.dynamicLayoutVertexBuffer.updateData(ee)}function ch(y,i,u){return u.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function iu(y,i,u,f,g,_,C,I,A,L,F,V){const ee=y.context,he=ee.gl,de=y.transform,me=I==="map",ce=A==="map",Te=I!=="viewport"&&u.layout.get("symbol-placement")!=="point",Ne=me&&!ce&&!Te,ve=!u.layout.get("symbol-sort-key").isConstant();let ze=!1;const Ge=y.depthModeForSublayer(0,kr.ReadOnly),qe=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),tt=[];for(const ut of f){const at=i.getTile(ut),pt=at.getBucket(u);if(!pt)continue;const Ht=g?pt.text:pt.icon;if(!Ht||!Ht.segments.get().length||!Ht.hasVisibleVertices)continue;const mr=Ht.programConfigurations.get(u.id),It=g||pt.sdfIcons,ar=g?pt.textSizeData:pt.iconSizeData,qt=ce||de.pitch!==0,Zr=y.useProgram(ch(It,g,pt),mr),fr=c.ah(ar,de.zoom),hr=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ut);let gr,Tn,en,ai,Un=[0,0],Mn=null;if(g)Tn=at.glyphAtlasTexture,en=he.LINEAR,gr=at.glyphAtlasTexture.size,pt.iconsInText&&(Un=at.imageAtlasTexture.size,Mn=at.imageAtlasTexture,ai=qt||y.options.rotating||y.options.zooming||ar.kind==="composite"||ar.kind==="camera"?he.LINEAR:he.NEAREST);else{const Pn=u.layout.get("icon-size").constantOr(0)!==1||pt.iconsNeedLinear;Tn=at.imageAtlasTexture,en=It||y.options.rotating||y.options.zooming||Pn||qt?he.LINEAR:he.NEAREST,gr=at.imageAtlasTexture.size}const no=Y(at,1,y.transform.zoom),an=Oe(ut.posMatrix,ce,me,y.transform,no),Xo=St(ut.posMatrix,ce,me,y.transform,no),Jo=qe&&pt.hasTextData(),qa=u.layout.get("icon-text-fit")!=="none"&&Jo&&pt.hasIconData();if(Te){const Pn=y.style.map.terrain?(Fi,kn)=>y.style.map.terrain.getElevation(ut,Fi,kn):null,Hn=u.layout.get("text-rotation-alignment")==="map";Ze(pt,ut.posMatrix,y,g,an,Xo,ce,L,Hn,Pn)}const xs=y.translatePosMatrix(ut.posMatrix,at,_,C),nl=Te||g&&qe||qa?lh:an,hi=y.translatePosMatrix(Xo,at,_,C,!0),si=It&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ci;Ci=It?pt.iconsInText?ps(ar.kind,fr,Ne,ce,y,xs,nl,hi,gr,Un):Jd(ar.kind,fr,Ne,ce,y,xs,nl,hi,g,gr,!0):Xd(ar.kind,fr,Ne,ce,y,xs,nl,hi,g,gr);const bs={program:Zr,buffers:Ht,uniformValues:Ci,atlasTexture:Tn,atlasTextureIcon:Mn,atlasInterpolation:en,atlasInterpolationIcon:ai,isSDF:It,hasHalo:si};if(ve&&pt.canOverlap){ze=!0;const Pn=Ht.segments.get();for(const Hn of Pn)tt.push({segments:new c.S([Hn]),sortKey:Hn.sortKey,state:bs,terrainData:hr})}else tt.push({segments:Ht.segments,sortKey:0,state:bs,terrainData:hr})}ze&&tt.sort((ut,at)=>ut.sortKey-at.sortKey);for(const ut of tt){const at=ut.state;if(ee.activeTexture.set(he.TEXTURE0),at.atlasTexture.bind(at.atlasInterpolation,he.CLAMP_TO_EDGE),at.atlasTextureIcon&&(ee.activeTexture.set(he.TEXTURE1),at.atlasTextureIcon&&at.atlasTextureIcon.bind(at.atlasInterpolationIcon,he.CLAMP_TO_EDGE)),at.isSDF){const pt=at.uniformValues;at.hasHalo&&(pt.u_is_halo=1,uh(at.buffers,ut.segments,u,y,at.program,Ge,F,V,pt,ut.terrainData)),pt.u_is_halo=0}uh(at.buffers,ut.segments,u,y,at.program,Ge,F,V,at.uniformValues,ut.terrainData)}}function uh(y,i,u,f,g,_,C,I,A,L){const F=f.context;g.draw(F,F.gl.TRIANGLES,_,C,I,dn.disabled,A,L,u.id,y.layoutVertexBuffer,y.indexBuffer,i,u.paint,f.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function ql(y,i,u,f,g){if(!u||!f||!f.imageAtlas)return;const _=f.imageAtlas.patternPositions;let C=_[u.to.toString()],I=_[u.from.toString()];if(!C&&I&&(C=I),!I&&C&&(I=C),!C||!I){const A=g.getPaintProperty(i);C=_[A],I=_[A]}C&&I&&y.setConstantPatternPositions(C,I)}function Zl(y,i,u,f,g,_,C){const I=y.context.gl,A="fill-pattern",L=u.paint.get(A),F=L&&L.constantOr(1),V=u.getCrossfadeParameters();let ee,he,de,me,ce;C?(he=F&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ee=I.LINES):(he=F?"fillPattern":"fill",ee=I.TRIANGLES);const Te=L.constantOr(null);for(const Ne of f){const ve=i.getTile(Ne);if(F&&!ve.patternsLoaded())continue;const ze=ve.getBucket(u);if(!ze)continue;const Ge=ze.programConfigurations.get(u.id),qe=y.useProgram(he,Ge),tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ne);F&&(y.context.activeTexture.set(I.TEXTURE0),ve.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),Ge.updatePaintBuffers(V)),ql(Ge,A,Te,ve,u);const ut=tt?Ne:null,at=y.translatePosMatrix(ut?ut.posMatrix:Ne.posMatrix,ve,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(C){me=ze.indexBuffer2,ce=ze.segments2;const pt=[I.drawingBufferWidth,I.drawingBufferHeight];de=he==="fillOutlinePattern"&&F?Hc(at,y,V,ve,pt):Uc(at,pt)}else me=ze.indexBuffer,ce=ze.segments,de=F?Gd(at,y,V,ve):Hf(at);qe.draw(y.context,ee,g,y.stencilModeForClipping(Ne),_,dn.disabled,de,tt,u.id,ze.layoutVertexBuffer,me,ce,u.paint,y.transform.zoom,Ge)}}function Kl(y,i,u,f,g,_,C){const I=y.context,A=I.gl,L="fill-extrusion-pattern",F=u.paint.get(L),V=F.constantOr(1),ee=u.getCrossfadeParameters(),he=u.paint.get("fill-extrusion-opacity"),de=F.constantOr(null);for(const me of f){const ce=i.getTile(me),Te=ce.getBucket(u);if(!Te)continue;const Ne=y.style.map.terrain&&y.style.map.terrain.getTerrainData(me),ve=Te.programConfigurations.get(u.id),ze=y.useProgram(V?"fillExtrusionPattern":"fillExtrusion",ve);V&&(y.context.activeTexture.set(A.TEXTURE0),ce.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),ve.updatePaintBuffers(ee)),ql(ve,L,de,ce,u);const Ge=y.translatePosMatrix(me.posMatrix,ce,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),qe=u.paint.get("fill-extrusion-vertical-gradient"),tt=V?ja(Ge,y,qe,he,me,ee,ce):Wd(Ge,y,qe,he);ze.draw(I,I.gl.TRIANGLES,g,_,C,dn.backCCW,tt,Ne,u.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,u.paint,y.transform.zoom,ve,y.style.map.terrain&&Te.centroidVertexBuffer)}}function b0(y,i,u,f,g,_,C){const I=y.context,A=I.gl,L=u.fbo;if(!L)return;const F=y.useProgram("hillshade"),V=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);I.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,L.colorAttachment.get()),F.draw(I,A.TRIANGLES,g,_,C,dn.disabled,((ee,he,de,me)=>{const ce=de.paint.get("hillshade-shadow-color"),Te=de.paint.get("hillshade-highlight-color"),Ne=de.paint.get("hillshade-accent-color");let ve=de.paint.get("hillshade-illumination-direction")*(Math.PI/180);de.paint.get("hillshade-illumination-anchor")==="viewport"&&(ve-=ee.transform.angle);const ze=!ee.options.moving;return{u_matrix:me?me.posMatrix:ee.transform.calculatePosMatrix(he.tileID.toUnwrapped(),ze),u_image:0,u_latrange:Zd(0,he.tileID),u_light:[de.paint.get("hillshade-exaggeration"),ve],u_shadow:ce,u_highlight:Te,u_accent:Ne}})(y,u,f,V?i:null),V,f.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function dh(y,i,u,f,g,_){const C=y.context,I=C.gl,A=i.dem;if(A&&A.data){const L=A.dim,F=A.stride,V=A.getPixels();if(C.activeTexture.set(I.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(F),i.demTexture){const he=i.demTexture;he.update(V,{premultiply:!1}),he.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else i.demTexture=new xe(C,V,I.RGBA,{premultiply:!1}),i.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);C.activeTexture.set(I.TEXTURE0);let ee=i.fbo;if(!ee){const he=new xe(C,{width:L,height:L,data:null},I.RGBA);he.bind(I.LINEAR,I.CLAMP_TO_EDGE),ee=i.fbo=C.createFramebuffer(L,L,!0,!1),ee.colorAttachment.set(he.texture)}C.bindFramebuffer.set(ee.framebuffer),C.viewport.set([0,0,L,L]),y.useProgram("hillshadePrepare").draw(C,I.TRIANGLES,f,g,_,dn.disabled,((he,de)=>{const me=de.stride,ce=c.Z();return c.aS(ce,0,c.N,-c.N,0,0,1),c.$(ce,ce,[0,-c.N,0]),{u_matrix:ce,u_image:1,u_dimension:[me,me],u_zoom:he.overscaledZ,u_unpack:de.getUnpackVector()}})(i.tileID,A),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function w0(y,i,u,f,g,_){const C=f.paint.get("raster-fade-duration");if(!_&&C>0){const I=c.h.now(),A=(I-y.timeAdded)/C,L=i?(I-i.timeAdded)/C:-1,F=u.getSource(),V=g.coveringZoomLevel({tileSize:F.tileSize,roundZoom:F.roundZoom}),ee=!i||Math.abs(i.tileID.overscaledZ-V)>Math.abs(y.tileID.overscaledZ-V),he=ee&&y.refreshedUponExpiration?1:c.ad(ee?A:1-L,0,1);return y.refreshedUponExpiration&&A>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-he}:{opacity:he,mix:0}}return{opacity:1,mix:0}}const im=new c.aT(1,0,0,1),ou=new c.aT(0,1,0,1),hh=new c.aT(0,0,1,1),om=new c.aT(1,0,1,1),am=new c.aT(0,1,1,1);function Xl(y,i,u,f){su(y,0,i+u/2,y.transform.width,u,f)}function au(y,i,u,f){su(y,i-u/2,0,u,y.transform.height,f)}function su(y,i,u,f,g,_){const C=y.context,I=C.gl;I.enable(I.SCISSOR_TEST),I.scissor(i*y.pixelRatio,u*y.pixelRatio,f*y.pixelRatio,g*y.pixelRatio),C.clear({color:_}),I.disable(I.SCISSOR_TEST)}function sm(y,i,u){const f=y.context,g=f.gl,_=u.posMatrix,C=y.useProgram("debug"),I=kr.disabled,A=yn.disabled,L=y.colorModeForRenderPass(),F="$debug",V=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);f.activeTexture.set(g.TEXTURE0);const ee=i.getTileByID(u.key).latestRawTileData,he=Math.floor((ee&&ee.byteLength||0)/1024),de=i.getTile(u).tileSize,me=512/Math.min(de,512)*(u.overscaledZ/y.transform.zoom)*.5;let ce=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ce+=` => ${u.overscaledZ}`),function(Te,Ne){Te.initDebugOverlayCanvas();const ve=Te.debugOverlayCanvas,ze=Te.context.gl,Ge=Te.debugOverlayCanvas.getContext("2d");Ge.clearRect(0,0,ve.width,ve.height),Ge.shadowColor="white",Ge.shadowBlur=2,Ge.lineWidth=1.5,Ge.strokeStyle="white",Ge.textBaseline="top",Ge.font="bold 36px Open Sans, sans-serif",Ge.fillText(Ne,5,5),Ge.strokeText(Ne,5,5),Te.debugOverlayTexture.update(ve),Te.debugOverlayTexture.bind(ze.LINEAR,ze.CLAMP_TO_EDGE)}(y,`${ce} ${he}kB`),C.draw(f,g.TRIANGLES,I,A,gn.alphaBlended,dn.disabled,Hl(_,c.aT.transparent,me),null,F,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),C.draw(f,g.LINE_STRIP,I,A,L,dn.disabled,Hl(_,c.aT.red),V,F,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function bn(y,i,u){const f=y.context,g=f.gl,_=y.colorModeForRenderPass(),C=new kr(g.LEQUAL,kr.ReadWrite,y.depthRangeFor3D),I=y.useProgram("terrain"),A=i.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,y.width,y.height]);for(const L of u){const F=y.renderToTexture.getTexture(L),V=i.getTerrainData(L.tileID);f.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,F.texture);const ee={u_matrix:y.transform.calculatePosMatrix(L.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};I.draw(f,g.TRIANGLES,C,yn.disabled,_,dn.backCCW,ee,V,"terrain",A.vertexBuffer,A.indexBuffer,A.segments)}}class gs{constructor(i,u){this.context=new x0(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.Z(),renderTime:0},this.setup(),this.numSublayers=xr.maxUnderzooming+xr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Nt}resize(i,u,f){if(this.width=Math.floor(i*f),this.height=Math.floor(u*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,u=new c.a_;u.emplaceBack(0,0),u.emplaceBack(c.N,0),u.emplaceBack(0,c.N),u.emplaceBack(c.N,c.N),this.tileExtentBuffer=i.createVertexBuffer(u,bi.members),this.tileExtentSegments=c.S.simpleSegment(0,0,4,2);const f=new c.a_;f.emplaceBack(0,0),f.emplaceBack(c.N,0),f.emplaceBack(0,c.N),f.emplaceBack(c.N,c.N),this.debugBuffer=i.createVertexBuffer(f,bi.members),this.debugSegments=c.S.simpleSegment(0,0,4,5);const g=new c.V;g.emplaceBack(0,0,0,0),g.emplaceBack(c.N,0,c.N,0),g.emplaceBack(0,c.N,0,c.N),g.emplaceBack(c.N,c.N,c.N,c.N),this.rasterBoundsBuffer=i.createVertexBuffer(g,ft.members),this.rasterBoundsSegments=c.S.simpleSegment(0,0,4,2);const _=new c.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(_,bi.members),this.viewportSegments=c.S.simpleSegment(0,0,4,2);const C=new c.a$;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(C);const I=new c.b0;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(I);const A=this.context.gl;this.stencilClearMode=new yn({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=c.Z();c.aS(f,0,this.width,this.height,0,0,1),c.a0(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,kr.disabled,this.stencilClearMode,gn.disabled,dn.disabled,Wf(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const f=this.context,g=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(gn.disabled),f.setDepthMode(kr.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of u){const I=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,A=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);_.draw(f,g.TRIANGLES,kr.disabled,new yn({func:g.ALWAYS,mask:0},I,255,g.KEEP,g.KEEP,g.REPLACE),gn.disabled,dn.disabled,Wf(C.posMatrix),A,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new yn({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new yn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,f=i.sort((C,I)=>I.overscaledZ-C.overscaledZ),g=f[f.length-1].overscaledZ,_=f[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const C={};for(let I=0;I<_;I++)C[I+g]=new yn({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[C,f]}return[{[g]:yn.disabled},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new gn([i.CONSTANT_COLOR,i.ONE],new c.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?gn.unblended:gn.alphaBlended}depthModeForSublayer(i,u,f){if(!this.opaquePassEnabledForLayer())return kr.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new kr(f||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(c.h.now()),this.imageManager.beginFrame();const f=this.style._order,g=this.style.sourceCaches,_={},C={},I={};for(const A in g){const L=g[A];L.used&&L.prepare(this.context),_[A]=L.getVisibleCoordinates(),C[A]=_[A].slice().reverse(),I[A]=L.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let A=0;A<f.length;A++)if(this.style._layers[f[A]].is3D()){this.opaquePassCutoff=A;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const A=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!c.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||A.length)&&(c.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(L,F){const V=L.context,ee=V.gl,he=gn.unblended,de=new kr(ee.LEQUAL,kr.ReadWrite,[0,1]),me=F.getTerrainMesh(),ce=F.sourceCache.getRenderableTiles(),Te=L.useProgram("terrainDepth");V.bindFramebuffer.set(F.getFramebuffer("depth").framebuffer),V.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),V.clear({color:c.aT.transparent,depth:1});for(const Ne of ce){const ve=F.getTerrainData(Ne.tileID),ze={u_matrix:L.transform.calculatePosMatrix(Ne.tileID.toUnwrapped()),u_ele_delta:F.getMeshFrameDelta(L.transform.zoom)};Te.draw(V,ee.TRIANGLES,de,yn.disabled,he,dn.backCCW,ze,ve,"terrain",me.vertexBuffer,me.indexBuffer,me.segments)}V.bindFramebuffer.set(null),V.viewport.set([0,0,L.width,L.height])}(this,this.style.map.terrain),function(L,F){const V=L.context,ee=V.gl,he=gn.unblended,de=new kr(ee.LEQUAL,kr.ReadWrite,[0,1]),me=F.getTerrainMesh(),ce=F.getCoordsTexture(),Te=F.sourceCache.getRenderableTiles(),Ne=L.useProgram("terrainCoords");V.bindFramebuffer.set(F.getFramebuffer("coords").framebuffer),V.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),V.clear({color:c.aT.transparent,depth:1}),F.coordsIndex=[];for(const ve of Te){const ze=F.getTerrainData(ve.tileID);V.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,ce.texture);const Ge={u_matrix:L.transform.calculatePosMatrix(ve.tileID.toUnwrapped()),u_terrain_coords_id:(255-F.coordsIndex.length)/255,u_texture:0,u_ele_delta:F.getMeshFrameDelta(L.transform.zoom)};Ne.draw(V,ee.TRIANGLES,de,yn.disabled,he,dn.backCCW,Ge,ze,"terrain",me.vertexBuffer,me.indexBuffer,me.segments),F.coordsIndex.push(ve.tileID.key)}V.bindFramebuffer.set(null),V.viewport.set([0,0,L.width,L.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const A of f){const L=this.style._layers[A];if(!L.hasOffscreenPass()||L.isHidden(this.transform.zoom))continue;const F=C[L.source];(L.type==="custom"||F.length)&&this.renderLayer(this,g[L.source],L,F)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?c.aT.black:c.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const A=this.style._layers[f[this.currentLayer]],L=g[A.source],F=_[A.source];this._renderTileClippingMasks(A,F),this.renderLayer(this,L,A,F)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const A=this.style._layers[f[this.currentLayer]],L=g[A.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(A))continue;const F=(A.type==="symbol"?I:C)[A.source];this._renderTileClippingMasks(A,_[A.source]),this.renderLayer(this,L,A,F)}if(this.options.showTileBoundaries){const A=function(L,F){let V=null;const ee=Object.values(L._layers).flatMap(ce=>ce.source&&!ce.isHidden(F)?[L.sourceCaches[ce.source]]:[]),he=ee.filter(ce=>ce.getSource().type==="vector"),de=ee.filter(ce=>ce.getSource().type!=="vector"),me=ce=>{(!V||V.getSource().maxzoom<ce.getSource().maxzoom)&&(V=ce)};return he.forEach(ce=>me(ce)),V||de.forEach(ce=>me(ce)),V}(this.style,this.transform.zoom);A&&function(L,F,V){for(let ee=0;ee<V.length;ee++)sm(L,F,V[ee])}(this,A,A.getVisibleCoordinates())}this.options.showPadding&&function(A){const L=A.transform.padding;Xl(A,A.transform.height-(L.top||0),3,im),Xl(A,L.bottom||0,3,ou),au(A,L.left||0,3,hh),au(A,A.transform.width-(L.right||0),3,om);const F=A.transform.centerPoint;(function(V,ee,he,de){su(V,ee-1,he-10,2,20,de),su(V,ee-10,he-1,20,2,de)})(A,F.x,A.transform.height-F.y,am)}(this),this.context.setDefault()}renderLayer(i,u,f,g){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(g||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(_,C,I,A,L){if(_.renderPass!=="translucent")return;const F=yn.disabled,V=_.colorModeForRenderPass();(I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ee,he,de,me,ce,Te,Ne){const ve=he.transform,ze=ce==="map",Ge=Te==="map";for(const qe of ee){const tt=me.getTile(qe),ut=tt.getBucket(de);if(!ut||!ut.text||!ut.text.segments.get().length)continue;const at=c.ah(ut.textSizeData,ve.zoom),pt=Y(tt,1,he.transform.zoom),Ht=Oe(qe.posMatrix,Ge,ze,he.transform,pt),mr=de.layout.get("icon-text-fit")!=="none"&&ut.hasIconData();if(at){const It=Math.pow(2,ve.zoom-tt.tileID.overscaledZ);nu(ut,ze,Ge,Ne,ve,Ht,qe.posMatrix,It,at,mr,he.style.map.terrain?(ar,qt)=>he.style.map.terrain.getElevation(qe,ar,qt):null)}}}(A,_,I,C,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),L),I.paint.get("icon-opacity").constantOr(1)!==0&&iu(_,C,I,A,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),F,V),I.paint.get("text-opacity").constantOr(1)!==0&&iu(_,C,I,A,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),F,V),C.map.showCollisionBoxes&&(nm(_,C,I,A,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),!0),nm(_,C,I,A,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),!1))})(i,u,f,g,this.style.placement.variableOffsets);break;case"circle":(function(_,C,I,A){if(_.renderPass!=="translucent")return;const L=I.paint.get("circle-opacity"),F=I.paint.get("circle-stroke-width"),V=I.paint.get("circle-stroke-opacity"),ee=!I.layout.get("circle-sort-key").isConstant();if(L.constantOr(1)===0&&(F.constantOr(1)===0||V.constantOr(1)===0))return;const he=_.context,de=he.gl,me=_.depthModeForSublayer(0,kr.ReadOnly),ce=yn.disabled,Te=_.colorModeForRenderPass(),Ne=[];for(let ve=0;ve<A.length;ve++){const ze=A[ve],Ge=C.getTile(ze),qe=Ge.getBucket(I);if(!qe)continue;const tt=qe.programConfigurations.get(I.id),ut=_.useProgram("circle",tt),at=qe.layoutVertexBuffer,pt=qe.indexBuffer,Ht=_.style.map.terrain&&_.style.map.terrain.getTerrainData(ze),mr={programConfiguration:tt,program:ut,layoutVertexBuffer:at,indexBuffer:pt,uniformValues:Va(_,ze,Ge,I),terrainData:Ht};if(ee){const It=qe.segments.get();for(const ar of It)Ne.push({segments:new c.S([ar]),sortKey:ar.sortKey,state:mr})}else Ne.push({segments:qe.segments,sortKey:0,state:mr})}ee&&Ne.sort((ve,ze)=>ve.sortKey-ze.sortKey);for(const ve of Ne){const{programConfiguration:ze,program:Ge,layoutVertexBuffer:qe,indexBuffer:tt,uniformValues:ut,terrainData:at}=ve.state;Ge.draw(he,de.TRIANGLES,me,ce,Te,dn.disabled,ut,at,I.id,qe,tt,ve.segments,I.paint,_.transform.zoom,ze)}})(i,u,f,g);break;case"heatmap":(function(_,C,I,A){if(I.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const L=_.context,F=L.gl,V=yn.disabled,ee=new gn([F.ONE,F.ONE],c.aT.transparent,[!0,!0,!0,!0]);(function(he,de,me){const ce=he.gl;he.activeTexture.set(ce.TEXTURE1),he.viewport.set([0,0,de.width/4,de.height/4]);let Te=me.heatmapFbo;if(Te)ce.bindTexture(ce.TEXTURE_2D,Te.colorAttachment.get()),he.bindFramebuffer.set(Te.framebuffer);else{const Ne=ce.createTexture();ce.bindTexture(ce.TEXTURE_2D,Ne),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,ce.LINEAR),Te=me.heatmapFbo=he.createFramebuffer(de.width/4,de.height/4,!1,!1),function(ve,ze,Ge,qe){var tt,ut;const at=ve.gl,pt=(tt=ve.HALF_FLOAT)!==null&&tt!==void 0?tt:at.UNSIGNED_BYTE,Ht=(ut=ve.RGBA16F)!==null&&ut!==void 0?ut:at.RGBA;at.texImage2D(at.TEXTURE_2D,0,Ht,ze.width/4,ze.height/4,0,at.RGBA,pt,null),qe.colorAttachment.set(Ge)}(he,de,Ne,Te)}})(L,_,I),L.clear({color:c.aT.transparent});for(let he=0;he<A.length;he++){const de=A[he];if(C.hasRenderableParent(de))continue;const me=C.getTile(de),ce=me.getBucket(I);if(!ce)continue;const Te=ce.programConfigurations.get(I.id),Ne=_.useProgram("heatmap",Te),{zoom:ve}=_.transform;Ne.draw(L,F.TRIANGLES,kr.disabled,V,ee,dn.disabled,h0(de.posMatrix,me,ve,I.paint.get("heatmap-intensity")),null,I.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,I.paint,_.transform.zoom,Te)}L.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(L,F){const V=L.context,ee=V.gl,he=F.heatmapFbo;if(!he)return;V.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,he.colorAttachment.get()),V.activeTexture.set(ee.TEXTURE1);let de=F.colorRampTexture;de||(de=F.colorRampTexture=new xe(V,F.colorRamp,ee.RGBA)),de.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),L.useProgram("heatmapTexture").draw(V,ee.TRIANGLES,kr.disabled,yn.disabled,L.colorModeForRenderPass(),dn.disabled,((me,ce,Te,Ne)=>{const ve=c.Z();c.aS(ve,0,me.width,me.height,0,0,1);const ze=me.context.gl;return{u_matrix:ve,u_world:[ze.drawingBufferWidth,ze.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ce.paint.get("heatmap-opacity")}})(L,F),null,F.id,L.viewportBuffer,L.quadTriangleIndexBuffer,L.viewportSegments,F.paint,L.transform.zoom)}(_,I))})(i,u,f,g);break;case"line":(function(_,C,I,A){if(_.renderPass!=="translucent")return;const L=I.paint.get("line-opacity"),F=I.paint.get("line-width");if(L.constantOr(1)===0||F.constantOr(1)===0)return;const V=_.depthModeForSublayer(0,kr.ReadOnly),ee=_.colorModeForRenderPass(),he=I.paint.get("line-dasharray"),de=I.paint.get("line-pattern"),me=de.constantOr(1),ce=I.paint.get("line-gradient"),Te=I.getCrossfadeParameters(),Ne=me?"linePattern":he?"lineSDF":ce?"lineGradient":"line",ve=_.context,ze=ve.gl;let Ge=!0;for(const qe of A){const tt=C.getTile(qe);if(me&&!tt.patternsLoaded())continue;const ut=tt.getBucket(I);if(!ut)continue;const at=ut.programConfigurations.get(I.id),pt=_.context.program.get(),Ht=_.useProgram(Ne,at),mr=Ge||Ht.program!==pt,It=_.style.map.terrain&&_.style.map.terrain.getTerrainData(qe),ar=de.constantOr(null);if(ar&&tt.imageAtlas){const fr=tt.imageAtlas,hr=fr.patternPositions[ar.to.toString()],gr=fr.patternPositions[ar.from.toString()];hr&&gr&&at.setConstantPatternPositions(hr,gr)}const qt=It?qe:null,Zr=me?p0(_,tt,I,Te,qt):he?qf(_,tt,I,he,Te,qt):ce?Gf(_,tt,I,ut.lineClipsArray.length,qt):Kd(_,tt,I,qt);if(me)ve.activeTexture.set(ze.TEXTURE0),tt.imageAtlasTexture.bind(ze.LINEAR,ze.CLAMP_TO_EDGE),at.updatePaintBuffers(Te);else if(he&&(mr||_.lineAtlas.dirty))ve.activeTexture.set(ze.TEXTURE0),_.lineAtlas.bind(ve);else if(ce){const fr=ut.gradients[I.id];let hr=fr.texture;if(I.gradientVersion!==fr.version){let gr=256;if(I.stepInterpolant){const Tn=C.getSource().maxzoom,en=qe.canonical.z===Tn?Math.ceil(1<<_.transform.maxZoom-qe.canonical.z):1;gr=c.ad(c.aY(ut.maxLineLength/c.N*1024*en),256,ve.maxTextureSize)}fr.gradient=c.aZ({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:gr,image:fr.gradient||void 0,clips:ut.lineClipsArray}),fr.texture?fr.texture.update(fr.gradient):fr.texture=new xe(ve,fr.gradient,ze.RGBA),fr.version=I.gradientVersion,hr=fr.texture}ve.activeTexture.set(ze.TEXTURE0),hr.bind(I.stepInterpolant?ze.NEAREST:ze.LINEAR,ze.CLAMP_TO_EDGE)}Ht.draw(ve,ze.TRIANGLES,V,_.stencilModeForClipping(qe),ee,dn.disabled,Zr,It,I.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,I.paint,_.transform.zoom,at,ut.layoutVertexBuffer2),Ge=!1}})(i,u,f,g);break;case"fill":(function(_,C,I,A){const L=I.paint.get("fill-color"),F=I.paint.get("fill-opacity");if(F.constantOr(1)===0)return;const V=_.colorModeForRenderPass(),ee=I.paint.get("fill-pattern"),he=_.opaquePassEnabledForLayer()&&!ee.constantOr(1)&&L.constantOr(c.aT.transparent).a===1&&F.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===he){const de=_.depthModeForSublayer(1,_.renderPass==="opaque"?kr.ReadWrite:kr.ReadOnly);Zl(_,C,I,A,de,V,!1)}if(_.renderPass==="translucent"&&I.paint.get("fill-antialias")){const de=_.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,kr.ReadOnly);Zl(_,C,I,A,de,V,!0)}})(i,u,f,g);break;case"fill-extrusion":(function(_,C,I,A){const L=I.paint.get("fill-extrusion-opacity");if(L!==0&&_.renderPass==="translucent"){const F=new kr(_.context.gl.LEQUAL,kr.ReadWrite,_.depthRangeFor3D);if(L!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))Kl(_,C,I,A,F,yn.disabled,gn.disabled),Kl(_,C,I,A,F,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const V=_.colorModeForRenderPass();Kl(_,C,I,A,F,yn.disabled,V)}}})(i,u,f,g);break;case"hillshade":(function(_,C,I,A){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const L=_.context,F=_.depthModeForSublayer(0,kr.ReadOnly),V=_.colorModeForRenderPass(),[ee,he]=_.renderPass==="translucent"?_.stencilConfigForOverlap(A):[{},A];for(const de of he){const me=C.getTile(de);me.needsHillshadePrepare!==void 0&&me.needsHillshadePrepare&&_.renderPass==="offscreen"?dh(_,me,I,F,yn.disabled,V):_.renderPass==="translucent"&&b0(_,de,me,I,F,ee[de.overscaledZ],V)}L.viewport.set([0,0,_.width,_.height])})(i,u,f,g);break;case"raster":(function(_,C,I,A){if(_.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!A.length)return;const L=_.context,F=L.gl,V=C.getSource(),ee=_.useProgram("raster"),he=_.colorModeForRenderPass(),[de,me]=V instanceof Ct?[{},A]:_.stencilConfigForOverlap(A),ce=me[me.length-1].overscaledZ,Te=!_.options.moving;for(const Ne of me){const ve=_.depthModeForSublayer(Ne.overscaledZ-ce,I.paint.get("raster-opacity")===1?kr.ReadWrite:kr.ReadOnly,F.LESS),ze=C.getTile(Ne);ze.registerFadeDuration(I.paint.get("raster-fade-duration"));const Ge=C.findLoadedParent(Ne,0),qe=w0(ze,Ge,C,I,_.transform,_.style.map.terrain);let tt,ut;const at=I.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;L.activeTexture.set(F.TEXTURE0),ze.texture.bind(at,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),L.activeTexture.set(F.TEXTURE1),Ge?(Ge.texture.bind(at,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),tt=Math.pow(2,Ge.tileID.overscaledZ-ze.tileID.overscaledZ),ut=[ze.tileID.canonical.x*tt%1,ze.tileID.canonical.y*tt%1]):ze.texture.bind(at,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST);const pt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ne),Ht=pt?Ne:null,mr=Ht?Ht.posMatrix:_.transform.calculatePosMatrix(Ne.toUnwrapped(),Te),It=Kf(mr,ut||[0,0],tt||1,qe,I);V instanceof Ct?ee.draw(L,F.TRIANGLES,ve,yn.disabled,he,dn.disabled,It,pt,I.id,V.boundsBuffer,_.quadTriangleIndexBuffer,V.boundsSegments):ee.draw(L,F.TRIANGLES,ve,de[Ne.overscaledZ],he,dn.disabled,It,pt,I.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(i,u,f,g);break;case"background":(function(_,C,I,A){const L=I.paint.get("background-color"),F=I.paint.get("background-opacity");if(F===0)return;const V=_.context,ee=V.gl,he=_.transform,de=he.tileSize,me=I.paint.get("background-pattern");if(_.isPatternMissing(me))return;const ce=!me&&L.a===1&&F===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==ce)return;const Te=yn.disabled,Ne=_.depthModeForSublayer(0,ce==="opaque"?kr.ReadWrite:kr.ReadOnly),ve=_.colorModeForRenderPass(),ze=_.useProgram(me?"backgroundPattern":"background"),Ge=A||he.coveringTiles({tileSize:de,terrain:_.style.map.terrain});me&&(V.activeTexture.set(ee.TEXTURE0),_.imageManager.bind(_.context));const qe=I.getCrossfadeParameters();for(const tt of Ge){const ut=A?tt.posMatrix:_.transform.calculatePosMatrix(tt.toUnwrapped()),at=me?mo(ut,F,_,me,{tileID:tt,tileSize:de},qe):Gc(ut,F,L),pt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(tt);ze.draw(V,ee.TRIANGLES,Ne,Te,ve,dn.disabled,at,pt,I.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(i,0,f,g);break;case"custom":(function(_,C,I){const A=_.context,L=I.implementation;if(_.renderPass==="offscreen"){const F=L.prerender;F&&(_.setCustomLayerDefaults(),A.setColorMode(_.colorModeForRenderPass()),F.call(L,A.gl,_.transform.customLayerMatrix()),A.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),A.setColorMode(_.colorModeForRenderPass()),A.setStencilMode(yn.disabled);const F=L.renderingMode==="3d"?new kr(_.context.gl.LEQUAL,kr.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,kr.ReadOnly);A.setDepthMode(F),L.render(A.gl,_.transform.customLayerMatrix()),A.setDirty(),_.setBaseState(),A.bindFramebuffer.set(null)}})(i,0,f)}}translatePosMatrix(i,u,f,g,_){if(!f[0]&&!f[1])return i;const C=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(C){const L=Math.sin(C),F=Math.cos(C);f=[f[0]*F-f[1]*L,f[0]*L+f[1]*F]}const I=[_?f[0]:Y(u,f[0],this.transform.zoom),_?f[1]:Y(u,f[1],this.transform.zoom),0],A=new Float32Array(16);return c.$(A,i,I),A}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!u||!f}useProgram(i,u){this.cache=this.cache||{};const f=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new Vc(this.context,mn[i],u,qc[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new xe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:u}=this.context.gl;return this.width!==i||this.height!==u}}class Oi{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,f){const g=Math.pow(2,f),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const A=1/(I=c.ag([],I,i))[3]/u*g;return c.b3(I,I,[A,A,1/I[3],A])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const A=function(ee,he){var de=he[0],me=he[1],ce=he[2],Te=de*de+me*me+ce*ce;return Te>0&&(Te=1/Math.sqrt(Te)),ee[0]=he[0]*Te,ee[1]=he[1]*Te,ee[2]=he[2]*Te,ee}([],function(ee,he,de){var me=he[0],ce=he[1],Te=he[2],Ne=de[0],ve=de[1],ze=de[2];return ee[0]=ce*ze-Te*ve,ee[1]=Te*Ne-me*ze,ee[2]=me*ve-ce*Ne,ee}([],K([],_[I[0]],_[I[1]]),K([],_[I[2]],_[I[1]]))),L=-((F=A)[0]*(V=_[I[1]])[0]+F[1]*V[1]+F[2]*V[2]);var F,V;return A.concat(L)});return new Oi(_,C)}}class Js{constructor(i,u){this.min=i,this.max=u,this.center=function(f,g,_){return f[0]=.5*g[0],f[1]=.5*g[1],f[2]=.5*g[2],f}([],function(f,g,_){return f[0]=g[0]+_[0],f[1]=g[1]+_[1],f[2]=g[2]+_[2],f}([],this.min,this.max))}quadrant(i){const u=[i%2==0,i<2],f=ie(this.min),g=ie(this.max);for(let _=0;_<u.length;_++)f[_]=u[_]?this.min[_]:this.center[_],g[_]=u[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new Js(f,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let g=0;g<i.planes.length;g++){const _=i.planes[g];let C=0;for(let I=0;I<u.length;I++)c.b4(_,u[I])>=0&&C++;if(C===0)return 0;C!==u.length&&(f=!1)}if(f)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let I=0;I<i.points.length;I++){const A=i.points[I][g]-this.min[g];_=Math.min(_,A),C=Math.max(C,A)}if(C<0||_>this.max[g]-this.min[g])return 0}return 1}}class Jl{constructor(i=0,u=0,f=0,g=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=f,this.right=g}interpolate(i,u,f){return u.top!=null&&i.top!=null&&(this.top=c.B.number(i.top,u.top,f)),u.bottom!=null&&i.bottom!=null&&(this.bottom=c.B.number(i.bottom,u.bottom,f)),u.left!=null&&i.left!=null&&(this.left=c.B.number(i.left,u.left,f)),u.right!=null&&i.right!=null&&(this.right=c.B.number(i.right,u.right,f)),this}getCenter(i,u){const f=c.ad((this.left+i-this.right)/2,0,i),g=c.ad((this.top+u-this.bottom)/2,0,u);return new c.P(f,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Jl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class lu{constructor(i,u,f,g,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=f??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Jl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new lu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-c.b5(i,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var f=new c.A(4);return c.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,g,_){var C=g[0],I=g[1],A=g[2],L=g[3],F=Math.sin(_),V=Math.cos(_);f[0]=C*V+A*F,f[1]=I*V+L*F,f[2]=C*-F+A*V,f[3]=I*-F+L*V}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=c.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,f){this._unmodified=!1,this._edgeInsets.interpolate(i,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new c.b6(0,i)];if(this._renderWorldCopies){const f=this.pointCoordinate(new c.P(0,0)),g=this.pointCoordinate(new c.P(this.width,0)),_=this.pointCoordinate(new c.P(this.width,this.height)),C=this.pointCoordinate(new c.P(0,this.height)),I=Math.floor(Math.min(f.x,g.x,_.x,C.x)),A=Math.floor(Math.max(f.x,g.x,_.x,C.x)),L=1;for(let F=I-L;F<=A+L;F++)F!==0&&u.push(new c.b6(F,i))}return u}coveringTiles(i){var u,f;let g=this.coveringZoomLevel(i);const _=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),I=c.U.fromLngLat(this.center),A=Math.pow(2,g),L=[A*C.x,A*C.y,0],F=[A*I.x,A*I.y,0],V=Oi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let ee=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ee=g);const he=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,de=ve=>({aabb:new Js([ve*A,0,0],[(ve+1)*A,A,0]),zoom:0,x:0,y:0,wrap:ve,fullyVisible:!1}),me=[],ce=[],Te=g,Ne=i.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let ve=1;ve<=3;ve++)me.push(de(-ve)),me.push(de(ve));for(me.push(de(0));me.length>0;){const ve=me.pop(),ze=ve.x,Ge=ve.y;let qe=ve.fullyVisible;if(!qe){const Ht=ve.aabb.intersects(V);if(Ht===0)continue;qe=Ht===2}const tt=i.terrain?L:F,ut=ve.aabb.distanceX(tt),at=ve.aabb.distanceY(tt),pt=Math.max(Math.abs(ut),Math.abs(at));if(ve.zoom===Te||pt>he+(1<<Te-ve.zoom)-2&&ve.zoom>=ee){const Ht=Te-ve.zoom,mr=L[0]-.5-(ze<<Ht),It=L[1]-.5-(Ge<<Ht);ce.push({tileID:new c.O(ve.zoom===Te?Ne:ve.zoom,ve.wrap,ve.zoom,ze,Ge),distanceSq:se([F[0]-.5-ze,F[1]-.5-Ge]),tileDistanceToCamera:Math.sqrt(mr*mr+It*It)})}else for(let Ht=0;Ht<4;Ht++){const mr=(ze<<1)+Ht%2,It=(Ge<<1)+(Ht>>1),ar=ve.zoom+1;let qt=ve.aabb.quadrant(Ht);if(i.terrain){const Zr=new c.O(ar,ve.wrap,ar,mr,It),fr=i.terrain.getMinMaxElevation(Zr),hr=(u=fr.minElevation)!==null&&u!==void 0?u:this.elevation,gr=(f=fr.maxElevation)!==null&&f!==void 0?f:this.elevation;qt=new Js([qt.min[0],qt.min[1],hr],[qt.max[0],qt.max[1],gr])}me.push({aabb:qt,zoom:ar,x:mr,y:It,wrap:ve.wrap,fullyVisible:qe})}}return ce.sort((ve,ze)=>ve.distanceSq-ze.distanceSq).map(ve=>ve.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=c.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.P(c.G(i.lng)*this.worldSize,c.H(u)*this.worldSize)}unproject(i){return new c.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),f=i.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-f))return;const g=this.getCameraPosition(),_=c.U.fromLngLat(g.lngLat,g.altitude),C=c.U.fromLngLat(u,f),I=_.x-C.x,A=_.y-C.y,L=_.z-C.z,F=Math.sqrt(I*I+A*A+L*L),V=this.scaleZoom(this.cameraToCenterDistance/F/this.tileSize);this._elevation=f,this._center=u,this.zoom=V}setLocationAtPoint(i,u){const f=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(i),C=new c.U(_.x-(f.x-g.x),_.y-(f.y-g.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),u.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return c.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const ee=u.pointCoordinate(i);if(ee!=null)return ee}const f=[i.x,i.y,0,1],g=[i.x,i.y,1,1];c.ag(f,f,this.pixelMatrixInverse),c.ag(g,g,this.pixelMatrixInverse);const _=f[3],C=g[3],I=f[1]/_,A=g[1]/C,L=f[2]/_,F=g[2]/C,V=L===F?0:(0-L)/(F-L);return new c.U(c.B.number(f[0]/_,g[0]/C,V)/this.worldSize,c.B.number(I,A,V)/this.worldSize)}coordinatePoint(i,u=0,f=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,u,1];return c.ag(g,g,f),new c.P(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Mt().extend(this.pointLocation(new c.P(0,i))).extend(this.pointLocation(new c.P(this.width,i))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Mt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const f=i.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[f])return g[f];const _=i.canonical,C=this.worldSize/this.zoomScale(_.z),I=_.x+Math.pow(2,_.z)*i.wrap,A=c.ao(new Float64Array(16));return c.$(A,A,[I*C,_.y*C,0]),c.a0(A,A,[C/c.N,C/c.N,1]),c.a1(A,u?this.alignedProjMatrix:this.projMatrix,A),g[f]=new Float32Array(A),g[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,f,g,_=-90,C=90,I=-180,A=180;const L=this.size,F=this._unmodified;if(this.latRange){const he=this.latRange;_=c.H(he[1])*this.worldSize,C=c.H(he[0])*this.worldSize,i=C-_<L.y?L.y/(C-_):0}if(this.lngRange){const he=this.lngRange;I=c.b5(c.G(he[0])*this.worldSize,0,this.worldSize),A=c.b5(c.G(he[1])*this.worldSize,0,this.worldSize),A<I&&(A+=this.worldSize),u=A-I<L.x?L.x/(A-I):0}const V=this.point,ee=Math.max(u||0,i||0);if(ee)return this.center=this.unproject(new c.P(u?(A+I)/2:V.x,i?(C+_)/2:V.y)),this.zoom+=this.scaleZoom(ee),this._unmodified=F,void(this._constraining=!1);if(this.latRange){const he=V.y,de=L.y/2;he-de<_&&(g=_+de),he+de>C&&(g=C-de)}if(this.lngRange){const he=(I+A)/2,de=c.b5(V.x,he-this.worldSize/2,he+this.worldSize/2),me=L.x/2;de-me<I&&(f=I+me),de+me>A&&(f=A-me)}f===void 0&&g===void 0||(this.center=this.unproject(new c.P(f!==void 0?f:V.x,g!==void 0?g:V.y)).wrap()),this._unmodified=F,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b7(1,this.center.lat)*this.worldSize;let g=c.ao(new Float64Array(16));c.a0(g,g,[this.width/2,-this.height/2,1]),c.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=c.ao(new Float64Array(16)),c.a0(g,g,[1,-1,1]),c.$(g,g,[-1,-1,0]),c.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this._minEleveationForCurrentTile),I=_-C*this._pixelPerMeter/Math.cos(this._pitch),A=C<0?I:_,L=Math.PI/2+this._pitch,F=this._fov*(.5+i.y/this.height),V=Math.sin(F)*A/Math.sin(c.ad(Math.PI-L-F,.01,Math.PI-.01)),ee=this.getHorizon(),he=2*Math.atan(ee/this.cameraToCenterDistance)*(.5+i.y/(2*ee)),de=Math.sin(he)*A/Math.sin(c.ad(Math.PI-L-he,.01,Math.PI-.01)),me=Math.min(V,de),ce=1.01*(Math.cos(Math.PI/2-this._pitch)*me+A),Te=this.height/50;g=new Float64Array(16),c.b8(g,this._fov,this.width/this.height,Te,ce),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,c.a0(g,g,[1,-1,1]),c.$(g,g,[0,0,-this.cameraToCenterDistance]),c.b9(g,g,this._pitch),c.ae(g,g,this.angle),c.$(g,g,[-u,-f,0]),this.mercatorMatrix=c.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),c.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.a1(new Float64Array(16),this.labelPlaneMatrix,g),c.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=c.as([],g),this.pixelMatrix3D=c.a1(new Float64Array(16),this.labelPlaneMatrix,g);const Ne=this.width%2/2,ve=this.height%2/2,ze=Math.cos(this.angle),Ge=Math.sin(this.angle),qe=u-Math.round(u)+ze*Ne+Ge*ve,tt=f-Math.round(f)+ze*ve+Ge*Ne,ut=new Float64Array(g);if(c.$(ut,ut,[qe>.5?qe-1:qe,tt>.5?tt-1:tt,0]),this.alignedProjMatrix=ut,g=c.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new c.P(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return c.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let f=u.x,g=u.y,_=u.x,C=u.y;for(const I of i)f=Math.min(f,I.x),g=Math.min(g,I.y),_=Math.max(_,I.x),C=Math.max(C,I.y);return[new c.P(f,g),new c.P(_,g),new c.P(_,C),new c.P(f,C),new c.P(f,g)]}}}function ys(y,i){let u,f=!1,g=null,_=null;const C=()=>{g=null,f&&(y.apply(_,u),g=setTimeout(C,i),f=!1)};return(...I)=>(f=!0,_=this,u=I,g||C(),g)}class Yl{constructor(i){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let f;return u.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(f=g)}),(f&&f[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:f,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=ys(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),C=Math.round(u.lng*_)/_,I=Math.round(u.lat*_)/_,A=this._map.getBearing(),L=this._map.getPitch();let F="";if(F+=i?`/${C}/${I}/${f}`:`${f}/${I}/${C}`,(A||L)&&(F+="/"+Math.round(10*A)/10),L&&(F+=`/${Math.round(L)}`),this._hashName){const V=this._hashName;let ee=!1;const he=window.location.hash.slice(1).split("&").map(de=>{const me=de.split("=")[0];return me===V?(ee=!0,`${me}=${F}`):de}).filter(de=>de);return ee||he.push(`${V}=${F}`),`#${he.join("&")}`}return`#${F}`}}const Ys={linearity:.3,easing:c.ba(0,0,.3,1)},lm=c.e({deceleration:2500,maxSpeed:1400},Ys),cm=c.e({deceleration:20,maxSpeed:1400},Ys),um=c.e({deceleration:1e3,maxSpeed:360},Ys),dm=c.e({deceleration:1e3,maxSpeed:90},Ys);class hm{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=c.h.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const _=Ql(u.pan.mag(),f,c.e({},lm,i||{}));g.offset=u.pan.mult(_.amount/u.pan.mag()),g.center=this._map.transform.center,Ko(g,_)}if(u.zoom){const _=Ql(u.zoom,f,cm);g.zoom=this._map.transform.zoom+_.amount,Ko(g,_)}if(u.bearing){const _=Ql(u.bearing,f,um);g.bearing=this._map.transform.bearing+c.ad(_.amount,-179,179),Ko(g,_)}if(u.pitch){const _=Ql(u.pitch,f,dm);g.pitch=this._map.transform.pitch+_.amount,Ko(g,_)}if(g.zoom||g.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),c.e(g,{noMoveStart:!0})}}function Ko(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Ql(y,i,u){const{maxSpeed:f,linearity:g,deceleration:_}=u,C=c.ad(y*g/(i/1e3),-f,f),I=Math.abs(C)/(_*g);return{easing:u.easing,duration:1e3*I,amount:C*(I/2)}}class to extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,f,g={}){const _=w.mousePos(u.getCanvasContainer(),f),C=u.unproject(_);super(i,c.e({point:_,lngLat:C,originalEvent:f},g)),this._defaultPrevented=!1,this.target=u}}class ec extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,f){const g=i==="touchend"?f.changedTouches:f.touches,_=w.touchPos(u.getCanvasContainer(),g),C=_.map(A=>u.unproject(A)),I=_.reduce((A,L,F,V)=>A.add(L.div(V.length)),new c.P(0,0));super(i,{points:_,point:I,lngLats:C,lngLat:u.unproject(I),originalEvent:f}),this._defaultPrevented=!1}}class pm extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}}class fm{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new pm(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new to(i.type,this._map,i))}mouseup(i){this._map.fire(new to(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new to(i.type,this._map,i))}dblclick(i){return this._firePreventable(new to(i.type,this._map,i))}mouseover(i){this._map.fire(new to(i.type,this._map,i))}mouseout(i){this._map.fire(new to(i.type,this._map,i))}touchstart(i){return this._firePreventable(new ec(i.type,this._map,i))}touchmove(i){this._map.fire(new ec(i.type,this._map,i))}touchend(i){this._map.fire(new ec(i.type,this._map,i))}touchcancel(i){this._map.fire(new ec(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mm{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new to(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new to("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new to(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ya{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(c.P.convert(i),this._map.terrain)}}class gm{constructor(i,u){this._map=i,this._tr=new ya(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=f,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const _=Math.min(g.x,f.x),C=Math.max(g.x,f.x),I=Math.min(g.y,f.y),A=Math.max(g.y,f.y);w.setTransform(this._box,`translate(${_}px,${I}px)`),this._box.style.width=C-_+"px",this._box.style.height=A-I+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const f=this._startPos,g=u;if(this.reset(),w.suppressClick(),f.x!==g.x||f.y!==g.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:i})),{cameraAnimation:_=>_.fitScreenCoordinates(f,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new c.k(i,{originalEvent:u}))}}function go(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const u={};for(let f=0;f<y.length;f++)u[y[f].identifier]=i[f];return u}class va{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(g){const _=new c.P(0,0);for(const C of g)_._add(C);return _.div(g.length)}(u),this.touches=go(f,u)))}touchmove(i,u,f){if(this.aborted||!this.centroid)return;const g=go(f,u);for(const _ in this.touches){const C=g[_];(!C||C.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(i,u,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class cu{constructor(i){this.singleTap=new va(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,f){this.singleTap.touchstart(i,u,f)}touchmove(i,u,f){this.singleTap.touchmove(i,u,f)}touchend(i,u,f){const g=this.singleTap.touchend(i,u,f);if(g){const _=i.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(g)<30;if(_&&C||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class _a{constructor(i){this._tr=new ya(i),this._zoomIn=new cu({numTouches:1,numTaps:2}),this._zoomOut=new cu({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,f){this._zoomIn.touchstart(i,u,f),this._zoomOut.touchstart(i,u,f)}touchmove(i,u,f){this._zoomIn.touchmove(i,u,f),this._zoomOut.touchmove(i,u,f)}touchend(i,u,f){const g=this._zoomIn.touchend(i,u,f),_=this._zoomOut.touchend(i,u,f),C=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(g)},{originalEvent:i})}):_?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(_)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xa{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const u=this._moveFunction(...i);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(i,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,u){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=u.length?u[0]:u;return!this._moved&&g.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(f,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&w.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const S0={0:1,2:2};class ph{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const u=w.mouseButton(i);this._eventButton=u}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(u,f){const g=S0[f];return u.buttons===void 0||(u.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return w.mouseButton(i)===this._eventButton}}class ym{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const uu=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(i){i.preventDefault()}},Qs=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:u=.8})=>{const f=new ph({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new xa({clickTolerance:i,move:(g,_)=>({bearingDelta:(_.x-g.x)*u}),moveStateManager:f,enable:y,assignEvents:uu})},ba=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:u=-.5})=>{const f=new ph({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new xa({clickTolerance:i,move:(g,_)=>({pitchDelta:(_.y-g.y)*u}),moveStateManager:f,enable:y,assignEvents:uu})};class $t{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,f){return this._calculateTransform(i,u,f)}touchmove(i,u,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,f)}touchend(i,u,f){this._calculateTransform(i,u,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,f){f.length>0&&(this._active=!0);const g=go(f,u),_=new c.P(0,0),C=new c.P(0,0);let I=0;for(const L in g){const F=g[L],V=this._touches[L];V&&(_._add(F),C._add(F.sub(V)),I++,g[L]=F)}if(this._touches=g,I<this._minTouches||!C.mag())return;const A=C.div(I);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(I),panDelta:A}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class du{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,f){if(!this._firstTwoTouches)return;i.preventDefault();const[g,_]=this._firstTwoTouches,C=Wa(f,u,g),I=Wa(f,u,_);if(!C||!I)return;const A=this._aroundCenter?null:C.add(I).div(2);return this._move([C,I],A,i)}touchend(i,u,f){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,C=Wa(f,u,g),I=Wa(f,u,_);C&&I||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Wa(y,i,u){for(let f=0;f<y.length;f++)if(y[f].identifier===u)return i[f]}function el(y,i){return Math.log(y/i)/Math.LN2}class vm extends du{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(el(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:el(this._distance,f),pinchAround:u}}}function zt(y,i){return 180*y.angleWith(i)/Math.PI}class fh extends du{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const f=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:zt(this._vector,f),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,f=zt(i,this._startVector);return Math.abs(f)<u}}function mh(y){return Math.abs(y.y)>Math.abs(y.x)}class C0 extends du{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,f){super.touchstart(i,u,f),this._currentTouchCount=f.length}_start(i){this._lastPoints=i,mh(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),_=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,f.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,f){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,_=u.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const C=i.y>0==u.y>0;return mh(i)&&mh(u)&&C}}const gh={panStep:100,bearingStep:15,pitchStep:10};class _m{constructor(i){this._tr=new ya(i);const u=gh;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,f=0,g=0,_=0,C=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),_=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),_=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),C=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:I=>{const A=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:xm,zoom:u?Math.round(A.zoom)+u*(i.shiftKey?2:1):A.zoom,bearing:A.bearing+f*this._bearingStep,pitch:A.pitch+g*this._pitchStep,offset:[-_*this._panStep,-C*this._panStep],center:A.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function xm(y){return y*(2-y)}const bm=4.000244140625;class I0{constructor(i,u){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=i,this._tr=new ya(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=c.h.now(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%bm==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,i),f=this._tr;this._around=c.L.convert(this._aroundCenter?f.center:f.unproject(u)),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>bm?this._wheelZoomRate:this._defaultZoomRate;let A=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&A!==0&&(A=1/A);const L=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(L*A))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,f=this._startZoom,g=this._easing;let _,C=!1;if(this._type==="wheel"&&f&&g){const I=Math.min((c.h.now()-this._lastWheelEventTime)/200,1),A=g(I);_=c.B.number(f,u,A),I<1?this._frameId||(this._frameId=!0):C=!0}else _=u,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:_-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=c.bb;if(this._prevEase){const f=this._prevEase,g=(c.h.now()-f.start)/f.duration,_=f.easing(g+.01)-f.easing(g),C=.27/Math.sqrt(_*_+1e-4)*.01,I=Math.sqrt(.0729-C*C);u=c.ba(C,I,.25,1)}return this._prevEase={start:c.h.now(),duration:i,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class yh{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class vh{constructor(i){this._tr=new ya(i),this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _h{constructor(){this._tap=new cu({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,u,f){if(!this._swipePoint)if(this._tapTime){const g=u[0],_=i.timeStamp-this._tapTime<500,C=this._tapPoint.dist(g)<30;_&&C?f.length>0&&(this._swipePoint=g,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(i,u,f)}touchmove(i,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const g=u[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(i,u,f)}touchend(i,u,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const g=this._tap.touchend(i,u,f);g&&(this._tapTime=i.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xh{constructor(i,u,f){this._el=i,this._mousePan=u,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Bi{constructor(i,u,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ga{constructor(i,u,f,g){this._el=i,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const tc=y=>y.zoom||y.drag||y.pitch||y.rotate;class bh extends c.k{}function rc(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class wh{constructor(i,u){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=g.type==="renderFrame"?void 0:g,I={needsRenderFrame:!1},A={},L={},F=g.touches,V=F?this._getMapTouches(F):void 0,ee=V?w.touchPos(this._el,V):w.mousePos(this._el,g);for(const{handlerName:me,handler:ce,allowed:Te}of this._handlers){if(!ce.isEnabled())continue;let Ne;this._blockedByActive(L,Te,me)?ce.reset():ce[_||g.type]&&(Ne=ce[_||g.type](g,ee,V),this.mergeHandlerResult(I,A,Ne,me,C),Ne&&Ne.needsRenderFrame&&this._triggerRenderFrame()),(Ne||ce.isActive())&&(L[me]=ce)}const he={};for(const me in this._previousActiveHandlers)L[me]||(he[me]=C);this._previousActiveHandlers=L,(Object.keys(he).length||rc(I))&&(this._changes.push([I,A,he]),this._triggerRenderFrame()),(Object.keys(L).length||rc(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:de}=I;de&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],de(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new hm(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,C]of this._listeners)w.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[i,u,f]of this._listeners)w.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new fm(u,i));const g=u.boxZoom=new gm(u,i);this._add("boxZoom",g),i.interactive&&i.boxZoom&&g.enable();const _=new _a(u),C=new vh(u);u.doubleClickZoom=new yh(C,_),this._add("tapZoom",_),this._add("clickZoom",C),i.interactive&&i.doubleClickZoom&&u.doubleClickZoom.enable();const I=new _h;this._add("tapDragZoom",I);const A=u.touchPitch=new C0(u);this._add("touchPitch",A),i.interactive&&i.touchPitch&&u.touchPitch.enable(i.touchPitch);const L=Qs(i),F=ba(i);u.dragRotate=new Bi(i,L,F),this._add("mouseRotate",L,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]),i.interactive&&i.dragRotate&&u.dragRotate.enable();const V=(({enable:Te,clickTolerance:Ne})=>{const ve=new ph({checkCorrectEvent:ze=>w.mouseButton(ze)===0&&!ze.ctrlKey});return new xa({clickTolerance:Ne,move:(ze,Ge)=>({around:Ge,panDelta:Ge.sub(ze)}),activateOnStart:!0,moveStateManager:ve,enable:Te,assignEvents:uu})})(i),ee=new $t(i,u);u.dragPan=new xh(f,V,ee),this._add("mousePan",V),this._add("touchPan",ee,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&u.dragPan.enable(i.dragPan);const he=new fh,de=new vm;u.touchZoomRotate=new Ga(f,de,he,I),this._add("touchRotate",he,["touchPan","touchZoom"]),this._add("touchZoom",de,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&u.touchZoomRotate.enable(i.touchZoomRotate);const me=u.scrollZoom=new I0(u,()=>this._triggerRenderFrame());this._add("scrollZoom",me,["mousePan"]),i.interactive&&i.scrollZoom&&u.scrollZoom.enable(i.scrollZoom);const ce=u.keyboard=new _m(u);this._add("keyboard",ce),i.interactive&&i.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new mm(u))}_add(i,u,f){this._handlers.push({handlerName:i,handler:u,allowed:f}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!tc(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,u,f){for(const g in i)if(g!==f&&(!u||u.indexOf(g)<0))return!0;return!1}_getMapTouches(i){const u=[];for(const f of i)this._el.contains(f.target)&&u.push(f);return u}mergeHandlerResult(i,u,f,g,_){if(!f)return;c.e(i,f);const C={handlerName:g,originalEvent:f.originalEvent||_};f.zoomDelta!==void 0&&(u.zoom=C),f.panDelta!==void 0&&(u.drag=C),f.pitchDelta!==void 0&&(u.pitch=C),f.bearingDelta!==void 0&&(u.rotate=C)}_applyChanges(){const i={},u={},f={};for(const[g,_,C]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new c.P(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),c.e(u,_),c.e(f,C);this._updateMapTransform(i,u,f),this._changes=[]}_updateMapTransform(i,u,f){const g=this._map,_=g._getTransformForUpdate(),C=g.terrain;if(!(rc(i)||C&&this._terrainMovement))return this._fireEvents(u,f,!0);let{panDelta:I,zoomDelta:A,bearingDelta:L,pitchDelta:F,around:V,pinchAround:ee}=i;ee!==void 0&&(V=ee),g._stop(!0),V=V||g.transform.centerPoint;const he=_.pointLocation(I?V.sub(I):V);L&&(_.bearing+=L),F&&(_.pitch+=F),A&&(_.zoom+=A),C?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(I)):_.setLocationAtPoint(he,V):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(he,V),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(g.terrain)})):_.setLocationAtPoint(he,V),g._applyUpdatedTransform(_),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,f,!0)}_fireEvents(i,u,f){const g=tc(this._eventsInProgress),_=tc(i),C={};for(const F in i){const{originalEvent:V}=i[F];this._eventsInProgress[F]||(C[`${F}start`]=V),this._eventsInProgress[F]=i[F]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const F in C)this._fireEvent(F,C[F]);_&&this._fireEvent("move",_.originalEvent);for(const F in i){const{originalEvent:V}=i[F];this._fireEvent(F,V)}const I={};let A;for(const F in this._eventsInProgress){const{handlerName:V,originalEvent:ee}=this._eventsInProgress[F];this._handlersById[V].isActive()||(delete this._eventsInProgress[F],A=u[V]||ee,I[`${F}end`]=A)}for(const F in I)this._fireEvent(F,I[F]);const L=tc(this._eventsInProgress);if(f&&(g||_)&&!L){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),V=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;!F||!F.essential&&c.h.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:A})),V(this._map.getBearing())&&this._map.resetNorth()):(V(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:A})),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new c.k(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new bh("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class wm extends c.E{constructor(i,u){super(),this._renderFrameCallback=()=>{const f=Math.min((c.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,f){return i=c.P.convert(i).mult(-1),this.panTo(this.transform.center,c.e({offset:i},u),f)}panTo(i,u,f){return this.easeTo(c.e({center:i},u),f)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,f){return this.easeTo(c.e({zoom:i},u),f)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,f){return this.easeTo(c.e({bearing:i},u),f)}resetNorth(i,u){return this.rotateTo(0,c.e({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=Mt.convert(i);const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,u)}_cameraForBoxAndBearing(i,u,f,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=c.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const Ge=g.padding;g.padding={top:Ge,bottom:Ge,right:Ge,left:Ge}}g.padding=c.e(_,g.padding);const C=this.transform,I=C.padding,A=C.project(c.L.convert(i)),L=C.project(c.L.convert(u)),F=A.rotate(-f*Math.PI/180),V=L.rotate(-f*Math.PI/180),ee=new c.P(Math.max(F.x,V.x),Math.max(F.y,V.y)),he=new c.P(Math.min(F.x,V.x),Math.min(F.y,V.y)),de=ee.sub(he),me=(C.width-(I.left+I.right+g.padding.left+g.padding.right))/de.x,ce=(C.height-(I.top+I.bottom+g.padding.top+g.padding.bottom))/de.y;if(ce<0||me<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Te=Math.min(C.scaleZoom(C.scale*Math.min(me,ce)),g.maxZoom),Ne=c.P.convert(g.offset),ve=new c.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(f*Math.PI/180),ze=Ne.add(ve).mult(C.scale/C.zoomScale(Te));return{center:C.unproject(A.add(L).div(2).sub(ze)),zoom:Te,bearing:f}}fitBounds(i,u,f){return this._fitInternal(this.cameraForBounds(i,u),u,f)}fitScreenCoordinates(i,u,f,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(i)),this.transform.pointLocation(c.P.convert(u)),f,g),g,_)}_fitInternal(i,u,f){return i?(delete(u=c.e(i,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(i,u){this.stop();const f=this._getTransformForUpdate();let g=!1,_=!1,C=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(g=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=c.L.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(_=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(C=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),this._applyUpdatedTransform(f),this.fire(new c.k("movestart",u)).fire(new c.k("move",u)),g&&this.fire(new c.k("zoomstart",u)).fire(new c.k("zoom",u)).fire(new c.k("zoomend",u)),_&&this.fire(new c.k("rotatestart",u)).fire(new c.k("rotate",u)).fire(new c.k("rotateend",u)),C&&this.fire(new c.k("pitchstart",u)).fire(new c.k("pitch",u)).fire(new c.k("pitchend",u)),this.fire(new c.k("moveend",u))}calculateCameraOptionsFromTo(i,u,f,g=0){const _=c.U.fromLngLat(i,u),C=c.U.fromLngLat(f,g),I=C.x-_.x,A=C.y-_.y,L=C.z-_.z,F=Math.hypot(I,A,L);if(F===0)throw new Error("Can't calculate camera options with same From and To");const V=Math.hypot(I,A),ee=this.transform.scaleZoom(this.transform.cameraToCenterDistance/F/this.transform.tileSize),he=180*Math.atan2(I,-A)/Math.PI;let de=180*Math.acos(V/F)/Math.PI;return de=L<0?90-de:90+de,{center:C.toLngLat(),zoom:ee,pitch:de,bearing:he}}easeTo(i,u){this._stop(!1,i.easeId),((i=c.e({offset:[0,0],duration:500,easing:c.bb},i)).animate===!1||!i.essential&&c.h.prefersReducedMotion)&&(i.duration=0);const f=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),I=this.getPadding(),A="zoom"in i?+i.zoom:g,L="bearing"in i?this._normalizeBearing(i.bearing,_):_,F="pitch"in i?+i.pitch:C,V="padding"in i?i.padding:f.padding,ee=c.P.convert(i.offset);let he=f.centerPoint.add(ee);const de=f.pointLocation(he),me=c.L.convert(i.center||de);this._normalizeCenter(me);const ce=f.project(de),Te=f.project(me).sub(ce),Ne=f.zoomScale(A-g);let ve,ze;i.around&&(ve=c.L.convert(i.around),ze=f.locationPoint(ve));const Ge={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||A!==g,this._rotating=this._rotating||_!==L,this._pitching=this._pitching||F!==C,this._padding=!f.isPaddingEqual(V),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,Ge),this.terrain&&this._prepareElevation(me),this._ease(qe=>{if(this._zooming&&(f.zoom=c.B.number(g,A,qe)),this._rotating&&(f.bearing=c.B.number(_,L,qe)),this._pitching&&(f.pitch=c.B.number(C,F,qe)),this._padding&&(f.interpolatePadding(I,V,qe),he=f.centerPoint.add(ee)),this.terrain&&!i.freezeElevation&&this._updateElevation(qe),ve)f.setLocationAtPoint(ve,ze);else{const tt=f.zoomScale(f.zoom-g),ut=A>g?Math.min(2,Ne):Math.max(.5,Ne),at=Math.pow(ut,1-qe),pt=f.unproject(ce.add(Te.mult(qe*at)).mult(tt));f.setLocationAtPoint(f.renderWorldCopies?pt.wrap():pt,he)}this._applyUpdatedTransform(f),this._fireMoveEvents(u)},qe=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,qe)},i),this}_prepareEase(i,u,f={}){this._moving=!0,u||f.moving||this.fire(new c.k("movestart",i)),this._zooming&&!f.zooming&&this.fire(new c.k("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new c.k("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new c.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&u!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(f-(u-(f*i+this._elevationStart))/(1-i)),this._elevationTarget=u}this.transform.elevation=c.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const u=i.clone(),{center:f,zoom:g,pitch:_,bearing:C,elevation:I}=this.transformCameraUpdate(u);f&&(u.center=f),g!==void 0&&(u.zoom=g),_!==void 0&&(u.pitch=_),C!==void 0&&(u.bearing=C),I!==void 0&&(u.elevation=I),this.transform.apply(u)}_fireMoveEvents(i){this.fire(new c.k("move",i)),this._zooming&&this.fire(new c.k("zoom",i)),this._rotating&&this.fire(new c.k("rotate",i)),this._pitching&&this.fire(new c.k("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const f=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new c.k("zoomend",i)),g&&this.fire(new c.k("rotateend",i)),_&&this.fire(new c.k("pitchend",i)),this.fire(new c.k("moveend",i))}flyTo(i,u){if(!i.essential&&c.h.prefersReducedMotion){const qt=c.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(qt,u)}this.stop(),i=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.bb},i);const f=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),I=this.getPadding(),A="zoom"in i?c.ad(+i.zoom,f.minZoom,f.maxZoom):g,L="bearing"in i?this._normalizeBearing(i.bearing,_):_,F="pitch"in i?+i.pitch:C,V="padding"in i?i.padding:f.padding,ee=f.zoomScale(A-g),he=c.P.convert(i.offset);let de=f.centerPoint.add(he);const me=f.pointLocation(de),ce=c.L.convert(i.center||me);this._normalizeCenter(ce);const Te=f.project(me),Ne=f.project(ce).sub(Te);let ve=i.curve;const ze=Math.max(f.width,f.height),Ge=ze/ee,qe=Ne.mag();if("minZoom"in i){const qt=c.ad(Math.min(i.minZoom,g,A),f.minZoom,f.maxZoom),Zr=ze/f.zoomScale(qt-g);ve=Math.sqrt(Zr/qe*2)}const tt=ve*ve;function ut(qt){const Zr=(Ge*Ge-ze*ze+(qt?-1:1)*tt*tt*qe*qe)/(2*(qt?Ge:ze)*tt*qe);return Math.log(Math.sqrt(Zr*Zr+1)-Zr)}function at(qt){return(Math.exp(qt)-Math.exp(-qt))/2}function pt(qt){return(Math.exp(qt)+Math.exp(-qt))/2}const Ht=ut(!1);let mr=function(qt){return pt(Ht)/pt(Ht+ve*qt)},It=function(qt){return ze*((pt(Ht)*(at(Zr=Ht+ve*qt)/pt(Zr))-at(Ht))/tt)/qe;var Zr},ar=(ut(!0)-Ht)/ve;if(Math.abs(qe)<1e-6||!isFinite(ar)){if(Math.abs(ze-Ge)<1e-6)return this.easeTo(i,u);const qt=Ge<ze?-1:1;ar=Math.abs(Math.log(Ge/ze))/ve,It=function(){return 0},mr=function(Zr){return Math.exp(qt*ve*Zr)}}return i.duration="duration"in i?+i.duration:1e3*ar/("screenSpeed"in i?+i.screenSpeed/ve:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=_!==L,this._pitching=F!==C,this._padding=!f.isPaddingEqual(V),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ce),this._ease(qt=>{const Zr=qt*ar,fr=1/mr(Zr);f.zoom=qt===1?A:g+f.scaleZoom(fr),this._rotating&&(f.bearing=c.B.number(_,L,qt)),this._pitching&&(f.pitch=c.B.number(C,F,qt)),this._padding&&(f.interpolatePadding(I,V,qt),de=f.centerPoint.add(he)),this.terrain&&!i.freezeElevation&&this._updateElevation(qt);const hr=qt===1?ce:f.unproject(Te.add(Ne.mult(It(Zr))).mult(fr));f.setLocationAtPoint(f.renderWorldCopies?hr.wrap():hr,de),this._applyUpdatedTransform(f),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}if(!i){const f=this.handlers;f&&f.stop(!1)}return this}_ease(i,u,f){f.animate===!1||f.duration===0?(i(1),u()):(this._easeStart=c.h.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,u){i=c.b5(i,-180,180);const f=Math.abs(i-u);return Math.abs(i-360-u)<f&&(i-=360),Math.abs(i+360-u)<f&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const f=i.lng-u.center.lng;i.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(c.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class ro{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const f=this._map._getUIString(`AttributionControl.${u}`);i.title=f,i.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const _=u[g];if(_.used||_.usedForTerrain){const C=_.getSource();C.attribution&&i.indexOf(C.attribution)<0&&i.push(C.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,_)=>g.length-_.length),i=i.filter((g,_)=>{for(let C=_+1;C<i.length;C++)if(i[C].indexOf(g)>=0)return!1;return!0});const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class on{constructor(i={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const f=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class hu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const g of f)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Sh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Sm=c.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Cm extends c.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];const f={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))f[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),c.aS(g.posMatrix,0,c.N,0,c.N,0,1),this._tiles[g.key]=new Ft(g,this.tileSize));for(const g in this._tiles)f[g]||delete this._tiles[g]}freeRtt(i){for(const u in this._tiles){const f=this._tiles[u];(!i||f.tileID.equals(i)||f.tileID.isChildOf(i)||i.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const f of this._renderableTilesKeys){const g=this._tiles[f].tileID;if(g.canonical.equals(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16),c.aS(_.posMatrix,0,c.N,0,c.N,0,1),u[f]=_}else if(g.canonical.isChildOf(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=g.canonical.z-i.canonical.z,I=g.canonical.x-(g.canonical.x>>C<<C),A=g.canonical.y-(g.canonical.y>>C<<C),L=c.N>>C;c.aS(_.posMatrix,0,L,0,L,0,1),c.$(_.posMatrix,_.posMatrix,[-I*L,-A*L,0]),u[f]=_}else if(i.canonical.isChildOf(g.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=i.canonical.z-g.canonical.z,I=i.canonical.x-(i.canonical.x>>C<<C),A=i.canonical.y-(i.canonical.y>>C<<C),L=c.N>>C;c.aS(_.posMatrix,0,c.N,0,c.N,0,1),c.$(_.posMatrix,_.posMatrix,[I*L,A*L,0]),c.a0(_.posMatrix,_.posMatrix,[1/2**C,1/2**C,0]),u[f]=_}}return u}getSourceTile(i,u){const f=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>f.maxzoom&&(g=f.maxzoom),g<f.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!_||!_.dem)&&u)for(;g>=f.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(i.scaledTo(g--).key);return _}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=i)}}class Im{constructor(i,u,f){this.painter=i,this.sourceCache=new Cm(u),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,u,f,g=c.N){var _;if(!(u>=0&&u<g&&f>=0&&f<g))return 0;const C=this.getTerrainData(i),I=(_=C.tile)===null||_===void 0?void 0:_.dem;if(!I)return 0;const A=function(de,me,ce){var Te=me[0],Ne=me[1];return de[0]=ce[0]*Te+ce[4]*Ne+ce[12],de[1]=ce[1]*Te+ce[5]*Ne+ce[13],de}([],[u/g*c.N,f/g*c.N],C.u_terrain_matrix),L=[A[0]*I.dim,A[1]*I.dim],F=Math.floor(L[0]),V=Math.floor(L[1]),ee=L[0]-F,he=L[1]-V;return I.get(F,V)*(1-ee)*(1-he)+I.get(F+1,V)*ee*(1-he)+I.get(F,V+1)*(1-ee)*he+I.get(F+1,V+1)*ee*he}getElevationForLngLatZoom(i,u){const{tileID:f,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(i,u);return this.getElevation(f,g%c.N,_%c.N,c.N)}getElevation(i,u,f,g=c.N){return this.getDEMElevation(i,u,f,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,_=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new xe(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new xe(g,new c.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ao([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new xe(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const f=u&&u+u.tileID.key+i.key;if(f&&!this._demMatrixCache[f]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?_=i.canonical.z-g:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=i.canonical.x-(i.canonical.x>>_<<_),I=i.canonical.y-(i.canonical.y>>_<<_),A=c.bc(new Float64Array(16),[1/(c.N<<_),1/(c.N<<_),0]);c.$(A,A,[C*c.N,I*c.N,0]),this._demMatrixCache[i.key]={matrix:A,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(i){const u=this.painter,f=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new xe(u.context,{width:f,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new xe(u.context,{width:f,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(f,g,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,f,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,C=0;_<this._coordsTextureSize;_++)for(let I=0;I<this._coordsTextureSize;I++,C+=4)u[C+0]=255&I,u[C+1]=255&_,u[C+2]=I>>8<<4|_>>8,u[C+3]=0;const f=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new xe(i,f,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){const u=new Uint8Array(4),f=this.painter.context,g=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),f.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),C=u[1]+((15&u[2])<<8),I=this.coordsIndex[255-u[3]],A=I&&this.sourceCache.getTileByID(I);if(!A)return null;const L=this._coordsTextureSize,F=(1<<A.tileID.canonical.z)*L;return new c.U(this._allowMercatorOverflow(i,(A.tileID.canonical.x*L+_)/F),(A.tileID.canonical.y*L+C)/F,this.getElevation(A.tileID,_,C,L))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,u=new c.bd,f=new c.b0,g=this.meshSize,_=c.N/g,C=g*g;for(let V=0;V<=g;V++)for(let ee=0;ee<=g;ee++)u.emplaceBack(ee*_,V*_,0);for(let V=0;V<C;V+=g+1)for(let ee=0;ee<g;ee++)f.emplaceBack(ee+V,g+ee+V+1,g+ee+V+2),f.emplaceBack(ee+V,g+ee+V+2,ee+V+1);const I=u.length,A=I+2*(g+1);for(const V of[0,1])for(let ee=0;ee<=g;ee++)for(const he of[0,1])u.emplaceBack(ee*_,V*c.N,he);for(let V=0;V<2*g;V+=2)f.emplaceBack(A+V,A+V+1,A+V+3),f.emplaceBack(A+V,A+V+3,A+V+2),f.emplaceBack(I+V,I+V+3,I+V+1),f.emplaceBack(I+V,I+V+2,I+V+3);const L=u.length,F=L+2*(g+1);for(const V of[0,1])for(let ee=0;ee<=g;ee++)for(const he of[0,1])u.emplaceBack(V*c.N,ee*_,he);for(let V=0;V<2*g;V+=2)f.emplaceBack(L+V,L+V+1,L+V+3),f.emplaceBack(L+V,L+V+3,L+V+2),f.emplaceBack(F+V,F+V+3,F+V+1),f.emplaceBack(F+V,F+V+2,F+V+3);return this._mesh={indexBuffer:i.createIndexBuffer(f),vertexBuffer:i.createVertexBuffer(u,Sm.members),segments:c.S.simpleSegment(0,0,u.length,f.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*c.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,u){var f;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(i,u);return(f=this.getMinMaxElevation(g).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,f={minElevation:null,maxElevation:null};return u&&u.dem&&(f.minElevation=u.dem.min*this.exaggeration,f.maxElevation=u.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(i,u){const f=c.U.fromLngLat(i.wrap()),g=(1<<u)*c.N,_=f.x*g,C=f.y*g,I=Math.floor(_/c.N),A=Math.floor(C/c.N);return{tileID:new c.O(u,0,u,I,A),mercatorX:_,mercatorY:C}}_allowMercatorOverflow(i,u){const f=i.x<this.painter.width/2;let g=c.bf(u);const _=this.painter.transform.center.lng;return f&&Math.sign(g)>0&&Math.sign(_)<0||!f&&Math.sign(g)<0&&Math.sign(_)>0?(g=360*Math.sign(_)+g,c.G(g)):u}}class T0{constructor(i,u,f){this._context=i,this._size=u,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new xe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(f.texture),{id:i,fbo:u,texture:f,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>i.id!==u),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const Si={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class pu{constructor(i,u){this.painter=i,this.terrain=u,this.pool=new T0(i.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(f=>!i._layers[f].isHidden(u)),this._coordsDescendingInv={};for(const f in i.sourceCaches){this._coordsDescendingInv[f]={};const g=i.sourceCaches[f].getVisibleCoordinates();for(const _ of g){const C=this.terrain.sourceCache.getTerrainCoords(_);for(const I in C)this._coordsDescendingInv[f][I]||(this._coordsDescendingInv[f][I]=[]),this._coordsDescendingInv[f][I].push(C[I])}}this._coordsDescendingInvStr={};for(const f of i._order){const g=i._layers[f],_=g.source;if(Si[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const C in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][C]=this._coordsDescendingInv[_][C].map(I=>I.key).sort().join()}}for(const f of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][f.tileID.key];_&&_!==f.rttCoords[g]&&(f.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const u=i.type,f=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(Si[u]&&(this._prevType&&Si[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(Si[this._prevType]||Si[u]&&g){this._prevType=u;const _=this._stacks.length-1,C=this._stacks[_]||[];for(const I of this._renderableTiles){if(this.pool.isFull()&&(bn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(I),I.rtt[_]){const L=this.pool.getObjectForId(I.rtt[_].id);if(L.stamp===I.rtt[_].stamp){this.pool.useObject(L);continue}}const A=this.pool.getOrCreateFreeObject();this.pool.useObject(A),this.pool.stampObject(A),I.rtt[_]={id:A.id,stamp:A.stamp},f.context.bindFramebuffer.set(A.fbo.framebuffer),f.context.clear({color:c.aT.transparent,stencil:0}),f.currentStencilSource=void 0;for(let L=0;L<C.length;L++){const F=f.style._layers[C[L]],V=F.source?this._coordsDescendingInv[F.source][I.tileID.key]:[I.tileID];f.context.viewport.set([0,0,A.fbo.width,A.fbo.height]),f._renderTileClippingMasks(F,V),f.renderLayer(f,f.style.sourceCaches[F.source],F,V),F.source&&(I.rttCoords[F.source]=this._coordsDescendingInvStr[F.source][I.tileID.key])}}return bn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Si[u]}return!1}}const Xt=x,or={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},nc=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},Ch={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ih{constructor(i,u,f=!1){this.mousedown=C=>{this.startMouse(c.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),w.mousePos(this.element,C)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,w.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),_=i.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Qs({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:I,bearingDegreesPerPixelMoved:A=.8})=>{const L=new ym;return new xa({clickTolerance:I,move:(F,V)=>({bearingDelta:(V.x-F.x)*A}),moveStateManager:L,enable:C,assignEvents:nc})})({clickTolerance:g,enable:!0}),this.map=i,f&&(this.mousePitch=ba({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:I,pitchDegreesPerPixelMoved:A=-.5})=>{const L=new ym;return new xa({clickTolerance:I,move:(F,V)=>({pitchDelta:(V.y-F.y)*A}),moveStateManager:L,enable:C,assignEvents:nc})})({clickTolerance:_,enable:!0})),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(i,u){this.mouseRotate.dragStart(i,u),this.mousePitch&&this.mousePitch.dragStart(i,u),w.disableDrag()}startTouch(i,u){this.touchRotate.dragStart(i,u),this.touchPitch&&this.touchPitch.dragStart(i,u),w.disableDrag()}moveMouse(i,u){const f=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,u)||{};if(g&&f.setBearing(f.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(i,u)||{};_&&f.setPitch(f.getPitch()+_)}}moveTouch(i,u){const f=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,u)||{};if(g&&f.setBearing(f.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(i,u)||{};_&&f.setPitch(f.getPitch()+_)}}off(){const i=this.element;w.removeEventListener(i,"mousedown",this.mousedown),w.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let Rn;function Th(y,i,u){if(y=new c.L(y.lng,y.lat),i){const f=new c.L(y.lng-360,y.lat),g=new c.L(y.lng+360,y.lat),_=u.locationPoint(y).distSqr(i);u.locationPoint(f).distSqr(i)<_?y=f:u.locationPoint(g).distSqr(i)<_&&(y=g)}for(;Math.abs(y.lng-u.center.lng)>180;){const f=u.locationPoint(y);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const yo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Tm(y,i,u){const f=y.classList;for(const g in yo)f.remove(`maplibregl-${u}-anchor-${g}`);f.add(`maplibregl-${u}-anchor-${i}`)}class vs extends c.E{constructor(i){if(super(),this._onKeyPress=u=>{const f=u.code,g=u.charCode||u.keyCode;f!=="Space"&&f!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=u=>{const f=u.originalEvent.target,g=this._element;this._popup&&(f===g||g.contains(f))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!f)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=Th(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${yo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const C=this._map.unproject(this._pos),I=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=C.distanceTo(this._lngLat)>20*I?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=c.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const u=w.createNS("http://www.w3.org/2000/svg","svg"),f=41,g=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${f}px`),u.setAttributeNS(null,"width",`${g}px`),u.setAttributeNS(null,"viewBox",`0 0 ${g} ${f}`);const _=w.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const C=w.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const I=w.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const A=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Te of A){const Ne=w.createNS("http://www.w3.org/2000/svg","ellipse");Ne.setAttributeNS(null,"opacity","0.04"),Ne.setAttributeNS(null,"cx","10.5"),Ne.setAttributeNS(null,"cy","5.80029008"),Ne.setAttributeNS(null,"rx",Te.rx),Ne.setAttributeNS(null,"ry",Te.ry),I.appendChild(Ne)}const L=w.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill",this._color);const F=w.createNS("http://www.w3.org/2000/svg","path");F.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),L.appendChild(F);const V=w.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"opacity","0.25"),V.setAttributeNS(null,"fill","#000000");const ee=w.createNS("http://www.w3.org/2000/svg","path");ee.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),V.appendChild(ee);const he=w.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(6.0, 7.0)"),he.setAttributeNS(null,"fill","#FFFFFF");const de=w.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(8.0, 8.0)");const me=w.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#000000"),me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962");const ce=w.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#FFFFFF"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962"),de.appendChild(me),de.appendChild(ce),C.appendChild(I),C.appendChild(L),C.appendChild(V),C.appendChild(he),C.appendChild(de),u.appendChild(C),u.setAttributeNS(null,"height",f*this._scale+"px"),u.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(u),this._offset=c.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Tm(this._element,this._anchor,"marker"),i&&i.className)for(const u of i.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=c.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=c.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const wn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let vn=0,tl=!1;const ic={maxWidth:100,unit:"metric"};function oc(y,i,u){const f=u&&u.maxWidth||100,g=y._container.clientHeight/2,_=y.unproject([0,g]),C=y.unproject([f,g]),I=_.distanceTo(C);if(u&&u.unit==="imperial"){const A=3.2808*I;A>5280?_s(i,f,A/5280,y._getUIString("ScaleControl.Miles")):_s(i,f,A,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?_s(i,f,I/1852,y._getUIString("ScaleControl.NauticalMiles")):I>=1e3?_s(i,f,I/1e3,y._getUIString("ScaleControl.Kilometers")):_s(i,f,I,y._getUIString("ScaleControl.Meters"))}function _s(y,i,u,f){const g=function(_){const C=Math.pow(10,`${Math.floor(_)}`.length-1);let I=_/C;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(A){const L=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*L)/L}(I),C*I}(u);y.style.width=i*(g/u)+"px",y.innerHTML=`${g}&nbsp;${f}`}const Ph={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},kh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function rl(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,y),"top-left":new c.P(i,i),"top-right":new c.P(-i,i),bottom:new c.P(0,-y),"bottom-left":new c.P(i,-i),"bottom-right":new c.P(-i,-i),left:new c.P(y,0),right:new c.P(-y,0)}}if(y instanceof c.P||Array.isArray(y)){const i=c.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:c.P.convert(y.center||[0,0]),top:c.P.convert(y.top||[0,0]),"top-left":c.P.convert(y["top-left"]||[0,0]),"top-right":c.P.convert(y["top-right"]||[0,0]),bottom:c.P.convert(y.bottom||[0,0]),"bottom-left":c.P.convert(y["bottom-left"]||[0,0]),"bottom-right":c.P.convert(y["bottom-right"]||[0,0]),left:c.P.convert(y.left||[0,0]),right:c.P.convert(y.right||[0,0])}}return rl(new c.P(0,0))}const Eh={extend:(y,...i)=>c.e(y,...i),run(y){y()},logToElement(y,i=!1,u="log"){const f=window.document.getElementById(u);f&&(i&&(f.innerHTML=""),f.innerHTML+=`<br>${y}`)}},Ah=x;class jr{static get version(){return Ah}static get workerCount(){return Ar.workerCount}static set workerCount(i){Ar.workerCount=i}static get maxParallelImageRequests(){return c.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){c.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return c.c.WORKER_URL}static set workerUrl(i){c.c.WORKER_URL=i}static addProtocol(i,u){c.c.REGISTERED_PROTOCOLS[i]=u}static removeProtocol(i){delete c.c.REGISTERED_PROTOCOLS[i]}}return jr.Map=class extends wm{constructor(y){if(c.bg.mark(c.bh.create),(y=c.e({},or,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new lu(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new hu,this._controls=[],this._mapId=c.a2(),this._locale=c.e({},Sh,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=q.addThrottleControl(()=>this.isMoving()),this._requestManager=new D(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const u=ys(f=>{this._trackResize&&!this._removed&&this.resize(f)._update()},50);this._resizeObserver=new ResizeObserver(f=>{i?u(f):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new wh(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Yl(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,c.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new ro({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new on,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new c.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new c.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new c.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,u,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,u,f)}resize(y){var i;const u=this._containerDimensions(),f=u[0],g=u[1],_=this._getClampedPixelRatio(f,g);if(this._resizeCanvas(f,g,_),this.painter.resize(f,g,_),this.painter.overLimit()){const I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];const A=this._getClampedPixelRatio(f,g);this._resizeCanvas(f,g,A),this.painter.resize(f,g,A)}this.transform.resize(f,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(f,g);const C=!this._moving;return C&&(this.stop(),this.fire(new c.k("movestart",y)).fire(new c.k("move",y))),this.fire(new c.k("resize",y)),C&&this.fire(new c.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:u,1:f}=this._maxCanvasSize,g=this.getPixelRatio(),_=y*g,C=i*g;return Math.min(_>u?u/_:1,C>f?f/C:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Mt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(c.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(c.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,u){if(y==="mouseenter"||y==="mouseover"){let f=!1;return{layer:i,listener:u,delegates:{mousemove:_=>{const C=this.getLayer(i)?this.queryRenderedFeatures(_.point,{layers:[i]}):[];C.length?f||(f=!0,u.call(this,new to(y,this,_.originalEvent,{features:C}))):f=!1},mouseout:()=>{f=!1}}}}if(y==="mouseleave"||y==="mouseout"){let f=!1;return{layer:i,listener:u,delegates:{mousemove:C=>{(this.getLayer(i)?this.queryRenderedFeatures(C.point,{layers:[i]}):[]).length?f=!0:f&&(f=!1,u.call(this,new to(y,this,C.originalEvent)))},mouseout:C=>{f&&(f=!1,u.call(this,new to(y,this,C.originalEvent)))}}}}{const f=g=>{const _=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];_.length&&(g.features=_,u.call(this,g),delete g.features)};return{layer:i,listener:u,delegates:{[y]:f}}}}on(y,i,u){if(u===void 0)return super.on(y,i);const f=this._createDelegatedListener(y,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(f);for(const g in f.delegates)this.on(g,f.delegates[g]);return this}once(y,i,u){if(u===void 0)return super.once(y,i);const f=this._createDelegatedListener(y,i,u);for(const g in f.delegates)this.once(g,f.delegates[g]);return this}off(y,i,u){return u===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(f=>{const g=this._delegatedListeners[y];for(let _=0;_<g.length;_++){const C=g[_];if(C.layer===i&&C.listener===u){for(const I in C.delegates)this.off(I,C.delegates[I]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let u;const f=y instanceof c.P||Array.isArray(y),g=f?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(f?{}:y)||{},g instanceof c.P||typeof g[0]=="number")u=[c.P.convert(g)];else{const _=c.P.convert(g[0]),C=c.P.convert(g[1]);u=[_,new c.P(C.x,_.y),C,new c.P(_.x,C.y),_]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const u=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new fn(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,u):this.style.loadJSON(y,i,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new fn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,B.Style);c.f(u,(f,g)=>{f?this.fire(new c.j(f)):g&&this._updateDiff(g,i)})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(u){c.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new c.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const u in this.style._layers){const f=this.style._layers[u];f.type==="hillshade"&&f.source===y.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Im(this.painter,i,y),this.painter.renderToTexture=new pu(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const u=y[i]._tiles;for(const f in u){const g=u[f];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(y,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,i,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,u={}){const{pixelRatio:f=1,sdf:g=!1,stretchX:_,stretchY:C,content:I}=u;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||c.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:A,height:L,data:F}=i,V=i;return this.style.addImage(y,{data:new c.R({width:A,height:L},new Uint8Array(F)),pixelRatio:f,stretchX:_,stretchY:C,content:I,sdf:g,version:0,userImage:V}),V.onAdd&&V.onAdd(this,y),this}}{const{width:A,height:L,data:F}=c.h.getImageData(i);this.style.addImage(y,{data:new c.R({width:A,height:L},F),pixelRatio:f,stretchX:_,stretchY:C,content:I,sdf:g,version:0})}}updateImage(y,i){const u=this.style.getImage(y);if(!u)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof HTMLImageElement||c.a(i)?c.h.getImageData(i):i,{width:g,height:_,data:C}=f;if(g===void 0||_===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||_!==u.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(i instanceof HTMLImageElement||c.a(i));return u.data.replace(C,I),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,i){q.getImage(this._requestManager.transformRequest(y,B.Image),i)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,u){return this.style.setLayerZoomRange(y,i,u),this._update(!0)}setFilter(y,i,u={}){return this.style.setFilter(y,i,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,u,f={}){return this.style.setPaintProperty(y,i,u,f),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,u,f={}){return this.style.setLayoutProperty(y,i,u,f),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,u,f=>{f||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,u=>{u||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=w.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),f=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],f);const g=this._controlContainer=w.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{_[C]=w.create("div",`maplibregl-ctrl-${C} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,i,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{i={requestedAttributes:y},f&&(i.statusMessage=f.statusMessage,i.type=f.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const f="Failed to initialize WebGL";throw i?(i.message=f,new Error(JSON.stringify(i))):new Error(f)}this.painter=new gs(u,this.transform),T.testSupport(u)}_onCooperativeGesture(y,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=c.h.now();this.style.zoomHistory.update(g,_);const C=new c.a8(g,{now:_,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=C.crossFadingFactor();I===1&&I===this._crossFadingFactor||(u=!0,this._crossFadingFactor=I),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bg.mark(c.bh.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,c.bg.mark(c.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),q.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),c.bg.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=c.h.frame(y=>{c.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Xt}getCameraTargetElevation(){return this.transform.elevation}},jr.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),u=i===this._map.getMaxZoom(),f=i===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,u)=>{const f=this._map._getUIString(`NavigationControl.${u}`);i.title=f,i.setAttribute("aria-label",f)},this.options=c.e({},Ch,y),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ih(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const u=w.create("button",y,this._container);return u.type="button",u.addEventListener("click",i),u}},jr.GeolocateControl=class extends c.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const u=new c.L(i.coords.longitude,i.coords.latitude),f=i.coords.accuracy,g=this._map.getBearing(),_=c.e({bearing:g},this.options.fitBoundsOptions),C=Mt.fromLngLat(u,f);this._map.fitBounds(C,_,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const u=new c.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&tl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new vs({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new vs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")))})}},this.options=c.e({},wn,y)}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,u=!1){Rn===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(f=>{Rn=f.state!=="denied",i(Rn)}).catch(()=>{Rn=!!window.navigator.geolocation,i(Rn)}):(Rn=!!window.navigator.geolocation,i(Rn)):i(Rn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,vn=0,tl=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),u=y.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),u=y.getNorthEast(),f=i.distanceTo(u),g=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":vn--,tl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),vn++,vn>1?(y={maximumAge:6e5,timeout:0},tl=!0):(y=this.options.positionOptions,tl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},jr.AttributionControl=ro,jr.LogoControl=on,jr.ScaleControl=class{constructor(y){this._onMove=()=>{oc(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,oc(this._map,this._container,this.options)},this.options=c.e({},ic,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},jr.FullscreenControl=class extends c.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},jr.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},jr.Popup=class extends c.E{constructor(y){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Th(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const u=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let f=this.options.anchor;const g=rl(this.options.offset);if(!f){const C=this._container.offsetWidth,I=this._container.offsetHeight;let A;A=u.y+g.bottom.y<I?["top"]:u.y>this._map.transform.height-I?["bottom"]:[],u.x<C/2?A.push("left"):u.x>this._map.transform.width-C/2&&A.push("right"),f=A.length===0?"bottom":A.join("-")}const _=u.add(g[f]).round();w.setTransform(this._container,`${yo[f]} translate(${_.x}px,${_.y}px)`),Tm(this._container,f,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Ph),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=c.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=y;f=u.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(kh);y&&y.focus()}},jr.Marker=vs,jr.Style=fn,jr.LngLat=c.L,jr.LngLatBounds=Mt,jr.Point=c.P,jr.MercatorCoordinate=c.U,jr.Evented=c.E,jr.AJAXError=c.bi,jr.config=c.c,jr.CanvasSource=Gt,jr.GeoJSONSource=Ke,jr.ImageSource=Ct,jr.RasterDEMTileSource=ht,jr.RasterTileSource=tr,jr.VectorTileSource=Dt,jr.VideoSource=jt,jr.setRTLTextPlugin=c.bj,jr.getRTLTextPluginStatus=c.bk,jr.prewarm=function(){nr().acquire(Jt)},jr.clearPrewarmedResources=function(){const y=cr;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(Jt),cr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},Eh.extend(jr,{isSafari:c.ac,getPerformanceMetrics:c.bg.getPerformanceMetrics}),jr});var p=s;return p})})(OM);var l0=OM.exports;const FM=Gy(l0),PW=zb({__proto__:null,default:FM},[l0]);var cd=Math.pow,Ri=(e,t,r)=>new Promise((o,s)=>{var d=x=>{try{c(r.next(x))}catch(w){s(w)}},p=x=>{try{c(r.throw(x))}catch(w){s(w)}},c=x=>x.done?o(x.value):Promise.resolve(x.value).then(d,p);c((r=r.apply(e,t)).next())}),No=Uint8Array,Op=Uint16Array,kW=Int32Array,NM=new No([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),jM=new No([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),EW=new No([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),VM=function(e,t){for(var r=new Op(31),o=0;o<31;++o)r[o]=t+=1<<e[o-1];for(var s=new kW(r[30]),o=1;o<30;++o)for(var d=r[o];d<r[o+1];++d)s[d]=d-r[o]<<5|o;return{b:r,r:s}},UM=VM(NM,2),HM=UM.b,AW=UM.r;HM[28]=258,AW[258]=28;var zW=VM(jM,0),RW=zW.b,WM=new Op(32768);for(Yr=0;Yr<32768;++Yr)ks=(Yr&43690)>>1|(Yr&21845)<<1,ks=(ks&52428)>>2|(ks&13107)<<2,ks=(ks&61680)>>4|(ks&3855)<<4,WM[Yr]=((ks&65280)>>8|(ks&255)<<8)>>1;var ks,Yr,Bp=function(e,t,r){for(var o=e.length,s=0,d=new Op(t);s<o;++s)e[s]&&++d[e[s]-1];var p=new Op(t);for(s=1;s<t;++s)p[s]=p[s-1]+d[s-1]<<1;var c;{c=new Op(1<<t);var x=15-t;for(s=0;s<o;++s)if(e[s])for(var w=s<<4|e[s],T=t-e[s],k=p[e[s]-1]++<<T,E=k|(1<<T)-1;k<=E;++k)c[WM[k]>>x]=w}return c},Lf=new No(288);for(Yr=0;Yr<144;++Yr)Lf[Yr]=8;var Yr;for(Yr=144;Yr<256;++Yr)Lf[Yr]=9;var Yr;for(Yr=256;Yr<280;++Yr)Lf[Yr]=7;var Yr;for(Yr=280;Yr<288;++Yr)Lf[Yr]=8;var Yr,GM=new No(32);for(Yr=0;Yr<32;++Yr)GM[Yr]=5;var Yr,MW=Bp(Lf,9),DW=Bp(GM,5),ix=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},ka=function(e,t,r){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(t&7)&r},ox=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},LW=function(e){return(e+7)/8|0},$W=function(e,t,r){(r==null||r>e.length)&&(r=e.length);var o=new No(r-t);return o.set(e.subarray(t,r)),o},OW=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$o=function(e,t,r){var o=new Error(t||OW[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,$o),!r)throw o;return o},kS=function(e,t,r,o){var s=e.length,d=0;if(!s||t.f&&!t.l)return r||new No(0);var p=!r||t.i!=2,c=t.i;r||(r=new No(s*3));var x=function(Ct){var jt=r.length;if(Ct>jt){var Gt=new No(Math.max(jt*2,Ct));Gt.set(r),r=Gt}},w=t.f||0,T=t.p||0,k=t.b||0,E=t.l,M=t.d,N=t.m,j=t.n,q=s*8;do{if(!E){w=ka(e,T,1);var B=ka(e,T+1,3);if(T+=3,B)if(B==1)E=MW,M=DW,N=9,j=5;else if(B==2){var J=ka(e,T,31)+257,K=ka(e,T+10,15)+4,se=J+ka(e,T+5,31)+1;T+=14;for(var ae=new No(se),we=new No(19),xe=0;xe<K;++xe)we[EW[xe]]=ka(e,T+xe*3,7);T+=K*3;for(var ke=ix(we),Ee=(1<<ke)-1,$e=Bp(we,ke),xe=0;xe<se;){var Je=$e[ka(e,T,Ee)];T+=Je&15;var D=Je>>4;if(D<16)ae[xe++]=D;else{var je=0,Se=0;for(D==16?(Se=3+ka(e,T,3),T+=2,je=ae[xe-1]):D==17?(Se=3+ka(e,T,7),T+=3):D==18&&(Se=11+ka(e,T,127),T+=7);Se--;)ae[xe++]=je}}var Le=ae.subarray(0,J),Be=ae.subarray(J);N=ix(Le),j=ix(Be),E=Bp(Le,N),M=Bp(Be,j)}else $o(1);else{var D=LW(T)+4,$=e[D-4]|e[D-3]<<8,ie=D+$;if(ie>s){c&&$o(0);break}p&&x(k+$),r.set(e.subarray(D,ie),k),t.b=k+=$,t.p=T=ie*8,t.f=w;continue}if(T>q){c&&$o(0);break}}p&&x(k+131072);for(var Ve=(1<<N)-1,Qe=(1<<j)-1,st=T;;st=T){var je=E[ox(e,T)&Ve],ct=je>>4;if(T+=je&15,T>q){c&&$o(0);break}if(je||$o(2),ct<256)r[k++]=ct;else if(ct==256){st=T,E=null;break}else{var Mt=ct-254;if(ct>264){var xe=ct-257,vt=NM[xe];Mt=ka(e,T,(1<<vt)-1)+HM[xe],T+=vt}var Dt=M[ox(e,T)&Qe],tr=Dt>>4;Dt||$o(3),T+=Dt&15;var Be=RW[tr];if(tr>3){var vt=jM[tr];Be+=ox(e,T)&(1<<vt)-1,T+=vt}if(T>q){c&&$o(0);break}p&&x(k+131072);var ht=k+Mt;if(k<Be){var Ke=d-Be,ft=Math.min(Be,ht);for(Ke+k<0&&$o(3);k<ft;++k)r[k]=o[Ke+k]}for(;k<ht;k+=4)r[k]=r[k-Be],r[k+1]=r[k+1-Be],r[k+2]=r[k+2-Be],r[k+3]=r[k+3-Be];k=ht}}t.l=E,t.p=st,t.b=k,t.f=w,E&&(w=1,t.m=N,t.d=M,t.n=j)}while(!w);return k==r.length?r:$W(r,0,k)},BW=new No(0),FW=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&$o(6,"invalid gzip data");var t=e[3],r=10;t&4&&(r+=(e[10]|e[11]<<8)+2);for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[r++]);return r+(t&2)},NW=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},jW=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&$o(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&$o(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function VW(e,t){return kS(e,{i:2},t,t)}function UW(e,t){var r=FW(e);return r+8>e.length&&$o(6,"invalid gzip data"),kS(e.subarray(r,-8),{i:2},new No(NW(e)),t)}function HW(e,t){return kS(e.subarray(jW(e,t),-4),{i:2},t,t)}function vb(e,t){return e[0]==31&&e[1]==139&&e[2]==8?UW(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?VW(e,t):HW(e,t)}var WW=typeof TextDecoder<"u"&&new TextDecoder,GW=0;try{WW.decode(BW,{stream:!0}),GW=1}catch{}var qM=(e,t)=>e*cd(2,t),hp=(e,t)=>Math.floor(e/cd(2,t)),Ny=(e,t)=>qM(e.getUint16(t+1,!0),8)+e.getUint8(t),ZM=(e,t)=>qM(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),qW=(e,t,r,o,s)=>{if(e!==o.getUint8(s))return e-o.getUint8(s);const d=Ny(o,s+1);if(t!==d)return t-d;const p=Ny(o,s+4);return r!==p?r-p:0},ZW=(e,t,r,o)=>{const s=KM(e,t|128,r,o);return s?{z:t,x:r,y:o,offset:s[0],length:s[1],isDir:!0}:null},vP=(e,t,r,o)=>{const s=KM(e,t,r,o);return s?{z:t,x:r,y:o,offset:s[0],length:s[1],isDir:!1}:null},KM=(e,t,r,o)=>{let s=0,d=e.byteLength/17-1;for(;s<=d;){const p=d+s>>1,c=qW(t,r,o,e,p*17);if(c>0)s=p+1;else if(c<0)d=p-1;else return[ZM(e,p*17+7),e.getUint32(p*17+13,!0)]}return null},KW=(e,t)=>e.isDir&&!t.isDir?1:!e.isDir&&t.isDir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,XM=(e,t)=>{const r=e.getUint8(t*17);return{z:r&127,x:Ny(e,t*17+1),y:Ny(e,t*17+4),offset:ZM(e,t*17+7),length:e.getUint32(t*17+13,!0),isDir:r>>7===1}},_P=e=>{const t=[],r=new DataView(e);for(let o=0;o<r.byteLength/17;o++)t.push(XM(r,o));return XW(t)},XW=e=>{e.sort(KW);const t=new ArrayBuffer(17*e.length),r=new Uint8Array(t);for(let o=0;o<e.length;o++){const s=e[o];let d=s.z;s.isDir&&(d=d|128),r[o*17]=d,r[o*17+1]=s.x&255,r[o*17+2]=s.x>>8&255,r[o*17+3]=s.x>>16&255,r[o*17+4]=s.y&255,r[o*17+5]=s.y>>8&255,r[o*17+6]=s.y>>16&255,r[o*17+7]=s.offset&255,r[o*17+8]=hp(s.offset,8)&255,r[o*17+9]=hp(s.offset,16)&255,r[o*17+10]=hp(s.offset,24)&255,r[o*17+11]=hp(s.offset,32)&255,r[o*17+12]=hp(s.offset,48)&255,r[o*17+13]=s.length&255,r[o*17+14]=s.length>>8&255,r[o*17+15]=s.length>>16&255,r[o*17+16]=s.length>>24&255}return t},JW=(e,t)=>{if(e.byteLength<17)return null;const r=e.byteLength/17,o=XM(e,r-1);if(o.isDir){const s=o.z,d=t.z-s,p=Math.trunc(t.x/(1<<d)),c=Math.trunc(t.y/(1<<d));return{z:s,x:p,y:c}}return null};function YW(e){return Ri(this,null,function*(){const t=yield e.getBytes(0,512e3),r=new DataView(t.data),o=r.getUint32(4,!0),s=r.getUint16(8,!0),d=new TextDecoder("utf-8"),p=JSON.parse(d.decode(new DataView(t.data,10,o)));let c=0;p.compression==="gzip"&&(c=2);let x=0;"minzoom"in p&&(x=+p.minzoom);let w=0;"maxzoom"in p&&(w=+p.maxzoom);let T=0,k=0,E=0,M=-180,N=-85,j=180,q=85;if(p.bounds){const D=p.bounds.split(",");M=+D[0],N=+D[1],j=+D[2],q=+D[3]}if(p.center){const D=p.center.split(",");T=+D[0],k=+D[1],E=+D[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+o,rootDirectoryLength:s*17,jsonMetadataOffset:10,jsonMetadataLength:o,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:c,tileType:1,minZoom:x,maxZoom:w,minLon:M,minLat:N,maxLon:j,maxLat:q,centerZoom:E,centerLon:T,centerLat:k,etag:t.etag}})}function QW(e,t,r,o,s,d,p){return Ri(this,null,function*(){let c=yield r.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(c=_P(c));const x=vP(new DataView(c),o,s,d);if(x){let k=(yield t.getBytes(x.offset,x.length,p)).data;const E=new DataView(k);return E.getUint8(0)===31&&E.getUint8(1)===139&&(k=vb(new Uint8Array(k))),{data:k}}const w=JW(new DataView(c),{z:o,x:s,y:d});if(w){const T=ZW(new DataView(c),w.z,w.x,w.y);if(T){let k=yield r.getArrayBuffer(t,T.offset,T.length,e);e.specVersion===1&&(k=_P(k));const E=vP(new DataView(k),o,s,d);if(E){let N=(yield t.getBytes(E.offset,E.length,p)).data;const j=new DataView(N);return j.getUint8(0)===31&&j.getUint8(1)===139&&(N=vb(new Uint8Array(N))),{data:N}}}}})}var JM={getHeader:YW,getZxy:QW},eG=e=>(t,r)=>{if(r instanceof AbortController)return e(t,r);const o=new AbortController;return e(t,o).then(s=>r(void 0,s.data,s.cacheControl||"",s.expires||""),s=>r(s)).catch(s=>r(s)),{cancel:()=>o.abort()}},tG=class{constructor(e){this.tilev4=(t,r)=>Ri(this,null,function*(){if(t.type==="json"){const E=t.url.substr(10);let M=this.tiles.get(E);if(M||(M=new xP(E),this.tiles.set(E,M)),this.metadata)return{data:yield M.getTileJson(t.url)};const N=yield M.getHeader();return{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:N.minZoom,maxzoom:N.maxZoom,bounds:[N.minLon,N.minLat,N.maxLon,N.maxLat]}}}const o=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),s=t.url.match(o);if(!s)throw new Error("Invalid PMTiles protocol URL");const d=s[1];let p=this.tiles.get(d);p||(p=new xP(d),this.tiles.set(d,p));const c=s[2],x=s[3],w=s[4],T=yield p.getHeader(),k=yield p==null?void 0:p.getZxy(+c,+x,+w,r.signal);return k?{data:new Uint8Array(k.data),cacheControl:k.cacheControl,expires:k.expires}:T.tileType===1?{data:new Uint8Array}:{data:null}}),this.tile=eG(this.tilev4),this.tiles=new Map,this.metadata=(e==null?void 0:e.metadata)||!1}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function Eu(e,t){return(t>>>0)*4294967296+(e>>>0)}function rG(e,t){const r=t.buf;let o=r[t.pos++],s=(o&112)>>4;if(o<128||(o=r[t.pos++],s|=(o&127)<<3,o<128)||(o=r[t.pos++],s|=(o&127)<<10,o<128)||(o=r[t.pos++],s|=(o&127)<<17,o<128)||(o=r[t.pos++],s|=(o&127)<<24,o<128)||(o=r[t.pos++],s|=(o&1)<<31,o<128))return Eu(e,s);throw new Error("Expected varint not more than 10 bytes")}function pp(e){const t=e.buf;let r=t[e.pos++],o=r&127;return r<128||(r=t[e.pos++],o|=(r&127)<<7,r<128)||(r=t[e.pos++],o|=(r&127)<<14,r<128)||(r=t[e.pos++],o|=(r&127)<<21,r<128)?o:(r=t[e.pos],o|=(r&15)<<28,rG(o,e))}function nG(e,t,r,o){if(o===0){r===1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const s=t[0];t[0]=t[1],t[1]=s}}var iG=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function oG(e,t,r){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>cd(2,e)-1||r>cd(2,e)-1)throw Error("tile x/y outside zoom level bounds");const o=iG[e],s=cd(2,e);let d=0,p=0,c=0;const x=[t,r];let w=s/2;for(;w>0;)d=(x[0]&w)>0?1:0,p=(x[1]&w)>0?1:0,c+=w*w*(3*d^p),nG(w,x,d,p),w=w/2;return o+c}function YM(e,t){return Ri(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return vb(new Uint8Array(e));const r=new Response(e).body;if(!r)throw Error("Failed to read response stream");const o=r.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(o).arrayBuffer()}throw Error("Compression method not supported")})}function aG(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":""}var sG=127;function lG(e,t){let r=0,o=e.length-1;for(;r<=o;){const s=o+r>>1,d=t-e[s].tileId;if(d>0)r=s+1;else if(d<0)o=s-1;else return e[s]}return o>=0&&(e[o].runLength===0||t-e[o].tileId<e[o].runLength)?e[o]:null}var cG=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let r="";"navigator"in globalThis&&(r=globalThis.navigator.userAgent||"");const o=r.indexOf("Windows")>-1,s=/Chrome|Chromium|Edg|OPR|Brave/.test(r);this.chromeWindowsNoCache=!1,o&&s&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,o){return Ri(this,null,function*(){let s,d;r?d=r:(s=new AbortController,d=s.signal);const p=new Headers(this.customHeaders);p.set("range",`bytes=${e}-${e+t-1}`);let c;this.mustReload?c="reload":this.chromeWindowsNoCache&&(c="no-store");let x=yield fetch(this.url,{signal:d,cache:c,headers:p});if(e===0&&x.status===416){const E=x.headers.get("Content-Range");if(!E||!E.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const M=+E.substr(8);x=yield fetch(this.url,{signal:d,cache:"reload",headers:{range:`bytes=0-${M-1}`}})}let w=x.headers.get("Etag");if(w!=null&&w.startsWith("W/")&&(w=null),x.status===416||o&&w&&w!==o)throw this.mustReload=!0,new _b(`Server returned non-matching ETag ${o} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(x.status>=300)throw Error(`Bad response code: ${x.status}`);const T=x.headers.get("Content-Length");if(x.status===200&&(!T||+T>t))throw s&&s.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield x.arrayBuffer(),etag:w||void 0,cacheControl:x.headers.get("Cache-Control")||void 0,expires:x.headers.get("Expires")||void 0}})}};function Ea(e,t){const r=e.getUint32(t+4,!0),o=e.getUint32(t+0,!0);return r*cd(2,32)+o}function uG(e,t){const r=new DataView(e),o=r.getUint8(7);if(o>3)throw Error(`Archive is spec version ${o} but this library supports up to spec version 3`);return{specVersion:o,rootDirectoryOffset:Ea(r,8),rootDirectoryLength:Ea(r,16),jsonMetadataOffset:Ea(r,24),jsonMetadataLength:Ea(r,32),leafDirectoryOffset:Ea(r,40),leafDirectoryLength:Ea(r,48),tileDataOffset:Ea(r,56),tileDataLength:Ea(r,64),numAddressedTiles:Ea(r,72),numTileEntries:Ea(r,80),numTileContents:Ea(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:t}}function QM(e){const t={buf:new Uint8Array(e),pos:0},r=pp(t),o=[];let s=0;for(let d=0;d<r;d++){const p=pp(t);o.push({tileId:s+p,offset:0,length:0,runLength:1}),s+=p}for(let d=0;d<r;d++)o[d].runLength=pp(t);for(let d=0;d<r;d++)o[d].length=pp(t);for(let d=0;d<r;d++){const p=pp(t);p===0&&d>0?o[d].offset=o[d-1].offset+o[d-1].length:o[d].offset=p-1}return o}function dG(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var _b=class extends Error{};function hG(e,t){return Ri(this,null,function*(){const r=yield e.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(dG(r.data)<3)return[yield JM.getHeader(e)];const s=r.data.slice(0,sG),d=uG(s,r.etag),p=r.data.slice(d.rootDirectoryOffset,d.rootDirectoryOffset+d.rootDirectoryLength),c=`${e.getKey()}|${d.etag||""}|${d.rootDirectoryOffset}|${d.rootDirectoryLength}`,x=QM(yield t(p,d.internalCompression));return[d,[c,x.length,x]]})}function pG(e,t,r,o,s){return Ri(this,null,function*(){const d=yield e.getBytes(r,o,void 0,s.etag),p=yield t(d.data,s.internalCompression),c=QM(p);if(c.length===0)throw new Error("Empty directory is invalid");return c})}var fG=class{constructor(e=100,t=!0,r=YM){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return Ri(this,null,function*(){const t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;const o=new Promise((s,d)=>{hG(e,this.decompress).then(p=>{p[1]&&this.cache.set(p[1][0],{lastUsed:this.counter++,data:Promise.resolve(p[1][2])}),s(p[0]),this.prune()}).catch(p=>{d(p)})});return this.cache.set(t,{lastUsed:this.counter++,data:o}),o})}getDirectory(e,t,r,o){return Ri(this,null,function*(){const s=`${e.getKey()}|${o.etag||""}|${t}|${r}`,d=this.cache.get(s);if(d)return d.lastUsed=this.counter++,yield d.data;const p=new Promise((c,x)=>{pG(e,this.decompress,t,r,o).then(w=>{c(w),this.prune()}).catch(w=>{x(w)})});return this.cache.set(s,{lastUsed:this.counter++,data:p}),p})}getArrayBuffer(e,t,r,o){return Ri(this,null,function*(){const s=`${e.getKey()}|${o.etag||""}|${t}|${r}`,d=this.cache.get(s);if(d)return d.lastUsed=this.counter++,yield d.data;const p=new Promise((c,x)=>{e.getBytes(t,r,void 0,o.etag).then(w=>{c(w.data),this.cache.has(s),this.prune()}).catch(w=>{x(w)})});return this.cache.set(s,{lastUsed:this.counter++,data:p}),p})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,o)=>{r.lastUsed<e&&(e=r.lastUsed,t=o)}),t&&this.cache.delete(t)}}invalidate(e){return Ri(this,null,function*(){const t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());const r=new Promise((o,s)=>{this.getHeader(e).then(d=>{o(),this.invalidations.delete(t)}).catch(d=>{s(d)})});this.invalidations.set(t,r)})}},xP=class{constructor(e,t,r){typeof e=="string"?this.source=new cG(e):this.source=e,r?this.decompress=r:this.decompress=YM,t?this.cache=t:this.cache=new fG}getHeader(){return Ri(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,o){return Ri(this,null,function*(){const s=oG(e,t,r),d=yield this.cache.getHeader(this.source);if(d.specVersion<3)return JM.getZxy(d,this.source,this.cache,e,t,r,o);if(e<d.minZoom||e>d.maxZoom)return;let p=d.rootDirectoryOffset,c=d.rootDirectoryLength;for(let x=0;x<=3;x++){const w=yield this.cache.getDirectory(this.source,p,c,d),T=lG(w,s);if(T){if(T.runLength>0){const k=yield this.source.getBytes(d.tileDataOffset+T.offset,T.length,o,d.etag);return{data:yield this.decompress(k.data,d.tileCompression),cacheControl:k.cacheControl,expires:k.expires}}p=d.leafDirectoryOffset+T.offset,c=T.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,r,o){return Ri(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,o)}catch(s){if(s instanceof _b)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,o);throw s}})}getMetadataAttempt(){return Ri(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),o=new TextDecoder("utf-8");return JSON.parse(o.decode(r))})}getMetadata(){return Ri(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof _b)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return Ri(this,null,function*(){const t=yield this.getHeader(),r=yield this.getMetadata(),o=aG(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${o}`],vector_layers:r.vector_layers,attribution:r.attribution,description:r.description,name:r.name,version:r.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}};let bP=!1;function ES(){if(bP)return;const e=new tG;FM.addProtocol("pmtiles",e.tile),bP=!0}const eD=e=>{ES();const{mode:t="light",children:r}=e,o=PS[t];return te.jsxs(te.Fragment,{children:[te.jsx(Gr,{id:"background",type:"background",paint:{"background-color":o.land}}),te.jsxs(jd,{id:"world",type:"vector",url:"pmtiles:///world.pmtiles",children:[te.jsx(Gr,{"source-layer":"water",type:"fill",paint:{"fill-color":o.water}}),r,te.jsx(Gr,{"source-layer":"states",type:"line",paint:{"line-color":o.stateBorder,"line-width":1,"line-opacity":1,"line-dasharray":[2,2]}}),te.jsx(Gr,{"source-layer":"countries",type:"line",filter:["!=",["get","name"],"Serbia-Kosovo"],paint:{"line-color":o.countryBorder,"line-width":2,"line-opacity":1}}),te.jsx(Gr,{"source-layer":"countries",type:"line",filter:["==",["get","name"],"Serbia-Kosovo"],paint:{"line-color":o.countryBorder,"line-width":2,"line-opacity":1,"line-dasharray":[3,2]}})]})]})},xb=e=>(ES(),te.jsx(jd,{type:"vector",url:`pmtiles:///${e.game}-contours.pmtiles`,children:te.jsx(Gr,{"source-layer":"contours",type:"fill",layout:{"fill-sort-key":["get","elevation"],visibility:e.showContours?"visible":"none"},paint:{"fill-color":["interpolate",["linear"],["get","elevation"],-200,"#77c571",0,"#77c571",100,"#afd35f",150,"#ece75b",200,"#decb4c",250,"#d2b446",300,"#bf9c4a",400,"#ba8839",500,"#ac792d"]}})}));class AS extends Error{constructor(t){super("unreachable value "+JSON.stringify(t))}}class Pd{static checkArgument(t,r){if(!t)throw new Error(r)}static checkState(t,r){if(!t)throw new Error(r)}static checkExists(t,r){return Cn(t,r)}}var ei=(e=>(e[e.FuelStation=0]="FuelStation",e[e.Toll=1]="Toll",e[e.Parking=2]="Parking",e[e.RecruitmentAgency=3]="RecruitmentAgency",e[e.Service=4]="Service",e[e.TruckDealer=5]="TruckDealer",e[e.Port=6]="Port",e[e.Train=7]="Train",e[e.Viewpoint=8]="Viewpoint",e[e.PhotoSight=9]="PhotoSight",e[e.AgricultureCheck=10]="AgricultureCheck",e[e.BorderCheck=11]="BorderCheck",e[e.Garage=12]="Garage",e[e.WeighStation=13]="WeighStation",e[e.CityNames=14]="CityNames",e[e.Company=15]="Company",e[e.RoadNumber=16]="RoadNumber",e))(ei||{});const df=new Set(Array.from({length:17},(e,t)=>t)),bb=e=>{const{game:t,visibleIcons:r=df,enableIconAutoHide:o=!0,mode:s="light"}=e,d=t==="ats"?CP(t,e.dlcs??uf):CP(t,e.dlcs??OH),p=PS[s];return ES(),te.jsxs(jd,{id:t,type:"vector",url:`pmtiles:///${t}.pmtiles`,children:[te.jsx(Gr,{id:t+"mapAreas","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"mapArea"],d],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":sx(s),"fill-outline-color":["case",["==",["get","color"],zM.Road],p.mapAreaOutline,sx(s)]}}),te.jsx(Gr,{id:t+"prefabs","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"prefab"],d],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":sx(s)}}),te.jsx(mG,{game:t,mode:s,color:p.footprint}),te.jsx(Gr,{id:t+"hidden-roads","source-layer":t,type:"line",minzoom:9,filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","hidden"],!0],d],paint:{"line-color":p.hiddenRoad,"line-width":1,"line-opacity":.7}}),te.jsx(Gr,{id:t+"visible-roads-case","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],d],layout:IP,paint:{"line-color":_G(s),"line-gap-width":TP,"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,14,2,16,3]}}),te.jsx(Gr,{id:t+"visible-roads","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],d],layout:IP,paint:{"line-color":vG(s),"line-width":TP}}),te.jsx(Gr,{id:t+"ferries","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],paint:{"line-color":p.ferryLine,"line-width":1,"line-opacity":.8,"line-dasharray":[2,2]}}),te.jsx(Gr,{id:t+"trains-a","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":p.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,-6]}}),te.jsx(Gr,{id:t+"trains-b","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":p.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,6]}}),te.jsx(Gr,{id:t+"train-hatch","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":p.trainLine,"line-width":10,"line-opacity":.8,"line-dasharray":[.1,1]}}),te.jsx(Gr,{id:t+"ferry-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],layout:{...Es,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":p.ferryHalo,"text-color":p.ferryLabel}}),te.jsx(Gr,{id:t+"train-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],layout:{...Es,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":p.trainHalo,"text-color":p.trainLabel}}),r.has(15)&&te.jsx(Gr,{id:t+"company-icons","source-layer":t,type:"symbol",minzoom:o?8:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"company"],d],layout:hc(o,1,1.25,3.5)}),t==="ets2"&&r.has(16)&&te.jsx(Gr,{id:"euro-road-overlays","source-layer":t,minzoom:o?4.5:0,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["!",["in",["get","sprite"],["literal",wP]]]],layout:hc(o,.4*1.25,.75*1.25,1.25*1.25)}),t==="ats"&&r.has(16)&&te.jsx(Gr,{id:t+"road-interstate-overlays","source-layer":t,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","is",["get","sprite"]],0],d],layout:hc(o,.4,.75,1.25)}),t==="ats"&&r.has(16)&&te.jsx(Gr,{id:t+"road-us-route-overlays","source-layer":t,type:"symbol",minzoom:o?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","us",["get","sprite"]],0],d],layout:hc(o,.4,.75,1.25)}),t==="ats"&&r.has(16)&&te.jsx(Gr,{id:t+"road-state-route-overlays","source-layer":t,type:"symbol",minzoom:o?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],d,["!",["any",["==",["index-of","is",["get","sprite"]],0],["==",["index-of","us",["get","sprite"]],0],["in",["get","sprite"],["literal",wP]]]]],layout:hc(o,.4,.75,1.25)}),r.has(14)&&te.jsx(Gr,{id:t+"city-labels-small","source-layer":t,type:"symbol",minzoom:o?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],[">",["get","scaleRank"],6],d],layout:{...Es,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Bu,"text-size":12,"icon-image":ax,"icon-allow-overlap":!o,"icon-size":.6},paint:p.primaryTextPaint}),r.has(14)&&te.jsx(Gr,{id:t+"city-labels-medium","source-layer":t,type:"symbol",minzoom:o?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],6],[">",["get","scaleRank"],3],d],layout:{...Es,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Bu,"text-size":13,"icon-image":ax,"icon-allow-overlap":!o,"icon-size":.6},paint:p.primaryTextPaint}),r.has(14)&&te.jsx(Gr,{id:t+"city-labels-big","source-layer":t,type:"symbol",minzoom:o?4:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],3],d],layout:{...Es,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Bu,"text-size":14,"icon-image":ax,"icon-allow-overlap":!o,"icon-size":.8},paint:p.primaryTextPaint}),t==="ets2"&&r.has(14)&&te.jsx(Gr,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...Es,"text-font":["Klokantech Noto Sans Bold"],"text-field":"{name}","text-variable-anchor":Bu,"text-size":14},paint:p.primaryTextPaint}),t==="ats"&&r.has(14)&&te.jsx(Gr,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...Es,"text-font":["Open Sans Light"],"text-field":"{name}","text-transform":"uppercase","text-variable-anchor":Bu,"text-size":["step",["zoom"],10,5,13]},paint:p.secondaryTextPaint}),wb(r)&&te.jsx(Gr,{id:t+"poi-icons","source-layer":t,type:"symbol",minzoom:o?7:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],SP(r),d],layout:hc(o,.6,1.25,2.5,{vertical:2,horizontal:2})}),wb(r)&&(r.has(8)||r.has(9))&&te.jsx(Gr,{id:t+"poi-icon-labels","source-layer":t,type:"symbol",minzoom:o?9.5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["in",["get","poiType"],["literal",["viewpoint","landmark"]]],SP(r),d],layout:{...hc(o,.6,1.25,2.5,{vertical:2,horizontal:2}),...Es,"text-field":"{poiName}","text-allow-overlap":!o,"text-variable-anchor":["left","right","top","bottom"],"text-radial-offset":1.5,"text-size":10},paint:p.primaryTextPaint})]})},mG=({game:e,color:t,mode:r})=>te.jsxs(jd,{id:e+"footprints",type:"vector",url:`pmtiles:///${e}-footprints.pmtiles`,children:[te.jsx(Gr,{id:e+"footprints","source-layer":"footprints",type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-color":t,"fill-opacity":["step",["zoom"],1,9,.8]}}),te.jsx(Gr,{id:e+"extrusions",minzoom:9,"source-layer":"footprints",type:"fill-extrusion",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-extrusion-color":t,"fill-extrusion-height":["interpolate",["exponential",1.5],["zoom"],9,["*",10,["get","height"]],13,["*",20,["get","height"]]],"fill-extrusion-opacity":r==="light"?.33:.67}})]});function hc(e,t,r,o,s={vertical:10,horizontal:30}){const d=["literal",[s.vertical,s.horizontal]];return{"icon-image":"{sprite}","icon-allow-overlap":!e,"icon-padding":d,"icon-size":["interpolate",["exponential",1.5],["zoom"],4,t,9,r,13,o]}}const ax=["step",["zoom"],["case",["==",["get","capital"],2],"dotdot","dot"],8,""],gG=[9,8,6,7,2,0,4,5,12,3,13,1,10,11],wP=["weigh_ico","toll_ico","agri_check","border_ico"];function wb(e){return gG.some(t=>e.has(t))}function SP(e){Pd.checkArgument(wb(e));const t=[];e.has(9)&&t.push("landmark"),e.has(8)&&t.push("viewpoint"),e.has(6)&&t.push("ferry"),e.has(7)&&t.push("train");const r=[];e.has(0)&&r.push("gas_ico"),e.has(4)&&r.push("service_ico"),e.has(13)&&r.push("weigh_station_ico"),e.has(5)&&r.push("dealer_ico"),e.has(12)&&r.push("garage_large_ico"),e.has(3)&&r.push("recruitment_ico"),e.has(2)&&r.push("parking_ico");const o=[];e.has(13)&&o.push("weigh_ico"),e.has(1)&&o.push("toll_ico"),e.has(10)&&o.push("agri_check"),e.has(11)&&o.push("border_ico");const s=t.length>0?["in",["get","poiType"],["literal",t]]:!1,d=r.length>0?["all",["==",["get","poiType"],"facility"],["in",["get","sprite"],["literal",r]]]:!1,p=o.length>0?["all",["==",["get","poiType"],"road"],["in",["get","sprite"],["literal",o]]]:!1;return["any",s,d,p]}function CP(e,t){if(e!=="ats")return["boolean",!0];const r=s0(t);return["in",["get","dlcGuard"],["literal",[...r]]]}const Bu=["step",["zoom"],["literal",["top","bottom","right","left"]],7,["literal",["center"]]],Es={"text-radial-offset":.5,"text-justify":"auto","text-font":["Klokantech Noto Sans Regular"]},IP={"line-cap":"round","line-join":"bevel"},TP=["interpolate",["exponential",1.5],["zoom"],3,.8,14,30,16,150],tD={light:{freeway:["#fde293","#f8c248"],divided:["#ffffff","#dddddd"],no_vehicles:["#aaaaaa","#888888"],local:["#f1f3f4","#dddddd"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]},dark:{freeway:["#95813e","#372f21"],divided:["#3c4043","#4c5043"],no_vehicles:["#606166","#888888"],local:["#606166","#333"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]}},yG={light:{0:"hsl(200, 8%, 92%)",1:"hsl(38, 59%, 76%)",2:"hsl(38, 64%, 58%)",3:"hsl(92, 31%, 70%)",4:"hsl(0, 100%, 30%)",5:"hsl(107, 51%, 43%)",6:"hsl(201, 53%, 39%)",7:"hsl(53, 84%, 53%)",8:"hsl(267,46% ,45%)"},dark:{0:"hsl(200, 2%, 36%)",1:"hsl(38, 25%, 35%)",2:"hsl(38, 25%, 25%)",3:"hsl(143, 20%, 25%)",4:"hsl(0, 100%, 25%)",5:"hsl(107, 51%, 25%)",6:"hsl(201, 53%, 25%)",7:"hsl(53, 84%, 25%)",8:"hsl(267, 46%, 25%)"}},vG=e=>["match",["get","roadType"],...Object.entries(tD[e]).flatMap(([t,[r]])=>[t,r]),"#f0f"],_G=e=>["match",["get","roadType"],...Object.entries(tD[e]).flatMap(([t,[r,o]])=>[t,o]),"#b0b"],sx=e=>["match",["get","color"],...Object.entries(yG[e]).flatMap(([t,r])=>[Number(t),r]),"#b0b"],rD="https://raw.githubusercontent.com/nautofon/ats-towns/california/all-towns.geojson",nD="/ets2-villages.geojson";var Ei=(e=>(e.AR="AR",e.AZ="AZ",e.CA="CA",e.CO="CO",e.ID="ID",e.KS="KS",e.MT="MT",e.NE="NE",e.NM="NM",e.NV="NV",e.OK="OK",e.OR="OR",e.TX="TX",e.UT="UT",e.WA="WA",e.WY="WY",e))(Ei||{});const xG={AR:void 0,AZ:void 0,CA:void 0,CO:void 0,ID:void 0,KS:void 0,MT:void 0,NE:void 0,NM:void 0,NV:void 0,OK:void 0,OR:void 0,TX:void 0,UT:void 0,WA:void 0,WY:void 0},bG=new Set(Object.keys(xG)),Sb=e=>{const{game:t,enableAutoHide:r=!0,mode:o="light"}=e,s=t==="ats"?rD:nD,d=t==="ats"?["in",["get","state"],["literal",[...e.enabledStates??bG]]]:["boolean",!0],p=PS[o];return te.jsx(jd,{id:`${t}-scenery-towns`,type:"geojson",data:s,children:te.jsx(Gr,{id:`${t}-scenery-towns`,type:"symbol",minzoom:r?7:0,filter:d,layout:{...Es,"text-field":"{name}","text-allow-overlap":!r,"text-variable-anchor":Bu,"text-size":10.5},paint:p.primaryTextPaint})})},iD=new Proxy({version:8,sprite:"/sprites",glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[]},{get(e,t,r){var o;return t==="sprite"&&((o=e.sprite)!=null&&o.toString().match(/^\/\w/))?window.location.origin+e.sprite.toString():Reflect.get(e,t,r)}});function wG(e){return SB(e)}var $f={},oD={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(oD);var aD=oD.exports;const SG=cs(C5);var lx={exports:{}},PP;function CG(){return PP||(PP=1,function(e){function t(r,o){if(r==null)return{};var s={};for(var d in r)if({}.hasOwnProperty.call(r,d)){if(o.includes(d))continue;s[d]=r[d]}return s}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(lx)),lx.exports}const IG=cs(R3),TG=cs(M3),PG=cs(F3),kG=cs(BO),EG=cs(IO),AG=cs(zO);var Vd=aD;Object.defineProperty($f,"__esModule",{value:!0});var zG=$f.default=HG;$f.shouldForwardProp=Gg;$f.systemDefaultTheme=void 0;var na=Vd(SG),Cb=Vd(CG()),kP=BG(IG),RG=TG;Vd(PG);Vd(kG);var MG=Vd(EG),DG=Vd(AG);const LG=["ownerState"],$G=["variants"],OG=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function sD(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(sD=function(o){return o?r:t})(e)}function BG(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=sD(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var p=s?Object.getOwnPropertyDescriptor(e,d):null;p&&(p.get||p.set)?Object.defineProperty(o,d,p):o[d]=e[d]}return o.default=e,r&&r.set(e,o),o}function FG(e){return Object.keys(e).length===0}function NG(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Gg(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const jG=$f.systemDefaultTheme=(0,MG.default)(),VG=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function xg({defaultTheme:e,theme:t,themeId:r}){return FG(t)?e:t[r]||t}function UG(e){return e?(t,r)=>r[e]:null}function qg(e,t){let{ownerState:r}=t,o=(0,Cb.default)(t,LG);const s=typeof e=="function"?e((0,na.default)({ownerState:r},o)):e;if(Array.isArray(s))return s.flatMap(d=>qg(d,(0,na.default)({ownerState:r},o)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:d=[]}=s;let c=(0,Cb.default)(s,$G);return d.forEach(x=>{let w=!0;typeof x.props=="function"?w=x.props((0,na.default)({ownerState:r},o,r)):Object.keys(x.props).forEach(T=>{(r==null?void 0:r[T])!==x.props[T]&&o[T]!==x.props[T]&&(w=!1)}),w&&(Array.isArray(c)||(c=[c]),c.push(typeof x.style=="function"?x.style((0,na.default)({ownerState:r},o,r)):x.style))}),c}return s}function HG(e={}){const{themeId:t,defaultTheme:r=jG,rootShouldForwardProp:o=Gg,slotShouldForwardProp:s=Gg}=e,d=p=>(0,DG.default)((0,na.default)({},p,{theme:xg((0,na.default)({},p,{defaultTheme:r,themeId:t}))}));return d.__mui_systemSx=!0,(p,c={})=>{(0,kP.internal_processStyles)(p,J=>J.filter(K=>!(K!=null&&K.__mui_systemSx)));const{name:x,slot:w,skipVariantsResolver:T,skipSx:k,overridesResolver:E=UG(VG(w))}=c,M=(0,Cb.default)(c,OG),N=T!==void 0?T:w&&w!=="Root"&&w!=="root"||!1,j=k||!1;let q,B=Gg;w==="Root"||w==="root"?B=o:w?B=s:NG(p)&&(B=void 0);const D=(0,kP.default)(p,(0,na.default)({shouldForwardProp:B,label:q},M)),$=J=>typeof J=="function"&&J.__emotion_real!==J||(0,RG.isPlainObject)(J)?K=>qg(J,(0,na.default)({},K,{theme:xg({theme:K.theme,defaultTheme:r,themeId:t})})):J,ie=(J,...K)=>{let se=$(J);const ae=K?K.map($):[];x&&E&&ae.push(ke=>{const Ee=xg((0,na.default)({},ke,{defaultTheme:r,themeId:t}));if(!Ee.components||!Ee.components[x]||!Ee.components[x].styleOverrides)return null;const $e=Ee.components[x].styleOverrides,Je={};return Object.entries($e).forEach(([je,Se])=>{Je[je]=qg(Se,(0,na.default)({},ke,{theme:Ee}))}),E(ke,Je)}),x&&!N&&ae.push(ke=>{var Ee;const $e=xg((0,na.default)({},ke,{defaultTheme:r,themeId:t})),Je=$e==null||(Ee=$e.components)==null||(Ee=Ee[x])==null?void 0:Ee.variants;return qg({variants:Je},(0,na.default)({},ke,{theme:$e}))}),j||ae.push(d);const we=ae.length-K.length;if(Array.isArray(J)&&we>0){const ke=new Array(we).fill("");se=[...J,...ke],se.raw=[...J.raw,...ke]}const xe=D(se,...ae);return p.muiName&&(xe.muiName=p.muiName),xe};return D.withConfig&&(ie.withConfig=D.withConfig),ie}}function WG(e,t){return G({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Qn={};const GG=cs(S5),qG=cs(XO);var lD=aD;Object.defineProperty(Qn,"__esModule",{value:!0});Qn.alpha=hD;Qn.blend=aq;Qn.colorChannel=void 0;var ZG=Qn.darken=RS;Qn.decomposeColor=fa;Qn.emphasize=pD;var KG=Qn.getContrastRatio=tq;Qn.getLuminance=jy;Qn.hexToRgb=cD;Qn.hslToRgb=dD;var XG=Qn.lighten=MS;Qn.private_safeAlpha=rq;Qn.private_safeColorChannel=void 0;Qn.private_safeDarken=nq;Qn.private_safeEmphasize=oq;Qn.private_safeLighten=iq;Qn.recomposeColor=Ud;Qn.rgbToHex=eq;var EP=lD(GG),JG=lD(qG);function zS(e,t=0,r=1){return(0,JG.default)(e,t,r)}function cD(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,s)=>s<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function YG(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function fa(e){if(e.type)return e;if(e.charAt(0)==="#")return fa(cD(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error((0,EP.default)(9,e));let o=e.substring(t+1,e.length-1),s;if(r==="color"){if(o=o.split(" "),s=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error((0,EP.default)(10,s))}else o=o.split(",");return o=o.map(d=>parseFloat(d)),{type:r,values:o,colorSpace:s}}const uD=e=>{const t=fa(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};Qn.colorChannel=uD;const QG=(e,t)=>{try{return uD(e)}catch{return e}};Qn.private_safeColorChannel=QG;function Ud(e){const{type:t,colorSpace:r}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((s,d)=>d<3?parseInt(s,10):s):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${r} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function eq(e){if(e.indexOf("#")===0)return e;const{values:t}=fa(e);return`#${t.map((r,o)=>YG(o===3?Math.round(255*r):r)).join("")}`}function dD(e){e=fa(e);const{values:t}=e,r=t[0],o=t[1]/100,s=t[2]/100,d=o*Math.min(s,1-s),p=(w,T=(w+r/30)%12)=>s-d*Math.max(Math.min(T-3,9-T,1),-1);let c="rgb";const x=[Math.round(p(0)*255),Math.round(p(8)*255),Math.round(p(4)*255)];return e.type==="hsla"&&(c+="a",x.push(t[3])),Ud({type:c,values:x})}function jy(e){e=fa(e);let t=e.type==="hsl"||e.type==="hsla"?fa(dD(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function tq(e,t){const r=jy(e),o=jy(t);return(Math.max(r,o)+.05)/(Math.min(r,o)+.05)}function hD(e,t){return e=fa(e),t=zS(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Ud(e)}function rq(e,t,r){try{return hD(e,t)}catch{return e}}function RS(e,t){if(e=fa(e),t=zS(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return Ud(e)}function nq(e,t,r){try{return RS(e,t)}catch{return e}}function MS(e,t){if(e=fa(e),t=zS(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return Ud(e)}function iq(e,t,r){try{return MS(e,t)}catch{return e}}function pD(e,t=.15){return jy(e)>.5?RS(e,t):MS(e,t)}function oq(e,t,r){try{return pD(e,t)}catch{return e}}function aq(e,t,r,o=1){const s=(x,w)=>Math.round((x**(1/o)*(1-r)+w**(1/o)*r)**o),d=fa(e),p=fa(t),c=[s(d.values[0],p.values[0]),s(d.values[1],p.values[1]),s(d.values[2],p.values[2])];return Ud({type:"rgb",values:c})}const hf={black:"#000",white:"#fff"},sq={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Au={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},zu={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},fp={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Ru={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Mu={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Du={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},lq=["mode","contrastThreshold","tonalOffset"],AP={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:hf.white,default:hf.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},cx={text:{primary:hf.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:hf.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function zP(e,t,r,o){const s=o.light||o,d=o.dark||o*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=XG(e.main,s):t==="dark"&&(e.dark=ZG(e.main,d)))}function cq(e="light"){return e==="dark"?{main:Ru[200],light:Ru[50],dark:Ru[400]}:{main:Ru[700],light:Ru[400],dark:Ru[800]}}function uq(e="light"){return e==="dark"?{main:Au[200],light:Au[50],dark:Au[400]}:{main:Au[500],light:Au[300],dark:Au[700]}}function dq(e="light"){return e==="dark"?{main:zu[500],light:zu[300],dark:zu[700]}:{main:zu[700],light:zu[400],dark:zu[800]}}function hq(e="light"){return e==="dark"?{main:Mu[400],light:Mu[300],dark:Mu[700]}:{main:Mu[700],light:Mu[500],dark:Mu[900]}}function pq(e="light"){return e==="dark"?{main:Du[400],light:Du[300],dark:Du[700]}:{main:Du[800],light:Du[500],dark:Du[900]}}function fq(e="light"){return e==="dark"?{main:fp[400],light:fp[300],dark:fp[700]}:{main:"#ed6c02",light:fp[500],dark:fp[900]}}function mq(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:o=.2}=e,s=er(e,lq),d=e.primary||cq(t),p=e.secondary||uq(t),c=e.error||dq(t),x=e.info||hq(t),w=e.success||pq(t),T=e.warning||fq(t);function k(j){return KG(j,cx.text.primary)>=r?cx.text.primary:AP.text.primary}const E=({color:j,name:q,mainShade:B=500,lightShade:D=300,darkShade:$=700})=>{if(j=G({},j),!j.main&&j[B]&&(j.main=j[B]),!j.hasOwnProperty("main"))throw new Error($s(11,q?` (${q})`:"",B));if(typeof j.main!="string")throw new Error($s(12,q?` (${q})`:"",JSON.stringify(j.main)));return zP(j,"light",D,o),zP(j,"dark",$,o),j.contrastText||(j.contrastText=k(j.main)),j},M={dark:cx,light:AP};return di(G({common:G({},hf),mode:t,primary:E({color:d,name:"primary"}),secondary:E({color:p,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:E({color:c,name:"error"}),warning:E({color:T,name:"warning"}),info:E({color:x,name:"info"}),success:E({color:w,name:"success"}),grey:sq,contrastThreshold:r,getContrastText:k,augmentColor:E,tonalOffset:o},M[t]),s)}const gq=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function yq(e){return Math.round(e*1e5)/1e5}const RP={textTransform:"uppercase"},MP='"Roboto", "Helvetica", "Arial", sans-serif';function vq(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:o=MP,fontSize:s=14,fontWeightLight:d=300,fontWeightRegular:p=400,fontWeightMedium:c=500,fontWeightBold:x=700,htmlFontSize:w=16,allVariants:T,pxToRem:k}=r,E=er(r,gq),M=s/14,N=k||(B=>`${B/w*M}rem`),j=(B,D,$,ie,J)=>G({fontFamily:o,fontWeight:B,fontSize:N(D),lineHeight:$},o===MP?{letterSpacing:`${yq(ie/D)}em`}:{},J,T),q={h1:j(d,96,1.167,-1.5),h2:j(d,60,1.2,-.5),h3:j(p,48,1.167,0),h4:j(p,34,1.235,.25),h5:j(p,24,1.334,0),h6:j(c,20,1.6,.15),subtitle1:j(p,16,1.75,.15),subtitle2:j(c,14,1.57,.1),body1:j(p,16,1.5,.15),body2:j(p,14,1.43,.15),button:j(c,14,1.75,.4,RP),caption:j(p,12,1.66,.4),overline:j(p,12,2.66,1,RP),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return di(G({htmlFontSize:w,pxToRem:N,fontFamily:o,fontSize:s,fontWeightLight:d,fontWeightRegular:p,fontWeightMedium:c,fontWeightBold:x},q),E,{clone:!1})}const _q=.2,xq=.14,bq=.12;function En(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${_q})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${xq})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${bq})`].join(",")}const wq=["none",En(0,2,1,-1,0,1,1,0,0,1,3,0),En(0,3,1,-2,0,2,2,0,0,1,5,0),En(0,3,3,-2,0,3,4,0,0,1,8,0),En(0,2,4,-1,0,4,5,0,0,1,10,0),En(0,3,5,-1,0,5,8,0,0,1,14,0),En(0,3,5,-1,0,6,10,0,0,1,18,0),En(0,4,5,-2,0,7,10,1,0,2,16,1),En(0,5,5,-3,0,8,10,1,0,3,14,2),En(0,5,6,-3,0,9,12,1,0,3,16,2),En(0,6,6,-3,0,10,14,1,0,4,18,3),En(0,6,7,-4,0,11,15,1,0,4,20,3),En(0,7,8,-4,0,12,17,2,0,5,22,4),En(0,7,8,-4,0,13,19,2,0,5,24,4),En(0,7,9,-4,0,14,21,2,0,5,26,4),En(0,8,9,-5,0,15,22,2,0,6,28,5),En(0,8,10,-5,0,16,24,2,0,6,30,5),En(0,8,11,-5,0,17,26,2,0,6,32,5),En(0,9,11,-5,0,18,28,2,0,7,34,6),En(0,9,12,-6,0,19,29,2,0,7,36,6),En(0,10,13,-6,0,20,31,3,0,8,38,7),En(0,10,13,-6,0,21,33,3,0,8,40,7),En(0,10,14,-6,0,22,35,3,0,8,42,7),En(0,11,14,-7,0,23,36,3,0,9,44,8),En(0,11,15,-7,0,24,38,3,0,9,46,8)],Sq=["duration","easing","delay"],Cq={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Iq={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function DP(e){return`${Math.round(e)}ms`}function Tq(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Pq(e){const t=G({},Cq,e.easing),r=G({},Iq,e.duration);return G({getAutoHeightDuration:Tq,create:(s=["all"],d={})=>{const{duration:p=r.standard,easing:c=t.easeInOut,delay:x=0}=d;return er(d,Sq),(Array.isArray(s)?s:[s]).map(w=>`${w} ${typeof p=="string"?p:DP(p)} ${c} ${typeof x=="string"?x:DP(x)}`).join(",")}},e,{easing:t,duration:r})}const kq={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Eq=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Aq(e={},...t){const{mixins:r={},palette:o={},transitions:s={},typography:d={}}=e,p=er(e,Eq);if(e.vars)throw new Error($s(18));const c=mq(o),x=yf(e);let w=di(x,{mixins:WG(x.breakpoints,r),palette:c,shadows:wq.slice(),typography:vq(c,d),transitions:Pq(s),zIndex:G({},kq)});return w=di(w,p),w=t.reduce((T,k)=>di(T,k),w),w.unstable_sxConfig=G({},Rd,p==null?void 0:p.unstable_sxConfig),w.unstable_sx=function(k){return Md({sx:k,theme:this})},w}const zq=Aq(),Rq="$$material";function Mq(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Dq=e=>Mq(e)&&e!=="classes",Lq=zG({themeId:Rq,defaultTheme:zq,rootShouldForwardProp:Dq});function $q(e){return fv("MuiSvgIcon",e)}iA("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Oq=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Bq=e=>{const{color:t,fontSize:r,classes:o}=e,s={root:["root",t!=="inherit"&&`color${Et(t)}`,`fontSize${Et(r)}`]};return Dr(s,$q,o)},Fq=Lq("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${Et(r.color)}`],t[`fontSize${Et(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,o,s,d,p,c,x,w,T,k,E,M,N;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(o=r.create)==null?void 0:o.call(r,"fill",{duration:(s=e.transitions)==null||(s=s.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(p=d.pxToRem)==null?void 0:p.call(d,20))||"1.25rem",medium:((c=e.typography)==null||(x=c.pxToRem)==null?void 0:x.call(c,24))||"1.5rem",large:((w=e.typography)==null||(T=w.pxToRem)==null?void 0:T.call(w,35))||"2.1875rem"}[t.fontSize],color:(k=(E=(e.vars||e).palette)==null||(E=E[t.color])==null?void 0:E.main)!=null?k:{action:(M=(e.vars||e).palette)==null||(M=M.action)==null?void 0:M.active,disabled:(N=(e.vars||e).palette)==null||(N=N.action)==null?void 0:N.disabled,inherit:void 0}[t.color]}}),Ib=R.forwardRef(function(t,r){const o=wG({props:t,name:"MuiSvgIcon"}),{children:s,className:d,color:p="inherit",component:c="svg",fontSize:x="medium",htmlColor:w,inheritViewBox:T=!1,titleAccess:k,viewBox:E="0 0 24 24"}=o,M=er(o,Oq),N=R.isValidElement(s)&&s.type==="svg",j=G({},o,{color:p,component:c,fontSize:x,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:E,hasSvgAsChild:N}),q={};T||(q.viewBox=E);const B=Bq(j);return te.jsxs(Fq,G({as:c,className:ii(B.root,d),focusable:"false",color:w,"aria-hidden":k?void 0:!0,role:k?"img":void 0,ref:r},q,M,N&&s.props,{ownerState:j,children:[N?s.props.children:s,k?te.jsx("title",{children:k}):null]}))});Ib.muiName="SvgIcon";function jl(e,t){function r(o,s){return te.jsx(Ib,G({"data-testid":`${t}Icon`,ref:s},o,{children:e}))}return r.muiName=Ib.muiName,R.memo(R.forwardRef(r))}const Nq=jl(te.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness6"),jq=jl(te.jsx("path",{d:"M10.85 12.65h2.3L12 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM14.3 16l-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9z"}),"BrightnessAuto"),Vq=jl(te.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"BrightnessHigh"),Uq=jl(te.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6"}),"BrightnessLow"),fD=jl(te.jsx("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEvents"),Hq=jl(te.jsx("path",{d:"m16 5-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2"}),"IosShare"),Wq=jl(te.jsx("path",{d:"M19 5v14H5V5zm1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt"),mD=jl(te.jsx("path",{d:"M15 11V5l-3-3-3 3v2H3v14h18V11zm-8 8H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm6 8h-2v-2h2zm0-4h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm6 12h-2v-2h2zm0-4h-2v-2h2z"}),"LocationCity"),gD={[ei.FuelStation]:{iconName:"gas_ico",label:"Fuel station"},[ei.Toll]:{iconName:"toll_ico",label:"Toll gate"},[ei.Parking]:{iconName:"parking_ico",label:"Rest stop"},[ei.RecruitmentAgency]:{iconName:"recruitment_ico",label:"Recruitment agency"},[ei.Service]:{iconName:"service_ico",label:"Service"},[ei.TruckDealer]:{iconName:"dealer_ico",label:"Truck dealer"},[ei.Port]:{iconName:"port_overlay",label:"Port"},[ei.Train]:{iconName:"train_ico",label:"Train"},[ei.Viewpoint]:{iconName:"viewpoint",label:"Viewpoint"},[ei.PhotoSight]:{iconName:"photo_sight_captured",label:"Photo trophy"},[ei.AgricultureCheck]:{iconName:"agri_check",label:"Agricultural inspection"},[ei.BorderCheck]:{iconName:"border_ico",label:"Border inspection"},[ei.Garage]:{iconName:"garage_large_ico",label:"Garage"},[ei.WeighStation]:{iconName:"weigh_station_ico",label:"Weigh station"},[ei.CityNames]:{iconName:"city_names_ico",label:"City names"},[ei.Company]:{iconName:"companies_ico",label:"Companies"},[ei.RoadNumber]:{iconName:"road_numbers_ico",label:"Road numbers"}},LP=new Map(Object.entries(gD).map(([e,t])=>[Number(e),t.label])),$P=new Map(Object.entries(LH).map(([e,t])=>[Number(e),t]));function Vy(e,t,r){return{selectedItems:e,onSelectAllToggle:o=>t(new Set(o?r:[])),onItemToggle:(o,s)=>{t(d=>{const p=new Set(d);return s?p.add(o):p.delete(o),p})}}}const yD=e=>{const t=R.useRef(null),[r,o]=R.useState(!1),[s,d]=R.useState(0);return Ws(()=>({onAdd:()=>Cn(t.current),onRemove:()=>Cn(t.current).remove()}),{position:"bottom-left"}),te.jsxs("div",{ref:t,className:"maplibregl-ctrl maplibregl-ctrl-group",children:[te.jsx(e0,{title:"Map Options",sx:{minWidth:0,minHeight:0,borderRadius:0},onClick:()=>o(!0),children:te.jsx(Wq,{})}),te.jsx(cM,{open:r,onClose:()=>o(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",justifyContent:"end"}}},children:te.jsxs(hM,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,height:"80%",overflow:"auto"},children:[te.jsx(iM,{children:"Map Options"}),te.jsx(dM,{}),te.jsx(LT,{onChange:(p,c)=>d(Number(c)),children:te.jsxs(W9,{tabFlex:1,sx:{borderRadius:0},children:[te.jsx(Y_,{children:"Icons"}),te.jsx(Y_,{children:"ATS DLC"}),te.jsx(Y_,{children:"Advanced"})]})}),te.jsx(nM,{sx:{overflowX:"hidden"},children:te.jsxs(LT,{value:s,children:[te.jsx(Q_,{sx:{p:0},value:0,children:te.jsx(OP,{items:LP,selectedItems:e.icons.selectedItems,onItemToggle:e.icons.onItemToggle,icon:p=>te.jsx("img",{style:{marginLeft:-3},width:32,height:32,src:`map-icons/${gD[p].iconName}.png`})})}),te.jsx(Q_,{sx:{p:0},value:1,children:te.jsx(OP,{items:$P,selectedItems:e.atsDlcs.selectedItems,onItemToggle:e.atsDlcs.onItemToggle})}),te.jsx(Q_,{sx:{p:0},value:2,children:te.jsx(Kq,{showContours:e.advanced.showContours,onContoursToggle:e.advanced.onContoursToggle})})]})}),te.jsx(_S,{}),s===0&&te.jsx(Gq,{enableAutoHiding:e.icons.enableAutoHiding,enableSelectAll:e.icons.selectedItems.size===LP.size,onAutoHidingToggle:e.icons.onAutoHidingToggle,onSelectAllToggle:e.icons.onSelectAllToggle}),s===1&&te.jsx(Zq,{enableSelectAll:e.atsDlcs.selectedItems.size===$P.size,onSelectAllToggle:e.atsDlcs.onSelectAllToggle})]})})]})},Gq=R.memo(e=>te.jsxs(Rf,{direction:"row",justifyContent:"space-between",gap:1,mx:2,children:[te.jsx(o7,{enterDelay:500,title:"Enable to hide icons based on zoom and nearby icons. Disable to always show icons.",children:te.jsx(Cd,{label:"Enable icon hiding",checked:e.enableAutoHiding,onChange:t=>{var r;return(r=e.onAutoHidingToggle)==null?void 0:r.call(e,t.target.checked)}})}),te.jsx(Cd,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})]})),qq=e=>te.jsx(Ef,{size:"lg",sx:{p:0,[`& .${Tc.root}`]:{flexGrow:1,alignItems:"center",flexDirection:"row-reverse"}},children:[...e.items.entries()].map(([t,r])=>{var o;return te.jsxs(Oc,{children:[(o=e.icon)==null?void 0:o.call(e,t),te.jsx(Cd,{overlay:!0,label:r,checked:e.selectedItems.has(t),onChange:s=>e.onItemToggle(t,s.target.checked)})]},String(t))})}),OP=R.memo(qq),Zq=R.memo(e=>te.jsx(Rf,{direction:"row",justifyContent:"end",gap:1,mx:2,children:te.jsx(Cd,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})})),Kq=e=>te.jsxs(Rf,{mx:2,children:[te.jsx(Fa,{mb:2,level:"title-lg",children:"Experimental Features"}),te.jsxs(Y8,{children:[te.jsx(Cd,{sx:{flexDirection:"row-reverse"},label:"Show elevation data",checked:e.showContours,onChange:t=>e.onContoursToggle(t.target.checked)}),te.jsx(Fa,{level:"body-xs",color:"warning",children:"Note: elevation data for points further away from roads is estimated and likely inaccurate."})]})]}),vD=()=>{const e=R.useRef(null),{mode:t="light",setMode:r}=dw();return Ws(()=>({onAdd:()=>Cn(e.current),onRemove:()=>Cn(e.current).remove()})),te.jsx("div",{ref:e,className:"maplibregl-ctrl maplibregl-ctrl-group",children:te.jsxs(u4,{children:[te.jsx(t9,{slots:{root:e0},sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Set map theme",children:te.jsx(Nq,{})}),te.jsxs(qU,{placement:"left",children:[te.jsx(Oc,{sticky:!0,children:te.jsx(Fa,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:"Map theme"})}),te.jsxs(J_,{onClick:()=>r("light"),selected:t==="light",children:[te.jsx(Hg,{children:te.jsx(Vq,{})})," ","Light"]}),te.jsxs(J_,{onClick:()=>r("dark"),selected:t==="dark",children:[te.jsx(Hg,{children:te.jsx(Uq,{})})," ","Dark"]}),te.jsxs(J_,{onClick:()=>r("system"),selected:t==="system",children:[te.jsx(Hg,{children:te.jsx(jq,{})})," ","Auto"]})]})]})})};function Xq(e,t){return Yq(e,t,(r,o,s,d)=>Math.sqrt(Math.pow(s-r,2)+Math.pow(d-o,2)))}function _D(e){let t=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(const d of e)Array.isArray(d)?(t=Math.min(t,d[0]),o=Math.max(o,d[0]),r=Math.min(r,d[1]),s=Math.max(s,d[1])):(t=Math.min(t,d.x),o=Math.max(o,d.x),r=Math.min(r,d.y),s=Math.max(s,d.y));return[t,r,o,s]}function Jq(e){const t=Math.PI*2;let r=e%t;return r=(r+t)%t,r<=Math.PI?r:r-t}function BP(e){return Jq(e*Math.PI/180)}function Yq(e,t,r){let o,s;Array.isArray(e)?(Pd.checkArgument(e.length>=2),o=e[0],s=e[1]):(o=e.x,s=e.y);let d,p;return Array.isArray(t)?(Pd.checkArgument(t.length>=2),d=t[0],p=t[1]):(d=t.x,p=t.y),r(o,s,d,p)}function Qq(e,t,r){let o=r.get(e);return o==null&&(o=t,r.set(e,o)),o}const eZ=e=>{const{map:t,selectDecorator:r,onSelect:o}=e,[s,d]=R.useState([]);R.useEffect(()=>{const x=t==="usa"?"ats":"ets2";Promise.all([fetch(`${x}-achievements.json`).then(w=>w.json()),fetch(`${x}-achievements.geojson`).then(w=>w.json())]).then(([w,T])=>{const k=new Map;for(const M of T.features)Qq(M.properties.name,[],k).push({coordinates:M.geometry.coordinates,dlcGuard:M.properties.dlcGuard});const E=new Set(T.features.map(M=>M.properties.name));d([...w.data.filter(M=>E.has(M.id)).map(M=>({...M,label:M.title,value:M.id,features:Cn(k.get(M.id))})).sort((M,N)=>M.label.localeCompare(N.label))])},()=>console.error("could not load achievements json."))},[t]);const p=s.filter(x=>{if(t==="europe")return!0;const w=s0(e.visibleStateDlcs);return x.features.some(T=>w.has(T.dlcGuard))}),c=hS({stringify:x=>[x.label,x.desc].join(" ")});return te.jsx(My,{onChange:(x,w)=>o(w),placeholder:"Search achievements...",options:p,filterOptions:c,blurOnSelect:!0,autoComplete:!0,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:r,renderOption:(x,w)=>R.createElement(c8,{...x,key:w.value},te.jsx(Hg,{sx:{border:"2px solid var(--joy-palette-neutral-outlinedBorder)",borderRadius:6,overflow:"hidden",minWidth:"fit-content",mr:.5},children:te.jsx("img",{loading:"lazy",width:"48",height:"48",src:w.imgUrl,alt:""})}),te.jsxs(FU,{children:[te.jsx(Fa,{level:"title-md",children:w.label}),te.jsx(Fa,{level:"body-xs",children:w.desc})]}))},t)},tZ=e=>{const{map:t,selectDecorator:r,onSelect:o}=e,[s,d]=R.useState([]);R.useEffect(()=>{Promise.all([fetch("cities.geojson").then(x=>x.json()),fetch(rD).then(x=>x.json()),fetch(nD).then(x=>x.json())]).then(([x,w,T])=>{d(nZ(x,w,T))},()=>console.error("could not load cities/towns geojson."))},[]);const p=s.filter(x=>{const w=x.map===t;return t==="europe"?w:w&&e.visibleStates.has(x.stateCode)}),c=hS({stringify:x=>[x.state,x.label].join(" ")});return te.jsx(My,{onChange:(x,w)=>w&&o(w),placeholder:"Search cities...",options:p,filterOptions:c,groupBy:x=>x.state,blurOnSelect:!0,autoComplete:!0,renderGroup:rZ,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:r},t)};function rZ(e){return te.jsxs(R.Fragment,{children:[te.jsx(Fa,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:e.group}),te.jsx(Ef,{children:e.children}),te.jsx(uM,{})]},e.key)}function nZ(e,t,r){const o=[],s=new Map;for(const d of e.features)if(d.properties.type==="city")o.push(d);else if(d.properties.type==="country")s.set(d.properties.code,d.properties.name);else throw new Error;for(const d of t.features)o.push({type:"Feature",geometry:d.geometry,properties:{type:"city",map:"usa",countryCode:d.properties.state,name:d.properties.name}});for(const d of r.features)o.push({type:"Feature",geometry:d.geometry,properties:{type:"city",map:"europe",countryCode:d.properties.state,name:d.properties.name}});return o.map(({properties:d,geometry:p})=>({map:d.map,state:Cn(s.get(d.countryCode)),stateCode:d.countryCode,label:d.name,value:p.coordinates})).sort((d,p)=>d.state!==p.state?d.state.localeCompare(p.state):d.label.localeCompare(p.label))}var FP=Object.prototype.toString,xD=function(t){var r=FP.call(t),o=r==="[object Arguments]";return o||(o=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&FP.call(t.callee)==="[object Function]"),o},ux,NP;function iZ(){if(NP)return ux;NP=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=xD,s=Object.prototype.propertyIsEnumerable,d=!s.call({toString:null},"toString"),p=s.call(function(){},"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],x=function(E){var M=E.constructor;return M&&M.prototype===E},w={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},T=function(){if(typeof window>"u")return!1;for(var E in window)try{if(!w["$"+E]&&t.call(window,E)&&window[E]!==null&&typeof window[E]=="object")try{x(window[E])}catch{return!0}}catch{return!0}return!1}(),k=function(E){if(typeof window>"u"||!T)return x(E);try{return x(E)}catch{return!1}};e=function(M){var N=M!==null&&typeof M=="object",j=r.call(M)==="[object Function]",q=o(M),B=N&&r.call(M)==="[object String]",D=[];if(!N&&!j&&!q)throw new TypeError("Object.keys called on a non-object");var $=p&&j;if(B&&M.length>0&&!t.call(M,0))for(var ie=0;ie<M.length;++ie)D.push(String(ie));if(q&&M.length>0)for(var J=0;J<M.length;++J)D.push(String(J));else for(var K in M)!($&&K==="prototype")&&t.call(M,K)&&D.push(String(K));if(d)for(var se=k(M),ae=0;ae<c.length;++ae)!(se&&c[ae]==="constructor")&&t.call(M,c[ae])&&D.push(c[ae]);return D}}return ux=e,ux}var oZ=Array.prototype.slice,aZ=xD,jP=Object.keys,Zg=jP?function(t){return jP(t)}:iZ(),VP=Object.keys;Zg.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(o){return aZ(o)?VP(oZ.call(o)):VP(o)})}else Object.keys=Zg;return Object.keys||Zg};var sZ=Zg,Kg=Object.defineProperty||!1;if(Kg)try{Kg({},"a",{value:1})}catch{Kg=!1}var Of=Kg,Vl=SyntaxError,yr=TypeError,lZ=Object.getOwnPropertyDescriptor,Xg=lZ;if(Xg)try{Xg([],"length")}catch{Xg=null}var Hd=Xg,UP=Of,cZ=Vl,Lu=yr,HP=Hd,bD=function(t,r,o){if(!t||typeof t!="object"&&typeof t!="function")throw new Lu("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Lu("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Lu("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Lu("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Lu("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Lu("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,d=arguments.length>4?arguments[4]:null,p=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,x=!!HP&&HP(t,r);if(UP)UP(t,r,{configurable:p===null&&x?x.configurable:!p,enumerable:s===null&&x?x.enumerable:!s,value:o,writable:d===null&&x?x.writable:!d});else if(c||!s&&!d&&!p)t[r]=o;else throw new cZ("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Tb=Of,wD=function(){return!!Tb};wD.hasArrayLengthDefineBug=function(){if(!Tb)return null;try{return Tb([],"length",{value:1}).length!==1}catch{return!0}};var DS=wD,uZ=sZ,dZ=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",hZ=Object.prototype.toString,pZ=Array.prototype.concat,WP=bD,fZ=function(e){return typeof e=="function"&&hZ.call(e)==="[object Function]"},SD=DS(),mZ=function(e,t,r,o){if(t in e){if(o===!0){if(e[t]===r)return}else if(!fZ(o)||!o())return}SD?WP(e,t,r,!0):WP(e,t,r)},CD=function(e,t){var r=arguments.length>2?arguments[2]:{},o=uZ(t);dZ&&(o=pZ.call(o,Object.getOwnPropertySymbols(t)));for(var s=0;s<o.length;s+=1)mZ(e,o[s],t[o[s]],r[o[s]])};CD.supportsDescriptors=!!SD;var ID=CD,TD={exports:{}},gZ=Object,yZ=Error,vZ=EvalError,_Z=RangeError,xZ=ReferenceError,bZ=URIError,PD=Math.abs,kD=Math.floor,wZ=Math.max,SZ=Math.min,CZ=Math.pow,dx,GP;function ED(){return GP||(GP=1,dx=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),o=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(o)!=="[object Symbol]")return!1;var s=42;t[r]=s;for(var d in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var p=Object.getOwnPropertySymbols(t);if(p.length!==1||p[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(t,r);if(c.value!==s||c.enumerable!==!0)return!1}return!0}),dx}var hx,qP;function c0(){if(qP)return hx;qP=1;var e=typeof Symbol<"u"&&Symbol,t=ED();return hx=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},hx}var IZ="Function.prototype.bind called on incompatible ",TZ=Object.prototype.toString,PZ=Math.max,kZ="[object Function]",ZP=function(t,r){for(var o=[],s=0;s<t.length;s+=1)o[s]=t[s];for(var d=0;d<r.length;d+=1)o[d+t.length]=r[d];return o},EZ=function(t,r){for(var o=[],s=r,d=0;s<t.length;s+=1,d+=1)o[d]=t[s];return o},AZ=function(e,t){for(var r="",o=0;o<e.length;o+=1)r+=e[o],o+1<e.length&&(r+=t);return r},zZ=function(t){var r=this;if(typeof r!="function"||TZ.apply(r)!==kZ)throw new TypeError(IZ+r);for(var o=EZ(arguments,1),s,d=function(){if(this instanceof s){var T=r.apply(this,ZP(o,arguments));return Object(T)===T?T:this}return r.apply(t,ZP(o,arguments))},p=PZ(0,r.length-o.length),c=[],x=0;x<p;x++)c[x]="$"+x;if(s=Function("binder","return function ("+AZ(c,",")+"){ return binder.apply(this,arguments); }")(d),r.prototype){var w=function(){};w.prototype=r.prototype,s.prototype=new w,w.prototype=null}return s},RZ=zZ,Bf=Function.prototype.bind||RZ,LS=Function.prototype.call,$S=Function.prototype.apply,MZ=typeof Reflect<"u"&&Reflect&&Reflect.apply,DZ=Bf,LZ=$S,$Z=LS,OZ=MZ,AD=OZ||DZ.call($Z,LZ),BZ=Bf,FZ=yr,NZ=LS,jZ=AD,OS=function(t){if(t.length<1||typeof t[0]!="function")throw new FZ("a function is required");return jZ(BZ,NZ,t)},px,KP;function VZ(){if(KP)return px;KP=1;var e=OS,t=Hd,r;try{r=[].__proto__===Array.prototype}catch(p){if(!p||typeof p!="object"||!("code"in p)||p.code!=="ERR_PROTO_ACCESS")throw p}var o=!!r&&t&&t(Object.prototype,"__proto__"),s=Object,d=s.getPrototypeOf;return px=o&&typeof o.get=="function"?e([o.get]):typeof d=="function"?function(c){return d(c==null?c:s(c))}:!1,px}var fx,XP;function Gs(){if(XP)return fx;XP=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=Bf;return fx=r.call(e,t),fx}var Or,zD=gZ,UZ=yZ,HZ=vZ,WZ=_Z,GZ=xZ,kd=Vl,ud=yr,qZ=bZ,ZZ=PD,KZ=kD,XZ=wZ,JZ=SZ,YZ=CZ,RD=Function,mx=function(e){try{return RD('"use strict"; return ('+e+").constructor;")()}catch{}},pf=Hd,QZ=Of,gx=function(){throw new ud},eK=pf?function(){try{return arguments.callee,gx}catch{try{return pf(arguments,"callee").get}catch{return gx}}}():gx,$u=c0()(),tK=VZ(),gi=typeof Reflect=="function"&&Reflect.getPrototypeOf||zD.getPrototypeOf||tK,MD=$S,Ff=LS,Fu={},rK=typeof Uint8Array>"u"||!gi?Or:gi(Uint8Array),Pc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Or:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Or:ArrayBuffer,"%ArrayIteratorPrototype%":$u&&gi?gi([][Symbol.iterator]()):Or,"%AsyncFromSyncIteratorPrototype%":Or,"%AsyncFunction%":Fu,"%AsyncGenerator%":Fu,"%AsyncGeneratorFunction%":Fu,"%AsyncIteratorPrototype%":Fu,"%Atomics%":typeof Atomics>"u"?Or:Atomics,"%BigInt%":typeof BigInt>"u"?Or:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Or:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Or:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Or:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":UZ,"%eval%":eval,"%EvalError%":HZ,"%Float32Array%":typeof Float32Array>"u"?Or:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Or:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Or:FinalizationRegistry,"%Function%":RD,"%GeneratorFunction%":Fu,"%Int8Array%":typeof Int8Array>"u"?Or:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Or:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Or:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":$u&&gi?gi(gi([][Symbol.iterator]())):Or,"%JSON%":typeof JSON=="object"?JSON:Or,"%Map%":typeof Map>"u"?Or:Map,"%MapIteratorPrototype%":typeof Map>"u"||!$u||!gi?Or:gi(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":zD,"%Object.getOwnPropertyDescriptor%":pf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Or:Promise,"%Proxy%":typeof Proxy>"u"?Or:Proxy,"%RangeError%":WZ,"%ReferenceError%":GZ,"%Reflect%":typeof Reflect>"u"?Or:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Or:Set,"%SetIteratorPrototype%":typeof Set>"u"||!$u||!gi?Or:gi(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Or:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":$u&&gi?gi(""[Symbol.iterator]()):Or,"%Symbol%":$u?Symbol:Or,"%SyntaxError%":kd,"%ThrowTypeError%":eK,"%TypedArray%":rK,"%TypeError%":ud,"%Uint8Array%":typeof Uint8Array>"u"?Or:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Or:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Or:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Or:Uint32Array,"%URIError%":qZ,"%WeakMap%":typeof WeakMap>"u"?Or:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Or:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Or:WeakSet,"%Function.prototype.call%":Ff,"%Function.prototype.apply%":MD,"%Object.defineProperty%":QZ,"%Math.abs%":ZZ,"%Math.floor%":KZ,"%Math.max%":XZ,"%Math.min%":JZ,"%Math.pow%":YZ};if(gi)try{null.error}catch(e){var nK=gi(gi(e));Pc["%Error.prototype%"]=nK}var iK=function e(t){var r;if(t==="%AsyncFunction%")r=mx("async function () {}");else if(t==="%GeneratorFunction%")r=mx("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=mx("async function* () {}");else if(t==="%AsyncGenerator%"){var o=e("%AsyncGeneratorFunction%");o&&(r=o.prototype)}else if(t==="%AsyncIteratorPrototype%"){var s=e("%AsyncGenerator%");s&&gi&&(r=gi(s.prototype))}return Pc[t]=r,r},JP={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Nf=Bf,Uy=Gs(),oK=Nf.call(Ff,Array.prototype.concat),aK=Nf.call(MD,Array.prototype.splice),YP=Nf.call(Ff,String.prototype.replace),Hy=Nf.call(Ff,String.prototype.slice),sK=Nf.call(Ff,RegExp.prototype.exec),lK=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,cK=/\\(\\)?/g,uK=function(t){var r=Hy(t,0,1),o=Hy(t,-1);if(r==="%"&&o!=="%")throw new kd("invalid intrinsic syntax, expected closing `%`");if(o==="%"&&r!=="%")throw new kd("invalid intrinsic syntax, expected opening `%`");var s=[];return YP(t,lK,function(d,p,c,x){s[s.length]=c?YP(x,cK,"$1"):p||d}),s},dK=function(t,r){var o=t,s;if(Uy(JP,o)&&(s=JP[o],o="%"+s[0]+"%"),Uy(Pc,o)){var d=Pc[o];if(d===Fu&&(d=iK(o)),typeof d>"u"&&!r)throw new ud("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:s,name:o,value:d}}throw new kd("intrinsic "+t+" does not exist!")},Yi=function(t,r){if(typeof t!="string"||t.length===0)throw new ud("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ud('"allowMissing" argument must be a boolean');if(sK(/^%?[^%]*%?$/,t)===null)throw new kd("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var o=uK(t),s=o.length>0?o[0]:"",d=dK("%"+s+"%",r),p=d.name,c=d.value,x=!1,w=d.alias;w&&(s=w[0],aK(o,oK([0,1],w)));for(var T=1,k=!0;T<o.length;T+=1){var E=o[T],M=Hy(E,0,1),N=Hy(E,-1);if((M==='"'||M==="'"||M==="`"||N==='"'||N==="'"||N==="`")&&M!==N)throw new kd("property names with quotes must have matching quotes");if((E==="constructor"||!k)&&(x=!0),s+="."+E,p="%"+s+"%",Uy(Pc,p))c=Pc[p];else if(c!=null){if(!(E in c)){if(!r)throw new ud("base intrinsic for "+t+" exists, but the property is not available.");return}if(pf&&T+1>=o.length){var j=pf(c,E);k=!!j,k&&"get"in j&&!("originalValue"in j.get)?c=j.get:c=c[E]}else k=Uy(c,E),c=c[E];k&&!x&&(Pc[p]=c)}}return c},hK=Yi,QP=bD,pK=DS(),ek=Hd,tk=yr,fK=hK("%Math.floor%"),mK=function(t,r){if(typeof t!="function")throw new tk("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||fK(r)!==r)throw new tk("`length` must be a positive 32-bit integer");var o=arguments.length>2&&!!arguments[2],s=!0,d=!0;if("length"in t&&ek){var p=ek(t,"length");p&&!p.configurable&&(s=!1),p&&!p.writable&&(d=!1)}return(s||d||!o)&&(pK?QP(t,"length",r,!0,!0):QP(t,"length",r)),t},gK=Bf,yK=$S,vK=AD,_K=function(){return vK(gK,yK,arguments)};(function(e){var t=mK,r=Of,o=OS,s=_K;e.exports=function(p){var c=o(arguments),x=p.length-(arguments.length-1);return t(c,1+(x>0?x:0),!0)},r?r(e.exports,"apply",{value:s}):e.exports.apply=s})(TD);var DD=TD.exports,Nc=function(t){return typeof t=="string"||typeof t=="symbol"},xK=yr,mp=Gs(),bK={__proto__:null,"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0},jc=function(t){if(!t||typeof t!="object")return!1;for(var r in t)if(mp(t,r)&&!bK[r])return!1;var o=mp(t,"[[Value]]")||mp(t,"[[Writable]]"),s=mp(t,"[[Get]]")||mp(t,"[[Set]]");if(o&&s)throw new xK("Property Descriptors may not be both accessor and data descriptors");return!0},wK=yr,rk=Gs(),SK=jc,BS=function(t){if(typeof t>"u")return!1;if(!SK(t))throw new wK("Assertion failed: `Desc` must be a Property Descriptor");return!(!rk(t,"[[Get]]")&&!rk(t,"[[Set]]"))},yx,nk;function CK(){return nk||(nk=1,yx=function(t){return t===null||typeof t!="function"&&typeof t!="object"}),yx}var LD=Yi,IK=LD("%Object.preventExtensions%",!0),TK=LD("%Object.isExtensible%",!0),ik=CK(),PK=IK?function(t){return!ik(t)&&TK(t)}:function(t){return!ik(t)},$D=Function.prototype.toString,Yu=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Pb,Jg;if(typeof Yu=="function"&&typeof Object.defineProperty=="function")try{Pb=Object.defineProperty({},"length",{get:function(){throw Jg}}),Jg={},Yu(function(){throw 42},null,Pb)}catch(e){e!==Jg&&(Yu=null)}else Yu=null;var kK=/^\s*class\b/,kb=function(t){try{var r=$D.call(t);return kK.test(r)}catch{return!1}},vx=function(t){try{return kb(t)?!1:($D.call(t),!0)}catch{return!1}},Yg=Object.prototype.toString,EK="[object Object]",AK="[object Function]",zK="[object GeneratorFunction]",RK="[object HTMLAllCollection]",MK="[object HTML document.all class]",DK="[object HTMLCollection]",LK=typeof Symbol=="function"&&!!Symbol.toStringTag,$K=!(0 in[,]),Eb=function(){return!1};if(typeof document=="object"){var OK=document.all;Yg.call(OK)===Yg.call(document.all)&&(Eb=function(t){if(($K||!t)&&(typeof t>"u"||typeof t=="object"))try{var r=Yg.call(t);return(r===RK||r===MK||r===DK||r===EK)&&t("")==null}catch{}return!1})}var OD=Yu?function(t){if(Eb(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Yu(t,null,Pb)}catch(r){if(r!==Jg)return!1}return!kb(t)&&vx(t)}:function(t){if(Eb(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(LK)return vx(t);if(kb(t))return!1;var r=Yg.call(t);return r!==AK&&r!==zK&&!/^\[object HTML/.test(r)?!1:vx(t)},jf=OD,BD=function(t){return!!t},po=function(t){return!!t&&(typeof t=="function"||typeof t=="object")},Ja=Gs(),bg=yr,ok=jf,_x=BD,BK=po,FK=function(t){if(!BK(t))throw new bg("ToPropertyDescriptor requires an object");var r={};if(Ja(t,"enumerable")&&(r["[[Enumerable]]"]=_x(t.enumerable)),Ja(t,"configurable")&&(r["[[Configurable]]"]=_x(t.configurable)),Ja(t,"value")&&(r["[[Value]]"]=t.value),Ja(t,"writable")&&(r["[[Writable]]"]=_x(t.writable)),Ja(t,"get")){var o=t.get;if(typeof o<"u"&&!ok(o))throw new bg("getter must be a function");r["[[Get]]"]=o}if(Ja(t,"set")){var s=t.set;if(typeof s<"u"&&!ok(s))throw new bg("setter must be a function");r["[[Set]]"]=s}if((Ja(r,"[[Get]]")||Ja(r,"[[Set]]"))&&(Ja(r,"[[Value]]")||Ja(r,"[[Writable]]")))throw new bg("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return r},FS=Number.isNaN||function(t){return t!==t},ak=FS,NS=function(t,r){return t===r?t===0?1/t===1/r:!0:ak(t)&&ak(r)},FD=Yi,ND=OS,NK=ND([FD("%String.prototype.indexOf%")]),Ao=function(t,r){var o=FD(t,!!r);return typeof o=="function"&&NK(t,".prototype.")>-1?ND([o]):o},xx,sk;function jS(){if(sk)return xx;sk=1;var e=Yi,t=e("%Array%"),r=!t.isArray&&Ao("Object.prototype.toString");return xx=t.isArray||function(s){return r(s)==="[object Array]"},xx}var jK=DS,lk=Of,jD=jK.hasArrayLengthDefineBug(),VK=jD&&jS(),UK=Ao,HK=UK("Object.prototype.propertyIsEnumerable"),WK=function(t,r,o,s,d,p){if(!lk){if(!t(p)||!p["[[Configurable]]"]||!p["[[Writable]]"]||d in s&&HK(s,d)!==!!p["[[Enumerable]]"])return!1;var c=p["[[Value]]"];return s[d]=c,r(s[d],c)}return jD&&d==="length"&&"[[Value]]"in p&&VK(s)&&s.length!==p["[[Value]]"]?(s.length=p["[[Value]]"],s.length===p["[[Value]]"]):(lk(s,d,o(p)),!0)},GK=jc,qK=function(t,r){return GK(r)&&"[[Enumerable]]"in r&&"[[Configurable]]"in r&&(t.IsAccessorDescriptor(r)||t.IsDataDescriptor(r))},ZK=function(t){if(typeof t>"u")return t;var r={};return"[[Value]]"in t&&(r.value=t["[[Value]]"]),"[[Writable]]"in t&&(r.writable=!!t["[[Writable]]"]),"[[Get]]"in t&&(r.get=t["[[Get]]"]),"[[Set]]"in t&&(r.set=t["[[Set]]"]),"[[Enumerable]]"in t&&(r.enumerable=!!t["[[Enumerable]]"]),"[[Configurable]]"in t&&(r.configurable=!!t["[[Configurable]]"]),r},KK=yr,XK=jc,JK=ZK,YK=function(t){if(typeof t<"u"&&!XK(t))throw new KK("Assertion failed: `Desc` must be a Property Descriptor");return JK(t)},QK=yr,ck=Gs(),eX=jc,VD=function(t){if(typeof t>"u")return!1;if(!eX(t))throw new QK("Assertion failed: `Desc` must be a Property Descriptor");return!(!ck(t,"[[Value]]")&&!ck(t,"[[Writable]]"))},tX=yr,rX=BS,nX=VD,iX=jc,oX=function(t){if(typeof t>"u")return!1;if(!iX(t))throw new tX("Assertion failed: `Desc` must be a Property Descriptor");return!rX(t)&&!nX(t)},aX=po,sX=function(t){if(t===null)return"Null";if(typeof t>"u")return"Undefined";if(aX(t))return"Object";if(typeof t=="number")return"Number";if(typeof t=="boolean")return"Boolean";if(typeof t=="string")return"String"},lX=sX,cX=function(t){return typeof t=="symbol"?"Symbol":typeof t=="bigint"?"BigInt":lX(t)},Ou=yr,gp=WK,uX=qK,uk=jc,yp=YK,pc=BS,dl=VD,dX=oX,hX=Nc,Ya=NS,pX=cX,fX=po,mX=function(t,r,o,s,d){var p=pX(t);if(typeof t<"u"&&!fX(t))throw new Ou("Assertion failed: O must be undefined or an Object");if(!hX(r))throw new Ou("Assertion failed: P must be a Property Key");if(typeof o!="boolean")throw new Ou("Assertion failed: extensible must be a Boolean");if(!uk(s))throw new Ou("Assertion failed: Desc must be a Property Descriptor");if(typeof d<"u"&&!uk(d))throw new Ou("Assertion failed: current must be a Property Descriptor, or undefined");if(typeof d>"u")return o?p==="Undefined"?!0:pc(s)?gp(dl,Ya,yp,t,r,s):gp(dl,Ya,yp,t,r,{"[[Configurable]]":!!s["[[Configurable]]"],"[[Enumerable]]":!!s["[[Enumerable]]"],"[[Value]]":s["[[Value]]"],"[[Writable]]":!!s["[[Writable]]"]}):!1;if(!uX({IsAccessorDescriptor:pc,IsDataDescriptor:dl},d))throw new Ou("`current`, when present, must be a fully populated and valid Property Descriptor");if(!d["[[Configurable]]"]){if("[[Configurable]]"in s&&s["[[Configurable]]"]||"[[Enumerable]]"in s&&!Ya(s["[[Enumerable]]"],d["[[Enumerable]]"])||!dX(s)&&!Ya(pc(s),pc(d)))return!1;if(pc(d)){if("[[Get]]"in s&&!Ya(s["[[Get]]"],d["[[Get]]"])||"[[Set]]"in s&&!Ya(s["[[Set]]"],d["[[Set]]"]))return!1}else if(!d["[[Writable]]"]&&("[[Writable]]"in s&&s["[[Writable]]"]||"[[Value]]"in s&&!Ya(s["[[Value]]"],d["[[Value]]"])))return!1}if(p!=="Undefined"){var c,x;return dl(d)&&pc(s)?(c=("[[Configurable]]"in s?s:d)["[[Configurable]]"],x=("[[Enumerable]]"in s?s:d)["[[Enumerable]]"],gp(dl,Ya,yp,t,r,{"[[Configurable]]":!!c,"[[Enumerable]]":!!x,"[[Get]]":("[[Get]]"in s?s:d)["[[Get]]"],"[[Set]]":("[[Set]]"in s?s:d)["[[Set]]"]})):pc(d)&&dl(s)?(c=("[[Configurable]]"in s?s:d)["[[Configurable]]"],x=("[[Enumerable]]"in s?s:d)["[[Enumerable]]"],gp(dl,Ya,yp,t,r,{"[[Configurable]]":!!c,"[[Enumerable]]":!!x,"[[Value]]":("[[Value]]"in s?s:d)["[[Value]]"],"[[Writable]]":!!("[[Writable]]"in s?s:d)["[[Writable]]"]})):gp(dl,Ya,yp,t,r,s)}return!0},dk=Hd,hk=Vl,bx=yr,gX=jc,yX=BS,vX=PK,_X=Nc,xX=FK,bX=NS,wX=mX,SX=po,CX=function(t,r,o){if(!SX(t))throw new bx("Assertion failed: O must be an Object");if(!_X(r))throw new bx("Assertion failed: P must be a Property Key");if(!gX(o))throw new bx("Assertion failed: Desc must be a Property Descriptor");if(!dk){if(yX(o))throw new hk("This environment does not support accessor property descriptors.");var s=!(r in t)&&o["[[Writable]]"]&&o["[[Enumerable]]"]&&o["[[Configurable]]"]&&"[[Value]]"in o,d=r in t&&(!("[[Configurable]]"in o)||o["[[Configurable]]"])&&(!("[[Enumerable]]"in o)||o["[[Enumerable]]"])&&(!("[[Writable]]"in o)||o["[[Writable]]"])&&"[[Value]]"in o;if(s||d)return t[r]=o["[[Value]]"],bX(t[r],o["[[Value]]"]);throw new hk("This environment does not support defining non-writable, non-enumerable, or non-configurable properties")}var p=dk(t,r),c=p&&xX(p),x=vX(t);return wX(t,r,x,o,c)},pk=yr,IX=Nc,TX=CX,PX=po,kX=function(t,r,o){if(!PX(t))throw new pk("Assertion failed: Type(O) is not Object");if(!IX(r))throw new pk("Assertion failed: IsPropertyKey(P) is not true");var s={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":o,"[[Writable]]":!0};return TX(t,r,s)},wx=yr,EX=kX,AX=Nc,zX=po,RX=function(t,r,o){if(!zX(t))throw new wx("Assertion failed: Type(O) is not Object");if(!AX(r))throw new wx("Assertion failed: IsPropertyKey(P) is not true");var s=EX(t,r,o);if(!s)throw new wx("unable to create data property")},Sx,fk;function VS(){return fk||(fk=1,Sx=jS()),Sx}var US=function(t,r){for(var o=0;o<t.length;o+=1)r(t[o],o,t)};const MX={},DX=Object.freeze(Object.defineProperty({__proto__:null,default:MX},Symbol.toStringTag,{value:"Module"})),LX=cs(DX);var Cx,mk;function Ul(){if(mk)return Cx;mk=1;var e=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=e&&t&&typeof t.get=="function"?t.get:null,o=e&&Map.prototype.forEach,s=typeof Set=="function"&&Set.prototype,d=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,p=s&&d&&typeof d.get=="function"?d.get:null,c=s&&Set.prototype.forEach,x=typeof WeakMap=="function"&&WeakMap.prototype,w=x?WeakMap.prototype.has:null,T=typeof WeakSet=="function"&&WeakSet.prototype,k=T?WeakSet.prototype.has:null,E=typeof WeakRef=="function"&&WeakRef.prototype,M=E?WeakRef.prototype.deref:null,N=Boolean.prototype.valueOf,j=Object.prototype.toString,q=Function.prototype.toString,B=String.prototype.match,D=String.prototype.slice,$=String.prototype.replace,ie=String.prototype.toUpperCase,J=String.prototype.toLowerCase,K=RegExp.prototype.test,se=Array.prototype.concat,ae=Array.prototype.join,we=Array.prototype.slice,xe=Math.floor,ke=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ee=Object.getOwnPropertySymbols,$e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Je=typeof Symbol=="function"&&typeof Symbol.iterator=="object",je=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Je||!0)?Symbol.toStringTag:null,Se=Object.prototype.propertyIsEnumerable,Le=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(Ce){return Ce.__proto__}:null);function Be(Ce,He){if(Ce===1/0||Ce===-1/0||Ce!==Ce||Ce&&Ce>-1e3&&Ce<1e3||K.call(/e/,He))return He;var Ze=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof Ce=="number"){var wt=Ce<0?-xe(-Ce):xe(Ce);if(wt!==Ce){var gt=String(wt),kt=D.call(He,gt.length+1);return $.call(gt,Ze,"$&_")+"."+$.call($.call(kt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $.call(He,Ze,"$&_")}var Ve=LX,Qe=Ve.custom,st=vr(Qe)?Qe:null,ct={__proto__:null,double:'"',single:"'"},Mt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Cx=function Ce(He,Ze,wt,gt){var kt=Ze||{};if(Pt(kt,"quoteStyle")&&!Pt(ct,kt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Pt(kt,"maxStringLength")&&(typeof kt.maxStringLength=="number"?kt.maxStringLength<0&&kt.maxStringLength!==1/0:kt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ur=Pt(kt,"customInspect")?kt.customInspect:!0;if(typeof ur!="boolean"&&ur!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Pt(kt,"indent")&&kt.indent!==null&&kt.indent!=="	"&&!(parseInt(kt.indent,10)===kt.indent&&kt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Pt(kt,"numericSeparator")&&typeof kt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Lt=kt.numericSeparator;if(typeof He>"u")return"undefined";if(He===null)return"null";if(typeof He=="boolean")return He?"true":"false";if(typeof He=="string")return Br(He,kt);if(typeof He=="number"){if(He===0)return 1/0/He>0?"0":"-0";var dr=String(He);return Lt?Be(He,dr):dr}if(typeof He=="bigint"){var pe=String(He)+"n";return Lt?Be(He,pe):pe}var H=typeof kt.depth>"u"?5:kt.depth;if(typeof wt>"u"&&(wt=0),wt>=H&&H>0&&typeof He=="object")return tr(He)?"[Array]":"[Object]";var W=Oe(kt,wt);if(typeof gt>"u")gt=[];else if(_r(gt,He)>=0)return"[Circular]";function ne(ot,lt,Yt){if(lt&&(gt=we.call(gt),gt.push(lt)),Yt){var ir={depth:kt.depth};return Pt(kt,"quoteStyle")&&(ir.quoteStyle=kt.quoteStyle),Ce(ot,ir,wt+1,gt)}return Ce(ot,kt,wt+1,gt)}if(typeof He=="function"&&!Ke(He)){var fe=Ft(He),ge=_t(He,ne);return"[Function"+(fe?": "+fe:" (anonymous)")+"]"+(ge.length>0?" { "+ae.call(ge,", ")+" }":"")}if(vr(He)){var X=Je?$.call(String(He),/^(Symbol\(.*\))_[^)]*$/,"$1"):$e.call(He);return typeof He=="object"&&!Je?nr(X):X}if(Ar(He)){for(var Y="<"+J.call(String(He.nodeName)),Q=He.attributes||[],le=0;le<Q.length;le++)Y+=" "+Q[le].name+"="+vt(Dt(Q[le].value),"double",kt);return Y+=">",He.childNodes&&He.childNodes.length&&(Y+="..."),Y+="</"+J.call(String(He.nodeName))+">",Y}if(tr(He)){if(He.length===0)return"[]";var Pe=_t(He,ne);return W&&!Wr(Pe)?"["+St(Pe,W)+"]":"[ "+ae.call(Pe,", ")+" ]"}if(ft(He)){var Me=_t(He,ne);return!("cause"in Error.prototype)&&"cause"in He&&!Se.call(He,"cause")?"{ ["+String(He)+"] "+ae.call(se.call("[cause]: "+ne(He.cause),Me),", ")+" }":Me.length===0?"["+String(He)+"]":"{ ["+String(He)+"] "+ae.call(Me,", ")+" }"}if(typeof He=="object"&&ur){if(st&&typeof He[st]=="function"&&Ve)return Ve(He,{depth:H-wt});if(ur!=="symbol"&&typeof He.inspect=="function")return He.inspect()}if(Ue(He)){var Fe=[];return o&&o.call(He,function(ot,lt){Fe.push(ne(lt,He,!0)+" => "+ne(ot,He))}),lr("Map",r.call(He),Fe,W)}if(Vt(He)){var Ye=[];return c&&c.call(He,function(ot){Ye.push(ne(ot,He))}),lr("Set",p.call(He),Ye,W)}if(xr(He))return Kt("WeakMap");if(Jt(He))return Kt("WeakSet");if(Er(He))return Kt("WeakRef");if(jt(He))return nr(ne(Number(He)));if(Cr(He))return nr(ne(ke.call(He)));if(Gt(He))return nr(N.call(He));if(Ct(He))return nr(ne(String(He)));if(typeof window<"u"&&He===window)return"{ [object Window] }";if(typeof globalThis<"u"&&He===globalThis||typeof s1<"u"&&He===s1)return"{ [object globalThis] }";if(!ht(He)&&!Ke(He)){var rt=_t(He,ne),Xe=Le?Le(He)===Object.prototype:He instanceof Object||He.constructor===Object,et=He instanceof Object?"":"null prototype",Ie=!Xe&&je&&Object(He)===He&&je in He?D.call(sr(He),8,-1):et?"Object":"",Ae=Xe||typeof He.constructor!="function"?"":He.constructor.name?He.constructor.name+" ":"",it=Ae+(Ie||et?"["+ae.call(se.call([],Ie||[],et||[]),": ")+"] ":"");return rt.length===0?it+"{}":W?it+"{"+St(rt,W)+"}":it+"{ "+ae.call(rt,", ")+" }"}return String(He)};function vt(Ce,He,Ze){var wt=Ze.quoteStyle||He,gt=ct[wt];return gt+Ce+gt}function Dt(Ce){return $.call(String(Ce),/"/g,"&quot;")}function tr(Ce){return sr(Ce)==="[object Array]"&&(!je||!(typeof Ce=="object"&&je in Ce))}function ht(Ce){return sr(Ce)==="[object Date]"&&(!je||!(typeof Ce=="object"&&je in Ce))}function Ke(Ce){return sr(Ce)==="[object RegExp]"&&(!je||!(typeof Ce=="object"&&je in Ce))}function ft(Ce){return sr(Ce)==="[object Error]"&&(!je||!(typeof Ce=="object"&&je in Ce))}function Ct(Ce){return sr(Ce)==="[object String]"&&(!je||!(typeof Ce=="object"&&je in Ce))}function jt(Ce){return sr(Ce)==="[object Number]"&&(!je||!(typeof Ce=="object"&&je in Ce))}function Gt(Ce){return sr(Ce)==="[object Boolean]"&&(!je||!(typeof Ce=="object"&&je in Ce))}function vr(Ce){if(Je)return Ce&&typeof Ce=="object"&&Ce instanceof Symbol;if(typeof Ce=="symbol")return!0;if(!Ce||typeof Ce!="object"||!$e)return!1;try{return $e.call(Ce),!0}catch{}return!1}function Cr(Ce){if(!Ce||typeof Ce!="object"||!ke)return!1;try{return ke.call(Ce),!0}catch{}return!1}var Ut=Object.prototype.hasOwnProperty||function(Ce){return Ce in this};function Pt(Ce,He){return Ut.call(Ce,He)}function sr(Ce){return j.call(Ce)}function Ft(Ce){if(Ce.name)return Ce.name;var He=B.call(q.call(Ce),/^function\s*([\w$]+)/);return He?He[1]:null}function _r(Ce,He){if(Ce.indexOf)return Ce.indexOf(He);for(var Ze=0,wt=Ce.length;Ze<wt;Ze++)if(Ce[Ze]===He)return Ze;return-1}function Ue(Ce){if(!r||!Ce||typeof Ce!="object")return!1;try{r.call(Ce);try{p.call(Ce)}catch{return!0}return Ce instanceof Map}catch{}return!1}function xr(Ce){if(!w||!Ce||typeof Ce!="object")return!1;try{w.call(Ce,w);try{k.call(Ce,k)}catch{return!0}return Ce instanceof WeakMap}catch{}return!1}function Er(Ce){if(!M||!Ce||typeof Ce!="object")return!1;try{return M.call(Ce),!0}catch{}return!1}function Vt(Ce){if(!p||!Ce||typeof Ce!="object")return!1;try{p.call(Ce);try{r.call(Ce)}catch{return!0}return Ce instanceof Set}catch{}return!1}function Jt(Ce){if(!k||!Ce||typeof Ce!="object")return!1;try{k.call(Ce,k);try{w.call(Ce,w)}catch{return!0}return Ce instanceof WeakSet}catch{}return!1}function Ar(Ce){return!Ce||typeof Ce!="object"?!1:typeof HTMLElement<"u"&&Ce instanceof HTMLElement?!0:typeof Ce.nodeName=="string"&&typeof Ce.getAttribute=="function"}function Br(Ce,He){if(Ce.length>He.maxStringLength){var Ze=Ce.length-He.maxStringLength,wt="... "+Ze+" more character"+(Ze>1?"s":"");return Br(D.call(Ce,0,He.maxStringLength),He)+wt}var gt=Mt[He.quoteStyle||"single"];gt.lastIndex=0;var kt=$.call($.call(Ce,gt,"\\$1"),/[\x00-\x1f]/g,cr);return vt(kt,"single",He)}function cr(Ce){var He=Ce.charCodeAt(0),Ze={8:"b",9:"t",10:"n",12:"f",13:"r"}[He];return Ze?"\\"+Ze:"\\x"+(He<16?"0":"")+ie.call(He.toString(16))}function nr(Ce){return"Object("+Ce+")"}function Kt(Ce){return Ce+" { ? }"}function lr(Ce,He,Ze,wt){var gt=wt?St(Ze,wt):ae.call(Ze,", ");return Ce+" ("+He+") {"+gt+"}"}function Wr(Ce){for(var He=0;He<Ce.length;He++)if(_r(Ce[He],`
`)>=0)return!1;return!0}function Oe(Ce,He){var Ze;if(Ce.indent==="	")Ze="	";else if(typeof Ce.indent=="number"&&Ce.indent>0)Ze=ae.call(Array(Ce.indent+1)," ");else return null;return{base:Ze,prev:ae.call(Array(He+1),Ze)}}function St(Ce,He){if(Ce.length===0)return"";var Ze=`
`+He.prev+He.base;return Ze+ae.call(Ce,","+Ze)+`
`+He.prev}function _t(Ce,He){var Ze=tr(Ce),wt=[];if(Ze){wt.length=Ce.length;for(var gt=0;gt<Ce.length;gt++)wt[gt]=Pt(Ce,gt)?He(Ce[gt],Ce):""}var kt=typeof Ee=="function"?Ee(Ce):[],ur;if(Je){ur={};for(var Lt=0;Lt<kt.length;Lt++)ur["$"+kt[Lt]]=kt[Lt]}for(var dr in Ce)Pt(Ce,dr)&&(Ze&&String(Number(dr))===dr&&dr<Ce.length||Je&&ur["$"+dr]instanceof Symbol||(K.call(/[^\w$]/,dr)?wt.push(He(dr,Ce)+": "+He(Ce[dr],Ce)):wt.push(dr+": "+He(Ce[dr],Ce))));if(typeof Ee=="function")for(var pe=0;pe<kt.length;pe++)Se.call(Ce,kt[pe])&&wt.push("["+He(kt[pe])+"]: "+He(Ce[kt[pe]],Ce));return wt}return Cx}var Ix,gk;function $X(){if(gk)return Ix;gk=1;var e=Ul(),t=yr,r=function(c,x,w){for(var T=c,k;(k=T.next)!=null;T=k)if(k.key===x)return T.next=k.next,w||(k.next=c.next,c.next=k),k},o=function(c,x){if(c){var w=r(c,x);return w&&w.value}},s=function(c,x,w){var T=r(c,x);T?T.value=w:c.next={key:x,next:c.next,value:w}},d=function(c,x){return c?!!r(c,x):!1},p=function(c,x){if(c)return r(c,x,!0)};return Ix=function(){var x,w={assert:function(T){if(!w.has(T))throw new t("Side channel does not contain "+e(T))},delete:function(T){var k=x&&x.next,E=p(x,T);return E&&k&&k===E&&(x=void 0),!!E},get:function(T){return o(x,T)},has:function(T){return d(x,T)},set:function(T,k){x||(x={next:void 0}),s(x,T,k)}};return w},Ix}var Tx,yk;function UD(){if(yk)return Tx;yk=1;var e=Yi,t=Ao,r=Ul(),o=yr,s=e("%Map%",!0),d=t("Map.prototype.get",!0),p=t("Map.prototype.set",!0),c=t("Map.prototype.has",!0),x=t("Map.prototype.delete",!0),w=t("Map.prototype.size",!0);return Tx=!!s&&function(){var k,E={assert:function(M){if(!E.has(M))throw new o("Side channel does not contain "+r(M))},delete:function(M){if(k){var N=x(k,M);return w(k)===0&&(k=void 0),N}return!1},get:function(M){if(k)return d(k,M)},has:function(M){return k?c(k,M):!1},set:function(M,N){k||(k=new s),p(k,M,N)}};return E},Tx}var Px,vk;function OX(){if(vk)return Px;vk=1;var e=Yi,t=Ao,r=Ul(),o=UD(),s=yr,d=e("%WeakMap%",!0),p=t("WeakMap.prototype.get",!0),c=t("WeakMap.prototype.set",!0),x=t("WeakMap.prototype.has",!0),w=t("WeakMap.prototype.delete",!0);return Px=d?function(){var k,E,M={assert:function(N){if(!M.has(N))throw new s("Side channel does not contain "+r(N))},delete:function(N){if(d&&N&&(typeof N=="object"||typeof N=="function")){if(k)return w(k,N)}else if(o&&E)return E.delete(N);return!1},get:function(N){return d&&N&&(typeof N=="object"||typeof N=="function")&&k?p(k,N):E&&E.get(N)},has:function(N){return d&&N&&(typeof N=="object"||typeof N=="function")&&k?x(k,N):!!E&&E.has(N)},set:function(N,j){d&&N&&(typeof N=="object"||typeof N=="function")?(k||(k=new d),c(k,N,j)):o&&(E||(E=o()),E.set(N,j))}};return M}:o,Px}var kx,_k;function BX(){if(_k)return kx;_k=1;var e=yr,t=Ul(),r=$X(),o=UD(),s=OX(),d=s||o||r;return kx=function(){var c,x={assert:function(w){if(!x.has(w))throw new e("Side channel does not contain "+t(w))},delete:function(w){return!!c&&c.delete(w)},get:function(w){return c&&c.get(w)},has:function(w){return!!c&&c.has(w)},set:function(w,T){c||(c=d()),c.set(w,T)}};return x},kx}var Ex,xk;function HS(){if(xk)return Ex;xk=1;var e=Gs(),t=BX()(),r=yr,o={assert:function(s,d){if(!s||typeof s!="object"&&typeof s!="function")throw new r("`O` is not an object");if(typeof d!="string")throw new r("`slot` must be a string");if(t.assert(s),!o.has(s,d))throw new r("`"+d+"` is not present on `O`")},get:function(s,d){if(!s||typeof s!="object"&&typeof s!="function")throw new r("`O` is not an object");if(typeof d!="string")throw new r("`slot` must be a string");var p=t.get(s);return p&&p["$"+d]},has:function(s,d){if(!s||typeof s!="object"&&typeof s!="function")throw new r("`O` is not an object");if(typeof d!="string")throw new r("`slot` must be a string");var p=t.get(s);return!!p&&e(p,"$"+d)},set:function(s,d,p){if(!s||typeof s!="object"&&typeof s!="function")throw new r("`O` is not an object");if(typeof d!="string")throw new r("`slot` must be a string");var c=t.get(s);c||(c={},t.set(s,c)),c["$"+d]=p}};return Object.freeze&&Object.freeze(o),Ex=o,Ex}var Ax,bk;function FX(){if(bk)return Ax;bk=1;var e={__proto__:null,foo:{}},t={__proto__:e}.foo===e.foo&&!(e instanceof Object);return Ax=function(){return t},Ax}var NX=Yi,wk=NX("%Object.create%",!0),Sk=yr,jX=Vl,VX=VS(),UX=US,HX=po,WX=HS(),GX=FX()(),HD=function(t){if(t!==null&&!HX(t))throw new Sk("Assertion failed: `proto` must be null or an object");var r=arguments.length<2?[]:arguments[1];if(!VX(r))throw new Sk("Assertion failed: `additionalInternalSlotsList` must be an Array");var o;if(wk)o=wk(t);else if(GX)o={__proto__:t};else{if(t===null)throw new jX("native Object.create support is required to create null objects");var s=function(){};s.prototype=t,o=new s}return r.length>0&&UX(r,function(d){WX.set(o,d,void 0)}),o},qX=function(t){return t===0&&1/t===-1/0},WD=Number.MAX_SAFE_INTEGER||9007199254740991,zx,Ck;function ZX(){return Ck||(Ck=1,zx=function(t,r){for(var o=0;o<t.length;o+=1)if(!r(t[o],o,t))return!1;return!0}),zx}var Ik=yr,KX=Ao,Tk=KX("Array.prototype.push"),XX=NS,GD=jS(),JX=ZX(),YX=US,Pk=Gs(),QX=function(e){return Pk(e,"[[Key]]")&&Pk(e,"[[Elements]]")&&GD(e["[[Elements]]"])},eJ=function(t,r,o){if(!GD(t)||t.length>0&&!JX(t,QX))throw new Ik("Assertion failed: `groups` must be a List of Records with [[Key]] and [[Elements]]");var s=0;if(YX(t,function(p){if(XX(p["[[Key]]"],r)){if(s+=1,s>1)throw new Ik("Assertion failed: Exactly one element of groups meets this criterion");Tk(p["[[Elements]]"],o)}}),s===0){var d={"[[Key]]":r,"[[Elements]]":[o]};Tk(t,d)}},tJ=Yi,rJ=Ao,nJ=yr,iJ=VS(),oJ=tJ("%Reflect.apply%",!0)||rJ("Function.prototype.apply"),Vf=function(t,r){var o=arguments.length>2?arguments[2]:[];if(!iJ(o))throw new nJ("Assertion failed: optional `argumentsList`, if provided, must be a List");return oJ(t,r,o)},Rx,kk;function qD(){return kk||(kk=1,Rx=function(t){return typeof t=="number"&&t>=55296&&t<=56319}),Rx}var Mx,Ek;function ZD(){return Ek||(Ek=1,Mx=function(t){return typeof t=="number"&&t>=56320&&t<=57343}),Mx}var Dx,Ak;function aJ(){if(Ak)return Dx;Ak=1;var e=Yi,t=yr,r=e("%String.fromCharCode%"),o=qD(),s=ZD();return Dx=function(p,c){if(!o(p)||!s(c))throw new t("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code");return r(p)+r(c)},Dx}var Lx,zk;function sJ(){if(zk)return Lx;zk=1;var e=yr,t=Ao,r=qD(),o=ZD(),s=aJ(),d=t("String.prototype.charAt"),p=t("String.prototype.charCodeAt");return Lx=function(x,w){if(typeof x!="string")throw new e("Assertion failed: `string` must be a String");var T=x.length;if(w<0||w>=T)throw new e("Assertion failed: `position` must be >= 0, and < the length of `string`");var k=p(x,w),E=d(x,w),M=r(k),N=o(k);if(!M&&!N)return{"[[CodePoint]]":E,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if(N||w+1===T)return{"[[CodePoint]]":E,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var j=p(x,w+1);return o(j)?{"[[CodePoint]]":s(k,j),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":E,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0}},Lx}var $x,Rk;function lJ(){if(Rk)return $x;Rk=1;var e=FS;return $x=function(r){return(typeof r=="number"||typeof r=="bigint")&&!e(r)&&r!==1/0&&r!==-1/0},$x}var Ox,Mk;function cJ(){if(Mk)return Ox;Mk=1;var e=PD,t=kD,r=FS,o=lJ();return Ox=function(d){if(typeof d!="number"||r(d)||!o(d))return!1;var p=e(d);return t(p)===p},Ox}var Bx,Dk;function uJ(){if(Dk)return Bx;Dk=1;var e=sJ(),t=yr,r=cJ(),o=WD;return Bx=function(d,p,c){if(typeof d!="string")throw new t("Assertion failed: `S` must be a String");if(!r(p)||p<0||p>o)throw new t("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if(typeof c!="boolean")throw new t("Assertion failed: `unicode` must be a Boolean");if(!c)return p+1;var x=d.length;if(p+1>=x)return p+1;var w=e(d,p);return p+w["[[CodeUnitCount]]"]},Bx}var Fx,Lk;function KD(){if(Lk)return Fx;Lk=1;var e=yr;return Fx=function(r,o){if(typeof o!="boolean")throw new e("Assertion failed: Type(done) is not Boolean");return{value:r,done:o}},Fx}var $k=yr,dJ=Ul(),hJ=Nc,pJ=po,u0=function(t,r){if(!pJ(t))throw new $k("Assertion failed: Type(O) is not Object");if(!hJ(r))throw new $k("Assertion failed: IsPropertyKey(P) is not true, got "+dJ(r));return t[r]},fJ=yr,mJ=u0,gJ=BD,yJ=po,XD=function(t){if(!yJ(t))throw new fJ("Assertion failed: Type(iterResult) is not Object");return gJ(mJ(t,"done"))},vJ=yr,_J=u0,xJ=po,JD=function(t){if(!xJ(t))throw new vJ("Assertion failed: Type(iterResult) is not Object");return _J(t,"value")},Nx,Ok;function bJ(){if(Ok)return Nx;Ok=1;var e=Yi,t=DD,r=Vl,o=e("%Promise.resolve%",!0),s=o&&t(o);return Nx=function(p,c){if(!s)throw new r("This environment does not support Promises.");return s(p,c)},Nx}var jx,Bk;function wJ(){if(Bk)return jx;Bk=1;var e=Yi,t=Vl,r=yr,o=e("%Promise%",!0),s=Ao,d=KD(),p=XD,c=JD,x=bJ(),w=po,T=s("Promise.prototype.then",!0);return jx=function(E){if(!w(E))throw new r("Assertion failed: Type(O) is not Object");if(arguments.length>1)throw new t("although AsyncFromSyncIteratorContinuation should take a second argument, it is not used in this implementation");if(!o)throw new t("This environment does not support Promises.");return new o(function(M){var N=p(E),j=c(E),q=x(o,j),B=function(D){return d(D,N)};M(T(q,B))})},jx}var SJ=yr,CJ=Ul(),IJ=Nc,TJ=function(t,r){if(!IJ(r))throw new SJ("Assertion failed: IsPropertyKey(P) is not true, got "+CJ(r));return t[r]},Fk=yr,PJ=TJ,kJ=jf,EJ=Nc,Nk=Ul(),WS=function(t,r){if(!EJ(r))throw new Fk("Assertion failed: IsPropertyKey(P) is not true");var o=PJ(t,r);if(o!=null){if(!kJ(o))throw new Fk(Nk(r)+" is not a function: "+Nk(o));return o}},Vx=Gs(),d0=function(t){return!!t&&typeof t=="object"&&Vx(t,"[[Iterator]]")&&Vx(t,"[[NextMethod]]")&&Vx(t,"[[Done]]")&&typeof t["[[Done]]"]=="boolean"},jk=yr,Vk=Vf,AJ=po,zJ=d0,YD=function(t){if(!zJ(t))throw new jk("Assertion failed: `iteratorRecord` must be an Iterator Record");var r;if(arguments.length<2?r=Vk(t["[[NextMethod]]"],t["[[Iterator]]"]):r=Vk(t["[[NextMethod]]"],t["[[Iterator]]"],[arguments[1]]),!AJ(r))throw new jk("iterator next must return an object");return r},Ux,Uk;function RJ(){if(Uk)return Ux;Uk=1;var e=Yi,t=Vl,r=yr,o=e("%Promise%",!0),s=wJ(),d=Vf,p=KD(),c=u0,x=WS,w=YD,T=HD,k=po,E=d0,M=HS(),N=e("%AsyncFromSyncIteratorPrototype%",!0)||{next:function(q){if(!o)throw new t("This environment does not support Promises.");var B=this;M.assert(B,"[[SyncIteratorRecord]]");var D=arguments.length;return new o(function($){var ie=M.get(B,"[[SyncIteratorRecord]]"),J;D>0?J=w(ie,q):J=w(ie),$(s(J))})},return:function(){if(!o)throw new t("This environment does not support Promises.");var j=this;M.assert(j,"[[SyncIteratorRecord]]");var q=arguments.length>0,B=q?arguments[0]:void 0;return new o(function(D,$){var ie=M.get(j,"[[SyncIteratorRecord]]")["[[Iterator]]"],J=x(ie,"return");if(typeof J>"u"){var K=p(B,!0);d(D,void 0,[K]);return}var se;if(q?se=d(J,ie,[B]):se=d(J,ie),!k(se)){d($,void 0,[new r("Iterator `return` method returned a non-object value.")]);return}D(s(se))})},throw:function(){if(!o)throw new t("This environment does not support Promises.");var j=this;M.assert(j,"[[SyncIteratorRecord]]");var q=arguments.length>0,B=q?arguments[0]:void 0;return new o(function(D,$){var ie=M.get(j,"[[SyncIteratorRecord]]")["[[Iterator]]"],J=x(ie,"throw");if(typeof J>"u"){d($,void 0,[B]);return}var K;if(q?K=d(J,ie,[B]):K=d(J,ie),!k(K)){d($,void 0,[new r("Iterator `throw` method returned a non-object value.")]);return}D(s(K))})}};return Ux=function(q){if(!E(q))throw new r("Assertion failed: `syncIteratorRecord` must be an Iterator Record");var B=T(N);M.set(B,"[[SyncIteratorRecord]]",q);var D=c(B,"next");return{"[[Iterator]]":B,"[[NextMethod]]":D,"[[Done]]":!1}},Ux}var Hx,Hk;function MJ(){if(Hk)return Hx;Hk=1;var e=yr,t=Vf,r=u0,o=jf,s=po;return Hx=function(p,c){if(!o(c))throw new e("method must be a function");var x=t(c,p);if(!s(x))throw new e("iterator must return an object");var w=r(x,"next");return{"[[Iterator]]":x,"[[NextMethod]]":w,"[[Done]]":!1}},Hx}var Wx,Wk;function GS(){if(Wk)return Wx;Wk=1;var e=ED();return Wx=function(){return e()&&!!Symbol.toStringTag},Wx}var Gx,Gk;function DJ(){if(Gk)return Gx;Gk=1;var e=Ao,t=e("String.prototype.valueOf"),r=function(c){try{return t(c),!0}catch{return!1}},o=e("Object.prototype.toString"),s="[object String]",d=GS()();return Gx=function(c){return typeof c=="string"?!0:!c||typeof c!="object"?!1:d?r(c):o(c)===s},Gx}var qx,qk;function LJ(){if(qk)return qx;qk=1;var e=c0()(),t=Yi,r=Ao,o=DJ(),s=t("%Symbol.iterator%",!0),d=r("String.prototype.slice"),p=t("%String%");return qx=function(x,w){var T;return e?T=x.GetMethod(w,s):x.IsArray(w)?T=function(){var k=-1,E=this;return{next:function(){return k+=1,{done:k>=E.length,value:E[k]}}}}:o(w)&&(T=function(){var k=0;return{next:function(){var E=x.AdvanceStringIndex(p(w),k,!0),M=d(w,k,E);return k=E,{done:E>w.length,value:M}}}}),T},qx}var $J=Yi,Zx=yr,Zk=$J("%Symbol.asyncIterator%",!0),OJ=Ul(),BJ=c0()(),FJ=uJ(),NJ=RJ(),Kk=MJ(),QD=WS,jJ=VS(),VJ={AdvanceStringIndex:FJ,GetMethod:QD,IsArray:jJ},UJ=LJ(),HJ=function(t,r){if(r!=="SYNC"&&r!=="ASYNC")throw new Zx("Assertion failed: `kind` must be one of 'sync' or 'async', got "+OJ(r));var o;if(r==="ASYNC"&&BJ&&Zk&&(o=QD(t,Zk)),typeof o>"u"){var s=UJ(VJ,t);if(r==="ASYNC"){if(typeof s>"u")throw new Zx("iterator method is `undefined`");var d=Kk(t,s);return NJ(d)}o=s}if(typeof o>"u")throw new Zx("iterator method is `undefined`");return Kk(t,o)},eL=Vl,Dl=HS(),Uf=function e(t,r){if(!(this instanceof e))return new e(t,r);if(t!=="normal"&&t!=="break"&&t!=="continue"&&t!=="return"&&t!=="throw")throw new eL('Assertion failed: `type` must be one of "normal", "break", "continue", "return", or "throw"');Dl.set(this,"[[Type]]",t),Dl.set(this,"[[Value]]",r)};Uf.prototype.type=function(){return Dl.get(this,"[[Type]]")};Uf.prototype.value=function(){return Dl.get(this,"[[Value]]")};Uf.prototype["?"]=function(){var t=Dl.get(this,"[[Type]]"),r=Dl.get(this,"[[Value]]");if(t==="throw")throw r;return r};Uf.prototype["!"]=function(){var t=Dl.get(this,"[[Type]]");if(t!=="normal")throw new eL('Assertion failed: Completion Record is not of type "normal"');return Dl.get(this,"[[Value]]")};var tL=Uf,wg=yr,WJ=Vf,Xk=tL,GJ=WS,qJ=jf,Jk=po,ZJ=d0,KJ=function(t,r){if(!ZJ(t))throw new wg("Assertion failed: `iteratorRecord` must be an Iterator Record");if(!Jk(t["[[Iterator]]"]))throw new wg("Assertion failed: iteratorRecord.[[Iterator]] must be an Object");if(!qJ(r)&&!(r instanceof Xk))throw new wg("Assertion failed: completion is not a thunk representing a Completion Record, nor a Completion Record instance");var o=r instanceof Xk?function(){return r["?"]()}:r,s=t["[[Iterator]]"],d;try{d=GJ(s,"return")}catch(x){throw o(),o=null,x}if(typeof d>"u")return o();var p;try{p=WJ(d,s,[])}catch(x){throw o(),o=null,x}var c=o();if(o=null,!Jk(p))throw new wg("iterator .return must return an object");return c},XJ=yr,JJ=XD,YJ=YD,QJ=d0,eY=function(t){if(!QJ(t))throw new XJ("Assertion failed: `iteratorRecord` must be an Iterator Record");var r=YJ(t),o=JJ(r);return o===!0?!1:r},tY=yr,rY=function(t){if(t==null)throw new tY(arguments.length>0&&arguments[1]||"Cannot call method on "+t);return t},nY=rY,iY=tL,oY=function(t){return new iY("throw",t)},Kx,Yk;function aY(){return Yk||(Yk=1,Kx=function(t){return t===null||typeof t!="function"&&typeof t!="object"}),Kx}var Xx,Qk;function sY(){if(Qk)return Xx;Qk=1;var e=Ao,t=e("Date.prototype.getDay"),r=function(c){try{return t(c),!0}catch{return!1}},o=e("Object.prototype.toString"),s="[object Date]",d=GS()();return Xx=function(c){return typeof c!="object"||c===null?!1:d?r(c):o(c)===s},Xx}var Sg={exports:{}},Jx,eE;function lY(){if(eE)return Jx;eE=1;var e=Ao,t=GS()(),r=Gs(),o=Hd,s;if(t){var d=e("RegExp.prototype.exec"),p={},c=function(){throw p},x={toString:c,valueOf:c};typeof Symbol.toPrimitive=="symbol"&&(x[Symbol.toPrimitive]=c),s=function(E){if(!E||typeof E!="object")return!1;var M=o(E,"lastIndex"),N=M&&r(M,"value");if(!N)return!1;try{d(E,x)}catch(j){return j===p}}}else{var w=e("Object.prototype.toString"),T="[object RegExp]";s=function(E){return!E||typeof E!="object"&&typeof E!="function"?!1:w(E)===T}}return Jx=s,Jx}var Yx,tE;function cY(){if(tE)return Yx;tE=1;var e=Ao,t=lY(),r=e("RegExp.prototype.exec"),o=yr;return Yx=function(d){if(!t(d))throw new o("`regex` must be a RegExp");return function(c){return r(d,c)!==null}},Yx}var rE;function uY(){if(rE)return Sg.exports;rE=1;var e=Ao,t=e("Object.prototype.toString"),r=c0()(),o=cY();if(r){var s=e("Symbol.prototype.toString"),d=o(/^Symbol\(.*\)$/),p=function(x){return typeof x.valueOf()!="symbol"?!1:d(s(x))};Sg.exports=function(x){if(typeof x=="symbol")return!0;if(!x||typeof x!="object"||t(x)!=="[object Symbol]")return!1;try{return p(x)}catch{return!1}}}else Sg.exports=function(x){return!1};return Sg.exports}var Qx,nE;function dY(){if(nE)return Qx;nE=1;var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",t=aY(),r=OD,o=sY(),s=uY(),d=function(x,w){if(typeof x>"u"||x===null)throw new TypeError("Cannot call method on "+x);if(typeof w!="string"||w!=="number"&&w!=="string")throw new TypeError('hint must be "string" or "number"');var T=w==="string"?["toString","valueOf"]:["valueOf","toString"],k,E,M;for(M=0;M<T.length;++M)if(k=x[T[M]],r(k)&&(E=k.call(x),t(E)))return E;throw new TypeError("No default value")},p=function(x,w){var T=x[w];if(T!==null&&typeof T<"u"){if(!r(T))throw new TypeError(T+" returned for property "+String(w)+" of object "+x+" is not a function");return T}};return Qx=function(x){if(t(x))return x;var w="default";arguments.length>1&&(arguments[1]===String?w="string":arguments[1]===Number&&(w="number"));var T;if(e&&(Symbol.toPrimitive?T=p(x,Symbol.toPrimitive):s(x)&&(T=Symbol.prototype.valueOf)),typeof T<"u"){var k=T.call(x,w);if(t(k))return k;throw new TypeError("unable to convert exotic object to primitive")}return w==="default"&&(o(x)||s(x))&&(w="string"),d(x,w==="default"?"number":w)},Qx}var e1,iE;function hY(){if(iE)return e1;iE=1;var e=dY();return e1=function(r){return arguments.length>1?e(r,arguments[1]):e(r)},e1}var t1,oE;function pY(){if(oE)return t1;oE=1;var e=Yi,t=e("%String%"),r=yr;return t1=function(s){if(typeof s=="symbol")throw new r("Cannot convert a Symbol value to a string");return t(s)},t1}var fY=Yi,mY=fY("%String%"),gY=hY(),yY=pY(),vY=function(t){var r=gY(t,mY);return typeof r=="symbol"?r:yY(r)},Cg=yr,_Y=qX,xY=WD,bY=eJ,wY=Vf,SY=HJ,CY=jf,r1=KJ,IY=eY,TY=JD,PY=nY,n1=oY,kY=vY,EY=function(t,r,o){if(o!=="PROPERTY"&&o!=="ZERO")throw new Cg('Assertion failed: `keyCoercion` must be `"PROPERTY"` or `"ZERO"`');if(PY(t),!CY(r))throw new Cg("callbackfn must be callable");for(var s=[],d=SY(t,"SYNC"),p=0;;){if(p>=xY){var c=n1(new Cg("k must be less than 2 ** 53 - 1"));r1(d,c);return}var x=IY(d);if(!x)return s;var w=TY(x),T;try{T=wY(r,void 0,[w,p])}catch(k){r1(d,n1(k));return}if(o==="PROPERTY")try{T=kY(T)}catch(k){r1(d,n1(k));return}else{if(o!=="ZERO")throw new Cg("keyCoercion must be ~PROPERTY~ or ~ZERO~");_Y(T)&&(T=0)}bY(s,T,w),p+=1}},AY=RX,zY=HD,RY=US,MY=EY,rL=function(t,r){var o=MY(t,r,"PROPERTY"),s=zY(null);return RY(o,function(d){AY(s,d["[[Key]]"],d["[[Elements]]"])}),s},DY=rL,nL=function(){return Object.groupBy||DY},i1,aE;function LY(){if(aE)return i1;aE=1;var e=ID,t=nL;return i1=function(){var o=t();return e(Object,{groupBy:o},{groupBy:function(){return Object.groupBy!==o}}),o},i1}var $Y=ID,OY=DD,BY=rL,iL=nL,FY=iL(),NY=LY(),oL=OY(FY,Object);$Y(oL,{getPolyfill:iL,implementation:BY,shim:NY});var jY=oL;const VY=Gy(jY),Ab=[{label:"ATS",value:{map:"usa",search:"cities"}},{label:"ATS",value:{map:"usa",search:"achievements"}},{label:"ETS2",value:{map:"europe",search:"cities"}},{label:"ETS2",value:{map:"europe",search:"achievements"}}],o1=(e,t)=>Pd.checkExists(Ab.find(r=>r.value.map===e&&r.value.search===t)),sE=({selected:e,onSelect:t})=>te.jsx(z9,{sx:{paddingBlock:0,minWidth:"fit-content"},variant:"plain",size:"sm",slotProps:{listbox:{placement:"bottom-start"}},value:e,onChange:(r,o)=>{r!=null&&t(Cn(Ab.find(s=>s.value===o)))},renderValue:r=>{if(r)return te.jsxs(Rf,{direction:"row",gap:1,sx:{alignItems:"center"},children:[te.jsx(Fa,{level:"body-xs",fontWeight:"lg",children:r.value.map==="usa"?"ATS":"ETS2"}),r.value.search==="cities"?te.jsx(mD,{}):te.jsx(fD,{})]})},children:Object.entries(VY(Ab,({label:r})=>r)).map(([r,o])=>te.jsxs(Ef,{children:[te.jsx(Oc,{children:te.jsx(Fa,{level:"body-xs",fontWeight:"lg",children:r})}),o==null?void 0:o.map(s=>te.jsxs(v9,{value:s.value,sx:{px:"1em",textTransform:"capitalize"},children:[te.jsx(UY,{search:s.value.search}),s.value.search]},s.value.search))]},r))}),UY=({search:e})=>{switch(e){case"cities":return te.jsx(mD,{});case"achievements":return te.jsx(fD,{});default:throw new AS(e)}},Qg={usa:{longitude:-108,latitude:39},europe:{longitude:12,latitude:51}},HY=e=>{const t=R.useRef(null);Ws(()=>({onAdd:()=>Cn(t.current),onRemove:()=>Cn(t.current).remove()}),{position:"top-left"});const{current:r}=TS(),[o,s]=R.useState(o1(localStorage.getItem("tm-map")==="europe"?"europe":"usa",localStorage.getItem("tm-search")==="achievements"?"achievements":"cities")),d=Pg.useCallback(E=>{if(E==null||(s(E),localStorage.setItem("tm-map",E.value.map),localStorage.setItem("tm-search",E.value.search),!r||E.value.map===o.value.map))return;const{longitude:M,latitude:N}=Qg[E.value.map];r.easeTo({zoom:4,center:[M,N]})},[r,o]);R.useEffect(()=>{if(!r)return;const E=()=>{const M=r.getCenter().lng,N=lE(M,Qg.usa.longitude),j=lE(M,Qg.europe.longitude);N<j&&o.value.map!=="usa"?(s(o1("usa",o.value.search)),localStorage.setItem("tm-map","usa")):j<N&&o.value.map!=="europe"&&(s(o1("europe",o.value.search)),localStorage.setItem("tm-map","europe"))};return r.on("moveend",E),()=>void r.off("moveend",E)},[r,o,s]);const p=Pg.useCallback(E=>{r==null||E==null||(r.flyTo({curve:1,zoom:9,center:E.value.map(M=>Number(M.toFixed(3)))}),r.once("moveend",M=>{const{lat:N,lng:j}=M.target.getCenter(),q=M.target.getZoom(),B=Number(M.target.getBearing().toFixed(1)),D=Math.round(M.target.getPitch());D?window.location.hash=`${q}/${N.toFixed(3)}/${j.toFixed(3)}/${B}/${D}`:B?window.location.hash=`${q}/${N.toFixed(3)}/${j.toFixed(3)}/${B}`:window.location.hash=`${q}/${N.toFixed(3)}/${j.toFixed(3)}`}))},[r]),[c,x]=R.useState([]),[w,T]=R.useState(null),k=Pg.useCallback((E,M={enableFitBounds:!0})=>{if(c.forEach(q=>q.remove()),T(E),r==null||E==null)return;const N=s0(e.visibleStateDlcs),j=E.features.filter(q=>N.has(q.dlcGuard)).map(({coordinates:q})=>new l0.Marker().setLngLat(q).addTo(r.getMap()));if(x(j),j.length&&M.enableFitBounds){const q=_D(j.map($=>$.getLngLat().toArray())),B=[q[0],q[1]],D=[q[2],q[3]];r.fitBounds([B,D],{curve:1,padding:100,maxZoom:9})}},[r,c,T,x,e.visibleStates]);return R.useEffect(()=>{k(w,{enableFitBounds:!1})},[w,e.visibleStates]),te.jsx("div",{ref:t,className:"maplibregl-ctrl",style:{width:"calc(100svw - 64px)"},children:te.jsx(Rf,{direction:"row",gap:1,children:o.value.search==="cities"?te.jsx(tZ,{selectDecorator:te.jsx(sE,{selected:o.value,onSelect:d}),map:o.value.map,onSelect:p,visibleStates:e.visibleStates}):te.jsx(eZ,{selectDecorator:te.jsx(sE,{selected:o.value,onSelect:d}),map:o.value.map,onSelect:k,visibleStates:e.visibleStates,visibleStateDlcs:e.visibleStateDlcs})})})};function lE(e,t){const r=BP(e)/2,o=BP(t)/2;return Math.abs(Math.sin(r)-Math.sin(o))}const a1=(e,t)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},WY=()=>{const e=R.useRef(null),[t,r]=R.useState(!1),[o,s]=R.useState(!1),[d,p]=R.useState(window.location.origin),c=TS();return Ws(()=>({onAdd:()=>Cn(e.current),onRemove:()=>Cn(e.current).remove()})),R.useEffect(()=>{const x=c.current;if(!x||!t)return;const w=()=>{const E=x.getCenter(),M=x.getBearing(),N=x.getPitch(),j=M||N?[M,N]:[],q=x.getZoom(),B=T?"?"+new URLSearchParams({mlat:String(a1(T.getLngLat().lat,2)),mlon:String(a1(T.getLngLat().lng,2))}).toString():"",D="#"+[q,E.lat,E.lng,...j].map($=>a1($,2)).join("/");p(window.location.origin+B+D)};let T,k;if(o){T=new l0.Marker,T.setLngLat(x.getCenter()).setDraggable(!0).addTo(x.getMap());let E=!0;k=()=>E&&T.setLngLat(x.getCenter()),T.on("dragend",()=>{E=!1,x.easeTo({center:T==null?void 0:T.getLngLat()}),x.once("moveend",()=>E=!0)})}return w(),x.on("moveend",w),k&&x.on("move",k),()=>{x.off("moveend",w),k&&x.off("move",k),T==null||T.remove()}},[c,t,o]),te.jsxs("div",{ref:e,children:[te.jsx("div",{className:"maplibregl-ctrl maplibregl-ctrl-group",children:te.jsx(e0,{sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Share",onClick:()=>r(!t),children:te.jsx(Hq,{})})}),te.jsx(cM,{open:t,anchor:"right",onClose:()=>r(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",right:t?48:0}}},children:te.jsxs(hM,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,overflow:"auto"},children:[te.jsx(iM,{children:"Share"}),te.jsx(dM,{}),te.jsx(_S,{}),te.jsxs(nM,{sx:{gap:2,overflow:"hidden",flexGrow:1,justifyContent:"center"},children:[te.jsx(Fa,{children:"Share a link to this map"}),te.jsx(YV,{readOnly:!0,sx:{"--Input-decoratorChildHeight":"36px"},onFocus:x=>x.target.select(),value:d,endDecorator:te.jsx(QR,{sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>void navigator.clipboard.writeText(d).catch(()=>alert("Could not copy to clipboard 🙁")),children:"Copy"})}),te.jsx(Cd,{label:"Include marker",checked:o,onChange:x=>s(x.target.checked)})]})]})})]})};function aL(e){return new Set([...e].map(GY).concat(Ei.CA))}function GY(e){switch(e){case Ki.Arizona:return Ei.AZ;case Ki.Arkansas:return Ei.AR;case Ki.Colorado:return Ei.CO;case Ki.Idaho:return Ei.ID;case Ki.Kansas:return Ei.KS;case Ki.Montana:return Ei.MT;case Ki.Nebraska:return Ei.NE;case Ki.Nevada:return Ei.NV;case Ki.NewMexico:return Ei.NM;case Ki.Oklahoma:return Ei.OK;case Ki.Oregon:return Ei.OR;case Ki.Texas:return Ei.TX;case Ki.Utah:return Ei.UT;case Ki.Washington:return Ei.WA;case Ki.Wyoming:return Ei.WY;default:throw new AS(e)}}const cE=(e,[t,r])=>!isNaN(e)&&t<=e&&e<=r,qY=()=>{const{mode:e,systemMode:t}=dw(),r=e==="system"?t:e,{longitude:o,latitude:s}=Qg[ZY(localStorage.getItem("tm-map"))],[d]=MH(),p=Number(d.get("mlat")??void 0),c=Number(d.get("mlon")??void 0),x=cE(p,[-90,90])&&cE(c,[-180,180])?{lat:p,lon:c}:void 0,[w,T]=R.useState(!0),[k,E]=R.useState(new Set(df)),[M,N]=R.useState(new Set(uf)),j=aL(M),q=Vy(k,E,df),B=Vy(M,N,uf),[D,$]=R.useState(!1);return te.jsxs(MM,{style:{width:"100svw",height:"100svh"},hash:!0,minZoom:4,maxZoom:15,mapStyle:iD,initialViewState:{longitude:o,latitude:s,zoom:4},children:[x&&te.jsx(wW,{longitude:x.lon,latitude:x.lat}),te.jsxs(eD,{mode:r,children:[te.jsx(xb,{game:"ats",showContours:D}),te.jsx(xb,{game:"ets2",showContours:D})]}),te.jsx(bb,{game:"ats",mode:r,enableIconAutoHide:w,visibleIcons:k,dlcs:M}),te.jsx(bb,{game:"ets2",mode:r,enableIconAutoHide:w,visibleIcons:k}),k.has(ei.CityNames)&&te.jsx(Sb,{game:"ats",mode:r,enableAutoHide:w,enabledStates:j}),k.has(ei.CityNames)&&te.jsx(Sb,{game:"ets2",mode:r,enableAutoHide:w}),te.jsx($M,{visualizePitch:!0}),te.jsx(LM,{containerId:"fsElem"}),te.jsx(WY,{}),te.jsx(vD,{}),te.jsx(DM,{compact:!0,style:{marginLeft:54},customAttribution:"© Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a> and <a href='https://forum.scssoft.com/viewtopic.php?p=1946956#p1946956'>krmarci</a>."}),te.jsx(HY,{visibleStates:j,visibleStateDlcs:M}),te.jsx(yD,{icons:{...q,enableAutoHiding:w,onAutoHidingToggle:T},advanced:{showContours:D,onContoursToggle:$},atsDlcs:B})]})};function ZY(e){return e==="europe"?e:"usa"}var KY=Object.defineProperty,XY=(e,t,r)=>t in e?KY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,JY=(e,t,r)=>(XY(e,t+"",r),r);class YY{constructor(t){JY(this,"_kind"),this._kind=t}}function QY(e,t){const r=e.toString(),o=t.toString();return r>o?1:r<o?-1:0}const eQ=QY;var tQ=Object.defineProperty,rQ=(e,t,r)=>t in e?tQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uE=(e,t,r)=>(rQ(e,typeof t!="symbol"?t+"":t,r),r);function nQ(e,t,r){const o=t*2,s=t*2+1;let d=t;return o<e.length&&r(e[d],e[o])<0&&(d=o),s<e.length&&r(e[d],e[s])<0&&(d=s),d}function qS(e,t,r){const o=nQ(e,t,r);if(o!==t){const s=e[t];e[t]=e[o],e[o]=s,qS(e,o,r)}}function dE(e){for(let t=Math.floor(e.collection.length/2)-1;t>=0;--t)qS(e.collection,t,e.comparator)}class Wy extends YY{constructor({comparator:t=eQ}={}){super("BinaryHeap"),uE(this,"comparator"),uE(this,"collection",[]),this.comparator=t}static from(t,r={}){const o=new Wy(r);return o.collection=Array.from(t),dE(o),o}clear(){this.collection.length=0}toArray(){return[...this.collection].sort(this.comparator)}get length(){return this.collection.length}top(){if(this.length===0)throw new Error("invalid operation: top() called for empty BinaryHeap");return this.collection[0]}pop(){if(this.length===0)throw new Error("invalid operation: pop() called for empty BinaryHeap");const t=this.collection[0];return this.collection.length>1?(this.collection[0]=this.collection.pop(),qS(this.collection,0,this.comparator)):this.collection.pop(),t}push(t){this.collection.push(t);const r=this.collection;for(let o=r.length-1,s=Math.floor(o/2);o>0&&this.comparator(r[s],r[o])<0;o=s,s=Math.floor(s/2)){const d=r[o];r[o]=r[s],r[s]=d}}merge(t){t instanceof Wy?this.collection=this.collection.concat(t.collection):this.collection=this.collection.concat(t.toArray()),dE(this),t.clear()}isEmpty(){return!this.collection.length}}function iQ(e,t,r,o,s){const d=`${e}-${t}-${r}-${o}`,{nodeLUT:p,graph:c}=s,x=Cn(p.get(e)),w=Cn(p.get(t)),T=new aQ({comparator:(D,$)=>{const ie=q.get(D)??1/0;return(q.get($)??1/0)-ie}}),k={nodeId:e,distance:0,direction:r,dlcGuard:-1};T.push(k);const E=new Map,M=new Map;M.set(k,0);const N=D=>Xq(D,w),j=(D,$)=>{switch(o){case"shortest":return $.distance;case"smallRoads":return $.isOneLaneRoad?$.distance:$.distance*10;default:throw new AS(o)}},q=new Map;q.set(k,N(x));let B=0;for(;!T.isEmpty();){B++;const D=T.pop();if(D.nodeId===t)return{success:!0,key:d,mode:o,...oQ(E,D)};const $=c.get(D.nodeId);if(!$)continue;const ie=D.direction==="forward"?$.forward:$.backward;for(const J of ie){if(!s.enabledDlcGuards.has(J.dlcGuard))continue;const K=(M.get(D)??1/0)+j(D,J);K<(M.get(J)??1/0)&&(E.set(J,D),M.set(J,K),q.set(J,K+N(Cn(p.get(J.nodeId)))),T.has(J)||T.push(J))}}return{success:!1,key:d,mode:o,numIters:B}}function oQ(e,t){let r=0;const o=[t];for(;e.has(t);)t=e.get(t),o.unshift(t),r+=t.distance;return o.length===1&&o.push(o[0]),{route:o,distance:r}}class aQ extends Wy{constructor(r){super(r);k2(this,"items",new Set)}has(r){return this.items.has(r)}push(r){Pd.checkState(!this.items.has(r)),super.push(r),this.items.add(r)}pop(){const r=super.pop();return Pd.checkState(this.items.has(r)),this.items.delete(r),r}clear(){super.clear(),this.items.clear()}merge(r){super.merge(r);for(const o of this.collection)this.items.add(o)}}const sQ=()=>{const{mode:e,systemMode:t}=dw(),r=e==="system"?t:e,[o,s]=R.useState(!0),[d,p]=R.useState(new Set(df)),[c,x]=R.useState(new Set(uf)),w=aL(c),T=Vy(d,p,df),k=Vy(c,x,uf),[E,M]=R.useState(!1);return te.jsxs(MM,{style:{width:"100vw",height:"100vh"},minZoom:4,maxZoom:15,maxBounds:[[-135,21],[-84,54]],mapStyle:iD,initialViewState:{longitude:-115,latitude:36,zoom:9},children:[te.jsx(eD,{mode:r,children:te.jsx(xb,{game:"ats",showContours:E})}),te.jsx(bb,{game:"ats",mode:r,enableIconAutoHide:o,visibleIcons:d,dlcs:c}),te.jsx(Sb,{game:"ats",mode:r,enableAutoHide:o,enabledStates:w}),te.jsx(jd,{id:"route1",type:"geojson",data:{type:"FeatureCollection",features:[]},children:te.jsx(Gr,{type:"line",paint:{"line-color":["match",["get","mode"],"shortest","#f00","smallRoads","#0f0","#f0f"],"line-width":3,"line-opacity":.7}})}),te.jsx($M,{visualizePitch:!0}),te.jsx(LM,{}),te.jsx(vD,{}),te.jsx(DM,{compact:!0,customAttribution:"© Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a>."}),te.jsx(lQ,{dlcs:c}),te.jsx(yD,{icons:{...T,enableAutoHiding:o,onAutoHidingToggle:s},advanced:{showContours:E,onContoursToggle:M},atsDlcs:k})]})},lQ=e=>{const{current:t}=TS(),r=s0(e.dlcs),[o,s]=R.useState(void 0),[d,p]=R.useState(void 0),[c,x]=R.useState([]),[w,T]=R.useState([]);R.useEffect(()=>{fetch("usa-graph-demo.json").then(se=>se.json()).then(se=>{x(se.demoCompanies.map(fE)),p(cQ(se)),s(se)},()=>console.error("could not load usa-graph-demo.json"))},[]);const[k,E]=R.useState(void 0),[M,N]=R.useState(void 0),j=R.useCallback(se=>{se=Cn(se),E(se.value);let ae;if(o!=null){ae=Cn(o.demoCompanies.find(ke=>ke.n===se.value));const we=Cn(o.demoCompanyDefs.find(ke=>ke.t===ae.t)),xe=new Set(we.d);T(o.demoCompanies.filter(ke=>xe.has(ke.t)).map(fE))}if(!(t==null||d==null)&&(M!=null&&(Cn(t.getSource("route1")).setData({type:"FeatureCollection",features:[]}),N(void 0)),ae)){const we=Cn(d.nodeLUT.get(ae.n));t.flyTo({curve:1,zoom:9,center:[we.x,we.y]})}},[t,M,d,o]),q=R.useCallback(se=>{se=Cn(se),N(se.value),!(t==null||d==null)&&B(Cn(k),se.value,t,{...d,enabledDlcGuards:r})},[t,k,d,e.dlcs]),B=(se,ae,we,xe)=>{Promise.all([mE(se,ae,"shortest",xe),mE(se,ae,"smallRoads",xe)]).then(ke=>{const Ee=Cn(we.getSource("route1"));if(ke.some(Je=>Je==null)){alert("Cannot calculate a route 🙁"),Ee.setData({type:"FeatureCollection",features:[]});return}const $e=ke;Ee.setData({type:"FeatureCollection",features:$e}),we.fitBounds(_D($e.flatMap(Je=>Je.geometry.coordinates)),{padding:150,curve:1,duration:2500})},ke=>{console.error("error finding route",ke)})},D=new Map;if(o)for(const[,se]of o.demoGraph)for(const ae of[...se.b??[],...se.f??[]]){const we=D.get(ae.n)??0;D.set(ae.n,we||ae.g)}const $=se=>{if(d==null)return!0;const ae=Cn(D.get(se.value));return r.has(ae)},ie=(se,ae)=>se.city!==ae.city?se.city.localeCompare(ae.city):se.label.localeCompare(ae.label),J=c.filter($).sort(ie),K=w.filter($).sort(ie);return te.jsxs("div",{style:{width:300,margin:20,display:"grid",position:"relative",gridTemplateColumns:"100px auto",alignItems:"center"},children:[te.jsx("h2",{children:"Start"}),te.jsx(My,{options:J,onChange:(se,ae)=>ae&&j(ae),groupBy:se=>se.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,renderGroup:hE}),te.jsx("h2",{children:"End"}),te.jsx(My,{options:K,onChange:(se,ae)=>ae&&q(ae),groupBy:se=>se.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,disabled:k==null,renderGroup:hE},k)]})};function hE(e){return te.jsxs(te.Fragment,{children:[te.jsx(Fa,{m:1,level:"body-xs",textTransform:"uppercase",children:e.group}),te.jsx(Ef,{children:e.children}),te.jsx(uM,{})]})}function cQ(e){const t=new Map,r=new Map;for(const[o,s]of e.demoGraph)t.set(o,{forward:(s.f??[]).map(pE),backward:(s.b??[]).map(pE)});for(const[o,s]of e.demoNodes)r.set(o,{x:s[0],y:s[1]});return{graph:t,nodeLUT:r}}function pE(e){return{nodeId:e.n,distance:e.l,isOneLaneRoad:e.o,direction:e.d==="f"?"forward":"backward",dlcGuard:e.g}}function fE(e){return{label:e.t,city:e.c,value:e.n}}function mE(e,t,r,o){return new Promise(s=>{const d=iQ(e,t,"forward",r,o);if(!d.success){s(void 0);return}s({type:"Feature",geometry:{type:"LineString",coordinates:d.route.map(p=>{const c=Cn(o.nodeLUT.get(p.nodeId));return[c.x,c.y]})},properties:{distance:d.distance,mode:r}})})}const uQ=bH(gb([te.jsx(mb,{path:"/",element:te.jsx(qY,{})}),te.jsx(mb,{path:"routes",element:te.jsx(sQ,{})})])),dQ=_A({components:{JoyIconButton:{styleOverrides:{root:{backgroundColor:"var(--joy-palette-background-surface)"}}}}}),hQ=document.getElementById("root"),pQ=pM(hQ);pQ.render(te.jsx(R.StrictMode,{children:te.jsxs(JB,{defaultMode:"system",modeStorageKey:"tm-mode",theme:dQ,children:[te.jsx(pU,{}),te.jsx(AH,{router:uQ})]})}));
