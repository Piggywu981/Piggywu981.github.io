var uD=Object.defineProperty;var dD=(e,t,r)=>t in e?uD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var TS=(e,t,r)=>(dD(e,typeof t!="symbol"?t+"":t,r),r);function Hx(e,t){for(var r=0;r<t.length;r++){const o=t[r];if(typeof o!="string"&&!Array.isArray(o)){for(const l in o)if(l!=="default"&&!(l in e)){const d=Object.getOwnPropertyDescriptor(o,l);d&&Object.defineProperty(e,l,d.get?d:{enumerable:!0,get:()=>o[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function r(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(l){if(l.ep)return;l.ep=!0;const d=r(l);fetch(l.href,d)}})();var hD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $s(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var l=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:function(){return e[o]}})}),r}var Zk={exports:{}},Qg={},Kk={exports:{}},Tr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp=Symbol.for("react.element"),pD=Symbol.for("react.portal"),fD=Symbol.for("react.fragment"),mD=Symbol.for("react.strict_mode"),gD=Symbol.for("react.profiler"),yD=Symbol.for("react.provider"),vD=Symbol.for("react.context"),_D=Symbol.for("react.forward_ref"),xD=Symbol.for("react.suspense"),bD=Symbol.for("react.memo"),wD=Symbol.for("react.lazy"),PS=Symbol.iterator;function SD(e){return e===null||typeof e!="object"?null:(e=PS&&e[PS]||e["@@iterator"],typeof e=="function"?e:null)}var Xk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jk=Object.assign,Yk={};function cd(e,t,r){this.props=e,this.context=t,this.refs=Yk,this.updater=r||Xk}cd.prototype.isReactComponent={};cd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};cd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Qk(){}Qk.prototype=cd.prototype;function Gx(e,t,r){this.props=e,this.context=t,this.refs=Yk,this.updater=r||Xk}var qx=Gx.prototype=new Qk;qx.constructor=Gx;Jk(qx,cd.prototype);qx.isPureReactComponent=!0;var ES=Array.isArray,eI=Object.prototype.hasOwnProperty,Zx={current:null},tI={key:!0,ref:!0,__self:!0,__source:!0};function rI(e,t,r){var o,l={},d=null,f=null;if(t!=null)for(o in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(d=""+t.key),t)eI.call(t,o)&&!tI.hasOwnProperty(o)&&(l[o]=t[o]);var c=arguments.length-2;if(c===1)l.children=r;else if(1<c){for(var b=Array(c),w=0;w<c;w++)b[w]=arguments[w+2];l.children=b}if(e&&e.defaultProps)for(o in c=e.defaultProps,c)l[o]===void 0&&(l[o]=c[o]);return{$$typeof:Hp,type:e,key:d,ref:f,props:l,_owner:Zx.current}}function CD(e,t){return{$$typeof:Hp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hp}function kD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var zS=/\/+/g;function P0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kD(""+e.key):t.toString(36)}function Wm(e,t,r,o,l){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(d){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Hp:case pD:f=!0}}if(f)return f=e,l=l(f),e=o===""?"."+P0(f,0):o,ES(l)?(r="",e!=null&&(r=e.replace(zS,"$&/")+"/"),Wm(l,t,r,"",function(w){return w})):l!=null&&(Kx(l)&&(l=CD(l,r+(!l.key||f&&f.key===l.key?"":(""+l.key).replace(zS,"$&/")+"/")+e)),t.push(l)),1;if(f=0,o=o===""?".":o+":",ES(e))for(var c=0;c<e.length;c++){d=e[c];var b=o+P0(d,c);f+=Wm(d,t,r,b,l)}else if(b=SD(e),typeof b=="function")for(e=b.call(e),c=0;!(d=e.next()).done;)d=d.value,b=o+P0(d,c++),f+=Wm(d,t,r,b,l);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function bm(e,t,r){if(e==null)return e;var o=[],l=0;return Wm(e,o,"","",function(d){return t.call(r,d,l++)}),o}function ID(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var io={current:null},Gm={transition:null},TD={ReactCurrentDispatcher:io,ReactCurrentBatchConfig:Gm,ReactCurrentOwner:Zx};Tr.Children={map:bm,forEach:function(e,t,r){bm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return bm(e,function(){t++}),t},toArray:function(e){return bm(e,function(t){return t})||[]},only:function(e){if(!Kx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Tr.Component=cd;Tr.Fragment=fD;Tr.Profiler=gD;Tr.PureComponent=Gx;Tr.StrictMode=mD;Tr.Suspense=xD;Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TD;Tr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=Jk({},e.props),l=e.key,d=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,f=Zx.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(b in t)eI.call(t,b)&&!tI.hasOwnProperty(b)&&(o[b]=t[b]===void 0&&c!==void 0?c[b]:t[b])}var b=arguments.length-2;if(b===1)o.children=r;else if(1<b){c=Array(b);for(var w=0;w<b;w++)c[w]=arguments[w+2];o.children=c}return{$$typeof:Hp,type:e.type,key:l,ref:d,props:o,_owner:f}};Tr.createContext=function(e){return e={$$typeof:vD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yD,_context:e},e.Consumer=e};Tr.createElement=rI;Tr.createFactory=function(e){var t=rI.bind(null,e);return t.type=e,t};Tr.createRef=function(){return{current:null}};Tr.forwardRef=function(e){return{$$typeof:_D,render:e}};Tr.isValidElement=Kx;Tr.lazy=function(e){return{$$typeof:wD,_payload:{_status:-1,_result:e},_init:ID}};Tr.memo=function(e,t){return{$$typeof:bD,type:e,compare:t===void 0?null:t}};Tr.startTransition=function(e){var t=Gm.transition;Gm.transition={};try{e()}finally{Gm.transition=t}};Tr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Tr.useCallback=function(e,t){return io.current.useCallback(e,t)};Tr.useContext=function(e){return io.current.useContext(e)};Tr.useDebugValue=function(){};Tr.useDeferredValue=function(e){return io.current.useDeferredValue(e)};Tr.useEffect=function(e,t){return io.current.useEffect(e,t)};Tr.useId=function(){return io.current.useId()};Tr.useImperativeHandle=function(e,t,r){return io.current.useImperativeHandle(e,t,r)};Tr.useInsertionEffect=function(e,t){return io.current.useInsertionEffect(e,t)};Tr.useLayoutEffect=function(e,t){return io.current.useLayoutEffect(e,t)};Tr.useMemo=function(e,t){return io.current.useMemo(e,t)};Tr.useReducer=function(e,t,r){return io.current.useReducer(e,t,r)};Tr.useRef=function(e){return io.current.useRef(e)};Tr.useState=function(e){return io.current.useState(e)};Tr.useSyncExternalStore=function(e,t,r){return io.current.useSyncExternalStore(e,t,r)};Tr.useTransition=function(){return io.current.useTransition()};Tr.version="18.3.0";Kk.exports=Tr;var R=Kk.exports;const S_=Wx(R),hg=Hx({__proto__:null,default:S_},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PD=R,ED=Symbol.for("react.element"),zD=Symbol.for("react.fragment"),MD=Object.prototype.hasOwnProperty,AD=PD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DD={key:!0,ref:!0,__self:!0,__source:!0};function nI(e,t,r){var o,l={},d=null,f=null;r!==void 0&&(d=""+r),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(f=t.ref);for(o in t)MD.call(t,o)&&!DD.hasOwnProperty(o)&&(l[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)l[o]===void 0&&(l[o]=t[o]);return{$$typeof:ED,type:e,key:d,ref:f,props:l,_owner:AD.current}}Qg.Fragment=zD;Qg.jsx=nI;Qg.jsxs=nI;Zk.exports=Qg;var re=Zk.exports;const Ph={grey:{50:"#FBFCFE",100:"#F0F4F8",200:"#DDE7EE",300:"#CDD7E1",400:"#9FA6AD",500:"#636B74",600:"#555E68",700:"#32383E",800:"#171A1C",900:"#0B0D0E"},blue:{50:"#EDF5FD",100:"#E3EFFB",200:"#C7DFF7",300:"#97C3F0",400:"#4393E4",500:"#0B6BCB",600:"#185EA5",700:"#12467B",800:"#0A2744",900:"#051423"},yellow:{50:"#FEFAF6",100:"#FDF0E1",200:"#FCE1C2",300:"#F3C896",400:"#EA9A3E",500:"#9A5B13",600:"#72430D",700:"#492B08",800:"#2E1B05",900:"#1D1002"},red:{50:"#FEF6F6",100:"#FCE4E4",200:"#F7C5C5",300:"#F09898",400:"#E47474",500:"#C41C1C",600:"#A51818",700:"#7D1212",800:"#430A0A",900:"#240505"},green:{50:"#F6FEF6",100:"#E3FBE3",200:"#C7F7C7",300:"#A1E8A1",400:"#51BC51",500:"#1F7A1F",600:"#136C13",700:"#0A470A",800:"#042F04",900:"#021D02"}},ey="$$joy";function pp(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},q.apply(this,arguments)}const RD=Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,{value:"Module"}));function iI(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var LD=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,$D=iI(function(e){return LD.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function BD(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function OD(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var FD=function(){function e(r){var o=this;this._insertTag=function(l){var d;o.tags.length===0?o.insertionPoint?d=o.insertionPoint.nextSibling:o.prepend?d=o.container.firstChild:d=o.before:d=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(l,d),o.tags.push(l)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(OD(this));var l=this.tags[this.tags.length-1];if(this.isSpeedy){var d=BD(l);try{d.insertRule(o,d.cssRules.length)}catch{}}else l.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){return o.parentNode&&o.parentNode.removeChild(o)}),this.tags=[],this.ctr=0},e}(),Fi="-ms-",pg="-moz-",Vr="-webkit-",oI="comm",Xx="rule",Jx="decl",ND="@import",aI="@keyframes",jD="@layer",VD=Math.abs,ty=String.fromCharCode,UD=Object.assign;function HD(e,t){return Ci(e,0)^45?(((t<<2^Ci(e,0))<<2^Ci(e,1))<<2^Ci(e,2))<<2^Ci(e,3):0}function sI(e){return e.trim()}function WD(e,t){return(e=t.exec(e))?e[0]:e}function Ur(e,t,r){return e.replace(t,r)}function C_(e,t){return e.indexOf(t)}function Ci(e,t){return e.charCodeAt(t)|0}function fp(e,t,r){return e.slice(t,r)}function Ka(e){return e.length}function Yx(e){return e.length}function wm(e,t){return t.push(e),e}function GD(e,t){return e.map(t).join("")}var ry=1,qu=1,lI=0,So=0,Qn=0,ud="";function ny(e,t,r,o,l,d,f){return{value:e,root:t,parent:r,type:o,props:l,children:d,line:ry,column:qu,length:f,return:""}}function Eh(e,t){return UD(ny("",null,null,"",null,null,0),e,{length:-e.length},t)}function qD(){return Qn}function ZD(){return Qn=So>0?Ci(ud,--So):0,qu--,Qn===10&&(qu=1,ry--),Qn}function $o(){return Qn=So<lI?Ci(ud,So++):0,qu++,Qn===10&&(qu=1,ry++),Qn}function Ya(){return Ci(ud,So)}function qm(){return So}function Wp(e,t){return fp(ud,e,t)}function mp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function cI(e){return ry=qu=1,lI=Ka(ud=e),So=0,[]}function uI(e){return ud="",e}function Zm(e){return sI(Wp(So-1,k_(e===91?e+2:e===40?e+1:e)))}function KD(e){for(;(Qn=Ya())&&Qn<33;)$o();return mp(e)>2||mp(Qn)>3?"":" "}function XD(e,t){for(;--t&&$o()&&!(Qn<48||Qn>102||Qn>57&&Qn<65||Qn>70&&Qn<97););return Wp(e,qm()+(t<6&&Ya()==32&&$o()==32))}function k_(e){for(;$o();)switch(Qn){case e:return So;case 34:case 39:e!==34&&e!==39&&k_(Qn);break;case 40:e===41&&k_(e);break;case 92:$o();break}return So}function JD(e,t){for(;$o()&&e+Qn!==57;)if(e+Qn===84&&Ya()===47)break;return"/*"+Wp(t,So-1)+"*"+ty(e===47?e:$o())}function YD(e){for(;!mp(Ya());)$o();return Wp(e,So)}function QD(e){return uI(Km("",null,null,null,[""],e=cI(e),0,[0],e))}function Km(e,t,r,o,l,d,f,c,b){for(var w=0,k=0,z=f,P=0,V=0,U=0,H=1,X=1,B=1,L=0,G="",te=l,ne=d,he=o,Z=G;X;)switch(U=L,L=$o()){case 40:if(U!=108&&Ci(Z,z-1)==58){C_(Z+=Ur(Zm(L),"&","&\f"),"&\f")!=-1&&(B=-1);break}case 34:case 39:case 91:Z+=Zm(L);break;case 9:case 10:case 13:case 32:Z+=KD(U);break;case 92:Z+=XD(qm()-1,7);continue;case 47:switch(Ya()){case 42:case 47:wm(eR(JD($o(),qm()),t,r),b);break;default:Z+="/"}break;case 123*H:c[w++]=Ka(Z)*B;case 125*H:case 59:case 0:switch(L){case 0:case 125:X=0;case 59+k:B==-1&&(Z=Ur(Z,/\f/g,"")),V>0&&Ka(Z)-z&&wm(V>32?AS(Z+";",o,r,z-1):AS(Ur(Z," ","")+";",o,r,z-2),b);break;case 59:Z+=";";default:if(wm(he=MS(Z,t,r,w,k,l,c,G,te=[],ne=[],z),d),L===123)if(k===0)Km(Z,t,he,he,te,d,z,c,ne);else switch(P===99&&Ci(Z,3)===110?100:P){case 100:case 108:case 109:case 115:Km(e,he,he,o&&wm(MS(e,he,he,0,0,l,c,G,l,te=[],z),ne),l,ne,z,c,o?te:ne);break;default:Km(Z,he,he,he,[""],ne,0,c,ne)}}w=k=V=0,H=B=1,G=Z="",z=f;break;case 58:z=1+Ka(Z),V=U;default:if(H<1){if(L==123)--H;else if(L==125&&H++==0&&ZD()==125)continue}switch(Z+=ty(L),L*H){case 38:B=k>0?1:(Z+="\f",-1);break;case 44:c[w++]=(Ka(Z)-1)*B,B=1;break;case 64:Ya()===45&&(Z+=Zm($o())),P=Ya(),k=z=Ka(G=Z+=YD(qm())),L++;break;case 45:U===45&&Ka(Z)==2&&(H=0)}}return d}function MS(e,t,r,o,l,d,f,c,b,w,k){for(var z=l-1,P=l===0?d:[""],V=Yx(P),U=0,H=0,X=0;U<o;++U)for(var B=0,L=fp(e,z+1,z=VD(H=f[U])),G=e;B<V;++B)(G=sI(H>0?P[B]+" "+L:Ur(L,/&\f/g,P[B])))&&(b[X++]=G);return ny(e,t,r,l===0?Xx:c,b,w,k)}function eR(e,t,r){return ny(e,t,r,oI,ty(qD()),fp(e,2,-2),0)}function AS(e,t,r,o){return ny(e,t,r,Jx,fp(e,0,o),fp(e,o+1,-1),o)}function Lu(e,t){for(var r="",o=Yx(e),l=0;l<o;l++)r+=t(e[l],l,e,t)||"";return r}function tR(e,t,r,o){switch(e.type){case jD:if(e.children.length)break;case ND:case Jx:return e.return=e.return||e.value;case oI:return"";case aI:return e.return=e.value+"{"+Lu(e.children,o)+"}";case Xx:e.value=e.props.join(",")}return Ka(r=Lu(e.children,o))?e.return=e.value+"{"+r+"}":""}function rR(e){var t=Yx(e);return function(r,o,l,d){for(var f="",c=0;c<t;c++)f+=e[c](r,o,l,d)||"";return f}}function nR(e){return function(t){t.root||(t=t.return)&&e(t)}}var iR=function(t,r,o){for(var l=0,d=0;l=d,d=Ya(),l===38&&d===12&&(r[o]=1),!mp(d);)$o();return Wp(t,So)},oR=function(t,r){var o=-1,l=44;do switch(mp(l)){case 0:l===38&&Ya()===12&&(r[o]=1),t[o]+=iR(So-1,r,o);break;case 2:t[o]+=Zm(l);break;case 4:if(l===44){t[++o]=Ya()===58?"&\f":"",r[o]=t[o].length;break}default:t[o]+=ty(l)}while(l=$o());return t},aR=function(t,r){return uI(oR(cI(t),r))},DS=new WeakMap,sR=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,o=t.parent,l=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!DS.get(o))&&!l){DS.set(t,!0);for(var d=[],f=aR(r,d),c=o.props,b=0,w=0;b<f.length;b++)for(var k=0;k<c.length;k++,w++)t.props[w]=d[b]?f[b].replace(/&\f/g,c[k]):c[k]+" "+f[b]}}},lR=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function dI(e,t){switch(HD(e,t)){case 5103:return Vr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Vr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Vr+e+pg+e+Fi+e+e;case 6828:case 4268:return Vr+e+Fi+e+e;case 6165:return Vr+e+Fi+"flex-"+e+e;case 5187:return Vr+e+Ur(e,/(\w+).+(:[^]+)/,Vr+"box-$1$2"+Fi+"flex-$1$2")+e;case 5443:return Vr+e+Fi+"flex-item-"+Ur(e,/flex-|-self/,"")+e;case 4675:return Vr+e+Fi+"flex-line-pack"+Ur(e,/align-content|flex-|-self/,"")+e;case 5548:return Vr+e+Fi+Ur(e,"shrink","negative")+e;case 5292:return Vr+e+Fi+Ur(e,"basis","preferred-size")+e;case 6060:return Vr+"box-"+Ur(e,"-grow","")+Vr+e+Fi+Ur(e,"grow","positive")+e;case 4554:return Vr+Ur(e,/([^-])(transform)/g,"$1"+Vr+"$2")+e;case 6187:return Ur(Ur(Ur(e,/(zoom-|grab)/,Vr+"$1"),/(image-set)/,Vr+"$1"),e,"")+e;case 5495:case 3959:return Ur(e,/(image-set\([^]*)/,Vr+"$1$`$1");case 4968:return Ur(Ur(e,/(.+:)(flex-)?(.*)/,Vr+"box-pack:$3"+Fi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Vr+e+e;case 4095:case 3583:case 4068:case 2532:return Ur(e,/(.+)-inline(.+)/,Vr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ka(e)-1-t>6)switch(Ci(e,t+1)){case 109:if(Ci(e,t+4)!==45)break;case 102:return Ur(e,/(.+:)(.+)-([^]+)/,"$1"+Vr+"$2-$3$1"+pg+(Ci(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~C_(e,"stretch")?dI(Ur(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ci(e,t+1)!==115)break;case 6444:switch(Ci(e,Ka(e)-3-(~C_(e,"!important")&&10))){case 107:return Ur(e,":",":"+Vr)+e;case 101:return Ur(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Vr+(Ci(e,14)===45?"inline-":"")+"box$3$1"+Vr+"$2$3$1"+Fi+"$2box$3")+e}break;case 5936:switch(Ci(e,t+11)){case 114:return Vr+e+Fi+Ur(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Vr+e+Fi+Ur(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Vr+e+Fi+Ur(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Vr+e+Fi+e+e}return e}var cR=function(t,r,o,l){if(t.length>-1&&!t.return)switch(t.type){case Jx:t.return=dI(t.value,t.length);break;case aI:return Lu([Eh(t,{value:Ur(t.value,"@","@"+Vr)})],l);case Xx:if(t.length)return GD(t.props,function(d){switch(WD(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Lu([Eh(t,{props:[Ur(d,/:(read-\w+)/,":"+pg+"$1")]})],l);case"::placeholder":return Lu([Eh(t,{props:[Ur(d,/:(plac\w+)/,":"+Vr+"input-$1")]}),Eh(t,{props:[Ur(d,/:(plac\w+)/,":"+pg+"$1")]}),Eh(t,{props:[Ur(d,/:(plac\w+)/,Fi+"input-$1")]})],l)}return""})}},uR=[cR],hI=function(t){var r=t.key;if(r==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(H){var X=H.getAttribute("data-emotion");X.indexOf(" ")!==-1&&(document.head.appendChild(H),H.setAttribute("data-s",""))})}var l=t.stylisPlugins||uR,d={},f,c=[];f=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(H){for(var X=H.getAttribute("data-emotion").split(" "),B=1;B<X.length;B++)d[X[B]]=!0;c.push(H)});var b,w=[sR,lR];{var k,z=[tR,nR(function(H){k.insert(H)})],P=rR(w.concat(l,z)),V=function(X){return Lu(QD(X),P)};b=function(X,B,L,G){k=L,V(X?X+"{"+B.styles+"}":B.styles),G&&(U.inserted[B.name]=!0)}}var U={key:r,sheet:new FD({key:r,container:f,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:b};return U.sheet.hydrate(c),U},pI={exports:{}},Jr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gi=typeof Symbol=="function"&&Symbol.for,Qx=gi?Symbol.for("react.element"):60103,e1=gi?Symbol.for("react.portal"):60106,iy=gi?Symbol.for("react.fragment"):60107,oy=gi?Symbol.for("react.strict_mode"):60108,ay=gi?Symbol.for("react.profiler"):60114,sy=gi?Symbol.for("react.provider"):60109,ly=gi?Symbol.for("react.context"):60110,t1=gi?Symbol.for("react.async_mode"):60111,cy=gi?Symbol.for("react.concurrent_mode"):60111,uy=gi?Symbol.for("react.forward_ref"):60112,dy=gi?Symbol.for("react.suspense"):60113,dR=gi?Symbol.for("react.suspense_list"):60120,hy=gi?Symbol.for("react.memo"):60115,py=gi?Symbol.for("react.lazy"):60116,hR=gi?Symbol.for("react.block"):60121,pR=gi?Symbol.for("react.fundamental"):60117,fR=gi?Symbol.for("react.responder"):60118,mR=gi?Symbol.for("react.scope"):60119;function No(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Qx:switch(e=e.type,e){case t1:case cy:case iy:case ay:case oy:case dy:return e;default:switch(e=e&&e.$$typeof,e){case ly:case uy:case py:case hy:case sy:return e;default:return t}}case e1:return t}}}function fI(e){return No(e)===cy}Jr.AsyncMode=t1;Jr.ConcurrentMode=cy;Jr.ContextConsumer=ly;Jr.ContextProvider=sy;Jr.Element=Qx;Jr.ForwardRef=uy;Jr.Fragment=iy;Jr.Lazy=py;Jr.Memo=hy;Jr.Portal=e1;Jr.Profiler=ay;Jr.StrictMode=oy;Jr.Suspense=dy;Jr.isAsyncMode=function(e){return fI(e)||No(e)===t1};Jr.isConcurrentMode=fI;Jr.isContextConsumer=function(e){return No(e)===ly};Jr.isContextProvider=function(e){return No(e)===sy};Jr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qx};Jr.isForwardRef=function(e){return No(e)===uy};Jr.isFragment=function(e){return No(e)===iy};Jr.isLazy=function(e){return No(e)===py};Jr.isMemo=function(e){return No(e)===hy};Jr.isPortal=function(e){return No(e)===e1};Jr.isProfiler=function(e){return No(e)===ay};Jr.isStrictMode=function(e){return No(e)===oy};Jr.isSuspense=function(e){return No(e)===dy};Jr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===iy||e===cy||e===ay||e===oy||e===dy||e===dR||typeof e=="object"&&e!==null&&(e.$$typeof===py||e.$$typeof===hy||e.$$typeof===sy||e.$$typeof===ly||e.$$typeof===uy||e.$$typeof===pR||e.$$typeof===fR||e.$$typeof===mR||e.$$typeof===hR)};Jr.typeOf=No;pI.exports=Jr;var gR=pI.exports,mI=gR,yR={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},vR={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},gI={};gI[mI.ForwardRef]=yR;gI[mI.Memo]=vR;var _R=!0;function xR(e,t,r){var o="";return r.split(" ").forEach(function(l){e[l]!==void 0?t.push(e[l]+";"):o+=l+" "}),o}var yI=function(t,r,o){var l=t.key+"-"+r.name;(o===!1||_R===!1)&&t.registered[l]===void 0&&(t.registered[l]=r.styles)},vI=function(t,r,o){yI(t,r,o);var l=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var d=r;do t.insert(r===d?"."+l:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function bR(e){for(var t=0,r,o=0,l=e.length;l>=4;++o,l-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(l){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var wR={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},SR=/[A-Z]|^ms/g,CR=/_EMO_([^_]+?)_([^]*?)_EMO_/g,_I=function(t){return t.charCodeAt(1)===45},RS=function(t){return t!=null&&typeof t!="boolean"},E0=iI(function(e){return _I(e)?e:e.replace(SR,"-$&").toLowerCase()}),LS=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(CR,function(o,l,d){return Xa={name:l,styles:d,next:Xa},l})}return wR[t]!==1&&!_I(t)&&typeof r=="number"&&r!==0?r+"px":r};function gp(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return Xa={name:r.name,styles:r.styles,next:Xa},r.name;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)Xa={name:o.name,styles:o.styles,next:Xa},o=o.next;var l=r.styles+";";return l}return kR(e,t,r)}case"function":{if(e!==void 0){var d=Xa,f=r(e);return Xa=d,gp(e,t,f)}break}}if(t==null)return r;var c=t[r];return c!==void 0?c:r}function kR(e,t,r){var o="";if(Array.isArray(r))for(var l=0;l<r.length;l++)o+=gp(e,t,r[l])+";";else for(var d in r){var f=r[d];if(typeof f!="object")t!=null&&t[f]!==void 0?o+=d+"{"+t[f]+"}":RS(f)&&(o+=E0(d)+":"+LS(d,f)+";");else if(Array.isArray(f)&&typeof f[0]=="string"&&(t==null||t[f[0]]===void 0))for(var c=0;c<f.length;c++)RS(f[c])&&(o+=E0(d)+":"+LS(d,f[c])+";");else{var b=gp(e,t,f);switch(d){case"animation":case"animationName":{o+=E0(d)+":"+b+";";break}default:o+=d+"{"+b+"}"}}}return o}var $S=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Xa,r1=function(t,r,o){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var l=!0,d="";Xa=void 0;var f=t[0];f==null||f.raw===void 0?(l=!1,d+=gp(o,r,f)):d+=f[0];for(var c=1;c<t.length;c++)d+=gp(o,r,t[c]),l&&(d+=f[c]);$S.lastIndex=0;for(var b="",w;(w=$S.exec(d))!==null;)b+="-"+w[1];var k=bR(d)+b;return{name:k,styles:d,next:Xa}},IR=function(t){return t()},xI=hg.useInsertionEffect?hg.useInsertionEffect:!1,TR=xI||IR,BS=xI||R.useLayoutEffect,bI=R.createContext(typeof HTMLElement<"u"?hI({key:"css"}):null),PR=bI.Provider,wI=function(t){return R.forwardRef(function(r,o){var l=R.useContext(bI);return t(r,l,o)})},dd=R.createContext({}),SI=wI(function(e,t){var r=e.styles,o=r1([r],void 0,R.useContext(dd)),l=R.useRef();return BS(function(){var d=t.key+"-global",f=new t.sheet.constructor({key:d,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),c=!1,b=document.querySelector('style[data-emotion="'+d+" "+o.name+'"]');return t.sheet.tags.length&&(f.before=t.sheet.tags[0]),b!==null&&(c=!0,b.setAttribute("data-emotion",d),f.hydrate([b])),l.current=[f,c],function(){f.flush()}},[t]),BS(function(){var d=l.current,f=d[0],c=d[1];if(c){d[1]=!1;return}if(o.next!==void 0&&vI(t,o.next,!0),f.tags.length){var b=f.tags[f.tags.length-1].nextElementSibling;f.before=b,f.flush()}t.insert("",o,f,!1)},[t,o.name]),null});function n1(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return r1(t)}var CI=function(){var t=n1.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},ER=$D,zR=function(t){return t!=="theme"},OS=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?ER:zR},FS=function(t,r,o){var l;if(r){var d=r.shouldForwardProp;l=t.__emotion_forwardProp&&d?function(f){return t.__emotion_forwardProp(f)&&d(f)}:d}return typeof l!="function"&&o&&(l=t.__emotion_forwardProp),l},MR=function(t){var r=t.cache,o=t.serialized,l=t.isStringTag;return yI(r,o,l),TR(function(){return vI(r,o,l)}),null},AR=function e(t,r){var o=t.__emotion_real===t,l=o&&t.__emotion_base||t,d,f;r!==void 0&&(d=r.label,f=r.target);var c=FS(t,r,o),b=c||OS(l),w=!b("as");return function(){var k=arguments,z=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&z.push("label:"+d+";"),k[0]==null||k[0].raw===void 0)z.push.apply(z,k);else{z.push(k[0][0]);for(var P=k.length,V=1;V<P;V++)z.push(k[V],k[0][V])}var U=wI(function(H,X,B){var L=w&&H.as||l,G="",te=[],ne=H;if(H.theme==null){ne={};for(var he in H)ne[he]=H[he];ne.theme=R.useContext(dd)}typeof H.className=="string"?G=xR(X.registered,te,H.className):H.className!=null&&(G=H.className+" ");var Z=r1(z.concat(te),X.registered,ne);G+=X.key+"-"+Z.name,f!==void 0&&(G+=" "+f);var ue=w&&c===void 0?OS(L):b,Ce={};for(var ye in H)w&&ye==="as"||ue(ye)&&(Ce[ye]=H[ye]);return Ce.className=G,Ce.ref=B,R.createElement(R.Fragment,null,R.createElement(MR,{cache:X,serialized:Z,isStringTag:typeof L=="string"}),R.createElement(L,Ce))});return U.displayName=d!==void 0?d:"Styled("+(typeof l=="string"?l:l.displayName||l.name||"Component")+")",U.defaultProps=t.defaultProps,U.__emotion_real=U,U.__emotion_base=l,U.__emotion_styles=z,U.__emotion_forwardProp=c,Object.defineProperty(U,"toString",{value:function(){return"."+f}}),U.withComponent=function(H,X){return e(H,q({},r,X,{shouldForwardProp:FS(U,X,!0)})).apply(void 0,z)},U}},DR=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],fg=AR.bind();DR.forEach(function(e){fg[e]=fg(e)});function RR(e){return e==null||Object.keys(e).length===0}function kI(e){const{styles:t,defaultTheme:r={}}=e,o=typeof t=="function"?l=>t(RR(l)?r:l):t;return re.jsx(SI,{styles:o})}function LR(e,t){return fg(e,t)}const $R=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function Ut(e,t){if(e==null)return{};var r={},o=Object.keys(e),l,d;for(d=0;d<o.length;d++)l=o[d],!(t.indexOf(l)>=0)&&(r[l]=e[l]);return r}function ll(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function II(e){if(!ll(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=II(e[r])}),t}function oa(e,t,r={clone:!0}){const o=r.clone?q({},e):e;return ll(e)&&ll(t)&&Object.keys(t).forEach(l=>{l!=="__proto__"&&(ll(t[l])&&l in e&&ll(e[l])?o[l]=oa(e[l],t[l],r):r.clone?o[l]=ll(t[l])?II(t[l]):t[l]:o[l]=t[l])}),o}const BR=["values","unit","step"],OR=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,o)=>r.val-o.val),t.reduce((r,o)=>q({},r,{[o.key]:o.val}),{})};function TI(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:o=5}=e,l=Ut(e,BR),d=OR(t),f=Object.keys(d);function c(P){return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${r})`}function b(P){return`@media (max-width:${(typeof t[P]=="number"?t[P]:P)-o/100}${r})`}function w(P,V){const U=f.indexOf(V);return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${r}) and (max-width:${(U!==-1&&typeof t[f[U]]=="number"?t[f[U]]:V)-o/100}${r})`}function k(P){return f.indexOf(P)+1<f.length?w(P,f[f.indexOf(P)+1]):c(P)}function z(P){const V=f.indexOf(P);return V===0?c(f[1]):V===f.length-1?b(f[V]):w(P,f[f.indexOf(P)+1]).replace("@media","@media not all and")}return q({keys:f,values:d,up:c,down:b,between:w,only:k,not:z,unit:r},l)}function FR(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(o=>o.startsWith("@container")).sort((o,l)=>{var f,c;const d=/min-width:\s*([0-9.]+)/;return+(((f=o.match(d))==null?void 0:f[1])||0)-+(((c=l.match(d))==null?void 0:c[1])||0)});return r.length?r.reduce((o,l)=>{const d=t[l];return delete o[l],o[l]=d,o},q({},t)):t}function NR(e,t){return t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function jR(e,t){const r=t.match(/^@([^/]+)\/?(.+)?$/);if(!r)return null;const[,o,l]=r,d=Number.isNaN(+o)?o:+o;return e.containerQueries(l).up(d)}function PI(e){const t=(d,f)=>d.replace("@media",f?`@container ${f}`:"@container");function r(d,f){d.up=(...c)=>t(e.breakpoints.up(...c),f),d.down=(...c)=>t(e.breakpoints.down(...c),f),d.between=(...c)=>t(e.breakpoints.between(...c),f),d.only=(...c)=>t(e.breakpoints.only(...c),f),d.not=(...c)=>{const b=t(e.breakpoints.not(...c),f);return b.includes("not all and")?b.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>"):b}}const o={},l=d=>(r(o,d),o);return r(l),q({},e,{containerQueries:l})}const VR={borderRadius:4},UR=VR;function Jh(e,t){return t?oa(e,t,{clone:!1}):e}const fy={xs:0,sm:600,md:900,lg:1200,xl:1536},NS={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${fy[e]}px)`},HR={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:fy[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function $a(e,t,r){const o=e.theme||{};if(Array.isArray(t)){const d=o.breakpoints||NS;return t.reduce((f,c,b)=>(f[d.up(d.keys[b])]=r(t[b]),f),{})}if(typeof t=="object"){const d=o.breakpoints||NS;return Object.keys(t).reduce((f,c)=>{if(NR(d.keys,c)){const b=jR(o.containerQueries?o:HR,c);b&&(f[b]=r(t[c],c))}else if(Object.keys(d.values||fy).indexOf(c)!==-1){const b=d.up(c);f[b]=r(t[c],c)}else{const b=c;f[b]=t[b]}return f},{})}return r(t)}function EI(e={}){var r;return((r=e.keys)==null?void 0:r.reduce((o,l)=>{const d=e.up(l);return o[d]={},o},{}))||{}}function zI(e,t){return e.reduce((r,o)=>{const l=r[o];return(!l||Object.keys(l).length===0)&&delete r[o],r},t)}function WR(e,...t){const r=EI(e),o=[r,...t].reduce((l,d)=>oa(l,d),{});return zI(Object.keys(r),o)}function GR(e,t){if(typeof e!="object")return{};const r={},o=Object.keys(t);return Array.isArray(e)?o.forEach((l,d)=>{d<e.length&&(r[l]=!0)}):o.forEach(l=>{e[l]!=null&&(r[l]=!0)}),r}function z0({values:e,breakpoints:t,base:r}){const o=r||GR(e,t),l=Object.keys(o);if(l.length===0)return e;let d;return l.reduce((f,c,b)=>(Array.isArray(e)?(f[c]=e[b]!=null?e[b]:e[d],d=b):typeof e=="object"?(f[c]=e[c]!=null?e[c]:e[d],d=c):f[c]=e,f),{})}function It(e){if(typeof e!="string")throw new Error(pp(7));return e.charAt(0).toUpperCase()+e.slice(1)}function kl(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const o=`vars.${t}`.split(".").reduce((l,d)=>l&&l[d]?l[d]:null,e);if(o!=null)return o}return t.split(".").reduce((o,l)=>o&&o[l]!=null?o[l]:null,e)}function mg(e,t,r,o=r){let l;return typeof e=="function"?l=e(r):Array.isArray(e)?l=e[r]||o:l=kl(e,r)||o,t&&(l=t(l,o,e)),l}function Kn(e){const{prop:t,cssProperty:r=e.prop,themeKey:o,transform:l}=e,d=f=>{if(f[t]==null)return null;const c=f[t],b=f.theme,w=kl(b,o)||{};return $a(f,c,z=>{let P=mg(w,l,z);return z===P&&typeof z=="string"&&(P=mg(w,l,`${t}${z==="default"?"":It(z)}`,z)),r===!1?P:{[r]:P}})};return d.propTypes={},d.filterProps=[t],d}function qR(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const ZR={m:"margin",p:"padding"},KR={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},jS={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},XR=qR(e=>{if(e.length>2)if(jS[e])e=jS[e];else return[e];const[t,r]=e.split(""),o=ZR[t],l=KR[r]||"";return Array.isArray(l)?l.map(d=>o+d):[o+l]}),i1=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],o1=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...i1,...o1];function Gp(e,t,r,o){const l=kl(e,t,!0)??r;return typeof l=="number"||typeof l=="string"?d=>typeof d=="string"?d:typeof l=="string"?`calc(${d} * ${l})`:l*d:Array.isArray(l)?d=>{if(typeof d=="string")return d;const f=Math.abs(d),c=l[f];return d>=0?c:typeof c=="number"?-c:`-${c}`}:typeof l=="function"?l:()=>{}}function my(e){return Gp(e,"spacing",8)}function fc(e,t){return typeof t=="string"||t==null?t:e(t)}function JR(e,t){return r=>e.reduce((o,l)=>(o[l]=fc(t,r),o),{})}function YR(e,t,r,o){if(t.indexOf(r)===-1)return null;const l=XR(r),d=JR(l,o),f=e[r];return $a(e,f,d)}function MI(e,t){const r=my(e.theme);return Object.keys(e).map(o=>YR(e,t,o,r)).reduce(Jh,{})}function Rn(e){return MI(e,i1)}Rn.propTypes={};Rn.filterProps=i1;function Ln(e){return MI(e,o1)}Ln.propTypes={};Ln.filterProps=o1;function AI(e=8,t=my({spacing:e})){if(e.mui)return e;const r=(...o)=>(o.length===0?[1]:o).map(d=>{const f=t(d);return typeof f=="number"?`${f}px`:f}).join(" ");return r.mui=!0,r}function gy(...e){const t=e.reduce((o,l)=>(l.filterProps.forEach(d=>{o[d]=l}),o),{}),r=o=>Object.keys(o).reduce((l,d)=>t[d]?Jh(l,t[d](o)):l,{});return r.propTypes={},r.filterProps=e.reduce((o,l)=>o.concat(l.filterProps),[]),r}function Qo(e){return typeof e!="number"?e:`${e}px solid`}function pa(e,t){return Kn({prop:e,themeKey:"borders",transform:t})}const QR=pa("border",Qo),eL=pa("borderTop",Qo),tL=pa("borderRight",Qo),rL=pa("borderBottom",Qo),nL=pa("borderLeft",Qo),iL=pa("borderColor"),oL=pa("borderTopColor"),aL=pa("borderRightColor"),sL=pa("borderBottomColor"),lL=pa("borderLeftColor"),cL=pa("outline",Qo),uL=pa("outlineColor"),yy=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Gp(e.theme,"shape.borderRadius",4),r=o=>({borderRadius:fc(t,o)});return $a(e,e.borderRadius,r)}return null};yy.propTypes={};yy.filterProps=["borderRadius"];gy(QR,eL,tL,rL,nL,iL,oL,aL,sL,lL,yy,cL,uL);const vy=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Gp(e.theme,"spacing",8),r=o=>({gap:fc(t,o)});return $a(e,e.gap,r)}return null};vy.propTypes={};vy.filterProps=["gap"];const _y=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Gp(e.theme,"spacing",8),r=o=>({columnGap:fc(t,o)});return $a(e,e.columnGap,r)}return null};_y.propTypes={};_y.filterProps=["columnGap"];const xy=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Gp(e.theme,"spacing",8),r=o=>({rowGap:fc(t,o)});return $a(e,e.rowGap,r)}return null};xy.propTypes={};xy.filterProps=["rowGap"];const dL=Kn({prop:"gridColumn"}),hL=Kn({prop:"gridRow"}),pL=Kn({prop:"gridAutoFlow"}),fL=Kn({prop:"gridAutoColumns"}),mL=Kn({prop:"gridAutoRows"}),gL=Kn({prop:"gridTemplateColumns"}),yL=Kn({prop:"gridTemplateRows"}),vL=Kn({prop:"gridTemplateAreas"}),_L=Kn({prop:"gridArea"});gy(vy,_y,xy,dL,hL,pL,fL,mL,gL,yL,vL,_L);function $u(e,t){return t==="grey"?t:e}const xL=Kn({prop:"color",themeKey:"palette",transform:$u}),bL=Kn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:$u}),wL=Kn({prop:"backgroundColor",themeKey:"palette",transform:$u});gy(xL,bL,wL);function Mo(e){return e<=1&&e!==0?`${e*100}%`:e}const SL=Kn({prop:"width",transform:Mo}),a1=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var l,d,f,c,b;const o=((f=(d=(l=e.theme)==null?void 0:l.breakpoints)==null?void 0:d.values)==null?void 0:f[r])||fy[r];return o?((b=(c=e.theme)==null?void 0:c.breakpoints)==null?void 0:b.unit)!=="px"?{maxWidth:`${o}${e.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:Mo(r)}};return $a(e,e.maxWidth,t)}return null};a1.filterProps=["maxWidth"];const CL=Kn({prop:"minWidth",transform:Mo}),kL=Kn({prop:"height",transform:Mo}),IL=Kn({prop:"maxHeight",transform:Mo}),TL=Kn({prop:"minHeight",transform:Mo});Kn({prop:"size",cssProperty:"width",transform:Mo});Kn({prop:"size",cssProperty:"height",transform:Mo});const PL=Kn({prop:"boxSizing"});gy(SL,a1,CL,kL,IL,TL,PL);const EL={border:{themeKey:"borders",transform:Qo},borderTop:{themeKey:"borders",transform:Qo},borderRight:{themeKey:"borders",transform:Qo},borderBottom:{themeKey:"borders",transform:Qo},borderLeft:{themeKey:"borders",transform:Qo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Qo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:yy},color:{themeKey:"palette",transform:$u},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:$u},backgroundColor:{themeKey:"palette",transform:$u},p:{style:Ln},pt:{style:Ln},pr:{style:Ln},pb:{style:Ln},pl:{style:Ln},px:{style:Ln},py:{style:Ln},padding:{style:Ln},paddingTop:{style:Ln},paddingRight:{style:Ln},paddingBottom:{style:Ln},paddingLeft:{style:Ln},paddingX:{style:Ln},paddingY:{style:Ln},paddingInline:{style:Ln},paddingInlineStart:{style:Ln},paddingInlineEnd:{style:Ln},paddingBlock:{style:Ln},paddingBlockStart:{style:Ln},paddingBlockEnd:{style:Ln},m:{style:Rn},mt:{style:Rn},mr:{style:Rn},mb:{style:Rn},ml:{style:Rn},mx:{style:Rn},my:{style:Rn},margin:{style:Rn},marginTop:{style:Rn},marginRight:{style:Rn},marginBottom:{style:Rn},marginLeft:{style:Rn},marginX:{style:Rn},marginY:{style:Rn},marginInline:{style:Rn},marginInlineStart:{style:Rn},marginInlineEnd:{style:Rn},marginBlock:{style:Rn},marginBlockStart:{style:Rn},marginBlockEnd:{style:Rn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:vy},rowGap:{style:xy},columnGap:{style:_y},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Mo},maxWidth:{style:a1},minWidth:{transform:Mo},height:{transform:Mo},maxHeight:{transform:Mo},minHeight:{transform:Mo},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},by=EL;function zL(...e){const t=e.reduce((o,l)=>o.concat(Object.keys(l)),[]),r=new Set(t);return e.every(o=>r.size===Object.keys(o).length)}function ML(e,t){return typeof e=="function"?e(t):e}function AL(){function e(r,o,l,d){const f={[r]:o,theme:l},c=d[r];if(!c)return{[r]:o};const{cssProperty:b=r,themeKey:w,transform:k,style:z}=c;if(o==null)return null;if(w==="typography"&&o==="inherit")return{[r]:o};const P=kl(l,w)||{};return z?z(f):$a(f,o,U=>{let H=mg(P,k,U);return U===H&&typeof U=="string"&&(H=mg(P,k,`${r}${U==="default"?"":It(U)}`,U)),b===!1?H:{[b]:H}})}function t(r){const{sx:o,theme:l={}}=r||{};if(!o)return null;const d=l.unstable_sxConfig??by;function f(c){let b=c;if(typeof c=="function")b=c(l);else if(typeof c!="object")return c;if(!b)return null;const w=EI(l.breakpoints),k=Object.keys(w);let z=w;return Object.keys(b).forEach(P=>{const V=ML(b[P],l);if(V!=null)if(typeof V=="object")if(d[P])z=Jh(z,e(P,V,l,d));else{const U=$a({theme:l},V,H=>({[P]:H}));zL(U,V)?z[P]=t({sx:V,theme:l}):z=Jh(z,U)}else z=Jh(z,e(P,V,l,d))}),FR(l,zI(k,z))}return Array.isArray(o)?o.map(f):f(o)}return t}const wy=AL();wy.filterProps=["sx"];function DI(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const DL=["breakpoints","palette","spacing","shape"];function s1(e={},...t){const{breakpoints:r={},palette:o={},spacing:l,shape:d={}}=e,f=Ut(e,DL),c=TI(r),b=AI(l);let w=oa({breakpoints:c,direction:"ltr",components:{},palette:q({mode:"light"},o),spacing:b,shape:q({},UR,d)},f);return w=PI(w),w.applyStyles=DI,w=t.reduce((k,z)=>oa(k,z),w),w.unstable_sxConfig=q({},by,f==null?void 0:f.unstable_sxConfig),w.unstable_sx=function(z){return wy({sx:z,theme:this})},w}function RL(e){return Object.keys(e).length===0}function RI(e=null){const t=R.useContext(dd);return!t||RL(t)?e:t}const LL=s1();function LI(e=LL){return RI(e)}function $L({styles:e,themeId:t,defaultTheme:r={}}){const o=LI(r),l=typeof e=="function"?e(t&&o[t]||o):e;return re.jsx(kI,{styles:l})}const BL=["sx"],OL=e=>{var o;const t={systemProps:{},otherProps:{}},r=((o=e==null?void 0:e.theme)==null?void 0:o.unstable_sxConfig)??by;return Object.keys(e).forEach(l=>{r[l]?t.systemProps[l]=e[l]:t.otherProps[l]=e[l]}),t};function $I(e){const{sx:t}=e,r=Ut(e,BL),{systemProps:o,otherProps:l}=OL(r);let d;return Array.isArray(t)?d=[o,...t]:typeof t=="function"?d=(...f)=>{const c=t(...f);return ll(c)?q({},o,c):o}:d=q({},o,t),q({},l,{sx:d})}const VS=e=>e,FL=()=>{let e=VS;return{configure(t){e=t},generate(t){return e(t)},reset(){e=VS}}},NL=FL();function BI(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(r=BI(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function mi(){for(var e,t,r=0,o="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=BI(e))&&(o&&(o+=" "),o+=t);return o}const OI={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function l1(e,t,r="Mui"){const o=OI[t];return o?`${r}-${o}`:`${NL.generate(e)}-${t}`}function jL(e,t,r="Mui"){const o={};return t.forEach(l=>{o[l]=l1(e,l,r)}),o}var FI={exports:{}},Yr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c1=Symbol.for("react.element"),u1=Symbol.for("react.portal"),Sy=Symbol.for("react.fragment"),Cy=Symbol.for("react.strict_mode"),ky=Symbol.for("react.profiler"),Iy=Symbol.for("react.provider"),Ty=Symbol.for("react.context"),VL=Symbol.for("react.server_context"),Py=Symbol.for("react.forward_ref"),Ey=Symbol.for("react.suspense"),zy=Symbol.for("react.suspense_list"),My=Symbol.for("react.memo"),Ay=Symbol.for("react.lazy"),UL=Symbol.for("react.offscreen"),NI;NI=Symbol.for("react.module.reference");function fa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case c1:switch(e=e.type,e){case Sy:case ky:case Cy:case Ey:case zy:return e;default:switch(e=e&&e.$$typeof,e){case VL:case Ty:case Py:case Ay:case My:case Iy:return e;default:return t}}case u1:return t}}}Yr.ContextConsumer=Ty;Yr.ContextProvider=Iy;Yr.Element=c1;Yr.ForwardRef=Py;Yr.Fragment=Sy;Yr.Lazy=Ay;Yr.Memo=My;Yr.Portal=u1;Yr.Profiler=ky;Yr.StrictMode=Cy;Yr.Suspense=Ey;Yr.SuspenseList=zy;Yr.isAsyncMode=function(){return!1};Yr.isConcurrentMode=function(){return!1};Yr.isContextConsumer=function(e){return fa(e)===Ty};Yr.isContextProvider=function(e){return fa(e)===Iy};Yr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===c1};Yr.isForwardRef=function(e){return fa(e)===Py};Yr.isFragment=function(e){return fa(e)===Sy};Yr.isLazy=function(e){return fa(e)===Ay};Yr.isMemo=function(e){return fa(e)===My};Yr.isPortal=function(e){return fa(e)===u1};Yr.isProfiler=function(e){return fa(e)===ky};Yr.isStrictMode=function(e){return fa(e)===Cy};Yr.isSuspense=function(e){return fa(e)===Ey};Yr.isSuspenseList=function(e){return fa(e)===zy};Yr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Sy||e===ky||e===Cy||e===Ey||e===zy||e===UL||typeof e=="object"&&e!==null&&(e.$$typeof===Ay||e.$$typeof===My||e.$$typeof===Iy||e.$$typeof===Ty||e.$$typeof===Py||e.$$typeof===NI||e.getModuleId!==void 0)};Yr.typeOf=fa;FI.exports=Yr;var US=FI.exports;const HL=["ownerState"],WL=["variants"],GL=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function qL(e){return Object.keys(e).length===0}function ZL(e){return typeof e=="string"&&e.charCodeAt(0)>96}function M0(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const KL=s1(),XL=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Sm({defaultTheme:e,theme:t,themeId:r}){return qL(t)?e:t[r]||t}function JL(e){return e?(t,r)=>r[e]:null}function Xm(e,t){let{ownerState:r}=t,o=Ut(t,HL);const l=typeof e=="function"?e(q({ownerState:r},o)):e;if(Array.isArray(l))return l.flatMap(d=>Xm(d,q({ownerState:r},o)));if(l&&typeof l=="object"&&Array.isArray(l.variants)){const{variants:d=[]}=l;let c=Ut(l,WL);return d.forEach(b=>{let w=!0;typeof b.props=="function"?w=b.props(q({ownerState:r},o,r)):Object.keys(b.props).forEach(k=>{(r==null?void 0:r[k])!==b.props[k]&&o[k]!==b.props[k]&&(w=!1)}),w&&(Array.isArray(c)||(c=[c]),c.push(typeof b.style=="function"?b.style(q({ownerState:r},o,r)):b.style))}),c}return l}function jI(e={}){const{themeId:t,defaultTheme:r=KL,rootShouldForwardProp:o=M0,slotShouldForwardProp:l=M0}=e,d=f=>wy(q({},f,{theme:Sm(q({},f,{defaultTheme:r,themeId:t}))}));return d.__mui_systemSx=!0,(f,c={})=>{$R(f,ne=>ne.filter(he=>!(he!=null&&he.__mui_systemSx)));const{name:b,slot:w,skipVariantsResolver:k,skipSx:z,overridesResolver:P=JL(XL(w))}=c,V=Ut(c,GL),U=k!==void 0?k:w&&w!=="Root"&&w!=="root"||!1,H=z||!1;let X,B=M0;w==="Root"||w==="root"?B=o:w?B=l:ZL(f)&&(B=void 0);const L=LR(f,q({shouldForwardProp:B,label:X},V)),G=ne=>typeof ne=="function"&&ne.__emotion_real!==ne||ll(ne)?he=>Xm(ne,q({},he,{theme:Sm({theme:he.theme,defaultTheme:r,themeId:t})})):ne,te=(ne,...he)=>{let Z=G(ne);const ue=he?he.map(G):[];b&&P&&ue.push(Ee=>{const Se=Sm(q({},Ee,{defaultTheme:r,themeId:t}));if(!Se.components||!Se.components[b]||!Se.components[b].styleOverrides)return null;const ze=Se.components[b].styleOverrides,We={};return Object.entries(ze).forEach(([Fe,Me])=>{We[Fe]=Xm(Me,q({},Ee,{theme:Se}))}),P(Ee,We)}),b&&!U&&ue.push(Ee=>{var We,Fe;const Se=Sm(q({},Ee,{defaultTheme:r,themeId:t})),ze=(Fe=(We=Se==null?void 0:Se.components)==null?void 0:We[b])==null?void 0:Fe.variants;return Xm({variants:ze},q({},Ee,{theme:Se}))}),H||ue.push(d);const Ce=ue.length-he.length;if(Array.isArray(ne)&&Ce>0){const Ee=new Array(Ce).fill("");Z=[...ne,...Ee],Z.raw=[...ne.raw,...Ee]}const ye=L(Z,...ue);return f.muiName&&(ye.muiName=f.muiName),ye};return L.withConfig&&(te.withConfig=L.withConfig),te}}const YL=jI();function VI(e,t){const r=q({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))r[o]=q({},e[o],r[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const l=e[o]||{},d=t[o];r[o]={},!d||!Object.keys(d)?r[o]=l:!l||!Object.keys(l)?r[o]=d:(r[o]=q({},d),Object.keys(l).forEach(f=>{r[o][f]=VI(l[f],d[f])}))}else r[o]===void 0&&(r[o]=e[o])}),r}function QL(e){const{theme:t,name:r,props:o}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?o:VI(t.components[r].defaultProps,o)}function UI({props:e,name:t,defaultTheme:r,themeId:o}){let l=LI(r);return o&&(l=l[o]||l),QL({theme:l,name:t,props:e})}const Ps=typeof window<"u"?R.useLayoutEffect:R.useEffect;function e5(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,l)=>l<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function HI(e){if(e.type)return e;if(e.charAt(0)==="#")return HI(e5(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(pp(9,e));let o=e.substring(t+1,e.length-1),l;if(r==="color"){if(o=o.split(" "),l=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(l)===-1)throw new Error(pp(10,l))}else o=o.split(",");return o=o.map(d=>parseFloat(d)),{type:r,values:o,colorSpace:l}}const ec=e=>{const t=HI(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};function HS(...e){return e.reduce((t,r)=>r==null?t:function(...l){t.apply(this,l),r.apply(this,l)},()=>{})}function d1(e,t){var r,o,l;return R.isValidElement(e)&&t.indexOf(e.type.muiName??((l=(o=(r=e.type)==null?void 0:r._payload)==null?void 0:o.value)==null?void 0:l.muiName))!==-1}function Qa(e){return e&&e.ownerDocument||document}function h1(e){return Qa(e).defaultView||window}function gg(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let WS=0;function t5(e){const[t,r]=R.useState(e),o=e||t;return R.useEffect(()=>{t==null&&(WS+=1,r(`mui-${WS}`))},[t]),o}const GS=hg.useId;function Co(e){if(GS!==void 0){const t=GS();return e??t}return t5(e)}function Bu({controlled:e,default:t,name:r,state:o="value"}){const{current:l}=R.useRef(e!==void 0),[d,f]=R.useState(t),c=l?e:d,b=R.useCallback(w=>{l||f(w)},[]);return[c,b]}function pl(e){const t=R.useRef(e);return Ps(()=>{t.current=e}),R.useRef((...r)=>(0,t.current)(...r)).current}function Kr(...e){return R.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{gg(r,t)})},e)}const qS={};function r5(e,t){const r=R.useRef(qS);return r.current===qS&&(r.current=e(t)),r}const n5=[];function i5(e){R.useEffect(e,n5)}class qp{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new qp}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function Cm(){const e=r5(qp.create).current;return i5(e.disposeEffect),e}let Dy=!0,I_=!1;const o5=new qp,a5={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function s5(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&a5[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function l5(e){e.metaKey||e.altKey||e.ctrlKey||(Dy=!0)}function A0(){Dy=!1}function c5(){this.visibilityState==="hidden"&&I_&&(Dy=!0)}function u5(e){e.addEventListener("keydown",l5,!0),e.addEventListener("mousedown",A0,!0),e.addEventListener("pointerdown",A0,!0),e.addEventListener("touchstart",A0,!0),e.addEventListener("visibilitychange",c5,!0)}function d5(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return Dy||s5(t)}function p1(){const e=R.useCallback(l=>{l!=null&&u5(l.ownerDocument)},[]),t=R.useRef(!1);function r(){return t.current?(I_=!0,o5.start(100,()=>{I_=!1}),t.current=!1,!0):!1}function o(l){return d5(l)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:o,onBlur:r,ref:e}}function h5(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const p5=e=>{const t=R.useRef({});return R.useEffect(()=>{t.current=e}),t.current},f5={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},m5=f5;function Lr(e,t,r=void 0){const o={};return Object.keys(e).forEach(l=>{o[l]=e[l].reduce((d,f)=>{if(f){const c=t(f);c!==""&&d.push(c),r&&r[f]&&d.push(r[f])}return d},[]).join(" ")}),o}const g5=R.createContext(null),WI=g5;function f1(){return R.useContext(WI)}const y5=typeof Symbol=="function"&&Symbol.for,v5=y5?Symbol.for("mui.nested"):"__THEME_NESTED__";function _5(e,t){return typeof t=="function"?t(e):q({},e,t)}function x5(e){const{children:t,theme:r}=e,o=f1(),l=R.useMemo(()=>{const d=o===null?r:_5(o,r);return d!=null&&(d[v5]=o!==null),d},[r,o]);return re.jsx(WI.Provider,{value:l,children:t})}const b5=["value"],w5=R.createContext();function S5(e){let{value:t}=e,r=Ut(e,b5);return re.jsx(w5.Provider,q({value:t??!0},r))}const ZS={};function KS(e,t,r,o=!1){return R.useMemo(()=>{const l=e&&t[e]||t;if(typeof r=="function"){const d=r(l),f=e?q({},t,{[e]:d}):d;return o?()=>f:f}return e?q({},t,{[e]:r}):q({},t,r)},[e,t,r,o])}function C5(e){const{children:t,theme:r,themeId:o}=e,l=RI(ZS),d=f1()||ZS,f=KS(o,l,r),c=KS(o,d,r,!0),b=f.direction==="rtl";return re.jsx(x5,{theme:c,children:re.jsx(dd.Provider,{value:f,children:re.jsx(S5,{value:b,children:t})})})}const m1="mode",g1="color-scheme",GI="data-color-scheme";function k5(e){const{defaultMode:t="light",defaultLightColorScheme:r="light",defaultDarkColorScheme:o="dark",modeStorageKey:l=m1,colorSchemeStorageKey:d=g1,attribute:f=GI,colorSchemeNode:c="document.documentElement"}=e||{};return re.jsx("script",{dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${l}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${d}-dark') || '${o}';
    } else {
      colorScheme = localStorage.getItem('${d}-light') || '${r}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${d}-light') || '${r}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${d}-dark') || '${o}';
  }
  if (colorScheme) {
    ${c}.setAttribute('${f}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function XS(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function qI(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function I5(e){return qI(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function D0(e,t){if(typeof window>"u")return;let r;try{r=localStorage.getItem(e)||void 0,r||localStorage.setItem(e,t)}catch{}return r||t}function T5(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:o,supportedColorSchemes:l=[],modeStorageKey:d=m1,colorSchemeStorageKey:f=g1,storageWindow:c=typeof window>"u"?void 0:window}=e,b=l.join(","),[w,k]=R.useState(()=>{const X=D0(d,t),B=D0(`${f}-light`,r),L=D0(`${f}-dark`,o);return{mode:X,systemMode:XS(X),lightColorScheme:B,darkColorScheme:L}}),z=I5(w),P=R.useCallback(X=>{k(B=>{if(X===B.mode)return B;const L=X??t;try{localStorage.setItem(d,L)}catch{}return q({},B,{mode:L,systemMode:XS(L)})})},[d,t]),V=R.useCallback(X=>{X?typeof X=="string"?X&&!b.includes(X)?console.error(`\`${X}\` does not exist in \`theme.colorSchemes\`.`):k(B=>{const L=q({},B);return qI(B,G=>{try{localStorage.setItem(`${f}-${G}`,X)}catch{}G==="light"&&(L.lightColorScheme=X),G==="dark"&&(L.darkColorScheme=X)}),L}):k(B=>{const L=q({},B),G=X.light===null?r:X.light,te=X.dark===null?o:X.dark;if(G)if(!b.includes(G))console.error(`\`${G}\` does not exist in \`theme.colorSchemes\`.`);else{L.lightColorScheme=G;try{localStorage.setItem(`${f}-light`,G)}catch{}}if(te)if(!b.includes(te))console.error(`\`${te}\` does not exist in \`theme.colorSchemes\`.`);else{L.darkColorScheme=te;try{localStorage.setItem(`${f}-dark`,te)}catch{}}return L}):k(B=>{try{localStorage.setItem(`${f}-light`,r),localStorage.setItem(`${f}-dark`,o)}catch{}return q({},B,{lightColorScheme:r,darkColorScheme:o})})},[b,f,r,o]),U=R.useCallback(X=>{w.mode==="system"&&k(B=>{const L=X!=null&&X.matches?"dark":"light";return B.systemMode===L?B:q({},B,{systemMode:L})})},[w.mode]),H=R.useRef(U);return H.current=U,R.useEffect(()=>{const X=(...L)=>H.current(...L),B=window.matchMedia("(prefers-color-scheme: dark)");return B.addListener(X),X(B),()=>{B.removeListener(X)}},[]),R.useEffect(()=>{if(c){const X=B=>{const L=B.newValue;typeof B.key=="string"&&B.key.startsWith(f)&&(!L||b.match(L))&&(B.key.endsWith("light")&&V({light:L}),B.key.endsWith("dark")&&V({dark:L})),B.key===d&&(!L||["light","dark","system"].includes(L))&&P(L||t)};return c.addEventListener("storage",X),()=>{c.removeEventListener("storage",X)}}},[V,P,d,f,b,t,c]),q({},w,{colorScheme:z,setMode:P,setColorScheme:V})}const P5=["colorSchemes","components","cssVarPrefix"],E5="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function z5(e){const{themeId:t,theme:r={},attribute:o=GI,modeStorageKey:l=m1,colorSchemeStorageKey:d=g1,defaultMode:f="light",defaultColorScheme:c,disableTransitionOnChange:b=!1,resolveTheme:w}=e;(!r.colorSchemes||typeof c=="string"&&!r.colorSchemes[c]||typeof c=="object"&&!r.colorSchemes[c==null?void 0:c.light]||typeof c=="object"&&!r.colorSchemes[c==null?void 0:c.dark])&&console.error(`MUI: \`${c}\` does not exist in \`theme.colorSchemes\`.`);const k=R.createContext(void 0),z=()=>{const X=R.useContext(k);if(!X)throw new Error(pp(19));return X};function P(X){var kr,Pr;const{children:B,theme:L=r,modeStorageKey:G=l,colorSchemeStorageKey:te=d,attribute:ne=o,defaultMode:he=f,defaultColorScheme:Z=c,disableTransitionOnChange:ue=b,storageWindow:Ce=typeof window>"u"?void 0:window,documentNode:ye=typeof document>"u"?void 0:document,colorSchemeNode:Ee=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:Se=":root",disableNestedContext:ze=!1,disableStyleSheetGeneration:We=!1}=X,Fe=R.useRef(!1),Me=f1(),Oe=R.useContext(k),ke=!!Oe&&!ze,Ge=L[t],Ke=Ge||L,{colorSchemes:ht={},components:vt={},cssVarPrefix:gt}=Ke,Ct=Ut(Ke,P5),At=Object.keys(ht),Zt=typeof Z=="string"?Z:Z.light,kt=typeof Z=="string"?Z:Z.dark,{mode:$e,setMode:rt,systemMode:pt,lightColorScheme:Dt,darkColorScheme:Mt,colorScheme:gr,setColorScheme:Cr}=T5({supportedColorSchemes:At,defaultLightColorScheme:Zt,defaultDarkColorScheme:kt,modeStorageKey:G,colorSchemeStorageKey:te,defaultMode:he,storageWindow:Ce});let lr=$e,yt=gr;ke&&(lr=Oe.mode,yt=Oe.colorScheme);const Dr=lr||(he==="system"?f:he),er=yt||(Dr==="dark"?kt:Zt),Fr=((kr=Ct.generateThemeVars)==null?void 0:kr.call(Ct))||Ct.vars,Ae=q({},Ct,{components:vt,colorSchemes:ht,cssVarPrefix:gt,vars:Fr});typeof Ae.generateSpacing=="function"&&(Ae.spacing=Ae.generateSpacing()),Object.entries(ht).forEach(([sr,nr])=>{sr===er&&(Object.keys(nr).forEach(rr=>{nr[rr]&&typeof nr[rr]=="object"?Ae[rr]=q({},Ae[rr],nr[rr]):Ae[rr]=nr[rr]}),Ae.palette&&(Ae.palette.colorScheme=sr))});const cr=typeof Z=="string"?Z:he==="dark"?Z.dark:Z.light;L.defaultColorScheme=cr,L.colorSchemeSelector=Se,L.attribute=ne,Ae.getColorSchemeSelector||(Ae.getColorSchemeSelector=sr=>`[${ne}="${sr}"] &`),R.useEffect(()=>{yt&&Ee&&Ee.setAttribute(ne,yt)},[yt,ne,Ee]),R.useEffect(()=>{let sr;if(ue&&Fe.current&&ye){const nr=ye.createElement("style");nr.appendChild(ye.createTextNode(E5)),ye.head.appendChild(nr),window.getComputedStyle(ye.body),sr=setTimeout(()=>{ye.head.removeChild(nr)},1)}return()=>{clearTimeout(sr)}},[yt,ue,ye]),R.useEffect(()=>(Fe.current=!0,()=>{Fe.current=!1}),[]);const ir=R.useMemo(()=>({allColorSchemes:At,colorScheme:yt,darkColorScheme:Mt,lightColorScheme:Dt,mode:lr,setColorScheme:Cr,setMode:rt,systemMode:pt}),[At,yt,Mt,Dt,lr,Cr,rt,pt]);let Ft=!0;(We||ke&&(Me==null?void 0:Me.cssVarPrefix)===gt)&&(Ft=!1);const qt=re.jsxs(R.Fragment,{children:[Ft&&re.jsx(R.Fragment,{children:(((Pr=Ae.generateStyleSheets)==null?void 0:Pr.call(Ae))||[]).map((sr,nr)=>re.jsx(kI,{styles:sr},nr))}),re.jsx(C5,{themeId:Ge?t:void 0,theme:w?w(Ae):Ae,children:B})]});return ke?qt:re.jsx(k.Provider,{value:ir,children:qt})}const V=typeof c=="string"?c:c.light,U=typeof c=="string"?c:c.dark;return{CssVarsProvider:P,useColorScheme:z,getInitColorSchemeScript:X=>k5(q({attribute:o,colorSchemeStorageKey:d,defaultMode:f,defaultLightColorScheme:V,defaultDarkColorScheme:U,modeStorageKey:l},X))}}function y1(e=""){function t(...o){if(!o.length)return"";const l=o[0];return typeof l=="string"&&!l.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${l}${t(...o.slice(1))})`:`, ${l}`}return(o,...l)=>`var(--${e?`${e}-`:""}${o}${t(...l)})`}const JS=(e,t,r,o=[])=>{let l=e;t.forEach((d,f)=>{f===t.length-1?Array.isArray(l)?l[Number(d)]=r:l&&typeof l=="object"&&(l[d]=r):l&&typeof l=="object"&&(l[d]||(l[d]=o.includes(d)?[]:{}),l=l[d])})},M5=(e,t,r)=>{function o(l,d=[],f=[]){Object.entries(l).forEach(([c,b])=>{(!r||r&&!r([...d,c]))&&b!=null&&(typeof b=="object"&&Object.keys(b).length>0?o(b,[...d,c],Array.isArray(b)?[...f,c]:f):t([...d,c],b,f))})}o(e)},A5=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(o=>e.includes(o))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function R0(e,t){const{prefix:r,shouldSkipGeneratingVar:o}=t||{},l={},d={},f={};return M5(e,(c,b,w)=>{if((typeof b=="string"||typeof b=="number")&&(!o||!o(c,b))){const k=`--${r?`${r}-`:""}${c.join("-")}`,z=A5(c,b);Object.assign(l,{[k]:z}),JS(d,c,`var(${k})`,w),JS(f,c,`var(${k}, ${z})`,w)}},c=>c[0]==="vars"),{css:l,vars:d,varsWithDefaults:f}}function yp(e){"@babel/helpers - typeof";return yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yp(e)}function D5(e,t){if(yp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(yp(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YS(e){var t=D5(e,"string");return yp(t)=="symbol"?t:t+""}const R5=["getSelector"],L5=["colorSchemes","components","defaultColorScheme"];function $5(e,t={}){let{getSelector:r}=t,o=Ut(t,R5);const{colorSchemes:l={},defaultColorScheme:d="light"}=e,f=Ut(e,L5),{vars:c,css:b,varsWithDefaults:w}=R0(f,o);let k=w;const z={},{[d]:P}=l,V=Ut(l,[d].map(YS));if(Object.entries(V||{}).forEach(([X,B])=>{const{vars:L,css:G,varsWithDefaults:te}=R0(B,o);k=oa(k,te),z[X]={css:G,vars:L}}),P){const{css:X,vars:B,varsWithDefaults:L}=R0(P,o);k=oa(k,L),z[d]={css:X,vars:B}}return{vars:k,generateThemeVars:()=>{let X=q({},c);return Object.entries(z).forEach(([,{vars:B}])=>{X=oa(X,B)}),X},generateStyleSheets:()=>{const X=[],B=e.defaultColorScheme||"light";function L(ne,he){Object.keys(he).length&&X.push(typeof ne=="string"?{[ne]:q({},he)}:ne)}L((r==null?void 0:r(void 0,q({},b)))||":root",b);const{[B]:G}=z,te=Ut(z,[B].map(YS));if(G){const{css:ne}=G;L((r==null?void 0:r(B,q({},ne)))||`[${e.attribute||"data-color-scheme"}="${B}"]`,ne)}return Object.entries(te).forEach(([ne,{css:he}])=>{L((r==null?void 0:r(ne,q({},he)))||`[${e.attribute||"data-color-scheme"}="${ne}"]`,he)}),X}}}const B5=["component","direction","spacing","divider","children","className","useFlexGap"],O5=s1(),F5=YL("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function N5(e){return UI({props:e,name:"MuiStack",defaultTheme:O5})}function j5(e,t){const r=R.Children.toArray(e).filter(Boolean);return r.reduce((o,l,d)=>(o.push(l),d<r.length-1&&o.push(R.cloneElement(t,{key:`separator-${d}`})),o),[])}const V5=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],U5=({ownerState:e,theme:t})=>{let r=q({display:"flex",flexDirection:"column"},$a({theme:t},z0({values:e.direction,breakpoints:t.breakpoints.values}),o=>({flexDirection:o})));if(e.spacing){const o=my(t),l=Object.keys(t.breakpoints.values).reduce((b,w)=>((typeof e.spacing=="object"&&e.spacing[w]!=null||typeof e.direction=="object"&&e.direction[w]!=null)&&(b[w]=!0),b),{}),d=z0({values:e.direction,base:l}),f=z0({values:e.spacing,base:l});typeof d=="object"&&Object.keys(d).forEach((b,w,k)=>{if(!d[b]){const P=w>0?d[k[w-1]]:"column";d[b]=P}}),r=oa(r,$a({theme:t},f,(b,w)=>e.useFlexGap?{gap:fc(o,b)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${V5(w?d[w]:e.direction)}`]:fc(o,b)}}))}return r=WR(t.breakpoints,r),r};function H5(e={}){const{createStyledComponent:t=F5,useThemeProps:r=N5,componentName:o="MuiStack"}=e,l=()=>Lr({root:["root"]},b=>l1(o,b),{}),d=t(U5);return R.forwardRef(function(b,w){const k=r(b),z=$I(k),{component:P="div",direction:V="column",spacing:U=0,divider:H,children:X,className:B,useFlexGap:L=!1}=z,G=Ut(z,B5),te={direction:V,spacing:U,useFlexGap:L},ne=l();return re.jsx(d,q({as:P,ownerState:te,ref:w,className:mi(ne.root,B)},G,{children:H?j5(X,H):X}))})}const W5=q({},by,{borderRadius:{themeKey:"radius"},boxShadow:{themeKey:"shadow"},fontFamily:{themeKey:"fontFamily"},fontSize:{themeKey:"fontSize"},fontWeight:{themeKey:"fontWeight"},letterSpacing:{themeKey:"letterSpacing"},lineHeight:{themeKey:"lineHeight"}}),G5=W5;function q5(e){var t;return!!e[0].match(/^(typography|variants|breakpoints)$/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/^(mode)$/))||e[0]==="focus"&&e[1]!=="thickness"}const Br=(e,t)=>l1(e,t,"Mui"),Ar=(e,t)=>jL(e,t,"Mui"),Z5=e=>e&&typeof e=="object"&&Object.keys(e).some(t=>{var r;return(r=t.match)==null?void 0:r.call(t,/^(plain(Hover|Active|Disabled)?(Color|Bg)|outlined(Hover|Active|Disabled)?(Color|Border|Bg)|soft(Hover|Active|Disabled)?(Color|Bg)|solid(Hover|Active|Disabled)?(Color|Bg))$/)}),QS=(e,t,r)=>{t.includes("Color")&&(e.color=r),t.includes("Bg")&&(e.backgroundColor=r),t.includes("Border")&&(e.borderColor=r)},e2=(e,t,r)=>{const o={};return Object.entries(t||{}).forEach(([l,d])=>{if(l.match(new RegExp(`${e}(color|bg|border)`,"i"))&&d){const f=r?r(l):d;l.includes("Disabled")&&(o.pointerEvents="none",o.cursor="default",o["--Icon-color"]="currentColor"),l.match(/(Hover|Active|Disabled)/)||(o["--variant-borderWidth"]||(o["--variant-borderWidth"]="0px"),l.includes("Border")&&(o["--variant-borderWidth"]="1px",o.border="var(--variant-borderWidth) solid")),QS(o,l,f)}}),o},$i=(e,t)=>{let r={};if(t){const{getCssVar:o,palette:l}=t;Object.entries(l).forEach(d=>{const[f,c]=d;Z5(c)&&typeof c=="object"&&(r=q({},r,{[f]:e2(e,c,b=>`var(--variant-${b}, ${o(`palette-${f}-${b}`,l[f][b])})`)}))})}return r.context=e2(e,{plainColor:"var(--variant-plainColor)",plainHoverColor:"var(--variant-plainHoverColor)",plainHoverBg:"var(--variant-plainHoverBg)",plainActiveBg:"var(--variant-plainActiveBg)",plainDisabledColor:"var(--variant-plainDisabledColor)",outlinedColor:"var(--variant-outlinedColor)",outlinedBorder:"var(--variant-outlinedBorder)",outlinedHoverColor:"var(--variant-outlinedHoverColor)",outlinedHoverBorder:"var(--variant-outlinedHoverBorder)",outlinedHoverBg:"var(--variant-outlinedHoverBg)",outlinedActiveBg:"var(--variant-outlinedActiveBg)",outlinedDisabledColor:"var(--variant-outlinedDisabledColor)",outlinedDisabledBorder:"var(--variant-outlinedDisabledBorder)",softColor:"var(--variant-softColor)",softBg:"var(--variant-softBg)",softHoverColor:"var(--variant-softHoverColor)",softHoverBg:"var(--variant-softHoverBg)",softActiveBg:"var(--variant-softActiveBg)",softDisabledColor:"var(--variant-softDisabledColor)",softDisabledBg:"var(--variant-softDisabledBg)",solidColor:"var(--variant-solidColor)",solidBg:"var(--variant-solidBg)",solidHoverBg:"var(--variant-solidHoverBg)",solidActiveBg:"var(--variant-solidActiveBg)",solidDisabledColor:"var(--variant-solidDisabledColor)",solidDisabledBg:"var(--variant-solidDisabledBg)"}),r},K5=["cssVarPrefix","breakpoints","spacing","components","variants","shouldSkipGeneratingVar","getSelector"],X5=["colorSchemes"];function ZI(e){return typeof e=="number"?`${e}px`:typeof e=="string"?e:typeof e=="function"?ZI(e(1)):Array.isArray(e)?e:"8px"}const J5=(e="joy")=>y1(e);function KI(e){var Ke,ht,vt,gt,Ct,At,Zt,kt;const t=e||{},{cssVarPrefix:r="joy",breakpoints:o,spacing:l,components:d,variants:f,shouldSkipGeneratingVar:c=q5,getSelector:b}=t,w=Ut(t,K5),k=J5(r),z={primary:Ph.blue,neutral:Ph.grey,danger:Ph.red,success:Ph.green,warning:Ph.yellow,common:{white:"#FFF",black:"#000"}},P=$e=>{var Mt;const rt=$e.split("-"),pt=rt[1],Dt=rt[2];return k($e,(Mt=z[pt])==null?void 0:Mt[Dt])},V=$e=>({plainColor:P(`palette-${$e}-500`),plainHoverBg:P(`palette-${$e}-100`),plainActiveBg:P(`palette-${$e}-200`),plainDisabledColor:P("palette-neutral-400"),outlinedColor:P(`palette-${$e}-500`),outlinedBorder:P(`palette-${$e}-300`),outlinedHoverBg:P(`palette-${$e}-100`),outlinedActiveBg:P(`palette-${$e}-200`),outlinedDisabledColor:P("palette-neutral-400"),outlinedDisabledBorder:P("palette-neutral-200"),softColor:P(`palette-${$e}-700`),softBg:P(`palette-${$e}-100`),softHoverBg:P(`palette-${$e}-200`),softActiveColor:P(`palette-${$e}-800`),softActiveBg:P(`palette-${$e}-300`),softDisabledColor:P("palette-neutral-400"),softDisabledBg:P("palette-neutral-50"),solidColor:P("palette-common-white"),solidBg:P(`palette-${$e}-500`),solidHoverBg:P(`palette-${$e}-600`),solidActiveBg:P(`palette-${$e}-700`),solidDisabledColor:P("palette-neutral-400"),solidDisabledBg:P("palette-neutral-100")}),U=$e=>({plainColor:P(`palette-${$e}-300`),plainHoverBg:P(`palette-${$e}-800`),plainActiveBg:P(`palette-${$e}-700`),plainDisabledColor:P("palette-neutral-500"),outlinedColor:P(`palette-${$e}-200`),outlinedBorder:P(`palette-${$e}-700`),outlinedHoverBg:P(`palette-${$e}-800`),outlinedActiveBg:P(`palette-${$e}-700`),outlinedDisabledColor:P("palette-neutral-500"),outlinedDisabledBorder:P("palette-neutral-800"),softColor:P(`palette-${$e}-200`),softBg:P(`palette-${$e}-800`),softHoverBg:P(`palette-${$e}-700`),softActiveColor:P(`palette-${$e}-100`),softActiveBg:P(`palette-${$e}-600`),softDisabledColor:P("palette-neutral-500"),softDisabledBg:P("palette-neutral-800"),solidColor:P("palette-common-white"),solidBg:P(`palette-${$e}-500`),solidHoverBg:P(`palette-${$e}-600`),solidActiveBg:P(`palette-${$e}-700`),solidDisabledColor:P("palette-neutral-500"),solidDisabledBg:P("palette-neutral-800")}),H={palette:{mode:"light",primary:q({},z.primary,V("primary")),neutral:q({},z.neutral,V("neutral"),{plainColor:P("palette-neutral-700"),plainHoverColor:P("palette-neutral-900"),outlinedColor:P("palette-neutral-700")}),danger:q({},z.danger,V("danger")),success:q({},z.success,V("success")),warning:q({},z.warning,V("warning")),common:{white:"#FFF",black:"#000"},text:{primary:P("palette-neutral-800"),secondary:P("palette-neutral-700"),tertiary:P("palette-neutral-600"),icon:P("palette-neutral-500")},background:{body:P("palette-common-white"),surface:P("palette-neutral-50"),popup:P("palette-common-white"),level1:P("palette-neutral-100"),level2:P("palette-neutral-200"),level3:P("palette-neutral-300"),tooltip:P("palette-neutral-500"),backdrop:`rgba(${k("palette-neutral-darkChannel",ec(z.neutral[900]))} / 0.25)`},divider:`rgba(${k("palette-neutral-mainChannel",ec(z.neutral[500]))} / 0.2)`,focusVisible:P("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"21 21 21",shadowOpacity:"0.08"},X={palette:{mode:"dark",primary:q({},z.primary,U("primary")),neutral:q({},z.neutral,U("neutral"),{plainColor:P("palette-neutral-300"),plainHoverColor:P("palette-neutral-300")}),danger:q({},z.danger,U("danger")),success:q({},z.success,U("success")),warning:q({},z.warning,U("warning")),common:{white:"#FFF",black:"#000"},text:{primary:P("palette-neutral-100"),secondary:P("palette-neutral-300"),tertiary:P("palette-neutral-400"),icon:P("palette-neutral-400")},background:{body:P("palette-common-black"),surface:P("palette-neutral-900"),popup:P("palette-common-black"),level1:P("palette-neutral-800"),level2:P("palette-neutral-700"),level3:P("palette-neutral-600"),tooltip:P("palette-neutral-600"),backdrop:`rgba(${k("palette-neutral-darkChannel",ec(z.neutral[50]))} / 0.25)`},divider:`rgba(${k("palette-neutral-mainChannel",ec(z.neutral[500]))} / 0.16)`,focusVisible:P("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"0 0 0",shadowOpacity:"0.6"},B='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',L=q({body:`"Inter", ${k(`fontFamily-fallback, ${B}`)}`,display:`"Inter", ${k(`fontFamily-fallback, ${B}`)}`,code:"Source Code Pro,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace",fallback:B},w.fontFamily),G=q({sm:300,md:500,lg:600,xl:700},w.fontWeight),te=q({xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem",xl2:"1.5rem",xl3:"1.875rem",xl4:"2.25rem"},w.fontSize),ne=q({xs:"1.33334",sm:"1.42858",md:"1.5",lg:"1.55556",xl:"1.66667"},w.lineHeight),he=((ht=(Ke=w.colorSchemes)==null?void 0:Ke.light)==null?void 0:ht.shadowRing)??H.shadowRing,Z=((gt=(vt=w.colorSchemes)==null?void 0:vt.light)==null?void 0:gt.shadowChannel)??H.shadowChannel,ue=((At=(Ct=w.colorSchemes)==null?void 0:Ct.light)==null?void 0:At.shadowOpacity)??H.shadowOpacity,Ce={colorSchemes:{light:H,dark:X},fontSize:te,fontFamily:L,fontWeight:G,focus:{thickness:"2px",selector:`&.${Br("","focusVisible")}, &:focus-visible`,default:{outlineOffset:`var(--focus-outline-offset, ${k("focus-thickness",((Zt=w.focus)==null?void 0:Zt.thickness)??"2px")})`,outline:`${k("focus-thickness",((kt=w.focus)==null?void 0:kt.thickness)??"2px")} solid ${k("palette-focusVisible",z.primary[500])}`}},lineHeight:ne,radius:{xs:"2px",sm:"6px",md:"8px",lg:"12px",xl:"16px"},shadow:{xs:`${k("shadowRing",he)}, 0px 1px 2px 0px rgba(${k("shadowChannel",Z)} / ${k("shadowOpacity",ue)})`,sm:`${k("shadowRing",he)}, 0px 1px 2px 0px rgba(${k("shadowChannel",Z)} / ${k("shadowOpacity",ue)}), 0px 2px 4px 0px rgba(${k("shadowChannel",Z)} / ${k("shadowOpacity",ue)})`,md:`${k("shadowRing",he)}, 0px 2px 8px -2px rgba(${k("shadowChannel",Z)} / ${k("shadowOpacity",ue)}), 0px 6px 12px -2px rgba(${k("shadowChannel",Z)} / ${k("shadowOpacity",ue)})`,lg:`${k("shadowRing",he)}, 0px 2px 8px -2px rgba(${k("shadowChannel",Z)} / ${k("shadowOpacity",ue)}), 0px 12px 16px -4px rgba(${k("shadowChannel",Z)} / ${k("shadowOpacity",ue)})`,xl:`${k("shadowRing",he)}, 0px 2px 8px -2px rgba(${k("shadowChannel",Z)} / ${k("shadowOpacity",ue)}), 0px 20px 24px -4px rgba(${k("shadowChannel",Z)} / ${k("shadowOpacity",ue)})`},zIndex:{badge:1,table:10,popup:1e3,modal:1300,snackbar:1400,tooltip:1500},typography:{h1:{fontFamily:k(`fontFamily-display, ${L.display}`),fontWeight:k(`fontWeight-xl, ${G.xl}`),fontSize:k(`fontSize-xl4, ${te.xl4}`),lineHeight:k(`lineHeight-xs, ${ne.xs}`),letterSpacing:"-0.025em",color:k(`palette-text-primary, ${H.palette.text.primary}`)},h2:{fontFamily:k(`fontFamily-display, ${L.display}`),fontWeight:k(`fontWeight-xl, ${G.xl}`),fontSize:k(`fontSize-xl3, ${te.xl3}`),lineHeight:k(`lineHeight-xs, ${ne.xs}`),letterSpacing:"-0.025em",color:k(`palette-text-primary, ${H.palette.text.primary}`)},h3:{fontFamily:k(`fontFamily-display, ${L.display}`),fontWeight:k(`fontWeight-lg, ${G.lg}`),fontSize:k(`fontSize-xl2, ${te.xl2}`),lineHeight:k(`lineHeight-xs, ${ne.xs}`),letterSpacing:"-0.025em",color:k(`palette-text-primary, ${H.palette.text.primary}`)},h4:{fontFamily:k(`fontFamily-display, ${L.display}`),fontWeight:k(`fontWeight-lg, ${G.lg}`),fontSize:k(`fontSize-xl, ${te.xl}`),lineHeight:k(`lineHeight-md, ${ne.md}`),letterSpacing:"-0.025em",color:k(`palette-text-primary, ${H.palette.text.primary}`)},"title-lg":{fontFamily:k(`fontFamily-body, ${L.body}`),fontWeight:k(`fontWeight-lg, ${G.lg}`),fontSize:k(`fontSize-lg, ${te.lg}`),lineHeight:k(`lineHeight-xs, ${ne.xs}`),color:k(`palette-text-primary, ${H.palette.text.primary}`)},"title-md":{fontFamily:k(`fontFamily-body, ${L.body}`),fontWeight:k(`fontWeight-md, ${G.md}`),fontSize:k(`fontSize-md, ${te.md}`),lineHeight:k(`lineHeight-md, ${ne.md}`),color:k(`palette-text-primary, ${H.palette.text.primary}`)},"title-sm":{fontFamily:k(`fontFamily-body, ${L.body}`),fontWeight:k(`fontWeight-md, ${G.md}`),fontSize:k(`fontSize-sm, ${te.sm}`),lineHeight:k(`lineHeight-sm, ${ne.sm}`),color:k(`palette-text-primary, ${H.palette.text.primary}`)},"body-lg":{fontFamily:k(`fontFamily-body, ${L.body}`),fontSize:k(`fontSize-lg, ${te.lg}`),lineHeight:k(`lineHeight-md, ${ne.md}`),color:k(`palette-text-secondary, ${H.palette.text.secondary}`)},"body-md":{fontFamily:k(`fontFamily-body, ${L.body}`),fontSize:k(`fontSize-md, ${te.md}`),lineHeight:k(`lineHeight-md, ${ne.md}`),color:k(`palette-text-secondary, ${H.palette.text.secondary}`)},"body-sm":{fontFamily:k(`fontFamily-body, ${L.body}`),fontSize:k(`fontSize-sm, ${te.sm}`),lineHeight:k(`lineHeight-md, ${ne.md}`),color:k(`palette-text-tertiary, ${H.palette.text.tertiary}`)},"body-xs":{fontFamily:k(`fontFamily-body, ${L.body}`),fontWeight:k(`fontWeight-md, ${G.md}`),fontSize:k(`fontSize-xs, ${te.xs}`),lineHeight:k(`lineHeight-md, ${ne.md}`),color:k(`palette-text-tertiary, ${H.palette.text.tertiary}`)}}},ye=w?oa(Ce,w):Ce,{colorSchemes:Ee}=ye,Se=Ut(ye,X5);let ze=q({colorSchemes:Ee,defaultColorScheme:"light"},Se,{breakpoints:TI(o??{}),components:oa({MuiSvgIcon:{defaultProps:{fontSize:"xl2"},styleOverrides:{root:({ownerState:$e,theme:rt})=>{var Dt;const pt=$e.instanceFontSize;return q({margin:"var(--Icon-margin)"},$e.fontSize&&$e.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${rt.vars.fontSize[$e.fontSize]})`},!$e.htmlColor&&q({color:`var(--Icon-color, ${ze.vars.palette.text.icon})`},$e.color&&$e.color!=="inherit"&&rt.vars.palette[$e.color]&&{color:`rgba(${(Dt=rt.vars.palette[$e.color])==null?void 0:Dt.mainChannel} / 1)`}),pt&&pt!=="inherit"&&{"--Icon-fontSize":rt.vars.fontSize[pt]})}}}},d),cssVarPrefix:r,getCssVar:k,spacing:ZI(l)});ze=PI(ze);function We($e,rt){Object.keys(rt).forEach(pt=>{const Dt={main:"500",light:"200",dark:"700"};$e==="dark"&&(Dt.main=400),!rt[pt].mainChannel&&rt[pt][Dt.main]&&(rt[pt].mainChannel=ec(rt[pt][Dt.main])),!rt[pt].lightChannel&&rt[pt][Dt.light]&&(rt[pt].lightChannel=ec(rt[pt][Dt.light])),!rt[pt].darkChannel&&rt[pt][Dt.dark]&&(rt[pt].darkChannel=ec(rt[pt][Dt.dark]))})}Object.entries(ze.colorSchemes).forEach(([$e,rt])=>{We($e,rt.palette)});const Fe={prefix:r,shouldSkipGeneratingVar:c,getSelector:b||($e=>ze.defaultColorScheme===$e?`${ze.colorSchemeSelector}, [${ze.attribute}="${$e}"]`:$e?`[${ze.attribute}="${$e}"]`:ze.colorSchemeSelector)},{vars:Me,generateThemeVars:Oe,generateStyleSheets:ke}=$5(ze,Fe);ze.attribute="data-joy-color-scheme",ze.colorSchemeSelector=":root",ze.vars=Me,ze.generateThemeVars=Oe,ze.generateStyleSheets=ke,ze.generateSpacing=function(){return AI(l,my(this))},ze.spacing=ze.generateSpacing(),ze.unstable_sxConfig=q({},G5,e==null?void 0:e.unstable_sxConfig),ze.unstable_sx=function(rt){return wy({sx:rt,theme:this})},ze.getColorSchemeSelector=$e=>`[${ze.attribute}="${$e}"] &`;const Ge={getCssVar:k,palette:ze.colorSchemes.light.palette};return ze.variants=oa({plain:$i("plain",Ge),plainHover:$i("plainHover",Ge),plainActive:$i("plainActive",Ge),plainDisabled:$i("plainDisabled",Ge),outlined:$i("outlined",Ge),outlinedHover:$i("outlinedHover",Ge),outlinedActive:$i("outlinedActive",Ge),outlinedDisabled:$i("outlinedDisabled",Ge),soft:$i("soft",Ge),softHover:$i("softHover",Ge),softActive:$i("softActive",Ge),softDisabled:$i("softDisabled",Ge),solid:$i("solid",Ge),solidHover:$i("solidHover",Ge),solidActive:$i("solidActive",Ge),solidDisabled:$i("solidDisabled",Ge)},f),Object.entries(ze.colorSchemes[ze.defaultColorScheme]).forEach(([$e,rt])=>{ze[$e]=rt}),ze.palette=q({},ze.colorSchemes.light.palette,{colorScheme:"light"}),ze.shouldSkipGeneratingVar=c,ze.applyStyles=DI,ze}const Y5=KI(),Zp=Y5,{CssVarsProvider:Q5,useColorScheme:v1,getInitColorSchemeScript:GG}=z5({themeId:ey,theme:Zp,attribute:"data-joy-color-scheme",modeStorageKey:"joy-mode",colorSchemeStorageKey:"joy-color-scheme",defaultColorScheme:{light:"light",dark:"dark"}}),at=jI({defaultTheme:Zp,themeId:ey});function Or({props:e,name:t}){return UI({props:e,name:t,defaultTheme:q({},Zp,{components:{}}),themeId:ey})}function e3(e){return re.jsx($L,q({},e,{defaultTheme:Zp,themeId:ey}))}function t3(e){return typeof e=="string"}function XI(e,t,r){return e===void 0||t3(e)?t:q({},t,{ownerState:q({},t.ownerState,r)})}function t2(e,t,r=(o,l)=>o===l){return e.length===t.length&&e.every((o,l)=>r(o,t[l]))}const r3={disableDefaultClasses:!1},n3=R.createContext(r3);function i3(e){const{disableDefaultClasses:t}=R.useContext(n3);return r=>t?"":e(r)}function ki(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(o=>o.match(/^on[A-Z]/)&&typeof e[o]=="function"&&!t.includes(o)).forEach(o=>{r[o]=e[o]}),r}function JI(e,t,r){return typeof e=="function"?e(t,r):e}function o3(e){const{rootElementName:t="",componentName:r}=e,[o,l]=R.useState(t.toUpperCase()),d=R.useCallback(f=>{l((f==null?void 0:f.tagName)??"")},[]);return[o,d]}function r2(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function YI(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:o,externalForwardedProps:l,className:d}=e;if(!t){const V=mi(r==null?void 0:r.className,d,l==null?void 0:l.className,o==null?void 0:o.className),U=q({},r==null?void 0:r.style,l==null?void 0:l.style,o==null?void 0:o.style),H=q({},r,l,o);return V.length>0&&(H.className=V),Object.keys(U).length>0&&(H.style=U),{props:H,internalRef:void 0}}const f=ki(q({},l,o)),c=r2(o),b=r2(l),w=t(f),k=mi(w==null?void 0:w.className,r==null?void 0:r.className,d,l==null?void 0:l.className,o==null?void 0:o.className),z=q({},w==null?void 0:w.style,r==null?void 0:r.style,l==null?void 0:l.style,o==null?void 0:o.style),P=q({},w,r,b,c);return k.length>0&&(P.className=k),Object.keys(z).length>0&&(P.style=z),{props:P,internalRef:w.ref}}const a3=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function QI(e){var z;const{elementType:t,externalSlotProps:r,ownerState:o,skipResolvingSlotProps:l=!1}=e,d=Ut(e,a3),f=l?{}:JI(r,o),{props:c,internalRef:b}=YI(q({},d,{externalSlotProps:f})),w=Kr(b,f==null?void 0:f.ref,(z=e.additionalProps)==null?void 0:z.ref);return XI(t,q({},c,{ref:w}),o)}const eT="base";function s3(e){return`${eT}--${e}`}function l3(e,t){return`${eT}-${e}-${t}`}function tT(e,t){const r=OI[t];return r?s3(r):l3(e,t)}function c3(e,t){const r={};return t.forEach(o=>{r[o]=tT(e,o)}),r}function os(e={}){const{disabled:t=!1,focusableWhenDisabled:r,href:o,rootRef:l,tabIndex:d,to:f,type:c,rootElementName:b}=e,w=R.useRef(),[k,z]=R.useState(!1),{isFocusVisibleRef:P,onFocus:V,onBlur:U,ref:H}=p1(),[X,B]=R.useState(!1);t&&!r&&X&&B(!1),R.useEffect(()=>{P.current=X},[X,P]);const[L,G]=o3({rootElementName:b??(o||f?"a":void 0),componentName:"Button"}),te=Fe=>Me=>{var Oe;X&&Me.preventDefault(),(Oe=Fe.onMouseLeave)==null||Oe.call(Fe,Me)},ne=Fe=>Me=>{var Oe;U(Me),P.current===!1&&B(!1),(Oe=Fe.onBlur)==null||Oe.call(Fe,Me)},he=Fe=>Me=>{var Oe,ke;w.current||(w.current=Me.currentTarget),V(Me),P.current===!0&&(B(!0),(Oe=Fe.onFocusVisible)==null||Oe.call(Fe,Me)),(ke=Fe.onFocus)==null||ke.call(Fe,Me)},Z=()=>{const Fe=w.current;return L==="BUTTON"||L==="INPUT"&&["button","submit","reset"].includes(Fe==null?void 0:Fe.type)||L==="A"&&(Fe==null?void 0:Fe.href)},ue=Fe=>Me=>{var Oe;t||(Oe=Fe.onClick)==null||Oe.call(Fe,Me)},Ce=Fe=>Me=>{var Oe;t||(z(!0),document.addEventListener("mouseup",()=>{z(!1)},{once:!0})),(Oe=Fe.onMouseDown)==null||Oe.call(Fe,Me)},ye=Fe=>Me=>{var Oe,ke;(Oe=Fe.onKeyDown)==null||Oe.call(Fe,Me),!Me.defaultMuiPrevented&&(Me.target===Me.currentTarget&&!Z()&&Me.key===" "&&Me.preventDefault(),Me.target===Me.currentTarget&&Me.key===" "&&!t&&z(!0),Me.target===Me.currentTarget&&!Z()&&Me.key==="Enter"&&!t&&((ke=Fe.onClick)==null||ke.call(Fe,Me),Me.preventDefault()))},Ee=Fe=>Me=>{var Oe,ke;Me.target===Me.currentTarget&&z(!1),(Oe=Fe.onKeyUp)==null||Oe.call(Fe,Me),Me.target===Me.currentTarget&&!Z()&&!t&&Me.key===" "&&!Me.defaultMuiPrevented&&((ke=Fe.onClick)==null||ke.call(Fe,Me))},Se=Kr(G,l,H,w),ze={};return d!==void 0&&(ze.tabIndex=d),L==="BUTTON"?(ze.type=c??"button",r?ze["aria-disabled"]=t:ze.disabled=t):L==="INPUT"?c&&["button","submit","reset"].includes(c)&&(r?ze["aria-disabled"]=t:ze.disabled=t):L!==""&&(!o&&!f&&(ze.role="button",ze.tabIndex=d??0),t&&(ze["aria-disabled"]=t,ze.tabIndex=r?d??0:-1)),{getRootProps:(Fe={})=>{const Me=q({},ki(e),ki(Fe)),Oe=q({type:c},Me,ze,Fe,{onBlur:ne(Me),onClick:ue(Me),onFocus:he(Me),onKeyDown:ye(Me),onKeyUp:Ee(Me),onMouseDown:Ce(Me),onMouseLeave:te(Me),ref:Se});return delete Oe.onFocusVisible,Oe},focusVisible:X,setFocusVisible:B,active:k,rootRef:Se}}const Ry=R.createContext(null);function u3(e,t){return e===t}const L0={},n2=()=>{};function T_(e,t){const r=q({},e);return Object.keys(t).forEach(o=>{t[o]!==void 0&&(r[o]=t[o])}),r}function d3(e){const{nextState:t,initialState:r,stateComparers:o,onStateChange:l,controlledProps:d,lastActionRef:f}=e,c=R.useRef(r);R.useEffect(()=>{if(f.current===null)return;const b=T_(c.current,d);Object.keys(t).forEach(w=>{const k=o[w]??u3,z=t[w],P=b[w];(P==null&&z!=null||P!=null&&z==null||P!=null&&z!=null&&!k(z,P))&&(l==null||l(f.current.event??null,w,z,f.current.type??"",t))}),c.current=t,f.current=null},[c,t,f,l,o,d])}function rT(e){const t=R.useRef(null),{reducer:r,initialState:o,controlledProps:l=L0,stateComparers:d=L0,onStateChange:f=n2,actionContext:c,componentName:b=""}=e;R.useRef(l);const w=R.useCallback((V,U)=>{t.current=U;const H=T_(V,l);return r(H,U)},[l,r]),[k,z]=R.useReducer(w,o),P=R.useCallback(V=>{z(q({},V,{context:c}))},[c]);return d3({nextState:k,initialState:o,stateComparers:d??L0,onStateChange:f??n2,controlledProps:l,lastActionRef:t}),[T_(k,l),P]}const Da={blur:"dropdown:blur",escapeKeyDown:"dropdown:escapeKeyDown",toggle:"dropdown:toggle",open:"dropdown:open",close:"dropdown:close"};function h3(e,t){switch(t.type){case Da.blur:return{open:!1,changeReason:t.event};case Da.escapeKeyDown:return{open:!1,changeReason:t.event};case Da.toggle:return{open:!e.open,changeReason:t.event};case Da.open:return{open:!0,changeReason:t.event};case Da.close:return{open:!1,changeReason:t.event};default:throw new Error("Unhandled action")}}function p3(e={}){const{defaultOpen:t,onOpenChange:r,open:o,componentName:l="useDropdown"}=e,[d,f]=R.useState(""),[c,b]=R.useState(null),w=R.useRef(null),k=R.useCallback((H,X,B,L)=>{X==="open"&&(r==null||r(H,B)),w.current=L},[r]),z=R.useMemo(()=>o!==void 0?{open:o}:{},[o]),[P,V]=rT({controlledProps:z,initialState:t?{open:!0,changeReason:null}:{open:!1,changeReason:null},onStateChange:k,reducer:h3,componentName:l});return R.useEffect(()=>{!P.open&&w.current!==null&&w.current!==Da.blur&&(c==null||c.focus())},[P.open,c]),{contextValue:{state:P,dispatch:V,popupId:d,registerPopup:f,registerTrigger:b,triggerElement:c},open:P.open}}function f3(e){const{children:t,open:r,defaultOpen:o,onOpenChange:l}=e,{contextValue:d}=p3({defaultOpen:o,onOpenChange:l,open:r});return re.jsx(Ry.Provider,{value:d,children:t})}const m3=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function g3(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function y3(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=o=>e.ownerDocument.querySelector(`input[type="radio"]${o}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function v3(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||y3(e))}function _3(e){const t=[],r=[];return Array.from(e.querySelectorAll(m3)).forEach((o,l)=>{const d=g3(o);d===-1||!v3(o)||(d===0?t.push(o):r.push({documentOrder:l,tabIndex:d,node:o}))}),r.sort((o,l)=>o.tabIndex===l.tabIndex?o.documentOrder-l.documentOrder:o.tabIndex-l.tabIndex).map(o=>o.node).concat(t)}function x3(){return!0}function b3(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:o=!1,disableRestoreFocus:l=!1,getTabbable:d=_3,isEnabled:f=x3,open:c}=e,b=R.useRef(!1),w=R.useRef(null),k=R.useRef(null),z=R.useRef(null),P=R.useRef(null),V=R.useRef(!1),U=R.useRef(null),H=Kr(t.ref,U),X=R.useRef(null);R.useEffect(()=>{!c||!U.current||(V.current=!r)},[r,c]),R.useEffect(()=>{if(!c||!U.current)return;const G=Qa(U.current);return U.current.contains(G.activeElement)||(U.current.hasAttribute("tabIndex")||U.current.setAttribute("tabIndex","-1"),V.current&&U.current.focus()),()=>{l||(z.current&&z.current.focus&&(b.current=!0,z.current.focus()),z.current=null)}},[c]),R.useEffect(()=>{if(!c||!U.current)return;const G=Qa(U.current),te=Z=>{X.current=Z,!(o||!f()||Z.key!=="Tab")&&G.activeElement===U.current&&Z.shiftKey&&(b.current=!0,k.current&&k.current.focus())},ne=()=>{var Ce,ye;const Z=U.current;if(Z===null)return;if(!G.hasFocus()||!f()||b.current){b.current=!1;return}if(Z.contains(G.activeElement)||o&&G.activeElement!==w.current&&G.activeElement!==k.current)return;if(G.activeElement!==P.current)P.current=null;else if(P.current!==null)return;if(!V.current)return;let ue=[];if((G.activeElement===w.current||G.activeElement===k.current)&&(ue=d(U.current)),ue.length>0){const Ee=!!((Ce=X.current)!=null&&Ce.shiftKey&&((ye=X.current)==null?void 0:ye.key)==="Tab"),Se=ue[0],ze=ue[ue.length-1];typeof Se!="string"&&typeof ze!="string"&&(Ee?ze.focus():Se.focus())}else Z.focus()};G.addEventListener("focusin",ne),G.addEventListener("keydown",te,!0);const he=setInterval(()=>{G.activeElement&&G.activeElement.tagName==="BODY"&&ne()},50);return()=>{clearInterval(he),G.removeEventListener("focusin",ne),G.removeEventListener("keydown",te,!0)}},[r,o,l,f,c,d]);const B=G=>{z.current===null&&(z.current=G.relatedTarget),V.current=!0,P.current=G.target;const te=t.props.onFocus;te&&te(G)},L=G=>{z.current===null&&(z.current=G.relatedTarget),V.current=!0};return re.jsxs(R.Fragment,{children:[re.jsx("div",{tabIndex:c?0:-1,onFocus:L,ref:w,"data-testid":"sentinelStart"}),R.cloneElement(t,{ref:H,onFocus:B}),re.jsx("div",{tabIndex:c?0:-1,onFocus:L,ref:k,"data-testid":"sentinelEnd"})]})}const w3=R.createContext(void 0);function S3(){return R.useContext(w3)}function C3(e={}){const{defaultValue:t,disabled:r=!1,error:o=!1,onBlur:l,onChange:d,onFocus:f,required:c=!1,value:b,inputRef:w}=e,k=S3();let z,P,V,U,H;k?(z=void 0,P=k.disabled??!1,V=k.error??!1,U=k.required??!1,H=k.value):(z=t,P=r,V=o,U=c,H=b);const{current:X}=R.useRef(H!=null),B=R.useCallback(Se=>{},[]),L=R.useRef(null),G=Kr(L,w,B),[te,ne]=R.useState(!1);R.useEffect(()=>{!k&&P&&te&&(ne(!1),l==null||l())},[k,P,te,l]);const he=Se=>ze=>{var We,Fe;if(k!=null&&k.disabled){ze.stopPropagation();return}(We=Se.onFocus)==null||We.call(Se,ze),k&&k.onFocus?(Fe=k==null?void 0:k.onFocus)==null||Fe.call(k):ne(!0)},Z=Se=>ze=>{var We;(We=Se.onBlur)==null||We.call(Se,ze),k&&k.onBlur?k.onBlur():ne(!1)},ue=Se=>(ze,...We)=>{var Fe,Me;if(!X&&(ze.target||L.current)==null)throw new Error(pp(17));(Fe=k==null?void 0:k.onChange)==null||Fe.call(k,ze),(Me=Se.onChange)==null||Me.call(Se,ze,...We)},Ce=Se=>ze=>{var We;L.current&&ze.currentTarget===ze.target&&L.current.focus(),(We=Se.onClick)==null||We.call(Se,ze)};return{disabled:P,error:V,focused:te,formControlContext:k,getInputProps:(Se={})=>{const We=q({},{onBlur:l,onChange:d,onFocus:f},ki(Se)),Fe=q({},We,{onBlur:Z(We),onChange:ue(We),onFocus:he(We)});return q({},Fe,{"aria-invalid":V||void 0,defaultValue:z,value:H,required:U,disabled:P},Se,{ref:G},Fe)},getRootProps:(Se={})=>{const ze=ki(e,["onBlur","onChange","onFocus"]),We=q({},ze,ki(Se));return q({},Se,We,{onClick:Ce(We)})},inputRef:G,required:U,value:H}}const rn={blur:"list:blur",focus:"list:focus",itemClick:"list:itemClick",itemHover:"list:itemHover",itemsChange:"list:itemsChange",keyDown:"list:keyDown",resetHighlight:"list:resetHighlight",highlightLast:"list:highlightLast",textNavigation:"list:textNavigation",clearSelection:"list:clearSelection"};function k3(e,t,r,o,l,d){if(r.length===0||!o&&r.every((c,b)=>l(c,b)))return-1;let f=e;for(;;){if(!d&&t==="next"&&f===r.length||!d&&t==="previous"&&f===-1)return-1;if(o?!1:l(r[f],f))f+=t==="next"?1:-1,d&&(f=(f+r.length)%r.length);else return f}}function hi(e,t,r){const{items:o,isItemDisabled:l,disableListWrap:d,disabledItemsFocusable:f,itemComparer:c,focusManagement:b}=r,w=b==="DOM"?0:-1,k=o.length-1,z=e==null?-1:o.findIndex(X=>c(X,e));let P,V,U=!d;switch(t){case"reset":if(w===-1)return null;P=0,V="next",U=!1;break;case"start":P=0,V="next",U=!1;break;case"end":P=k,V="previous",U=!1;break;default:{const X=z+t;X<0?!U&&z!==-1||Math.abs(t)>1?(P=0,V="next"):(P=k,V="previous"):X>k?!U||Math.abs(t)>1?(P=k,V="previous"):(P=0,V="next"):(P=X,V=t>=0?"next":"previous")}}const H=k3(P,V,o,f,l,U);return H===-1&&e!==null&&!l(e,z)?e:o[H]??null}function I3(e,t,r,o){return r==="none"?[]:r==="single"?o(t[0],e)?t:[e]:t.some(l=>o(l,e))?t.filter(l=>!o(l,e)):[...t,e]}function _1(e,t,r){const{itemComparer:o,isItemDisabled:l,selectionMode:d,items:f}=r,{selectedValues:c}=t,b=f.findIndex(k=>o(e,k));if(l(e,b))return t;const w=I3(e,c,d,o);return q({},t,{selectedValues:w,highlightedValue:e})}function T3(e,t,r){const o=t.highlightedValue,{orientation:l,pageSize:d}=r;switch(e){case"Home":return q({},t,{highlightedValue:hi(o,"start",r)});case"End":return q({},t,{highlightedValue:hi(o,"end",r)});case"PageUp":return q({},t,{highlightedValue:hi(o,-d,r)});case"PageDown":return q({},t,{highlightedValue:hi(o,d,r)});case"ArrowUp":if(l!=="vertical")break;return q({},t,{highlightedValue:hi(o,-1,r)});case"ArrowDown":if(l!=="vertical")break;return q({},t,{highlightedValue:hi(o,1,r)});case"ArrowLeft":{if(l==="vertical")break;return q({},t,{highlightedValue:hi(o,l==="horizontal-ltr"?-1:1,r)})}case"ArrowRight":{if(l==="vertical")break;return q({},t,{highlightedValue:hi(o,l==="horizontal-ltr"?1:-1,r)})}case"Enter":case" ":return t.highlightedValue===null?t:_1(t.highlightedValue,t,r)}return t}function P3(e,t){return t.focusManagement==="DOM"?e:q({},e,{highlightedValue:null})}function E3(e,t,r){var l;const o=(l=r(e))==null?void 0:l.trim().toLowerCase();return!o||o.length===0?!1:o.indexOf(t)===0}function z3(e,t,r){const{items:o,isItemDisabled:l,disabledItemsFocusable:d,getItemAsString:f}=r,c=t.length>1;let b=c?e.highlightedValue:hi(e.highlightedValue,1,r);for(let w=0;w<o.length;w+=1){if(!b||!c&&e.highlightedValue===b)return e;if(E3(b,t,f)&&(!l(b,o.indexOf(b))||d))return q({},e,{highlightedValue:b});b=hi(b,1,r)}return e}function M3(e,t,r,o){const{itemComparer:l,focusManagement:d}=o;let f=null;r.highlightedValue!=null?f=e.find(w=>l(w,r.highlightedValue))??null:d==="DOM"&&t.length===0&&(f=hi(null,"reset",o));const b=(r.selectedValues??[]).filter(w=>e.some(k=>l(k,w)));return q({},r,{highlightedValue:f,selectedValues:b})}function A3(e,t){return q({},e,{highlightedValue:hi(null,"reset",t)})}function D3(e,t){return q({},e,{highlightedValue:hi(null,"end",t)})}function R3(e,t){return q({},e,{selectedValues:[],highlightedValue:hi(null,"reset",t)})}function Ly(e,t){const{type:r,context:o}=t;switch(r){case rn.keyDown:return T3(t.key,e,o);case rn.itemClick:return _1(t.item,e,o);case rn.blur:return P3(e,o);case rn.textNavigation:return z3(e,t.searchString,o);case rn.itemsChange:return M3(t.items,t.previousItems,e,o);case rn.resetHighlight:return A3(e,o);case rn.highlightLast:return D3(e,o);case rn.clearSelection:return R3(e,o);default:return e}}const L3=500;function $3(e){const t=R.useRef({searchString:"",lastTime:null});return R.useCallback(r=>{if(r.key.length===1&&r.key!==" "){const o=t.current,l=r.key.toLowerCase(),d=performance.now();o.searchString.length>0&&o.lastTime&&d-o.lastTime>L3?o.searchString=l:(o.searchString.length!==1||l!==o.searchString)&&(o.searchString+=l),o.lastTime=d,e(o.searchString,r)}},[e])}const i2={},B3=()=>{},O3=(e,t)=>e===t,F3=()=>!1,N3=e=>typeof e=="string"?e:String(e),j3=()=>({highlightedValue:null,selectedValues:[]});function x1(e){const{controlledProps:t=i2,disabledItemsFocusable:r=!1,disableListWrap:o=!1,focusManagement:l="activeDescendant",getInitialState:d=j3,getItemDomElement:f,getItemId:c,isItemDisabled:b=F3,rootRef:w,onStateChange:k=B3,items:z,itemComparer:P=O3,getItemAsString:V=N3,onChange:U,onHighlightChange:H,onItemsChange:X,orientation:B="vertical",pageSize:L=5,reducerActionContext:G=i2,selectionMode:te="single",stateReducer:ne,componentName:he="useList"}=e,Z=R.useRef(null),ue=Kr(w,Z),Ce=R.useCallback((kt,$e,rt)=>{var pt;H==null||H(kt,$e,rt),l==="DOM"&&$e!=null&&(rt===rn.itemClick||rt===rn.keyDown||rt===rn.textNavigation)&&((pt=f==null?void 0:f($e))==null||pt.focus())},[f,H,l]),ye=R.useMemo(()=>({highlightedValue:P,selectedValues:(kt,$e)=>t2(kt,$e,P)}),[P]),Ee=R.useCallback((kt,$e,rt,pt,Dt)=>{switch(k==null||k(kt,$e,rt,pt,Dt),$e){case"highlightedValue":Ce(kt,rt,pt);break;case"selectedValues":U==null||U(kt,rt,pt);break}},[Ce,U,k]),Se=R.useMemo(()=>({disabledItemsFocusable:r,disableListWrap:o,focusManagement:l,isItemDisabled:b,itemComparer:P,items:z,getItemAsString:V,onHighlightChange:Ce,orientation:B,pageSize:L,selectionMode:te,stateComparers:ye}),[r,o,l,b,P,z,V,Ce,B,L,te,ye]),ze=d(),We=ne??Ly,Fe=R.useMemo(()=>q({},G,Se),[G,Se]),[Me,Oe]=rT({reducer:We,actionContext:Fe,initialState:ze,controlledProps:t,stateComparers:ye,onStateChange:Ee,componentName:he}),{highlightedValue:ke,selectedValues:Ge}=Me,Ke=$3((kt,$e)=>Oe({type:rn.textNavigation,event:$e,searchString:kt})),ht=R.useRef([]);R.useEffect(()=>{t2(ht.current,z,P)||(Oe({type:rn.itemsChange,event:null,items:z,previousItems:ht.current}),ht.current=z,X==null||X(z))},[z,P,Oe,X]);const vt=kt=>$e=>{var pt;if((pt=kt.onKeyDown)==null||pt.call(kt,$e),$e.defaultMuiPrevented)return;const rt=["Home","End","PageUp","PageDown"];B==="vertical"?rt.push("ArrowUp","ArrowDown"):rt.push("ArrowLeft","ArrowRight"),l==="activeDescendant"&&rt.push(" ","Enter"),rt.includes($e.key)&&$e.preventDefault(),Oe({type:rn.keyDown,key:$e.key,event:$e}),Ke($e)},gt=kt=>$e=>{var rt,pt;(rt=kt.onBlur)==null||rt.call(kt,$e),!$e.defaultMuiPrevented&&((pt=Z.current)!=null&&pt.contains($e.relatedTarget)||Oe({type:rn.blur,event:$e}))},Ct=(kt={})=>{const $e=ki(kt);return q({},kt,{"aria-activedescendant":l==="activeDescendant"&&ke!=null?c(ke):void 0,tabIndex:l==="DOM"?-1:0,ref:ue},$e,{onBlur:gt($e),onKeyDown:vt($e)})},At=R.useCallback(kt=>{const $e=(Ge??[]).some(Dt=>Dt!=null&&P(kt,Dt)),rt=ke!=null&&P(kt,ke);return{focusable:l==="DOM",highlighted:rt,selected:$e}},[P,Ge,ke,l]),Zt=R.useMemo(()=>({dispatch:Oe,getItemState:At}),[Oe,At]);return R.useDebugValue({state:Me}),{contextValue:Zt,dispatch:Oe,getRootProps:Ct,rootRef:ue,state:Me}}const Pl=R.createContext(null);function b1(e){const{handlePointerOverEvents:t=!1,item:r}=e,o=R.useContext(Pl);if(!o)throw new Error("useListItem must be used within a ListProvider");const{dispatch:l,getItemState:d}=o,{highlighted:f,selected:c,focusable:b}=d(r),w=R.useCallback(V=>U=>{var H;(H=V.onClick)==null||H.call(V,U),!U.defaultPrevented&&l({type:rn.itemClick,item:r,event:U})},[l,r]),k=R.useCallback(V=>U=>{var H;(H=V.onMouseOver)==null||H.call(V,U),!U.defaultPrevented&&l({type:rn.itemHover,item:r,event:U})},[l,r]);let z;return b&&(z=f?0:-1),{getRootProps:(V={})=>{const U=ki(V);return q({},V,{onClick:w(U),onPointerOver:t?k(U):void 0,tabIndex:z})},highlighted:f,selected:c}}function V3(e,t){var o,l,d;if(t.type===rn.itemHover)return q({},e,{highlightedValue:t.item});const r=Ly(e,t);if(r.highlightedValue===null&&t.context.items.length>0)return q({},r,{highlightedValue:t.context.items[0]});if(t.type===rn.keyDown&&t.event.key==="Escape")return q({},r,{open:!1});if(t.type===rn.blur&&!((o=t.context.listboxRef.current)!=null&&o.contains(t.event.relatedTarget))){const f=(l=t.context.listboxRef.current)==null?void 0:l.getAttribute("id"),c=(d=t.event.relatedTarget)==null?void 0:d.getAttribute("aria-controls");return f&&c&&f===c?r:q({},r,{open:!1,highlightedValue:t.context.items[0]})}return r}const Kp=R.createContext(null);function U3(e){const t=Array.from(e.keys()).map(r=>{const o=e.get(r);return{key:r,subitem:o}});return t.sort((r,o)=>{const l=r.subitem.ref.current,d=o.subitem.ref.current;return l===null||d===null||l===d?0:l.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}),new Map(t.map(r=>[r.key,r.subitem]))}function $y(){const[e,t]=R.useState(new Map),r=R.useRef(new Set),o=R.useCallback(function(w){r.current.delete(w),t(k=>{const z=new Map(k);return z.delete(w),z})},[]),l=R.useCallback(function(w,k){let z;return typeof w=="function"?z=w(r.current):z=w,r.current.add(z),t(P=>{const V=new Map(P);return V.set(z,k),V}),{id:z,deregister:()=>o(z)}},[o]),d=R.useMemo(()=>U3(e),[e]),f=R.useCallback(function(w){return Array.from(d.keys()).indexOf(w)},[d]);return{contextValue:R.useMemo(()=>({getItemIndex:f,registerItem:l,totalSubitemCount:e.size}),[f,l,e.size]),subitems:d}}function By(e,t){const r=R.useContext(Kp);if(r===null)throw new Error("useCompoundItem must be used within a useCompoundParent");const{registerItem:o}=r,[l,d]=R.useState(typeof e=="function"?void 0:e);return Ps(()=>{const{id:f,deregister:c}=o(e,t);return d(f),c},[o,t,e]),{id:l,index:l!==void 0?r.getItemIndex(l):-1,totalItemCount:r.totalSubitemCount}}function Es(e,t){return function(o={}){const l=q({},o,e(o));return q({},l,t(l))}}const H3={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function W3(e={}){const{listboxRef:t,onItemsChange:r,id:o,disabledItemsFocusable:l=!0,disableListWrap:d=!1,autoFocus:f=!0,componentName:c="useMenu"}=e,b=R.useRef(null),w=Kr(b,t),k=Co(o)??"",{state:{open:z,changeReason:P},dispatch:V,triggerElement:U,registerPopup:H}=R.useContext(Ry)??H3,X=R.useRef(z),{subitems:B,contextValue:L}=$y(),G=R.useMemo(()=>Array.from(B.keys()),[B]),te=R.useCallback(Oe=>{var ke;return Oe==null?null:((ke=B.get(Oe))==null?void 0:ke.ref.current)??null},[B]),ne=R.useCallback(Oe=>{var ke;return((ke=B==null?void 0:B.get(Oe))==null?void 0:ke.disabled)||!1},[B]),he=R.useCallback(Oe=>{var ke,Ge,Ke;return((ke=B.get(Oe))==null?void 0:ke.label)||((Ke=(Ge=B.get(Oe))==null?void 0:Ge.ref.current)==null?void 0:Ke.innerText)},[B]),Z=R.useMemo(()=>({listboxRef:b}),[b]),{dispatch:ue,getRootProps:Ce,contextValue:ye,state:{highlightedValue:Ee},rootRef:Se}=x1({disabledItemsFocusable:l,disableListWrap:d,focusManagement:"DOM",getItemDomElement:te,getInitialState:()=>({selectedValues:[],highlightedValue:null}),isItemDisabled:ne,items:G,getItemAsString:he,rootRef:w,onItemsChange:r,reducerActionContext:Z,selectionMode:"none",stateReducer:V3,componentName:c});Ps(()=>{H(k)},[k,H]),Ps(()=>{z&&(P==null?void 0:P.type)==="keydown"&&P.key==="ArrowUp"&&ue({type:rn.highlightLast,event:P})},[z,P,ue]),R.useEffect(()=>{var Oe,ke,Ge;z&&f&&Ee&&!X.current&&((Ge=(ke=(Oe=B.get(Ee))==null?void 0:Oe.ref)==null?void 0:ke.current)==null||Ge.focus())},[z,f,Ee,B,G]),R.useEffect(()=>{var Oe,ke,Ge;(Oe=b.current)!=null&&Oe.contains(document.activeElement)&&Ee!==null&&((Ge=(ke=B==null?void 0:B.get(Ee))==null?void 0:ke.ref.current)==null||Ge.focus())},[Ee,B]);const ze=Oe=>ke=>{var Ge,Ke;(Ge=Oe.onBlur)==null||Ge.call(Oe,ke),!ke.defaultMuiPrevented&&((Ke=b.current)!=null&&Ke.contains(ke.relatedTarget)||ke.relatedTarget===U||V({type:Da.blur,event:ke}))},We=Oe=>ke=>{var Ge;(Ge=Oe.onKeyDown)==null||Ge.call(Oe,ke),!ke.defaultMuiPrevented&&ke.key==="Escape"&&V({type:Da.escapeKeyDown,event:ke})},Fe=(Oe={})=>({onBlur:ze(Oe),onKeyDown:We(Oe)}),Me=(Oe={})=>{const ke=Es(Fe,Ce),Ge=ki(Oe);return q({},Oe,Ge,ke(Ge),{id:k,role:"menu"})};return R.useDebugValue({subitems:B,highlightedValue:Ee}),{contextValue:q({},L,ye),dispatch:ue,getListboxProps:Me,highlightedValue:Ee,listboxRef:Se,menuItems:B,open:z,triggerElement:U}}function G3(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:l,getItemState:d,registerItem:f,totalSubitemCount:c}=t,b=R.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:l}),[o,l,d]),w=R.useMemo(()=>({getItemIndex:l,registerItem:f,totalSubitemCount:c}),[f,l,c]);return re.jsx(Kp.Provider,{value:w,children:re.jsx(Pl.Provider,{value:b,children:r})})}var nT={exports:{}},jo={},iT={exports:{}},oT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ke,Ge){var Ke=ke.length;ke.push(Ge);e:for(;0<Ke;){var ht=Ke-1>>>1,vt=ke[ht];if(0<l(vt,Ge))ke[ht]=Ge,ke[Ke]=vt,Ke=ht;else break e}}function r(ke){return ke.length===0?null:ke[0]}function o(ke){if(ke.length===0)return null;var Ge=ke[0],Ke=ke.pop();if(Ke!==Ge){ke[0]=Ke;e:for(var ht=0,vt=ke.length,gt=vt>>>1;ht<gt;){var Ct=2*(ht+1)-1,At=ke[Ct],Zt=Ct+1,kt=ke[Zt];if(0>l(At,Ke))Zt<vt&&0>l(kt,At)?(ke[ht]=kt,ke[Zt]=Ke,ht=Zt):(ke[ht]=At,ke[Ct]=Ke,ht=Ct);else if(Zt<vt&&0>l(kt,Ke))ke[ht]=kt,ke[Zt]=Ke,ht=Zt;else break e}}return Ge}function l(ke,Ge){var Ke=ke.sortIndex-Ge.sortIndex;return Ke!==0?Ke:ke.id-Ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var f=Date,c=f.now();e.unstable_now=function(){return f.now()-c}}var b=[],w=[],k=1,z=null,P=3,V=!1,U=!1,H=!1,X=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(ke){for(var Ge=r(w);Ge!==null;){if(Ge.callback===null)o(w);else if(Ge.startTime<=ke)o(w),Ge.sortIndex=Ge.expirationTime,t(b,Ge);else break;Ge=r(w)}}function te(ke){if(H=!1,G(ke),!U)if(r(b)!==null)U=!0,Me(ne);else{var Ge=r(w);Ge!==null&&Oe(te,Ge.startTime-ke)}}function ne(ke,Ge){U=!1,H&&(H=!1,B(ue),ue=-1),V=!0;var Ke=P;try{for(G(Ge),z=r(b);z!==null&&(!(z.expirationTime>Ge)||ke&&!Ee());){var ht=z.callback;if(typeof ht=="function"){z.callback=null,P=z.priorityLevel;var vt=ht(z.expirationTime<=Ge);Ge=e.unstable_now(),typeof vt=="function"?z.callback=vt:z===r(b)&&o(b),G(Ge)}else o(b);z=r(b)}if(z!==null)var gt=!0;else{var Ct=r(w);Ct!==null&&Oe(te,Ct.startTime-Ge),gt=!1}return gt}finally{z=null,P=Ke,V=!1}}var he=!1,Z=null,ue=-1,Ce=5,ye=-1;function Ee(){return!(e.unstable_now()-ye<Ce)}function Se(){if(Z!==null){var ke=e.unstable_now();ye=ke;var Ge=!0;try{Ge=Z(!0,ke)}finally{Ge?ze():(he=!1,Z=null)}}else he=!1}var ze;if(typeof L=="function")ze=function(){L(Se)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,Fe=We.port2;We.port1.onmessage=Se,ze=function(){Fe.postMessage(null)}}else ze=function(){X(Se,0)};function Me(ke){Z=ke,he||(he=!0,ze())}function Oe(ke,Ge){ue=X(function(){ke(e.unstable_now())},Ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ke){ke.callback=null},e.unstable_continueExecution=function(){U||V||(U=!0,Me(ne))},e.unstable_forceFrameRate=function(ke){0>ke||125<ke?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ce=0<ke?Math.floor(1e3/ke):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return r(b)},e.unstable_next=function(ke){switch(P){case 1:case 2:case 3:var Ge=3;break;default:Ge=P}var Ke=P;P=Ge;try{return ke()}finally{P=Ke}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ke,Ge){switch(ke){case 1:case 2:case 3:case 4:case 5:break;default:ke=3}var Ke=P;P=ke;try{return Ge()}finally{P=Ke}},e.unstable_scheduleCallback=function(ke,Ge,Ke){var ht=e.unstable_now();switch(typeof Ke=="object"&&Ke!==null?(Ke=Ke.delay,Ke=typeof Ke=="number"&&0<Ke?ht+Ke:ht):Ke=ht,ke){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=Ke+vt,ke={id:k++,callback:Ge,priorityLevel:ke,startTime:Ke,expirationTime:vt,sortIndex:-1},Ke>ht?(ke.sortIndex=Ke,t(w,ke),r(b)===null&&ke===r(w)&&(H?(B(ue),ue=-1):H=!0,Oe(te,Ke-ht))):(ke.sortIndex=vt,t(b,ke),U||V||(U=!0,Me(ne))),ke},e.unstable_shouldYield=Ee,e.unstable_wrapCallback=function(ke){var Ge=P;return function(){var Ke=P;P=Ge;try{return ke.apply(this,arguments)}finally{P=Ke}}}})(oT);iT.exports=oT;var q3=iT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z3=R,Oo=q3;function ct(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var aT=new Set,vp={};function Sc(e,t){Zu(e,t),Zu(e+"Capture",t)}function Zu(e,t){for(vp[e]=t,e=0;e<t.length;e++)aT.add(t[e])}var zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P_=Object.prototype.hasOwnProperty,K3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,o2={},a2={};function X3(e){return P_.call(a2,e)?!0:P_.call(o2,e)?!1:K3.test(e)?a2[e]=!0:(o2[e]=!0,!1)}function J3(e,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Y3(e,t,r,o){if(t===null||typeof t>"u"||J3(e,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function oo(e,t,r,o,l,d,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=f}var Ti={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ti[e]=new oo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ti[t]=new oo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ti[e]=new oo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ti[e]=new oo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ti[e]=new oo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ti[e]=new oo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ti[e]=new oo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ti[e]=new oo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ti[e]=new oo(e,5,!1,e.toLowerCase(),null,!1,!1)});var w1=/[\-:]([a-z])/g;function S1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(w1,S1);Ti[t]=new oo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(w1,S1);Ti[t]=new oo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(w1,S1);Ti[t]=new oo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ti[e]=new oo(e,1,!1,e.toLowerCase(),null,!1,!1)});Ti.xlinkHref=new oo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ti[e]=new oo(e,1,!1,e.toLowerCase(),null,!0,!0)});function C1(e,t,r,o){var l=Ti.hasOwnProperty(t)?Ti[t]:null;(l!==null?l.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Y3(t,r,l,o)&&(r=null),o||l===null?X3(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):l.mustUseProperty?e[l.propertyName]=r===null?l.type===3?!1:"":r:(t=l.attributeName,o=l.attributeNamespace,r===null?e.removeAttribute(t):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}var Bs=Z3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,km=Symbol.for("react.element"),bu=Symbol.for("react.portal"),wu=Symbol.for("react.fragment"),k1=Symbol.for("react.strict_mode"),E_=Symbol.for("react.profiler"),sT=Symbol.for("react.provider"),lT=Symbol.for("react.context"),I1=Symbol.for("react.forward_ref"),z_=Symbol.for("react.suspense"),M_=Symbol.for("react.suspense_list"),T1=Symbol.for("react.memo"),al=Symbol.for("react.lazy"),cT=Symbol.for("react.offscreen"),s2=Symbol.iterator;function zh(e){return e===null||typeof e!="object"?null:(e=s2&&e[s2]||e["@@iterator"],typeof e=="function"?e:null)}var zn=Object.assign,$0;function Gh(e){if($0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);$0=t&&t[1]||""}return`
`+$0+e}var B0=!1;function O0(e,t){if(!e||B0)return"";B0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var o=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){o=w}e.call(t.prototype)}else{try{throw Error()}catch(w){o=w}e()}}catch(w){if(w&&o&&typeof w.stack=="string"){for(var l=w.stack.split(`
`),d=o.stack.split(`
`),f=l.length-1,c=d.length-1;1<=f&&0<=c&&l[f]!==d[c];)c--;for(;1<=f&&0<=c;f--,c--)if(l[f]!==d[c]){if(f!==1||c!==1)do if(f--,c--,0>c||l[f]!==d[c]){var b=`
`+l[f].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=f&&0<=c);break}}}finally{B0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Gh(e):""}function Q3(e){switch(e.tag){case 5:return Gh(e.type);case 16:return Gh("Lazy");case 13:return Gh("Suspense");case 19:return Gh("SuspenseList");case 0:case 2:case 15:return e=O0(e.type,!1),e;case 11:return e=O0(e.type.render,!1),e;case 1:return e=O0(e.type,!0),e;default:return""}}function A_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case wu:return"Fragment";case bu:return"Portal";case E_:return"Profiler";case k1:return"StrictMode";case z_:return"Suspense";case M_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case lT:return(e.displayName||"Context")+".Consumer";case sT:return(e._context.displayName||"Context")+".Provider";case I1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case T1:return t=e.displayName||null,t!==null?t:A_(e.type)||"Memo";case al:t=e._payload,e=e._init;try{return A_(e(t))}catch{}}return null}function e$(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A_(t);case 8:return t===k1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Il(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function t$(e){var t=uT(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(f){o=""+f,d.call(this,f)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(f){o=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Im(e){e._valueTracker||(e._valueTracker=t$(e))}function dT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=uT(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function yg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function D_(e,t){var r=t.checked;return zn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function l2(e,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=Il(t.value!=null?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hT(e,t){t=t.checked,t!=null&&C1(e,"checked",t,!1)}function R_(e,t){hT(e,t);var r=Il(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?L_(e,t.type,r):t.hasOwnProperty("defaultValue")&&L_(e,t.type,Il(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function c2(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function L_(e,t,r){(t!=="number"||yg(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var qh=Array.isArray;function Ou(e,t,r,o){if(e=e.options,t){t={};for(var l=0;l<r.length;l++)t["$"+r[l]]=!0;for(r=0;r<e.length;r++)l=t.hasOwnProperty("$"+e[r].value),e[r].selected!==l&&(e[r].selected=l),l&&o&&(e[r].defaultSelected=!0)}else{for(r=""+Il(r),t=null,l=0;l<e.length;l++){if(e[l].value===r){e[l].selected=!0,o&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function $_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ct(91));return zn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function u2(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ct(92));if(qh(r)){if(1<r.length)throw Error(ct(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Il(r)}}function pT(e,t){var r=Il(t.value),o=Il(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),o!=null&&(e.defaultValue=""+o)}function d2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function fT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Tm,mT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,o,l){MSApp.execUnsafeLocalFunction(function(){return e(t,r,o,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Tm=Tm||document.createElement("div"),Tm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Tm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _p(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Yh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r$=["Webkit","ms","Moz","O"];Object.keys(Yh).forEach(function(e){r$.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yh[t]=Yh[e]})});function gT(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Yh.hasOwnProperty(e)&&Yh[e]?(""+t).trim():t+"px"}function yT(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,l=gT(r,t[r],o);r==="float"&&(r="cssFloat"),o?e.setProperty(r,l):e[r]=l}}var n$=zn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function O_(e,t){if(t){if(n$[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ct(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ct(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ct(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ct(62))}}function F_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var N_=null;function P1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var j_=null,Fu=null,Nu=null;function h2(e){if(e=Yp(e)){if(typeof j_!="function")throw Error(ct(280));var t=e.stateNode;t&&(t=Vy(t),j_(e.stateNode,e.type,t))}}function vT(e){Fu?Nu?Nu.push(e):Nu=[e]:Fu=e}function _T(){if(Fu){var e=Fu,t=Nu;if(Nu=Fu=null,h2(e),t)for(e=0;e<t.length;e++)h2(t[e])}}function xT(e,t){return e(t)}function bT(){}var F0=!1;function wT(e,t,r){if(F0)return e(t,r);F0=!0;try{return xT(e,t,r)}finally{F0=!1,(Fu!==null||Nu!==null)&&(bT(),_T())}}function xp(e,t){var r=e.stateNode;if(r===null)return null;var o=Vy(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ct(231,t,typeof r));return r}var V_=!1;if(zs)try{var Mh={};Object.defineProperty(Mh,"passive",{get:function(){V_=!0}}),window.addEventListener("test",Mh,Mh),window.removeEventListener("test",Mh,Mh)}catch{V_=!1}function i$(e,t,r,o,l,d,f,c,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(r,w)}catch(k){this.onError(k)}}var Qh=!1,vg=null,_g=!1,U_=null,o$={onError:function(e){Qh=!0,vg=e}};function a$(e,t,r,o,l,d,f,c,b){Qh=!1,vg=null,i$.apply(o$,arguments)}function s$(e,t,r,o,l,d,f,c,b){if(a$.apply(this,arguments),Qh){if(Qh){var w=vg;Qh=!1,vg=null}else throw Error(ct(198));_g||(_g=!0,U_=w)}}function Cc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ST(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p2(e){if(Cc(e)!==e)throw Error(ct(188))}function l$(e){var t=e.alternate;if(!t){if(t=Cc(e),t===null)throw Error(ct(188));return t!==e?null:e}for(var r=e,o=t;;){var l=r.return;if(l===null)break;var d=l.alternate;if(d===null){if(o=l.return,o!==null){r=o;continue}break}if(l.child===d.child){for(d=l.child;d;){if(d===r)return p2(l),e;if(d===o)return p2(l),t;d=d.sibling}throw Error(ct(188))}if(r.return!==o.return)r=l,o=d;else{for(var f=!1,c=l.child;c;){if(c===r){f=!0,r=l,o=d;break}if(c===o){f=!0,o=l,r=d;break}c=c.sibling}if(!f){for(c=d.child;c;){if(c===r){f=!0,r=d,o=l;break}if(c===o){f=!0,o=d,r=l;break}c=c.sibling}if(!f)throw Error(ct(189))}}if(r.alternate!==o)throw Error(ct(190))}if(r.tag!==3)throw Error(ct(188));return r.stateNode.current===r?e:t}function CT(e){return e=l$(e),e!==null?kT(e):null}function kT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=kT(e);if(t!==null)return t;e=e.sibling}return null}var IT=Oo.unstable_scheduleCallback,f2=Oo.unstable_cancelCallback,c$=Oo.unstable_shouldYield,u$=Oo.unstable_requestPaint,Zn=Oo.unstable_now,d$=Oo.unstable_getCurrentPriorityLevel,E1=Oo.unstable_ImmediatePriority,TT=Oo.unstable_UserBlockingPriority,xg=Oo.unstable_NormalPriority,h$=Oo.unstable_LowPriority,PT=Oo.unstable_IdlePriority,Oy=null,es=null;function p$(e){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(Oy,e,void 0,(e.current.flags&128)===128)}catch{}}var Ra=Math.clz32?Math.clz32:g$,f$=Math.log,m$=Math.LN2;function g$(e){return e>>>=0,e===0?32:31-(f$(e)/m$|0)|0}var Pm=64,Em=4194304;function Zh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bg(e,t){var r=e.pendingLanes;if(r===0)return 0;var o=0,l=e.suspendedLanes,d=e.pingedLanes,f=r&268435455;if(f!==0){var c=f&~l;c!==0?o=Zh(c):(d&=f,d!==0&&(o=Zh(d)))}else f=r&~l,f!==0?o=Zh(f):d!==0&&(o=Zh(d));if(o===0)return 0;if(t!==0&&t!==o&&!(t&l)&&(l=o&-o,d=t&-t,l>=d||l===16&&(d&4194240)!==0))return t;if(o&4&&(o|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)r=31-Ra(t),l=1<<r,o|=e[r],t&=~l;return o}function y$(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function v$(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,l=e.expirationTimes,d=e.pendingLanes;0<d;){var f=31-Ra(d),c=1<<f,b=l[f];b===-1?(!(c&r)||c&o)&&(l[f]=y$(c,t)):b<=t&&(e.expiredLanes|=c),d&=~c}}function H_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ET(){var e=Pm;return Pm<<=1,!(Pm&4194240)&&(Pm=64),e}function N0(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Xp(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ra(t),e[t]=r}function _$(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-Ra(r),d=1<<l;t[l]=0,o[l]=-1,e[l]=-1,r&=~d}}function z1(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-Ra(r),l=1<<o;l&t|e[o]&t&&(e[o]|=t),r&=~l}}var Xr=0;function zT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var MT,M1,AT,DT,RT,W_=!1,zm=[],gl=null,yl=null,vl=null,bp=new Map,wp=new Map,cl=[],x$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function m2(e,t){switch(e){case"focusin":case"focusout":gl=null;break;case"dragenter":case"dragleave":yl=null;break;case"mouseover":case"mouseout":vl=null;break;case"pointerover":case"pointerout":bp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wp.delete(t.pointerId)}}function Ah(e,t,r,o,l,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:d,targetContainers:[l]},t!==null&&(t=Yp(t),t!==null&&M1(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function b$(e,t,r,o,l){switch(t){case"focusin":return gl=Ah(gl,e,t,r,o,l),!0;case"dragenter":return yl=Ah(yl,e,t,r,o,l),!0;case"mouseover":return vl=Ah(vl,e,t,r,o,l),!0;case"pointerover":var d=l.pointerId;return bp.set(d,Ah(bp.get(d)||null,e,t,r,o,l)),!0;case"gotpointercapture":return d=l.pointerId,wp.set(d,Ah(wp.get(d)||null,e,t,r,o,l)),!0}return!1}function LT(e){var t=oc(e.target);if(t!==null){var r=Cc(t);if(r!==null){if(t=r.tag,t===13){if(t=ST(r),t!==null){e.blockedOn=t,RT(e.priority,function(){AT(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=G_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);N_=o,r.target.dispatchEvent(o),N_=null}else return t=Yp(r),t!==null&&M1(t),e.blockedOn=r,!1;t.shift()}return!0}function g2(e,t,r){Jm(e)&&r.delete(t)}function w$(){W_=!1,gl!==null&&Jm(gl)&&(gl=null),yl!==null&&Jm(yl)&&(yl=null),vl!==null&&Jm(vl)&&(vl=null),bp.forEach(g2),wp.forEach(g2)}function Dh(e,t){e.blockedOn===t&&(e.blockedOn=null,W_||(W_=!0,Oo.unstable_scheduleCallback(Oo.unstable_NormalPriority,w$)))}function Sp(e){function t(l){return Dh(l,e)}if(0<zm.length){Dh(zm[0],e);for(var r=1;r<zm.length;r++){var o=zm[r];o.blockedOn===e&&(o.blockedOn=null)}}for(gl!==null&&Dh(gl,e),yl!==null&&Dh(yl,e),vl!==null&&Dh(vl,e),bp.forEach(t),wp.forEach(t),r=0;r<cl.length;r++)o=cl[r],o.blockedOn===e&&(o.blockedOn=null);for(;0<cl.length&&(r=cl[0],r.blockedOn===null);)LT(r),r.blockedOn===null&&cl.shift()}var ju=Bs.ReactCurrentBatchConfig,wg=!0;function S$(e,t,r,o){var l=Xr,d=ju.transition;ju.transition=null;try{Xr=1,A1(e,t,r,o)}finally{Xr=l,ju.transition=d}}function C$(e,t,r,o){var l=Xr,d=ju.transition;ju.transition=null;try{Xr=4,A1(e,t,r,o)}finally{Xr=l,ju.transition=d}}function A1(e,t,r,o){if(wg){var l=G_(e,t,r,o);if(l===null)X0(e,t,o,Sg,r),m2(e,o);else if(b$(l,e,t,r,o))o.stopPropagation();else if(m2(e,o),t&4&&-1<x$.indexOf(e)){for(;l!==null;){var d=Yp(l);if(d!==null&&MT(d),d=G_(e,t,r,o),d===null&&X0(e,t,o,Sg,r),d===l)break;l=d}l!==null&&o.stopPropagation()}else X0(e,t,o,null,r)}}var Sg=null;function G_(e,t,r,o){if(Sg=null,e=P1(o),e=oc(e),e!==null)if(t=Cc(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ST(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Sg=e,null}function $T(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(d$()){case E1:return 1;case TT:return 4;case xg:case h$:return 16;case PT:return 536870912;default:return 16}default:return 16}}var fl=null,D1=null,Ym=null;function BT(){if(Ym)return Ym;var e,t=D1,r=t.length,o,l="value"in fl?fl.value:fl.textContent,d=l.length;for(e=0;e<r&&t[e]===l[e];e++);var f=r-e;for(o=1;o<=f&&t[r-o]===l[d-o];o++);return Ym=l.slice(e,1<o?1-o:void 0)}function Qm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mm(){return!0}function y2(){return!1}function Vo(e){function t(r,o,l,d,f){this._reactName=r,this._targetInst=l,this.type=o,this.nativeEvent=d,this.target=f,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(d):d[c]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Mm:y2,this.isPropagationStopped=y2,this}return zn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Mm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Mm)},persist:function(){},isPersistent:Mm}),t}var hd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},R1=Vo(hd),Jp=zn({},hd,{view:0,detail:0}),k$=Vo(Jp),j0,V0,Rh,Fy=zn({},Jp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:L1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Rh&&(Rh&&e.type==="mousemove"?(j0=e.screenX-Rh.screenX,V0=e.screenY-Rh.screenY):V0=j0=0,Rh=e),j0)},movementY:function(e){return"movementY"in e?e.movementY:V0}}),v2=Vo(Fy),I$=zn({},Fy,{dataTransfer:0}),T$=Vo(I$),P$=zn({},Jp,{relatedTarget:0}),U0=Vo(P$),E$=zn({},hd,{animationName:0,elapsedTime:0,pseudoElement:0}),z$=Vo(E$),M$=zn({},hd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),A$=Vo(M$),D$=zn({},hd,{data:0}),_2=Vo(D$),R$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function B$(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$$[e])?!!t[e]:!1}function L1(){return B$}var O$=zn({},Jp,{key:function(e){if(e.key){var t=R$[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?L$[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:L1,charCode:function(e){return e.type==="keypress"?Qm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),F$=Vo(O$),N$=zn({},Fy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x2=Vo(N$),j$=zn({},Jp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:L1}),V$=Vo(j$),U$=zn({},hd,{propertyName:0,elapsedTime:0,pseudoElement:0}),H$=Vo(U$),W$=zn({},Fy,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G$=Vo(W$),q$=[9,13,27,32],$1=zs&&"CompositionEvent"in window,ep=null;zs&&"documentMode"in document&&(ep=document.documentMode);var Z$=zs&&"TextEvent"in window&&!ep,OT=zs&&(!$1||ep&&8<ep&&11>=ep),b2=" ",w2=!1;function FT(e,t){switch(e){case"keyup":return q$.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Su=!1;function K$(e,t){switch(e){case"compositionend":return NT(t);case"keypress":return t.which!==32?null:(w2=!0,b2);case"textInput":return e=t.data,e===b2&&w2?null:e;default:return null}}function X$(e,t){if(Su)return e==="compositionend"||!$1&&FT(e,t)?(e=BT(),Ym=D1=fl=null,Su=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return OT&&t.locale!=="ko"?null:t.data;default:return null}}var J$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function S2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!J$[e.type]:t==="textarea"}function jT(e,t,r,o){vT(o),t=Cg(t,"onChange"),0<t.length&&(r=new R1("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var tp=null,Cp=null;function Y$(e){YT(e,0)}function Ny(e){var t=Iu(e);if(dT(t))return e}function Q$(e,t){if(e==="change")return t}var VT=!1;if(zs){var H0;if(zs){var W0="oninput"in document;if(!W0){var C2=document.createElement("div");C2.setAttribute("oninput","return;"),W0=typeof C2.oninput=="function"}H0=W0}else H0=!1;VT=H0&&(!document.documentMode||9<document.documentMode)}function k2(){tp&&(tp.detachEvent("onpropertychange",UT),Cp=tp=null)}function UT(e){if(e.propertyName==="value"&&Ny(Cp)){var t=[];jT(t,Cp,e,P1(e)),wT(Y$,t)}}function eB(e,t,r){e==="focusin"?(k2(),tp=t,Cp=r,tp.attachEvent("onpropertychange",UT)):e==="focusout"&&k2()}function tB(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ny(Cp)}function rB(e,t){if(e==="click")return Ny(t)}function nB(e,t){if(e==="input"||e==="change")return Ny(t)}function iB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ba=typeof Object.is=="function"?Object.is:iB;function kp(e,t){if(Ba(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var l=r[o];if(!P_.call(t,l)||!Ba(e[l],t[l]))return!1}return!0}function I2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function T2(e,t){var r=I2(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=I2(r)}}function HT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?HT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function WT(){for(var e=window,t=yg();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=yg(e.document)}return t}function B1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function oB(e){var t=WT(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&HT(r.ownerDocument.documentElement,r)){if(o!==null&&B1(r)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=r.textContent.length,d=Math.min(o.start,l);o=o.end===void 0?d:Math.min(o.end,l),!e.extend&&d>o&&(l=o,o=d,d=l),l=T2(r,d);var f=T2(r,o);l&&f&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),d>o?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var aB=zs&&"documentMode"in document&&11>=document.documentMode,Cu=null,q_=null,rp=null,Z_=!1;function P2(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Z_||Cu==null||Cu!==yg(o)||(o=Cu,"selectionStart"in o&&B1(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),rp&&kp(rp,o)||(rp=o,o=Cg(q_,"onSelect"),0<o.length&&(t=new R1("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=Cu)))}function Am(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ku={animationend:Am("Animation","AnimationEnd"),animationiteration:Am("Animation","AnimationIteration"),animationstart:Am("Animation","AnimationStart"),transitionend:Am("Transition","TransitionEnd")},G0={},GT={};zs&&(GT=document.createElement("div").style,"AnimationEvent"in window||(delete ku.animationend.animation,delete ku.animationiteration.animation,delete ku.animationstart.animation),"TransitionEvent"in window||delete ku.transitionend.transition);function jy(e){if(G0[e])return G0[e];if(!ku[e])return e;var t=ku[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in GT)return G0[e]=t[r];return e}var qT=jy("animationend"),ZT=jy("animationiteration"),KT=jy("animationstart"),XT=jy("transitionend"),JT=new Map,E2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function El(e,t){JT.set(e,t),Sc(t,[e])}for(var q0=0;q0<E2.length;q0++){var Z0=E2[q0],sB=Z0.toLowerCase(),lB=Z0[0].toUpperCase()+Z0.slice(1);El(sB,"on"+lB)}El(qT,"onAnimationEnd");El(ZT,"onAnimationIteration");El(KT,"onAnimationStart");El("dblclick","onDoubleClick");El("focusin","onFocus");El("focusout","onBlur");El(XT,"onTransitionEnd");Zu("onMouseEnter",["mouseout","mouseover"]);Zu("onMouseLeave",["mouseout","mouseover"]);Zu("onPointerEnter",["pointerout","pointerover"]);Zu("onPointerLeave",["pointerout","pointerover"]);Sc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cB=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kh));function z2(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,s$(o,t,void 0,e),e.currentTarget=null}function YT(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],l=o.event;o=o.listeners;e:{var d=void 0;if(t)for(var f=o.length-1;0<=f;f--){var c=o[f],b=c.instance,w=c.currentTarget;if(c=c.listener,b!==d&&l.isPropagationStopped())break e;z2(l,c,w),d=b}else for(f=0;f<o.length;f++){if(c=o[f],b=c.instance,w=c.currentTarget,c=c.listener,b!==d&&l.isPropagationStopped())break e;z2(l,c,w),d=b}}}if(_g)throw e=U_,_g=!1,U_=null,e}function fn(e,t){var r=t[Q_];r===void 0&&(r=t[Q_]=new Set);var o=e+"__bubble";r.has(o)||(QT(t,e,2,!1),r.add(o))}function K0(e,t,r){var o=0;t&&(o|=4),QT(r,e,o,t)}var Dm="_reactListening"+Math.random().toString(36).slice(2);function Ip(e){if(!e[Dm]){e[Dm]=!0,aT.forEach(function(r){r!=="selectionchange"&&(cB.has(r)||K0(r,!1,e),K0(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Dm]||(t[Dm]=!0,K0("selectionchange",!1,t))}}function QT(e,t,r,o){switch($T(t)){case 1:var l=S$;break;case 4:l=C$;break;default:l=A1}r=l.bind(null,t,r,e),l=void 0,!V_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),o?l!==void 0?e.addEventListener(t,r,{capture:!0,passive:l}):e.addEventListener(t,r,!0):l!==void 0?e.addEventListener(t,r,{passive:l}):e.addEventListener(t,r,!1)}function X0(e,t,r,o,l){var d=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var f=o.tag;if(f===3||f===4){var c=o.stateNode.containerInfo;if(c===l||c.nodeType===8&&c.parentNode===l)break;if(f===4)for(f=o.return;f!==null;){var b=f.tag;if((b===3||b===4)&&(b=f.stateNode.containerInfo,b===l||b.nodeType===8&&b.parentNode===l))return;f=f.return}for(;c!==null;){if(f=oc(c),f===null)return;if(b=f.tag,b===5||b===6){o=d=f;continue e}c=c.parentNode}}o=o.return}wT(function(){var w=d,k=P1(r),z=[];e:{var P=JT.get(e);if(P!==void 0){var V=R1,U=e;switch(e){case"keypress":if(Qm(r)===0)break e;case"keydown":case"keyup":V=F$;break;case"focusin":U="focus",V=U0;break;case"focusout":U="blur",V=U0;break;case"beforeblur":case"afterblur":V=U0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=v2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=T$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=V$;break;case qT:case ZT:case KT:V=z$;break;case XT:V=H$;break;case"scroll":V=k$;break;case"wheel":V=G$;break;case"copy":case"cut":case"paste":V=A$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=x2}var H=(t&4)!==0,X=!H&&e==="scroll",B=H?P!==null?P+"Capture":null:P;H=[];for(var L=w,G;L!==null;){G=L;var te=G.stateNode;if(G.tag===5&&te!==null&&(G=te,B!==null&&(te=xp(L,B),te!=null&&H.push(Tp(L,te,G)))),X)break;L=L.return}0<H.length&&(P=new V(P,U,null,r,k),z.push({event:P,listeners:H}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",P&&r!==N_&&(U=r.relatedTarget||r.fromElement)&&(oc(U)||U[Ms]))break e;if((V||P)&&(P=k.window===k?k:(P=k.ownerDocument)?P.defaultView||P.parentWindow:window,V?(U=r.relatedTarget||r.toElement,V=w,U=U?oc(U):null,U!==null&&(X=Cc(U),U!==X||U.tag!==5&&U.tag!==6)&&(U=null)):(V=null,U=w),V!==U)){if(H=v2,te="onMouseLeave",B="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(H=x2,te="onPointerLeave",B="onPointerEnter",L="pointer"),X=V==null?P:Iu(V),G=U==null?P:Iu(U),P=new H(te,L+"leave",V,r,k),P.target=X,P.relatedTarget=G,te=null,oc(k)===w&&(H=new H(B,L+"enter",U,r,k),H.target=G,H.relatedTarget=X,te=H),X=te,V&&U)t:{for(H=V,B=U,L=0,G=H;G;G=du(G))L++;for(G=0,te=B;te;te=du(te))G++;for(;0<L-G;)H=du(H),L--;for(;0<G-L;)B=du(B),G--;for(;L--;){if(H===B||B!==null&&H===B.alternate)break t;H=du(H),B=du(B)}H=null}else H=null;V!==null&&M2(z,P,V,H,!1),U!==null&&X!==null&&M2(z,X,U,H,!0)}}e:{if(P=w?Iu(w):window,V=P.nodeName&&P.nodeName.toLowerCase(),V==="select"||V==="input"&&P.type==="file")var ne=Q$;else if(S2(P))if(VT)ne=nB;else{ne=tB;var he=eB}else(V=P.nodeName)&&V.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(ne=rB);if(ne&&(ne=ne(e,w))){jT(z,ne,r,k);break e}he&&he(e,P,w),e==="focusout"&&(he=P._wrapperState)&&he.controlled&&P.type==="number"&&L_(P,"number",P.value)}switch(he=w?Iu(w):window,e){case"focusin":(S2(he)||he.contentEditable==="true")&&(Cu=he,q_=w,rp=null);break;case"focusout":rp=q_=Cu=null;break;case"mousedown":Z_=!0;break;case"contextmenu":case"mouseup":case"dragend":Z_=!1,P2(z,r,k);break;case"selectionchange":if(aB)break;case"keydown":case"keyup":P2(z,r,k)}var Z;if($1)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else Su?FT(e,r)&&(ue="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ue="onCompositionStart");ue&&(OT&&r.locale!=="ko"&&(Su||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&Su&&(Z=BT()):(fl=k,D1="value"in fl?fl.value:fl.textContent,Su=!0)),he=Cg(w,ue),0<he.length&&(ue=new _2(ue,e,null,r,k),z.push({event:ue,listeners:he}),Z?ue.data=Z:(Z=NT(r),Z!==null&&(ue.data=Z)))),(Z=Z$?K$(e,r):X$(e,r))&&(w=Cg(w,"onBeforeInput"),0<w.length&&(k=new _2("onBeforeInput","beforeinput",null,r,k),z.push({event:k,listeners:w}),k.data=Z))}YT(z,t)})}function Tp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Cg(e,t){for(var r=t+"Capture",o=[];e!==null;){var l=e,d=l.stateNode;l.tag===5&&d!==null&&(l=d,d=xp(e,r),d!=null&&o.unshift(Tp(e,d,l)),d=xp(e,t),d!=null&&o.push(Tp(e,d,l))),e=e.return}return o}function du(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function M2(e,t,r,o,l){for(var d=t._reactName,f=[];r!==null&&r!==o;){var c=r,b=c.alternate,w=c.stateNode;if(b!==null&&b===o)break;c.tag===5&&w!==null&&(c=w,l?(b=xp(r,d),b!=null&&f.unshift(Tp(r,b,c))):l||(b=xp(r,d),b!=null&&f.push(Tp(r,b,c)))),r=r.return}f.length!==0&&e.push({event:t,listeners:f})}var uB=/\r\n?/g,dB=/\u0000|\uFFFD/g;function A2(e){return(typeof e=="string"?e:""+e).replace(uB,`
`).replace(dB,"")}function Rm(e,t,r){if(t=A2(t),A2(e)!==t&&r)throw Error(ct(425))}function kg(){}var K_=null,X_=null;function J_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Y_=typeof setTimeout=="function"?setTimeout:void 0,hB=typeof clearTimeout=="function"?clearTimeout:void 0,D2=typeof Promise=="function"?Promise:void 0,pB=typeof queueMicrotask=="function"?queueMicrotask:typeof D2<"u"?function(e){return D2.resolve(null).then(e).catch(fB)}:Y_;function fB(e){setTimeout(function(){throw e})}function J0(e,t){var r=t,o=0;do{var l=r.nextSibling;if(e.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(o===0){e.removeChild(l),Sp(t);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=l}while(r);Sp(t)}function _l(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function R2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var pd=Math.random().toString(36).slice(2),Ja="__reactFiber$"+pd,Pp="__reactProps$"+pd,Ms="__reactContainer$"+pd,Q_="__reactEvents$"+pd,mB="__reactListeners$"+pd,gB="__reactHandles$"+pd;function oc(e){var t=e[Ja];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ms]||r[Ja]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=R2(e);e!==null;){if(r=e[Ja])return r;e=R2(e)}return t}e=r,r=e.parentNode}return null}function Yp(e){return e=e[Ja]||e[Ms],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Iu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ct(33))}function Vy(e){return e[Pp]||null}var ex=[],Tu=-1;function zl(e){return{current:e}}function mn(e){0>Tu||(e.current=ex[Tu],ex[Tu]=null,Tu--)}function un(e,t){Tu++,ex[Tu]=e.current,e.current=t}var Tl={},Ui=zl(Tl),vo=zl(!1),mc=Tl;function Ku(e,t){var r=e.type.contextTypes;if(!r)return Tl;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var l={},d;for(d in r)l[d]=t[d];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function _o(e){return e=e.childContextTypes,e!=null}function Ig(){mn(vo),mn(Ui)}function L2(e,t,r){if(Ui.current!==Tl)throw Error(ct(168));un(Ui,t),un(vo,r)}function eP(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var l in o)if(!(l in t))throw Error(ct(108,e$(e)||"Unknown",l));return zn({},r,o)}function Tg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tl,mc=Ui.current,un(Ui,e),un(vo,vo.current),!0}function $2(e,t,r){var o=e.stateNode;if(!o)throw Error(ct(169));r?(e=eP(e,t,mc),o.__reactInternalMemoizedMergedChildContext=e,mn(vo),mn(Ui),un(Ui,e)):mn(vo),un(vo,r)}var Cs=null,Uy=!1,Y0=!1;function tP(e){Cs===null?Cs=[e]:Cs.push(e)}function yB(e){Uy=!0,tP(e)}function Ml(){if(!Y0&&Cs!==null){Y0=!0;var e=0,t=Xr;try{var r=Cs;for(Xr=1;e<r.length;e++){var o=r[e];do o=o(!0);while(o!==null)}Cs=null,Uy=!1}catch(l){throw Cs!==null&&(Cs=Cs.slice(e+1)),IT(E1,Ml),l}finally{Xr=t,Y0=!1}}return null}var Pu=[],Eu=0,Pg=null,Eg=0,ea=[],ta=0,gc=null,ks=1,Is="";function tc(e,t){Pu[Eu++]=Eg,Pu[Eu++]=Pg,Pg=e,Eg=t}function rP(e,t,r){ea[ta++]=ks,ea[ta++]=Is,ea[ta++]=gc,gc=e;var o=ks;e=Is;var l=32-Ra(o)-1;o&=~(1<<l),r+=1;var d=32-Ra(t)+l;if(30<d){var f=l-l%5;d=(o&(1<<f)-1).toString(32),o>>=f,l-=f,ks=1<<32-Ra(t)+l|r<<l|o,Is=d+e}else ks=1<<d|r<<l|o,Is=e}function O1(e){e.return!==null&&(tc(e,1),rP(e,1,0))}function F1(e){for(;e===Pg;)Pg=Pu[--Eu],Pu[Eu]=null,Eg=Pu[--Eu],Pu[Eu]=null;for(;e===gc;)gc=ea[--ta],ea[ta]=null,Is=ea[--ta],ea[ta]=null,ks=ea[--ta],ea[ta]=null}var Bo=null,Lo=null,Sn=!1,Aa=null;function nP(e,t){var r=ia(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function B2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Bo=e,Lo=_l(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Bo=e,Lo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=gc!==null?{id:ks,overflow:Is}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ia(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Bo=e,Lo=null,!0):!1;default:return!1}}function tx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rx(e){if(Sn){var t=Lo;if(t){var r=t;if(!B2(e,t)){if(tx(e))throw Error(ct(418));t=_l(r.nextSibling);var o=Bo;t&&B2(e,t)?nP(o,r):(e.flags=e.flags&-4097|2,Sn=!1,Bo=e)}}else{if(tx(e))throw Error(ct(418));e.flags=e.flags&-4097|2,Sn=!1,Bo=e}}}function O2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Bo=e}function Lm(e){if(e!==Bo)return!1;if(!Sn)return O2(e),Sn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!J_(e.type,e.memoizedProps)),t&&(t=Lo)){if(tx(e))throw iP(),Error(ct(418));for(;t;)nP(e,t),t=_l(t.nextSibling)}if(O2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ct(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Lo=_l(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Lo=null}}else Lo=Bo?_l(e.stateNode.nextSibling):null;return!0}function iP(){for(var e=Lo;e;)e=_l(e.nextSibling)}function Xu(){Lo=Bo=null,Sn=!1}function N1(e){Aa===null?Aa=[e]:Aa.push(e)}var vB=Bs.ReactCurrentBatchConfig;function Lh(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ct(309));var o=r.stateNode}if(!o)throw Error(ct(147,e));var l=o,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(f){var c=l.refs;f===null?delete c[d]:c[d]=f},t._stringRef=d,t)}if(typeof e!="string")throw Error(ct(284));if(!r._owner)throw Error(ct(290,e))}return e}function $m(e,t){throw e=Object.prototype.toString.call(t),Error(ct(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function F2(e){var t=e._init;return t(e._payload)}function oP(e){function t(B,L){if(e){var G=B.deletions;G===null?(B.deletions=[L],B.flags|=16):G.push(L)}}function r(B,L){if(!e)return null;for(;L!==null;)t(B,L),L=L.sibling;return null}function o(B,L){for(B=new Map;L!==null;)L.key!==null?B.set(L.key,L):B.set(L.index,L),L=L.sibling;return B}function l(B,L){return B=Sl(B,L),B.index=0,B.sibling=null,B}function d(B,L,G){return B.index=G,e?(G=B.alternate,G!==null?(G=G.index,G<L?(B.flags|=2,L):G):(B.flags|=2,L)):(B.flags|=1048576,L)}function f(B){return e&&B.alternate===null&&(B.flags|=2),B}function c(B,L,G,te){return L===null||L.tag!==6?(L=o_(G,B.mode,te),L.return=B,L):(L=l(L,G),L.return=B,L)}function b(B,L,G,te){var ne=G.type;return ne===wu?k(B,L,G.props.children,te,G.key):L!==null&&(L.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===al&&F2(ne)===L.type)?(te=l(L,G.props),te.ref=Lh(B,L,G),te.return=B,te):(te=ag(G.type,G.key,G.props,null,B.mode,te),te.ref=Lh(B,L,G),te.return=B,te)}function w(B,L,G,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==G.containerInfo||L.stateNode.implementation!==G.implementation?(L=a_(G,B.mode,te),L.return=B,L):(L=l(L,G.children||[]),L.return=B,L)}function k(B,L,G,te,ne){return L===null||L.tag!==7?(L=dc(G,B.mode,te,ne),L.return=B,L):(L=l(L,G),L.return=B,L)}function z(B,L,G){if(typeof L=="string"&&L!==""||typeof L=="number")return L=o_(""+L,B.mode,G),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case km:return G=ag(L.type,L.key,L.props,null,B.mode,G),G.ref=Lh(B,null,L),G.return=B,G;case bu:return L=a_(L,B.mode,G),L.return=B,L;case al:var te=L._init;return z(B,te(L._payload),G)}if(qh(L)||zh(L))return L=dc(L,B.mode,G,null),L.return=B,L;$m(B,L)}return null}function P(B,L,G,te){var ne=L!==null?L.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return ne!==null?null:c(B,L,""+G,te);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case km:return G.key===ne?b(B,L,G,te):null;case bu:return G.key===ne?w(B,L,G,te):null;case al:return ne=G._init,P(B,L,ne(G._payload),te)}if(qh(G)||zh(G))return ne!==null?null:k(B,L,G,te,null);$m(B,G)}return null}function V(B,L,G,te,ne){if(typeof te=="string"&&te!==""||typeof te=="number")return B=B.get(G)||null,c(L,B,""+te,ne);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case km:return B=B.get(te.key===null?G:te.key)||null,b(L,B,te,ne);case bu:return B=B.get(te.key===null?G:te.key)||null,w(L,B,te,ne);case al:var he=te._init;return V(B,L,G,he(te._payload),ne)}if(qh(te)||zh(te))return B=B.get(G)||null,k(L,B,te,ne,null);$m(L,te)}return null}function U(B,L,G,te){for(var ne=null,he=null,Z=L,ue=L=0,Ce=null;Z!==null&&ue<G.length;ue++){Z.index>ue?(Ce=Z,Z=null):Ce=Z.sibling;var ye=P(B,Z,G[ue],te);if(ye===null){Z===null&&(Z=Ce);break}e&&Z&&ye.alternate===null&&t(B,Z),L=d(ye,L,ue),he===null?ne=ye:he.sibling=ye,he=ye,Z=Ce}if(ue===G.length)return r(B,Z),Sn&&tc(B,ue),ne;if(Z===null){for(;ue<G.length;ue++)Z=z(B,G[ue],te),Z!==null&&(L=d(Z,L,ue),he===null?ne=Z:he.sibling=Z,he=Z);return Sn&&tc(B,ue),ne}for(Z=o(B,Z);ue<G.length;ue++)Ce=V(Z,B,ue,G[ue],te),Ce!==null&&(e&&Ce.alternate!==null&&Z.delete(Ce.key===null?ue:Ce.key),L=d(Ce,L,ue),he===null?ne=Ce:he.sibling=Ce,he=Ce);return e&&Z.forEach(function(Ee){return t(B,Ee)}),Sn&&tc(B,ue),ne}function H(B,L,G,te){var ne=zh(G);if(typeof ne!="function")throw Error(ct(150));if(G=ne.call(G),G==null)throw Error(ct(151));for(var he=ne=null,Z=L,ue=L=0,Ce=null,ye=G.next();Z!==null&&!ye.done;ue++,ye=G.next()){Z.index>ue?(Ce=Z,Z=null):Ce=Z.sibling;var Ee=P(B,Z,ye.value,te);if(Ee===null){Z===null&&(Z=Ce);break}e&&Z&&Ee.alternate===null&&t(B,Z),L=d(Ee,L,ue),he===null?ne=Ee:he.sibling=Ee,he=Ee,Z=Ce}if(ye.done)return r(B,Z),Sn&&tc(B,ue),ne;if(Z===null){for(;!ye.done;ue++,ye=G.next())ye=z(B,ye.value,te),ye!==null&&(L=d(ye,L,ue),he===null?ne=ye:he.sibling=ye,he=ye);return Sn&&tc(B,ue),ne}for(Z=o(B,Z);!ye.done;ue++,ye=G.next())ye=V(Z,B,ue,ye.value,te),ye!==null&&(e&&ye.alternate!==null&&Z.delete(ye.key===null?ue:ye.key),L=d(ye,L,ue),he===null?ne=ye:he.sibling=ye,he=ye);return e&&Z.forEach(function(Se){return t(B,Se)}),Sn&&tc(B,ue),ne}function X(B,L,G,te){if(typeof G=="object"&&G!==null&&G.type===wu&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case km:e:{for(var ne=G.key,he=L;he!==null;){if(he.key===ne){if(ne=G.type,ne===wu){if(he.tag===7){r(B,he.sibling),L=l(he,G.props.children),L.return=B,B=L;break e}}else if(he.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===al&&F2(ne)===he.type){r(B,he.sibling),L=l(he,G.props),L.ref=Lh(B,he,G),L.return=B,B=L;break e}r(B,he);break}else t(B,he);he=he.sibling}G.type===wu?(L=dc(G.props.children,B.mode,te,G.key),L.return=B,B=L):(te=ag(G.type,G.key,G.props,null,B.mode,te),te.ref=Lh(B,L,G),te.return=B,B=te)}return f(B);case bu:e:{for(he=G.key;L!==null;){if(L.key===he)if(L.tag===4&&L.stateNode.containerInfo===G.containerInfo&&L.stateNode.implementation===G.implementation){r(B,L.sibling),L=l(L,G.children||[]),L.return=B,B=L;break e}else{r(B,L);break}else t(B,L);L=L.sibling}L=a_(G,B.mode,te),L.return=B,B=L}return f(B);case al:return he=G._init,X(B,L,he(G._payload),te)}if(qh(G))return U(B,L,G,te);if(zh(G))return H(B,L,G,te);$m(B,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,L!==null&&L.tag===6?(r(B,L.sibling),L=l(L,G),L.return=B,B=L):(r(B,L),L=o_(G,B.mode,te),L.return=B,B=L),f(B)):r(B,L)}return X}var Ju=oP(!0),aP=oP(!1),zg=zl(null),Mg=null,zu=null,j1=null;function V1(){j1=zu=Mg=null}function U1(e){var t=zg.current;mn(zg),e._currentValue=t}function nx(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function Vu(e,t){Mg=e,j1=zu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yo=!0),e.firstContext=null)}function la(e){var t=e._currentValue;if(j1!==e)if(e={context:e,memoizedValue:t,next:null},zu===null){if(Mg===null)throw Error(ct(308));zu=e,Mg.dependencies={lanes:0,firstContext:e}}else zu=zu.next=e;return t}var ac=null;function H1(e){ac===null?ac=[e]:ac.push(e)}function sP(e,t,r,o){var l=t.interleaved;return l===null?(r.next=r,H1(t)):(r.next=l.next,l.next=r),t.interleaved=r,As(e,o)}function As(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var sl=!1;function W1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ts(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xl(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,$r&2){var l=o.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),o.pending=t,As(e,r)}return l=o.interleaved,l===null?(t.next=t,H1(o)):(t.next=l.next,l.next=t),o.interleaved=t,As(e,r)}function eg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,z1(e,r)}}function N2(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var l=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var f={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?l=d=f:d=d.next=f,r=r.next}while(r!==null);d===null?l=d=t:d=d.next=t}else l=d=t;r={baseState:o.baseState,firstBaseUpdate:l,lastBaseUpdate:d,shared:o.shared,effects:o.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ag(e,t,r,o){var l=e.updateQueue;sl=!1;var d=l.firstBaseUpdate,f=l.lastBaseUpdate,c=l.shared.pending;if(c!==null){l.shared.pending=null;var b=c,w=b.next;b.next=null,f===null?d=w:f.next=w,f=b;var k=e.alternate;k!==null&&(k=k.updateQueue,c=k.lastBaseUpdate,c!==f&&(c===null?k.firstBaseUpdate=w:c.next=w,k.lastBaseUpdate=b))}if(d!==null){var z=l.baseState;f=0,k=w=b=null,c=d;do{var P=c.lane,V=c.eventTime;if((o&P)===P){k!==null&&(k=k.next={eventTime:V,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var U=e,H=c;switch(P=t,V=r,H.tag){case 1:if(U=H.payload,typeof U=="function"){z=U.call(V,z,P);break e}z=U;break e;case 3:U.flags=U.flags&-65537|128;case 0:if(U=H.payload,P=typeof U=="function"?U.call(V,z,P):U,P==null)break e;z=zn({},z,P);break e;case 2:sl=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,P=l.effects,P===null?l.effects=[c]:P.push(c))}else V={eventTime:V,lane:P,tag:c.tag,payload:c.payload,callback:c.callback,next:null},k===null?(w=k=V,b=z):k=k.next=V,f|=P;if(c=c.next,c===null){if(c=l.shared.pending,c===null)break;P=c,c=P.next,P.next=null,l.lastBaseUpdate=P,l.shared.pending=null}}while(!0);if(k===null&&(b=z),l.baseState=b,l.firstBaseUpdate=w,l.lastBaseUpdate=k,t=l.shared.interleaved,t!==null){l=t;do f|=l.lane,l=l.next;while(l!==t)}else d===null&&(l.shared.lanes=0);vc|=f,e.lanes=f,e.memoizedState=z}}function j2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],l=o.callback;if(l!==null){if(o.callback=null,o=r,typeof l!="function")throw Error(ct(191,l));l.call(o)}}}var Qp={},ts=zl(Qp),Ep=zl(Qp),zp=zl(Qp);function sc(e){if(e===Qp)throw Error(ct(174));return e}function G1(e,t){switch(un(zp,t),un(Ep,e),un(ts,Qp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:B_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=B_(t,e)}mn(ts),un(ts,t)}function Yu(){mn(ts),mn(Ep),mn(zp)}function cP(e){sc(zp.current);var t=sc(ts.current),r=B_(t,e.type);t!==r&&(un(Ep,e),un(ts,r))}function q1(e){Ep.current===e&&(mn(ts),mn(Ep))}var Pn=zl(0);function Dg(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Q0=[];function Z1(){for(var e=0;e<Q0.length;e++)Q0[e]._workInProgressVersionPrimary=null;Q0.length=0}var tg=Bs.ReactCurrentDispatcher,e_=Bs.ReactCurrentBatchConfig,yc=0,En=null,oi=null,pi=null,Rg=!1,np=!1,Mp=0,_B=0;function Bi(){throw Error(ct(321))}function K1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ba(e[r],t[r]))return!1;return!0}function X1(e,t,r,o,l,d){if(yc=d,En=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tg.current=e===null||e.memoizedState===null?SB:CB,e=r(o,l),np){d=0;do{if(np=!1,Mp=0,25<=d)throw Error(ct(301));d+=1,pi=oi=null,t.updateQueue=null,tg.current=kB,e=r(o,l)}while(np)}if(tg.current=Lg,t=oi!==null&&oi.next!==null,yc=0,pi=oi=En=null,Rg=!1,t)throw Error(ct(300));return e}function J1(){var e=Mp!==0;return Mp=0,e}function Za(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pi===null?En.memoizedState=pi=e:pi=pi.next=e,pi}function ca(){if(oi===null){var e=En.alternate;e=e!==null?e.memoizedState:null}else e=oi.next;var t=pi===null?En.memoizedState:pi.next;if(t!==null)pi=t,oi=e;else{if(e===null)throw Error(ct(310));oi=e,e={memoizedState:oi.memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},pi===null?En.memoizedState=pi=e:pi=pi.next=e}return pi}function Ap(e,t){return typeof t=="function"?t(e):t}function t_(e){var t=ca(),r=t.queue;if(r===null)throw Error(ct(311));r.lastRenderedReducer=e;var o=oi,l=o.baseQueue,d=r.pending;if(d!==null){if(l!==null){var f=l.next;l.next=d.next,d.next=f}o.baseQueue=l=d,r.pending=null}if(l!==null){d=l.next,o=o.baseState;var c=f=null,b=null,w=d;do{var k=w.lane;if((yc&k)===k)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),o=w.hasEagerState?w.eagerState:e(o,w.action);else{var z={lane:k,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(c=b=z,f=o):b=b.next=z,En.lanes|=k,vc|=k}w=w.next}while(w!==null&&w!==d);b===null?f=o:b.next=c,Ba(o,t.memoizedState)||(yo=!0),t.memoizedState=o,t.baseState=f,t.baseQueue=b,r.lastRenderedState=o}if(e=r.interleaved,e!==null){l=e;do d=l.lane,En.lanes|=d,vc|=d,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function r_(e){var t=ca(),r=t.queue;if(r===null)throw Error(ct(311));r.lastRenderedReducer=e;var o=r.dispatch,l=r.pending,d=t.memoizedState;if(l!==null){r.pending=null;var f=l=l.next;do d=e(d,f.action),f=f.next;while(f!==l);Ba(d,t.memoizedState)||(yo=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,o]}function uP(){}function dP(e,t){var r=En,o=ca(),l=t(),d=!Ba(o.memoizedState,l);if(d&&(o.memoizedState=l,yo=!0),o=o.queue,Y1(fP.bind(null,r,o,e),[e]),o.getSnapshot!==t||d||pi!==null&&pi.memoizedState.tag&1){if(r.flags|=2048,Dp(9,pP.bind(null,r,o,l,t),void 0,null),fi===null)throw Error(ct(349));yc&30||hP(r,t,l)}return l}function hP(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=En.updateQueue,t===null?(t={lastEffect:null,stores:null},En.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function pP(e,t,r,o){t.value=r,t.getSnapshot=o,mP(t)&&gP(e)}function fP(e,t,r){return r(function(){mP(t)&&gP(e)})}function mP(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ba(e,r)}catch{return!0}}function gP(e){var t=As(e,1);t!==null&&La(t,e,1,-1)}function V2(e){var t=Za();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:e},t.queue=e,e=e.dispatch=wB.bind(null,En,e),[t.memoizedState,e]}function Dp(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},t=En.updateQueue,t===null?(t={lastEffect:null,stores:null},En.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e)),e}function yP(){return ca().memoizedState}function rg(e,t,r,o){var l=Za();En.flags|=e,l.memoizedState=Dp(1|t,r,void 0,o===void 0?null:o)}function Hy(e,t,r,o){var l=ca();o=o===void 0?null:o;var d=void 0;if(oi!==null){var f=oi.memoizedState;if(d=f.destroy,o!==null&&K1(o,f.deps)){l.memoizedState=Dp(t,r,d,o);return}}En.flags|=e,l.memoizedState=Dp(1|t,r,d,o)}function U2(e,t){return rg(8390656,8,e,t)}function Y1(e,t){return Hy(2048,8,e,t)}function vP(e,t){return Hy(4,2,e,t)}function _P(e,t){return Hy(4,4,e,t)}function xP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bP(e,t,r){return r=r!=null?r.concat([e]):null,Hy(4,4,xP.bind(null,t,e),r)}function Q1(){}function wP(e,t){var r=ca();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&K1(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function SP(e,t){var r=ca();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&K1(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function CP(e,t,r){return yc&21?(Ba(r,t)||(r=ET(),En.lanes|=r,vc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=r)}function xB(e,t){var r=Xr;Xr=r!==0&&4>r?r:4,e(!0);var o=e_.transition;e_.transition={};try{e(!1),t()}finally{Xr=r,e_.transition=o}}function kP(){return ca().memoizedState}function bB(e,t,r){var o=wl(e);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},IP(e))TP(t,r);else if(r=sP(e,t,r,o),r!==null){var l=no();La(r,e,o,l),PP(r,t,o)}}function wB(e,t,r){var o=wl(e),l={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(IP(e))TP(t,l);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var f=t.lastRenderedState,c=d(f,r);if(l.hasEagerState=!0,l.eagerState=c,Ba(c,f)){var b=t.interleaved;b===null?(l.next=l,H1(t)):(l.next=b.next,b.next=l),t.interleaved=l;return}}catch{}finally{}r=sP(e,t,l,o),r!==null&&(l=no(),La(r,e,o,l),PP(r,t,o))}}function IP(e){var t=e.alternate;return e===En||t!==null&&t===En}function TP(e,t){np=Rg=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function PP(e,t,r){if(r&4194240){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,z1(e,r)}}var Lg={readContext:la,useCallback:Bi,useContext:Bi,useEffect:Bi,useImperativeHandle:Bi,useInsertionEffect:Bi,useLayoutEffect:Bi,useMemo:Bi,useReducer:Bi,useRef:Bi,useState:Bi,useDebugValue:Bi,useDeferredValue:Bi,useTransition:Bi,useMutableSource:Bi,useSyncExternalStore:Bi,useId:Bi,unstable_isNewReconciler:!1},SB={readContext:la,useCallback:function(e,t){return Za().memoizedState=[e,t===void 0?null:t],e},useContext:la,useEffect:U2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,rg(4194308,4,xP.bind(null,t,e),r)},useLayoutEffect:function(e,t){return rg(4194308,4,e,t)},useInsertionEffect:function(e,t){return rg(4,2,e,t)},useMemo:function(e,t){var r=Za();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=Za();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=bB.bind(null,En,e),[o.memoizedState,e]},useRef:function(e){var t=Za();return e={current:e},t.memoizedState=e},useState:V2,useDebugValue:Q1,useDeferredValue:function(e){return Za().memoizedState=e},useTransition:function(){var e=V2(!1),t=e[0];return e=xB.bind(null,e[1]),Za().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=En,l=Za();if(Sn){if(r===void 0)throw Error(ct(407));r=r()}else{if(r=t(),fi===null)throw Error(ct(349));yc&30||hP(o,t,r)}l.memoizedState=r;var d={value:r,getSnapshot:t};return l.queue=d,U2(fP.bind(null,o,d,e),[e]),o.flags|=2048,Dp(9,pP.bind(null,o,d,r,t),void 0,null),r},useId:function(){var e=Za(),t=fi.identifierPrefix;if(Sn){var r=Is,o=ks;r=(o&~(1<<32-Ra(o)-1)).toString(32)+r,t=":"+t+"R"+r,r=Mp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=_B++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},CB={readContext:la,useCallback:wP,useContext:la,useEffect:Y1,useImperativeHandle:bP,useInsertionEffect:vP,useLayoutEffect:_P,useMemo:SP,useReducer:t_,useRef:yP,useState:function(){return t_(Ap)},useDebugValue:Q1,useDeferredValue:function(e){var t=ca();return CP(t,oi.memoizedState,e)},useTransition:function(){var e=t_(Ap)[0],t=ca().memoizedState;return[e,t]},useMutableSource:uP,useSyncExternalStore:dP,useId:kP,unstable_isNewReconciler:!1},kB={readContext:la,useCallback:wP,useContext:la,useEffect:Y1,useImperativeHandle:bP,useInsertionEffect:vP,useLayoutEffect:_P,useMemo:SP,useReducer:r_,useRef:yP,useState:function(){return r_(Ap)},useDebugValue:Q1,useDeferredValue:function(e){var t=ca();return oi===null?t.memoizedState=e:CP(t,oi.memoizedState,e)},useTransition:function(){var e=r_(Ap)[0],t=ca().memoizedState;return[e,t]},useMutableSource:uP,useSyncExternalStore:dP,useId:kP,unstable_isNewReconciler:!1};function Ea(e,t){if(e&&e.defaultProps){t=zn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ix(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:zn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Wy={isMounted:function(e){return(e=e._reactInternals)?Cc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=no(),l=wl(e),d=Ts(o,l);d.payload=t,r!=null&&(d.callback=r),t=xl(e,d,l),t!==null&&(La(t,e,l,o),eg(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=no(),l=wl(e),d=Ts(o,l);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=xl(e,d,l),t!==null&&(La(t,e,l,o),eg(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=no(),o=wl(e),l=Ts(r,o);l.tag=2,t!=null&&(l.callback=t),t=xl(e,l,o),t!==null&&(La(t,e,o,r),eg(t,e,o))}};function H2(e,t,r,o,l,d,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,f):t.prototype&&t.prototype.isPureReactComponent?!kp(r,o)||!kp(l,d):!0}function EP(e,t,r){var o=!1,l=Tl,d=t.contextType;return typeof d=="object"&&d!==null?d=la(d):(l=_o(t)?mc:Ui.current,o=t.contextTypes,d=(o=o!=null)?Ku(e,l):Tl),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wy,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=d),t}function W2(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&Wy.enqueueReplaceState(t,t.state,null)}function ox(e,t,r,o){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs={},W1(e);var d=t.contextType;typeof d=="object"&&d!==null?l.context=la(d):(d=_o(t)?mc:Ui.current,l.context=Ku(e,d)),l.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(ix(e,t,d,r),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Wy.enqueueReplaceState(l,l.state,null),Ag(e,r,l,o),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Qu(e,t){try{var r="",o=t;do r+=Q3(o),o=o.return;while(o);var l=r}catch(d){l=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:l,digest:null}}function n_(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ax(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var IB=typeof WeakMap=="function"?WeakMap:Map;function zP(e,t,r){r=Ts(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){Bg||(Bg=!0,gx=o),ax(e,t)},r}function MP(e,t,r){r=Ts(-1,r),r.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var l=t.value;r.payload=function(){return o(l)},r.callback=function(){ax(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){ax(e,t),typeof o!="function"&&(bl===null?bl=new Set([this]):bl.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),r}function G2(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new IB;var l=new Set;o.set(t,l)}else l=o.get(t),l===void 0&&(l=new Set,o.set(t,l));l.has(r)||(l.add(r),e=NB.bind(null,e,t,r),t.then(e,e))}function q2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Z2(e,t,r,o,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ts(-1,1),t.tag=2,xl(r,t,1))),r.lanes|=1),e)}var TB=Bs.ReactCurrentOwner,yo=!1;function ro(e,t,r,o){t.child=e===null?aP(t,null,r,o):Ju(t,e.child,r,o)}function K2(e,t,r,o,l){r=r.render;var d=t.ref;return Vu(t,l),o=X1(e,t,r,o,d,l),r=J1(),e!==null&&!yo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Ds(e,t,l)):(Sn&&r&&O1(t),t.flags|=1,ro(e,t,o,l),t.child)}function X2(e,t,r,o,l){if(e===null){var d=r.type;return typeof d=="function"&&!sb(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,AP(e,t,d,o,l)):(e=ag(r.type,null,o,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&l)){var f=d.memoizedProps;if(r=r.compare,r=r!==null?r:kp,r(f,o)&&e.ref===t.ref)return Ds(e,t,l)}return t.flags|=1,e=Sl(d,o),e.ref=t.ref,e.return=t,t.child=e}function AP(e,t,r,o,l){if(e!==null){var d=e.memoizedProps;if(kp(d,o)&&e.ref===t.ref)if(yo=!1,t.pendingProps=o=d,(e.lanes&l)!==0)e.flags&131072&&(yo=!0);else return t.lanes=e.lanes,Ds(e,t,l)}return sx(e,t,r,o,l)}function DP(e,t,r){var o=t.pendingProps,l=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},un(Au,Eo),Eo|=r;else{if(!(r&1073741824))return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,un(Au,Eo),Eo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=d!==null?d.baseLanes:r,un(Au,Eo),Eo|=o}else d!==null?(o=d.baseLanes|r,t.memoizedState=null):o=r,un(Au,Eo),Eo|=o;return ro(e,t,l,r),t.child}function RP(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function sx(e,t,r,o,l){var d=_o(r)?mc:Ui.current;return d=Ku(t,d),Vu(t,l),r=X1(e,t,r,o,d,l),o=J1(),e!==null&&!yo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Ds(e,t,l)):(Sn&&o&&O1(t),t.flags|=1,ro(e,t,r,l),t.child)}function J2(e,t,r,o,l){if(_o(r)){var d=!0;Tg(t)}else d=!1;if(Vu(t,l),t.stateNode===null)ng(e,t),EP(t,r,o),ox(t,r,o,l),o=!0;else if(e===null){var f=t.stateNode,c=t.memoizedProps;f.props=c;var b=f.context,w=r.contextType;typeof w=="object"&&w!==null?w=la(w):(w=_o(r)?mc:Ui.current,w=Ku(t,w));var k=r.getDerivedStateFromProps,z=typeof k=="function"||typeof f.getSnapshotBeforeUpdate=="function";z||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(c!==o||b!==w)&&W2(t,f,o,w),sl=!1;var P=t.memoizedState;f.state=P,Ag(t,o,f,l),b=t.memoizedState,c!==o||P!==b||vo.current||sl?(typeof k=="function"&&(ix(t,r,k,o),b=t.memoizedState),(c=sl||H2(t,r,c,o,P,b,w))?(z||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=b),f.props=o,f.state=b,f.context=w,o=c):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{f=t.stateNode,lP(e,t),c=t.memoizedProps,w=t.type===t.elementType?c:Ea(t.type,c),f.props=w,z=t.pendingProps,P=f.context,b=r.contextType,typeof b=="object"&&b!==null?b=la(b):(b=_o(r)?mc:Ui.current,b=Ku(t,b));var V=r.getDerivedStateFromProps;(k=typeof V=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(c!==z||P!==b)&&W2(t,f,o,b),sl=!1,P=t.memoizedState,f.state=P,Ag(t,o,f,l);var U=t.memoizedState;c!==z||P!==U||vo.current||sl?(typeof V=="function"&&(ix(t,r,V,o),U=t.memoizedState),(w=sl||H2(t,r,w,o,P,U,b)||!1)?(k||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,U,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,U,b)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||c===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=U),f.props=o,f.state=U,f.context=b,o=w):(typeof f.componentDidUpdate!="function"||c===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),o=!1)}return lx(e,t,r,o,d,l)}function lx(e,t,r,o,l,d){RP(e,t);var f=(t.flags&128)!==0;if(!o&&!f)return l&&$2(t,r,!1),Ds(e,t,d);o=t.stateNode,TB.current=t;var c=f&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&f?(t.child=Ju(t,e.child,null,d),t.child=Ju(t,null,c,d)):ro(e,t,c,d),t.memoizedState=o.state,l&&$2(t,r,!0),t.child}function LP(e){var t=e.stateNode;t.pendingContext?L2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&L2(e,t.context,!1),G1(e,t.containerInfo)}function Y2(e,t,r,o,l){return Xu(),N1(l),t.flags|=256,ro(e,t,r,o),t.child}var cx={dehydrated:null,treeContext:null,retryLane:0};function ux(e){return{baseLanes:e,cachePool:null,transitions:null}}function $P(e,t,r){var o=t.pendingProps,l=Pn.current,d=!1,f=(t.flags&128)!==0,c;if((c=f)||(c=e!==null&&e.memoizedState===null?!1:(l&2)!==0),c?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),un(Pn,l&1),e===null)return rx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=o.children,e=o.fallback,d?(o=t.mode,d=t.child,f={mode:"hidden",children:f},!(o&1)&&d!==null?(d.childLanes=0,d.pendingProps=f):d=Zy(f,o,0,null),e=dc(e,o,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=ux(r),t.memoizedState=cx,e):eb(t,f));if(l=e.memoizedState,l!==null&&(c=l.dehydrated,c!==null))return PB(e,t,f,o,c,l,r);if(d){d=o.fallback,f=t.mode,l=e.child,c=l.sibling;var b={mode:"hidden",children:o.children};return!(f&1)&&t.child!==l?(o=t.child,o.childLanes=0,o.pendingProps=b,t.deletions=null):(o=Sl(l,b),o.subtreeFlags=l.subtreeFlags&14680064),c!==null?d=Sl(c,d):(d=dc(d,f,r,null),d.flags|=2),d.return=t,o.return=t,o.sibling=d,t.child=o,o=d,d=t.child,f=e.child.memoizedState,f=f===null?ux(r):{baseLanes:f.baseLanes|r,cachePool:null,transitions:f.transitions},d.memoizedState=f,d.childLanes=e.childLanes&~r,t.memoizedState=cx,o}return d=e.child,e=d.sibling,o=Sl(d,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=r),o.return=t,o.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function eb(e,t){return t=Zy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bm(e,t,r,o){return o!==null&&N1(o),Ju(t,e.child,null,r),e=eb(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function PB(e,t,r,o,l,d,f){if(r)return t.flags&256?(t.flags&=-257,o=n_(Error(ct(422))),Bm(e,t,f,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=o.fallback,l=t.mode,o=Zy({mode:"visible",children:o.children},l,0,null),d=dc(d,l,f,null),d.flags|=2,o.return=t,d.return=t,o.sibling=d,t.child=o,t.mode&1&&Ju(t,e.child,null,f),t.child.memoizedState=ux(f),t.memoizedState=cx,d);if(!(t.mode&1))return Bm(e,t,f,null);if(l.data==="$!"){if(o=l.nextSibling&&l.nextSibling.dataset,o)var c=o.dgst;return o=c,d=Error(ct(419)),o=n_(d,o,void 0),Bm(e,t,f,o)}if(c=(f&e.childLanes)!==0,yo||c){if(o=fi,o!==null){switch(f&-f){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(o.suspendedLanes|f)?0:l,l!==0&&l!==d.retryLane&&(d.retryLane=l,As(e,l),La(o,e,l,-1))}return ab(),o=n_(Error(ct(421))),Bm(e,t,f,o)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=jB.bind(null,e),l._reactRetry=t,null):(e=d.treeContext,Lo=_l(l.nextSibling),Bo=t,Sn=!0,Aa=null,e!==null&&(ea[ta++]=ks,ea[ta++]=Is,ea[ta++]=gc,ks=e.id,Is=e.overflow,gc=t),t=eb(t,o.children),t.flags|=4096,t)}function Q2(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),nx(e.return,t,r)}function i_(e,t,r,o,l){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:l}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=r,d.tailMode=l)}function BP(e,t,r){var o=t.pendingProps,l=o.revealOrder,d=o.tail;if(ro(e,t,o.children,r),o=Pn.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Q2(e,r,t);else if(e.tag===19)Q2(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(un(Pn,o),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)e=r.alternate,e!==null&&Dg(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),i_(t,!1,l,r,d);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Dg(e)===null){t.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}i_(t,!0,r,null,d);break;case"together":i_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ng(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ds(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ct(153));if(t.child!==null){for(e=t.child,r=Sl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Sl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function EB(e,t,r){switch(t.tag){case 3:LP(t),Xu();break;case 5:cP(t);break;case 1:_o(t.type)&&Tg(t);break;case 4:G1(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,l=t.memoizedProps.value;un(zg,o._currentValue),o._currentValue=l;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(un(Pn,Pn.current&1),t.flags|=128,null):r&t.child.childLanes?$P(e,t,r):(un(Pn,Pn.current&1),e=Ds(e,t,r),e!==null?e.sibling:null);un(Pn,Pn.current&1);break;case 19:if(o=(r&t.childLanes)!==0,e.flags&128){if(o)return BP(e,t,r);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),un(Pn,Pn.current),o)break;return null;case 22:case 23:return t.lanes=0,DP(e,t,r)}return Ds(e,t,r)}var OP,dx,FP,NP;OP=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};dx=function(){};FP=function(e,t,r,o){var l=e.memoizedProps;if(l!==o){e=t.stateNode,sc(ts.current);var d=null;switch(r){case"input":l=D_(e,l),o=D_(e,o),d=[];break;case"select":l=zn({},l,{value:void 0}),o=zn({},o,{value:void 0}),d=[];break;case"textarea":l=$_(e,l),o=$_(e,o),d=[];break;default:typeof l.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=kg)}O_(r,o);var f;r=null;for(w in l)if(!o.hasOwnProperty(w)&&l.hasOwnProperty(w)&&l[w]!=null)if(w==="style"){var c=l[w];for(f in c)c.hasOwnProperty(f)&&(r||(r={}),r[f]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(vp.hasOwnProperty(w)?d||(d=[]):(d=d||[]).push(w,null));for(w in o){var b=o[w];if(c=l!=null?l[w]:void 0,o.hasOwnProperty(w)&&b!==c&&(b!=null||c!=null))if(w==="style")if(c){for(f in c)!c.hasOwnProperty(f)||b&&b.hasOwnProperty(f)||(r||(r={}),r[f]="");for(f in b)b.hasOwnProperty(f)&&c[f]!==b[f]&&(r||(r={}),r[f]=b[f])}else r||(d||(d=[]),d.push(w,r)),r=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,c=c?c.__html:void 0,b!=null&&c!==b&&(d=d||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(vp.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&fn("scroll",e),d||c===b||(d=[])):(d=d||[]).push(w,b))}r&&(d=d||[]).push("style",r);var w=d;(t.updateQueue=w)&&(t.flags|=4)}};NP=function(e,t,r,o){r!==o&&(t.flags|=4)};function $h(e,t){if(!Sn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Oi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,o|=l.subtreeFlags&14680064,o|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,o|=l.subtreeFlags,o|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function zB(e,t,r){var o=t.pendingProps;switch(F1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oi(t),null;case 1:return _o(t.type)&&Ig(),Oi(t),null;case 3:return o=t.stateNode,Yu(),mn(vo),mn(Ui),Z1(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Lm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Aa!==null&&(_x(Aa),Aa=null))),dx(e,t),Oi(t),null;case 5:q1(t);var l=sc(zp.current);if(r=t.type,e!==null&&t.stateNode!=null)FP(e,t,r,o,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(ct(166));return Oi(t),null}if(e=sc(ts.current),Lm(t)){o=t.stateNode,r=t.type;var d=t.memoizedProps;switch(o[Ja]=t,o[Pp]=d,e=(t.mode&1)!==0,r){case"dialog":fn("cancel",o),fn("close",o);break;case"iframe":case"object":case"embed":fn("load",o);break;case"video":case"audio":for(l=0;l<Kh.length;l++)fn(Kh[l],o);break;case"source":fn("error",o);break;case"img":case"image":case"link":fn("error",o),fn("load",o);break;case"details":fn("toggle",o);break;case"input":l2(o,d),fn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!d.multiple},fn("invalid",o);break;case"textarea":u2(o,d),fn("invalid",o)}O_(r,d),l=null;for(var f in d)if(d.hasOwnProperty(f)){var c=d[f];f==="children"?typeof c=="string"?o.textContent!==c&&(d.suppressHydrationWarning!==!0&&Rm(o.textContent,c,e),l=["children",c]):typeof c=="number"&&o.textContent!==""+c&&(d.suppressHydrationWarning!==!0&&Rm(o.textContent,c,e),l=["children",""+c]):vp.hasOwnProperty(f)&&c!=null&&f==="onScroll"&&fn("scroll",o)}switch(r){case"input":Im(o),c2(o,d,!0);break;case"textarea":Im(o),d2(o);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(o.onclick=kg)}o=l,t.updateQueue=o,o!==null&&(t.flags|=4)}else{f=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=fT(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=f.createElement(r,{is:o.is}):(e=f.createElement(r),r==="select"&&(f=e,o.multiple?f.multiple=!0:o.size&&(f.size=o.size))):e=f.createElementNS(e,r),e[Ja]=t,e[Pp]=o,OP(e,t,!1,!1),t.stateNode=e;e:{switch(f=F_(r,o),r){case"dialog":fn("cancel",e),fn("close",e),l=o;break;case"iframe":case"object":case"embed":fn("load",e),l=o;break;case"video":case"audio":for(l=0;l<Kh.length;l++)fn(Kh[l],e);l=o;break;case"source":fn("error",e),l=o;break;case"img":case"image":case"link":fn("error",e),fn("load",e),l=o;break;case"details":fn("toggle",e),l=o;break;case"input":l2(e,o),l=D_(e,o),fn("invalid",e);break;case"option":l=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},l=zn({},o,{value:void 0}),fn("invalid",e);break;case"textarea":u2(e,o),l=$_(e,o),fn("invalid",e);break;default:l=o}O_(r,l),c=l;for(d in c)if(c.hasOwnProperty(d)){var b=c[d];d==="style"?yT(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&mT(e,b)):d==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&_p(e,b):typeof b=="number"&&_p(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(vp.hasOwnProperty(d)?b!=null&&d==="onScroll"&&fn("scroll",e):b!=null&&C1(e,d,b,f))}switch(r){case"input":Im(e),c2(e,o,!1);break;case"textarea":Im(e),d2(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Il(o.value));break;case"select":e.multiple=!!o.multiple,d=o.value,d!=null?Ou(e,!!o.multiple,d,!1):o.defaultValue!=null&&Ou(e,!!o.multiple,o.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=kg)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oi(t),null;case 6:if(e&&t.stateNode!=null)NP(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(ct(166));if(r=sc(zp.current),sc(ts.current),Lm(t)){if(o=t.stateNode,r=t.memoizedProps,o[Ja]=t,(d=o.nodeValue!==r)&&(e=Bo,e!==null))switch(e.tag){case 3:Rm(o.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Rm(o.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[Ja]=t,t.stateNode=o}return Oi(t),null;case 13:if(mn(Pn),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sn&&Lo!==null&&t.mode&1&&!(t.flags&128))iP(),Xu(),t.flags|=98560,d=!1;else if(d=Lm(t),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(ct(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(ct(317));d[Ja]=t}else Xu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oi(t),d=!1}else Aa!==null&&(_x(Aa),Aa=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||Pn.current&1?ai===0&&(ai=3):ab())),t.updateQueue!==null&&(t.flags|=4),Oi(t),null);case 4:return Yu(),dx(e,t),e===null&&Ip(t.stateNode.containerInfo),Oi(t),null;case 10:return U1(t.type._context),Oi(t),null;case 17:return _o(t.type)&&Ig(),Oi(t),null;case 19:if(mn(Pn),d=t.memoizedState,d===null)return Oi(t),null;if(o=(t.flags&128)!==0,f=d.rendering,f===null)if(o)$h(d,!1);else{if(ai!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=Dg(e),f!==null){for(t.flags|=128,$h(d,!1),o=f.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;r!==null;)d=r,e=o,d.flags&=14680066,f=d.alternate,f===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=f.childLanes,d.lanes=f.lanes,d.child=f.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=f.memoizedProps,d.memoizedState=f.memoizedState,d.updateQueue=f.updateQueue,d.type=f.type,e=f.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return un(Pn,Pn.current&1|2),t.child}e=e.sibling}d.tail!==null&&Zn()>ed&&(t.flags|=128,o=!0,$h(d,!1),t.lanes=4194304)}else{if(!o)if(e=Dg(f),e!==null){if(t.flags|=128,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),$h(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Sn)return Oi(t),null}else 2*Zn()-d.renderingStartTime>ed&&r!==1073741824&&(t.flags|=128,o=!0,$h(d,!1),t.lanes=4194304);d.isBackwards?(f.sibling=t.child,t.child=f):(r=d.last,r!==null?r.sibling=f:t.child=f,d.last=f)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Zn(),t.sibling=null,r=Pn.current,un(Pn,o?r&1|2:r&1),t):(Oi(t),null);case 22:case 23:return ob(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?Eo&1073741824&&(Oi(t),t.subtreeFlags&6&&(t.flags|=8192)):Oi(t),null;case 24:return null;case 25:return null}throw Error(ct(156,t.tag))}function MB(e,t){switch(F1(t),t.tag){case 1:return _o(t.type)&&Ig(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yu(),mn(vo),mn(Ui),Z1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return q1(t),null;case 13:if(mn(Pn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ct(340));Xu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return mn(Pn),null;case 4:return Yu(),null;case 10:return U1(t.type._context),null;case 22:case 23:return ob(),null;case 24:return null;default:return null}}var Om=!1,ji=!1,AB=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function Mu(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){On(e,t,o)}else r.current=null}function hx(e,t,r){try{r()}catch(o){On(e,t,o)}}var eC=!1;function DB(e,t){if(K_=wg,e=WT(),B1(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var l=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var f=0,c=-1,b=-1,w=0,k=0,z=e,P=null;t:for(;;){for(var V;z!==r||l!==0&&z.nodeType!==3||(c=f+l),z!==d||o!==0&&z.nodeType!==3||(b=f+o),z.nodeType===3&&(f+=z.nodeValue.length),(V=z.firstChild)!==null;)P=z,z=V;for(;;){if(z===e)break t;if(P===r&&++w===l&&(c=f),P===d&&++k===o&&(b=f),(V=z.nextSibling)!==null)break;z=P,P=z.parentNode}z=V}r=c===-1||b===-1?null:{start:c,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(X_={focusedElem:e,selectionRange:r},wg=!1,Ht=t;Ht!==null;)if(t=Ht,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ht=e;else for(;Ht!==null;){t=Ht;try{var U=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var H=U.memoizedProps,X=U.memoizedState,B=t.stateNode,L=B.getSnapshotBeforeUpdate(t.elementType===t.type?H:Ea(t.type,H),X);B.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var G=t.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ct(163))}}catch(te){On(t,t.return,te)}if(e=t.sibling,e!==null){e.return=t.return,Ht=e;break}Ht=t.return}return U=eC,eC=!1,U}function ip(e,t,r){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var l=o=o.next;do{if((l.tag&e)===e){var d=l.destroy;l.destroy=void 0,d!==void 0&&hx(t,r,d)}l=l.next}while(l!==o)}}function Gy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function px(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function jP(e){var t=e.alternate;t!==null&&(e.alternate=null,jP(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ja],delete t[Pp],delete t[Q_],delete t[mB],delete t[gB])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function VP(e){return e.tag===5||e.tag===3||e.tag===4}function tC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||VP(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fx(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=kg));else if(o!==4&&(e=e.child,e!==null))for(fx(e,t,r),e=e.sibling;e!==null;)fx(e,t,r),e=e.sibling}function mx(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(mx(e,t,r),e=e.sibling;e!==null;)mx(e,t,r),e=e.sibling}var Si=null,za=!1;function il(e,t,r){for(r=r.child;r!==null;)UP(e,t,r),r=r.sibling}function UP(e,t,r){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(Oy,r)}catch{}switch(r.tag){case 5:ji||Mu(r,t);case 6:var o=Si,l=za;Si=null,il(e,t,r),Si=o,za=l,Si!==null&&(za?(e=Si,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Si.removeChild(r.stateNode));break;case 18:Si!==null&&(za?(e=Si,r=r.stateNode,e.nodeType===8?J0(e.parentNode,r):e.nodeType===1&&J0(e,r),Sp(e)):J0(Si,r.stateNode));break;case 4:o=Si,l=za,Si=r.stateNode.containerInfo,za=!0,il(e,t,r),Si=o,za=l;break;case 0:case 11:case 14:case 15:if(!ji&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){l=o=o.next;do{var d=l,f=d.destroy;d=d.tag,f!==void 0&&(d&2||d&4)&&hx(r,t,f),l=l.next}while(l!==o)}il(e,t,r);break;case 1:if(!ji&&(Mu(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(c){On(r,t,c)}il(e,t,r);break;case 21:il(e,t,r);break;case 22:r.mode&1?(ji=(o=ji)||r.memoizedState!==null,il(e,t,r),ji=o):il(e,t,r);break;default:il(e,t,r)}}function rC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new AB),t.forEach(function(o){var l=VB.bind(null,e,o);r.has(o)||(r.add(o),o.then(l,l))})}}function Ia(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var l=r[o];try{var d=e,f=t,c=f;e:for(;c!==null;){switch(c.tag){case 5:Si=c.stateNode,za=!1;break e;case 3:Si=c.stateNode.containerInfo,za=!0;break e;case 4:Si=c.stateNode.containerInfo,za=!0;break e}c=c.return}if(Si===null)throw Error(ct(160));UP(d,f,l),Si=null,za=!1;var b=l.alternate;b!==null&&(b.return=null),l.return=null}catch(w){On(l,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)HP(t,e),t=t.sibling}function HP(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ia(t,e),qa(e),o&4){try{ip(3,e,e.return),Gy(3,e)}catch(H){On(e,e.return,H)}try{ip(5,e,e.return)}catch(H){On(e,e.return,H)}}break;case 1:Ia(t,e),qa(e),o&512&&r!==null&&Mu(r,r.return);break;case 5:if(Ia(t,e),qa(e),o&512&&r!==null&&Mu(r,r.return),e.flags&32){var l=e.stateNode;try{_p(l,"")}catch(H){On(e,e.return,H)}}if(o&4&&(l=e.stateNode,l!=null)){var d=e.memoizedProps,f=r!==null?r.memoizedProps:d,c=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{c==="input"&&d.type==="radio"&&d.name!=null&&hT(l,d),F_(c,f);var w=F_(c,d);for(f=0;f<b.length;f+=2){var k=b[f],z=b[f+1];k==="style"?yT(l,z):k==="dangerouslySetInnerHTML"?mT(l,z):k==="children"?_p(l,z):C1(l,k,z,w)}switch(c){case"input":R_(l,d);break;case"textarea":pT(l,d);break;case"select":var P=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!d.multiple;var V=d.value;V!=null?Ou(l,!!d.multiple,V,!1):P!==!!d.multiple&&(d.defaultValue!=null?Ou(l,!!d.multiple,d.defaultValue,!0):Ou(l,!!d.multiple,d.multiple?[]:"",!1))}l[Pp]=d}catch(H){On(e,e.return,H)}}break;case 6:if(Ia(t,e),qa(e),o&4){if(e.stateNode===null)throw Error(ct(162));l=e.stateNode,d=e.memoizedProps;try{l.nodeValue=d}catch(H){On(e,e.return,H)}}break;case 3:if(Ia(t,e),qa(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Sp(t.containerInfo)}catch(H){On(e,e.return,H)}break;case 4:Ia(t,e),qa(e);break;case 13:Ia(t,e),qa(e),l=e.child,l.flags&8192&&(d=l.memoizedState!==null,l.stateNode.isHidden=d,!d||l.alternate!==null&&l.alternate.memoizedState!==null||(nb=Zn())),o&4&&rC(e);break;case 22:if(k=r!==null&&r.memoizedState!==null,e.mode&1?(ji=(w=ji)||k,Ia(t,e),ji=w):Ia(t,e),qa(e),o&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!k&&e.mode&1)for(Ht=e,k=e.child;k!==null;){for(z=Ht=k;Ht!==null;){switch(P=Ht,V=P.child,P.tag){case 0:case 11:case 14:case 15:ip(4,P,P.return);break;case 1:Mu(P,P.return);var U=P.stateNode;if(typeof U.componentWillUnmount=="function"){o=P,r=P.return;try{t=o,U.props=t.memoizedProps,U.state=t.memoizedState,U.componentWillUnmount()}catch(H){On(o,r,H)}}break;case 5:Mu(P,P.return);break;case 22:if(P.memoizedState!==null){iC(z);continue}}V!==null?(V.return=P,Ht=V):iC(z)}k=k.sibling}e:for(k=null,z=e;;){if(z.tag===5){if(k===null){k=z;try{l=z.stateNode,w?(d=l.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(c=z.stateNode,b=z.memoizedProps.style,f=b!=null&&b.hasOwnProperty("display")?b.display:null,c.style.display=gT("display",f))}catch(H){On(e,e.return,H)}}}else if(z.tag===6){if(k===null)try{z.stateNode.nodeValue=w?"":z.memoizedProps}catch(H){On(e,e.return,H)}}else if((z.tag!==22&&z.tag!==23||z.memoizedState===null||z===e)&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===e)break e;for(;z.sibling===null;){if(z.return===null||z.return===e)break e;k===z&&(k=null),z=z.return}k===z&&(k=null),z.sibling.return=z.return,z=z.sibling}}break;case 19:Ia(t,e),qa(e),o&4&&rC(e);break;case 21:break;default:Ia(t,e),qa(e)}}function qa(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(VP(r)){var o=r;break e}r=r.return}throw Error(ct(160))}switch(o.tag){case 5:var l=o.stateNode;o.flags&32&&(_p(l,""),o.flags&=-33);var d=tC(e);mx(e,d,l);break;case 3:case 4:var f=o.stateNode.containerInfo,c=tC(e);fx(e,c,f);break;default:throw Error(ct(161))}}catch(b){On(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function RB(e,t,r){Ht=e,WP(e)}function WP(e,t,r){for(var o=(e.mode&1)!==0;Ht!==null;){var l=Ht,d=l.child;if(l.tag===22&&o){var f=l.memoizedState!==null||Om;if(!f){var c=l.alternate,b=c!==null&&c.memoizedState!==null||ji;c=Om;var w=ji;if(Om=f,(ji=b)&&!w)for(Ht=l;Ht!==null;)f=Ht,b=f.child,f.tag===22&&f.memoizedState!==null?oC(l):b!==null?(b.return=f,Ht=b):oC(l);for(;d!==null;)Ht=d,WP(d),d=d.sibling;Ht=l,Om=c,ji=w}nC(e)}else l.subtreeFlags&8772&&d!==null?(d.return=l,Ht=d):nC(e)}}function nC(e){for(;Ht!==null;){var t=Ht;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ji||Gy(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!ji)if(r===null)o.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:Ea(t.type,r.memoizedProps);o.componentDidUpdate(l,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&j2(t,d,o);break;case 3:var f=t.updateQueue;if(f!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}j2(t,f,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var k=w.memoizedState;if(k!==null){var z=k.dehydrated;z!==null&&Sp(z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ct(163))}ji||t.flags&512&&px(t)}catch(P){On(t,t.return,P)}}if(t===e){Ht=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ht=r;break}Ht=t.return}}function iC(e){for(;Ht!==null;){var t=Ht;if(t===e){Ht=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ht=r;break}Ht=t.return}}function oC(e){for(;Ht!==null;){var t=Ht;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Gy(4,t)}catch(b){On(t,r,b)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var l=t.return;try{o.componentDidMount()}catch(b){On(t,l,b)}}var d=t.return;try{px(t)}catch(b){On(t,d,b)}break;case 5:var f=t.return;try{px(t)}catch(b){On(t,f,b)}}}catch(b){On(t,t.return,b)}if(t===e){Ht=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Ht=c;break}Ht=t.return}}var LB=Math.ceil,$g=Bs.ReactCurrentDispatcher,tb=Bs.ReactCurrentOwner,aa=Bs.ReactCurrentBatchConfig,$r=0,fi=null,ei=null,Ii=0,Eo=0,Au=zl(0),ai=0,Rp=null,vc=0,qy=0,rb=0,op=null,go=null,nb=0,ed=1/0,Ss=null,Bg=!1,gx=null,bl=null,Fm=!1,ml=null,Og=0,ap=0,yx=null,ig=-1,og=0;function no(){return $r&6?Zn():ig!==-1?ig:ig=Zn()}function wl(e){return e.mode&1?$r&2&&Ii!==0?Ii&-Ii:vB.transition!==null?(og===0&&(og=ET()),og):(e=Xr,e!==0||(e=window.event,e=e===void 0?16:$T(e.type)),e):1}function La(e,t,r,o){if(50<ap)throw ap=0,yx=null,Error(ct(185));Xp(e,r,o),(!($r&2)||e!==fi)&&(e===fi&&(!($r&2)&&(qy|=r),ai===4&&ul(e,Ii)),xo(e,o),r===1&&$r===0&&!(t.mode&1)&&(ed=Zn()+500,Uy&&Ml()))}function xo(e,t){var r=e.callbackNode;v$(e,t);var o=bg(e,e===fi?Ii:0);if(o===0)r!==null&&f2(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(r!=null&&f2(r),t===1)e.tag===0?yB(aC.bind(null,e)):tP(aC.bind(null,e)),pB(function(){!($r&6)&&Ml()}),r=null;else{switch(zT(o)){case 1:r=E1;break;case 4:r=TT;break;case 16:r=xg;break;case 536870912:r=PT;break;default:r=xg}r=QP(r,GP.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function GP(e,t){if(ig=-1,og=0,$r&6)throw Error(ct(327));var r=e.callbackNode;if(Uu()&&e.callbackNode!==r)return null;var o=bg(e,e===fi?Ii:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Fg(e,o);else{t=o;var l=$r;$r|=2;var d=ZP();(fi!==e||Ii!==t)&&(Ss=null,ed=Zn()+500,uc(e,t));do try{OB();break}catch(c){qP(e,c)}while(!0);V1(),$g.current=d,$r=l,ei!==null?t=0:(fi=null,Ii=0,t=ai)}if(t!==0){if(t===2&&(l=H_(e),l!==0&&(o=l,t=vx(e,l))),t===1)throw r=Rp,uc(e,0),ul(e,o),xo(e,Zn()),r;if(t===6)ul(e,o);else{if(l=e.current.alternate,!(o&30)&&!$B(l)&&(t=Fg(e,o),t===2&&(d=H_(e),d!==0&&(o=d,t=vx(e,d))),t===1))throw r=Rp,uc(e,0),ul(e,o),xo(e,Zn()),r;switch(e.finishedWork=l,e.finishedLanes=o,t){case 0:case 1:throw Error(ct(345));case 2:rc(e,go,Ss);break;case 3:if(ul(e,o),(o&130023424)===o&&(t=nb+500-Zn(),10<t)){if(bg(e,0)!==0)break;if(l=e.suspendedLanes,(l&o)!==o){no(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Y_(rc.bind(null,e,go,Ss),t);break}rc(e,go,Ss);break;case 4:if(ul(e,o),(o&4194240)===o)break;for(t=e.eventTimes,l=-1;0<o;){var f=31-Ra(o);d=1<<f,f=t[f],f>l&&(l=f),o&=~d}if(o=l,o=Zn()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*LB(o/1960))-o,10<o){e.timeoutHandle=Y_(rc.bind(null,e,go,Ss),o);break}rc(e,go,Ss);break;case 5:rc(e,go,Ss);break;default:throw Error(ct(329))}}}return xo(e,Zn()),e.callbackNode===r?GP.bind(null,e):null}function vx(e,t){var r=op;return e.current.memoizedState.isDehydrated&&(uc(e,t).flags|=256),e=Fg(e,t),e!==2&&(t=go,go=r,t!==null&&_x(t)),e}function _x(e){go===null?go=e:go.push.apply(go,e)}function $B(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var l=r[o],d=l.getSnapshot;l=l.value;try{if(!Ba(d(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ul(e,t){for(t&=~rb,t&=~qy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ra(t),o=1<<r;e[r]=-1,t&=~o}}function aC(e){if($r&6)throw Error(ct(327));Uu();var t=bg(e,0);if(!(t&1))return xo(e,Zn()),null;var r=Fg(e,t);if(e.tag!==0&&r===2){var o=H_(e);o!==0&&(t=o,r=vx(e,o))}if(r===1)throw r=Rp,uc(e,0),ul(e,t),xo(e,Zn()),r;if(r===6)throw Error(ct(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,rc(e,go,Ss),xo(e,Zn()),null}function ib(e,t){var r=$r;$r|=1;try{return e(t)}finally{$r=r,$r===0&&(ed=Zn()+500,Uy&&Ml())}}function _c(e){ml!==null&&ml.tag===0&&!($r&6)&&Uu();var t=$r;$r|=1;var r=aa.transition,o=Xr;try{if(aa.transition=null,Xr=1,e)return e()}finally{Xr=o,aa.transition=r,$r=t,!($r&6)&&Ml()}}function ob(){Eo=Au.current,mn(Au)}function uc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,hB(r)),ei!==null)for(r=ei.return;r!==null;){var o=r;switch(F1(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Ig();break;case 3:Yu(),mn(vo),mn(Ui),Z1();break;case 5:q1(o);break;case 4:Yu();break;case 13:mn(Pn);break;case 19:mn(Pn);break;case 10:U1(o.type._context);break;case 22:case 23:ob()}r=r.return}if(fi=e,ei=e=Sl(e.current,null),Ii=Eo=t,ai=0,Rp=null,rb=qy=vc=0,go=op=null,ac!==null){for(t=0;t<ac.length;t++)if(r=ac[t],o=r.interleaved,o!==null){r.interleaved=null;var l=o.next,d=r.pending;if(d!==null){var f=d.next;d.next=l,o.next=f}r.pending=o}ac=null}return e}function qP(e,t){do{var r=ei;try{if(V1(),tg.current=Lg,Rg){for(var o=En.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}Rg=!1}if(yc=0,pi=oi=En=null,np=!1,Mp=0,tb.current=null,r===null||r.return===null){ai=1,Rp=t,ei=null;break}e:{var d=e,f=r.return,c=r,b=t;if(t=Ii,c.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,k=c,z=k.tag;if(!(k.mode&1)&&(z===0||z===11||z===15)){var P=k.alternate;P?(k.updateQueue=P.updateQueue,k.memoizedState=P.memoizedState,k.lanes=P.lanes):(k.updateQueue=null,k.memoizedState=null)}var V=q2(f);if(V!==null){V.flags&=-257,Z2(V,f,c,d,t),V.mode&1&&G2(d,w,t),t=V,b=w;var U=t.updateQueue;if(U===null){var H=new Set;H.add(b),t.updateQueue=H}else U.add(b);break e}else{if(!(t&1)){G2(d,w,t),ab();break e}b=Error(ct(426))}}else if(Sn&&c.mode&1){var X=q2(f);if(X!==null){!(X.flags&65536)&&(X.flags|=256),Z2(X,f,c,d,t),N1(Qu(b,c));break e}}d=b=Qu(b,c),ai!==4&&(ai=2),op===null?op=[d]:op.push(d),d=f;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var B=zP(d,b,t);N2(d,B);break e;case 1:c=b;var L=d.type,G=d.stateNode;if(!(d.flags&128)&&(typeof L.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(bl===null||!bl.has(G)))){d.flags|=65536,t&=-t,d.lanes|=t;var te=MP(d,c,t);N2(d,te);break e}}d=d.return}while(d!==null)}XP(r)}catch(ne){t=ne,ei===r&&r!==null&&(ei=r=r.return);continue}break}while(!0)}function ZP(){var e=$g.current;return $g.current=Lg,e===null?Lg:e}function ab(){(ai===0||ai===3||ai===2)&&(ai=4),fi===null||!(vc&268435455)&&!(qy&268435455)||ul(fi,Ii)}function Fg(e,t){var r=$r;$r|=2;var o=ZP();(fi!==e||Ii!==t)&&(Ss=null,uc(e,t));do try{BB();break}catch(l){qP(e,l)}while(!0);if(V1(),$r=r,$g.current=o,ei!==null)throw Error(ct(261));return fi=null,Ii=0,ai}function BB(){for(;ei!==null;)KP(ei)}function OB(){for(;ei!==null&&!c$();)KP(ei)}function KP(e){var t=YP(e.alternate,e,Eo);e.memoizedProps=e.pendingProps,t===null?XP(e):ei=t,tb.current=null}function XP(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=MB(r,t),r!==null){r.flags&=32767,ei=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ai=6,ei=null;return}}else if(r=zB(r,t,Eo),r!==null){ei=r;return}if(t=t.sibling,t!==null){ei=t;return}ei=t=e}while(t!==null);ai===0&&(ai=5)}function rc(e,t,r){var o=Xr,l=aa.transition;try{aa.transition=null,Xr=1,FB(e,t,r,o)}finally{aa.transition=l,Xr=o}return null}function FB(e,t,r,o){do Uu();while(ml!==null);if($r&6)throw Error(ct(327));r=e.finishedWork;var l=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ct(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(_$(e,d),e===fi&&(ei=fi=null,Ii=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Fm||(Fm=!0,QP(xg,function(){return Uu(),null})),d=(r.flags&15990)!==0,r.subtreeFlags&15990||d){d=aa.transition,aa.transition=null;var f=Xr;Xr=1;var c=$r;$r|=4,tb.current=null,DB(e,r),HP(r,e),oB(X_),wg=!!K_,X_=K_=null,e.current=r,RB(r),u$(),$r=c,Xr=f,aa.transition=d}else e.current=r;if(Fm&&(Fm=!1,ml=e,Og=l),d=e.pendingLanes,d===0&&(bl=null),p$(r.stateNode),xo(e,Zn()),t!==null)for(o=e.onRecoverableError,r=0;r<t.length;r++)l=t[r],o(l.value,{componentStack:l.stack,digest:l.digest});if(Bg)throw Bg=!1,e=gx,gx=null,e;return Og&1&&e.tag!==0&&Uu(),d=e.pendingLanes,d&1?e===yx?ap++:(ap=0,yx=e):ap=0,Ml(),null}function Uu(){if(ml!==null){var e=zT(Og),t=aa.transition,r=Xr;try{if(aa.transition=null,Xr=16>e?16:e,ml===null)var o=!1;else{if(e=ml,ml=null,Og=0,$r&6)throw Error(ct(331));var l=$r;for($r|=4,Ht=e.current;Ht!==null;){var d=Ht,f=d.child;if(Ht.flags&16){var c=d.deletions;if(c!==null){for(var b=0;b<c.length;b++){var w=c[b];for(Ht=w;Ht!==null;){var k=Ht;switch(k.tag){case 0:case 11:case 15:ip(8,k,d)}var z=k.child;if(z!==null)z.return=k,Ht=z;else for(;Ht!==null;){k=Ht;var P=k.sibling,V=k.return;if(jP(k),k===w){Ht=null;break}if(P!==null){P.return=V,Ht=P;break}Ht=V}}}var U=d.alternate;if(U!==null){var H=U.child;if(H!==null){U.child=null;do{var X=H.sibling;H.sibling=null,H=X}while(H!==null)}}Ht=d}}if(d.subtreeFlags&2064&&f!==null)f.return=d,Ht=f;else e:for(;Ht!==null;){if(d=Ht,d.flags&2048)switch(d.tag){case 0:case 11:case 15:ip(9,d,d.return)}var B=d.sibling;if(B!==null){B.return=d.return,Ht=B;break e}Ht=d.return}}var L=e.current;for(Ht=L;Ht!==null;){f=Ht;var G=f.child;if(f.subtreeFlags&2064&&G!==null)G.return=f,Ht=G;else e:for(f=L;Ht!==null;){if(c=Ht,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Gy(9,c)}}catch(ne){On(c,c.return,ne)}if(c===f){Ht=null;break e}var te=c.sibling;if(te!==null){te.return=c.return,Ht=te;break e}Ht=c.return}}if($r=l,Ml(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(Oy,e)}catch{}o=!0}return o}finally{Xr=r,aa.transition=t}}return!1}function sC(e,t,r){t=Qu(r,t),t=zP(e,t,1),e=xl(e,t,1),t=no(),e!==null&&(Xp(e,1,t),xo(e,t))}function On(e,t,r){if(e.tag===3)sC(e,e,r);else for(;t!==null;){if(t.tag===3){sC(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(bl===null||!bl.has(o))){e=Qu(r,e),e=MP(t,e,1),t=xl(t,e,1),e=no(),t!==null&&(Xp(t,1,e),xo(t,e));break}}t=t.return}}function NB(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),t=no(),e.pingedLanes|=e.suspendedLanes&r,fi===e&&(Ii&r)===r&&(ai===4||ai===3&&(Ii&130023424)===Ii&&500>Zn()-nb?uc(e,0):rb|=r),xo(e,t)}function JP(e,t){t===0&&(e.mode&1?(t=Em,Em<<=1,!(Em&130023424)&&(Em=4194304)):t=1);var r=no();e=As(e,t),e!==null&&(Xp(e,t,r),xo(e,r))}function jB(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),JP(e,r)}function VB(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(ct(314))}o!==null&&o.delete(t),JP(e,r)}var YP;YP=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||vo.current)yo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return yo=!1,EB(e,t,r);yo=!!(e.flags&131072)}else yo=!1,Sn&&t.flags&1048576&&rP(t,Eg,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;ng(e,t),e=t.pendingProps;var l=Ku(t,Ui.current);Vu(t,r),l=X1(null,t,o,e,l,r);var d=J1();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_o(o)?(d=!0,Tg(t)):d=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,W1(t),l.updater=Wy,t.stateNode=l,l._reactInternals=t,ox(t,o,e,r),t=lx(null,t,o,!0,d,r)):(t.tag=0,Sn&&d&&O1(t),ro(null,t,l,r),t=t.child),t;case 16:o=t.elementType;e:{switch(ng(e,t),e=t.pendingProps,l=o._init,o=l(o._payload),t.type=o,l=t.tag=HB(o),e=Ea(o,e),l){case 0:t=sx(null,t,o,e,r);break e;case 1:t=J2(null,t,o,e,r);break e;case 11:t=K2(null,t,o,e,r);break e;case 14:t=X2(null,t,o,Ea(o.type,e),r);break e}throw Error(ct(306,o,""))}return t;case 0:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Ea(o,l),sx(e,t,o,l,r);case 1:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Ea(o,l),J2(e,t,o,l,r);case 3:e:{if(LP(t),e===null)throw Error(ct(387));o=t.pendingProps,d=t.memoizedState,l=d.element,lP(e,t),Ag(t,o,null,r);var f=t.memoizedState;if(o=f.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){l=Qu(Error(ct(423)),t),t=Y2(e,t,o,r,l);break e}else if(o!==l){l=Qu(Error(ct(424)),t),t=Y2(e,t,o,r,l);break e}else for(Lo=_l(t.stateNode.containerInfo.firstChild),Bo=t,Sn=!0,Aa=null,r=aP(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Xu(),o===l){t=Ds(e,t,r);break e}ro(e,t,o,r)}t=t.child}return t;case 5:return cP(t),e===null&&rx(t),o=t.type,l=t.pendingProps,d=e!==null?e.memoizedProps:null,f=l.children,J_(o,l)?f=null:d!==null&&J_(o,d)&&(t.flags|=32),RP(e,t),ro(e,t,f,r),t.child;case 6:return e===null&&rx(t),null;case 13:return $P(e,t,r);case 4:return G1(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Ju(t,null,o,r):ro(e,t,o,r),t.child;case 11:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Ea(o,l),K2(e,t,o,l,r);case 7:return ro(e,t,t.pendingProps,r),t.child;case 8:return ro(e,t,t.pendingProps.children,r),t.child;case 12:return ro(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,l=t.pendingProps,d=t.memoizedProps,f=l.value,un(zg,o._currentValue),o._currentValue=f,d!==null)if(Ba(d.value,f)){if(d.children===l.children&&!vo.current){t=Ds(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var c=d.dependencies;if(c!==null){f=d.child;for(var b=c.firstContext;b!==null;){if(b.context===o){if(d.tag===1){b=Ts(-1,r&-r),b.tag=2;var w=d.updateQueue;if(w!==null){w=w.shared;var k=w.pending;k===null?b.next=b:(b.next=k.next,k.next=b),w.pending=b}}d.lanes|=r,b=d.alternate,b!==null&&(b.lanes|=r),nx(d.return,r,t),c.lanes|=r;break}b=b.next}}else if(d.tag===10)f=d.type===t.type?null:d.child;else if(d.tag===18){if(f=d.return,f===null)throw Error(ct(341));f.lanes|=r,c=f.alternate,c!==null&&(c.lanes|=r),nx(f,r,t),f=d.sibling}else f=d.child;if(f!==null)f.return=d;else for(f=d;f!==null;){if(f===t){f=null;break}if(d=f.sibling,d!==null){d.return=f.return,f=d;break}f=f.return}d=f}ro(e,t,l.children,r),t=t.child}return t;case 9:return l=t.type,o=t.pendingProps.children,Vu(t,r),l=la(l),o=o(l),t.flags|=1,ro(e,t,o,r),t.child;case 14:return o=t.type,l=Ea(o,t.pendingProps),l=Ea(o.type,l),X2(e,t,o,l,r);case 15:return AP(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,l=t.pendingProps,l=t.elementType===o?l:Ea(o,l),ng(e,t),t.tag=1,_o(o)?(e=!0,Tg(t)):e=!1,Vu(t,r),EP(t,o,l),ox(t,o,l,r),lx(null,t,o,!0,e,r);case 19:return BP(e,t,r);case 22:return DP(e,t,r)}throw Error(ct(156,t.tag))};function QP(e,t){return IT(e,t)}function UB(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ia(e,t,r,o){return new UB(e,t,r,o)}function sb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function HB(e){if(typeof e=="function")return sb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===I1)return 11;if(e===T1)return 14}return 2}function Sl(e,t){var r=e.alternate;return r===null?(r=ia(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ag(e,t,r,o,l,d){var f=2;if(o=e,typeof e=="function")sb(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case wu:return dc(r.children,l,d,t);case k1:f=8,l|=8;break;case E_:return e=ia(12,r,t,l|2),e.elementType=E_,e.lanes=d,e;case z_:return e=ia(13,r,t,l),e.elementType=z_,e.lanes=d,e;case M_:return e=ia(19,r,t,l),e.elementType=M_,e.lanes=d,e;case cT:return Zy(r,l,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sT:f=10;break e;case lT:f=9;break e;case I1:f=11;break e;case T1:f=14;break e;case al:f=16,o=null;break e}throw Error(ct(130,e==null?e:typeof e,""))}return t=ia(f,r,t,l),t.elementType=e,t.type=o,t.lanes=d,t}function dc(e,t,r,o){return e=ia(7,e,o,t),e.lanes=r,e}function Zy(e,t,r,o){return e=ia(22,e,o,t),e.elementType=cT,e.lanes=r,e.stateNode={isHidden:!1},e}function o_(e,t,r){return e=ia(6,e,null,t),e.lanes=r,e}function a_(e,t,r){return t=ia(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function WB(e,t,r,o,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=N0(0),this.expirationTimes=N0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=N0(0),this.identifierPrefix=o,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function lb(e,t,r,o,l,d,f,c,b){return e=new WB(e,t,r,c,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=ia(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},W1(d),e}function GB(e,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bu,key:o==null?null:""+o,children:e,containerInfo:t,implementation:r}}function eE(e){if(!e)return Tl;e=e._reactInternals;e:{if(Cc(e)!==e||e.tag!==1)throw Error(ct(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_o(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ct(171))}if(e.tag===1){var r=e.type;if(_o(r))return eP(e,r,t)}return t}function tE(e,t,r,o,l,d,f,c,b){return e=lb(r,o,!0,e,l,d,f,c,b),e.context=eE(null),r=e.current,o=no(),l=wl(r),d=Ts(o,l),d.callback=t??null,xl(r,d,l),e.current.lanes=l,Xp(e,l,o),xo(e,o),e}function Ky(e,t,r,o){var l=t.current,d=no(),f=wl(l);return r=eE(r),t.context===null?t.context=r:t.pendingContext=r,t=Ts(d,f),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=xl(l,t,f),e!==null&&(La(e,l,f,d),eg(e,l,f)),f}function Ng(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function cb(e,t){lC(e,t),(e=e.alternate)&&lC(e,t)}function qB(){return null}var rE=typeof reportError=="function"?reportError:function(e){console.error(e)};function ub(e){this._internalRoot=e}Xy.prototype.render=ub.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ct(409));Ky(e,t,null,null)};Xy.prototype.unmount=ub.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_c(function(){Ky(null,e,null,null)}),t[Ms]=null}};function Xy(e){this._internalRoot=e}Xy.prototype.unstable_scheduleHydration=function(e){if(e){var t=DT();e={blockedOn:null,target:e,priority:t};for(var r=0;r<cl.length&&t!==0&&t<cl[r].priority;r++);cl.splice(r,0,e),r===0&&LT(e)}};function db(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cC(){}function ZB(e,t,r,o,l){if(l){if(typeof o=="function"){var d=o;o=function(){var w=Ng(f);d.call(w)}}var f=tE(t,o,e,0,null,!1,!1,"",cC);return e._reactRootContainer=f,e[Ms]=f.current,Ip(e.nodeType===8?e.parentNode:e),_c(),f}for(;l=e.lastChild;)e.removeChild(l);if(typeof o=="function"){var c=o;o=function(){var w=Ng(b);c.call(w)}}var b=lb(e,0,!1,null,null,!1,!1,"",cC);return e._reactRootContainer=b,e[Ms]=b.current,Ip(e.nodeType===8?e.parentNode:e),_c(function(){Ky(t,b,r,o)}),b}function Yy(e,t,r,o,l){var d=r._reactRootContainer;if(d){var f=d;if(typeof l=="function"){var c=l;l=function(){var b=Ng(f);c.call(b)}}Ky(t,f,e,l)}else f=ZB(r,t,e,l,o);return Ng(f)}MT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Zh(t.pendingLanes);r!==0&&(z1(t,r|1),xo(t,Zn()),!($r&6)&&(ed=Zn()+500,Ml()))}break;case 13:_c(function(){var o=As(e,1);if(o!==null){var l=no();La(o,e,1,l)}}),cb(e,1)}};M1=function(e){if(e.tag===13){var t=As(e,134217728);if(t!==null){var r=no();La(t,e,134217728,r)}cb(e,134217728)}};AT=function(e){if(e.tag===13){var t=wl(e),r=As(e,t);if(r!==null){var o=no();La(r,e,t,o)}cb(e,t)}};DT=function(){return Xr};RT=function(e,t){var r=Xr;try{return Xr=e,t()}finally{Xr=r}};j_=function(e,t,r){switch(t){case"input":if(R_(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var l=Vy(o);if(!l)throw Error(ct(90));dT(o),R_(o,l)}}}break;case"textarea":pT(e,r);break;case"select":t=r.value,t!=null&&Ou(e,!!r.multiple,t,!1)}};xT=ib;bT=_c;var KB={usingClientEntryPoint:!1,Events:[Yp,Iu,Vy,vT,_T,ib]},Bh={findFiberByHostInstance:oc,bundleType:0,version:"18.3.0",rendererPackageName:"react-dom"},XB={bundleType:Bh.bundleType,version:Bh.version,rendererPackageName:Bh.rendererPackageName,rendererConfig:Bh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=CT(e),e===null?null:e.stateNode},findFiberByHostInstance:Bh.findFiberByHostInstance||qB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.0-next-8a015b68cc-20240425"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nm.isDisabled&&Nm.supportsFiber)try{Oy=Nm.inject(XB),es=Nm}catch{}}jo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KB;jo.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!db(t))throw Error(ct(200));return GB(e,t,null,r)};jo.createRoot=function(e,t){if(!db(e))throw Error(ct(299));var r=!1,o="",l=rE;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=lb(e,1,!1,null,null,r,!1,o,l),e[Ms]=t.current,Ip(e.nodeType===8?e.parentNode:e),new ub(t)};jo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ct(188)):(e=Object.keys(e).join(","),Error(ct(268,e)));return e=CT(t),e=e===null?null:e.stateNode,e};jo.flushSync=function(e){return _c(e)};jo.hydrate=function(e,t,r){if(!Jy(t))throw Error(ct(200));return Yy(null,e,t,!0,r)};jo.hydrateRoot=function(e,t,r){if(!db(e))throw Error(ct(405));var o=r!=null&&r.hydratedSources||null,l=!1,d="",f=rE;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),t=tE(t,null,e,1,r??null,l,!1,d,f),e[Ms]=t.current,Ip(e),o)for(e=0;e<o.length;e++)r=o[e],l=r._getVersion,l=l(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,l]:t.mutableSourceEagerHydrationData.push(r,l);return new Xy(t)};jo.render=function(e,t,r){if(!Jy(t))throw Error(ct(200));return Yy(null,e,t,!1,r)};jo.unmountComponentAtNode=function(e){if(!Jy(e))throw Error(ct(40));return e._reactRootContainer?(_c(function(){Yy(null,null,e,!1,function(){e._reactRootContainer=null,e[Ms]=null})}),!0):!1};jo.unstable_batchedUpdates=ib;jo.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!Jy(r))throw Error(ct(200));if(e==null||e._reactInternals===void 0)throw Error(ct(38));return Yy(e,t,r,!1,o)};jo.version="18.3.0-next-8a015b68cc-20240425";function nE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nE)}catch(e){console.error(e)}}nE(),nT.exports=jo;var fd=nT.exports;const JB=Wx(fd),YB=Hx({__proto__:null,default:JB},[fd]);function QB(e){return typeof e=="function"?e():e}const iE=R.forwardRef(function(t,r){const{children:o,container:l,disablePortal:d=!1}=t,[f,c]=R.useState(null),b=Kr(R.isValidElement(o)?o.ref:null,r);if(Ps(()=>{d||c(QB(l)||document.body)},[l,d]),Ps(()=>{if(f&&!d)return gg(r,f),()=>{gg(r,null)}},[r,f,d]),d){if(R.isValidElement(o)){const w={ref:b};return R.cloneElement(o,w)}return re.jsx(R.Fragment,{children:o})}return re.jsx(R.Fragment,{children:f&&fd.createPortal(o,f)})});function e4(e={}){const{disabled:t=!1,focusableWhenDisabled:r,rootRef:o}=e,l=R.useContext(Ry);if(l===null)throw new Error("useMenuButton: no menu context available.");const{state:d,dispatch:f,registerTrigger:c,popupId:b}=l,{getRootProps:w,rootRef:k,active:z}=os({disabled:t,focusableWhenDisabled:r,rootRef:o}),P=Kr(k,c),V=B=>L=>{var G;(G=B.onClick)==null||G.call(B,L),!L.defaultMuiPrevented&&f({type:Da.toggle,event:L})},U=B=>L=>{var G;(G=B.onKeyDown)==null||G.call(B,L),!L.defaultMuiPrevented&&(L.key==="ArrowDown"||L.key==="ArrowUp")&&(L.preventDefault(),f({type:Da.open,event:L}))},H=(B={})=>({onClick:V(B),onKeyDown:U(B)});return{active:z,getRootProps:(B={})=>{const L=ki(B),G=Es(H,w);return q({"aria-haspopup":"menu","aria-expanded":d.open,"aria-controls":b},B,L,G(L),{tabIndex:0,ref:P})},open:d.open,rootRef:P}}function t4(e){return`menu-item-${e.size}`}const r4={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function n4(e){const{disabled:t=!1,id:r,rootRef:o,label:l,disableFocusOnHover:d=!1}=e,f=Co(r),c=R.useRef(null),b=R.useMemo(()=>({disabled:t,id:f??"",label:l,ref:c}),[t,f,l]),{dispatch:w}=R.useContext(Ry)??r4,{getRootProps:k,highlighted:z}=b1({item:f,handlePointerOverEvents:!d}),{index:P,totalItemCount:V}=By(f??t4,b),{getRootProps:U,focusVisible:H,rootRef:X}=os({disabled:t,focusableWhenDisabled:!0}),B=Kr(X,o,c);R.useDebugValue({id:f,highlighted:z,disabled:t,label:l});const L=ne=>he=>{var Z;(Z=ne.onClick)==null||Z.call(ne,he),!he.defaultMuiPrevented&&w({type:Da.close,event:he})},G=(ne={})=>q({},ne,{onClick:L(ne)});function te(ne={}){const he=ki(ne),Z=Es(G,Es(U,k));return q({},ne,he,Z(he),{id:f,ref:B,role:"menuitem"})}return f===void 0?{getRootProps:te,disabled:!1,focusVisible:H,highlighted:!1,index:-1,totalItemCount:0,rootRef:B}:{getRootProps:te,disabled:t,focusVisible:H,highlighted:z,index:P,totalItemCount:V,rootRef:B}}function i4(e){const t=R.useContext(Pl);if(!t)throw new Error("MenuItem: ListContext was not found.");const r=Co(e),{getItemState:o,dispatch:l}=t;let d;r!=null?d=o(r):d={focusable:!0,highlighted:!1,selected:!1};const{highlighted:f,selected:c,focusable:b}=d,w=R.useCallback(z=>{if(z!==r)throw new Error(["Base UI MenuItem: Tried to access the state of another MenuItem.",`itemValue: ${z} | id: ${r}`,"This is unsupported when the MenuItem uses the MenuItemContextStabilizer as a performance optimization."].join("/n"));return{highlighted:f,selected:c,focusable:b}},[f,c,b,r]);return{contextValue:R.useMemo(()=>({dispatch:l,getItemState:w}),[l,w]),id:r}}function o4(e){const t=Qa(e);return t.body===e?h1(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function sp(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function uC(e){return parseInt(h1(e).getComputedStyle(e).paddingRight,10)||0}function a4(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,o=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||o}function dC(e,t,r,o,l){const d=[t,r,...o];[].forEach.call(e.children,f=>{const c=d.indexOf(f)===-1,b=!a4(f);c&&b&&sp(f,l)})}function s_(e,t){let r=-1;return e.some((o,l)=>t(o)?(r=l,!0):!1),r}function s4(e,t){const r=[],o=e.container;if(!t.disableScrollLock){if(o4(o)){const f=h5(Qa(o));r.push({value:o.style.paddingRight,property:"padding-right",el:o}),o.style.paddingRight=`${uC(o)+f}px`;const c=Qa(o).querySelectorAll(".mui-fixed");[].forEach.call(c,b=>{r.push({value:b.style.paddingRight,property:"padding-right",el:b}),b.style.paddingRight=`${uC(b)+f}px`})}let d;if(o.parentNode instanceof DocumentFragment)d=Qa(o).body;else{const f=o.parentElement,c=h1(o);d=(f==null?void 0:f.nodeName)==="HTML"&&c.getComputedStyle(f).overflowY==="scroll"?f:o}r.push({value:d.style.overflow,property:"overflow",el:d},{value:d.style.overflowX,property:"overflow-x",el:d},{value:d.style.overflowY,property:"overflow-y",el:d}),d.style.overflow="hidden"}return()=>{r.forEach(({value:d,el:f,property:c})=>{d?f.style.setProperty(c,d):f.style.removeProperty(c)})}}function l4(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class c4{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,r){let o=this.modals.indexOf(t);if(o!==-1)return o;o=this.modals.length,this.modals.push(t),t.modalRef&&sp(t.modalRef,!1);const l=l4(r);dC(r,t.mount,t.modalRef,l,!0);const d=s_(this.containers,f=>f.container===r);return d!==-1?(this.containers[d].modals.push(t),o):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:l}),o)}mount(t,r){const o=s_(this.containers,d=>d.modals.indexOf(t)!==-1),l=this.containers[o];l.restore||(l.restore=s4(l,r))}remove(t,r=!0){const o=this.modals.indexOf(t);if(o===-1)return o;const l=s_(this.containers,f=>f.modals.indexOf(t)!==-1),d=this.containers[l];if(d.modals.splice(d.modals.indexOf(t),1),this.modals.splice(o,1),d.modals.length===0)d.restore&&d.restore(),t.modalRef&&sp(t.modalRef,r),dC(d.container,t.mount,t.modalRef,d.hiddenSiblings,!1),this.containers.splice(l,1);else{const f=d.modals[d.modals.length-1];f.modalRef&&sp(f.modalRef,!1)}return o}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function u4(e){return typeof e=="function"?e():e}function d4(e){return e?e.props.hasOwnProperty("in"):!1}const h4=new c4;function p4(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:o=!1,manager:l=h4,closeAfterTransition:d=!1,onTransitionEnter:f,onTransitionExited:c,children:b,onClose:w,open:k,rootRef:z}=e,P=R.useRef({}),V=R.useRef(null),U=R.useRef(null),H=Kr(U,z),[X,B]=R.useState(!k),L=d4(b);let G=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(G=!1);const te=()=>Qa(V.current),ne=()=>(P.current.modalRef=U.current,P.current.mount=V.current,P.current),he=()=>{l.mount(ne(),{disableScrollLock:o}),U.current&&(U.current.scrollTop=0)},Z=pl(()=>{const Me=u4(t)||te().body;l.add(ne(),Me),U.current&&he()}),ue=R.useCallback(()=>l.isTopModal(ne()),[l]),Ce=pl(Me=>{V.current=Me,Me&&(k&&ue()?he():U.current&&sp(U.current,G))}),ye=R.useCallback(()=>{l.remove(ne(),G)},[G,l]);R.useEffect(()=>()=>{ye()},[ye]),R.useEffect(()=>{k?Z():(!L||!d)&&ye()},[k,ye,L,d,Z]);const Ee=Me=>Oe=>{var ke;(ke=Me.onKeyDown)==null||ke.call(Me,Oe),!(Oe.key!=="Escape"||Oe.which===229||!ue())&&(r||(Oe.stopPropagation(),w&&w(Oe,"escapeKeyDown")))},Se=Me=>Oe=>{var ke;(ke=Me.onClick)==null||ke.call(Me,Oe),Oe.target===Oe.currentTarget&&w&&w(Oe,"backdropClick")};return{getRootProps:(Me={})=>{const Oe=ki(e);delete Oe.onTransitionEnter,delete Oe.onTransitionExited;const ke=q({},Oe,Me);return q({role:"presentation"},ke,{onKeyDown:Ee(ke),ref:H})},getBackdropProps:(Me={})=>{const Oe=Me;return q({"aria-hidden":!0},Oe,{onClick:Se(Oe),open:k})},getTransitionProps:()=>{const Me=()=>{B(!1),f&&f()},Oe=()=>{B(!0),c&&c(),d&&ye()};return{onEnter:HS(Me,b==null?void 0:b.props.onEnter),onExited:HS(Oe,b==null?void 0:b.props.onExited)}},rootRef:H,portalRef:Ce,isTopModal:ue,exited:X,hasTransition:L}}function f4(e){const{value:t,label:r,disabled:o,rootRef:l,id:d}=e,{getRootProps:f,highlighted:c,selected:b}=b1({item:t}),{getRootProps:w,rootRef:k}=os({disabled:o,focusableWhenDisabled:!0}),z=Co(d),P=R.useRef(null),V=R.useMemo(()=>({disabled:o,label:r,value:t,ref:P,id:z}),[o,r,t,z]),{index:U}=By(t,V),H=Kr(l,P,k),X=L=>G=>{var te;(te=L.onKeyDown)==null||te.call(L,G),!G.defaultMuiPrevented&&[" ","Enter"].includes(G.key)&&(G.defaultMuiPrevented=!0)},B=(L={})=>({onKeyDown:X(L)});return{getRootProps:(L={})=>{const G=ki(L),te=Es(f,Es(w,B));return q({},L,G,te(G),{id:z,ref:H,role:"option","aria-selected":b})},highlighted:c,index:U,selected:b,rootRef:H}}function m4(e){const t=R.useContext(Pl);if(!t)throw new Error("Option: ListContext was not found.");const{getItemState:r,dispatch:o}=t,{highlighted:l,selected:d,focusable:f}=r(e),c=R.useCallback(w=>{if(w!==e)throw new Error(["Base UI Option: Tried to access the state of another Option.","This is unsupported when the Option uses the OptionContextStabilizer as a performance optimization."].join("/n"));return{highlighted:l,selected:d,focusable:f}},[l,d,f,e]);return{contextValue:R.useMemo(()=>({dispatch:o,getItemState:c}),[o,c])}}var bo="top",ua="bottom",da="right",wo="left",hb="auto",ef=[bo,ua,da,wo],td="start",Lp="end",g4="clippingParents",oE="viewport",Oh="popper",y4="reference",hC=ef.reduce(function(e,t){return e.concat([t+"-"+td,t+"-"+Lp])},[]),aE=[].concat(ef,[hb]).reduce(function(e,t){return e.concat([t,t+"-"+td,t+"-"+Lp])},[]),v4="beforeRead",_4="read",x4="afterRead",b4="beforeMain",w4="main",S4="afterMain",C4="beforeWrite",k4="write",I4="afterWrite",T4=[v4,_4,x4,b4,w4,S4,C4,k4,I4];function is(e){return e?(e.nodeName||"").toLowerCase():null}function Fo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function xc(e){var t=Fo(e).Element;return e instanceof t||e instanceof Element}function sa(e){var t=Fo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function pb(e){if(typeof ShadowRoot>"u")return!1;var t=Fo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function P4(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var o=t.styles[r]||{},l=t.attributes[r]||{},d=t.elements[r];!sa(d)||!is(d)||(Object.assign(d.style,o),Object.keys(l).forEach(function(f){var c=l[f];c===!1?d.removeAttribute(f):d.setAttribute(f,c===!0?"":c)}))})}function E4(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(o){var l=t.elements[o],d=t.attributes[o]||{},f=Object.keys(t.styles.hasOwnProperty(o)?t.styles[o]:r[o]),c=f.reduce(function(b,w){return b[w]="",b},{});!sa(l)||!is(l)||(Object.assign(l.style,c),Object.keys(d).forEach(function(b){l.removeAttribute(b)}))})}}const z4={name:"applyStyles",enabled:!0,phase:"write",fn:P4,effect:E4,requires:["computeStyles"]};function rs(e){return e.split("-")[0]}var hc=Math.max,jg=Math.min,rd=Math.round;function xx(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function sE(){return!/^((?!chrome|android).)*safari/i.test(xx())}function nd(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var o=e.getBoundingClientRect(),l=1,d=1;t&&sa(e)&&(l=e.offsetWidth>0&&rd(o.width)/e.offsetWidth||1,d=e.offsetHeight>0&&rd(o.height)/e.offsetHeight||1);var f=xc(e)?Fo(e):window,c=f.visualViewport,b=!sE()&&r,w=(o.left+(b&&c?c.offsetLeft:0))/l,k=(o.top+(b&&c?c.offsetTop:0))/d,z=o.width/l,P=o.height/d;return{width:z,height:P,top:k,right:w+z,bottom:k+P,left:w,x:w,y:k}}function fb(e){var t=nd(e),r=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:o}}function lE(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&pb(r)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function Rs(e){return Fo(e).getComputedStyle(e)}function M4(e){return["table","td","th"].indexOf(is(e))>=0}function Al(e){return((xc(e)?e.ownerDocument:e.document)||window.document).documentElement}function Qy(e){return is(e)==="html"?e:e.assignedSlot||e.parentNode||(pb(e)?e.host:null)||Al(e)}function pC(e){return!sa(e)||Rs(e).position==="fixed"?null:e.offsetParent}function A4(e){var t=/firefox/i.test(xx()),r=/Trident/i.test(xx());if(r&&sa(e)){var o=Rs(e);if(o.position==="fixed")return null}var l=Qy(e);for(pb(l)&&(l=l.host);sa(l)&&["html","body"].indexOf(is(l))<0;){var d=Rs(l);if(d.transform!=="none"||d.perspective!=="none"||d.contain==="paint"||["transform","perspective"].indexOf(d.willChange)!==-1||t&&d.willChange==="filter"||t&&d.filter&&d.filter!=="none")return l;l=l.parentNode}return null}function tf(e){for(var t=Fo(e),r=pC(e);r&&M4(r)&&Rs(r).position==="static";)r=pC(r);return r&&(is(r)==="html"||is(r)==="body"&&Rs(r).position==="static")?t:r||A4(e)||t}function mb(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function lp(e,t,r){return hc(e,jg(t,r))}function D4(e,t,r){var o=lp(e,t,r);return o>r?r:o}function cE(){return{top:0,right:0,bottom:0,left:0}}function uE(e){return Object.assign({},cE(),e)}function dE(e,t){return t.reduce(function(r,o){return r[o]=e,r},{})}var R4=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,uE(typeof t!="number"?t:dE(t,ef))};function L4(e){var t,r=e.state,o=e.name,l=e.options,d=r.elements.arrow,f=r.modifiersData.popperOffsets,c=rs(r.placement),b=mb(c),w=[wo,da].indexOf(c)>=0,k=w?"height":"width";if(!(!d||!f)){var z=R4(l.padding,r),P=fb(d),V=b==="y"?bo:wo,U=b==="y"?ua:da,H=r.rects.reference[k]+r.rects.reference[b]-f[b]-r.rects.popper[k],X=f[b]-r.rects.reference[b],B=tf(d),L=B?b==="y"?B.clientHeight||0:B.clientWidth||0:0,G=H/2-X/2,te=z[V],ne=L-P[k]-z[U],he=L/2-P[k]/2+G,Z=lp(te,he,ne),ue=b;r.modifiersData[o]=(t={},t[ue]=Z,t.centerOffset=Z-he,t)}}function $4(e){var t=e.state,r=e.options,o=r.element,l=o===void 0?"[data-popper-arrow]":o;l!=null&&(typeof l=="string"&&(l=t.elements.popper.querySelector(l),!l)||lE(t.elements.popper,l)&&(t.elements.arrow=l))}const B4={name:"arrow",enabled:!0,phase:"main",fn:L4,effect:$4,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function id(e){return e.split("-")[1]}var O4={top:"auto",right:"auto",bottom:"auto",left:"auto"};function F4(e,t){var r=e.x,o=e.y,l=t.devicePixelRatio||1;return{x:rd(r*l)/l||0,y:rd(o*l)/l||0}}function fC(e){var t,r=e.popper,o=e.popperRect,l=e.placement,d=e.variation,f=e.offsets,c=e.position,b=e.gpuAcceleration,w=e.adaptive,k=e.roundOffsets,z=e.isFixed,P=f.x,V=P===void 0?0:P,U=f.y,H=U===void 0?0:U,X=typeof k=="function"?k({x:V,y:H}):{x:V,y:H};V=X.x,H=X.y;var B=f.hasOwnProperty("x"),L=f.hasOwnProperty("y"),G=wo,te=bo,ne=window;if(w){var he=tf(r),Z="clientHeight",ue="clientWidth";if(he===Fo(r)&&(he=Al(r),Rs(he).position!=="static"&&c==="absolute"&&(Z="scrollHeight",ue="scrollWidth")),he=he,l===bo||(l===wo||l===da)&&d===Lp){te=ua;var Ce=z&&he===ne&&ne.visualViewport?ne.visualViewport.height:he[Z];H-=Ce-o.height,H*=b?1:-1}if(l===wo||(l===bo||l===ua)&&d===Lp){G=da;var ye=z&&he===ne&&ne.visualViewport?ne.visualViewport.width:he[ue];V-=ye-o.width,V*=b?1:-1}}var Ee=Object.assign({position:c},w&&O4),Se=k===!0?F4({x:V,y:H},Fo(r)):{x:V,y:H};if(V=Se.x,H=Se.y,b){var ze;return Object.assign({},Ee,(ze={},ze[te]=L?"0":"",ze[G]=B?"0":"",ze.transform=(ne.devicePixelRatio||1)<=1?"translate("+V+"px, "+H+"px)":"translate3d("+V+"px, "+H+"px, 0)",ze))}return Object.assign({},Ee,(t={},t[te]=L?H+"px":"",t[G]=B?V+"px":"",t.transform="",t))}function N4(e){var t=e.state,r=e.options,o=r.gpuAcceleration,l=o===void 0?!0:o,d=r.adaptive,f=d===void 0?!0:d,c=r.roundOffsets,b=c===void 0?!0:c,w={placement:rs(t.placement),variation:id(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:l,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,fC(Object.assign({},w,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:b})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,fC(Object.assign({},w,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:b})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const j4={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:N4,data:{}};var jm={passive:!0};function V4(e){var t=e.state,r=e.instance,o=e.options,l=o.scroll,d=l===void 0?!0:l,f=o.resize,c=f===void 0?!0:f,b=Fo(t.elements.popper),w=[].concat(t.scrollParents.reference,t.scrollParents.popper);return d&&w.forEach(function(k){k.addEventListener("scroll",r.update,jm)}),c&&b.addEventListener("resize",r.update,jm),function(){d&&w.forEach(function(k){k.removeEventListener("scroll",r.update,jm)}),c&&b.removeEventListener("resize",r.update,jm)}}const U4={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:V4,data:{}};var H4={left:"right",right:"left",bottom:"top",top:"bottom"};function sg(e){return e.replace(/left|right|bottom|top/g,function(t){return H4[t]})}var W4={start:"end",end:"start"};function mC(e){return e.replace(/start|end/g,function(t){return W4[t]})}function gb(e){var t=Fo(e),r=t.pageXOffset,o=t.pageYOffset;return{scrollLeft:r,scrollTop:o}}function yb(e){return nd(Al(e)).left+gb(e).scrollLeft}function G4(e,t){var r=Fo(e),o=Al(e),l=r.visualViewport,d=o.clientWidth,f=o.clientHeight,c=0,b=0;if(l){d=l.width,f=l.height;var w=sE();(w||!w&&t==="fixed")&&(c=l.offsetLeft,b=l.offsetTop)}return{width:d,height:f,x:c+yb(e),y:b}}function q4(e){var t,r=Al(e),o=gb(e),l=(t=e.ownerDocument)==null?void 0:t.body,d=hc(r.scrollWidth,r.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),f=hc(r.scrollHeight,r.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),c=-o.scrollLeft+yb(e),b=-o.scrollTop;return Rs(l||r).direction==="rtl"&&(c+=hc(r.clientWidth,l?l.clientWidth:0)-d),{width:d,height:f,x:c,y:b}}function vb(e){var t=Rs(e),r=t.overflow,o=t.overflowX,l=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+l+o)}function hE(e){return["html","body","#document"].indexOf(is(e))>=0?e.ownerDocument.body:sa(e)&&vb(e)?e:hE(Qy(e))}function cp(e,t){var r;t===void 0&&(t=[]);var o=hE(e),l=o===((r=e.ownerDocument)==null?void 0:r.body),d=Fo(o),f=l?[d].concat(d.visualViewport||[],vb(o)?o:[]):o,c=t.concat(f);return l?c:c.concat(cp(Qy(f)))}function bx(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Z4(e,t){var r=nd(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function gC(e,t,r){return t===oE?bx(G4(e,r)):xc(t)?Z4(t,r):bx(q4(Al(e)))}function K4(e){var t=cp(Qy(e)),r=["absolute","fixed"].indexOf(Rs(e).position)>=0,o=r&&sa(e)?tf(e):e;return xc(o)?t.filter(function(l){return xc(l)&&lE(l,o)&&is(l)!=="body"}):[]}function X4(e,t,r,o){var l=t==="clippingParents"?K4(e):[].concat(t),d=[].concat(l,[r]),f=d[0],c=d.reduce(function(b,w){var k=gC(e,w,o);return b.top=hc(k.top,b.top),b.right=jg(k.right,b.right),b.bottom=jg(k.bottom,b.bottom),b.left=hc(k.left,b.left),b},gC(e,f,o));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function pE(e){var t=e.reference,r=e.element,o=e.placement,l=o?rs(o):null,d=o?id(o):null,f=t.x+t.width/2-r.width/2,c=t.y+t.height/2-r.height/2,b;switch(l){case bo:b={x:f,y:t.y-r.height};break;case ua:b={x:f,y:t.y+t.height};break;case da:b={x:t.x+t.width,y:c};break;case wo:b={x:t.x-r.width,y:c};break;default:b={x:t.x,y:t.y}}var w=l?mb(l):null;if(w!=null){var k=w==="y"?"height":"width";switch(d){case td:b[w]=b[w]-(t[k]/2-r[k]/2);break;case Lp:b[w]=b[w]+(t[k]/2-r[k]/2);break}}return b}function $p(e,t){t===void 0&&(t={});var r=t,o=r.placement,l=o===void 0?e.placement:o,d=r.strategy,f=d===void 0?e.strategy:d,c=r.boundary,b=c===void 0?g4:c,w=r.rootBoundary,k=w===void 0?oE:w,z=r.elementContext,P=z===void 0?Oh:z,V=r.altBoundary,U=V===void 0?!1:V,H=r.padding,X=H===void 0?0:H,B=uE(typeof X!="number"?X:dE(X,ef)),L=P===Oh?y4:Oh,G=e.rects.popper,te=e.elements[U?L:P],ne=X4(xc(te)?te:te.contextElement||Al(e.elements.popper),b,k,f),he=nd(e.elements.reference),Z=pE({reference:he,element:G,strategy:"absolute",placement:l}),ue=bx(Object.assign({},G,Z)),Ce=P===Oh?ue:he,ye={top:ne.top-Ce.top+B.top,bottom:Ce.bottom-ne.bottom+B.bottom,left:ne.left-Ce.left+B.left,right:Ce.right-ne.right+B.right},Ee=e.modifiersData.offset;if(P===Oh&&Ee){var Se=Ee[l];Object.keys(ye).forEach(function(ze){var We=[da,ua].indexOf(ze)>=0?1:-1,Fe=[bo,ua].indexOf(ze)>=0?"y":"x";ye[ze]+=Se[Fe]*We})}return ye}function J4(e,t){t===void 0&&(t={});var r=t,o=r.placement,l=r.boundary,d=r.rootBoundary,f=r.padding,c=r.flipVariations,b=r.allowedAutoPlacements,w=b===void 0?aE:b,k=id(o),z=k?c?hC:hC.filter(function(U){return id(U)===k}):ef,P=z.filter(function(U){return w.indexOf(U)>=0});P.length===0&&(P=z);var V=P.reduce(function(U,H){return U[H]=$p(e,{placement:H,boundary:l,rootBoundary:d,padding:f})[rs(H)],U},{});return Object.keys(V).sort(function(U,H){return V[U]-V[H]})}function Y4(e){if(rs(e)===hb)return[];var t=sg(e);return[mC(e),t,mC(t)]}function Q4(e){var t=e.state,r=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var l=r.mainAxis,d=l===void 0?!0:l,f=r.altAxis,c=f===void 0?!0:f,b=r.fallbackPlacements,w=r.padding,k=r.boundary,z=r.rootBoundary,P=r.altBoundary,V=r.flipVariations,U=V===void 0?!0:V,H=r.allowedAutoPlacements,X=t.options.placement,B=rs(X),L=B===X,G=b||(L||!U?[sg(X)]:Y4(X)),te=[X].concat(G).reduce(function(Ct,At){return Ct.concat(rs(At)===hb?J4(t,{placement:At,boundary:k,rootBoundary:z,padding:w,flipVariations:U,allowedAutoPlacements:H}):At)},[]),ne=t.rects.reference,he=t.rects.popper,Z=new Map,ue=!0,Ce=te[0],ye=0;ye<te.length;ye++){var Ee=te[ye],Se=rs(Ee),ze=id(Ee)===td,We=[bo,ua].indexOf(Se)>=0,Fe=We?"width":"height",Me=$p(t,{placement:Ee,boundary:k,rootBoundary:z,altBoundary:P,padding:w}),Oe=We?ze?da:wo:ze?ua:bo;ne[Fe]>he[Fe]&&(Oe=sg(Oe));var ke=sg(Oe),Ge=[];if(d&&Ge.push(Me[Se]<=0),c&&Ge.push(Me[Oe]<=0,Me[ke]<=0),Ge.every(function(Ct){return Ct})){Ce=Ee,ue=!1;break}Z.set(Ee,Ge)}if(ue)for(var Ke=U?3:1,ht=function(At){var Zt=te.find(function(kt){var $e=Z.get(kt);if($e)return $e.slice(0,At).every(function(rt){return rt})});if(Zt)return Ce=Zt,"break"},vt=Ke;vt>0;vt--){var gt=ht(vt);if(gt==="break")break}t.placement!==Ce&&(t.modifiersData[o]._skip=!0,t.placement=Ce,t.reset=!0)}}const eO={name:"flip",enabled:!0,phase:"main",fn:Q4,requiresIfExists:["offset"],data:{_skip:!1}};function yC(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function vC(e){return[bo,da,ua,wo].some(function(t){return e[t]>=0})}function tO(e){var t=e.state,r=e.name,o=t.rects.reference,l=t.rects.popper,d=t.modifiersData.preventOverflow,f=$p(t,{elementContext:"reference"}),c=$p(t,{altBoundary:!0}),b=yC(f,o),w=yC(c,l,d),k=vC(b),z=vC(w);t.modifiersData[r]={referenceClippingOffsets:b,popperEscapeOffsets:w,isReferenceHidden:k,hasPopperEscaped:z},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":k,"data-popper-escaped":z})}const rO={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:tO};function nO(e,t,r){var o=rs(e),l=[wo,bo].indexOf(o)>=0?-1:1,d=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,f=d[0],c=d[1];return f=f||0,c=(c||0)*l,[wo,da].indexOf(o)>=0?{x:c,y:f}:{x:f,y:c}}function iO(e){var t=e.state,r=e.options,o=e.name,l=r.offset,d=l===void 0?[0,0]:l,f=aE.reduce(function(k,z){return k[z]=nO(z,t.rects,d),k},{}),c=f[t.placement],b=c.x,w=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=b,t.modifiersData.popperOffsets.y+=w),t.modifiersData[o]=f}const oO={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:iO};function aO(e){var t=e.state,r=e.name;t.modifiersData[r]=pE({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const sO={name:"popperOffsets",enabled:!0,phase:"read",fn:aO,data:{}};function lO(e){return e==="x"?"y":"x"}function cO(e){var t=e.state,r=e.options,o=e.name,l=r.mainAxis,d=l===void 0?!0:l,f=r.altAxis,c=f===void 0?!1:f,b=r.boundary,w=r.rootBoundary,k=r.altBoundary,z=r.padding,P=r.tether,V=P===void 0?!0:P,U=r.tetherOffset,H=U===void 0?0:U,X=$p(t,{boundary:b,rootBoundary:w,padding:z,altBoundary:k}),B=rs(t.placement),L=id(t.placement),G=!L,te=mb(B),ne=lO(te),he=t.modifiersData.popperOffsets,Z=t.rects.reference,ue=t.rects.popper,Ce=typeof H=="function"?H(Object.assign({},t.rects,{placement:t.placement})):H,ye=typeof Ce=="number"?{mainAxis:Ce,altAxis:Ce}:Object.assign({mainAxis:0,altAxis:0},Ce),Ee=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Se={x:0,y:0};if(he){if(d){var ze,We=te==="y"?bo:wo,Fe=te==="y"?ua:da,Me=te==="y"?"height":"width",Oe=he[te],ke=Oe+X[We],Ge=Oe-X[Fe],Ke=V?-ue[Me]/2:0,ht=L===td?Z[Me]:ue[Me],vt=L===td?-ue[Me]:-Z[Me],gt=t.elements.arrow,Ct=V&&gt?fb(gt):{width:0,height:0},At=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:cE(),Zt=At[We],kt=At[Fe],$e=lp(0,Z[Me],Ct[Me]),rt=G?Z[Me]/2-Ke-$e-Zt-ye.mainAxis:ht-$e-Zt-ye.mainAxis,pt=G?-Z[Me]/2+Ke+$e+kt+ye.mainAxis:vt+$e+kt+ye.mainAxis,Dt=t.elements.arrow&&tf(t.elements.arrow),Mt=Dt?te==="y"?Dt.clientTop||0:Dt.clientLeft||0:0,gr=(ze=Ee==null?void 0:Ee[te])!=null?ze:0,Cr=Oe+rt-gr-Mt,lr=Oe+pt-gr,yt=lp(V?jg(ke,Cr):ke,Oe,V?hc(Ge,lr):Ge);he[te]=yt,Se[te]=yt-Oe}if(c){var Dr,er=te==="x"?bo:wo,Fr=te==="x"?ua:da,Ae=he[ne],cr=ne==="y"?"height":"width",ir=Ae+X[er],Ft=Ae-X[Fr],qt=[bo,wo].indexOf(B)!==-1,kr=(Dr=Ee==null?void 0:Ee[ne])!=null?Dr:0,Pr=qt?ir:Ae-Z[cr]-ue[cr]-kr+ye.altAxis,sr=qt?Ae+Z[cr]+ue[cr]-kr-ye.altAxis:Ft,nr=V&&qt?D4(Pr,Ae,sr):lp(V?Pr:ir,Ae,V?sr:Ft);he[ne]=nr,Se[ne]=nr-Ae}t.modifiersData[o]=Se}}const uO={name:"preventOverflow",enabled:!0,phase:"main",fn:cO,requiresIfExists:["offset"]};function dO(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function hO(e){return e===Fo(e)||!sa(e)?gb(e):dO(e)}function pO(e){var t=e.getBoundingClientRect(),r=rd(t.width)/e.offsetWidth||1,o=rd(t.height)/e.offsetHeight||1;return r!==1||o!==1}function fO(e,t,r){r===void 0&&(r=!1);var o=sa(t),l=sa(t)&&pO(t),d=Al(t),f=nd(e,l,r),c={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(o||!o&&!r)&&((is(t)!=="body"||vb(d))&&(c=hO(t)),sa(t)?(b=nd(t,!0),b.x+=t.clientLeft,b.y+=t.clientTop):d&&(b.x=yb(d))),{x:f.left+c.scrollLeft-b.x,y:f.top+c.scrollTop-b.y,width:f.width,height:f.height}}function mO(e){var t=new Map,r=new Set,o=[];e.forEach(function(d){t.set(d.name,d)});function l(d){r.add(d.name);var f=[].concat(d.requires||[],d.requiresIfExists||[]);f.forEach(function(c){if(!r.has(c)){var b=t.get(c);b&&l(b)}}),o.push(d)}return e.forEach(function(d){r.has(d.name)||l(d)}),o}function gO(e){var t=mO(e);return T4.reduce(function(r,o){return r.concat(t.filter(function(l){return l.phase===o}))},[])}function yO(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function vO(e){var t=e.reduce(function(r,o){var l=r[o.name];return r[o.name]=l?Object.assign({},l,o,{options:Object.assign({},l.options,o.options),data:Object.assign({},l.data,o.data)}):o,r},{});return Object.keys(t).map(function(r){return t[r]})}var _C={placement:"bottom",modifiers:[],strategy:"absolute"};function xC(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function _O(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,o=r===void 0?[]:r,l=t.defaultOptions,d=l===void 0?_C:l;return function(c,b,w){w===void 0&&(w=d);var k={placement:"bottom",orderedModifiers:[],options:Object.assign({},_C,d),modifiersData:{},elements:{reference:c,popper:b},attributes:{},styles:{}},z=[],P=!1,V={state:k,setOptions:function(B){var L=typeof B=="function"?B(k.options):B;H(),k.options=Object.assign({},d,k.options,L),k.scrollParents={reference:xc(c)?cp(c):c.contextElement?cp(c.contextElement):[],popper:cp(b)};var G=gO(vO([].concat(o,k.options.modifiers)));return k.orderedModifiers=G.filter(function(te){return te.enabled}),U(),V.update()},forceUpdate:function(){if(!P){var B=k.elements,L=B.reference,G=B.popper;if(xC(L,G)){k.rects={reference:fO(L,tf(G),k.options.strategy==="fixed"),popper:fb(G)},k.reset=!1,k.placement=k.options.placement,k.orderedModifiers.forEach(function(ye){return k.modifiersData[ye.name]=Object.assign({},ye.data)});for(var te=0;te<k.orderedModifiers.length;te++){if(k.reset===!0){k.reset=!1,te=-1;continue}var ne=k.orderedModifiers[te],he=ne.fn,Z=ne.options,ue=Z===void 0?{}:Z,Ce=ne.name;typeof he=="function"&&(k=he({state:k,options:ue,name:Ce,instance:V})||k)}}}},update:yO(function(){return new Promise(function(X){V.forceUpdate(),X(k)})}),destroy:function(){H(),P=!0}};if(!xC(c,b))return V;V.setOptions(w).then(function(X){!P&&w.onFirstUpdate&&w.onFirstUpdate(X)});function U(){k.orderedModifiers.forEach(function(X){var B=X.name,L=X.options,G=L===void 0?{}:L,te=X.effect;if(typeof te=="function"){var ne=te({state:k,name:B,instance:V,options:G}),he=function(){};z.push(ne||he)}})}function H(){z.forEach(function(X){return X()}),z=[]}return V}}var xO=[U4,sO,j4,z4,oO,eO,uO,B4,rO],bO=_O({defaultModifiers:xO});const fE="Popper";function wO(e){return tT(fE,e)}c3(fE,["root"]);const SO=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],CO=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function kO(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function wx(e){return typeof e=="function"?e():e}function IO(e){return e.nodeType!==void 0}const TO=()=>Lr({root:["root"]},i3(wO)),PO={},EO=R.forwardRef(function(t,r){const{anchorEl:o,children:l,direction:d,disablePortal:f,modifiers:c,open:b,placement:w,popperOptions:k,popperRef:z,slotProps:P={},slots:V={},TransitionProps:U}=t,H=Ut(t,SO),X=R.useRef(null),B=Kr(X,r),L=R.useRef(null),G=Kr(L,z),te=R.useRef(G);Ps(()=>{te.current=G},[G]),R.useImperativeHandle(z,()=>L.current,[]);const ne=kO(w,d),[he,Z]=R.useState(ne),[ue,Ce]=R.useState(wx(o));R.useEffect(()=>{L.current&&L.current.forceUpdate()}),R.useEffect(()=>{o&&Ce(wx(o))},[o]),Ps(()=>{if(!ue||!b)return;const We=Oe=>{Z(Oe.placement)};let Fe=[{name:"preventOverflow",options:{altBoundary:f}},{name:"flip",options:{altBoundary:f}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Oe})=>{We(Oe)}}];c!=null&&(Fe=Fe.concat(c)),k&&k.modifiers!=null&&(Fe=Fe.concat(k.modifiers));const Me=bO(ue,X.current,q({placement:ne},k,{modifiers:Fe}));return te.current(Me),()=>{Me.destroy(),te.current(null)}},[ue,f,c,b,k,ne]);const ye={placement:he};U!==null&&(ye.TransitionProps=U);const Ee=TO(),Se=V.root??"div",ze=QI({elementType:Se,externalSlotProps:P.root,externalForwardedProps:H,additionalProps:{role:"tooltip",ref:B},ownerState:t,className:Ee.root});return re.jsx(Se,q({},ze,{children:typeof l=="function"?l(ye):l}))}),ev=R.forwardRef(function(t,r){const{anchorEl:o,children:l,container:d,direction:f="ltr",disablePortal:c=!1,keepMounted:b=!1,modifiers:w,open:k,placement:z="bottom",popperOptions:P=PO,popperRef:V,style:U,transition:H=!1,slotProps:X={},slots:B={}}=t,L=Ut(t,CO),[G,te]=R.useState(!0),ne=()=>{te(!1)},he=()=>{te(!0)};if(!b&&!k&&(!H||G))return null;let Z;if(d)Z=d;else if(o){const ye=wx(o);Z=ye&&IO(ye)?Qa(ye).body:Qa(null).body}const ue=!k&&b&&(!H||G)?"none":void 0,Ce=H?{in:k,onEnter:ne,onExited:he}:void 0;return re.jsx(iE,{disablePortal:c,container:Z,children:re.jsx(EO,q({anchorEl:o,direction:f,disablePortal:c,modifiers:w,ref:r,open:H?!G:k,placement:z,popperOptions:P,popperRef:V,slotProps:X,slots:B},L,{style:q({position:"fixed",top:0,left:0,display:ue},U),TransitionProps:Ce,children:l}))})}),Vg={buttonClick:"buttonClick",browserAutoFill:"browserAutoFill"},zO=e=>{const{label:t,value:r}=e;return typeof t=="string"?t:typeof r=="string"?r:String(e)};function MO(e,t){const{open:r}=e,{context:{selectionMode:o}}=t;if(t.type===Vg.buttonClick){const d=e.selectedValues[0]??hi(null,"start",t.context);return q({},e,{open:!r,highlightedValue:r?null:d})}if(t.type===Vg.browserAutoFill)return _1(t.item,e,t.context);const l=Ly(e,t);switch(t.type){case rn.keyDown:if(e.open){if(t.event.key==="Escape")return q({},l,{open:!1})}else{if(t.event.key==="ArrowDown")return q({},e,{open:!0,highlightedValue:e.selectedValues[0]??hi(null,"start",t.context)});if(t.event.key==="ArrowUp")return q({},e,{open:!0,highlightedValue:e.selectedValues[0]??hi(null,"end",t.context)})}break;case rn.itemClick:if(o==="single")return q({},l,{open:!1});break;case rn.blur:return q({},l,{open:!1});default:return l}return l}function AO(e){return Array.isArray(e)?e.length===0?"":JSON.stringify(e.map(t=>t.value)):(e==null?void 0:e.value)==null?"":typeof e.value=="string"||typeof e.value=="number"?e.value:JSON.stringify(e.value)}function DO(e){const{areOptionsEqual:t,buttonRef:r,defaultOpen:o=!1,defaultValue:l,disabled:d=!1,listboxId:f,listboxRef:c,multiple:b=!1,name:w,required:k,onChange:z,onHighlightChange:P,onOpenChange:V,open:U,options:H,getOptionAsString:X=zO,getSerializedValue:B=AO,value:L,componentName:G="useSelect"}=e,te=R.useRef(null),ne=Kr(r,te),he=R.useRef(null),Z=Co(f);let ue;L===void 0&&l===void 0?ue=[]:l!==void 0&&(b?ue=l:ue=l==null?[]:[l]);const Ce=R.useMemo(()=>{if(L!==void 0)return b?L:L==null?[]:[L]},[L,b]),{subitems:ye,contextValue:Ee}=$y(),Se=R.useMemo(()=>H!=null?new Map(H.map((it,Le)=>[it.value,{value:it.value,label:it.label,disabled:it.disabled,ref:R.createRef(),id:`${Z}_${Le}`}])):ye,[H,ye,Z]),ze=Kr(c,he),{getRootProps:We,active:Fe,focusVisible:Me,rootRef:Oe}=os({disabled:d,rootRef:ne}),ke=R.useMemo(()=>Array.from(Se.keys()),[Se]),Ge=R.useCallback(it=>{if(t!==void 0){const Le=ke.find(Wt=>t(Wt,it));return Se.get(Le)}return Se.get(it)},[Se,t,ke]),Ke=R.useCallback(it=>{const Le=Ge(it);return(Le==null?void 0:Le.disabled)??!1},[Ge]),ht=R.useCallback(it=>{const Le=Ge(it);return Le?X(Le):""},[Ge,X]),vt=R.useMemo(()=>({selectedValues:Ce,open:U}),[Ce,U]),gt=R.useCallback(it=>{var Le;return(Le=Se.get(it))==null?void 0:Le.id},[Se]),Ct=R.useCallback((it,Le)=>{b?z==null||z(it,Le):z==null||z(it,Le[0]??null)},[b,z]),At=R.useCallback((it,Le)=>{P==null||P(it,Le??null)},[P]),Zt=R.useCallback((it,Le,Wt)=>{var Rt;Le==="open"&&(V==null||V(Wt),Wt===!1&&(it==null?void 0:it.type)!=="blur"&&((Rt=te.current)==null||Rt.focus()))},[V]),kt=R.useCallback(it=>{var Le;return it==null?null:((Le=ye.get(it))==null?void 0:Le.ref.current)??null},[ye]),$e={getInitialState:()=>({highlightedValue:null,selectedValues:ue??[],open:o}),getItemId:gt,controlledProps:vt,focusManagement:"DOM",getItemDomElement:kt,itemComparer:t,isItemDisabled:Ke,rootRef:ze,onChange:Ct,onHighlightChange:At,onStateChange:Zt,reducerActionContext:R.useMemo(()=>({multiple:b}),[b]),items:ke,getItemAsString:ht,selectionMode:b?"multiple":"single",stateReducer:MO,componentName:G},{dispatch:rt,getRootProps:pt,contextValue:Dt,state:{open:Mt,highlightedValue:gr,selectedValues:Cr},rootRef:lr}=x1($e),yt=R.useRef(Mt);Ps(()=>{var it;if(Mt&&gr!==null){const Le=(it=Ge(gr))==null?void 0:it.ref;if(!he.current||!(Le!=null&&Le.current))return;yt.current||Le.current.focus({preventScroll:!0});const Wt=he.current.getBoundingClientRect(),Rt=Le.current.getBoundingClientRect();Rt.top<Wt.top?he.current.scrollTop-=Wt.top-Rt.top:Rt.bottom>Wt.bottom&&(he.current.scrollTop+=Rt.bottom-Wt.bottom)}},[Mt,gr,Ge]);const Dr=R.useCallback(it=>Ge(it),[Ge]),er=it=>Le=>{var Wt;if((Wt=it==null?void 0:it.onClick)==null||Wt.call(it,Le),!Le.defaultMuiPrevented){const Rt={type:Vg.buttonClick,event:Le};rt(Rt)}},Fr=it=>Le=>{var Wt;(Wt=it.onKeyDown)==null||Wt.call(it,Le),!Le.defaultMuiPrevented&&(Le.key==="ArrowDown"||Le.key==="ArrowUp")&&(Le.preventDefault(),rt({type:rn.keyDown,key:Le.key,event:Le}))},Ae=(it={})=>({onClick:er(it),onKeyDown:Fr(it)}),cr=(it={})=>q({},it,Ae(it),{role:"combobox","aria-expanded":Mt,"aria-controls":Z}),ir=(it={})=>{const Le=ki(it),Wt=Es(cr,We);return q({},it,Wt(Le))},Ft=it=>Le=>{var Wt,Rt;(Wt=it.onBlur)==null||Wt.call(it,Le),!Le.defaultMuiPrevented&&((Rt=he.current)!=null&&Rt.contains(Le.relatedTarget)||Le.relatedTarget===te.current)&&(Le.defaultMuiPrevented=!0)},qt=(it={})=>({onBlur:Ft(it)}),kr=(it={})=>{const Le=ki(it),Wt=Es(qt,pt);return q({id:Z,role:"listbox","aria-multiselectable":b?"true":void 0},it,Wt(Le))};R.useDebugValue({selectedOptions:Cr,highlightedOption:gr,open:Mt});const Pr=R.useMemo(()=>q({},Dt,Ee),[Dt,Ee]);let sr;e.multiple?sr=Cr:sr=Cr.length>0?Cr[0]:null;let nr;b?nr=sr.map(it=>Dr(it)).filter(it=>it!==void 0):nr=Dr(sr)??null;const rr=it=>Le=>{var Rt;if((Rt=it==null?void 0:it.onChange)==null||Rt.call(it,Le),Le.defaultMuiPrevented)return;const Wt=Se.get(Le.target.value);Le.target.value===""?rt({type:rn.clearSelection}):Wt!==void 0&&rt({type:Vg.browserAutoFill,item:Wt.value,event:Le})};return{buttonActive:Fe,buttonFocusVisible:Me,buttonRef:Oe,contextValue:Pr,disabled:d,dispatch:rt,getButtonProps:ir,getHiddenInputProps:(it={})=>{const Le=ki(it);return q({name:w,tabIndex:-1,"aria-hidden":!0,required:k?!0:void 0,value:B(nr),style:m5},it,{onChange:rr(Le)})},getListboxProps:kr,getOptionMetadata:Dr,listboxRef:lr,open:Mt,options:ke,value:sr,highlightedOption:gr}}function RO(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:l,getItemState:d,registerItem:f,totalSubitemCount:c}=t,b=R.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:l}),[o,l,d]),w=R.useMemo(()=>({getItemIndex:l,registerItem:f,totalSubitemCount:c}),[f,l,c]);return re.jsx(Kp.Provider,{value:w,children:re.jsx(Pl.Provider,{value:b,children:r})})}function LO(e){const{checked:t,defaultChecked:r,disabled:o,onBlur:l,onChange:d,onFocus:f,onFocusVisible:c,readOnly:b,required:w}=e,[k,z]=Bu({controlled:t,default:!!r,name:"Switch",state:"checked"}),P=ue=>Ce=>{var ye;Ce.nativeEvent.defaultPrevented||(z(Ce.target.checked),d==null||d(Ce),(ye=ue.onChange)==null||ye.call(ue,Ce))},{isFocusVisibleRef:V,onBlur:U,onFocus:H,ref:X}=p1(),[B,L]=R.useState(!1);o&&B&&L(!1),R.useEffect(()=>{V.current=B},[B,V]);const G=R.useRef(null),te=ue=>Ce=>{var ye;G.current||(G.current=Ce.currentTarget),H(Ce),V.current===!0&&(L(!0),c==null||c(Ce)),f==null||f(Ce),(ye=ue.onFocus)==null||ye.call(ue,Ce)},ne=ue=>Ce=>{var ye;U(Ce),V.current===!1&&L(!1),l==null||l(Ce),(ye=ue.onBlur)==null||ye.call(ue,Ce)},he=Kr(X,G);return{checked:k,disabled:!!o,focusVisible:B,getInputProps:(ue={})=>q({checked:t,defaultChecked:r,disabled:o,readOnly:b,ref:he,required:w,type:"checkbox",role:"switch","aria-checked":t},ue,{onChange:P(ue),onFocus:te(ue),onBlur:ne(ue)}),inputRef:he,readOnly:!!b}}function $O(e){const{value:t,defaultValue:r,onChange:o,orientation:l="horizontal",direction:d="ltr",selectionFollowsFocus:f=!1}=e,[c,b]=Bu({controlled:t,default:r,name:"Tabs",state:"value"}),w=R.useCallback((X,B)=>{b(B),o==null||o(X,B)},[o,b]),{subitems:k,contextValue:z}=$y(),P=R.useRef(()=>{}),V=R.useCallback(X=>{var B;return(B=k.get(X))==null?void 0:B.id},[k]),U=R.useCallback(X=>P.current(X),[]),H=R.useCallback(X=>{P.current=X},[]);return{contextValue:q({direction:d,getTabId:U,getTabPanelId:V,onSelected:w,orientation:l,registerTabIdLookup:H,selectionFollowsFocus:f,value:c},z)}}const mE=R.createContext(null);function tv(){const e=R.useContext(mE);if(e==null)throw new Error("No TabsContext provided");return e}function BO(e){const{value:t,children:r}=e,{direction:o,getItemIndex:l,onSelected:d,orientation:f,registerItem:c,registerTabIdLookup:b,selectionFollowsFocus:w,totalSubitemCount:k,value:z,getTabId:P,getTabPanelId:V}=t,U=R.useMemo(()=>({getItemIndex:l,registerItem:c,totalSubitemCount:k}),[c,l,k]),H=R.useMemo(()=>({direction:o,getTabId:P,getTabPanelId:V,onSelected:d,orientation:f,registerTabIdLookup:b,selectionFollowsFocus:w,value:z}),[o,P,V,d,f,b,w,z]);return re.jsx(Kp.Provider,{value:U,children:re.jsx(mE.Provider,{value:H,children:r})})}function OO(e){return e.size}function FO(e){const{value:t,id:r,rootRef:o}=e,l=tv();if(l===null)throw new Error("No TabContext provided");const{value:d,getTabId:f}=l,c=Co(r),b=R.useRef(null),w=Kr(b,o),k=R.useMemo(()=>({id:c,ref:b}),[c]),{id:z}=By(t??OO,k),P=z!==d,V=z!==void 0?f(z):void 0;return{hidden:P,getRootProps:(H={})=>q({"aria-labelledby":V??void 0,hidden:P,id:c??void 0},H,{ref:w}),rootRef:w}}const gE={valueChange:"valueChange"};function NO(e,t){if(t.type===gE.valueChange)return q({},e,{highlightedValue:t.value});const r=Ly(e,t),{context:{selectionFollowsFocus:o}}=t;if(t.type===rn.itemsChange){if(r.selectedValues.length>0)return q({},r,{highlightedValue:r.selectedValues[0]});hi(null,"reset",t.context)}return o&&r.highlightedValue!=null?q({},r,{selectedValues:[r.highlightedValue]}):r}function jO(e){const{rootRef:t}=e,{direction:r="ltr",onSelected:o,orientation:l="horizontal",value:d,registerTabIdLookup:f,selectionFollowsFocus:c}=tv(),{subitems:b,contextValue:w}=$y(),k=R.useCallback(ye=>{var Ee;return(Ee=b.get(ye))==null?void 0:Ee.id},[b]);f(k);const z=R.useMemo(()=>Array.from(b.keys()),[b]),P=R.useCallback(ye=>{var Ee;return ye==null?null:((Ee=b.get(ye))==null?void 0:Ee.ref.current)??null},[b]),V=r==="rtl";let U;l==="vertical"?U="vertical":U=V?"horizontal-rtl":"horizontal-ltr";const H=R.useCallback((ye,Ee)=>{o(ye,Ee[0]??null)},[o]),X=R.useMemo(()=>d===void 0?{}:d!=null?{selectedValues:[d]}:{selectedValues:[]},[d]),B=R.useCallback(ye=>{var Ee;return((Ee=b.get(ye))==null?void 0:Ee.disabled)??!1},[b]),{contextValue:L,dispatch:G,getRootProps:te,state:{highlightedValue:ne,selectedValues:he},rootRef:Z}=x1({controlledProps:X,disabledItemsFocusable:!c,focusManagement:"DOM",getItemDomElement:P,isItemDisabled:B,items:z,rootRef:t,onChange:H,orientation:U,reducerActionContext:R.useMemo(()=>({selectionFollowsFocus:c||!1}),[c]),selectionMode:"single",stateReducer:NO});R.useEffect(()=>{d!==void 0&&d!=null&&G({type:gE.valueChange,value:d})},[G,d]);const ue=(ye={})=>q({},ye,te(ye),{"aria-orientation":l==="vertical"?"vertical":void 0,role:"tablist"});return{contextValue:R.useMemo(()=>q({},w,L),[w,L]),dispatch:G,getRootProps:ue,highlightedValue:ne,isRtl:V,orientation:l,rootRef:Z,selectedValue:he[0]??null}}function VO(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:l,getItemState:d,registerItem:f,totalSubitemCount:c}=t,b=R.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:l}),[o,l,d]),w=R.useMemo(()=>({getItemIndex:l,registerItem:f,totalSubitemCount:c}),[f,l,c]);return re.jsx(Kp.Provider,{value:w,children:re.jsx(Pl.Provider,{value:b,children:r})})}function UO(e){return e.size}function HO(e){const{value:t,rootRef:r,disabled:o=!1,id:l}=e,d=R.useRef(null),f=Co(l),{value:c,selectionFollowsFocus:b,getTabPanelId:w}=tv(),k=R.useMemo(()=>({disabled:o,ref:d,id:f}),[o,d,f]),{id:z,index:P,totalItemCount:V}=By(t??UO,k),{getRootProps:U,highlighted:H,selected:X}=b1({item:z}),{getRootProps:B,rootRef:L,active:G,focusVisible:te,setFocusVisible:ne}=os({disabled:o,focusableWhenDisabled:!b,type:"button"}),he=Kr(d,r,L),Z=z!==void 0?w(z):void 0;return{getRootProps:(Ce={})=>{const ye=ki(Ce),Ee=Es(U,B);return q({},Ce,Ee(ye),{role:"tab","aria-controls":Z,"aria-selected":X,id:f,ref:he})},active:G,focusVisible:te,highlighted:H,index:P,rootRef:he,selected:X||z===c,setFocusVisible:ne,totalTabsCount:V}}function bC(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function yE(e={}){const{ignoreAccents:t=!0,ignoreCase:r=!0,limit:o,matchFrom:l="any",stringify:d,trim:f=!1}=e;return(c,{inputValue:b,getOptionLabel:w})=>{let k=f?b.trim():b;r&&(k=k.toLowerCase()),t&&(k=bC(k));const z=k?c.filter(P=>{let V=(d||w)(P);return r&&(V=V.toLowerCase()),t&&(V=bC(V)),l==="start"?V.indexOf(k)===0:V.indexOf(k)>-1}):c;return typeof o=="number"?z.slice(0,o):z}}function Vm(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return-1}const WO=yE(),wC=5,GO=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function qO(e){const{unstable_isActiveElementInListbox:t=GO,unstable_classNamePrefix:r="Mui",autoComplete:o=!1,autoHighlight:l=!1,autoSelect:d=!1,blurOnSelect:f=!1,clearOnBlur:c=!e.freeSolo,clearOnEscape:b=!1,componentName:w="useAutocomplete",defaultValue:k=e.multiple?[]:null,disableClearable:z=!1,disableCloseOnSelect:P=!1,disabled:V,disabledItemsFocusable:U=!1,disableListWrap:H=!1,filterOptions:X=WO,filterSelectedOptions:B=!1,freeSolo:L=!1,getOptionDisabled:G,getOptionKey:te,getOptionLabel:ne=Re=>Re.label??Re,groupBy:he,handleHomeEndKeys:Z=!e.freeSolo,id:ue,includeInputInList:Ce=!1,inputValue:ye,isOptionEqualToValue:Ee=(Re,Ne)=>Re===Ne,multiple:Se=!1,onChange:ze,onClose:We,onHighlightChange:Fe,onInputChange:Me,onOpen:Oe,open:ke,openOnFocus:Ge=!1,options:Ke,readOnly:ht=!1,selectOnFocus:vt=!e.freeSolo,value:gt}=e,Ct=Co(ue);let At=ne;At=Re=>{const Ne=ne(Re);return typeof Ne!="string"?String(Ne):Ne};const Zt=R.useRef(!1),kt=R.useRef(!0),$e=R.useRef(null),rt=R.useRef(null),[pt,Dt]=R.useState(null),[Mt,gr]=R.useState(-1),Cr=l?0:-1,lr=R.useRef(Cr),[yt,Dr]=Bu({controlled:gt,default:k,name:w}),[er,Fr]=Bu({controlled:ye,default:"",name:w,state:"inputValue"}),[Ae,cr]=R.useState(!1),ir=R.useCallback((Re,Ne)=>{if(!(Se?yt.length<Ne.length:Ne!==null)&&!c)return;let ut;if(Se)ut="";else if(Ne==null)ut="";else{const _t=At(Ne);ut=typeof _t=="string"?_t:""}er!==ut&&(Fr(ut),Me&&Me(Re,ut,"reset"))},[At,er,Se,Me,Fr,c,yt]),[Ft,qt]=Bu({controlled:ke,default:!1,name:w,state:"open"}),[kr,Pr]=R.useState(!0),sr=!Se&&yt!=null&&er===At(yt),nr=Ft&&!ht,rr=nr?X(Ke.filter(Re=>!(B&&(Se?yt:[yt]).some(Ne=>Ne!==null&&Ee(Re,Ne)))),{inputValue:sr&&kr?"":er,getOptionLabel:At}):[],Rr=p5({filteredOptions:rr,value:yt,inputValue:er});R.useEffect(()=>{const Re=yt!==Rr.value;Ae&&!Re||L&&!Re||ir(null,yt)},[yt,ir,Ae,Rr.value,L]);const it=Ft&&rr.length>0&&!ht,Le=pl(Re=>{Re===-1?$e.current.focus():pt.querySelector(`[data-tag-index="${Re}"]`).focus()});R.useEffect(()=>{Se&&Mt>yt.length-1&&(gr(-1),Le(-1))},[yt,Se,Mt,Le]);function Wt(Re,Ne){if(!rt.current||Re<0||Re>=rr.length)return-1;let nt=Re;for(;;){const ut=rt.current.querySelector(`[data-option-index="${nt}"]`),_t=U?!1:!ut||ut.disabled||ut.getAttribute("aria-disabled")==="true";if(ut&&ut.hasAttribute("tabindex")&&!_t)return nt;if(Ne==="next"?nt=(nt+1)%rr.length:nt=(nt-1+rr.length)%rr.length,nt===Re)return-1}}const Rt=pl(({event:Re,index:Ne,reason:nt="auto"})=>{if(lr.current=Ne,Ne===-1?$e.current.removeAttribute("aria-activedescendant"):$e.current.setAttribute("aria-activedescendant",`${Ct}-option-${Ne}`),Fe&&Fe(Re,Ne===-1?null:rr[Ne],nt),!rt.current)return;const ut=rt.current.querySelector(`[role="option"].${r}-focused`);ut&&(ut.classList.remove(`${r}-focused`),ut.classList.remove(`${r}-focusVisible`));let _t=rt.current;if(rt.current.getAttribute("role")!=="listbox"&&(_t=rt.current.parentElement.querySelector('[role="listbox"]')),!_t)return;if(Ne===-1){_t.scrollTop=0;return}const ur=rt.current.querySelector(`[data-option-index="${Ne}"]`);if(ur&&(ur.classList.add(`${r}-focused`),nt==="keyboard"&&ur.classList.add(`${r}-focusVisible`),_t.scrollHeight>_t.clientHeight&&nt!=="mouse"&&nt!=="touch")){const tr=ur,yr=_t.clientHeight+_t.scrollTop,Xt=tr.offsetTop+tr.offsetHeight;Xt>yr?_t.scrollTop=Xt-_t.clientHeight:tr.offsetTop-tr.offsetHeight*(he?1.3:0)<_t.scrollTop&&(_t.scrollTop=tr.offsetTop-tr.offsetHeight*(he?1.3:0))}}),_r=pl(({event:Re,diff:Ne,direction:nt="next",reason:ut="auto"})=>{if(!nr)return;const ur=Wt((()=>{const tr=rr.length-1;if(Ne==="reset")return Cr;if(Ne==="start")return 0;if(Ne==="end")return tr;const yr=lr.current+Ne;return yr<0?yr===-1&&Ce?-1:H&&lr.current!==-1||Math.abs(Ne)>1?0:tr:yr>tr?yr===tr+1&&Ce?-1:H||Math.abs(Ne)>1?tr:0:yr})(),nt);if(Rt({index:ur,reason:ut,event:Re}),o&&Ne!=="reset")if(ur===-1)$e.current.value=er;else{const tr=At(rr[ur]);$e.current.value=tr,tr.toLowerCase().indexOf(er.toLowerCase())===0&&er.length>0&&$e.current.setSelectionRange(er.length,tr.length)}}),xr=()=>{const Re=(Ne,nt)=>{const ut=Ne?At(Ne):"",_t=nt?At(nt):"";return ut===_t};if(lr.current!==-1&&Rr.filteredOptions&&Rr.filteredOptions.length!==rr.length&&Rr.inputValue===er&&(Se?yt.length===Rr.value.length&&Rr.value.every((Ne,nt)=>At(yt[nt])===At(Ne)):Re(Rr.value,yt))){const Ne=Rr.filteredOptions[lr.current];if(Ne)return Vm(rr,nt=>At(nt)===At(Ne))}return-1},Qe=R.useCallback(()=>{if(!nr)return;const Re=xr();if(Re!==-1){lr.current=Re;return}const Ne=Se?yt[0]:yt;if(rr.length===0||Ne==null){_r({diff:"reset"});return}if(rt.current){if(Ne!=null){const nt=rr[lr.current];if(Se&&nt&&Vm(yt,_t=>Ee(nt,_t))!==-1)return;const ut=Vm(rr,_t=>Ee(_t,Ne));ut===-1?_r({diff:"reset"}):Rt({index:ut});return}if(lr.current>=rr.length-1){Rt({index:rr.length-1});return}Rt({index:lr.current})}},[rr.length,Se?!1:yt,B,_r,Rt,nr,er,Se]),Kt=pl(Re=>{gg(rt,Re),Re&&Qe()});R.useEffect(()=>{Qe()},[Qe]);const $t=Re=>{Ft||(qt(!0),Pr(!0),Oe&&Oe(Re))},ar=(Re,Ne)=>{Ft&&(qt(!1),We&&We(Re,Ne))},Gr=(Re,Ne,nt,ut)=>{if(Se){if(yt.length===Ne.length&&yt.every((_t,ur)=>_t===Ne[ur]))return}else if(yt===Ne)return;ze&&ze(Re,Ne,nt,ut),Dr(Ne)},Jt=R.useRef(!1),gn=(Re,Ne,nt="selectOption",ut="options")=>{let _t=nt,ur=Ne;if(Se){ur=Array.isArray(yt)?yt.slice():[];const tr=Vm(ur,yr=>Ee(Ne,yr));tr===-1?ur.push(Ne):ut!=="freeSolo"&&(ur.splice(tr,1),_t="removeOption")}ir(Re,ur),Gr(Re,ur,_t,{option:Ne}),!P&&(!Re||!Re.ctrlKey&&!Re.metaKey)&&ar(Re,_t),(f===!0||f==="touch"&&Jt.current||f==="mouse"&&!Jt.current)&&$e.current.blur()};function de(Re,Ne){if(Re===-1)return-1;let nt=Re;for(;;){if(Ne==="next"&&nt===yt.length||Ne==="previous"&&nt===-1)return-1;const ut=pt.querySelector(`[data-tag-index="${nt}"]`);if(!ut||!ut.hasAttribute("tabindex")||ut.disabled||ut.getAttribute("aria-disabled")==="true")nt+=Ne==="next"?1:-1;else return nt}}const A=(Re,Ne)=>{if(!Se)return;er===""&&ar(Re,"toggleInput");let nt=Mt;Mt===-1?er===""&&Ne==="previous"&&(nt=yt.length-1):(nt+=Ne==="next"?1:-1,nt<0&&(nt=0),nt===yt.length&&(nt=-1)),nt=de(nt,Ne),gr(nt),Le(nt)},$=Re=>{Zt.current=!0,Fr(""),Me&&Me(Re,"","clear"),Gr(Re,Se?[]:null,"clear")},W=Re=>Ne=>{if(Re.onKeyDown&&Re.onKeyDown(Ne),!Ne.defaultMuiPrevented&&(Mt!==-1&&["ArrowLeft","ArrowRight"].indexOf(Ne.key)===-1&&(gr(-1),Le(-1)),Ne.which!==229))switch(Ne.key){case"Home":nr&&Z&&(Ne.preventDefault(),_r({diff:"start",direction:"next",reason:"keyboard",event:Ne}));break;case"End":nr&&Z&&(Ne.preventDefault(),_r({diff:"end",direction:"previous",reason:"keyboard",event:Ne}));break;case"PageUp":Ne.preventDefault(),_r({diff:-wC,direction:"previous",reason:"keyboard",event:Ne}),$t(Ne);break;case"PageDown":Ne.preventDefault(),_r({diff:wC,direction:"next",reason:"keyboard",event:Ne}),$t(Ne);break;case"ArrowDown":Ne.preventDefault(),_r({diff:1,direction:"next",reason:"keyboard",event:Ne}),$t(Ne);break;case"ArrowUp":Ne.preventDefault(),_r({diff:-1,direction:"previous",reason:"keyboard",event:Ne}),$t(Ne);break;case"ArrowLeft":A(Ne,"previous");break;case"ArrowRight":A(Ne,"next");break;case"Enter":if(lr.current!==-1&&nr){const nt=rr[lr.current],ut=G?G(nt):!1;if(Ne.preventDefault(),ut)return;gn(Ne,nt,"selectOption"),o&&$e.current.setSelectionRange($e.current.value.length,$e.current.value.length)}else L&&er!==""&&sr===!1&&(Se&&Ne.preventDefault(),gn(Ne,er,"createOption","freeSolo"));break;case"Escape":nr?(Ne.preventDefault(),Ne.stopPropagation(),ar(Ne,"escape")):b&&(er!==""||Se&&yt.length>0)&&(Ne.preventDefault(),Ne.stopPropagation(),$(Ne));break;case"Backspace":if(Se&&!ht&&er===""&&yt.length>0){const nt=Mt===-1?yt.length-1:Mt,ut=yt.slice();ut.splice(nt,1),Gr(Ne,ut,"removeOption",{option:yt[nt]})}break;case"Delete":if(Se&&!ht&&er===""&&yt.length>0&&Mt!==-1){const nt=Mt,ut=yt.slice();ut.splice(nt,1),Gr(Ne,ut,"removeOption",{option:yt[nt]})}break}},Q=Re=>{cr(!0),Ge&&!Zt.current&&$t(Re)},ie=Re=>{if(t(rt)){$e.current.focus();return}cr(!1),kt.current=!0,Zt.current=!1,d&&lr.current!==-1&&nr?gn(Re,rr[lr.current],"blur"):d&&L&&er!==""?gn(Re,er,"blur","freeSolo"):c&&ir(Re,yt),ar(Re,"blur")},xe=Re=>{const Ne=Re.target.value;er!==Ne&&(Fr(Ne),Pr(!1),Me&&Me(Re,Ne,"input")),Ne===""?!z&&!Se&&Gr(Re,null,"clear"):$t(Re)},fe=Re=>{const Ne=Number(Re.currentTarget.getAttribute("data-option-index"));lr.current!==Ne&&Rt({event:Re,index:Ne,reason:"mouse"})},oe=Re=>{Rt({event:Re,index:Number(Re.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Jt.current=!0},_e=Re=>{const Ne=Number(Re.currentTarget.getAttribute("data-option-index"));gn(Re,rr[Ne],"selectOption"),Jt.current=!1},De=Re=>Ne=>{const nt=yt.slice();nt.splice(Re,1),Gr(Ne,nt,"removeOption",{option:yt[Re]})},Ue=Re=>{Ft?ar(Re,"toggleInput"):$t(Re)},qe=Re=>{Re.currentTarget.contains(Re.target)&&Re.target.getAttribute("id")!==Ct&&Re.preventDefault()},Ye=Re=>{Re.currentTarget.contains(Re.target)&&($e.current.focus(),vt&&kt.current&&$e.current.selectionEnd-$e.current.selectionStart===0&&$e.current.select(),kt.current=!1)},St=Re=>{!V&&(er===""||!Ft)&&Ue(Re)};let st=L&&er.length>0;st=st||(Se?yt.length>0:yt!==null);let Lt=rr;return he&&(Lt=rr.reduce((Re,Ne,nt)=>{const ut=he(Ne);return Re.length>0&&Re[Re.length-1].group===ut?Re[Re.length-1].options.push(Ne):Re.push({key:nt,index:nt,group:ut,options:[Ne]}),Re},[])),V&&Ae&&ie(),{getRootProps:(Re={})=>q({"aria-owns":it?`${Ct}-listbox`:null},Re,{onKeyDown:W(Re),onMouseDown:qe,onClick:Ye}),getInputLabelProps:()=>({id:`${Ct}-label`,htmlFor:Ct}),getInputProps:()=>({id:Ct,value:er,onBlur:ie,onFocus:Q,onChange:xe,onMouseDown:St,"aria-activedescendant":nr?"":null,"aria-autocomplete":o?"both":"list","aria-controls":it?`${Ct}-listbox`:void 0,"aria-expanded":it,autoComplete:"off",ref:$e,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:V}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:$}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Ue}),getTagProps:({index:Re})=>q({key:Re,"data-tag-index":Re,tabIndex:-1},!ht&&{onDelete:De(Re)}),getListboxProps:()=>({role:"listbox",id:`${Ct}-listbox`,"aria-labelledby":`${Ct}-label`,ref:Kt,onMouseDown:Re=>{Re.preventDefault()}}),getOptionProps:({index:Re,option:Ne})=>{const nt=(Se?yt:[yt]).some(_t=>_t!=null&&Ee(Ne,_t)),ut=G?G(Ne):!1;return{key:(te==null?void 0:te(Ne))??At(Ne),tabIndex:-1,role:"option",id:`${Ct}-option-${Re}`,onMouseMove:fe,onClick:_e,onTouchStart:oe,"data-option-index":Re,"aria-disabled":ut,"aria-selected":nt}},id:Ct,inputValue:er,value:yt,dirty:st,expanded:nr&&pt,popupOpen:nr,focused:Ae||Mt!==-1,anchorEl:pt,setAnchorEl:Dt,focusedTag:Mt,groupedOptions:Lt}}const ZO=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],KO=["component","slots","slotProps"],XO=["component"];function zt(e,t){const{className:r,elementType:o,ownerState:l,externalForwardedProps:d,getSlotOwnerState:f,internalForwardedProps:c}=t,b=Ut(t,ZO),{component:w,slots:k={[e]:void 0},slotProps:z={[e]:void 0}}=d,P=Ut(d,KO),V=k[e]||o,U=JI(z[e],l),H=YI(q({className:r},b,{externalForwardedProps:e==="root"?P:void 0,externalSlotProps:U})),{props:{component:X},internalRef:B}=H,L=Ut(H.props,XO),G=Kr(B,U==null?void 0:U.ref,t.ref),te=f?f(L):{},ne=q({},l,te),he=e==="root"?X||w:X,Z=XI(V,q({},e==="root"&&!w&&!k[e]&&c,e!=="root"&&!k[e]&&c,L,he&&{as:he},{ref:G}),ne);return Object.keys(te).forEach(ue=>{delete Z[ue]}),[V,Z]}function JO(e){return Br("MuiListItem",e)}const Ug=Ar("MuiListItem",["root","startAction","endAction","nested","nesting","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]),YO=R.createContext(!1),Hg=YO,QO=R.createContext(!1),md=QO,eF=R.createContext(!1),vE=eF,tF=R.createContext(void 0),_b=tF,rF=R.createContext(void 0),_E=rF,nF=R.createContext(void 0),rv=nF,iF=["component","className","children","nested","sticky","variant","color","startAction","endAction","role","slots","slotProps"],oF=e=>{const{sticky:t,nested:r,nesting:o,variant:l,color:d}=e,f={root:["root",r&&"nested",o&&"nesting",t&&"sticky",d&&`color${It(d)}`,l&&`variant${It(l)}`],startAction:["startAction"],endAction:["endAction"]};return Lr(f,JO,{})},aF=at("li")(({theme:e,ownerState:t})=>{var r;return[!t.nested&&{"--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItemButton-marginBlock":"calc(-1 * var(--ListItem-paddingY))",alignItems:"center",gap:"var(--ListItem-gap)",marginInline:"var(--ListItem-marginInline)"},t.nested&&{"--NestedList-marginRight":"calc(-1 * var(--ListItem-paddingRight))","--NestedList-marginLeft":"calc(-1 * var(--ListItem-paddingLeft))","--NestedListItem-paddingLeft":"calc(var(--ListItem-paddingLeft) + var(--List-nestedInsetStart))","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItem-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))",flexDirection:"column"},q({"--unstable_actionRadius":"calc(var(--ListItem-radius) - var(--variant-borderWidth, 0px))"},t.startAction&&{"--unstable_startActionWidth":"2rem"},t.endAction&&{"--unstable_endActionWidth":"2.5rem"},{boxSizing:"border-box",borderRadius:"var(--ListItem-radius)",display:"var(--_ListItem-display)","&:not([hidden])":{"--_ListItem-display":"var(--_List-markerDisplay, flex)"},flex:"none",listStyleType:"var(--_List-markerType, disc)",position:"relative",paddingBlockStart:t.nested?0:"var(--ListItem-paddingY)",paddingBlockEnd:t.nested?0:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)"},t["data-first-child"]===void 0&&q({},t.row?{marginInlineStart:"var(--List-gap)"}:{marginBlockStart:"var(--List-gap)"}),t.row&&t.wrap&&{marginInlineStart:"var(--List-gap)",marginBlockStart:"var(--List-gap)"},{minBlockSize:"var(--ListItem-minHeight)"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:`var(--ListItem-stickyBackground, ${e.vars.palette.background.body})`},{[`.${Ug.nested} > &`]:{"--_ListItem-display":"flex"}}),(r=e.variants[t.variant])==null?void 0:r[t.color]]}),sF=at(aF,{name:"JoyListItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),lF=at("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",left:0,transform:"translate(var(--ListItem-startActionTranslateX), -50%)",zIndex:1})),cF=at("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",right:0,transform:"translate(var(--ListItem-endActionTranslateX), -50%)"})),xE=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyListItem"}),l=R.useContext(rv),d=R.useContext(_b),f=R.useContext(md),c=R.useContext(vE),b=R.useContext(Hg),{component:w,className:k,children:z,nested:P=!1,sticky:V=!1,variant:U="plain",color:H="neutral",startAction:X,endAction:B,role:L,slots:G={},slotProps:te={}}=o,ne=Ut(o,iF),[he,Z]=R.useState(""),[ue,Ce]=(d==null?void 0:d.split(":"))||["",""],ye=w||(ue&&!ue.match(/^(ul|ol|menu)$/)?"div":void 0);let Ee=l==="menu"?"none":void 0;d&&(Ee={menu:"none",menubar:"none",group:"presentation"}[Ce]),L&&(Ee=L);const Se=q({},o,{sticky:V,startAction:X,endAction:B,row:f,wrap:c,variant:U,color:H,nesting:b,nested:P,component:ye,role:Ee}),ze=oF(Se),We=q({},ne,{component:ye,slots:G,slotProps:te}),[Fe,Me]=zt("root",{additionalProps:{role:Ee},ref:r,className:mi(ze.root,k),elementType:sF,externalForwardedProps:We,ownerState:Se}),[Oe,ke]=zt("startAction",{className:ze.startAction,elementType:lF,externalForwardedProps:We,ownerState:Se}),[Ge,Ke]=zt("endAction",{className:ze.endAction,elementType:cF,externalForwardedProps:We,ownerState:Se});return re.jsx(_E.Provider,{value:Z,children:re.jsx(Hg.Provider,{value:P?he||!0:!1,children:re.jsxs(Fe,q({},Me,{children:[X&&re.jsx(Oe,q({},ke,{children:X})),R.Children.map(z,(ht,vt)=>R.isValidElement(ht)?R.cloneElement(ht,q({},vt===0&&{"data-first-child":""},d1(ht,["ListItem"])&&{component:ht.props.component||"div"})):ht),B&&re.jsx(Ge,q({},Ke,{children:B}))]}))})})});xE.muiName="ListItem";const rf=xE,nv={"--NestedList-marginRight":"0px","--NestedList-marginLeft":"0px","--NestedListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px"};function nf(e){const{children:t,nested:r,row:o=!1,wrap:l=!1}=e,d=re.jsx(md.Provider,{value:o,children:re.jsx(vE.Provider,{value:l,children:R.Children.map(t,(f,c)=>R.isValidElement(f)?R.cloneElement(f,q({},c===0&&{"data-first-child":""},c===R.Children.count(t)-1&&{"data-last-child":""})):f)})});return r===void 0?d:re.jsx(Hg.Provider,{value:r,children:d})}const gd=({theme:e,ownerState:t},r)=>{let o={};function l(d){if(typeof d=="function"){const f=d(e);l(f)}else Array.isArray(d)?d.forEach(f=>{typeof f!="boolean"&&l(f)}):typeof d=="object"&&(o=q({},o,d))}return t.sx&&(l(t.sx),r.forEach(d=>{var c;const f=o[d];typeof f=="string"||typeof f=="number"?d==="borderRadius"?typeof f=="number"?o[d]=`${f}px`:o[d]=((c=e.vars)==null?void 0:c.radius[f])||f:["p","padding","m","margin"].indexOf(d)!==-1&&typeof f=="number"?o[d]=e.spacing(f):o[d]=f:typeof f=="function"?o[d]=f(e):o[d]=void 0})),o};function uF(e){return Br("MuiList",e)}const dF=Ar("MuiList",["root","nesting","scoped","sizeSm","sizeMd","sizeLg","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","horizontal","vertical"]),hF=R.createContext(void 0),pF=hF,fF=["component","className","children","size","orientation","wrap","variant","color","role","slots","slotProps"],mF=e=>{const{variant:t,color:r,size:o,nesting:l,orientation:d,instanceSize:f}=e,c={root:["root",d,t&&`variant${It(t)}`,r&&`color${It(r)}`,!f&&!l&&o&&`size${It(o)}`,f&&`size${It(f)}`,l&&"nesting"]};return Lr(c,uF,{})},of=at("ul")(({theme:e,ownerState:t})=>{var f;const{p:r,padding:o,borderRadius:l}=gd({theme:e,ownerState:t},["p","padding","borderRadius"]);function d(c){return c==="sm"?{"--ListDivider-gap":"0.25rem","--ListItem-minHeight":"2rem","--ListItem-paddingY":"3px","--ListItem-paddingX":t.marker?"3px":"0.5rem","--ListItem-gap":"0.5rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.5rem":"2rem","--Icon-fontSize":e.vars.fontSize.lg}:c==="md"?{"--ListDivider-gap":"0.375rem","--ListItem-minHeight":"2.25rem","--ListItem-paddingY":"0.25rem","--ListItem-paddingX":t.marker?"0.25rem":"0.75rem","--ListItem-gap":"0.625rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.75rem":"2.5rem","--Icon-fontSize":e.vars.fontSize.xl}:c==="lg"?{"--ListDivider-gap":"0.5rem","--ListItem-minHeight":"2.75rem","--ListItem-paddingY":"0.375rem","--ListItem-paddingX":t.marker?"0.5rem":"1rem","--ListItem-gap":"0.75rem","--ListItemDecorator-size":t.orientation==="horizontal"?"2.25rem":"3rem","--Icon-fontSize":e.vars.fontSize.xl2}:{}}return[t.nesting&&q({},d(t.instanceSize),{"--ListItem-paddingRight":"var(--ListItem-paddingX)","--ListItem-paddingLeft":"var(--NestedListItem-paddingLeft)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px",padding:0},t.marker&&{paddingInlineStart:"calc(3ch - var(--_List-markerDeduct, 0px))"},{marginInlineStart:"var(--NestedList-marginLeft)",marginInlineEnd:"var(--NestedList-marginRight)",marginBlockStart:"var(--List-gap)",marginBlockEnd:"initial"}),!t.nesting&&q({},d(t.size),{"--List-gap":"0px","--List-nestedInsetStart":"0px","--ListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItem-paddingRight":"var(--ListItem-paddingX)"},t.marker&&{"--_List-markerDeduct":"1ch"},{"--unstable_List-childRadius":"calc(max(var(--List-radius) - var(--List-padding), min(var(--List-padding) / 2, var(--List-radius) / 2)) - var(--variant-borderWidth, 0px))","--ListItem-radius":"var(--unstable_List-childRadius)","--ListItem-startActionTranslateX":"calc(0.5 * var(--ListItem-paddingLeft))","--ListItem-endActionTranslateX":"calc(-0.5 * var(--ListItem-paddingRight))",margin:"initial"},e.typography[`body-${t.size}`],t.orientation==="horizontal"?q({},t.wrap?{padding:"var(--List-padding)",marginInlineStart:"calc(-1 * var(--List-gap))",marginBlockStart:"calc(-1 * var(--List-gap))"}:{paddingInline:"var(--List-padding, var(--ListDivider-gap))",paddingBlock:"var(--List-padding)"}):{paddingBlock:"var(--List-padding, var(--ListDivider-gap))",paddingInline:"var(--List-padding)"},t.marker&&{paddingInlineStart:"3ch"}),q({boxSizing:"border-box",borderRadius:"var(--List-radius)",listStyle:"none",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},t.wrap&&{flexWrap:"wrap"},t.marker&&{"--_List-markerDisplay":"list-item","--_List-markerType":t.marker,lineHeight:"calc(var(--ListItem-minHeight) - 2 * var(--ListItem-paddingY))"},{flexGrow:1,position:"relative"},(f=e.variants[t.variant])==null?void 0:f[t.color],{"--unstable_List-borderWidth":"var(--variant-borderWidth, 0px)"},l!==void 0&&{"--List-radius":l},r!==void 0&&{"--List-padding":r},o!==void 0&&{"--List-padding":o})]}),gF=at(of,{name:"JoyList",slot:"Root",overridesResolver:(e,t)=>t.root})({}),yF=R.forwardRef(function(t,r){const o=R.useContext(Hg),l=R.useContext(rv),d=R.useContext(pF),f=Or({props:t,name:"JoyList"}),{component:c,className:b,children:w,size:k,orientation:z="vertical",wrap:P=!1,variant:V="plain",color:U="neutral",role:H,slots:X={},slotProps:B={}}=f,L=Ut(f,fF),G=k||(t.size??"md");let te;l&&(te="group"),d&&(te="presentation"),H&&(te=H);const ne=q({},f,{instanceSize:t.size,size:G,nesting:o,orientation:z,wrap:P,variant:V,color:U,role:te}),he=mF(ne),Z=q({},L,{component:c,slots:X,slotProps:B}),[ue,Ce]=zt("root",{ref:r,className:mi(he.root,b),elementType:gF,externalForwardedProps:Z,ownerState:ne,additionalProps:{as:c,role:te,"aria-labelledby":typeof o=="string"?o:void 0}});return re.jsx(ue,q({},Ce,{children:re.jsx(_b.Provider,{value:`${typeof c=="string"?c:""}:${te||""}`,children:re.jsx(nf,{row:z==="horizontal",wrap:P,children:w})})}))}),iv=yF,vF=Ar("MuiListItemButton",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","variantPlain","variantSoft","variantOutlined","variantSolid"]),lg=vF,_F=R.createContext("horizontal"),xb=_F,af=at("div")(({theme:e,ownerState:t})=>{var r,o,l,d,f,c;return q({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",font:"inherit",display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"stretch",gap:"var(--ListItem-gap)"},t.orientation==="vertical"&&{flexDirection:"column",justifyContent:"center"},{textAlign:"initial",textDecoration:"initial",backgroundColor:"initial",cursor:"pointer",marginInline:"var(--ListItemButton-marginInline)",marginBlock:"var(--ListItemButton-marginBlock)"},t["data-first-child"]===void 0&&{marginInlineStart:t.row?"var(--List-gap)":void 0,marginBlockStart:t.row?void 0:"var(--List-gap)"},{paddingBlock:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px))",paddingInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItem-startActionWidth, var(--unstable_startActionWidth, 0px)))",paddingInlineEnd:"calc(var(--ListItem-paddingRight) + var(--ListItem-endActionWidth, var(--unstable_endActionWidth, 0px)))",minBlockSize:"var(--ListItem-minHeight)",border:"1px solid transparent",borderRadius:"var(--ListItem-radius)",flex:"var(--unstable_ListItem-flex, none)",fontSize:"inherit",lineHeight:"inherit",minInlineSize:0,[e.focus.selector]:q({},e.focus.default,{zIndex:1})},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:active":(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color],[`.${Ug.root} > &`]:{"--unstable_ListItem-flex":"1 0 0%"},[`&.${lg.selected}`]:q({},(l=e.variants[`${t.variant}Active`])==null?void 0:l[t.color],{"--Icon-color":"currentColor"}),[`&:not(.${lg.selected}, [aria-selected="true"])`]:{"&:hover":(d=e.variants[`${t.variant}Hover`])==null?void 0:d[t.color],"&:active":(f=e.variants[`${t.variant}Active`])==null?void 0:f[t.color]},[`&.${lg.disabled}`]:q({},(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color])})});at(af,{name:"JoyListItemButton",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>q({},!e.row&&{[`&.${lg.selected}`]:{fontWeight:t.vars.fontWeight.md}}));function xF(e){return Br("MuiSvgIcon",e)}Ar("MuiSvgIcon",["root","colorInherit","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","fontSizeInherit","fontSizeXs","fontSizeSm","fontSizeMd","fontSizeLg","fontSizeXl","fontSizeXl2","fontSizeXl3","fontSizeXl4","sizeSm","sizeMd","sizeLg"]);const bF=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox","size","slots","slotProps"],wF=e=>{const{color:t,size:r,fontSize:o}=e,l={root:["root",t&&t!=="inherit"&&`color${It(t)}`,r&&`size${It(r)}`,o&&`fontSize${It(o)}`]};return Lr(l,xF,{})},SC={sm:"xl",md:"xl2",lg:"xl3"},SF=at("svg",{name:"JoySvgIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return q({},t.instanceSize&&{"--Icon-fontSize":e.vars.fontSize[SC[t.instanceSize]]},t.instanceFontSize&&t.instanceFontSize!=="inherit"&&{"--Icon-fontSize":e.vars.fontSize[t.instanceFontSize]},{userSelect:"none",margin:"var(--Icon-margin)",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,fontSize:`var(--Icon-fontSize, ${e.vars.fontSize[SC[t.size]]||"unset"})`},t.fontSize&&t.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${e.fontSize[t.fontSize]})`},!t.htmlColor&&q({color:`var(--Icon-color, ${e.vars.palette.text.icon})`},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&e.vars.palette[t.color]&&{color:`rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1)`}))}),CC=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoySvgIcon"}),{children:l,className:d,color:f,component:c="svg",fontSize:b,htmlColor:w,inheritViewBox:k=!1,titleAccess:z,viewBox:P="0 0 24 24",size:V="md",slots:U={},slotProps:H={}}=o,X=Ut(o,bF),B=R.isValidElement(l)&&l.type==="svg",L=q({},o,{color:f,component:c,size:V,instanceSize:t.size,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:k,viewBox:P,hasSvgAsChild:B}),G=wF(L),te=q({},X,{component:c,slots:U,slotProps:H}),[ne,he]=zt("root",{ref:r,className:mi(G.root,d),elementType:SF,externalForwardedProps:te,ownerState:L,additionalProps:q({color:w,focusable:!1},z&&{role:"img"},!z&&{"aria-hidden":!0},!k&&{viewBox:P},B&&l.props)});return re.jsxs(ne,q({},he,{children:[B?l.props.children:l,z?re.jsx("title",{children:z}):null]}))});function yd(e,t){function r(o,l){return re.jsx(CC,q({"data-testid":`${t}Icon`,ref:l},o,{children:e}))}return r.muiName=CC.muiName,R.memo(R.forwardRef(r))}const bb=e=>t=>`--${e?`${e}-`:""}${t.replace(/^--/,"")}`,od="data-skip-inverted-colors",bE=`& :not([${od}], [${od}] *)`,wE=e=>{var r,o,l,d,f,c,b,w,k,z,P,V,U,H,X,B,L,G,te,ne,he,Z;const t=bb(e.cssVarPrefix);return{"--variant-plainColor":"var(--variant-plainColor) !important","--variant-plainHoverColor":"var(--variant-plainHoverColor) !important","--variant-plainHoverBg":"var(--variant-plainHoverBg) !important","--variant-plainActiveBg":"var(--variant-plainActiveBg) !important","--variant-plainDisabledColor":"var(--variant-plainDisabledColor) !important","--variant-outlinedColor":"var(--variant-outlinedColor) !important","--variant-outlinedBorder":"var(--variant-outlinedBorder) !important","--variant-outlinedHoverColor":"var(--variant-outlinedHoverColor) !important","--variant-outlinedHoverBorder":"var(--variant-outlinedHoverBorder) !important","--variant-outlinedHoverBg":"var(--variant-outlinedHoverBg) !important","--variant-outlinedActiveBg":"var(--variant-outlinedActiveBg) !important","--variant-outlinedDisabledColor":"var(--variant-outlinedDisabledColor) !important","--variant-outlinedDisabledBorder":"var(--variant-outlinedDisabledBorder) !important","--variant-softColor":"var(--variant-softColor) !important","--variant-softHoverColor":"var(--variant-softHoverColor) !important","--variant-softBg":"var(--variant-softBg) !important","--variant-softHoverBg":"var(--variant-softHoverBg) !important","--variant-softActiveBg":"var(--variant-softActiveBg) !important","--variant-softActiveColor":"var(--variant-softActiveColor) !important","--variant-softDisabledColor":"var(--variant-softDisabledColor) !important","--variant-softDisabledBg":"var(--variant-softDisabledBg) !important","--variant-solidColor":"var(--variant-solidColor) !important","--variant-solidBg":"var(--variant-solidBg) !important","--variant-solidHoverBg":"var(--variant-solidHoverBg) !important","--variant-solidActiveBg":"var(--variant-solidActiveBg) !important","--variant-solidDisabledColor":"var(--variant-solidDisabledColor) !important","--variant-solidDisabledBg":"var(--variant-solidDisabledBg) !important","--Badge-ringColor":"var(--Badge-ringColor) !important",colorScheme:"unset",[e.getColorSchemeSelector("light")]:{[t("--palette-focusVisible")]:`${(r=e.colorSchemes.light)==null?void 0:r.palette.focusVisible} !important`,[t("--palette-background-body")]:`${(o=e.colorSchemes.light)==null?void 0:o.palette.background.body} !important`,[t("--palette-background-surface")]:`${(l=e.colorSchemes.light)==null?void 0:l.palette.background.surface} !important`,[t("--palette-background-popup")]:`${(d=e.colorSchemes.light)==null?void 0:d.palette.background.popup} !important`,[t("--palette-background-level1")]:`${(f=e.colorSchemes.light)==null?void 0:f.palette.background.level1} !important`,[t("--palette-background-level2")]:`${(c=e.colorSchemes.light)==null?void 0:c.palette.background.level2} !important`,[t("--palette-background-level3")]:`${(b=e.colorSchemes.light)==null?void 0:b.palette.background.level3} !important`,[t("--palette-text-primary")]:`${(w=e.colorSchemes.light)==null?void 0:w.palette.text.primary} !important`,[t("--palette-text-secondary")]:`${(k=e.colorSchemes.light)==null?void 0:k.palette.text.secondary} !important`,[t("--palette-text-tertiary")]:`${(z=e.colorSchemes.light)==null?void 0:z.palette.text.tertiary} !important`,[t("--palette-divider")]:`${(P=e.colorSchemes.light)==null?void 0:P.palette.divider} !important`},[e.getColorSchemeSelector("dark")]:{[t("--palette-focusVisible")]:`${(V=e.colorSchemes.dark)==null?void 0:V.palette.focusVisible} !important`,[t("--palette-background-body")]:`${(U=e.colorSchemes.dark)==null?void 0:U.palette.background.body} !important`,[t("--palette-background-surface")]:`${(H=e.colorSchemes.dark)==null?void 0:H.palette.background.surface} !important`,[t("--palette-background-popup")]:`${(X=e.colorSchemes.dark)==null?void 0:X.palette.background.popup} !important`,[t("--palette-background-level1")]:`${(B=e.colorSchemes.dark)==null?void 0:B.palette.background.level1} !important`,[t("--palette-background-level2")]:`${(L=e.colorSchemes.dark)==null?void 0:L.palette.background.level2} !important`,[t("--palette-background-level3")]:`${(G=e.colorSchemes.dark)==null?void 0:G.palette.background.level3} !important`,[t("--palette-text-primary")]:`${(te=e.colorSchemes.dark)==null?void 0:te.palette.text.primary} !important`,[t("--palette-text-secondary")]:`${(ne=e.colorSchemes.dark)==null?void 0:ne.palette.text.secondary} !important`,[t("--palette-text-tertiary")]:`${(he=e.colorSchemes.dark)==null?void 0:he.palette.text.tertiary} !important`,[t("--palette-divider")]:`${(Z=e.colorSchemes.dark)==null?void 0:Z.palette.divider} !important`}}};function CF(e){return e.theme!==void 0}const ov=e=>t=>{const r=CF(t)?t.theme:t,o=y1(r.cssVarPrefix),l=bb(r.cssVarPrefix),d=f=>{const c=f.split("-");return o(f,r.palette[c[1]][c[2]])};return{[bE]:{"--Badge-ringColor":d(`palette-${e}-solidBg`),"--Icon-color":"currentColor",[`${r.getColorSchemeSelector("light")}, ${r.getColorSchemeSelector("dark")}`]:{colorScheme:"dark",[l("--palette-focusVisible")]:d(`palette-${e}-200`),[l("--palette-background-body")]:"rgba(0 0 0 / 0.1)",[l("--palette-background-surface")]:"rgba(0 0 0 / 0.06)",[l("--palette-background-popup")]:d(`palette-${e}-700`),[l("--palette-background-level1")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.2)`,[l("--palette-background-level2")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.36)`,[l("--palette-background-level3")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.6)`,[l("--palette-text-primary")]:d("palette-common-white"),[l("--palette-text-secondary")]:d(`palette-${e}-200`),[l("--palette-text-tertiary")]:d(`palette-${e}-300`),[l("--palette-text-icon")]:d(`palette-${e}-200`),[l("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainColor":d(`palette-${e}-50`),"--variant-plainHoverColor":"#fff","--variant-plainHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedColor":d(`palette-${e}-50`),"--variant-outlinedBorder":`rgba(${d(`palette-${e}-lightChannel`)} / 0.5)`,"--variant-outlinedHoverColor":"#fff","--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":"rgba(255 255 255 / 0.2)","--variant-softColor":d("palette-common-white"),"--variant-softHoverColor":d("palette-common-white"),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.24)`,"--variant-softHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.36)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.16)`,"--variant-softActiveColor":"#fff","--variant-softDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`,"--variant-solidColor":d(`palette-${e}-${e==="neutral"?"600":"500"}`),"--variant-solidBg":d("palette-common-white"),"--variant-solidHoverBg":d("palette-common-white"),"--variant-solidActiveBg":d(`palette-${e}-100`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`}},[`&, & [${od}]`]:wE(r)}},av=e=>t=>{const{theme:r=t}=t,o=y1(r.cssVarPrefix),l=bb(r.cssVarPrefix),d=f=>{const c=f.split("-");return o(f,r.palette[c[1]][c[2]])};return{[bE]:{"--Badge-ringColor":d(`palette-${e}-softBg`),"--Icon-color":"currentColor",[r.getColorSchemeSelector("dark")]:{[l("--palette-focusVisible")]:d(`palette-${e}-300`),[l("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[l("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[l("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[l("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,[l("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,[l("--palette-text-primary")]:d(`palette-${e}-100`),[l("--palette-text-secondary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,[l("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[l("--palette-text-icon")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[l("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.2)`,"--variant-plainColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-plainHoverColor":d(`palette-${e}-50`),"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-outlinedHoverColor":d(`palette-${e}-50`),"--variant-outlinedBg":"initial","--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverBorder":d(`palette-${e}-600`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,"--variant-softColor":d(`palette-${e}-200`),"--variant-softBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-softHoverColor":"#fff","--variant-softHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-solidColor":"#fff","--variant-solidBg":d(`palette-${e}-500`),"--variant-solidHoverColor":"#fff","--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`},[r.getColorSchemeSelector("light")]:{[l("--palette-focusVisible")]:d(`palette-${e}-500`),[l("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[l("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[l("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[l("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,[l("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,[l("--palette-text-primary")]:d(`palette-${e}-700`),[l("--palette-text-secondary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,[l("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.68)`,[l("--palette-text-icon")]:d(`palette-${e}-500`),[l("--palette-divider")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainColor":`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,"--variant-plainHoverColor":`rgba(${d(`palette-${e}-darkChannel`)} / 1)`,"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-mainChannel`)} / 1)`,"--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverColor":d(`palette-${e}-600`),"--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-softColor":d(`palette-${e}-600`),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.8)`,"--variant-softHoverColor":d(`palette-${e}-700`),"--variant-softHoverBg":d(`palette-${e}-200`),"--variant-softActiveBg":d(`palette-${e}-300`),"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,"--variant-solidColor":d("palette-common-white"),"--variant-solidBg":d(`palette-${e}-${e==="neutral"?"700":"500"}`),"--variant-solidHoverColor":d("palette-common-white"),"--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`}},[`&, & [${od}]`]:wE(r)}},SE=yd(re.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),kF=yd(re.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),CE=R.createContext(void 0);function nc(e,t){let r=t,o=e;return e==="outlined"&&(r="neutral",o="plain"),e==="plain"&&(r="neutral"),{variant:o,color:r}}function wb(e,t,r=!1){const o=R.useContext(CE),[l,d]=typeof o=="string"?o.split(":"):[],f=nc(l||void 0,d||void 0);return f.variant=e||f.variant,f.color=t||(r?d:f.color),f}function sv({children:e,color:t,variant:r}){return re.jsx(CE.Provider,{value:`${r||""}:${t||""}`,children:e})}function IF(e){return Br("MuiIconButton",e)}Ar("MuiIconButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","loading","loadingIndicator"]);const TF=R.createContext({}),Sb=TF,PF=R.createContext(void 0),kE=PF;function EF(e){return Br("MuiCircularProgress",e)}Ar("MuiCircularProgress",["root","determinate","svg","track","progress","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);const zF=["color","backgroundColor"],MF=["children","className","color","size","variant","thickness","determinate","value","component","slots","slotProps"],AF=CI({"0%":{transform:"rotate(-90deg)"},"100%":{transform:"rotate(270deg)"}}),DF=e=>{const{determinate:t,color:r,variant:o,size:l}=e,d={root:["root",t&&"determinate",r&&`color${It(r)}`,o&&`variant${It(o)}`,l&&`size${It(l)}`],svg:["svg"],track:["track"],progress:["progress"]};return Lr(d,EF,{})};function hu(e,t){return`var(--CircularProgress-${e}Thickness, var(--CircularProgress-thickness, ${t}))`}const RF=at("span",{name:"JoyCircularProgress",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var f,c,b,w;const r=((f=t.variants[e.variant])==null?void 0:f[e.color])||{},{color:o,backgroundColor:l}=r,d=Ut(r,zF);return q({"--Icon-fontSize":"calc(0.4 * var(--_root-size))","--CircularProgress-trackColor":l,"--CircularProgress-progressColor":o,"--CircularProgress-percent":e.value,"--CircularProgress-linecap":"round"},e.size==="sm"&&{"--_root-size":"var(--CircularProgress-size, 24px)","--_track-thickness":hu("track","3px"),"--_progress-thickness":hu("progress","3px")},e.instanceSize==="sm"&&{"--CircularProgress-size":"24px"},e.size==="md"&&{"--_track-thickness":hu("track","6px"),"--_progress-thickness":hu("progress","6px"),"--_root-size":"var(--CircularProgress-size, 40px)"},e.instanceSize==="md"&&{"--CircularProgress-size":"40px"},e.size==="lg"&&{"--_track-thickness":hu("track","8px"),"--_progress-thickness":hu("progress","8px"),"--_root-size":"var(--CircularProgress-size, 64px)"},e.instanceSize==="lg"&&{"--CircularProgress-size":"64px"},e.thickness&&{"--_track-thickness":`${e.thickness}px`,"--_progress-thickness":`${e.thickness}px`},{"--_thickness-diff":"calc(var(--_track-thickness) - var(--_progress-thickness))","--_inner-size":"calc(var(--_root-size) - 2 * var(--variant-borderWidth, 0px))","--_outlined-inset":"max(var(--_track-thickness), var(--_progress-thickness))",width:"var(--_root-size)",height:"var(--_root-size)",borderRadius:"var(--_root-size)",margin:"var(--CircularProgress-margin)",boxSizing:"border-box",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0,position:"relative",color:o},e.children&&{fontFamily:t.vars.fontFamily.body,fontWeight:t.vars.fontWeight.md,fontSize:"calc(0.2 * var(--_root-size))"},d,e.variant==="outlined"&&{"&::before":q({content:'""',display:"block",position:"absolute",borderRadius:"inherit",top:"var(--_outlined-inset)",left:"var(--_outlined-inset)",right:"var(--_outlined-inset)",bottom:"var(--_outlined-inset)"},d)},e.variant==="soft"&&{"--CircularProgress-trackColor":t.variants.soft.neutral.backgroundColor,"--CircularProgress-progressColor":(c=t.variants.solid)==null?void 0:c[e.color].backgroundColor},e.variant==="solid"&&{"--CircularProgress-trackColor":(b=t.variants.softHover)==null?void 0:b[e.color].backgroundColor,"--CircularProgress-progressColor":(w=t.variants.solid)==null?void 0:w[e.color].backgroundColor})}),LF=at("svg",{name:"JoyCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({width:"inherit",height:"inherit",display:"inherit",boxSizing:"inherit",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))"}),$F=at("circle",{name:"JoyCircularProgress",slot:"track",overridesResolver:(e,t)=>t.track})({cx:"50%",cy:"50%",r:"calc(var(--_inner-size) / 2 - var(--_track-thickness) / 2 + min(0px, var(--_thickness-diff) / 2))",fill:"transparent",strokeWidth:"var(--_track-thickness)",stroke:"var(--CircularProgress-trackColor)"}),BF=at("circle",{name:"JoyCircularProgress",slot:"progress",overridesResolver:(e,t)=>t.progress})({"--_progress-radius":"calc(var(--_inner-size) / 2 - var(--_progress-thickness) / 2 - max(0px, var(--_thickness-diff) / 2))","--_progress-length":"calc(2 * 3.1415926535 * var(--_progress-radius))",cx:"50%",cy:"50%",r:"var(--_progress-radius)",fill:"transparent",strokeWidth:"var(--_progress-thickness)",stroke:"var(--CircularProgress-progressColor)",strokeLinecap:"var(--CircularProgress-linecap, round)",strokeDasharray:"var(--_progress-length)",strokeDashoffset:"calc(var(--_progress-length) - var(--CircularProgress-percent) * var(--_progress-length) / 100)",transformOrigin:"center",transform:"rotate(-90deg)"},({ownerState:e})=>!e.determinate&&n1`
      animation: var(--CircularProgress-circulation, 0.8s linear 0s infinite normal none running)
        ${AF};
    `),OF=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyCircularProgress"}),{children:l,className:d,color:f="primary",size:c="md",variant:b="soft",thickness:w,determinate:k=!1,value:z=k?0:25,component:P,slots:V={},slotProps:U={}}=o,H=Ut(o,MF),X=q({},o,{color:f,size:c,variant:b,thickness:w,value:z,determinate:k,instanceSize:t.size}),B=DF(X),L=q({},H,{component:P,slots:V,slotProps:U}),[G,te]=zt("root",{ref:r,className:mi(B.root,d),elementType:RF,externalForwardedProps:L,ownerState:X,additionalProps:q({role:"progressbar",style:{"--CircularProgress-percent":z}},z&&k&&{"aria-valuenow":Math.round(typeof z=="number"?z:Number(z||0))})}),[ne,he]=zt("svg",{className:B.svg,elementType:LF,externalForwardedProps:L,ownerState:X}),[Z,ue]=zt("track",{className:B.track,elementType:$F,externalForwardedProps:L,ownerState:X}),[Ce,ye]=zt("progress",{className:B.progress,elementType:BF,externalForwardedProps:L,ownerState:X});return re.jsxs(G,q({},te,{children:[re.jsxs(ne,q({},he,{children:[re.jsx(Z,q({},ue)),re.jsx(Ce,q({},ye))]})),l]}))}),Cb=OF,FF=["children","action","component","color","disabled","variant","loading","loadingIndicator","size","slots","slotProps"],NF=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:l,size:d,variant:f,loading:c}=e,b={root:["root",r&&"disabled",o&&"focusVisible",f&&`variant${It(f)}`,t&&`color${It(t)}`,d&&`size${It(d)}`,c&&"loading"],loadingIndicator:["loadingIndicator"]},w=Lr(b,IF,{});return o&&l&&(w.root+=` ${l}`),w},sf=at("button")(({theme:e,ownerState:t})=>{var r,o,l,d;return[q({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.instanceSize&&{"--IconButton-size":{sm:"2rem",md:"2.25rem",lg:"2.75rem"}[t.instanceSize]},t.size==="sm"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.6)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px"},t.size==="md"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.25rem) / 1.5)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2.25rem)",minHeight:"var(--IconButton-size, 2.25rem)",fontSize:e.vars.fontSize.md,paddingInline:"0.25rem"},t.size==="lg"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.75rem) / 1.571)","--CircularProgress-size":"28px","--CircularProgress-thickness":"4px",minWidth:"var(--IconButton-size, 2.75rem)",minHeight:"var(--IconButton-size, 2.75rem)",fontSize:e.vars.fontSize.lg,paddingInline:"0.375rem"},{WebkitTapHighlightColor:"transparent",paddingBlock:0,fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.md,margin:"var(--IconButton-margin)",borderRadius:`var(--IconButton-radius, ${e.vars.radius.sm})`,border:"none",boxSizing:"border-box",backgroundColor:"transparent",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",[e.focus.selector]:q({"--Icon-color":"currentColor"},e.focus.default)}),q({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":q({"--Icon-color":"currentColor"},(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color])},'&:active, &[aria-pressed="true"]':q({"--Icon-color":"currentColor"},(l=e.variants[`${t.variant}Active`])==null?void 0:l[t.color]),"&:disabled":(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]})]}),jF=at(sf,{name:"JoyIconButton",slot:"Root",overridesResolver:(e,t)=>t.root})({}),VF=at("span",{name:"JoyIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e,ownerState:t})=>{var r,o,l,d;return q({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(o=(r=e.variants[t.variant])==null?void 0:r[t.color])==null?void 0:o.color},t.disabled&&{color:(d=(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color])==null?void 0:d.color})}),IE=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyIconButton"}),{children:l,action:d,component:f="button",color:c="neutral",disabled:b,variant:w="plain",loading:k=!1,loadingIndicator:z,size:P="md",slots:V={},slotProps:U={}}=o,H=Ut(o,FF),X=R.useContext(Sb),B=R.useContext(kE),L=t.variant||X.variant||w,G=t.size||X.size||P,te=t.color||X.color||c,ne=(t.loading||t.disabled)??(X.disabled||k||b),he=R.useRef(null),Z=Kr(he,r),{focusVisible:ue,setFocusVisible:Ce,getRootProps:ye}=os(q({},o,{disabled:ne,rootRef:Z})),Ee=z??re.jsx(Cb,{color:te,thickness:{sm:2,md:3,lg:4}[G]||3});R.useImperativeHandle(d,()=>({focusVisible:()=>{var ht;Ce(!0),(ht=he.current)==null||ht.focus()}}),[Ce]);const Se=q({},o,{component:f,color:te,disabled:ne,variant:L,loading:k,size:G,focusVisible:ue,instanceSize:t.size}),ze=NF(Se),We=ht=>{var gt;let vt=o.onClick;typeof U.root=="function"?vt=U.root(Se).onClick:U.root&&(vt=U.root.onClick),vt==null||vt(ht),B&&((gt=B.onClick)==null||gt.call(B,ht,o.value))};let Fe=o["aria-pressed"];typeof U.root=="function"?Fe=U.root(Se)["aria-pressed"]:U.root&&(Fe=U.root["aria-pressed"]),B!=null&&B.value&&(Array.isArray(B.value)?Fe=B.value.indexOf(o.value)!==-1:Fe=B.value===o.value);const Me=q({},H,{component:f,slots:V,slotProps:U}),[Oe,ke]=zt("root",{ref:r,className:ze.root,elementType:jF,getSlotProps:ye,externalForwardedProps:Me,ownerState:Se,additionalProps:{onClick:We,"aria-pressed":Fe}}),[Ge,Ke]=zt("loadingIndicator",{className:ze.loadingIndicator,elementType:VF,externalForwardedProps:Me,ownerState:Se});return re.jsx(Oe,q({},ke,{children:k?re.jsx(Ge,q({},Ke,{children:Ee})):l}))});IE.muiName="IconButton";const kb=IE;function UF(e){return Br("MuiChip",e)}const HF=Ar("MuiChip",["root","clickable","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","disabled","endDecorator","focusVisible","label","labelSm","labelMd","labelLg","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantSolid","variantSoft","variantOutlined"]),Sx=HF,WF=R.createContext({disabled:void 0,variant:void 0,color:void 0}),TE=WF,GF=["children","className","color","onClick","disabled","size","variant","startDecorator","endDecorator","component","slots","slotProps"],qF=e=>{const{disabled:t,size:r,color:o,clickable:l,variant:d,focusVisible:f}=e,c={root:["root",t&&"disabled",o&&`color${It(o)}`,r&&`size${It(r)}`,d&&`variant${It(d)}`,l&&"clickable"],action:["action",t&&"disabled",f&&"focusVisible"],label:["label",r&&`label${It(r)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Lr(c,UF,{})},ZF=at("div",{name:"JoyChip",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var l,d,f,c;const r=(l=e.variants[t.variant])==null?void 0:l[t.color],{borderRadius:o}=gd({theme:e,ownerState:t},["borderRadius"]);return[q({"--Chip-decoratorChildOffset":"min(calc(var(--Chip-paddingInline) - (var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2), var(--Chip-paddingInline))","--Chip-decoratorChildRadius":"max(var(--_Chip-radius) - var(--variant-borderWidth, 0px) - var(--_Chip-paddingBlock), min(var(--_Chip-paddingBlock) + var(--variant-borderWidth, 0px), var(--_Chip-radius) / 2))","--Chip-deleteRadius":"var(--Chip-decoratorChildRadius)","--Chip-deleteSize":"var(--Chip-decoratorChildHeight)","--Avatar-radius":"var(--Chip-decoratorChildRadius)","--Avatar-size":"var(--Chip-decoratorChildHeight)","--Icon-margin":"initial","--Icon-color":"currentColor","--unstable_actionRadius":"var(--_Chip-radius)"},t.size==="sm"&&{"--Chip-paddingInline":"0.375rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.sm,"--_Chip-minHeight":"var(--Chip-minHeight, 1.25rem)",gap:"3px"},t.size==="md"&&{"--Chip-paddingInline":"0.5rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.25rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.md,"--_Chip-minHeight":"var(--Chip-minHeight, 1.5rem)",gap:"0.25rem"},t.size==="lg"&&{"--Chip-paddingInline":"0.75rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.375rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.lg,"--_Chip-minHeight":"var(--Chip-minHeight, 1.75rem)",gap:"0.375rem"},{"--_Chip-radius":"var(--Chip-radius, 1.5rem)","--_Chip-paddingBlock":"max((var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2, 0px)",minHeight:"var(--_Chip-minHeight)",maxWidth:"max-content",paddingInline:"var(--Chip-paddingInline)",borderRadius:"var(--_Chip-radius)",position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",verticalAlign:"middle",boxSizing:"border-box"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[t.size]}`],{fontWeight:e.vars.fontWeight.md,[`&.${Sx.disabled}`]:{color:(f=(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color])==null?void 0:f.color}}),...t.clickable?[{"--variant-borderWidth":"0px",color:r==null?void 0:r.color}]:[q({backgroundColor:e.vars.palette.background.surface},r,{[`&.${Sx.disabled}`]:(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color]})],o!==void 0&&{"--_Chip-radius":o}]}),KF=at("span",{name:"JoyChip",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>q({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",order:1,minInlineSize:0,flexGrow:1},e.clickable&&{zIndex:1,pointerEvents:"none"})),XF=at("button",{name:"JoyChip",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,o,l,d;return[{"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,position:"absolute",zIndex:0,top:0,left:0,bottom:0,right:0,width:"100%",border:"none",cursor:"pointer",padding:"initial",margin:"initial",backgroundColor:"initial",textDecoration:"none",borderRadius:"inherit",[e.focus.selector]:e.focus.default},q({backgroundColor:e.vars.palette.background.surface},(r=e.variants[t.variant])==null?void 0:r[t.color]),{"&:hover":{"@media (hover: hover)":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]}},{"&:active":(l=e.variants[`${t.variant}Active`])==null?void 0:l[t.color]},{[`&.${Sx.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]}),JF=at("span",{name:"JoyChip",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Avatar-marginInlineStart":"calc(var(--Chip-decoratorChildOffset) * -1)","--IconButton-margin":"0 calc(-1 * var(--Chip-paddingInline) / 3) 0 calc(var(--Chip-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Chip-paddingInline) / -4)",display:"inherit",order:0,zIndex:1,pointerEvents:"none"}),YF=at("span",{name:"JoyChip",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--IconButton-margin":"0 calc(var(--Chip-decoratorChildOffset) * -1) 0 calc(-1 * var(--Chip-paddingInline) / 3)","--Icon-margin":"0 calc(var(--Chip-paddingInline) / -4) 0 0",display:"inherit",order:2,zIndex:1,pointerEvents:"none"}),QF=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyChip"}),{children:l,className:d,color:f="neutral",onClick:c,disabled:b=!1,size:w="md",variant:k="soft",startDecorator:z,endDecorator:P,component:V,slots:U={},slotProps:H={}}=o,X=Ut(o,GF),B=!!c||!!H.action,L=q({},o,{disabled:b,size:w,color:f,variant:k,clickable:B,focusVisible:!1}),G=typeof H.action=="function"?H.action(L):H.action,te=R.useRef(null),{focusVisible:ne,getRootProps:he}=os(q({},G,{disabled:b,rootRef:te}));L.focusVisible=ne;const Z=qF(L),ue=q({},X,{component:V,slots:U,slotProps:H}),[Ce,ye]=zt("root",{ref:r,className:mi(Z.root,d),elementType:ZF,externalForwardedProps:ue,ownerState:L}),[Ee,Se]=zt("label",{className:Z.label,elementType:KF,externalForwardedProps:ue,ownerState:L}),ze=Co(Se.id),[We,Fe]=zt("action",{className:Z.action,elementType:XF,externalForwardedProps:ue,ownerState:L,getSlotProps:he,additionalProps:{"aria-labelledby":ze,as:G==null?void 0:G.component,onClick:c}}),[Me,Oe]=zt("startDecorator",{className:Z.startDecorator,elementType:JF,externalForwardedProps:ue,ownerState:L}),[ke,Ge]=zt("endDecorator",{className:Z.endDecorator,elementType:YF,externalForwardedProps:ue,ownerState:L}),Ke=R.useMemo(()=>({disabled:b}),[b]);return re.jsx(TE.Provider,{value:Ke,children:re.jsx(sv,{variant:k,color:f,children:re.jsxs(Ce,q({},ye,{children:[B&&re.jsx(We,q({},Fe)),re.jsx(Ee,q({},Se,{id:ze,children:l})),z&&re.jsx(Me,q({},Oe,{children:z})),P&&re.jsx(ke,q({},Ge,{children:P}))]}))})})}),e6=QF,t6=yd(re.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Cancel");function r6(e){return Br("MuiChipDelete",e)}Ar("MuiChipDelete",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSolid","variantSoft","variantOutlined"]);var kC;const n6=["children","variant","color","disabled","onKeyDown","onDelete","onClick","component","slots","slotProps"],i6=["onDelete"],o6=e=>{const{focusVisible:t,variant:r,color:o,disabled:l}=e,d={root:["root",l&&"disabled",t&&"focusVisible",r&&`variant${It(r)}`,o&&`color${It(o)}`]};return Lr(d,r6,{})},a6=at(sf,{name:"JoyChipDelete",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({"--IconButton-size":"var(--Chip-deleteSize, 2rem)","--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.3)",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px",pointerEvents:"visible",borderRadius:"var(--Chip-deleteRadius, 50%)",zIndex:1,padding:0})),s6=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyChipDelete"}),{children:l,variant:d="plain",color:f="neutral",disabled:c,onKeyDown:b,onDelete:w,onClick:k,component:z,slots:P={},slotProps:V={}}=o,U=Ut(o,n6),H=R.useContext(TE),{variant:X=d,color:B=f}=wb(t.variant,t.color,!0),L=t.color||B,G=c??H.disabled,te=R.useRef(null),ne=Kr(te,r),{focusVisible:he,getRootProps:Z}=os(q({},o,{disabled:G,rootRef:ne})),ue=q({},o,{disabled:G,variant:X,color:L,focusVisible:he}),Ce=o6(ue),ye=q({},U,{component:z,slots:P,slotProps:V}),Ee=Me=>{!G&&w&&w(Me),k&&k(Me)},Se=Me=>{["Backspace","Enter","Delete"].includes(Me.key)&&(Me.preventDefault(),!G&&w&&w(Me)),b&&b(Me)},[ze,We]=zt("root",{ref:r,elementType:a6,getSlotProps:Z,externalForwardedProps:ye,ownerState:ue,additionalProps:{as:z,onKeyDown:Se,onClick:Ee},className:Ce.root}),Fe=Ut(We,i6);return re.jsx(ze,q({},Fe,{children:l??(kC||(kC=re.jsx(t6,{})))}))}),l6=s6;function c6(e){return Br("MuiInput",e)}const u6=Ar("MuiInput",["root","input","formControl","focused","disabled","error","adornedStart","adornedEnd","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid","fullWidth","startDecorator","endDecorator"]),PE=u6,d6=R.createContext(void 0),lv=d6,h6=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoFocus","className","defaultValue","disabled","disabledInProp","error","id","name","onClick","onChange","onKeyDown","onKeyUp","onFocus","onBlur","placeholder","readOnly","required","type","value"];function p6(e,t){const r=R.useContext(lv),{"aria-describedby":o,"aria-label":l,"aria-labelledby":d,autoComplete:f,autoFocus:c,className:b,defaultValue:w,disabled:k,disabledInProp:z,error:P,id:V,name:U,onClick:H,onChange:X,onKeyDown:B,onKeyUp:L,onFocus:G,onBlur:te,placeholder:ne,readOnly:he,required:Z,type:ue,value:Ce}=e,ye=Ut(e,h6),{getRootProps:Ee,getInputProps:Se,focused:ze,error:We,disabled:Fe}=C3({disabled:z??(r==null?void 0:r.disabled)??k,defaultValue:w,error:P,onBlur:te,onClick:H,onChange:X,onFocus:G,required:Z??(r==null?void 0:r.required),value:Ce}),Me={[t.disabled]:Fe,[t.error]:We,[t.focused]:ze,[t.formControl]:!!r,[b]:b},Oe={[t.disabled]:Fe};return q({formControl:r,propsToForward:{"aria-describedby":o,"aria-label":l,"aria-labelledby":d,autoComplete:f,autoFocus:c,disabled:Fe,id:V,onKeyDown:B,onKeyUp:L,name:U,placeholder:ne,readOnly:he,type:ue},rootStateClasses:Me,inputStateClasses:Oe,getRootProps:Ee,getInputProps:Se,focused:ze,error:We,disabled:Fe},ye)}const f6=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","fullWidth","size","color","variant","startDecorator","endDecorator","component","slots","slotProps"],m6=e=>{const{disabled:t,fullWidth:r,variant:o,color:l,size:d}=e,f={root:["root",t&&"disabled",r&&"fullWidth",o&&`variant${It(o)}`,l&&`color${It(l)}`,d&&`size${It(d)}`],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Lr(f,c6,{})},EE=at("div")(({theme:e,ownerState:t})=>{var o,l,d,f,c;const r=(o=e.variants[`${t.variant}`])==null?void 0:o[t.color];return[q({"--Input-radius":e.vars.radius.sm,"--Input-gap":"0.5rem","--Input-placeholderColor":"inherit","--Input-placeholderOpacity":.64,"--Input-decoratorColor":e.vars.palette.text.icon,"--Input-focused":"0","--Input-focusedThickness":e.vars.focus.thickness,"--Input-focusedHighlight":(l=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:l[500],[`&:not([${od}])`]:q({},t.instanceColor&&{"--_Input-focusedHighlight":(d=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:d[500]},{"--Input-focusedHighlight":`var(--_Input-focusedHighlight, ${e.vars.palette.focusVisible})`})},t.size==="sm"&&{"--Input-minHeight":"2rem","--Input-paddingInline":"0.5rem","--Input-decoratorChildHeight":"min(1.5rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Input-minHeight":"2.25rem","--Input-paddingInline":"0.75rem","--Input-decoratorChildHeight":"min(1.75rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Input-minHeight":"2.75rem","--Input-paddingInline":"1rem","--Input-gap":"0.75rem","--Input-decoratorChildHeight":"min(2.25rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Input-decoratorChildOffset":"min(calc(var(--Input-paddingInline) - (var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2), var(--Input-paddingInline))","--_Input-paddingBlock":"max((var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2, 0px)","--Input-decoratorChildRadius":"max(var(--Input-radius) - var(--variant-borderWidth, 0px) - var(--_Input-paddingBlock), min(var(--_Input-paddingBlock) + var(--variant-borderWidth, 0px), var(--Input-radius) / 2))","--Button-minHeight":"var(--Input-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Input-decoratorChildHeight)","--Button-radius":"var(--Input-decoratorChildRadius)","--IconButton-radius":"var(--Input-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Input-minHeight)"},t.fullWidth&&{width:"100%"},{cursor:"text",position:"relative",display:"flex",paddingInline:"var(--Input-paddingInline)",borderRadius:"var(--Input-radius)"},e.typography[`body-${t.size}`],r,{backgroundColor:(r==null?void 0:r.backgroundColor)??e.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Input-focusedInset, inset) 0 0 0 calc(var(--Input-focused) * var(--Input-focusedThickness)) var(--Input-focusedHighlight)"}}),{"&:hover":q({},(f=e.variants[`${t.variant}Hover`])==null?void 0:f[t.color],{backgroundColor:null}),[`&.${PE.disabled}`]:(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color],"&:focus-within::before":{"--Input-focused":"1"}}]}),zE=at("input")(({ownerState:e})=>({border:"none",minWidth:0,outline:0,padding:0,flex:1,color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",textOverflow:"ellipsis","&:-webkit-autofill":q({paddingInline:"var(--Input-paddingInline)"},!e.startDecorator&&{marginInlineStart:"calc(-1 * var(--Input-paddingInline))",paddingInlineStart:"var(--Input-paddingInline)",borderTopLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"},!e.endDecorator&&{marginInlineEnd:"calc(-1 * var(--Input-paddingInline))",paddingInlineEnd:"var(--Input-paddingInline)",borderTopRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"}),"&::-webkit-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"}})),ME=at("div")({"--Button-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Input-paddingInline) / -4)",display:"inherit",alignItems:"center",paddingBlock:"var(--unstable_InputPaddingBlock)",flexWrap:"wrap",marginInlineEnd:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),AE=at("div")({"--Button-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Input-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",marginInlineStart:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),g6=at(EE,{name:"JoyInput",slot:"Root",overridesResolver:(e,t)=>t.root})({}),y6=at(zE,{name:"JoyInput",slot:"Input",overridesResolver:(e,t)=>t.input})({}),v6=at(ME,{name:"JoyInput",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),_6=at(AE,{name:"JoyInput",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({}),x6=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyInput"}),l=p6(q({},o,{disabledInProp:t.disabled}),PE),{propsToForward:d,rootStateClasses:f,inputStateClasses:c,getRootProps:b,getInputProps:w,formControl:k,focused:z,error:P=!1,disabled:V,fullWidth:U=!1,size:H="md",color:X="neutral",variant:B="outlined",startDecorator:L,endDecorator:G,component:te,slots:ne={},slotProps:he={}}=l,Z=Ut(l,f6),ue=t.error??(k==null?void 0:k.error)??P,Ce=t.size??(k==null?void 0:k.size)??H,ye=t.color??(ue?"danger":(k==null?void 0:k.color)??X),Ee=q({instanceColor:ue?"danger":t.color},o,{fullWidth:U,color:ye,disabled:V,error:ue,focused:z,size:Ce,variant:B}),Se=m6(Ee),ze=q({},Z,{component:te,slots:ne,slotProps:he}),[We,Fe]=zt("root",{ref:r,className:[Se.root,f],elementType:g6,getSlotProps:b,externalForwardedProps:ze,ownerState:Ee}),[Me,Oe]=zt("input",q({},k&&{additionalProps:{id:k.htmlFor,"aria-describedby":k["aria-describedby"]}},{className:[Se.input,c],elementType:y6,getSlotProps:w,internalForwardedProps:d,externalForwardedProps:ze,ownerState:Ee})),[ke,Ge]=zt("startDecorator",{className:Se.startDecorator,elementType:v6,externalForwardedProps:ze,ownerState:Ee}),[Ke,ht]=zt("endDecorator",{className:Se.endDecorator,elementType:_6,externalForwardedProps:ze,ownerState:Ee});return re.jsxs(We,q({},Fe,{children:[L&&re.jsx(ke,q({},Ge,{children:L})),re.jsx(Me,q({},Oe)),G&&re.jsx(Ke,q({},ht,{children:G}))]}))}),b6=x6;function w6(e){return Br("MuiListSubheader",e)}Ar("MuiListSubheader",["root","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const S6=["component","className","children","id","sticky","variant","color","slots","slotProps"],C6=e=>{const{variant:t,color:r,sticky:o}=e,l={root:["root",o&&"sticky",r&&`color${It(r)}`,t&&`variant${It(t)}`]};return Lr(l,w6,{})},k6=at("div",{name:"JoyListSubheader",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;return q({boxSizing:"border-box",display:"flex",alignItems:"center",marginInline:"var(--ListItem-marginInline)",paddingBlock:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)",minBlockSize:"var(--ListItem-minHeight)"},e.typography["body-xs"],{fontSize:"max(0.75em, 0.625rem)",textTransform:"uppercase",letterSpacing:"0.1em"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:"var(--ListItem-stickyBackground)"},{color:t.color?`var(--_Link-color, rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1))`:e.vars.palette.text.tertiary},t.instanceColor&&{[`&:not([${od}])`]:{"--_Link-color":e.vars.palette.text.secondary}},(o=e.variants[t.variant])==null?void 0:o[t.color])}),I6=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyListSubheader"}),{component:l,className:d,children:f,id:c,sticky:b=!1,variant:w,color:k,slots:z={},slotProps:P={}}=o,V=Ut(o,S6),U=Co(c),H=R.useContext(_E);R.useEffect(()=>{H&&H(U||"")},[H,U]);const X=q({instanceColor:t.color},o,{id:U,sticky:b,variant:w,color:w?k??"neutral":k}),B=C6(X),L=q({},V,{component:l,slots:z,slotProps:P}),[G,te]=zt("root",{ref:r,className:mi(B.root,d),elementType:k6,externalForwardedProps:L,ownerState:X,additionalProps:{as:l,id:U}});return re.jsx(G,q({},te,{children:f}))}),T6=I6;function P6(e){return Br("MuiAutocomplete",e)}const E6=Ar("MuiAutocomplete",["root","wrapper","input","startDecorator","endDecorator","formControl","focused","disabled","error","multiple","limitTag","hasPopupIcon","hasClearIcon","clearIndicator","popupIndicator","popupIndicatorOpen","listbox","option","loading","noOptions","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]),dl=E6,DE=at(of)(({theme:e,ownerState:t})=>{var o;const r=(o=e.variants[t.variant])==null?void 0:o[t.color];return q({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(r==null?void 0:r.backgroundColor)||(r==null?void 0:r.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},nv,{boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`},!(r!=null&&r.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},{zIndex:e.vars.zIndex.popup,overflow:"auto",maxHeight:"40vh",position:"relative","&:empty":{visibility:"hidden"},[`& .${Ug.nested}, & .${Ug.nested} .${dF.root}`]:{position:"initial"}})});at(DE,{name:"JoyAutocompleteListbox",slot:"Root",overridesResolver:(e,t)=>t.root})({});const RE=at(af)(({theme:e,ownerState:t})=>{var r,o;return{'&[aria-disabled="true"]':(r=e.variants[`${t.variant}Disabled`])==null?void 0:r[t.color],'&[aria-selected="true"]':q({},(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color],{fontWeight:e.vars.fontWeight.md})}});at(RE,{name:"JoyAutocompleteOption",slot:"Root",overridesResolver:(e,t)=>t.root})({});var IC,TC;const z6=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoHighlight","autoSelect","autoFocus","blurOnSelect","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","defaultValue","disableCloseOnSelect","disabledItemsFocusable","disableListWrap","disableClearable","disabled","endDecorator","error","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","handleHomeEndKeys","includeInputInList","isOptionEqualToValue","groupBy","id","inputValue","limitTags","loading","loadingText","multiple","name","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","placeholder","popupIcon","readOnly","renderGroup","renderOption","renderTags","required","type","startDecorator","size","color","variant","value","component","selectOnFocus","slots","slotProps"],M6=["onDelete"],A6=["onBlur","onFocus","onMouseDown"],D6=e=>e.current!==null&&e.current.contains(document.activeElement),R6=e=>e.label??e,L6=e=>`+${e}`,$6=e=>re.jsxs(rf,{nested:!0,children:[re.jsx(T6,{sticky:!0,children:e.group}),re.jsx(iv,{children:e.children})]},e.key),B6=e=>{const{disabled:t,focused:r,hasClearIcon:o,hasPopupIcon:l,popupOpen:d,variant:f,color:c,size:b,multiple:w}=e,k={root:["root",r&&"focused",o&&"hasClearIcon",l&&"hasPopupIcon",f&&`variant${It(f)}`,c&&`color${It(c)}`,b&&`size${It(b)}`],wrapper:["wrapper",w&&"multiple"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",d&&"popupIndicatorOpen",t&&"disabled"],listbox:["listbox"],option:["option"],loading:["loading"],noOptions:["noOptions"],limitTag:["limitTag"]};return Lr(k,P6,{})},O6=at(EE,{name:"JoyAutocomplete",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>q({},e.size==="sm"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="md"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="lg"&&{"--Autocomplete-wrapperGap":"4px"},{"@media (pointer: fine)":{[`&:hover .${dl.clearIndicator}`]:{visibility:"visible"}}},e.multiple&&!e.startDecorator&&{paddingInlineStart:0})),F6=at("div",{name:"JoyAutocomplete",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>({flex:1,minWidth:0,display:"flex",alignItems:"center",flexWrap:"wrap",gap:"var(--Autocomplete-wrapperGap)",[`&.${dl.multiple}`]:q({paddingBlock:"var(--Autocomplete-wrapperGap)"},!e.startDecorator&&{paddingInlineStart:"var(--Autocomplete-wrapperGap)"},!e.endDecorator&&{paddingInlineEnd:"var(--Autocomplete-wrapperGap)"})})),N6=at(zE,{name:"JoyAutocomplete",slot:"Input",overridesResolver:(e,t)=>t.input})(({ownerState:e})=>q({minWidth:30,minHeight:"var(--Chip-minHeight)"},e.multiple&&{marginInlineStart:"calc(var(--Autocomplete-wrapperGap) * 2.5)"})),j6=at(ME,{name:"JoyAutocomplete",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),V6=at(AE,{name:"JoyAutocomplete",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})(({ownerState:e})=>q({},(e.hasClearIcon||e.hasPopupIcon)&&{"--Button-margin":"0px","--IconButton-margin":"0px","--Icon-margin":"0px"})),U6=at(sf,{name:"JoyAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})(({ownerState:e})=>q({alignSelf:"center"},!e.hasPopupIcon&&{marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)"},{marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",visibility:e.focused?"visible":"hidden"})),H6=at(sf,{name:"JoyAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>t.popupIndicator})({alignSelf:"center",marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)",[`&.${dl.popupIndicatorOpen}`]:{transform:"rotate(180deg)","--Icon-color":"currentColor"}}),W6=at(DE,{name:"JoyAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`})),G6=at(RE,{name:"JoyAutocomplete",slot:"Option",overridesResolver:(e,t)=>t.option})({}),q6=at(rf,{name:"JoyAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),Z6=at(rf,{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),K6=at("div",{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})({marginInlineStart:"calc(var(--Input-paddingInline) / 2)",marginBlockStart:"var(--_Input-paddingBlock)"}),X6=R.forwardRef(function(t,r){var Xt;const o=Or({props:t,name:"JoyAutocomplete"}),{"aria-describedby":l,"aria-label":d,"aria-labelledby":f,autoFocus:c,clearIcon:b=IC||(IC=re.jsx(SE,{fontSize:"md"})),clearText:w="Clear",closeText:k="Close",disableClearable:z=!1,disabled:P,endDecorator:V,error:U=!1,forcePopupIcon:H="auto",freeSolo:X=!1,getLimitTagsText:B=L6,getOptionLabel:L=R6,groupBy:G,id:te,limitTags:ne=-1,loading:he=!1,loadingText:Z="Loading…",multiple:ue=!1,name:Ce,noOptionsText:ye="No options",openText:Ee="Open",placeholder:Se,popupIcon:ze=TC||(TC=re.jsx(kF,{})),readOnly:We=!1,renderGroup:Fe=$6,renderOption:Me,renderTags:Oe,required:ke,type:Ge,startDecorator:Ke,size:ht="md",color:vt="neutral",variant:gt="outlined",component:Ct,slots:At={},slotProps:Zt={}}=o,kt=Ut(o,z6),$e=R.useContext(lv),rt=t.error??($e==null?void 0:$e.error)??U,pt=t.size??($e==null?void 0:$e.size)??ht,Dt=t.color??(rt?"danger":($e==null?void 0:$e.color)??vt),Mt=P??($e==null?void 0:$e.disabled)??!1,{getRootProps:gr,getInputProps:Cr,getPopupIndicatorProps:lr,getClearProps:yt,getTagProps:Dr,getListboxProps:er,getOptionProps:Fr,value:Ae,dirty:cr,popupOpen:ir,focused:Ft,focusedTag:qt,anchorEl:kr,setAnchorEl:Pr,inputValue:sr,groupedOptions:nr}=qO(q({},o,{id:te??($e==null?void 0:$e.htmlFor),componentName:"Autocomplete",unstable_classNamePrefix:"Mui",unstable_isActiveElementInListbox:D6})),{onMouseDown:rr}=Cr(),{onClick:Rr}=gr(),it=!z&&!Mt&&cr&&!We,Le=(!X||H===!0)&&H!==!1,Wt=q({instanceColor:t.color},o,{value:Ae,disabled:Mt,focused:Ft,getOptionLabel:L,hasOptions:!!nr.length,hasClearIcon:it,hasPopupIcon:Le,inputFocused:qt===-1,popupOpen:ir,size:pt,color:Dt,variant:gt}),Rt=B6(Wt),_r=q({},kt,{component:Ct,slots:At,slotProps:Zt});let xr;if(ue&&Ae.length>0){const Tt=qr=>{const dr=Dr(qr),{onDelete:Mn}=dr,ao=Ut(dr,M6);return q({disabled:Mt,size:pt,onClick:Mn},ao)};Oe?xr=Oe(Ae,Tt,Wt):xr=Ae.map((qr,dr)=>re.jsx(e6,{size:pt,variant:"soft",color:"neutral",endDecorator:re.jsx(l6,q({},Tt({index:dr}))),sx:{minWidth:0},children:L(qr)},dr))}const Qe=Kr(r,Pr),Kt={[dl.disabled]:Mt,[dl.error]:rt,[dl.focused]:Ft,[dl.formControl]:!!$e},[$t,ar]=zt("root",{ref:Qe,className:[Rt.root,Kt],elementType:O6,externalForwardedProps:_r,ownerState:Wt,getSlotProps:gr,additionalProps:{onClick:Tt=>{Rr&&Rr(Tt),Tt.currentTarget===Tt.target&&rr&&rr(Tt)}}}),[Gr,Jt]=zt("wrapper",{className:Rt.wrapper,elementType:F6,externalForwardedProps:_r,ownerState:Wt}),gn={[dl.disabled]:Mt},[de,A]=zt("input",{className:[Rt.input,gn],elementType:N6,getSlotProps:Tt=>{const qr=Cr(),{onBlur:dr,onFocus:Mn,onMouseDown:ao}=qr,Ir=Ut(qr,A6);return q({},Ir,{onBlur:so=>{var Hi;dr==null||dr(so),(Hi=Tt.onBlur)==null||Hi.call(Tt,so)},onFocus:so=>{var Hi;Mn==null||Mn(so),(Hi=Tt.onFocus)==null||Hi.call(Tt,so)},onMouseDown:so=>{var Hi;ao==null||ao(so),(Hi=Tt.onMouseDown)==null||Hi.call(Tt,so)}})},externalForwardedProps:_r,ownerState:Wt,additionalProps:{autoFocus:c,placeholder:Se,name:Ce,readOnly:We,disabled:Mt,required:ke??($e==null?void 0:$e.required),type:Ge,"aria-invalid":rt||void 0,"aria-label":d,"aria-labelledby":f,"aria-describedby":l??($e==null?void 0:$e["aria-describedby"])}}),[$,W]=zt("startDecorator",{className:Rt.startDecorator,elementType:j6,externalForwardedProps:_r,ownerState:Wt}),[Q,ie]=zt("endDecorator",{className:Rt.endDecorator,elementType:V6,externalForwardedProps:_r,ownerState:Wt}),[xe,fe]=zt("clearIndicator",{className:Rt.clearIndicator,elementType:U6,getSlotProps:yt,externalForwardedProps:_r,ownerState:Wt,getSlotOwnerState:Tt=>({size:Tt.size||pt,variant:Tt.variant||nc(gt,Dt).variant||"plain",color:Tt.color||nc(gt,Dt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{"aria-label":w,title:w}}),[oe,_e]=zt("popupIndicator",{className:Rt.popupIndicator,elementType:H6,getSlotProps:lr,externalForwardedProps:_r,ownerState:Wt,getSlotOwnerState:Tt=>({size:Tt.size||pt,variant:Tt.variant||nc(gt,Dt).variant||"plain",color:Tt.color||nc(gt,Dt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{disabled:Mt,"aria-label":ir?k:Ee,title:ir?k:Ee,type:"button"}}),[De,Ue]=zt("listbox",{className:Rt.listbox,elementType:W6,getSlotProps:er,externalForwardedProps:_r,ownerState:Wt,getSlotOwnerState:Tt=>({size:Tt.size||pt,variant:Tt.variant||gt,color:Tt.color||Dt,disableColorInversion:!Tt.disablePortal}),additionalProps:{anchorEl:kr,open:ir,style:kr?{width:kr.clientWidth}:{}}}),[qe,Ye]=zt("loading",{className:Rt.loading,elementType:q6,externalForwardedProps:_r,ownerState:Wt}),[St,st]=zt("noOptions",{className:Rt.noOptions,elementType:Z6,externalForwardedProps:_r,ownerState:Wt,additionalProps:{role:"presentation",onMouseDown:Tt=>{Tt.preventDefault()}}}),[Lt,Re]=zt("limitTag",{className:Rt.limitTag,elementType:K6,externalForwardedProps:_r,ownerState:Wt});if(ne>-1&&Array.isArray(xr)){const Tt=xr.length-ne;!Ft&&Tt>0&&(xr=xr.splice(0,ne),xr.push(re.jsx(Lt,q({},Re,{children:B(Tt)}),xr.length)))}const[Ne,nt]=zt("option",{className:Rt.option,elementType:G6,externalForwardedProps:_r,ownerState:Wt,getSlotOwnerState:Tt=>({variant:Tt.variant||nc(gt,Dt).variant||"plain",color:Tt.color||nc(gt,Dt).color||"neutral",disableColorInversion:!Ue.disablePortal}),additionalProps:{as:"li"}}),_t=Me||((Tt,qr)=>re.jsx(Ne,q({},Tt,{children:L(qr)}))),ur=(Tt,qr)=>{const dr=Fr({option:Tt,index:qr});return _t(q({},nt,dr),Tt,{selected:!!dr["aria-selected"],inputValue:sr,ownerState:Wt})},tr=R.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...Ue.modifiers||[]],[Ue.modifiers]);let yr=null;return kr&&(yr=re.jsx(sv,{variant:gt,color:Dt,children:re.jsx(nf,{nested:!0,children:re.jsxs(De,q({},Ue,{className:mi(Ue.className),modifiers:tr},!((Xt=o.slots)!=null&&Xt.listbox)&&{as:ev,slots:{root:Ue.as||"ul"}},{children:[nr.map((Tt,qr)=>{if(G){const dr=Tt;return Fe({key:String(dr.key),group:dr.group,children:dr.options.map((Mn,ao)=>ur(Mn,dr.index+ao))})}return ur(Tt,qr)}),he&&nr.length===0?re.jsx(qe,q({},Ye,{children:Z})):null,nr.length===0&&!X&&!he?re.jsx(St,q({},st,{children:ye})):null]}))})})),re.jsxs(R.Fragment,{children:[re.jsxs($t,q({},ar,{children:[Ke&&re.jsx($,q({},W,{children:Ke})),re.jsxs(Gr,q({},Jt,{children:[xr,re.jsx(de,q({},A))]})),V&&re.jsx(Q,q({},ie,{children:V})),it?re.jsx(xe,q({},fe,{children:b})):null,Le?re.jsx(oe,q({},_e,{children:ze})):null]})),yr]})}),Cx=X6;function J6(e){return Br("MuiTypography",e)}Ar("MuiTypography",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","noWrap","gutterBottom","startDecorator","endDecorator","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const Y6=["color","textColor"],Q6=["component","gutterBottom","noWrap","level","levelMapping","children","endDecorator","startDecorator","variant","slots","slotProps"],kx=R.createContext(!1),eN=R.createContext(!1),tN=e=>{const{gutterBottom:t,noWrap:r,level:o,color:l,variant:d}=e,f={root:["root",o,t&&"gutterBottom",r&&"noWrap",l&&`color${It(l)}`,d&&`variant${It(d)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Lr(f,J6,{})},rN=at("span",{name:"JoyTypography",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),nN=at("span",{name:"JoyTypography",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),iN=at("span",{name:"JoyTypography",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var o,l,d,f;const r=t.level!=="inherit"?(o=e.typography[t.level])==null?void 0:o.lineHeight:"1";return q({"--Icon-fontSize":`calc(1em * ${r})`},t.color&&{"--Icon-color":"currentColor"},{margin:"var(--Typography-margin, 0px)"},t.nesting?{display:"inline"}:q({display:"block"},t.unstable_hasSkeleton&&{position:"relative"}),(t.startDecorator||t.endDecorator)&&q({display:"flex",alignItems:"center"},t.nesting&&q({display:"inline-flex"},t.startDecorator&&{verticalAlign:"bottom"})),t.level&&t.level!=="inherit"&&e.typography[t.level],{fontSize:`var(--Typography-fontSize, ${t.level&&t.level!=="inherit"?((l=e.typography[t.level])==null?void 0:l.fontSize)??"inherit":"inherit"})`},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.color&&{color:`var(--variant-plainColor, rgba(${(d=e.vars.palette[t.color])==null?void 0:d.mainChannel} / 1))`},t.variant&&q({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"},(f=e.variants[t.variant])==null?void 0:f[t.color]))}),PC={h1:"h1",h2:"h2",h3:"h3",h4:"h4","title-lg":"p","title-md":"p","title-sm":"p","body-lg":"p","body-md":"p","body-sm":"p","body-xs":"span",inherit:"p"},bc=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyTypography"}),{color:l,textColor:d}=o,f=Ut(o,Y6),c=R.useContext(kx),b=R.useContext(eN),w=$I(q({},f,{color:d})),{component:k,gutterBottom:z=!1,noWrap:P=!1,level:V="body-md",levelMapping:U=PC,children:H,endDecorator:X,startDecorator:B,variant:L,slots:G={},slotProps:te={}}=w,ne=Ut(w,Q6),he=t.color??(L?l??"neutral":l),Z=c||b?t.level||"inherit":V,ue=d1(H,["Skeleton"]),Ce=k||(c?"span":U[Z]||PC[Z]||"span"),ye=q({},w,{level:Z,component:Ce,color:he,gutterBottom:z,noWrap:P,nesting:c,variant:L,unstable_hasSkeleton:ue}),Ee=tN(ye),Se=q({},ne,{component:Ce,slots:G,slotProps:te}),[ze,We]=zt("root",{ref:r,className:Ee.root,elementType:iN,externalForwardedProps:Se,ownerState:ye}),[Fe,Me]=zt("startDecorator",{className:Ee.startDecorator,elementType:rN,externalForwardedProps:Se,ownerState:ye}),[Oe,ke]=zt("endDecorator",{className:Ee.endDecorator,elementType:nN,externalForwardedProps:Se,ownerState:ye});return re.jsx(kx.Provider,{value:!0,children:re.jsxs(ze,q({},We,{children:[B&&re.jsx(Fe,q({},Me,{children:B})),ue?R.cloneElement(H,{variant:H.props.variant||"inline"}):H,X&&re.jsx(Oe,q({},ke,{children:X}))]}))})});bc.muiName="Typography";function oN(e){return Br("MuiButton",e)}const aN=Ar("MuiButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]),EC=aN,sN=["children","action","color","variant","size","fullWidth","startDecorator","endDecorator","loading","loadingPosition","loadingIndicator","disabled","component","slots","slotProps"],lN=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:l,fullWidth:d,size:f,variant:c,loading:b}=e,w={root:["root",r&&"disabled",o&&"focusVisible",d&&"fullWidth",c&&`variant${It(c)}`,t&&`color${It(t)}`,f&&`size${It(f)}`,b&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]},k=Lr(w,oN,{});return o&&l&&(k.root+=` ${l}`),k},cN=at("span",{name:"JoyButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),uN=at("span",{name:"JoyButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),dN=at("span",{name:"JoyButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,o,l,d;return q({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(o=(r=e.variants[t.variant])==null?void 0:r[t.color])==null?void 0:o.color},t.disabled&&{color:(d=(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color])==null?void 0:d.color})}),LE=({theme:e,ownerState:t})=>{var r,o,l,d;return[q({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.size==="sm"&&{"--Icon-fontSize":e.vars.fontSize.lg,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.375rem",minHeight:"var(--Button-minHeight, 2rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.25rem)",paddingInline:"0.75rem"},t.size==="md"&&{"--Icon-fontSize":e.vars.fontSize.xl,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.5rem",minHeight:"var(--Button-minHeight, 2.25rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.375rem)",paddingInline:"1rem"},t.size==="lg"&&{"--Icon-fontSize":e.vars.fontSize.xl2,"--CircularProgress-size":"28px","--CircularProgress-thickness":"4px","--Button-gap":"0.75rem",minHeight:"var(--Button-minHeight, 2.75rem)",fontSize:e.vars.fontSize.md,paddingBlock:"var(--Button-paddingBlock, 0.5rem)",paddingInline:"1.5rem"},{WebkitTapHighlightColor:"transparent",boxSizing:"border-box",borderRadius:`var(--Button-radius, ${e.vars.radius.sm})`,margin:"var(--Button-margin)",border:"none",backgroundColor:"transparent",cursor:"pointer",userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",textDecoration:"none",fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.lg,lineHeight:e.vars.lineHeight.md},t.fullWidth&&{width:"100%"},{[e.focus.selector]:e.focus.default}),q({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]},'&:active, &[aria-pressed="true"]':(l=e.variants[`${t.variant}Active`])==null?void 0:l[t.color],[`&.${EC.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]},t.loadingPosition==="center"&&{[`&.${EC.loading}`]:{color:"transparent"}})]},hN=at("button",{name:"JoyButton",slot:"Root",overridesResolver:(e,t)=>t.root})(LE),$E=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyButton"}),{children:l,action:d,color:f="primary",variant:c="solid",size:b="md",fullWidth:w=!1,startDecorator:k,endDecorator:z,loading:P=!1,loadingPosition:V="center",loadingIndicator:U,disabled:H,component:X,slots:B={},slotProps:L={}}=o,G=Ut(o,sN),te=R.useContext(Sb),ne=R.useContext(kE),he=t.variant||te.variant||c,Z=t.size||te.size||b,ue=t.color||te.color||f,Ce=(t.loading||t.disabled)??(te.disabled||P||H),ye=R.useRef(null),Ee=Kr(ye,r),{focusVisible:Se,setFocusVisible:ze,getRootProps:We}=os(q({},o,{disabled:Ce,rootRef:Ee})),Fe=U??re.jsx(Cb,{color:ue,thickness:{sm:2,md:3,lg:4}[Z]||3});R.useImperativeHandle(d,()=>({focusVisible:()=>{var rt;ze(!0),(rt=ye.current)==null||rt.focus()}}),[ze]);const Me=q({},o,{color:ue,fullWidth:w,variant:he,size:Z,focusVisible:Se,loading:P,loadingPosition:V,disabled:Ce}),Oe=lN(Me),ke=rt=>{var Dt;let pt=o.onClick;typeof L.root=="function"?pt=L.root(Me).onClick:L.root&&(pt=L.root.onClick),pt==null||pt(rt),ne&&((Dt=ne.onClick)==null||Dt.call(ne,rt,o.value))};let Ge=o["aria-pressed"];typeof L.root=="function"?Ge=L.root(Me)["aria-pressed"]:L.root&&(Ge=L.root["aria-pressed"]),ne!=null&&ne.value&&(Array.isArray(ne.value)?Ge=ne.value.indexOf(o.value)!==-1:Ge=ne.value===o.value);const Ke=q({},G,{component:X,slots:B,slotProps:L}),[ht,vt]=zt("root",{ref:r,className:Oe.root,elementType:hN,externalForwardedProps:Ke,getSlotProps:We,ownerState:Me,additionalProps:{onClick:ke,"aria-pressed":Ge}}),[gt,Ct]=zt("startDecorator",{className:Oe.startDecorator,elementType:cN,externalForwardedProps:Ke,ownerState:Me}),[At,Zt]=zt("endDecorator",{className:Oe.endDecorator,elementType:uN,externalForwardedProps:Ke,ownerState:Me}),[kt,$e]=zt("loadingIndicatorCenter",{className:Oe.loadingIndicatorCenter,elementType:dN,externalForwardedProps:Ke,ownerState:Me});return re.jsxs(ht,q({},vt,{children:[(k||P&&V==="start")&&re.jsx(gt,q({},Ct,{children:P&&V==="start"?Fe:k})),l,P&&V==="center"&&re.jsx(kt,q({},$e,{children:Fe})),(z||P&&V==="end")&&re.jsx(At,q({},Zt,{children:P&&V==="end"?Fe:z}))]}))});$E.muiName="Button";const pN=$E;function fN(e){return Br("MuiCard",e)}Ar("MuiCard",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]);const mN=["className","color","component","invertedColors","size","variant","children","orientation","slots","slotProps"],gN=e=>{const{size:t,variant:r,color:o,orientation:l}=e,d={root:["root",l,r&&`variant${It(r)}`,o&&`color${It(o)}`,t&&`size${It(t)}`]};return Lr(d,fN,{})},yN=at("div")(({theme:e,ownerState:t})=>{var d;const{p:r,padding:o,borderRadius:l}=gd({theme:e,ownerState:t},["p","padding","borderRadius"]);return[q({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--Card-childRadius":"max((var(--Card-radius) - var(--variant-borderWidth, 0px)) - var(--Card-padding), min(var(--Card-padding) / 2, (var(--Card-radius) - var(--variant-borderWidth, 0px)) / 2))","--AspectRatio-radius":"var(--Card-childRadius)","--unstable_actionMargin":"calc(-1 * var(--variant-borderWidth, 0px))","--unstable_actionRadius":"var(--Card-radius)","--CardCover-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--CardOverflow-offset":"calc(-1 * var(--Card-padding))","--CardOverflow-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--Divider-inset":"calc(-1 * var(--Card-padding))"},t.size==="sm"&&{"--Card-radius":e.vars.radius.sm,"--Card-padding":"0.625rem",gap:"0.5rem"},t.size==="md"&&{"--Card-radius":e.vars.radius.md,"--Card-padding":"1rem",gap:"0.75rem 1rem"},t.size==="lg"&&{"--Card-radius":e.vars.radius.lg,"--Card-padding":"1.5rem",gap:"1rem 1.5rem"},{padding:"var(--Card-padding)",borderRadius:"var(--Card-radius)",backgroundColor:e.vars.palette.background.surface,position:"relative",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},e.typography[`body-${t.size}`],t.variant==="solid"&&t.color&&t.invertedColors&&ov(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&av(t.color)(e),(d=e.variants[t.variant])==null?void 0:d[t.color]),r!==void 0&&{"--Card-padding":r},o!==void 0&&{"--Card-padding":o},l!==void 0&&{"--Card-radius":l}]}),vN=at(yN,{name:"JoyCard",slot:"Root",overridesResolver:(e,t)=>t.root})({}),_N=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyCard"}),{className:l,color:d="neutral",component:f="div",invertedColors:c=!1,size:b="md",variant:w="outlined",children:k,orientation:z="vertical",slots:P={},slotProps:V={}}=o,U=Ut(o,mN),H=q({},o,{color:d,component:f,orientation:z,size:b,variant:w,invertedColors:c}),X=gN(H),B=q({},U,{component:f,slots:P,slotProps:V}),[L,G]=zt("root",{ref:r,className:mi(X.root,l),elementType:vN,externalForwardedProps:B,ownerState:H});return re.jsx(L,q({},G,{children:R.Children.map(k,(te,ne)=>{if(!R.isValidElement(te))return te;const he={};if(d1(te,["Divider"])){he.inset="inset"in te.props?te.props.inset:"context";const Z=z==="vertical"?"horizontal":"vertical";he.orientation="orientation"in te.props?te.props.orientation:Z}return ne===0&&(he["data-first-child"]=""),ne===R.Children.count(k)-1&&(he["data-last-child"]=""),R.cloneElement(te,he)})}))}),xN=_N,BE=Ar("MuiCardOverflow",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);function bN(e){return Br("MuiDivider",e)}Ar("MuiDivider",["root","horizontal","vertical","insetContext","insetNone"]);const OE=at("div")(({ownerState:e})=>({display:"flex",flexDirection:e.orientation==="horizontal"?"row":"column",flex:9999,zIndex:1,columnGap:"var(--Card-padding)",rowGap:"max(2px, calc(0.1875 * var(--Card-padding)))",padding:"var(--unstable_padding)",[`.${BE.root} > &`]:{"--unstable_padding":"calc(var(--Card-padding) * 0.75) 0px"}}));at(OE,{name:"JoyCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({});const wN=Ar("MuiModalDialog",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","layoutCenter","layoutFullscreen"]),SN=wN;function CN(e){return Br("MuiCheckbox",e)}const kN=Ar("MuiCheckbox",["root","checkbox","action","input","label","checked","disabled","focusVisible","indeterminate","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid"]),pc=kN,IN=yd(re.jsx("path",{d:"M9 16.17 5.53 12.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L9 16.17z"}),"Check"),TN=yd(re.jsx("path",{d:"M19 13H5c-.55 0-1-.45-1-1s.45-1 1-1h14c.55 0 1 .45 1 1s-.45 1-1 1z"}),"HorizontalRule"),PN=["checked","uncheckedIcon","checkedIcon","label","defaultChecked","disabled","disableIcon","overlay","id","indeterminate","indeterminateIcon","name","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","value","color","variant","size","component","slots","slotProps"],EN=e=>{const{checked:t,disabled:r,disableIcon:o,focusVisible:l,color:d,variant:f,size:c,indeterminate:b}=e,w={root:["root",t&&"checked",r&&"disabled",l&&"focusVisible",f&&`variant${It(f)}`,d&&`color${It(d)}`,c&&`size${It(c)}`],checkbox:["checkbox",t&&"checked",b&&"indeterminate",r&&"disabled"],action:["action",t&&"checked",o&&r&&"disabled",l&&"focusVisible"],input:["input"],label:["label"]};return Lr(w,CN,{})},zN=at("span",{name:"JoyCheckbox",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,l,d,f,c;return q({"--Icon-fontSize":"var(--Checkbox-size)"},e.size==="sm"&&{"--Checkbox-size":"1rem","& ~ *":{"--FormHelperText-margin":"0 0 0 1.5rem"},fontSize:t.vars.fontSize.sm,gap:"var(--Checkbox-gap, 0.5rem)"},e.size==="md"&&{"--Checkbox-size":"1.25rem","& ~ *":{"--FormHelperText-margin":"0.25rem 0 0 1.875rem"},fontSize:t.vars.fontSize.md,gap:"var(--Checkbox-gap, 0.625rem)"},e.size==="lg"&&{"--Checkbox-size":"1.5rem","& ~ *":{"--FormHelperText-margin":"0.375rem 0 0 2.25rem"},fontSize:t.vars.fontSize.lg,gap:"var(--Checkbox-gap, 0.75rem)"},{position:e.overlay?"initial":"relative",display:"inline-flex",fontFamily:t.vars.fontFamily.body,lineHeight:"var(--Checkbox-size)",color:t.vars.palette.text.primary,[`&.${pc.disabled}`]:{color:(o=(r=t.variants.plainDisabled)==null?void 0:r[e.color])==null?void 0:o.color}},e.disableIcon&&{color:(d=(l=t.variants[e.variant])==null?void 0:l[e.color])==null?void 0:d.color,[`&.${pc.disabled}`]:{color:(c=(f=t.variants[`${e.variant}Disabled`])==null?void 0:f[e.color])==null?void 0:c.color}})}),MN=at("span",{name:"JoyCheckbox",slot:"Checkbox",overridesResolver:(e,t)=>t.checkbox})(({theme:e,ownerState:t})=>{var o,l,d,f;const r=(o=e.variants[`${t.variant}`])==null?void 0:o[t.color];return[q({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,boxSizing:"border-box",borderRadius:`min(${e.vars.radius.sm}, 0.25rem)`,width:"var(--Checkbox-size)",height:"var(--Checkbox-size)",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0},t.disableIcon&&{display:"contents"},{[`&.${pc.checked}, &.${pc.indeterminate}`]:{"--Icon-color":"currentColor"}}),...t.disableIcon?[]:[q({},r,{backgroundColor:(r==null?void 0:r.backgroundColor)??e.vars.palette.background.surface}),{"&:hover":{"@media (hover: hover)":(l=e.variants[`${t.variant}Hover`])==null?void 0:l[t.color]}},{"&:active":(d=e.variants[`${t.variant}Active`])==null?void 0:d[t.color]},{[`&.${pc.disabled}`]:(f=e.variants[`${t.variant}Disabled`])==null?void 0:f[t.color]}]]}),AN=at("span",{name:"JoyCheckbox",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,o,l,d;return[{borderRadius:`var(--Checkbox-actionRadius, ${t.overlay?"var(--unstable_actionRadius, inherit)":"inherit"})`,textAlign:"left",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",zIndex:1,[e.focus.selector]:e.focus.default},...t.disableIcon?[(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]},{"&:active":(l=e.variants[`${t.variant}Active`])==null?void 0:l[t.color]},{[`&.${pc.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]:[]]}),DN=at("input",{name:"JoyCheckbox",slot:"Input",overridesResolver:(e,t)=>t.input})(()=>({margin:0,opacity:0,position:"absolute",width:"100%",height:"100%",cursor:"pointer"})),RN=at("label",{name:"JoyCheckbox",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>q({flex:1,minWidth:0},e.disableIcon&&{zIndex:1,pointerEvents:"none"})),LN=re.jsx(IN,{}),$N=re.jsx(TN,{}),BN=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyCheckbox"}),{checked:l,uncheckedIcon:d,checkedIcon:f=LN,label:c,defaultChecked:b,disabled:w,disableIcon:k=!1,overlay:z,id:P,indeterminate:V=!1,indeterminateIcon:U=$N,name:H,onBlur:X,onChange:B,onFocus:L,onFocusVisible:G,readOnly:te,required:ne,value:he,color:Z,variant:ue,size:Ce="md",component:ye,slots:Ee={},slotProps:Se={}}=o,ze=Ut(o,PN),We=R.useContext(lv),Fe=t.disabled??(We==null?void 0:We.disabled)??w,Me=t.size??(We==null?void 0:We.size)??Ce,Oe=Co(P??(We==null?void 0:We.htmlFor)),ke={checked:l,defaultChecked:b,disabled:Fe,onBlur:X,onChange:B,onFocus:L,onFocusVisible:G},{getInputProps:Ge,checked:Ke,disabled:ht,focusVisible:vt}=LO(ke),gt=Ke||V,Zt=gt?ue||"solid":ue||"outlined",kt=t.color||(We!=null&&We.error?"danger":(We==null?void 0:We.color)??Z),pt=q({},o,{checked:Ke,disabled:ht,disableIcon:k,overlay:z,focusVisible:vt,color:gt?kt||"primary":kt||"neutral",variant:Zt,size:Me}),Dt=EN(pt),Mt=q({},ze,{component:ye,slots:Ee,slotProps:Se}),[gr,Cr]=zt("root",{ref:r,className:Dt.root,elementType:zN,externalForwardedProps:Mt,ownerState:pt}),[lr,yt]=zt("checkbox",{className:Dt.checkbox,elementType:MN,externalForwardedProps:Mt,ownerState:pt}),[Dr,er]=zt("action",{className:Dt.action,elementType:AN,externalForwardedProps:Mt,ownerState:pt}),[Fr,Ae]=zt("input",{additionalProps:q({id:Oe,name:H,value:he,readOnly:te,role:void 0,required:ne??(We==null?void 0:We.required),"aria-describedby":We==null?void 0:We["aria-describedby"]},V&&{"aria-checked":"mixed"}),className:Dt.input,elementType:DN,externalForwardedProps:Mt,getSlotProps:Ge,ownerState:pt}),[cr,ir]=zt("label",{additionalProps:{htmlFor:Oe},className:Dt.label,elementType:RN,externalForwardedProps:Mt,ownerState:pt});let Ft=d;return k?Ft=null:V?Ft=U:Ke&&(Ft=f),re.jsxs(gr,q({},Cr,{children:[re.jsxs(lr,q({},yt,{children:[re.jsx(Dr,q({},er,{children:re.jsx(Fr,q({},Ae))})),Ft]})),c&&re.jsx(kx.Provider,{value:!0,children:re.jsx(cr,q({},ir,{children:c}))})]}))}),ad=BN;function ON(e){const{children:t,disableColorScheme:r=!1}=e;return re.jsxs(R.Fragment,{children:[re.jsx(e3,{styles:o=>{var f,c,b;const l={};r||Object.entries(o.colorSchemes).forEach(([w,k])=>{var z;l[o.getColorSchemeSelector(w).replace(/\s*&/,"")]={colorScheme:(z=k.palette)==null?void 0:z.mode}});const d=((b=(c=(f=o.components)==null?void 0:f.JoyTypography)==null?void 0:c.defaultProps)==null?void 0:b.level)??"body-md";return q({html:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:o.vars.fontWeight.lg},body:q({margin:0,color:o.vars.palette.text.primary,fontFamily:o.vars.fontFamily.body},o.typography[d],{backgroundColor:o.vars.palette.background.body,"@media print":{backgroundColor:o.vars.palette.common.white},"&::backdrop":{backgroundColor:o.vars.palette.background.backdrop}})},l)},defaultTheme:Zp}),t]})}function FN(e){return Br("MuiDialogContent",e)}Ar("MuiDialogContent",["root"]);const NN=R.createContext(void 0),cv=NN;function jN(e){return Br("MuiDialogTitle",e)}const VN=Ar("MuiDialogTitle",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),FE=VN,UN=["component","children","orientation","slots","slotProps"],HN=()=>Lr({root:["root"]},FN,{}),WN=at(OE,{name:"JoyDialogContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({color:`var(--DialogContent-color, ${e.vars.palette.text.tertiary})`,overflow:"auto",margin:"var(--unstable_DialogContent-margin)",[`.${SN.root} > .${FE.root} + &`]:{"--unstable_DialogContent-margin":"-0.375em 0 0 0"}})),GN=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyDialogContent"}),l=R.useContext(cv),{component:d="div",children:f,orientation:c="vertical",slots:b={},slotProps:w={}}=o,k=Ut(o,UN),z=q({},k,{component:d,slots:b,slotProps:w}),P=q({},o,{component:d,orientation:c}),V=HN(),[U,H]=zt("root",{ref:r,className:V.root,elementType:WN,externalForwardedProps:z,ownerState:P,additionalProps:{id:l==null?void 0:l.describedBy}});return re.jsx(U,q({},H,{children:f}))}),NE=GN,qN=R.createContext(void 0),Ib=qN,ZN=["component","children","variant","color","level","slots","slotProps"],KN=e=>{const{level:t,color:r,variant:o}=e,l={root:["root",t,r&&`color${It(r)}`,o&&`variant${It(o)}`]};return Lr(l,jN,{})},XN=at("h2",{name:"JoyDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var o,l;const r=t.level!=="inherit"?(o=e.typography[t.level])==null?void 0:o.lineHeight:"1";return q({"--Icon-fontSize":`calc(1em * ${r})`},t.color&&{"--Icon-color":"currentColor"},{display:"flex",gap:"clamp(4px, 0.375em, 0.75rem)",margin:"var(--unstable_DialogTitle-margin, 0px)"},t.level&&t.level!=="inherit"&&e.typography[t.level],{color:"inherit"},t.variant&&q({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},(l=e.variants[t.variant])==null?void 0:l[t.color]),{[`.${BE.root} > &`]:{"--unstable_DialogTitle-margin":"var(--Card-padding) 0"}})}),JN={sm:"title-md",md:"title-lg",lg:"h4"},YN=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyDialogTitle"}),l=R.useContext(Ib),d=R.useContext(cv),{component:f="h2",children:c,variant:b,color:w,level:k=JN[l||"md"],slots:z={},slotProps:P={}}=o,V=Ut(o,ZN),U=t.color||(b?w??"neutral":w),H=q({},V,{component:f,slots:z,slotProps:P}),X=q({},o,{component:f,color:U,variant:b,level:k}),B=KN(X),[L,G]=zt("root",{ref:r,className:B.root,elementType:XN,externalForwardedProps:H,ownerState:X,additionalProps:{id:d==null?void 0:d.labelledBy}});return re.jsx(L,q({},G,{children:c}))}),jE=YN,QN=["className","children","component","inset","orientation","role","slots","slotProps"],ej=e=>{const{orientation:t,inset:r}=e,o={root:["root",t,r&&`inset${It(r)}`]};return Lr(o,bN,{})},VE=at("hr",{name:"JoyDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>q({"--Divider-thickness":"1px","--Divider-lineColor":e.vars.palette.divider},t.inset==="none"&&{"--_Divider-inset":"0px"},t.inset==="context"&&{"--_Divider-inset":"var(--Divider-inset, 0px)"},{margin:"initial",marginInline:t.orientation==="vertical"?"initial":"var(--_Divider-inset)",marginBlock:t.orientation==="vertical"?"var(--_Divider-inset)":"initial",position:"relative",alignSelf:"stretch",flexShrink:0},t.children?q({"--Divider-gap":e.spacing(1),"--Divider-childPosition":"50%",display:"flex",flexDirection:t.orientation==="vertical"?"column":"row",alignItems:"center",whiteSpace:"nowrap",textAlign:"center",border:0},e.typography["body-sm"],{"&::before, &::after":{position:"relative",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)",backgroundColor:"var(--Divider-lineColor)",content:'""'},"&::before":{marginInlineEnd:t.orientation==="vertical"?"initial":"min(var(--Divider-childPosition) * 999, var(--Divider-gap))",marginBlockEnd:t.orientation==="vertical"?"min(var(--Divider-childPosition) * 999, var(--Divider-gap))":"initial",flexBasis:"var(--Divider-childPosition)"},"&::after":{marginInlineStart:t.orientation==="vertical"?"initial":"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))",marginBlockStart:t.orientation==="vertical"?"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))":"initial",flexBasis:"calc(100% - var(--Divider-childPosition))"}}):{border:"none",listStyle:"none",backgroundColor:"var(--Divider-lineColor)",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)"})),UE=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyDivider"}),{className:l,children:d,component:f=d!=null?"div":"hr",inset:c,orientation:b="horizontal",role:w=f!=="hr"?"separator":void 0,slots:k={},slotProps:z={}}=o,P=Ut(o,QN),V=q({},o,{inset:c,role:w,orientation:b,component:f}),U=ej(V),H=q({},P,{component:f,slots:k,slotProps:z}),[X,B]=zt("root",{ref:r,className:mi(U.root,l),elementType:VE,externalForwardedProps:H,ownerState:V,additionalProps:q({as:f,role:w},w==="separator"&&b==="vertical"&&{"aria-orientation":"vertical"})});return re.jsx(X,q({},B,{children:d}))});UE.muiName="Divider";const HE=UE,tj=R.createContext(void 0),WE=tj,GE=at("div")(({ownerState:e,theme:t})=>q({"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`,'& ~ [role="listbox"]':{"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`},position:"fixed",zIndex:t.vars.zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&{visibility:"hidden"}));at(GE,{name:"JoyModal",slot:"Root",overridesResolver:(e,t)=>t.root})({});const qE=at("div")(({theme:e})=>({zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:e.vars.palette.background.backdrop,WebkitTapHighlightColor:"transparent",backdropFilter:"blur(8px)"}));at(qE,{name:"JoyModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({});function rj(e){return Br("MuiDrawer",e)}Ar("MuiDrawer",["root","hidden","backdrop","content","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const nj=["children","anchor","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","color","variant","invertedColors","size","onClose","onKeyDown","open","component","slots","slotProps"],ij=e=>{const{open:t,variant:r,color:o,size:l}=e,d={root:["root",!t&&"hidden",r&&`variant${It(r)}`,o&&`color${It(o)}`,l&&`size${It(l)}`],backdrop:["backdrop"],content:["content"]};return Lr(d,rj,{})},oj=at(GE,{name:"JoyDrawer",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>q({"--Drawer-transitionDuration":"0.3s","--Drawer-transitionFunction":"ease","--ModalClose-radius":"max((var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) - var(--ModalClose-inset), min(var(--ModalClose-inset) / 2, (var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) / 2))"},e.size==="sm"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(350px, 30%, 100%)","--Drawer-horizontalSize":"clamp(256px, 20%, 100%)","--Drawer-titleMargin":"0.625rem 0.75rem calc(0.625rem / 2)"},e.size==="md"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(400px, 45%, 100%)","--Drawer-horizontalSize":"clamp(300px, 30%, 100%)","--Drawer-titleMargin":"0.75rem 0.75rem calc(0.75rem / 2)"},e.size==="lg"&&{"--ModalClose-inset":"0.75rem","--Drawer-verticalSize":"clamp(500px, 60%, 100%)","--Drawer-horizontalSize":"clamp(440px, 60%, 100%)","--Drawer-titleMargin":"1rem 1rem calc(1rem / 2)"},{transitionProperty:"visibility",transitionDelay:e.open?"0s":"var(--Drawer-transitionDuration)"},!e.open&&{visibility:"hidden"})),aj=at(qE,{name:"JoyDrawer",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})(({ownerState:e})=>({opacity:e.open?1:0,transition:"opacity var(--Drawer-transitionDuration) ease-in-out"})),sj=at("div",{name:"JoyDrawer",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>{var r;return q({},e.typography[`body-${t.size}`],{boxShadow:e.shadow.md,backgroundColor:e.vars.palette.background.surface,outline:0,display:"flex",flexDirection:"column",position:"fixed",boxSizing:"border-box",overflow:"auto"},t.anchor==="left"&&{top:0,left:0,transform:t.open?"translateX(0)":"translateX(-100%)"},t.anchor==="right"&&{top:0,right:0,transform:t.open?"translateX(0)":"translateX(100%)"},t.anchor==="top"&&{top:0,transform:t.open?"translateY(0)":"translateY(-100%)"},t.anchor==="bottom"&&{bottom:0,transform:t.open?"translateY(0)":"translateY(100%)"},{height:t.anchor.match(/(left|right)/)?"100%":"min(100vh, var(--Drawer-verticalSize))",width:t.anchor.match(/(top|bottom)/)?"100vw":"min(100vw, var(--Drawer-horizontalSize))",transition:"transform var(--Drawer-transitionDuration) var(--Drawer-transitionFunction)"},t.variant==="solid"&&t.color&&t.invertedColors&&ov(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&av(t.color)(e),(r=e.variants[t.variant])==null?void 0:r[t.color],{[`& > .${FE.root}`]:{"--unstable_DialogTitle-margin":"var(--Drawer-titleMargin)"}})}),lj=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyDrawer"}),{children:l,anchor:d="left",container:f,disableAutoFocus:c=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:w=!1,disablePortal:k=!1,disableRestoreFocus:z=!1,disableScrollLock:P=!1,hideBackdrop:V=!1,color:U="neutral",variant:H="plain",invertedColors:X=!1,size:B="md",onClose:L,open:G,component:te,slots:ne={},slotProps:he={}}=o,Z=Ut(o,nj),ue=q({},o,{anchor:d,disableAutoFocus:c,disableEnforceFocus:b,disableEscapeKeyDown:w,disablePortal:k,disableRestoreFocus:z,disableScrollLock:P,hideBackdrop:V,invertedColors:X,color:U,variant:H,size:B}),{getRootProps:Ce,getBackdropProps:ye,rootRef:Ee,portalRef:Se,isTopModal:ze}=p4(q({},ue,{rootRef:r,children:null})),We=ij(ue),Fe=q({},Z,{component:te,slots:ne,slotProps:he}),Me=Co(),Oe=Co(),ke=R.useMemo(()=>({variant:H,color:U,labelledBy:Me,describedBy:Oe}),[U,H,Me,Oe]),[Ge,Ke]=zt("root",{ref:Ee,className:We.root,elementType:oj,externalForwardedProps:Fe,getSlotProps:Ce,ownerState:ue}),[ht,vt]=zt("backdrop",{className:We.backdrop,elementType:aj,externalForwardedProps:Fe,getSlotProps:ye,ownerState:ue}),[gt,Ct]=zt("content",{className:We.content,elementType:sj,additionalProps:{tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":Me,"aria-describedby":Oe},externalForwardedProps:Fe,ownerState:ue});return re.jsx(WE.Provider,{value:L,children:re.jsx(Ib.Provider,{value:B,children:re.jsx(cv.Provider,{value:ke,children:re.jsx(iE,{ref:Se,container:f,disablePortal:k,children:re.jsxs(Ge,q({},Ke,{children:[V?null:re.jsx(ht,q({},vt)),re.jsx(b3,{disableEnforceFocus:b,disableAutoFocus:c,disableRestoreFocus:z,isEnabled:ze,open:G,children:re.jsx(gt,q({},Ct,{children:l}))})]}))})})})})}),ZE=lj;function cj(e){return Br("MuiListDivider",e)}Ar("MuiListDivider",["root","insetGutter","insetStartDecorator","insetStartContent","horizontal","vertical"]);const uj=["component","role","className","children","inset","orientation","slots","slotProps"],dj=e=>{const{orientation:t,inset:r}=e,o={root:["root",t,r&&r!=="context"&&`inset${It(r)}`]};return Lr(o,cj,{})},hj=at(VE,{name:"JoyListDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>q({},e.inset==="context"&&{"--Divider-inset":"calc(-1 * var(--List-padding))"},e.row&&q({marginInline:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginBlock:"var(--ListItem-paddingY)"},e["data-first-child"]===void 0&&{marginInlineStart:"calc(var(--List-gap) + var(--ListDivider-gap))"}),!e.row&&q({},e["data-first-child"]===void 0&&{marginBlockStart:"calc(var(--List-gap) + var(--ListDivider-gap))"},{marginBlockEnd:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginInlineStart:"var(--ListItem-paddingLeft)",marginInlineEnd:"var(--ListItem-paddingRight)"},e.inset==="startDecorator"&&{marginInlineStart:"var(--ListItem-paddingLeft)"},e.inset==="startContent"&&{marginInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItemDecorator-size))"}))),pj=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyListDivider"}),l=R.useContext(md),d=R.useContext(_b),{component:f,role:c,className:b,children:w,inset:k="context",orientation:z,slots:P={},slotProps:V={}}=o,U=Ut(o,uj),[H]=(d==null?void 0:d.split(":"))||["",""],X=f||(H&&!H.match(/^(ul|ol|menu)$/)?"div":"li"),B=c||(X==="li"?"separator":void 0),L=z||(l?"vertical":"horizontal"),G=q({},o,{inset:k,row:l,orientation:L,component:X,role:B}),te=dj(G),ne=q({},U,{component:X,slots:P,slotProps:V}),[he,Z]=zt("root",{ref:r,className:mi(te.root,b),elementType:hj,externalForwardedProps:ne,ownerState:G,additionalProps:q({as:X,role:B},B==="separator"&&L==="vertical"&&{"aria-orientation":"vertical"})});return re.jsx(he,q({},Z,{children:w}))}),KE=pj;function fj(e){return Br("MuiListItemDecorator",e)}Ar("MuiListItemDecorator",["root"]);const mj=["component","className","children","slots","slotProps"],gj=()=>Lr({root:["root"]},fj,{}),yj=at("span",{name:"JoyListItemDecorator",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>q({boxSizing:"border-box",display:"inline-flex",alignItems:`var(--unstable_ListItemDecorator-alignItems, ${e.parentOrientation==="horizontal"?"center":"initial"})`},e.parentOrientation==="horizontal"?{minInlineSize:"var(--ListItemDecorator-size)",marginInlineEnd:"calc(-1 * var(--ListItem-gap))"}:{minBlockSize:"var(--ListItemDecorator-size)",justifyContent:"center",marginBlockEnd:"calc(-1 * var(--ListItem-gap))"})),vj=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyListItemDecorator"}),{component:l,className:d,children:f,slots:c={},slotProps:b={}}=o,w=Ut(o,mj),k=R.useContext(xb),z=q({parentOrientation:k},o),P=gj(),V=q({},w,{component:l,slots:c,slotProps:b}),[U,H]=zt("root",{ref:r,className:mi(P.root,d),elementType:yj,externalForwardedProps:V,ownerState:z});return re.jsx(U,q({},H,{children:f}))}),l_=vj;function _j(e){return Br("MuiMenu",e)}Ar("MuiMenu",["root","listbox","expanded","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const xj=["actions","children","color","component","disablePortal","keepMounted","id","invertedColors","onItemsChange","modifiers","variant","size","slots","slotProps"],bj=e=>{const{open:t,variant:r,color:o,size:l}=e,d={root:["root",t&&"expanded",r&&`variant${It(r)}`,o&&`color${It(o)}`,l&&`size${It(l)}`],listbox:["listbox"]};return Lr(d,_j,{})},zC=at(of,{name:"JoyMenu",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var o,l;const r=(o=e.variants[t.variant])==null?void 0:o[t.color];return[q({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(r==null?void 0:r.backgroundColor)||(r==null?void 0:r.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},nv,{borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,boxShadow:e.shadow.md,overflow:"auto",zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(r!=null&&r.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},t.variant==="solid"&&t.color&&t.invertedColors&&ov(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&av(t.color)(e),(l=e.variants[t.variant])==null?void 0:l[t.color])]}),wj=R.forwardRef(function(t,r){var ze;const o=Or({props:t,name:"JoyMenu"}),{actions:l,children:d,color:f="neutral",component:c,disablePortal:b=!1,keepMounted:w=!1,id:k,invertedColors:z=!1,onItemsChange:P,modifiers:V,variant:U="outlined",size:H="md",slots:X={},slotProps:B={}}=o,L=Ut(o,xj),{contextValue:G,getListboxProps:te,dispatch:ne,open:he,triggerElement:Z}=W3({onItemsChange:P,id:k,listboxRef:r});R.useImperativeHandle(l,()=>({dispatch:ne,resetHighlight:()=>ne({type:rn.resetHighlight,event:null})}),[ne]);const ue=q({},o,{disablePortal:b,invertedColors:z,color:f,variant:U,size:H,open:he,nesting:!1,row:!1}),Ce=bj(ue),ye=q({},L,{component:c,slots:X,slotProps:B}),Ee=R.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...V||[]],[V]),Se=QI({elementType:zC,getSlotProps:te,externalForwardedProps:ye,externalSlotProps:{},ownerState:ue,additionalProps:{anchorEl:Z,open:he&&Z!==null,disablePortal:b,keepMounted:w,modifiers:Ee},className:Ce.root});return re.jsx(zC,q({},Se,!((ze=o.slots)!=null&&ze.root)&&{as:ev,slots:{root:c||"ul"}},{children:re.jsx(G3,{value:G,children:re.jsx(sv,{variant:z?void 0:U,color:f,children:re.jsx(rv.Provider,{value:"menu",children:re.jsx(nf,{nested:!0,children:d})})})})}))}),Sj=wj;function Cj(e){return Br("MuiMenuButton",e)}Ar("MuiMenuButton",["root","colorPrimary","colorNeutral","colorDanger","colorInfo","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]);const kj=["children","color","component","disabled","endDecorator","loading","loadingPosition","loadingIndicator","size","slotProps","slots","startDecorator","variant"],Ij=e=>{const{color:t,disabled:r,fullWidth:o,size:l,variant:d,loading:f}=e,c={root:["root",r&&"disabled",o&&"fullWidth",d&&`variant${It(d)}`,t&&`color${It(t)}`,l&&`size${It(l)}`,f&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]};return Lr(c,Cj,{})},Tj=at("button",{name:"JoyMenuButton",slot:"Root",overridesResolver:(e,t)=>t.root})(LE),Pj=at("span",{name:"JoyMenuButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),Ej=at("span",{name:"JoyMenuButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),zj=at("span",{name:"JoyMenuButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,o,l,d;return q({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(o=(r=e.variants[t.variant])==null?void 0:r[t.color])==null?void 0:o.color},t.disabled&&{color:(d=(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color])==null?void 0:d.color})}),Mj=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyMenuButton"}),{children:l,color:d="neutral",component:f,disabled:c=!1,endDecorator:b,loading:w=!1,loadingPosition:k="center",loadingIndicator:z,size:P="md",slotProps:V={},slots:U={},startDecorator:H,variant:X="outlined"}=o,B=Ut(o,kj),L=R.useContext(Sb),G=t.variant||L.variant||X,te=t.size||L.size||P,ne=t.disabled??(L.disabled||c||w),{getRootProps:he,open:Z,active:ue}=e4({rootRef:r,disabled:ne}),Ce=z??re.jsx(Cb,{color:d,thickness:{sm:2,md:3,lg:4}[te]||3}),ye=q({},o,{active:ue,color:d,disabled:ne,open:Z,size:te,variant:G}),Ee=Ij(ye),Se=q({},B,{component:f,slots:U,slotProps:V}),[ze,We]=zt("root",{elementType:Tj,getSlotProps:he,externalForwardedProps:Se,ref:r,ownerState:ye,className:Ee.root}),[Fe,Me]=zt("startDecorator",{className:Ee.startDecorator,elementType:Pj,externalForwardedProps:Se,ownerState:ye}),[Oe,ke]=zt("endDecorator",{className:Ee.endDecorator,elementType:Ej,externalForwardedProps:Se,ownerState:ye}),[Ge,Ke]=zt("loadingIndicatorCenter",{className:Ee.loadingIndicatorCenter,elementType:zj,externalForwardedProps:Se,ownerState:ye});return re.jsxs(ze,q({},We,{children:[(H||w&&k==="start")&&re.jsx(Fe,q({},Me,{children:w&&k==="start"?Ce:H})),l,w&&k==="center"&&re.jsx(Ge,q({},Ke,{children:Ce})),(b||w&&k==="end")&&re.jsx(Oe,q({},ke,{children:w&&k==="end"?Ce:b}))]}))}),Aj=Mj;function Dj(e){return Br("MuiMenuItem",e)}Ar("MuiMenuItem",["root","focusVisible","disabled","selected","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const Rj=["children","disabled","component","selected","color","orientation","variant","slots","slotProps","id"],Lj=e=>{const{focusVisible:t,disabled:r,selected:o,color:l,variant:d}=e,f={root:["root",t&&"focusVisible",r&&"disabled",o&&"selected",l&&`color${It(l)}`,d&&`variant${It(d)}`]};return Lr(f,Dj,{})},$j=at(af,{name:"JoyMenuItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Bj=R.memo(R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyMenuItem"}),l=R.useContext(md),{children:d,disabled:f=!1,component:c="li",selected:b=!1,color:w="neutral",orientation:k="horizontal",variant:z="plain",slots:P={},slotProps:V={},id:U}=o,H=Ut(o,Rj),{variant:X=z,color:B=w}=wb(t.variant,t.color),{getRootProps:L,disabled:G,focusVisible:te}=n4({id:U,disabled:f,rootRef:r}),ne=q({},o,{component:c,color:B,disabled:G,focusVisible:te,orientation:k,selected:b,row:l,variant:X}),he=Lj(ne),Z=q({},H,{component:c,slots:P,slotProps:V}),[ue,Ce]=zt("root",{ref:r,elementType:$j,getSlotProps:L,externalForwardedProps:Z,className:he.root,ownerState:ne});return re.jsx(xb.Provider,{value:k,children:re.jsx(ue,q({},Ce,{children:d}))})})),Oj=R.forwardRef(function(t,r){const{contextValue:o,id:l}=i4(t.id);return re.jsx(Pl.Provider,{value:o,children:re.jsx(Bj,q({},t,{id:l,ref:r}))})}),c_=Oj;function Fj(e){return Br("MuiModalClose",e)}Ar("MuiModalClose",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);var MC;const Nj=["component","color","variant","size","onClick","slots","slotProps"],jj=e=>{const{variant:t,color:r,disabled:o,focusVisible:l,size:d}=e,f={root:["root",o&&"disabled",l&&"focusVisible",t&&`variant${It(t)}`,r&&`color${It(r)}`,d&&`size${It(d)}`]};return Lr(f,Fj,{})},Vj=at(sf,{name:"JoyModalClose",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o;return q({},e.size==="sm"&&{"--IconButton-size":"1.75rem"},e.size==="md"&&{"--IconButton-size":"2rem"},e.size==="lg"&&{"--IconButton-size":"2.25rem"},{position:"absolute",zIndex:1,top:"var(--ModalClose-inset, 0.625rem)",right:"var(--ModalClose-inset, 0.625rem)",borderRadius:`var(--ModalClose-radius, ${t.vars.radius.sm})`},!((o=(r=t.variants[e.variant])==null?void 0:r[e.color])!=null&&o.backgroundColor)&&{color:t.vars.palette.text.secondary})}),Uj={plain:"plain",outlined:"plain",soft:"soft",solid:"solid"},Hj=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyModalClose"}),{component:l="button",color:d="neutral",variant:f="plain",size:c="md",onClick:b,slots:w={},slotProps:k={}}=o,z=Ut(o,Nj),P=R.useContext(WE),V=R.useContext(cv),U=t.variant??Uj[V==null?void 0:V.variant]??f,H=t.color??(V==null?void 0:V.color)??d,X=R.useContext(Ib),B=t.size??X??c,{focusVisible:L,getRootProps:G}=os(q({},o,{rootRef:r})),te=q({},o,{color:H,component:l,variant:U,size:B,focusVisible:L}),ne=jj(te),[he,Z]=zt("root",{ref:r,elementType:Vj,getSlotProps:G,externalForwardedProps:q({onClick:ue=>{P==null||P(ue,"closeClick"),b==null||b(ue)}},z,{component:l,slots:w,slotProps:k}),className:ne.root,ownerState:te});return re.jsx(he,q({},Z,{children:MC||(MC=re.jsx(SE,{}))}))}),XE=Hj;function Wj(e){return Br("MuiOption",e)}const Gj=Ar("MuiOption",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","highlighted","variantPlain","variantSoft","variantOutlined","variantSolid"]),qj=Gj,Zj=["component","children","disabled","value","label","variant","color","slots","slotProps"],Kj=e=>{const{disabled:t,highlighted:r,selected:o}=e;return Lr({root:["root",t&&"disabled",r&&"highlighted",o&&"selected"]},Wj,{})},Xj=at(af,{name:"JoyOption",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var o;const r=(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color];return{[`&.${qj.highlighted}:not([aria-selected="true"])`]:{backgroundColor:r==null?void 0:r.backgroundColor}}}),Jj=R.memo(R.forwardRef(function(t,r){var ze;const o=Or({props:t,name:"JoyOption"}),{component:l="li",children:d,disabled:f=!1,value:c,label:b,variant:w="plain",color:k="neutral",slots:z={},slotProps:P={}}=o,V=Ut(o,Zj),U=R.useContext(md),{variant:H=w,color:X=k}=wb(t.variant,t.color),B=R.useRef(null),L=Kr(B,r),G=b??(typeof d=="string"?d:(ze=B.current)==null?void 0:ze.innerText),{getRootProps:te,selected:ne,highlighted:he,index:Z}=f4({disabled:f,label:G,value:c,rootRef:L}),ue=q({},o,{disabled:f,selected:ne,highlighted:he,index:Z,component:l,variant:H,color:X,row:U}),Ce=Kj(ue),ye=q({},V,{component:l,slots:z,slotProps:P}),[Ee,Se]=zt("root",{ref:r,getSlotProps:te,elementType:Xj,externalForwardedProps:ye,className:Ce.root,ownerState:ue});return re.jsx(Ee,q({},Se,{children:d}))})),Yj=R.forwardRef(function(t,r){const{contextValue:o}=m4(t.value);return re.jsx(Pl.Provider,{value:o,children:re.jsx(Jj,q({},t,{ref:r}))})}),Qj=Yj,eV=yd(re.jsx("path",{d:"m12 5.83 2.46 2.46c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 3.7a.9959.9959 0 0 0-1.41 0L8.12 6.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 5.83zm0 12.34-2.46-2.46a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l3.17 3.18c.39.39 1.02.39 1.41 0l3.17-3.17c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L12 18.17z"}),"Unfold");function tV(e){return Br("MuiSelect",e)}const Hu=Ar("MuiSelect",["root","button","indicator","startDecorator","endDecorator","popper","listbox","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","focusVisible","disabled","expanded","multiple"]);var AC;const rV=["action","autoFocus","children","defaultValue","defaultListboxOpen","disabled","getSerializedValue","placeholder","listboxId","listboxOpen","onChange","onListboxOpenChange","onClose","renderValue","required","value","size","variant","color","startDecorator","endDecorator","indicator","aria-describedby","aria-label","aria-labelledby","id","name","multiple","slots","slotProps"];function nV(e){return Array.isArray(e)?re.jsx(R.Fragment,{children:e.map(t=>t.label).join(", ")}):(e==null?void 0:e.label)??""}const iV=[{name:"offset",options:{offset:[0,4]}},{name:"equalWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`}}],oV=e=>{const{color:t,disabled:r,focusVisible:o,size:l,variant:d,open:f,multiple:c}=e,b={root:["root",r&&"disabled",o&&"focusVisible",f&&"expanded",d&&`variant${It(d)}`,t&&`color${It(t)}`,l&&`size${It(l)}`,c&&"multiple"],button:["button"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],indicator:["indicator",f&&"expanded"],listbox:["listbox",f&&"expanded",r&&"disabled"]};return Lr(b,tV,{})},aV=at("div",{name:"JoySelect",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var l,d,f,c,b;const r=(l=e.variants[`${t.variant}`])==null?void 0:l[t.color],{borderRadius:o}=gd({theme:e,ownerState:t},["borderRadius"]);return[q({"--Select-radius":e.vars.radius.sm,"--Select-gap":"0.5rem","--Select-placeholderOpacity":.64,"--Select-decoratorColor":e.vars.palette.text.icon,"--Select-focusedThickness":e.vars.focus.thickness,"--Select-focusedHighlight":(d=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:d[500],'&:not([data-inverted-colors="false"])':q({},t.instanceColor&&{"--_Select-focusedHighlight":(f=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:f[500]},{"--Select-focusedHighlight":e.vars.palette.focusVisible}),"--Select-indicatorColor":r!=null&&r.backgroundColor?r==null?void 0:r.color:e.vars.palette.text.tertiary},t.size==="sm"&&{"--Select-minHeight":"2rem","--Select-paddingInline":"0.5rem","--Select-decoratorChildHeight":"min(1.5rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Select-minHeight":"2.25rem","--Select-paddingInline":"0.75rem","--Select-decoratorChildHeight":"min(1.75rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Select-minHeight":"2.75rem","--Select-paddingInline":"1rem","--Select-decoratorChildHeight":"min(2.375rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Select-decoratorChildOffset":"min(calc(var(--Select-paddingInline) - (var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2), var(--Select-paddingInline))","--_Select-paddingBlock":"max((var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2, 0px)","--Select-decoratorChildRadius":"max(var(--Select-radius) - var(--variant-borderWidth, 0px) - var(--_Select-paddingBlock), min(var(--_Select-paddingBlock) + var(--variant-borderWidth, 0px), var(--Select-radius) / 2))","--Button-minHeight":"var(--Select-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Select-decoratorChildHeight)","--Button-radius":"var(--Select-decoratorChildRadius)","--IconButton-radius":"var(--Select-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Select-minHeight)",position:"relative",display:"flex",alignItems:"center",borderRadius:"var(--Select-radius)",cursor:"pointer"},!(r!=null&&r.backgroundColor)&&{backgroundColor:e.vars.palette.background.surface},t.size&&{paddingBlock:{sm:2,md:3,lg:4}[t.size]},{paddingInline:"var(--Select-paddingInline)"},e.typography[`body-${t.size}`],r,{"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)"},[`&.${Hu.focusVisible}`]:{"--Select-indicatorColor":r==null?void 0:r.color,"&::before":{boxShadow:"inset 0 0 0 var(--Select-focusedThickness) var(--Select-focusedHighlight)"}},[`&.${Hu.disabled}`]:{"--Select-indicatorColor":"inherit"}}),{"&:hover":(c=e.variants[`${t.variant}Hover`])==null?void 0:c[t.color],[`&.${Hu.disabled}`]:(b=e.variants[`${t.variant}Disabled`])==null?void 0:b[t.color]},o!==void 0&&{"--Select-radius":o}]}),sV=at("button",{name:"JoySelect",slot:"Button",overridesResolver:(e,t)=>t.button})(({ownerState:e})=>q({border:0,outline:0,background:"none",padding:0,fontSize:"inherit",color:"inherit",alignSelf:"stretch",display:"flex",alignItems:"center",flex:1,fontFamily:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden"},(e.value===null||e.value===void 0)&&{opacity:"var(--Select-placeholderOpacity)"},{"&::before":{content:'""',display:"block",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",borderRadius:"var(--Select-radius)"}})),lV=at(of,{name:"JoySelect",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e,ownerState:t})=>{var o;const r=(o=e.variants[t.variant])==null?void 0:o[t.color];return q({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(r==null?void 0:r.backgroundColor)||(r==null?void 0:r.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},nv,{minWidth:"max-content",maxHeight:"44vh",overflow:"auto",outline:0,boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(r!=null&&r.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup})}),cV=at("span",{name:"JoySelect",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Button-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Select-paddingInline) / -4)",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineEnd:"var(--Select-gap)"}),uV=at("span",{name:"JoySelect",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Button-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Select-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineStart:"var(--Select-gap)"}),dV=at("span",{name:"JoySelect",slot:"Indicator"})(({ownerState:e,theme:t})=>q({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.lg},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.xl},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl2},{"--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,display:"inherit",alignItems:"center",marginInlineStart:"var(--Select-gap)",marginInlineEnd:"calc(var(--Select-paddingInline) / -4)",[`.${Hu.endDecorator} + &`]:{marginInlineStart:"calc(var(--Select-gap) / 2)"},[`&.${Hu.expanded}, .${Hu.disabled} > &`]:{"--Icon-color":"currentColor"}})),hV=R.forwardRef(function(t,r){var $t;const o=Or({props:t,name:"JoySelect"}),l=o,{action:d,autoFocus:f,children:c,defaultValue:b,defaultListboxOpen:w=!1,disabled:k,getSerializedValue:z,placeholder:P,listboxId:V,listboxOpen:U,onChange:H,onListboxOpenChange:X,onClose:B,renderValue:L,required:G=!1,value:te,size:ne="md",variant:he="outlined",color:Z="neutral",startDecorator:ue,endDecorator:Ce,indicator:ye=AC||(AC=re.jsx(eV,{})),"aria-describedby":Ee,"aria-label":Se,"aria-labelledby":ze,id:We,name:Fe,multiple:Me=!1,slots:Oe={},slotProps:ke={}}=l,Ge=Ut(l,rV),Ke=R.useContext(lv),ht=t.disabled??(Ke==null?void 0:Ke.disabled)??k,vt=t.size??(Ke==null?void 0:Ke.size)??ne,gt=t.color??(Ke!=null&&Ke.error?"danger":(Ke==null?void 0:Ke.color)??Z),Ct=L??nV,[At,Zt]=R.useState(null),kt=R.useRef(null),$e=R.useRef(null),rt=Kr(r,kt);R.useImperativeHandle(d,()=>({focusVisible:()=>{var ar;(ar=$e.current)==null||ar.focus()}}),[]),R.useEffect(()=>{Zt(kt.current)},[]),R.useEffect(()=>{f&&$e.current.focus()},[f]);const pt=R.useCallback(ar=>{X==null||X(ar),ar||B==null||B()},[B,X]),{buttonActive:Dt,buttonFocusVisible:Mt,contextValue:gr,disabled:Cr,getButtonProps:lr,getListboxProps:yt,getHiddenInputProps:Dr,getOptionMetadata:er,open:Fr,value:Ae}=DO({buttonRef:$e,defaultOpen:w,defaultValue:b,disabled:ht,getSerializedValue:z,listboxId:V,multiple:Me,name:Fe,required:G,onChange:H,onOpenChange:pt,open:U,value:te}),cr=q({},o,{active:Dt,defaultListboxOpen:w,disabled:Cr,focusVisible:Mt,open:Fr,renderValue:Ct,value:Ae,size:vt,variant:he,color:gt}),ir=oV(cr),Ft=q({},Ge,{slots:Oe,slotProps:ke}),qt=R.useMemo(()=>{let ar;return Me?ar=Ae.map(Gr=>er(Gr)).filter(Gr=>Gr!==void 0):ar=er(Ae)??null,ar},[er,Ae,Me]),[kr,Pr]=zt("root",{ref:rt,className:ir.root,elementType:aV,externalForwardedProps:Ft,ownerState:cr}),[sr,nr]=zt("button",{additionalProps:{"aria-describedby":Ee??(Ke==null?void 0:Ke["aria-describedby"]),"aria-label":Se,"aria-labelledby":ze??(Ke==null?void 0:Ke.labelId),"aria-required":G?"true":void 0,id:We??(Ke==null?void 0:Ke.htmlFor),name:Fe},className:ir.button,elementType:sV,externalForwardedProps:Ft,getSlotProps:lr,ownerState:cr}),[rr,Rr]=zt("listbox",{additionalProps:{anchorEl:At,open:Fr,placement:"bottom",keepMounted:!0},className:ir.listbox,elementType:lV,externalForwardedProps:Ft,getSlotProps:yt,ownerState:q({},cr,{nesting:!1,row:!1,wrap:!1}),getSlotOwnerState:ar=>({size:ar.size||vt,variant:ar.variant||he,color:ar.color||(ar.disablePortal?gt:Z),disableColorInversion:!ar.disablePortal})}),[it,Le]=zt("startDecorator",{className:ir.startDecorator,elementType:cV,externalForwardedProps:Ft,ownerState:cr}),[Wt,Rt]=zt("endDecorator",{className:ir.endDecorator,elementType:uV,externalForwardedProps:Ft,ownerState:cr}),[_r,xr]=zt("indicator",{className:ir.indicator,elementType:dV,externalForwardedProps:Ft,ownerState:cr}),Qe=R.useMemo(()=>[...iV,...Rr.modifiers||[]],[Rr.modifiers]);let Kt=P;return(Array.isArray(qt)&&qt.length>0||!Array.isArray(qt)&&qt)&&(Kt=Ct(qt)),re.jsxs(R.Fragment,{children:[re.jsxs(kr,q({},Pr,{children:[ue&&re.jsx(it,q({},Le,{children:ue})),re.jsx(sr,q({},nr,{children:Kt})),Ce&&re.jsx(Wt,q({},Rt,{children:Ce})),ye&&re.jsx(_r,q({},xr,{children:ye})),re.jsx("input",q({},Dr()))]})),At&&re.jsx(rr,q({},Rr,{className:mi(Rr.className),modifiers:Qe},!(($t=o.slots)!=null&&$t.listbox)&&{as:ev,slots:{root:Rr.as||"ul"}},{children:re.jsx(RO,{value:gr,children:re.jsx(sv,{variant:he,color:Z,children:re.jsx(rv.Provider,{value:"select",children:re.jsx(nf,{nested:!0,children:c})})})})}))]})}),pV=hV;function fV(e){return Br("MuiSheet",e)}Ar("MuiSheet",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const mV=["className","color","component","variant","invertedColors","slots","slotProps"],gV=e=>{const{variant:t,color:r}=e,o={root:["root",t&&`variant${It(t)}`,r&&`color${It(r)}`]};return Lr(o,fV,{})},yV=at("div",{name:"JoySheet",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var b,w;const r=(b=e.variants[t.variant])==null?void 0:b[t.color],{borderRadius:o,bgcolor:l,backgroundColor:d,background:f}=gd({theme:e,ownerState:t},["borderRadius","bgcolor","backgroundColor","background"]),c=kl(e,`palette.${l}`)||l||kl(e,`palette.${d}`)||d||f||(r==null?void 0:r.backgroundColor)||(r==null?void 0:r.background)||e.vars.palette.background.surface;return[q({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--ListItem-stickyBackground":c==="transparent"?"initial":c,"--Sheet-background":c==="transparent"?"initial":c},o!==void 0&&{"--List-radius":`calc(${o} - var(--variant-borderWidth, 0px))`,"--unstable_actionRadius":`calc(${o} - var(--variant-borderWidth, 0px))`},{backgroundColor:e.vars.palette.background.surface,position:"relative"}),q({},e.typography["body-md"],t.variant==="solid"&&t.color&&t.invertedColors&&ov(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&av(t.color)(e),(w=e.variants[t.variant])==null?void 0:w[t.color],r)]}),vV=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoySheet"}),{className:l,color:d="neutral",component:f="div",variant:c="plain",invertedColors:b=!1,slots:w={},slotProps:k={}}=o,z=Ut(o,mV),P=q({},o,{color:d,component:f,invertedColors:b,variant:c}),V=gV(P),U=q({},z,{component:f,slots:w,slotProps:k}),[H,X]=zt("root",{ref:r,className:mi(V.root,l),elementType:yV,externalForwardedProps:U,ownerState:P});return re.jsx(H,q({},X))}),JE=vV,_V=H5({createStyledComponent:at("div",{name:"JoyStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>Or({props:e,name:"JoyStack"})}),uv=_V;function xV(e){return Br("MuiTab",e)}const bV=Ar("MuiTab",["root","disabled","focusVisible","selected","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),wV=bV,SV=["action","children","value","disabled","onChange","onClick","onFocus","component","orientation","variant","color","disableIndicator","indicatorPlacement","indicatorInset","slots","slotProps"],CV=e=>{const{selected:t,disabled:r,focusVisible:o,variant:l,color:d,orientation:f}=e,c={root:["root",f,r&&"disabled",o&&"focusVisible",t&&"selected",l&&`variant${It(l)}`,d&&`color${It(d)}`]};return Lr(c,xV,{})},kV=at(af,{name:"JoyTab",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>[{flex:"initial",justifyContent:e.row?"center":"initial","--unstable_ListItemDecorator-alignItems":"center","--unstable_offset":"min(calc(-1 * var(--variant-borderWidth, 0px)), -1px)"},!e.disableIndicator&&{'&[aria-selected="true"]':{"--Tab-indicatorColor":"currentColor",zIndex:1},"&::after":{content:'""',display:"block",position:"absolute",margin:"auto",background:"var(--Tab-indicatorColor)",borderRadius:"var(--Tab-indicatorRadius)"}},!e.disableIndicator&&e.indicatorPlacement==="bottom"&&{paddingBottom:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",bottom:"calc(-1px - var(--unstable_TabList-underlineBottom, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="top"&&{paddingTop:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",top:"calc(-1px - var(--unstable_TabList-underlineTop, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="right"&&{paddingRight:"calc(var(--ListItem-paddingRight) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",right:"calc(-1px - var(--unstable_TabList-underlineRight, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="left"&&{paddingLeft:"calc(var(--ListItem-paddingLeft) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",left:"calc(-1px - var(--unstable_TabList-underlineLeft, 0px))"}}]),IV=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyTab"}),l=R.useContext(md),{action:d,children:f,disabled:c=!1,component:b="button",orientation:w="horizontal",variant:k="plain",color:z="neutral",disableIndicator:P=!1,indicatorPlacement:V=l?"bottom":"right",indicatorInset:U=!1,slots:H={},slotProps:X={}}=o,B=Ut(o,SV),L=R.useRef(),G=Kr(L,r),{active:te,focusVisible:ne,setFocusVisible:he,selected:Z,getRootProps:ue}=HO(q({},o,{rootRef:G}));R.useImperativeHandle(d,()=>({focusVisible:()=>{he(!0),L.current.focus()}}),[he]);const Ce=q({},o,{disableIndicator:P,indicatorPlacement:V,indicatorInset:U,orientation:w,row:l,active:te,focusVisible:ne,disabled:c,selected:Z,variant:k,color:z}),ye=CV(Ce),Ee=q({},B,{component:b,slots:H,slotProps:X}),[Se,ze]=zt("root",{ref:r,elementType:kV,getSlotProps:ue,externalForwardedProps:Ee,ownerState:Ce,className:ye.root});return re.jsx(xb.Provider,{value:w,children:re.jsx(Se,q({},ze,{children:f}))})}),u_=IV,TV=R.createContext("md"),Tb=TV;function PV(e){return Br("MuiTabList",e)}Ar("MuiTabList",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const EV=["component","children","variant","color","size","disableUnderline","underlinePlacement","tabFlex","sticky","slots","slotProps"],zV=e=>{const{orientation:t,size:r,variant:o,color:l}=e,d={root:["root",t,o&&`variant${It(o)}`,l&&`color${It(l)}`,r&&`size${It(r)}`]};return Lr(d,PV,{})},MV=at(of,{name:"JoyTabList",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var o;const r=(o=e.variants[t.variant])==null?void 0:o[t.color];return q({"--List-gap":"0px","--ListDivider-gap":"0px","--ListItem-paddingX":"var(--Tabs-spacing)","--ListItem-gap":"0.375rem","--unstable_TabList-hasUnderline":t.disableUnderline?"var(--unknown,)":"initial"},nv,{flexGrow:"initial",flexDirection:t.orientation==="vertical"?"column":"row",borderRadius:"var(--List-radius, 0px)",padding:"var(--List-padding, 0px)",zIndex:1},t.sticky&&{position:"sticky",top:t.sticky==="top"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",bottom:t.sticky==="bottom"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",backgroundColor:(r==null?void 0:r.backgroundColor)||`var(--TabList-stickyBackground, ${e.vars.palette.background.body})`},!t.disableUnderline&&q({},t.underlinePlacement==="bottom"&&{"--unstable_TabList-underlineBottom":"1px",paddingBottom:1,boxShadow:`inset 0 -1px ${e.vars.palette.divider}`},t.underlinePlacement==="top"&&{"--unstable_TabList-underlineTop":"1px",paddingTop:1,boxShadow:`inset 0 1px ${e.vars.palette.divider}`},t.underlinePlacement==="right"&&{"--unstable_TabList-underlineRight":"1px",paddingRight:1,boxShadow:`inset -1px 0 ${e.vars.palette.divider}`},t.underlinePlacement==="left"&&{"--unstable_TabList-underlineLeft":"1px",paddingLeft:1,boxShadow:`inset 1px 0 ${e.vars.palette.divider}`}),t.tabFlex&&{[`& .${wV.root}`]:{flex:t.tabFlex}})}),AV=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyTabList"}),l=R.useContext(Tb),{isRtl:d,orientation:f,getRootProps:c,contextValue:b}=jO({rootRef:r}),{component:w="div",children:k,variant:z="plain",color:P="neutral",size:V,disableUnderline:U=!1,underlinePlacement:H=f==="horizontal"?"bottom":"right",tabFlex:X,sticky:B,slots:L={},slotProps:G={}}=o,te=Ut(o,EV),he=q({},o,{isRtl:d,orientation:f,variant:z,color:P,size:V??l,sticky:B,tabFlex:X,nesting:!1,disableUnderline:U,underlinePlacement:H}),Z=zV(he),ue=q({},te,{component:w,slots:L,slotProps:G}),[Ce,ye]=zt("root",{ref:r,elementType:MV,getSlotProps:c,externalForwardedProps:ue,ownerState:he,className:Z.root});return re.jsx(Ce,q({},ye,{children:re.jsx(VO,{value:b,children:re.jsx(nf,{row:f==="horizontal",nested:!0,children:k})})}))}),DV=AV;function RV(e){return Br("MuiTabPanel",e)}Ar("MuiTabPanel",["root","hidden","sizeSm","sizeMd","sizeLg","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const LV=["children","value","component","color","variant","size","slots","slotProps","keepMounted"],$V=e=>{const{hidden:t,size:r,variant:o,color:l,orientation:d}=e,f={root:["root",t&&"hidden",r&&`size${It(r)}`,d,o&&`variant${It(o)}`,l&&`color${It(l)}`,r&&`size${It(r)}`]};return Lr(f,RV,{})},BV=at("div",{name:"JoyTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return q({display:t.hidden?"none":"block",padding:"var(--Tabs-spacing)",flexGrow:1,fontFamily:e.vars.fontFamily.body},e.typography[`body-${t.size}`],(r=e.variants[t.variant])==null?void 0:r[t.color])}),OV=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyTabPanel"}),{orientation:l}=tv()||{orientation:"horizontal"},d=R.useContext(Tb),{children:f,value:c=0,component:b,color:w="neutral",variant:k="plain",size:z,slots:P={},slotProps:V={},keepMounted:U=!1}=o,H=Ut(o,LV),{hidden:X,getRootProps:B}=FO(q({},o,{value:c})),G=q({},o,{orientation:l,hidden:X,size:z??d,color:w,variant:k}),te=$V(G),ne=q({},H,{component:b,slots:P,slotProps:V}),[he,Z]=zt("root",{ref:r,elementType:BV,getSlotProps:B,externalForwardedProps:ne,additionalProps:{role:"tabpanel",ref:r,as:b},ownerState:G,className:te.root});return U?re.jsx(he,q({},Z,{children:f})):re.jsx(he,q({},Z,{children:!X&&f}))}),d_=OV;function FV(e){return Br("MuiTabs",e)}Ar("MuiTabs",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const NV=["children","value","defaultValue","orientation","direction","component","onChange","selectionFollowsFocus","variant","color","size","slots","slotProps"],jV=e=>{const{orientation:t,variant:r,color:o,size:l}=e,d={root:["root",t,r&&`variant${It(r)}`,o&&`color${It(o)}`,l&&`size${It(l)}`]};return Lr(d,FV,{})},VV=at("div",{name:"JoyTabs",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var w,k;const r=(w=t.variants[e.variant])==null?void 0:w[e.color],{bgcolor:o,backgroundColor:l,background:d,p:f,padding:c}=gd({theme:t,ownerState:e},["bgcolor","backgroundColor","background","p","padding"]),b=kl(t,`palette.${o}`)||o||kl(t,`palette.${l}`)||l||d||(r==null?void 0:r.backgroundColor)||(r==null?void 0:r.background)||t.vars.palette.background.surface;return q({},e.size==="sm"&&{"--Tabs-spacing":"0.75rem"},e.size==="md"&&{"--Tabs-spacing":"1rem"},e.size==="lg"&&{"--Tabs-spacing":"1.25rem"},{"--Tab-indicatorThickness":"2px","--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,"--TabList-stickyBackground":b==="transparent"?"initial":b,display:"flex",flexDirection:"column"},e.orientation==="vertical"&&{flexDirection:"row"},{backgroundColor:t.vars.palette.background.surface,position:"relative"},t.typography[`body-${e.size}`],(k=t.variants[e.variant])==null?void 0:k[e.color],f!==void 0&&{"--Tabs-padding":f},c!==void 0&&{"--Tabs-padding":c})}),UV=R.forwardRef(function(t,r){const o=Or({props:t,name:"JoyTabs"}),{children:l,value:d,defaultValue:f,orientation:c="horizontal",direction:b="ltr",component:w,variant:k="plain",color:z="neutral",size:P="md",slots:V={},slotProps:U={}}=o,H=Ut(o,NV),X=f||(d===void 0?0:void 0),{contextValue:B}=$O(q({},o,{orientation:c,defaultValue:X})),L=q({},o,{orientation:c,direction:b,variant:k,color:z,size:P}),G=jV(L),te=q({},H,{component:w,slots:V,slotProps:U}),[ne,he]=zt("root",{ref:r,elementType:VV,externalForwardedProps:te,additionalProps:{ref:r,as:w},ownerState:L,className:G.root});return re.jsx(ne,q({},he,{children:re.jsx(BO,{value:B,children:re.jsx(Tb.Provider,{value:P,children:l})})}))}),DC=UV;function HV(e){return Br("MuiTooltip",e)}Ar("MuiTooltip",["root","tooltipArrow","arrow","touch","placementLeft","placementRight","placementTop","placementBottom","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);const WV=["children","className","component","arrow","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","disablePortal","direction","keepMounted","modifiers","placement","title","color","variant","size","slots","slotProps"],GV=e=>{const{arrow:t,variant:r,color:o,size:l,placement:d,touch:f}=e,c={root:["root",t&&"tooltipArrow",f&&"touch",l&&`size${It(l)}`,o&&`color${It(o)}`,r&&`variant${It(r)}`,`tooltipPlacement${It(d.split("-")[0])}`],arrow:["arrow"]};return Lr(c,HV,{})},qV=at("div",{name:"JoyTooltip",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var o,l,d;const r=(o=t.variants[e.variant])==null?void 0:o[e.color];return q({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.md,"--Tooltip-arrowSize":"8px",padding:t.spacing(.25,.625)},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.lg,"--Tooltip-arrowSize":"10px",padding:t.spacing(.5,.75)},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl,"--Tooltip-arrowSize":"12px",padding:t.spacing(.75,1)},{zIndex:t.vars.zIndex.tooltip,borderRadius:t.vars.radius.sm,boxShadow:t.shadow.sm,wordWrap:"break-word",position:"relative"},e.disableInteractive&&{pointerEvents:"none"},t.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[e.size]}`],r,!r.backgroundColor&&{backgroundColor:t.vars.palette.background.surface},{"&::before":{content:'""',display:"block",position:"absolute",width:(l=e.placement)!=null&&l.match(/(top|bottom)/)?"100%":"calc(10px + var(--variant-borderWidth, 0px))",height:(d=e.placement)!=null&&d.match(/(top|bottom)/)?"calc(10px + var(--variant-borderWidth, 0px))":"100%"},'&[data-popper-placement*="bottom"]::before':{top:0,left:0,transform:"translateY(-100%)"},'&[data-popper-placement*="left"]::before':{top:0,right:0,transform:"translateX(100%)"},'&[data-popper-placement*="right"]::before':{top:0,left:0,transform:"translateX(-100%)"},'&[data-popper-placement*="top"]::before':{bottom:0,left:0,transform:"translateY(100%)"}})}),ZV=at("span",{name:"JoyTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e,ownerState:t})=>{var o;const r=(o=e.variants[t.variant])==null?void 0:o[t.color];return{"--unstable_Tooltip-arrowRotation":0,width:"var(--Tooltip-arrowSize)",height:"var(--Tooltip-arrowSize)",boxSizing:"border-box","&::before":{content:'""',display:"block",position:"absolute",width:0,height:0,border:"calc(var(--Tooltip-arrowSize) / 2) solid",borderLeftColor:"transparent",borderBottomColor:"transparent",borderTopColor:(r==null?void 0:r.backgroundColor)??e.vars.palette.background.surface,borderRightColor:(r==null?void 0:r.backgroundColor)??e.vars.palette.background.surface,borderRadius:"0px 2px 0px 0px",boxShadow:`var(--variant-borderWidth, 0px) calc(-1 * var(--variant-borderWidth, 0px)) 0px 0px ${r.borderColor}`,transformOrigin:"center center",transform:"rotate(calc(-45deg + 90deg * var(--unstable_Tooltip-arrowRotation)))"},'[data-popper-placement*="bottom"] &':{top:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="top"] &':{"--unstable_Tooltip-arrowRotation":2,bottom:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="left"] &':{"--unstable_Tooltip-arrowRotation":1,right:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="right"] &':{"--unstable_Tooltip-arrowRotation":3,left:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"}}});let Um=!1;const RC=new qp;let Fh={x:0,y:0};function LC(e,t){return r=>{t&&t(r),e(r)}}function $C(e,t){return(r,...o)=>{t&&t(r,...o),e(r,...o)}}const KV=R.forwardRef(function(t,r){var $;const o=Or({props:t,name:"JoyTooltip"}),{children:l,className:d,component:f,arrow:c=!1,describeChild:b=!1,disableFocusListener:w=!1,disableHoverListener:k=!1,disableInteractive:z=!1,disableTouchListener:P=!1,enterDelay:V=100,enterNextDelay:U=0,enterTouchDelay:H=700,followCursor:X=!1,id:B,leaveDelay:L=0,leaveTouchDelay:G=1500,onClose:te,onOpen:ne,open:he,disablePortal:Z,direction:ue,keepMounted:Ce,modifiers:ye,placement:Ee="bottom",title:Se,color:ze="neutral",variant:We="solid",size:Fe="md",slots:Me={},slotProps:Oe={}}=o,ke=Ut(o,WV),[Ge,Ke]=R.useState(),[ht,vt]=R.useState(null),gt=R.useRef(!1),Ct=z||X,At=Cm(),Zt=Cm(),kt=Cm(),$e=Cm(),[rt,pt]=Bu({controlled:he,default:!1,name:"Tooltip",state:"open"});let Dt=rt;const Mt=Co(B),gr=R.useRef(),Cr=pl(()=>{gr.current!==void 0&&(document.body.style.WebkitUserSelect=gr.current,gr.current=void 0),$e.clear()});R.useEffect(()=>Cr,[Cr]);const lr=W=>{RC.clear(),Um=!0,pt(!0),ne&&!Dt&&ne(W)},yt=pl(W=>{RC.start(800+L,()=>{Um=!1}),pt(!1),te&&Dt&&te(W),At.start(150,()=>{gt.current=!1})}),Dr=W=>{gt.current&&W.type!=="touchstart"||(Ge&&Ge.removeAttribute("title"),Zt.clear(),kt.clear(),V||Um&&U?Zt.start(Um?U:V,()=>{lr(W)}):lr(W))},er=W=>{Zt.clear(),kt.start(L,()=>{yt(W)})},{isFocusVisibleRef:Fr,onBlur:Ae,onFocus:cr,ref:ir}=p1(),[,Ft]=R.useState(!1),qt=W=>{Ae(W),Fr.current===!1&&(Ft(!1),er(W))},kr=W=>{Ge||Ke(W.currentTarget),cr(W),Fr.current===!0&&(Ft(!0),Dr(W))},Pr=W=>{gt.current=!0;const Q=l.props;Q.onTouchStart&&Q.onTouchStart(W)},sr=W=>{Pr(W),kt.clear(),At.clear(),Cr(),gr.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",$e.start(H,()=>{document.body.style.WebkitUserSelect=gr.current,Dr(W)})},nr=W=>{l.props.onTouchEnd&&l.props.onTouchEnd(W),Cr(),kt.start(G,()=>{yt(W)})};R.useEffect(()=>{if(!Dt)return;function W(Q){Q.key==="Escape"&&yt(Q)}return document.addEventListener("keydown",W),()=>{document.removeEventListener("keydown",W)}},[yt,Dt]);const rr=Kr(Ke,r),Rr=Kr(ir,rr),it=Kr(l.ref,Rr);typeof Se!="number"&&!Se&&(Dt=!1);const Le=R.useRef(null),Wt=W=>{const Q=l.props;Q.onMouseMove&&Q.onMouseMove(W),Fh={x:W.clientX,y:W.clientY},Le.current&&Le.current.update()},Rt={},_r=typeof Se=="string";b?(Rt.title=!Dt&&_r&&!k?Se:null,Rt["aria-describedby"]=Dt?Mt:null):(Rt["aria-label"]=_r?Se:null,Rt["aria-labelledby"]=Dt&&!_r?Mt:null);const xr=q({},Rt,ke,{component:f},l.props,{className:mi(d,l.props.className),onTouchStart:Pr,ref:it},X?{onMouseMove:Wt}:{}),Qe={};P||(xr.onTouchStart=sr,xr.onTouchEnd=nr),k||(xr.onMouseOver=LC(Dr,xr.onMouseOver),xr.onMouseLeave=LC(er,xr.onMouseLeave),Ct||(Qe.onMouseOver=Dr,Qe.onMouseLeave=er)),w||(xr.onFocus=$C(kr,xr.onFocus),xr.onBlur=$C(qt,xr.onBlur),Ct||(Qe.onFocus=kr,Qe.onBlur=qt));const Kt=q({},o,{arrow:c,disableInteractive:Ct,placement:Ee,touch:gt.current,color:ze,variant:We,size:Fe}),$t=GV(Kt),ar=q({},ke,{component:f,slots:Me,slotProps:Oe}),Gr=R.useMemo(()=>[{name:"arrow",enabled:!!ht,options:{element:ht,padding:6}},{name:"offset",options:{offset:[0,10]}},...ye||[]],[ht,ye]),[Jt,gn]=zt("root",{additionalProps:q({id:Mt,popperRef:Le,placement:Ee,anchorEl:X?{getBoundingClientRect:()=>({top:Fh.y,left:Fh.x,right:Fh.x,bottom:Fh.y,width:0,height:0})}:Ge,open:Ge?Dt:!1,disablePortal:Z,keepMounted:Ce,direction:ue,modifiers:Gr},Qe),ref:null,className:$t.root,elementType:qV,externalForwardedProps:ar,ownerState:Kt}),[de,A]=zt("arrow",{ref:vt,className:$t.arrow,elementType:ZV,externalForwardedProps:ar,ownerState:Kt});return re.jsxs(R.Fragment,{children:[R.isValidElement(l)&&R.cloneElement(l,xr),re.jsxs(Jt,q({},gn,!(($=o.slots)!=null&&$.root)&&{as:ev,slots:{root:f||"div"}},{children:[Se,c?re.jsx(de,q({},A)):null]}))]})}),XV=KV;var YE,BC=fd;YE=BC.createRoot,BC.hydrateRoot;/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tn(){return Tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Tn.apply(this,arguments)}var qn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(qn||(qn={}));const OC="popstate";function JV(e){e===void 0&&(e={});function t(o,l){let{pathname:d,search:f,hash:c}=o.location;return Bp("",{pathname:d,search:f,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(o,l){return typeof l=="string"?l:lf(l)}return QV(t,r,null,e)}function Sr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function sd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function YV(){return Math.random().toString(36).substr(2,8)}function FC(e,t){return{usr:e.state,key:e.key,idx:t}}function Bp(e,t,r,o){return r===void 0&&(r=null),Tn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Os(t):t,{state:r,key:t&&t.key||o||YV()})}function lf(e){let{pathname:t="/",search:r="",hash:o=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function Os(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function QV(e,t,r,o){o===void 0&&(o={});let{window:l=document.defaultView,v5Compat:d=!1}=o,f=l.history,c=qn.Pop,b=null,w=k();w==null&&(w=0,f.replaceState(Tn({},f.state,{idx:w}),""));function k(){return(f.state||{idx:null}).idx}function z(){c=qn.Pop;let X=k(),B=X==null?null:X-w;w=X,b&&b({action:c,location:H.location,delta:B})}function P(X,B){c=qn.Push;let L=Bp(H.location,X,B);r&&r(L,X),w=k()+1;let G=FC(L,w),te=H.createHref(L);try{f.pushState(G,"",te)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;l.location.assign(te)}d&&b&&b({action:c,location:H.location,delta:1})}function V(X,B){c=qn.Replace;let L=Bp(H.location,X,B);r&&r(L,X),w=k();let G=FC(L,w),te=H.createHref(L);f.replaceState(G,"",te),d&&b&&b({action:c,location:H.location,delta:0})}function U(X){let B=l.location.origin!=="null"?l.location.origin:l.location.href,L=typeof X=="string"?X:lf(X);return L=L.replace(/ $/,"%20"),Sr(B,"No window.location.(origin|href) available to create URL for href: "+L),new URL(L,B)}let H={get action(){return c},get location(){return e(l,f)},listen(X){if(b)throw new Error("A history only accepts one active listener");return l.addEventListener(OC,z),b=X,()=>{l.removeEventListener(OC,z),b=null}},createHref(X){return t(l,X)},createURL:U,encodeLocation(X){let B=U(X);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:P,replace:V,go(X){return f.go(X)}};return H}var wn;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(wn||(wn={}));const e8=new Set(["lazy","caseSensitive","path","id","index","children"]);function t8(e){return e.index===!0}function Ix(e,t,r,o){return r===void 0&&(r=[]),o===void 0&&(o={}),e.map((l,d)=>{let f=[...r,d],c=typeof l.id=="string"?l.id:f.join("-");if(Sr(l.index!==!0||!l.children,"Cannot specify children on an index route"),Sr(!o[c],'Found a route id collision on id "'+c+`".  Route id's must be globally unique within Data Router usages`),t8(l)){let b=Tn({},l,t(l),{id:c});return o[c]=b,b}else{let b=Tn({},l,t(l),{id:c,children:void 0});return o[c]=b,l.children&&(b.children=Ix(l.children,t,f,o)),b}})}function Du(e,t,r){r===void 0&&(r="/");let o=typeof t=="string"?Os(t):t,l=cf(o.pathname||"/",r);if(l==null)return null;let d=QE(e);n8(d);let f=null;for(let c=0;f==null&&c<d.length;++c){let b=m8(l);f=h8(d[c],b)}return f}function r8(e,t){let{route:r,pathname:o,params:l}=e;return{id:r.id,pathname:o,params:l,data:t[r.id],handle:r.handle}}function QE(e,t,r,o){t===void 0&&(t=[]),r===void 0&&(r=[]),o===void 0&&(o="");let l=(d,f,c)=>{let b={relativePath:c===void 0?d.path||"":c,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};b.relativePath.startsWith("/")&&(Sr(b.relativePath.startsWith(o),'Absolute route path "'+b.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),b.relativePath=b.relativePath.slice(o.length));let w=Cl([o,b.relativePath]),k=r.concat(b);d.children&&d.children.length>0&&(Sr(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),QE(d.children,t,k,w)),!(d.path==null&&!d.index)&&t.push({path:w,score:u8(w,d.index),routesMeta:k})};return e.forEach((d,f)=>{var c;if(d.path===""||!((c=d.path)!=null&&c.includes("?")))l(d,f);else for(let b of ez(d.path))l(d,f,b)}),t}function ez(e){let t=e.split("/");if(t.length===0)return[];let[r,...o]=t,l=r.endsWith("?"),d=r.replace(/\?$/,"");if(o.length===0)return l?[d,""]:[d];let f=ez(o.join("/")),c=[];return c.push(...f.map(b=>b===""?d:[d,b].join("/"))),l&&c.push(...f),c.map(b=>e.startsWith("/")&&b===""?"/":b)}function n8(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:d8(t.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const i8=/^:[\w-]+$/,o8=3,a8=2,s8=1,l8=10,c8=-2,NC=e=>e==="*";function u8(e,t){let r=e.split("/"),o=r.length;return r.some(NC)&&(o+=c8),t&&(o+=a8),r.filter(l=>!NC(l)).reduce((l,d)=>l+(i8.test(d)?o8:d===""?s8:l8),o)}function d8(e,t){return e.length===t.length&&e.slice(0,-1).every((o,l)=>o===t[l])?e[e.length-1]-t[t.length-1]:0}function h8(e,t){let{routesMeta:r}=e,o={},l="/",d=[];for(let f=0;f<r.length;++f){let c=r[f],b=f===r.length-1,w=l==="/"?t:t.slice(l.length)||"/",k=p8({path:c.relativePath,caseSensitive:c.caseSensitive,end:b},w);if(!k)return null;Object.assign(o,k.params);let z=c.route;d.push({params:o,pathname:Cl([l,k.pathname]),pathnameBase:v8(Cl([l,k.pathnameBase])),route:z}),k.pathnameBase!=="/"&&(l=Cl([l,k.pathnameBase]))}return d}function p8(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,o]=f8(e.path,e.caseSensitive,e.end),l=t.match(r);if(!l)return null;let d=l[0],f=d.replace(/(.)\/+$/,"$1"),c=l.slice(1);return{params:o.reduce((w,k,z)=>{let{paramName:P,isOptional:V}=k;if(P==="*"){let H=c[z]||"";f=d.slice(0,d.length-H.length).replace(/(.)\/+$/,"$1")}const U=c[z];return V&&!U?w[P]=void 0:w[P]=(U||"").replace(/%2F/g,"/"),w},{}),pathname:d,pathnameBase:f,pattern:e}}function f8(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),sd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,c,b)=>(o.push({paramName:c,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),o]}function m8(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return sd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function cf(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,o=e.charAt(r);return o&&o!=="/"?null:e.slice(r)||"/"}function g8(e,t){t===void 0&&(t="/");let{pathname:r,search:o="",hash:l=""}=typeof e=="string"?Os(e):e;return{pathname:r?r.startsWith("/")?r:y8(r,t):t,search:_8(o),hash:x8(l)}}function y8(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function h_(e,t,r,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tz(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function rz(e,t){let r=tz(e);return t?r.map((o,l)=>l===e.length-1?o.pathname:o.pathnameBase):r.map(o=>o.pathnameBase)}function nz(e,t,r,o){o===void 0&&(o=!1);let l;typeof e=="string"?l=Os(e):(l=Tn({},e),Sr(!l.pathname||!l.pathname.includes("?"),h_("?","pathname","search",l)),Sr(!l.pathname||!l.pathname.includes("#"),h_("#","pathname","hash",l)),Sr(!l.search||!l.search.includes("#"),h_("#","search","hash",l)));let d=e===""||l.pathname==="",f=d?"/":l.pathname,c;if(f==null)c=r;else{let z=t.length-1;if(!o&&f.startsWith("..")){let P=f.split("/");for(;P[0]==="..";)P.shift(),z-=1;l.pathname=P.join("/")}c=z>=0?t[z]:"/"}let b=g8(l,c),w=f&&f!=="/"&&f.endsWith("/"),k=(d||f===".")&&r.endsWith("/");return!b.pathname.endsWith("/")&&(w||k)&&(b.pathname+="/"),b}const Cl=e=>e.join("/").replace(/\/\/+/g,"/"),v8=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_8=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,x8=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Pb{constructor(t,r,o,l){l===void 0&&(l=!1),this.status=t,this.statusText=r||"",this.internal=l,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}}function Eb(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const iz=["post","put","patch","delete"],b8=new Set(iz),w8=["get",...iz],S8=new Set(w8),C8=new Set([301,302,303,307,308]),k8=new Set([307,308]),p_={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},I8={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Nh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},zb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,T8=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),oz="remix-router-transitions";function P8(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",o=!r;Sr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let l;if(e.mapRouteProperties)l=e.mapRouteProperties;else if(e.detectErrorBoundary){let A=e.detectErrorBoundary;l=$=>({hasErrorBoundary:A($)})}else l=T8;let d={},f=Ix(e.routes,l,void 0,d),c,b=e.basename||"/",w=e.unstable_dataStrategy||A8,k=Tn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},e.future),z=null,P=new Set,V=null,U=null,H=null,X=e.hydrationData!=null,B=Du(f,e.history.location,b),L=null;if(B==null){let A=Jo(404,{pathname:e.history.location.pathname}),{matches:$,route:W}=XC(f);B=$,L={[W.id]:A}}let G,te=B.some(A=>A.route.lazy),ne=B.some(A=>A.route.loader);if(te)G=!1;else if(!ne)G=!0;else if(k.v7_partialHydration){let A=e.hydrationData?e.hydrationData.loaderData:null,$=e.hydrationData?e.hydrationData.errors:null,W=Q=>Q.route.loader?typeof Q.route.loader=="function"&&Q.route.loader.hydrate===!0?!1:A&&A[Q.route.id]!==void 0||$&&$[Q.route.id]!==void 0:!0;if($){let Q=B.findIndex(ie=>$[ie.route.id]!==void 0);G=B.slice(0,Q+1).every(W)}else G=B.every(W)}else G=e.hydrationData!=null;let he,Z={historyAction:e.history.action,location:e.history.location,matches:B,initialized:G,navigation:p_,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||L,fetchers:new Map,blockers:new Map},ue=qn.Pop,Ce=!1,ye,Ee=!1,Se=new Map,ze=null,We=!1,Fe=!1,Me=[],Oe=[],ke=new Map,Ge=0,Ke=-1,ht=new Map,vt=new Set,gt=new Map,Ct=new Map,At=new Set,Zt=new Map,kt=new Map,$e=!1;function rt(){if(z=e.history.listen(A=>{let{action:$,location:W,delta:Q}=A;if($e){$e=!1;return}sd(kt.size===0||Q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ie=Kt({currentLocation:Z.location,nextLocation:W,historyAction:$});if(ie&&Q!=null){$e=!0,e.history.go(Q*-1),Qe(ie,{state:"blocked",location:W,proceed(){Qe(ie,{state:"proceeding",proceed:void 0,reset:void 0,location:W}),e.history.go(Q)},reset(){let xe=new Map(Z.blockers);xe.set(ie,Nh),Mt({blockers:xe})}});return}return yt($,W)}),r){H8(t,Se);let A=()=>W8(t,Se);t.addEventListener("pagehide",A),ze=()=>t.removeEventListener("pagehide",A)}return Z.initialized||yt(qn.Pop,Z.location,{initialHydration:!0}),he}function pt(){z&&z(),ze&&ze(),P.clear(),ye&&ye.abort(),Z.fetchers.forEach((A,$)=>rr($)),Z.blockers.forEach((A,$)=>xr($))}function Dt(A){return P.add(A),()=>P.delete(A)}function Mt(A,$){$===void 0&&($={}),Z=Tn({},Z,A);let W=[],Q=[];k.v7_fetcherPersist&&Z.fetchers.forEach((ie,xe)=>{ie.state==="idle"&&(At.has(xe)?Q.push(xe):W.push(xe))}),[...P].forEach(ie=>ie(Z,{deletedFetchers:Q,unstable_viewTransitionOpts:$.viewTransitionOpts,unstable_flushSync:$.flushSync===!0})),k.v7_fetcherPersist&&(W.forEach(ie=>Z.fetchers.delete(ie)),Q.forEach(ie=>rr(ie)))}function gr(A,$,W){var Q,ie;let{flushSync:xe}=W===void 0?{}:W,fe=Z.actionData!=null&&Z.navigation.formMethod!=null&&Ma(Z.navigation.formMethod)&&Z.navigation.state==="loading"&&((Q=A.state)==null?void 0:Q._isRedirect)!==!0,oe;$.actionData?Object.keys($.actionData).length>0?oe=$.actionData:oe=null:fe?oe=Z.actionData:oe=null;let _e=$.loaderData?ZC(Z.loaderData,$.loaderData,$.matches||[],$.errors):Z.loaderData,De=Z.blockers;De.size>0&&(De=new Map(De),De.forEach((Ye,St)=>De.set(St,Nh)));let Ue=Ce===!0||Z.navigation.formMethod!=null&&Ma(Z.navigation.formMethod)&&((ie=A.state)==null?void 0:ie._isRedirect)!==!0;c&&(f=c,c=void 0),We||ue===qn.Pop||(ue===qn.Push?e.history.push(A,A.state):ue===qn.Replace&&e.history.replace(A,A.state));let qe;if(ue===qn.Pop){let Ye=Se.get(Z.location.pathname);Ye&&Ye.has(A.pathname)?qe={currentLocation:Z.location,nextLocation:A}:Se.has(A.pathname)&&(qe={currentLocation:A,nextLocation:Z.location})}else if(Ee){let Ye=Se.get(Z.location.pathname);Ye?Ye.add(A.pathname):(Ye=new Set([A.pathname]),Se.set(Z.location.pathname,Ye)),qe={currentLocation:Z.location,nextLocation:A}}Mt(Tn({},$,{actionData:oe,loaderData:_e,historyAction:ue,location:A,initialized:!0,navigation:p_,revalidation:"idle",restoreScrollPosition:gn(A,$.matches||Z.matches),preventScrollReset:Ue,blockers:De}),{viewTransitionOpts:qe,flushSync:xe===!0}),ue=qn.Pop,Ce=!1,Ee=!1,We=!1,Fe=!1,Me=[],Oe=[]}async function Cr(A,$){if(typeof A=="number"){e.history.go(A);return}let W=Tx(Z.location,Z.matches,b,k.v7_prependBasename,A,k.v7_relativeSplatPath,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:Q,submission:ie,error:xe}=jC(k.v7_normalizeFormMethod,!1,W,$),fe=Z.location,oe=Bp(Z.location,Q,$&&$.state);oe=Tn({},oe,e.history.encodeLocation(oe));let _e=$&&$.replace!=null?$.replace:void 0,De=qn.Push;_e===!0?De=qn.Replace:_e===!1||ie!=null&&Ma(ie.formMethod)&&ie.formAction===Z.location.pathname+Z.location.search&&(De=qn.Replace);let Ue=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,qe=($&&$.unstable_flushSync)===!0,Ye=Kt({currentLocation:fe,nextLocation:oe,historyAction:De});if(Ye){Qe(Ye,{state:"blocked",location:oe,proceed(){Qe(Ye,{state:"proceeding",proceed:void 0,reset:void 0,location:oe}),Cr(A,$)},reset(){let St=new Map(Z.blockers);St.set(Ye,Nh),Mt({blockers:St})}});return}return await yt(De,oe,{submission:ie,pendingError:xe,preventScrollReset:Ue,replace:$&&$.replace,enableViewTransition:$&&$.unstable_viewTransition,flushSync:qe})}function lr(){if(kr(),Mt({revalidation:"loading"}),Z.navigation.state!=="submitting"){if(Z.navigation.state==="idle"){yt(Z.historyAction,Z.location,{startUninterruptedRevalidation:!0});return}yt(ue||Z.historyAction,Z.navigation.location,{overrideNavigation:Z.navigation})}}async function yt(A,$,W){ye&&ye.abort(),ye=null,ue=A,We=(W&&W.startUninterruptedRevalidation)===!0,Jt(Z.location,Z.matches),Ce=(W&&W.preventScrollReset)===!0,Ee=(W&&W.enableViewTransition)===!0;let Q=c||f,ie=W&&W.overrideNavigation,xe=Du(Q,$,b),fe=(W&&W.flushSync)===!0;if(!xe){let Ye=Jo(404,{pathname:$.pathname}),{matches:St,route:st}=XC(Q);$t(),gr($,{matches:St,loaderData:{},errors:{[st.id]:Ye}},{flushSync:fe});return}if(Z.initialized&&!Fe&&O8(Z.location,$)&&!(W&&W.submission&&Ma(W.submission.formMethod))){gr($,{matches:xe},{flushSync:fe});return}ye=new AbortController;let oe=pu(e.history,$,ye.signal,W&&W.submission),_e;if(W&&W.pendingError)_e=[up(xe).route.id,{type:wn.error,error:W.pendingError}];else if(W&&W.submission&&Ma(W.submission.formMethod)){let Ye=await Dr(oe,$,W.submission,xe,{replace:W.replace,flushSync:fe});if(Ye.shortCircuited)return;_e=Ye.pendingActionResult,ie=f_($,W.submission),fe=!1,oe=pu(e.history,oe.url,oe.signal)}let{shortCircuited:De,loaderData:Ue,errors:qe}=await er(oe,$,xe,ie,W&&W.submission,W&&W.fetcherSubmission,W&&W.replace,W&&W.initialHydration===!0,fe,_e);De||(ye=null,gr($,Tn({matches:xe},KC(_e),{loaderData:Ue,errors:qe})))}async function Dr(A,$,W,Q,ie){ie===void 0&&(ie={}),kr();let xe=V8($,W);Mt({navigation:xe},{flushSync:ie.flushSync===!0});let fe,oe=Ex(Q,$);if(!oe.route.action&&!oe.route.lazy)fe={type:wn.error,error:Jo(405,{method:A.method,pathname:$.pathname,routeId:oe.route.id})};else if(fe=(await Ft("action",A,[oe],Q))[0],A.signal.aborted)return{shortCircuited:!0};if(cc(fe)){let _e;return ie&&ie.replace!=null?_e=ie.replace:_e=WC(fe.response.headers.get("Location"),new URL(A.url),b)===Z.location.pathname+Z.location.search,await ir(A,fe,{submission:W,replace:_e}),{shortCircuited:!0}}if(lc(fe))throw Jo(400,{type:"defer-action"});if(ra(fe)){let _e=up(Q,oe.route.id);return(ie&&ie.replace)!==!0&&(ue=qn.Push),{pendingActionResult:[_e.route.id,fe]}}return{pendingActionResult:[oe.route.id,fe]}}async function er(A,$,W,Q,ie,xe,fe,oe,_e,De){let Ue=Q||f_($,ie),qe=ie||xe||QC(Ue),Ye=c||f,[St,st]=VC(e.history,Z,W,qe,$,k.v7_partialHydration&&oe===!0,k.unstable_skipActionErrorRevalidation,Fe,Me,Oe,At,gt,vt,Ye,b,De);if($t(Xt=>!(W&&W.some(Tt=>Tt.route.id===Xt))||St&&St.some(Tt=>Tt.route.id===Xt)),Ke=++Ge,St.length===0&&st.length===0){let Xt=Wt();return gr($,Tn({matches:W,loaderData:{},errors:De&&ra(De[1])?{[De[0]]:De[1].error}:null},KC(De),Xt?{fetchers:new Map(Z.fetchers)}:{}),{flushSync:_e}),{shortCircuited:!0}}if(!We&&(!k.v7_partialHydration||!oe)){st.forEach(Tt=>{let qr=Z.fetchers.get(Tt.key),dr=jh(void 0,qr?qr.data:void 0);Z.fetchers.set(Tt.key,dr)});let Xt;De&&!ra(De[1])?Xt={[De[0]]:De[1].data}:Z.actionData&&(Object.keys(Z.actionData).length===0?Xt=null:Xt=Z.actionData),Mt(Tn({navigation:Ue},Xt!==void 0?{actionData:Xt}:{},st.length>0?{fetchers:new Map(Z.fetchers)}:{}),{flushSync:_e})}st.forEach(Xt=>{ke.has(Xt.key)&&it(Xt.key),Xt.controller&&ke.set(Xt.key,Xt.controller)});let Lt=()=>st.forEach(Xt=>it(Xt.key));ye&&ye.signal.addEventListener("abort",Lt);let{loaderResults:Re,fetcherResults:Ne}=await qt(Z.matches,W,St,st,A);if(A.signal.aborted)return{shortCircuited:!0};ye&&ye.signal.removeEventListener("abort",Lt),st.forEach(Xt=>ke.delete(Xt.key));let nt=JC([...Re,...Ne]);if(nt){if(nt.idx>=St.length){let Xt=st[nt.idx-St.length].key;vt.add(Xt)}return await ir(A,nt.result,{replace:fe}),{shortCircuited:!0}}let{loaderData:ut,errors:_t}=qC(Z,W,St,Re,De,st,Ne,Zt);Zt.forEach((Xt,Tt)=>{Xt.subscribe(qr=>{(qr||Xt.done)&&Zt.delete(Tt)})}),k.v7_partialHydration&&oe&&Z.errors&&Object.entries(Z.errors).filter(Xt=>{let[Tt]=Xt;return!St.some(qr=>qr.route.id===Tt)}).forEach(Xt=>{let[Tt,qr]=Xt;_t=Object.assign(_t||{},{[Tt]:qr})});let ur=Wt(),tr=Rt(Ke),yr=ur||tr||st.length>0;return Tn({loaderData:ut,errors:_t},yr?{fetchers:new Map(Z.fetchers)}:{})}function Fr(A,$,W,Q){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ke.has(A)&&it(A);let ie=(Q&&Q.unstable_flushSync)===!0,xe=c||f,fe=Tx(Z.location,Z.matches,b,k.v7_prependBasename,W,k.v7_relativeSplatPath,$,Q==null?void 0:Q.relative),oe=Du(xe,fe,b);if(!oe){sr(A,$,Jo(404,{pathname:fe}),{flushSync:ie});return}let{path:_e,submission:De,error:Ue}=jC(k.v7_normalizeFormMethod,!0,fe,Q);if(Ue){sr(A,$,Ue,{flushSync:ie});return}let qe=Ex(oe,_e);if(Ce=(Q&&Q.preventScrollReset)===!0,De&&Ma(De.formMethod)){Ae(A,$,_e,qe,oe,ie,De);return}gt.set(A,{routeId:$,path:_e}),cr(A,$,_e,qe,oe,ie,De)}async function Ae(A,$,W,Q,ie,xe,fe){if(kr(),gt.delete(A),!Q.route.action&&!Q.route.lazy){let dr=Jo(405,{method:fe.formMethod,pathname:W,routeId:$});sr(A,$,dr,{flushSync:xe});return}let oe=Z.fetchers.get(A);Pr(A,U8(fe,oe),{flushSync:xe});let _e=new AbortController,De=pu(e.history,W,_e.signal,fe);ke.set(A,_e);let Ue=Ge,Ye=(await Ft("action",De,[Q],ie))[0];if(De.signal.aborted){ke.get(A)===_e&&ke.delete(A);return}if(k.v7_fetcherPersist&&At.has(A)){if(cc(Ye)||ra(Ye)){Pr(A,ol(void 0));return}}else{if(cc(Ye))if(ke.delete(A),Ke>Ue){Pr(A,ol(void 0));return}else return vt.add(A),Pr(A,jh(fe)),ir(De,Ye,{fetcherSubmission:fe});if(ra(Ye)){sr(A,$,Ye.error);return}}if(lc(Ye))throw Jo(400,{type:"defer-action"});let St=Z.navigation.location||Z.location,st=pu(e.history,St,_e.signal),Lt=c||f,Re=Z.navigation.state!=="idle"?Du(Lt,Z.navigation.location,b):Z.matches;Sr(Re,"Didn't find any matches after fetcher action");let Ne=++Ge;ht.set(A,Ne);let nt=jh(fe,Ye.data);Z.fetchers.set(A,nt);let[ut,_t]=VC(e.history,Z,Re,fe,St,!1,k.unstable_skipActionErrorRevalidation,Fe,Me,Oe,At,gt,vt,Lt,b,[Q.route.id,Ye]);_t.filter(dr=>dr.key!==A).forEach(dr=>{let Mn=dr.key,ao=Z.fetchers.get(Mn),Ir=jh(void 0,ao?ao.data:void 0);Z.fetchers.set(Mn,Ir),ke.has(Mn)&&it(Mn),dr.controller&&ke.set(Mn,dr.controller)}),Mt({fetchers:new Map(Z.fetchers)});let ur=()=>_t.forEach(dr=>it(dr.key));_e.signal.addEventListener("abort",ur);let{loaderResults:tr,fetcherResults:yr}=await qt(Z.matches,Re,ut,_t,st);if(_e.signal.aborted)return;_e.signal.removeEventListener("abort",ur),ht.delete(A),ke.delete(A),_t.forEach(dr=>ke.delete(dr.key));let Xt=JC([...tr,...yr]);if(Xt){if(Xt.idx>=ut.length){let dr=_t[Xt.idx-ut.length].key;vt.add(dr)}return ir(st,Xt.result)}let{loaderData:Tt,errors:qr}=qC(Z,Z.matches,ut,tr,void 0,_t,yr,Zt);if(Z.fetchers.has(A)){let dr=ol(Ye.data);Z.fetchers.set(A,dr)}Rt(Ne),Z.navigation.state==="loading"&&Ne>Ke?(Sr(ue,"Expected pending action"),ye&&ye.abort(),gr(Z.navigation.location,{matches:Re,loaderData:Tt,errors:qr,fetchers:new Map(Z.fetchers)})):(Mt({errors:qr,loaderData:ZC(Z.loaderData,Tt,Re,qr),fetchers:new Map(Z.fetchers)}),Fe=!1)}async function cr(A,$,W,Q,ie,xe,fe){let oe=Z.fetchers.get(A);Pr(A,jh(fe,oe?oe.data:void 0),{flushSync:xe});let _e=new AbortController,De=pu(e.history,W,_e.signal);ke.set(A,_e);let Ue=Ge,Ye=(await Ft("loader",De,[Q],ie))[0];if(lc(Ye)&&(Ye=await cz(Ye,De.signal,!0)||Ye),ke.get(A)===_e&&ke.delete(A),!De.signal.aborted){if(At.has(A)){Pr(A,ol(void 0));return}if(cc(Ye))if(Ke>Ue){Pr(A,ol(void 0));return}else{vt.add(A),await ir(De,Ye);return}if(ra(Ye)){sr(A,$,Ye.error);return}Sr(!lc(Ye),"Unhandled fetcher deferred data"),Pr(A,ol(Ye.data))}}async function ir(A,$,W){let{submission:Q,fetcherSubmission:ie,replace:xe}=W===void 0?{}:W;$.response.headers.has("X-Remix-Revalidate")&&(Fe=!0);let fe=$.response.headers.get("Location");Sr(fe,"Expected a Location header on the redirect Response"),fe=WC(fe,new URL(A.url),b);let oe=Bp(Z.location,fe,{_isRedirect:!0});if(r){let St=!1;if($.response.headers.has("X-Remix-Reload-Document"))St=!0;else if(zb.test(fe)){const st=e.history.createURL(fe);St=st.origin!==t.location.origin||cf(st.pathname,b)==null}if(St){xe?t.location.replace(fe):t.location.assign(fe);return}}ye=null;let _e=xe===!0?qn.Replace:qn.Push,{formMethod:De,formAction:Ue,formEncType:qe}=Z.navigation;!Q&&!ie&&De&&Ue&&qe&&(Q=QC(Z.navigation));let Ye=Q||ie;if(k8.has($.response.status)&&Ye&&Ma(Ye.formMethod))await yt(_e,oe,{submission:Tn({},Ye,{formAction:fe}),preventScrollReset:Ce});else{let St=f_(oe,Q);await yt(_e,oe,{overrideNavigation:St,fetcherSubmission:ie,preventScrollReset:Ce})}}async function Ft(A,$,W,Q){try{let ie=await D8(w,A,$,W,Q,d,l);return await Promise.all(ie.map((xe,fe)=>{if(F8(xe)){let oe=xe.result;return{type:wn.redirect,response:$8(oe,$,W[fe].route.id,Q,b,k.v7_relativeSplatPath)}}return L8(xe)}))}catch(ie){return W.map(()=>({type:wn.error,error:ie}))}}async function qt(A,$,W,Q,ie){let[xe,...fe]=await Promise.all([W.length?Ft("loader",ie,W,$):[],...Q.map(oe=>{if(oe.matches&&oe.match&&oe.controller){let _e=pu(e.history,oe.path,oe.controller.signal);return Ft("loader",_e,[oe.match],oe.matches).then(De=>De[0])}else return Promise.resolve({type:wn.error,error:Jo(404,{pathname:oe.path})})})]);return await Promise.all([YC(A,W,xe,xe.map(()=>ie.signal),!1,Z.loaderData),YC(A,Q.map(oe=>oe.match),fe,Q.map(oe=>oe.controller?oe.controller.signal:null),!0)]),{loaderResults:xe,fetcherResults:fe}}function kr(){Fe=!0,Me.push(...$t()),gt.forEach((A,$)=>{ke.has($)&&(Oe.push($),it($))})}function Pr(A,$,W){W===void 0&&(W={}),Z.fetchers.set(A,$),Mt({fetchers:new Map(Z.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function sr(A,$,W,Q){Q===void 0&&(Q={});let ie=up(Z.matches,$);rr(A),Mt({errors:{[ie.route.id]:W},fetchers:new Map(Z.fetchers)},{flushSync:(Q&&Q.flushSync)===!0})}function nr(A){return k.v7_fetcherPersist&&(Ct.set(A,(Ct.get(A)||0)+1),At.has(A)&&At.delete(A)),Z.fetchers.get(A)||I8}function rr(A){let $=Z.fetchers.get(A);ke.has(A)&&!($&&$.state==="loading"&&ht.has(A))&&it(A),gt.delete(A),ht.delete(A),vt.delete(A),At.delete(A),Z.fetchers.delete(A)}function Rr(A){if(k.v7_fetcherPersist){let $=(Ct.get(A)||0)-1;$<=0?(Ct.delete(A),At.add(A)):Ct.set(A,$)}else rr(A);Mt({fetchers:new Map(Z.fetchers)})}function it(A){let $=ke.get(A);Sr($,"Expected fetch controller: "+A),$.abort(),ke.delete(A)}function Le(A){for(let $ of A){let W=nr($),Q=ol(W.data);Z.fetchers.set($,Q)}}function Wt(){let A=[],$=!1;for(let W of vt){let Q=Z.fetchers.get(W);Sr(Q,"Expected fetcher: "+W),Q.state==="loading"&&(vt.delete(W),A.push(W),$=!0)}return Le(A),$}function Rt(A){let $=[];for(let[W,Q]of ht)if(Q<A){let ie=Z.fetchers.get(W);Sr(ie,"Expected fetcher: "+W),ie.state==="loading"&&(it(W),ht.delete(W),$.push(W))}return Le($),$.length>0}function _r(A,$){let W=Z.blockers.get(A)||Nh;return kt.get(A)!==$&&kt.set(A,$),W}function xr(A){Z.blockers.delete(A),kt.delete(A)}function Qe(A,$){let W=Z.blockers.get(A)||Nh;Sr(W.state==="unblocked"&&$.state==="blocked"||W.state==="blocked"&&$.state==="blocked"||W.state==="blocked"&&$.state==="proceeding"||W.state==="blocked"&&$.state==="unblocked"||W.state==="proceeding"&&$.state==="unblocked","Invalid blocker state transition: "+W.state+" -> "+$.state);let Q=new Map(Z.blockers);Q.set(A,$),Mt({blockers:Q})}function Kt(A){let{currentLocation:$,nextLocation:W,historyAction:Q}=A;if(kt.size===0)return;kt.size>1&&sd(!1,"A router only supports one blocker at a time");let ie=Array.from(kt.entries()),[xe,fe]=ie[ie.length-1],oe=Z.blockers.get(xe);if(!(oe&&oe.state==="proceeding")&&fe({currentLocation:$,nextLocation:W,historyAction:Q}))return xe}function $t(A){let $=[];return Zt.forEach((W,Q)=>{(!A||A(Q))&&(W.cancel(),$.push(Q),Zt.delete(Q))}),$}function ar(A,$,W){if(V=A,H=$,U=W||null,!X&&Z.navigation===p_){X=!0;let Q=gn(Z.location,Z.matches);Q!=null&&Mt({restoreScrollPosition:Q})}return()=>{V=null,H=null,U=null}}function Gr(A,$){return U&&U(A,$.map(Q=>r8(Q,Z.loaderData)))||A.key}function Jt(A,$){if(V&&H){let W=Gr(A,$);V[W]=H()}}function gn(A,$){if(V){let W=Gr(A,$),Q=V[W];if(typeof Q=="number")return Q}return null}function de(A){d={},c=Ix(A,l,void 0,d)}return he={get basename(){return b},get future(){return k},get state(){return Z},get routes(){return f},get window(){return t},initialize:rt,subscribe:Dt,enableScrollRestoration:ar,navigate:Cr,fetch:Fr,revalidate:lr,createHref:A=>e.history.createHref(A),encodeLocation:A=>e.history.encodeLocation(A),getFetcher:nr,deleteFetcher:Rr,dispose:pt,getBlocker:_r,deleteBlocker:xr,_internalFetchControllers:ke,_internalActiveDeferreds:Zt,_internalSetRoutes:de},he}function E8(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Tx(e,t,r,o,l,d,f,c){let b,w;if(f){b=[];for(let z of t)if(b.push(z),z.route.id===f){w=z;break}}else b=t,w=t[t.length-1];let k=nz(l||".",rz(b,d),cf(e.pathname,r)||e.pathname,c==="path");return l==null&&(k.search=e.search,k.hash=e.hash),(l==null||l===""||l===".")&&w&&w.route.index&&!Mb(k.search)&&(k.search=k.search?k.search.replace(/^\?/,"?index&"):"?index"),o&&r!=="/"&&(k.pathname=k.pathname==="/"?r:Cl([r,k.pathname])),lf(k)}function jC(e,t,r,o){if(!o||!E8(o))return{path:r};if(o.formMethod&&!j8(o.formMethod))return{path:r,error:Jo(405,{method:o.formMethod})};let l=()=>({path:r,error:Jo(400,{type:"invalid-body"})}),d=o.formMethod||"get",f=e?d.toUpperCase():d.toLowerCase(),c=sz(r);if(o.body!==void 0){if(o.formEncType==="text/plain"){if(!Ma(f))return l();let P=typeof o.body=="string"?o.body:o.body instanceof FormData||o.body instanceof URLSearchParams?Array.from(o.body.entries()).reduce((V,U)=>{let[H,X]=U;return""+V+H+"="+X+`
`},""):String(o.body);return{path:r,submission:{formMethod:f,formAction:c,formEncType:o.formEncType,formData:void 0,json:void 0,text:P}}}else if(o.formEncType==="application/json"){if(!Ma(f))return l();try{let P=typeof o.body=="string"?JSON.parse(o.body):o.body;return{path:r,submission:{formMethod:f,formAction:c,formEncType:o.formEncType,formData:void 0,json:P,text:void 0}}}catch{return l()}}}Sr(typeof FormData=="function","FormData is not available in this environment");let b,w;if(o.formData)b=Px(o.formData),w=o.formData;else if(o.body instanceof FormData)b=Px(o.body),w=o.body;else if(o.body instanceof URLSearchParams)b=o.body,w=GC(b);else if(o.body==null)b=new URLSearchParams,w=new FormData;else try{b=new URLSearchParams(o.body),w=GC(b)}catch{return l()}let k={formMethod:f,formAction:c,formEncType:o&&o.formEncType||"application/x-www-form-urlencoded",formData:w,json:void 0,text:void 0};if(Ma(k.formMethod))return{path:r,submission:k};let z=Os(r);return t&&z.search&&Mb(z.search)&&b.append("index",""),z.search="?"+b,{path:lf(z),submission:k}}function z8(e,t){let r=e;if(t){let o=e.findIndex(l=>l.route.id===t);o>=0&&(r=e.slice(0,o))}return r}function VC(e,t,r,o,l,d,f,c,b,w,k,z,P,V,U,H){let X=H?ra(H[1])?H[1].error:H[1].data:void 0,B=e.createURL(t.location),L=e.createURL(l),G=H&&ra(H[1])?H[0]:void 0,te=G?z8(r,G):r,ne=H?H[1].statusCode:void 0,he=f&&ne&&ne>=400,Z=te.filter((Ce,ye)=>{let{route:Ee}=Ce;if(Ee.lazy)return!0;if(Ee.loader==null)return!1;if(d)return typeof Ee.loader!="function"||Ee.loader.hydrate?!0:t.loaderData[Ee.id]===void 0&&(!t.errors||t.errors[Ee.id]===void 0);if(M8(t.loaderData,t.matches[ye],Ce)||b.some(We=>We===Ce.route.id))return!0;let Se=t.matches[ye],ze=Ce;return UC(Ce,Tn({currentUrl:B,currentParams:Se.params,nextUrl:L,nextParams:ze.params},o,{actionResult:X,unstable_actionStatus:ne,defaultShouldRevalidate:he?!1:c||B.pathname+B.search===L.pathname+L.search||B.search!==L.search||az(Se,ze)}))}),ue=[];return z.forEach((Ce,ye)=>{if(d||!r.some(Fe=>Fe.route.id===Ce.routeId)||k.has(ye))return;let Ee=Du(V,Ce.path,U);if(!Ee){ue.push({key:ye,routeId:Ce.routeId,path:Ce.path,matches:null,match:null,controller:null});return}let Se=t.fetchers.get(ye),ze=Ex(Ee,Ce.path),We=!1;P.has(ye)?We=!1:w.includes(ye)?We=!0:Se&&Se.state!=="idle"&&Se.data===void 0?We=c:We=UC(ze,Tn({currentUrl:B,currentParams:t.matches[t.matches.length-1].params,nextUrl:L,nextParams:r[r.length-1].params},o,{actionResult:X,unstable_actionStatus:ne,defaultShouldRevalidate:he?!1:c})),We&&ue.push({key:ye,routeId:Ce.routeId,path:Ce.path,matches:Ee,match:ze,controller:new AbortController})}),[Z,ue]}function M8(e,t,r){let o=!t||r.route.id!==t.route.id,l=e[r.route.id]===void 0;return o||l}function az(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function UC(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function HC(e,t,r){if(!e.lazy)return;let o=await e.lazy();if(!e.lazy)return;let l=r[e.id];Sr(l,"No route found in manifest");let d={};for(let f in o){let b=l[f]!==void 0&&f!=="hasErrorBoundary";sd(!b,'Route "'+l.id+'" has a static property "'+f+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+f+'" will be ignored.')),!b&&!e8.has(f)&&(d[f]=o[f])}Object.assign(l,d),Object.assign(l,Tn({},t(l),{lazy:void 0}))}function A8(e){return Promise.all(e.matches.map(t=>t.resolve()))}async function D8(e,t,r,o,l,d,f,c){let b=o.reduce((z,P)=>z.add(P.route.id),new Set),w=new Set,k=await e({matches:l.map(z=>{let P=b.has(z.route.id);return Tn({},z,{shouldLoad:P,resolve:U=>(w.add(z.route.id),P?R8(t,r,z,d,f,U,c):Promise.resolve({type:wn.data,result:void 0}))})}),request:r,params:l[0].params,context:c});return l.forEach(z=>Sr(w.has(z.route.id),'`match.resolve()` was not called for route id "'+z.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),k.filter((z,P)=>b.has(l[P].route.id))}async function R8(e,t,r,o,l,d,f){let c,b,w=k=>{let z,P=new Promise((H,X)=>z=X);b=()=>z(),t.signal.addEventListener("abort",b);let V=H=>typeof k!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):k({request:t,params:r.params,context:f},...H!==void 0?[H]:[]),U;return d?U=d(H=>V(H)):U=(async()=>{try{return{type:"data",result:await V()}}catch(H){return{type:"error",result:H}}})(),Promise.race([U,P])};try{let k=r.route[e];if(r.route.lazy)if(k){let z,[P]=await Promise.all([w(k).catch(V=>{z=V}),HC(r.route,l,o)]);if(z!==void 0)throw z;c=P}else if(await HC(r.route,l,o),k=r.route[e],k)c=await w(k);else if(e==="action"){let z=new URL(t.url),P=z.pathname+z.search;throw Jo(405,{method:t.method,pathname:P,routeId:r.route.id})}else return{type:wn.data,result:void 0};else if(k)c=await w(k);else{let z=new URL(t.url),P=z.pathname+z.search;throw Jo(404,{pathname:P})}Sr(c.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(k){return{type:wn.error,result:k}}finally{b&&t.signal.removeEventListener("abort",b)}return c}async function L8(e){let{result:t,type:r,status:o}=e;if(lz(t)){let f;try{let c=t.headers.get("Content-Type");c&&/\bapplication\/json\b/.test(c)?t.body==null?f=null:f=await t.json():f=await t.text()}catch(c){return{type:wn.error,error:c}}return r===wn.error?{type:wn.error,error:new Pb(t.status,t.statusText,f),statusCode:t.status,headers:t.headers}:{type:wn.data,data:f,statusCode:t.status,headers:t.headers}}if(r===wn.error)return{type:wn.error,error:t,statusCode:Eb(t)?t.status:o};if(N8(t)){var l,d;return{type:wn.deferred,deferredData:t,statusCode:(l=t.init)==null?void 0:l.status,headers:((d=t.init)==null?void 0:d.headers)&&new Headers(t.init.headers)}}return{type:wn.data,data:t,statusCode:o}}function $8(e,t,r,o,l,d){let f=e.headers.get("Location");if(Sr(f,"Redirects returned/thrown from loaders/actions must have a Location header"),!zb.test(f)){let c=o.slice(0,o.findIndex(b=>b.route.id===r)+1);f=Tx(new URL(t.url),c,l,!0,f,d),e.headers.set("Location",f)}return e}function WC(e,t,r){if(zb.test(e)){let o=e,l=o.startsWith("//")?new URL(t.protocol+o):new URL(o),d=cf(l.pathname,r)!=null;if(l.origin===t.origin&&d)return l.pathname+l.search+l.hash}return e}function pu(e,t,r,o){let l=e.createURL(sz(t)).toString(),d={signal:r};if(o&&Ma(o.formMethod)){let{formMethod:f,formEncType:c}=o;d.method=f.toUpperCase(),c==="application/json"?(d.headers=new Headers({"Content-Type":c}),d.body=JSON.stringify(o.json)):c==="text/plain"?d.body=o.text:c==="application/x-www-form-urlencoded"&&o.formData?d.body=Px(o.formData):d.body=o.formData}return new Request(l,d)}function Px(e){let t=new URLSearchParams;for(let[r,o]of e.entries())t.append(r,typeof o=="string"?o:o.name);return t}function GC(e){let t=new FormData;for(let[r,o]of e.entries())t.append(r,o);return t}function B8(e,t,r,o,l,d){let f={},c=null,b,w=!1,k={},z=o&&ra(o[1])?o[1].error:void 0;return r.forEach((P,V)=>{let U=t[V].route.id;if(Sr(!cc(P),"Cannot handle redirect results in processLoaderData"),ra(P)){let H=P.error;if(z!==void 0&&(H=z,z=void 0),c=c||{},d)c[U]=H;else{let X=up(e,U);c[X.route.id]==null&&(c[X.route.id]=H)}f[U]=void 0,w||(w=!0,b=Eb(P.error)?P.error.status:500),P.headers&&(k[U]=P.headers)}else lc(P)?(l.set(U,P.deferredData),f[U]=P.deferredData.data,P.statusCode!=null&&P.statusCode!==200&&!w&&(b=P.statusCode),P.headers&&(k[U]=P.headers)):(f[U]=P.data,P.statusCode&&P.statusCode!==200&&!w&&(b=P.statusCode),P.headers&&(k[U]=P.headers))}),z!==void 0&&o&&(c={[o[0]]:z},f[o[0]]=void 0),{loaderData:f,errors:c,statusCode:b||200,loaderHeaders:k}}function qC(e,t,r,o,l,d,f,c){let{loaderData:b,errors:w}=B8(t,r,o,l,c,!1);for(let k=0;k<d.length;k++){let{key:z,match:P,controller:V}=d[k];Sr(f!==void 0&&f[k]!==void 0,"Did not find corresponding fetcher result");let U=f[k];if(!(V&&V.signal.aborted))if(ra(U)){let H=up(e.matches,P==null?void 0:P.route.id);w&&w[H.route.id]||(w=Tn({},w,{[H.route.id]:U.error})),e.fetchers.delete(z)}else if(cc(U))Sr(!1,"Unhandled fetcher revalidation redirect");else if(lc(U))Sr(!1,"Unhandled fetcher deferred data");else{let H=ol(U.data);e.fetchers.set(z,H)}}return{loaderData:b,errors:w}}function ZC(e,t,r,o){let l=Tn({},t);for(let d of r){let f=d.route.id;if(t.hasOwnProperty(f)?t[f]!==void 0&&(l[f]=t[f]):e[f]!==void 0&&d.route.loader&&(l[f]=e[f]),o&&o.hasOwnProperty(f))break}return l}function KC(e){return e?ra(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function up(e,t){return(t?e.slice(0,e.findIndex(o=>o.route.id===t)+1):[...e]).reverse().find(o=>o.route.hasErrorBoundary===!0)||e[0]}function XC(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Jo(e,t){let{pathname:r,routeId:o,method:l,type:d}=t===void 0?{}:t,f="Unknown Server Error",c="Unknown @remix-run/router error";return e===400?(f="Bad Request",l&&r&&o?c="You made a "+l+' request to "'+r+'" but '+('did not provide a `loader` for route "'+o+'", ')+"so there is no way to handle the request.":d==="defer-action"?c="defer() is not supported in actions":d==="invalid-body"&&(c="Unable to encode submission body")):e===403?(f="Forbidden",c='Route "'+o+'" does not match URL "'+r+'"'):e===404?(f="Not Found",c='No route matches URL "'+r+'"'):e===405&&(f="Method Not Allowed",l&&r&&o?c="You made a "+l.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+o+'", ')+"so there is no way to handle the request.":l&&(c='Invalid request method "'+l.toUpperCase()+'"')),new Pb(e||500,f,new Error(c),!0)}function JC(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(cc(r))return{result:r,idx:t}}}function sz(e){let t=typeof e=="string"?Os(e):e;return lf(Tn({},t,{hash:""}))}function O8(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function F8(e){return lz(e.result)&&C8.has(e.result.status)}function lc(e){return e.type===wn.deferred}function ra(e){return e.type===wn.error}function cc(e){return(e&&e.type)===wn.redirect}function N8(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function lz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function j8(e){return S8.has(e.toLowerCase())}function Ma(e){return b8.has(e.toLowerCase())}async function YC(e,t,r,o,l,d){for(let f=0;f<r.length;f++){let c=r[f],b=t[f];if(!b)continue;let w=e.find(z=>z.route.id===b.route.id),k=w!=null&&!az(w,b)&&(d&&d[b.route.id])!==void 0;if(lc(c)&&(l||k)){let z=o[f];Sr(z,"Expected an AbortSignal for revalidating fetcher deferred result"),await cz(c,z,l).then(P=>{P&&(r[f]=P||r[f])})}}}async function cz(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:wn.data,data:e.deferredData.unwrappedData}}catch(l){return{type:wn.error,error:l}}return{type:wn.data,data:e.deferredData.data}}}function Mb(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Ex(e,t){let r=typeof t=="string"?Os(t).search:t.search;if(e[e.length-1].route.index&&Mb(r||""))return e[e.length-1];let o=tz(e);return o[o.length-1]}function QC(e){let{formMethod:t,formAction:r,formEncType:o,text:l,formData:d,json:f}=e;if(!(!t||!r||!o)){if(l!=null)return{formMethod:t,formAction:r,formEncType:o,formData:void 0,json:void 0,text:l};if(d!=null)return{formMethod:t,formAction:r,formEncType:o,formData:d,json:void 0,text:void 0};if(f!==void 0)return{formMethod:t,formAction:r,formEncType:o,formData:void 0,json:f,text:void 0}}}function f_(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function V8(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function jh(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function U8(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function ol(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function H8(e,t){try{let r=e.sessionStorage.getItem(oz);if(r){let o=JSON.parse(r);for(let[l,d]of Object.entries(o||{}))d&&Array.isArray(d)&&t.set(l,new Set(d||[]))}}catch{}}function W8(e,t){if(t.size>0){let r={};for(let[o,l]of t)r[o]=[...l];try{e.sessionStorage.setItem(oz,JSON.stringify(r))}catch(o){sd(!1,"Failed to save applied view transitions in sessionStorage ("+o+").")}}}/**
 * React Router v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Op(){return Op=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Op.apply(this,arguments)}const dv=R.createContext(null),uz=R.createContext(null),hv=R.createContext(null),pv=R.createContext(null),vd=R.createContext({outlet:null,matches:[],isDataRoute:!1}),dz=R.createContext(null);function fv(){return R.useContext(pv)!=null}function Ab(){return fv()||Sr(!1),R.useContext(pv).location}function hz(e){R.useContext(hv).static||R.useLayoutEffect(e)}function G8(){let{isDataRoute:e}=R.useContext(vd);return e?iU():q8()}function q8(){fv()||Sr(!1);let e=R.useContext(dv),{basename:t,future:r,navigator:o}=R.useContext(hv),{matches:l}=R.useContext(vd),{pathname:d}=Ab(),f=JSON.stringify(rz(l,r.v7_relativeSplatPath)),c=R.useRef(!1);return hz(()=>{c.current=!0}),R.useCallback(function(w,k){if(k===void 0&&(k={}),!c.current)return;if(typeof w=="number"){o.go(w);return}let z=nz(w,JSON.parse(f),d,k.relative==="path");e==null&&t!=="/"&&(z.pathname=z.pathname==="/"?t:Cl([t,z.pathname])),(k.replace?o.replace:o.push)(z,k.state,k)},[t,o,f,d,e])}function Z8(e,t,r,o){fv()||Sr(!1);let{navigator:l}=R.useContext(hv),{matches:d}=R.useContext(vd),f=d[d.length-1],c=f?f.params:{};f&&f.pathname;let b=f?f.pathnameBase:"/";f&&f.route;let w=Ab(),k;if(t){var z;let X=typeof t=="string"?Os(t):t;b==="/"||(z=X.pathname)!=null&&z.startsWith(b)||Sr(!1),k=X}else k=w;let P=k.pathname||"/",V=P;if(b!=="/"){let X=b.replace(/^\//,"").split("/");V="/"+P.replace(/^\//,"").split("/").slice(X.length).join("/")}let U=Du(e,{pathname:V}),H=Q8(U&&U.map(X=>Object.assign({},X,{params:Object.assign({},c,X.params),pathname:Cl([b,l.encodeLocation?l.encodeLocation(X.pathname).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?b:Cl([b,l.encodeLocation?l.encodeLocation(X.pathnameBase).pathname:X.pathnameBase])})),d,r,o);return t&&H?R.createElement(pv.Provider,{value:{location:Op({pathname:"/",search:"",hash:"",state:null,key:"default"},k),navigationType:qn.Pop}},H):H}function K8(){let e=nU(),t=Eb(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),r?R.createElement("pre",{style:l},r):null,null)}const X8=R.createElement(K8,null);class J8 extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?R.createElement(vd.Provider,{value:this.props.routeContext},R.createElement(dz.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Y8(e){let{routeContext:t,match:r,children:o}=e,l=R.useContext(dv);return l&&l.static&&l.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=r.route.id),R.createElement(vd.Provider,{value:t},o)}function Q8(e,t,r,o){var l;if(t===void 0&&(t=[]),r===void 0&&(r=null),o===void 0&&(o=null),e==null){var d;if((d=r)!=null&&d.errors)e=r.matches;else return null}let f=e,c=(l=r)==null?void 0:l.errors;if(c!=null){let k=f.findIndex(z=>z.route.id&&(c==null?void 0:c[z.route.id])!==void 0);k>=0||Sr(!1),f=f.slice(0,Math.min(f.length,k+1))}let b=!1,w=-1;if(r&&o&&o.v7_partialHydration)for(let k=0;k<f.length;k++){let z=f[k];if((z.route.HydrateFallback||z.route.hydrateFallbackElement)&&(w=k),z.route.id){let{loaderData:P,errors:V}=r,U=z.route.loader&&P[z.route.id]===void 0&&(!V||V[z.route.id]===void 0);if(z.route.lazy||U){b=!0,w>=0?f=f.slice(0,w+1):f=[f[0]];break}}}return f.reduceRight((k,z,P)=>{let V,U=!1,H=null,X=null;r&&(V=c&&z.route.id?c[z.route.id]:void 0,H=z.route.errorElement||X8,b&&(w<0&&P===0?(oU("route-fallback",!1),U=!0,X=null):w===P&&(U=!0,X=z.route.hydrateFallbackElement||null)));let B=t.concat(f.slice(0,P+1)),L=()=>{let G;return V?G=H:U?G=X:z.route.Component?G=R.createElement(z.route.Component,null):z.route.element?G=z.route.element:G=k,R.createElement(Y8,{match:z,routeContext:{outlet:k,matches:B,isDataRoute:r!=null},children:G})};return r&&(z.route.ErrorBoundary||z.route.errorElement||P===0)?R.createElement(J8,{location:r.location,revalidation:r.revalidation,component:H,error:V,children:L(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):L()},null)}var pz=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pz||{}),Wg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Wg||{});function eU(e){let t=R.useContext(dv);return t||Sr(!1),t}function tU(e){let t=R.useContext(uz);return t||Sr(!1),t}function rU(e){let t=R.useContext(vd);return t||Sr(!1),t}function fz(e){let t=rU(),r=t.matches[t.matches.length-1];return r.route.id||Sr(!1),r.route.id}function nU(){var e;let t=R.useContext(dz),r=tU(Wg.UseRouteError),o=fz(Wg.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[o]}function iU(){let{router:e}=eU(pz.UseNavigateStable),t=fz(Wg.UseNavigateStable),r=R.useRef(!1);return hz(()=>{r.current=!0}),R.useCallback(function(l,d){d===void 0&&(d={}),r.current&&(typeof l=="number"?e.navigate(l):e.navigate(l,Op({fromRouteId:t},d)))},[e,t])}const ek={};function oU(e,t,r){!t&&!ek[e]&&(ek[e]=!0)}function zx(e){Sr(!1)}function aU(e){let{basename:t="/",children:r=null,location:o,navigationType:l=qn.Pop,navigator:d,static:f=!1,future:c}=e;fv()&&Sr(!1);let b=t.replace(/^\/*/,"/"),w=R.useMemo(()=>({basename:b,navigator:d,static:f,future:Op({v7_relativeSplatPath:!1},c)}),[b,c,d,f]);typeof o=="string"&&(o=Os(o));let{pathname:k="/",search:z="",hash:P="",state:V=null,key:U="default"}=o,H=R.useMemo(()=>{let X=cf(k,b);return X==null?null:{location:{pathname:X,search:z,hash:P,state:V,key:U},navigationType:l}},[b,k,z,P,V,U,l]);return H==null?null:R.createElement(hv.Provider,{value:w},R.createElement(pv.Provider,{children:r,value:H}))}new Promise(()=>{});function Mx(e,t){t===void 0&&(t=[]);let r=[];return R.Children.forEach(e,(o,l)=>{if(!R.isValidElement(o))return;let d=[...t,l];if(o.type===R.Fragment){r.push.apply(r,Mx(o.props.children,d));return}o.type!==zx&&Sr(!1),!o.props.index||!o.props.children||Sr(!1);let f={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(f.children=Mx(o.props.children,d)),r.push(f)}),r}function sU(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:R.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:R.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:R.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gg(){return Gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Gg.apply(this,arguments)}function Ax(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let o=e[r];return t.concat(Array.isArray(o)?o.map(l=>[r,l]):[[r,o]])},[]))}function lU(e,t){let r=Ax(e);return t&&t.forEach((o,l)=>{r.has(l)||t.getAll(l).forEach(d=>{r.append(l,d)})}),r}const cU="6";try{window.__reactRouterVersion=cU}catch{}function uU(e,t){return P8({basename:t==null?void 0:t.basename,future:Gg({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:JV({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||dU(),routes:e,mapRouteProperties:sU,unstable_dataStrategy:t==null?void 0:t.unstable_dataStrategy,window:t==null?void 0:t.window}).initialize()}function dU(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Gg({},t,{errors:hU(t.errors)})),t}function hU(e){if(!e)return null;let t=Object.entries(e),r={};for(let[o,l]of t)if(l&&l.__type==="RouteErrorResponse")r[o]=new Pb(l.status,l.statusText,l.data,l.internal===!0);else if(l&&l.__type==="Error"){if(l.__subType){let d=window[l.__subType];if(typeof d=="function")try{let f=new d(l.message);f.stack="",r[o]=f}catch{}}if(r[o]==null){let d=new Error(l.message);d.stack="",r[o]=d}}else r[o]=l;return r}const pU=R.createContext({isTransitioning:!1}),fU=R.createContext(new Map),mU="startTransition",tk=hg[mU],gU="flushSync",rk=YB[gU];function yU(e){tk?tk(e):e()}function Vh(e){rk?rk(e):e()}class vU{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",t(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",r(o))}})}}function _U(e){let{fallbackElement:t,router:r,future:o}=e,[l,d]=R.useState(r.state),[f,c]=R.useState(),[b,w]=R.useState({isTransitioning:!1}),[k,z]=R.useState(),[P,V]=R.useState(),[U,H]=R.useState(),X=R.useRef(new Map),{v7_startTransition:B}=o||{},L=R.useCallback(Z=>{B?yU(Z):Z()},[B]),G=R.useCallback((Z,ue)=>{let{deletedFetchers:Ce,unstable_flushSync:ye,unstable_viewTransitionOpts:Ee}=ue;Ce.forEach(ze=>X.current.delete(ze)),Z.fetchers.forEach((ze,We)=>{ze.data!==void 0&&X.current.set(We,ze.data)});let Se=r.window==null||typeof r.window.document.startViewTransition!="function";if(!Ee||Se){ye?Vh(()=>d(Z)):L(()=>d(Z));return}if(ye){Vh(()=>{P&&(k&&k.resolve(),P.skipTransition()),w({isTransitioning:!0,flushSync:!0,currentLocation:Ee.currentLocation,nextLocation:Ee.nextLocation})});let ze=r.window.document.startViewTransition(()=>{Vh(()=>d(Z))});ze.finished.finally(()=>{Vh(()=>{z(void 0),V(void 0),c(void 0),w({isTransitioning:!1})})}),Vh(()=>V(ze));return}P?(k&&k.resolve(),P.skipTransition(),H({state:Z,currentLocation:Ee.currentLocation,nextLocation:Ee.nextLocation})):(c(Z),w({isTransitioning:!0,flushSync:!1,currentLocation:Ee.currentLocation,nextLocation:Ee.nextLocation}))},[r.window,P,k,X,L]);R.useLayoutEffect(()=>r.subscribe(G),[r,G]),R.useEffect(()=>{b.isTransitioning&&!b.flushSync&&z(new vU)},[b]),R.useEffect(()=>{if(k&&f&&r.window){let Z=f,ue=k.promise,Ce=r.window.document.startViewTransition(async()=>{L(()=>d(Z)),await ue});Ce.finished.finally(()=>{z(void 0),V(void 0),c(void 0),w({isTransitioning:!1})}),V(Ce)}},[L,f,k,r.window]),R.useEffect(()=>{k&&f&&l.location.key===f.location.key&&k.resolve()},[k,P,l.location,f]),R.useEffect(()=>{!b.isTransitioning&&U&&(c(U.state),w({isTransitioning:!0,flushSync:!1,currentLocation:U.currentLocation,nextLocation:U.nextLocation}),H(void 0))},[b.isTransitioning,U]),R.useEffect(()=>{},[]);let te=R.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:Z=>r.navigate(Z),push:(Z,ue,Ce)=>r.navigate(Z,{state:ue,preventScrollReset:Ce==null?void 0:Ce.preventScrollReset}),replace:(Z,ue,Ce)=>r.navigate(Z,{replace:!0,state:ue,preventScrollReset:Ce==null?void 0:Ce.preventScrollReset})}),[r]),ne=r.basename||"/",he=R.useMemo(()=>({router:r,navigator:te,static:!1,basename:ne}),[r,te,ne]);return R.createElement(R.Fragment,null,R.createElement(dv.Provider,{value:he},R.createElement(uz.Provider,{value:l},R.createElement(fU.Provider,{value:X.current},R.createElement(pU.Provider,{value:b},R.createElement(aU,{basename:ne,location:l.location,navigationType:l.historyAction,navigator:te,future:{v7_relativeSplatPath:r.future.v7_relativeSplatPath}},l.initialized||r.future.v7_partialHydration?R.createElement(xU,{routes:r.routes,future:r.future,state:l}):t))))),null)}function xU(e){let{routes:t,future:r,state:o}=e;return Z8(t,void 0,o,r)}var nk;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(nk||(nk={}));var ik;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ik||(ik={}));function bU(e){let t=R.useRef(Ax(e)),r=R.useRef(!1),o=Ab(),l=R.useMemo(()=>lU(o.search,r.current?null:t.current),[o.search]),d=G8(),f=R.useCallback((c,b)=>{const w=Ax(typeof c=="function"?c(l):c);r.current=!0,d("?"+w,b)},[d,l]);return[l,f]}var to=(e=>(e[e.Arizona=0]="Arizona",e[e.Colorado=1]="Colorado",e[e.Idaho=2]="Idaho",e[e.Kansas=3]="Kansas",e[e.Montana=4]="Montana",e[e.Nebraska=5]="Nebraska",e[e.Nevada=6]="Nevada",e[e.NewMexico=7]="NewMexico",e[e.Oklahoma=8]="Oklahoma",e[e.Oregon=9]="Oregon",e[e.Texas=10]="Texas",e[e.Utah=11]="Utah",e[e.Washington=12]="Washington",e[e.Wyoming=13]="Wyoming",e))(to||{});const Fp=new Set([6,0,7,9,12,11,2,1,13,4,10,8,3,5]),wU={6:"Nevada",0:"Arizona",7:"New Mexico",9:"Oregon",12:"Washington",11:"Utah",2:"Idaho",1:"Colorado",13:"Wyoming",4:"Montana",10:"Texas",8:"Oklahoma",3:"Kansas",5:"Nebraska"},SU={0:new Set,1:new Set([6]),2:new Set([0]),3:new Set([7]),4:new Set([9]),5:new Set([12]),6:new Set([9,12]),7:new Set([11]),8:new Set([7,11]),9:new Set([2]),10:new Set([2,9]),11:new Set([2,11]),12:new Set([2,12]),13:new Set([1]),14:new Set([1,7]),15:new Set([1,11]),16:new Set([13]),17:new Set([1,13]),18:new Set([2,13]),19:new Set([11,13]),20:new Set([10]),21:new Set([7,10]),22:new Set([4]),23:new Set([2,4]),24:new Set([4,13]),25:new Set([8]),26:new Set([8,1]),27:new Set([8,7]),28:new Set([8,10]),29:new Set([3]),30:new Set([3,1]),31:new Set([3,8]),32:new Set([5]),33:new Set([5,1]),34:new Set([5,3]),35:new Set([5,13])};function mz(e){const t=new Set;for(const[r,o]of Object.entries(SU))[...o].every(l=>e.has(l))&&t.add(Number(r));return t}const CU=new Set([]);var gz=(e=>(e[e.Road=0]="Road",e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.Green=3]="Green",e))(gz||{});const kU="modulepreload",IU=function(e){return"/"+e},ok={},TU=function(t,r,o){let l=Promise.resolve();if(r&&r.length>0){const d=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),c=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));l=Promise.all(r.map(b=>{if(b=IU(b),b in ok)return;ok[b]=!0;const w=b.endsWith(".css"),k=w?'[rel="stylesheet"]':"";if(!!o)for(let V=d.length-1;V>=0;V--){const U=d[V];if(U.href===b&&(!w||U.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${k}`))return;const P=document.createElement("link");if(P.rel=w?"stylesheet":kU,w||(P.as="script",P.crossOrigin=""),P.href=b,c&&P.setAttribute("nonce",c),document.head.appendChild(P),w)return new Promise((V,U)=>{P.addEventListener("load",V),P.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${b}`)))})}))}return l.then(()=>t()).catch(d=>{const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=d,window.dispatchEvent(f),!f.defaultPrevented)throw d})},yz=R.createContext(null);function PU(){var e;const t=(e=R.useContext(yz))===null||e===void 0?void 0:e.maps,r=R.useContext(kc);return R.useMemo(()=>({...t,current:r==null?void 0:r.map}),[t,r])}function EU(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0,l=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return r===l&&o===d}function Ao(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Ao(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(const l of r)if(!t.hasOwnProperty(l)||!Ao(e[l],t[l]))return!1;return!0}return!1}function zU(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function ak(e,t){if(!e.getProjection)return;const r=e.getProjection(),o=t.getProjection();Ao(r,o)||t.setProjection(r)}function sk(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function lk(e,t){const r=t.viewState||t;let o=!1;if("longitude"in r&&"latitude"in r){const l=e.center;e.center=new l.constructor(r.longitude,r.latitude),o=o||l!==e.center}if("zoom"in r){const l=e.zoom;e.zoom=r.zoom,o=o||l!==e.zoom}if("bearing"in r){const l=e.bearing;e.bearing=r.bearing,o=o||l!==e.bearing}if("pitch"in r){const l=e.pitch;e.pitch=r.pitch,o=o||l!==e.pitch}return r.padding&&!e.isPaddingEqual(r.padding)&&(o=!0,e.padding=r.padding),o}const MU=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ck(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const o of e.layers)t[o.id]=o;const r=e.layers.map(o=>{let l=null;"interactive"in o&&(l=Object.assign({},o),delete l.interactive);const d=t[o.ref];if(d){l=l||Object.assign({},o),delete l.ref;for(const f of MU)f in d&&(l[f]=d[f])}return l||o});return{...e,layers:r}}var uk={};const dk={version:8,sources:{},layers:[]},hk={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},m_={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},pk={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},AU=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],DU=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class ld{constructor(t,r,o){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=l=>{const d=this.props[pk[l.type]];d?d(l):l.type==="error"&&console.error(l.error)},this._onPointerEvent=l=>{(l.type==="mousemove"||l.type==="mouseout")&&this._updateHover(l);const d=this.props[hk[l.type]];d&&(this.props.interactiveLayerIds&&l.type!=="mouseover"&&l.type!=="mouseout"&&(l.features=this._hoveredFeatures||this._queryRenderedFeatures(l.point)),d(l),delete l.features)},this._onCameraEvent=l=>{if(!this._internalUpdate){const d=this.props[m_[l.type]];d&&d(l)}l.type in this._deferredEvents&&(this._deferredEvents[l.type]=!1)},this._MapClass=t,this.props=r,this._initialize(o)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const o=this._updateSettings(t,r);o&&this._createShadowTransform(this._map);const l=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(o||l||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const o=ld.savedMaps.pop();if(!o)return null;const l=o.map,d=l.getContainer();for(r.className=d.className;d.childNodes.length>0;)r.appendChild(d.childNodes[0]);l._container=r;const f=l._resizeObserver;f&&(f.disconnect(),f.observe(r)),o.setProps({...t,styleDiffing:!1}),l.resize();const{initialViewState:c}=t;return c&&(c.bounds?l.fitBounds(c.bounds,{...c.fitBoundsOptions,duration:0}):o._updateViewState(c,!1)),l.isStyleLoaded()?l.fire("load"):l.once("styledata",()=>l.fire("load")),l._update(),o}_initialize(t){const{props:r}=this,{mapStyle:o=dk}=r,l={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||RU()||null,container:t,style:ck(o)},d=l.initialViewState||l.viewState||l;if(Object.assign(l,{center:[d.longitude||0,d.latitude||0],zoom:d.zoom||0,pitch:d.pitch||0,bearing:d.bearing||0}),r.gl){const k=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=k,r.gl)}const f=new this._MapClass(l);d.padding&&f.setPadding(d.padding),r.cursor&&(f.getCanvas().style.cursor=r.cursor),this._createShadowTransform(f);const c=f._render;f._render=k=>{this._inRender=!0,c.call(f,k),this._inRender=!1};const b=f._renderTaskQueue.run;f._renderTaskQueue.run=k=>{b.call(f._renderTaskQueue,k),this._onBeforeRepaint()},f.on("render",()=>this._onAfterRepaint());const w=f.fire;f.fire=this._fireEvent.bind(this,w),f.on("resize",()=>{this._renderTransform.resize(f.transform.width,f.transform.height)}),f.on("styledata",()=>{this._updateStyleComponents(this.props,{}),ak(f.transform,this._renderTransform)}),f.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const k in hk)f.on(k,this._onPointerEvent);for(const k in m_)f.on(k,this._onCameraEvent);for(const k in pk)f.on(k,this._onEvent);this._map=f}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),ld.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=zU(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const o=this._map;if(r.width!==o.transform.width||r.height!==o.transform.height)return o.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const o=this._map,l=this._renderTransform,{zoom:d,pitch:f,bearing:c}=l,b=o.isMoving();b&&(l.cameraElevationReference="sea");const w=lk(l,{...sk(o.transform),...t});if(b&&(l.cameraElevationReference="ground"),w&&r){const k=this._deferredEvents;k.move=!0,k.zoom||(k.zoom=d!==l.zoom),k.rotate||(k.rotate=c!==l.bearing),k.pitch||(k.pitch=f!==l.pitch)}return b||lk(o.transform,t),w}_updateSettings(t,r){const o=this._map;let l=!1;for(const d of AU)if(d in t&&!Ao(t[d],r[d])){l=!0;const f=o[`set${d[0].toUpperCase()}${d.slice(1)}`];f==null||f.call(o,t[d])}return l}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==r.mapStyle){const{mapStyle:o=dk,styleDiffing:l=!0}=t,d={diff:l};return"localIdeographFontFamily"in t&&(d.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(ck(o),d),!0}return!1}_updateStyleComponents(t,r){const o=this._map;let l=!1;return o.isStyleLoaded()&&("light"in t&&o.setLight&&!Ao(t.light,r.light)&&(l=!0,o.setLight(t.light)),"fog"in t&&o.setFog&&!Ao(t.fog,r.fog)&&(l=!0,o.setFog(t.fog)),"terrain"in t&&o.setTerrain&&!Ao(t.terrain,r.terrain)&&(!t.terrain||o.getSource(t.terrain.source))&&(l=!0,o.setTerrain(t.terrain))),l}_updateHandlers(t,r){var o,l;const d=this._map;let f=!1;for(const c of DU){const b=(o=t[c])!==null&&o!==void 0?o:!0,w=(l=r[c])!==null&&l!==void 0?l:!0;Ao(b,w)||(f=!0,b?d[c].enable(b):d[c].disable())}return f}_queryRenderedFeatures(t){const r=this._map,o=r.transform,{interactiveLayerIds:l=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(t,{layers:l.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=o}}_updateHover(t){var r;const{props:o}=this;if(o.interactiveLayerIds&&(o.onMouseMove||o.onMouseEnter||o.onMouseLeave)){const d=t.type,f=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,c=this._queryRenderedFeatures(t.point),b=c.length>0;!b&&f&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=c,b&&!f&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,r,o){const l=this._map,d=l.transform,f=typeof r=="string"?r:r.type;return f==="move"&&this._updateViewState(this.props,!1),f in m_&&(typeof r=="object"&&(r.viewState=sk(d)),this._map.isMoving())?(l.transform=this._renderTransform,t.call(l,r,o),l.transform=d,l):(t.call(l,r,o),l)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const o in this._deferredEvents)this._deferredEvents[o]&&t.fire(o);this._internalUpdate=!1;const r=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{ak(this._renderTransform,r),t.transform=r}}}ld.savedMaps=[];function RU(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||uk.MapboxAccessToken}catch{}try{e=e||uk.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const LU=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function $U(e){if(!e)return null;const t=e.map,r={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:o=>{const l=t.transform;t.transform=e.transform;const d=t.project(o);return t.transform=l,d},unproject:o=>{const l=t.transform;t.transform=e.transform;const d=t.unproject(o);return t.transform=l,d},queryTerrainElevation:(o,l)=>{const d=t.transform;t.transform=e.transform;const f=t.queryTerrainElevation(o,l);return t.transform=d,f},queryRenderedFeatures:(o,l)=>{const d=t.transform;t.transform=e.transform;const f=t.queryRenderedFeatures(o,l);return t.transform=d,f}};for(const o of BU(t))!(o in r)&&!LU.includes(o)&&(r[o]=t[o].bind(t));return r}function BU(e){const t=new Set;let r=e;for(;r;){for(const o of Object.getOwnPropertyNames(r))o[0]!=="_"&&typeof e[o]=="function"&&o!=="fire"&&o!=="setEventedParent"&&t.add(o);r=Object.getPrototypeOf(r)}return Array.from(t)}const OU=typeof document<"u"?R.useLayoutEffect:R.useEffect,FU=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function NU(e,t){for(const o of FU)o in t&&(e[o]=t[o]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;r&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r,o=>{o&&console.error(o)},!0)}const kc=R.createContext(null);function jU(e,t,r){const o=R.useContext(yz),[l,d]=R.useState(null),f=R.useRef(),{current:c}=R.useRef({mapLib:null,map:null});R.useEffect(()=>{const k=e.mapLib;let z=!0,P;return Promise.resolve(k||r).then(V=>{if(!z)return;if(!V)throw new Error("Invalid mapLib");const U="Map"in V?V:V.default;if(!U.Map)throw new Error("Invalid mapLib");if(NU(U,e),!U.supported||U.supported(e))e.reuseMaps&&(P=ld.reuse(e,f.current)),P||(P=new ld(U.Map,e,f.current)),c.map=$U(P),c.mapLib=U,d(P),o==null||o.onMapMount(c.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(V=>{const{onError:U}=e;U?U({type:"error",target:null,originalEvent:null,error:V}):console.error(V)}),()=>{z=!1,P&&(o==null||o.onMapUnmount(e.id),e.reuseMaps?P.recycle():P.destroy())}},[]),OU(()=>{l&&l.setProps(e)}),R.useImperativeHandle(t,()=>c.map,[l]);const b=R.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),w={height:"100%"};return R.createElement("div",{id:e.id,ref:f,style:b},l&&R.createElement(kc.Provider,{value:c},R.createElement("div",{"mapboxgl-children":"",style:w},e.children)))}const VU=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Ic(e,t){if(!e||!t)return;const r=e.style;for(const o in t){const l=t[o];Number.isFinite(l)&&!VU.test(o)?r[o]=`${l}px`:r[o]=l}}function UU(e,t){const{map:r,mapLib:o}=R.useContext(kc),l=R.useRef({props:e});l.current.props=e;const d=R.useMemo(()=>{let H=!1;R.Children.forEach(e.children,L=>{L&&(H=!0)});const X={...e,element:H?document.createElement("div"):null},B=new o.Marker(X);return B.setLngLat([e.longitude,e.latitude]),B.getElement().addEventListener("click",L=>{var G,te;(te=(G=l.current.props).onClick)===null||te===void 0||te.call(G,{type:"click",target:B,originalEvent:L})}),B.on("dragstart",L=>{var G,te;const ne=L;ne.lngLat=d.getLngLat(),(te=(G=l.current.props).onDragStart)===null||te===void 0||te.call(G,ne)}),B.on("drag",L=>{var G,te;const ne=L;ne.lngLat=d.getLngLat(),(te=(G=l.current.props).onDrag)===null||te===void 0||te.call(G,ne)}),B.on("dragend",L=>{var G,te;const ne=L;ne.lngLat=d.getLngLat(),(te=(G=l.current.props).onDragEnd)===null||te===void 0||te.call(G,ne)}),B},[]);R.useEffect(()=>(d.addTo(r.getMap()),()=>{d.remove()}),[]);const{longitude:f,latitude:c,offset:b,style:w,draggable:k=!1,popup:z=null,rotation:P=0,rotationAlignment:V="auto",pitchAlignment:U="auto"}=e;return R.useEffect(()=>{Ic(d.getElement(),w)},[w]),R.useImperativeHandle(t,()=>d,[]),(d.getLngLat().lng!==f||d.getLngLat().lat!==c)&&d.setLngLat([f,c]),b&&!EU(d.getOffset(),b)&&d.setOffset(b),d.isDraggable()!==k&&d.setDraggable(k),d.getRotation()!==P&&d.setRotation(P),d.getRotationAlignment()!==V&&d.setRotationAlignment(V),d.getPitchAlignment()!==U&&d.setPitchAlignment(U),d.getPopup()!==z&&d.setPopup(z),fd.createPortal(e.children,d.getElement())}const HU=R.memo(R.forwardRef(UU));function fk(e){return new Set(e?e.trim().split(/\s+/):[])}function WU(e,t){const{map:r,mapLib:o}=R.useContext(kc),l=R.useMemo(()=>document.createElement("div"),[]),d=R.useRef({props:e});d.current.props=e;const f=R.useMemo(()=>{const c={...e},b=new o.Popup(c);return b.setLngLat([e.longitude,e.latitude]),b.once("open",w=>{var k,z;(z=(k=d.current.props).onOpen)===null||z===void 0||z.call(k,w)}),b},[]);if(R.useEffect(()=>{const c=b=>{var w,k;(k=(w=d.current.props).onClose)===null||k===void 0||k.call(w,b)};return f.on("close",c),f.setDOMContent(l).addTo(r.getMap()),()=>{f.off("close",c),f.isOpen()&&f.remove()}},[]),R.useEffect(()=>{Ic(f.getElement(),e.style)},[e.style]),R.useImperativeHandle(t,()=>f,[]),f.isOpen()&&((f.getLngLat().lng!==e.longitude||f.getLngLat().lat!==e.latitude)&&f.setLngLat([e.longitude,e.latitude]),e.offset&&!Ao(f.options.offset,e.offset)&&f.setOffset(e.offset),(f.options.anchor!==e.anchor||f.options.maxWidth!==e.maxWidth)&&(f.options.anchor=e.anchor,f.setMaxWidth(e.maxWidth)),f.options.className!==e.className)){const c=fk(f.options.className),b=fk(e.className);for(const w of c)b.has(w)||f.removeClassName(w);for(const w of b)c.has(w)||f.addClassName(w);f.options.className=e.className}return fd.createPortal(e.children,l)}R.memo(R.forwardRef(WU));function Fs(e,t,r,o){const l=R.useContext(kc),d=R.useMemo(()=>e(l),[]);return R.useEffect(()=>{const f=o||r||t,c=typeof t=="function"&&typeof r=="function"?t:null,b=typeof r=="function"?r:typeof t=="function"?t:null,{map:w}=l;return w.hasControl(d)||(w.addControl(d,f==null?void 0:f.position),c&&c(l)),()=>{b&&b(l),w.hasControl(d)&&w.removeControl(d)}},[]),d}function GU(e){const t=Fs(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return R.useEffect(()=>{Ic(t._container,e.style)},[e.style]),null}const qU=R.memo(GU);function ZU(e){const t=Fs(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return R.useEffect(()=>{Ic(t._controlContainer,e.style)},[e.style]),null}const KU=R.memo(ZU);function XU(e,t){const r=R.useRef({props:e}),o=Fs(({mapLib:l})=>{const d=new l.GeolocateControl(e),f=d._setupUI;return d._setupUI=c=>{d._container.hasChildNodes()||f(c)},d.on("geolocate",c=>{var b,w;(w=(b=r.current.props).onGeolocate)===null||w===void 0||w.call(b,c)}),d.on("error",c=>{var b,w;(w=(b=r.current.props).onError)===null||w===void 0||w.call(b,c)}),d.on("outofmaxbounds",c=>{var b,w;(w=(b=r.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(b,c)}),d.on("trackuserlocationstart",c=>{var b,w;(w=(b=r.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(b,c)}),d.on("trackuserlocationend",c=>{var b,w;(w=(b=r.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(b,c)}),d},{position:e.position});return r.current.props=e,R.useImperativeHandle(t,()=>o,[]),R.useEffect(()=>{Ic(o._container,e.style)},[e.style]),null}R.memo(R.forwardRef(XU));function JU(e){const t=Fs(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return R.useEffect(()=>{Ic(t._container,e.style)},[e.style]),null}const YU=R.memo(JU);function QU(e){const t=Fs(({mapLib:d})=>new d.ScaleControl(e),{position:e.position}),r=R.useRef(e),o=r.current;r.current=e;const{style:l}=e;return e.maxWidth!==void 0&&e.maxWidth!==o.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==o.unit&&t.setUnit(e.unit),R.useEffect(()=>{Ic(t._container,l)},[l]),null}R.memo(QU);function qg(e,t){if(!e)throw new Error(t)}function e9(e,t,r,o){if(qg(r.id===o.id,"layer id changed"),qg(r.type===o.type,"layer type changed"),r.type==="custom"||o.type==="custom")return;const{layout:l={},paint:d={},filter:f,minzoom:c,maxzoom:b,beforeId:w}=r;if(w!==o.beforeId&&e.moveLayer(t,w),l!==o.layout){const k=o.layout||{};for(const z in l)Ao(l[z],k[z])||e.setLayoutProperty(t,z,l[z]);for(const z in k)l.hasOwnProperty(z)||e.setLayoutProperty(t,z,void 0)}if(d!==o.paint){const k=o.paint||{};for(const z in d)Ao(d[z],k[z])||e.setPaintProperty(t,z,d[z]);for(const z in k)d.hasOwnProperty(z)||e.setPaintProperty(t,z,void 0)}Ao(f,o.filter)||e.setFilter(t,f),(c!==o.minzoom||b!==o.maxzoom)&&e.setLayerZoomRange(t,c,b)}function t9(e,t,r){if(e.style&&e.style._loaded&&(!("source"in r)||e.getSource(r.source))){const o={...r,id:t};delete o.beforeId,e.addLayer(o,r.beforeId)}}let r9=0;function n9(e){const t=R.useContext(kc).map.getMap(),r=R.useRef(e),[,o]=R.useState(0),l=R.useMemo(()=>e.id||`jsx-layer-${r9++}`,[]);if(R.useEffect(()=>{if(t){const f=()=>o(c=>c+1);return t.on("styledata",f),f(),()=>{t.off("styledata",f),t.style&&t.style._loaded&&t.getLayer(l)&&t.removeLayer(l)}}},[t]),t&&t.style&&t.getLayer(l))try{e9(t,l,e,r.current)}catch(f){console.warn(f)}else t9(t,l,e);return r.current=e,null}let i9=0;function o9(e,t,r){if(e.style&&e.style._loaded){const o={...r};return delete o.id,delete o.children,e.addSource(t,o),e.getSource(t)}return null}function a9(e,t,r){qg(t.id===r.id,"source id changed"),qg(t.type===r.type,"source type changed");let o="",l=0;for(const f in t)f!=="children"&&f!=="id"&&!Ao(r[f],t[f])&&(o=f,l++);if(!l)return;const d=t.type;if(d==="geojson")e.setData(t.data);else if(d==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&l===1&&o==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(o){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${o}`)}function s9(e){const t=R.useContext(kc).map.getMap(),r=R.useRef(e),[,o]=R.useState(0),l=R.useMemo(()=>e.id||`jsx-source-${i9++}`,[]);R.useEffect(()=>{if(t){const f=()=>setTimeout(()=>o(c=>c+1),0);return t.on("styledata",f),f(),()=>{var c;if(t.off("styledata",f),t.style&&t.style._loaded&&t.getSource(l)){const b=(c=t.getStyle())===null||c===void 0?void 0:c.layers;if(b)for(const w of b)w.source===l&&t.removeLayer(w.id);t.removeSource(l)}}}},[t]);let d=t&&t.style&&t.getSource(l);return d?a9(d,e,r.current):d=o9(t,l,e),r.current=e,d&&R.Children.map(e.children,f=>f&&R.cloneElement(f,{source:l}))||null}function Db(){return PU()}const l9=TU(()=>Promise.resolve().then(()=>h9),void 0),vz=R.forwardRef(function(t,r){return jU(t,r,l9)}),c9=HU,_z=qU,xz=KU,bz=YU,Hr=n9,_d=s9,u9={"text-color":"hsl(42, 10%, 14%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},d9={"text-color":"hsl(42, 10%, 86%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},Rb={light:{water:"#b2cdfb",land:"#f8f8f8",stateBorder:"#aaa",countryBorder:"#ccc",baseTextPaint:u9,hiddenRoad:"#e9e9e8",footprint:"#e9e9e8",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#eeeeffcc",trainLine:"#aaa",trainLabel:"#555c",trainHalo:"#eefc",mapAreaOutline:"#999a"},dark:{water:"#36415d",land:"#1a1a1a",stateBorder:"#555",countryBorder:"#333",baseTextPaint:d9,hiddenRoad:"#404038",footprint:"#30302f88",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#303028cc",trainLine:"#888",trainLabel:"#eeec",trainHalo:"#303028cc",mapAreaOutline:"#777a"}};var wz={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(hD,function(){var r,o,l;function d(c,b){if(!r)r=b;else if(!o)o=b;else{var w="var sharedChunk = {}; ("+r+")(sharedChunk); ("+o+")(sharedChunk);",k={};r(k),l=b(k),typeof window<"u"&&(l.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}d(["exports"],function(c){function b(a,n,s,h){return new(s||(s=Promise))(function(m,v){function x(M){try{T(h.next(M))}catch(O){v(O)}}function S(M){try{T(h.throw(M))}catch(O){v(O)}}function T(M){var O;M.done?m(M.value):(O=M.value,O instanceof s?O:new s(function(j){j(O)})).then(x,S)}T((h=h.apply(a,n||[])).next())})}function w(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var k=z;function z(a,n){this.x=a,this.y=n}z.prototype={clone:function(){return new z(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,n){return this.clone()._rotateAround(a,n)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var n=a.x-this.x,s=a.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,n){return Math.atan2(this.x*n-this.y*a,this.x*a+this.y*n)},_matMult:function(a){var n=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=n,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var n=Math.cos(a),s=Math.sin(a),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(a,n){var s=Math.cos(a),h=Math.sin(a),m=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},z.convert=function(a){return a instanceof z?a:Array.isArray(a)?new z(a[0],a[1]):a};var P=w(k),V=U;function U(a,n,s,h){this.cx=3*a,this.bx=3*(s-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=n,this.p2x=s,this.p2y=h}U.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,n){if(n===void 0&&(n=1e-6),a<0)return 0;if(a>1)return 1;for(var s=a,h=0;h<8;h++){var m=this.sampleCurveX(s)-a;if(Math.abs(m)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=m/v}var x=0,S=1;for(s=a,h=0;h<20&&(m=this.sampleCurveX(s),!(Math.abs(m-a)<n));h++)a>m?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(a,n){return this.sampleCurveY(this.solveCurveX(a,n))}};var H=w(V);let X,B;function L(){return X==null&&(X=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),X}function G(){if(B==null&&(B=!1,L())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const m=4*h;n.fillStyle=`rgb(${m},${m+1},${m+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){B=!0;break}}}return B||!1}function te(a,n,s,h){const m=new H(a,n,s,h);return function(v){return m.solve(v)}}const ne=te(.25,.1,.25,1);function he(a,n,s){return Math.min(s,Math.max(n,a))}function Z(a,n,s){const h=s-n,m=((a-n)%h+h)%h+n;return m===n?s:m}function ue(a,...n){for(const s of n)for(const h in s)a[h]=s[h];return a}let Ce=1;function ye(a,n,s){const h={};for(const m in a)h[m]=n.call(s||this,a[m],m,a);return h}function Ee(a,n,s){const h={};for(const m in a)n.call(s||this,a[m],m,a)&&(h[m]=a[m]);return h}function Se(a){return Array.isArray(a)?a.map(Se):typeof a=="object"&&a?ye(a,Se):a}const ze={};function We(a){ze[a]||(typeof console<"u"&&console.warn(a),ze[a]=!0)}function Fe(a,n,s){return(s.y-a.y)*(n.x-a.x)>(n.y-a.y)*(s.x-a.x)}function Me(a){let n=0;for(let s,h,m=0,v=a.length,x=v-1;m<v;x=m++)s=a[m],h=a[x],n+=(h.x-s.x)*(s.y+h.y);return n}function Oe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let ke=null;function Ge(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const Ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ht(a,n,s,h,m){return b(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(a,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),T=new Uint8ClampedArray(h*m*4);if(yield v.copyTo(T,function(M,O,j,K,Y){const ee=4*Math.max(-O,0),se=(Math.max(0,j)-j)*K*4+ee,me=4*K,ve=Math.max(0,O),Te=Math.max(0,j);return{rect:{x:ve,y:Te,width:Math.min(M.width,O+K)-ve,height:Math.min(M.height,j+Y)-Te},layout:[{offset:se,stride:me}]}}(a,n,s,h,m)),S)for(let M=0;M<T.length;M+=4){const O=T[M];T[M]=T[M+2],T[M+2]=O}return T}finally{v.close()}})}let vt,gt,Ct,At;const Zt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(a){const n=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(a,n=0){return this.getImageCanvasContext(a).getImageData(-n,-n,a.width+2*n,a.height+2*n)},getImageCanvasContext(a){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=a.width,n.height=a.height,s.drawImage(a,0,0,a.width,a.height),s},resolveURL:a=>(Ct||(Ct=document.createElement("a")),Ct.href=a,Ct.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(At==null&&(At=matchMedia("(prefers-reduced-motion: reduce)")),At.matches)}},kt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class $e extends Error{constructor(n,s,h,m){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=m}}const rt=Oe()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,pt=a=>kt.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))];function Dt(a,n){const s=new AbortController,h=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,cache:a.cache,referrer:rt(),signal:s.signal});let m=!1,v=!1;return a.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(x=>x.ok?(S=>{(a.type==="arrayBuffer"||a.type==="image"?S.arrayBuffer():a.type==="json"?S.json():S.text()).then(T=>{v||(m=!0,n(null,T,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(T=>{v||n(new Error(T.message))})})(x):x.blob().then(S=>n(new $e(x.status,x.statusText,a.url,S)))).catch(x=>{x.code!==20&&n(new Error(x.message))}),{cancel:()=>{v=!0,m||s.abort()}}}const Mt=function(a,n){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(Oe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n);if(!Oe())return(pt(a.url)||Dt)(a,n)}if(!(/^file:/.test(s=a.url)||/^file:/.test(rt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Dt(a,n);if(Oe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n,void 0,!0)}var s;return function(h,m){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{m(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(S){return m(S)}m(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});m(new $e(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(a,n)},gr=function(a,n){return Mt(ue(a,{type:"arrayBuffer"}),n)};function Cr(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const n=new URL(a),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function lr(a,n,s){s[a]&&s[a].indexOf(n)!==-1||(s[a]=s[a]||[],s[a].push(n))}function yt(a,n,s){if(s&&s[a]){const h=s[a].indexOf(n);h!==-1&&s[a].splice(h,1)}}class Dr{constructor(n,s={}){ue(this,s),this.type=n}}class er extends Dr{constructor(n,s={}){super("error",ue({error:n},s))}}class Fr{on(n,s){return this._listeners=this._listeners||{},lr(n,s,this._listeners),this}off(n,s){return yt(n,s,this._listeners),yt(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},lr(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new Dr(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const m=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of m)S.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of v)yt(h,S,this._oneTimeListeners),S.call(this,n);const x=this._eventedParent;x&&(ue(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof er&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const cr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ir(a,n){const s={};for(const h in a)h!=="ref"&&(s[h]=a[h]);return cr.forEach(h=>{h in n&&(s[h]=n[h])}),s}function Ft(a,n){if(Array.isArray(a)){if(!Array.isArray(n)||a.length!==n.length)return!1;for(let s=0;s<a.length;s++)if(!Ft(a[s],n[s]))return!1;return!0}if(typeof a=="object"&&a!==null&&n!==null){if(typeof n!="object"||Object.keys(a).length!==Object.keys(n).length)return!1;for(const s in a)if(!Ft(a[s],n[s]))return!1;return!0}return a===n}const qt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function kr(a,n,s){s.push({command:qt.addSource,args:[a,n[a]]})}function Pr(a,n,s){n.push({command:qt.removeSource,args:[a]}),s[a]=!0}function sr(a,n,s,h){Pr(a,s,h),kr(a,n,s)}function nr(a,n,s){let h;for(h in a[s])if(Object.prototype.hasOwnProperty.call(a[s],h)&&h!=="data"&&!Ft(a[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!Ft(a[s][h],n[s][h]))return!1;return!0}function rr(a,n,s,h,m,v){let x;for(x in n=n||{},a=a||{})Object.prototype.hasOwnProperty.call(a,x)&&(Ft(a[x],n[x])||s.push({command:v,args:[h,x,n[x],m]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(a,x)&&(Ft(a[x],n[x])||s.push({command:v,args:[h,x,n[x],m]}))}function Rr(a){return a.id}function it(a,n){return a[n.id]=n,a}class Le{constructor(n,s,h,m){this.message=(n?`${n}: `:"")+h,m&&(this.identifier=m),s!=null&&s.__line__&&(this.line=s.__line__)}}function Wt(a,...n){for(const s of n)for(const h in s)a[h]=s[h];return a}class Rt extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class _r{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,m]of s)this.bindings[h]=m}concat(n){return new _r(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const xr={kind:"null"},Qe={kind:"number"},Kt={kind:"string"},$t={kind:"boolean"},ar={kind:"color"},Gr={kind:"object"},Jt={kind:"value"},gn={kind:"collator"},de={kind:"formatted"},A={kind:"padding"},$={kind:"resolvedImage"},W={kind:"variableAnchorOffsetCollection"};function Q(a,n){return{kind:"array",itemType:a,N:n}}function ie(a){if(a.kind==="array"){const n=ie(a.itemType);return typeof a.N=="number"?`array<${n}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${n}>`}return a.kind}const xe=[xr,Qe,Kt,$t,ar,de,Gr,Q(Jt),A,$,W];function fe(a,n){if(n.kind==="error")return null;if(a.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!fe(a.itemType,n.itemType))&&(typeof a.N!="number"||a.N===n.N))return null}else{if(a.kind===n.kind)return null;if(a.kind==="value"){for(const s of xe)if(!fe(s,n))return null}}return`Expected ${ie(a)} but found ${ie(n)} instead.`}function oe(a,n){return n.some(s=>s.kind===a.kind)}function _e(a,n){return n.some(s=>s==="null"?a===null:s==="array"?Array.isArray(a):s==="object"?a&&!Array.isArray(a)&&typeof a=="object":s===typeof a)}function De(a,n){return a.kind==="array"&&n.kind==="array"?a.itemType.kind===n.itemType.kind&&typeof a.N=="number":a.kind===n.kind}const Ue=.96422,qe=.82521,Ye=4/29,St=6/29,st=3*St*St,Lt=St*St*St,Re=Math.PI/180,Ne=180/Math.PI;function nt(a){return(a%=360)<0&&(a+=360),a}function ut([a,n,s,h]){let m,v;const x=ur((.2225045*(a=_t(a))+.7168786*(n=_t(n))+.0606169*(s=_t(s)))/1);a===n&&n===s?m=v=x:(m=ur((.4360747*a+.3850649*n+.1430804*s)/Ue),v=ur((.0139322*a+.0971045*n+.7141733*s)/qe));const S=116*x-16;return[S<0?0:S,500*(m-x),200*(x-v),h]}function _t(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function ur(a){return a>Lt?Math.pow(a,1/3):a/st+Ye}function tr([a,n,s,h]){let m=(a+16)/116,v=isNaN(n)?m:m+n/500,x=isNaN(s)?m:m-s/200;return m=1*Xt(m),v=Ue*Xt(v),x=qe*Xt(x),[yr(3.1338561*v-1.6168667*m-.4906146*x),yr(-.9787684*v+1.9161415*m+.033454*x),yr(.0719453*v-.2289914*m+1.4052427*x),h]}function yr(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function Xt(a){return a>St?a*a*a:st*(a-Ye)}function Tt(a){return parseInt(a.padEnd(2,a),16)/255}function qr(a,n){return dr(n?a/100:a,0,1)}function dr(a,n,s){return Math.min(Math.max(n,a),s)}function Mn(a){return!a.some(Number.isNaN)}const ao={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Ir{constructor(n,s,h,m=1,v=!0){this.r=n,this.g=s,this.b=h,this.a=m,v||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[n,s,h,m]))}static parse(n){if(n instanceof Ir)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=ao[h];if(m){const[x,S,T]=m;return[x/255,S/255,T/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[Tt(h.slice(S,S+=x)),Tt(h.slice(S,S+=x)),Tt(h.slice(S,S+=x)),Tt(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,T,M,O,j,K,Y,ee,se,me,ve,Te]=x,be=[O||" ",Y||" ",me].join("");if(be==="  "||be==="  /"||be===",,"||be===",,,"){const Pe=[M,K,se].join(""),je=Pe==="%%%"?100:Pe===""?255:0;if(je){const Xe=[dr(+T/je,0,1),dr(+j/je,0,1),dr(+ee/je,0,1),ve?qr(+ve,Te):1];if(Mn(Xe))return Xe}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,S,T,M,O,j,K,Y,ee]=v,se=[T||" ",O||" ",K].join("");if(se==="  "||se==="  /"||se===",,"||se===",,,"){const me=[+S,dr(+M,0,100),dr(+j,0,100),Y?qr(+Y,ee):1];if(Mn(me))return function([ve,Te,be,Pe]){function je(Xe){const wt=(Xe+ve/30)%12,Ot=Te*Math.min(be,1-be);return be-Ot*Math.max(-1,Math.min(wt-3,9-wt,1))}return ve=nt(ve),Te/=100,be/=100,[je(0),je(8),je(4),Pe]}(me)}}}(n);return s?new Ir(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:m}=this,v=m||1/0;return this.overwriteGetter("rgb",[n/v,s/v,h/v,m])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,m,v]=ut(n),x=Math.sqrt(h*h+m*m);return[Math.round(1e4*x)?nt(Math.atan2(m,h)*Ne):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ut(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,m]=this.rgb;return`rgba(${[n,s,h].map(v=>Math.round(255*v)).join(",")},${m})`}}Ir.black=new Ir(0,0,0,1),Ir.white=new Ir(1,1,1,1),Ir.transparent=new Ir(0,0,0,0),Ir.red=new Ir(1,0,0,1);class so{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Hi{constructor(n,s,h,m,v){this.text=n,this.image=s,this.scale=h,this.fontStack=m,this.textColor=v}}class si{constructor(n){this.sections=n}static fromString(n){return new si([new Hi(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof si?n:si.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Wi{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Wi)return n;if(typeof n=="number")return new Wi([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Wi(n)}}toString(){return JSON.stringify(this.values)}}const wv=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class lo{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof lo)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],m=n[s+1];if(typeof h!="string"||!wv.has(h)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new lo(n)}}toString(){return JSON.stringify(this.values)}}class ti{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ti({name:n,available:!1}):null}}function Tc(a,n,s,h){return typeof a=="number"&&a>=0&&a<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[a,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[a,n,s,h]:[a,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ns(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Ir||a instanceof so||a instanceof si||a instanceof Wi||a instanceof lo||a instanceof ti)return!0;if(Array.isArray(a)){for(const n of a)if(!Ns(n))return!1;return!0}if(typeof a=="object"){for(const n in a)if(!Ns(a[n]))return!1;return!0}return!1}function an(a){if(a===null)return xr;if(typeof a=="string")return Kt;if(typeof a=="boolean")return $t;if(typeof a=="number")return Qe;if(a instanceof Ir)return ar;if(a instanceof so)return gn;if(a instanceof si)return de;if(a instanceof Wi)return A;if(a instanceof lo)return W;if(a instanceof ti)return $;if(Array.isArray(a)){const n=a.length;let s;for(const h of a){const m=an(h);if(s){if(s===m)continue;s=Jt;break}s=m}return Q(s||Jt,n)}return Gr}function Er(a){const n=typeof a;return a===null?"":n==="string"||n==="number"||n==="boolean"?String(a):a instanceof Ir||a instanceof si||a instanceof Wi||a instanceof lo||a instanceof ti?a.toString():JSON.stringify(a)}class as{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Ns(n[1]))return s.error("invalid value");const h=n[1];let m=an(h);const v=s.expectedType;return m.kind!=="array"||m.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(m=v),new as(m,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class dn{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Pc={string:Kt,number:Qe,boolean:$t,object:Gr};class co{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,m=1;const v=n[0];if(v==="array"){let S,T;if(n.length>2){const M=n[1];if(typeof M!="string"||!(M in Pc)||M==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);S=Pc[M],m++}else S=Jt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);T=n[2],m++}h=Q(S,T)}else{if(!Pc[v])throw new Error(`Types doesn't contain name = ${v}`);h=Pc[v]}const x=[];for(;m<n.length;m++){const S=s.parse(n[m],m,Jt);if(!S)return null;x.push(S)}return new co(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!fe(this.type,an(h)))return h;if(s===this.args.length-1)throw new dn(`Expected value to be of type ${ie(this.type)}, but found ${ie(an(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Sd={"to-boolean":$t,"to-color":ar,"to-number":Qe,"to-string":Kt};class Oa{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!Sd[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const m=Sd[h],v=[];for(let x=1;x<n.length;x++){const S=s.parse(n[x],x,Jt);if(!S)return null;v.push(S)}return new Oa(m,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const m of this.args){if(s=m.evaluate(n),h=null,s instanceof Ir)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Tc(s[0],s[1],s[2],s[3]),!h))return new Ir(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new dn(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const m=Wi.parse(s);if(m)return m}throw new dn(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const m=lo.parse(s);if(m)return m}throw new dn(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const m=Number(s);if(!isNaN(m))return m}throw new dn(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return si.fromString(Er(this.args[0].evaluate(n)));case"resolvedImage":return ti.fromString(Er(this.args[0].evaluate(n)));default:return Er(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const mf=["Unknown","Point","LineString","Polygon"];class Cd{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?mf[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=Ir.parse(n)),s}}class Ec{constructor(n,s,h=[],m,v=new _r,x=[]){this.registry=n,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=x,this.expectedType=m,this._isConstant=s}parse(n,s,h,m,v={}){return s?this.concat(s,h,m)._parse(n,v):this._parse(n,v)}_parse(n,s){function h(m,v,x){return x==="assert"?new co(v,[m]):x==="coerce"?new Oa(v,[m]):m}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=n[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[m];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,T=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||T.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string")if(S.kind!=="padding"||T.kind!=="value"&&T.kind!=="number"&&T.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||T.kind!=="value"&&T.kind!=="array"){if(this.checkSubtype(S,T))return null}else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"assert")}if(!(x instanceof as)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new Cd;try{x=new as(x.type,x.evaluate(S))}catch(T){return this.error(T.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const m=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new Ec(this.registry,this._isConstant,m,s||null,v,this.errors)}error(n,...s){const h=`${this.key}${s.map(m=>`[${m}]`).join("")}`;this.errors.push(new Rt(h,n))}checkSubtype(n,s){const h=fe(n,s);return h&&this.error(h),h}}class zc{constructor(n,s,h){this.type=gn,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const m=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,$t);if(!m)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,$t);if(!v)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Kt),!x)?null:new zc(m,v,x)}evaluate(n){return new so(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Fa=8192;function kd(a,n){a[0]=Math.min(a[0],n[0]),a[1]=Math.min(a[1],n[1]),a[2]=Math.max(a[2],n[0]),a[3]=Math.max(a[3],n[1])}function Dl(a,n){return!(a[0]<=n[0]||a[2]>=n[2]||a[1]<=n[1]||a[3]>=n[3])}function gf(a,n){const s=(180+a[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,m=Math.pow(2,n.z);return[Math.round(s*m*Fa),Math.round(h*m*Fa)]}function Sv(a,n,s){const h=a[0]-n[0],m=a[1]-n[1],v=a[0]-s[0],x=a[1]-s[1];return h*x-v*m==0&&h*v<=0&&m*x<=0}function Id(a,n){let s=!1;for(let x=0,S=n.length;x<S;x++){const T=n[x];for(let M=0,O=T.length;M<O-1;M++){if(Sv(a,T[M],T[M+1]))return!1;(m=T[M])[1]>(h=a)[1]!=(v=T[M+1])[1]>h[1]&&h[0]<(v[0]-m[0])*(h[1]-m[1])/(v[1]-m[1])+m[0]&&(s=!s)}}var h,m,v;return s}function Td(a,n){for(let s=0;s<n.length;s++)if(Id(a,n[s]))return!0;return!1}function yf(a,n,s,h){const m=h[0]-s[0],v=h[1]-s[1],x=(a[0]-s[0])*v-m*(a[1]-s[1]),S=(n[0]-s[0])*v-m*(n[1]-s[1]);return x>0&&S<0||x<0&&S>0}function Cv(a,n,s){for(const M of s)for(let O=0;O<M.length-1;++O)if((S=[(x=M[O+1])[0]-(v=M[O])[0],x[1]-v[1]])[0]*(T=[(m=n)[0]-(h=a)[0],m[1]-h[1]])[1]-S[1]*T[0]!=0&&yf(h,m,v,x)&&yf(v,x,h,m))return!0;var h,m,v,x,S,T;return!1}function vf(a,n){for(let s=0;s<a.length;++s)if(!Id(a[s],n))return!1;for(let s=0;s<a.length-1;++s)if(Cv(a[s],a[s+1],n))return!1;return!0}function _f(a,n){for(let s=0;s<n.length;s++)if(vf(a,n[s]))return!0;return!1}function Mc(a,n,s){const h=[];for(let m=0;m<a.length;m++){const v=[];for(let x=0;x<a[m].length;x++){const S=gf(a[m][x],s);kd(n,S),v.push(S)}h.push(v)}return h}function xf(a,n,s){const h=[];for(let m=0;m<a.length;m++){const v=Mc(a[m],n,s);h.push(v)}return h}function bf(a,n,s,h){if(a[0]<s[0]||a[0]>s[2]){const m=.5*h;let v=a[0]-s[0]>m?-h:s[0]-a[0]>m?h:0;v===0&&(v=a[0]-s[2]>m?-h:s[2]-a[0]>m?h:0),a[0]+=v}kd(n,a)}function Pd(a,n,s,h){const m=Math.pow(2,h.z)*Fa,v=[h.x*Fa,h.y*Fa],x=[];for(const S of a)for(const T of S){const M=[T.x+v[0],T.y+v[1]];bf(M,n,s,m),x.push(M)}return x}function Ed(a,n,s,h){const m=Math.pow(2,h.z)*Fa,v=[h.x*Fa,h.y*Fa],x=[];for(const T of a){const M=[];for(const O of T){const j=[O.x+v[0],O.y+v[1]];kd(n,j),M.push(j)}x.push(M)}if(n[2]-n[0]<=m/2){(S=n)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const T of x)for(const M of T)bf(M,n,s,m)}var S;return x}class ss{constructor(n,s){this.type=$t,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Ns(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let m=0;m<h.features.length;++m){const v=h.features[m].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new ss(h,h.features[m].geometry)}else if(h.type==="Feature"){const m=h.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new ss(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new ss(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Mc(h.coordinates,v,x),T=Pd(s.geometry(),m,v,x);if(!Dl(m,v))return!1;for(const M of T)if(!Id(M,S))return!1}if(h.type==="MultiPolygon"){const S=xf(h.coordinates,v,x),T=Pd(s.geometry(),m,v,x);if(!Dl(m,v))return!1;for(const M of T)if(!Td(M,S))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const m=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Mc(h.coordinates,v,x),T=Ed(s.geometry(),m,v,x);if(!Dl(m,v))return!1;for(const M of T)if(!vf(M,S))return!1}if(h.type==="MultiPolygon"){const S=xf(h.coordinates,v,x),T=Ed(s.geometry(),m,v,x);if(!Dl(m,v))return!1;for(const M of T)if(!_f(M,S))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Ac{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new Ac(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class uo{constructor(n,s,h,m){this.name=n,this.type=s,this._evaluate=h,this.args=m}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],m=uo.definitions[h];if(!m)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=x.filter(([M])=>!Array.isArray(M)||M.length===n.length-1);let T=null;for(const[M,O]of S){T=new Ec(s.registry,Dc,s.path,null,s.scope);const j=[];let K=!1;for(let Y=1;Y<n.length;Y++){const ee=n[Y],se=Array.isArray(M)?M[Y-1]:M.type,me=T.parse(ee,1+j.length,se);if(!me){K=!0;break}j.push(me)}if(!K)if(Array.isArray(M)&&M.length!==j.length)T.error(`Expected ${M.length} arguments, but found ${j.length} instead.`);else{for(let Y=0;Y<j.length;Y++){const ee=Array.isArray(M)?M[Y]:M.type,se=j[Y];T.concat(Y+1).checkSubtype(ee,se.type)}if(T.errors.length===0)return new uo(h,v,O,j)}}if(S.length===1)s.errors.push(...T.errors);else{const M=(S.length?S:x).map(([j])=>{return K=j,Array.isArray(K)?`(${K.map(ie).join(", ")})`:`(${ie(K.type)}...)`;var K}).join(" | "),O=[];for(let j=1;j<n.length;j++){const K=s.parse(n[j],1+O.length);if(!K)return null;O.push(ie(K.type))}s.error(`Expected arguments of type ${M}, but found (${O.join(", ")}) instead.`)}return null}static register(n,s){uo.definitions=s;for(const h in s)n[h]=uo}}function Dc(a){if(a instanceof Ac)return Dc(a.boundExpression);if(a instanceof uo&&a.name==="error"||a instanceof zc||a instanceof ss)return!1;const n=a instanceof Oa||a instanceof co;let s=!0;return a.eachChild(h=>{s=n?s&&Dc(h):s&&h instanceof as}),!!s&&Rc(a)&&Lc(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Rc(a){if(a instanceof uo&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof ss)return!1;let n=!0;return a.eachChild(s=>{n&&!Rc(s)&&(n=!1)}),n}function Rl(a){if(a instanceof uo&&a.name==="feature-state")return!1;let n=!0;return a.eachChild(s=>{n&&!Rl(s)&&(n=!1)}),n}function Lc(a,n){if(a instanceof uo&&n.indexOf(a.name)>=0)return!1;let s=!0;return a.eachChild(h=>{s&&!Lc(h,n)&&(s=!1)}),s}function js(a,n){const s=a.length-1;let h,m,v=0,x=s,S=0;for(;v<=x;)if(S=Math.floor((v+x)/2),h=a[S],m=a[S+1],h<=n){if(S===s||n<m)return S;v=S+1}else{if(!(h>n))throw new dn("Input is not a number.");x=S-1}return 0}class Na{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[m,v]of h)this.labels.push(m),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,Qe);if(!h)return null;const m=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<n.length;x+=2){const S=x===1?-1/0:n[x],T=n[x+1],M=x,O=x+1;if(typeof S!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(m.length&&m[m.length-1][0]>=S)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);const j=s.parse(T,O,v);if(!j)return null;v=v||j.type,m.push([S,j])}return new Na(v,h,m)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=s[0])return h[0].evaluate(n);const v=s.length;return m>=s[v-1]?h[v-1].evaluate(n):h[js(s,m)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function br(a,n,s){return a+s*(n-a)}function $c(a,n,s){return a.map((h,m)=>br(h,n[m],s))}const Gi={number:br,color:function(a,n,s,h="rgb"){switch(h){case"rgb":{const[m,v,x,S]=$c(a.rgb,n.rgb,s);return new Ir(m,v,x,S,!1)}case"hcl":{const[m,v,x,S]=a.hcl,[T,M,O,j]=n.hcl;let K,Y;if(isNaN(m)||isNaN(T))isNaN(m)?isNaN(T)?K=NaN:(K=T,x!==1&&x!==0||(Y=M)):(K=m,O!==1&&O!==0||(Y=v));else{let Te=T-m;T>m&&Te>180?Te-=360:T<m&&m-T>180&&(Te+=360),K=m+s*Te}const[ee,se,me,ve]=function([Te,be,Pe,je]){return Te=isNaN(Te)?0:Te*Re,tr([Pe,Math.cos(Te)*be,Math.sin(Te)*be,je])}([K,Y??br(v,M,s),br(x,O,s),br(S,j,s)]);return new Ir(ee,se,me,ve,!1)}case"lab":{const[m,v,x,S]=tr($c(a.lab,n.lab,s));return new Ir(m,v,x,S,!1)}}},array:$c,padding:function(a,n,s){return new Wi($c(a.values,n.values,s))},variableAnchorOffsetCollection:function(a,n,s){const h=a.values,m=n.values;if(h.length!==m.length)throw new dn(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==m[x])throw new dn(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${m[x]}`);v.push(h[x]);const[S,T]=h[x+1],[M,O]=m[x+1];v.push([br(S,M,s),br(T,O,s)])}return new lo(v)}};class qi{constructor(n,s,h,m,v){this.type=n,this.operator=s,this.interpolation=h,this.input=m,this.labels=[],this.outputs=[];for(const[x,S]of v)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(n,s,h,m){let v=0;if(n.name==="exponential")v=zd(s,n.base,h,m);else if(n.name==="linear")v=zd(s,1,h,m);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new H(x[0],x[1],x[2],x[3]).solve(zd(s,1,h,m))}return v}static parse(n,s){let[h,m,v,...x]=n;if(!Array.isArray(m)||m.length===0)return s.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const M=m[1];if(typeof M!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:M}}else{if(m[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const M=m.slice(1);if(M.length!==4||M.some(O=>typeof O!="number"||O<0||O>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:M}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,Qe),!v)return null;const S=[];let T=null;h==="interpolate-hcl"||h==="interpolate-lab"?T=ar:s.expectedType&&s.expectedType.kind!=="value"&&(T=s.expectedType);for(let M=0;M<x.length;M+=2){const O=x[M],j=x[M+1],K=M+3,Y=M+4;if(typeof O!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',K);if(S.length&&S[S.length-1][0]>=O)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',K);const ee=s.parse(j,Y,T);if(!ee)return null;T=T||ee.type,S.push([O,ee])}return De(T,Qe)||De(T,ar)||De(T,A)||De(T,W)||De(T,Q(Qe))?new qi(T,h,m,v,S):s.error(`Type ${ie(T)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const m=this.input.evaluate(n);if(m<=s[0])return h[0].evaluate(n);const v=s.length;if(m>=s[v-1])return h[v-1].evaluate(n);const x=js(s,m),S=qi.interpolationFactor(this.interpolation,m,s[x],s[x+1]),T=h[x].evaluate(n),M=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return Gi[this.type.kind](T,M,S);case"interpolate-hcl":return Gi.color(T,M,S,"hcl");case"interpolate-lab":return Gi.color(T,M,S,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function zd(a,n,s,h){const m=h-s,v=a-s;return m===0?0:n===1?v/m:(Math.pow(n,v)-1)/(Math.pow(n,m)-1)}class Bc{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const m=s.expectedType;m&&m.kind!=="value"&&(h=m);const v=[];for(const S of n.slice(1)){const T=s.parse(S,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!T)return null;h=h||T.type,v.push(T)}if(!h)throw new Error("No output type");const x=m&&v.some(S=>fe(m,S.type));return new Bc(x?Jt:h,v)}evaluate(n){let s,h=null,m=0;for(const v of this.args)if(m++,h=v.evaluate(n),h&&h instanceof ti&&!h.available&&(s||(s=h.name),h=null,m===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Oc{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=s.parse(n[v+1],v+1);if(!S)return null;h.push([x,S])}const m=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return m?new Oc(h,m):null}outputDefined(){return this.result.outputDefined()}}class Md{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Qe),m=s.parse(n[2],2,Q(s.expectedType||Jt));return h&&m?new Md(m.type.itemType,h,m):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new dn(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new dn(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new dn(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Ad{constructor(n,s){this.type=$t,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Jt),m=s.parse(n[2],2,Jt);return h&&m?oe(h.type,[$t,Kt,Qe,xr,Jt])?new Ad(h,m):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!_e(s,["boolean","string","number","null"]))throw new dn(`Expected first argument to be of type boolean, string, number or null, but found ${ie(an(s))} instead.`);if(!_e(h,["string","array"]))throw new dn(`Expected second argument to be of type array or string, but found ${ie(an(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Fc{constructor(n,s,h){this.type=Qe,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Jt),m=s.parse(n[2],2,Jt);if(!h||!m)return null;if(!oe(h.type,[$t,Kt,Qe,xr,Jt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ie(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,Qe);return v?new Fc(h,m,v):null}return new Fc(h,m)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!_e(s,["boolean","string","number","null"]))throw new dn(`Expected first argument to be of type boolean, string, number or null, but found ${ie(an(s))} instead.`);if(!_e(h,["string","array"]))throw new dn(`Expected second argument to be of type array or string, but found ${ie(an(h))} instead.`);if(this.fromIndex){const m=this.fromIndex.evaluate(n);return h.indexOf(s,m)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Dd{constructor(n,s,h,m,v,x){this.inputType=n,this.type=s,this.input=h,this.cases=m,this.outputs=v,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,m;s.expectedType&&s.expectedType.kind!=="value"&&(m=s.expectedType);const v={},x=[];for(let M=2;M<n.length-1;M+=2){let O=n[M];const j=n[M+1];Array.isArray(O)||(O=[O]);const K=s.concat(M);if(O.length===0)return K.error("Expected at least one branch label.");for(const ee of O){if(typeof ee!="number"&&typeof ee!="string")return K.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return K.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return K.error("Numeric branch labels must be integer values.");if(h){if(K.checkSubtype(h,an(ee)))return null}else h=an(ee);if(v[String(ee)]!==void 0)return K.error("Branch labels must be unique.");v[String(ee)]=x.length}const Y=s.parse(j,M,m);if(!Y)return null;m=m||Y.type,x.push(Y)}const S=s.parse(n[1],1,Jt);if(!S)return null;const T=s.parse(n[n.length-1],n.length-1,m);return T?S.type.kind!=="value"&&s.concat(1).checkSubtype(h,S.type)?null:new Dd(h,m,S,v,x,T):null}evaluate(n){const s=this.input.evaluate(n);return(an(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Rd{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const m=[];for(let x=1;x<n.length-1;x+=2){const S=s.parse(n[x],x,$t);if(!S)return null;const T=s.parse(n[x+1],x+1,h);if(!T)return null;m.push([S,T]),h=h||T.type}const v=s.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new Rd(h,m,v)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class Nc{constructor(n,s,h,m){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=m}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Jt),m=s.parse(n[2],2,Qe);if(!h||!m)return null;if(!oe(h.type,[Q(Jt),Kt,Jt]))return s.error(`Expected first argument to be of type array or string, but found ${ie(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,Qe);return v?new Nc(h.type,h,m,v):null}return new Nc(h.type,h,m)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!_e(s,["string","array"]))throw new dn(`Expected first argument to be of type array or string, but found ${ie(an(s))} instead.`);if(this.endIndex){const m=this.endIndex.evaluate(n);return s.slice(h,m)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function wf(a,n){return a==="=="||a==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Sf(a,n,s,h){return h.compare(n,s)===0}function Vs(a,n,s){const h=a!=="=="&&a!=="!=";return class Sz{constructor(v,x,S){this.type=$t,this.lhs=v,this.rhs=x,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const S=v[0];let T=x.parse(v[1],1,Jt);if(!T)return null;if(!wf(S,T.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${ie(T.type)}'.`);let M=x.parse(v[2],2,Jt);if(!M)return null;if(!wf(S,M.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${ie(M.type)}'.`);if(T.type.kind!==M.type.kind&&T.type.kind!=="value"&&M.type.kind!=="value")return x.error(`Cannot compare types '${ie(T.type)}' and '${ie(M.type)}'.`);h&&(T.type.kind==="value"&&M.type.kind!=="value"?T=new co(M.type,[T]):T.type.kind!=="value"&&M.type.kind==="value"&&(M=new co(T.type,[M])));let O=null;if(v.length===4){if(T.type.kind!=="string"&&M.type.kind!=="string"&&T.type.kind!=="value"&&M.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(O=x.parse(v[3],3,gn),!O)return null}return new Sz(T,M,O)}evaluate(v){const x=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const T=an(x),M=an(S);if(T.kind!==M.kind||T.kind!=="string"&&T.kind!=="number")throw new dn(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${T.kind}, ${M.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const T=an(x),M=an(S);if(T.kind!=="string"||M.kind!=="string")return n(v,x,S)}return this.collator?s(v,x,S,this.collator.evaluate(v)):n(v,x,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const kv=Vs("==",function(a,n,s){return n===s},Sf),Iv=Vs("!=",function(a,n,s){return n!==s},function(a,n,s,h){return!Sf(0,n,s,h)}),Tv=Vs("<",function(a,n,s){return n<s},function(a,n,s,h){return h.compare(n,s)<0}),Pv=Vs(">",function(a,n,s){return n>s},function(a,n,s,h){return h.compare(n,s)>0}),Ev=Vs("<=",function(a,n,s){return n<=s},function(a,n,s,h){return h.compare(n,s)<=0}),zv=Vs(">=",function(a,n,s){return n>=s},function(a,n,s,h){return h.compare(n,s)>=0});class Ld{constructor(n,s,h,m,v){this.type=Kt,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=m,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Qe);if(!h)return null;const m=n[2];if(typeof m!="object"||Array.isArray(m))return s.error("NumberFormat options argument must be an object.");let v=null;if(m.locale&&(v=s.parse(m.locale,1,Kt),!v))return null;let x=null;if(m.currency&&(x=s.parse(m.currency,1,Kt),!x))return null;let S=null;if(m["min-fraction-digits"]&&(S=s.parse(m["min-fraction-digits"],1,Qe),!S))return null;let T=null;return m["max-fraction-digits"]&&(T=s.parse(m["max-fraction-digits"],1,Qe),!T)?null:new Ld(h,v,x,S,T)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class jc{constructor(n){this.type=de,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const m=[];let v=!1;for(let x=1;x<=n.length-1;++x){const S=n[x];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let T=null;if(S["font-scale"]&&(T=s.parse(S["font-scale"],1,Qe),!T))return null;let M=null;if(S["text-font"]&&(M=s.parse(S["text-font"],1,Q(Kt)),!M))return null;let O=null;if(S["text-color"]&&(O=s.parse(S["text-color"],1,ar),!O))return null;const j=m[m.length-1];j.scale=T,j.font=M,j.textColor=O}else{const T=s.parse(n[x],1,Jt);if(!T)return null;const M=T.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,m.push({content:T,scale:null,font:null,textColor:null})}}return new jc(m)}evaluate(n){return new si(this.sections.map(s=>{const h=s.content.evaluate(n);return an(h)===$?new Hi("",h,null,null,null):new Hi(Er(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class $d{constructor(n){this.type=$,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Kt);return h?new $d(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=ti.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class Bd{constructor(n){this.type=Qe,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${ie(h.type)} instead.`):new Bd(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new dn(`Expected value to be of type string or array, but found ${ie(an(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Us={"==":kv,"!=":Iv,">":Pv,"<":Tv,">=":zv,"<=":Ev,array:co,at:Md,boolean:co,case:Rd,coalesce:Bc,collator:zc,format:jc,image:$d,in:Ad,"index-of":Fc,interpolate:qi,"interpolate-hcl":qi,"interpolate-lab":qi,length:Bd,let:Oc,literal:as,match:Dd,number:co,"number-format":Ld,object:co,slice:Nc,step:Na,string:co,"to-boolean":Oa,"to-color":Oa,"to-number":Oa,"to-string":Oa,var:Ac,within:ss};function Cf(a,[n,s,h,m]){n=n.evaluate(a),s=s.evaluate(a),h=h.evaluate(a);const v=m?m.evaluate(a):1,x=Tc(n,s,h,v);if(x)throw new dn(x);return new Ir(n/255,s/255,h/255,v,!1)}function kf(a,n){return a in n}function Od(a,n){const s=n[a];return s===void 0?null:s}function ls(a){return{type:a}}function If(a){return{result:"success",value:a}}function ja(a){return{result:"error",value:a}}function Hs(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function Tf(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Fd(a){return!!a.expression&&a.expression.interpolated}function zr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function sn(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Mv(a){return a}function wr(a,n){const s=n.type==="color",h=a.stops&&typeof a.stops[0][0]=="object",m=h||!(h||a.property!==void 0),v=a.type||(Fd(n)?"exponential":"interval");if(s||n.type==="padding"){const O=s?Ir.parse:Wi.parse;(a=Wt({},a)).stops&&(a.stops=a.stops.map(j=>[j[0],O(j[1])])),a.default=O(a.default?a.default:n.default)}if(a.colorSpace&&(x=a.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var x;let S,T,M;if(v==="exponential")S=Ll;else if(v==="interval")S=nn;else if(v==="categorical"){S=ln,T=Object.create(null);for(const O of a.stops)T[O[0]]=O[1];M=typeof a.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);S=Pf}if(h){const O={},j=[];for(let ee=0;ee<a.stops.length;ee++){const se=a.stops[ee],me=se[0].zoom;O[me]===void 0&&(O[me]={zoom:me,type:a.type,property:a.property,default:a.default,stops:[]},j.push(me)),O[me].stops.push([se[0].value,se[1]])}const K=[];for(const ee of j)K.push([O[ee].zoom,wr(O[ee],n)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:qi.interpolationFactor.bind(void 0,Y),zoomStops:K.map(ee=>ee[0]),evaluate:({zoom:ee},se)=>Ll({stops:K,base:a.base},n,ee).evaluate(ee,se)}}if(m){const O=v==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:O,interpolationFactor:qi.interpolationFactor.bind(void 0,O),zoomStops:a.stops.map(j=>j[0]),evaluate:({zoom:j})=>S(a,n,j,T,M)}}return{kind:"source",evaluate(O,j){const K=j&&j.properties?j.properties[a.property]:void 0;return K===void 0?cs(a.default,n.default):S(a,n,K,T,M)}}}function cs(a,n,s){return a!==void 0?a:n!==void 0?n:s!==void 0?s:void 0}function ln(a,n,s,h,m){return cs(typeof s===m?h[s]:void 0,a.default,n.default)}function nn(a,n,s){if(zr(s)!=="number")return cs(a.default,n.default);const h=a.stops.length;if(h===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[h-1][0])return a.stops[h-1][1];const m=js(a.stops.map(v=>v[0]),s);return a.stops[m][1]}function Ll(a,n,s){const h=a.base!==void 0?a.base:1;if(zr(s)!=="number")return cs(a.default,n.default);const m=a.stops.length;if(m===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[m-1][0])return a.stops[m-1][1];const v=js(a.stops.map(O=>O[0]),s),x=function(O,j,K,Y){const ee=Y-K,se=O-K;return ee===0?0:j===1?se/ee:(Math.pow(j,se)-1)/(Math.pow(j,ee)-1)}(s,h,a.stops[v][0],a.stops[v+1][0]),S=a.stops[v][1],T=a.stops[v+1][1],M=Gi[n.type]||Mv;return typeof S.evaluate=="function"?{evaluate(...O){const j=S.evaluate.apply(void 0,O),K=T.evaluate.apply(void 0,O);if(j!==void 0&&K!==void 0)return M(j,K,x,a.colorSpace)}}:M(S,T,x,a.colorSpace)}function Pf(a,n,s){switch(n.type){case"color":s=Ir.parse(s);break;case"formatted":s=si.fromString(s.toString());break;case"resolvedImage":s=ti.fromString(s.toString());break;case"padding":s=Wi.parse(s);break;default:zr(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return cs(s,a.default,n.default)}uo.register(Us,{error:[{kind:"error"},[Kt],(a,[n])=>{throw new dn(n.evaluate(a))}],typeof:[Kt,[Jt],(a,[n])=>ie(an(n.evaluate(a)))],"to-rgba":[Q(Qe,4),[ar],(a,[n])=>{const[s,h,m,v]=n.evaluate(a).rgb;return[255*s,255*h,255*m,v]}],rgb:[ar,[Qe,Qe,Qe],Cf],rgba:[ar,[Qe,Qe,Qe,Qe],Cf],has:{type:$t,overloads:[[[Kt],(a,[n])=>kf(n.evaluate(a),a.properties())],[[Kt,Gr],(a,[n,s])=>kf(n.evaluate(a),s.evaluate(a))]]},get:{type:Jt,overloads:[[[Kt],(a,[n])=>Od(n.evaluate(a),a.properties())],[[Kt,Gr],(a,[n,s])=>Od(n.evaluate(a),s.evaluate(a))]]},"feature-state":[Jt,[Kt],(a,[n])=>Od(n.evaluate(a),a.featureState||{})],properties:[Gr,[],a=>a.properties()],"geometry-type":[Kt,[],a=>a.geometryType()],id:[Jt,[],a=>a.id()],zoom:[Qe,[],a=>a.globals.zoom],"heatmap-density":[Qe,[],a=>a.globals.heatmapDensity||0],"line-progress":[Qe,[],a=>a.globals.lineProgress||0],accumulated:[Jt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Qe,ls(Qe),(a,n)=>{let s=0;for(const h of n)s+=h.evaluate(a);return s}],"*":[Qe,ls(Qe),(a,n)=>{let s=1;for(const h of n)s*=h.evaluate(a);return s}],"-":{type:Qe,overloads:[[[Qe,Qe],(a,[n,s])=>n.evaluate(a)-s.evaluate(a)],[[Qe],(a,[n])=>-n.evaluate(a)]]},"/":[Qe,[Qe,Qe],(a,[n,s])=>n.evaluate(a)/s.evaluate(a)],"%":[Qe,[Qe,Qe],(a,[n,s])=>n.evaluate(a)%s.evaluate(a)],ln2:[Qe,[],()=>Math.LN2],pi:[Qe,[],()=>Math.PI],e:[Qe,[],()=>Math.E],"^":[Qe,[Qe,Qe],(a,[n,s])=>Math.pow(n.evaluate(a),s.evaluate(a))],sqrt:[Qe,[Qe],(a,[n])=>Math.sqrt(n.evaluate(a))],log10:[Qe,[Qe],(a,[n])=>Math.log(n.evaluate(a))/Math.LN10],ln:[Qe,[Qe],(a,[n])=>Math.log(n.evaluate(a))],log2:[Qe,[Qe],(a,[n])=>Math.log(n.evaluate(a))/Math.LN2],sin:[Qe,[Qe],(a,[n])=>Math.sin(n.evaluate(a))],cos:[Qe,[Qe],(a,[n])=>Math.cos(n.evaluate(a))],tan:[Qe,[Qe],(a,[n])=>Math.tan(n.evaluate(a))],asin:[Qe,[Qe],(a,[n])=>Math.asin(n.evaluate(a))],acos:[Qe,[Qe],(a,[n])=>Math.acos(n.evaluate(a))],atan:[Qe,[Qe],(a,[n])=>Math.atan(n.evaluate(a))],min:[Qe,ls(Qe),(a,n)=>Math.min(...n.map(s=>s.evaluate(a)))],max:[Qe,ls(Qe),(a,n)=>Math.max(...n.map(s=>s.evaluate(a)))],abs:[Qe,[Qe],(a,[n])=>Math.abs(n.evaluate(a))],round:[Qe,[Qe],(a,[n])=>{const s=n.evaluate(a);return s<0?-Math.round(-s):Math.round(s)}],floor:[Qe,[Qe],(a,[n])=>Math.floor(n.evaluate(a))],ceil:[Qe,[Qe],(a,[n])=>Math.ceil(n.evaluate(a))],"filter-==":[$t,[Kt,Jt],(a,[n,s])=>a.properties()[n.value]===s.value],"filter-id-==":[$t,[Jt],(a,[n])=>a.id()===n.value],"filter-type-==":[$t,[Kt],(a,[n])=>a.geometryType()===n.value],"filter-<":[$t,[Kt,Jt],(a,[n,s])=>{const h=a.properties()[n.value],m=s.value;return typeof h==typeof m&&h<m}],"filter-id-<":[$t,[Jt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[$t,[Kt,Jt],(a,[n,s])=>{const h=a.properties()[n.value],m=s.value;return typeof h==typeof m&&h>m}],"filter-id->":[$t,[Jt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[$t,[Kt,Jt],(a,[n,s])=>{const h=a.properties()[n.value],m=s.value;return typeof h==typeof m&&h<=m}],"filter-id-<=":[$t,[Jt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[$t,[Kt,Jt],(a,[n,s])=>{const h=a.properties()[n.value],m=s.value;return typeof h==typeof m&&h>=m}],"filter-id->=":[$t,[Jt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[$t,[Jt],(a,[n])=>n.value in a.properties()],"filter-has-id":[$t,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[$t,[Q(Kt)],(a,[n])=>n.value.indexOf(a.geometryType())>=0],"filter-id-in":[$t,[Q(Jt)],(a,[n])=>n.value.indexOf(a.id())>=0],"filter-in-small":[$t,[Kt,Q(Jt)],(a,[n,s])=>s.value.indexOf(a.properties()[n.value])>=0],"filter-in-large":[$t,[Kt,Q(Jt)],(a,[n,s])=>function(h,m,v,x){for(;v<=x;){const S=v+x>>1;if(m[S]===h)return!0;m[S]>h?x=S-1:v=S+1}return!1}(a.properties()[n.value],s.value,0,s.value.length-1)],all:{type:$t,overloads:[[[$t,$t],(a,[n,s])=>n.evaluate(a)&&s.evaluate(a)],[ls($t),(a,n)=>{for(const s of n)if(!s.evaluate(a))return!1;return!0}]]},any:{type:$t,overloads:[[[$t,$t],(a,[n,s])=>n.evaluate(a)||s.evaluate(a)],[ls($t),(a,n)=>{for(const s of n)if(s.evaluate(a))return!0;return!1}]]},"!":[$t,[$t],(a,[n])=>!n.evaluate(a)],"is-supported-script":[$t,[Kt],(a,[n])=>{const s=a.globals&&a.globals.isSupportedScript;return!s||s(n.evaluate(a))}],upcase:[Kt,[Kt],(a,[n])=>n.evaluate(a).toUpperCase()],downcase:[Kt,[Kt],(a,[n])=>n.evaluate(a).toLowerCase()],concat:[Kt,ls(Jt),(a,n)=>n.map(s=>Er(s.evaluate(a))).join("")],"resolved-locale":[Kt,[gn],(a,[n])=>n.evaluate(a).resolvedLocale()]});class Nd{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new Cd,this._defaultValue=s?(h=s).type==="color"&&sn(h.default)?new Ir(0,0,0,0):h.type==="color"?Ir.parse(h.default)||null:h.type==="padding"?Wi.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?lo.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,m,v,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,m,v,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=m,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new dn(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Vc(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Us}function Uc(a,n){const s=new Ec(Us,Dc,[],n?function(m){const v={color:ar,string:Kt,number:Qe,enum:Kt,boolean:$t,formatted:de,padding:A,resolvedImage:$,variableAnchorOffsetCollection:W};return m.type==="array"?Q(v[m.value]||Jt,m.length):v[m.type]}(n):void 0),h=s.parse(a,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?If(new Nd(h,n)):ja(s.errors)}class jd{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Rl(s.expression)}evaluateWithoutErrorHandling(n,s,h,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,m,v,x)}evaluate(n,s,h,m,v,x){return this._styleExpression.evaluate(n,s,h,m,v,x)}}class Hc{constructor(n,s,h,m){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Rl(s.expression),this.interpolationType=m}evaluateWithoutErrorHandling(n,s,h,m,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,m,v,x)}evaluate(n,s,h,m,v,x){return this._styleExpression.evaluate(n,s,h,m,v,x)}interpolationFactor(n,s,h){return this.interpolationType?qi.interpolationFactor(this.interpolationType,n,s,h):0}}function Vd(a,n){const s=Uc(a,n);if(s.result==="error")return s;const h=s.value.expression,m=Rc(h);if(!m&&!Hs(n))return ja([new Rt("","data expressions not supported")]);const v=Lc(h,["zoom"]);if(!v&&!Tf(n))return ja([new Rt("","zoom expressions not supported")]);const x=Bl(h);return x||v?x instanceof Rt?ja([x]):x instanceof qi&&!Fd(n)?ja([new Rt("",'"interpolate" expressions cannot be used with this property')]):If(x?new Hc(m?"camera":"composite",s.value,x.labels,x instanceof qi?x.interpolation:void 0):new jd(m?"constant":"source",s.value)):ja([new Rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class $l{constructor(n,s){this._parameters=n,this._specification=s,Wt(this,wr(this._parameters,this._specification))}static deserialize(n){return new $l(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Bl(a){let n=null;if(a instanceof Oc)n=Bl(a.result);else if(a instanceof Bc){for(const s of a.args)if(n=Bl(s),n)break}else(a instanceof Na||a instanceof qi)&&a.input instanceof uo&&a.input.name==="zoom"&&(n=a);return n instanceof Rt||a.eachChild(s=>{const h=Bl(s);h instanceof Rt?n=h:!n&&h?n=new Rt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new Rt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Ol(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const n of a.slice(1))if(!Ol(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Av={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ud(a){if(a==null)return{filter:()=>!0,needGeometry:!1};Ol(a)||(a=Wc(a));const n=Uc(a,Av);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,m)=>n.value.evaluate(s,h,{},m),needGeometry:Ef(a)}}function Dv(a,n){return a<n?-1:a>n?1:0}function Ef(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let n=1;n<a.length;n++)if(Ef(a[n]))return!0;return!1}function Wc(a){if(!a)return!0;const n=a[0];return a.length<=1?n!=="any":n==="=="?Hd(a[1],a[2],"=="):n==="!="?Fl(Hd(a[1],a[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Hd(a[1],a[2],n):n==="any"?(s=a.slice(1),["any"].concat(s.map(Wc))):n==="all"?["all"].concat(a.slice(1).map(Wc)):n==="none"?["all"].concat(a.slice(1).map(Wc).map(Fl)):n==="in"?zf(a[1],a.slice(2)):n==="!in"?Fl(zf(a[1],a.slice(2))):n==="has"?Mf(a[1]):n==="!has"?Fl(Mf(a[1])):n!=="within"||a;var s}function Hd(a,n,s){switch(a){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,a,n]}}function zf(a,n){if(n.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",a,["literal",n.sort(Dv)]]:["filter-in-small",a,["literal",n]]}}function Mf(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Fl(a){return["!",a]}function Gc(a){const n=typeof a;if(n==="number"||n==="boolean"||n==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let m="[";for(const v of a)m+=`${Gc(v)},`;return`${m}]`}const s=Object.keys(a).sort();let h="{";for(let m=0;m<s.length;m++)h+=`${JSON.stringify(s[m])}:${Gc(a[s[m]])},`;return`${h}}`}function qc(a){let n="";for(const s of cr)n+=`/${Gc(a[s])}`;return n}function Af(a){const n=a.value;return n?[new Le(a.key,n,"constants have been deprecated as of v8")]:[]}function hn(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function us(a){if(Array.isArray(a))return a.map(us);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const n={};for(const s in a)n[s]=us(a[s]);return n}return hn(a)}function Pi(a){const n=a.key,s=a.value,h=a.valueSpec||{},m=a.objectElementValidators||{},v=a.style,x=a.styleSpec,S=a.validateSpec;let T=[];const M=zr(s);if(M!=="object")return[new Le(n,s,`object expected, ${M} found`)];for(const O in s){const j=O.split(".")[0],K=h[j]||h["*"];let Y;if(m[j])Y=m[j];else if(h[j])Y=S;else if(m["*"])Y=m["*"];else{if(!h["*"]){T.push(new Le(n,s[O],`unknown property "${O}"`));continue}Y=S}T=T.concat(Y({key:(n&&`${n}.`)+O,value:s[O],valueSpec:K,style:v,styleSpec:x,object:s,objectKey:O,validateSpec:S},s))}for(const O in h)m[O]||h[O].required&&h[O].default===void 0&&s[O]===void 0&&T.push(new Le(n,s,`missing required property "${O}"`));return T}function Ws(a){const n=a.value,s=a.valueSpec,h=a.style,m=a.styleSpec,v=a.key,x=a.arrayElementValidator||a.validateSpec;if(zr(n)!=="array")return[new Le(v,n,`array expected, ${zr(n)} found`)];if(s.length&&n.length!==s.length)return[new Le(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Le(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let S={type:s.value,values:s.values};m.$version<7&&(S.function=s.function),zr(s.value)==="object"&&(S=s.value);let T=[];for(let M=0;M<n.length;M++)T=T.concat(x({array:n,arrayIndex:M,value:n[M],valueSpec:S,validateSpec:a.validateSpec,style:h,styleSpec:m,key:`${v}[${M}]`}));return T}function Nl(a){const n=a.key,s=a.value,h=a.valueSpec;let m=zr(s);return m==="number"&&s!=s&&(m="NaN"),m!=="number"?[new Le(n,s,`number expected, ${m} found`)]:"minimum"in h&&s<h.minimum?[new Le(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new Le(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Zc(a){const n=a.valueSpec,s=hn(a.value.type);let h,m,v,x={};const S=s!=="categorical"&&a.value.property===void 0,T=!S,M=zr(a.value.stops)==="array"&&zr(a.value.stops[0])==="array"&&zr(a.value.stops[0][0])==="object",O=Pi({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(Y){if(s==="identity")return[new Le(Y.key,Y.value,'identity function may not have a "stops" property')];let ee=[];const se=Y.value;return ee=ee.concat(Ws({key:Y.key,value:se,valueSpec:Y.valueSpec,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:j})),zr(se)==="array"&&se.length===0&&ee.push(new Le(Y.key,se,"array must have at least one stop")),ee},default:function(Y){return Y.validateSpec({key:Y.key,value:Y.value,valueSpec:n,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec})}}});return s==="identity"&&S&&O.push(new Le(a.key,a.value,'missing required property "property"')),s==="identity"||a.value.stops||O.push(new Le(a.key,a.value,'missing required property "stops"')),s==="exponential"&&a.valueSpec.expression&&!Fd(a.valueSpec)&&O.push(new Le(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(T&&!Hs(a.valueSpec)?O.push(new Le(a.key,a.value,"property functions not supported")):S&&!Tf(a.valueSpec)&&O.push(new Le(a.key,a.value,"zoom functions not supported"))),s!=="categorical"&&!M||a.value.property!==void 0||O.push(new Le(a.key,a.value,'"property" property is required')),O;function j(Y){let ee=[];const se=Y.value,me=Y.key;if(zr(se)!=="array")return[new Le(me,se,`array expected, ${zr(se)} found`)];if(se.length!==2)return[new Le(me,se,`array length 2 expected, length ${se.length} found`)];if(M){if(zr(se[0])!=="object")return[new Le(me,se,`object expected, ${zr(se[0])} found`)];if(se[0].zoom===void 0)return[new Le(me,se,"object stop key must have zoom")];if(se[0].value===void 0)return[new Le(me,se,"object stop key must have value")];if(v&&v>hn(se[0].zoom))return[new Le(me,se[0].zoom,"stop zoom values must appear in ascending order")];hn(se[0].zoom)!==v&&(v=hn(se[0].zoom),m=void 0,x={}),ee=ee.concat(Pi({key:`${me}[0]`,value:se[0],valueSpec:{zoom:{}},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:Nl,value:K}}))}else ee=ee.concat(K({key:`${me}[0]`,value:se[0],valueSpec:{},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec},se));return Vc(us(se[1]))?ee.concat([new Le(`${me}[1]`,se[1],"expressions are not allowed in function stops.")]):ee.concat(Y.validateSpec({key:`${me}[1]`,value:se[1],valueSpec:n,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec}))}function K(Y,ee){const se=zr(Y.value),me=hn(Y.value),ve=Y.value!==null?Y.value:ee;if(h){if(se!==h)return[new Le(Y.key,ve,`${se} stop domain type must match previous stop domain type ${h}`)]}else h=se;if(se!=="number"&&se!=="string"&&se!=="boolean")return[new Le(Y.key,ve,"stop domain value must be a number, string, or boolean")];if(se!=="number"&&s!=="categorical"){let Te=`number expected, ${se} found`;return Hs(n)&&s===void 0&&(Te+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Le(Y.key,ve,Te)]}return s!=="categorical"||se!=="number"||isFinite(me)&&Math.floor(me)===me?s!=="categorical"&&se==="number"&&m!==void 0&&me<m?[new Le(Y.key,ve,"stop domain values must appear in ascending order")]:(m=me,s==="categorical"&&me in x?[new Le(Y.key,ve,"stop domain values must be unique")]:(x[me]=!0,[])):[new Le(Y.key,ve,`integer expected, found ${me}`)]}}function ds(a){const n=(a.expressionContext==="property"?Vd:Uc)(us(a.value),a.valueSpec);if(n.result==="error")return n.value.map(h=>new Le(`${a.key}${h.key}`,a.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!s.outputDefined())return[new Le(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Rl(s))return[new Le(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Rl(s))return[new Le(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Lc(s,["zoom","feature-state"]))return[new Le(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Rc(s))return[new Le(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function jl(a){const n=a.key,s=a.value,h=a.valueSpec,m=[];return Array.isArray(h.values)?h.values.indexOf(hn(s))===-1&&m.push(new Le(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(hn(s))===-1&&m.push(new Le(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),m}function Gs(a){return Ol(us(a.value))?ds(Wt({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Df(a)}function Df(a){const n=a.value,s=a.key;if(zr(n)!=="array")return[new Le(s,n,`array expected, ${zr(n)} found`)];const h=a.styleSpec;let m,v=[];if(n.length<1)return[new Le(s,n,"filter array must have at least 1 element")];switch(v=v.concat(jl({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:a.style,styleSpec:a.styleSpec})),hn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&hn(n[1])==="$type"&&v.push(new Le(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Le(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(m=zr(n[1]),m!=="string"&&v.push(new Le(`${s}[1]`,n[1],`string expected, ${m} found`)));for(let x=2;x<n.length;x++)m=zr(n[x]),hn(n[1])==="$type"?v=v.concat(jl({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:a.style,styleSpec:a.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&v.push(new Le(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(Df({key:`${s}[${x}]`,value:n[x],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":m=zr(n[1]),n.length!==2?v.push(new Le(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="string"&&v.push(new Le(`${s}[1]`,n[1],`string expected, ${m} found`));break;case"within":m=zr(n[1]),n.length!==2?v.push(new Le(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):m!=="object"&&v.push(new Le(`${s}[1]`,n[1],`object expected, ${m} found`))}return v}function Rf(a,n){const s=a.key,h=a.validateSpec,m=a.style,v=a.styleSpec,x=a.value,S=a.objectKey,T=v[`${n}_${a.layerType}`];if(!T)return[];const M=S.match(/^(.*)-transition$/);if(n==="paint"&&M&&T[M[1]]&&T[M[1]].transition)return h({key:s,value:x,valueSpec:v.transition,style:m,styleSpec:v});const O=a.valueSpec||T[S];if(!O)return[new Le(s,x,`unknown property "${S}"`)];let j;if(zr(x)==="string"&&Hs(O)&&!O.tokens&&(j=/^{([^}]+)}$/.exec(x)))return[new Le(s,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const K=[];return a.layerType==="symbol"&&(S==="text-field"&&m&&!m.glyphs&&K.push(new Le(s,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&sn(us(x))&&hn(x.type)==="identity"&&K.push(new Le(s,x,'"text-font" does not support identity functions'))),K.concat(h({key:a.key,value:x,valueSpec:O,style:m,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:S}))}function Lf(a){return Rf(a,"paint")}function $f(a){return Rf(a,"layout")}function Bf(a){let n=[];const s=a.value,h=a.key,m=a.style,v=a.styleSpec;s.type||s.ref||n.push(new Le(h,s,'either "type" or "ref" is required'));let x=hn(s.type);const S=hn(s.ref);if(s.id){const T=hn(s.id);for(let M=0;M<a.arrayIndex;M++){const O=m.layers[M];hn(O.id)===T&&n.push(new Le(h,s.id,`duplicate layer id "${s.id}", previously used at line ${O.id.__line__}`))}}if("ref"in s){let T;["type","source","source-layer","filter","layout"].forEach(M=>{M in s&&n.push(new Le(h,s[M],`"${M}" is prohibited for ref layers`))}),m.layers.forEach(M=>{hn(M.id)===S&&(T=M)}),T?T.ref?n.push(new Le(h,s.ref,"ref cannot reference another ref layer")):x=hn(T.type):n.push(new Le(h,s.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(s.source){const T=m.sources&&m.sources[s.source],M=T&&hn(T.type);T?M==="vector"&&x==="raster"?n.push(new Le(h,s.source,`layer "${s.id}" requires a raster source`)):M!=="raster-dem"&&x==="hillshade"?n.push(new Le(h,s.source,`layer "${s.id}" requires a raster-dem source`)):M==="raster"&&x!=="raster"?n.push(new Le(h,s.source,`layer "${s.id}" requires a vector source`)):M!=="vector"||s["source-layer"]?M==="raster-dem"&&x!=="hillshade"?n.push(new Le(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||M==="geojson"&&T.lineMetrics||n.push(new Le(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Le(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Le(h,s.source,`source "${s.source}" not found`))}else n.push(new Le(h,s,'missing required property "source"'));return n=n.concat(Pi({key:h,value:s,valueSpec:v.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:s,objectKey:"type"}),filter:Gs,layout:T=>Pi({layer:s,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":M=>$f(Wt({layerType:x},M))}}),paint:T=>Pi({layer:s,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":M=>Lf(Wt({layerType:x},M))}})}})),n}function Uo(a){const n=a.value,s=a.key,h=zr(n);return h!=="string"?[new Le(s,n,`string expected, ${h} found`)]:[]}const Vl={promoteId:function({key:a,value:n}){if(zr(n)==="string")return Uo({key:a,value:n});{const s=[];for(const h in n)s.push(...Uo({key:`${a}.${h}`,value:n[h]}));return s}}};function Zi(a){const n=a.value,s=a.key,h=a.styleSpec,m=a.style,v=a.validateSpec;if(!n.type)return[new Le(s,n,'"type" is required')];const x=hn(n.type);let S;switch(x){case"vector":case"raster":return S=Pi({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:a.style,styleSpec:h,objectElementValidators:Vl,validateSpec:v}),S;case"raster-dem":return S=function(T){var M;const O=(M=T.sourceName)!==null&&M!==void 0?M:"",j=T.value,K=T.styleSpec,Y=K.source_raster_dem,ee=T.style;let se=[];const me=zr(j);if(j===void 0)return se;if(me!=="object")return se.push(new Le("source_raster_dem",j,`object expected, ${me} found`)),se;const ve=hn(j.encoding)==="custom",Te=["redFactor","greenFactor","blueFactor","baseShift"],be=T.value.encoding?`"${T.value.encoding}"`:"Default";for(const Pe in j)!ve&&Te.includes(Pe)?se.push(new Le(Pe,j[Pe],`In "${O}": "${Pe}" is only valid when "encoding" is set to "custom". ${be} encoding found`)):Y[Pe]?se=se.concat(T.validateSpec({key:Pe,value:j[Pe],valueSpec:Y[Pe],validateSpec:T.validateSpec,style:ee,styleSpec:K})):se.push(new Le(Pe,j[Pe],`unknown property "${Pe}"`));return se}({sourceName:s,value:n,style:a.style,styleSpec:h,validateSpec:v}),S;case"geojson":if(S=Pi({key:s,value:n,valueSpec:h.source_geojson,style:m,styleSpec:h,validateSpec:v,objectElementValidators:Vl}),n.cluster)for(const T in n.clusterProperties){const[M,O]=n.clusterProperties[T],j=typeof M=="string"?[M,["accumulated"],["get",T]]:M;S.push(...ds({key:`${s}.${T}.map`,value:O,validateSpec:v,expressionContext:"cluster-map"})),S.push(...ds({key:`${s}.${T}.reduce`,value:j,validateSpec:v,expressionContext:"cluster-reduce"}))}return S;case"video":return Pi({key:s,value:n,valueSpec:h.source_video,style:m,validateSpec:v,styleSpec:h});case"image":return Pi({key:s,value:n,valueSpec:h.source_image,style:m,validateSpec:v,styleSpec:h});case"canvas":return[new Le(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return jl({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:m,validateSpec:v,styleSpec:h})}}function Ul(a){const n=a.value,s=a.styleSpec,h=s.light,m=a.style;let v=[];const x=zr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Le("light",n,`object expected, ${x} found`)]),v;for(const S in n){const T=S.match(/^(.*)-transition$/);v=v.concat(T&&h[T[1]]&&h[T[1]].transition?a.validateSpec({key:S,value:n[S],valueSpec:s.transition,validateSpec:a.validateSpec,style:m,styleSpec:s}):h[S]?a.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:a.validateSpec,style:m,styleSpec:s}):[new Le(S,n[S],`unknown property "${S}"`)])}return v}function Of(a){const n=a.value,s=a.styleSpec,h=s.terrain,m=a.style;let v=[];const x=zr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Le("terrain",n,`object expected, ${x} found`)]),v;for(const S in n)v=v.concat(h[S]?a.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:a.validateSpec,style:m,styleSpec:s}):[new Le(S,n[S],`unknown property "${S}"`)]);return v}function Ff(a){let n=[];const s=a.value,h=a.key;if(Array.isArray(s)){const m=[],v=[];for(const x in s)s[x].id&&m.includes(s[x].id)&&n.push(new Le(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),m.push(s[x].id),s[x].url&&v.includes(s[x].url)&&n.push(new Le(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),n=n.concat(Pi({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return n}return Uo({key:h,value:s})}const Nf={"*":()=>[],array:Ws,boolean:function(a){const n=a.value,s=a.key,h=zr(n);return h!=="boolean"?[new Le(s,n,`boolean expected, ${h} found`)]:[]},number:Nl,color:function(a){const n=a.key,s=a.value,h=zr(s);return h!=="string"?[new Le(n,s,`color expected, ${h} found`)]:Ir.parse(String(s))?[]:[new Le(n,s,`color expected, "${s}" found`)]},constants:Af,enum:jl,filter:Gs,function:Zc,layer:Bf,object:Pi,source:Zi,light:Ul,terrain:Of,string:Uo,formatted:function(a){return Uo(a).length===0?[]:ds(a)},resolvedImage:function(a){return Uo(a).length===0?[]:ds(a)},padding:function(a){const n=a.key,s=a.value;if(zr(s)==="array"){if(s.length<1||s.length>4)return[new Le(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let m=[];for(let v=0;v<s.length;v++)m=m.concat(a.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:a.validateSpec,valueSpec:h}));return m}return Nl({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(a){const n=a.key,s=a.value,h=zr(s),m=a.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new Le(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat(jl({key:`${n}[${x}]`,value:s[x],valueSpec:m.layout_symbol["text-anchor"]})),v=v.concat(Ws({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:m}));return v},sprite:Ff};function ga(a){const n=a.value,s=a.valueSpec,h=a.styleSpec;return a.validateSpec=ga,s.expression&&sn(hn(n))?Zc(a):s.expression&&Vc(us(n))?ds(a):s.type&&Nf[s.type]?Nf[s.type](a):Pi(Wt({},a,{valueSpec:s.type?h[s.type]:s}))}function jf(a){const n=a.value,s=a.key,h=Uo(a);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Le(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new Le(s,n,'"glyphs" url must include a "{range}" token'))),h}function ho(a,n=Ae){let s=[];return s=s.concat(ga({key:"",value:a,valueSpec:n.$root,styleSpec:n,style:a,validateSpec:ga,objectElementValidators:{glyphs:jf,"*":()=>[]}})),a.constants&&(s=s.concat(Af({key:"constants",value:a.constants,style:a,styleSpec:n,validateSpec:ga}))),Kc(s)}function ya(a){return function(n){return a({...n,validateSpec:ga})}}function Kc(a){return[].concat(a).sort((n,s)=>n.line-s.line)}function va(a){return function(...n){return Kc(a.apply(this,n))}}ho.source=va(ya(Zi)),ho.sprite=va(ya(Ff)),ho.glyphs=va(ya(jf)),ho.light=va(ya(Ul)),ho.terrain=va(ya(Of)),ho.layer=va(ya(Bf)),ho.filter=va(ya(Gs)),ho.paintProperty=va(ya(Lf)),ho.layoutProperty=va(ya($f));const _a=ho,Rv=_a.light,Wd=_a.paintProperty,Vf=_a.layoutProperty;function Xc(a,n){let s=!1;if(n&&n.length)for(const h of n)a.fire(new er(new Error(h.message))),s=!0;return s}class qs{constructor(n,s,h){const m=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let T=0;T<this.d*this.d;T++){const M=x[3+T],O=x[3+T+1];m.push(M===O?null:x.subarray(M,O))}const S=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const v=h/s*n;this.min=-v,this.max=n+v}insert(n,s,h,m,v){this._forEachCell(s,h,m,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,m,v,x){this.cells[v].push(x)}query(n,s,h,m,v){const x=this.min,S=this.max;if(n<=x&&s<=x&&S<=h&&S<=m&&!v)return Array.prototype.slice.call(this.keys);{const T=[];return this._forEachCell(n,s,h,m,this._queryCell,T,{},v),T}}_queryCell(n,s,h,m,v,x,S,T){const M=this.cells[v];if(M!==null){const O=this.keys,j=this.bboxes;for(let K=0;K<M.length;K++){const Y=M[K];if(S[Y]===void 0){const ee=4*Y;(T?T(j[ee+0],j[ee+1],j[ee+2],j[ee+3]):n<=j[ee+2]&&s<=j[ee+3]&&h>=j[ee+0]&&m>=j[ee+1])?(S[Y]=!0,x.push(O[Y])):S[Y]=!1}}}}_forEachCell(n,s,h,m,v,x,S,T){const M=this._convertToCellCoord(n),O=this._convertToCellCoord(s),j=this._convertToCellCoord(h),K=this._convertToCellCoord(m);for(let Y=M;Y<=j;Y++)for(let ee=O;ee<=K;ee++){const se=this.d*ee+Y;if((!T||T(this._convertFromCellCoord(Y),this._convertFromCellCoord(ee),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(ee+1)))&&v.call(this,n,s,h,m,se,x,S,T))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const m=new Int32Array(s+h+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let v=s;for(let x=0;x<n.length;x++){const S=n[x];m[3+x]=v,m.set(S,v),v+=S.length}return m[3+n.length]=v,m.set(this.keys,v),v+=this.keys.length,m[3+n.length+1]=v,m.set(this.bboxes,v),v+=this.bboxes.length,m.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new qs(n.buffer)}}const xa={};function Pt(a,n,s={}){if(xa[a])throw new Error(`${a} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:a,writeable:!1}),xa[a]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Pt("Object",Object),Pt("TransferableGridIndex",qs),Pt("Color",Ir),Pt("Error",Error),Pt("AJAXError",$e),Pt("ResolvedImage",ti),Pt("StylePropertyFunction",$l),Pt("StyleExpression",Nd,{omit:["_evaluator"]}),Pt("ZoomDependentExpression",Hc),Pt("ZoomConstantExpression",jd),Pt("CompoundExpression",uo,{omit:["_evaluate"]});for(const a in Us)Us[a]._classRegistryKey||Pt(`Expression_${a}`,Us[a]);function Jc(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Va(a,n){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob)return a;if(Jc(a)||Ge(a))return n&&n.push(a),a;if(ArrayBuffer.isView(a)){const s=a;return n&&n.push(s.buffer),s}if(a instanceof ImageData)return n&&n.push(a.data.buffer),a;if(Array.isArray(a)){const s=[];for(const h of a)s.push(Va(h,n));return s}if(typeof a=="object"){const s=a.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!xa[h])throw new Error(`${h} is not registered.`);const m=s.serialize?s.serialize(a,n):{};if(s.serialize){if(n&&m===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in a){if(!a.hasOwnProperty(v)||xa[h].omit.indexOf(v)>=0)continue;const x=a[v];m[v]=xa[h].shallow.indexOf(v)>=0?x:Va(x,n)}a instanceof Error&&(m.message=a.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(m.$name=h),m}throw new Error("can't serialize object of type "+typeof a)}function Zs(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||Jc(a)||Ge(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(Zs);if(typeof a=="object"){const n=a.$name||"Object";if(!xa[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=xa[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(a);const h=Object.create(s.prototype);for(const m of Object.keys(a)){if(m==="$name")continue;const v=a[m];h[m]=xa[n].shallow.indexOf(m)>=0?v:Zs(v)}return h}throw new Error("can't deserialize object of type "+typeof a)}class Uf{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const bt={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function Gd(a){for(const n of a)if(Zd(n.charCodeAt(0)))return!0;return!1}function qd(a){for(const n of a)if(!Lv(n.charCodeAt(0)))return!1;return!0}function Lv(a){return!(bt.Arabic(a)||bt["Arabic Supplement"](a)||bt["Arabic Extended-A"](a)||bt["Arabic Presentation Forms-A"](a)||bt["Arabic Presentation Forms-B"](a))}function Zd(a){return!(a!==746&&a!==747&&(a<4352||!(bt["Bopomofo Extended"](a)||bt.Bopomofo(a)||bt["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||bt["CJK Compatibility Ideographs"](a)||bt["CJK Compatibility"](a)||bt["CJK Radicals Supplement"](a)||bt["CJK Strokes"](a)||!(!bt["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||bt["CJK Unified Ideographs Extension A"](a)||bt["CJK Unified Ideographs"](a)||bt["Enclosed CJK Letters and Months"](a)||bt["Hangul Compatibility Jamo"](a)||bt["Hangul Jamo Extended-A"](a)||bt["Hangul Jamo Extended-B"](a)||bt["Hangul Jamo"](a)||bt["Hangul Syllables"](a)||bt.Hiragana(a)||bt["Ideographic Description Characters"](a)||bt.Kanbun(a)||bt["Kangxi Radicals"](a)||bt["Katakana Phonetic Extensions"](a)||bt.Katakana(a)&&a!==12540||!(!bt["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!bt["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||bt["Unified Canadian Aboriginal Syllabics"](a)||bt["Unified Canadian Aboriginal Syllabics Extended"](a)||bt["Vertical Forms"](a)||bt["Yijing Hexagram Symbols"](a)||bt["Yi Syllables"](a)||bt["Yi Radicals"](a))))}function Hf(a){return!(Zd(a)||function(n){return!!(bt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||bt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||bt["Letterlike Symbols"](n)||bt["Number Forms"](n)||bt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||bt["Control Pictures"](n)&&n!==9251||bt["Optical Character Recognition"](n)||bt["Enclosed Alphanumerics"](n)||bt["Geometric Shapes"](n)||bt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||bt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||bt["CJK Symbols and Punctuation"](n)||bt.Katakana(n)||bt["Private Use Area"](n)||bt["CJK Compatibility Forms"](n)||bt["Small Form Variants"](n)||bt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(a))}function Wf(a){return a>=1424&&a<=2303||bt["Arabic Presentation Forms-A"](a)||bt["Arabic Presentation Forms-B"](a)}function Gf(a,n){return!(!n&&Wf(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||bt.Khmer(a))}function $v(a){for(const n of a)if(Wf(n.charCodeAt(0)))return!0;return!1}const Kd="deferred",Xd="loading",Jd="loaded";let Yd=null,Ei="unavailable",Ua=null;const Hl=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(Ei="error"),Yd&&Yd(a)};function Qd(){Wl.fire(new Dr("pluginStateChange",{pluginStatus:Ei,pluginURL:Ua}))}const Wl=new Fr,eh=function(){return Ei},qf=function(){if(Ei!==Kd||!Ua)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ei=Xd,Qd(),Ua&&gr({url:Ua},a=>{a?Hl(a):(Ei=Jd,Qd())})},Ki={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ei===Jd||Ki.applyArabicShaping!=null,isLoading:()=>Ei===Xd,setState(a){if(!Oe())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Ei=a.pluginStatus,Ua=a.pluginURL},isParsed(){if(!Oe())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ki.applyArabicShaping!=null&&Ki.processBidirectionalText!=null&&Ki.processStyledBidirectionalText!=null},getPluginURL(){if(!Oe())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Ua}};class Qr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Uf,this.transition={})}isSupportedScript(n){return function(s,h){for(const m of s)if(!Gf(m.charCodeAt(0),h))return!1;return!0}(n,Ki.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class Yc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,m){if(sn(h))return new $l(h,m);if(Vc(h)){const v=Vd(h,m);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return m.type==="color"&&typeof h=="string"?v=Ir.parse(h):m.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=lo.parse(h)):v=Wi.parse(h),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class th{constructor(n){this.property=n,this.value=new Yc(n,void 0)}transitioned(n,s){return new Kf(this.property,this.value,s,ue({},n.transition,this.transition),n.now)}untransitioned(){return new Kf(this.property,this.value,null,{},0)}}class Zf{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Se(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new th(this._values[n].property)),this._values[n].value=new Yc(this._values[n].property,s===null?void 0:Se(s))}getTransition(n){return Se(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new th(this._values[n].property)),this._values[n].transition=Se(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const m=this.getTransition(s);m!==void 0&&(n[`${s}-transition`]=m)}return n}transitioned(n,s){const h=new Xf(this._properties);for(const m of Object.keys(this._values))h._values[m]=this._values[m].transitioned(n,s._values[m]);return h}untransitioned(){const n=new Xf(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Kf{constructor(n,s,h,m,v){this.property=n,this.value=s,this.begin=v+m.delay||0,this.end=this.begin+m.duration||0,n.specification.transition&&(m.delay||m.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const m=n.now||0,v=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(m>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(m<this.begin)return x.possiblyEvaluate(n,s,h);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),v,function(T){if(T<=0)return 0;if(T>=1)return 1;const M=T*T,O=M*T;return 4*(T<.5?O:3*(T-M)+O-.75)}(S))}}return v}}class Xf{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const m=new Qc(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,s,h);return m}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Bv{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return Se(this._values[n].value)}setValue(n,s){this._values[n]=new Yc(this._values[n].property,s===null?void 0:Se(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const m=new Qc(this._properties);for(const v of Object.keys(this._values))m._values[v]=this._values[v].possiblyEvaluate(n,s,h);return m}}class yi{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,m){return this.property.evaluate(this.value,this.parameters,n,s,h,m)}}class Qc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Vt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const m=Gi[this.specification.type];return m?m(n,s,h):n}}class Yt{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,m){return new yi(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,m)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new yi(this,{kind:"constant",value:void 0},n.parameters);const m=Gi[this.specification.type];if(m){const v=m(n.value.value,s.value.value,h);return new yi(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,h,m,v,x){return n.kind==="constant"?n.value:n.evaluate(s,h,m,v,x)}}class Gl extends Yt{possiblyEvaluate(n,s,h,m){if(n.value===void 0)return new yi(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,m),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(x,x,x,s);return new yi(this,{kind:"constant",value:S},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new yi(this,{kind:"constant",value:v},s)}return new yi(this,n.expression,s)}evaluate(n,s,h,m,v,x){if(n.kind==="source"){const S=n.evaluate(s,h,m,v,x);return this._calculate(S,S,S,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,m),n.evaluate({zoom:Math.floor(s.zoom)},h,m),n.evaluate({zoom:Math.floor(s.zoom)+1},h,m),s):n.value}_calculate(n,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class rh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,m){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,m);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new Qr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new Qr(Math.floor(s.zoom),s)),n.expression.evaluate(new Qr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class nh{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,m){return!!n.expression.evaluate(s,null,{},h,m)}interpolate(){return!1}}class Cn{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const m=this.defaultPropertyValues[s]=new Yc(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new th(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=m.possiblyEvaluate({})}}}Pt("DataDrivenProperty",Yt),Pt("DataConstantProperty",Vt),Pt("CrossFadedDataDrivenProperty",Gl),Pt("CrossFadedProperty",rh),Pt("ColorRampProperty",nh);const ih="-transition";class po extends Fr{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Bv(s.layout)),s.paint)){this._transitionablePaint=new Zf(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(Vf,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(ih)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(Wd,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(ih))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const m=this._transitionablePaint._values[n],v=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const T=this._transitionablePaint._values[n].value;return T.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,S,T)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Ee(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,m,v={}){return(!v||v.validate!==!1)&&Xc(this,n.call(_a,{key:s,layerType:this.type,objectKey:h,value:m,styleSpec:Ae,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof yi&&Hs(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const Jf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class hs{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class pn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function cn(a,n=1){let s=0,h=0;return{members:a.map(m=>{const v=Jf[m.type].BYTES_PER_ELEMENT,x=s=Ks(s,Math.max(n,v)),S=m.components||1;return h=Math.max(h,v),s+=v*S,{name:m.name,type:m.type,components:S,offset:x}}),size:Ks(s,Math.max(h,n)),alignment:n}}function Ks(a,n){return Math.ceil(a/n)*n}class ql extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const m=2*n;return this.int16[m+0]=s,this.int16[m+1]=h,n}}ql.prototype.bytesPerElement=4,Pt("StructArrayLayout2i4",ql);class Zl extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=m,n}}Zl.prototype.bytesPerElement=6,Pt("StructArrayLayout3i6",Zl);class ps extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,m)}emplace(n,s,h,m,v){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=m,this.int16[x+3]=v,n}}ps.prototype.bytesPerElement=8,Pt("StructArrayLayout4i8",ps);class oh extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,m,v,x)}emplace(n,s,h,m,v,x,S){const T=6*n;return this.int16[T+0]=s,this.int16[T+1]=h,this.int16[T+2]=m,this.int16[T+3]=v,this.int16[T+4]=x,this.int16[T+5]=S,n}}oh.prototype.bytesPerElement=12,Pt("StructArrayLayout2i4i12",oh);class ah extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,m,v,x)}emplace(n,s,h,m,v,x,S){const T=4*n,M=8*n;return this.int16[T+0]=s,this.int16[T+1]=h,this.uint8[M+4]=m,this.uint8[M+5]=v,this.uint8[M+6]=x,this.uint8[M+7]=S,n}}ah.prototype.bytesPerElement=8,Pt("StructArrayLayout2i4ub8",ah);class Xs extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const m=2*n;return this.float32[m+0]=s,this.float32[m+1]=h,n}}Xs.prototype.bytesPerElement=8,Pt("StructArrayLayout2f8",Xs);class sh extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,x,S,T,M,O){const j=this.length;return this.resize(j+1),this.emplace(j,n,s,h,m,v,x,S,T,M,O)}emplace(n,s,h,m,v,x,S,T,M,O,j){const K=10*n;return this.uint16[K+0]=s,this.uint16[K+1]=h,this.uint16[K+2]=m,this.uint16[K+3]=v,this.uint16[K+4]=x,this.uint16[K+5]=S,this.uint16[K+6]=T,this.uint16[K+7]=M,this.uint16[K+8]=O,this.uint16[K+9]=j,n}}sh.prototype.bytesPerElement=20,Pt("StructArrayLayout10ui20",sh);class lh extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,x,S,T,M,O,j,K){const Y=this.length;return this.resize(Y+1),this.emplace(Y,n,s,h,m,v,x,S,T,M,O,j,K)}emplace(n,s,h,m,v,x,S,T,M,O,j,K,Y){const ee=12*n;return this.int16[ee+0]=s,this.int16[ee+1]=h,this.int16[ee+2]=m,this.int16[ee+3]=v,this.uint16[ee+4]=x,this.uint16[ee+5]=S,this.uint16[ee+6]=T,this.uint16[ee+7]=M,this.int16[ee+8]=O,this.int16[ee+9]=j,this.int16[ee+10]=K,this.int16[ee+11]=Y,n}}lh.prototype.bytesPerElement=24,Pt("StructArrayLayout4i4ui4i24",lh);class Mr extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=m,n}}Mr.prototype.bytesPerElement=12,Pt("StructArrayLayout3f12",Mr);class y extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}y.prototype.bytesPerElement=4,Pt("StructArrayLayout1ul4",y);class i extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,x,S,T,M){const O=this.length;return this.resize(O+1),this.emplace(O,n,s,h,m,v,x,S,T,M)}emplace(n,s,h,m,v,x,S,T,M,O){const j=10*n,K=5*n;return this.int16[j+0]=s,this.int16[j+1]=h,this.int16[j+2]=m,this.int16[j+3]=v,this.int16[j+4]=x,this.int16[j+5]=S,this.uint32[K+3]=T,this.uint16[j+8]=M,this.uint16[j+9]=O,n}}i.prototype.bytesPerElement=20,Pt("StructArrayLayout6i1ul2ui20",i);class u extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,m,v,x)}emplace(n,s,h,m,v,x,S){const T=6*n;return this.int16[T+0]=s,this.int16[T+1]=h,this.int16[T+2]=m,this.int16[T+3]=v,this.int16[T+4]=x,this.int16[T+5]=S,n}}u.prototype.bytesPerElement=12,Pt("StructArrayLayout2i2i2i12",u);class p extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,m,v)}emplace(n,s,h,m,v,x){const S=4*n,T=8*n;return this.float32[S+0]=s,this.float32[S+1]=h,this.float32[S+2]=m,this.int16[T+6]=v,this.int16[T+7]=x,n}}p.prototype.bytesPerElement=16,Pt("StructArrayLayout2f1f2i16",p);class g extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,m)}emplace(n,s,h,m,v){const x=12*n,S=3*n;return this.uint8[x+0]=s,this.uint8[x+1]=h,this.float32[S+1]=m,this.float32[S+2]=v,n}}g.prototype.bytesPerElement=12,Pt("StructArrayLayout2ub2f12",g);class _ extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=m,n}}_.prototype.bytesPerElement=6,Pt("StructArrayLayout3ui6",_);class C extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,x,S,T,M,O,j,K,Y,ee,se,me,ve){const Te=this.length;return this.resize(Te+1),this.emplace(Te,n,s,h,m,v,x,S,T,M,O,j,K,Y,ee,se,me,ve)}emplace(n,s,h,m,v,x,S,T,M,O,j,K,Y,ee,se,me,ve,Te){const be=24*n,Pe=12*n,je=48*n;return this.int16[be+0]=s,this.int16[be+1]=h,this.uint16[be+2]=m,this.uint16[be+3]=v,this.uint32[Pe+2]=x,this.uint32[Pe+3]=S,this.uint32[Pe+4]=T,this.uint16[be+10]=M,this.uint16[be+11]=O,this.uint16[be+12]=j,this.float32[Pe+7]=K,this.float32[Pe+8]=Y,this.uint8[je+36]=ee,this.uint8[je+37]=se,this.uint8[je+38]=me,this.uint32[Pe+10]=ve,this.int16[be+22]=Te,n}}C.prototype.bytesPerElement=48,Pt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",C);class I extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m,v,x,S,T,M,O,j,K,Y,ee,se,me,ve,Te,be,Pe,je,Xe,wt,Ot,xt,mt,lt,Et){const dt=this.length;return this.resize(dt+1),this.emplace(dt,n,s,h,m,v,x,S,T,M,O,j,K,Y,ee,se,me,ve,Te,be,Pe,je,Xe,wt,Ot,xt,mt,lt,Et)}emplace(n,s,h,m,v,x,S,T,M,O,j,K,Y,ee,se,me,ve,Te,be,Pe,je,Xe,wt,Ot,xt,mt,lt,Et,dt){const tt=32*n,Gt=16*n;return this.int16[tt+0]=s,this.int16[tt+1]=h,this.int16[tt+2]=m,this.int16[tt+3]=v,this.int16[tt+4]=x,this.int16[tt+5]=S,this.int16[tt+6]=T,this.int16[tt+7]=M,this.uint16[tt+8]=O,this.uint16[tt+9]=j,this.uint16[tt+10]=K,this.uint16[tt+11]=Y,this.uint16[tt+12]=ee,this.uint16[tt+13]=se,this.uint16[tt+14]=me,this.uint16[tt+15]=ve,this.uint16[tt+16]=Te,this.uint16[tt+17]=be,this.uint16[tt+18]=Pe,this.uint16[tt+19]=je,this.uint16[tt+20]=Xe,this.uint16[tt+21]=wt,this.uint16[tt+22]=Ot,this.uint32[Gt+12]=xt,this.float32[Gt+13]=mt,this.float32[Gt+14]=lt,this.uint16[tt+30]=Et,this.uint16[tt+31]=dt,n}}I.prototype.bytesPerElement=64,Pt("StructArrayLayout8i15ui1ul2f2ui64",I);class E extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}E.prototype.bytesPerElement=4,Pt("StructArrayLayout1f4",E);class D extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=h,this.float32[v+2]=m,n}}D.prototype.bytesPerElement=12,Pt("StructArrayLayout1ui2f12",D);class F extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const m=this.length;return this.resize(m+1),this.emplace(m,n,s,h)}emplace(n,s,h,m){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=m,n}}F.prototype.bytesPerElement=8,Pt("StructArrayLayout1ul2ui8",F);class N extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const m=2*n;return this.uint16[m+0]=s,this.uint16[m+1]=h,n}}N.prototype.bytesPerElement=4,Pt("StructArrayLayout2ui4",N);class J extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}J.prototype.bytesPerElement=2,Pt("StructArrayLayout1ui2",J);class ce extends pn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,m){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,m)}emplace(n,s,h,m,v){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=m,this.float32[x+3]=v,n}}ce.prototype.bytesPerElement=16,Pt("StructArrayLayout4f16",ce);class le extends hs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new P(this.anchorPointX,this.anchorPointY)}}le.prototype.size=20;class pe extends i{get(n){return new le(this,n)}}Pt("CollisionBoxArray",pe);class ae extends hs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ae.prototype.size=48;class we extends C{get(n){return new ae(this,n)}}Pt("PlacedSymbolArray",we);class Be extends hs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Be.prototype.size=64;class ge extends I{get(n){return new Be(this,n)}}Pt("SymbolInstanceArray",ge);class Ie extends E{getoffsetX(n){return this.float32[1*n+0]}}Pt("GlyphOffsetArray",Ie);class Ve extends Zl{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Pt("SymbolLineVertexArray",Ve);class He extends hs{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}He.prototype.size=12;class Ze extends D{get(n){return new He(this,n)}}Pt("TextAnchorOffsetArray",Ze);class et extends hs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}et.prototype.size=8;class Je extends F{get(n){return new et(this,n)}}Pt("FeatureIndexArray",Je);class ot extends ql{}class Bt extends ql{}class fr extends ql{}class ft extends oh{}class Qt extends ah{}class Nt extends Xs{}class Nr extends sh{}class pr extends lh{}class or extends Mr{}class mr extends y{}class yn extends u{}class Zr extends g{}class ri extends _{}class Fn extends N{}const kn=cn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Xi}=kn;class en{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,m){let v=this.segments[this.segments.length-1];return n>en.MAX_VERTEX_ARRAY_LENGTH&&We(`Max vertices per segment is ${en.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>en.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==m)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},m!==void 0&&(v.sortKey=m),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,m){return new en([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:m,vaos:{},sortKey:0}])}}function Ho(a,n){return 256*(a=he(Math.floor(a),0,255))+he(Math.floor(n),0,255)}en.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pt("SegmentVector",en);const Wo=cn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ha={exports:{}},fs={exports:{}};fs.exports=function(a,n){var s,h,m,v,x,S,T,M;for(h=a.length-(s=3&a.length),m=n,x=3432918353,S=461845907,M=0;M<h;)T=255&a.charCodeAt(M)|(255&a.charCodeAt(++M))<<8|(255&a.charCodeAt(++M))<<16|(255&a.charCodeAt(++M))<<24,++M,m=27492+(65535&(v=5*(65535&(m=(m^=T=(65535&(T=(T=(65535&T)*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*S+(((T>>>16)*S&65535)<<16)&4294967295)<<13|m>>>19))+((5*(m>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(T=0,s){case 3:T^=(255&a.charCodeAt(M+2))<<16;case 2:T^=(255&a.charCodeAt(M+1))<<8;case 1:m^=T=(65535&(T=(T=(65535&(T^=255&a.charCodeAt(M)))*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*S+(((T>>>16)*S&65535)<<16)&4294967295}return m^=a.length,m=2246822507*(65535&(m^=m>>>16))+((2246822507*(m>>>16)&65535)<<16)&4294967295,m=3266489909*(65535&(m^=m>>>13))+((3266489909*(m>>>16)&65535)<<16)&4294967295,(m^=m>>>16)>>>0};var Js=fs.exports,li={exports:{}};li.exports=function(a,n){for(var s,h=a.length,m=n^h,v=0;h>=4;)s=1540483477*(65535&(s=255&a.charCodeAt(v)|(255&a.charCodeAt(++v))<<8|(255&a.charCodeAt(++v))<<16|(255&a.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),m=1540483477*(65535&m)+((1540483477*(m>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:m^=(255&a.charCodeAt(v+2))<<16;case 2:m^=(255&a.charCodeAt(v+1))<<8;case 1:m=1540483477*(65535&(m^=255&a.charCodeAt(v)))+((1540483477*(m>>>16)&65535)<<16)}return m=1540483477*(65535&(m^=m>>>13))+((1540483477*(m>>>16)&65535)<<16),(m^=m>>>15)>>>0};var ni=Js,vi=li.exports;Ha.exports=ni,Ha.exports.murmur3=ni,Ha.exports.murmur2=vi;var ms=w(Ha.exports);class vn{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,m){this.ids.push(Nn(n)),this.positions.push(s,h,m)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Nn(n);let h=0,m=this.ids.length-1;for(;h<m;){const x=h+m>>1;this.ids[x]>=s?m=x:h=x+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,s){const h=new Float64Array(n.ids),m=new Uint32Array(n.positions);return zi(h,m,0,h.length-1),s&&s.push(h.buffer,m.buffer),{ids:h,positions:m}}static deserialize(n){const s=new vn;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Nn(a){const n=+a;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:ms(String(a))}function zi(a,n,s,h){for(;s<h;){const m=a[s+h>>1];let v=s-1,x=h+1;for(;;){do v++;while(a[v]<m);do x--;while(a[x]>m);if(v>=x)break;_n(a,v,x),_n(n,3*v,3*x),_n(n,3*v+1,3*x+1),_n(n,3*v+2,3*x+2)}x-s<h-x?(zi(a,n,s,x),s=x+1):(zi(a,n,x+1,h),h=x)}}function _n(a,n,s){const h=a[n];a[n]=a[s],a[s]=h}Pt("FeaturePositionMap",vn);class gs{constructor(n,s){this.gl=n.gl,this.location=s}}class eu extends gs{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Yf extends gs{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Qf extends gs{constructor(n,s){super(n,s),this.current=Ir.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Ov=new Float32Array(16);function ch(a){return[Ho(255*a.r,255*a.g),Ho(255*a.b,255*a.a)]}class Go{constructor(n,s,h){this.value=n,this.uniformNames=s.map(m=>`u_${m}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new Qf(n,s):new eu(n,s)}}class ys{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,m){const v=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new Yf(n,s):new eu(n,s)}}class qo{constructor(n,s,h,m){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(n,s,h,m,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new Qr(0),s,{},m,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,S)}updatePaintArray(n,s,h,m){const v=this.expression.evaluate({zoom:0},h,m);this._setPaintValue(n,s,v)}_setPaintValue(n,s,h){if(this.type==="color"){const m=ch(h);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,m[0],m[1])}else{for(let m=n;m<s;m++)this.paintVertexArray.emplace(m,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class fo{constructor(n,s,h,m,v,x){this.expression=n,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=m,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,m,v){const x=this.expression.evaluate(new Qr(this.zoom),s,{},m,[],v),S=this.expression.evaluate(new Qr(this.zoom+1),s,{},m,[],v),T=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(T,n,x,S)}updatePaintArray(n,s,h,m){const v=this.expression.evaluate({zoom:this.zoom},h,m),x=this.expression.evaluate({zoom:this.zoom+1},h,m);this._setPaintValue(n,s,v,x)}_setPaintValue(n,s,h,m){if(this.type==="color"){const v=ch(h),x=ch(m);for(let S=n;S<s;S++)this.paintVertexArray.emplace(S,v[0],v[1],x[0],x[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,h,m);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(m))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,m=he(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(m)}getBinding(n,s,h){return new eu(n,s)}}class Zo{constructor(n,s,h,m,v,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,h){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(m,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,m,v){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,s,h,m){if(!m||!h)return;const{min:v,mid:x,max:S}=h,T=m[v],M=m[x],O=m[S];if(T&&M&&O)for(let j=n;j<s;j++)this.zoomInPaintVertexArray.emplace(j,M.tl[0],M.tl[1],M.br[0],M.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],M.pixelRatio,T.pixelRatio),this.zoomOutPaintVertexArray.emplace(j,M.tl[0],M.tl[1],M.br[0],M.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],M.pixelRatio,O.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Wo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Wo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class uh{constructor(n,s,h){this.binders={},this._buffers=[];const m=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof yi&&Hs(x.property.specification)))continue;const S=gM(v,n.type),T=x.value,M=x.property.specification.type,O=x.property.useIntegerZoom,j=x.property.specification["property-type"],K=j==="cross-faded"||j==="cross-faded-data-driven";if(T.kind==="constant")this.binders[v]=K?new ys(T.value,S):new Go(T.value,S,M),m.push(`/u_${v}`);else if(T.kind==="source"||K){const Y=qb(v,M,"source");this.binders[v]=K?new Zo(T,M,O,s,Y,n.id):new qo(T,S,M,Y),m.push(`/a_${v}`)}else{const Y=qb(v,M,"composite");this.binders[v]=new fo(T,S,M,O,s,Y),m.push(`/z_${v}`)}}this.cacheKey=m.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof qo||s instanceof fo?s.maxValue:0}populatePaintArrays(n,s,h,m,v){for(const x in this.binders){const S=this.binders[x];(S instanceof qo||S instanceof fo||S instanceof Zo)&&S.populatePaintArray(n,s,h,m,v)}}setConstantPatternPositions(n,s){for(const h in this.binders){const m=this.binders[h];m instanceof ys&&m.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,m,v){let x=!1;for(const S in n){const T=s.getPositions(S);for(const M of T){const O=h.feature(M.index);for(const j in this.binders){const K=this.binders[j];if((K instanceof qo||K instanceof fo||K instanceof Zo)&&K.expression.isStateDependent===!0){const Y=m.paint.get(j);K.expression=Y.value,K.updatePaintArray(M.start,M.end,O,n[S],v),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Go||h instanceof ys)&&n.push(...h.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof qo||h instanceof fo)for(let m=0;m<h.paintVertexAttributes.length;m++)n.push(h.paintVertexAttributes[m].name);else if(h instanceof Zo)for(let m=0;m<Wo.members.length;m++)n.push(Wo.members[m].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Go||h instanceof ys||h instanceof fo)for(const m of h.uniformNames)n.push(m)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const m in this.binders){const v=this.binders[m];if(v instanceof Go||v instanceof ys||v instanceof fo){for(const x of v.uniformNames)if(s[x]){const S=v.getBinding(n,s[x],x);h.push({name:x,property:m,binding:S})}}}return h}setUniforms(n,s,h,m){for(const{name:v,property:x,binding:S}of s)this.binders[x].setUniform(S,m,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof Zo){const m=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(h instanceof qo||h instanceof fo)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof qo||h instanceof fo||h instanceof Zo)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof qo||s instanceof fo||s instanceof Zo)&&s.destroy()}}}class ba{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const m of n)this.programConfigurations[m.id]=new uh(m,s,h);this.needsUpload=!1,this._featureMap=new vn,this._bufferOffset=0}populatePaintArrays(n,s,h,m,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,s,m,v,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,m){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,m)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function gM(a,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${n}-`,"").replace(/-/g,"_")]}function qb(a,n,s){const h={color:{source:Xs,composite:ce},number:{source:E,composite:Xs}},m=function(v){return{"line-pattern":{source:Nr,composite:Nr},"fill-pattern":{source:Nr,composite:Nr},"fill-extrusion-pattern":{source:Nr,composite:Nr}}[v]}(a);return m&&m[s]||h[n][s]}Pt("ConstantBinder",Go),Pt("CrossFadedConstantBinder",ys),Pt("SourceExpressionBinder",qo),Pt("CrossFadedCompositeBinder",Zo),Pt("CompositeExpressionBinder",fo),Pt("ProgramConfiguration",uh,{omit:["_buffers"]}),Pt("ProgramConfigurationSet",ba);const An=8192,Fv=Math.pow(2,14)-1,Zb=-Fv-1;function Kl(a){const n=An/a.extent,s=a.loadGeometry();for(let h=0;h<s.length;h++){const m=s[h];for(let v=0;v<m.length;v++){const x=m[v],S=Math.round(x.x*n),T=Math.round(x.y*n);x.x=he(S,Zb,Fv),x.y=he(T,Zb,Fv),(S<x.x||S>x.x+1||T<x.y||T>x.y+1)&&We("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Xl(a,n){return{type:a.type,id:a.id,properties:a.properties,geometry:n?Kl(a):[]}}function em(a,n,s,h,m){a.emplaceBack(2*n+(h+1)/2,2*s+(m+1)/2)}class Nv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Bt,this.indexArray=new ri,this.segments=new en,this.programConfigurations=new ba(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const m=this.layers[0],v=[];let x=null,S=!1;m.type==="circle"&&(x=m.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:T,id:M,index:O,sourceLayerIndex:j}of n){const K=this.layers[0]._featureFilter.needGeometry,Y=Xl(T,K);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),Y,h))continue;const ee=S?x.evaluate(Y,{},h):void 0,se={id:M,properties:T.properties,type:T.type,sourceLayerIndex:j,index:O,geometry:K?Y.geometry:Kl(T),patterns:{},sortKey:ee};v.push(se)}S&&v.sort((T,M)=>T.sortKey-M.sortKey);for(const T of v){const{geometry:M,index:O,sourceLayerIndex:j}=T,K=n[O].feature;this.addFeature(T,M,O,h),s.featureIndex.insert(K,M,O,j,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Xi),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,m){for(const v of s)for(const x of v){const S=x.x,T=x.y;if(S<0||S>=An||T<0||T>=An)continue;const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),O=M.vertexLength;em(this.layoutVertexArray,S,T,-1,-1),em(this.layoutVertexArray,S,T,1,-1),em(this.layoutVertexArray,S,T,1,1),em(this.layoutVertexArray,S,T,-1,1),this.indexArray.emplaceBack(O,O+1,O+2),this.indexArray.emplaceBack(O,O+3,O+2),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},m)}}function Kb(a,n){for(let s=0;s<a.length;s++)if(tu(n,a[s]))return!0;for(let s=0;s<n.length;s++)if(tu(a,n[s]))return!0;return!!jv(a,n)}function yM(a,n,s){return!!tu(a,n)||!!Vv(n,a,s)}function Xb(a,n){if(a.length===1)return Yb(n,a[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let m=0;m<h.length;m++)if(tu(a,h[m]))return!0}for(let s=0;s<a.length;s++)if(Yb(n,a[s]))return!0;for(let s=0;s<n.length;s++)if(jv(a,n[s]))return!0;return!1}function vM(a,n,s){if(a.length>1){if(jv(a,n))return!0;for(let h=0;h<n.length;h++)if(Vv(n[h],a,s))return!0}for(let h=0;h<a.length;h++)if(Vv(a[h],n,s))return!0;return!1}function jv(a,n){if(a.length===0||n.length===0)return!1;for(let s=0;s<a.length-1;s++){const h=a[s],m=a[s+1];for(let v=0;v<n.length-1;v++)if(_M(h,m,n[v],n[v+1]))return!0}return!1}function _M(a,n,s,h){return Fe(a,s,h)!==Fe(n,s,h)&&Fe(a,n,s)!==Fe(a,n,h)}function Vv(a,n,s){const h=s*s;if(n.length===1)return a.distSqr(n[0])<h;for(let m=1;m<n.length;m++)if(Jb(a,n[m-1],n[m])<h)return!0;return!1}function Jb(a,n,s){const h=n.distSqr(s);if(h===0)return a.distSqr(n);const m=((a.x-n.x)*(s.x-n.x)+(a.y-n.y)*(s.y-n.y))/h;return a.distSqr(m<0?n:m>1?s:s.sub(n)._mult(m)._add(n))}function Yb(a,n){let s,h,m,v=!1;for(let x=0;x<a.length;x++){s=a[x];for(let S=0,T=s.length-1;S<s.length;T=S++)h=s[S],m=s[T],h.y>n.y!=m.y>n.y&&n.x<(m.x-h.x)*(n.y-h.y)/(m.y-h.y)+h.x&&(v=!v)}return v}function tu(a,n){let s=!1;for(let h=0,m=a.length-1;h<a.length;m=h++){const v=a[h],x=a[m];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function xM(a,n,s){const h=s[0],m=s[2];if(a.x<h.x&&n.x<h.x||a.x>m.x&&n.x>m.x||a.y<h.y&&n.y<h.y||a.y>m.y&&n.y>m.y)return!1;const v=Fe(a,n,s[0]);return v!==Fe(a,n,s[1])||v!==Fe(a,n,s[2])||v!==Fe(a,n,s[3])}function dh(a,n,s){const h=n.paint.get(a).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(a)}function tm(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function rm(a,n,s,h,m){if(!n[0]&&!n[1])return a;const v=P.convert(n)._mult(m);s==="viewport"&&v._rotate(-h);const x=[];for(let S=0;S<a.length;S++)x.push(a[S].sub(v));return x}let Qb,ew;Pt("CircleBucket",Nv,{omit:["layers"]});var bM={get paint(){return ew=ew||new Cn({"circle-radius":new Yt(Ae.paint_circle["circle-radius"]),"circle-color":new Yt(Ae.paint_circle["circle-color"]),"circle-blur":new Yt(Ae.paint_circle["circle-blur"]),"circle-opacity":new Yt(Ae.paint_circle["circle-opacity"]),"circle-translate":new Vt(Ae.paint_circle["circle-translate"]),"circle-translate-anchor":new Vt(Ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Vt(Ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Vt(Ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yt(Ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yt(Ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yt(Ae.paint_circle["circle-stroke-opacity"])})},get layout(){return Qb=Qb||new Cn({"circle-sort-key":new Yt(Ae.layout_circle["circle-sort-key"])})}},Mi=1e-6,ru=typeof Float32Array<"u"?Float32Array:Array;function Uv(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function tw(a,n,s){var h=n[0],m=n[1],v=n[2],x=n[3],S=n[4],T=n[5],M=n[6],O=n[7],j=n[8],K=n[9],Y=n[10],ee=n[11],se=n[12],me=n[13],ve=n[14],Te=n[15],be=s[0],Pe=s[1],je=s[2],Xe=s[3];return a[0]=be*h+Pe*S+je*j+Xe*se,a[1]=be*m+Pe*T+je*K+Xe*me,a[2]=be*v+Pe*M+je*Y+Xe*ve,a[3]=be*x+Pe*O+je*ee+Xe*Te,a[4]=(be=s[4])*h+(Pe=s[5])*S+(je=s[6])*j+(Xe=s[7])*se,a[5]=be*m+Pe*T+je*K+Xe*me,a[6]=be*v+Pe*M+je*Y+Xe*ve,a[7]=be*x+Pe*O+je*ee+Xe*Te,a[8]=(be=s[8])*h+(Pe=s[9])*S+(je=s[10])*j+(Xe=s[11])*se,a[9]=be*m+Pe*T+je*K+Xe*me,a[10]=be*v+Pe*M+je*Y+Xe*ve,a[11]=be*x+Pe*O+je*ee+Xe*Te,a[12]=(be=s[12])*h+(Pe=s[13])*S+(je=s[14])*j+(Xe=s[15])*se,a[13]=be*m+Pe*T+je*K+Xe*me,a[14]=be*v+Pe*M+je*Y+Xe*ve,a[15]=be*x+Pe*O+je*ee+Xe*Te,a}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});var hh,wM=tw;function nm(a,n,s){var h=n[0],m=n[1],v=n[2],x=n[3];return a[0]=s[0]*h+s[4]*m+s[8]*v+s[12]*x,a[1]=s[1]*h+s[5]*m+s[9]*v+s[13]*x,a[2]=s[2]*h+s[6]*m+s[10]*v+s[14]*x,a[3]=s[3]*h+s[7]*m+s[11]*v+s[15]*x,a}hh=new ru(4),ru!=Float32Array&&(hh[0]=0,hh[1]=0,hh[2]=0,hh[3]=0);class SM extends po{constructor(n){super(n,bM)}createBucket(n){return new Nv(n)}queryRadius(n){const s=n;return dh("circle-radius",this,s)+dh("circle-stroke-width",this,s)+tm(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,m,v,x,S,T){const M=rm(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),O=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),j=this.paint.get("circle-pitch-alignment")==="map",K=j?M:function(ee,se){return ee.map(me=>rw(me,se))}(M,T),Y=j?O*S:O;for(const ee of m)for(const se of ee){const me=j?se:rw(se,T);let ve=Y;const Te=nm([],[se.x,se.y,0,1],T);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ve*=Te[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ve*=x.cameraToCenterDistance/Te[3]),yM(K,me,ve))return!0}return!1}}function rw(a,n){const s=nm([],[a.x,a.y,0,1],n);return new P(s[0]/s[3],s[1]/s[3])}class nw extends Nv{}let iw;Pt("HeatmapBucket",nw,{omit:["layers"]});var CM={get paint(){return iw=iw||new Cn({"heatmap-radius":new Yt(Ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yt(Ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Vt(Ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new nh(Ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Vt(Ae.paint_heatmap["heatmap-opacity"])})}};function Hv(a,{width:n,height:s},h,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${n*s*h}`)}else m=new Uint8Array(n*s*h);return a.width=n,a.height=s,a.data=m,a}function ow(a,{width:n,height:s},h){if(n===a.width&&s===a.height)return;const m=Hv({},{width:n,height:s},h);Wv(a,m,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,n),height:Math.min(a.height,s)},h),a.width=n,a.height=s,a.data=m.data}function Wv(a,n,s,h,m,v){if(m.width===0||m.height===0)return n;if(m.width>a.width||m.height>a.height||s.x>a.width-m.width||s.y>a.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>n.width||m.height>n.height||h.x>n.width-m.width||h.y>n.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=a.data,S=n.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let T=0;T<m.height;T++){const M=((s.y+T)*a.width+s.x)*v,O=((h.y+T)*n.width+h.x)*v;for(let j=0;j<m.width*v;j++)S[O+j]=x[M+j]}return n}class ph{constructor(n,s){Hv(this,n,1,s)}resize(n){ow(this,n,1)}clone(){return new ph({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,m,v){Wv(n,s,h,m,v,1)}}class ko{constructor(n,s){Hv(this,n,4,s)}resize(n){ow(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new ko({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,m,v){Wv(n,s,h,m,v,4)}}function aw(a){const n={},s=a.resolution||256,h=a.clips?a.clips.length:1,m=a.image||new ko({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,S,T)=>{n[a.evaluationKey]=T;const M=a.expression.evaluate(n);m.data[x+S+0]=Math.floor(255*M.r/M.a),m.data[x+S+1]=Math.floor(255*M.g/M.a),m.data[x+S+2]=Math.floor(255*M.b/M.a),m.data[x+S+3]=Math.floor(255*M.a)};if(a.clips)for(let x=0,S=0;x<h;++x,S+=4*s)for(let T=0,M=0;T<s;T++,M+=4){const O=T/(s-1),{start:j,end:K}=a.clips[x];v(S,M,j*(1-O)+K*O)}else for(let x=0,S=0;x<s;x++,S+=4)v(0,S,x/(s-1));return m}Pt("AlphaImage",ph),Pt("RGBAImage",ko);class kM extends po{createBucket(n){return new nw(n)}constructor(n){super(n,CM),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=aw({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let sw;var IM={get paint(){return sw=sw||new Cn({"hillshade-illumination-direction":new Vt(Ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Vt(Ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Vt(Ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Vt(Ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Vt(Ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Vt(Ae.paint_hillshade["hillshade-accent-color"])})}};class TM extends po{constructor(n){super(n,IM)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const PM=cn([{name:"a_pos",components:2,type:"Int16"}],4),{members:EM}=PM;var Gv={exports:{}};function im(a,n,s){s=s||2;var h,m,v,x,S,T,M,O=n&&n.length,j=O?n[0]*s:a.length,K=lw(a,0,j,s,!0),Y=[];if(!K||K.next===K.prev)return Y;if(O&&(K=function(se,me,ve,Te){var be,Pe,je,Xe=[];for(be=0,Pe=me.length;be<Pe;be++)(je=lw(se,me[be]*Te,be<Pe-1?me[be+1]*Te:se.length,Te,!1))===je.next&&(je.steiner=!0),Xe.push(BM(je));for(Xe.sort(RM),be=0;be<Xe.length;be++)ve=LM(Xe[be],ve);return ve}(a,n,K,s)),a.length>80*s){h=v=a[0],m=x=a[1];for(var ee=s;ee<j;ee+=s)(S=a[ee])<h&&(h=S),(T=a[ee+1])<m&&(m=T),S>v&&(v=S),T>x&&(x=T);M=(M=Math.max(v-h,x-m))!==0?32767/M:0}return fh(K,Y,s,h,m,M,0),Y}function lw(a,n,s,h,m){var v,x;if(m===Kv(a,n,s,h)>0)for(v=n;v<s;v+=h)x=dw(v,a[v],a[v+1],x);else for(v=s-h;v>=n;v-=h)x=dw(v,a[v],a[v+1],x);return x&&om(x,x.next)&&(gh(x),x=x.next),x}function Jl(a,n){if(!a)return a;n||(n=a);var s,h=a;do if(s=!1,h.steiner||!om(h,h.next)&&In(h.prev,h,h.next)!==0)h=h.next;else{if(gh(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function fh(a,n,s,h,m,v,x){if(a){!x&&v&&function(O,j,K,Y){var ee=O;do ee.z===0&&(ee.z=qv(ee.x,ee.y,j,K,Y)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==O);ee.prevZ.nextZ=null,ee.prevZ=null,function(se){var me,ve,Te,be,Pe,je,Xe,wt,Ot=1;do{for(ve=se,se=null,Pe=null,je=0;ve;){for(je++,Te=ve,Xe=0,me=0;me<Ot&&(Xe++,Te=Te.nextZ);me++);for(wt=Ot;Xe>0||wt>0&&Te;)Xe!==0&&(wt===0||!Te||ve.z<=Te.z)?(be=ve,ve=ve.nextZ,Xe--):(be=Te,Te=Te.nextZ,wt--),Pe?Pe.nextZ=be:se=be,be.prevZ=Pe,Pe=be;ve=Te}Pe.nextZ=null,Ot*=2}while(je>1)}(ee)}(a,h,m,v);for(var S,T,M=a;a.prev!==a.next;)if(S=a.prev,T=a.next,v?MM(a,h,m,v):zM(a))n.push(S.i/s|0),n.push(a.i/s|0),n.push(T.i/s|0),gh(a),a=T.next,M=T.next;else if((a=T)===M){x?x===1?fh(a=AM(Jl(a),n,s),n,s,h,m,v,2):x===2&&DM(a,n,s,h,m,v):fh(Jl(a),n,s,h,m,v,1);break}}}function zM(a){var n=a.prev,s=a,h=a.next;if(In(n,s,h)>=0)return!1;for(var m=n.x,v=s.x,x=h.x,S=n.y,T=s.y,M=h.y,O=m<v?m<x?m:x:v<x?v:x,j=S<T?S<M?S:M:T<M?T:M,K=m>v?m>x?m:x:v>x?v:x,Y=S>T?S>M?S:M:T>M?T:M,ee=h.next;ee!==n;){if(ee.x>=O&&ee.x<=K&&ee.y>=j&&ee.y<=Y&&nu(m,S,v,T,x,M,ee.x,ee.y)&&In(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function MM(a,n,s,h){var m=a.prev,v=a,x=a.next;if(In(m,v,x)>=0)return!1;for(var S=m.x,T=v.x,M=x.x,O=m.y,j=v.y,K=x.y,Y=S<T?S<M?S:M:T<M?T:M,ee=O<j?O<K?O:K:j<K?j:K,se=S>T?S>M?S:M:T>M?T:M,me=O>j?O>K?O:K:j>K?j:K,ve=qv(Y,ee,n,s,h),Te=qv(se,me,n,s,h),be=a.prevZ,Pe=a.nextZ;be&&be.z>=ve&&Pe&&Pe.z<=Te;){if(be.x>=Y&&be.x<=se&&be.y>=ee&&be.y<=me&&be!==m&&be!==x&&nu(S,O,T,j,M,K,be.x,be.y)&&In(be.prev,be,be.next)>=0||(be=be.prevZ,Pe.x>=Y&&Pe.x<=se&&Pe.y>=ee&&Pe.y<=me&&Pe!==m&&Pe!==x&&nu(S,O,T,j,M,K,Pe.x,Pe.y)&&In(Pe.prev,Pe,Pe.next)>=0))return!1;Pe=Pe.nextZ}for(;be&&be.z>=ve;){if(be.x>=Y&&be.x<=se&&be.y>=ee&&be.y<=me&&be!==m&&be!==x&&nu(S,O,T,j,M,K,be.x,be.y)&&In(be.prev,be,be.next)>=0)return!1;be=be.prevZ}for(;Pe&&Pe.z<=Te;){if(Pe.x>=Y&&Pe.x<=se&&Pe.y>=ee&&Pe.y<=me&&Pe!==m&&Pe!==x&&nu(S,O,T,j,M,K,Pe.x,Pe.y)&&In(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.nextZ}return!0}function AM(a,n,s){var h=a;do{var m=h.prev,v=h.next.next;!om(m,v)&&cw(m,h,h.next,v)&&mh(m,v)&&mh(v,m)&&(n.push(m.i/s|0),n.push(h.i/s|0),n.push(v.i/s|0),gh(h),gh(h.next),h=a=v),h=h.next}while(h!==a);return Jl(h)}function DM(a,n,s,h,m,v){var x=a;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&OM(x,S)){var T=uw(x,S);return x=Jl(x,x.next),T=Jl(T,T.next),fh(x,n,s,h,m,v,0),void fh(T,n,s,h,m,v,0)}S=S.next}x=x.next}while(x!==a)}function RM(a,n){return a.x-n.x}function LM(a,n){var s=function(m,v){var x,S=v,T=m.x,M=m.y,O=-1/0;do{if(M<=S.y&&M>=S.next.y&&S.next.y!==S.y){var j=S.x+(M-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(j<=T&&j>O&&(O=j,x=S.x<S.next.x?S:S.next,j===T))return x}S=S.next}while(S!==v);if(!x)return null;var K,Y=x,ee=x.x,se=x.y,me=1/0;S=x;do T>=S.x&&S.x>=ee&&T!==S.x&&nu(M<se?T:O,M,ee,se,M<se?O:T,M,S.x,S.y)&&(K=Math.abs(M-S.y)/(T-S.x),mh(S,m)&&(K<me||K===me&&(S.x>x.x||S.x===x.x&&$M(x,S)))&&(x=S,me=K)),S=S.next;while(S!==Y);return x}(a,n);if(!s)return n;var h=uw(s,a);return Jl(h,h.next),Jl(s,s.next)}function $M(a,n){return In(a.prev,a,n.prev)<0&&In(n.next,a,a.next)<0}function qv(a,n,s,h,m){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-s)*m|0)|a<<8))|a<<4))|a<<2))|a<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*m|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function BM(a){var n=a,s=a;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==a);return s}function nu(a,n,s,h,m,v,x,S){return(m-x)*(n-S)>=(a-x)*(v-S)&&(a-x)*(h-S)>=(s-x)*(n-S)&&(s-x)*(v-S)>=(m-x)*(h-S)}function OM(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!function(s,h){var m=s;do{if(m.i!==s.i&&m.next.i!==s.i&&m.i!==h.i&&m.next.i!==h.i&&cw(m,m.next,s,h))return!0;m=m.next}while(m!==s);return!1}(a,n)&&(mh(a,n)&&mh(n,a)&&function(s,h){var m=s,v=!1,x=(s.x+h.x)/2,S=(s.y+h.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&x<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(v=!v),m=m.next;while(m!==s);return v}(a,n)&&(In(a.prev,a,n.prev)||In(a,n.prev,n))||om(a,n)&&In(a.prev,a,a.next)>0&&In(n.prev,n,n.next)>0)}function In(a,n,s){return(n.y-a.y)*(s.x-n.x)-(n.x-a.x)*(s.y-n.y)}function om(a,n){return a.x===n.x&&a.y===n.y}function cw(a,n,s,h){var m=sm(In(a,n,s)),v=sm(In(a,n,h)),x=sm(In(s,h,a)),S=sm(In(s,h,n));return m!==v&&x!==S||!(m!==0||!am(a,s,n))||!(v!==0||!am(a,h,n))||!(x!==0||!am(s,a,h))||!(S!==0||!am(s,n,h))}function am(a,n,s){return n.x<=Math.max(a.x,s.x)&&n.x>=Math.min(a.x,s.x)&&n.y<=Math.max(a.y,s.y)&&n.y>=Math.min(a.y,s.y)}function sm(a){return a>0?1:a<0?-1:0}function mh(a,n){return In(a.prev,a,a.next)<0?In(a,n,a.next)>=0&&In(a,a.prev,n)>=0:In(a,n,a.prev)<0||In(a,a.next,n)<0}function uw(a,n){var s=new Zv(a.i,a.x,a.y),h=new Zv(n.i,n.x,n.y),m=a.next,v=n.prev;return a.next=n,n.prev=a,s.next=m,m.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function dw(a,n,s,h){var m=new Zv(a,n,s);return h?(m.next=h.next,m.prev=h,h.next.prev=m,h.next=m):(m.prev=m,m.next=m),m}function gh(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Zv(a,n,s){this.i=a,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Kv(a,n,s,h){for(var m=0,v=n,x=s-h;v<s;v+=h)m+=(a[x]-a[v])*(a[v+1]+a[x+1]),x=v;return m}Gv.exports=im,Gv.exports.default=im,im.deviation=function(a,n,s,h){var m=n&&n.length,v=Math.abs(Kv(a,0,m?n[0]*s:a.length,s));if(m)for(var x=0,S=n.length;x<S;x++)v-=Math.abs(Kv(a,n[x]*s,x<S-1?n[x+1]*s:a.length,s));var T=0;for(x=0;x<h.length;x+=3){var M=h[x]*s,O=h[x+1]*s,j=h[x+2]*s;T+=Math.abs((a[M]-a[j])*(a[O+1]-a[M+1])-(a[M]-a[O])*(a[j+1]-a[M+1]))}return v===0&&T===0?0:Math.abs((T-v)/v)},im.flatten=function(a){for(var n=a[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,m=0;m<a.length;m++){for(var v=0;v<a[m].length;v++)for(var x=0;x<n;x++)s.vertices.push(a[m][v][x]);m>0&&s.holes.push(h+=a[m-1].length)}return s};var hw=w(Gv.exports);function FM(a,n,s,h,m){pw(a,n,s||0,h||a.length-1,m||NM)}function pw(a,n,s,h,m){for(;h>s;){if(h-s>600){var v=h-s+1,x=n-s+1,S=Math.log(v),T=.5*Math.exp(2*S/3),M=.5*Math.sqrt(S*T*(v-T)/v)*(x-v/2<0?-1:1);pw(a,n,Math.max(s,Math.floor(n-x*T/v+M)),Math.min(h,Math.floor(n+(v-x)*T/v+M)),m)}var O=a[n],j=s,K=h;for(yh(a,s,n),m(a[h],O)>0&&yh(a,s,h);j<K;){for(yh(a,j,K),j++,K--;m(a[j],O)<0;)j++;for(;m(a[K],O)>0;)K--}m(a[s],O)===0?yh(a,s,K):yh(a,++K,h),K<=n&&(s=K+1),n<=K&&(h=K-1)}}function yh(a,n,s){var h=a[n];a[n]=a[s],a[s]=h}function NM(a,n){return a<n?-1:a>n?1:0}function Xv(a,n){const s=a.length;if(s<=1)return[a];const h=[];let m,v;for(let x=0;x<s;x++){const S=Me(a[x]);S!==0&&(a[x].area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(m&&h.push(m),m=[a[x]]):m.push(a[x]))}if(m&&h.push(m),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(FM(h[x],n,1,h[x].length-1,jM),h[x]=h[x].slice(0,n));return h}function jM(a,n){return n.area-a.area}function Jv(a,n,s){const h=s.patternDependencies;let m=!1;for(const v of n){const x=v.paint.get(`${a}-pattern`);x.isConstant()||(m=!0);const S=x.constantOr(null);S&&(m=!0,h[S.to]=!0,h[S.from]=!0)}return m}function Yv(a,n,s,h,m){const v=m.patternDependencies;for(const x of n){const S=x.paint.get(`${a}-pattern`).value;if(S.kind!=="constant"){let T=S.evaluate({zoom:h-1},s,{},m.availableImages),M=S.evaluate({zoom:h},s,{},m.availableImages),O=S.evaluate({zoom:h+1},s,{},m.availableImages);T=T&&T.name?T.name:T,M=M&&M.name?M.name:M,O=O&&O.name?O.name:O,v[T]=!0,v[M]=!0,v[O]=!0,s.patterns[x.id]={min:T,mid:M,max:O}}}return s}class Qv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new fr,this.indexArray=new ri,this.indexArray2=new Fn,this.programConfigurations=new ba(n.layers,n.zoom),this.segments=new en,this.segments2=new en,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Jv("fill",this.layers,s);const m=this.layers[0].layout.get("fill-sort-key"),v=!m.isConstant(),x=[];for(const{feature:S,id:T,index:M,sourceLayerIndex:O}of n){const j=this.layers[0]._featureFilter.needGeometry,K=Xl(S,j);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),K,h))continue;const Y=v?m.evaluate(K,{},h,s.availableImages):void 0,ee={id:T,properties:S.properties,type:S.type,sourceLayerIndex:O,index:M,geometry:j?K.geometry:Kl(S),patterns:{},sortKey:Y};x.push(ee)}v&&x.sort((S,T)=>S.sortKey-T.sortKey);for(const S of x){const{geometry:T,index:M,sourceLayerIndex:O}=S;if(this.hasPattern){const j=Yv("fill",this.layers,S,this.zoom,s);this.patternFeatures.push(j)}else this.addFeature(S,T,M,h,{});s.featureIndex.insert(n[M].feature,T,M,O,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,EM),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,m,v){for(const x of Xv(s,500)){let S=0;for(const Y of x)S+=Y.length;const T=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),M=T.vertexLength,O=[],j=[];for(const Y of x){if(Y.length===0)continue;Y!==x[0]&&j.push(O.length/2);const ee=this.segments2.prepareSegment(Y.length,this.layoutVertexArray,this.indexArray2),se=ee.vertexLength;this.layoutVertexArray.emplaceBack(Y[0].x,Y[0].y),this.indexArray2.emplaceBack(se+Y.length-1,se),O.push(Y[0].x),O.push(Y[0].y);for(let me=1;me<Y.length;me++)this.layoutVertexArray.emplaceBack(Y[me].x,Y[me].y),this.indexArray2.emplaceBack(se+me-1,se+me),O.push(Y[me].x),O.push(Y[me].y);ee.vertexLength+=Y.length,ee.primitiveLength+=Y.length}const K=hw(O,j);for(let Y=0;Y<K.length;Y+=3)this.indexArray.emplaceBack(M+K[Y],M+K[Y+1],M+K[Y+2]);T.vertexLength+=S,T.primitiveLength+=K.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}}let fw,mw;Pt("FillBucket",Qv,{omit:["layers","patternFeatures"]});var VM={get paint(){return mw=mw||new Cn({"fill-antialias":new Vt(Ae.paint_fill["fill-antialias"]),"fill-opacity":new Yt(Ae.paint_fill["fill-opacity"]),"fill-color":new Yt(Ae.paint_fill["fill-color"]),"fill-outline-color":new Yt(Ae.paint_fill["fill-outline-color"]),"fill-translate":new Vt(Ae.paint_fill["fill-translate"]),"fill-translate-anchor":new Vt(Ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new Gl(Ae.paint_fill["fill-pattern"])})},get layout(){return fw=fw||new Cn({"fill-sort-key":new Yt(Ae.layout_fill["fill-sort-key"])})}};class UM extends po{constructor(n){super(n,VM)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Qv(n)}queryRadius(){return tm(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,m,v,x,S){return Xb(rm(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),m)}isTileClipped(){return!0}}const HM=cn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),WM=cn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:GM}=HM;var Ys={},qM=k,gw=iu;function iu(a,n,s,h,m){this.properties={},this.extent=s,this.type=0,this._pbf=a,this._geometry=-1,this._keys=h,this._values=m,a.readFields(ZM,this,n)}function ZM(a,n,s){a==1?n.id=s.readVarint():a==2?function(h,m){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=m._keys[h.readVarint()],S=m._values[h.readVarint()];m.properties[x]=S}}(s,n):a==3?n.type=s.readVarint():a==4&&(n._geometry=s.pos)}function KM(a){for(var n,s,h=0,m=0,v=a.length,x=v-1;m<v;x=m++)h+=((s=a[x]).x-(n=a[m]).x)*(n.y+s.y);return h}iu.types=["Unknown","Point","LineString","Polygon"],iu.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var n,s=a.readVarint()+a.pos,h=1,m=0,v=0,x=0,S=[];a.pos<s;){if(m<=0){var T=a.readVarint();h=7&T,m=T>>3}if(m--,h===1||h===2)v+=a.readSVarint(),x+=a.readSVarint(),h===1&&(n&&S.push(n),n=[]),n.push(new qM(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&S.push(n),S},iu.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var n=a.readVarint()+a.pos,s=1,h=0,m=0,v=0,x=1/0,S=-1/0,T=1/0,M=-1/0;a.pos<n;){if(h<=0){var O=a.readVarint();s=7&O,h=O>>3}if(h--,s===1||s===2)(m+=a.readSVarint())<x&&(x=m),m>S&&(S=m),(v+=a.readSVarint())<T&&(T=v),v>M&&(M=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,T,S,M]},iu.prototype.toGeoJSON=function(a,n,s){var h,m,v=this.extent*Math.pow(2,s),x=this.extent*a,S=this.extent*n,T=this.loadGeometry(),M=iu.types[this.type];function O(Y){for(var ee=0;ee<Y.length;ee++){var se=Y[ee];Y[ee]=[360*(se.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(se.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var j=[];for(h=0;h<T.length;h++)j[h]=T[h][0];O(T=j);break;case 2:for(h=0;h<T.length;h++)O(T[h]);break;case 3:for(T=function(Y){var ee=Y.length;if(ee<=1)return[Y];for(var se,me,ve=[],Te=0;Te<ee;Te++){var be=KM(Y[Te]);be!==0&&(me===void 0&&(me=be<0),me===be<0?(se&&ve.push(se),se=[Y[Te]]):se.push(Y[Te]))}return se&&ve.push(se),ve}(T),h=0;h<T.length;h++)for(m=0;m<T[h].length;m++)O(T[h][m])}T.length===1?T=T[0]:M="Multi"+M;var K={type:"Feature",geometry:{type:M,coordinates:T},properties:this.properties};return"id"in this&&(K.id=this.id),K};var XM=gw,yw=vw;function vw(a,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(JM,this,n),this.length=this._features.length}function JM(a,n,s){a===15?n.version=s.readVarint():a===1?n.name=s.readString():a===5?n.extent=s.readVarint():a===2?n._features.push(s.pos):a===3?n._keys.push(s.readString()):a===4&&n._values.push(function(h){for(var m=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;m=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return m}(s))}vw.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var n=this._pbf.readVarint()+this._pbf.pos;return new XM(this._pbf,n,this.extent,this._keys,this._values)};var YM=yw;function QM(a,n,s){if(a===3){var h=new YM(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Ys.VectorTile=function(a,n){this.layers=a.readFields(QM,{},n)},Ys.VectorTileFeature=gw,Ys.VectorTileLayer=yw;const eA=Ys.VectorTileFeature.types,e0=Math.pow(2,13);function vh(a,n,s,h,m,v,x,S){a.emplaceBack(n,s,2*Math.floor(h*e0)+x,m*e0*2,v*e0*2,Math.round(S))}class t0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new ft,this.centroidVertexArray=new ot,this.indexArray=new ri,this.programConfigurations=new ba(n.layers,n.zoom),this.segments=new en,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=Jv("fill-extrusion",this.layers,s);for(const{feature:m,id:v,index:x,sourceLayerIndex:S}of n){const T=this.layers[0]._featureFilter.needGeometry,M=Xl(m,T);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),M,h))continue;const O={id:v,sourceLayerIndex:S,index:x,geometry:T?M.geometry:Kl(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(Yv("fill-extrusion",this.layers,O,this.zoom,s)):this.addFeature(O,O.geometry,x,h,{}),s.featureIndex.insert(m,O.geometry,x,S,this.index,!0)}}addFeatures(n,s,h){for(const m of this.features){const{geometry:v}=m;this.addFeature(m,v,m.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,GM),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,WM.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,m,v){const x={x:0,y:0,vertexCount:0};for(const S of Xv(s,500)){let T=0;for(const ee of S)T+=ee.length;let M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ee of S){if(ee.length===0||rA(ee))continue;let se=0;for(let me=0;me<ee.length;me++){const ve=ee[me];if(me>=1){const Te=ee[me-1];if(!tA(ve,Te)){M.vertexLength+4>en.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const be=ve.sub(Te)._perp()._unit(),Pe=Te.dist(ve);se+Pe>32768&&(se=0),vh(this.layoutVertexArray,ve.x,ve.y,be.x,be.y,0,0,se),vh(this.layoutVertexArray,ve.x,ve.y,be.x,be.y,0,1,se),x.x+=2*ve.x,x.y+=2*ve.y,x.vertexCount+=2,se+=Pe,vh(this.layoutVertexArray,Te.x,Te.y,be.x,be.y,0,0,se),vh(this.layoutVertexArray,Te.x,Te.y,be.x,be.y,0,1,se),x.x+=2*Te.x,x.y+=2*Te.y,x.vertexCount+=2;const je=M.vertexLength;this.indexArray.emplaceBack(je,je+2,je+1),this.indexArray.emplaceBack(je+1,je+2,je+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+T>en.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray)),eA[n.type]!=="Polygon")continue;const O=[],j=[],K=M.vertexLength;for(const ee of S)if(ee.length!==0){ee!==S[0]&&j.push(O.length/2);for(let se=0;se<ee.length;se++){const me=ee[se];vh(this.layoutVertexArray,me.x,me.y,0,0,1,1,0),x.x+=me.x,x.y+=me.y,x.vertexCount+=1,O.push(me.x),O.push(me.y)}}const Y=hw(O,j);for(let ee=0;ee<Y.length;ee+=3)this.indexArray.emplaceBack(K+Y[ee],K+Y[ee+2],K+Y[ee+1]);M.primitiveLength+=Y.length/3,M.vertexLength+=T}for(let S=0;S<x.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}}function tA(a,n){return a.x===n.x&&(a.x<0||a.x>An)||a.y===n.y&&(a.y<0||a.y>An)}function rA(a){return a.every(n=>n.x<0)||a.every(n=>n.x>An)||a.every(n=>n.y<0)||a.every(n=>n.y>An)}let _w;Pt("FillExtrusionBucket",t0,{omit:["layers","features"]});var nA={get paint(){return _w=_w||new Cn({"fill-extrusion-opacity":new Vt(Ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yt(Ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Vt(Ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Vt(Ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Gl(Ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Yt(Ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yt(Ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Vt(Ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class iA extends po{constructor(n){super(n,nA)}createBucket(n){return new t0(n)}queryRadius(){return tm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,m,v,x,S,T){const M=rm(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),O=this.paint.get("fill-extrusion-height").evaluate(s,h),j=this.paint.get("fill-extrusion-base").evaluate(s,h),K=function(ee,se,me,ve){const Te=[];for(const be of ee){const Pe=[be.x,be.y,0,1];nm(Pe,Pe,se),Te.push(new P(Pe[0]/Pe[3],Pe[1]/Pe[3]))}return Te}(M,T),Y=function(ee,se,me,ve){const Te=[],be=[],Pe=ve[8]*se,je=ve[9]*se,Xe=ve[10]*se,wt=ve[11]*se,Ot=ve[8]*me,xt=ve[9]*me,mt=ve[10]*me,lt=ve[11]*me;for(const Et of ee){const dt=[],tt=[];for(const Gt of Et){const jt=Gt.x,hr=Gt.y,tn=ve[0]*jt+ve[4]*hr+ve[12],on=ve[1]*jt+ve[5]*hr+ve[13],Vn=ve[2]*jt+ve[6]*hr+ve[14],mo=ve[3]*jt+ve[7]*hr+ve[15],Ai=Vn+Xe,Dn=mo+wt,ii=tn+Ot,ui=on+xt,Di=Vn+mt,Ri=mo+lt,Un=new P((tn+Pe)/Dn,(on+je)/Dn);Un.z=Ai/Dn,dt.push(Un);const Hn=new P(ii/Ri,ui/Ri);Hn.z=Di/Ri,tt.push(Hn)}Te.push(dt),be.push(tt)}return[Te,be]}(m,j,O,T);return function(ee,se,me){let ve=1/0;Xb(me,se)&&(ve=xw(me,se[0]));for(let Te=0;Te<se.length;Te++){const be=se[Te],Pe=ee[Te];for(let je=0;je<be.length-1;je++){const Xe=be[je],wt=[Xe,be[je+1],Pe[je+1],Pe[je],Xe];Kb(me,wt)&&(ve=Math.min(ve,xw(me,wt)))}}return ve!==1/0&&ve}(Y[0],Y[1],K)}}function _h(a,n){return a.x*n.x+a.y*n.y}function xw(a,n){if(a.length===1){let s=0;const h=n[s++];let m;for(;!m||h.equals(m);)if(m=n[s++],!m)return 1/0;for(;s<n.length;s++){const v=n[s],x=a[0],S=m.sub(h),T=v.sub(h),M=x.sub(h),O=_h(S,S),j=_h(S,T),K=_h(T,T),Y=_h(M,S),ee=_h(M,T),se=O*K-j*j,me=(K*Y-j*ee)/se,ve=(O*ee-j*Y)/se,Te=h.z*(1-me-ve)+m.z*me+v.z*ve;if(isFinite(Te))return Te}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const oA=cn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:aA}=oA,sA=cn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:lA}=sA,cA=Ys.VectorTileFeature.types,uA=Math.cos(Math.PI/180*37.5),bw=Math.pow(2,14)/.5;class r0{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Qt,this.layoutVertexArray2=new Nt,this.indexArray=new ri,this.programConfigurations=new ba(n.layers,n.zoom),this.segments=new en,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=Jv("line",this.layers,s);const m=this.layers[0].layout.get("line-sort-key"),v=!m.isConstant(),x=[];for(const{feature:S,id:T,index:M,sourceLayerIndex:O}of n){const j=this.layers[0]._featureFilter.needGeometry,K=Xl(S,j);if(!this.layers[0]._featureFilter.filter(new Qr(this.zoom),K,h))continue;const Y=v?m.evaluate(K,{},h):void 0,ee={id:T,properties:S.properties,type:S.type,sourceLayerIndex:O,index:M,geometry:j?K.geometry:Kl(S),patterns:{},sortKey:Y};x.push(ee)}v&&x.sort((S,T)=>S.sortKey-T.sortKey);for(const S of x){const{geometry:T,index:M,sourceLayerIndex:O}=S;if(this.hasPattern){const j=Yv("line",this.layers,S,this.zoom,s);this.patternFeatures.push(j)}else this.addFeature(S,T,M,h,{});s.featureIndex.insert(n[M].feature,T,M,O,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,lA)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,aA),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,m,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),T=x.get("line-cap"),M=x.get("line-miter-limit"),O=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const j of s)this.addLine(j,n,S,T,M,O);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,m)}addLine(n,s,h,m,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ve=0;ve<n.length-1;ve++)this.totalDistance+=n[ve].dist(n[ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=cA[s.type]==="Polygon";let T=n.length;for(;T>=2&&n[T-1].equals(n[T-2]);)T--;let M=0;for(;M<T-1&&n[M].equals(n[M+1]);)M++;if(T<(S?3:2))return;h==="bevel"&&(v=1.05);const O=this.overscaling<=16?15*An/(512*this.overscaling):0,j=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let K,Y,ee,se,me;this.e1=this.e2=-1,S&&(K=n[T-2],me=n[M].sub(K)._unit()._perp());for(let ve=M;ve<T;ve++){if(ee=ve===T-1?S?n[M+1]:void 0:n[ve+1],ee&&n[ve].equals(ee))continue;me&&(se=me),K&&(Y=K),K=n[ve],me=ee?ee.sub(K)._unit()._perp():se,se=se||me;let Te=se.add(me);Te.x===0&&Te.y===0||Te._unit();const be=se.x*me.x+se.y*me.y,Pe=Te.x*me.x+Te.y*me.y,je=Pe!==0?1/Pe:1/0,Xe=2*Math.sqrt(2-2*Pe),wt=Pe<uA&&Y&&ee,Ot=se.x*me.y-se.y*me.x>0;if(wt&&ve>M){const lt=K.dist(Y);if(lt>2*O){const Et=K.sub(K.sub(Y)._mult(O/lt)._round());this.updateDistance(Y,Et),this.addCurrentVertex(Et,se,0,0,j),Y=Et}}const xt=Y&&ee;let mt=xt?h:S?"butt":m;if(xt&&mt==="round"&&(je<x?mt="miter":je<=2&&(mt="fakeround")),mt==="miter"&&je>v&&(mt="bevel"),mt==="bevel"&&(je>2&&(mt="flipbevel"),je<v&&(mt="miter")),Y&&this.updateDistance(Y,K),mt==="miter")Te._mult(je),this.addCurrentVertex(K,Te,0,0,j);else if(mt==="flipbevel"){if(je>100)Te=me.mult(-1);else{const lt=je*se.add(me).mag()/se.sub(me).mag();Te._perp()._mult(lt*(Ot?-1:1))}this.addCurrentVertex(K,Te,0,0,j),this.addCurrentVertex(K,Te.mult(-1),0,0,j)}else if(mt==="bevel"||mt==="fakeround"){const lt=-Math.sqrt(je*je-1),Et=Ot?lt:0,dt=Ot?0:lt;if(Y&&this.addCurrentVertex(K,se,Et,dt,j),mt==="fakeround"){const tt=Math.round(180*Xe/Math.PI/20);for(let Gt=1;Gt<tt;Gt++){let jt=Gt/tt;if(jt!==.5){const tn=jt-.5;jt+=jt*tn*(jt-1)*((1.0904+be*(be*(3.55645-1.43519*be)-3.2452))*tn*tn+(.848013+be*(.215638*be-1.06021)))}const hr=me.sub(se)._mult(jt)._add(se)._unit()._mult(Ot?-1:1);this.addHalfVertex(K,hr.x,hr.y,!1,Ot,0,j)}}ee&&this.addCurrentVertex(K,me,-Et,-dt,j)}else if(mt==="butt")this.addCurrentVertex(K,Te,0,0,j);else if(mt==="square"){const lt=Y?1:-1;this.addCurrentVertex(K,Te,lt,lt,j)}else mt==="round"&&(Y&&(this.addCurrentVertex(K,se,0,0,j),this.addCurrentVertex(K,se,1,1,j,!0)),ee&&(this.addCurrentVertex(K,me,-1,-1,j,!0),this.addCurrentVertex(K,me,0,0,j)));if(wt&&ve<T-1){const lt=K.dist(ee);if(lt>2*O){const Et=K.add(ee.sub(K)._mult(O/lt)._round());this.updateDistance(K,Et),this.addCurrentVertex(Et,me,0,0,j),K=Et}}}}addCurrentVertex(n,s,h,m,v,x=!1){const S=s.y*m-s.x,T=-s.y-s.x*m;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,v),this.addHalfVertex(n,S,T,x,!0,-m,v),this.distance>bw/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,m,v,x))}addHalfVertex({x:n,y:s},h,m,v,x,S,T){const M=.5*(this.lineClips?this.scaledDistance*(bw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&M)<<2,M>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const O=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,O),T.primitiveLength++),x?this.e2=O:this.e1=O}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let ww,Sw;Pt("LineBucket",r0,{omit:["layers","patternFeatures"]});var Cw={get paint(){return Sw=Sw||new Cn({"line-opacity":new Yt(Ae.paint_line["line-opacity"]),"line-color":new Yt(Ae.paint_line["line-color"]),"line-translate":new Vt(Ae.paint_line["line-translate"]),"line-translate-anchor":new Vt(Ae.paint_line["line-translate-anchor"]),"line-width":new Yt(Ae.paint_line["line-width"]),"line-gap-width":new Yt(Ae.paint_line["line-gap-width"]),"line-offset":new Yt(Ae.paint_line["line-offset"]),"line-blur":new Yt(Ae.paint_line["line-blur"]),"line-dasharray":new rh(Ae.paint_line["line-dasharray"]),"line-pattern":new Gl(Ae.paint_line["line-pattern"]),"line-gradient":new nh(Ae.paint_line["line-gradient"])})},get layout(){return ww=ww||new Cn({"line-cap":new Vt(Ae.layout_line["line-cap"]),"line-join":new Yt(Ae.layout_line["line-join"]),"line-miter-limit":new Vt(Ae.layout_line["line-miter-limit"]),"line-round-limit":new Vt(Ae.layout_line["line-round-limit"]),"line-sort-key":new Yt(Ae.layout_line["line-sort-key"])})}};class dA extends Yt{possiblyEvaluate(n,s){return s=new Qr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,m){return s=ue({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,m)}}let lm;class hA extends po{constructor(n){super(n,Cw),this.gradientVersion=0,lm||(lm=new dA(Cw.paint.properties["line-width"].specification),lm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Na,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=lm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new r0(n)}queryRadius(n){const s=n,h=kw(dh("line-width",this,s),dh("line-gap-width",this,s)),m=dh("line-offset",this,s);return h/2+Math.abs(m)+tm(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,m,v,x,S){const T=rm(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),M=S/2*kw(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),O=this.paint.get("line-offset").evaluate(s,h);return O&&(m=function(j,K){const Y=[];for(let ee=0;ee<j.length;ee++){const se=j[ee],me=[];for(let ve=0;ve<se.length;ve++){const Te=se[ve-1],be=se[ve],Pe=se[ve+1],je=ve===0?new P(0,0):be.sub(Te)._unit()._perp(),Xe=ve===se.length-1?new P(0,0):Pe.sub(be)._unit()._perp(),wt=je._add(Xe)._unit(),Ot=wt.x*Xe.x+wt.y*Xe.y;Ot!==0&&wt._mult(1/Ot),me.push(wt._mult(K)._add(be))}Y.push(me)}return Y}(m,O*S)),function(j,K,Y){for(let ee=0;ee<K.length;ee++){const se=K[ee];if(j.length>=3){for(let me=0;me<se.length;me++)if(tu(j,se[me]))return!0}if(vM(j,se,Y))return!0}return!1}(T,m,M)}isTileClipped(){return!0}}function kw(a,n){return n>0?n+2*a:a}const pA=cn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),fA=cn([{name:"a_projected_pos",components:3,type:"Float32"}],4);cn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const mA=cn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);cn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Iw=cn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),gA=cn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function yA(a,n,s){return a.sections.forEach(h=>{h.text=function(m,v,x){const S=v.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),Ki.applyArabicShaping&&(m=Ki.applyArabicShaping(m)),m}(h.text,n,s)}),a}cn([{name:"triangle",components:3,type:"Uint16"}]),cn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),cn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),cn([{type:"Float32",name:"offsetX"}]),cn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),cn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const xh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var jn=24,Tw=jr,Pw=function(a,n,s,h,m){var v,x,S=8*m-h-1,T=(1<<S)-1,M=T>>1,O=-7,j=s?m-1:0,K=s?-1:1,Y=a[n+j];for(j+=K,v=Y&(1<<-O)-1,Y>>=-O,O+=S;O>0;v=256*v+a[n+j],j+=K,O-=8);for(x=v&(1<<-O)-1,v>>=-O,O+=h;O>0;x=256*x+a[n+j],j+=K,O-=8);if(v===0)v=1-M;else{if(v===T)return x?NaN:1/0*(Y?-1:1);x+=Math.pow(2,h),v-=M}return(Y?-1:1)*x*Math.pow(2,v-h)},Ew=function(a,n,s,h,m,v){var x,S,T,M=8*v-m-1,O=(1<<M)-1,j=O>>1,K=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,Y=h?0:v-1,ee=h?1:-1,se=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(S=isNaN(n)?1:0,x=O):(x=Math.floor(Math.log(n)/Math.LN2),n*(T=Math.pow(2,-x))<1&&(x--,T*=2),(n+=x+j>=1?K/T:K*Math.pow(2,1-j))*T>=2&&(x++,T/=2),x+j>=O?(S=0,x=O):x+j>=1?(S=(n*T-1)*Math.pow(2,m),x+=j):(S=n*Math.pow(2,j-1)*Math.pow(2,m),x=0));m>=8;a[s+Y]=255&S,Y+=ee,S/=256,m-=8);for(x=x<<m|S,M+=m;M>0;a[s+Y]=255&x,Y+=ee,x/=256,M-=8);a[s+Y-ee]|=128*se};function jr(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}jr.Varint=0,jr.Fixed64=1,jr.Bytes=2,jr.Fixed32=5;var n0=4294967296,zw=1/n0,Mw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function vs(a){return a.type===jr.Bytes?a.readVarint()+a.pos:a.pos+1}function ou(a,n,s){return s?4294967296*n+(a>>>0):4294967296*(n>>>0)+(a>>>0)}function Aw(a,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var m=s.pos-1;m>=a;m--)s.buf[m+h]=s.buf[m]}function vA(a,n){for(var s=0;s<a.length;s++)n.writeVarint(a[s])}function _A(a,n){for(var s=0;s<a.length;s++)n.writeSVarint(a[s])}function xA(a,n){for(var s=0;s<a.length;s++)n.writeFloat(a[s])}function bA(a,n){for(var s=0;s<a.length;s++)n.writeDouble(a[s])}function wA(a,n){for(var s=0;s<a.length;s++)n.writeBoolean(a[s])}function SA(a,n){for(var s=0;s<a.length;s++)n.writeFixed32(a[s])}function CA(a,n){for(var s=0;s<a.length;s++)n.writeSFixed32(a[s])}function kA(a,n){for(var s=0;s<a.length;s++)n.writeFixed64(a[s])}function IA(a,n){for(var s=0;s<a.length;s++)n.writeSFixed64(a[s])}function cm(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+16777216*a[n+3]}function au(a,n,s){a[s]=n,a[s+1]=n>>>8,a[s+2]=n>>>16,a[s+3]=n>>>24}function Dw(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+(a[n+3]<<24)}jr.prototype={destroy:function(){this.buf=null},readFields:function(a,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),m=h>>3,v=this.pos;this.type=7&h,a(m,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(a,n){return this.readFields(a,n,this.readVarint()+this.pos)},readFixed32:function(){var a=cm(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=Dw(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=cm(this.buf,this.pos)+cm(this.buf,this.pos+4)*n0;return this.pos+=8,a},readSFixed64:function(){var a=cm(this.buf,this.pos)+Dw(this.buf,this.pos+4)*n0;return this.pos+=8,a},readFloat:function(){var a=Pw(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=Pw(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(m,v,x){var S,T,M=x.buf;if(S=(112&(T=M[x.pos++]))>>4,T<128||(S|=(127&(T=M[x.pos++]))<<3,T<128)||(S|=(127&(T=M[x.pos++]))<<10,T<128)||(S|=(127&(T=M[x.pos++]))<<17,T<128)||(S|=(127&(T=M[x.pos++]))<<24,T<128)||(S|=(1&(T=M[x.pos++]))<<31,T<128))return ou(m,S,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,n=this.pos;return this.pos=a,a-n>=12&&Mw?function(s,h,m){return Mw.decode(s.subarray(h,m))}(this.buf,n,a):function(s,h,m){for(var v="",x=h;x<m;){var S,T,M,O=s[x],j=null,K=O>239?4:O>223?3:O>191?2:1;if(x+K>m)break;K===1?O<128&&(j=O):K===2?(192&(S=s[x+1]))==128&&(j=(31&O)<<6|63&S)<=127&&(j=null):K===3?(T=s[x+2],(192&(S=s[x+1]))==128&&(192&T)==128&&((j=(15&O)<<12|(63&S)<<6|63&T)<=2047||j>=55296&&j<=57343)&&(j=null)):K===4&&(T=s[x+2],M=s[x+3],(192&(S=s[x+1]))==128&&(192&T)==128&&(192&M)==128&&((j=(15&O)<<18|(63&S)<<12|(63&T)<<6|63&M)<=65535||j>=1114112)&&(j=null)),j===null?(j=65533,K=1):j>65535&&(j-=65536,v+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),v+=String.fromCharCode(j),x+=K}return v}(this.buf,n,a)},readBytes:function(){var a=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,a);return this.pos=a,n},readPackedVarint:function(a,n){if(this.type!==jr.Bytes)return a.push(this.readVarint(n));var s=vs(this);for(a=a||[];this.pos<s;)a.push(this.readVarint(n));return a},readPackedSVarint:function(a){if(this.type!==jr.Bytes)return a.push(this.readSVarint());var n=vs(this);for(a=a||[];this.pos<n;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==jr.Bytes)return a.push(this.readBoolean());var n=vs(this);for(a=a||[];this.pos<n;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==jr.Bytes)return a.push(this.readFloat());var n=vs(this);for(a=a||[];this.pos<n;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==jr.Bytes)return a.push(this.readDouble());var n=vs(this);for(a=a||[];this.pos<n;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==jr.Bytes)return a.push(this.readFixed32());var n=vs(this);for(a=a||[];this.pos<n;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==jr.Bytes)return a.push(this.readSFixed32());var n=vs(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==jr.Bytes)return a.push(this.readFixed64());var n=vs(this);for(a=a||[];this.pos<n;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==jr.Bytes)return a.push(this.readSFixed64());var n=vs(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed64());return a},skip:function(a){var n=7&a;if(n===jr.Varint)for(;this.buf[this.pos++]>127;);else if(n===jr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===jr.Fixed32)this.pos+=4;else{if(n!==jr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(a,n){this.writeVarint(a<<3|n)},realloc:function(a){for(var n=this.length||16;n<this.pos+a;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),au(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),au(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),au(this.buf,-1&a,this.pos),au(this.buf,Math.floor(a*zw),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),au(this.buf,-1&a,this.pos),au(this.buf,Math.floor(a*zw),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(n,s){var h,m;if(n>=0?(h=n%4294967296|0,m=n/4294967296|0):(m=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,m=m+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(h,0,s),function(v,x){var S=(7&v)<<4;x.buf[x.pos++]|=S|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(m,s)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var n=this.pos;this.pos=function(h,m,v){for(var x,S,T=0;T<m.length;T++){if((x=m.charCodeAt(T))>55295&&x<57344){if(!S){x>56319||T+1===m.length?(h[v++]=239,h[v++]=191,h[v++]=189):S=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[v++]=239,h[v++]=191,h[v++]=189,S=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,a,this.pos);var s=this.pos-n;s>=128&&Aw(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(a){this.realloc(4),Ew(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),Ew(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var n=a.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=a[s]},writeRawMessage:function(a,n){this.pos++;var s=this.pos;a(n,this);var h=this.pos-s;h>=128&&Aw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(a,n,s){this.writeTag(a,jr.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(a,n){n.length&&this.writeMessage(a,vA,n)},writePackedSVarint:function(a,n){n.length&&this.writeMessage(a,_A,n)},writePackedBoolean:function(a,n){n.length&&this.writeMessage(a,wA,n)},writePackedFloat:function(a,n){n.length&&this.writeMessage(a,xA,n)},writePackedDouble:function(a,n){n.length&&this.writeMessage(a,bA,n)},writePackedFixed32:function(a,n){n.length&&this.writeMessage(a,SA,n)},writePackedSFixed32:function(a,n){n.length&&this.writeMessage(a,CA,n)},writePackedFixed64:function(a,n){n.length&&this.writeMessage(a,kA,n)},writePackedSFixed64:function(a,n){n.length&&this.writeMessage(a,IA,n)},writeBytesField:function(a,n){this.writeTag(a,jr.Bytes),this.writeBytes(n)},writeFixed32Field:function(a,n){this.writeTag(a,jr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(a,n){this.writeTag(a,jr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(a,n){this.writeTag(a,jr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(a,n){this.writeTag(a,jr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(a,n){this.writeTag(a,jr.Varint),this.writeVarint(n)},writeSVarintField:function(a,n){this.writeTag(a,jr.Varint),this.writeSVarint(n)},writeStringField:function(a,n){this.writeTag(a,jr.Bytes),this.writeString(n)},writeFloatField:function(a,n){this.writeTag(a,jr.Fixed32),this.writeFloat(n)},writeDoubleField:function(a,n){this.writeTag(a,jr.Fixed64),this.writeDouble(n)},writeBooleanField:function(a,n){this.writeVarintField(a,!!n)}};var i0=w(Tw);const o0=3;function TA(a,n,s){a===1&&s.readMessage(PA,n)}function PA(a,n,s){if(a===3){const{id:h,bitmap:m,width:v,height:x,left:S,top:T,advance:M}=s.readMessage(EA,{});n.push({id:h,bitmap:new ph({width:v+2*o0,height:x+2*o0},m),metrics:{width:v,height:x,left:S,top:T,advance:M}})}}function EA(a,n,s){a===1?n.id=s.readVarint():a===2?n.bitmap=s.readBytes():a===3?n.width=s.readVarint():a===4?n.height=s.readVarint():a===5?n.left=s.readSVarint():a===6?n.top=s.readSVarint():a===7&&(n.advance=s.readVarint())}const Rw=o0;function Lw(a){let n=0,s=0;for(const x of a)n+=x.w*x.h,s=Math.max(s,x.w);a.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let m=0,v=0;for(const x of a)for(let S=h.length-1;S>=0;S--){const T=h[S];if(!(x.w>T.w||x.h>T.h)){if(x.x=T.x,x.y=T.y,v=Math.max(v,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===T.w&&x.h===T.h){const M=h.pop();S<h.length&&(h[S]=M)}else x.h===T.h?(T.x+=x.w,T.w-=x.w):x.w===T.w?(T.y+=x.h,T.h-=x.h):(h.push({x:T.x+x.w,y:T.y,w:T.w-x.w,h:x.h}),T.y+=x.h,T.h-=x.h);break}}return{w:m,h:v,fill:n/(m*v)||0}}const Ji=1;class a0{constructor(n,{pixelRatio:s,version:h,stretchX:m,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=m,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+Ji,this.paddedRect.y+Ji]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ji,this.paddedRect.y+this.paddedRect.h-Ji]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ji)/this.pixelRatio,(this.paddedRect.h-2*Ji)/this.pixelRatio]}}class $w{constructor(n,s){const h={},m={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(s,m,v);const{w:x,h:S}=Lw(v),T=new ko({width:x||1,height:S||1});for(const M in n){const O=n[M],j=h[M].paddedRect;ko.copy(O.data,T,{x:0,y:0},{x:j.x+Ji,y:j.y+Ji},O.data)}for(const M in s){const O=s[M],j=m[M].paddedRect,K=j.x+Ji,Y=j.y+Ji,ee=O.data.width,se=O.data.height;ko.copy(O.data,T,{x:0,y:0},{x:K,y:Y},O.data),ko.copy(O.data,T,{x:0,y:se-1},{x:K,y:Y-1},{width:ee,height:1}),ko.copy(O.data,T,{x:0,y:0},{x:K,y:Y+se},{width:ee,height:1}),ko.copy(O.data,T,{x:ee-1,y:0},{x:K-1,y:Y},{width:1,height:se}),ko.copy(O.data,T,{x:0,y:0},{x:K+ee,y:Y},{width:1,height:se})}this.image=T,this.iconPositions=h,this.patternPositions=m}addImages(n,s,h){for(const m in n){const v=n[m],x={x:0,y:0,w:v.data.width+2*Ji,h:v.data.height+2*Ji};h.push(x),s[m]=new a0(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[m,v]=n.tl;h.update(s.data,void 0,{x:m,y:v})}}var Qs;Pt("ImagePosition",a0),Pt("ImageAtlas",$w),c.ai=void 0,(Qs=c.ai||(c.ai={}))[Qs.none=0]="none",Qs[Qs.horizontal=1]="horizontal",Qs[Qs.vertical=2]="vertical",Qs[Qs.horizontalOnly=3]="horizontalOnly";const bh=-17;class wh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new wh;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new wh;return s.imageName=n,s}}class su{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new su;for(let m=0;m<n.sections.length;m++){const v=n.sections[m];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const m=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;s+=m&&Hf(m)&&!xh[n[h+1]]||v&&Hf(v)&&!xh[n[h-1]]||!xh[n[h]]?n[h]:xh[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&dm[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&dm[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new su;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(wh.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let m=0;m<n.text.length;++m)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void We("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(wh.forImage(s)),this.sectionIndex.push(this.sections.length-1)):We("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function um(a,n,s,h,m,v,x,S,T,M,O,j,K,Y,ee,se){const me=su.fromFeature(a,m);let ve;j===c.ai.vertical&&me.verticalizePunctuation();const{processBidirectionalText:Te,processStyledBidirectionalText:be}=Ki;if(Te&&me.sections.length===1){ve=[];const Xe=Te(me.toString(),s0(me,M,v,n,h,Y,ee));for(const wt of Xe){const Ot=new su;Ot.text=wt,Ot.sections=me.sections;for(let xt=0;xt<wt.length;xt++)Ot.sectionIndex.push(0);ve.push(Ot)}}else if(be){ve=[];const Xe=be(me.text,me.sectionIndex,s0(me,M,v,n,h,Y,ee));for(const wt of Xe){const Ot=new su;Ot.text=wt[0],Ot.sectionIndex=wt[1],Ot.sections=me.sections,ve.push(Ot)}}else ve=function(Xe,wt){const Ot=[],xt=Xe.text;let mt=0;for(const lt of wt)Ot.push(Xe.substring(mt,lt)),mt=lt;return mt<xt.length&&Ot.push(Xe.substring(mt,xt.length)),Ot}(me,s0(me,M,v,n,h,Y,ee));const Pe=[],je={positionedLines:Pe,text:me.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:j,iconsInText:!1,verticalizable:!1};return function(Xe,wt,Ot,xt,mt,lt,Et,dt,tt,Gt,jt,hr){let tn=0,on=bh,Vn=0,mo=0;const Ai=dt==="right"?1:dt==="left"?0:.5;let Dn=0;for(const Un of mt){Un.trim();const Hn=Un.getMaxScale(),_i=(Hn-1)*jn,Li={positionedGlyphs:[],lineOffset:0};Xe.positionedLines[Dn]=Li;const xi=Li.positionedGlyphs;let Yi=0;if(!Un.length()){on+=lt,++Dn;continue}for(let Wn=0;Wn<Un.length();Wn++){const vr=Un.getSection(Wn),bi=Un.getSectionIndex(Wn),di=Un.getCharCode(Wn);let Gn=0,Ko=null,wa=null,Sa=null,_s=jn;const Xo=!(tt===c.ai.horizontal||!jt&&!Zd(di)||jt&&(dm[di]||(ii=di,bt.Arabic(ii)||bt["Arabic Supplement"](ii)||bt["Arabic Extended-A"](ii)||bt["Arabic Presentation Forms-A"](ii)||bt["Arabic Presentation Forms-B"](ii))));if(vr.imageName){const To=xt[vr.imageName];if(!To)continue;Sa=vr.imageName,Xe.iconsInText=Xe.iconsInText||!0,wa=To.paddedRect;const eo=To.displaySize;vr.scale=vr.scale*jn/hr,Ko={width:eo[0],height:eo[1],left:Ji,top:-Rw,advance:Xo?eo[1]:eo[0]},Gn=_i+(jn-eo[1]*vr.scale),_s=Ko.advance;const xs=Xo?eo[0]*vr.scale-jn*Hn:eo[1]*vr.scale-jn*Hn;xs>0&&xs>Yi&&(Yi=xs)}else{const To=Ot[vr.fontStack],eo=To&&To[di];if(eo&&eo.rect)wa=eo.rect,Ko=eo.metrics;else{const xs=wt[vr.fontStack],Th=xs&&xs[di];if(!Th)continue;Ko=Th.metrics}Gn=(Hn-vr.scale)*jn}Xo?(Xe.verticalizable=!0,xi.push({glyph:di,imageName:Sa,x:tn,y:on+Gn,vertical:Xo,scale:vr.scale,fontStack:vr.fontStack,sectionIndex:bi,metrics:Ko,rect:wa}),tn+=_s*vr.scale+Gt):(xi.push({glyph:di,imageName:Sa,x:tn,y:on+Gn,vertical:Xo,scale:vr.scale,fontStack:vr.fontStack,sectionIndex:bi,metrics:Ko,rect:wa}),tn+=Ko.advance*vr.scale+Gt)}xi.length!==0&&(Vn=Math.max(tn-Gt,Vn),AA(xi,0,xi.length-1,Ai,Yi)),tn=0;const Qi=lt*Hn+Yi;Li.lineOffset=Math.max(Yi,_i),on+=Qi,mo=Math.max(Qi,mo),++Dn}var ii;const ui=on-bh,{horizontalAlign:Di,verticalAlign:Ri}=l0(Et);(function(Un,Hn,_i,Li,xi,Yi,Qi,Wn,vr){const bi=(Hn-_i)*xi;let di=0;di=Yi!==Qi?-Wn*Li-bh:(-Li*vr+.5)*Qi;for(const Gn of Un)for(const Ko of Gn.positionedGlyphs)Ko.x+=bi,Ko.y+=di})(Xe.positionedLines,Ai,Di,Ri,Vn,mo,lt,ui,mt.length),Xe.top+=-Ri*ui,Xe.bottom=Xe.top+ui,Xe.left+=-Di*Vn,Xe.right=Xe.left+Vn}(je,n,s,h,ve,x,S,T,j,M,K,se),!function(Xe){for(const wt of Xe)if(wt.positionedGlyphs.length!==0)return!1;return!0}(Pe)&&je}const dm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},zA={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Bw(a,n,s,h,m,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*jn/v+m:0}{const x=s[n.fontStack],S=x&&x[a];return S?S.metrics.advance*n.scale+m:0}}function Ow(a,n,s,h){const m=Math.pow(a-n,2);return h?a<n?m/2:2*m:m+Math.abs(s)*s}function MA(a,n,s){let h=0;return a===10&&(h-=1e4),s&&(h+=150),a!==40&&a!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function Fw(a,n,s,h,m,v){let x=null,S=Ow(n,s,m,v);for(const T of h){const M=Ow(n-T.x,s,m,v)+T.badness;M<=S&&(x=T,S=M)}return{index:a,x:n,priorBreak:x,badness:S}}function Nw(a){return a?Nw(a.priorBreak).concat(a.index):[]}function s0(a,n,s,h,m,v,x){if(v!=="point")return[];if(!a)return[];const S=[],T=function(K,Y,ee,se,me,ve){let Te=0;for(let be=0;be<K.length();be++){const Pe=K.getSection(be);Te+=Bw(K.getCharCode(be),Pe,se,me,Y,ve)}return Te/Math.max(1,Math.ceil(Te/ee))}(a,n,s,h,m,x),M=a.text.indexOf("​")>=0;let O=0;for(let K=0;K<a.length();K++){const Y=a.getSection(K),ee=a.getCharCode(K);if(dm[ee]||(O+=Bw(ee,Y,h,m,n,x)),K<a.length()-1){const se=!((j=ee)<11904||!(bt["Bopomofo Extended"](j)||bt.Bopomofo(j)||bt["CJK Compatibility Forms"](j)||bt["CJK Compatibility Ideographs"](j)||bt["CJK Compatibility"](j)||bt["CJK Radicals Supplement"](j)||bt["CJK Strokes"](j)||bt["CJK Symbols and Punctuation"](j)||bt["CJK Unified Ideographs Extension A"](j)||bt["CJK Unified Ideographs"](j)||bt["Enclosed CJK Letters and Months"](j)||bt["Halfwidth and Fullwidth Forms"](j)||bt.Hiragana(j)||bt["Ideographic Description Characters"](j)||bt["Kangxi Radicals"](j)||bt["Katakana Phonetic Extensions"](j)||bt.Katakana(j)||bt["Vertical Forms"](j)||bt["Yi Radicals"](j)||bt["Yi Syllables"](j)));(zA[ee]||se||Y.imageName)&&S.push(Fw(K+1,O,T,S,MA(ee,a.getCharCode(K+1),se&&M),!1))}}var j;return Nw(Fw(a.length(),O,T,S,0,!0))}function l0(a){let n=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function AA(a,n,s,h,m){if(!h&&!m)return;const v=a[s],x=(a[s].x+v.metrics.advance*v.scale)*h;for(let S=n;S<=s;S++)a[S].x-=x,a[S].y+=m}function DA(a,n,s){const{horizontalAlign:h,verticalAlign:m}=l0(s),v=n[0]-a.displaySize[0]*h,x=n[1]-a.displaySize[1]*m;return{image:a,top:x,bottom:x+a.displaySize[1],left:v,right:v+a.displaySize[0]}}function jw(a,n,s,h,m,v){const x=a.image;let S;if(x.content){const me=x.content,ve=x.pixelRatio||1;S=[me[0]/ve,me[1]/ve,x.displaySize[0]-me[2]/ve,x.displaySize[1]-me[3]/ve]}const T=n.left*v,M=n.right*v;let O,j,K,Y;s==="width"||s==="both"?(Y=m[0]+T-h[3],j=m[0]+M+h[1]):(Y=m[0]+(T+M-x.displaySize[0])/2,j=Y+x.displaySize[0]);const ee=n.top*v,se=n.bottom*v;return s==="height"||s==="both"?(O=m[1]+ee-h[0],K=m[1]+se+h[2]):(O=m[1]+(ee+se-x.displaySize[1])/2,K=O+x.displaySize[1]),{image:x,top:O,right:j,bottom:K,left:Y,collisionPadding:S}}const Sh=255,Wa=128,el=Sh*Wa;function Vw(a,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Qr(a+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:m}=s;let v=0;for(;v<h.length&&h[v]<=a;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<a+1;)x++;x=Math.min(h.length-1,x);const S=h[v],T=h[x];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:T,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:T,minSize:s.evaluate(new Qr(S)),maxSize:s.evaluate(new Qr(T)),interpolationType:m}}}function c0(a,n,s){let h="never";const m=a.get(n);return m?h=m:a.get(s)&&(h="always"),h}const RA=Ys.VectorTileFeature.types,LA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function hm(a,n,s,h,m,v,x,S,T,M,O,j,K){const Y=S?Math.min(el,Math.round(S[0])):0,ee=S?Math.min(el,Math.round(S[1])):0;a.emplaceBack(n,s,Math.round(32*h),Math.round(32*m),v,x,(Y<<1)+(T?1:0),ee,16*M,16*O,256*j,256*K)}function u0(a,n,s){a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s)}function $A(a){for(const n of a.sections)if($v(n.text))return!0;return!1}class d0{constructor(n){this.layoutVertexArray=new pr,this.indexArray=new ri,this.programConfigurations=n,this.segments=new en,this.dynamicLayoutVertexArray=new or,this.opacityVertexArray=new mr,this.hasVisibleVertices=!1,this.placedSymbolArray=new we}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,m){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,pA.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,fA.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,LA,!0),this.opacityVertexBuffer.itemSize=1),(h||m)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Pt("SymbolBuffers",d0);class h0{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new en,this.collisionVertexArray=new Zr}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,mA.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Pt("CollisionBuffers",h0);class lu{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Uv([]),this.placementViewportMatrix=Uv([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Vw(this.zoom,s["text-size"]),this.iconSizeData=Vw(this.zoom,s["icon-size"]);const h=this.layers[0].layout,m=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=c0(h,"text-overlap","text-allow-overlap")!=="never"||c0(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>c.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new d0(new ba(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new d0(new ba(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Ie,this.lineVertexArray=new Ve,this.symbolInstances=new ge,this.textAnchorOffsets=new Ze}calculateGlyphDependencies(n,s,h,m,v){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||m)&&v){const S=xh[n.charAt(x)];S&&(s[S.charCodeAt(0)]=!0)}}populate(n,s,h){const m=this.layers[0],v=m.layout,x=v.get("text-font"),S=v.get("text-field"),T=v.get("icon-image"),M=(S.value.kind!=="constant"||S.value.value instanceof si&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),O=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,j=v.get("symbol-sort-key");if(this.features=[],!M&&!O)return;const K=s.iconDependencies,Y=s.glyphDependencies,ee=s.availableImages,se=new Qr(this.zoom);for(const{feature:me,id:ve,index:Te,sourceLayerIndex:be}of n){const Pe=m._featureFilter.needGeometry,je=Xl(me,Pe);if(!m._featureFilter.filter(se,je,h))continue;let Xe,wt;if(Pe||(je.geometry=Kl(me)),M){const xt=m.getValueAndResolveTokens("text-field",je,h,ee),mt=si.factory(xt);$A(mt)&&(this.hasRTLText=!0),(!this.hasRTLText||eh()==="unavailable"||this.hasRTLText&&Ki.isParsed())&&(Xe=yA(mt,m,je))}if(O){const xt=m.getValueAndResolveTokens("icon-image",je,h,ee);wt=xt instanceof ti?xt:ti.fromString(xt)}if(!Xe&&!wt)continue;const Ot=this.sortFeaturesByKey?j.evaluate(je,{},h):void 0;if(this.features.push({id:ve,text:Xe,icon:wt,index:Te,sourceLayerIndex:be,geometry:je.geometry,properties:me.properties,type:RA[me.type],sortKey:Ot}),wt&&(K[wt.name]=!0),Xe){const xt=x.evaluate(je,{},h).join(","),mt=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ai.vertical)>=0;for(const lt of Xe.sections)if(lt.image)K[lt.image.name]=!0;else{const Et=Gd(Xe.toString()),dt=lt.fontStack||xt,tt=Y[dt]=Y[dt]||{};this.calculateGlyphDependencies(lt.text,tt,mt,this.allowVerticalPlacement,Et)}}}v.get("symbol-placement")==="line"&&(this.features=function(me){const ve={},Te={},be=[];let Pe=0;function je(xt){be.push(me[xt]),Pe++}function Xe(xt,mt,lt){const Et=Te[xt];return delete Te[xt],Te[mt]=Et,be[Et].geometry[0].pop(),be[Et].geometry[0]=be[Et].geometry[0].concat(lt[0]),Et}function wt(xt,mt,lt){const Et=ve[mt];return delete ve[mt],ve[xt]=Et,be[Et].geometry[0].shift(),be[Et].geometry[0]=lt[0].concat(be[Et].geometry[0]),Et}function Ot(xt,mt,lt){const Et=lt?mt[0][mt[0].length-1]:mt[0][0];return`${xt}:${Et.x}:${Et.y}`}for(let xt=0;xt<me.length;xt++){const mt=me[xt],lt=mt.geometry,Et=mt.text?mt.text.toString():null;if(!Et){je(xt);continue}const dt=Ot(Et,lt),tt=Ot(Et,lt,!0);if(dt in Te&&tt in ve&&Te[dt]!==ve[tt]){const Gt=wt(dt,tt,lt),jt=Xe(dt,tt,be[Gt].geometry);delete ve[dt],delete Te[tt],Te[Ot(Et,be[jt].geometry,!0)]=jt,be[Gt].geometry=null}else dt in Te?Xe(dt,tt,lt):tt in ve?wt(dt,tt,lt):(je(xt),ve[dt]=Pe-1,Te[tt]=Pe-1)}return be.filter(xt=>xt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((me,ve)=>me.sortKey-ve.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let m=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const x={};for(let S=n.segment+1;S<s.length;S++)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:m},S<s.length-1&&(m+=s[S+1].dist(s[S]));for(let S=n.segment||0;S>=0;S--)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){const T=x[S];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,m,v,x,S,T,M,O,j,K){const Y=n.indexArray,ee=n.layoutVertexArray,se=n.segments.prepareSegment(4*s.length,ee,Y,this.canOverlap?x.sortKey:void 0),me=this.glyphOffsetArray.length,ve=se.vertexLength,Te=this.allowVerticalPlacement&&S===c.ai.vertical?Math.PI/2:0,be=x.text&&x.text.sections;for(let Pe=0;Pe<s.length;Pe++){const{tl:je,tr:Xe,bl:wt,br:Ot,tex:xt,pixelOffsetTL:mt,pixelOffsetBR:lt,minFontScaleX:Et,minFontScaleY:dt,glyphOffset:tt,isSDF:Gt,sectionIndex:jt}=s[Pe],hr=se.vertexLength,tn=tt[1];hm(ee,T.x,T.y,je.x,tn+je.y,xt.x,xt.y,h,Gt,mt.x,mt.y,Et,dt),hm(ee,T.x,T.y,Xe.x,tn+Xe.y,xt.x+xt.w,xt.y,h,Gt,lt.x,mt.y,Et,dt),hm(ee,T.x,T.y,wt.x,tn+wt.y,xt.x,xt.y+xt.h,h,Gt,mt.x,lt.y,Et,dt),hm(ee,T.x,T.y,Ot.x,tn+Ot.y,xt.x+xt.w,xt.y+xt.h,h,Gt,lt.x,lt.y,Et,dt),u0(n.dynamicLayoutVertexArray,T,Te),Y.emplaceBack(hr,hr+1,hr+2),Y.emplaceBack(hr+1,hr+2,hr+3),se.vertexLength+=4,se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(tt[0]),Pe!==s.length-1&&jt===s[Pe+1].sectionIndex||n.programConfigurations.populatePaintArrays(ee.length,x,x.index,{},K,be&&be[jt])}n.placedSymbolArray.emplaceBack(T.x,T.y,me,this.glyphOffsetArray.length-me,ve,M,O,T.segment,h?h[0]:0,h?h[1]:0,m[0],m[1],S,0,!1,0,j)}_addCollisionDebugVertex(n,s,h,m,v,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,m,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,m,v,x,S){const T=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),M=T.vertexLength,O=v.layoutVertexArray,j=v.collisionVertexArray,K=S.anchorX,Y=S.anchorY;this._addCollisionDebugVertex(O,j,x,K,Y,new P(n,s)),this._addCollisionDebugVertex(O,j,x,K,Y,new P(h,s)),this._addCollisionDebugVertex(O,j,x,K,Y,new P(h,m)),this._addCollisionDebugVertex(O,j,x,K,Y,new P(n,m)),T.vertexLength+=4;const ee=v.indexArray;ee.emplaceBack(M,M+1),ee.emplaceBack(M+1,M+2),ee.emplaceBack(M+2,M+3),ee.emplaceBack(M+3,M),T.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,m){for(let v=n;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new h0(yn,Iw.members,Fn),this.iconCollisionBox=new h0(yn,Iw.members,Fn);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,m,v,x,S,T,M){const O={};for(let j=s;j<h;j++){const K=n.get(j);O.textBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},O.textFeatureIndex=K.featureIndex;break}for(let j=m;j<v;j++){const K=n.get(j);O.verticalTextBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},O.verticalTextFeatureIndex=K.featureIndex;break}for(let j=x;j<S;j++){const K=n.get(j);O.iconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},O.iconFeatureIndex=K.featureIndex;break}for(let j=T;j<M;j++){const K=n.get(j);O.verticalIconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},O.verticalIconFeatureIndex=K.featureIndex;break}return O}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),m=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<m;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),m=[],v=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const T=this.symbolInstances.get(S);m.push(0|Math.round(s*T.anchorX+h*T.anchorY)),v.push(T.featureIndex)}return x.sort((S,T)=>m[S]-m[T]||v[T]-v[S]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((m,v,x)=>{m>=0&&x.indexOf(m)===v&&this.addIndicesForPlacedSymbol(this.text,m)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Uw,Hw;Pt("SymbolBucket",lu,{omit:["layers","collisionBoxArray","features","compareText"]}),lu.MAX_GLYPHS=65535,lu.addDynamicAttributes=u0;var p0={get paint(){return Hw=Hw||new Cn({"icon-opacity":new Yt(Ae.paint_symbol["icon-opacity"]),"icon-color":new Yt(Ae.paint_symbol["icon-color"]),"icon-halo-color":new Yt(Ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yt(Ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yt(Ae.paint_symbol["icon-halo-blur"]),"icon-translate":new Vt(Ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new Vt(Ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new Yt(Ae.paint_symbol["text-opacity"]),"text-color":new Yt(Ae.paint_symbol["text-color"],{runtimeType:ar,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new Yt(Ae.paint_symbol["text-halo-color"]),"text-halo-width":new Yt(Ae.paint_symbol["text-halo-width"]),"text-halo-blur":new Yt(Ae.paint_symbol["text-halo-blur"]),"text-translate":new Vt(Ae.paint_symbol["text-translate"]),"text-translate-anchor":new Vt(Ae.paint_symbol["text-translate-anchor"])})},get layout(){return Uw=Uw||new Cn({"symbol-placement":new Vt(Ae.layout_symbol["symbol-placement"]),"symbol-spacing":new Vt(Ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Vt(Ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Yt(Ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Vt(Ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Vt(Ae.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Vt(Ae.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Vt(Ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new Vt(Ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Vt(Ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yt(Ae.layout_symbol["icon-size"]),"icon-text-fit":new Vt(Ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Vt(Ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yt(Ae.layout_symbol["icon-image"]),"icon-rotate":new Yt(Ae.layout_symbol["icon-rotate"]),"icon-padding":new Yt(Ae.layout_symbol["icon-padding"]),"icon-keep-upright":new Vt(Ae.layout_symbol["icon-keep-upright"]),"icon-offset":new Yt(Ae.layout_symbol["icon-offset"]),"icon-anchor":new Yt(Ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Vt(Ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Vt(Ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Vt(Ae.layout_symbol["text-rotation-alignment"]),"text-field":new Yt(Ae.layout_symbol["text-field"]),"text-font":new Yt(Ae.layout_symbol["text-font"]),"text-size":new Yt(Ae.layout_symbol["text-size"]),"text-max-width":new Yt(Ae.layout_symbol["text-max-width"]),"text-line-height":new Vt(Ae.layout_symbol["text-line-height"]),"text-letter-spacing":new Yt(Ae.layout_symbol["text-letter-spacing"]),"text-justify":new Yt(Ae.layout_symbol["text-justify"]),"text-radial-offset":new Yt(Ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Vt(Ae.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Yt(Ae.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Yt(Ae.layout_symbol["text-anchor"]),"text-max-angle":new Vt(Ae.layout_symbol["text-max-angle"]),"text-writing-mode":new Vt(Ae.layout_symbol["text-writing-mode"]),"text-rotate":new Yt(Ae.layout_symbol["text-rotate"]),"text-padding":new Vt(Ae.layout_symbol["text-padding"]),"text-keep-upright":new Vt(Ae.layout_symbol["text-keep-upright"]),"text-transform":new Yt(Ae.layout_symbol["text-transform"]),"text-offset":new Yt(Ae.layout_symbol["text-offset"]),"text-allow-overlap":new Vt(Ae.layout_symbol["text-allow-overlap"]),"text-overlap":new Vt(Ae.layout_symbol["text-overlap"]),"text-ignore-placement":new Vt(Ae.layout_symbol["text-ignore-placement"]),"text-optional":new Vt(Ae.layout_symbol["text-optional"])})}};class Ww{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:xr,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pt("FormatSectionOverride",Ww,{omit:["defaultValue"]});class pm extends po{constructor(n){super(n,p0)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const m=[];for(const v of h)m.indexOf(v)<0&&m.push(v);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,m){const v=this.layout.get(n).evaluate(s,{},h,m),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Vc(x.value)||!v?v:function(S,T){return T.replace(/{([^{}]+)}/g,(M,O)=>S&&O in S?String(S[O]):"")}(s.properties,v)}createBucket(n){return new lu(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of p0.paint.overridableProperties){if(!pm.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new Ww(s),m=new Nd(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new jd("source",m):new Hc("composite",m,s.value.zoomStops),this.paint._values[n]=new yi(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&pm.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),m=p0.paint.properties[s];let v=!1;const x=S=>{for(const T of S)if(m.overrides&&m.overrides.hasOverride(T))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof si)x(h.value.value.sections);else if(h.value.kind==="source"){const S=M=>{v||(M instanceof as&&an(M.value)===de?x(M.value.sections):M instanceof jc?x(M.sections):M.eachChild(S))},T=h.value;T._styleExpression&&S(T._styleExpression.expression)}return v}}let Gw;var BA={get paint(){return Gw=Gw||new Cn({"background-color":new Vt(Ae.paint_background["background-color"]),"background-pattern":new rh(Ae.paint_background["background-pattern"]),"background-opacity":new Vt(Ae.paint_background["background-opacity"])})}};class OA extends po{constructor(n){super(n,BA)}}let qw;var FA={get paint(){return qw=qw||new Cn({"raster-opacity":new Vt(Ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new Vt(Ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Vt(Ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Vt(Ae.paint_raster["raster-brightness-max"]),"raster-saturation":new Vt(Ae.paint_raster["raster-saturation"]),"raster-contrast":new Vt(Ae.paint_raster["raster-contrast"]),"raster-resampling":new Vt(Ae.paint_raster["raster-resampling"]),"raster-fade-duration":new Vt(Ae.paint_raster["raster-fade-duration"])})}};class NA extends po{constructor(n){super(n,FA)}}class jA extends po{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class VA{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const f0=63710088e-1;class tl{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new tl(Z(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,m=n.lat*s,v=Math.sin(h)*Math.sin(m)+Math.cos(h)*Math.cos(m)*Math.cos((n.lng-this.lng)*s);return f0*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof tl)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new tl(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new tl(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Zw=2*Math.PI*f0;function Kw(a){return Zw*Math.cos(a*Math.PI/180)}function Xw(a){return(180+a)/360}function Jw(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function Yw(a,n){return a/Kw(n)}function Qw(a){return 360*a-180}function m0(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class fm{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=tl.convert(n);return new fm(Xw(h.lng),Jw(h.lat),Yw(s,h.lat))}toLngLat(){return new tl(Qw(this.x),m0(this.y))}toAltitude(){return this.z*Kw(m0(this.y))}meterInMercatorCoordinateUnits(){return 1/Zw*(n=m0(this.y),1/Math.cos(n*Math.PI/180));var n}}function eS(a,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[a*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class g0{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=Ch(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const m=(x=this.y,S=this.z,T=eS(256*(v=this.x),256*(x=Math.pow(2,S)-x-1),S),M=eS(256*(v+1),256*(x+1),S),T[0]+","+T[1]+","+M[0]+","+M[1]);var v,x,S,T,M;const O=function(j,K,Y){let ee,se="";for(let me=j;me>0;me--)ee=1<<me-1,se+=(K&ee?1:0)+(Y&ee?2:0);return se}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,O).replace(/{bbox-epsg-3857}/g,m)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new P((n.x*s-this.x)*An,(n.y*s-this.y)*An)}toString(){return`${this.z}/${this.x}/${this.y}`}}class tS{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Ch(n,s.z,s.z,s.x,s.y)}}class Io{constructor(n,s,h,m,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new g0(h,+m,+v),this.key=Ch(s,n,h,m,v)}clone(){return new Io(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new Io(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Io(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?Ch(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Ch(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new Io(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,m=2*this.canonical.y;return[new Io(s,this.wrap,s,h,m),new Io(s,this.wrap,s,h+1,m),new Io(s,this.wrap,s,h,m+1),new Io(s,this.wrap,s,h+1,m+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Io(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Io(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new tS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new fm(n.x-this.wrap,n.y))}}function Ch(a,n,s,h,m){(a*=2)<0&&(a=-1*a-1);const v=1<<s;return(v*v*a+v*m+h).toString(36)+s.toString(36)+n.toString(36)}Pt("CanonicalTileID",g0),Pt("OverscaledTileID",Io,{omit:["posMatrix"]});class rS{constructor(n,s,h,m=1,v=1,x=1,S=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void We(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const T=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=v,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let M=0;M<T;M++)this.data[this._idx(-1,M)]=this.data[this._idx(0,M)],this.data[this._idx(T,M)]=this.data[this._idx(T-1,M)],this.data[this._idx(M,-1)]=this.data[this._idx(M,0)],this.data[this._idx(M,T)]=this.data[this._idx(M,T-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(T,-1)]=this.data[this._idx(T-1,0)],this.data[this._idx(-1,T)]=this.data[this._idx(0,T-1)],this.data[this._idx(T,T)]=this.data[this._idx(T-1,T-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let M=0;M<T;M++)for(let O=0;O<T;O++){const j=this.get(M,O);j>this.max&&(this.max=j),j<this.min&&(this.min=j)}}get(n,s){const h=new Uint8Array(this.data.buffer),m=4*this._idx(n,s);return this.unpack(h[m],h[m+1],h[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new ko({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let m=s*this.dim,v=s*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(s){case-1:m=v-1;break;case 1:v=m+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const T=-s*this.dim,M=-h*this.dim;for(let O=x;O<S;O++)for(let j=m;j<v;j++)this.data[this._idx(j,O)]=n.data[this._idx(j+T,O+M)]}}Pt("DEMData",rS);class nS{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class iS{constructor(n,s,h,m,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=m,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class oS{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new qs(An,16,0),this.grid3D=new qs(An,16,0),this.featureIndexArray=new Je,this.promoteId=s}insert(n,s,h,m,v,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,m,v);const T=x?this.grid3D:this.grid;for(let M=0;M<s.length;M++){const O=s[M],j=[1/0,1/0,-1/0,-1/0];for(let K=0;K<O.length;K++){const Y=O[K];j[0]=Math.min(j[0],Y.x),j[1]=Math.min(j[1],Y.y),j[2]=Math.max(j[2],Y.x),j[3]=Math.max(j[3],Y.y)}j[0]<An&&j[1]<An&&j[2]>=0&&j[3]>=0&&T.insert(S,j[0],j[1],j[2],j[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ys.VectorTile(new i0(this.rawTileData)).layers,this.sourceLayerCoder=new nS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,m){this.loadVTLayers();const v=n.params||{},x=An/n.tileSize/n.scale,S=Ud(v.filter),T=n.queryGeometry,M=n.queryPadding*x,O=sS(T),j=this.grid.query(O.minX-M,O.minY-M,O.maxX+M,O.maxY+M),K=sS(n.cameraQueryGeometry),Y=this.grid3D.query(K.minX-M,K.minY-M,K.maxX+M,K.maxY+M,(me,ve,Te,be)=>function(Pe,je,Xe,wt,Ot){for(const mt of Pe)if(je<=mt.x&&Xe<=mt.y&&wt>=mt.x&&Ot>=mt.y)return!0;const xt=[new P(je,Xe),new P(je,Ot),new P(wt,Ot),new P(wt,Xe)];if(Pe.length>2){for(const mt of xt)if(tu(Pe,mt))return!0}for(let mt=0;mt<Pe.length-1;mt++)if(xM(Pe[mt],Pe[mt+1],xt))return!0;return!1}(n.cameraQueryGeometry,me-M,ve-M,Te+M,be+M));for(const me of Y)j.push(me);j.sort(UA);const ee={};let se;for(let me=0;me<j.length;me++){const ve=j[me];if(ve===se)continue;se=ve;const Te=this.featureIndexArray.get(ve);let be=null;this.loadMatchingFeature(ee,Te.bucketIndex,Te.sourceLayerIndex,Te.featureIndex,S,v.layers,v.availableImages,s,h,m,(Pe,je,Xe)=>(be||(be=Kl(Pe)),je.queryIntersectsFeature(T,Pe,Xe,be,this.z,n.transform,x,n.pixelPosMatrix)))}return ee}loadMatchingFeature(n,s,h,m,v,x,S,T,M,O,j){const K=this.bucketLayerIDs[s];if(x&&!function(me,ve){for(let Te=0;Te<me.length;Te++)if(ve.indexOf(me[Te])>=0)return!0;return!1}(x,K))return;const Y=this.sourceLayerCoder.decode(h),ee=this.vtLayers[Y].feature(m);if(v.needGeometry){const me=Xl(ee,!0);if(!v.filter(new Qr(this.tileID.overscaledZ),me,this.tileID.canonical))return}else if(!v.filter(new Qr(this.tileID.overscaledZ),ee))return;const se=this.getId(ee,Y);for(let me=0;me<K.length;me++){const ve=K[me];if(x&&x.indexOf(ve)<0)continue;const Te=T[ve];if(!Te)continue;let be={};se&&O&&(be=O.getState(Te.sourceLayer||"_geojsonTileLayer",se));const Pe=ue({},M[ve]);Pe.paint=aS(Pe.paint,Te.paint,ee,be,S),Pe.layout=aS(Pe.layout,Te.layout,ee,be,S);const je=!j||j(ee,Te,be);if(!je)continue;const Xe=new iS(ee,this.z,this.x,this.y,se);Xe.layer=Pe;let wt=n[ve];wt===void 0&&(wt=n[ve]=[]),wt.push({featureIndex:m,feature:Xe,intersectionZ:je})}}lookupSymbolFeatures(n,s,h,m,v,x,S,T){const M={};this.loadVTLayers();const O=Ud(v);for(const j of n)this.loadMatchingFeature(M,h,m,j,O,x,S,T,s);return M}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function aS(a,n,s,h,m){return ye(a,(v,x)=>{const S=n instanceof Qc?n.get(x):null;return S&&S.evaluate?S.evaluate(s,h,m):S})}function sS(a){let n=1/0,s=1/0,h=-1/0,m=-1/0;for(const v of a)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),m=Math.max(m,v.y);return{minX:n,minY:s,maxX:h,maxY:m}}function UA(a,n){return n-a}function lS(a,n,s,h,m){const v=[];for(let x=0;x<a.length;x++){const S=a[x];let T;for(let M=0;M<S.length-1;M++){let O=S[M],j=S[M+1];O.x<n&&j.x<n||(O.x<n?O=new P(n,O.y+(n-O.x)/(j.x-O.x)*(j.y-O.y))._round():j.x<n&&(j=new P(n,O.y+(n-O.x)/(j.x-O.x)*(j.y-O.y))._round()),O.y<s&&j.y<s||(O.y<s?O=new P(O.x+(s-O.y)/(j.y-O.y)*(j.x-O.x),s)._round():j.y<s&&(j=new P(O.x+(s-O.y)/(j.y-O.y)*(j.x-O.x),s)._round()),O.x>=h&&j.x>=h||(O.x>=h?O=new P(h,O.y+(h-O.x)/(j.x-O.x)*(j.y-O.y))._round():j.x>=h&&(j=new P(h,O.y+(h-O.x)/(j.x-O.x)*(j.y-O.y))._round()),O.y>=m&&j.y>=m||(O.y>=m?O=new P(O.x+(m-O.y)/(j.y-O.y)*(j.x-O.x),m)._round():j.y>=m&&(j=new P(O.x+(m-O.y)/(j.y-O.y)*(j.x-O.x),m)._round()),T&&O.equals(T[T.length-1])||(T=[O],v.push(T)),T.push(j)))))}}return v}Pt("FeatureIndex",oS,{omit:["rawTileData","sourceLayerCoder"]});class rl extends P{constructor(n,s,h,m){super(n,s),this.angle=h,m!==void 0&&(this.segment=m)}clone(){return new rl(this.x,this.y,this.angle,this.segment)}}function cS(a,n,s,h,m){if(n.segment===void 0||s===0)return!0;let v=n,x=n.segment+1,S=0;for(;S>-s/2;){if(x--,x<0)return!1;S-=a[x].dist(v),v=a[x]}S+=a[x].dist(a[x+1]),x++;const T=[];let M=0;for(;S<s/2;){const O=a[x],j=a[x+1];if(!j)return!1;let K=a[x-1].angleTo(O)-O.angleTo(j);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:S,angleDelta:K}),M+=K;S-T[0].distance>h;)M-=T.shift().angleDelta;if(M>m)return!1;x++,S+=O.dist(j)}return!0}function uS(a){let n=0;for(let s=0;s<a.length-1;s++)n+=a[s].dist(a[s+1]);return n}function dS(a,n,s){return a?.6*n*s:0}function hS(a,n){return Math.max(a?a.right-a.left:0,n?n.right-n.left:0)}function HA(a,n,s,h,m,v){const x=dS(s,m,v),S=hS(s,h)*v;let T=0;const M=uS(a)/2;for(let O=0;O<a.length-1;O++){const j=a[O],K=a[O+1],Y=j.dist(K);if(T+Y>M){const ee=(M-T)/Y,se=Gi.number(j.x,K.x,ee),me=Gi.number(j.y,K.y,ee),ve=new rl(se,me,K.angleTo(j),O);return ve._round(),!x||cS(a,ve,S,x,n)?ve:void 0}T+=Y}}function WA(a,n,s,h,m,v,x,S,T){const M=dS(h,v,x),O=hS(h,m),j=O*x,K=a[0].x===0||a[0].x===T||a[0].y===0||a[0].y===T;return n-j<n/4&&(n=j+n/4),pS(a,K?n/2*S%n:(O/2+2*v)*x*S%n,n,M,s,j,K,!1,T)}function pS(a,n,s,h,m,v,x,S,T){const M=v/2,O=uS(a);let j=0,K=n-s,Y=[];for(let ee=0;ee<a.length-1;ee++){const se=a[ee],me=a[ee+1],ve=se.dist(me),Te=me.angleTo(se);for(;K+s<j+ve;){K+=s;const be=(K-j)/ve,Pe=Gi.number(se.x,me.x,be),je=Gi.number(se.y,me.y,be);if(Pe>=0&&Pe<T&&je>=0&&je<T&&K-M>=0&&K+M<=O){const Xe=new rl(Pe,je,Te,ee);Xe._round(),h&&!cS(a,Xe,v,h,m)||Y.push(Xe)}}j+=ve}return S||Y.length||x||(Y=pS(a,j/2,s,h,m,v,x,!0,T)),Y}Pt("Anchor",rl);const cu=Ji;function fS(a,n,s,h){const m=[],v=a.image,x=v.pixelRatio,S=v.paddedRect.w-2*cu,T=v.paddedRect.h-2*cu,M=a.right-a.left,O=a.bottom-a.top,j=v.stretchX||[[0,S]],K=v.stretchY||[[0,T]],Y=(lt,Et)=>lt+Et[1]-Et[0],ee=j.reduce(Y,0),se=K.reduce(Y,0),me=S-ee,ve=T-se;let Te=0,be=ee,Pe=0,je=se,Xe=0,wt=me,Ot=0,xt=ve;if(v.content&&h){const lt=v.content;Te=mm(j,0,lt[0]),Pe=mm(K,0,lt[1]),be=mm(j,lt[0],lt[2]),je=mm(K,lt[1],lt[3]),Xe=lt[0]-Te,Ot=lt[1]-Pe,wt=lt[2]-lt[0]-be,xt=lt[3]-lt[1]-je}const mt=(lt,Et,dt,tt)=>{const Gt=gm(lt.stretch-Te,be,M,a.left),jt=ym(lt.fixed-Xe,wt,lt.stretch,ee),hr=gm(Et.stretch-Pe,je,O,a.top),tn=ym(Et.fixed-Ot,xt,Et.stretch,se),on=gm(dt.stretch-Te,be,M,a.left),Vn=ym(dt.fixed-Xe,wt,dt.stretch,ee),mo=gm(tt.stretch-Pe,je,O,a.top),Ai=ym(tt.fixed-Ot,xt,tt.stretch,se),Dn=new P(Gt,hr),ii=new P(on,hr),ui=new P(on,mo),Di=new P(Gt,mo),Ri=new P(jt/x,tn/x),Un=new P(Vn/x,Ai/x),Hn=n*Math.PI/180;if(Hn){const xi=Math.sin(Hn),Yi=Math.cos(Hn),Qi=[Yi,-xi,xi,Yi];Dn._matMult(Qi),ii._matMult(Qi),Di._matMult(Qi),ui._matMult(Qi)}const _i=lt.stretch+lt.fixed,Li=Et.stretch+Et.fixed;return{tl:Dn,tr:ii,bl:Di,br:ui,tex:{x:v.paddedRect.x+cu+_i,y:v.paddedRect.y+cu+Li,w:dt.stretch+dt.fixed-_i,h:tt.stretch+tt.fixed-Li},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ri,pixelOffsetBR:Un,minFontScaleX:wt/x/M,minFontScaleY:xt/x/O,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const lt=mS(j,me,ee),Et=mS(K,ve,se);for(let dt=0;dt<lt.length-1;dt++){const tt=lt[dt],Gt=lt[dt+1];for(let jt=0;jt<Et.length-1;jt++)m.push(mt(tt,Et[jt],Gt,Et[jt+1]))}}else m.push(mt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:T+1}));return m}function mm(a,n,s){let h=0;for(const m of a)h+=Math.max(n,Math.min(s,m[1]))-Math.max(n,Math.min(s,m[0]));return h}function mS(a,n,s){const h=[{fixed:-cu,stretch:0}];for(const[m,v]of a){const x=h[h.length-1];h.push({fixed:m-x.stretch,stretch:x.stretch}),h.push({fixed:m-x.stretch,stretch:x.stretch+(v-m)})}return h.push({fixed:n+cu,stretch:s}),h}function gm(a,n,s,h){return a/n*s+h}function ym(a,n,s,h){return a-n*s/h}class vm{constructor(n,s,h,m,v,x,S,T,M,O){if(this.boxStartIndex=n.length,M){let j=x.top,K=x.bottom;const Y=x.collisionPadding;Y&&(j-=Y[1],K+=Y[3]);let ee=K-j;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{let j=x.top*S-T[0],K=x.bottom*S+T[2],Y=x.left*S-T[3],ee=x.right*S+T[1];const se=x.collisionPadding;if(se&&(Y-=se[0]*S,j-=se[1]*S,ee+=se[2]*S,K+=se[3]*S),O){const me=new P(Y,j),ve=new P(ee,j),Te=new P(Y,K),be=new P(ee,K),Pe=O*Math.PI/180;me._rotate(Pe),ve._rotate(Pe),Te._rotate(Pe),be._rotate(Pe),Y=Math.min(me.x,ve.x,Te.x,be.x),ee=Math.max(me.x,ve.x,Te.x,be.x),j=Math.min(me.y,ve.y,Te.y,be.y),K=Math.max(me.y,ve.y,Te.y,be.y)}n.emplaceBack(s.x,s.y,Y,j,ee,K,h,m,v)}this.boxEndIndex=n.length}}class GA{constructor(n=[],s=qA){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,m=s[n];for(;n>0;){const v=n-1>>1,x=s[v];if(h(m,x)>=0)break;s[n]=x,n=v}s[n]=m}_down(n){const{data:s,compare:h}=this,m=this.length>>1,v=s[n];for(;n<m;){let x=1+(n<<1),S=s[x];const T=x+1;if(T<this.length&&h(s[T],S)<0&&(x=T,S=s[T]),h(S,v)>=0)break;s[n]=S,n=x}s[n]=v}}function qA(a,n){return a<n?-1:a>n?1:0}function ZA(a,n=1,s=!1){let h=1/0,m=1/0,v=-1/0,x=-1/0;const S=a[0];for(let Y=0;Y<S.length;Y++){const ee=S[Y];(!Y||ee.x<h)&&(h=ee.x),(!Y||ee.y<m)&&(m=ee.y),(!Y||ee.x>v)&&(v=ee.x),(!Y||ee.y>x)&&(x=ee.y)}const T=Math.min(v-h,x-m);let M=T/2;const O=new GA([],KA);if(T===0)return new P(h,m);for(let Y=h;Y<v;Y+=T)for(let ee=m;ee<x;ee+=T)O.push(new uu(Y+M,ee+M,M,a));let j=function(Y){let ee=0,se=0,me=0;const ve=Y[0];for(let Te=0,be=ve.length,Pe=be-1;Te<be;Pe=Te++){const je=ve[Te],Xe=ve[Pe],wt=je.x*Xe.y-Xe.x*je.y;se+=(je.x+Xe.x)*wt,me+=(je.y+Xe.y)*wt,ee+=3*wt}return new uu(se/ee,me/ee,0,Y)}(a),K=O.length;for(;O.length;){const Y=O.pop();(Y.d>j.d||!j.d)&&(j=Y,s&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,K)),Y.max-j.d<=n||(M=Y.h/2,O.push(new uu(Y.p.x-M,Y.p.y-M,M,a)),O.push(new uu(Y.p.x+M,Y.p.y-M,M,a)),O.push(new uu(Y.p.x-M,Y.p.y+M,M,a)),O.push(new uu(Y.p.x+M,Y.p.y+M,M,a)),K+=4)}return s&&(console.log(`num probes: ${K}`),console.log(`best distance: ${j.d}`)),j.p}function KA(a,n){return n.max-a.max}function uu(a,n,s,h){this.p=new P(a,n),this.h=s,this.d=function(m,v){let x=!1,S=1/0;for(let T=0;T<v.length;T++){const M=v[T];for(let O=0,j=M.length,K=j-1;O<j;K=O++){const Y=M[O],ee=M[K];Y.y>m.y!=ee.y>m.y&&m.x<(ee.x-Y.x)*(m.y-Y.y)/(ee.y-Y.y)+Y.x&&(x=!x),S=Math.min(S,Jb(m,Y,ee))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var ci;c.aq=void 0,(ci=c.aq||(c.aq={}))[ci.center=1]="center",ci[ci.left=2]="left",ci[ci.right=3]="right",ci[ci.top=4]="top",ci[ci.bottom=5]="bottom",ci[ci["top-left"]=6]="top-left",ci[ci["top-right"]=7]="top-right",ci[ci["bottom-left"]=8]="bottom-left",ci[ci["bottom-right"]=9]="bottom-right";const nl=7,y0=Number.POSITIVE_INFINITY;function gS(a,n){return n[1]!==y0?function(s,h,m){let v=0,x=0;switch(h=Math.abs(h),m=Math.abs(m),s){case"top-right":case"top-left":case"top":x=m-nl;break;case"bottom-right":case"bottom-left":case"bottom":x=-m+nl}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(a,n[0],n[1]):function(s,h){let m=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-nl;break;case"bottom-right":case"bottom-left":v=-x+nl;break;case"bottom":v=-h+nl;break;case"top":v=h-nl}switch(s){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=h;break;case"right":m=-h}return[m,v]}(a,n[0])}function yS(a,n,s){var h;const m=a.layout,v=(h=m.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(v){const S=v.values,T=[];for(let M=0;M<S.length;M+=2){const O=T[M]=S[M],j=S[M+1].map(K=>K*jn);O.startsWith("top")?j[1]-=nl:O.startsWith("bottom")&&(j[1]+=nl),T[M+1]=j}return new lo(T)}const x=m.get("text-variable-anchor");if(x){let S;S=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(n,{},s)*jn,y0]:m.get("text-offset").evaluate(n,{},s).map(M=>M*jn);const T=[];for(const M of x)T.push(M,gS(M,S));return new lo(T)}return null}function v0(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function XA(a,n,s,h,m,v,x,S,T,M,O){let j=v.textMaxSize.evaluate(n,{});j===void 0&&(j=x);const K=a.layers[0].layout,Y=K.get("icon-offset").evaluate(n,{},O),ee=_S(s.horizontal),se=x/24,me=a.tilePixelRatio*se,ve=a.tilePixelRatio*j/24,Te=a.tilePixelRatio*S,be=a.tilePixelRatio*K.get("symbol-spacing"),Pe=K.get("text-padding")*a.tilePixelRatio,je=function(tt,Gt,jt,hr=1){const tn=tt.get("icon-padding").evaluate(Gt,{},jt),on=tn&&tn.values;return[on[0]*hr,on[1]*hr,on[2]*hr,on[3]*hr]}(K,n,O,a.tilePixelRatio),Xe=K.get("text-max-angle")/180*Math.PI,wt=K.get("text-rotation-alignment")!=="viewport"&&K.get("symbol-placement")!=="point",Ot=K.get("icon-rotation-alignment")==="map"&&K.get("symbol-placement")!=="point",xt=K.get("symbol-placement"),mt=be/2,lt=K.get("icon-text-fit");let Et;h&&lt!=="none"&&(a.allowVerticalPlacement&&s.vertical&&(Et=jw(h,s.vertical,lt,K.get("icon-text-fit-padding"),Y,se)),ee&&(h=jw(h,ee,lt,K.get("icon-text-fit-padding"),Y,se)));const dt=(tt,Gt)=>{Gt.x<0||Gt.x>=An||Gt.y<0||Gt.y>=An||function(jt,hr,tn,on,Vn,mo,Ai,Dn,ii,ui,Di,Ri,Un,Hn,_i,Li,xi,Yi,Qi,Wn,vr,bi,di,Gn,Ko){const wa=jt.addToLineVertexArray(hr,tn);let Sa,_s,Xo,To,eo=0,xs=0,Th=0,SS=0,I0=-1,T0=-1;const bs={};let CS=ms("");if(jt.allowVerticalPlacement&&on.vertical){const wi=Dn.layout.get("text-rotate").evaluate(vr,{},Gn)+90;Xo=new vm(ii,hr,ui,Di,Ri,on.vertical,Un,Hn,_i,wi),Ai&&(To=new vm(ii,hr,ui,Di,Ri,Ai,xi,Yi,_i,wi))}if(Vn){const wi=Dn.layout.get("icon-rotate").evaluate(vr,{}),Po=Dn.layout.get("icon-text-fit")!=="none",Yl=fS(Vn,wi,di,Po),ka=Ai?fS(Ai,wi,di,Po):void 0;_s=new vm(ii,hr,ui,Di,Ri,Vn,xi,Yi,!1,wi),eo=4*Yl.length;const Ql=jt.iconSizeData;let Ga=null;Ql.kind==="source"?(Ga=[Wa*Dn.layout.get("icon-size").evaluate(vr,{})],Ga[0]>el&&We(`${jt.layerIds[0]}: Value for "icon-size" is >= ${Sh}. Reduce your "icon-size".`)):Ql.kind==="composite"&&(Ga=[Wa*bi.compositeIconSizes[0].evaluate(vr,{},Gn),Wa*bi.compositeIconSizes[1].evaluate(vr,{},Gn)],(Ga[0]>el||Ga[1]>el)&&We(`${jt.layerIds[0]}: Value for "icon-size" is >= ${Sh}. Reduce your "icon-size".`)),jt.addSymbols(jt.icon,Yl,Ga,Wn,Qi,vr,c.ai.none,hr,wa.lineStartIndex,wa.lineLength,-1,Gn),I0=jt.icon.placedSymbolArray.length-1,ka&&(xs=4*ka.length,jt.addSymbols(jt.icon,ka,Ga,Wn,Qi,vr,c.ai.vertical,hr,wa.lineStartIndex,wa.lineLength,-1,Gn),T0=jt.icon.placedSymbolArray.length-1)}const kS=Object.keys(on.horizontal);for(const wi of kS){const Po=on.horizontal[wi];if(!Sa){CS=ms(Po.text);const ka=Dn.layout.get("text-rotate").evaluate(vr,{},Gn);Sa=new vm(ii,hr,ui,Di,Ri,Po,Un,Hn,_i,ka)}const Yl=Po.positionedLines.length===1;if(Th+=vS(jt,hr,Po,mo,Dn,_i,vr,Li,wa,on.vertical?c.ai.horizontal:c.ai.horizontalOnly,Yl?kS:[wi],bs,I0,bi,Gn),Yl)break}on.vertical&&(SS+=vS(jt,hr,on.vertical,mo,Dn,_i,vr,Li,wa,c.ai.vertical,["vertical"],bs,T0,bi,Gn));const QA=Sa?Sa.boxStartIndex:jt.collisionBoxArray.length,eD=Sa?Sa.boxEndIndex:jt.collisionBoxArray.length,tD=Xo?Xo.boxStartIndex:jt.collisionBoxArray.length,rD=Xo?Xo.boxEndIndex:jt.collisionBoxArray.length,nD=_s?_s.boxStartIndex:jt.collisionBoxArray.length,iD=_s?_s.boxEndIndex:jt.collisionBoxArray.length,oD=To?To.boxStartIndex:jt.collisionBoxArray.length,aD=To?To.boxEndIndex:jt.collisionBoxArray.length;let Ca=-1;const xm=(wi,Po)=>wi&&wi.circleDiameter?Math.max(wi.circleDiameter,Po):Po;Ca=xm(Sa,Ca),Ca=xm(Xo,Ca),Ca=xm(_s,Ca),Ca=xm(To,Ca);const IS=Ca>-1?1:0;IS&&(Ca*=Ko/jn),jt.glyphOffsetArray.length>=lu.MAX_GLYPHS&&We("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),vr.sortKey!==void 0&&jt.addToSortKeyRanges(jt.symbolInstances.length,vr.sortKey);const sD=yS(Dn,vr,Gn),[lD,cD]=function(wi,Po){const Yl=wi.length,ka=Po==null?void 0:Po.values;if((ka==null?void 0:ka.length)>0)for(let Ql=0;Ql<ka.length;Ql+=2){const Ga=ka[Ql+1];wi.emplaceBack(c.aq[ka[Ql]],Ga[0],Ga[1])}return[Yl,wi.length]}(jt.textAnchorOffsets,sD);jt.symbolInstances.emplaceBack(hr.x,hr.y,bs.right>=0?bs.right:-1,bs.center>=0?bs.center:-1,bs.left>=0?bs.left:-1,bs.vertical||-1,I0,T0,CS,QA,eD,tD,rD,nD,iD,oD,aD,ui,Th,SS,eo,xs,IS,0,Un,Ca,lD,cD)}(a,Gt,tt,s,h,m,Et,a.layers[0],a.collisionBoxArray,n.index,n.sourceLayerIndex,a.index,me,[Pe,Pe,Pe,Pe],wt,T,Te,je,Ot,Y,n,v,M,O,x)};if(xt==="line")for(const tt of lS(n.geometry,0,0,An,An)){const Gt=WA(tt,be,Xe,s.vertical||ee,h,24,ve,a.overscaling,An);for(const jt of Gt)ee&&JA(a,ee.text,mt,jt)||dt(tt,jt)}else if(xt==="line-center"){for(const tt of n.geometry)if(tt.length>1){const Gt=HA(tt,Xe,s.vertical||ee,h,24,ve);Gt&&dt(tt,Gt)}}else if(n.type==="Polygon")for(const tt of Xv(n.geometry,0)){const Gt=ZA(tt,16);dt(tt[0],new rl(Gt.x,Gt.y,0))}else if(n.type==="LineString")for(const tt of n.geometry)dt(tt,new rl(tt[0].x,tt[0].y,0));else if(n.type==="Point")for(const tt of n.geometry)for(const Gt of tt)dt([Gt],new rl(Gt.x,Gt.y,0))}function vS(a,n,s,h,m,v,x,S,T,M,O,j,K,Y,ee){const se=function(Te,be,Pe,je,Xe,wt,Ot,xt){const mt=je.layout.get("text-rotate").evaluate(wt,{})*Math.PI/180,lt=[];for(const Et of be.positionedLines)for(const dt of Et.positionedGlyphs){if(!dt.rect)continue;const tt=dt.rect||{};let Gt=Rw+1,jt=!0,hr=1,tn=0;const on=(Xe||xt)&&dt.vertical,Vn=dt.metrics.advance*dt.scale/2;if(xt&&be.verticalizable&&(tn=Et.lineOffset/2-(dt.imageName?-(jn-dt.metrics.width*dt.scale)/2:(dt.scale-1)*jn)),dt.imageName){const Wn=Ot[dt.imageName];jt=Wn.sdf,hr=Wn.pixelRatio,Gt=Ji/hr}const mo=Xe?[dt.x+Vn,dt.y]:[0,0];let Ai=Xe?[0,0]:[dt.x+Vn+Pe[0],dt.y+Pe[1]-tn],Dn=[0,0];on&&(Dn=Ai,Ai=[0,0]);const ii=dt.metrics.isDoubleResolution?2:1,ui=(dt.metrics.left-Gt)*dt.scale-Vn+Ai[0],Di=(-dt.metrics.top-Gt)*dt.scale+Ai[1],Ri=ui+tt.w/ii*dt.scale/hr,Un=Di+tt.h/ii*dt.scale/hr,Hn=new P(ui,Di),_i=new P(Ri,Di),Li=new P(ui,Un),xi=new P(Ri,Un);if(on){const Wn=new P(-Vn,Vn-bh),vr=-Math.PI/2,bi=jn/2-Vn,di=new P(5-bh-bi,-(dt.imageName?bi:0)),Gn=new P(...Dn);Hn._rotateAround(vr,Wn)._add(di)._add(Gn),_i._rotateAround(vr,Wn)._add(di)._add(Gn),Li._rotateAround(vr,Wn)._add(di)._add(Gn),xi._rotateAround(vr,Wn)._add(di)._add(Gn)}if(mt){const Wn=Math.sin(mt),vr=Math.cos(mt),bi=[vr,-Wn,Wn,vr];Hn._matMult(bi),_i._matMult(bi),Li._matMult(bi),xi._matMult(bi)}const Yi=new P(0,0),Qi=new P(0,0);lt.push({tl:Hn,tr:_i,bl:Li,br:xi,tex:tt,writingMode:be.writingMode,glyphOffset:mo,sectionIndex:dt.sectionIndex,isSDF:jt,pixelOffsetTL:Yi,pixelOffsetBR:Qi,minFontScaleX:0,minFontScaleY:0})}return lt}(0,s,S,m,v,x,h,a.allowVerticalPlacement),me=a.textSizeData;let ve=null;me.kind==="source"?(ve=[Wa*m.layout.get("text-size").evaluate(x,{})],ve[0]>el&&We(`${a.layerIds[0]}: Value for "text-size" is >= ${Sh}. Reduce your "text-size".`)):me.kind==="composite"&&(ve=[Wa*Y.compositeTextSizes[0].evaluate(x,{},ee),Wa*Y.compositeTextSizes[1].evaluate(x,{},ee)],(ve[0]>el||ve[1]>el)&&We(`${a.layerIds[0]}: Value for "text-size" is >= ${Sh}. Reduce your "text-size".`)),a.addSymbols(a.text,se,ve,S,v,x,M,n,T.lineStartIndex,T.lineLength,K,ee);for(const Te of O)j[Te]=a.text.placedSymbolArray.length-1;return 4*se.length}function _S(a){for(const n in a)return a[n];return null}function JA(a,n,s,h){const m=a.compareText;if(n in m){const v=m[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<s)return!0}else m[n]=[];return m[n].push(h),!1}const xS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class _0{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=h>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const v=xS[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[S]=new Uint32Array(n,4,1);return new _0(S,x,v,n)}constructor(n,s=64,h=Float64Array,m){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=xS.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,S=n*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+T,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+T),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+T,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return x0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:S}=this,T=[0,v.length-1,0],M=[];for(;T.length;){const O=T.pop()||0,j=T.pop()||0,K=T.pop()||0;if(j-K<=S){for(let me=K;me<=j;me++){const ve=x[2*me],Te=x[2*me+1];ve>=n&&ve<=h&&Te>=s&&Te<=m&&M.push(v[me])}continue}const Y=K+j>>1,ee=x[2*Y],se=x[2*Y+1];ee>=n&&ee<=h&&se>=s&&se<=m&&M.push(v[Y]),(O===0?n<=ee:s<=se)&&(T.push(K),T.push(Y-1),T.push(1-O)),(O===0?h>=ee:m>=se)&&(T.push(Y+1),T.push(j),T.push(1-O))}return M}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:v,nodeSize:x}=this,S=[0,m.length-1,0],T=[],M=h*h;for(;S.length;){const O=S.pop()||0,j=S.pop()||0,K=S.pop()||0;if(j-K<=x){for(let me=K;me<=j;me++)wS(v[2*me],v[2*me+1],n,s)<=M&&T.push(m[me]);continue}const Y=K+j>>1,ee=v[2*Y],se=v[2*Y+1];wS(ee,se,n,s)<=M&&T.push(m[Y]),(O===0?n-h<=ee:s-h<=se)&&(S.push(K),S.push(Y-1),S.push(1-O)),(O===0?n+h>=ee:s+h>=se)&&(S.push(Y+1),S.push(j),S.push(1-O))}return T}}function x0(a,n,s,h,m,v){if(m-h<=s)return;const x=h+m>>1;bS(a,n,x,h,m,v),x0(a,n,s,h,x-1,1-v),x0(a,n,s,x+1,m,1-v)}function bS(a,n,s,h,m,v){for(;m>h;){if(m-h>600){const M=m-h+1,O=s-h+1,j=Math.log(M),K=.5*Math.exp(2*j/3),Y=.5*Math.sqrt(j*K*(M-K)/M)*(O-M/2<0?-1:1);bS(a,n,s,Math.max(h,Math.floor(s-O*K/M+Y)),Math.min(m,Math.floor(s+(M-O)*K/M+Y)),v)}const x=n[2*s+v];let S=h,T=m;for(kh(a,n,h,s),n[2*m+v]>x&&kh(a,n,h,m);S<T;){for(kh(a,n,S,T),S++,T--;n[2*S+v]<x;)S++;for(;n[2*T+v]>x;)T--}n[2*h+v]===x?kh(a,n,h,T):(T++,kh(a,n,T,m)),T<=s&&(h=T+1),s<=T&&(m=T-1)}}function kh(a,n,s,h){b0(a,s,h),b0(n,2*s,2*h),b0(n,2*s+1,2*h+1)}function b0(a,n,s){const h=a[n];a[n]=a[s],a[s]=h}function wS(a,n,s,h){const m=a-s,v=n-h;return m*m+v*v}var w0;c.bh=void 0,(w0=c.bh||(c.bh={})).create="create",w0.load="load",w0.fullLoad="fullLoad";let _m=null,Ih=[];const S0=1e3/60,C0="loadTime",k0="fullLoadTime",YA={mark(a){performance.mark(a)},frame(a){const n=a;_m!=null&&Ih.push(n-_m),_m=n},clearMetrics(){_m=null,Ih=[],performance.clearMeasures(C0),performance.clearMeasures(k0);for(const a in c.bh)performance.clearMarks(c.bh[a])},getPerformanceMetrics(){performance.measure(C0,c.bh.create,c.bh.load),performance.measure(k0,c.bh.create,c.bh.fullLoad);const a=performance.getEntriesByName(C0)[0].duration,n=performance.getEntriesByName(k0)[0].duration,s=Ih.length,h=1/(Ih.reduce((v,x)=>v+x,0)/s/1e3),m=Ih.filter(v=>v>S0).reduce((v,x)=>v+(x-S0)/S0,0);return{loadTime:a,fullLoadTime:n,fps:h,percentDroppedFrames:m/(s+m)*100,totalFrames:s}}};c.$=function(a,n,s){var h,m,v,x,S,T,M,O,j,K,Y,ee,se=s[0],me=s[1],ve=s[2];return n===a?(a[12]=n[0]*se+n[4]*me+n[8]*ve+n[12],a[13]=n[1]*se+n[5]*me+n[9]*ve+n[13],a[14]=n[2]*se+n[6]*me+n[10]*ve+n[14],a[15]=n[3]*se+n[7]*me+n[11]*ve+n[15]):(m=n[1],v=n[2],x=n[3],S=n[4],T=n[5],M=n[6],O=n[7],j=n[8],K=n[9],Y=n[10],ee=n[11],a[0]=h=n[0],a[1]=m,a[2]=v,a[3]=x,a[4]=S,a[5]=T,a[6]=M,a[7]=O,a[8]=j,a[9]=K,a[10]=Y,a[11]=ee,a[12]=h*se+S*me+j*ve+n[12],a[13]=m*se+T*me+K*ve+n[13],a[14]=v*se+M*me+Y*ve+n[14],a[15]=x*se+O*me+ee*ve+n[15]),a},c.A=ru,c.B=Gi,c.C=class{constructor(a,n,s){this.receive=h=>{const m=h.data,v=m.id;if(v&&(!m.targetMapId||this.mapId===m.targetMapId))if(m.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else Oe()||m.mustQueue?(this.tasks[v]=m,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,m)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),m=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),m&&this.processTask(h,m)},this.target=a,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new VA(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Oe()?a:window}send(a,n,s,h,m=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[v]=s);const x=[],S={id:v,type:a,hasCallback:!!s,targetMapId:h,mustQueue:m,sourceMapId:this.mapId,data:Va(n,x)};return this.target.postMessage(S,{transfer:x}),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(a,n){if(n.type==="<response>"){const s=this.callbacks[a];delete this.callbacks[a],s&&(n.error?s(Zs(n.error)):s(null,Zs(n.data)))}else{let s=!1;const h=[],m=n.hasCallback?(S,T)=>{s=!0,delete this.cancelCallbacks[a];const M={id:a,type:"<response>",sourceMapId:this.mapId,error:S?Va(S):null,data:Va(T,h)};this.target.postMessage(M,{transfer:h})}:S=>{s=!0};let v=null;const x=Zs(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,m);else if("getWorkerSource"in this.parent){const S=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,S[0],x.source)[S[1]](x,m)}else m(new Error(`Could not find function ${n.type}`));!s&&v&&v.cancel&&(this.cancelCallbacks[a]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},c.D=Vt,c.E=Fr,c.F=function(a,n){const s={};for(let h=0;h<n.length;h++){const m=n[h];m in a&&(s[m]=a[m])}return s},c.G=Xw,c.H=Jw,c.I=a0,c.J=L,c.K=G,c.L=tl,c.M=ht,c.N=An,c.O=Io,c.P=P,c.Q=cn,c.R=ko,c.S=en,c.T=Zf,c.U=fm,c.V=class extends ps{},c.W=g0,c.X=function(a,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let h=0;h<a.length;h++){const m=window.document.createElement("source");Cr(a[h])||(s.crossOrigin="Anonymous"),m.src=a[h],s.appendChild(m)}return{cancel:()=>{}}},c.Y=Le,c.Z=function(){var a=new ru(16);return ru!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},c._=b,c.a=Ge,c.a$=class extends J{},c.a0=function(a,n,s){var h=s[0],m=s[1],v=s[2];return a[0]=n[0]*h,a[1]=n[1]*h,a[2]=n[2]*h,a[3]=n[3]*h,a[4]=n[4]*m,a[5]=n[5]*m,a[6]=n[6]*m,a[7]=n[7]*m,a[8]=n[8]*v,a[9]=n[9]*v,a[10]=n[10]*v,a[11]=n[11]*v,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},c.a1=tw,c.a2=function(){return Ce++},c.a3=pe,c.a4=lu,c.a5=function(){Ki.isLoading()||Ki.isLoaded()||eh()!=="deferred"||qf()},c.a6=Ud,c.a7=Xl,c.a8=Qr,c.a9=iS,c.aA=Hl,c.aB=function(a){a=a.slice();const n=Object.create(null);for(let s=0;s<a.length;s++)n[a[s].id]=a[s];for(let s=0;s<a.length;s++)"ref"in a[s]&&(a[s]=ir(a[s],n[a[s].ref]));return a},c.aC=function(a){if(a.type==="custom")return new jA(a);switch(a.type){case"background":return new OA(a);case"circle":return new SM(a);case"fill":return new UM(a);case"fill-extrusion":return new iA(a);case"heatmap":return new kM(a);case"hillshade":return new TM(a);case"line":return new hA(a);case"raster":return new NA(a);case"symbol":return new pm(a)}},c.aD=Se,c.aE=function(a,n){if(!a)return[{command:qt.setStyle,args:[n]}];let s=[];try{if(!Ft(a.version,n.version))return[{command:qt.setStyle,args:[n]}];Ft(a.center,n.center)||s.push({command:qt.setCenter,args:[n.center]}),Ft(a.zoom,n.zoom)||s.push({command:qt.setZoom,args:[n.zoom]}),Ft(a.bearing,n.bearing)||s.push({command:qt.setBearing,args:[n.bearing]}),Ft(a.pitch,n.pitch)||s.push({command:qt.setPitch,args:[n.pitch]}),Ft(a.sprite,n.sprite)||s.push({command:qt.setSprite,args:[n.sprite]}),Ft(a.glyphs,n.glyphs)||s.push({command:qt.setGlyphs,args:[n.glyphs]}),Ft(a.transition,n.transition)||s.push({command:qt.setTransition,args:[n.transition]}),Ft(a.light,n.light)||s.push({command:qt.setLight,args:[n.light]});const h={},m=[];(function(x,S,T,M){let O;for(O in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,O)&&(Object.prototype.hasOwnProperty.call(S,O)||Pr(O,T,M));for(O in S)Object.prototype.hasOwnProperty.call(S,O)&&(Object.prototype.hasOwnProperty.call(x,O)?Ft(x[O],S[O])||(x[O].type==="geojson"&&S[O].type==="geojson"&&nr(x,S,O)?T.push({command:qt.setGeoJSONSourceData,args:[O,S[O].data]}):sr(O,S,T,M)):kr(O,S,T))})(a.sources,n.sources,m,h);const v=[];a.layers&&a.layers.forEach(x=>{h[x.source]?s.push({command:qt.removeLayer,args:[x.id]}):v.push(x)}),s=s.concat(m),function(x,S,T){S=S||[];const M=(x=x||[]).map(Rr),O=S.map(Rr),j=x.reduce(it,{}),K=S.reduce(it,{}),Y=M.slice(),ee=Object.create(null);let se,me,ve,Te,be,Pe,je;for(se=0,me=0;se<M.length;se++)ve=M[se],Object.prototype.hasOwnProperty.call(K,ve)?me++:(T.push({command:qt.removeLayer,args:[ve]}),Y.splice(Y.indexOf(ve,me),1));for(se=0,me=0;se<O.length;se++)ve=O[O.length-1-se],Y[Y.length-1-se]!==ve&&(Object.prototype.hasOwnProperty.call(j,ve)?(T.push({command:qt.removeLayer,args:[ve]}),Y.splice(Y.lastIndexOf(ve,Y.length-me),1)):me++,Pe=Y[Y.length-se],T.push({command:qt.addLayer,args:[K[ve],Pe]}),Y.splice(Y.length-se,0,ve),ee[ve]=!0);for(se=0;se<O.length;se++)if(ve=O[se],Te=j[ve],be=K[ve],!ee[ve]&&!Ft(Te,be))if(Ft(Te.source,be.source)&&Ft(Te["source-layer"],be["source-layer"])&&Ft(Te.type,be.type)){for(je in rr(Te.layout,be.layout,T,ve,null,qt.setLayoutProperty),rr(Te.paint,be.paint,T,ve,null,qt.setPaintProperty),Ft(Te.filter,be.filter)||T.push({command:qt.setFilter,args:[ve,be.filter]}),Ft(Te.minzoom,be.minzoom)&&Ft(Te.maxzoom,be.maxzoom)||T.push({command:qt.setLayerZoomRange,args:[ve,be.minzoom,be.maxzoom]}),Te)Object.prototype.hasOwnProperty.call(Te,je)&&je!=="layout"&&je!=="paint"&&je!=="filter"&&je!=="metadata"&&je!=="minzoom"&&je!=="maxzoom"&&(je.indexOf("paint.")===0?rr(Te[je],be[je],T,ve,je.slice(6),qt.setPaintProperty):Ft(Te[je],be[je])||T.push({command:qt.setLayerProperty,args:[ve,je,be[je]]}));for(je in be)Object.prototype.hasOwnProperty.call(be,je)&&!Object.prototype.hasOwnProperty.call(Te,je)&&je!=="layout"&&je!=="paint"&&je!=="filter"&&je!=="metadata"&&je!=="minzoom"&&je!=="maxzoom"&&(je.indexOf("paint.")===0?rr(Te[je],be[je],T,ve,je.slice(6),qt.setPaintProperty):Ft(Te[je],be[je])||T.push({command:qt.setLayerProperty,args:[ve,je,be[je]]}))}else T.push({command:qt.removeLayer,args:[ve]}),Pe=Y[Y.lastIndexOf(ve)+1],T.push({command:qt.addLayer,args:[be,Pe]})}(v,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:qt.setStyle,args:[n]}]}return s},c.aF=function(a){const n=[],s=a.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),a.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},c.aG=function a(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!a(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!a(n[h],s[h]))return!1;return!0}return n===s},c.aH=ye,c.aI=Ee,c.aJ=Wl,c.aK=function(a){return a({pluginStatus:Ei,pluginURL:Ua}),Wl.on("pluginStateChange",a),a},c.aL=class extends gs{constructor(a,n){super(a,n),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},c.aM=eu,c.aN=class extends gs{constructor(a,n){super(a,n),this.current=Ov}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let n=1;n<16;n++)if(a[n]!==this.current[n]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},c.aO=Yf,c.aP=class extends gs{constructor(a,n){super(a,n),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},c.aQ=class extends gs{constructor(a,n){super(a,n),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},c.aR=Qf,c.aS=function(a,n,s,h,m,v,x){var S=1/(n-s),T=1/(h-m),M=1/(v-x);return a[0]=-2*S,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*T,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*M,a[11]=0,a[12]=(n+s)*S,a[13]=(m+h)*T,a[14]=(x+v)*M,a[15]=1,a},c.aT=Ir,c.aU=wM,c.aV=class extends p{},c.aW=gA,c.aX=class extends _{},c.aY=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},c.aZ=aw,c.a_=ot,c.aa=function(a){const n={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,m,v)=>{const x=m||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},c.ab=function(a,n){const s=[];for(const h in a)h in n||s.push(h);return s},c.ac=function(a){if(ke==null){const n=a.navigator?a.navigator.userAgent:null;ke=!!a.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return ke},c.ad=he,c.ae=function(a,n,s){var h=Math.sin(s),m=Math.cos(s),v=n[0],x=n[1],S=n[2],T=n[3],M=n[4],O=n[5],j=n[6],K=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=v*m+M*h,a[1]=x*m+O*h,a[2]=S*m+j*h,a[3]=T*m+K*h,a[4]=M*m-v*h,a[5]=O*m-x*h,a[6]=j*m-S*h,a[7]=K*m-T*h,a},c.af=function(a){var n=new ru(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},c.ag=nm,c.ah=function(a,n){let s=0,h=0;if(a.kind==="constant")h=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:m,minZoom:v,maxZoom:x}=a,S=m?he(qi.interpolationFactor(m,n,v,x),0,1):0;a.kind==="camera"?h=Gi.number(a.minSize,a.maxSize,S):s=S}return{uSizeT:s,uSize:h}},c.aj=function(a,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:m}){return a.kind==="source"?h/Wa:a.kind==="composite"?Gi.number(h/Wa,m/Wa,s):n},c.ak=u0,c.al=function(a,n,s,h){const m=n.y-a.y,v=n.x-a.x,x=h.y-s.y,S=h.x-s.x,T=x*v-S*m;if(T===0)return null;const M=(S*(a.y-s.y)-x*(a.x-s.x))/T;return new P(a.x+M*v,a.y+M*m)},c.am=lS,c.an=Kb,c.ao=Uv,c.ap=jn,c.ar=c0,c.as=function(a,n){var s=n[0],h=n[1],m=n[2],v=n[3],x=n[4],S=n[5],T=n[6],M=n[7],O=n[8],j=n[9],K=n[10],Y=n[11],ee=n[12],se=n[13],me=n[14],ve=n[15],Te=s*S-h*x,be=s*T-m*x,Pe=s*M-v*x,je=h*T-m*S,Xe=h*M-v*S,wt=m*M-v*T,Ot=O*se-j*ee,xt=O*me-K*ee,mt=O*ve-Y*ee,lt=j*me-K*se,Et=j*ve-Y*se,dt=K*ve-Y*me,tt=Te*dt-be*Et+Pe*lt+je*mt-Xe*xt+wt*Ot;return tt?(a[0]=(S*dt-T*Et+M*lt)*(tt=1/tt),a[1]=(m*Et-h*dt-v*lt)*tt,a[2]=(se*wt-me*Xe+ve*je)*tt,a[3]=(K*Xe-j*wt-Y*je)*tt,a[4]=(T*mt-x*dt-M*xt)*tt,a[5]=(s*dt-m*mt+v*xt)*tt,a[6]=(me*Pe-ee*wt-ve*be)*tt,a[7]=(O*wt-K*Pe+Y*be)*tt,a[8]=(x*Et-S*mt+M*Ot)*tt,a[9]=(h*mt-s*Et-v*Ot)*tt,a[10]=(ee*Xe-se*Pe+ve*Te)*tt,a[11]=(j*Pe-O*Xe-Y*Te)*tt,a[12]=(S*xt-x*lt-T*Ot)*tt,a[13]=(s*lt-h*xt+m*Ot)*tt,a[14]=(se*be-ee*je-me*Te)*tt,a[15]=(O*je-j*be+K*Te)*tt,a):null},c.at=v0,c.au=l0,c.av=_0,c.aw=function(){const a={},n=Ae.$version;for(const s in Ae.$root){const h=Ae.$root[s];if(h.required){let m=null;m=s==="version"?n:h.type==="array"?[]:{},m!=null&&(a[s]=m)}}return a},c.ax=qt,c.ay=Uf,c.az=rt,c.b=function(a,n){const s=new Blob([new Uint8Array(a)],{type:"image/png"});createImageBitmap(s).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},c.b0=ri,c.b1=function(a,n){var s=a[0],h=a[1],m=a[2],v=a[3],x=a[4],S=a[5],T=a[6],M=a[7],O=a[8],j=a[9],K=a[10],Y=a[11],ee=a[12],se=a[13],me=a[14],ve=a[15],Te=n[0],be=n[1],Pe=n[2],je=n[3],Xe=n[4],wt=n[5],Ot=n[6],xt=n[7],mt=n[8],lt=n[9],Et=n[10],dt=n[11],tt=n[12],Gt=n[13],jt=n[14],hr=n[15];return Math.abs(s-Te)<=Mi*Math.max(1,Math.abs(s),Math.abs(Te))&&Math.abs(h-be)<=Mi*Math.max(1,Math.abs(h),Math.abs(be))&&Math.abs(m-Pe)<=Mi*Math.max(1,Math.abs(m),Math.abs(Pe))&&Math.abs(v-je)<=Mi*Math.max(1,Math.abs(v),Math.abs(je))&&Math.abs(x-Xe)<=Mi*Math.max(1,Math.abs(x),Math.abs(Xe))&&Math.abs(S-wt)<=Mi*Math.max(1,Math.abs(S),Math.abs(wt))&&Math.abs(T-Ot)<=Mi*Math.max(1,Math.abs(T),Math.abs(Ot))&&Math.abs(M-xt)<=Mi*Math.max(1,Math.abs(M),Math.abs(xt))&&Math.abs(O-mt)<=Mi*Math.max(1,Math.abs(O),Math.abs(mt))&&Math.abs(j-lt)<=Mi*Math.max(1,Math.abs(j),Math.abs(lt))&&Math.abs(K-Et)<=Mi*Math.max(1,Math.abs(K),Math.abs(Et))&&Math.abs(Y-dt)<=Mi*Math.max(1,Math.abs(Y),Math.abs(dt))&&Math.abs(ee-tt)<=Mi*Math.max(1,Math.abs(ee),Math.abs(tt))&&Math.abs(se-Gt)<=Mi*Math.max(1,Math.abs(se),Math.abs(Gt))&&Math.abs(me-jt)<=Mi*Math.max(1,Math.abs(me),Math.abs(jt))&&Math.abs(ve-hr)<=Mi*Math.max(1,Math.abs(ve),Math.abs(hr))},c.b2=function(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},c.b3=function(a,n,s){return a[0]=n[0]*s[0],a[1]=n[1]*s[1],a[2]=n[2]*s[2],a[3]=n[3]*s[3],a},c.b4=function(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]},c.b5=Z,c.b6=tS,c.b7=Yw,c.b8=function(a,n,s,h,m){var v,x=1/Math.tan(n/2);return a[0]=x/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=x,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,m!=null&&m!==1/0?(a[10]=(m+h)*(v=1/(h-m)),a[14]=2*m*h*v):(a[10]=-1,a[14]=-2*h),a},c.b9=function(a,n,s){var h=Math.sin(s),m=Math.cos(s),v=n[4],x=n[5],S=n[6],T=n[7],M=n[8],O=n[9],j=n[10],K=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=v*m+M*h,a[5]=x*m+O*h,a[6]=S*m+j*h,a[7]=T*m+K*h,a[8]=M*m-v*h,a[9]=O*m-x*h,a[10]=j*m-S*h,a[11]=K*m-T*h,a},c.bA=k,c.bB=Tw,c.bC=Uc,c.bD=Ki,c.ba=te,c.bb=ne,c.bc=function(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},c.bd=class extends Zl{},c.be=f0,c.bf=Qw,c.bg=YA,c.bi=$e,c.bj=function(a,n,s=!1){if(Ei===Kd||Ei===Xd||Ei===Jd)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ua=Zt.resolveURL(a),Ei=Kd,Yd=n,Qd(),s||qf()},c.bk=eh,c.bl=function(a,n){const s={};for(let m=0;m<a.length;m++){const v=n&&n[a[m].id]||qc(a[m]);n&&(n[a[m].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(a[m])}const h=[];for(const m in s)h.push(s[m]);return h},c.bm=Pt,c.bn=nS,c.bo=oS,c.bp=$w,c.bq=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=An/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const n=a.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new Qr(a.bucket.zoom+1),a.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new Qr(a.bucket.zoom+1),a.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new Qr(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:M,maxZoom:O}=a.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Qr(M),a.canonical),h["text-size"].possiblyEvaluate(new Qr(O),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:M,maxZoom:O}=a.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Qr(M),a.canonical),h["icon-size"].possiblyEvaluate(new Qr(O),a.canonical)]}const v=s.get("text-line-height")*jn,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",S=s.get("text-keep-upright"),T=s.get("text-size");for(const M of a.bucket.features){const O=s.get("text-font").evaluate(M,{},a.canonical).join(","),j=T.evaluate(M,{},a.canonical),K=m.layoutTextSize.evaluate(M,{},a.canonical),Y=m.layoutIconSize.evaluate(M,{},a.canonical),ee={horizontal:{},vertical:void 0},se=M.text;let me,ve=[0,0];if(se){const Pe=se.toString(),je=s.get("text-letter-spacing").evaluate(M,{},a.canonical)*jn,Xe=qd(Pe)?je:0,wt=s.get("text-anchor").evaluate(M,{},a.canonical),Ot=yS(n,M,a.canonical);if(!Ot){const dt=s.get("text-radial-offset").evaluate(M,{},a.canonical);ve=dt?gS(wt,[dt*jn,y0]):s.get("text-offset").evaluate(M,{},a.canonical).map(tt=>tt*jn)}let xt=x?"center":s.get("text-justify").evaluate(M,{},a.canonical);const mt=s.get("symbol-placement"),lt=mt==="point"?s.get("text-max-width").evaluate(M,{},a.canonical)*jn:0,Et=()=>{a.bucket.allowVerticalPlacement&&Gd(Pe)&&(ee.vertical=um(se,a.glyphMap,a.glyphPositions,a.imagePositions,O,lt,v,wt,"left",Xe,ve,c.ai.vertical,!0,mt,K,j))};if(!x&&Ot){const dt=new Set;if(xt==="auto")for(let Gt=0;Gt<Ot.values.length;Gt+=2)dt.add(v0(Ot.values[Gt]));else dt.add(xt);let tt=!1;for(const Gt of dt)if(!ee.horizontal[Gt])if(tt)ee.horizontal[Gt]=ee.horizontal[0];else{const jt=um(se,a.glyphMap,a.glyphPositions,a.imagePositions,O,lt,v,"center",Gt,Xe,ve,c.ai.horizontal,!1,mt,K,j);jt&&(ee.horizontal[Gt]=jt,tt=jt.positionedLines.length===1)}Et()}else{xt==="auto"&&(xt=v0(wt));const dt=um(se,a.glyphMap,a.glyphPositions,a.imagePositions,O,lt,v,wt,xt,Xe,ve,c.ai.horizontal,!1,mt,K,j);dt&&(ee.horizontal[xt]=dt),Et(),Gd(Pe)&&x&&S&&(ee.vertical=um(se,a.glyphMap,a.glyphPositions,a.imagePositions,O,lt,v,wt,xt,Xe,ve,c.ai.vertical,!1,mt,K,j))}}let Te=!1;if(M.icon&&M.icon.name){const Pe=a.imageMap[M.icon.name];Pe&&(me=DA(a.imagePositions[M.icon.name],s.get("icon-offset").evaluate(M,{},a.canonical),s.get("icon-anchor").evaluate(M,{},a.canonical)),Te=!!Pe.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=Te:a.bucket.sdfIcons!==Te&&We("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Pe.pixelRatio!==a.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const be=_S(ee.horizontal)||ee.vertical;a.bucket.iconsInText=!!be&&be.iconsInText,(be||me)&&XA(a.bucket,M,ee,me,a.imageMap,m,K,Y,ve,Te,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},c.br=r0,c.bs=Qv,c.bt=t0,c.bu=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},c.bv=i0,c.bw=Ys,c.bx=function(a,n,s,h,m){return b(this,void 0,void 0,function*(){if(G())try{return yield ht(a,n,s,h,m)}catch{}return function(v,x,S,T,M){const O=v.width,j=v.height;vt&&gt||(vt=new OffscreenCanvas(O,j),gt=vt.getContext("2d",{willReadFrequently:!0})),vt.width=O,vt.height=j,gt.drawImage(v,0,0,O,j);const K=gt.getImageData(x,S,T,M);return gt.clearRect(0,0,O,j),K.data}(a,n,s,h,m)})},c.by=rS,c.bz=w,c.c=kt,c.d=function(a,n){const s=new Image;s.onload=()=>{n(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=Ke})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(a)],{type:"image/png"});s.src=a.byteLength?URL.createObjectURL(h):Ke},c.e=ue,c.f=function(a,n){return Mt(ue(a,{type:"json"}),n)},c.g=pt,c.h=Zt,c.i=Oe,c.j=er,c.k=Dr,c.l=gr,c.m=Mt,c.n=function(a){return new i0(a).readFields(TA,[])},c.o=function(a,n,s){if(!a.length)return s(null,[]);let h=a.length;const m=new Array(a.length);let v=null;a.forEach((x,S)=>{n(x,(T,M)=>{T&&(v=T),m[S]=M,--h==0&&s(v,m)})})},c.p=Lw,c.q=ph,c.r=Cn,c.s=Cr,c.t=Rv,c.u=bt,c.v=Ae,c.w=We,c.x=Xc,c.y=_a,c.z=function([a,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:a*Math.cos(n)*Math.sin(s),y:a*Math.sin(n)*Math.sin(s),z:a*Math.cos(s)}}}),d(["./shared"],function(c){class b{constructor(A){this.keyCache={},A&&this.replace(A)}replace(A){this._layerConfigs={},this._layers={},this.update(A,[])}update(A,$){for(const Q of A){this._layerConfigs[Q.id]=Q;const ie=this._layers[Q.id]=c.aC(Q);ie._featureFilter=c.a6(ie.filter),this.keyCache[Q.id]&&delete this.keyCache[Q.id]}for(const Q of $)delete this.keyCache[Q],delete this._layerConfigs[Q],delete this._layers[Q];this.familiesBySource={};const W=c.bl(Object.values(this._layerConfigs),this.keyCache);for(const Q of W){const ie=Q.map(Ue=>this._layers[Ue.id]),xe=ie[0];if(xe.visibility==="none")continue;const fe=xe.source||"";let oe=this.familiesBySource[fe];oe||(oe=this.familiesBySource[fe]={});const _e=xe.sourceLayer||"_geojsonTileLayer";let De=oe[_e];De||(De=oe[_e]=[]),De.push(ie)}}}class w{constructor(A){const $={},W=[];for(const fe in A){const oe=A[fe],_e=$[fe]={};for(const De in oe){const Ue=oe[+De];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;const qe={x:0,y:0,w:Ue.bitmap.width+2,h:Ue.bitmap.height+2};W.push(qe),_e[De]={rect:qe,metrics:Ue.metrics}}}const{w:Q,h:ie}=c.p(W),xe=new c.q({width:Q||1,height:ie||1});for(const fe in A){const oe=A[fe];for(const _e in oe){const De=oe[+_e];if(!De||De.bitmap.width===0||De.bitmap.height===0)continue;const Ue=$[fe][_e].rect;c.q.copy(De.bitmap,xe,{x:0,y:0},{x:Ue.x+1,y:Ue.y+1},De.bitmap)}}this.image=xe,this.positions=$}}c.bm("GlyphAtlas",w);class k{constructor(A){this.tileID=new c.O(A.tileID.overscaledZ,A.tileID.wrap,A.tileID.canonical.z,A.tileID.canonical.x,A.tileID.canonical.y),this.uid=A.uid,this.zoom=A.zoom,this.pixelRatio=A.pixelRatio,this.tileSize=A.tileSize,this.source=A.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=A.showCollisionBoxes,this.collectResourceTiming=!!A.collectResourceTiming,this.returnDependencies=!!A.returnDependencies,this.promoteId=A.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(A,$,W,Q,ie){this.status="parsing",this.data=A,this.collisionBoxArray=new c.a3;const xe=new c.bn(Object.keys(A.layers).sort()),fe=new c.bo(this.tileID,this.promoteId);fe.bucketLayerIDs=[];const oe={},_e={featureIndex:fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:W},De=$.familiesBySource[this.source];for(const ut in De){const _t=A.layers[ut];if(!_t)continue;_t.version===1&&c.w(`Vector tile source "${this.source}" layer "${ut}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ur=xe.encode(ut),tr=[];for(let yr=0;yr<_t.length;yr++){const Xt=_t.feature(yr),Tt=fe.getId(Xt,ut);tr.push({feature:Xt,id:Tt,index:yr,sourceLayerIndex:ur})}for(const yr of De[ut]){const Xt=yr[0];Xt.source!==this.source&&c.w(`layer.source = ${Xt.source} does not equal this.source = ${this.source}`),Xt.minzoom&&this.zoom<Math.floor(Xt.minzoom)||Xt.maxzoom&&this.zoom>=Xt.maxzoom||Xt.visibility!=="none"&&(z(yr,this.zoom,W),(oe[Xt.id]=Xt.createBucket({index:fe.bucketLayerIDs.length,layers:yr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ur,sourceID:this.source})).populate(tr,_e,this.tileID.canonical),fe.bucketLayerIDs.push(yr.map(Tt=>Tt.id)))}}let Ue,qe,Ye,St;const st=c.aH(_e.glyphDependencies,ut=>Object.keys(ut).map(Number));this.inFlightDependencies.forEach(ut=>ut==null?void 0:ut.cancel()),this.inFlightDependencies=[];const Lt=++this.dependencySentinel;Object.keys(st).length?this.inFlightDependencies.push(Q.send("getGlyphs",{uid:this.uid,stacks:st,source:this.source,tileID:this.tileID,type:"glyphs"},(ut,_t)=>{Lt===this.dependencySentinel&&(Ue||(Ue=ut,qe=_t,nt.call(this)))})):qe={};const Re=Object.keys(_e.iconDependencies);Re.length?this.inFlightDependencies.push(Q.send("getImages",{icons:Re,source:this.source,tileID:this.tileID,type:"icons"},(ut,_t)=>{Lt===this.dependencySentinel&&(Ue||(Ue=ut,Ye=_t,nt.call(this)))})):Ye={};const Ne=Object.keys(_e.patternDependencies);function nt(){if(Ue)return ie(Ue);if(qe&&Ye&&St){const ut=new w(qe),_t=new c.bp(Ye,St);for(const ur in oe){const tr=oe[ur];tr instanceof c.a4?(z(tr.layers,this.zoom,W),c.bq({bucket:tr,glyphMap:qe,glyphPositions:ut.positions,imageMap:Ye,imagePositions:_t.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):tr.hasPattern&&(tr instanceof c.br||tr instanceof c.bs||tr instanceof c.bt)&&(z(tr.layers,this.zoom,W),tr.addFeatures(_e,this.tileID.canonical,_t.patternPositions))}this.status="done",ie(null,{buckets:Object.values(oe).filter(ur=>!ur.isEmpty()),featureIndex:fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ut.image,imageAtlas:_t,glyphMap:this.returnDependencies?qe:null,iconMap:this.returnDependencies?Ye:null,glyphPositions:this.returnDependencies?ut.positions:null})}}Ne.length?this.inFlightDependencies.push(Q.send("getImages",{icons:Ne,source:this.source,tileID:this.tileID,type:"patterns"},(ut,_t)=>{Lt===this.dependencySentinel&&(Ue||(Ue=ut,St=_t,nt.call(this)))})):St={},nt.call(this)}}function z(de,A,$){const W=new c.a8(A);for(const Q of de)Q.recalculate(W,$)}function P(de,A){const $=c.l(de.request,(W,Q,ie,xe)=>{if(W)A(W);else if(Q)try{const fe=new c.bw.VectorTile(new c.bv(Q));A(null,{vectorTile:fe,rawData:Q,cacheControl:ie,expires:xe})}catch(fe){const oe=new Uint8Array(Q);let _e=`Unable to parse the tile at ${de.request.url}, `;_e+=oe[0]===31&&oe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${fe.messge}`,A(new Error(_e))}});return()=>{$.cancel(),A()}}class V{constructor(A,$,W,Q){this.actor=A,this.layerIndex=$,this.availableImages=W,this.loadVectorData=Q||P,this.fetching={},this.loading={},this.loaded={}}loadTile(A,$){const W=A.uid;this.loading||(this.loading={});const Q=!!(A&&A.request&&A.request.collectResourceTiming)&&new c.bu(A.request),ie=this.loading[W]=new k(A);ie.abort=this.loadVectorData(A,(xe,fe)=>{if(delete this.loading[W],xe||!fe)return ie.status="done",this.loaded[W]=ie,$(xe);const oe=fe.rawData,_e={};fe.expires&&(_e.expires=fe.expires),fe.cacheControl&&(_e.cacheControl=fe.cacheControl);const De={};if(Q){const Ue=Q.finish();Ue&&(De.resourceTiming=JSON.parse(JSON.stringify(Ue)))}ie.vectorTile=fe.vectorTile,ie.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ue,qe)=>{if(delete this.fetching[W],Ue||!qe)return $(Ue);$(null,c.e({rawTileData:oe.slice(0)},qe,_e,De))}),this.loaded=this.loaded||{},this.loaded[W]=ie,this.fetching[W]={rawTileData:oe,cacheControl:_e,resourceTiming:De}})}reloadTile(A,$){const W=this.loaded,Q=A.uid;if(W&&W[Q]){const ie=W[Q];ie.showCollisionBoxes=A.showCollisionBoxes,ie.status==="parsing"?ie.parse(ie.vectorTile,this.layerIndex,this.availableImages,this.actor,(xe,fe)=>{if(xe||!fe)return $(xe,fe);let oe;if(this.fetching[Q]){const{rawTileData:_e,cacheControl:De,resourceTiming:Ue}=this.fetching[Q];delete this.fetching[Q],oe=c.e({rawTileData:_e.slice(0)},fe,De,Ue)}else oe=fe;$(null,oe)}):ie.status==="done"&&(ie.vectorTile?ie.parse(ie.vectorTile,this.layerIndex,this.availableImages,this.actor,$):$())}}abortTile(A,$){const W=this.loading,Q=A.uid;W&&W[Q]&&W[Q].abort&&(W[Q].abort(),delete W[Q]),$()}removeTile(A,$){const W=this.loaded,Q=A.uid;W&&W[Q]&&delete W[Q],$()}}class U{constructor(){this.loaded={}}loadTile(A,$){return c._(this,void 0,void 0,function*(){const{uid:W,encoding:Q,rawImageData:ie,redFactor:xe,greenFactor:fe,blueFactor:oe,baseShift:_e}=A,De=ie.width+2,Ue=ie.height+2,qe=c.a(ie)?new c.R({width:De,height:Ue},yield c.bx(ie,-1,-1,De,Ue)):ie,Ye=new c.by(W,qe,Q,xe,fe,oe,_e);this.loaded=this.loaded||{},this.loaded[W]=Ye,$(null,Ye)})}removeTile(A){const $=this.loaded,W=A.uid;$&&$[W]&&delete $[W]}}function H(de,A){if(de.length!==0){X(de[0],A);for(var $=1;$<de.length;$++)X(de[$],!A)}}function X(de,A){for(var $=0,W=0,Q=0,ie=de.length,xe=ie-1;Q<ie;xe=Q++){var fe=(de[Q][0]-de[xe][0])*(de[xe][1]+de[Q][1]),oe=$+fe;W+=Math.abs($)>=Math.abs(fe)?$-oe+fe:fe-oe+$,$=oe}$+W>=0!=!!A&&de.reverse()}var B=c.bz(function de(A,$){var W,Q=A&&A.type;if(Q==="FeatureCollection")for(W=0;W<A.features.length;W++)de(A.features[W],$);else if(Q==="GeometryCollection")for(W=0;W<A.geometries.length;W++)de(A.geometries[W],$);else if(Q==="Feature")de(A.geometry,$);else if(Q==="Polygon")H(A.coordinates,$);else if(Q==="MultiPolygon")for(W=0;W<A.coordinates.length;W++)H(A.coordinates[W],$);return A});const L=c.bw.VectorTileFeature.prototype.toGeoJSON;var G={exports:{}},te=c.bA,ne=c.bw.VectorTileFeature,he=Z;function Z(de,A){this.options=A||{},this.features=de,this.length=de.length}function ue(de,A){this.id=typeof de.id=="number"?de.id:void 0,this.type=de.type,this.rawGeometry=de.type===1?[de.geometry]:de.geometry,this.properties=de.tags,this.extent=A||4096}Z.prototype.feature=function(de){return new ue(this.features[de],this.options.extent)},ue.prototype.loadGeometry=function(){var de=this.rawGeometry;this.geometry=[];for(var A=0;A<de.length;A++){for(var $=de[A],W=[],Q=0;Q<$.length;Q++)W.push(new te($[Q][0],$[Q][1]));this.geometry.push(W)}return this.geometry},ue.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var de=this.geometry,A=1/0,$=-1/0,W=1/0,Q=-1/0,ie=0;ie<de.length;ie++)for(var xe=de[ie],fe=0;fe<xe.length;fe++){var oe=xe[fe];A=Math.min(A,oe.x),$=Math.max($,oe.x),W=Math.min(W,oe.y),Q=Math.max(Q,oe.y)}return[A,W,$,Q]},ue.prototype.toGeoJSON=ne.prototype.toGeoJSON;var Ce=c.bB,ye=he;function Ee(de){var A=new Ce;return function($,W){for(var Q in $.layers)W.writeMessage(3,Se,$.layers[Q])}(de,A),A.finish()}function Se(de,A){var $;A.writeVarintField(15,de.version||1),A.writeStringField(1,de.name||""),A.writeVarintField(5,de.extent||4096);var W={keys:[],values:[],keycache:{},valuecache:{}};for($=0;$<de.length;$++)W.feature=de.feature($),A.writeMessage(2,ze,W);var Q=W.keys;for($=0;$<Q.length;$++)A.writeStringField(3,Q[$]);var ie=W.values;for($=0;$<ie.length;$++)A.writeMessage(4,ke,ie[$])}function ze(de,A){var $=de.feature;$.id!==void 0&&A.writeVarintField(1,$.id),A.writeMessage(2,We,de),A.writeVarintField(3,$.type),A.writeMessage(4,Oe,$)}function We(de,A){var $=de.feature,W=de.keys,Q=de.values,ie=de.keycache,xe=de.valuecache;for(var fe in $.properties){var oe=$.properties[fe],_e=ie[fe];if(oe!==null){_e===void 0&&(W.push(fe),ie[fe]=_e=W.length-1),A.writeVarint(_e);var De=typeof oe;De!=="string"&&De!=="boolean"&&De!=="number"&&(oe=JSON.stringify(oe));var Ue=De+":"+oe,qe=xe[Ue];qe===void 0&&(Q.push(oe),xe[Ue]=qe=Q.length-1),A.writeVarint(qe)}}}function Fe(de,A){return(A<<3)+(7&de)}function Me(de){return de<<1^de>>31}function Oe(de,A){for(var $=de.loadGeometry(),W=de.type,Q=0,ie=0,xe=$.length,fe=0;fe<xe;fe++){var oe=$[fe],_e=1;W===1&&(_e=oe.length),A.writeVarint(Fe(1,_e));for(var De=W===3?oe.length-1:oe.length,Ue=0;Ue<De;Ue++){Ue===1&&W!==1&&A.writeVarint(Fe(2,De-1));var qe=oe[Ue].x-Q,Ye=oe[Ue].y-ie;A.writeVarint(Me(qe)),A.writeVarint(Me(Ye)),Q+=qe,ie+=Ye}W===3&&A.writeVarint(Fe(7,1))}}function ke(de,A){var $=typeof de;$==="string"?A.writeStringField(1,de):$==="boolean"?A.writeBooleanField(7,de):$==="number"&&(de%1!=0?A.writeDoubleField(3,de):de<0?A.writeSVarintField(6,de):A.writeVarintField(5,de))}G.exports=Ee,G.exports.fromVectorTileJs=Ee,G.exports.fromGeojsonVt=function(de,A){A=A||{};var $={};for(var W in de)$[W]=new ye(de[W].features,A),$[W].name=W,$[W].version=A.version,$[W].extent=A.extent;return Ee({layers:$})},G.exports.GeoJSONWrapper=ye;var Ge=c.bz(G.exports);const Ke={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:de=>de},ht=Math.fround||(vt=new Float32Array(1),de=>(vt[0]=+de,vt[0]));var vt;const gt=3,Ct=5,At=6;class Zt{constructor(A){this.options=Object.assign(Object.create(Ke),A),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(A){const{log:$,minZoom:W,maxZoom:Q}=this.options;$&&console.time("total time");const ie=`prepare ${A.length} points`;$&&console.time(ie),this.points=A;const xe=[];for(let oe=0;oe<A.length;oe++){const _e=A[oe];if(!_e.geometry)continue;const[De,Ue]=_e.geometry.coordinates,qe=ht(rt(De)),Ye=ht(pt(Ue));xe.push(qe,Ye,1/0,oe,-1,1),this.options.reduce&&xe.push(0)}let fe=this.trees[Q+1]=this._createTree(xe);$&&console.timeEnd(ie);for(let oe=Q;oe>=W;oe--){const _e=+Date.now();fe=this.trees[oe]=this._createTree(this._cluster(fe,oe)),$&&console.log("z%d: %d clusters in %dms",oe,fe.numItems,+Date.now()-_e)}return $&&console.timeEnd("total time"),this}getClusters(A,$){let W=((A[0]+180)%360+360)%360-180;const Q=Math.max(-90,Math.min(90,A[1]));let ie=A[2]===180?180:((A[2]+180)%360+360)%360-180;const xe=Math.max(-90,Math.min(90,A[3]));if(A[2]-A[0]>=360)W=-180,ie=180;else if(W>ie){const Ue=this.getClusters([W,Q,180,xe],$),qe=this.getClusters([-180,Q,ie,xe],$);return Ue.concat(qe)}const fe=this.trees[this._limitZoom($)],oe=fe.range(rt(W),pt(xe),rt(ie),pt(Q)),_e=fe.data,De=[];for(const Ue of oe){const qe=this.stride*Ue;De.push(_e[qe+Ct]>1?kt(_e,qe,this.clusterProps):this.points[_e[qe+gt]])}return De}getChildren(A){const $=this._getOriginId(A),W=this._getOriginZoom(A),Q="No cluster with the specified id.",ie=this.trees[W];if(!ie)throw new Error(Q);const xe=ie.data;if($*this.stride>=xe.length)throw new Error(Q);const fe=this.options.radius/(this.options.extent*Math.pow(2,W-1)),oe=ie.within(xe[$*this.stride],xe[$*this.stride+1],fe),_e=[];for(const De of oe){const Ue=De*this.stride;xe[Ue+4]===A&&_e.push(xe[Ue+Ct]>1?kt(xe,Ue,this.clusterProps):this.points[xe[Ue+gt]])}if(_e.length===0)throw new Error(Q);return _e}getLeaves(A,$,W){const Q=[];return this._appendLeaves(Q,A,$=$||10,W=W||0,0),Q}getTile(A,$,W){const Q=this.trees[this._limitZoom(A)],ie=Math.pow(2,A),{extent:xe,radius:fe}=this.options,oe=fe/xe,_e=(W-oe)/ie,De=(W+1+oe)/ie,Ue={features:[]};return this._addTileFeatures(Q.range(($-oe)/ie,_e,($+1+oe)/ie,De),Q.data,$,W,ie,Ue),$===0&&this._addTileFeatures(Q.range(1-oe/ie,_e,1,De),Q.data,ie,W,ie,Ue),$===ie-1&&this._addTileFeatures(Q.range(0,_e,oe/ie,De),Q.data,-1,W,ie,Ue),Ue.features.length?Ue:null}getClusterExpansionZoom(A){let $=this._getOriginZoom(A)-1;for(;$<=this.options.maxZoom;){const W=this.getChildren(A);if($++,W.length!==1)break;A=W[0].properties.cluster_id}return $}_appendLeaves(A,$,W,Q,ie){const xe=this.getChildren($);for(const fe of xe){const oe=fe.properties;if(oe&&oe.cluster?ie+oe.point_count<=Q?ie+=oe.point_count:ie=this._appendLeaves(A,oe.cluster_id,W,Q,ie):ie<Q?ie++:A.push(fe),A.length===W)break}return ie}_createTree(A){const $=new c.av(A.length/this.stride|0,this.options.nodeSize,Float32Array);for(let W=0;W<A.length;W+=this.stride)$.add(A[W],A[W+1]);return $.finish(),$.data=A,$}_addTileFeatures(A,$,W,Q,ie,xe){for(const fe of A){const oe=fe*this.stride,_e=$[oe+Ct]>1;let De,Ue,qe;if(_e)De=$e($,oe,this.clusterProps),Ue=$[oe],qe=$[oe+1];else{const st=this.points[$[oe+gt]];De=st.properties;const[Lt,Re]=st.geometry.coordinates;Ue=rt(Lt),qe=pt(Re)}const Ye={type:1,geometry:[[Math.round(this.options.extent*(Ue*ie-W)),Math.round(this.options.extent*(qe*ie-Q))]],tags:De};let St;St=_e||this.options.generateId?$[oe+gt]:this.points[$[oe+gt]].id,St!==void 0&&(Ye.id=St),xe.features.push(Ye)}}_limitZoom(A){return Math.max(this.options.minZoom,Math.min(Math.floor(+A),this.options.maxZoom+1))}_cluster(A,$){const{radius:W,extent:Q,reduce:ie,minPoints:xe}=this.options,fe=W/(Q*Math.pow(2,$)),oe=A.data,_e=[],De=this.stride;for(let Ue=0;Ue<oe.length;Ue+=De){if(oe[Ue+2]<=$)continue;oe[Ue+2]=$;const qe=oe[Ue],Ye=oe[Ue+1],St=A.within(oe[Ue],oe[Ue+1],fe),st=oe[Ue+Ct];let Lt=st;for(const Re of St){const Ne=Re*De;oe[Ne+2]>$&&(Lt+=oe[Ne+Ct])}if(Lt>st&&Lt>=xe){let Re,Ne=qe*st,nt=Ye*st,ut=-1;const _t=((Ue/De|0)<<5)+($+1)+this.points.length;for(const ur of St){const tr=ur*De;if(oe[tr+2]<=$)continue;oe[tr+2]=$;const yr=oe[tr+Ct];Ne+=oe[tr]*yr,nt+=oe[tr+1]*yr,oe[tr+4]=_t,ie&&(Re||(Re=this._map(oe,Ue,!0),ut=this.clusterProps.length,this.clusterProps.push(Re)),ie(Re,this._map(oe,tr)))}oe[Ue+4]=_t,_e.push(Ne/Lt,nt/Lt,1/0,_t,-1,Lt),ie&&_e.push(ut)}else{for(let Re=0;Re<De;Re++)_e.push(oe[Ue+Re]);if(Lt>1)for(const Re of St){const Ne=Re*De;if(!(oe[Ne+2]<=$)){oe[Ne+2]=$;for(let nt=0;nt<De;nt++)_e.push(oe[Ne+nt])}}}}return _e}_getOriginId(A){return A-this.points.length>>5}_getOriginZoom(A){return(A-this.points.length)%32}_map(A,$,W){if(A[$+Ct]>1){const xe=this.clusterProps[A[$+At]];return W?Object.assign({},xe):xe}const Q=this.points[A[$+gt]].properties,ie=this.options.map(Q);return W&&ie===Q?Object.assign({},ie):ie}}function kt(de,A,$){return{type:"Feature",id:de[A+gt],properties:$e(de,A,$),geometry:{type:"Point",coordinates:[(W=de[A],360*(W-.5)),Dt(de[A+1])]}};var W}function $e(de,A,$){const W=de[A+Ct],Q=W>=1e4?`${Math.round(W/1e3)}k`:W>=1e3?Math.round(W/100)/10+"k":W,ie=de[A+At],xe=ie===-1?{}:Object.assign({},$[ie]);return Object.assign(xe,{cluster:!0,cluster_id:de[A+gt],point_count:W,point_count_abbreviated:Q})}function rt(de){return de/360+.5}function pt(de){const A=Math.sin(de*Math.PI/180),$=.5-.25*Math.log((1+A)/(1-A))/Math.PI;return $<0?0:$>1?1:$}function Dt(de){const A=(180-360*de)*Math.PI/180;return 360*Math.atan(Math.exp(A))/Math.PI-90}function Mt(de,A,$,W){for(var Q,ie=W,xe=$-A>>1,fe=$-A,oe=de[A],_e=de[A+1],De=de[$],Ue=de[$+1],qe=A+3;qe<$;qe+=3){var Ye=gr(de[qe],de[qe+1],oe,_e,De,Ue);if(Ye>ie)Q=qe,ie=Ye;else if(Ye===ie){var St=Math.abs(qe-xe);St<fe&&(Q=qe,fe=St)}}ie>W&&(Q-A>3&&Mt(de,A,Q,W),de[Q+2]=ie,$-Q>3&&Mt(de,Q,$,W))}function gr(de,A,$,W,Q,ie){var xe=Q-$,fe=ie-W;if(xe!==0||fe!==0){var oe=((de-$)*xe+(A-W)*fe)/(xe*xe+fe*fe);oe>1?($=Q,W=ie):oe>0&&($+=xe*oe,W+=fe*oe)}return(xe=de-$)*xe+(fe=A-W)*fe}function Cr(de,A,$,W){var Q={id:de===void 0?null:de,type:A,geometry:$,tags:W,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ie){var xe=ie.geometry,fe=ie.type;if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")lr(ie,xe);else if(fe==="Polygon"||fe==="MultiLineString")for(var oe=0;oe<xe.length;oe++)lr(ie,xe[oe]);else if(fe==="MultiPolygon")for(oe=0;oe<xe.length;oe++)for(var _e=0;_e<xe[oe].length;_e++)lr(ie,xe[oe][_e])}(Q),Q}function lr(de,A){for(var $=0;$<A.length;$+=3)de.minX=Math.min(de.minX,A[$]),de.minY=Math.min(de.minY,A[$+1]),de.maxX=Math.max(de.maxX,A[$]),de.maxY=Math.max(de.maxY,A[$+1])}function yt(de,A,$,W){if(A.geometry){var Q=A.geometry.coordinates,ie=A.geometry.type,xe=Math.pow($.tolerance/((1<<$.maxZoom)*$.extent),2),fe=[],oe=A.id;if($.promoteId?oe=A.properties[$.promoteId]:$.generateId&&(oe=W||0),ie==="Point")Dr(Q,fe);else if(ie==="MultiPoint")for(var _e=0;_e<Q.length;_e++)Dr(Q[_e],fe);else if(ie==="LineString")er(Q,fe,xe,!1);else if(ie==="MultiLineString"){if($.lineMetrics){for(_e=0;_e<Q.length;_e++)er(Q[_e],fe=[],xe,!1),de.push(Cr(oe,"LineString",fe,A.properties));return}Fr(Q,fe,xe,!1)}else if(ie==="Polygon")Fr(Q,fe,xe,!0);else{if(ie!=="MultiPolygon"){if(ie==="GeometryCollection"){for(_e=0;_e<A.geometry.geometries.length;_e++)yt(de,{id:oe,geometry:A.geometry.geometries[_e],properties:A.properties},$,W);return}throw new Error("Input data is not a valid GeoJSON object.")}for(_e=0;_e<Q.length;_e++){var De=[];Fr(Q[_e],De,xe,!0),fe.push(De)}}de.push(Cr(oe,ie,fe,A.properties))}}function Dr(de,A){A.push(Ae(de[0])),A.push(cr(de[1])),A.push(0)}function er(de,A,$,W){for(var Q,ie,xe=0,fe=0;fe<de.length;fe++){var oe=Ae(de[fe][0]),_e=cr(de[fe][1]);A.push(oe),A.push(_e),A.push(0),fe>0&&(xe+=W?(Q*_e-oe*ie)/2:Math.sqrt(Math.pow(oe-Q,2)+Math.pow(_e-ie,2))),Q=oe,ie=_e}var De=A.length-3;A[2]=1,Mt(A,0,De,$),A[De+2]=1,A.size=Math.abs(xe),A.start=0,A.end=A.size}function Fr(de,A,$,W){for(var Q=0;Q<de.length;Q++){var ie=[];er(de[Q],ie,$,W),A.push(ie)}}function Ae(de){return de/360+.5}function cr(de){var A=Math.sin(de*Math.PI/180),$=.5-.25*Math.log((1+A)/(1-A))/Math.PI;return $<0?0:$>1?1:$}function ir(de,A,$,W,Q,ie,xe,fe){if(W/=A,ie>=($/=A)&&xe<W)return de;if(xe<$||ie>=W)return null;for(var oe=[],_e=0;_e<de.length;_e++){var De=de[_e],Ue=De.geometry,qe=De.type,Ye=Q===0?De.minX:De.minY,St=Q===0?De.maxX:De.maxY;if(Ye>=$&&St<W)oe.push(De);else if(!(St<$||Ye>=W)){var st=[];if(qe==="Point"||qe==="MultiPoint")Ft(Ue,st,$,W,Q);else if(qe==="LineString")qt(Ue,st,$,W,Q,!1,fe.lineMetrics);else if(qe==="MultiLineString")Pr(Ue,st,$,W,Q,!1);else if(qe==="Polygon")Pr(Ue,st,$,W,Q,!0);else if(qe==="MultiPolygon")for(var Lt=0;Lt<Ue.length;Lt++){var Re=[];Pr(Ue[Lt],Re,$,W,Q,!0),Re.length&&st.push(Re)}if(st.length){if(fe.lineMetrics&&qe==="LineString"){for(Lt=0;Lt<st.length;Lt++)oe.push(Cr(De.id,qe,st[Lt],De.tags));continue}qe!=="LineString"&&qe!=="MultiLineString"||(st.length===1?(qe="LineString",st=st[0]):qe="MultiLineString"),qe!=="Point"&&qe!=="MultiPoint"||(qe=st.length===3?"Point":"MultiPoint"),oe.push(Cr(De.id,qe,st,De.tags))}}}return oe.length?oe:null}function Ft(de,A,$,W,Q){for(var ie=0;ie<de.length;ie+=3){var xe=de[ie+Q];xe>=$&&xe<=W&&(A.push(de[ie]),A.push(de[ie+1]),A.push(de[ie+2]))}}function qt(de,A,$,W,Q,ie,xe){for(var fe,oe,_e=kr(de),De=Q===0?nr:rr,Ue=de.start,qe=0;qe<de.length-3;qe+=3){var Ye=de[qe],St=de[qe+1],st=de[qe+2],Lt=de[qe+3],Re=de[qe+4],Ne=Q===0?Ye:St,nt=Q===0?Lt:Re,ut=!1;xe&&(fe=Math.sqrt(Math.pow(Ye-Lt,2)+Math.pow(St-Re,2))),Ne<$?nt>$&&(oe=De(_e,Ye,St,Lt,Re,$),xe&&(_e.start=Ue+fe*oe)):Ne>W?nt<W&&(oe=De(_e,Ye,St,Lt,Re,W),xe&&(_e.start=Ue+fe*oe)):sr(_e,Ye,St,st),nt<$&&Ne>=$&&(oe=De(_e,Ye,St,Lt,Re,$),ut=!0),nt>W&&Ne<=W&&(oe=De(_e,Ye,St,Lt,Re,W),ut=!0),!ie&&ut&&(xe&&(_e.end=Ue+fe*oe),A.push(_e),_e=kr(de)),xe&&(Ue+=fe)}var _t=de.length-3;Ye=de[_t],St=de[_t+1],st=de[_t+2],(Ne=Q===0?Ye:St)>=$&&Ne<=W&&sr(_e,Ye,St,st),_t=_e.length-3,ie&&_t>=3&&(_e[_t]!==_e[0]||_e[_t+1]!==_e[1])&&sr(_e,_e[0],_e[1],_e[2]),_e.length&&A.push(_e)}function kr(de){var A=[];return A.size=de.size,A.start=de.start,A.end=de.end,A}function Pr(de,A,$,W,Q,ie){for(var xe=0;xe<de.length;xe++)qt(de[xe],A,$,W,Q,ie,!1)}function sr(de,A,$,W){de.push(A),de.push($),de.push(W)}function nr(de,A,$,W,Q,ie){var xe=(ie-A)/(W-A);return de.push(ie),de.push($+(Q-$)*xe),de.push(1),xe}function rr(de,A,$,W,Q,ie){var xe=(ie-$)/(Q-$);return de.push(A+(W-A)*xe),de.push(ie),de.push(1),xe}function Rr(de,A){for(var $=[],W=0;W<de.length;W++){var Q,ie=de[W],xe=ie.type;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")Q=it(ie.geometry,A);else if(xe==="MultiLineString"||xe==="Polygon"){Q=[];for(var fe=0;fe<ie.geometry.length;fe++)Q.push(it(ie.geometry[fe],A))}else if(xe==="MultiPolygon")for(Q=[],fe=0;fe<ie.geometry.length;fe++){for(var oe=[],_e=0;_e<ie.geometry[fe].length;_e++)oe.push(it(ie.geometry[fe][_e],A));Q.push(oe)}$.push(Cr(ie.id,xe,Q,ie.tags))}return $}function it(de,A){var $=[];$.size=de.size,de.start!==void 0&&($.start=de.start,$.end=de.end);for(var W=0;W<de.length;W+=3)$.push(de[W]+A,de[W+1],de[W+2]);return $}function Le(de,A){if(de.transformed)return de;var $,W,Q,ie=1<<de.z,xe=de.x,fe=de.y;for($=0;$<de.features.length;$++){var oe=de.features[$],_e=oe.geometry,De=oe.type;if(oe.geometry=[],De===1)for(W=0;W<_e.length;W+=2)oe.geometry.push(Wt(_e[W],_e[W+1],A,ie,xe,fe));else for(W=0;W<_e.length;W++){var Ue=[];for(Q=0;Q<_e[W].length;Q+=2)Ue.push(Wt(_e[W][Q],_e[W][Q+1],A,ie,xe,fe));oe.geometry.push(Ue)}}return de.transformed=!0,de}function Wt(de,A,$,W,Q,ie){return[Math.round($*(de*W-Q)),Math.round($*(A*W-ie))]}function Rt(de,A,$,W,Q){for(var ie=A===Q.maxZoom?0:Q.tolerance/((1<<A)*Q.extent),xe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:$,y:W,z:A,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},fe=0;fe<de.length;fe++){xe.numFeatures++,_r(xe,de[fe],ie,Q);var oe=de[fe].minX,_e=de[fe].minY,De=de[fe].maxX,Ue=de[fe].maxY;oe<xe.minX&&(xe.minX=oe),_e<xe.minY&&(xe.minY=_e),De>xe.maxX&&(xe.maxX=De),Ue>xe.maxY&&(xe.maxY=Ue)}return xe}function _r(de,A,$,W){var Q=A.geometry,ie=A.type,xe=[];if(ie==="Point"||ie==="MultiPoint")for(var fe=0;fe<Q.length;fe+=3)xe.push(Q[fe]),xe.push(Q[fe+1]),de.numPoints++,de.numSimplified++;else if(ie==="LineString")xr(xe,Q,de,$,!1,!1);else if(ie==="MultiLineString"||ie==="Polygon")for(fe=0;fe<Q.length;fe++)xr(xe,Q[fe],de,$,ie==="Polygon",fe===0);else if(ie==="MultiPolygon")for(var oe=0;oe<Q.length;oe++){var _e=Q[oe];for(fe=0;fe<_e.length;fe++)xr(xe,_e[fe],de,$,!0,fe===0)}if(xe.length){var De=A.tags||null;if(ie==="LineString"&&W.lineMetrics){for(var Ue in De={},A.tags)De[Ue]=A.tags[Ue];De.mapbox_clip_start=Q.start/Q.size,De.mapbox_clip_end=Q.end/Q.size}var qe={geometry:xe,type:ie==="Polygon"||ie==="MultiPolygon"?3:ie==="LineString"||ie==="MultiLineString"?2:1,tags:De};A.id!==null&&(qe.id=A.id),de.features.push(qe)}}function xr(de,A,$,W,Q,ie){var xe=W*W;if(W>0&&A.size<(Q?xe:W))$.numPoints+=A.length/3;else{for(var fe=[],oe=0;oe<A.length;oe+=3)(W===0||A[oe+2]>xe)&&($.numSimplified++,fe.push(A[oe]),fe.push(A[oe+1])),$.numPoints++;Q&&function(_e,De){for(var Ue=0,qe=0,Ye=_e.length,St=Ye-2;qe<Ye;St=qe,qe+=2)Ue+=(_e[qe]-_e[St])*(_e[qe+1]+_e[St+1]);if(Ue>0===De)for(qe=0,Ye=_e.length;qe<Ye/2;qe+=2){var st=_e[qe],Lt=_e[qe+1];_e[qe]=_e[Ye-2-qe],_e[qe+1]=_e[Ye-1-qe],_e[Ye-2-qe]=st,_e[Ye-1-qe]=Lt}}(fe,ie),de.push(fe)}}function Qe(de,A){var $=(A=this.options=function(Q,ie){for(var xe in ie)Q[xe]=ie[xe];return Q}(Object.create(this.options),A)).debug;if($&&console.time("preprocess data"),A.maxZoom<0||A.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(A.promoteId&&A.generateId)throw new Error("promoteId and generateId cannot be used together.");var W=function(Q,ie){var xe=[];if(Q.type==="FeatureCollection")for(var fe=0;fe<Q.features.length;fe++)yt(xe,Q.features[fe],ie,fe);else yt(xe,Q.type==="Feature"?Q:{geometry:Q},ie);return xe}(de,A);this.tiles={},this.tileCoords=[],$&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",A.indexMaxZoom,A.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),W=function(Q,ie){var xe=ie.buffer/ie.extent,fe=Q,oe=ir(Q,1,-1-xe,xe,0,-1,2,ie),_e=ir(Q,1,1-xe,2+xe,0,-1,2,ie);return(oe||_e)&&(fe=ir(Q,1,-xe,1+xe,0,-1,2,ie)||[],oe&&(fe=Rr(oe,1).concat(fe)),_e&&(fe=fe.concat(Rr(_e,-1)))),fe}(W,A),W.length&&this.splitTile(W,0,0,0),$&&(W.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Kt(de,A,$){return 32*((1<<de)*$+A)+de}function $t(de,A){return A?de.properties[A]:de.id}function ar(de,A){if(de==null)return!0;if(de.type==="Feature")return $t(de,A)!=null;if(de.type==="FeatureCollection"){const $=new Set;for(const W of de.features){const Q=$t(W,A);if(Q==null||$.has(Q))return!1;$.add(Q)}return!0}return!1}function Gr(de,A){const $=new Map;if(de!=null)if(de.type==="Feature")$.set($t(de,A),de);else for(const W of de.features)$.set($t(W,A),W);return $}Qe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Qe.prototype.splitTile=function(de,A,$,W,Q,ie,xe){for(var fe=[de,A,$,W],oe=this.options,_e=oe.debug;fe.length;){W=fe.pop(),$=fe.pop(),A=fe.pop(),de=fe.pop();var De=1<<A,Ue=Kt(A,$,W),qe=this.tiles[Ue];if(!qe&&(_e>1&&console.time("creation"),qe=this.tiles[Ue]=Rt(de,A,$,W,oe),this.tileCoords.push({z:A,x:$,y:W}),_e)){_e>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",A,$,W,qe.numFeatures,qe.numPoints,qe.numSimplified),console.timeEnd("creation"));var Ye="z"+A;this.stats[Ye]=(this.stats[Ye]||0)+1,this.total++}if(qe.source=de,Q){if(A===oe.maxZoom||A===Q)continue;var St=1<<Q-A;if($!==Math.floor(ie/St)||W!==Math.floor(xe/St))continue}else if(A===oe.indexMaxZoom||qe.numPoints<=oe.indexMaxPoints)continue;if(qe.source=null,de.length!==0){_e>1&&console.time("clipping");var st,Lt,Re,Ne,nt,ut,_t=.5*oe.buffer/oe.extent,ur=.5-_t,tr=.5+_t,yr=1+_t;st=Lt=Re=Ne=null,nt=ir(de,De,$-_t,$+tr,0,qe.minX,qe.maxX,oe),ut=ir(de,De,$+ur,$+yr,0,qe.minX,qe.maxX,oe),de=null,nt&&(st=ir(nt,De,W-_t,W+tr,1,qe.minY,qe.maxY,oe),Lt=ir(nt,De,W+ur,W+yr,1,qe.minY,qe.maxY,oe),nt=null),ut&&(Re=ir(ut,De,W-_t,W+tr,1,qe.minY,qe.maxY,oe),Ne=ir(ut,De,W+ur,W+yr,1,qe.minY,qe.maxY,oe),ut=null),_e>1&&console.timeEnd("clipping"),fe.push(st||[],A+1,2*$,2*W),fe.push(Lt||[],A+1,2*$,2*W+1),fe.push(Re||[],A+1,2*$+1,2*W),fe.push(Ne||[],A+1,2*$+1,2*W+1)}}},Qe.prototype.getTile=function(de,A,$){var W=this.options,Q=W.extent,ie=W.debug;if(de<0||de>24)return null;var xe=1<<de,fe=Kt(de,A=(A%xe+xe)%xe,$);if(this.tiles[fe])return Le(this.tiles[fe],Q);ie>1&&console.log("drilling down to z%d-%d-%d",de,A,$);for(var oe,_e=de,De=A,Ue=$;!oe&&_e>0;)_e--,De=Math.floor(De/2),Ue=Math.floor(Ue/2),oe=this.tiles[Kt(_e,De,Ue)];return oe&&oe.source?(ie>1&&console.log("found parent tile z%d-%d-%d",_e,De,Ue),ie>1&&console.time("drilling down"),this.splitTile(oe.source,_e,De,Ue,de,A,$),ie>1&&console.timeEnd("drilling down"),this.tiles[fe]?Le(this.tiles[fe],Q):null):null};class Jt extends V{constructor(A,$,W,Q){super(A,$,W),this._dataUpdateable=new Map,this.loadGeoJSON=(ie,xe)=>{const{promoteId:fe}=ie;if(ie.request)return c.f(ie.request,(oe,_e,De,Ue)=>{this._dataUpdateable=ar(_e,fe)?Gr(_e,fe):void 0,xe(oe,_e,De,Ue)});if(typeof ie.data=="string")try{const oe=JSON.parse(ie.data);this._dataUpdateable=ar(oe,fe)?Gr(oe,fe):void 0,xe(null,oe)}catch{xe(new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`))}else ie.dataDiff?this._dataUpdateable?(function(oe,_e,De){var Ue,qe,Ye,St;if(_e.removeAll&&oe.clear(),_e.remove)for(const st of _e.remove)oe.delete(st);if(_e.add)for(const st of _e.add){const Lt=$t(st,De);Lt!=null&&oe.set(Lt,st)}if(_e.update)for(const st of _e.update){let Lt=oe.get(st.id);if(Lt==null)continue;const Re=!st.removeAllProperties&&(((Ue=st.removeProperties)===null||Ue===void 0?void 0:Ue.length)>0||((qe=st.addOrUpdateProperties)===null||qe===void 0?void 0:qe.length)>0);if((st.newGeometry||st.removeAllProperties||Re)&&(Lt=Object.assign({},Lt),oe.set(st.id,Lt),Re&&(Lt.properties=Object.assign({},Lt.properties))),st.newGeometry&&(Lt.geometry=st.newGeometry),st.removeAllProperties)Lt.properties={};else if(((Ye=st.removeProperties)===null||Ye===void 0?void 0:Ye.length)>0)for(const Ne of st.removeProperties)Object.prototype.hasOwnProperty.call(Lt.properties,Ne)&&delete Lt.properties[Ne];if(((St=st.addOrUpdateProperties)===null||St===void 0?void 0:St.length)>0)for(const{key:Ne,value:nt}of st.addOrUpdateProperties)Lt.properties[Ne]=nt}}(this._dataUpdateable,ie.dataDiff,fe),xe(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):xe(new Error(`Cannot update existing geojson data in ${ie.source}`)):xe(new Error(`Input data given to '${ie.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,Q&&(this.loadGeoJSON=Q)}loadGeoJSONTile(A,$){const W=A.tileID.canonical;if(!this._geoJSONIndex)return $(null,null);const Q=this._geoJSONIndex.getTile(W.z,W.x,W.y);if(!Q)return $(null,null);const ie=new class{constructor(fe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.N,this.length=fe.length,this._features=fe}feature(fe){return new class{constructor(oe){this._feature=oe,this.extent=c.N,this.type=oe.type,this.properties=oe.tags,"id"in oe&&!isNaN(oe.id)&&(this.id=parseInt(oe.id,10))}loadGeometry(){if(this._feature.type===1){const oe=[];for(const _e of this._feature.geometry)oe.push([new c.P(_e[0],_e[1])]);return oe}{const oe=[];for(const _e of this._feature.geometry){const De=[];for(const Ue of _e)De.push(new c.P(Ue[0],Ue[1]));oe.push(De)}return oe}}toGeoJSON(oe,_e,De){return L.call(this,oe,_e,De)}}(this._features[fe])}}(Q.features);let xe=Ge(ie);xe.byteOffset===0&&xe.byteLength===xe.buffer.byteLength||(xe=new Uint8Array(xe)),$(null,{vectorTile:ie,rawData:xe.buffer})}loadData(A,$){var W;(W=this._pendingRequest)===null||W===void 0||W.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Q=!!(A&&A.request&&A.request.collectResourceTiming)&&new c.bu(A.request);this._pendingCallback=$,this._pendingRequest=this.loadGeoJSON(A,(ie,xe)=>{if(delete this._pendingCallback,delete this._pendingRequest,ie||!xe)return $(ie);if(typeof xe!="object")return $(new Error(`Input data given to '${A.source}' is not a valid GeoJSON object.`));{B(xe,!0);try{if(A.filter){const oe=c.bC(A.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(oe.result==="error")throw new Error(oe.value.map(De=>`${De.key}: ${De.message}`).join(", "));xe={type:"FeatureCollection",features:xe.features.filter(De=>oe.value.evaluate({zoom:0},De))}}this._geoJSONIndex=A.cluster?new Zt(function({superclusterOptions:oe,clusterProperties:_e}){if(!_e||!oe)return oe;const De={},Ue={},qe={accumulated:null,zoom:0},Ye={properties:null},St=Object.keys(_e);for(const st of St){const[Lt,Re]=_e[st],Ne=c.bC(Re),nt=c.bC(typeof Lt=="string"?[Lt,["accumulated"],["get",st]]:Lt);De[st]=Ne.value,Ue[st]=nt.value}return oe.map=st=>{Ye.properties=st;const Lt={};for(const Re of St)Lt[Re]=De[Re].evaluate(qe,Ye);return Lt},oe.reduce=(st,Lt)=>{Ye.properties=Lt;for(const Re of St)qe.accumulated=st[Re],st[Re]=Ue[Re].evaluate(qe,Ye)},oe}(A)).load(xe.features):function(oe,_e){return new Qe(oe,_e)}(xe,A.geojsonVtOptions)}catch(oe){return $(oe)}this.loaded={};const fe={};if(Q){const oe=Q.finish();oe&&(fe.resourceTiming={},fe.resourceTiming[A.source]=JSON.parse(JSON.stringify(oe)))}$(null,fe)}})}reloadTile(A,$){const W=this.loaded;return W&&W[A.uid]?super.reloadTile(A,$):this.loadTile(A,$)}removeSource(A,$){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),$()}getClusterExpansionZoom(A,$){try{$(null,this._geoJSONIndex.getClusterExpansionZoom(A.clusterId))}catch(W){$(W)}}getClusterChildren(A,$){try{$(null,this._geoJSONIndex.getChildren(A.clusterId))}catch(W){$(W)}}getClusterLeaves(A,$){try{$(null,this._geoJSONIndex.getLeaves(A.clusterId,A.limit,A.offset))}catch(W){$(W)}}}class gn{constructor(A){this.self=A,this.actor=new c.C(A,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:V,geojson:Jt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=($,W)=>{if(this.workerSourceTypes[$])throw new Error(`Worker source with name "${$}" already registered.`);this.workerSourceTypes[$]=W},this.self.registerRTLTextPlugin=$=>{if(c.bD.isParsed())throw new Error("RTL text plugin already registered.");c.bD.applyArabicShaping=$.applyArabicShaping,c.bD.processBidirectionalText=$.processBidirectionalText,c.bD.processStyledBidirectionalText=$.processStyledBidirectionalText}}setReferrer(A,$){this.referrer=$}setImages(A,$,W){this.availableImages[A]=$;for(const Q in this.workerSources[A]){const ie=this.workerSources[A][Q];for(const xe in ie)ie[xe].availableImages=$}W()}setLayers(A,$,W){this.getLayerIndex(A).replace($),W()}updateLayers(A,$,W){this.getLayerIndex(A).update($.layers,$.removedIds),W()}loadTile(A,$,W){this.getWorkerSource(A,$.type,$.source).loadTile($,W)}loadDEMTile(A,$,W){this.getDEMWorkerSource(A,$.source).loadTile($,W)}reloadTile(A,$,W){this.getWorkerSource(A,$.type,$.source).reloadTile($,W)}abortTile(A,$,W){this.getWorkerSource(A,$.type,$.source).abortTile($,W)}removeTile(A,$,W){this.getWorkerSource(A,$.type,$.source).removeTile($,W)}removeDEMTile(A,$){this.getDEMWorkerSource(A,$.source).removeTile($)}removeSource(A,$,W){if(!this.workerSources[A]||!this.workerSources[A][$.type]||!this.workerSources[A][$.type][$.source])return;const Q=this.workerSources[A][$.type][$.source];delete this.workerSources[A][$.type][$.source],Q.removeSource!==void 0?Q.removeSource($,W):W()}loadWorkerSource(A,$,W){try{this.self.importScripts($.url),W()}catch(Q){W(Q.toString())}}syncRTLPluginState(A,$,W){try{c.bD.setState($);const Q=c.bD.getPluginURL();if(c.bD.isLoaded()&&!c.bD.isParsed()&&Q!=null){this.self.importScripts(Q);const ie=c.bD.isParsed();W(ie?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Q}`),ie)}}catch(Q){W(Q.toString())}}getAvailableImages(A){let $=this.availableImages[A];return $||($=[]),$}getLayerIndex(A){let $=this.layerIndexes[A];return $||($=this.layerIndexes[A]=new b),$}getWorkerSource(A,$,W){return this.workerSources[A]||(this.workerSources[A]={}),this.workerSources[A][$]||(this.workerSources[A][$]={}),this.workerSources[A][$][W]||(this.workerSources[A][$][W]=new this.workerSourceTypes[$]({send:(Q,ie,xe)=>{this.actor.send(Q,ie,xe,A)}},this.getLayerIndex(A),this.getAvailableImages(A))),this.workerSources[A][$][W]}getDEMWorkerSource(A,$){return this.demWorkerSources[A]||(this.demWorkerSources[A]={}),this.demWorkerSources[A][$]||(this.demWorkerSources[A][$]=new U),this.demWorkerSources[A][$]}}return c.i()&&(self.worker=new gn(self)),gn}),d(["./shared"],function(c){var b="3.6.2";class w{static testProp(i){if(!w.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in w.docStyle)return i[u];return i[0]}static create(i,u,p){const g=window.document.createElement(i);return u!==void 0&&(g.className=u),p&&p.appendChild(g),g}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(i,u){i.style[w.transformProp]=u}static addEventListener(i,u,p,g={}){i.addEventListener(u,p,"passive"in g?g:g.capture)}static removeEventListener(i,u,p,g={}){i.removeEventListener(u,p,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(i,u){const p=i.getBoundingClientRect();return new c.P(u.clientX-p.left-i.clientLeft,u.clientY-p.top-i.clientTop)}static touchPos(i,u){const p=i.getBoundingClientRect(),g=[];for(let _=0;_<u.length;_++)g.push(new c.P(u[_].clientX-p.left-i.clientLeft,u[_].clientY-p.top-i.clientTop));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const k={supported:!1,testSupport:function(y){!V&&P&&(U?H(y):z=y)}};let z,P,V=!1,U=!1;function H(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,P),y.isContextLost())return;k.supported=!0}catch{}y.deleteTexture(i),V=!0}var X,B;typeof document<"u"&&(P=document.createElement("img"),P.onload=function(){z&&H(z),z=null,U=!0},P.onerror=function(){V=!0,z=null},P.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,u,p,g;y.resetRequestQueue=()=>{i=[],u=0,p=0,g={}},y.addThrottleControl=D=>{const F=p++;return g[F]=D,F},y.removeThrottleControl=D=>{delete g[D],I()},y.getImage=(D,F,N=!0)=>{k.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*");const J={requestParameters:D,supportImageRefresh:N,callback:F,cancelled:!1,completed:!1,cancel:()=>{J.completed||J.cancelled||(J.cancelled=!0,J.innerRequest&&(J.innerRequest.cancel(),u--),I())}};return i.push(J),I(),J};const _=D=>{const{requestParameters:F,supportImageRefresh:N,callback:J}=D;return c.e(F,{type:"image"}),(N!==!1||c.i()||c.g(F.url)||F.headers&&!Object.keys(F.headers).reduce((ce,le)=>ce&&le==="accept",!0)?c.m:E)(F,(ce,le,pe,ae)=>{C(D,J,ce,le,pe,ae)})},C=(D,F,N,J,ce,le)=>{N?F(N):J instanceof HTMLImageElement||c.a(J)?F(null,J):J&&((pe,ae)=>{typeof createImageBitmap=="function"?c.b(pe,ae):c.d(pe,ae)})(J,(pe,ae)=>{pe!=null?F(pe):ae!=null&&F(null,ae,{cacheControl:ce,expires:le})}),D.cancelled||(D.completed=!0,u--,I())},I=()=>{const D=(()=>{const F=Object.keys(g);let N=!1;if(F.length>0){for(const J of F)if(N=g[J](),N)break}return N})()?c.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let F=u;F<D&&i.length>0;F++){const N=i.shift();if(N.cancelled){F--;continue}const J=_(N);u++,N.innerRequest=J}},E=(D,F)=>{const N=new Image,J=D.url;let ce=!1;const le=D.credentials;return le&&le==="include"?N.crossOrigin="use-credentials":(le&&le==="same-origin"||!c.s(J))&&(N.crossOrigin="anonymous"),N.fetchPriority="high",N.onload=()=>{F(null,N),N.onerror=N.onload=null},N.onerror=()=>{ce||F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),N.onerror=N.onload=null},N.src=J,{cancel:()=>{ce=!0,N.src=""}}}}(X||(X={})),X.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(B||(B={}));class L{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,p){const g=function(_){const C=_.match(G);if(!C)throw new Error(`Unable to parse URL "${_}"`);return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}(i);return g.path+=`${u}${p}`,function(_){const C=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${C}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const G=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function te(y){var i=new c.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var ne,he=function(y,i,u){return y[0]=i[0]-u[0],y[1]=i[1]-u[1],y[2]=i[2]-u[2],y};ne=new c.A(3),c.A!=Float32Array&&(ne[0]=0,ne[1]=0,ne[2]=0);var Z=function(y){var i=y[0],u=y[1];return i*i+u*u};function ue(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:p,url:g}of y){const _=`${p}${g}`;u.indexOf(_)===-1&&(u.push(_),i.push({id:p,url:g}))}}return i}function Ce(y,i,u,p,g){if(p)return void y(p);if(g!==Object.values(i).length||g!==Object.values(u).length)return;const _={};for(const C in i){_[C]={};const I=c.h.getImageCanvasContext(u[C]),E=i[C];for(const D in E){const{width:F,height:N,x:J,y:ce,sdf:le,pixelRatio:pe,stretchX:ae,stretchY:we,content:Be}=E[D];_[C][D]={data:null,pixelRatio:pe,sdf:le,stretchX:ae,stretchY:we,content:Be,spriteData:{width:F,height:N,x:J,y:ce,context:I}}}}y(null,_)}(function(){var y=new c.A(2);c.A!=Float32Array&&(y[0]=0,y[1]=0)})();class ye{constructor(i,u,p,g){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(u,g)}update(i,u,p){const{width:g,height:_}=i,C=!(this.size&&this.size[0]===g&&this.size[1]===_||p),{context:I}=this,{gl:E}=I;if(this.useMipmap=!!(u&&u.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!u||u.premultiply!==!1)),C)this.size=[g,_],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,i):E.texImage2D(E.TEXTURE_2D,0,this.format,g,_,0,this.format,E.UNSIGNED_BYTE,i.data);else{const{x:D,y:F}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.a(i)?E.texSubImage2D(E.TEXTURE_2D,0,D,F,E.RGBA,E.UNSIGNED_BYTE,i):E.texSubImage2D(E.TEXTURE_2D,0,D,F,g,_,E.RGBA,E.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D)}bind(i,u,p){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),p!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,p||i),this.filter=i),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Ee(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class Se extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:p}of this.requestors)this._notify(u,p);this.requestors=[]}}getImage(i){const u=this.images[i];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new c.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let p=!0;const g=u.data||u.spriteData;return this._validateStretch(u.stretchX,g&&g.width)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,g&&g.height)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,u){if(!i)return!0;let p=0;for(const g of i){if(g[0]<p||g[1]<g[0]||u<g[1])return!1;p=g[1]}return!0}_validateContent(i,u){if(!i)return!0;if(i.length!==4)return!1;const p=u.spriteData,g=p&&p.width||u.data.width,_=p&&p.height||u.data.height;return!(i[0]<0||g<i[0]||i[1]<0||_<i[1]||i[2]<0||g<i[2]||i[3]<0||_<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,u,p=!0){const g=this.getImage(i);if(p&&(g.data.width!==u.data.width||g.data.height!==u.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let p=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(p=!1);this.isLoaded()||p?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const p={};for(const g of i){let _=this.getImage(g);_||(this.fire(new c.k("styleimagemissing",{id:g})),_=this.getImage(g)),_?p[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:c.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,p)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],p=this.getImage(i);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},_=new c.I(g,p);this.patterns[i]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ye(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const _ in this.patterns)i.push(this.patterns[_].bin);const{w:u,h:p}=c.p(i),g=this.atlasImage;g.resize({width:u||1,height:p||1});for(const _ in this.patterns){const{bin:C}=this.patterns[_],I=C.x+1,E=C.y+1,D=this.getImage(_).data,F=D.width,N=D.height;c.R.copy(D,g,{x:0,y:0},{x:I,y:E},{width:F,height:N}),c.R.copy(D,g,{x:0,y:N-1},{x:I,y:E-1},{width:F,height:1}),c.R.copy(D,g,{x:0,y:0},{x:I,y:E+N},{width:F,height:1}),c.R.copy(D,g,{x:F-1,y:0},{x:I-1,y:E},{width:1,height:N}),c.R.copy(D,g,{x:0,y:0},{x:I+F,y:E},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||c.w(`Image with ID: "${u}" was not found`),Ee(p)&&this.updateImage(u,p)}}}const ze=1e20;function We(y,i,u,p,g,_,C,I,E){for(let D=i;D<i+p;D++)Fe(y,u*_+D,_,g,C,I,E);for(let D=u;D<u+g;D++)Fe(y,D*_+i,1,p,C,I,E)}function Fe(y,i,u,p,g,_,C){_[0]=0,C[0]=-ze,C[1]=ze,g[0]=y[i];for(let I=1,E=0,D=0;I<p;I++){g[I]=y[i+I*u];const F=I*I;do{const N=_[E];D=(g[I]-g[N]+F-N*N)/(I-N)/2}while(D<=C[E]&&--E>-1);E++,_[E]=I,C[E]=D,C[E+1]=ze}for(let I=0,E=0;I<p;I++){for(;C[E+1]<I;)E++;const D=_[E],F=I-D;y[i+I*u]=g[D]+F*F}}class Me{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const p=[];for(const g in i)for(const _ of i[g])p.push({stack:g,id:_});c.o(p,({stack:g,id:_},C)=>{let I=this.entries[g];I||(I=this.entries[g]={glyphs:{},requests:{},ranges:{}});let E=I.glyphs[_];if(E!==void 0)return void C(null,{stack:g,id:_,glyph:E});if(E=this._tinySDF(I,g,_),E)return I.glyphs[_]=E,void C(null,{stack:g,id:_,glyph:E});const D=Math.floor(_/256);if(256*D>65535)return void C(new Error("glyphs > 65535 not supported"));if(I.ranges[D])return void C(null,{stack:g,id:_,glyph:E});if(!this.url)return void C(new Error("glyphsUrl is not set"));let F=I.requests[D];F||(F=I.requests[D]=[],Me.loadGlyphRange(g,D,this.url,this.requestManager,(N,J)=>{if(J){for(const ce in J)this._doesCharSupportLocalGlyph(+ce)||(I.glyphs[+ce]=J[+ce]);I.ranges[D]=!0}for(const ce of F)ce(N,J);delete I.requests[D]})),F.push((N,J)=>{N?C(N):J&&C(null,{stack:g,id:_,glyph:J[_]||null})})},(g,_)=>{if(g)u(g);else if(_){const C={};for(const{stack:I,id:E,glyph:D}of _)(C[I]||(C[I]={}))[E]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};u(null,C)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(c.u["CJK Unified Ideographs"](i)||c.u["Hangul Syllables"](i)||c.u.Hiragana(i)||c.u.Katakana(i))}_tinySDF(i,u,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let _=i.tinySDF;if(!_){let I="400";/bold/i.test(u)?I="900":/medium/i.test(u)?I="500":/light/i.test(u)&&(I="200"),_=i.tinySDF=new Me.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:I})}const C=_.draw(String.fromCharCode(p));return{id:p,bitmap:new c.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}Me.loadGlyphRange=function(y,i,u,p,g){const _=256*i,C=_+255,I=p.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${_}-${C}`),B.Glyphs);c.l(I,(E,D)=>{if(E)g(E);else if(D){const F={};for(const N of c.n(D))F[N.id]=N;g(null,F)}})},Me.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:u=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:C="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=u;const I=this.size=y+4*i,E=this._createCanvas(I),D=this.ctx=E.getContext("2d",{willReadFrequently:!0});D.font=`${C} ${_} ${y}px ${g}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(y),C=Math.ceil(u),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),E=Math.min(this.size-this.buffer,C+Math.ceil(p)),D=I+2*this.buffer,F=E+2*this.buffer,N=Math.max(D*F,0),J=new Uint8ClampedArray(N),ce={data:J,width:D,height:F,glyphWidth:I,glyphHeight:E,glyphTop:C,glyphLeft:0,glyphAdvance:i};if(I===0||E===0)return ce;const{ctx:le,buffer:pe,gridInner:ae,gridOuter:we}=this;le.clearRect(pe,pe,I,E),le.fillText(y,pe,pe+C);const Be=le.getImageData(pe,pe,I,E);we.fill(ze,0,N),ae.fill(0,0,N);for(let ge=0;ge<E;ge++)for(let Ie=0;Ie<I;Ie++){const Ve=Be.data[4*(ge*I+Ie)+3]/255;if(Ve===0)continue;const He=(ge+pe)*D+Ie+pe;if(Ve===1)we[He]=0,ae[He]=ze;else{const Ze=.5-Ve;we[He]=Ze>0?Ze*Ze:0,ae[He]=Ze<0?Ze*Ze:0}}We(we,0,0,D,F,D,this.f,this.v,this.z),We(ae,pe,pe,I,E,D,this.f,this.v,this.z);for(let ge=0;ge<N;ge++){const Ie=Math.sqrt(we[ge])-Math.sqrt(ae[ge]);J[ge]=Math.round(255-255*(Ie/this.radius+this.cutoff))}return ce}};class Oe{constructor(){this.specification=c.v.light.position}possiblyEvaluate(i,u){return c.z(i.expression.evaluate(u))}interpolate(i,u,p){return{x:c.B.number(i.x,u.x,p),y:c.B.number(i.y,u.y,p),z:c.B.number(i.z,u.z,p)}}}let ke;class Ge extends c.E{constructor(i){super(),ke=ke||new c.r({anchor:new c.D(c.v.light.anchor),position:new Oe,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(ke),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(c.t,i,u))for(const p in i){const g=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p){return(!p||p.validate!==!1)&&c.x(this,i.call(c.y,c.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.v})))}}class Ke{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const p=i.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,u)),this.dashEntry[p]}getDashRanges(i,u,p){const g=[];let _=i.length%2==1?-i[i.length-1]*p:0,C=i[0]*p,I=!0;g.push({left:_,right:C,isDash:I,zeroLength:i[0]===0});let E=i[0];for(let D=1;D<i.length;D++){I=!I;const F=i[D];_=E*p,E+=F,C=E*p,g.push({left:_,right:C,isDash:I,zeroLength:F===0})}return g}addRoundDash(i,u,p){const g=u/2;for(let _=-p;_<=p;_++){const C=this.width*(this.nextRow+p+_);let I=0,E=i[I];for(let D=0;D<this.width;D++){D/E.right>1&&(E=i[++I]);const F=Math.abs(D-E.left),N=Math.abs(D-E.right),J=Math.min(F,N);let ce;const le=_/p*(g+1);if(E.isDash){const pe=g-Math.abs(le);ce=Math.sqrt(J*J+pe*pe)}else ce=g-Math.sqrt(J*J+le*le);this.data[C+D]=Math.max(0,Math.min(255,ce+128))}}}addRegularDash(i){for(let I=i.length-1;I>=0;--I){const E=i[I],D=i[I+1];E.zeroLength?i.splice(I,1):D&&D.isDash===E.isDash&&(D.left=E.left,i.splice(I,1))}const u=i[0],p=i[i.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const g=this.width*this.nextRow;let _=0,C=i[_];for(let I=0;I<this.width;I++){I/C.right>1&&(C=i[++_]);const E=Math.abs(I-C.left),D=Math.abs(I-C.right),F=Math.min(E,D);this.data[g+I]=Math.max(0,Math.min(255,(C.isDash?F:-F)+128))}}addDash(i,u){const p=u?7:0,g=2*p+1;if(this.nextRow+g>this.height)return c.w("LineAtlas out of space"),null;let _=0;for(let I=0;I<i.length;I++)_+=i[I];if(_!==0){const I=this.width/_,E=this.getDashRanges(i,this.width,I);u?this.addRoundDash(E,I,p):this.addRegularDash(E)}const C={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:_};return this.nextRow+=g,this.dirty=!0,C}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class ht{constructor(i,u,p){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let _=0;_<g.length;_++){const C=new c.C(g[_],u,p);C.name=`Worker ${_}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,p){c.o(this.actors,(g,_)=>{g.send(i,u,_)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function vt(y,i,u){const p=function(g,_){if(g)return u(g);if(_){const C=c.F(c.e(_,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(C.vectorLayers=_.vector_layers,C.vectorLayerIds=C.vectorLayers.map(I=>I.id)),u(null,C)}};return y.url?c.f(i.transformRequest(y.url,B.Source),p):c.h.frame(()=>p(null,y))}class gt{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof c.L?new c.L(i.lng,i.lat):c.L.convert(i),this}extend(i){const u=this._sw,p=this._ne;let g,_;if(i instanceof c.L)g=i,_=i;else{if(!(i instanceof gt))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(gt.convert(i)):this.extend(c.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(c.L.convert(i)):this;if(g=i._sw,_=i._ne,!g||!_)return this}return u||p?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),p.lng=Math.max(_.lng,p.lng),p.lat=Math.max(_.lat,p.lat)):(this._sw=new c.L(g.lng,g.lat),this._ne=new c.L(_.lng,_.lat)),this}getCenter(){return new c.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.L(this.getWest(),this.getNorth())}getSouthEast(){return new c.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:p}=c.L.convert(i);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(i){return i instanceof gt?i:i&&new gt(i)}static fromLngLat(i,u=0){const p=360*u/40075017,g=p/Math.cos(Math.PI/180*i.lat);return new gt(new c.L(i.lng-g,i.lat-p),new c.L(i.lng+g,i.lat+p))}}class Ct{constructor(i,u,p){this.bounds=gt.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),p=Math.floor(c.G(this.bounds.getWest())*u),g=Math.floor(c.H(this.bounds.getNorth())*u),_=Math.ceil(c.G(this.bounds.getEast())*u),C=Math.ceil(c.H(this.bounds.getSouth())*u);return i.x>=p&&i.x<_&&i.y>=g&&i.y<C}}class At extends c.E{constructor(i,u,p,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=vt(this._options,this.map._requestManager,(_,C)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new c.j(_)):C&&(c.e(this,C),C.bounds&&(this.tileBounds=new Ct(C.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>c.e({},this._options),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.F(u,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,B.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(C,I){return delete i.request,i.aborted?u(null):C&&C.status!==404?u(C):(I&&I.resourceTiming&&(i.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&i.setExpiryData(I),i.loadVectorData(I,this.map.painter),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",g,_.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",g,_.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Zt extends c.E{constructor(i,u,p,g){super(),this.id=i,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},u),c.e(this,c.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=vt(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new c.j(i)):u&&(c.e(this,u),u.bounds&&(this.tileBounds=new Ct(u.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return c.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=X.getImage(this.map._requestManager.transformRequest(p,B.Tile),(g,_,C)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(g)i.state="errored",u(g);else if(_){this.map._refreshExpiredTiles&&C&&i.setExpiryData(C);const I=this.map.painter.context,E=I.gl;i.texture=this.map.painter.getTileTexture(_.width),i.texture?i.texture.update(_,{useMipmap:!0}):(i.texture=new ye(I,_,E.RGBA,{useMipmap:!0}),i.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),I.extTextureFilterAnisotropic&&E.texParameterf(E.TEXTURE_2D,I.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,I.extTextureFilterAnisotropicMax)),i.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}class kt extends Zt{constructor(i,u,p,g){super(i,u,p,g),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,B.Tile);function _(C,I){C&&(i.state="errored",u(C)),I&&(i.dem=I,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=X.getImage(g,(C,I,E)=>c._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(C)i.state="errored",u(C);else if(I){this.map._refreshExpiredTiles&&i.setExpiryData(E);const D=c.a(I)&&c.J()?I:yield function(N){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.K()){const J=N.width+2,ce=N.height+2;try{return new c.R({width:J,height:ce},yield c.M(N,-1,-1,J,ce))}catch{}}return c.h.getImageData(N,1)})}(I),F={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:D,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",F,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const u=i.canonical,p=Math.pow(2,u.z),g=(u.x-1+p)%p,_=u.x===0?i.wrap-1:i.wrap,C=(u.x+1+p)%p,I=u.x+1===p?i.wrap+1:i.wrap,E={};return E[new c.O(i.overscaledZ,_,u.z,g,u.y).key]={backfilled:!1},E[new c.O(i.overscaledZ,I,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(E[new c.O(i.overscaledZ,_,u.z,g,u.y-1).key]={backfilled:!1},E[new c.O(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},E[new c.O(i.overscaledZ,I,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<p&&(E[new c.O(i.overscaledZ,_,u.z,g,u.y+1).key]={backfilled:!1},E[new c.O(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},E[new c.O(i.overscaledZ,I,u.z,C,u.y+1).key]={backfilled:!1}),E}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class $e extends c.E{constructor(i,u,p,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>c.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=u.data,this._options=c.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=c.N/this.tileSize;this.workerOptions=c.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:c.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:c.N,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,p,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:p},g),this}_updateWorkerData(i){const u=c.e({},this.workerOptions);i?u.dataDiff=i:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(c.h.resolveURL(this._data),B.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(p,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let _=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(_=g.resourceTiming[this.id].slice(0)),p)return void this.fire(new c.j(p));const C={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&c.e(C,{resourceTiming:_}),this.fire(new c.k("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const p=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(p,g,(_,C)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):_?u(_):(i.loadVectorData(C,this.map.painter,p==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var rt=c.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class pt extends c.E{constructor(i,u,p,g){super(),this.load=(_,C)=>{this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=X.getImage(this.map._requestManager.transformRequest(this.url,B.Image),(I,E)=>{this._request=null,this._loaded=!0,I?this.fire(new c.j(I)):E&&(this.image=E,_&&(this.coordinates=_),C&&C(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ye(_,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let I=!1;for(const E in this.tiles){const D=this.tiles[E];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,I=!0)}I&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const u=i.map(c.U.fromLngLat);this.tileID=function(g){let _=1/0,C=1/0,I=-1/0,E=-1/0;for(const J of g)_=Math.min(_,J.x),C=Math.min(C,J.y),I=Math.max(I,J.x),E=Math.max(E,J.y);const D=Math.max(I-_,E-C),F=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),N=Math.pow(2,F);return new c.W(F,Math.floor((_+I)/2*N),Math.floor((C+E)/2*N))}(u),this.minzoom=this.maxzoom=this.tileID.z;const p=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new c.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,c.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,c.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,c.N,c.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}hasTransition(){return!1}}class Dt extends pt{constructor(i,u,p,g){super(i,u,p,g),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const C of _.urls)this.urls.push(this.map._requestManager.transformRequest(C,B.Source).url);c.X(this.urls,(C,I)=>{this._loaded=!0,C?this.fire(new c.j(C)):I&&(this.video=I,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new ye(_,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let I=!1;for(const E in this.tiles){const D=this.tiles[E];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,I=!0)}I&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new c.j(new c.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Mt extends pt{constructor(i,u,p,g){super(i,u,p,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const C=this.map.painter.context,I=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,rt.members)),this.boundsSegments||(this.boundsSegments=c.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ye(C,this.canvas,I.RGBA,{premultiply:!0});let E=!1;for(const D in this.tiles){const F=this.tiles[D];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture,E=!0)}E&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(C=>typeof C!="number"))||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new c.j(new c.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const gr={},Cr=y=>{switch(y){case"geojson":return $e;case"image":return pt;case"raster":return Zt;case"raster-dem":return kt;case"vector":return At;case"video":return Dt;case"canvas":return Mt}return gr[y]};function lr(y,i){const u=c.Z();return c.$(u,u,[1,1,0]),c.a0(u,u,[.5*y.width,.5*y.height,1]),c.a1(u,u,y.calculatePosMatrix(i.toUnwrapped()))}function yt(y,i,u,p,g,_){const C=function(N,J,ce){if(N)for(const le of N){const pe=J[le];if(pe&&pe.source===ce&&pe.type==="fill-extrusion")return!0}else for(const le in J){const pe=J[le];if(pe.source===ce&&pe.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,y.id),I=_.maxPitchScaleFactor(),E=y.tilesIn(p,I,C);E.sort(Dr);const D=[];for(const N of E)D.push({wrappedTileID:N.tileID.wrapped().key,queryResults:N.tile.queryRenderedFeatures(i,u,y._state,N.queryGeometry,N.cameraQueryGeometry,N.scale,g,_,I,lr(y.transform,N.tileID))});const F=function(N){const J={},ce={};for(const le of N){const pe=le.queryResults,ae=le.wrappedTileID,we=ce[ae]=ce[ae]||{};for(const Be in pe){const ge=pe[Be],Ie=we[Be]=we[Be]||{},Ve=J[Be]=J[Be]||[];for(const He of ge)Ie[He.featureIndex]||(Ie[He.featureIndex]=!0,Ve.push(He))}}return J}(D);for(const N in F)F[N].forEach(J=>{const ce=J.feature,le=y.getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=le});return F}function Dr(y,i){const u=y.tileID,p=i.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}class er{constructor(i,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=c.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,_){const C={};if(!_)return C;for(const I of g){const E=I.layerIds.map(D=>_.getLayer(D)).filter(Boolean);if(E.length!==0){I.layers=E,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(D=>E.filter(F=>F.id===D)[0]));for(const D of E)C[D.id]=I}}return C}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof c.a4){if(this.hasSymbolBuckets=!0,!p)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof c.a4&&_.hasRTLText){this.hasRTLText=!0,c.a5();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(_))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new c.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ye(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ye(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,p,g,_,C,I,E,D,F){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:C,tileSize:this.tileSize,pixelPosMatrix:F,transform:E,params:I,queryPadding:this.queryPadding*D},i,u,p):{}}querySourceFeatures(i,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",C=g._geojsonTileLayer||g[_];if(!C)return;const I=c.a6(u&&u.filter),{z:E,x:D,y:F}=this.tileID.canonical,N={z:E,x:D,y:F};for(let J=0;J<C.length;J++){const ce=C.feature(J);if(I.needGeometry){const ae=c.a7(ce,!0);if(!I.filter(new c.a8(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!I.filter(new c.a8(this.tileID.overscaledZ),ce))continue;const le=p.getId(ce,_),pe=new c.a9(ce,E,D,F,le);pe.tile=N,i.push(pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const p=c.aa(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const _=this.expirationTime-u;_?this.expirationTime=p+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const _=this.buckets[g],C=_.layers[0].sourceLayer||"_geojsonTileLayer",I=p[C],E=i[C];if(!I||!E||Object.keys(E).length===0)continue;_.update(E,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=u&&u.style&&u.style.getLayer(g);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<c.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=c.h.now()+i}setDependencies(i,u){const p={};for(const g of u)p[g]=!0;this.dependencies[i]=p}hasDependency(i,u){for(const p of i){const g=this.dependencies[p];if(g){for(const _ of u)if(g[_])return!0}}return!1}}class Fr{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,p){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:u,timeout:void 0};if(p!==void 0&&(_.timeout=setTimeout(()=>{this.remove(i,_)},p)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const p=i.wrapped().key,g=u===void 0?0:this.data[p].indexOf(u),_=this.data[p][g];return this.data[p].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(_.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const p in this.data)for(const g of this.data[p])i(g.value)||u.push(g);for(const p of u)this.remove(p.value.tileID,p)}}class Ae{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,p){const g=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},c.e(this.stateChanges[i][g],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const _ in this.state[i])_!==g&&(this.deletedStates[i][_]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const _ in this.state[i][g])p[_]||(this.deletedStates[i][g][_]=null)}else for(const _ in p)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][_]===null&&delete this.deletedStates[i][g][_]}removeFeatureState(i,u,p){if(this.deletedStates[i]===null)return;const g=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&u!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][p]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(p in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][p]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,u){const p=String(u),g=c.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const _=this.deletedStates[i][u];if(_===null)return{};for(const C in _)delete g[C]}return g}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const C in this.stateChanges[g])this.state[g][C]||(this.state[g][C]={}),c.e(this.state[g][C],this.stateChanges[g][C]),_[C]=this.state[g][C];p[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const C in this.state[g])_[C]={},this.state[g][C]={};else for(const C in this.deletedStates[g]){if(this.deletedStates[g][C]===null)this.state[g][C]={};else for(const I of Object.keys(this.deletedStates[g][C]))delete this.state[g][C][I];_[C]=this.state[g][C]}p[g]=p[g]||{},c.e(p[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in i)i[g].setFeatureState(p,u)}}class cr extends c.E{constructor(i,u,p){super(),this.id=i,this.dispatcher=p,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,C,I)=>{const E=new(Cr(_.type))(g,_,C,I);if(E.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${E.id}`);return E})(i,u,p,this),this._tiles={},this._cache=new Fr(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ae,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new c.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(ir).map(i=>i.key)}getRenderableIds(i){const u=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&u.push(this._tiles[p]);return i?u.sort((p,g)=>{const _=p.tileID,C=g.tileID,I=new c.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),E=new c.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-C.overscaledZ||E.y-I.y||E.x-I.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(ir).map(p=>p.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,i,u)))}_tileLoaded(i,u,p,g){if(g)return i.state="errored",void(g.status!==404?this._source.fire(new c.j(g,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=c.h.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const _=u[g];if(i.neighboringTiles&&i.neighboringTiles[_]){const C=this.getTileByID(_);p(i,C),p(C,i)}}function p(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let C=_.tileID.canonical.x-g.tileID.canonical.x;const I=_.tileID.canonical.y-g.tileID.canonical.y,E=Math.pow(2,g.tileID.canonical.z),D=_.tileID.key;C===0&&I===0||Math.abs(I)>1||(Math.abs(C)>1&&(Math.abs(C+E)===1?C+=E:Math.abs(C-E)===1&&(C-=E)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,C,I),g.neighboringTiles&&g.neighboringTiles[D]&&(g.neighboringTiles[D].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,p,g){for(const _ in this._tiles){let C=this._tiles[_];if(g[_]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>p)continue;let I=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){const D=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[D.key],C&&C.hasData()&&(I=D)}let E=I;for(;E.overscaledZ>u;)if(E=E.scaledTo(E.overscaledZ-1),i[E.key]){g[I.key]=I;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=i.overscaledZ-1;p>=u;p--){const g=i.scaledTo(p),_=this._getLoadedTile(g);if(_)return _}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?c.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const p={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),p[_.tileID.key]=_}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(F=>new c.O(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y)):(p=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(p=p.filter(F=>this._source.hasTile(F)))):p=[];const g=i.coveringZoomLevel(this._source),_=Math.max(g-cr.maxOverzooming,this._source.minzoom),C=Math.max(g+cr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const F={};for(const N of p)if(N.canonical.z>this._source.minzoom){const J=N.scaledTo(N.canonical.z-1);F[J.key]=J;const ce=N.scaledTo(Math.max(this._source.minzoom,Math.min(N.canonical.z,5)));F[ce.key]=ce}p=p.concat(Object.values(F))}const I=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const E=this._updateRetainedTiles(p,g);if(Ft(this._source.type)){const F={},N={},J=Object.keys(E),ce=c.h.now();for(const le of J){const pe=E[le],ae=this._tiles[le];if(!ae||ae.fadeEndTime!==0&&ae.fadeEndTime<=ce)continue;const we=this.findLoadedParent(pe,_);we&&(this._addTile(we.tileID),F[we.tileID.key]=we.tileID),N[le]=pe}this._retainLoadedChildren(N,g,C,E);for(const le in F)E[le]||(this._coveredTiles[le]=!0,E[le]=F[le]);if(u){const le={},pe={};for(const ae of p)this._tiles[ae.key].hasData()?le[ae.key]=ae:pe[ae.key]=ae;for(const ae in pe){const we=pe[ae].children(this._source.maxzoom);this._tiles[we[0].key]&&this._tiles[we[1].key]&&this._tiles[we[2].key]&&this._tiles[we[3].key]&&(le[we[0].key]=E[we[0].key]=we[0],le[we[1].key]=E[we[1].key]=we[1],le[we[2].key]=E[we[2].key]=we[2],le[we[3].key]=E[we[3].key]=we[3],delete pe[ae])}for(const ae in pe){const we=this.findLoadedParent(pe[ae],this._source.minzoom);if(we){le[we.tileID.key]=E[we.tileID.key]=we.tileID;for(const Be in le)le[Be].isChildOf(we.tileID)&&delete le[Be]}}for(const ae in this._tiles)le[ae]||(this._coveredTiles[ae]=!0)}}for(const F in E)this._tiles[F].clearFadeHold();const D=c.ab(this._tiles,E);for(const F of D){const N=this._tiles[F];N.hasSymbolBuckets&&!N.holdingForFade()?N.setHoldDuration(this.map._fadeDuration):N.hasSymbolBuckets&&!N.symbolFadeFinished()||this._removeTile(F)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const p={},g={},_=Math.max(u-cr.maxOverzooming,this._source.minzoom),C=Math.max(u+cr.maxUnderzooming,this._source.minzoom),I={};for(const E of i){const D=this._addTile(E);p[E.key]=E,D.hasData()||u<this._source.maxzoom&&(I[E.key]=E)}this._retainLoadedChildren(I,u,C,p);for(const E of i){let D=this._tiles[E.key];if(D.hasData())continue;if(u+1>this._source.maxzoom){const N=E.children(this._source.maxzoom)[0],J=this.getTile(N);if(J&&J.hasData()){p[N.key]=N;continue}}else{const N=E.children(this._source.maxzoom);if(p[N[0].key]&&p[N[1].key]&&p[N[2].key]&&p[N[3].key])continue}let F=D.wasRequested();for(let N=E.overscaledZ-1;N>=_;--N){const J=E.scaledTo(N);if(g[J.key])break;if(g[J.key]=!0,D=this.getTile(J),!D&&F&&(D=this._addTile(J)),D){const ce=D.hasData();if((F||ce)&&(p[J.key]=J),F=D.wasRequested(),ce)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let p,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}u.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(_),p)break;g=_}for(const _ of u)this._loadedParentTiles[_]=p}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const p=u;return u||(u=new er(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,p||this._source.fire(new c.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=u.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,p){const g=[],_=this.transform;if(!_)return g;const C=p?_.getCameraQueryGeometry(i):i,I=i.map(le=>_.pointCoordinate(le,this.terrain)),E=C.map(le=>_.pointCoordinate(le,this.terrain)),D=this.getIds();let F=1/0,N=1/0,J=-1/0,ce=-1/0;for(const le of E)F=Math.min(F,le.x),N=Math.min(N,le.y),J=Math.max(J,le.x),ce=Math.max(ce,le.y);for(let le=0;le<D.length;le++){const pe=this._tiles[D[le]];if(pe.holdingForFade())continue;const ae=pe.tileID,we=Math.pow(2,_.zoom-pe.tileID.overscaledZ),Be=u*pe.queryPadding*c.N/pe.tileSize/we,ge=[ae.getTilePoint(new c.U(F,N)),ae.getTilePoint(new c.U(J,ce))];if(ge[0].x-Be<c.N&&ge[0].y-Be<c.N&&ge[1].x+Be>=0&&ge[1].y+Be>=0){const Ie=I.map(He=>ae.getTilePoint(He)),Ve=E.map(He=>ae.getTilePoint(He));g.push({tile:pe,tileID:ae,queryGeometry:Ie,cameraQueryGeometry:Ve,scale:we})}}return g}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of u)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Ft(this._source.type)){const i=c.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=i)return!0}return!1}setFeatureState(i,u,p){this._state.updateState(i=i||"_geojsonTileLayer",u,p)}removeFeatureState(i,u,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,p)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,p){const g=this._tiles[i];g&&g.setDependencies(u,p)}reloadTilesForDependencies(i,u){for(const p in this._tiles)this._tiles[p].hasDependency(i,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,u))}}function ir(y,i){const u=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||p-u||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function Ft(y){return y==="raster"||y==="image"||y==="video"}cr.maxOverzooming=10,cr.maxUnderzooming=3;const qt="mapboxgl_preloaded_worker_pool";class kr{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<kr.workerCount;)this.workers.push(new Worker(c.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[qt]}numActive(){return Object.keys(this.active).length}}const Pr=Math.floor(c.h.hardwareConcurrency/2);let sr;function nr(){return sr||(sr=new kr),sr}kr.workerCount=c.ac(globalThis)?Math.max(Math.min(Pr,3),1):1;class rr{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=c.ad(i,0,1);let u=1,p=this._distances[u];const g=i*this.paddedLength+this.padding;for(;p<g&&u<this._distances.length;)p=this._distances[++u];const _=u-1,C=this._distances[_],I=p-C,E=I>0?(g-C)/I:0;return this.points[_].mult(1-E).add(this.points[u].mult(E))}}function Rr(y,i){let u=!0;return y==="always"||y!=="never"&&i!=="never"||(u=!1),u}class it{constructor(i,u,p){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(u/p);for(let C=0;C<this.xCellCount*this.yCellCount;C++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,p,g,_){this._forEachCell(u,p,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(i,u,p,g){this._forEachCell(u-g,p-g,u+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(p),this.circles.push(g)}_insertBoxCell(i,u,p,g,_,C){this.boxCells[_].push(C)}_insertCircleCell(i,u,p,g,_,C){this.circleCells[_].push(C)}_query(i,u,p,g,_,C,I){if(p<0||i>this.width||g<0||u>this.height)return[];const E=[];if(i<=0&&u<=0&&this.width<=p&&this.height<=g){if(_)return[{key:null,x1:i,y1:u,x2:p,y2:g}];for(let D=0;D<this.boxKeys.length;D++)E.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const F=this.circles[3*D],N=this.circles[3*D+1],J=this.circles[3*D+2];E.push({key:this.circleKeys[D],x1:F-J,y1:N-J,x2:F+J,y2:N+J})}}else this._forEachCell(i,u,p,g,this._queryCell,E,{hitTest:_,overlapMode:C,seenUids:{box:{},circle:{}}},I);return E}query(i,u,p,g){return this._query(i,u,p,g,!1,null)}hitTest(i,u,p,g,_,C){return this._query(i,u,p,g,!0,_,C).length>0}hitTestCircle(i,u,p,g,_){const C=i-p,I=i+p,E=u-p,D=u+p;if(I<0||C>this.width||D<0||E>this.height)return!1;const F=[];return this._forEachCell(C,E,I,D,this._queryCellCircle,F,{hitTest:!0,overlapMode:g,circle:{x:i,y:u,radius:p},seenUids:{box:{},circle:{}}},_),F.length>0}_queryCell(i,u,p,g,_,C,I,E){const{seenUids:D,hitTest:F,overlapMode:N}=I,J=this.boxCells[_];if(J!==null){const le=this.bboxes;for(const pe of J)if(!D.box[pe]){D.box[pe]=!0;const ae=4*pe,we=this.boxKeys[pe];if(i<=le[ae+2]&&u<=le[ae+3]&&p>=le[ae+0]&&g>=le[ae+1]&&(!E||E(we))&&(!F||!Rr(N,we.overlapMode))&&(C.push({key:we,x1:le[ae],y1:le[ae+1],x2:le[ae+2],y2:le[ae+3]}),F))return!0}}const ce=this.circleCells[_];if(ce!==null){const le=this.circles;for(const pe of ce)if(!D.circle[pe]){D.circle[pe]=!0;const ae=3*pe,we=this.circleKeys[pe];if(this._circleAndRectCollide(le[ae],le[ae+1],le[ae+2],i,u,p,g)&&(!E||E(we))&&(!F||!Rr(N,we.overlapMode))){const Be=le[ae],ge=le[ae+1],Ie=le[ae+2];if(C.push({key:we,x1:Be-Ie,y1:ge-Ie,x2:Be+Ie,y2:ge+Ie}),F)return!0}}}return!1}_queryCellCircle(i,u,p,g,_,C,I,E){const{circle:D,seenUids:F,overlapMode:N}=I,J=this.boxCells[_];if(J!==null){const le=this.bboxes;for(const pe of J)if(!F.box[pe]){F.box[pe]=!0;const ae=4*pe,we=this.boxKeys[pe];if(this._circleAndRectCollide(D.x,D.y,D.radius,le[ae+0],le[ae+1],le[ae+2],le[ae+3])&&(!E||E(we))&&!Rr(N,we.overlapMode))return C.push(!0),!0}}const ce=this.circleCells[_];if(ce!==null){const le=this.circles;for(const pe of ce)if(!F.circle[pe]){F.circle[pe]=!0;const ae=3*pe,we=this.circleKeys[pe];if(this._circlesCollide(le[ae],le[ae+1],le[ae+2],D.x,D.y,D.radius)&&(!E||E(we))&&!Rr(N,we.overlapMode))return C.push(!0),!0}}}_forEachCell(i,u,p,g,_,C,I,E){const D=this._convertToXCellCoord(i),F=this._convertToYCellCoord(u),N=this._convertToXCellCoord(p),J=this._convertToYCellCoord(g);for(let ce=D;ce<=N;ce++)for(let le=F;le<=J;le++)if(_.call(this,i,u,p,g,this.xCellCount*le+ce,C,I,E))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,p,g,_,C){const I=g-i,E=_-u,D=p+C;return D*D>I*I+E*E}_circleAndRectCollide(i,u,p,g,_,C,I){const E=(C-g)/2,D=Math.abs(i-(g+E));if(D>E+p)return!1;const F=(I-_)/2,N=Math.abs(u-(_+F));if(N>F+p)return!1;if(D<=E||N<=F)return!0;const J=D-E,ce=N-F;return J*J+ce*ce<=p*p}}function Le(y,i,u,p,g){const _=c.Z();return i?(c.a0(_,_,[1/g,1/g,1]),u||c.ae(_,_,p.angle)):c.a1(_,p.labelPlaneMatrix,y),_}function Wt(y,i,u,p,g){if(i){const _=c.af(y);return c.a0(_,_,[g,g,1]),u||c.ae(_,_,-p.angle),_}return p.glCoordMatrix}function Rt(y,i,u){let p;u?(p=[y.x,y.y,u(y.x,y.y),1],c.ag(p,p,i)):(p=[y.x,y.y,0,1],Q(p,p,i));const g=p[3];return{point:new c.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g}}function _r(y,i){return .5+y/i*.5}function xr(y,i){const u=y[0]/y[3],p=y[1]/y[3];return u>=-i[0]&&u<=i[0]&&p>=-i[1]&&p<=i[1]}function Qe(y,i,u,p,g,_,C,I,E,D){const F=p?y.textSizeData:y.iconSizeData,N=c.ah(F,u.transform.zoom),J=[256/u.width*2+1,256/u.height*2+1],ce=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ce.clear();const le=y.lineVertexArray,pe=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,ae=u.transform.width/u.transform.height;let we=!1;for(let Be=0;Be<pe.length;Be++){const ge=pe.get(Be);if(ge.hidden||ge.writingMode===c.ai.vertical&&!we){W(ge.numGlyphs,ce);continue}let Ie;if(we=!1,D?(Ie=[ge.anchorX,ge.anchorY,D(ge.anchorX,ge.anchorY),1],c.ag(Ie,Ie,i)):(Ie=[ge.anchorX,ge.anchorY,0,1],Q(Ie,Ie,i)),!xr(Ie,J)){W(ge.numGlyphs,ce);continue}const Ve=_r(u.transform.cameraToCenterDistance,Ie[3]),He=c.aj(F,N,ge),Ze=C?He/Ve:He*Ve,et=new c.P(ge.anchorX,ge.anchorY),Je=Rt(et,g,D).point,ot={projections:{},offsets:{}},Bt=ar(ge,Ze,!1,I,i,g,_,y.glyphOffsetArray,le,ce,Je,et,ot,ae,E,D);we=Bt.useVertical,(Bt.notEnoughRoom||we||Bt.needsFlipping&&ar(ge,Ze,!0,I,i,g,_,y.glyphOffsetArray,le,ce,Je,et,ot,ae,E,D).notEnoughRoom)&&W(ge.numGlyphs,ce)}p?y.text.dynamicLayoutVertexBuffer.updateData(ce):y.icon.dynamicLayoutVertexBuffer.updateData(ce)}function Kt(y,i,u,p,g,_,C,I,E,D,F,N,J){const ce=I.glyphStartIndex+I.numGlyphs,le=I.lineStartIndex,pe=I.lineStartIndex+I.lineLength,ae=i.getoffsetX(I.glyphStartIndex),we=i.getoffsetX(ce-1),Be=A(y*ae,u,p,g,_,C,I.segment,le,pe,E,D,F,N,J);if(!Be)return null;const ge=A(y*we,u,p,g,_,C,I.segment,le,pe,E,D,F,N,J);return ge?{first:Be,last:ge}:null}function $t(y,i,u,p){return y===c.ai.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*p?{useVertical:!0}:(y===c.ai.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function ar(y,i,u,p,g,_,C,I,E,D,F,N,J,ce,le,pe){const ae=i/24,we=y.lineOffsetX*ae,Be=y.lineOffsetY*ae;let ge;if(y.numGlyphs>1){const Ie=y.glyphStartIndex+y.numGlyphs,Ve=y.lineStartIndex,He=y.lineStartIndex+y.lineLength,Ze=Kt(ae,I,we,Be,u,F,N,y,E,_,J,le,pe);if(!Ze)return{notEnoughRoom:!0};const et=Rt(Ze.first.point,C,pe).point,Je=Rt(Ze.last.point,C,pe).point;if(p&&!u){const ot=$t(y.writingMode,et,Je,ce);if(ot)return ot}ge=[Ze.first];for(let ot=y.glyphStartIndex+1;ot<Ie-1;ot++)ge.push(A(ae*I.getoffsetX(ot),we,Be,u,F,N,y.segment,Ve,He,E,_,J,le,pe));ge.push(Ze.last)}else{if(p&&!u){const Ve=Rt(N,g,pe).point,He=y.lineStartIndex+y.segment+1,Ze=new c.P(E.getx(He),E.gety(He)),et=Rt(Ze,g,pe),Je=et.signedDistanceFromCamera>0?et.point:Gr(N,Ze,Ve,1,g,pe),ot=$t(y.writingMode,Ve,Je,ce);if(ot)return ot}const Ie=A(ae*I.getoffsetX(y.glyphStartIndex),we,Be,u,F,N,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,E,_,J,le,pe);if(!Ie)return{notEnoughRoom:!0};ge=[Ie]}for(const Ie of ge)c.ak(D,Ie.point,Ie.angle);return{}}function Gr(y,i,u,p,g,_){const C=Rt(y.add(y.sub(i)._unit()),g,_).point,I=u.sub(C);return u.add(I._mult(p/I.mag()))}function Jt(y,i){const{projectionCache:u,lineVertexArray:p,labelPlaneMatrix:g,tileAnchorPoint:_,distanceFromAnchor:C,getElevation:I,previousVertex:E,direction:D,absOffsetX:F}=i;if(u.projections[y])return u.projections[y];const N=new c.P(p.getx(y),p.gety(y)),J=Rt(N,g,I);if(J.signedDistanceFromCamera>0)return u.projections[y]=J.point,J.point;const ce=y-D;return Gr(C===0?_:new c.P(p.getx(ce),p.gety(ce)),N,E,F-C+1,g,I)}function gn(y,i,u){return y._unit()._perp()._mult(i*u)}function de(y,i,u,p,g,_,C,I){const{projectionCache:E,direction:D}=I;if(E.offsets[y])return E.offsets[y];const F=u.add(i);if(y+D<p||y+D>=g)return E.offsets[y]=F,F;const N=Jt(y+D,I),J=gn(N.sub(u),C,D),ce=u.add(J),le=N.add(J);return E.offsets[y]=c.al(_,F,ce,le)||F,E.offsets[y]}function A(y,i,u,p,g,_,C,I,E,D,F,N,J,ce){const le=p?y-i:y+i;let pe=le>0?1:-1,ae=0;p&&(pe*=-1,ae=Math.PI),pe<0&&(ae+=Math.PI);let we,Be,ge=pe>0?I+C:I+C+1,Ie=g,Ve=g,He=0,Ze=0;const et=Math.abs(le),Je=[];let ot;for(;He+Ze<=et;){if(ge+=pe,ge<I||ge>=E)return null;He+=Ze,Ve=Ie,Be=we;const ft={projectionCache:N,lineVertexArray:D,labelPlaneMatrix:F,tileAnchorPoint:_,distanceFromAnchor:He,getElevation:ce,previousVertex:Ve,direction:pe,absOffsetX:et};if(Ie=Jt(ge,ft),u===0)Je.push(Ve),ot=Ie.sub(Ve);else{let Qt;const Nt=Ie.sub(Ve);Qt=Nt.mag()===0?gn(Jt(ge+pe,ft).sub(Ie),u,pe):gn(Nt,u,pe),Be||(Be=Ve.add(Qt)),we=de(ge,Qt,Ie,I,E,Be,u,ft),Je.push(Be),ot=we.sub(Be)}Ze=ot.mag()}const Bt=ot._mult((et-He)/Ze)._add(Be||Ve),fr=ae+Math.atan2(Ie.y-Ve.y,Ie.x-Ve.x);return Je.push(Bt),{point:Bt,angle:J?fr:0,path:Je}}const $=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function W(y,i){for(let u=0;u<y;u++){const p=i.length;i.resize(p+4),i.float32.set($,3*p)}}function Q(y,i,u){const p=i[0],g=i[1];return y[0]=u[0]*p+u[4]*g+u[12],y[1]=u[1]*p+u[5]*g+u[13],y[3]=u[3]*p+u[7]*g+u[15],y}const ie=100;class xe{constructor(i,u=new it(i.width+200,i.height+200,25),p=new it(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=p,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+ie,this.screenBottomBoundary=i.height+ie,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,p,g,_,C){const I=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY,C),E=p*I.perspectiveRatio,D=i.x1*E+I.point.x,F=i.y1*E+I.point.y,N=i.x2*E+I.point.x,J=i.y2*E+I.point.y;return!this.isInsideGrid(D,F,N,J)||u!=="always"&&this.grid.hitTest(D,F,N,J,u,_)||I.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[D,F,N,J],offscreen:this.isOffscreen(D,F,N,J)}}placeCollisionCircles(i,u,p,g,_,C,I,E,D,F,N,J,ce,le){const pe=[],ae=new c.P(u.anchorX,u.anchorY),we=Rt(ae,C,le),Be=_r(this.transform.cameraToCenterDistance,we.signedDistanceFromCamera),ge=(F?_/Be:_*Be)/c.ap,Ie=Rt(ae,I,le).point,Ve=Kt(ge,g,u.lineOffsetX*ge,u.lineOffsetY*ge,!1,Ie,ae,u,p,I,{projections:{},offsets:{}},!1,le);let He=!1,Ze=!1,et=!0;if(Ve){const Je=.5*J*Be+ce,ot=new c.P(-100,-100),Bt=new c.P(this.screenRightBoundary,this.screenBottomBoundary),fr=new rr,ft=Ve.first,Qt=Ve.last;let Nt=[];for(let or=ft.path.length-1;or>=1;or--)Nt.push(ft.path[or]);for(let or=1;or<Qt.path.length;or++)Nt.push(Qt.path[or]);const Nr=2.5*Je;if(E){const or=Nt.map(mr=>Rt(mr,E,le));Nt=or.some(mr=>mr.signedDistanceFromCamera<=0)?[]:or.map(mr=>mr.point)}let pr=[];if(Nt.length>0){const or=Nt[0].clone(),mr=Nt[0].clone();for(let yn=1;yn<Nt.length;yn++)or.x=Math.min(or.x,Nt[yn].x),or.y=Math.min(or.y,Nt[yn].y),mr.x=Math.max(mr.x,Nt[yn].x),mr.y=Math.max(mr.y,Nt[yn].y);pr=or.x>=ot.x&&mr.x<=Bt.x&&or.y>=ot.y&&mr.y<=Bt.y?[Nt]:mr.x<ot.x||or.x>Bt.x||mr.y<ot.y||or.y>Bt.y?[]:c.am([Nt],ot.x,ot.y,Bt.x,Bt.y)}for(const or of pr){fr.reset(or,.25*Je);let mr=0;mr=fr.length<=.5*Je?1:Math.ceil(fr.paddedLength/Nr)+1;for(let yn=0;yn<mr;yn++){const Zr=yn/Math.max(mr-1,1),ri=fr.lerp(Zr),Fn=ri.x+ie,kn=ri.y+ie;pe.push(Fn,kn,Je,0);const Xi=Fn-Je,en=kn-Je,Ho=Fn+Je,Wo=kn+Je;if(et=et&&this.isOffscreen(Xi,en,Ho,Wo),Ze=Ze||this.isInsideGrid(Xi,en,Ho,Wo),i!=="always"&&this.grid.hitTestCircle(Fn,kn,Je,i,N)&&(He=!0,!D))return{circles:[],offscreen:!1,collisionDetected:He}}}}return{circles:!D&&He||!Ze||Be<this.perspectiveRatioCutoff?[]:pe,offscreen:et,collisionDetected:He}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let p=1/0,g=1/0,_=-1/0,C=-1/0;for(const F of i){const N=new c.P(F.x+ie,F.y+ie);p=Math.min(p,N.x),g=Math.min(g,N.y),_=Math.max(_,N.x),C=Math.max(C,N.y),u.push(N)}const I=this.grid.query(p,g,_,C).concat(this.ignoredGrid.query(p,g,_,C)),E={},D={};for(const F of I){const N=F.key;if(E[N.bucketInstanceId]===void 0&&(E[N.bucketInstanceId]={}),E[N.bucketInstanceId][N.featureIndex])continue;const J=[new c.P(F.x1,F.y1),new c.P(F.x2,F.y1),new c.P(F.x2,F.y2),new c.P(F.x1,F.y2)];c.an(u,J)&&(E[N.bucketInstanceId][N.featureIndex]=!0,D[N.bucketInstanceId]===void 0&&(D[N.bucketInstanceId]=[]),D[N.bucketInstanceId].push(N.featureIndex))}return D}insertCollisionBox(i,u,p,g,_,C){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,p,g,_,C){const I=p?this.ignoredGrid:this.grid,E={bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u};for(let D=0;D<i.length;D+=4)I.insertCircle(E,i[D],i[D+1],i[D+2])}projectAndGetPerspectiveRatio(i,u,p,g){let _;return g?(_=[u,p,g(u,p),1],c.ag(_,_,i)):(_=[u,p,0,1],Q(_,_,i)),{point:new c.P((_[0]/_[3]+1)/2*this.transform.width+ie,(-_[1]/_[3]+1)/2*this.transform.height+ie),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(i,u,p,g){return p<ie||i>=this.screenRightBoundary||g<ie||u>this.screenBottomBoundary}isInsideGrid(i,u,p,g){return p>=0&&i<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=c.ao([]);return c.$(i,i,[-100,-100,0]),i}}function fe(y,i,u){return i*(c.N/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class oe{constructor(i,u,p,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class _e{constructor(i,u,p,g,_){this.text=new oe(i?i.text:null,u,p,_),this.icon=new oe(i?i.icon:null,u,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class De{constructor(i,u,p){this.text=i,this.icon=u,this.skipFade=p}}class Ue{constructor(){this.invProjMatrix=c.Z(),this.viewportMatrix=c.Z(),this.circles=[]}}class qe{constructor(i,u,p,g,_){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=_}}class Ye{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[i]}}function St(y,i,u,p,g){const{horizontalAlign:_,verticalAlign:C}=c.au(y);return new c.P(-(_-.5)*i+p[0]*g,-(C-.5)*u+p[1]*g)}function st(y,i,u,p,g,_){const{x1:C,x2:I,y1:E,y2:D,anchorPointX:F,anchorPointY:N}=y,J=new c.P(i,u);return p&&J._rotate(g?_:-_),{x1:C+J.x,y1:E+J.y,x2:I+J.x,y2:D+J.y,anchorPointX:F,anchorPointY:N}}class Lt{constructor(i,u,p,g,_){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new xe(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Ye(g),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,p,g){const _=p.getBucket(u),C=p.latestFeatureIndex;if(!_||!C||u.id!==_.layerIds[0])return;const I=p.collisionBoxArray,E=_.layers[0].layout,D=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),F=p.tileSize/c.N,N=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),J=E.get("text-pitch-alignment")==="map",ce=E.get("text-rotation-alignment")==="map",le=fe(p,1,this.transform.zoom),pe=Le(N,J,ce,this.transform,le);let ae=null;if(J){const Be=Wt(N,J,ce,this.transform,le);ae=c.a1([],this.transform.labelPlaneMatrix,Be)}this.retainedQueryData[_.bucketInstanceId]=new qe(_.bucketInstanceId,C,_.sourceLayerIndex,_.index,p.tileID);const we={bucket:_,layout:E,posMatrix:N,textLabelPlaneMatrix:pe,labelToScreenMatrix:ae,scale:D,textPixelRatio:F,holdingForFade:p.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:c.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const Be of _.sortKeyRanges){const{sortKey:ge,symbolInstanceStart:Ie,symbolInstanceEnd:Ve}=Be;i.push({sortKey:ge,symbolInstanceStart:Ie,symbolInstanceEnd:Ve,parameters:we})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:we})}attemptAnchorPlacement(i,u,p,g,_,C,I,E,D,F,N,J,ce,le,pe,ae){const we=c.aq[i.textAnchor],Be=[i.textOffset0,i.textOffset1],ge=St(we,p,g,Be,_),Ie=this.collisionIndex.placeCollisionBox(st(u,ge.x,ge.y,C,I,this.transform.angle),N,E,D,F.predicate,ae);if((!pe||this.collisionIndex.placeCollisionBox(st(pe,ge.x,ge.y,C,I,this.transform.angle),N,E,D,F.predicate,ae).box.length!==0)&&Ie.box.length>0){let Ve;if(this.prevPlacement&&this.prevPlacement.variableOffsets[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID].text&&(Ve=this.prevPlacement.variableOffsets[J.crossTileID].anchor),J.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[J.crossTileID]={textOffset:Be,width:p,height:g,anchor:we,textBoxScale:_,prevAnchor:Ve},this.markUsedJustification(ce,we,J,le),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,le,J),this.placedOrientations[J.crossTileID]=le),{shift:ge,placedGlyphBoxes:Ie}}}placeLayerBucketPart(i,u,p){const{bucket:g,layout:_,posMatrix:C,textLabelPlaneMatrix:I,labelToScreenMatrix:E,textPixelRatio:D,holdingForFade:F,collisionBoxArray:N,partiallyEvaluatedTextSize:J,collisionGroup:ce}=i.parameters,le=_.get("text-optional"),pe=_.get("icon-optional"),ae=c.ar(_,"text-overlap","text-allow-overlap"),we=ae==="always",Be=c.ar(_,"icon-overlap","icon-allow-overlap"),ge=Be==="always",Ie=_.get("text-rotation-alignment")==="map",Ve=_.get("text-pitch-alignment")==="map",He=_.get("icon-text-fit")!=="none",Ze=_.get("symbol-z-order")==="viewport-y",et=we&&(ge||!g.hasIconData()||pe),Je=ge&&(we||!g.hasTextData()||le);!g.collisionArrays&&N&&g.deserializeCollisionBoxes(N);const ot=this.retainedQueryData[g.bucketInstanceId].tileID,Bt=this.terrain?(ft,Qt)=>this.terrain.getElevation(ot,ft,Qt):null,fr=(ft,Qt)=>{var Nt,Nr;if(u[ft.crossTileID])return;if(F)return void(this.placements[ft.crossTileID]=new De(!1,!1,!1));let pr=!1,or=!1,mr=!0,yn=null,Zr={box:null,offscreen:null},ri={box:null,offscreen:null},Fn=null,kn=null,Xi=null,en=0,Ho=0,Wo=0;Qt.textFeatureIndex?en=Qt.textFeatureIndex:ft.useRuntimeCollisionCircles&&(en=ft.featureIndex),Qt.verticalTextFeatureIndex&&(Ho=Qt.verticalTextFeatureIndex);const Ha=Qt.textBox;if(Ha){const li=vn=>{let Nn=c.ai.horizontal;if(g.allowVerticalPlacement&&!vn&&this.prevPlacement){const zi=this.prevPlacement.placedOrientations[ft.crossTileID];zi&&(this.placedOrientations[ft.crossTileID]=zi,Nn=zi,this.markUsedOrientation(g,Nn,ft))}return Nn},ni=(vn,Nn)=>{if(g.allowVerticalPlacement&&ft.numVerticalGlyphVertices>0&&Qt.verticalTextBox){for(const zi of g.writingModes)if(zi===c.ai.vertical?(Zr=Nn(),ri=Zr):Zr=vn(),Zr&&Zr.box&&Zr.box.length)break}else Zr=vn()},vi=ft.textAnchorOffsetStartIndex,ms=ft.textAnchorOffsetEndIndex;if(ms===vi){const vn=(Nn,zi)=>{const _n=this.collisionIndex.placeCollisionBox(Nn,ae,D,C,ce.predicate,Bt);return _n&&_n.box&&_n.box.length&&(this.markUsedOrientation(g,zi,ft),this.placedOrientations[ft.crossTileID]=zi),_n};ni(()=>vn(Ha,c.ai.horizontal),()=>{const Nn=Qt.verticalTextBox;return g.allowVerticalPlacement&&ft.numVerticalGlyphVertices>0&&Nn?vn(Nn,c.ai.vertical):{box:null,offscreen:null}}),li(Zr&&Zr.box&&Zr.box.length)}else{let vn=c.aq[(Nr=(Nt=this.prevPlacement)===null||Nt===void 0?void 0:Nt.variableOffsets[ft.crossTileID])===null||Nr===void 0?void 0:Nr.anchor];const Nn=(_n,gs,eu)=>{const Yf=_n.x2-_n.x1,Qf=_n.y2-_n.y1,Ov=ft.textBoxScale,ch=He&&Be==="never"?gs:null;let Go={box:[],offscreen:!1},ys=ae==="never"?1:2,qo="never";vn&&ys++;for(let fo=0;fo<ys;fo++){for(let Zo=vi;Zo<ms;Zo++){const uh=g.textAnchorOffsets.get(Zo);if(vn&&uh.textAnchor!==vn)continue;const ba=this.attemptAnchorPlacement(uh,_n,Yf,Qf,Ov,Ie,Ve,D,C,ce,qo,ft,g,eu,ch,Bt);if(ba&&(Go=ba.placedGlyphBoxes,Go&&Go.box&&Go.box.length))return pr=!0,yn=ba.shift,Go}vn?vn=null:qo=ae}return Go};ni(()=>Nn(Ha,Qt.iconBox,c.ai.horizontal),()=>{const _n=Qt.verticalTextBox;return g.allowVerticalPlacement&&!(Zr&&Zr.box&&Zr.box.length)&&ft.numVerticalGlyphVertices>0&&_n?Nn(_n,Qt.verticalIconBox,c.ai.vertical):{box:null,offscreen:null}}),Zr&&(pr=Zr.box,mr=Zr.offscreen);const zi=li(Zr&&Zr.box);if(!pr&&this.prevPlacement){const _n=this.prevPlacement.variableOffsets[ft.crossTileID];_n&&(this.variableOffsets[ft.crossTileID]=_n,this.markUsedJustification(g,_n.anchor,ft,zi))}}}if(Fn=Zr,pr=Fn&&Fn.box&&Fn.box.length>0,mr=Fn&&Fn.offscreen,ft.useRuntimeCollisionCircles){const li=g.text.placedSymbolArray.get(ft.centerJustifiedTextSymbolIndex),ni=c.aj(g.textSizeData,J,li),vi=_.get("text-padding");kn=this.collisionIndex.placeCollisionCircles(ae,li,g.lineVertexArray,g.glyphOffsetArray,ni,C,I,E,p,Ve,ce.predicate,ft.collisionCircleDiameter,vi,Bt),kn.circles.length&&kn.collisionDetected&&!p&&c.w("Collisions detected, but collision boxes are not shown"),pr=we||kn.circles.length>0&&!kn.collisionDetected,mr=mr&&kn.offscreen}if(Qt.iconFeatureIndex&&(Wo=Qt.iconFeatureIndex),Qt.iconBox){const li=ni=>{const vi=He&&yn?st(ni,yn.x,yn.y,Ie,Ve,this.transform.angle):ni;return this.collisionIndex.placeCollisionBox(vi,Be,D,C,ce.predicate,Bt)};ri&&ri.box&&ri.box.length&&Qt.verticalIconBox?(Xi=li(Qt.verticalIconBox),or=Xi.box.length>0):(Xi=li(Qt.iconBox),or=Xi.box.length>0),mr=mr&&Xi.offscreen}const fs=le||ft.numHorizontalGlyphVertices===0&&ft.numVerticalGlyphVertices===0,Js=pe||ft.numIconVertices===0;if(fs||Js?Js?fs||(or=or&&pr):pr=or&&pr:or=pr=or&&pr,pr&&Fn&&Fn.box&&this.collisionIndex.insertCollisionBox(Fn.box,ae,_.get("text-ignore-placement"),g.bucketInstanceId,ri&&ri.box&&Ho?Ho:en,ce.ID),or&&Xi&&this.collisionIndex.insertCollisionBox(Xi.box,Be,_.get("icon-ignore-placement"),g.bucketInstanceId,Wo,ce.ID),kn&&(pr&&this.collisionIndex.insertCollisionCircles(kn.circles,ae,_.get("text-ignore-placement"),g.bucketInstanceId,en,ce.ID),p)){const li=g.bucketInstanceId;let ni=this.collisionCircleArrays[li];ni===void 0&&(ni=this.collisionCircleArrays[li]=new Ue);for(let vi=0;vi<kn.circles.length;vi+=4)ni.circles.push(kn.circles[vi+0]),ni.circles.push(kn.circles[vi+1]),ni.circles.push(kn.circles[vi+2]),ni.circles.push(kn.collisionDetected?1:0)}if(ft.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ft.crossTileID]=new De(pr||et,or||Je,mr||g.justReloaded),u[ft.crossTileID]=!0};if(Ze){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ft=g.getSortedSymbolIndexes(this.transform.angle);for(let Qt=ft.length-1;Qt>=0;--Qt){const Nt=ft[Qt];fr(g.symbolInstances.get(Nt),g.collisionArrays[Nt])}}else for(let ft=i.symbolInstanceStart;ft<i.symbolInstanceEnd;ft++)fr(g.symbolInstances.get(ft),g.collisionArrays[ft]);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const ft=this.collisionCircleArrays[g.bucketInstanceId];c.as(ft.invProjMatrix,C),ft.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,u,p,g){let _;_=g===c.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[c.at(u)];const C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const I of C)I>=0&&(i.text.placedSymbolArray.get(I).crossTileID=_>=0&&I!==_?0:p.crossTileID)}markUsedOrientation(i,u,p){const g=u===c.ai.horizontal||u===c.ai.horizontalOnly?u:0,_=u===c.ai.vertical?u:0,C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const I of C)i.text.placedSymbolArray.get(I).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(i):1,_=u?u.opacities:{},C=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(const E in this.placements){const D=this.placements[E],F=_[E];F?(this.opacities[E]=new _e(F,g,D.text,D.icon),p=p||D.text!==F.text.placed||D.icon!==F.icon.placed):(this.opacities[E]=new _e(null,g,D.text,D.icon,D.skipFade),p=p||D.text||D.icon)}for(const E in _){const D=_[E];if(!this.opacities[E]){const F=new _e(D,g,!1,!1);F.isHidden()||(this.opacities[E]=F,p=p||D.text.placed||D.icon.placed)}}for(const E in C)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=C[E]);for(const E in I)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=I[E]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const p={};for(const g of u){const _=g.getBucket(i);_&&g.latestFeatureIndex&&i.id===_.layerIds[0]&&this.updateBucketOpacities(_,p,g.collisionBoxArray)}}updateBucketOpacities(i,u,p){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0],_=g.layout,C=new _e(null,0,!1,!1,!0),I=_.get("text-allow-overlap"),E=_.get("icon-allow-overlap"),D=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=_.get("text-rotation-alignment")==="map",N=_.get("text-pitch-alignment")==="map",J=_.get("icon-text-fit")!=="none",ce=new _e(null,0,I&&(E||!i.hasIconData()||_.get("icon-optional")),E&&(I||!i.hasTextData()||_.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const le=(pe,ae,we)=>{for(let Be=0;Be<ae/4;Be++)pe.opacityVertexArray.emplaceBack(we);pe.hasVisibleVertices=pe.hasVisibleVertices||we!==Tt};for(let pe=0;pe<i.symbolInstances.length;pe++){const ae=i.symbolInstances.get(pe),{numHorizontalGlyphVertices:we,numVerticalGlyphVertices:Be,crossTileID:ge}=ae;let Ie=this.opacities[ge];u[ge]?Ie=C:Ie||(Ie=ce,this.opacities[ge]=Ie),u[ge]=!0;const Ve=ae.numIconVertices>0,He=this.placedOrientations[ae.crossTileID],Ze=He===c.ai.vertical,et=He===c.ai.horizontal||He===c.ai.horizontalOnly;if(we>0||Be>0){const Je=Xt(Ie.text);le(i.text,we,Ze?Tt:Je),le(i.text,Be,et?Tt:Je);const ot=Ie.text.isHidden();[ae.rightJustifiedTextSymbolIndex,ae.centerJustifiedTextSymbolIndex,ae.leftJustifiedTextSymbolIndex].forEach(ft=>{ft>=0&&(i.text.placedSymbolArray.get(ft).hidden=ot||Ze?1:0)}),ae.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ae.verticalPlacedTextSymbolIndex).hidden=ot||et?1:0);const Bt=this.variableOffsets[ae.crossTileID];Bt&&this.markUsedJustification(i,Bt.anchor,ae,He);const fr=this.placedOrientations[ae.crossTileID];fr&&(this.markUsedJustification(i,"left",ae,fr),this.markUsedOrientation(i,fr,ae))}if(Ve){const Je=Xt(Ie.icon),ot=!(J&&ae.verticalPlacedIconSymbolIndex&&Ze);ae.placedIconSymbolIndex>=0&&(le(i.icon,ae.numIconVertices,ot?Je:Tt),i.icon.placedSymbolArray.get(ae.placedIconSymbolIndex).hidden=Ie.icon.isHidden()),ae.verticalPlacedIconSymbolIndex>=0&&(le(i.icon,ae.numVerticalIconVertices,ot?Tt:Je),i.icon.placedSymbolArray.get(ae.verticalPlacedIconSymbolIndex).hidden=Ie.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Je=i.collisionArrays[pe];if(Je){let ot=new c.P(0,0);if(Je.textBox||Je.verticalTextBox){let fr=!0;if(D){const ft=this.variableOffsets[ge];ft?(ot=St(ft.anchor,ft.width,ft.height,ft.textOffset,ft.textBoxScale),F&&ot._rotate(N?this.transform.angle:-this.transform.angle)):fr=!1}Je.textBox&&Re(i.textCollisionBox.collisionVertexArray,Ie.text.placed,!fr||Ze,ot.x,ot.y),Je.verticalTextBox&&Re(i.textCollisionBox.collisionVertexArray,Ie.text.placed,!fr||et,ot.x,ot.y)}const Bt=!!(!et&&Je.verticalIconBox);Je.iconBox&&Re(i.iconCollisionBox.collisionVertexArray,Ie.icon.placed,Bt,J?ot.x:0,J?ot.y:0),Je.verticalIconBox&&Re(i.iconCollisionBox.collisionVertexArray,Ie.icon.placed,!Bt,J?ot.x:0,J?ot.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const pe=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=pe.invProjMatrix,i.placementViewportMatrix=pe.viewportMatrix,i.collisionCircleArray=pe.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function Re(y,i,u,p,g){y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0)}const Ne=Math.pow(2,25),nt=Math.pow(2,24),ut=Math.pow(2,17),_t=Math.pow(2,16),ur=Math.pow(2,9),tr=Math.pow(2,8),yr=Math.pow(2,1);function Xt(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,u=Math.floor(127*y.opacity);return u*Ne+i*nt+u*ut+i*_t+u*ur+i*tr+u*yr+i}const Tt=0;class qr{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,p,g,_){const C=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(C,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((I,E)=>I.sortKey-E.sortKey));this._currentPartIndex<C.length;)if(u.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,_())return!0;return!1}}class dr{constructor(i,u,p,g,_,C,I,E){this.placement=new Lt(i,u,C,I,E),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,u,p){const g=c.h.now(),_=()=>!this._forceFullPlacement&&c.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const C=u[i[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=I)&&(!C.maxzoom||C.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new qr(C)),this._inProgressLayer.continuePlacement(p[C.source],this.placement,this._showCollisionBoxes,C,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Mn=512/c.N/2;class ao{constructor(i,u,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let _=0;_<u.length;_++){const C=u.get(_),I=C.key,E=g.get(I);E?E.push(C):g.set(I,[C])}for(const[_,C]of g){const I={positions:C.map(E=>({x:Math.floor(E.anchorX*Mn),y:Math.floor(E.anchorY*Mn)})),crossTileIDs:C.map(E=>E.crossTileID)};if(I.positions.length>128){const E=new c.av(I.positions.length,16,Uint16Array);for(const{x:D,y:F}of I.positions)E.add(D,F);E.finish(),delete I.positions,I.index=E}this._symbolsByKey[_]=I}}getScaledCoordinates(i,u){const{x:p,y:g,z:_}=this.tileID.canonical,{x:C,y:I,z:E}=u.canonical,D=Mn/Math.pow(2,E-_),F=(I*c.N+i.anchorY)*D,N=g*c.N*Mn;return{x:Math.floor((C*c.N+i.anchorX)*D-p*c.N*Mn),y:Math.floor(F-N)}}findMatches(i,u,p){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<i.length;_++){const C=i.get(_);if(C.crossTileID)continue;const I=this._symbolsByKey[C.key];if(!I)continue;const E=this.getScaledCoordinates(C,u);if(I.index){const D=I.index.range(E.x-g,E.y-g,E.x+g,E.y+g).sort();for(const F of D){const N=I.crossTileIDs[F];if(!p[N]){p[N]=!0,C.crossTileID=N;break}}}else if(I.positions)for(let D=0;D<I.positions.length;D++){const F=I.positions[D],N=I.crossTileIDs[D];if(Math.abs(F.x-E.x)<=g&&Math.abs(F.y-E.y)<=g&&!p[N]){p[N]=!0,C.crossTileID=N;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class Ir{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class so{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const p in this.indexes){const g=this.indexes[p],_={};for(const C in g){const I=g[C];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),_[I.tileID.key]=I}this.indexes[p]=_}this.lng=i}addBucket(i,u,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const _ in this.indexes){const C=this.indexes[_];if(Number(_)>i.overscaledZ)for(const I in C){const E=C[I];E.tileID.isChildOf(i)&&E.findMatches(u.symbolInstances,i,g)}else{const I=C[i.scaledTo(Number(_)).key];I&&I.findMatches(u.symbolInstances,i,g)}}for(let _=0;_<u.symbolInstances.length;_++){const C=u.symbolInstances.get(_);C.crossTileID||(C.crossTileID=p.generate(),g[C.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new ao(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const p of u.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let u=!1;for(const p in this.indexes){const g=this.indexes[p];for(const _ in g)i[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[_]),delete g[_],u=!0)}return u}}class Hi{constructor(){this.layerIndexes={},this.crossTileIDs=new Ir,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,p){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new so);let _=!1;const C={};g.handleWrapJump(p);for(const I of u){const E=I.getBucket(i);E&&i.id===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(I.tileID,E,this.crossTileIDs)&&(_=!0),C[E.bucketInstanceId]=!0)}return g.removeStaleBuckets(C)&&(_=!0),_}pruneUnusedLayers(i){const u={};i.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}const si=(y,i)=>c.x(y,i&&i.filter(u=>u.identifier!=="source.canvas")),Wi=c.F(c.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),wv=c.F(c.ax,["setCenter","setZoom","setBearing","setPitch"]),lo=c.aw();class ti extends c.E{constructor(i,u={}){super(),this.map=i,this.dispatcher=new ht(nr(),this,i._getMapId()),this.imageManager=new Se,this.imageManager.setEventedParent(this),this.glyphManager=new Me(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Ke(256,512),this.crossTileSymbolIndex=new Hi,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",c.az());const p=this;this._rtlTextPluginCallback=ti.registerForPluginStateChange(g=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(_,C)=>{if(c.aA(_),C&&C.every(I=>I))for(const I in p.sourceCaches){const E=p.sourceCaches[I].getSource().type;E!=="vector"&&E!=="geojson"||p.sourceCaches[I].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const _=this.sourceCaches[g.sourceId];if(!_)return;const C=_.getSource();if(C&&C.vectorLayerIds)for(const I in this._layers){const E=this._layers[I];E.source===C.id&&this._validateLayer(E)}})}loadURL(i,u={},p){this.fire(new c.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const g=this.map._requestManager.transformRequest(i,B.Style);this._request=c.f(g,(_,C)=>{this._request=null,_?this.fire(new c.j(_)):C&&this._load(C,u,p)})}loadJSON(i,u={},p){this.fire(new c.k("dataloading",{dataType:"style"})),this._request=c.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(i,u,p)})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(lo,{validate:!1})}_load(i,u,p){var g;const _=u.transformStyle?u.transformStyle(p,i):i;if(!u.validate||!si(this,c.y(_))){this._loaded=!0,this.stylesheet=_;for(const C in _.sources)this.addSource(C,_.sources[C],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new Ge(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const i=c.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of i){const p=c.aC(u);p.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=p}}_loadSprite(i,u=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,_,C,I){const E=ue(g),D=E.length,F=C>1?"@2x":"",N={},J={},ce={};for(const{id:le,url:pe}of E){const ae=_.transformRequest(_.normalizeSpriteURL(pe,F,".json"),B.SpriteJSON),we=`${le}_${ae.url}`;N[we]=c.f(ae,(Ie,Ve)=>{delete N[we],J[le]=Ve,Ce(I,J,ce,Ie,D)});const Be=_.transformRequest(_.normalizeSpriteURL(pe,F,".png"),B.SpriteImage),ge=`${le}_${Be.url}`;N[ge]=X.getImage(Be,(Ie,Ve)=>{delete N[ge],ce[le]=Ve,Ce(I,J,ce,Ie,D)})}return{cancel(){for(const le of Object.values(N))le.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(g,_)=>{if(this._spriteRequest=null,g)this.fire(new c.j(g));else if(_)for(const C in _){this._spritesImagesIds[C]=[];const I=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(E=>!(E in _)):[];for(const E of I)this.imageManager.removeImage(E),this._changedImages[E]=!0;for(const E in _[C]){const D=C==="default"?E:`${C}:${E}`;this._spritesImagesIds[C].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,_[C][E],!1):this.imageManager.addImage(D,_[C][E]),u&&(this._changedImages[D]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const p=i.sourceLayer;if(!p)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new c.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const u=this._serializedAllLayers();if(!i||i.length===0)return Object.values(u);const p=[];for(const g of i)u[g]&&p.push(u[g]);return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const g=this._layers[p];g.type!=="custom"&&(i[p]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const C in this._updatedSources){const I=this._updatedSources[C];if(I==="reload")this._reloadSource(C);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];p[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(i,this._availableImages),!_.isHidden(i.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in p){const _=this.sourceCaches[g];p[g]!==_.used&&_.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,u={}){this._checkLoaded();const p=this.serialize();if(i=u.transformStyle?u.transformStyle(p,i):i,si(this,c.y(i)))return!1;(i=c.aD(i)).layers=c.aB(i.layers);const g=c.aE(p,i).filter(C=>!(C.command in wv));if(g.length===0)return!1;const _=g.filter(C=>!(C.command in Wi));if(_.length>0)throw new Error(`Unimplemented: ${_.map(C=>C.command).join(", ")}.`);for(const C of g)C.command!=="setTransition"&&this[C.command].apply(this,C.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,u){if(this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.y.source,`sources.${i}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[i]=new cr(i,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new c.j(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,p={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new c.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(i.type==="custom"){if(si(this,c.aF(i)))return;_=c.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(g,i.source),i=c.aD(i),i=c.e(i,{source:g})),this._validate(c.y.layer,`layers.${g}`,i,{arrayIndex:-1},p))return;_=c.aC(i),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const C=u?this._order.indexOf(u):this._order.length;if(u&&C===-1)this.fire(new c.j(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(C,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const I=this._removedLayers[g];delete this._removedLayers[g],I.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new c.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const p=this._order.indexOf(i);this._order.splice(p,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new c.j(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,p){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===u&&g.maxzoom===p||(u!=null&&(g.minzoom=u),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,p={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!c.aG(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(c.y.filter,`layers.${g.id}.filter`,u,null,p)||(g.filter=c.aD(u),this._updateLayer(g)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return c.aD(this.getLayer(i).filter)}setLayoutProperty(i,u,p,g={}){this._checkLoaded();const _=this.getLayer(i);_?c.aG(_.getLayoutProperty(u),p)||(_.setLayoutProperty(u,p,g),this._updateLayer(_)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const p=this.getLayer(i);if(p)return p.getLayoutProperty(u);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,p,g={}){this._checkLoaded();const _=this.getLayer(i);_?c.aG(_.getPaintProperty(u),p)||(_.setPaintProperty(u,p,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const p=i.source,g=i.sourceLayer,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new c.j(new Error(`The source '${p}' does not exist in the map's style.`)));const C=_.getSource().type;C==="geojson"&&g?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||g?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,i.id,u)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const p=i.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new c.j(new Error(`The source '${p}' does not exist in the map's style.`)));const _=g.getSource().type,C=_==="vector"?i.sourceLayer:void 0;_!=="vector"||C?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(C,i.id,u):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,p=i.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,i.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=c.aH(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return c.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:i,layers:u,terrain:p},_=>_!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=C=>this._layers[C].type==="fill-extrusion",p={},g=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(u(I)){p[I]=C;for(const E of i){const D=E[I];if(D)for(const F of D)g.push(F)}}}g.sort((C,I)=>I.intersectionZ-C.intersectionZ);const _=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(u(I))for(let E=g.length-1;E>=0;E--){const D=g[E].feature;if(p[D.layer.id]<C)break;_.push(D),g.pop()}else for(const E of i){const D=E[I];if(D)for(const F of D)_.push(F.feature)}}return _}queryRenderedFeatures(i,u,p){u&&u.filter&&this._validate(c.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const I of u.layers){const E=this._layers[I];if(!E)return this.fire(new c.j(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];g[E.source]=!0}}const _=[];u.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const I in this.sourceCaches)u.layers&&!g[I]||_.push(yt(this.sourceCaches[I],this._layers,C,i,u,p));return this.placement&&_.push(function(I,E,D,F,N,J,ce){const le={},pe=J.queryRenderedSymbols(F),ae=[];for(const we of Object.keys(pe).map(Number))ae.push(ce[we]);ae.sort(Dr);for(const we of ae){const Be=we.featureIndex.lookupSymbolFeatures(pe[we.bucketInstanceId],E,we.bucketIndex,we.sourceLayerIndex,N.filter,N.layers,N.availableImages,I);for(const ge in Be){const Ie=le[ge]=le[ge]||[],Ve=Be[ge];Ve.sort((He,Ze)=>{const et=we.featureSortOrder;if(et){const Je=et.indexOf(He.featureIndex);return et.indexOf(Ze.featureIndex)-Je}return Ze.featureIndex-He.featureIndex});for(const He of Ve)Ie.push(He)}}for(const we in le)le[we].forEach(Be=>{const ge=Be.feature,Ie=D[I[we].source].getFeatureState(ge.layer["source-layer"],ge.id);ge.source=ge.layer.source,ge.layer["source-layer"]&&(ge.sourceLayer=ge.layer["source-layer"]),ge.state=Ie});return le}(this._layers,C,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(i,u){u&&u.filter&&this._validate(c.y.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[i];return p?function(g,_){const C=g.getRenderableIds().map(D=>g.getTileByID(D)),I=[],E={};for(let D=0;D<C.length;D++){const F=C[D],N=F.tileID.canonical.key;E[N]||(E[N]=!0,F.querySourceFeatures(I,_))}return I}(p,u):[]}addSourceType(i,u,p){return Cr(i)?p(new Error(`A source type called "${i}" already exists.`)):(((g,_)=>{gr[g]=_})(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const C in i)if(!c.aG(i[C],p[C])){g=!0;break}if(!g)return;const _={now:c.h.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(_)}_validate(i,u,p,g,_={}){return(!_||_.validate!==!1)&&si(this,i.call(c.y,c.e({key:u,style:this.serialize(),value:p,styleSpec:c.v},g)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),c.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,p,g,_=!1){let C=!1,I=!1;const E={};for(const D of this._order){const F=this._layers[D];if(F.type!=="symbol")continue;if(!E[F.source]){const J=this.sourceCaches[F.source];E[F.source]=J.getRenderableIds(!0).map(ce=>J.getTileByID(ce)).sort((ce,le)=>le.tileID.overscaledZ-ce.tileID.overscaledZ||(ce.tileID.isLessThan(le.tileID)?-1:1))}const N=this.crossTileSymbolIndex.addLayer(F,E[F.source],i.center.lng);C=C||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(c.h.now(),i.zoom))&&(this.pauseablePlacement=new dr(i,this.map.terrain,this._order,_,u,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(c.h.now()),I=!0),C&&this.pauseablePlacement.placement.setStale()),I||C)for(const D of this._order){const F=this._layers[D];F.type==="symbol"&&this.placement.updateLayerOpacities(F,E[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(c.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,p){this.imageManager.getImages(u.icons,p),this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,p){this.glyphManager.getGlyphs(u.stacks,p);const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,[""])}getResource(i,u,p){return c.m(u,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,u={}){this._checkLoaded(),i&&this._validate(c.y.glyphs,"glyphs",i,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,u,p={},g){this._checkLoaded();const _=[{id:i,url:u}],C=[...ue(this.stylesheet.sprite),..._];this._validate(c.y.sprite,"sprite",C,null,p)||(this.stylesheet.sprite=C,this._loadSprite(_,!0,g))}removeSprite(i){this._checkLoaded();const u=ue(this.stylesheet.sprite);if(u.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(const p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===i),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return ue(this.stylesheet.sprite)}setSprite(i,u={},p){this._checkLoaded(),i&&this._validate(c.y.sprite,"sprite",i,null,u)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}ti.registerForPluginStateChange=c.aK;var Tc=c.Q([{name:"a_pos",type:"Int16",components:2}]),Ns="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const an={prelude:Er(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Er(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Er(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Er(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Er("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Er(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Er(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Er("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Er("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Er("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Er(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Er(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Er(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Er(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Er(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Er(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Er(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Er(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Er(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Er(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Er(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Er(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Er(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Er(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Er(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Er("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ns),terrainDepth:Er("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ns),terrainCoords:Er("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ns)};function Er(y,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=_?_.concat(g):g,I={};return{fragmentSource:y=y.replace(u,(E,D,F,N,J)=>(I[J]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${J}
varying ${F} ${N} ${J};
#else
uniform ${F} ${N} u_${J};
#endif
`:`
#ifdef HAS_UNIFORM_u_${J}
    ${F} ${N} ${J} = u_${J};
#endif
`)),vertexSource:i=i.replace(u,(E,D,F,N,J)=>{const ce=N==="float"?"vec2":"vec4",le=J.match(/color/)?"color":ce;return I[J]?D==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
attribute ${F} ${ce} a_${J};
varying ${F} ${N} ${J};
#else
uniform ${F} ${N} u_${J};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = a_${J};
#else
    ${F} ${N} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = unpack_mix_${le}(a_${J}, u_${J}_t);
#else
    ${F} ${N} ${J} = u_${J};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
attribute ${F} ${ce} a_${J};
#else
uniform ${F} ${N} u_${J};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${F} ${N} ${J} = a_${J};
#else
    ${F} ${N} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${F} ${N} ${J} = unpack_mix_${le}(a_${J}, u_${J}_t);
#else
    ${F} ${N} ${J} = u_${J};
#endif
`}),staticAttributes:p,staticUniforms:C}}class as{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,p,g,_,C,I,E,D){this.context=i;let F=this.boundPaintVertexBuffers.length!==g.length;for(let N=0;!F&&N<g.length;N++)this.boundPaintVertexBuffers[N]!==g[N]&&(F=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||F||this.boundIndexBuffer!==_||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==E||this.boundDynamicVertexBuffer3!==D?this.freshBind(u,p,g,_,C,I,E,D):(i.bindVertexArray.set(this.vao),I&&I.bind(),_&&_.dynamicDraw&&_.bind(),E&&E.bind(),D&&D.bind())}freshBind(i,u,p,g,_,C,I,E){const D=i.numAttributes,F=this.context,N=F.gl;this.vao&&this.destroy(),this.vao=F.createVertexArray(),F.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=E,u.enableAttributes(N,i);for(const J of p)J.enableAttributes(N,i);C&&C.enableAttributes(N,i),I&&I.enableAttributes(N,i),E&&E.enableAttributes(N,i),u.bind(),u.setVertexAttribPointers(N,i,_);for(const J of p)J.bind(),J.setVertexAttribPointers(N,i,_);C&&(C.bind(),C.setVertexAttribPointers(N,i,_)),g&&g.bind(),I&&(I.bind(),I.setVertexAttribPointers(N,i,_)),E&&(E.bind(),E.setVertexAttribPointers(N,i,_)),F.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function dn(y){const i=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const p=y[u].split(" ");i.push(p.pop())}return i}class Pc{constructor(i,u,p,g,_,C){const I=i.gl;this.program=I.createProgram();const E=dn(u.staticAttributes),D=p?p.getBinderAttributes():[],F=E.concat(D),N=an.prelude.staticUniforms?dn(an.prelude.staticUniforms):[],J=u.staticUniforms?dn(u.staticUniforms):[],ce=p?p.getBinderUniforms():[],le=N.concat(J).concat(ce),pe=[];for(const He of le)pe.indexOf(He)<0&&pe.push(He);const ae=p?p.defines():[];_&&ae.push("#define OVERDRAW_INSPECTOR;"),C&&ae.push("#define TERRAIN3D;");const we=ae.concat(an.prelude.fragmentSource,u.fragmentSource).join(`
`),Be=ae.concat(an.prelude.vertexSource,u.vertexSource).join(`
`),ge=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(ge,we),I.compileShader(ge),!I.getShaderParameter(ge,I.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${I.getShaderInfoLog(ge)}`);I.attachShader(this.program,ge);const Ie=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(Ie,Be),I.compileShader(Ie),!I.getShaderParameter(Ie,I.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${I.getShaderInfoLog(Ie)}`);I.attachShader(this.program,Ie),this.attributes={};const Ve={};this.numAttributes=F.length;for(let He=0;He<this.numAttributes;He++)F[He]&&(I.bindAttribLocation(this.program,He,F[He]),this.attributes[F[He]]=He);if(I.linkProgram(this.program),!I.getProgramParameter(this.program,I.LINK_STATUS))throw new Error(`Program failed to link: ${I.getProgramInfoLog(this.program)}`);I.deleteShader(Ie),I.deleteShader(ge);for(let He=0;He<pe.length;He++){const Ze=pe[He];if(Ze&&!Ve[Ze]){const et=I.getUniformLocation(this.program,Ze);et&&(Ve[Ze]=et)}}this.fixedUniforms=g(i,Ve),this.terrainUniforms=((He,Ze)=>({u_depth:new c.aL(He,Ze.u_depth),u_terrain:new c.aL(He,Ze.u_terrain),u_terrain_dim:new c.aM(He,Ze.u_terrain_dim),u_terrain_matrix:new c.aN(He,Ze.u_terrain_matrix),u_terrain_unpack:new c.aO(He,Ze.u_terrain_unpack),u_terrain_exaggeration:new c.aM(He,Ze.u_terrain_exaggeration)}))(i,Ve),this.binderUniforms=p?p.getUniforms(i,Ve):[]}draw(i,u,p,g,_,C,I,E,D,F,N,J,ce,le,pe,ae,we,Be){const ge=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(g),i.setColorMode(_),i.setCullFace(C),E){i.activeTexture.set(ge.TEXTURE2),ge.bindTexture(ge.TEXTURE_2D,E.depthTexture),i.activeTexture.set(ge.TEXTURE3),ge.bindTexture(ge.TEXTURE_2D,E.texture);for(const Ve in this.terrainUniforms)this.terrainUniforms[Ve].set(E[Ve])}for(const Ve in this.fixedUniforms)this.fixedUniforms[Ve].set(I[Ve]);pe&&pe.setUniforms(i,this.binderUniforms,ce,{zoom:le});let Ie=0;switch(u){case ge.LINES:Ie=2;break;case ge.TRIANGLES:Ie=3;break;case ge.LINE_STRIP:Ie=1}for(const Ve of J.get()){const He=Ve.vaos||(Ve.vaos={});(He[D]||(He[D]=new as)).bind(i,this,F,pe?pe.getPaintVertexBuffers():[],N,Ve.vertexOffset,ae,we,Be),ge.drawElements(u,Ve.primitiveLength*Ie,ge.UNSIGNED_SHORT,Ve.primitiveOffset*Ie*2)}}}function co(y,i,u){const p=1/fe(u,1,i.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,i.transform.tileZoom)/g,C=_*(u.tileID.canonical.x+u.tileID.wrap*g),I=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[C>>16,I>>16],u_pixel_coord_lower:[65535&C,65535&I]}}const Sd=(y,i,u,p)=>{const g=i.style.light,_=g.properties.get("position"),C=[_.x,_.y,_.z],I=function(){var D=new c.A(9);return c.A!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();g.properties.get("anchor")==="viewport"&&function(D,F){var N=Math.sin(F),J=Math.cos(F);D[0]=J,D[1]=N,D[2]=0,D[3]=-N,D[4]=J,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(I,-i.transform.angle),function(D,F,N){var J=F[0],ce=F[1],le=F[2];D[0]=J*N[0]+ce*N[3]+le*N[6],D[1]=J*N[1]+ce*N[4]+le*N[7],D[2]=J*N[2]+ce*N[5]+le*N[8]}(C,C,I);const E=g.properties.get("color");return{u_matrix:y,u_lightpos:C,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[E.r,E.g,E.b],u_vertical_gradient:+u,u_opacity:p}},Oa=(y,i,u,p,g,_,C)=>c.e(Sd(y,i,u,p),co(_,i,C),{u_height_factor:-Math.pow(2,g.overscaledZ)/C.tileSize/8}),mf=y=>({u_matrix:y}),Cd=(y,i,u,p)=>c.e(mf(y),co(u,i,p)),Ec=(y,i)=>({u_matrix:y,u_world:i}),zc=(y,i,u,p,g)=>c.e(Cd(y,i,u,p),{u_world:g}),Fa=(y,i,u,p)=>{const g=y.transform;let _,C;if(p.paint.get("circle-pitch-alignment")==="map"){const I=fe(u,1,g.zoom);_=!0,C=[I,I]}else _=!1,C=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:C}},kd=(y,i,u)=>{const p=fe(u,1,i.zoom),g=Math.pow(2,i.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[i.pixelsToGLUnits[0]/(p*g),i.pixelsToGLUnits[1]/(p*g)],u_overscale_factor:_}},Dl=(y,i,u=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:u}),gf=y=>({u_matrix:y}),Sv=(y,i,u,p)=>({u_matrix:y,u_extrude_scale:fe(i,1,u),u_intensity:p});function Id(y,i){const u=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new c.U(0,p/u).toLngLat().lat,new c.U(0,(p+1)/u).toLngLat().lat]}const Td=(y,i,u,p)=>{const g=y.transform;return{u_matrix:Mc(y,i,u,p),u_ratio:1/fe(i,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},yf=(y,i,u,p,g)=>c.e(Td(y,i,u,g),{u_image:0,u_image_height:p}),Cv=(y,i,u,p,g)=>{const _=y.transform,C=_f(i,_);return{u_matrix:Mc(y,i,u,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/fe(i,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[C,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},vf=(y,i,u,p,g,_)=>{const C=y.lineAtlas,I=_f(i,y.transform),E=u.layout.get("line-cap")==="round",D=C.getDash(p.from,E),F=C.getDash(p.to,E),N=D.width*g.fromScale,J=F.width*g.toScale;return c.e(Td(y,i,u,_),{u_patternscale_a:[I/N,-D.height/2],u_patternscale_b:[I/J,-F.height/2],u_sdfgamma:C.width/(256*Math.min(N,J)*y.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:F.y,u_mix:g.t})};function _f(y,i){return 1/fe(y,1,i.tileZoom)}function Mc(y,i,u,p){return y.translatePosMatrix(p?p.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const xf=(y,i,u,p,g)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(C=g.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:bf(g.paint.get("raster-hue-rotate"))};var _,C};function bf(y){y*=Math.PI/180;const i=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const Pd=(y,i,u,p,g,_,C,I,E,D)=>{const F=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:F.cameraToCenterDistance,u_pitch:F.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:F.width/F.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:C,u_coord_matrix:I,u_is_text:+E,u_pitch_with_map:+p,u_texsize:D,u_texture:0}},Ed=(y,i,u,p,g,_,C,I,E,D,F)=>{const N=g.transform;return c.e(Pd(y,i,u,p,g,_,C,I,E,D),{u_gamma_scale:p?Math.cos(N._pitch)*N.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+F})},ss=(y,i,u,p,g,_,C,I,E,D)=>c.e(Ed(y,i,u,p,g,_,C,I,!0,E,!0),{u_texsize_icon:D,u_texture_icon:1}),Ac=(y,i,u)=>({u_matrix:y,u_opacity:i,u_color:u}),uo=(y,i,u,p,g,_)=>c.e(function(C,I,E,D){const F=E.imageManager.getPattern(C.from.toString()),N=E.imageManager.getPattern(C.to.toString()),{width:J,height:ce}=E.imageManager.getPixelSize(),le=Math.pow(2,D.tileID.overscaledZ),pe=D.tileSize*Math.pow(2,E.transform.tileZoom)/le,ae=pe*(D.tileID.canonical.x+D.tileID.wrap*le),we=pe*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:N.tl,u_pattern_br_b:N.br,u_texsize:[J,ce],u_mix:I.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:N.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/fe(D,1,E.transform.tileZoom),u_pixel_coord_upper:[ae>>16,we>>16],u_pixel_coord_lower:[65535&ae,65535&we]}}(p,_,u,g),{u_matrix:y,u_opacity:i}),Dc={fillExtrusion:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_lightpos:new c.aP(y,i.u_lightpos),u_lightintensity:new c.aM(y,i.u_lightintensity),u_lightcolor:new c.aP(y,i.u_lightcolor),u_vertical_gradient:new c.aM(y,i.u_vertical_gradient),u_opacity:new c.aM(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_lightpos:new c.aP(y,i.u_lightpos),u_lightintensity:new c.aM(y,i.u_lightintensity),u_lightcolor:new c.aP(y,i.u_lightcolor),u_vertical_gradient:new c.aM(y,i.u_vertical_gradient),u_height_factor:new c.aM(y,i.u_height_factor),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade),u_opacity:new c.aM(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world),u_image:new c.aL(y,i.u_image),u_texsize:new c.aQ(y,i.u_texsize),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_scale_with_map:new c.aL(y,i.u_scale_with_map),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_extrude_scale:new c.aQ(y,i.u_extrude_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_matrix:new c.aN(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pixels_to_tile_units:new c.aM(y,i.u_pixels_to_tile_units),u_extrude_scale:new c.aQ(y,i.u_extrude_scale),u_overscale_factor:new c.aM(y,i.u_overscale_factor)}),collisionCircle:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_inv_matrix:new c.aN(y,i.u_inv_matrix),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_viewport_size:new c.aQ(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new c.aR(y,i.u_color),u_matrix:new c.aN(y,i.u_matrix),u_overlay:new c.aL(y,i.u_overlay),u_overlay_scale:new c.aM(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new c.aM(y,i.u_extrude_scale),u_intensity:new c.aM(y,i.u_intensity),u_matrix:new c.aN(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_world:new c.aQ(y,i.u_world),u_image:new c.aL(y,i.u_image),u_color_ramp:new c.aL(y,i.u_color_ramp),u_opacity:new c.aM(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_latrange:new c.aQ(y,i.u_latrange),u_light:new c.aQ(y,i.u_light),u_shadow:new c.aR(y,i.u_shadow),u_highlight:new c.aR(y,i.u_highlight),u_accent:new c.aR(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_image:new c.aL(y,i.u_image),u_dimension:new c.aQ(y,i.u_dimension),u_zoom:new c.aM(y,i.u_zoom),u_unpack:new c.aO(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_image:new c.aL(y,i.u_image),u_image_height:new c.aM(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texsize:new c.aQ(y,i.u_texsize),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_image:new c.aL(y,i.u_image),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_scale:new c.aP(y,i.u_scale),u_fade:new c.aM(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ratio:new c.aM(y,i.u_ratio),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new c.aQ(y,i.u_units_to_pixels),u_patternscale_a:new c.aQ(y,i.u_patternscale_a),u_patternscale_b:new c.aQ(y,i.u_patternscale_b),u_sdfgamma:new c.aM(y,i.u_sdfgamma),u_image:new c.aL(y,i.u_image),u_tex_y_a:new c.aM(y,i.u_tex_y_a),u_tex_y_b:new c.aM(y,i.u_tex_y_b),u_mix:new c.aM(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_tl_parent:new c.aQ(y,i.u_tl_parent),u_scale_parent:new c.aM(y,i.u_scale_parent),u_buffer_scale:new c.aM(y,i.u_buffer_scale),u_fade_t:new c.aM(y,i.u_fade_t),u_opacity:new c.aM(y,i.u_opacity),u_image0:new c.aL(y,i.u_image0),u_image1:new c.aL(y,i.u_image1),u_brightness_low:new c.aM(y,i.u_brightness_low),u_brightness_high:new c.aM(y,i.u_brightness_high),u_saturation_factor:new c.aM(y,i.u_saturation_factor),u_contrast_factor:new c.aM(y,i.u_contrast_factor),u_spin_weights:new c.aP(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texture:new c.aL(y,i.u_texture)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texture:new c.aL(y,i.u_texture),u_gamma_scale:new c.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_is_halo:new c.aL(y,i.u_is_halo)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new c.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aL(y,i.u_is_size_feature_constant),u_size_t:new c.aM(y,i.u_size_t),u_size:new c.aM(y,i.u_size),u_camera_to_center_distance:new c.aM(y,i.u_camera_to_center_distance),u_pitch:new c.aM(y,i.u_pitch),u_rotate_symbol:new c.aL(y,i.u_rotate_symbol),u_aspect_ratio:new c.aM(y,i.u_aspect_ratio),u_fade_change:new c.aM(y,i.u_fade_change),u_matrix:new c.aN(y,i.u_matrix),u_label_plane_matrix:new c.aN(y,i.u_label_plane_matrix),u_coord_matrix:new c.aN(y,i.u_coord_matrix),u_is_text:new c.aL(y,i.u_is_text),u_pitch_with_map:new c.aL(y,i.u_pitch_with_map),u_texsize:new c.aQ(y,i.u_texsize),u_texsize_icon:new c.aQ(y,i.u_texsize_icon),u_texture:new c.aL(y,i.u_texture),u_texture_icon:new c.aL(y,i.u_texture_icon),u_gamma_scale:new c.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new c.aM(y,i.u_device_pixel_ratio),u_is_halo:new c.aL(y,i.u_is_halo)}),background:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_opacity:new c.aM(y,i.u_opacity),u_color:new c.aR(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_opacity:new c.aM(y,i.u_opacity),u_image:new c.aL(y,i.u_image),u_pattern_tl_a:new c.aQ(y,i.u_pattern_tl_a),u_pattern_br_a:new c.aQ(y,i.u_pattern_br_a),u_pattern_tl_b:new c.aQ(y,i.u_pattern_tl_b),u_pattern_br_b:new c.aQ(y,i.u_pattern_br_b),u_texsize:new c.aQ(y,i.u_texsize),u_mix:new c.aM(y,i.u_mix),u_pattern_size_a:new c.aQ(y,i.u_pattern_size_a),u_pattern_size_b:new c.aQ(y,i.u_pattern_size_b),u_scale_a:new c.aM(y,i.u_scale_a),u_scale_b:new c.aM(y,i.u_scale_b),u_pixel_coord_upper:new c.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aQ(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aM(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texture:new c.aL(y,i.u_texture),u_ele_delta:new c.aM(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_ele_delta:new c.aM(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new c.aN(y,i.u_matrix),u_texture:new c.aL(y,i.u_texture),u_terrain_coords_id:new c.aM(y,i.u_terrain_coords_id),u_ele_delta:new c.aM(y,i.u_ele_delta)})};class Rc{constructor(i,u,p){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Rl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Lc{constructor(i,u,p,g){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=i;const _=i.gl;this.buffer=_.createBuffer(),i.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let p=0;p<this.attributes.length;p++){const g=u.attributes[this.attributes[p].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,u,p){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],C=u.attributes[_.name];C!==void 0&&i.vertexAttribPointer(C,_.components,i[Rl[_.type]],!1,this.itemSize,_.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const js=new WeakMap;function Na(y){var i;if(js.has(y))return js.get(y);{const u=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return js.set(y,u),u}}class br{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class $c extends br{getDefault(){return c.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Gi extends br{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class qi extends br{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class zd extends br{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Bc extends br{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Oc extends br{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Md extends br{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Ad extends br{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Fc extends br{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class Dd extends br{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Rd extends br{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class Nc extends br{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class wf extends br{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class Sf extends br{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Vs extends br{getDefault(){return c.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class kv extends br{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Iv extends br{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class Tv extends br{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Pv extends br{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Ev extends br{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class zv extends br{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Ld extends br{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class jc extends br{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class $d extends br{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Bd extends br{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Us extends br{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Cf extends br{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class kf extends br{getDefault(){return null}set(i){var u;if(i===this.current&&!this.dirty)return;const p=this.gl;Na(p)?p.bindVertexArray(i):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Od extends br{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class ls extends br{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class If extends br{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class ja extends br{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class Hs extends ja{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Tf extends ja{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Fd extends ja{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class zr{constructor(i,u,p,g,_){this.context=i,this.width=u,this.height=p;const C=i.gl,I=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new Hs(i,I),g)this.depthAttachment=_?new Fd(i,I):new Tf(i,I);else if(_)throw new Error("Stencil cannot be setted without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class sn{constructor(i,u,p){this.blendFunction=i,this.blendColor=u,this.mask=p}}sn.Replace=[1,0],sn.disabled=new sn(sn.Replace,c.aT.transparent,[!1,!1,!1,!1]),sn.unblended=new sn(sn.Replace,c.aT.transparent,[!0,!0,!0,!0]),sn.alphaBlended=new sn([1,771],c.aT.transparent,[!0,!0,!0,!0]);class Mv{constructor(i){var u,p;if(this.gl=i,this.clearColor=new $c(this),this.clearDepth=new Gi(this),this.clearStencil=new qi(this),this.colorMask=new zd(this),this.depthMask=new Bc(this),this.stencilMask=new Oc(this),this.stencilFunc=new Md(this),this.stencilOp=new Ad(this),this.stencilTest=new Fc(this),this.depthRange=new Dd(this),this.depthTest=new Rd(this),this.depthFunc=new Nc(this),this.blend=new wf(this),this.blendFunc=new Sf(this),this.blendColor=new Vs(this),this.blendEquation=new kv(this),this.cullFace=new Iv(this),this.cullFaceSide=new Tv(this),this.frontFace=new Pv(this),this.program=new Ev(this),this.activeTexture=new zv(this),this.viewport=new Ld(this),this.bindFramebuffer=new jc(this),this.bindRenderbuffer=new $d(this),this.bindTexture=new Bd(this),this.bindVertexBuffer=new Us(this),this.bindElementBuffer=new Cf(this),this.bindVertexArray=new kf(this),this.pixelStoreUnpack=new Od(this),this.pixelStoreUnpackPremultiplyAlpha=new ls(this),this.pixelStoreUnpackFlipY=new If(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Na(i)){this.HALF_FLOAT=i.HALF_FLOAT;const g=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=i.RGBA16F)!==null&&u!==void 0?u:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const g=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new Rc(this,i,u)}createVertexBuffer(i,u,p){return new Lc(this,i,u,p)}createRenderbuffer(i,u,p){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,i,u,p),this.bindRenderbuffer.set(null),_}createFramebuffer(i,u,p,g){return new zr(this,i,u,p,g)}clear({color:i,depth:u,stencil:p}){const g=this.gl;let _=0;i&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(_)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){c.aG(i.blendFunction,sn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Na(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var u;return Na(this.gl)?this.gl.deleteVertexArray(i):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class wr{constructor(i,u,p){this.func=i,this.mask=u,this.range=p}}wr.ReadOnly=!1,wr.ReadWrite=!0,wr.disabled=new wr(519,wr.ReadOnly,[0,1]);const cs=7680;class ln{constructor(i,u,p,g,_,C){this.test=i,this.ref=u,this.mask=p,this.fail=g,this.depthFail=_,this.pass=C}}ln.disabled=new ln({func:519,mask:0},0,0,cs,cs,cs);class nn{constructor(i,u,p){this.enable=i,this.mode=u,this.frontFace=p}}let Ll;function Pf(y,i,u,p,g,_,C){const I=y.context,E=I.gl,D=y.useProgram("collisionBox"),F=[];let N=0,J=0;for(let ge=0;ge<p.length;ge++){const Ie=p[ge],Ve=i.getTile(Ie),He=Ve.getBucket(u);if(!He)continue;let Ze=Ie.posMatrix;g[0]===0&&g[1]===0||(Ze=y.translatePosMatrix(Ie.posMatrix,Ve,g,_));const et=C?He.textCollisionBox:He.iconCollisionBox,Je=He.collisionCircleArray;if(Je.length>0){const ot=c.Z(),Bt=Ze;c.aU(ot,He.placementInvProjMatrix,y.transform.glCoordMatrix),c.aU(ot,ot,He.placementViewportMatrix),F.push({circleArray:Je,circleOffset:J,transform:Bt,invTransform:ot,coord:Ie}),N+=Je.length/4,J=N}et&&D.draw(I,E.LINES,wr.disabled,ln.disabled,y.colorModeForRenderPass(),nn.disabled,kd(Ze,y.transform,Ve),y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ie),u.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,null,y.transform.zoom,null,null,et.collisionVertexBuffer)}if(!C||!F.length)return;const ce=y.useProgram("collisionCircle"),le=new c.aV;le.resize(4*N),le._trim();let pe=0;for(const ge of F)for(let Ie=0;Ie<ge.circleArray.length/4;Ie++){const Ve=4*Ie,He=ge.circleArray[Ve+0],Ze=ge.circleArray[Ve+1],et=ge.circleArray[Ve+2],Je=ge.circleArray[Ve+3];le.emplace(pe++,He,Ze,et,Je,0),le.emplace(pe++,He,Ze,et,Je,1),le.emplace(pe++,He,Ze,et,Je,2),le.emplace(pe++,He,Ze,et,Je,3)}(!Ll||Ll.length<2*N)&&(Ll=function(ge){const Ie=2*ge,Ve=new c.aX;Ve.resize(Ie),Ve._trim();for(let He=0;He<Ie;He++){const Ze=6*He;Ve.uint16[Ze+0]=4*He+0,Ve.uint16[Ze+1]=4*He+1,Ve.uint16[Ze+2]=4*He+2,Ve.uint16[Ze+3]=4*He+2,Ve.uint16[Ze+4]=4*He+3,Ve.uint16[Ze+5]=4*He+0}return Ve}(N));const ae=I.createIndexBuffer(Ll,!0),we=I.createVertexBuffer(le,c.aW.members,!0);for(const ge of F){const Ie={u_matrix:ge.transform,u_inv_matrix:ge.invTransform,u_camera_to_center_distance:(Be=y.transform).cameraToCenterDistance,u_viewport_size:[Be.width,Be.height]};ce.draw(I,E.TRIANGLES,wr.disabled,ln.disabled,y.colorModeForRenderPass(),nn.disabled,Ie,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ge.coord),u.id,we,ae,c.S.simpleSegment(0,2*ge.circleOffset,ge.circleArray.length,ge.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Be;we.destroy(),ae.destroy()}nn.disabled=new nn(!1,1029,2305),nn.backCCW=new nn(!0,1029,2305);const Nd=c.ao(new Float32Array(16));function Vc(y,i,u,p,g,_){const{horizontalAlign:C,verticalAlign:I}=c.au(y);return new c.P((-(C-.5)*i/g+p[0])*_,(-(I-.5)*u/g+p[1])*_)}function Uc(y,i,u,p,g,_,C,I,E,D,F){const N=y.text.placedSymbolArray,J=y.text.dynamicLayoutVertexArray,ce=y.icon.dynamicLayoutVertexArray,le={};J.clear();for(let pe=0;pe<N.length;pe++){const ae=N.get(pe),we=ae.hidden||!ae.crossTileID||y.allowVerticalPlacement&&!ae.placedOrientation?null:p[ae.crossTileID];if(we){const Be=new c.P(ae.anchorX,ae.anchorY),ge=Rt(Be,u?C:_,F),Ie=_r(g.cameraToCenterDistance,ge.signedDistanceFromCamera);let Ve=c.aj(y.textSizeData,E,ae)*Ie/c.ap;u&&(Ve*=y.tilePixelRatio/I);const{width:He,height:Ze,anchor:et,textOffset:Je,textBoxScale:ot}=we,Bt=Vc(et,He,Ze,Je,ot,Ve),fr=u?Rt(Be.add(Bt),_,F).point:ge.point.add(i?Bt.rotate(-g.angle):Bt),ft=y.allowVerticalPlacement&&ae.placedOrientation===c.ai.vertical?Math.PI/2:0;for(let Qt=0;Qt<ae.numGlyphs;Qt++)c.ak(J,fr,ft);D&&ae.associatedIconIndex>=0&&(le[ae.associatedIconIndex]={shiftedAnchor:fr,angle:ft})}else W(ae.numGlyphs,J)}if(D){ce.clear();const pe=y.icon.placedSymbolArray;for(let ae=0;ae<pe.length;ae++){const we=pe.get(ae);if(we.hidden)W(we.numGlyphs,ce);else{const Be=le[ae];if(Be)for(let ge=0;ge<we.numGlyphs;ge++)c.ak(ce,Be.shiftedAnchor,Be.angle);else W(we.numGlyphs,ce)}}y.icon.dynamicLayoutVertexBuffer.updateData(ce)}y.text.dynamicLayoutVertexBuffer.updateData(J)}function jd(y,i,u){return u.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Hc(y,i,u,p,g,_,C,I,E,D,F,N){const J=y.context,ce=J.gl,le=y.transform,pe=I==="map",ae=E==="map",we=I!=="viewport"&&u.layout.get("symbol-placement")!=="point",Be=pe&&!ae&&!we,ge=!u.layout.get("symbol-sort-key").isConstant();let Ie=!1;const Ve=y.depthModeForSublayer(0,wr.ReadOnly),He=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ze=[];for(const et of p){const Je=i.getTile(et),ot=Je.getBucket(u);if(!ot)continue;const Bt=g?ot.text:ot.icon;if(!Bt||!Bt.segments.get().length||!Bt.hasVisibleVertices)continue;const fr=Bt.programConfigurations.get(u.id),ft=g||ot.sdfIcons,Qt=g?ot.textSizeData:ot.iconSizeData,Nt=ae||le.pitch!==0,Nr=y.useProgram(jd(ft,g,ot),fr),pr=c.ah(Qt,le.zoom),or=y.style.map.terrain&&y.style.map.terrain.getTerrainData(et);let mr,yn,Zr,ri,Fn=[0,0],kn=null;if(g)yn=Je.glyphAtlasTexture,Zr=ce.LINEAR,mr=Je.glyphAtlasTexture.size,ot.iconsInText&&(Fn=Je.imageAtlasTexture.size,kn=Je.imageAtlasTexture,ri=Nt||y.options.rotating||y.options.zooming||Qt.kind==="composite"||Qt.kind==="camera"?ce.LINEAR:ce.NEAREST);else{const vn=u.layout.get("icon-size").constantOr(0)!==1||ot.iconsNeedLinear;yn=Je.imageAtlasTexture,Zr=ft||y.options.rotating||y.options.zooming||vn||Nt?ce.LINEAR:ce.NEAREST,mr=Je.imageAtlasTexture.size}const Xi=fe(Je,1,y.transform.zoom),en=Le(et.posMatrix,ae,pe,y.transform,Xi),Ho=Wt(et.posMatrix,ae,pe,y.transform,Xi),Wo=He&&ot.hasTextData(),Ha=u.layout.get("icon-text-fit")!=="none"&&Wo&&ot.hasIconData();if(we){const vn=y.style.map.terrain?(zi,_n)=>y.style.map.terrain.getElevation(et,zi,_n):null,Nn=u.layout.get("text-rotation-alignment")==="map";Qe(ot,et.posMatrix,y,g,en,Ho,ae,D,Nn,vn)}const fs=y.translatePosMatrix(et.posMatrix,Je,_,C),Js=we||g&&He||Ha?Nd:en,li=y.translatePosMatrix(Ho,Je,_,C,!0),ni=ft&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let vi;vi=ft?ot.iconsInText?ss(Qt.kind,pr,Be,ae,y,fs,Js,li,mr,Fn):Ed(Qt.kind,pr,Be,ae,y,fs,Js,li,g,mr,!0):Pd(Qt.kind,pr,Be,ae,y,fs,Js,li,g,mr);const ms={program:Nr,buffers:Bt,uniformValues:vi,atlasTexture:yn,atlasTextureIcon:kn,atlasInterpolation:Zr,atlasInterpolationIcon:ri,isSDF:ft,hasHalo:ni};if(ge&&ot.canOverlap){Ie=!0;const vn=Bt.segments.get();for(const Nn of vn)Ze.push({segments:new c.S([Nn]),sortKey:Nn.sortKey,state:ms,terrainData:or})}else Ze.push({segments:Bt.segments,sortKey:0,state:ms,terrainData:or})}Ie&&Ze.sort((et,Je)=>et.sortKey-Je.sortKey);for(const et of Ze){const Je=et.state;if(J.activeTexture.set(ce.TEXTURE0),Je.atlasTexture.bind(Je.atlasInterpolation,ce.CLAMP_TO_EDGE),Je.atlasTextureIcon&&(J.activeTexture.set(ce.TEXTURE1),Je.atlasTextureIcon&&Je.atlasTextureIcon.bind(Je.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),Je.isSDF){const ot=Je.uniformValues;Je.hasHalo&&(ot.u_is_halo=1,Vd(Je.buffers,et.segments,u,y,Je.program,Ve,F,N,ot,et.terrainData)),ot.u_is_halo=0}Vd(Je.buffers,et.segments,u,y,Je.program,Ve,F,N,Je.uniformValues,et.terrainData)}}function Vd(y,i,u,p,g,_,C,I,E,D){const F=p.context;g.draw(F,F.gl.TRIANGLES,_,C,I,nn.disabled,E,D,u.id,y.layoutVertexBuffer,y.indexBuffer,i,u.paint,p.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function $l(y,i,u,p,g){if(!u||!p||!p.imageAtlas)return;const _=p.imageAtlas.patternPositions;let C=_[u.to.toString()],I=_[u.from.toString()];if(!C&&I&&(C=I),!I&&C&&(I=C),!C||!I){const E=g.getPaintProperty(i);C=_[E],I=_[E]}C&&I&&y.setConstantPatternPositions(C,I)}function Bl(y,i,u,p,g,_,C){const I=y.context.gl,E="fill-pattern",D=u.paint.get(E),F=D&&D.constantOr(1),N=u.getCrossfadeParameters();let J,ce,le,pe,ae;C?(ce=F&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",J=I.LINES):(ce=F?"fillPattern":"fill",J=I.TRIANGLES);const we=D.constantOr(null);for(const Be of p){const ge=i.getTile(Be);if(F&&!ge.patternsLoaded())continue;const Ie=ge.getBucket(u);if(!Ie)continue;const Ve=Ie.programConfigurations.get(u.id),He=y.useProgram(ce,Ve),Ze=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Be);F&&(y.context.activeTexture.set(I.TEXTURE0),ge.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),Ve.updatePaintBuffers(N)),$l(Ve,E,we,ge,u);const et=Ze?Be:null,Je=y.translatePosMatrix(et?et.posMatrix:Be.posMatrix,ge,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(C){pe=Ie.indexBuffer2,ae=Ie.segments2;const ot=[I.drawingBufferWidth,I.drawingBufferHeight];le=ce==="fillOutlinePattern"&&F?zc(Je,y,N,ge,ot):Ec(Je,ot)}else pe=Ie.indexBuffer,ae=Ie.segments,le=F?Cd(Je,y,N,ge):mf(Je);He.draw(y.context,J,g,y.stencilModeForClipping(Be),_,nn.disabled,le,Ze,u.id,Ie.layoutVertexBuffer,pe,ae,u.paint,y.transform.zoom,Ve)}}function Ol(y,i,u,p,g,_,C){const I=y.context,E=I.gl,D="fill-extrusion-pattern",F=u.paint.get(D),N=F.constantOr(1),J=u.getCrossfadeParameters(),ce=u.paint.get("fill-extrusion-opacity"),le=F.constantOr(null);for(const pe of p){const ae=i.getTile(pe),we=ae.getBucket(u);if(!we)continue;const Be=y.style.map.terrain&&y.style.map.terrain.getTerrainData(pe),ge=we.programConfigurations.get(u.id),Ie=y.useProgram(N?"fillExtrusionPattern":"fillExtrusion",ge);N&&(y.context.activeTexture.set(E.TEXTURE0),ae.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),ge.updatePaintBuffers(J)),$l(ge,D,le,ae,u);const Ve=y.translatePosMatrix(pe.posMatrix,ae,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),He=u.paint.get("fill-extrusion-vertical-gradient"),Ze=N?Oa(Ve,y,He,ce,pe,J,ae):Sd(Ve,y,He,ce);Ie.draw(I,I.gl.TRIANGLES,g,_,C,nn.backCCW,Ze,Be,u.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,u.paint,y.transform.zoom,ge,y.style.map.terrain&&we.centroidVertexBuffer)}}function Av(y,i,u,p,g,_,C){const I=y.context,E=I.gl,D=u.fbo;if(!D)return;const F=y.useProgram("hillshade"),N=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);I.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,D.colorAttachment.get()),F.draw(I,E.TRIANGLES,g,_,C,nn.disabled,((J,ce,le,pe)=>{const ae=le.paint.get("hillshade-shadow-color"),we=le.paint.get("hillshade-highlight-color"),Be=le.paint.get("hillshade-accent-color");let ge=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(ge-=J.transform.angle);const Ie=!J.options.moving;return{u_matrix:pe?pe.posMatrix:J.transform.calculatePosMatrix(ce.tileID.toUnwrapped(),Ie),u_image:0,u_latrange:Id(0,ce.tileID),u_light:[le.paint.get("hillshade-exaggeration"),ge],u_shadow:ae,u_highlight:we,u_accent:Be}})(y,u,p,N?i:null),N,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Ud(y,i,u,p,g,_){const C=y.context,I=C.gl,E=i.dem;if(E&&E.data){const D=E.dim,F=E.stride,N=E.getPixels();if(C.activeTexture.set(I.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(F),i.demTexture){const ce=i.demTexture;ce.update(N,{premultiply:!1}),ce.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else i.demTexture=new ye(C,N,I.RGBA,{premultiply:!1}),i.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);C.activeTexture.set(I.TEXTURE0);let J=i.fbo;if(!J){const ce=new ye(C,{width:D,height:D,data:null},I.RGBA);ce.bind(I.LINEAR,I.CLAMP_TO_EDGE),J=i.fbo=C.createFramebuffer(D,D,!0,!1),J.colorAttachment.set(ce.texture)}C.bindFramebuffer.set(J.framebuffer),C.viewport.set([0,0,D,D]),y.useProgram("hillshadePrepare").draw(C,I.TRIANGLES,p,g,_,nn.disabled,((ce,le)=>{const pe=le.stride,ae=c.Z();return c.aS(ae,0,c.N,-c.N,0,0,1),c.$(ae,ae,[0,-c.N,0]),{u_matrix:ae,u_image:1,u_dimension:[pe,pe],u_zoom:ce.overscaledZ,u_unpack:le.getUnpackVector()}})(i.tileID,E),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Dv(y,i,u,p,g,_){const C=p.paint.get("raster-fade-duration");if(!_&&C>0){const I=c.h.now(),E=(I-y.timeAdded)/C,D=i?(I-i.timeAdded)/C:-1,F=u.getSource(),N=g.coveringZoomLevel({tileSize:F.tileSize,roundZoom:F.roundZoom}),J=!i||Math.abs(i.tileID.overscaledZ-N)>Math.abs(y.tileID.overscaledZ-N),ce=J&&y.refreshedUponExpiration?1:c.ad(J?E:1-D,0,1);return y.refreshedUponExpiration&&E>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-ce}:{opacity:ce,mix:0}}return{opacity:1,mix:0}}const Ef=new c.aT(1,0,0,1),Wc=new c.aT(0,1,0,1),Hd=new c.aT(0,0,1,1),zf=new c.aT(1,0,1,1),Mf=new c.aT(0,1,1,1);function Fl(y,i,u,p){qc(y,0,i+u/2,y.transform.width,u,p)}function Gc(y,i,u,p){qc(y,i-u/2,0,u,y.transform.height,p)}function qc(y,i,u,p,g,_){const C=y.context,I=C.gl;I.enable(I.SCISSOR_TEST),I.scissor(i*y.pixelRatio,u*y.pixelRatio,p*y.pixelRatio,g*y.pixelRatio),C.clear({color:_}),I.disable(I.SCISSOR_TEST)}function Af(y,i,u){const p=y.context,g=p.gl,_=u.posMatrix,C=y.useProgram("debug"),I=wr.disabled,E=ln.disabled,D=y.colorModeForRenderPass(),F="$debug",N=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);p.activeTexture.set(g.TEXTURE0);const J=i.getTileByID(u.key).latestRawTileData,ce=Math.floor((J&&J.byteLength||0)/1024),le=i.getTile(u).tileSize,pe=512/Math.min(le,512)*(u.overscaledZ/y.transform.zoom)*.5;let ae=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ae+=` => ${u.overscaledZ}`),function(we,Be){we.initDebugOverlayCanvas();const ge=we.debugOverlayCanvas,Ie=we.context.gl,Ve=we.debugOverlayCanvas.getContext("2d");Ve.clearRect(0,0,ge.width,ge.height),Ve.shadowColor="white",Ve.shadowBlur=2,Ve.lineWidth=1.5,Ve.strokeStyle="white",Ve.textBaseline="top",Ve.font="bold 36px Open Sans, sans-serif",Ve.fillText(Be,5,5),Ve.strokeText(Be,5,5),we.debugOverlayTexture.update(ge),we.debugOverlayTexture.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE)}(y,`${ae} ${ce}kB`),C.draw(p,g.TRIANGLES,I,E,sn.alphaBlended,nn.disabled,Dl(_,c.aT.transparent,pe),null,F,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),C.draw(p,g.LINE_STRIP,I,E,D,nn.disabled,Dl(_,c.aT.red),N,F,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function hn(y,i,u){const p=y.context,g=p.gl,_=y.colorModeForRenderPass(),C=new wr(g.LEQUAL,wr.ReadWrite,y.depthRangeFor3D),I=y.useProgram("terrain"),E=i.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const D of u){const F=y.renderToTexture.getTexture(D),N=i.getTerrainData(D.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,F.texture);const J={u_matrix:y.transform.calculatePosMatrix(D.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};I.draw(p,g.TRIANGLES,C,ln.disabled,_,nn.backCCW,J,N,"terrain",E.vertexBuffer,E.indexBuffer,E.segments)}}class us{constructor(i,u){this.context=new Mv(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.Z(),renderTime:0},this.setup(),this.numSublayers=cr.maxUnderzooming+cr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Hi}resize(i,u,p){if(this.width=Math.floor(i*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,u=new c.a_;u.emplaceBack(0,0),u.emplaceBack(c.N,0),u.emplaceBack(0,c.N),u.emplaceBack(c.N,c.N),this.tileExtentBuffer=i.createVertexBuffer(u,Tc.members),this.tileExtentSegments=c.S.simpleSegment(0,0,4,2);const p=new c.a_;p.emplaceBack(0,0),p.emplaceBack(c.N,0),p.emplaceBack(0,c.N),p.emplaceBack(c.N,c.N),this.debugBuffer=i.createVertexBuffer(p,Tc.members),this.debugSegments=c.S.simpleSegment(0,0,4,5);const g=new c.V;g.emplaceBack(0,0,0,0),g.emplaceBack(c.N,0,c.N,0),g.emplaceBack(0,c.N,0,c.N),g.emplaceBack(c.N,c.N,c.N,c.N),this.rasterBoundsBuffer=i.createVertexBuffer(g,rt.members),this.rasterBoundsSegments=c.S.simpleSegment(0,0,4,2);const _=new c.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(_,Tc.members),this.viewportSegments=c.S.simpleSegment(0,0,4,2);const C=new c.a$;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(C);const I=new c.b0;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(I);const E=this.context.gl;this.stencilClearMode=new ln({func:E.ALWAYS,mask:0},0,255,E.ZERO,E.ZERO,E.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=c.Z();c.aS(p,0,this.width,this.height,0,0,1),c.a0(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,wr.disabled,this.stencilClearMode,sn.disabled,nn.disabled,gf(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const p=this.context,g=p.gl;this.nextStencilID+u.length>256&&this.clearStencil(),p.setColorMode(sn.disabled),p.setDepthMode(wr.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of u){const I=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,E=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);_.draw(p,g.TRIANGLES,wr.disabled,new ln({func:g.ALWAYS,mask:0},I,255,g.KEEP,g.KEEP,g.REPLACE),sn.disabled,nn.disabled,gf(C.posMatrix),E,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new ln({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new ln({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,p=i.sort((C,I)=>I.overscaledZ-C.overscaledZ),g=p[p.length-1].overscaledZ,_=p[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const C={};for(let I=0;I<_;I++)C[I+g]=new ln({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[C,p]}return[{[g]:ln.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new sn([i.CONSTANT_COLOR,i.ONE],new c.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?sn.unblended:sn.alphaBlended}depthModeForSublayer(i,u,p){if(!this.opaquePassEnabledForLayer())return wr.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new wr(p||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(c.h.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,_={},C={},I={};for(const E in g){const D=g[E];D.used&&D.prepare(this.context),_[E]=D.getVisibleCoordinates(),C[E]=_[E].slice().reverse(),I[E]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let E=0;E<p.length;E++)if(this.style._layers[p[E]].is3D()){this.opaquePassCutoff=E;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const E=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!c.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||E.length)&&(c.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(D,F){const N=D.context,J=N.gl,ce=sn.unblended,le=new wr(J.LEQUAL,wr.ReadWrite,[0,1]),pe=F.getTerrainMesh(),ae=F.sourceCache.getRenderableTiles(),we=D.useProgram("terrainDepth");N.bindFramebuffer.set(F.getFramebuffer("depth").framebuffer),N.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),N.clear({color:c.aT.transparent,depth:1});for(const Be of ae){const ge=F.getTerrainData(Be.tileID),Ie={u_matrix:D.transform.calculatePosMatrix(Be.tileID.toUnwrapped()),u_ele_delta:F.getMeshFrameDelta(D.transform.zoom)};we.draw(N,J.TRIANGLES,le,ln.disabled,ce,nn.backCCW,Ie,ge,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}N.bindFramebuffer.set(null),N.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain),function(D,F){const N=D.context,J=N.gl,ce=sn.unblended,le=new wr(J.LEQUAL,wr.ReadWrite,[0,1]),pe=F.getTerrainMesh(),ae=F.getCoordsTexture(),we=F.sourceCache.getRenderableTiles(),Be=D.useProgram("terrainCoords");N.bindFramebuffer.set(F.getFramebuffer("coords").framebuffer),N.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),N.clear({color:c.aT.transparent,depth:1}),F.coordsIndex=[];for(const ge of we){const Ie=F.getTerrainData(ge.tileID);N.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,ae.texture);const Ve={u_matrix:D.transform.calculatePosMatrix(ge.tileID.toUnwrapped()),u_terrain_coords_id:(255-F.coordsIndex.length)/255,u_texture:0,u_ele_delta:F.getMeshFrameDelta(D.transform.zoom)};Be.draw(N,J.TRIANGLES,le,ln.disabled,ce,nn.backCCW,Ve,Ie,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),F.coordsIndex.push(ge.tileID.key)}N.bindFramebuffer.set(null),N.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const E of p){const D=this.style._layers[E];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const F=C[D.source];(D.type==="custom"||F.length)&&this.renderLayer(this,g[D.source],D,F)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?c.aT.black:c.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const E=this.style._layers[p[this.currentLayer]],D=g[E.source],F=_[E.source];this._renderTileClippingMasks(E,F),this.renderLayer(this,D,E,F)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const E=this.style._layers[p[this.currentLayer]],D=g[E.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(E))continue;const F=(E.type==="symbol"?I:C)[E.source];this._renderTileClippingMasks(E,_[E.source]),this.renderLayer(this,D,E,F)}if(this.options.showTileBoundaries){const E=function(D,F){let N=null;const J=Object.values(D._layers).flatMap(ae=>ae.source&&!ae.isHidden(F)?[D.sourceCaches[ae.source]]:[]),ce=J.filter(ae=>ae.getSource().type==="vector"),le=J.filter(ae=>ae.getSource().type!=="vector"),pe=ae=>{(!N||N.getSource().maxzoom<ae.getSource().maxzoom)&&(N=ae)};return ce.forEach(ae=>pe(ae)),N||le.forEach(ae=>pe(ae)),N}(this.style,this.transform.zoom);E&&function(D,F,N){for(let J=0;J<N.length;J++)Af(D,F,N[J])}(this,E,E.getVisibleCoordinates())}this.options.showPadding&&function(E){const D=E.transform.padding;Fl(E,E.transform.height-(D.top||0),3,Ef),Fl(E,D.bottom||0,3,Wc),Gc(E,D.left||0,3,Hd),Gc(E,E.transform.width-(D.right||0),3,zf);const F=E.transform.centerPoint;(function(N,J,ce,le){qc(N,J-1,ce-10,2,20,le),qc(N,J-10,ce-1,20,2,le)})(E,F.x,E.transform.height-F.y,Mf)}(this),this.context.setDefault()}renderLayer(i,u,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(_,C,I,E,D){if(_.renderPass!=="translucent")return;const F=ln.disabled,N=_.colorModeForRenderPass();(I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(J,ce,le,pe,ae,we,Be){const ge=ce.transform,Ie=ae==="map",Ve=we==="map";for(const He of J){const Ze=pe.getTile(He),et=Ze.getBucket(le);if(!et||!et.text||!et.text.segments.get().length)continue;const Je=c.ah(et.textSizeData,ge.zoom),ot=fe(Ze,1,ce.transform.zoom),Bt=Le(He.posMatrix,Ve,Ie,ce.transform,ot),fr=le.layout.get("icon-text-fit")!=="none"&&et.hasIconData();if(Je){const ft=Math.pow(2,ge.zoom-Ze.tileID.overscaledZ);Uc(et,Ie,Ve,Be,ge,Bt,He.posMatrix,ft,Je,fr,ce.style.map.terrain?(Qt,Nt)=>ce.style.map.terrain.getElevation(He,Qt,Nt):null)}}}(E,_,I,C,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),D),I.paint.get("icon-opacity").constantOr(1)!==0&&Hc(_,C,I,E,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),F,N),I.paint.get("text-opacity").constantOr(1)!==0&&Hc(_,C,I,E,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),F,N),C.map.showCollisionBoxes&&(Pf(_,C,I,E,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),!0),Pf(_,C,I,E,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),!1))})(i,u,p,g,this.style.placement.variableOffsets);break;case"circle":(function(_,C,I,E){if(_.renderPass!=="translucent")return;const D=I.paint.get("circle-opacity"),F=I.paint.get("circle-stroke-width"),N=I.paint.get("circle-stroke-opacity"),J=!I.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(F.constantOr(1)===0||N.constantOr(1)===0))return;const ce=_.context,le=ce.gl,pe=_.depthModeForSublayer(0,wr.ReadOnly),ae=ln.disabled,we=_.colorModeForRenderPass(),Be=[];for(let ge=0;ge<E.length;ge++){const Ie=E[ge],Ve=C.getTile(Ie),He=Ve.getBucket(I);if(!He)continue;const Ze=He.programConfigurations.get(I.id),et=_.useProgram("circle",Ze),Je=He.layoutVertexBuffer,ot=He.indexBuffer,Bt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ie),fr={programConfiguration:Ze,program:et,layoutVertexBuffer:Je,indexBuffer:ot,uniformValues:Fa(_,Ie,Ve,I),terrainData:Bt};if(J){const ft=He.segments.get();for(const Qt of ft)Be.push({segments:new c.S([Qt]),sortKey:Qt.sortKey,state:fr})}else Be.push({segments:He.segments,sortKey:0,state:fr})}J&&Be.sort((ge,Ie)=>ge.sortKey-Ie.sortKey);for(const ge of Be){const{programConfiguration:Ie,program:Ve,layoutVertexBuffer:He,indexBuffer:Ze,uniformValues:et,terrainData:Je}=ge.state;Ve.draw(ce,le.TRIANGLES,pe,ae,we,nn.disabled,et,Je,I.id,He,Ze,ge.segments,I.paint,_.transform.zoom,Ie)}})(i,u,p,g);break;case"heatmap":(function(_,C,I,E){if(I.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const D=_.context,F=D.gl,N=ln.disabled,J=new sn([F.ONE,F.ONE],c.aT.transparent,[!0,!0,!0,!0]);(function(ce,le,pe){const ae=ce.gl;ce.activeTexture.set(ae.TEXTURE1),ce.viewport.set([0,0,le.width/4,le.height/4]);let we=pe.heatmapFbo;if(we)ae.bindTexture(ae.TEXTURE_2D,we.colorAttachment.get()),ce.bindFramebuffer.set(we.framebuffer);else{const Be=ae.createTexture();ae.bindTexture(ae.TEXTURE_2D,Be),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.LINEAR),we=pe.heatmapFbo=ce.createFramebuffer(le.width/4,le.height/4,!1,!1),function(ge,Ie,Ve,He){var Ze,et;const Je=ge.gl,ot=(Ze=ge.HALF_FLOAT)!==null&&Ze!==void 0?Ze:Je.UNSIGNED_BYTE,Bt=(et=ge.RGBA16F)!==null&&et!==void 0?et:Je.RGBA;Je.texImage2D(Je.TEXTURE_2D,0,Bt,Ie.width/4,Ie.height/4,0,Je.RGBA,ot,null),He.colorAttachment.set(Ve)}(ce,le,Be,we)}})(D,_,I),D.clear({color:c.aT.transparent});for(let ce=0;ce<E.length;ce++){const le=E[ce];if(C.hasRenderableParent(le))continue;const pe=C.getTile(le),ae=pe.getBucket(I);if(!ae)continue;const we=ae.programConfigurations.get(I.id),Be=_.useProgram("heatmap",we),{zoom:ge}=_.transform;Be.draw(D,F.TRIANGLES,wr.disabled,N,J,nn.disabled,Sv(le.posMatrix,pe,ge,I.paint.get("heatmap-intensity")),null,I.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,I.paint,_.transform.zoom,we)}D.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(D,F){const N=D.context,J=N.gl,ce=F.heatmapFbo;if(!ce)return;N.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,ce.colorAttachment.get()),N.activeTexture.set(J.TEXTURE1);let le=F.colorRampTexture;le||(le=F.colorRampTexture=new ye(N,F.colorRamp,J.RGBA)),le.bind(J.LINEAR,J.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(N,J.TRIANGLES,wr.disabled,ln.disabled,D.colorModeForRenderPass(),nn.disabled,((pe,ae,we,Be)=>{const ge=c.Z();c.aS(ge,0,pe.width,pe.height,0,0,1);const Ie=pe.context.gl;return{u_matrix:ge,u_world:[Ie.drawingBufferWidth,Ie.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ae.paint.get("heatmap-opacity")}})(D,F),null,F.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,F.paint,D.transform.zoom)}(_,I))})(i,u,p,g);break;case"line":(function(_,C,I,E){if(_.renderPass!=="translucent")return;const D=I.paint.get("line-opacity"),F=I.paint.get("line-width");if(D.constantOr(1)===0||F.constantOr(1)===0)return;const N=_.depthModeForSublayer(0,wr.ReadOnly),J=_.colorModeForRenderPass(),ce=I.paint.get("line-dasharray"),le=I.paint.get("line-pattern"),pe=le.constantOr(1),ae=I.paint.get("line-gradient"),we=I.getCrossfadeParameters(),Be=pe?"linePattern":ce?"lineSDF":ae?"lineGradient":"line",ge=_.context,Ie=ge.gl;let Ve=!0;for(const He of E){const Ze=C.getTile(He);if(pe&&!Ze.patternsLoaded())continue;const et=Ze.getBucket(I);if(!et)continue;const Je=et.programConfigurations.get(I.id),ot=_.context.program.get(),Bt=_.useProgram(Be,Je),fr=Ve||Bt.program!==ot,ft=_.style.map.terrain&&_.style.map.terrain.getTerrainData(He),Qt=le.constantOr(null);if(Qt&&Ze.imageAtlas){const pr=Ze.imageAtlas,or=pr.patternPositions[Qt.to.toString()],mr=pr.patternPositions[Qt.from.toString()];or&&mr&&Je.setConstantPatternPositions(or,mr)}const Nt=ft?He:null,Nr=pe?Cv(_,Ze,I,we,Nt):ce?vf(_,Ze,I,ce,we,Nt):ae?yf(_,Ze,I,et.lineClipsArray.length,Nt):Td(_,Ze,I,Nt);if(pe)ge.activeTexture.set(Ie.TEXTURE0),Ze.imageAtlasTexture.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE),Je.updatePaintBuffers(we);else if(ce&&(fr||_.lineAtlas.dirty))ge.activeTexture.set(Ie.TEXTURE0),_.lineAtlas.bind(ge);else if(ae){const pr=et.gradients[I.id];let or=pr.texture;if(I.gradientVersion!==pr.version){let mr=256;if(I.stepInterpolant){const yn=C.getSource().maxzoom,Zr=He.canonical.z===yn?Math.ceil(1<<_.transform.maxZoom-He.canonical.z):1;mr=c.ad(c.aY(et.maxLineLength/c.N*1024*Zr),256,ge.maxTextureSize)}pr.gradient=c.aZ({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:mr,image:pr.gradient||void 0,clips:et.lineClipsArray}),pr.texture?pr.texture.update(pr.gradient):pr.texture=new ye(ge,pr.gradient,Ie.RGBA),pr.version=I.gradientVersion,or=pr.texture}ge.activeTexture.set(Ie.TEXTURE0),or.bind(I.stepInterpolant?Ie.NEAREST:Ie.LINEAR,Ie.CLAMP_TO_EDGE)}Bt.draw(ge,Ie.TRIANGLES,N,_.stencilModeForClipping(He),J,nn.disabled,Nr,ft,I.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,I.paint,_.transform.zoom,Je,et.layoutVertexBuffer2),Ve=!1}})(i,u,p,g);break;case"fill":(function(_,C,I,E){const D=I.paint.get("fill-color"),F=I.paint.get("fill-opacity");if(F.constantOr(1)===0)return;const N=_.colorModeForRenderPass(),J=I.paint.get("fill-pattern"),ce=_.opaquePassEnabledForLayer()&&!J.constantOr(1)&&D.constantOr(c.aT.transparent).a===1&&F.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===ce){const le=_.depthModeForSublayer(1,_.renderPass==="opaque"?wr.ReadWrite:wr.ReadOnly);Bl(_,C,I,E,le,N,!1)}if(_.renderPass==="translucent"&&I.paint.get("fill-antialias")){const le=_.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,wr.ReadOnly);Bl(_,C,I,E,le,N,!0)}})(i,u,p,g);break;case"fill-extrusion":(function(_,C,I,E){const D=I.paint.get("fill-extrusion-opacity");if(D!==0&&_.renderPass==="translucent"){const F=new wr(_.context.gl.LEQUAL,wr.ReadWrite,_.depthRangeFor3D);if(D!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))Ol(_,C,I,E,F,ln.disabled,sn.disabled),Ol(_,C,I,E,F,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const N=_.colorModeForRenderPass();Ol(_,C,I,E,F,ln.disabled,N)}}})(i,u,p,g);break;case"hillshade":(function(_,C,I,E){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const D=_.context,F=_.depthModeForSublayer(0,wr.ReadOnly),N=_.colorModeForRenderPass(),[J,ce]=_.renderPass==="translucent"?_.stencilConfigForOverlap(E):[{},E];for(const le of ce){const pe=C.getTile(le);pe.needsHillshadePrepare!==void 0&&pe.needsHillshadePrepare&&_.renderPass==="offscreen"?Ud(_,pe,I,F,ln.disabled,N):_.renderPass==="translucent"&&Av(_,le,pe,I,F,J[le.overscaledZ],N)}D.viewport.set([0,0,_.width,_.height])})(i,u,p,g);break;case"raster":(function(_,C,I,E){if(_.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!E.length)return;const D=_.context,F=D.gl,N=C.getSource(),J=_.useProgram("raster"),ce=_.colorModeForRenderPass(),[le,pe]=N instanceof pt?[{},E]:_.stencilConfigForOverlap(E),ae=pe[pe.length-1].overscaledZ,we=!_.options.moving;for(const Be of pe){const ge=_.depthModeForSublayer(Be.overscaledZ-ae,I.paint.get("raster-opacity")===1?wr.ReadWrite:wr.ReadOnly,F.LESS),Ie=C.getTile(Be);Ie.registerFadeDuration(I.paint.get("raster-fade-duration"));const Ve=C.findLoadedParent(Be,0),He=Dv(Ie,Ve,C,I,_.transform,_.style.map.terrain);let Ze,et;const Je=I.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;D.activeTexture.set(F.TEXTURE0),Ie.texture.bind(Je,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(F.TEXTURE1),Ve?(Ve.texture.bind(Je,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),Ze=Math.pow(2,Ve.tileID.overscaledZ-Ie.tileID.overscaledZ),et=[Ie.tileID.canonical.x*Ze%1,Ie.tileID.canonical.y*Ze%1]):Ie.texture.bind(Je,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST);const ot=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Be),Bt=ot?Be:null,fr=Bt?Bt.posMatrix:_.transform.calculatePosMatrix(Be.toUnwrapped(),we),ft=xf(fr,et||[0,0],Ze||1,He,I);N instanceof pt?J.draw(D,F.TRIANGLES,ge,ln.disabled,ce,nn.disabled,ft,ot,I.id,N.boundsBuffer,_.quadTriangleIndexBuffer,N.boundsSegments):J.draw(D,F.TRIANGLES,ge,le[Be.overscaledZ],ce,nn.disabled,ft,ot,I.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(i,u,p,g);break;case"background":(function(_,C,I,E){const D=I.paint.get("background-color"),F=I.paint.get("background-opacity");if(F===0)return;const N=_.context,J=N.gl,ce=_.transform,le=ce.tileSize,pe=I.paint.get("background-pattern");if(_.isPatternMissing(pe))return;const ae=!pe&&D.a===1&&F===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==ae)return;const we=ln.disabled,Be=_.depthModeForSublayer(0,ae==="opaque"?wr.ReadWrite:wr.ReadOnly),ge=_.colorModeForRenderPass(),Ie=_.useProgram(pe?"backgroundPattern":"background"),Ve=E||ce.coveringTiles({tileSize:le,terrain:_.style.map.terrain});pe&&(N.activeTexture.set(J.TEXTURE0),_.imageManager.bind(_.context));const He=I.getCrossfadeParameters();for(const Ze of Ve){const et=E?Ze.posMatrix:_.transform.calculatePosMatrix(Ze.toUnwrapped()),Je=pe?uo(et,F,_,pe,{tileID:Ze,tileSize:le},He):Ac(et,F,D),ot=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ze);Ie.draw(N,J.TRIANGLES,Be,we,ge,nn.disabled,Je,ot,I.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(i,0,p,g);break;case"custom":(function(_,C,I){const E=_.context,D=I.implementation;if(_.renderPass==="offscreen"){const F=D.prerender;F&&(_.setCustomLayerDefaults(),E.setColorMode(_.colorModeForRenderPass()),F.call(D,E.gl,_.transform.customLayerMatrix()),E.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),E.setColorMode(_.colorModeForRenderPass()),E.setStencilMode(ln.disabled);const F=D.renderingMode==="3d"?new wr(_.context.gl.LEQUAL,wr.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,wr.ReadOnly);E.setDepthMode(F),D.render(E.gl,_.transform.customLayerMatrix()),E.setDirty(),_.setBaseState(),E.bindFramebuffer.set(null)}})(i,0,p)}}translatePosMatrix(i,u,p,g,_){if(!p[0]&&!p[1])return i;const C=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(C){const D=Math.sin(C),F=Math.cos(C);p=[p[0]*F-p[1]*D,p[0]*D+p[1]*F]}const I=[_?p[0]:fe(u,p[0],this.transform.zoom),_?p[1]:fe(u,p[1],this.transform.zoom),0],E=new Float32Array(16);return c.$(E,i,I),E}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!u||!p}useProgram(i,u){this.cache=this.cache||{};const p=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Pc(this.context,an[i],u,Dc[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ye(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:u}=this.context.gl;return this.width!==i||this.height!==u}}class Pi{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,p){const g=Math.pow(2,p),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{const E=1/(I=c.ag([],I,i))[3]/u*g;return c.b3(I,I,[E,E,1/I[3],E])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{const E=function(J,ce){var le=ce[0],pe=ce[1],ae=ce[2],we=le*le+pe*pe+ae*ae;return we>0&&(we=1/Math.sqrt(we)),J[0]=ce[0]*we,J[1]=ce[1]*we,J[2]=ce[2]*we,J}([],function(J,ce,le){var pe=ce[0],ae=ce[1],we=ce[2],Be=le[0],ge=le[1],Ie=le[2];return J[0]=ae*Ie-we*ge,J[1]=we*Be-pe*Ie,J[2]=pe*ge-ae*Be,J}([],he([],_[I[0]],_[I[1]]),he([],_[I[2]],_[I[1]]))),D=-((F=E)[0]*(N=_[I[1]])[0]+F[1]*N[1]+F[2]*N[2]);var F,N;return E.concat(D)});return new Pi(_,C)}}class Ws{constructor(i,u){this.min=i,this.max=u,this.center=function(p,g,_){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,_){return p[0]=g[0]+_[0],p[1]=g[1]+_[1],p[2]=g[2]+_[2],p}([],this.min,this.max))}quadrant(i){const u=[i%2==0,i<2],p=te(this.min),g=te(this.max);for(let _=0;_<u.length;_++)p[_]=u[_]?this.min[_]:this.center[_],g[_]=u[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new Ws(p,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<i.planes.length;g++){const _=i.planes[g];let C=0;for(let I=0;I<u.length;I++)c.b4(_,u[I])>=0&&C++;if(C===0)return 0;C!==u.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let I=0;I<i.points.length;I++){const E=i.points[I][g]-this.min[g];_=Math.min(_,E),C=Math.max(C,E)}if(C<0||_>this.max[g]-this.min[g])return 0}return 1}}class Nl{constructor(i=0,u=0,p=0,g=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=p,this.right=g}interpolate(i,u,p){return u.top!=null&&i.top!=null&&(this.top=c.B.number(i.top,u.top,p)),u.bottom!=null&&i.bottom!=null&&(this.bottom=c.B.number(i.bottom,u.bottom,p)),u.left!=null&&i.left!=null&&(this.left=c.B.number(i.left,u.left,p)),u.right!=null&&i.right!=null&&(this.right=c.B.number(i.right,u.right,p)),this}getCenter(i,u){const p=c.ad((this.left+i-this.right)/2,0,i),g=c.ad((this.top+u-this.bottom)/2,0,u);return new c.P(p,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Nl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Zc{constructor(i,u,p,g,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Nl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Zc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-c.b5(i,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var p=new c.A(4);return c.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,_){var C=g[0],I=g[1],E=g[2],D=g[3],F=Math.sin(_),N=Math.cos(_);p[0]=C*N+E*F,p[1]=I*N+D*F,p[2]=C*-F+E*N,p[3]=I*-F+D*N}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=c.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,p){this._unmodified=!1,this._edgeInsets.interpolate(i,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new c.b6(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new c.P(0,0)),g=this.pointCoordinate(new c.P(this.width,0)),_=this.pointCoordinate(new c.P(this.width,this.height)),C=this.pointCoordinate(new c.P(0,this.height)),I=Math.floor(Math.min(p.x,g.x,_.x,C.x)),E=Math.floor(Math.max(p.x,g.x,_.x,C.x)),D=1;for(let F=I-D;F<=E+D;F++)F!==0&&u.push(new c.b6(F,i))}return u}coveringTiles(i){var u,p;let g=this.coveringZoomLevel(i);const _=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),I=c.U.fromLngLat(this.center),E=Math.pow(2,g),D=[E*C.x,E*C.y,0],F=[E*I.x,E*I.y,0],N=Pi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let J=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(J=g);const ce=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,le=ge=>({aabb:new Ws([ge*E,0,0],[(ge+1)*E,E,0]),zoom:0,x:0,y:0,wrap:ge,fullyVisible:!1}),pe=[],ae=[],we=g,Be=i.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let ge=1;ge<=3;ge++)pe.push(le(-ge)),pe.push(le(ge));for(pe.push(le(0));pe.length>0;){const ge=pe.pop(),Ie=ge.x,Ve=ge.y;let He=ge.fullyVisible;if(!He){const Bt=ge.aabb.intersects(N);if(Bt===0)continue;He=Bt===2}const Ze=i.terrain?D:F,et=ge.aabb.distanceX(Ze),Je=ge.aabb.distanceY(Ze),ot=Math.max(Math.abs(et),Math.abs(Je));if(ge.zoom===we||ot>ce+(1<<we-ge.zoom)-2&&ge.zoom>=J){const Bt=we-ge.zoom,fr=D[0]-.5-(Ie<<Bt),ft=D[1]-.5-(Ve<<Bt);ae.push({tileID:new c.O(ge.zoom===we?Be:ge.zoom,ge.wrap,ge.zoom,Ie,Ve),distanceSq:Z([F[0]-.5-Ie,F[1]-.5-Ve]),tileDistanceToCamera:Math.sqrt(fr*fr+ft*ft)})}else for(let Bt=0;Bt<4;Bt++){const fr=(Ie<<1)+Bt%2,ft=(Ve<<1)+(Bt>>1),Qt=ge.zoom+1;let Nt=ge.aabb.quadrant(Bt);if(i.terrain){const Nr=new c.O(Qt,ge.wrap,Qt,fr,ft),pr=i.terrain.getMinMaxElevation(Nr),or=(u=pr.minElevation)!==null&&u!==void 0?u:this.elevation,mr=(p=pr.maxElevation)!==null&&p!==void 0?p:this.elevation;Nt=new Ws([Nt.min[0],Nt.min[1],or],[Nt.max[0],Nt.max[1],mr])}pe.push({aabb:Nt,zoom:Qt,x:fr,y:ft,wrap:ge.wrap,fullyVisible:He})}}return ae.sort((ge,Ie)=>ge.distanceSq-Ie.distanceSq).map(ge=>ge.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=c.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new c.P(c.G(i.lng)*this.worldSize,c.H(u)*this.worldSize)}unproject(i){return new c.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),p=i.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-p))return;const g=this.getCameraPosition(),_=c.U.fromLngLat(g.lngLat,g.altitude),C=c.U.fromLngLat(u,p),I=_.x-C.x,E=_.y-C.y,D=_.z-C.z,F=Math.sqrt(I*I+E*E+D*D),N=this.scaleZoom(this.cameraToCenterDistance/F/this.tileSize);this._elevation=p,this._center=u,this.zoom=N}setLocationAtPoint(i,u){const p=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(i),C=new c.U(_.x-(p.x-g.x),_.y-(p.y-g.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),u.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return c.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const J=u.pointCoordinate(i);if(J!=null)return J}const p=[i.x,i.y,0,1],g=[i.x,i.y,1,1];c.ag(p,p,this.pixelMatrixInverse),c.ag(g,g,this.pixelMatrixInverse);const _=p[3],C=g[3],I=p[1]/_,E=g[1]/C,D=p[2]/_,F=g[2]/C,N=D===F?0:(0-D)/(F-D);return new c.U(c.B.number(p[0]/_,g[0]/C,N)/this.worldSize,c.B.number(I,E,N)/this.worldSize)}coordinatePoint(i,u=0,p=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,u,1];return c.ag(g,g,p),new c.P(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new gt().extend(this.pointLocation(new c.P(0,i))).extend(this.pointLocation(new c.P(this.width,i))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new gt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const p=i.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const _=i.canonical,C=this.worldSize/this.zoomScale(_.z),I=_.x+Math.pow(2,_.z)*i.wrap,E=c.ao(new Float64Array(16));return c.$(E,E,[I*C,_.y*C,0]),c.a0(E,E,[C/c.N,C/c.N,1]),c.a1(E,u?this.alignedProjMatrix:this.projMatrix,E),g[p]=new Float32Array(E),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,p,g,_=-90,C=90,I=-180,E=180;const D=this.size,F=this._unmodified;if(this.latRange){const ce=this.latRange;_=c.H(ce[1])*this.worldSize,C=c.H(ce[0])*this.worldSize,i=C-_<D.y?D.y/(C-_):0}if(this.lngRange){const ce=this.lngRange;I=c.b5(c.G(ce[0])*this.worldSize,0,this.worldSize),E=c.b5(c.G(ce[1])*this.worldSize,0,this.worldSize),E<I&&(E+=this.worldSize),u=E-I<D.x?D.x/(E-I):0}const N=this.point,J=Math.max(u||0,i||0);if(J)return this.center=this.unproject(new c.P(u?(E+I)/2:N.x,i?(C+_)/2:N.y)),this.zoom+=this.scaleZoom(J),this._unmodified=F,void(this._constraining=!1);if(this.latRange){const ce=N.y,le=D.y/2;ce-le<_&&(g=_+le),ce+le>C&&(g=C-le)}if(this.lngRange){const ce=(I+E)/2,le=c.b5(N.x,ce-this.worldSize/2,ce+this.worldSize/2),pe=D.x/2;le-pe<I&&(p=I+pe),le+pe>E&&(p=E-pe)}p===void 0&&g===void 0||(this.center=this.unproject(new c.P(p!==void 0?p:N.x,g!==void 0?g:N.y)).wrap()),this._unmodified=F,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b7(1,this.center.lat)*this.worldSize;let g=c.ao(new Float64Array(16));c.a0(g,g,[this.width/2,-this.height/2,1]),c.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=c.ao(new Float64Array(16)),c.a0(g,g,[1,-1,1]),c.$(g,g,[-1,-1,0]),c.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this._minEleveationForCurrentTile),I=_-C*this._pixelPerMeter/Math.cos(this._pitch),E=C<0?I:_,D=Math.PI/2+this._pitch,F=this._fov*(.5+i.y/this.height),N=Math.sin(F)*E/Math.sin(c.ad(Math.PI-D-F,.01,Math.PI-.01)),J=this.getHorizon(),ce=2*Math.atan(J/this.cameraToCenterDistance)*(.5+i.y/(2*J)),le=Math.sin(ce)*E/Math.sin(c.ad(Math.PI-D-ce,.01,Math.PI-.01)),pe=Math.min(N,le),ae=1.01*(Math.cos(Math.PI/2-this._pitch)*pe+E),we=this.height/50;g=new Float64Array(16),c.b8(g,this._fov,this.width/this.height,we,ae),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,c.a0(g,g,[1,-1,1]),c.$(g,g,[0,0,-this.cameraToCenterDistance]),c.b9(g,g,this._pitch),c.ae(g,g,this.angle),c.$(g,g,[-u,-p,0]),this.mercatorMatrix=c.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),c.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.a1(new Float64Array(16),this.labelPlaneMatrix,g),c.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=c.as([],g),this.pixelMatrix3D=c.a1(new Float64Array(16),this.labelPlaneMatrix,g);const Be=this.width%2/2,ge=this.height%2/2,Ie=Math.cos(this.angle),Ve=Math.sin(this.angle),He=u-Math.round(u)+Ie*Be+Ve*ge,Ze=p-Math.round(p)+Ie*ge+Ve*Be,et=new Float64Array(g);if(c.$(et,et,[He>.5?He-1:He,Ze>.5?Ze-1:Ze,0]),this.alignedProjMatrix=et,g=c.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new c.P(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return c.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let p=u.x,g=u.y,_=u.x,C=u.y;for(const I of i)p=Math.min(p,I.x),g=Math.min(g,I.y),_=Math.max(_,I.x),C=Math.max(C,I.y);return[new c.P(p,g),new c.P(_,g),new c.P(_,C),new c.P(p,C),new c.P(p,g)]}}}function ds(y,i){let u,p=!1,g=null,_=null;const C=()=>{g=null,p&&(y.apply(_,u),g=setTimeout(C,i),p=!1)};return(...I)=>(p=!0,_=this,u=I,g||C(),g)}class jl{constructor(i){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=ds(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),C=Math.round(u.lng*_)/_,I=Math.round(u.lat*_)/_,E=this._map.getBearing(),D=this._map.getPitch();let F="";if(F+=i?`/${C}/${I}/${p}`:`${p}/${I}/${C}`,(E||D)&&(F+="/"+Math.round(10*E)/10),D&&(F+=`/${Math.round(D)}`),this._hashName){const N=this._hashName;let J=!1;const ce=window.location.hash.slice(1).split("&").map(le=>{const pe=le.split("=")[0];return pe===N?(J=!0,`${pe}=${F}`):le}).filter(le=>le);return J||ce.push(`${N}=${F}`),`#${ce.join("&")}`}return`#${F}`}}const Gs={linearity:.3,easing:c.ba(0,0,.3,1)},Df=c.e({deceleration:2500,maxSpeed:1400},Gs),Rf=c.e({deceleration:20,maxSpeed:1400},Gs),Lf=c.e({deceleration:1e3,maxSpeed:360},Gs),$f=c.e({deceleration:1e3,maxSpeed:90},Gs);class Bf{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:c.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=c.h.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const _=Vl(u.pan.mag(),p,c.e({},Df,i||{}));g.offset=u.pan.mult(_.amount/u.pan.mag()),g.center=this._map.transform.center,Uo(g,_)}if(u.zoom){const _=Vl(u.zoom,p,Rf);g.zoom=this._map.transform.zoom+_.amount,Uo(g,_)}if(u.bearing){const _=Vl(u.bearing,p,Lf);g.bearing=this._map.transform.bearing+c.ad(_.amount,-179,179),Uo(g,_)}if(u.pitch){const _=Vl(u.pitch,p,$f);g.pitch=this._map.transform.pitch+_.amount,Uo(g,_)}if(g.zoom||g.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),c.e(g,{noMoveStart:!0})}}function Uo(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Vl(y,i,u){const{maxSpeed:p,linearity:g,deceleration:_}=u,C=c.ad(y*g/(i/1e3),-p,p),I=Math.abs(C)/(_*g);return{easing:u.easing,duration:1e3*I,amount:C*(I/2)}}class Zi extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p,g={}){const _=w.mousePos(u.getCanvasContainer(),p),C=u.unproject(_);super(i,c.e({point:_,lngLat:C,originalEvent:p},g)),this._defaultPrevented=!1,this.target=u}}class Ul extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){const g=i==="touchend"?p.changedTouches:p.touches,_=w.touchPos(u.getCanvasContainer(),g),C=_.map(E=>u.unproject(E)),I=_.reduce((E,D,F,N)=>E.add(D.div(N.length)),new c.P(0,0));super(i,{points:_,point:I,lngLats:C,lngLat:u.unproject(I),originalEvent:p}),this._defaultPrevented=!1}}class Of extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class Ff{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Of(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new Zi(i.type,this._map,i))}mouseup(i){this._map.fire(new Zi(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Zi(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Zi(i.type,this._map,i))}mouseover(i){this._map.fire(new Zi(i.type,this._map,i))}mouseout(i){this._map.fire(new Zi(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Ul(i.type,this._map,i))}touchmove(i){this._map.fire(new Ul(i.type,this._map,i))}touchend(i){this._map.fire(new Ul(i.type,this._map,i))}touchcancel(i){this._map.fire(new Ul(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Nf{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Zi(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Zi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Zi(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ga{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(c.P.convert(i),this._map.terrain)}}class jf{constructor(i,u){this._map=i,this._tr=new ga(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const _=Math.min(g.x,p.x),C=Math.max(g.x,p.x),I=Math.min(g.y,p.y),E=Math.max(g.y,p.y);w.setTransform(this._box,`translate(${_}px,${I}px)`),this._box.style.width=C-_+"px",this._box.style.height=E-I+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const p=this._startPos,g=u;if(this.reset(),w.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:i})),{cameraAnimation:_=>_.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new c.k(i,{originalEvent:u}))}}function ho(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const u={};for(let p=0;p<y.length;p++)u[y[p].identifier]=i[p];return u}class ya{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const _=new c.P(0,0);for(const C of g)_._add(C);return _.div(g.length)}(u),this.touches=ho(p,u)))}touchmove(i,u,p){if(this.aborted||!this.centroid)return;const g=ho(p,u);for(const _ in this.touches){const C=g[_];(!C||C.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(i,u,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Kc{constructor(i){this.singleTap=new ya(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,p){this.singleTap.touchstart(i,u,p)}touchmove(i,u,p){this.singleTap.touchmove(i,u,p)}touchend(i,u,p){const g=this.singleTap.touchend(i,u,p);if(g){const _=i.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(g)<30;if(_&&C||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class va{constructor(i){this._tr=new ga(i),this._zoomIn=new Kc({numTouches:1,numTaps:2}),this._zoomOut=new Kc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,p){this._zoomIn.touchstart(i,u,p),this._zoomOut.touchstart(i,u,p)}touchmove(i,u,p){this._zoomIn.touchmove(i,u,p),this._zoomOut.touchmove(i,u,p)}touchend(i,u,p){const g=this._zoomIn.touchend(i,u,p),_=this._zoomOut.touchend(i,u,p),C=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(g)},{originalEvent:i})}):_?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(_)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _a{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const u=this._moveFunction(...i);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(i,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=u.length?u[0]:u;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&w.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Rv={0:1,2:2};class Wd{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const u=w.mouseButton(i);this._eventButton=u}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(u,p){const g=Rv[p];return u.buttons===void 0||(u.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return w.mouseButton(i)===this._eventButton}}class Vf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Xc=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(i){i.preventDefault()}},qs=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:u=.8})=>{const p=new Wd({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new _a({clickTolerance:i,move:(g,_)=>({bearingDelta:(_.x-g.x)*u}),moveStateManager:p,enable:y,assignEvents:Xc})},xa=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:u=-.5})=>{const p=new Wd({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new _a({clickTolerance:i,move:(g,_)=>({pitchDelta:(_.y-g.y)*u}),moveStateManager:p,enable:y,assignEvents:Xc})};class Pt{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,p){return this._calculateTransform(i,u,p)}touchmove(i,u,p){if(this._map._cooperativeGestures&&(this._minTouches===2&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,p)}touchend(i,u,p){this._calculateTransform(i,u,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,p){p.length>0&&(this._active=!0);const g=ho(p,u),_=new c.P(0,0),C=new c.P(0,0);let I=0;for(const D in g){const F=g[D],N=this._touches[D];N&&(_._add(F),C._add(F.sub(N)),I++,g[D]=F)}if(this._touches=g,I<this._minTouches||!C.mag())return;const E=C.div(I);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(I),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Jc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,p){if(!this._firstTwoTouches)return;i.preventDefault();const[g,_]=this._firstTwoTouches,C=Va(p,u,g),I=Va(p,u,_);if(!C||!I)return;const E=this._aroundCenter?null:C.add(I).div(2);return this._move([C,I],E,i)}touchend(i,u,p){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,C=Va(p,u,g),I=Va(p,u,_);C&&I||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Va(y,i,u){for(let p=0;p<y.length;p++)if(y[p].identifier===u)return i[p]}function Zs(y,i){return Math.log(y/i)/Math.LN2}class Uf extends Jc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Zs(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Zs(this._distance,p),pinchAround:u}}}function bt(y,i){return 180*y.angleWith(i)/Math.PI}class Gd extends Jc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:bt(this._vector,p),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,p=bt(i,this._startVector);return Math.abs(p)<u}}function qd(y){return Math.abs(y.y)>Math.abs(y.x)}class Lv extends Jc{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,p){super.touchstart(i,u,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,qd(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),_=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,p){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,_=u.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const C=i.y>0==u.y>0;return qd(i)&&qd(u)&&C}}const Zd={panStep:100,bearingStep:15,pitchStep:10};class Hf{constructor(i){this._tr=new ga(i);const u=Zd;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,p=0,g=0,_=0,C=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),_=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),_=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),C=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:I=>{const E=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Wf,zoom:u?Math.round(E.zoom)+u*(i.shiftKey?2:1):E.zoom,bearing:E.bearing+p*this._bearingStep,pitch:E.pitch+g*this._pitchStep,offset:[-_*this._panStep,-C*this._panStep],center:E.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Wf(y){return y*(2-y)}const Gf=4.000244140625;class $v{constructor(i,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new ga(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=c.h.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%Gf==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,i),p=this._tr;this._around=c.L.convert(this._aroundCenter?p.center:p.unproject(u)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>Gf?this._wheelZoomRate:this._defaultZoomRate;let E=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&E!==0&&(E=1/E);const D=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(D*E))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,g=this._easing;let _,C=!1;if(this._type==="wheel"&&p&&g){const I=Math.min((c.h.now()-this._lastWheelEventTime)/200,1),E=g(I);_=c.B.number(p,u,E),I<1?this._frameId||(this._frameId=!0):C=!0}else _=u,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:_-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=c.bb;if(this._prevEase){const p=this._prevEase,g=(c.h.now()-p.start)/p.duration,_=p.easing(g+.01)-p.easing(g),C=.27/Math.sqrt(_*_+1e-4)*.01,I=Math.sqrt(.0729-C*C);u=c.ba(C,I,.25,1)}return this._prevEase={start:c.h.now(),duration:i,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Kd{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Xd{constructor(i){this._tr=new ga(i),this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Jd{constructor(){this._tap=new Kc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,u,p){if(!this._swipePoint)if(this._tapTime){const g=u[0],_=i.timeStamp-this._tapTime<500,C=this._tapPoint.dist(g)<30;_&&C?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,u,p)}touchmove(i,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=u[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(i,u,p)}touchend(i,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(i,u,p);g&&(this._tapTime=i.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yd{constructor(i,u,p){this._el=i,this._mousePan=u,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ei{constructor(i,u,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ua{constructor(i,u,p,g){this._el=i,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Hl=y=>y.zoom||y.drag||y.pitch||y.rotate;class Qd extends c.k{}function Wl(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class eh{constructor(i,u){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=g.type==="renderFrame"?void 0:g,I={needsRenderFrame:!1},E={},D={},F=g.touches,N=F?this._getMapTouches(F):void 0,J=N?w.touchPos(this._el,N):w.mousePos(this._el,g);for(const{handlerName:pe,handler:ae,allowed:we}of this._handlers){if(!ae.isEnabled())continue;let Be;this._blockedByActive(D,we,pe)?ae.reset():ae[_||g.type]&&(Be=ae[_||g.type](g,J,N),this.mergeHandlerResult(I,E,Be,pe,C),Be&&Be.needsRenderFrame&&this._triggerRenderFrame()),(Be||ae.isActive())&&(D[pe]=ae)}const ce={};for(const pe in this._previousActiveHandlers)D[pe]||(ce[pe]=C);this._previousActiveHandlers=D,(Object.keys(ce).length||Wl(I))&&(this._changes.push([I,E,ce]),this._triggerRenderFrame()),(Object.keys(D).length||Wl(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:le}=I;le&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],le(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Bf(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,C]of this._listeners)w.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[i,u,p]of this._listeners)w.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Ff(u,i));const g=u.boxZoom=new jf(u,i);this._add("boxZoom",g),i.interactive&&i.boxZoom&&g.enable();const _=new va(u),C=new Xd(u);u.doubleClickZoom=new Kd(C,_),this._add("tapZoom",_),this._add("clickZoom",C),i.interactive&&i.doubleClickZoom&&u.doubleClickZoom.enable();const I=new Jd;this._add("tapDragZoom",I);const E=u.touchPitch=new Lv(u);this._add("touchPitch",E),i.interactive&&i.touchPitch&&u.touchPitch.enable(i.touchPitch);const D=qs(i),F=xa(i);u.dragRotate=new Ei(i,D,F),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]),i.interactive&&i.dragRotate&&u.dragRotate.enable();const N=(({enable:we,clickTolerance:Be})=>{const ge=new Wd({checkCorrectEvent:Ie=>w.mouseButton(Ie)===0&&!Ie.ctrlKey});return new _a({clickTolerance:Be,move:(Ie,Ve)=>({around:Ve,panDelta:Ve.sub(Ie)}),activateOnStart:!0,moveStateManager:ge,enable:we,assignEvents:Xc})})(i),J=new Pt(i,u);u.dragPan=new Yd(p,N,J),this._add("mousePan",N),this._add("touchPan",J,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&u.dragPan.enable(i.dragPan);const ce=new Gd,le=new Uf;u.touchZoomRotate=new Ua(p,le,ce,I),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&u.touchZoomRotate.enable(i.touchZoomRotate);const pe=u.scrollZoom=new $v(u,()=>this._triggerRenderFrame());this._add("scrollZoom",pe,["mousePan"]),i.interactive&&i.scrollZoom&&u.scrollZoom.enable(i.scrollZoom);const ae=u.keyboard=new Hf(u);this._add("keyboard",ae),i.interactive&&i.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Nf(u))}_add(i,u,p){this._handlers.push({handlerName:i,handler:u,allowed:p}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Hl(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,u,p){for(const g in i)if(g!==p&&(!u||u.indexOf(g)<0))return!0;return!1}_getMapTouches(i){const u=[];for(const p of i)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(i,u,p,g,_){if(!p)return;c.e(i,p);const C={handlerName:g,originalEvent:p.originalEvent||_};p.zoomDelta!==void 0&&(u.zoom=C),p.panDelta!==void 0&&(u.drag=C),p.pitchDelta!==void 0&&(u.pitch=C),p.bearingDelta!==void 0&&(u.rotate=C)}_applyChanges(){const i={},u={},p={};for(const[g,_,C]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new c.P(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),c.e(u,_),c.e(p,C);this._updateMapTransform(i,u,p),this._changes=[]}_updateMapTransform(i,u,p){const g=this._map,_=g._getTransformForUpdate(),C=g.terrain;if(!(Wl(i)||C&&this._terrainMovement))return this._fireEvents(u,p,!0);let{panDelta:I,zoomDelta:E,bearingDelta:D,pitchDelta:F,around:N,pinchAround:J}=i;J!==void 0&&(N=J),g._stop(!0),N=N||g.transform.centerPoint;const ce=_.pointLocation(I?N.sub(I):N);D&&(_.bearing+=D),F&&(_.pitch+=F),E&&(_.zoom+=E),C?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(I)):_.setLocationAtPoint(ce,N):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(ce,N),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(g.terrain)})):_.setLocationAtPoint(ce,N),g._applyUpdatedTransform(_),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,p,!0)}_fireEvents(i,u,p){const g=Hl(this._eventsInProgress),_=Hl(i),C={};for(const F in i){const{originalEvent:N}=i[F];this._eventsInProgress[F]||(C[`${F}start`]=N),this._eventsInProgress[F]=i[F]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const F in C)this._fireEvent(F,C[F]);_&&this._fireEvent("move",_.originalEvent);for(const F in i){const{originalEvent:N}=i[F];this._fireEvent(F,N)}const I={};let E;for(const F in this._eventsInProgress){const{handlerName:N,originalEvent:J}=this._eventsInProgress[F];this._handlersById[N].isActive()||(delete this._eventsInProgress[F],E=u[N]||J,I[`${F}end`]=E)}for(const F in I)this._fireEvent(F,I[F]);const D=Hl(this._eventsInProgress);if(p&&(g||_)&&!D){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),N=J=>J!==0&&-this._bearingSnap<J&&J<this._bearingSnap;!F||!F.essential&&c.h.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:E})),N(this._map.getBearing())&&this._map.resetNorth()):(N(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:E})),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new c.k(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Qd("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class qf extends c.E{constructor(i,u){super(),this._renderFrameCallback=()=>{const p=Math.min((c.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,p){return i=c.P.convert(i).mult(-1),this.panTo(this.transform.center,c.e({offset:i},u),p)}panTo(i,u,p){return this.easeTo(c.e({center:i},u),p)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,p){return this.easeTo(c.e({zoom:i},u),p)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,p){return this.easeTo(c.e({bearing:i},u),p)}resetNorth(i,u){return this.rotateTo(0,c.e({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=gt.convert(i);const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,u)}_cameraForBoxAndBearing(i,u,p,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=c.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const Ve=g.padding;g.padding={top:Ve,bottom:Ve,right:Ve,left:Ve}}g.padding=c.e(_,g.padding);const C=this.transform,I=C.padding,E=C.project(c.L.convert(i)),D=C.project(c.L.convert(u)),F=E.rotate(-p*Math.PI/180),N=D.rotate(-p*Math.PI/180),J=new c.P(Math.max(F.x,N.x),Math.max(F.y,N.y)),ce=new c.P(Math.min(F.x,N.x),Math.min(F.y,N.y)),le=J.sub(ce),pe=(C.width-(I.left+I.right+g.padding.left+g.padding.right))/le.x,ae=(C.height-(I.top+I.bottom+g.padding.top+g.padding.bottom))/le.y;if(ae<0||pe<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const we=Math.min(C.scaleZoom(C.scale*Math.min(pe,ae)),g.maxZoom),Be=c.P.convert(g.offset),ge=new c.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(p*Math.PI/180),Ie=Be.add(ge).mult(C.scale/C.zoomScale(we));return{center:C.unproject(E.add(D).div(2).sub(Ie)),zoom:we,bearing:p}}fitBounds(i,u,p){return this._fitInternal(this.cameraForBounds(i,u),u,p)}fitScreenCoordinates(i,u,p,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(i)),this.transform.pointLocation(c.P.convert(u)),p,g),g,_)}_fitInternal(i,u,p){return i?(delete(u=c.e(i,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(i,u){this.stop();const p=this._getTransformForUpdate();let g=!1,_=!1,C=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(g=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=c.L.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(_=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(C=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this._applyUpdatedTransform(p),this.fire(new c.k("movestart",u)).fire(new c.k("move",u)),g&&this.fire(new c.k("zoomstart",u)).fire(new c.k("zoom",u)).fire(new c.k("zoomend",u)),_&&this.fire(new c.k("rotatestart",u)).fire(new c.k("rotate",u)).fire(new c.k("rotateend",u)),C&&this.fire(new c.k("pitchstart",u)).fire(new c.k("pitch",u)).fire(new c.k("pitchend",u)),this.fire(new c.k("moveend",u))}calculateCameraOptionsFromTo(i,u,p,g=0){const _=c.U.fromLngLat(i,u),C=c.U.fromLngLat(p,g),I=C.x-_.x,E=C.y-_.y,D=C.z-_.z,F=Math.hypot(I,E,D);if(F===0)throw new Error("Can't calculate camera options with same From and To");const N=Math.hypot(I,E),J=this.transform.scaleZoom(this.transform.cameraToCenterDistance/F/this.transform.tileSize),ce=180*Math.atan2(I,-E)/Math.PI;let le=180*Math.acos(N/F)/Math.PI;return le=D<0?90-le:90+le,{center:C.toLngLat(),zoom:J,pitch:le,bearing:ce}}easeTo(i,u){this._stop(!1,i.easeId),((i=c.e({offset:[0,0],duration:500,easing:c.bb},i)).animate===!1||!i.essential&&c.h.prefersReducedMotion)&&(i.duration=0);const p=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),I=this.getPadding(),E="zoom"in i?+i.zoom:g,D="bearing"in i?this._normalizeBearing(i.bearing,_):_,F="pitch"in i?+i.pitch:C,N="padding"in i?i.padding:p.padding,J=c.P.convert(i.offset);let ce=p.centerPoint.add(J);const le=p.pointLocation(ce),pe=c.L.convert(i.center||le);this._normalizeCenter(pe);const ae=p.project(le),we=p.project(pe).sub(ae),Be=p.zoomScale(E-g);let ge,Ie;i.around&&(ge=c.L.convert(i.around),Ie=p.locationPoint(ge));const Ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||E!==g,this._rotating=this._rotating||_!==D,this._pitching=this._pitching||F!==C,this._padding=!p.isPaddingEqual(N),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,Ve),this.terrain&&this._prepareElevation(pe),this._ease(He=>{if(this._zooming&&(p.zoom=c.B.number(g,E,He)),this._rotating&&(p.bearing=c.B.number(_,D,He)),this._pitching&&(p.pitch=c.B.number(C,F,He)),this._padding&&(p.interpolatePadding(I,N,He),ce=p.centerPoint.add(J)),this.terrain&&!i.freezeElevation&&this._updateElevation(He),ge)p.setLocationAtPoint(ge,Ie);else{const Ze=p.zoomScale(p.zoom-g),et=E>g?Math.min(2,Be):Math.max(.5,Be),Je=Math.pow(et,1-He),ot=p.unproject(ae.add(we.mult(He*Je)).mult(Ze));p.setLocationAtPoint(p.renderWorldCopies?ot.wrap():ot,ce)}this._applyUpdatedTransform(p),this._fireMoveEvents(u)},He=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,He)},i),this}_prepareEase(i,u,p={}){this._moving=!0,u||p.moving||this.fire(new c.k("movestart",i)),this._zooming&&!p.zooming&&this.fire(new c.k("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new c.k("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new c.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(u-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=u}this.transform.elevation=c.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const u=i.clone(),{center:p,zoom:g,pitch:_,bearing:C,elevation:I}=this.transformCameraUpdate(u);p&&(u.center=p),g!==void 0&&(u.zoom=g),_!==void 0&&(u.pitch=_),C!==void 0&&(u.bearing=C),I!==void 0&&(u.elevation=I),this.transform.apply(u)}_fireMoveEvents(i){this.fire(new c.k("move",i)),this._zooming&&this.fire(new c.k("zoom",i)),this._rotating&&this.fire(new c.k("rotate",i)),this._pitching&&this.fire(new c.k("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new c.k("zoomend",i)),g&&this.fire(new c.k("rotateend",i)),_&&this.fire(new c.k("pitchend",i)),this.fire(new c.k("moveend",i))}flyTo(i,u){if(!i.essential&&c.h.prefersReducedMotion){const Nt=c.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Nt,u)}this.stop(),i=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.bb},i);const p=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),I=this.getPadding(),E="zoom"in i?c.ad(+i.zoom,p.minZoom,p.maxZoom):g,D="bearing"in i?this._normalizeBearing(i.bearing,_):_,F="pitch"in i?+i.pitch:C,N="padding"in i?i.padding:p.padding,J=p.zoomScale(E-g),ce=c.P.convert(i.offset);let le=p.centerPoint.add(ce);const pe=p.pointLocation(le),ae=c.L.convert(i.center||pe);this._normalizeCenter(ae);const we=p.project(pe),Be=p.project(ae).sub(we);let ge=i.curve;const Ie=Math.max(p.width,p.height),Ve=Ie/J,He=Be.mag();if("minZoom"in i){const Nt=c.ad(Math.min(i.minZoom,g,E),p.minZoom,p.maxZoom),Nr=Ie/p.zoomScale(Nt-g);ge=Math.sqrt(Nr/He*2)}const Ze=ge*ge;function et(Nt){const Nr=(Ve*Ve-Ie*Ie+(Nt?-1:1)*Ze*Ze*He*He)/(2*(Nt?Ve:Ie)*Ze*He);return Math.log(Math.sqrt(Nr*Nr+1)-Nr)}function Je(Nt){return(Math.exp(Nt)-Math.exp(-Nt))/2}function ot(Nt){return(Math.exp(Nt)+Math.exp(-Nt))/2}const Bt=et(!1);let fr=function(Nt){return ot(Bt)/ot(Bt+ge*Nt)},ft=function(Nt){return Ie*((ot(Bt)*(Je(Nr=Bt+ge*Nt)/ot(Nr))-Je(Bt))/Ze)/He;var Nr},Qt=(et(!0)-Bt)/ge;if(Math.abs(He)<1e-6||!isFinite(Qt)){if(Math.abs(Ie-Ve)<1e-6)return this.easeTo(i,u);const Nt=Ve<Ie?-1:1;Qt=Math.abs(Math.log(Ve/Ie))/ge,ft=function(){return 0},fr=function(Nr){return Math.exp(Nt*ge*Nr)}}return i.duration="duration"in i?+i.duration:1e3*Qt/("screenSpeed"in i?+i.screenSpeed/ge:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=_!==D,this._pitching=F!==C,this._padding=!p.isPaddingEqual(N),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ae),this._ease(Nt=>{const Nr=Nt*Qt,pr=1/fr(Nr);p.zoom=Nt===1?E:g+p.scaleZoom(pr),this._rotating&&(p.bearing=c.B.number(_,D,Nt)),this._pitching&&(p.pitch=c.B.number(C,F,Nt)),this._padding&&(p.interpolatePadding(I,N,Nt),le=p.centerPoint.add(ce)),this.terrain&&!i.freezeElevation&&this._updateElevation(Nt);const or=Nt===1?ae:p.unproject(we.add(Be.mult(ft(Nr))).mult(pr));p.setLocationAtPoint(p.renderWorldCopies?or.wrap():or,le),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,u)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,u,p){p.animate===!1||p.duration===0?(i(1),u()):(this._easeStart=c.h.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,u){i=c.b5(i,-180,180);const p=Math.abs(i-u);return Math.abs(i-360-u)<p&&(i-=360),Math.abs(i+360-u)<p&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const p=i.lng-u.center.lng;i.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(c.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class Ki{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const p=this._map._getUIString(`AttributionControl.${u}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const _=u[g];if(_.used||_.usedForTerrain){const C=_.getSource();C.attribution&&i.indexOf(C.attribution)<0&&i.push(C.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,_)=>g.length-_.length),i=i.filter((g,_)=>{for(let C=_+1;C<i.length;C++)if(i[C].indexOf(g)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Qr{constructor(i={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Yc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const g of p)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const th={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Zf=c.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Kf extends c.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];const p={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),c.aS(g.posMatrix,0,c.N,0,c.N,0,1),this._tiles[g.key]=new er(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(i){for(const u in this._tiles){const p=this._tiles[u];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16),c.aS(_.posMatrix,0,c.N,0,c.N,0,1),u[p]=_}else if(g.canonical.isChildOf(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=g.canonical.z-i.canonical.z,I=g.canonical.x-(g.canonical.x>>C<<C),E=g.canonical.y-(g.canonical.y>>C<<C),D=c.N>>C;c.aS(_.posMatrix,0,D,0,D,0,1),c.$(_.posMatrix,_.posMatrix,[-I*D,-E*D,0]),u[p]=_}else if(i.canonical.isChildOf(g.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=i.canonical.z-g.canonical.z,I=i.canonical.x-(i.canonical.x>>C<<C),E=i.canonical.y-(i.canonical.y>>C<<C),D=c.N>>C;c.aS(_.posMatrix,0,c.N,0,c.N,0,1),c.$(_.posMatrix,_.posMatrix,[I*D,E*D,0]),c.a0(_.posMatrix,_.posMatrix,[1/2**C,1/2**C,0]),u[p]=_}}return u}getSourceTile(i,u){const p=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!_||!_.dem)&&u)for(;g>=p.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(i.scaledTo(g--).key);return _}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=i)}}class Xf{constructor(i,u,p){this.painter=i,this.sourceCache=new Kf(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,u,p,g=c.N){var _;if(!(u>=0&&u<g&&p>=0&&p<g))return 0;const C=this.getTerrainData(i),I=(_=C.tile)===null||_===void 0?void 0:_.dem;if(!I)return 0;const E=function(le,pe,ae){var we=pe[0],Be=pe[1];return le[0]=ae[0]*we+ae[4]*Be+ae[12],le[1]=ae[1]*we+ae[5]*Be+ae[13],le}([],[u/g*c.N,p/g*c.N],C.u_terrain_matrix),D=[E[0]*I.dim,E[1]*I.dim],F=Math.floor(D[0]),N=Math.floor(D[1]),J=D[0]-F,ce=D[1]-N;return I.get(F,N)*(1-J)*(1-ce)+I.get(F+1,N)*J*(1-ce)+I.get(F,N+1)*(1-J)*ce+I.get(F+1,N+1)*J*ce}getElevationForLngLatZoom(i,u){const{tileID:p,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(i,u);return this.getElevation(p,g%c.N,_%c.N,c.N)}getElevation(i,u,p,g=c.N){return this.getDEMElevation(i,u,p,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,_=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ye(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ye(g,new c.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ao([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new ye(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?_=i.canonical.z-g:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=i.canonical.x-(i.canonical.x>>_<<_),I=i.canonical.y-(i.canonical.y>>_<<_),E=c.bc(new Float64Array(16),[1/(c.N<<_),1/(c.N<<_),0]);c.$(E,E,[C*c.N,I*c.N,0]),this._demMatrixCache[i.key]={matrix:E,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(i){const u=this.painter,p=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ye(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ye(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,C=0;_<this._coordsTextureSize;_++)for(let I=0;I<this._coordsTextureSize;I++,C+=4)u[C+0]=255&I,u[C+1]=255&_,u[C+2]=I>>8<<4|_>>8,u[C+3]=0;const p=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new ye(i,p,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){const u=new Uint8Array(4),p=this.painter.context,g=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),C=u[1]+((15&u[2])<<8),I=this.coordsIndex[255-u[3]],E=I&&this.sourceCache.getTileByID(I);if(!E)return null;const D=this._coordsTextureSize,F=(1<<E.tileID.canonical.z)*D;return new c.U(this._allowMercatorOverflow(i,(E.tileID.canonical.x*D+_)/F),(E.tileID.canonical.y*D+C)/F,this.getElevation(E.tileID,_,C,D))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,u=new c.bd,p=new c.b0,g=this.meshSize,_=c.N/g,C=g*g;for(let N=0;N<=g;N++)for(let J=0;J<=g;J++)u.emplaceBack(J*_,N*_,0);for(let N=0;N<C;N+=g+1)for(let J=0;J<g;J++)p.emplaceBack(J+N,g+J+N+1,g+J+N+2),p.emplaceBack(J+N,g+J+N+2,J+N+1);const I=u.length,E=I+2*(g+1);for(const N of[0,1])for(let J=0;J<=g;J++)for(const ce of[0,1])u.emplaceBack(J*_,N*c.N,ce);for(let N=0;N<2*g;N+=2)p.emplaceBack(E+N,E+N+1,E+N+3),p.emplaceBack(E+N,E+N+3,E+N+2),p.emplaceBack(I+N,I+N+3,I+N+1),p.emplaceBack(I+N,I+N+2,I+N+3);const D=u.length,F=D+2*(g+1);for(const N of[0,1])for(let J=0;J<=g;J++)for(const ce of[0,1])u.emplaceBack(N*c.N,J*_,ce);for(let N=0;N<2*g;N+=2)p.emplaceBack(D+N,D+N+1,D+N+3),p.emplaceBack(D+N,D+N+3,D+N+2),p.emplaceBack(F+N,F+N+3,F+N+1),p.emplaceBack(F+N,F+N+2,F+N+3);return this._mesh={indexBuffer:i.createIndexBuffer(p),vertexBuffer:i.createVertexBuffer(u,Zf.members),segments:c.S.simpleSegment(0,0,u.length,p.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*c.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,u){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(i,u);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,u){const p=c.U.fromLngLat(i.wrap()),g=(1<<u)*c.N,_=p.x*g,C=p.y*g,I=Math.floor(_/c.N),E=Math.floor(C/c.N);return{tileID:new c.O(u,0,u,I,E),mercatorX:_,mercatorY:C}}_allowMercatorOverflow(i,u){const p=i.x<this.painter.width/2;let g=c.bf(u);const _=this.painter.transform.center.lng;return p&&Math.sign(g)>0&&Math.sign(_)<0||!p&&Math.sign(g)<0&&Math.sign(_)>0?(g=360*Math.sign(_)+g,c.G(g)):u}}class Bv{constructor(i,u,p){this._context=i,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new ye(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:i,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>i.id!==u),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const yi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Qc{constructor(i,u){this.painter=i,this.terrain=u,this.pool=new Bv(i.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(u)),this._coordsDescendingInv={};for(const p in i.sourceCaches){this._coordsDescendingInv[p]={};const g=i.sourceCaches[p].getVisibleCoordinates();for(const _ of g){const C=this.terrain.sourceCache.getTerrainCoords(_);for(const I in C)this._coordsDescendingInv[p][I]||(this._coordsDescendingInv[p][I]=[]),this._coordsDescendingInv[p][I].push(C[I])}}this._coordsDescendingInvStr={};for(const p of i._order){const g=i._layers[p],_=g.source;if(yi[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const C in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][C]=this._coordsDescendingInv[_][C].map(I=>I.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][p.tileID.key];_&&_!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const u=i.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(yi[u]&&(this._prevType&&yi[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(yi[this._prevType]||yi[u]&&g){this._prevType=u;const _=this._stacks.length-1,C=this._stacks[_]||[];for(const I of this._renderableTiles){if(this.pool.isFull()&&(hn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(I),I.rtt[_]){const D=this.pool.getObjectForId(I.rtt[_].id);if(D.stamp===I.rtt[_].stamp){this.pool.useObject(D);continue}}const E=this.pool.getOrCreateFreeObject();this.pool.useObject(E),this.pool.stampObject(E),I.rtt[_]={id:E.id,stamp:E.stamp},p.context.bindFramebuffer.set(E.fbo.framebuffer),p.context.clear({color:c.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let D=0;D<C.length;D++){const F=p.style._layers[C[D]],N=F.source?this._coordsDescendingInv[F.source][I.tileID.key]:[I.tileID];p.context.viewport.set([0,0,E.fbo.width,E.fbo.height]),p._renderTileClippingMasks(F,N),p.renderLayer(p,p.style.sourceCaches[F.source],F,N),F.source&&(I.rttCoords[F.source]=this._coordsDescendingInvStr[F.source][I.tileID.key])}}return hn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),yi[u]}return!1}}const Vt=b,Yt={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Gl=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},rh={showCompass:!0,showZoom:!0,visualizePitch:!1};class nh{constructor(i,u,p=!1){this.mousedown=C=>{this.startMouse(c.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),w.mousePos(this.element,C)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,w.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),_=i.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=qs({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:I,bearingDegreesPerPixelMoved:E=.8})=>{const D=new Vf;return new _a({clickTolerance:I,move:(F,N)=>({bearingDelta:(N.x-F.x)*E}),moveStateManager:D,enable:C,assignEvents:Gl})})({clickTolerance:g,enable:!0}),this.map=i,p&&(this.mousePitch=xa({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:I,pitchDegreesPerPixelMoved:E=-.5})=>{const D=new Vf;return new _a({clickTolerance:I,move:(F,N)=>({pitchDelta:(N.y-F.y)*E}),moveStateManager:D,enable:C,assignEvents:Gl})})({clickTolerance:_,enable:!0})),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(i,u){this.mouseRotate.dragStart(i,u),this.mousePitch&&this.mousePitch.dragStart(i,u),w.disableDrag()}startTouch(i,u){this.touchRotate.dragStart(i,u),this.touchPitch&&this.touchPitch.dragStart(i,u),w.disableDrag()}moveMouse(i,u){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(i,u)||{};_&&p.setPitch(p.getPitch()+_)}}moveTouch(i,u){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(i,u)||{};_&&p.setPitch(p.getPitch()+_)}}off(){const i=this.element;w.removeEventListener(i,"mousedown",this.mousedown),w.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let Cn;function ih(y,i,u){if(y=new c.L(y.lng,y.lat),i){const p=new c.L(y.lng-360,y.lat),g=new c.L(y.lng+360,y.lat),_=u.locationPoint(y).distSqr(i);u.locationPoint(p).distSqr(i)<_?y=p:u.locationPoint(g).distSqr(i)<_&&(y=g)}for(;Math.abs(y.lng-u.center.lng)>180;){const p=u.locationPoint(y);if(p.x>=0&&p.y>=0&&p.x<=u.width&&p.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const po={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Jf(y,i,u){const p=y.classList;for(const g in po)p.remove(`maplibregl-${u}-anchor-${g}`);p.add(`maplibregl-${u}-anchor-${i}`)}class hs extends c.E{constructor(i){if(super(),this._onKeyPress=u=>{const p=u.code,g=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=ih(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${po[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const C=this._map.unproject(this._pos),I=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=C.distanceTo(this._lngLat)>20*I?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=c.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const u=w.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${g}px`),u.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const _=w.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const C=w.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const I=w.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const E=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const we of E){const Be=w.createNS("http://www.w3.org/2000/svg","ellipse");Be.setAttributeNS(null,"opacity","0.04"),Be.setAttributeNS(null,"cx","10.5"),Be.setAttributeNS(null,"cy","5.80029008"),Be.setAttributeNS(null,"rx",we.rx),Be.setAttributeNS(null,"ry",we.ry),I.appendChild(Be)}const D=w.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const F=w.createNS("http://www.w3.org/2000/svg","path");F.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(F);const N=w.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"opacity","0.25"),N.setAttributeNS(null,"fill","#000000");const J=w.createNS("http://www.w3.org/2000/svg","path");J.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),N.appendChild(J);const ce=w.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ce.setAttributeNS(null,"fill","#FFFFFF");const le=w.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pe=w.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#000000"),pe.setAttributeNS(null,"opacity","0.25"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962");const ae=w.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#FFFFFF"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962"),le.appendChild(pe),le.appendChild(ae),C.appendChild(I),C.appendChild(D),C.appendChild(N),C.appendChild(ce),C.appendChild(le),u.appendChild(C),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(u),this._offset=c.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Jf(this._element,this._anchor,"marker"),i&&i.className)for(const u of i.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=c.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=c.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const pn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let cn=0,Ks=!1;const ql={maxWidth:100,unit:"metric"};function Zl(y,i,u){const p=u&&u.maxWidth||100,g=y._container.clientHeight/2,_=y.unproject([0,g]),C=y.unproject([p,g]),I=_.distanceTo(C);if(u&&u.unit==="imperial"){const E=3.2808*I;E>5280?ps(i,p,E/5280,y._getUIString("ScaleControl.Miles")):ps(i,p,E,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?ps(i,p,I/1852,y._getUIString("ScaleControl.NauticalMiles")):I>=1e3?ps(i,p,I/1e3,y._getUIString("ScaleControl.Kilometers")):ps(i,p,I,y._getUIString("ScaleControl.Meters"))}function ps(y,i,u,p){const g=function(_){const C=Math.pow(10,`${Math.floor(_)}`.length-1);let I=_/C;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(E){const D=Math.pow(10,Math.ceil(-Math.log(E)/Math.LN10));return Math.round(E*D)/D}(I),C*I}(u);y.style.width=i*(g/u)+"px",y.innerHTML=`${g}&nbsp;${p}`}const oh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ah=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Xs(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,y),"top-left":new c.P(i,i),"top-right":new c.P(-i,i),bottom:new c.P(0,-y),"bottom-left":new c.P(i,-i),"bottom-right":new c.P(-i,-i),left:new c.P(y,0),right:new c.P(-y,0)}}if(y instanceof c.P||Array.isArray(y)){const i=c.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:c.P.convert(y.center||[0,0]),top:c.P.convert(y.top||[0,0]),"top-left":c.P.convert(y["top-left"]||[0,0]),"top-right":c.P.convert(y["top-right"]||[0,0]),bottom:c.P.convert(y.bottom||[0,0]),"bottom-left":c.P.convert(y["bottom-left"]||[0,0]),"bottom-right":c.P.convert(y["bottom-right"]||[0,0]),left:c.P.convert(y.left||[0,0]),right:c.P.convert(y.right||[0,0])}}return Xs(new c.P(0,0))}const sh={extend:(y,...i)=>c.e(y,...i),run(y){y()},logToElement(y,i=!1,u="log"){const p=window.document.getElementById(u);p&&(i&&(p.innerHTML=""),p.innerHTML+=`<br>${y}`)}},lh=b;class Mr{static get version(){return lh}static get workerCount(){return kr.workerCount}static set workerCount(i){kr.workerCount=i}static get maxParallelImageRequests(){return c.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){c.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return c.c.WORKER_URL}static set workerUrl(i){c.c.WORKER_URL=i}static addProtocol(i,u){c.c.REGISTERED_PROTOCOLS[i]=u}static removeProtocol(i){delete c.c.REGISTERED_PROTOCOLS[i]}}return Mr.Map=class extends qf{constructor(y){if(c.bg.mark(c.bh.create),(y=c.e({},Yt,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Zc(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new c.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Yc,this._controls=[],this._mapId=c.a2(),this._locale=c.e({},th,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=X.addThrottleControl(()=>this.isMoving()),this._requestManager=new L(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const u=ds(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{i?u(p):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new eh(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new jl(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,c.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Ki({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new Qr,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new c.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new c.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new c.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,u,p)}resize(y){var i;const u=this._containerDimensions(),p=u[0],g=u[1],_=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,_),this.painter.resize(p,g,_),this.painter.overLimit()){const I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];const E=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,E),this.painter.resize(p,g,E)}this.transform.resize(p,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(p,g);const C=!this._moving;return C&&(this.stop(),this.fire(new c.k("movestart",y)).fire(new c.k("move",y))),this.fire(new c.k("resize",y)),C&&this.fire(new c.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:u,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),_=y*g,C=i*g;return Math.min(_>u?u/_:1,C>p?p/C:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(gt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(c.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(c.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,u){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:i,listener:u,delegates:{mousemove:_=>{const C=this.getLayer(i)?this.queryRenderedFeatures(_.point,{layers:[i]}):[];C.length?p||(p=!0,u.call(this,new Zi(y,this,_.originalEvent,{features:C}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:i,listener:u,delegates:{mousemove:C=>{(this.getLayer(i)?this.queryRenderedFeatures(C.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,u.call(this,new Zi(y,this,C.originalEvent)))},mouseout:C=>{p&&(p=!1,u.call(this,new Zi(y,this,C.originalEvent)))}}}}{const p=g=>{const _=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];_.length&&(g.features=_,u.call(this,g),delete g.features)};return{layer:i,listener:u,delegates:{[y]:p}}}}on(y,i,u){if(u===void 0)return super.on(y,i);const p=this._createDelegatedListener(y,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(y,i,u){if(u===void 0)return super.once(y,i);const p=this._createDelegatedListener(y,i,u);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(y,i,u){return u===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const g=this._delegatedListeners[y];for(let _=0;_<g.length;_++){const C=g[_];if(C.layer===i&&C.listener===u){for(const I in C.delegates)this.off(I,C.delegates[I]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let u;const p=y instanceof c.P||Array.isArray(y),g=p?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:y)||{},g instanceof c.P||typeof g[0]=="number")u=[c.P.convert(g)];else{const _=c.P.convert(g[0]),C=c.P.convert(g[1]);u=[_,new c.P(C.x,_.y),C,new c.P(_.x,C.y),_]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const u=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new ti(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,u):this.style.loadJSON(y,i,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ti(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,B.Style);c.f(u,(p,g)=>{p?this.fire(new c.j(p)):g&&this._updateDiff(g,i)})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(u){c.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new c.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===y.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Xf(this.painter,i,y),this.painter.renderToTexture=new Qc(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const u=y[i]._tiles;for(const p in u){const g=u[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(y,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,i,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,u={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:_,stretchY:C,content:I}=u;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||c.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:E,height:D,data:F}=i,N=i;return this.style.addImage(y,{data:new c.R({width:E,height:D},new Uint8Array(F)),pixelRatio:p,stretchX:_,stretchY:C,content:I,sdf:g,version:0,userImage:N}),N.onAdd&&N.onAdd(this,y),this}}{const{width:E,height:D,data:F}=c.h.getImageData(i);this.style.addImage(y,{data:new c.R({width:E,height:D},F),pixelRatio:p,stretchX:_,stretchY:C,content:I,sdf:g,version:0})}}updateImage(y,i){const u=this.style.getImage(y);if(!u)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||c.a(i)?c.h.getImageData(i):i,{width:g,height:_,data:C}=p;if(g===void 0||_===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||_!==u.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(i instanceof HTMLImageElement||c.a(i));return u.data.replace(C,I),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,i){X.getImage(this._requestManager.transformRequest(y,B.Image),i)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,u){return this.style.setLayerZoomRange(y,i,u),this._update(!0)}setFilter(y,i,u={}){return this.style.setFilter(y,i,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,u,p={}){return this.style.setPaintProperty(y,i,u,p),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,u,p={}){return this.style.setLayoutProperty(y,i,u,p),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,u,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,u=>{u||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=w.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const g=this._controlContainer=w.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{_[C]=w.create("div",`maplibregl-ctrl-${C} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,i,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:y},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new us(u,this.transform),k.testSupport(u)}_onCooperativeGesture(y,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=c.h.now();this.style.zoomHistory.update(g,_);const C=new c.a8(g,{now:_,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=C.crossFadingFactor();I===1&&I===this._crossFadingFactor||(u=!0,this._crossFadingFactor=I),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bg.mark(c.bh.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,c.bg.mark(c.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),X.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),c.bg.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=c.h.frame(y=>{c.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Vt}getCameraTargetElevation(){return this.transform.elevation}},Mr.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),u=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);i.title=p,i.setAttribute("aria-label",p)},this.options=c.e({},rh,y),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new nh(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const u=w.create("button",y,this._container);return u.type="button",u.addEventListener("click",i),u}},Mr.GeolocateControl=class extends c.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const u=new c.L(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,g=this._map.getBearing(),_=c.e({bearing:g},this.options.fitBoundsOptions),C=gt.fromLngLat(u,p);this._map.fitBounds(C,_,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const u=new c.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Ks)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new hs({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new hs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")))})}},this.options=c.e({},pn,y)}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,u=!1){Cn===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{Cn=p.state!=="denied",i(Cn)}).catch(()=>{Cn=!!window.navigator.geolocation,i(Cn)}):(Cn=!!window.navigator.geolocation,i(Cn)):i(Cn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,cn=0,Ks=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),u=y.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),u=y.getNorthEast(),p=i.distanceTo(u),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":cn--,Ks=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),cn++,cn>1?(y={maximumAge:6e5,timeout:0},Ks=!0):(y=this.options.positionOptions,Ks=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},Mr.AttributionControl=Ki,Mr.LogoControl=Qr,Mr.ScaleControl=class{constructor(y){this._onMove=()=>{Zl(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Zl(this._map,this._container,this.options)},this.options=c.e({},ql,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},Mr.FullscreenControl=class extends c.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},Mr.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},Mr.Popup=class extends c.E{constructor(y){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new c.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ih(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const u=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let p=this.options.anchor;const g=Xs(this.options.offset);if(!p){const C=this._container.offsetWidth,I=this._container.offsetHeight;let E;E=u.y+g.bottom.y<I?["top"]:u.y>this._map.transform.height-I?["bottom"]:[],u.x<C/2?E.push("left"):u.x>this._map.transform.width-C/2&&E.push("right"),p=E.length===0?"bottom":E.join("-")}const _=u.add(g[p]).round();w.setTransform(this._container,`${po[p]} translate(${_.x}px,${_.y}px)`),Jf(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(oh),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=c.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=y;p=u.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(ah);y&&y.focus()}},Mr.Marker=hs,Mr.Style=ti,Mr.LngLat=c.L,Mr.LngLatBounds=gt,Mr.Point=c.P,Mr.MercatorCoordinate=c.U,Mr.Evented=c.E,Mr.AJAXError=c.bi,Mr.config=c.c,Mr.CanvasSource=Mt,Mr.GeoJSONSource=$e,Mr.ImageSource=pt,Mr.RasterDEMTileSource=kt,Mr.RasterTileSource=Zt,Mr.VectorTileSource=At,Mr.VideoSource=Dt,Mr.setRTLTextPlugin=c.bj,Mr.getRTLTextPluginStatus=c.bk,Mr.prewarm=function(){nr().acquire(qt)},Mr.clearPrewarmedResources=function(){const y=sr;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(qt),sr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},sh.extend(Mr,{isSafari:c.ac,getPerformanceMetrics:c.bg.getPerformanceMetrics}),Mr});var f=l;return f})})(wz);var Lb=wz.exports;const Cz=Wx(Lb),h9=Hx({__proto__:null,default:Cz},[Lb]);var Wu=Math.pow,Vi=(e,t,r)=>new Promise((o,l)=>{var d=b=>{try{c(r.next(b))}catch(w){l(w)}},f=b=>{try{c(r.throw(b))}catch(w){l(w)}},c=b=>b.done?o(b.value):Promise.resolve(b.value).then(d,f);c((r=r.apply(e,t)).next())}),Do=Uint8Array,Ru=Uint16Array,p9=Int32Array,kz=new Do([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Iz=new Do([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),f9=new Do([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tz=function(e,t){for(var r=new Ru(31),o=0;o<31;++o)r[o]=t+=1<<e[o-1];for(var l=new p9(r[30]),o=1;o<30;++o)for(var d=r[o];d<r[o+1];++d)l[d]=d-r[o]<<5|o;return{b:r,r:l}},Pz=Tz(kz,2),Ez=Pz.b,m9=Pz.r;Ez[28]=258,m9[258]=28;var g9=Tz(Iz,0),y9=g9.b,Dx=new Ru(32768);for(Wr=0;Wr<32768;++Wr)ws=(Wr&43690)>>1|(Wr&21845)<<1,ws=(ws&52428)>>2|(ws&13107)<<2,ws=(ws&61680)>>4|(ws&3855)<<4,Dx[Wr]=((ws&65280)>>8|(ws&255)<<8)>>1;var ws,Wr,dp=function(e,t,r){for(var o=e.length,l=0,d=new Ru(t);l<o;++l)e[l]&&++d[e[l]-1];var f=new Ru(t);for(l=1;l<t;++l)f[l]=f[l-1]+d[l-1]<<1;var c;if(r){c=new Ru(1<<t);var b=15-t;for(l=0;l<o;++l)if(e[l])for(var w=l<<4|e[l],k=t-e[l],z=f[e[l]-1]++<<k,P=z|(1<<k)-1;z<=P;++z)c[Dx[z]>>b]=w}else for(c=new Ru(o),l=0;l<o;++l)e[l]&&(c[l]=Dx[f[e[l]-1]++]>>15-e[l]);return c},uf=new Do(288);for(Wr=0;Wr<144;++Wr)uf[Wr]=8;var Wr;for(Wr=144;Wr<256;++Wr)uf[Wr]=9;var Wr;for(Wr=256;Wr<280;++Wr)uf[Wr]=7;var Wr;for(Wr=280;Wr<288;++Wr)uf[Wr]=8;var Wr,zz=new Do(32);for(Wr=0;Wr<32;++Wr)zz[Wr]=5;var Wr,v9=dp(uf,9,1),_9=dp(zz,5,1),g_=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Ta=function(e,t,r){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(t&7)&r},y_=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},x9=function(e){return(e+7)/8|0},b9=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var o=new Do(r-t);return o.set(e.subarray(t,r)),o},w9=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zo=function(e,t,r){var o=new Error(t||w9[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,zo),!r)throw o;return o},$b=function(e,t,r,o){var l=e.length,d=o?o.length:0;if(!l||t.f&&!t.l)return r||new Do(0);var f=!r||t.i!=2,c=t.i;r||(r=new Do(l*3));var b=function(pt){var Dt=r.length;if(pt>Dt){var Mt=new Do(Math.max(Dt*2,pt));Mt.set(r),r=Mt}},w=t.f||0,k=t.p||0,z=t.b||0,P=t.l,V=t.d,U=t.m,H=t.n,X=l*8;do{if(!P){w=Ta(e,k,1);var B=Ta(e,k+1,3);if(k+=3,B)if(B==1)P=v9,V=_9,U=9,H=5;else if(B==2){var ne=Ta(e,k,31)+257,he=Ta(e,k+10,15)+4,Z=ne+Ta(e,k+5,31)+1;k+=14;for(var ue=new Do(Z),Ce=new Do(19),ye=0;ye<he;++ye)Ce[f9[ye]]=Ta(e,k+ye*3,7);k+=he*3;for(var Ee=g_(Ce),Se=(1<<Ee)-1,ze=dp(Ce,Ee,1),ye=0;ye<Z;){var We=ze[Ta(e,k,Se)];k+=We&15;var L=We>>4;if(L<16)ue[ye++]=L;else{var Fe=0,Me=0;for(L==16?(Me=3+Ta(e,k,3),k+=2,Fe=ue[ye-1]):L==17?(Me=3+Ta(e,k,7),k+=3):L==18&&(Me=11+Ta(e,k,127),k+=7);Me--;)ue[ye++]=Fe}}var Oe=ue.subarray(0,ne),ke=ue.subarray(ne);U=g_(Oe),H=g_(ke),P=dp(Oe,U,1),V=dp(ke,H,1)}else zo(1);else{var L=x9(k)+4,G=e[L-4]|e[L-3]<<8,te=L+G;if(te>l){c&&zo(0);break}f&&b(z+G),r.set(e.subarray(L,te),z),t.b=z+=G,t.p=k=te*8,t.f=w;continue}if(k>X){c&&zo(0);break}}f&&b(z+131072);for(var Ge=(1<<U)-1,Ke=(1<<H)-1,ht=k;;ht=k){var Fe=P[y_(e,k)&Ge],vt=Fe>>4;if(k+=Fe&15,k>X){c&&zo(0);break}if(Fe||zo(2),vt<256)r[z++]=vt;else if(vt==256){ht=k,P=null;break}else{var gt=vt-254;if(vt>264){var ye=vt-257,Ct=kz[ye];gt=Ta(e,k,(1<<Ct)-1)+Ez[ye],k+=Ct}var At=V[y_(e,k)&Ke],Zt=At>>4;At||zo(3),k+=At&15;var ke=y9[Zt];if(Zt>3){var Ct=Iz[Zt];ke+=y_(e,k)&(1<<Ct)-1,k+=Ct}if(k>X){c&&zo(0);break}f&&b(z+131072);var kt=z+gt;if(z<ke){var $e=d-ke,rt=Math.min(ke,kt);for($e+z<0&&zo(3);z<rt;++z)r[z]=o[$e+z]}for(;z<kt;z+=4)r[z]=r[z-ke],r[z+1]=r[z+1-ke],r[z+2]=r[z+2-ke],r[z+3]=r[z+3-ke];z=kt}}t.l=P,t.p=ht,t.b=z,t.f=w,P&&(w=1,t.m=U,t.d=V,t.n=H)}while(!w);return z==r.length?r:b9(r,0,z)},S9=new Do(0),C9=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&zo(6,"invalid gzip data");var t=e[3],r=10;t&4&&(r+=(e[10]|e[11]<<8)+2);for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[r++]);return r+(t&2)},k9=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},I9=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&zo(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&zo(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function T9(e,t){return $b(e,{i:2},t&&t.out,t&&t.dictionary)}function P9(e,t){var r=C9(e);return r+8>e.length&&zo(6,"invalid gzip data"),$b(e.subarray(r,-8),{i:2},t&&t.out||new Do(k9(e)),t&&t.dictionary)}function E9(e,t){return $b(e.subarray(I9(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}function Rx(e,t){return e[0]==31&&e[1]==139&&e[2]==8?P9(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?T9(e,t):E9(e,t)}var z9=typeof TextDecoder<"u"&&new TextDecoder,M9=0;try{z9.decode(S9,{stream:!0}),M9=1}catch{}var Mz=(e,t)=>e*Wu(2,t),Uh=(e,t)=>Math.floor(e/Wu(2,t)),Zg=(e,t)=>Mz(e.getUint16(t+1,!0),8)+e.getUint8(t),Az=(e,t)=>Mz(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),A9=(e,t,r,o,l)=>{if(e!==o.getUint8(l))return e-o.getUint8(l);const d=Zg(o,l+1);if(t!==d)return t-d;const f=Zg(o,l+4);return r!==f?r-f:0},D9=(e,t,r,o)=>{const l=Dz(e,t|128,r,o);return l?{z:t,x:r,y:o,offset:l[0],length:l[1],isDir:!0}:null},mk=(e,t,r,o)=>{const l=Dz(e,t,r,o);return l?{z:t,x:r,y:o,offset:l[0],length:l[1],isDir:!1}:null},Dz=(e,t,r,o)=>{let l=0,d=e.byteLength/17-1;for(;l<=d;){const f=d+l>>1,c=A9(t,r,o,e,f*17);if(c>0)l=f+1;else if(c<0)d=f-1;else return[Az(e,f*17+7),e.getUint32(f*17+13,!0)]}return null},R9=(e,t)=>e.isDir&&!t.isDir?1:!e.isDir&&t.isDir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,Rz=(e,t)=>{const r=e.getUint8(t*17);return{z:r&127,x:Zg(e,t*17+1),y:Zg(e,t*17+4),offset:Az(e,t*17+7),length:e.getUint32(t*17+13,!0),isDir:r>>7===1}},gk=e=>{const t=[],r=new DataView(e);for(let o=0;o<r.byteLength/17;o++)t.push(Rz(r,o));return L9(t)},L9=e=>{e.sort(R9);const t=new ArrayBuffer(17*e.length),r=new Uint8Array(t);for(let o=0;o<e.length;o++){const l=e[o];let d=l.z;l.isDir&&(d=d|128),r[o*17]=d,r[o*17+1]=l.x&255,r[o*17+2]=l.x>>8&255,r[o*17+3]=l.x>>16&255,r[o*17+4]=l.y&255,r[o*17+5]=l.y>>8&255,r[o*17+6]=l.y>>16&255,r[o*17+7]=l.offset&255,r[o*17+8]=Uh(l.offset,8)&255,r[o*17+9]=Uh(l.offset,16)&255,r[o*17+10]=Uh(l.offset,24)&255,r[o*17+11]=Uh(l.offset,32)&255,r[o*17+12]=Uh(l.offset,48)&255,r[o*17+13]=l.length&255,r[o*17+14]=l.length>>8&255,r[o*17+15]=l.length>>16&255,r[o*17+16]=l.length>>24&255}return t},$9=(e,t)=>{if(e.byteLength<17)return null;const r=e.byteLength/17,o=Rz(e,r-1);if(o.isDir){const l=o.z,d=t.z-l,f=Math.trunc(t.x/(1<<d)),c=Math.trunc(t.y/(1<<d));return{z:l,x:f,y:c}}return null};function B9(e){return Vi(this,null,function*(){const t=yield e.getBytes(0,512e3),r=new DataView(t.data),o=r.getUint32(4,!0),l=r.getUint16(8,!0),d=new TextDecoder("utf-8"),f=JSON.parse(d.decode(new DataView(t.data,10,o)));let c=0;f.compression==="gzip"&&(c=2);let b=0;"minzoom"in f&&(b=+f.minzoom);let w=0;"maxzoom"in f&&(w=+f.maxzoom);let k=0,z=0,P=0,V=-180,U=-85,H=180,X=85;if(f.bounds){const L=f.bounds.split(",");V=+L[0],U=+L[1],H=+L[2],X=+L[3]}if(f.center){const L=f.center.split(",");k=+L[0],z=+L[1],P=+L[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+o,rootDirectoryLength:l*17,jsonMetadataOffset:10,jsonMetadataLength:o,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:c,tileType:1,minZoom:b,maxZoom:w,minLon:V,minLat:U,maxLon:H,maxLat:X,centerZoom:P,centerLon:k,centerLat:z,etag:t.etag}})}function O9(e,t,r,o,l,d,f){return Vi(this,null,function*(){let c=yield r.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(c=gk(c));const b=mk(new DataView(c),o,l,d);if(b){let z=(yield t.getBytes(b.offset,b.length,f)).data;const P=new DataView(z);return P.getUint8(0)===31&&P.getUint8(1)===139&&(z=Rx(new Uint8Array(z))),{data:z}}const w=$9(new DataView(c),{z:o,x:l,y:d});if(w){const k=D9(new DataView(c),w.z,w.x,w.y);if(k){let z=yield r.getArrayBuffer(t,k.offset,k.length,e);e.specVersion===1&&(z=gk(z));const P=mk(new DataView(z),o,l,d);if(P){let U=(yield t.getBytes(P.offset,P.length,f)).data;const H=new DataView(U);return H.getUint8(0)===31&&H.getUint8(1)===139&&(U=Rx(new Uint8Array(U))),{data:U}}}}})}var Lz={getHeader:B9,getZxy:O9},F9=e=>(t,r)=>{if(r instanceof AbortController)return e(t,r);const o=new AbortController;return e(t,o).then(l=>r(void 0,l.data,l.cacheControl||"",l.expires||""),l=>r(l)).catch(l=>r(l)),{cancel:()=>o.abort()}},N9=class{constructor(){this.tilev4=(e,t)=>Vi(this,null,function*(){if(e.type==="json"){const z=e.url.substr(10);let P=this.tiles.get(z);P||(P=new yk(z),this.tiles.set(z,P));const V=yield P.getHeader();return{data:{tiles:[`${e.url}/{z}/{x}/{y}`],minzoom:V.minZoom,maxzoom:V.maxZoom,bounds:[V.minLon,V.minLat,V.maxLon,V.maxLat]}}}const r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=e.url.match(r);if(!o)throw new Error("Invalid PMTiles protocol URL");const l=o[1];let d=this.tiles.get(l);d||(d=new yk(l),this.tiles.set(l,d));const f=o[2],c=o[3],b=o[4],w=yield d.getHeader(),k=yield d==null?void 0:d.getZxy(+f,+c,+b,t.signal);return k?{data:new Uint8Array(k.data),cacheControl:k.cacheControl,expires:k.expires}:w.tileType===1?{data:new Uint8Array}:{data:null}}),this.tile=F9(this.tilev4),this.tiles=new Map}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function fu(e,t){return(t>>>0)*4294967296+(e>>>0)}function j9(e,t){const r=t.buf;let o=r[t.pos++],l=(o&112)>>4;if(o<128||(o=r[t.pos++],l|=(o&127)<<3,o<128)||(o=r[t.pos++],l|=(o&127)<<10,o<128)||(o=r[t.pos++],l|=(o&127)<<17,o<128)||(o=r[t.pos++],l|=(o&127)<<24,o<128)||(o=r[t.pos++],l|=(o&1)<<31,o<128))return fu(e,l);throw new Error("Expected varint not more than 10 bytes")}function Hh(e){const t=e.buf;let r=t[e.pos++],o=r&127;return r<128||(r=t[e.pos++],o|=(r&127)<<7,r<128)||(r=t[e.pos++],o|=(r&127)<<14,r<128)||(r=t[e.pos++],o|=(r&127)<<21,r<128)?o:(r=t[e.pos],o|=(r&15)<<28,j9(o,e))}function V9(e,t,r,o){if(o===0){r===1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const l=t[0];t[0]=t[1],t[1]=l}}var U9=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function H9(e,t,r){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>Wu(2,e)-1||r>Wu(2,e)-1)throw Error("tile x/y outside zoom level bounds");const o=U9[e],l=Wu(2,e);let d=0,f=0,c=0;const b=[t,r];let w=l/2;for(;w>0;)d=(b[0]&w)>0?1:0,f=(b[1]&w)>0?1:0,c+=w*w*(3*d^f),V9(w,b,d,f),w=w/2;return o+c}function $z(e,t){return Vi(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return Rx(new Uint8Array(e));const r=new Response(e).body;if(!r)throw Error("Failed to read response stream");const o=r.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(o).arrayBuffer()}throw Error("Compression method not supported")})}var W9=127;function G9(e,t){let r=0,o=e.length-1;for(;r<=o;){const l=o+r>>1,d=t-e[l].tileId;if(d>0)r=l+1;else if(d<0)o=l-1;else return e[l]}return o>=0&&(e[o].runLength===0||t-e[o].tileId<e[o].runLength)?e[o]:null}var q9=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,o){return Vi(this,null,function*(){let l,d;r?d=r:(l=new AbortController,d=l.signal);const f=new Headers(this.customHeaders);f.set("range",`bytes=${e}-${e+t-1}`);let c;this.mustReload&&(c="reload");let b=yield fetch(this.url,{signal:d,cache:c,headers:f});if(e===0&&b.status===416){const P=b.headers.get("Content-Range");if(!P||!P.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const V=+P.substr(8);b=yield fetch(this.url,{signal:d,cache:"reload",headers:{range:`bytes=0-${V-1}`}})}let w=b.headers.get("Etag");if(w!=null&&w.startsWith("W/")&&(w=null),b.status===416||o&&w&&w!==o)throw this.mustReload=!0,new Lx(o);if(b.status>=300)throw Error(`Bad response code: ${b.status}`);const k=b.headers.get("Content-Length");if(b.status===200&&(!k||+k>t))throw l&&l.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield b.arrayBuffer(),etag:w||void 0,cacheControl:b.headers.get("Cache-Control")||void 0,expires:b.headers.get("Expires")||void 0}})}};function Pa(e,t){const r=e.getUint32(t+4,!0),o=e.getUint32(t+0,!0);return r*Wu(2,32)+o}function Z9(e,t){const r=new DataView(e),o=r.getUint8(7);if(o>3)throw Error(`Archive is spec version ${o} but this library supports up to spec version 3`);return{specVersion:o,rootDirectoryOffset:Pa(r,8),rootDirectoryLength:Pa(r,16),jsonMetadataOffset:Pa(r,24),jsonMetadataLength:Pa(r,32),leafDirectoryOffset:Pa(r,40),leafDirectoryLength:Pa(r,48),tileDataOffset:Pa(r,56),tileDataLength:Pa(r,64),numAddressedTiles:Pa(r,72),numTileEntries:Pa(r,80),numTileContents:Pa(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:t}}function Bz(e){const t={buf:new Uint8Array(e),pos:0},r=Hh(t),o=[];let l=0;for(let d=0;d<r;d++){const f=Hh(t);o.push({tileId:l+f,offset:0,length:0,runLength:1}),l+=f}for(let d=0;d<r;d++)o[d].runLength=Hh(t);for(let d=0;d<r;d++)o[d].length=Hh(t);for(let d=0;d<r;d++){const f=Hh(t);f===0&&d>0?o[d].offset=o[d-1].offset+o[d-1].length:o[d].offset=f-1}return o}function K9(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Lx=class extends Error{};function X9(e,t){return Vi(this,null,function*(){const r=yield e.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(K9(r.data)<3)return[yield Lz.getHeader(e)];const l=r.data.slice(0,W9),d=Z9(l,r.etag),f=r.data.slice(d.rootDirectoryOffset,d.rootDirectoryOffset+d.rootDirectoryLength),c=`${e.getKey()}|${d.etag||""}|${d.rootDirectoryOffset}|${d.rootDirectoryLength}`,b=Bz(yield t(f,d.internalCompression));return[d,[c,b.length,b]]})}function J9(e,t,r,o,l){return Vi(this,null,function*(){const d=yield e.getBytes(r,o,void 0,l.etag),f=yield t(d.data,l.internalCompression),c=Bz(f);if(c.length===0)throw new Error("Empty directory is invalid");return c})}var Y9=class{constructor(e=100,t=!0,r=$z){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return Vi(this,null,function*(){const t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;const o=new Promise((l,d)=>{X9(e,this.decompress).then(f=>{f[1]&&this.cache.set(f[1][0],{lastUsed:this.counter++,data:Promise.resolve(f[1][2])}),l(f[0]),this.prune()}).catch(f=>{d(f)})});return this.cache.set(t,{lastUsed:this.counter++,data:o}),o})}getDirectory(e,t,r,o){return Vi(this,null,function*(){const l=`${e.getKey()}|${o.etag||""}|${t}|${r}`,d=this.cache.get(l);if(d)return d.lastUsed=this.counter++,yield d.data;const f=new Promise((c,b)=>{J9(e,this.decompress,t,r,o).then(w=>{c(w),this.prune()}).catch(w=>{b(w)})});return this.cache.set(l,{lastUsed:this.counter++,data:f}),f})}getArrayBuffer(e,t,r,o){return Vi(this,null,function*(){const l=`${e.getKey()}|${o.etag||""}|${t}|${r}`,d=this.cache.get(l);if(d)return d.lastUsed=this.counter++,yield d.data;const f=new Promise((c,b)=>{e.getBytes(t,r,void 0,o.etag).then(w=>{c(w.data),this.cache.has(l),this.prune()}).catch(w=>{b(w)})});return this.cache.set(l,{lastUsed:this.counter++,data:f}),f})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,o)=>{r.lastUsed<e&&(e=r.lastUsed,t=o)}),t&&this.cache.delete(t)}}invalidate(e){return Vi(this,null,function*(){const t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());const r=new Promise((o,l)=>{this.getHeader(e).then(d=>{o(),this.invalidations.delete(t)}).catch(d=>{l(d)})});this.invalidations.set(t,r)})}},yk=class{constructor(e,t,r){typeof e=="string"?this.source=new q9(e):this.source=e,r?this.decompress=r:this.decompress=$z,t?this.cache=t:this.cache=new Y9}getHeader(){return Vi(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,o){return Vi(this,null,function*(){const l=H9(e,t,r),d=yield this.cache.getHeader(this.source);if(d.specVersion<3)return Lz.getZxy(d,this.source,this.cache,e,t,r,o);if(e<d.minZoom||e>d.maxZoom)return;let f=d.rootDirectoryOffset,c=d.rootDirectoryLength;for(let b=0;b<=3;b++){const w=yield this.cache.getDirectory(this.source,f,c,d),k=G9(w,l);if(k){if(k.runLength>0){const z=yield this.source.getBytes(d.tileDataOffset+k.offset,k.length,o,d.etag);return{data:yield this.decompress(z.data,d.tileCompression),cacheControl:z.cacheControl,expires:z.expires}}f=d.leafDirectoryOffset+k.offset,c=k.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,r,o){return Vi(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,o)}catch(l){if(l instanceof Lx)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,o);throw l}})}getMetadataAttempt(){return Vi(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),o=new TextDecoder("utf-8");return JSON.parse(o.decode(r))})}getMetadata(){return Vi(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof Lx)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}};let vk=!1;function Bb(){if(vk)return;const e=new N9;Cz.addProtocol("pmtiles",e.tile),vk=!0}const Oz=e=>{Bb();const{mode:t="light",children:r}=e,o=Rb[t];return re.jsxs(re.Fragment,{children:[re.jsx(Hr,{id:"background",type:"background",paint:{"background-color":o.water}}),re.jsxs(_d,{id:"world",type:"vector",url:"pmtiles:///world.pmtiles",children:[re.jsx(Hr,{"source-layer":"land",type:"fill",paint:{"fill-color":o.land}}),r,re.jsx(Hr,{"source-layer":"states",type:"line",paint:{"line-color":o.stateBorder,"line-width":1,"line-opacity":1,"line-dasharray":[2,2]}}),re.jsx(Hr,{"source-layer":"countries",type:"line",paint:{"line-color":o.countryBorder,"line-width":1,"line-opacity":1}}),re.jsx(Hr,{"source-layer":"lakes",type:"fill",paint:{"fill-color":o.water}})]})]})},$x=e=>(Bb(),re.jsx(_d,{type:"vector",url:`pmtiles:///${e.game}-contours.pmtiles`,children:re.jsx(Hr,{"source-layer":"contours",type:"fill",layout:{"fill-sort-key":["get","elevation"],visibility:e.showContours?"visible":"none"},paint:{"fill-color":["interpolate",["linear"],["get","elevation"],-200,"#77c571",0,"#77c571",100,"#afd35f",150,"#ece75b",200,"#decb4c",250,"#d2b446",300,"#bf9c4a",400,"#ba8839",500,"#ac792d"]}})}));function bn(e,t){if(e==null)throw new Error(t);return e}class Fz extends Error{constructor(t){super("unreachable value "+JSON.stringify(t))}}class Np{static checkArgument(t,r){if(!t)throw new Error(r)}static checkState(t,r){if(!t)throw new Error(r)}static checkExists(t,r){return bn(t,r)}}var Yn=(e=>(e[e.FuelStation=0]="FuelStation",e[e.Toll=1]="Toll",e[e.Parking=2]="Parking",e[e.RecruitmentAgency=3]="RecruitmentAgency",e[e.Service=4]="Service",e[e.TruckDealer=5]="TruckDealer",e[e.Port=6]="Port",e[e.Train=7]="Train",e[e.Viewpoint=8]="Viewpoint",e[e.PhotoSight=9]="PhotoSight",e[e.AgricultureCheck=10]="AgricultureCheck",e[e.BorderCheck=11]="BorderCheck",e[e.Garage=12]="Garage",e[e.WeighStation=13]="WeighStation",e[e.CityNames=14]="CityNames",e[e.Company=15]="Company",e[e.RoadNumber=16]="RoadNumber",e))(Yn||{});const jp=new Set(Array.from({length:17},(e,t)=>t)),Bx=e=>{const{game:t,visibleIcons:r=jp,enableIconAutoHide:o=!0,mode:l="light"}=e,d=t==="ats"?xk(t,e.dlcs??Fp):xk(t,e.dlcs??CU),f=Rb[l];return Bb(),re.jsxs(_d,{id:t,type:"vector",url:`pmtiles:///${t}.pmtiles`,children:[re.jsx(Hr,{id:t+"mapAreas","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"mapArea"],d],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":__(l),"fill-outline-color":["case",["==",["get","color"],gz.Road],f.mapAreaOutline,__(l)]}}),re.jsx(Hr,{id:t+"prefabs","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"prefab"],d],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":__(l)}}),re.jsx(Q9,{game:t,mode:l,color:f.footprint}),re.jsx(Hr,{id:t+"hidden-roads","source-layer":t,type:"line",minzoom:9,filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","hidden"],!0],d],paint:{"line-color":f.hiddenRoad,"line-width":1,"line-opacity":.7}}),re.jsx(Hr,{id:t+"visible-roads-case","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],d],layout:bk,paint:{"line-color":i7(l),"line-gap-width":wk,"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,14,2,16,3]}}),re.jsx(Hr,{id:t+"visible-roads","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],d],layout:bk,paint:{"line-color":n7(l),"line-width":wk}}),re.jsx(Hr,{id:t+"ferries","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],paint:{"line-color":f.ferryLine,"line-width":1,"line-opacity":.8,"line-dasharray":[2,2]}}),re.jsx(Hr,{id:t+"trains-a","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":f.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,-6]}}),re.jsx(Hr,{id:t+"trains-b","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":f.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,6]}}),re.jsx(Hr,{id:t+"train-hatch","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":f.trainLine,"line-width":10,"line-opacity":.8,"line-dasharray":[.1,1]}}),re.jsx(Hr,{id:t+"ferry-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],layout:{...ic,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":f.ferryHalo,"text-color":f.ferryLabel}}),re.jsx(Hr,{id:t+"train-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],layout:{...ic,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":f.trainHalo,"text-color":f.trainLabel}}),r.has(15)&&re.jsx(Hr,{id:t+"company-icons","source-layer":t,type:"symbol",minzoom:o?8:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"company"],d],layout:mu(o,1,1.25,3.5)}),t==="ets2"&&r.has(16)&&re.jsx(Hr,{id:"euro-road-overlays","source-layer":t,minzoom:o?4.5:0,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["!",["in",["get","sprite"],["literal",_k]]]],layout:mu(o,.4*1.25,.75*1.25,1.25*1.25)}),t==="ats"&&r.has(16)&&re.jsx(Hr,{id:t+"road-interstate-overlays","source-layer":t,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","is",["get","sprite"]],0],d],layout:mu(o,.4,.75,1.25)}),t==="ats"&&r.has(16)&&re.jsx(Hr,{id:t+"road-us-route-overlays","source-layer":t,type:"symbol",minzoom:o?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","us",["get","sprite"]],0],d],layout:mu(o,.4,.75,1.25)}),t==="ats"&&r.has(16)&&re.jsx(Hr,{id:t+"road-state-route-overlays","source-layer":t,type:"symbol",minzoom:o?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],d,["!",["any",["==",["index-of","is",["get","sprite"]],0],["==",["index-of","us",["get","sprite"]],0],["in",["get","sprite"],["literal",_k]]]]],layout:mu(o,.4,.75,1.25)}),r.has(14)&&re.jsx(Hr,{id:t+"city-labels-small","source-layer":t,type:"symbol",minzoom:o?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],[">",["get","scaleRank"],6],d],layout:{...ic,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Xh,"text-size":12,"icon-image":v_,"icon-allow-overlap":!o,"icon-size":.6},paint:f.baseTextPaint}),r.has(14)&&re.jsx(Hr,{id:t+"city-labels-medium","source-layer":t,type:"symbol",minzoom:o?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],6],[">",["get","scaleRank"],3],d],layout:{...ic,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Xh,"text-size":13,"icon-image":v_,"icon-allow-overlap":!o,"icon-size":.6},paint:f.baseTextPaint}),r.has(14)&&re.jsx(Hr,{id:t+"city-labels-big","source-layer":t,type:"symbol",minzoom:o?4:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],3],d],layout:{...ic,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Xh,"text-size":14,"icon-image":v_,"icon-allow-overlap":!o,"icon-size":.8},paint:f.baseTextPaint}),t==="ets2"&&r.has(14)&&re.jsx(Hr,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...ic,"text-font":["Klokantech Noto Sans Bold"],"text-field":"{name}","text-variable-anchor":Xh,"text-size":14},paint:f.baseTextPaint}),Nz(r)&&re.jsx(Hr,{id:t+"poi-icons","source-layer":t,type:"symbol",minzoom:o?7:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],t7(r),d],layout:mu(o,.6,1.25,2.5,{vertical:2,horizontal:2})})]})},Q9=({game:e,color:t,mode:r})=>re.jsxs(_d,{id:e+"footprints",type:"vector",url:`pmtiles:///${e}-footprints.pmtiles`,children:[re.jsx(Hr,{id:e+"footprints","source-layer":"footprints",type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-color":t,"fill-opacity":["step",["zoom"],1,9,.8]}}),re.jsx(Hr,{id:e+"extrusions",minzoom:9,"source-layer":"footprints",type:"fill-extrusion",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-extrusion-color":t,"fill-extrusion-height":["interpolate",["exponential",1.5],["zoom"],9,["*",10,["get","height"]],13,["*",20,["get","height"]]],"fill-extrusion-opacity":r==="light"?.33:.67}})]});function mu(e,t,r,o,l={vertical:10,horizontal:30}){const d=["literal",[l.vertical,l.horizontal]];return{"icon-image":"{sprite}","icon-allow-overlap":!e,"icon-padding":d,"icon-size":["interpolate",["exponential",1.5],["zoom"],4,t,9,r,13,o]}}const v_=["step",["zoom"],["case",["==",["get","capital"],2],"dotdot","dot"],8,""],e7=[9,8,6,7,2,0,4,5,12,3,13,1,10,11],_k=["weigh_ico","toll_ico","agri_check","border_ico"];function Nz(e){return e7.some(t=>e.has(t))}function t7(e){Np.checkArgument(Nz(e));const t=[];e.has(9)&&t.push("landmark"),e.has(8)&&t.push("viewpoint"),e.has(6)&&t.push("ferry"),e.has(7)&&t.push("train");const r=[];e.has(0)&&r.push("gas_ico"),e.has(4)&&r.push("service_ico"),e.has(13)&&r.push("weigh_station_ico"),e.has(5)&&r.push("dealer_ico"),e.has(12)&&r.push("garage_large_ico"),e.has(3)&&r.push("recruitment_ico"),e.has(2)&&r.push("parking_ico");const o=[];e.has(13)&&o.push("weigh_ico"),e.has(1)&&o.push("toll_ico"),e.has(10)&&o.push("agri_check"),e.has(11)&&o.push("border_ico");const l=t.length>0?["in",["get","poiType"],["literal",t]]:!1,d=r.length>0?["all",["==",["get","poiType"],"facility"],["in",["get","sprite"],["literal",r]]]:!1,f=o.length>0?["all",["==",["get","poiType"],"road"],["in",["get","sprite"],["literal",o]]]:!1;return["any",l,d,f]}function xk(e,t){if(e!=="ats")return["boolean",!0];const r=mz(t);return["in",["get","dlcGuard"],["literal",[...r]]]}const Xh=["step",["zoom"],["literal",["top","bottom","right","left"]],7,["literal",["center"]]],ic={"text-radial-offset":.5,"text-justify":"auto","text-font":["Klokantech Noto Sans Regular"]},bk={"line-cap":"round","line-join":"bevel"},wk=["interpolate",["exponential",1.5],["zoom"],3,.8,14,30,16,150],jz={light:{freeway:["#fde293","#f8c248"],divided:["#ffffff","#dddddd"],no_vehicles:["#aaaaaa","#888888"],local:["#f1f3f4","#dddddd"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]},dark:{freeway:["#95813e","#372f21"],divided:["#3c4043","#4c5043"],no_vehicles:["#606166","#888888"],local:["#606166","#333"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]}},r7={light:{0:"hsl(200, 8%, 92%)",1:"hsl(38, 59%, 76%)",2:"hsl(38, 64%, 58%)",3:"hsl(92, 31%, 70%)"},dark:{0:"hsl(200, 2%, 36%)",1:"hsl(38, 25%, 35%)",2:"hsl(38, 25%, 25%)",3:"hsl(143, 20%, 25%)"}},n7=e=>["match",["get","roadType"],...Object.entries(jz[e]).flatMap(([t,[r]])=>[t,r]),"#f0f"],i7=e=>["match",["get","roadType"],...Object.entries(jz[e]).flatMap(([t,[r,o]])=>[t,o]),"#b0b"],__=e=>["match",["get","color"],...Object.entries(r7[e]).flatMap(([t,r])=>[Number(t),r]),"#b0b"],Vz="https://raw.githubusercontent.com/nautofon/ats-towns/nebraska/all-towns.geojson",Uz="/ets2-villages.geojson";var Ni=(e=>(e.AZ="AZ",e.CA="CA",e.CO="CO",e.ID="ID",e.KS="KS",e.MT="MT",e.NE="NE",e.NM="NM",e.NV="NV",e.OK="OK",e.OR="OR",e.TX="TX",e.UT="UT",e.WA="WA",e.WY="WY",e))(Ni||{});const o7={AZ:void 0,CA:void 0,CO:void 0,ID:void 0,KS:void 0,MT:void 0,NE:void 0,NM:void 0,NV:void 0,OK:void 0,OR:void 0,TX:void 0,UT:void 0,WA:void 0,WY:void 0},a7=new Set(Object.keys(o7)),Ox=e=>{const{game:t,enableAutoHide:r=!0,mode:o="light"}=e,l=t==="ats"?Vz:Uz,d=t==="ats"?["in",["get","state"],["literal",[...e.enabledStates??a7]]]:["boolean",!0],f=Rb[o];return re.jsx(_d,{id:`${t}-scenery-towns`,type:"geojson",data:l,children:re.jsx(Hr,{id:`${t}-scenery-towns`,type:"symbol",minzoom:r?7:0,filter:d,layout:{...ic,"text-field":"{name}","text-allow-overlap":!r,"text-variable-anchor":Xh,"text-size":10.5},paint:f.baseTextPaint})})},Hz={version:8,sprite:"https://truckermudgeon.github.io/sprites",glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[]};function hl(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Wz(e){if(!hl(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=Wz(e[r])}),t}function ns(e,t,r={clone:!0}){const o=r.clone?q({},e):e;return hl(e)&&hl(t)&&Object.keys(t).forEach(l=>{l!=="__proto__"&&(hl(t[l])&&l in e&&hl(e[l])?o[l]=ns(e[l],t[l],r):r.clone?o[l]=hl(t[l])?Wz(t[l]):t[l]:o[l]=t[l])}),o}const s7=Object.freeze(Object.defineProperty({__proto__:null,default:ns,isPlainObject:hl},Symbol.toStringTag,{value:"Module"}));function Vp(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const l7=Object.freeze(Object.defineProperty({__proto__:null,default:Vp},Symbol.toStringTag,{value:"Module"})),c7=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function Gz(e){const t=`${e}`.match(c7);return t&&t[1]||""}function qz(e,t=""){return e.displayName||e.name||Gz(e)||t}function Sk(e,t,r){const o=qz(t);return e.displayName||(o!==""?`${r}(${o})`:r)}function u7(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return qz(e,"Component");if(typeof e=="object")switch(e.$$typeof){case US.ForwardRef:return Sk(e,e.render,"ForwardRef");case US.Memo:return Sk(e,e.type,"memo");default:return}}}const d7=Object.freeze(Object.defineProperty({__proto__:null,default:u7,getFunctionName:Gz},Symbol.toStringTag,{value:"Module"}));function wc(e){if(typeof e!="string")throw new Error(Vp(7));return e.charAt(0).toUpperCase()+e.slice(1)}const h7=Object.freeze(Object.defineProperty({__proto__:null,default:wc},Symbol.toStringTag,{value:"Module"}));function Zz(e,t){const r=q({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))r[o]=q({},e[o],r[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const l=e[o]||{},d=t[o];r[o]={},!d||!Object.keys(d)?r[o]=l:!l||!Object.keys(l)?r[o]=d:(r[o]=q({},d),Object.keys(l).forEach(f=>{r[o][f]=Zz(l[f],d[f])}))}else r[o]===void 0&&(r[o]=e[o])}),r}function p7(e,t,r=void 0){const o={};return Object.keys(e).forEach(l=>{o[l]=e[l].reduce((d,f)=>{if(f){const c=t(f);c!==""&&d.push(c),r&&r[f]&&d.push(r[f])}return d},[]).join(" ")}),o}const Ck=e=>e,f7=()=>{let e=Ck;return{configure(t){e=t},generate(t){return e(t)},reset(){e=Ck}}},m7=f7(),g7={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Kz(e,t,r="Mui"){const o=g7[t];return o?`${r}-${o}`:`${m7.generate(e)}-${t}`}function y7(e,t,r="Mui"){const o={};return t.forEach(l=>{o[l]=Kz(e,l,r)}),o}function v7(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}const _7=Object.freeze(Object.defineProperty({__proto__:null,default:v7},Symbol.toStringTag,{value:"Module"}));function x7(e){const{theme:t,name:r,props:o}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?o:Zz(t.components[r].defaultProps,o)}const b7=["values","unit","step"],w7=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,o)=>r.val-o.val),t.reduce((r,o)=>q({},r,{[o.key]:o.val}),{})};function Xz(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:o=5}=e,l=Ut(e,b7),d=w7(t),f=Object.keys(d);function c(P){return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${r})`}function b(P){return`@media (max-width:${(typeof t[P]=="number"?t[P]:P)-o/100}${r})`}function w(P,V){const U=f.indexOf(V);return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${r}) and (max-width:${(U!==-1&&typeof t[f[U]]=="number"?t[f[U]]:V)-o/100}${r})`}function k(P){return f.indexOf(P)+1<f.length?w(P,f[f.indexOf(P)+1]):c(P)}function z(P){const V=f.indexOf(P);return V===0?c(f[1]):V===f.length-1?b(f[V]):w(P,f[f.indexOf(P)+1]).replace("@media","@media not all and")}return q({keys:f,values:d,up:c,down:b,between:w,only:k,not:z,unit:r},l)}const S7={borderRadius:4},C7=S7;function hp(e,t){return t?ns(e,t,{clone:!1}):e}const Ob={xs:0,sm:600,md:900,lg:1200,xl:1536},kk={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Ob[e]}px)`};function Ls(e,t,r){const o=e.theme||{};if(Array.isArray(t)){const d=o.breakpoints||kk;return t.reduce((f,c,b)=>(f[d.up(d.keys[b])]=r(t[b]),f),{})}if(typeof t=="object"){const d=o.breakpoints||kk;return Object.keys(t).reduce((f,c)=>{if(Object.keys(d.values||Ob).indexOf(c)!==-1){const b=d.up(c);f[b]=r(t[c],c)}else{const b=c;f[b]=t[b]}return f},{})}return r(t)}function k7(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,l)=>{const d=e.up(l);return o[d]={},o},{}))||{}}function I7(e,t){return e.reduce((r,o)=>{const l=r[o];return(!l||Object.keys(l).length===0)&&delete r[o],r},t)}function mv(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const o=`vars.${t}`.split(".").reduce((l,d)=>l&&l[d]?l[d]:null,e);if(o!=null)return o}return t.split(".").reduce((o,l)=>o&&o[l]!=null?o[l]:null,e)}function Kg(e,t,r,o=r){let l;return typeof e=="function"?l=e(r):Array.isArray(e)?l=e[r]||o:l=mv(e,r)||o,t&&(l=t(l,o,e)),l}function Xn(e){const{prop:t,cssProperty:r=e.prop,themeKey:o,transform:l}=e,d=f=>{if(f[t]==null)return null;const c=f[t],b=f.theme,w=mv(b,o)||{};return Ls(f,c,z=>{let P=Kg(w,l,z);return z===P&&typeof z=="string"&&(P=Kg(w,l,`${t}${z==="default"?"":wc(z)}`,z)),r===!1?P:{[r]:P}})};return d.propTypes={},d.filterProps=[t],d}function T7(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const P7={m:"margin",p:"padding"},E7={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Ik={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},z7=T7(e=>{if(e.length>2)if(Ik[e])e=Ik[e];else return[e];const[t,r]=e.split(""),o=P7[t],l=E7[r]||"";return Array.isArray(l)?l.map(d=>o+d):[o+l]}),Fb=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Nb=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Fb,...Nb];function df(e,t,r,o){var l;const d=(l=mv(e,t,!1))!=null?l:r;return typeof d=="number"?f=>typeof f=="string"?f:d*f:Array.isArray(d)?f=>typeof f=="string"?f:d[f]:typeof d=="function"?d:()=>{}}function Jz(e){return df(e,"spacing",8)}function hf(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),o=e(r);return t>=0?o:typeof o=="number"?-o:`-${o}`}function M7(e,t){return r=>e.reduce((o,l)=>(o[l]=hf(t,r),o),{})}function A7(e,t,r,o){if(t.indexOf(r)===-1)return null;const l=z7(r),d=M7(l,o),f=e[r];return Ls(e,f,d)}function Yz(e,t){const r=Jz(e.theme);return Object.keys(e).map(o=>A7(e,t,o,r)).reduce(hp,{})}function $n(e){return Yz(e,Fb)}$n.propTypes={};$n.filterProps=Fb;function Bn(e){return Yz(e,Nb)}Bn.propTypes={};Bn.filterProps=Nb;function D7(e=8){if(e.mui)return e;const t=Jz({spacing:e}),r=(...o)=>(o.length===0?[1]:o).map(d=>{const f=t(d);return typeof f=="number"?`${f}px`:f}).join(" ");return r.mui=!0,r}function gv(...e){const t=e.reduce((o,l)=>(l.filterProps.forEach(d=>{o[d]=l}),o),{}),r=o=>Object.keys(o).reduce((l,d)=>t[d]?hp(l,t[d](o)):l,{});return r.propTypes={},r.filterProps=e.reduce((o,l)=>o.concat(l.filterProps),[]),r}function na(e){return typeof e!="number"?e:`${e}px solid`}function ma(e,t){return Xn({prop:e,themeKey:"borders",transform:t})}const R7=ma("border",na),L7=ma("borderTop",na),$7=ma("borderRight",na),B7=ma("borderBottom",na),O7=ma("borderLeft",na),F7=ma("borderColor"),N7=ma("borderTopColor"),j7=ma("borderRightColor"),V7=ma("borderBottomColor"),U7=ma("borderLeftColor"),H7=ma("outline",na),W7=ma("outlineColor"),yv=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=df(e.theme,"shape.borderRadius",4),r=o=>({borderRadius:hf(t,o)});return Ls(e,e.borderRadius,r)}return null};yv.propTypes={};yv.filterProps=["borderRadius"];gv(R7,L7,$7,B7,O7,F7,N7,j7,V7,U7,yv,H7,W7);const vv=e=>{if(e.gap!==void 0&&e.gap!==null){const t=df(e.theme,"spacing",8),r=o=>({gap:hf(t,o)});return Ls(e,e.gap,r)}return null};vv.propTypes={};vv.filterProps=["gap"];const _v=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=df(e.theme,"spacing",8),r=o=>({columnGap:hf(t,o)});return Ls(e,e.columnGap,r)}return null};_v.propTypes={};_v.filterProps=["columnGap"];const xv=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=df(e.theme,"spacing",8),r=o=>({rowGap:hf(t,o)});return Ls(e,e.rowGap,r)}return null};xv.propTypes={};xv.filterProps=["rowGap"];const G7=Xn({prop:"gridColumn"}),q7=Xn({prop:"gridRow"}),Z7=Xn({prop:"gridAutoFlow"}),K7=Xn({prop:"gridAutoColumns"}),X7=Xn({prop:"gridAutoRows"}),J7=Xn({prop:"gridTemplateColumns"}),Y7=Xn({prop:"gridTemplateRows"}),Q7=Xn({prop:"gridTemplateAreas"}),eH=Xn({prop:"gridArea"});gv(vv,_v,xv,G7,q7,Z7,K7,X7,J7,Y7,Q7,eH);function Gu(e,t){return t==="grey"?t:e}const tH=Xn({prop:"color",themeKey:"palette",transform:Gu}),rH=Xn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Gu}),nH=Xn({prop:"backgroundColor",themeKey:"palette",transform:Gu});gv(tH,rH,nH);function Ro(e){return e<=1&&e!==0?`${e*100}%`:e}const iH=Xn({prop:"width",transform:Ro}),jb=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var o,l;const d=((o=e.theme)==null||(o=o.breakpoints)==null||(o=o.values)==null?void 0:o[r])||Ob[r];return d?((l=e.theme)==null||(l=l.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${d}${e.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:Ro(r)}};return Ls(e,e.maxWidth,t)}return null};jb.filterProps=["maxWidth"];const oH=Xn({prop:"minWidth",transform:Ro}),aH=Xn({prop:"height",transform:Ro}),sH=Xn({prop:"maxHeight",transform:Ro}),lH=Xn({prop:"minHeight",transform:Ro});Xn({prop:"size",cssProperty:"width",transform:Ro});Xn({prop:"size",cssProperty:"height",transform:Ro});const cH=Xn({prop:"boxSizing"});gv(iH,jb,oH,aH,sH,lH,cH);const uH={border:{themeKey:"borders",transform:na},borderTop:{themeKey:"borders",transform:na},borderRight:{themeKey:"borders",transform:na},borderBottom:{themeKey:"borders",transform:na},borderLeft:{themeKey:"borders",transform:na},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:na},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:yv},color:{themeKey:"palette",transform:Gu},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Gu},backgroundColor:{themeKey:"palette",transform:Gu},p:{style:Bn},pt:{style:Bn},pr:{style:Bn},pb:{style:Bn},pl:{style:Bn},px:{style:Bn},py:{style:Bn},padding:{style:Bn},paddingTop:{style:Bn},paddingRight:{style:Bn},paddingBottom:{style:Bn},paddingLeft:{style:Bn},paddingX:{style:Bn},paddingY:{style:Bn},paddingInline:{style:Bn},paddingInlineStart:{style:Bn},paddingInlineEnd:{style:Bn},paddingBlock:{style:Bn},paddingBlockStart:{style:Bn},paddingBlockEnd:{style:Bn},m:{style:$n},mt:{style:$n},mr:{style:$n},mb:{style:$n},ml:{style:$n},mx:{style:$n},my:{style:$n},margin:{style:$n},marginTop:{style:$n},marginRight:{style:$n},marginBottom:{style:$n},marginLeft:{style:$n},marginX:{style:$n},marginY:{style:$n},marginInline:{style:$n},marginInlineStart:{style:$n},marginInlineEnd:{style:$n},marginBlock:{style:$n},marginBlockStart:{style:$n},marginBlockEnd:{style:$n},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:vv},rowGap:{style:xv},columnGap:{style:_v},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ro},maxWidth:{style:jb},minWidth:{transform:Ro},height:{transform:Ro},maxHeight:{transform:Ro},minHeight:{transform:Ro},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},pf=uH;function dH(...e){const t=e.reduce((o,l)=>o.concat(Object.keys(l)),[]),r=new Set(t);return e.every(o=>r.size===Object.keys(o).length)}function hH(e,t){return typeof e=="function"?e(t):e}function Qz(){function e(r,o,l,d){const f={[r]:o,theme:l},c=d[r];if(!c)return{[r]:o};const{cssProperty:b=r,themeKey:w,transform:k,style:z}=c;if(o==null)return null;if(w==="typography"&&o==="inherit")return{[r]:o};const P=mv(l,w)||{};return z?z(f):Ls(f,o,U=>{let H=Kg(P,k,U);return U===H&&typeof U=="string"&&(H=Kg(P,k,`${r}${U==="default"?"":wc(U)}`,U)),b===!1?H:{[b]:H}})}function t(r){var o;const{sx:l,theme:d={}}=r||{};if(!l)return null;const f=(o=d.unstable_sxConfig)!=null?o:pf;function c(b){let w=b;if(typeof b=="function")w=b(d);else if(typeof b!="object")return b;if(!w)return null;const k=k7(d.breakpoints),z=Object.keys(k);let P=k;return Object.keys(w).forEach(V=>{const U=hH(w[V],d);if(U!=null)if(typeof U=="object")if(f[V])P=hp(P,e(V,U,d,f));else{const H=Ls({theme:d},U,X=>({[V]:X}));dH(H,U)?P[V]=t({sx:U,theme:d}):P=hp(P,H)}else P=hp(P,e(V,U,d,f))}),I7(z,P)}return Array.isArray(l)?l.map(c):c(l)}return t}const bv=Qz();bv.filterProps=["sx"];function eM(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const pH=["breakpoints","palette","spacing","shape"];function Vb(e={},...t){const{breakpoints:r={},palette:o={},spacing:l,shape:d={}}=e,f=Ut(e,pH),c=Xz(r),b=D7(l);let w=ns({breakpoints:c,direction:"ltr",components:{},palette:q({mode:"light"},o),spacing:b,shape:q({},C7,d)},f);return w.applyStyles=eM,w=t.reduce((k,z)=>ns(k,z),w),w.unstable_sxConfig=q({},pf,f==null?void 0:f.unstable_sxConfig),w.unstable_sx=function(z){return bv({sx:z,theme:this})},w}const fH=Object.freeze(Object.defineProperty({__proto__:null,default:Vb,private_createBreakpoints:Xz,unstable_applyStyles:eM},Symbol.toStringTag,{value:"Module"}));let Fx;typeof document=="object"&&(Fx=hI({key:"css",prepend:!0}));function mH(e){const{injectFirst:t,children:r}=e;return t&&Fx?re.jsx(PR,{value:Fx,children:r}):r}function gH(e){return e==null||Object.keys(e).length===0}function yH(e){const{styles:t,defaultTheme:r={}}=e,o=typeof t=="function"?l=>t(gH(l)?r:l):t;return re.jsx(SI,{styles:o})}function vH(e,t){return fg(e,t)}const _H=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},xH=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:yH,StyledEngineProvider:mH,ThemeContext:dd,css:n1,default:vH,internal_processStyles:_H,keyframes:CI},Symbol.toStringTag,{value:"Module"}));function bH(e){return Object.keys(e).length===0}function wH(e=null){const t=R.useContext(dd);return!t||bH(t)?e:t}const SH=Vb();function CH(e=SH){return wH(e)}function kH({props:e,name:t,defaultTheme:r,themeId:o}){let l=CH(r);return o&&(l=l[o]||l),x7({theme:l,name:t,props:e})}const IH=["sx"],TH=e=>{var t,r;const o={systemProps:{},otherProps:{}},l=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:pf;return Object.keys(e).forEach(d=>{l[d]?o.systemProps[d]=e[d]:o.otherProps[d]=e[d]}),o};function PH(e){const{sx:t}=e,r=Ut(e,IH),{systemProps:o,otherProps:l}=TH(r);let d;return Array.isArray(t)?d=[o,...t]:typeof t=="function"?d=(...f)=>{const c=t(...f);return hl(c)?q({},o,c):o}:d=q({},o,t),q({},l,{sx:d})}const EH=Object.freeze(Object.defineProperty({__proto__:null,default:bv,extendSxProp:PH,unstable_createStyleFunctionSx:Qz,unstable_defaultSxConfig:pf},Symbol.toStringTag,{value:"Module"}));function zH(e,t){return q({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Jn={},tM={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(tM);var rM=tM.exports;const MH=$s(l7),AH=$s(_7);var nM=rM;Object.defineProperty(Jn,"__esModule",{value:!0});Jn.alpha=sM;Jn.blend=WH;Jn.colorChannel=void 0;var DH=Jn.darken=Hb;Jn.decomposeColor=ha;Jn.emphasize=lM;var RH=Jn.getContrastRatio=NH;Jn.getLuminance=Xg;Jn.hexToRgb=iM;Jn.hslToRgb=aM;var LH=Jn.lighten=Wb;Jn.private_safeAlpha=jH;Jn.private_safeColorChannel=void 0;Jn.private_safeDarken=VH;Jn.private_safeEmphasize=HH;Jn.private_safeLighten=UH;Jn.recomposeColor=xd;Jn.rgbToHex=FH;var Tk=nM(MH),$H=nM(AH);function Ub(e,t=0,r=1){return(0,$H.default)(e,t,r)}function iM(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,l)=>l<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function BH(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function ha(e){if(e.type)return e;if(e.charAt(0)==="#")return ha(iM(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error((0,Tk.default)(9,e));let o=e.substring(t+1,e.length-1),l;if(r==="color"){if(o=o.split(" "),l=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(l)===-1)throw new Error((0,Tk.default)(10,l))}else o=o.split(",");return o=o.map(d=>parseFloat(d)),{type:r,values:o,colorSpace:l}}const oM=e=>{const t=ha(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};Jn.colorChannel=oM;const OH=(e,t)=>{try{return oM(e)}catch{return e}};Jn.private_safeColorChannel=OH;function xd(e){const{type:t,colorSpace:r}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((l,d)=>d<3?parseInt(l,10):l):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${r} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function FH(e){if(e.indexOf("#")===0)return e;const{values:t}=ha(e);return`#${t.map((r,o)=>BH(o===3?Math.round(255*r):r)).join("")}`}function aM(e){e=ha(e);const{values:t}=e,r=t[0],o=t[1]/100,l=t[2]/100,d=o*Math.min(l,1-l),f=(w,k=(w+r/30)%12)=>l-d*Math.max(Math.min(k-3,9-k,1),-1);let c="rgb";const b=[Math.round(f(0)*255),Math.round(f(8)*255),Math.round(f(4)*255)];return e.type==="hsla"&&(c+="a",b.push(t[3])),xd({type:c,values:b})}function Xg(e){e=ha(e);let t=e.type==="hsl"||e.type==="hsla"?ha(aM(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function NH(e,t){const r=Xg(e),o=Xg(t);return(Math.max(r,o)+.05)/(Math.min(r,o)+.05)}function sM(e,t){return e=ha(e),t=Ub(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,xd(e)}function jH(e,t,r){try{return sM(e,t)}catch{return e}}function Hb(e,t){if(e=ha(e),t=Ub(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return xd(e)}function VH(e,t,r){try{return Hb(e,t)}catch{return e}}function Wb(e,t){if(e=ha(e),t=Ub(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return xd(e)}function UH(e,t,r){try{return Wb(e,t)}catch{return e}}function lM(e,t=.15){return Xg(e)>.5?Hb(e,t):Wb(e,t)}function HH(e,t,r){try{return lM(e,t)}catch{return e}}function WH(e,t,r,o=1){const l=(b,w)=>Math.round((b**(1/o)*(1-r)+w**(1/o)*r)**o),d=ha(e),f=ha(t),c=[l(d.values[0],f.values[0]),l(d.values[1],f.values[1]),l(d.values[2],f.values[2])];return xd({type:"rgb",values:c})}const GH={black:"#000",white:"#fff"},Up=GH,qH={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},ZH=qH,KH={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},gu=KH,XH={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},yu=XH,JH={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Wh=JH,YH={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},vu=YH,QH={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},_u=QH,eW={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},xu=eW,tW=["mode","contrastThreshold","tonalOffset"],Pk={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Up.white,default:Up.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},x_={text:{primary:Up.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Up.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Ek(e,t,r,o){const l=o.light||o,d=o.dark||o*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=LH(e.main,l):t==="dark"&&(e.dark=DH(e.main,d)))}function rW(e="light"){return e==="dark"?{main:vu[200],light:vu[50],dark:vu[400]}:{main:vu[700],light:vu[400],dark:vu[800]}}function nW(e="light"){return e==="dark"?{main:gu[200],light:gu[50],dark:gu[400]}:{main:gu[500],light:gu[300],dark:gu[700]}}function iW(e="light"){return e==="dark"?{main:yu[500],light:yu[300],dark:yu[700]}:{main:yu[700],light:yu[400],dark:yu[800]}}function oW(e="light"){return e==="dark"?{main:_u[400],light:_u[300],dark:_u[700]}:{main:_u[700],light:_u[500],dark:_u[900]}}function aW(e="light"){return e==="dark"?{main:xu[400],light:xu[300],dark:xu[700]}:{main:xu[800],light:xu[500],dark:xu[900]}}function sW(e="light"){return e==="dark"?{main:Wh[400],light:Wh[300],dark:Wh[700]}:{main:"#ed6c02",light:Wh[500],dark:Wh[900]}}function lW(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:o=.2}=e,l=Ut(e,tW),d=e.primary||rW(t),f=e.secondary||nW(t),c=e.error||iW(t),b=e.info||oW(t),w=e.success||aW(t),k=e.warning||sW(t);function z(H){return RH(H,x_.text.primary)>=r?x_.text.primary:Pk.text.primary}const P=({color:H,name:X,mainShade:B=500,lightShade:L=300,darkShade:G=700})=>{if(H=q({},H),!H.main&&H[B]&&(H.main=H[B]),!H.hasOwnProperty("main"))throw new Error(Vp(11,X?` (${X})`:"",B));if(typeof H.main!="string")throw new Error(Vp(12,X?` (${X})`:"",JSON.stringify(H.main)));return Ek(H,"light",L,o),Ek(H,"dark",G,o),H.contrastText||(H.contrastText=z(H.main)),H},V={dark:x_,light:Pk};return ns(q({common:q({},Up),mode:t,primary:P({color:d,name:"primary"}),secondary:P({color:f,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:P({color:c,name:"error"}),warning:P({color:k,name:"warning"}),info:P({color:b,name:"info"}),success:P({color:w,name:"success"}),grey:ZH,contrastThreshold:r,getContrastText:z,augmentColor:P,tonalOffset:o},V[t]),l)}const cW=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function uW(e){return Math.round(e*1e5)/1e5}const zk={textTransform:"uppercase"},Mk='"Roboto", "Helvetica", "Arial", sans-serif';function dW(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:o=Mk,fontSize:l=14,fontWeightLight:d=300,fontWeightRegular:f=400,fontWeightMedium:c=500,fontWeightBold:b=700,htmlFontSize:w=16,allVariants:k,pxToRem:z}=r,P=Ut(r,cW),V=l/14,U=z||(B=>`${B/w*V}rem`),H=(B,L,G,te,ne)=>q({fontFamily:o,fontWeight:B,fontSize:U(L),lineHeight:G},o===Mk?{letterSpacing:`${uW(te/L)}em`}:{},ne,k),X={h1:H(d,96,1.167,-1.5),h2:H(d,60,1.2,-.5),h3:H(f,48,1.167,0),h4:H(f,34,1.235,.25),h5:H(f,24,1.334,0),h6:H(c,20,1.6,.15),subtitle1:H(f,16,1.75,.15),subtitle2:H(c,14,1.57,.1),body1:H(f,16,1.5,.15),body2:H(f,14,1.43,.15),button:H(c,14,1.75,.4,zk),caption:H(f,12,1.66,.4),overline:H(f,12,2.66,1,zk),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return ns(q({htmlFontSize:w,pxToRem:U,fontFamily:o,fontSize:l,fontWeightLight:d,fontWeightRegular:f,fontWeightMedium:c,fontWeightBold:b},X),P,{clone:!1})}const hW=.2,pW=.14,fW=.12;function xn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${hW})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${pW})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${fW})`].join(",")}const mW=["none",xn(0,2,1,-1,0,1,1,0,0,1,3,0),xn(0,3,1,-2,0,2,2,0,0,1,5,0),xn(0,3,3,-2,0,3,4,0,0,1,8,0),xn(0,2,4,-1,0,4,5,0,0,1,10,0),xn(0,3,5,-1,0,5,8,0,0,1,14,0),xn(0,3,5,-1,0,6,10,0,0,1,18,0),xn(0,4,5,-2,0,7,10,1,0,2,16,1),xn(0,5,5,-3,0,8,10,1,0,3,14,2),xn(0,5,6,-3,0,9,12,1,0,3,16,2),xn(0,6,6,-3,0,10,14,1,0,4,18,3),xn(0,6,7,-4,0,11,15,1,0,4,20,3),xn(0,7,8,-4,0,12,17,2,0,5,22,4),xn(0,7,8,-4,0,13,19,2,0,5,24,4),xn(0,7,9,-4,0,14,21,2,0,5,26,4),xn(0,8,9,-5,0,15,22,2,0,6,28,5),xn(0,8,10,-5,0,16,24,2,0,6,30,5),xn(0,8,11,-5,0,17,26,2,0,6,32,5),xn(0,9,11,-5,0,18,28,2,0,7,34,6),xn(0,9,12,-6,0,19,29,2,0,7,36,6),xn(0,10,13,-6,0,20,31,3,0,8,38,7),xn(0,10,13,-6,0,21,33,3,0,8,40,7),xn(0,10,14,-6,0,22,35,3,0,8,42,7),xn(0,11,14,-7,0,23,36,3,0,9,44,8),xn(0,11,15,-7,0,24,38,3,0,9,46,8)],gW=["duration","easing","delay"],yW={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},vW={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Ak(e){return`${Math.round(e)}ms`}function _W(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function xW(e){const t=q({},yW,e.easing),r=q({},vW,e.duration);return q({getAutoHeightDuration:_W,create:(l=["all"],d={})=>{const{duration:f=r.standard,easing:c=t.easeInOut,delay:b=0}=d;return Ut(d,gW),(Array.isArray(l)?l:[l]).map(w=>`${w} ${typeof f=="string"?f:Ak(f)} ${c} ${typeof b=="string"?b:Ak(b)}`).join(",")}},e,{easing:t,duration:r})}const bW={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},wW=bW,SW=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function CW(e={},...t){const{mixins:r={},palette:o={},transitions:l={},typography:d={}}=e,f=Ut(e,SW);if(e.vars)throw new Error(Vp(18));const c=lW(o),b=Vb(e);let w=ns(b,{mixins:zH(b.breakpoints,r),palette:c,shadows:mW.slice(),typography:dW(c,d),transitions:xW(l),zIndex:q({},wW)});return w=ns(w,f),w=t.reduce((k,z)=>ns(k,z),w),w.unstable_sxConfig=q({},pf,f==null?void 0:f.unstable_sxConfig),w.unstable_sx=function(z){return bv({sx:z,theme:this})},w}const kW=CW(),cM=kW,uM="$$material";function IW({props:e,name:t}){return kH({props:e,name:t,defaultTheme:cM,themeId:uM})}var ff={};const TW=$s(RD);var b_={exports:{}},Dk;function PW(){return Dk||(Dk=1,function(e){function t(r,o){if(r==null)return{};var l={},d=Object.keys(r),f,c;for(c=0;c<d.length;c++)f=d[c],!(o.indexOf(f)>=0)&&(l[f]=r[f]);return l}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(b_)),b_.exports}const EW=$s(xH),zW=$s(s7),MW=$s(h7),AW=$s(d7),DW=$s(fH),RW=$s(EH);var bd=rM;Object.defineProperty(ff,"__esModule",{value:!0});var LW=ff.default=ZW;ff.shouldForwardProp=cg;ff.systemDefaultTheme=void 0;var Yo=bd(TW),Nx=bd(PW()),Rk=VW(EW),$W=zW;bd(MW);bd(AW);var BW=bd(DW),OW=bd(RW);const FW=["ownerState"],NW=["variants"],jW=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function dM(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(dM=function(o){return o?r:t})(e)}function VW(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=dM(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var f=l?Object.getOwnPropertyDescriptor(e,d):null;f&&(f.get||f.set)?Object.defineProperty(o,d,f):o[d]=e[d]}return o.default=e,r&&r.set(e,o),o}function UW(e){return Object.keys(e).length===0}function HW(e){return typeof e=="string"&&e.charCodeAt(0)>96}function cg(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const WW=ff.systemDefaultTheme=(0,BW.default)(),GW=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Hm({defaultTheme:e,theme:t,themeId:r}){return UW(t)?e:t[r]||t}function qW(e){return e?(t,r)=>r[e]:null}function ug(e,t){let{ownerState:r}=t,o=(0,Nx.default)(t,FW);const l=typeof e=="function"?e((0,Yo.default)({ownerState:r},o)):e;if(Array.isArray(l))return l.flatMap(d=>ug(d,(0,Yo.default)({ownerState:r},o)));if(l&&typeof l=="object"&&Array.isArray(l.variants)){const{variants:d=[]}=l;let c=(0,Nx.default)(l,NW);return d.forEach(b=>{let w=!0;typeof b.props=="function"?w=b.props((0,Yo.default)({ownerState:r},o,r)):Object.keys(b.props).forEach(k=>{(r==null?void 0:r[k])!==b.props[k]&&o[k]!==b.props[k]&&(w=!1)}),w&&(Array.isArray(c)||(c=[c]),c.push(typeof b.style=="function"?b.style((0,Yo.default)({ownerState:r},o,r)):b.style))}),c}return l}function ZW(e={}){const{themeId:t,defaultTheme:r=WW,rootShouldForwardProp:o=cg,slotShouldForwardProp:l=cg}=e,d=f=>(0,OW.default)((0,Yo.default)({},f,{theme:Hm((0,Yo.default)({},f,{defaultTheme:r,themeId:t}))}));return d.__mui_systemSx=!0,(f,c={})=>{(0,Rk.internal_processStyles)(f,ne=>ne.filter(he=>!(he!=null&&he.__mui_systemSx)));const{name:b,slot:w,skipVariantsResolver:k,skipSx:z,overridesResolver:P=qW(GW(w))}=c,V=(0,Nx.default)(c,jW),U=k!==void 0?k:w&&w!=="Root"&&w!=="root"||!1,H=z||!1;let X,B=cg;w==="Root"||w==="root"?B=o:w?B=l:HW(f)&&(B=void 0);const L=(0,Rk.default)(f,(0,Yo.default)({shouldForwardProp:B,label:X},V)),G=ne=>typeof ne=="function"&&ne.__emotion_real!==ne||(0,$W.isPlainObject)(ne)?he=>ug(ne,(0,Yo.default)({},he,{theme:Hm({theme:he.theme,defaultTheme:r,themeId:t})})):ne,te=(ne,...he)=>{let Z=G(ne);const ue=he?he.map(G):[];b&&P&&ue.push(Ee=>{const Se=Hm((0,Yo.default)({},Ee,{defaultTheme:r,themeId:t}));if(!Se.components||!Se.components[b]||!Se.components[b].styleOverrides)return null;const ze=Se.components[b].styleOverrides,We={};return Object.entries(ze).forEach(([Fe,Me])=>{We[Fe]=ug(Me,(0,Yo.default)({},Ee,{theme:Se}))}),P(Ee,We)}),b&&!U&&ue.push(Ee=>{var Se;const ze=Hm((0,Yo.default)({},Ee,{defaultTheme:r,themeId:t})),We=ze==null||(Se=ze.components)==null||(Se=Se[b])==null?void 0:Se.variants;return ug({variants:We},(0,Yo.default)({},Ee,{theme:ze}))}),H||ue.push(d);const Ce=ue.length-he.length;if(Array.isArray(ne)&&Ce>0){const Ee=new Array(Ce).fill("");Z=[...ne,...Ee],Z.raw=[...ne.raw,...Ee]}const ye=L(Z,...ue);return f.muiName&&(ye.muiName=f.muiName),ye};return L.withConfig&&(te.withConfig=L.withConfig),te}}function KW(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const XW=e=>KW(e)&&e!=="classes",JW=XW,YW=LW({themeId:uM,defaultTheme:cM,rootShouldForwardProp:JW});function QW(e){return Kz("MuiSvgIcon",e)}y7("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const eG=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],tG=e=>{const{color:t,fontSize:r,classes:o}=e,l={root:["root",t!=="inherit"&&`color${wc(t)}`,`fontSize${wc(r)}`]};return p7(l,QW,o)},rG=YW("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${wc(r.color)}`],t[`fontSize${wc(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,o,l,d,f,c,b,w,k,z,P,V,U;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(o=r.create)==null?void 0:o.call(r,"fill",{duration:(l=e.transitions)==null||(l=l.duration)==null?void 0:l.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(f=d.pxToRem)==null?void 0:f.call(d,20))||"1.25rem",medium:((c=e.typography)==null||(b=c.pxToRem)==null?void 0:b.call(c,24))||"1.5rem",large:((w=e.typography)==null||(k=w.pxToRem)==null?void 0:k.call(w,35))||"2.1875rem"}[t.fontSize],color:(z=(P=(e.vars||e).palette)==null||(P=P[t.color])==null?void 0:P.main)!=null?z:{action:(V=(e.vars||e).palette)==null||(V=V.action)==null?void 0:V.active,disabled:(U=(e.vars||e).palette)==null||(U=U.action)==null?void 0:U.disabled,inherit:void 0}[t.color]}}),jx=R.forwardRef(function(t,r){const o=IW({props:t,name:"MuiSvgIcon"}),{children:l,className:d,color:f="inherit",component:c="svg",fontSize:b="medium",htmlColor:w,inheritViewBox:k=!1,titleAccess:z,viewBox:P="0 0 24 24"}=o,V=Ut(o,eG),U=R.isValidElement(l)&&l.type==="svg",H=q({},o,{color:f,component:c,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:k,viewBox:P,hasSvgAsChild:U}),X={};k||(X.viewBox=P);const B=tG(H);return re.jsxs(rG,q({as:c,className:mi(B.root,d),focusable:"false",color:w,"aria-hidden":z?void 0:!0,role:z?"img":void 0,ref:r},X,V,U&&l.props,{ownerState:H,children:[U?l.props.children:l,z?re.jsx("title",{children:z}):null]}))});jx.muiName="SvgIcon";function wd(e,t){function r(o,l){return re.jsx(jx,q({"data-testid":`${t}Icon`,ref:l},o,{children:e}))}return r.muiName=jx.muiName,R.memo(R.forwardRef(r))}const nG=wd(re.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness6"),iG=wd(re.jsx("path",{d:"M10.85 12.65h2.3L12 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM14.3 16l-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9z"}),"BrightnessAuto"),oG=wd(re.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"BrightnessHigh"),aG=wd(re.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6"}),"BrightnessLow"),sG=wd(re.jsx("path",{d:"m16 5-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2"}),"IosShare"),lG=wd(re.jsx("path",{d:"M19 5v14H5V5zm1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt"),hM={[Yn.FuelStation]:{iconName:"gas_ico",label:"Fuel station"},[Yn.Toll]:{iconName:"toll_ico",label:"Toll gate"},[Yn.Parking]:{iconName:"parking_ico",label:"Rest stop"},[Yn.RecruitmentAgency]:{iconName:"recruitment_ico",label:"Recruitment agency"},[Yn.Service]:{iconName:"service_ico",label:"Service"},[Yn.TruckDealer]:{iconName:"dealer_ico",label:"Truck dealer"},[Yn.Port]:{iconName:"port_overlay",label:"Port"},[Yn.Train]:{iconName:"train_ico",label:"Train"},[Yn.Viewpoint]:{iconName:"viewpoint",label:"Viewpoint"},[Yn.PhotoSight]:{iconName:"photo_sight_captured",label:"Photo trophy"},[Yn.AgricultureCheck]:{iconName:"agri_check",label:"Agricultural inspection"},[Yn.BorderCheck]:{iconName:"border_ico",label:"Border inspection"},[Yn.Garage]:{iconName:"garage_large_ico",label:"Garage"},[Yn.WeighStation]:{iconName:"weigh_station_ico",label:"Weigh station"},[Yn.CityNames]:{iconName:"city_names_ico",label:"City names"},[Yn.Company]:{iconName:"companies_ico",label:"Companies"},[Yn.RoadNumber]:{iconName:"road_numbers_ico",label:"Road numbers"}},Lk=new Map(Object.entries(hM).map(([e,t])=>[Number(e),t.label])),$k=new Map(Object.entries(wU).map(([e,t])=>[Number(e),t]));function Jg(e,t,r){return{selectedItems:e,onSelectAllToggle:o=>t(new Set(o?r:[])),onItemToggle:(o,l)=>{t(d=>{const f=new Set(d);return l?f.add(o):f.delete(o),f})}}}const pM=e=>{const t=R.useRef(null),[r,o]=R.useState(!1),[l,d]=R.useState(0);return Fs(()=>({onAdd:()=>bn(t.current),onRemove:()=>bn(t.current).remove()}),{position:"bottom-left"}),re.jsxs("div",{ref:t,className:"maplibregl-ctrl maplibregl-ctrl-group",children:[re.jsx(kb,{title:"Map Options",sx:{minWidth:0,minHeight:0,borderRadius:0},onClick:()=>o(!0),children:re.jsx(lG,{})}),re.jsx(ZE,{open:r,onClose:()=>o(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",justifyContent:"end"}}},children:re.jsxs(JE,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,height:"80%",overflow:"auto"},children:[re.jsx(jE,{children:"Map Options"}),re.jsx(XE,{}),re.jsx(DC,{onChange:(f,c)=>d(Number(c)),children:re.jsxs(DV,{tabFlex:1,sx:{borderRadius:0},children:[re.jsx(u_,{children:"Icons"}),re.jsx(u_,{children:"ATS DLC"}),re.jsx(u_,{children:"Advanced"})]})}),re.jsx(NE,{sx:{overflowX:"hidden"},children:re.jsxs(DC,{value:l,children:[re.jsx(d_,{sx:{p:0},value:0,children:re.jsx(Bk,{items:Lk,selectedItems:e.icons.selectedItems,onItemToggle:e.icons.onItemToggle,icon:f=>re.jsx("img",{style:{marginLeft:-3},width:32,height:32,src:`map-icons/${hM[f].iconName}.png`})})}),re.jsx(d_,{sx:{p:0},value:1,children:re.jsx(Bk,{items:$k,selectedItems:e.atsDlcs.selectedItems,onItemToggle:e.atsDlcs.onItemToggle})}),re.jsx(d_,{sx:{p:0},value:2,children:re.jsx(hG,{showContours:e.advanced.showContours,onContoursToggle:e.advanced.onContoursToggle})})]})}),re.jsx(HE,{}),l===0&&re.jsx(cG,{enableAutoHiding:e.icons.enableAutoHiding,enableSelectAll:e.icons.selectedItems.size===Lk.size,onAutoHidingToggle:e.icons.onAutoHidingToggle,onSelectAllToggle:e.icons.onSelectAllToggle}),l===1&&re.jsx(dG,{enableSelectAll:e.atsDlcs.selectedItems.size===$k.size,onSelectAllToggle:e.atsDlcs.onSelectAllToggle})]})})]})},cG=R.memo(e=>re.jsxs(uv,{direction:"row",justifyContent:"space-between",gap:1,mx:2,children:[re.jsx(XV,{enterDelay:500,title:"Enable to hide icons based on zoom and nearby icons. Disable to always show icons.",children:re.jsx(ad,{label:"Enable icon hiding",checked:e.enableAutoHiding,onChange:t=>{var r;return(r=e.onAutoHidingToggle)==null?void 0:r.call(e,t.target.checked)}})}),re.jsx(ad,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})]})),uG=e=>re.jsx(iv,{size:"lg",sx:{p:0,[`& .${pc.root}`]:{flexGrow:1,alignItems:"center",flexDirection:"row-reverse"}},children:[...e.items.entries()].map(([t,r])=>{var o;return re.jsxs(rf,{children:[(o=e.icon)==null?void 0:o.call(e,t),re.jsx(ad,{overlay:!0,label:r,checked:e.selectedItems.has(t),onChange:l=>e.onItemToggle(t,l.target.checked)})]},String(t))})}),Bk=R.memo(uG),dG=R.memo(e=>re.jsx(uv,{direction:"row",justifyContent:"end",gap:1,mx:2,children:re.jsx(ad,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})})),hG=e=>re.jsxs(uv,{mx:2,children:[re.jsx(bc,{mb:2,level:"title-lg",children:"Experimental Features"}),re.jsxs(xN,{children:[re.jsx(ad,{sx:{flexDirection:"row-reverse"},label:"Show elevation data",checked:e.showContours,onChange:t=>e.onContoursToggle(t.target.checked)}),re.jsx(bc,{level:"body-xs",color:"warning",children:"Note: elevation data for points further away from roads is estimated and likely inaccurate."})]})]});function pG(e,t){return gG(e,t,(r,o,l,d)=>Math.sqrt(Math.pow(l-r,2)+Math.pow(d-o,2)))}function fG(e){let t=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(const d of e)Array.isArray(d)?(t=Math.min(t,d[0]),o=Math.max(o,d[0]),r=Math.min(r,d[1]),l=Math.max(l,d[1])):(t=Math.min(t,d.x),o=Math.max(o,d.x),r=Math.min(r,d.y),l=Math.max(l,d.y));return[t,r,o,l]}function mG(e){const t=Math.PI*2;let r=e%t;return r=(r+t)%t,r<=Math.PI?r:r-t}function Ok(e){return mG(e*Math.PI/180)}function gG(e,t,r){let o,l;Array.isArray(e)?(Np.checkArgument(e.length>=2),o=e[0],l=e[1]):(o=e.x,l=e.y);let d,f;return Array.isArray(t)?(Np.checkArgument(t.length>=2),d=t[0],f=t[1]):(d=t.x,f=t.y),r(o,l,d,f)}const Vx={label:"ATS",value:"usa"},Ux={label:"ETS2",value:"europe"},Fk=[Vx,Ux],yG=({map:e,onSelect:t})=>re.jsx(pV,{sx:{paddingBlock:0,minWidth:"fit-content"},value:e,onChange:(r,o)=>t(bn(Fk.find(l=>l.value===o))),children:Fk.map(r=>re.jsx(Qj,{value:r.value,children:r.label},r.value))}),vG=e=>{const{map:t,onSelect:r}=e,[o,l]=R.useState([]);R.useEffect(()=>{Promise.all([fetch("cities.geojson").then(c=>c.json()),fetch(Vz).then(c=>c.json()),fetch(Uz).then(c=>c.json())]).then(([c,b,w])=>{l(xG(c,b,w))},()=>console.error("could not load cities/towns geojson."))},[]);const d=o.filter(c=>{const b=c.map===t;return t==="europe"?b:b&&e.visibleStates.has(c.stateCode)}),f=yE({stringify:c=>[c.state,c.label].join(" ")});return re.jsx(Cx,{onChange:(c,b)=>b&&r(b),placeholder:"Fly to...",options:d,filterOptions:f,groupBy:c=>c.state,blurOnSelect:!0,autoComplete:!0,renderGroup:_G},t)};function _G(e){return re.jsxs(re.Fragment,{children:[re.jsx(bc,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:e.group}),re.jsx(iv,{children:e.children}),re.jsx(KE,{})]})}function xG(e,t,r){const o=[],l=new Map;for(const d of e.features)if(d.properties.type==="city")o.push(d);else if(d.properties.type==="country")l.set(d.properties.code,d.properties.name);else throw new Error;for(const d of t.features)o.push({type:"Feature",geometry:d.geometry,properties:{type:"city",map:"usa",countryCode:d.properties.state,name:d.properties.name}});for(const d of r.features)o.push({type:"Feature",geometry:d.geometry,properties:{type:"city",map:"europe",countryCode:d.properties.state,name:d.properties.name}});return o.map(({properties:d,geometry:f})=>({map:d.map,state:bn(l.get(d.countryCode)),stateCode:d.countryCode,label:d.name,value:f.coordinates})).sort((d,f)=>d.state!==f.state?d.state.localeCompare(f.state):d.label.localeCompare(f.label))}const dg={usa:{longitude:-108,latitude:39},europe:{longitude:12,latitude:51}},bG=e=>{const t=R.useRef(null);Fs(()=>({onAdd:()=>bn(t.current),onRemove:()=>bn(t.current).remove()}),{position:"top-left"});const{current:r}=Db(),o=localStorage.getItem("tm-map")==="europe"?Ux:Vx,[l,d]=R.useState(o),f=S_.useCallback(b=>{if(b==null||(d(b),localStorage.setItem("tm-map",b.value),!r))return;const{longitude:w,latitude:k}=dg[b.value];r.easeTo({zoom:4,center:[w,k]})},[r]);R.useEffect(()=>{if(!r)return;const b=()=>{const w=r.getCenter().lng,k=Nk(w,dg.usa.longitude),z=Nk(w,dg.europe.longitude);k<z&&l.value!=="usa"?(d(Vx),localStorage.setItem("tm-map","usa")):z<k&&l.value!=="europe"&&(d(Ux),localStorage.setItem("tm-map","europe"))};return r.on("moveend",b),()=>void r.off("moveend",b)},[r,l,d]);const c=S_.useCallback(b=>{r==null||b==null||(r.flyTo({curve:1,zoom:9,center:b.value.map(w=>Number(w.toFixed(3)))}),r.once("moveend",w=>{const{lat:k,lng:z}=w.target.getCenter(),P=w.target.getZoom(),V=Number(w.target.getBearing().toFixed(1)),U=Math.round(w.target.getPitch());U?window.location.hash=`${P}/${k.toFixed(3)}/${z.toFixed(3)}/${V}/${U}`:V?window.location.hash=`${P}/${k.toFixed(3)}/${z.toFixed(3)}/${V}`:window.location.hash=`${P}/${k.toFixed(3)}/${z.toFixed(3)}`}))},[r]);return re.jsx("div",{ref:t,className:"maplibregl-ctrl",style:{width:"calc(100svw - 64px)"},children:re.jsxs(uv,{direction:"row",gap:1,children:[re.jsx(yG,{map:l.value,onSelect:f}),re.jsx(vG,{map:l.value,onSelect:c,visibleStates:e.visibleStates})]})})};function Nk(e,t){const r=Ok(e)/2,o=Ok(t)/2;return Math.abs(Math.sin(r)-Math.sin(o))}const fM=()=>{const e=R.useRef(null),{mode:t="light",setMode:r}=v1();return Fs(()=>({onAdd:()=>bn(e.current),onRemove:()=>bn(e.current).remove()})),re.jsx("div",{ref:e,className:"maplibregl-ctrl maplibregl-ctrl-group",children:re.jsxs(f3,{children:[re.jsx(Aj,{slots:{root:kb},sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Set map theme",children:re.jsx(nG,{})}),re.jsxs(Sj,{placement:"left",children:[re.jsx(rf,{sticky:!0,children:re.jsx(bc,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:"Map theme"})}),re.jsxs(c_,{onClick:()=>r("light"),selected:t==="light",children:[re.jsx(l_,{children:re.jsx(oG,{})})," ","Light"]}),re.jsxs(c_,{onClick:()=>r("dark"),selected:t==="dark",children:[re.jsx(l_,{children:re.jsx(aG,{})})," ","Dark"]}),re.jsxs(c_,{onClick:()=>r("system"),selected:t==="system",children:[re.jsx(l_,{children:re.jsx(iG,{})})," ","Auto"]})]})]})})},w_=(e,t)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},wG=()=>{const e=R.useRef(null),[t,r]=R.useState(!1),[o,l]=R.useState(!1),[d,f]=R.useState(window.location.origin),c=Db();return Fs(()=>({onAdd:()=>bn(e.current),onRemove:()=>bn(e.current).remove()})),R.useEffect(()=>{const b=c.current;if(!b||!t)return;const w=()=>{const P=b.getCenter(),V=b.getBearing(),U=b.getPitch(),H=V||U?[V,U]:[],X=b.getZoom(),B=k?"?"+new URLSearchParams({mlat:String(w_(k.getLngLat().lat,2)),mlon:String(w_(k.getLngLat().lng,2))}).toString():"",L="#"+[X,P.lat,P.lng,...H].map(G=>w_(G,2)).join("/");f(window.location.origin+B+L)};let k,z;if(o){k=new Lb.Marker,k.setLngLat(b.getCenter()).setDraggable(!0).addTo(b.getMap());let P=!0;z=()=>P&&k.setLngLat(b.getCenter()),k.on("dragend",()=>{P=!1,b.easeTo({center:k==null?void 0:k.getLngLat()}),b.once("moveend",()=>P=!0)})}return w(),b.on("moveend",w),z&&b.on("move",z),()=>{b.off("moveend",w),z&&b.off("move",z),k==null||k.remove()}},[c,t,o]),re.jsxs("div",{ref:e,children:[re.jsx("div",{className:"maplibregl-ctrl maplibregl-ctrl-group",children:re.jsx(kb,{sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Share",onClick:()=>r(!t),children:re.jsx(sG,{})})}),re.jsx(ZE,{open:t,anchor:"right",onClose:()=>r(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",right:t?48:0}}},children:re.jsxs(JE,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,overflow:"auto"},children:[re.jsx(jE,{children:"Share"}),re.jsx(XE,{}),re.jsx(HE,{}),re.jsxs(NE,{sx:{gap:2,overflow:"hidden",flexGrow:1,justifyContent:"center"},children:[re.jsx(bc,{children:"Share a link to this map"}),re.jsx(b6,{readOnly:!0,sx:{"--Input-decoratorChildHeight":"36px"},onFocus:b=>b.target.select(),value:d,endDecorator:re.jsx(pN,{sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>void navigator.clipboard.writeText(d).catch(()=>alert("Could not copy to clipboard 🙁")),children:"Copy"})}),re.jsx(ad,{label:"Include marker",checked:o,onChange:b=>l(b.target.checked)})]})]})})]})};function mM(e){return new Set([...e].map(SG).concat(Ni.CA))}function SG(e){switch(e){case to.Arizona:return Ni.AZ;case to.Colorado:return Ni.CO;case to.Idaho:return Ni.ID;case to.Kansas:return Ni.KS;case to.Montana:return Ni.MT;case to.Nebraska:return Ni.NE;case to.Nevada:return Ni.NV;case to.NewMexico:return Ni.NM;case to.Oklahoma:return Ni.OK;case to.Oregon:return Ni.OR;case to.Texas:return Ni.TX;case to.Utah:return Ni.UT;case to.Washington:return Ni.WA;case to.Wyoming:return Ni.WY;default:throw new Fz(e)}}const jk=(e,[t,r])=>!isNaN(e)&&t<=e&&e<=r,CG=()=>{const{mode:e,systemMode:t}=v1(),r=e==="system"?t:e,{longitude:o,latitude:l}=dg[kG(localStorage.getItem("tm-map"))],[d]=bU(),f=Number(d.get("mlat")),c=Number(d.get("mlon")),b=jk(f,[-90,90])&&jk(c,[-180,180])?{lat:f,lon:c}:void 0,[w,k]=R.useState(!0),[z,P]=R.useState(new Set(jp)),[V,U]=R.useState(new Set(Fp)),H=mM(V),X=Jg(z,P,jp),B=Jg(V,U,Fp),[L,G]=R.useState(!1);return re.jsxs(vz,{style:{width:"100svw",height:"100svh"},hash:!0,minZoom:4,maxZoom:15,mapStyle:Hz,initialViewState:{longitude:o,latitude:l,zoom:4},children:[b&&re.jsx(c9,{longitude:b.lon,latitude:b.lat}),re.jsxs(Oz,{mode:r,children:[re.jsx($x,{game:"ats",showContours:L}),re.jsx($x,{game:"ets2",showContours:L})]}),re.jsx(Bx,{game:"ats",mode:r,enableIconAutoHide:w,visibleIcons:z,dlcs:V}),re.jsx(Bx,{game:"ets2",mode:r,enableIconAutoHide:w,visibleIcons:z}),z.has(Yn.CityNames)&&re.jsx(Ox,{game:"ats",mode:r,enableAutoHide:w,enabledStates:H}),z.has(Yn.CityNames)&&re.jsx(Ox,{game:"ets2",mode:r,enableAutoHide:w}),re.jsx(bz,{visualizePitch:!0}),re.jsx(xz,{containerId:"fsElem"}),re.jsx(wG,{}),re.jsx(fM,{}),re.jsx(_z,{compact:!0,style:{marginLeft:54},customAttribution:"© Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a> and <a href='https://forum.scssoft.com/viewtopic.php?p=1946956#p1946956'>krmarci</a>."}),re.jsx(bG,{visibleStates:H}),re.jsx(pM,{icons:{...X,enableAutoHiding:w,onAutoHidingToggle:k},advanced:{showContours:L,onContoursToggle:G},atsDlcs:B})]})};function kG(e){return e==="europe"?e:"usa"}var IG=Object.defineProperty,TG=(e,t,r)=>t in e?IG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,PG=(e,t,r)=>(TG(e,typeof t!="symbol"?t+"":t,r),r);class EG{constructor(t){PG(this,"_kind"),this._kind=t}}function zG(e,t){const r=e.toString(),o=t.toString();return r>o?1:r<o?-1:0}const MG=zG;var AG=Object.defineProperty,DG=(e,t,r)=>t in e?AG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Vk=(e,t,r)=>(DG(e,typeof t!="symbol"?t+"":t,r),r);function RG(e,t,r){const o=t*2,l=t*2+1;let d=t;return o<e.length&&r(e[d],e[o])<0&&(d=o),l<e.length&&r(e[d],e[l])<0&&(d=l),d}function Gb(e,t,r){const o=RG(e,t,r);if(o!==t){const l=e[t];e[t]=e[o],e[o]=l,Gb(e,o,r)}}function Uk(e){for(let t=Math.floor(e.collection.length/2)-1;t>=0;--t)Gb(e.collection,t,e.comparator)}class Yg extends EG{constructor({comparator:t=MG}={}){super("BinaryHeap"),Vk(this,"comparator"),Vk(this,"collection",[]),this.comparator=t}static from(t,r={}){const o=new Yg(r);return o.collection=Array.from(t),Uk(o),o}clear(){this.collection.length=0}toArray(){return[...this.collection].sort(this.comparator)}get length(){return this.collection.length}top(){if(this.length===0)throw new Error("invalid operation: top() called for empty BinaryHeap");return this.collection[0]}pop(){if(this.length===0)throw new Error("invalid operation: pop() called for empty BinaryHeap");const t=this.collection[0];return this.collection.length>1?(this.collection[0]=this.collection.pop(),Gb(this.collection,0,this.comparator)):this.collection.pop(),t}push(t){this.collection.push(t);const r=this.collection;for(let o=r.length-1,l=Math.floor(o/2);o>0&&this.comparator(r[l],r[o])<0;o=l,l=Math.floor(l/2)){const d=r[o];r[o]=r[l],r[l]=d}}merge(t){t instanceof Yg?this.collection=this.collection.concat(t.collection):this.collection=this.collection.concat(t.toArray()),Uk(this),t.clear()}isEmpty(){return!this.collection.length}}function LG(e,t,r,o,l){const{nodeLUT:d,graph:f}=l,c=bn(d.get(e)),b=bn(d.get(t)),w=new BG({comparator:(B,L)=>{const G=H.get(B)??1/0;return(H.get(L)??1/0)-G}}),k={nodeId:e,distance:0,direction:r,dlcGuard:-1};w.push(k);const z=new Map,P=new Map;P.set(k,0);const V=B=>pG(B,b),U=(B,L)=>{switch(o){case"shortest":return L.distance;case"smallRoads":return L.isOneLaneRoad?L.distance:L.distance*10;default:throw new Fz(o)}},H=new Map;H.set(k,V(c));let X=0;for(;!w.isEmpty();){X++;const B=w.pop();if(B.nodeId===t)return $G(z,B);const L=f.get(B.nodeId);if(!L)continue;const G=B.direction==="forward"?L.forward:L.backward;for(const te of G){if(!l.enabledDlcGuards.has(te.dlcGuard))continue;const ne=(P.get(B)??1/0)+U(B,te);ne<(P.get(te)??1/0)&&(z.set(te,B),P.set(te,ne),H.set(te,ne+V(bn(d.get(te.nodeId)))),w.has(te)||w.push(te))}}console.warn(`no ${r} route found from`,c,"and",b,`(${X} iterations)`)}function $G(e,t){let r=0;const o=[t];for(;e.has(t);)t=e.get(t),o.unshift(t),r+=t.distance;return o.length===1&&o.push(o[0]),{route:o,distance:r}}class BG extends Yg{constructor(r){super(r);TS(this,"items",new Set)}has(r){return this.items.has(r)}push(r){Np.checkState(!this.items.has(r)),super.push(r),this.items.add(r)}pop(){const r=super.pop();return Np.checkState(this.items.has(r)),this.items.delete(r),r}clear(){super.clear(),this.items.clear()}merge(r){super.merge(r);for(const o of this.collection)this.items.add(o)}}const OG=()=>{const{mode:e,systemMode:t}=v1(),r=e==="system"?t:e,[o,l]=R.useState(!0),[d,f]=R.useState(new Set(jp)),[c,b]=R.useState(new Set(Fp)),w=mM(c),k=Jg(d,f,jp),z=Jg(c,b,Fp),[P,V]=R.useState(!1);return re.jsxs(vz,{style:{width:"100vw",height:"100vh"},minZoom:4,maxZoom:15,maxBounds:[[-135,21],[-84,54]],mapStyle:Hz,initialViewState:{longitude:-115,latitude:36,zoom:9},children:[re.jsx(Oz,{mode:r,children:re.jsx($x,{game:"ats",showContours:P})}),re.jsx(Bx,{game:"ats",mode:r,enableIconAutoHide:o,visibleIcons:d,dlcs:c}),re.jsx(Ox,{game:"ats",mode:r,enableAutoHide:o,enabledStates:w}),re.jsx(_d,{id:"route1",type:"geojson",data:{type:"FeatureCollection",features:[]},children:re.jsx(Hr,{type:"line",paint:{"line-color":["match",["get","mode"],"shortest","#f00","smallRoads","#0f0","#f0f"],"line-width":3,"line-opacity":.7}})}),re.jsx(bz,{visualizePitch:!0}),re.jsx(xz,{}),re.jsx(fM,{}),re.jsx(_z,{compact:!0,customAttribution:"© Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a>."}),re.jsx(FG,{dlcs:c}),re.jsx(pM,{icons:{...k,enableAutoHiding:o,onAutoHidingToggle:l},advanced:{showContours:P,onContoursToggle:V},atsDlcs:z})]})},FG=e=>{const{current:t}=Db(),r=mz(e.dlcs),[o,l]=R.useState(void 0),[d,f]=R.useState(void 0),[c,b]=R.useState([]),[w,k]=R.useState([]);R.useEffect(()=>{fetch("usa-graph-demo.json").then(Z=>Z.json()).then(Z=>{b(Z.demoCompanies.map(Gk)),f(NG(Z)),l(Z)},()=>console.error("could not load usa-graph-demo.json"))},[]);const[z,P]=R.useState(void 0),[V,U]=R.useState(void 0),H=R.useCallback(Z=>{Z=bn(Z),P(Z.value);let ue;if(o!=null){ue=bn(o.demoCompanies.find(Ee=>Ee.n===Z.value));const Ce=bn(o.demoCompanyDefs.find(Ee=>Ee.t===ue.t)),ye=new Set(Ce.d);k(o.demoCompanies.filter(Ee=>ye.has(Ee.t)).map(Gk))}if(!(t==null||d==null)&&(V!=null&&(bn(t.getSource("route1")).setData({type:"FeatureCollection",features:[]}),U(void 0)),ue)){const Ce=bn(d.nodeLUT.get(ue.n));t.flyTo({curve:1,zoom:9,center:[Ce.x,Ce.y]})}},[t,V,d,o]),X=R.useCallback(Z=>{Z=bn(Z),U(Z.value),!(t==null||d==null)&&B(bn(z),Z.value,t,{...d,enabledDlcGuards:r})},[t,z,d,e.dlcs]),B=(Z,ue,Ce,ye)=>{Promise.all([qk(Z,ue,"shortest",ye),qk(Z,ue,"smallRoads",ye)]).then(Ee=>{const Se=bn(Ce.getSource("route1"));if(Ee.some(We=>We==null)){alert("Cannot calculate a route 🙁"),Se.setData({type:"FeatureCollection",features:[]});return}const ze=Ee;Se.setData({type:"FeatureCollection",features:ze}),Ce.fitBounds(fG(ze.flatMap(We=>We.geometry.coordinates)),{padding:150,curve:1,duration:2500})},Ee=>{console.error("error finding route",Ee)})},L=new Map;if(o)for(const[,Z]of o.demoGraph)for(const ue of[...Z.b??[],...Z.f??[]]){const Ce=L.get(ue.n)??0;L.set(ue.n,Ce||ue.g)}const G=Z=>{if(d==null)return!0;const ue=bn(L.get(Z.value));return r.has(ue)},te=(Z,ue)=>Z.city!==ue.city?Z.city.localeCompare(ue.city):Z.label.localeCompare(ue.label),ne=c.filter(G).sort(te),he=w.filter(G).sort(te);return re.jsxs("div",{style:{width:300,margin:20,display:"grid",position:"relative",gridTemplateColumns:"100px auto",alignItems:"center"},children:[re.jsx("h2",{children:"Start"}),re.jsx(Cx,{options:ne,onChange:(Z,ue)=>ue&&H(ue),groupBy:Z=>Z.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,renderGroup:Hk}),re.jsx("h2",{children:"End"}),re.jsx(Cx,{options:he,onChange:(Z,ue)=>ue&&X(ue),groupBy:Z=>Z.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,disabled:z==null,renderGroup:Hk},z)]})};function Hk(e){return re.jsxs(re.Fragment,{children:[re.jsx(bc,{m:1,level:"body-xs",textTransform:"uppercase",children:e.group}),re.jsx(iv,{children:e.children}),re.jsx(KE,{})]})}function NG(e){const t=new Map,r=new Map;for(const[o,l]of e.demoGraph)t.set(o,{forward:(l.f??[]).map(Wk),backward:(l.b??[]).map(Wk)});for(const[o,l]of e.demoNodes)r.set(o,{x:l[0],y:l[1]});return{graph:t,nodeLUT:r}}function Wk(e){return{nodeId:e.n,distance:e.l,isOneLaneRoad:e.o,direction:e.d==="f"?"forward":"backward",dlcGuard:e.g}}function Gk(e){return{label:e.t,city:e.c,value:e.n}}function qk(e,t,r,o){return new Promise(l=>{const d=LG(e,t,"forward",r,o);if(!d){l(void 0);return}l({type:"Feature",geometry:{type:"LineString",coordinates:d.route.map(f=>{const c=bn(o.nodeLUT.get(f.nodeId));return[c.x,c.y]})},properties:{distance:d.distance,mode:r}})})}const jG=uU(Mx([re.jsx(zx,{path:"/",element:re.jsx(CG,{})}),re.jsx(zx,{path:"routes",element:re.jsx(OG,{})})])),VG=KI({components:{JoyIconButton:{styleOverrides:{root:{backgroundColor:"var(--joy-palette-background-surface)"}}}}}),UG=document.getElementById("root"),HG=YE(UG);HG.render(re.jsx(R.StrictMode,{children:re.jsxs(Q5,{defaultMode:"system",modeStorageKey:"tm-mode",theme:VG,children:[re.jsx(ON,{}),re.jsx(_U,{router:jG})]})}));
