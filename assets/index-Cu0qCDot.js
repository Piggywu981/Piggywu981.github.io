var MD=Object.defineProperty;var DD=(e,t,r)=>t in e?MD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var cS=(e,t,r)=>DD(e,typeof t!="symbol"?t+"":t,r);function zx(e,t){for(var r=0;r<t.length;r++){const o=t[r];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(o,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function r(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=r(c);fetch(c.href,d)}})();var AD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Rs(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var c=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,c.get?c:{enumerable:!0,get:function(){return e[o]}})}),r}var Ek={exports:{}},Yg={},zk={exports:{}},Ar={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp=Symbol.for("react.element"),RD=Symbol.for("react.portal"),LD=Symbol.for("react.fragment"),$D=Symbol.for("react.strict_mode"),BD=Symbol.for("react.profiler"),OD=Symbol.for("react.provider"),FD=Symbol.for("react.context"),ND=Symbol.for("react.forward_ref"),jD=Symbol.for("react.suspense"),VD=Symbol.for("react.memo"),UD=Symbol.for("react.lazy"),uS=Symbol.iterator;function HD(e){return e===null||typeof e!="object"?null:(e=uS&&e[uS]||e["@@iterator"],typeof e=="function"?e:null)}var Mk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dk=Object.assign,Ak={};function od(e,t,r){this.props=e,this.context=t,this.refs=Ak,this.updater=r||Mk}od.prototype.isReactComponent={};od.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};od.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Rk(){}Rk.prototype=od.prototype;function Dx(e,t,r){this.props=e,this.context=t,this.refs=Ak,this.updater=r||Mk}var Ax=Dx.prototype=new Rk;Ax.constructor=Dx;Dk(Ax,od.prototype);Ax.isPureReactComponent=!0;var dS=Array.isArray,Lk=Object.prototype.hasOwnProperty,Rx={current:null},$k={key:!0,ref:!0,__self:!0,__source:!0};function Bk(e,t,r){var o,c={},d=null,m=null;if(t!=null)for(o in t.ref!==void 0&&(m=t.ref),t.key!==void 0&&(d=""+t.key),t)Lk.call(t,o)&&!$k.hasOwnProperty(o)&&(c[o]=t[o]);var l=arguments.length-2;if(l===1)c.children=r;else if(1<l){for(var b=Array(l),w=0;w<l;w++)b[w]=arguments[w+2];c.children=b}if(e&&e.defaultProps)for(o in l=e.defaultProps,l)c[o]===void 0&&(c[o]=l[o]);return{$$typeof:Fp,type:e,key:d,ref:m,props:c,_owner:Rx.current}}function WD(e,t){return{$$typeof:Fp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fp}function GD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var hS=/\/+/g;function v0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?GD(""+e.key):t.toString(36)}function Fm(e,t,r,o,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var m=!1;if(e===null)m=!0;else switch(d){case"string":case"number":m=!0;break;case"object":switch(e.$$typeof){case Fp:case RD:m=!0}}if(m)return m=e,c=c(m),e=o===""?"."+v0(m,0):o,dS(c)?(r="",e!=null&&(r=e.replace(hS,"$&/")+"/"),Fm(c,t,r,"",function(w){return w})):c!=null&&(Lx(c)&&(c=WD(c,r+(!c.key||m&&m.key===c.key?"":(""+c.key).replace(hS,"$&/")+"/")+e)),t.push(c)),1;if(m=0,o=o===""?".":o+":",dS(e))for(var l=0;l<e.length;l++){d=e[l];var b=o+v0(d,l);m+=Fm(d,t,r,b,c)}else if(b=HD(e),typeof b=="function")for(e=b.call(e),l=0;!(d=e.next()).done;)d=d.value,b=o+v0(d,l++),m+=Fm(d,t,r,b,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return m}function mm(e,t,r){if(e==null)return e;var o=[],c=0;return Fm(e,o,"","",function(d){return t.call(r,d,c++)}),o}function qD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lo={current:null},Nm={transition:null},ZD={ReactCurrentDispatcher:lo,ReactCurrentBatchConfig:Nm,ReactCurrentOwner:Rx};function Ok(){throw Error("act(...) is not supported in production builds of React.")}Ar.Children={map:mm,forEach:function(e,t,r){mm(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return mm(e,function(){t++}),t},toArray:function(e){return mm(e,function(t){return t})||[]},only:function(e){if(!Lx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ar.Component=od;Ar.Fragment=LD;Ar.Profiler=BD;Ar.PureComponent=Dx;Ar.StrictMode=$D;Ar.Suspense=jD;Ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZD;Ar.act=Ok;Ar.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=Dk({},e.props),c=e.key,d=e.ref,m=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,m=Rx.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(b in t)Lk.call(t,b)&&!$k.hasOwnProperty(b)&&(o[b]=t[b]===void 0&&l!==void 0?l[b]:t[b])}var b=arguments.length-2;if(b===1)o.children=r;else if(1<b){l=Array(b);for(var w=0;w<b;w++)l[w]=arguments[w+2];o.children=l}return{$$typeof:Fp,type:e.type,key:c,ref:d,props:o,_owner:m}};Ar.createContext=function(e){return e={$$typeof:FD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:OD,_context:e},e.Consumer=e};Ar.createElement=Bk;Ar.createFactory=function(e){var t=Bk.bind(null,e);return t.type=e,t};Ar.createRef=function(){return{current:null}};Ar.forwardRef=function(e){return{$$typeof:ND,render:e}};Ar.isValidElement=Lx;Ar.lazy=function(e){return{$$typeof:UD,_payload:{_status:-1,_result:e},_init:qD}};Ar.memo=function(e,t){return{$$typeof:VD,type:e,compare:t===void 0?null:t}};Ar.startTransition=function(e){var t=Nm.transition;Nm.transition={};try{e()}finally{Nm.transition=t}};Ar.unstable_act=Ok;Ar.useCallback=function(e,t){return lo.current.useCallback(e,t)};Ar.useContext=function(e){return lo.current.useContext(e)};Ar.useDebugValue=function(){};Ar.useDeferredValue=function(e){return lo.current.useDeferredValue(e)};Ar.useEffect=function(e,t){return lo.current.useEffect(e,t)};Ar.useId=function(){return lo.current.useId()};Ar.useImperativeHandle=function(e,t,r){return lo.current.useImperativeHandle(e,t,r)};Ar.useInsertionEffect=function(e,t){return lo.current.useInsertionEffect(e,t)};Ar.useLayoutEffect=function(e,t){return lo.current.useLayoutEffect(e,t)};Ar.useMemo=function(e,t){return lo.current.useMemo(e,t)};Ar.useReducer=function(e,t,r){return lo.current.useReducer(e,t,r)};Ar.useRef=function(e){return lo.current.useRef(e)};Ar.useState=function(e){return lo.current.useState(e)};Ar.useSyncExternalStore=function(e,t,r){return lo.current.useSyncExternalStore(e,t,r)};Ar.useTransition=function(){return lo.current.useTransition()};Ar.version="18.3.1";zk.exports=Ar;var A=zk.exports;const jm=Mx(A),cg=zx({__proto__:null,default:jm},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KD=A,XD=Symbol.for("react.element"),JD=Symbol.for("react.fragment"),YD=Object.prototype.hasOwnProperty,QD=KD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eA={key:!0,ref:!0,__self:!0,__source:!0};function Fk(e,t,r){var o,c={},d=null,m=null;r!==void 0&&(d=""+r),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(m=t.ref);for(o in t)YD.call(t,o)&&!eA.hasOwnProperty(o)&&(c[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)c[o]===void 0&&(c[o]=t[o]);return{$$typeof:XD,type:e,key:d,ref:m,props:c,_owner:QD.current}}Yg.Fragment=JD;Yg.jsx=Fk;Yg.jsxs=Fk;Ek.exports=Yg;var Y=Ek.exports;const Ch={grey:{50:"#FBFCFE",100:"#F0F4F8",200:"#DDE7EE",300:"#CDD7E1",400:"#9FA6AD",500:"#636B74",600:"#555E68",700:"#32383E",800:"#171A1C",900:"#0B0D0E"},blue:{50:"#EDF5FD",100:"#E3EFFB",200:"#C7DFF7",300:"#97C3F0",400:"#4393E4",500:"#0B6BCB",600:"#185EA5",700:"#12467B",800:"#0A2744",900:"#051423"},yellow:{50:"#FEFAF6",100:"#FDF0E1",200:"#FCE1C2",300:"#F3C896",400:"#EA9A3E",500:"#9A5B13",600:"#72430D",700:"#492B08",800:"#2E1B05",900:"#1D1002"},red:{50:"#FEF6F6",100:"#FCE4E4",200:"#F7C5C5",300:"#F09898",400:"#E47474",500:"#C41C1C",600:"#A51818",700:"#7D1212",800:"#430A0A",900:"#240505"},green:{50:"#F6FEF6",100:"#E3FBE3",200:"#C7F7C7",300:"#A1E8A1",400:"#51BC51",500:"#1F7A1F",600:"#136C13",700:"#0A470A",800:"#042F04",900:"#021D02"}},Qg="$$joy";function Is(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const tA=Object.freeze(Object.defineProperty({__proto__:null,default:Is},Symbol.toStringTag,{value:"Module"}));function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},W.apply(null,arguments)}const rA=Object.freeze(Object.defineProperty({__proto__:null,get default(){return W}},Symbol.toStringTag,{value:"Module"}));function Nk(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var nA=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,iA=Nk(function(e){return nA.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),oA=!1;function aA(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function sA(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var lA=function(){function e(r){var o=this;this._insertTag=function(c){var d;o.tags.length===0?o.insertionPoint?d=o.insertionPoint.nextSibling:o.prepend?d=o.container.firstChild:d=o.before:d=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(c,d),o.tags.push(c)},this.isSpeedy=r.speedy===void 0?!oA:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(sA(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var d=aA(c);try{d.insertRule(o,d.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){var c;return(c=o.parentNode)==null?void 0:c.removeChild(o)}),this.tags=[],this.ctr=0},e}(),Hi="-ms-",ug="-moz-",Kr="-webkit-",jk="comm",$x="rule",Bx="decl",cA="@import",Vk="@keyframes",uA="@layer",dA=Math.abs,ey=String.fromCharCode,hA=Object.assign;function pA(e,t){return Pi(e,0)^45?(((t<<2^Pi(e,0))<<2^Pi(e,1))<<2^Pi(e,2))<<2^Pi(e,3):0}function Uk(e){return e.trim()}function fA(e,t){return(e=t.exec(e))?e[0]:e}function Xr(e,t,r){return e.replace(t,r)}function m_(e,t){return e.indexOf(t)}function Pi(e,t){return e.charCodeAt(t)|0}function dp(e,t,r){return e.slice(t,r)}function Za(e){return e.length}function Ox(e){return e.length}function gm(e,t){return t.push(e),e}function mA(e,t){return e.map(t).join("")}var ty=1,ju=1,Hk=0,Co=0,ni=0,ad="";function ry(e,t,r,o,c,d,m){return{value:e,root:t,parent:r,type:o,props:c,children:d,line:ty,column:ju,length:m,return:""}}function kh(e,t){return hA(ry("",null,null,"",null,null,0),e,{length:-e.length},t)}function gA(){return ni}function yA(){return ni=Co>0?Pi(ad,--Co):0,ju--,ni===10&&(ju=1,ty--),ni}function Bo(){return ni=Co<Hk?Pi(ad,Co++):0,ju++,ni===10&&(ju=1,ty++),ni}function Ja(){return Pi(ad,Co)}function Vm(){return Co}function Np(e,t){return dp(ad,e,t)}function hp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Wk(e){return ty=ju=1,Hk=Za(ad=e),Co=0,[]}function Gk(e){return ad="",e}function Um(e){return Uk(Np(Co-1,g_(e===91?e+2:e===40?e+1:e)))}function vA(e){for(;(ni=Ja())&&ni<33;)Bo();return hp(e)>2||hp(ni)>3?"":" "}function _A(e,t){for(;--t&&Bo()&&!(ni<48||ni>102||ni>57&&ni<65||ni>70&&ni<97););return Np(e,Vm()+(t<6&&Ja()==32&&Bo()==32))}function g_(e){for(;Bo();)switch(ni){case e:return Co;case 34:case 39:e!==34&&e!==39&&g_(ni);break;case 40:e===41&&g_(e);break;case 92:Bo();break}return Co}function xA(e,t){for(;Bo()&&e+ni!==57;)if(e+ni===84&&Ja()===47)break;return"/*"+Np(t,Co-1)+"*"+ey(e===47?e:Bo())}function bA(e){for(;!hp(Ja());)Bo();return Np(e,Co)}function wA(e){return Gk(Hm("",null,null,null,[""],e=Wk(e),0,[0],e))}function Hm(e,t,r,o,c,d,m,l,b){for(var w=0,T=0,E=m,z=0,j=0,U=0,V=1,K=1,O=1,L=0,R="",re=c,J=d,se=o,ie=R;K;)switch(U=L,L=Bo()){case 40:if(U!=108&&Pi(ie,E-1)==58){m_(ie+=Xr(Um(L),"&","&\f"),"&\f")!=-1&&(O=-1);break}case 34:case 39:case 91:ie+=Um(L);break;case 9:case 10:case 13:case 32:ie+=vA(U);break;case 92:ie+=_A(Vm()-1,7);continue;case 47:switch(Ja()){case 42:case 47:gm(SA(xA(Bo(),Vm()),t,r),b);break;default:ie+="/"}break;case 123*V:l[w++]=Za(ie)*O;case 125*V:case 59:case 0:switch(L){case 0:case 125:K=0;case 59+T:O==-1&&(ie=Xr(ie,/\f/g,"")),j>0&&Za(ie)-E&&gm(j>32?fS(ie+";",o,r,E-1):fS(Xr(ie," ","")+";",o,r,E-2),b);break;case 59:ie+=";";default:if(gm(se=pS(ie,t,r,w,T,c,l,R,re=[],J=[],E),d),L===123)if(T===0)Hm(ie,t,se,se,re,d,E,l,J);else switch(z===99&&Pi(ie,3)===110?100:z){case 100:case 108:case 109:case 115:Hm(e,se,se,o&&gm(pS(e,se,se,0,0,c,l,R,c,re=[],E),J),c,J,E,l,o?re:J);break;default:Hm(ie,se,se,se,[""],J,0,l,J)}}w=T=j=0,V=O=1,R=ie="",E=m;break;case 58:E=1+Za(ie),j=U;default:if(V<1){if(L==123)--V;else if(L==125&&V++==0&&yA()==125)continue}switch(ie+=ey(L),L*V){case 38:O=T>0?1:(ie+="\f",-1);break;case 44:l[w++]=(Za(ie)-1)*O,O=1;break;case 64:Ja()===45&&(ie+=Um(Bo())),z=Ja(),T=E=Za(R=ie+=bA(Vm())),L++;break;case 45:U===45&&Za(ie)==2&&(V=0)}}return d}function pS(e,t,r,o,c,d,m,l,b,w,T){for(var E=c-1,z=c===0?d:[""],j=Ox(z),U=0,V=0,K=0;U<o;++U)for(var O=0,L=dp(e,E+1,E=dA(V=m[U])),R=e;O<j;++O)(R=Uk(V>0?z[O]+" "+L:Xr(L,/&\f/g,z[O])))&&(b[K++]=R);return ry(e,t,r,c===0?$x:l,b,w,T)}function SA(e,t,r){return ry(e,t,r,jk,ey(gA()),dp(e,2,-2),0)}function fS(e,t,r,o){return ry(e,t,r,Bx,dp(e,0,o),dp(e,o+1,-1),o)}function zu(e,t){for(var r="",o=Ox(e),c=0;c<o;c++)r+=t(e[c],c,e,t)||"";return r}function CA(e,t,r,o){switch(e.type){case uA:if(e.children.length)break;case cA:case Bx:return e.return=e.return||e.value;case jk:return"";case Vk:return e.return=e.value+"{"+zu(e.children,o)+"}";case $x:e.value=e.props.join(",")}return Za(r=zu(e.children,o))?e.return=e.value+"{"+r+"}":""}function kA(e){var t=Ox(e);return function(r,o,c,d){for(var m="",l=0;l<t;l++)m+=e[l](r,o,c,d)||"";return m}}function IA(e){return function(t){t.root||(t=t.return)&&e(t)}}var TA=function(t,r,o){for(var c=0,d=0;c=d,d=Ja(),c===38&&d===12&&(r[o]=1),!hp(d);)Bo();return Np(t,Co)},PA=function(t,r){var o=-1,c=44;do switch(hp(c)){case 0:c===38&&Ja()===12&&(r[o]=1),t[o]+=TA(Co-1,r,o);break;case 2:t[o]+=Um(c);break;case 4:if(c===44){t[++o]=Ja()===58?"&\f":"",r[o]=t[o].length;break}default:t[o]+=ey(c)}while(c=Bo());return t},EA=function(t,r){return Gk(PA(Wk(t),r))},mS=new WeakMap,zA=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,o=t.parent,c=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!mS.get(o))&&!c){mS.set(t,!0);for(var d=[],m=EA(r,d),l=o.props,b=0,w=0;b<m.length;b++)for(var T=0;T<l.length;T++,w++)t.props[w]=d[b]?m[b].replace(/&\f/g,l[T]):l[T]+" "+m[b]}}},MA=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function qk(e,t){switch(pA(e,t)){case 5103:return Kr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Kr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Kr+e+ug+e+Hi+e+e;case 6828:case 4268:return Kr+e+Hi+e+e;case 6165:return Kr+e+Hi+"flex-"+e+e;case 5187:return Kr+e+Xr(e,/(\w+).+(:[^]+)/,Kr+"box-$1$2"+Hi+"flex-$1$2")+e;case 5443:return Kr+e+Hi+"flex-item-"+Xr(e,/flex-|-self/,"")+e;case 4675:return Kr+e+Hi+"flex-line-pack"+Xr(e,/align-content|flex-|-self/,"")+e;case 5548:return Kr+e+Hi+Xr(e,"shrink","negative")+e;case 5292:return Kr+e+Hi+Xr(e,"basis","preferred-size")+e;case 6060:return Kr+"box-"+Xr(e,"-grow","")+Kr+e+Hi+Xr(e,"grow","positive")+e;case 4554:return Kr+Xr(e,/([^-])(transform)/g,"$1"+Kr+"$2")+e;case 6187:return Xr(Xr(Xr(e,/(zoom-|grab)/,Kr+"$1"),/(image-set)/,Kr+"$1"),e,"")+e;case 5495:case 3959:return Xr(e,/(image-set\([^]*)/,Kr+"$1$`$1");case 4968:return Xr(Xr(e,/(.+:)(flex-)?(.*)/,Kr+"box-pack:$3"+Hi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Kr+e+e;case 4095:case 3583:case 4068:case 2532:return Xr(e,/(.+)-inline(.+)/,Kr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Za(e)-1-t>6)switch(Pi(e,t+1)){case 109:if(Pi(e,t+4)!==45)break;case 102:return Xr(e,/(.+:)(.+)-([^]+)/,"$1"+Kr+"$2-$3$1"+ug+(Pi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~m_(e,"stretch")?qk(Xr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Pi(e,t+1)!==115)break;case 6444:switch(Pi(e,Za(e)-3-(~m_(e,"!important")&&10))){case 107:return Xr(e,":",":"+Kr)+e;case 101:return Xr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Kr+(Pi(e,14)===45?"inline-":"")+"box$3$1"+Kr+"$2$3$1"+Hi+"$2box$3")+e}break;case 5936:switch(Pi(e,t+11)){case 114:return Kr+e+Hi+Xr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Kr+e+Hi+Xr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Kr+e+Hi+Xr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Kr+e+Hi+e+e}return e}var DA=function(t,r,o,c){if(t.length>-1&&!t.return)switch(t.type){case Bx:t.return=qk(t.value,t.length);break;case Vk:return zu([kh(t,{value:Xr(t.value,"@","@"+Kr)})],c);case $x:if(t.length)return mA(t.props,function(d){switch(fA(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return zu([kh(t,{props:[Xr(d,/:(read-\w+)/,":"+ug+"$1")]})],c);case"::placeholder":return zu([kh(t,{props:[Xr(d,/:(plac\w+)/,":"+Kr+"input-$1")]}),kh(t,{props:[Xr(d,/:(plac\w+)/,":"+ug+"$1")]}),kh(t,{props:[Xr(d,/:(plac\w+)/,Hi+"input-$1")]})],c)}return""})}},AA=[DA],Zk=function(t){var r=t.key;if(r==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(V){var K=V.getAttribute("data-emotion");K.indexOf(" ")!==-1&&(document.head.appendChild(V),V.setAttribute("data-s",""))})}var c=t.stylisPlugins||AA,d={},m,l=[];m=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(V){for(var K=V.getAttribute("data-emotion").split(" "),O=1;O<K.length;O++)d[K[O]]=!0;l.push(V)});var b,w=[zA,MA];{var T,E=[CA,IA(function(V){T.insert(V)})],z=kA(w.concat(c,E)),j=function(K){return zu(wA(K),z)};b=function(K,O,L,R){T=L,j(K?K+"{"+O.styles+"}":O.styles),R&&(U.inserted[O.name]=!0)}}var U={key:r,sheet:new lA({key:r,container:m,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:b};return U.sheet.hydrate(l),U},Kk={exports:{}},nn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _i=typeof Symbol=="function"&&Symbol.for,Fx=_i?Symbol.for("react.element"):60103,Nx=_i?Symbol.for("react.portal"):60106,ny=_i?Symbol.for("react.fragment"):60107,iy=_i?Symbol.for("react.strict_mode"):60108,oy=_i?Symbol.for("react.profiler"):60114,ay=_i?Symbol.for("react.provider"):60109,sy=_i?Symbol.for("react.context"):60110,jx=_i?Symbol.for("react.async_mode"):60111,ly=_i?Symbol.for("react.concurrent_mode"):60111,cy=_i?Symbol.for("react.forward_ref"):60112,uy=_i?Symbol.for("react.suspense"):60113,RA=_i?Symbol.for("react.suspense_list"):60120,dy=_i?Symbol.for("react.memo"):60115,hy=_i?Symbol.for("react.lazy"):60116,LA=_i?Symbol.for("react.block"):60121,$A=_i?Symbol.for("react.fundamental"):60117,BA=_i?Symbol.for("react.responder"):60118,OA=_i?Symbol.for("react.scope"):60119;function jo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Fx:switch(e=e.type,e){case jx:case ly:case ny:case oy:case iy:case uy:return e;default:switch(e=e&&e.$$typeof,e){case sy:case cy:case hy:case dy:case ay:return e;default:return t}}case Nx:return t}}}function Xk(e){return jo(e)===ly}nn.AsyncMode=jx;nn.ConcurrentMode=ly;nn.ContextConsumer=sy;nn.ContextProvider=ay;nn.Element=Fx;nn.ForwardRef=cy;nn.Fragment=ny;nn.Lazy=hy;nn.Memo=dy;nn.Portal=Nx;nn.Profiler=oy;nn.StrictMode=iy;nn.Suspense=uy;nn.isAsyncMode=function(e){return Xk(e)||jo(e)===jx};nn.isConcurrentMode=Xk;nn.isContextConsumer=function(e){return jo(e)===sy};nn.isContextProvider=function(e){return jo(e)===ay};nn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fx};nn.isForwardRef=function(e){return jo(e)===cy};nn.isFragment=function(e){return jo(e)===ny};nn.isLazy=function(e){return jo(e)===hy};nn.isMemo=function(e){return jo(e)===dy};nn.isPortal=function(e){return jo(e)===Nx};nn.isProfiler=function(e){return jo(e)===oy};nn.isStrictMode=function(e){return jo(e)===iy};nn.isSuspense=function(e){return jo(e)===uy};nn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ny||e===ly||e===oy||e===iy||e===uy||e===RA||typeof e=="object"&&e!==null&&(e.$$typeof===hy||e.$$typeof===dy||e.$$typeof===ay||e.$$typeof===sy||e.$$typeof===cy||e.$$typeof===$A||e.$$typeof===BA||e.$$typeof===OA||e.$$typeof===LA)};nn.typeOf=jo;Kk.exports=nn;var FA=Kk.exports,Jk=FA,NA={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},jA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Yk={};Yk[Jk.ForwardRef]=NA;Yk[Jk.Memo]=jA;var VA=!0;function UA(e,t,r){var o="";return r.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):o+=c+" "}),o}var Qk=function(t,r,o){var c=t.key+"-"+r.name;(o===!1||VA===!1)&&t.registered[c]===void 0&&(t.registered[c]=r.styles)},eI=function(t,r,o){Qk(t,r,o);var c=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var d=r;do t.insert(r===d?"."+c:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function HA(e){for(var t=0,r,o=0,c=e.length;c>=4;++o,c-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var WA={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},GA=!1,qA=/[A-Z]|^ms/g,ZA=/_EMO_([^_]+?)_([^]*?)_EMO_/g,tI=function(t){return t.charCodeAt(1)===45},gS=function(t){return t!=null&&typeof t!="boolean"},_0=Nk(function(e){return tI(e)?e:e.replace(qA,"-$&").toLowerCase()}),yS=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(ZA,function(o,c,d){return Ka={name:c,styles:d,next:Ka},c})}return WA[t]!==1&&!tI(t)&&typeof r=="number"&&r!==0?r+"px":r},KA="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function pp(e,t,r){if(r==null)return"";var o=r;if(o.__emotion_styles!==void 0)return o;switch(typeof r){case"boolean":return"";case"object":{var c=r;if(c.anim===1)return Ka={name:c.name,styles:c.styles,next:Ka},c.name;var d=r;if(d.styles!==void 0){var m=d.next;if(m!==void 0)for(;m!==void 0;)Ka={name:m.name,styles:m.styles,next:Ka},m=m.next;var l=d.styles+";";return l}return XA(e,t,r)}case"function":{if(e!==void 0){var b=Ka,w=r(e);return Ka=b,pp(e,t,w)}break}}var T=r;if(t==null)return T;var E=t[T];return E!==void 0?E:T}function XA(e,t,r){var o="";if(Array.isArray(r))for(var c=0;c<r.length;c++)o+=pp(e,t,r[c])+";";else for(var d in r){var m=r[d];if(typeof m!="object"){var l=m;t!=null&&t[l]!==void 0?o+=d+"{"+t[l]+"}":gS(l)&&(o+=_0(d)+":"+yS(d,l)+";")}else{if(d==="NO_COMPONENT_SELECTOR"&&GA)throw new Error(KA);if(Array.isArray(m)&&typeof m[0]=="string"&&(t==null||t[m[0]]===void 0))for(var b=0;b<m.length;b++)gS(m[b])&&(o+=_0(d)+":"+yS(d,m[b])+";");else{var w=pp(e,t,m);switch(d){case"animation":case"animationName":{o+=_0(d)+":"+w+";";break}default:o+=d+"{"+w+"}"}}}}return o}var vS=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ka;function Vx(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var o=!0,c="";Ka=void 0;var d=e[0];if(d==null||d.raw===void 0)o=!1,c+=pp(r,t,d);else{var m=d;c+=m[0]}for(var l=1;l<e.length;l++)if(c+=pp(r,t,e[l]),o){var b=d;c+=b[l]}vS.lastIndex=0;for(var w="",T;(T=vS.exec(c))!==null;)w+="-"+T[1];var E=HA(c)+w;return{name:E,styles:c,next:Ka}}var JA=function(t){return t()},rI=cg.useInsertionEffect?cg.useInsertionEffect:!1,YA=rI||JA,_S=rI||A.useLayoutEffect,nI=A.createContext(typeof HTMLElement<"u"?Zk({key:"css"}):null),QA=nI.Provider,iI=function(t){return A.forwardRef(function(r,o){var c=A.useContext(nI);return t(r,c,o)})},jp=A.createContext({}),eR=iI(function(e,t){var r=e.styles,o=Vx([r],void 0,A.useContext(jp)),c=A.useRef();return _S(function(){var d=t.key+"-global",m=new t.sheet.constructor({key:d,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),l=!1,b=document.querySelector('style[data-emotion="'+d+" "+o.name+'"]');return t.sheet.tags.length&&(m.before=t.sheet.tags[0]),b!==null&&(l=!0,b.setAttribute("data-emotion",d),m.hydrate([b])),c.current=[m,l],function(){m.flush()}},[t]),_S(function(){var d=c.current,m=d[0],l=d[1];if(l){d[1]=!1;return}if(o.next!==void 0&&eI(t,o.next,!0),m.tags.length){var b=m.tags[m.tags.length-1].nextElementSibling;m.before=b,m.flush()}t.insert("",o,m,!1)},[t,o.name]),null});function Ux(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Vx(t)}var oI=function(){var t=Ux.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},tR=iA,rR=function(t){return t!=="theme"},xS=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?tR:rR},bS=function(t,r,o){var c;if(r){var d=r.shouldForwardProp;c=t.__emotion_forwardProp&&d?function(m){return t.__emotion_forwardProp(m)&&d(m)}:d}return typeof c!="function"&&o&&(c=t.__emotion_forwardProp),c},nR=!1,iR=function(t){var r=t.cache,o=t.serialized,c=t.isStringTag;return Qk(r,o,c),YA(function(){return eI(r,o,c)}),null},oR=function e(t,r){var o=t.__emotion_real===t,c=o&&t.__emotion_base||t,d,m;r!==void 0&&(d=r.label,m=r.target);var l=bS(t,r,o),b=l||xS(c),w=!b("as");return function(){var T=arguments,E=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&E.push("label:"+d+";"),T[0]==null||T[0].raw===void 0)E.push.apply(E,T);else{E.push(T[0][0]);for(var z=T.length,j=1;j<z;j++)E.push(T[j],T[0][j])}var U=iI(function(V,K,O){var L=w&&V.as||c,R="",re=[],J=V;if(V.theme==null){J={};for(var se in V)J[se]=V[se];J.theme=A.useContext(jp)}typeof V.className=="string"?R=UA(K.registered,re,V.className):V.className!=null&&(R=V.className+" ");var ie=Vx(E.concat(re),K.registered,J);R+=K.key+"-"+ie.name,m!==void 0&&(R+=" "+m);var Z=w&&l===void 0?xS(L):b,ke={};for(var xe in V)w&&xe==="as"||Z(xe)&&(ke[xe]=V[xe]);return ke.className=R,O&&(ke.ref=O),A.createElement(A.Fragment,null,A.createElement(iR,{cache:K,serialized:ie,isStringTag:typeof L=="string"}),A.createElement(L,ke))});return U.displayName=d!==void 0?d:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",U.defaultProps=t.defaultProps,U.__emotion_real=U,U.__emotion_base=c,U.__emotion_styles=E,U.__emotion_forwardProp=l,Object.defineProperty(U,"toString",{value:function(){return m===void 0&&nR?"NO_COMPONENT_SELECTOR":"."+m}}),U.withComponent=function(V,K){return e(V,W({},r,K,{shouldForwardProp:bS(U,K,!0)})).apply(void 0,E)},U}},aR=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],y_=oR.bind();aR.forEach(function(e){y_[e]=y_(e)});let v_;typeof document=="object"&&(v_=Zk({key:"css",prepend:!0}));function sR(e){const{injectFirst:t,children:r}=e;return t&&v_?Y.jsx(QA,{value:v_,children:r}):r}function lR(e){return e==null||Object.keys(e).length===0}function Kh(e){const{styles:t,defaultTheme:r={}}=e,o=typeof t=="function"?c=>t(lR(c)?r:c):t;return Y.jsx(eR,{styles:o})}function aI(e,t){return y_(e,t)}const sI=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},cR=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:Kh,StyledEngineProvider:sR,ThemeContext:jp,css:Ux,default:aI,internal_processStyles:sI,keyframes:oI},Symbol.toStringTag,{value:"Module"}));function Wt(e,t){if(e==null)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.includes(o))continue;r[o]=e[o]}return r}function ws(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function lI(e){if(!ws(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=lI(e[r])}),t}function di(e,t,r={clone:!0}){const o=r.clone?W({},e):e;return ws(e)&&ws(t)&&Object.keys(t).forEach(c=>{ws(t[c])&&Object.prototype.hasOwnProperty.call(e,c)&&ws(e[c])?o[c]=di(e[c],t[c],r):r.clone?o[c]=ws(t[c])?lI(t[c]):t[c]:o[c]=t[c]}),o}const uR=Object.freeze(Object.defineProperty({__proto__:null,default:di,isPlainObject:ws},Symbol.toStringTag,{value:"Module"})),dR=["values","unit","step"],hR=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,o)=>r.val-o.val),t.reduce((r,o)=>W({},r,{[o.key]:o.val}),{})};function Hx(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:o=5}=e,c=Wt(e,dR),d=hR(t),m=Object.keys(d);function l(z){return`@media (min-width:${typeof t[z]=="number"?t[z]:z}${r})`}function b(z){return`@media (max-width:${(typeof t[z]=="number"?t[z]:z)-o/100}${r})`}function w(z,j){const U=m.indexOf(j);return`@media (min-width:${typeof t[z]=="number"?t[z]:z}${r}) and (max-width:${(U!==-1&&typeof t[m[U]]=="number"?t[m[U]]:j)-o/100}${r})`}function T(z){return m.indexOf(z)+1<m.length?w(z,m[m.indexOf(z)+1]):l(z)}function E(z){const j=m.indexOf(z);return j===0?l(m[1]):j===m.length-1?b(m[j]):w(z,m[m.indexOf(z)+1]).replace("@media","@media not all and")}return W({keys:m,values:d,up:l,down:b,between:w,only:T,not:E,unit:r},c)}const pR={borderRadius:4};function Xh(e,t){return t?di(e,t,{clone:!1}):e}const Wx={xs:0,sm:600,md:900,lg:1200,xl:1536},wS={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Wx[e]}px)`};function La(e,t,r){const o=e.theme||{};if(Array.isArray(t)){const d=o.breakpoints||wS;return t.reduce((m,l,b)=>(m[d.up(d.keys[b])]=r(t[b]),m),{})}if(typeof t=="object"){const d=o.breakpoints||wS;return Object.keys(t).reduce((m,l)=>{if(Object.keys(d.values||Wx).indexOf(l)!==-1){const b=d.up(l);m[b]=r(t[l],l)}else{const b=l;m[b]=t[b]}return m},{})}return r(t)}function cI(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,c)=>{const d=e.up(c);return o[d]={},o},{}))||{}}function uI(e,t){return e.reduce((r,o)=>{const c=r[o];return(!c||Object.keys(c).length===0)&&delete r[o],r},t)}function fR(e,...t){const r=cI(e),o=[r,...t].reduce((c,d)=>di(c,d),{});return uI(Object.keys(r),o)}function mR(e,t){if(typeof e!="object")return{};const r={},o=Object.keys(t);return Array.isArray(e)?o.forEach((c,d)=>{d<e.length&&(r[c]=!0)}):o.forEach(c=>{e[c]!=null&&(r[c]=!0)}),r}function x0({values:e,breakpoints:t,base:r}){const o=r||mR(e,t),c=Object.keys(o);if(c.length===0)return e;let d;return c.reduce((m,l,b)=>(Array.isArray(e)?(m[l]=e[b]!=null?e[b]:e[d],d=b):typeof e=="object"?(m[l]=e[l]!=null?e[l]:e[d],d=l):m[l]=e,m),{})}function bt(e){if(typeof e!="string")throw new Error(Is(7));return e.charAt(0).toUpperCase()+e.slice(1)}const gR=Object.freeze(Object.defineProperty({__proto__:null,default:bt},Symbol.toStringTag,{value:"Module"}));function xl(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const o=`vars.${t}`.split(".").reduce((c,d)=>c&&c[d]?c[d]:null,e);if(o!=null)return o}return t.split(".").reduce((o,c)=>o&&o[c]!=null?o[c]:null,e)}function dg(e,t,r,o=r){let c;return typeof e=="function"?c=e(r):Array.isArray(e)?c=e[r]||o:c=xl(e,r)||o,t&&(c=t(c,o,e)),c}function Jn(e){const{prop:t,cssProperty:r=e.prop,themeKey:o,transform:c}=e,d=m=>{if(m[t]==null)return null;const l=m[t],b=m.theme,w=xl(b,o)||{};return La(m,l,E=>{let z=dg(w,c,E);return E===z&&typeof E=="string"&&(z=dg(w,c,`${t}${E==="default"?"":bt(E)}`,E)),r===!1?z:{[r]:z}})};return d.propTypes={},d.filterProps=[t],d}function yR(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const vR={m:"margin",p:"padding"},_R={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},SS={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},xR=yR(e=>{if(e.length>2)if(SS[e])e=SS[e];else return[e];const[t,r]=e.split(""),o=vR[t],c=_R[r]||"";return Array.isArray(c)?c.map(d=>o+d):[o+c]}),Gx=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],qx=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Gx,...qx];function Vp(e,t,r,o){var c;const d=(c=xl(e,t,!1))!=null?c:r;return typeof d=="number"?m=>typeof m=="string"?m:d*m:Array.isArray(d)?m=>typeof m=="string"?m:d[m]:typeof d=="function"?d:()=>{}}function Zx(e){return Vp(e,"spacing",8)}function pc(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),o=e(r);return t>=0?o:typeof o=="number"?-o:`-${o}`}function bR(e,t){return r=>e.reduce((o,c)=>(o[c]=pc(t,r),o),{})}function wR(e,t,r,o){if(t.indexOf(r)===-1)return null;const c=xR(r),d=bR(c,o),m=e[r];return La(e,m,d)}function dI(e,t){const r=Zx(e.theme);return Object.keys(e).map(o=>wR(e,t,o,r)).reduce(Xh,{})}function Fn(e){return dI(e,Gx)}Fn.propTypes={};Fn.filterProps=Gx;function Nn(e){return dI(e,qx)}Nn.propTypes={};Nn.filterProps=qx;function hI(e=8){if(e.mui)return e;const t=Zx({spacing:e}),r=(...o)=>(o.length===0?[1]:o).map(d=>{const m=t(d);return typeof m=="number"?`${m}px`:m}).join(" ");return r.mui=!0,r}function py(...e){const t=e.reduce((o,c)=>(c.filterProps.forEach(d=>{o[d]=c}),o),{}),r=o=>Object.keys(o).reduce((c,d)=>t[d]?Xh(c,t[d](o)):c,{});return r.propTypes={},r.filterProps=e.reduce((o,c)=>o.concat(c.filterProps),[]),r}function ea(e){return typeof e!="number"?e:`${e}px solid`}function ha(e,t){return Jn({prop:e,themeKey:"borders",transform:t})}const SR=ha("border",ea),CR=ha("borderTop",ea),kR=ha("borderRight",ea),IR=ha("borderBottom",ea),TR=ha("borderLeft",ea),PR=ha("borderColor"),ER=ha("borderTopColor"),zR=ha("borderRightColor"),MR=ha("borderBottomColor"),DR=ha("borderLeftColor"),AR=ha("outline",ea),RR=ha("outlineColor"),fy=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Vp(e.theme,"shape.borderRadius",4),r=o=>({borderRadius:pc(t,o)});return La(e,e.borderRadius,r)}return null};fy.propTypes={};fy.filterProps=["borderRadius"];py(SR,CR,kR,IR,TR,PR,ER,zR,MR,DR,fy,AR,RR);const my=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Vp(e.theme,"spacing",8),r=o=>({gap:pc(t,o)});return La(e,e.gap,r)}return null};my.propTypes={};my.filterProps=["gap"];const gy=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Vp(e.theme,"spacing",8),r=o=>({columnGap:pc(t,o)});return La(e,e.columnGap,r)}return null};gy.propTypes={};gy.filterProps=["columnGap"];const yy=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Vp(e.theme,"spacing",8),r=o=>({rowGap:pc(t,o)});return La(e,e.rowGap,r)}return null};yy.propTypes={};yy.filterProps=["rowGap"];const LR=Jn({prop:"gridColumn"}),$R=Jn({prop:"gridRow"}),BR=Jn({prop:"gridAutoFlow"}),OR=Jn({prop:"gridAutoColumns"}),FR=Jn({prop:"gridAutoRows"}),NR=Jn({prop:"gridTemplateColumns"}),jR=Jn({prop:"gridTemplateRows"}),VR=Jn({prop:"gridTemplateAreas"}),UR=Jn({prop:"gridArea"});py(my,gy,yy,LR,$R,BR,OR,FR,NR,jR,VR,UR);function Mu(e,t){return t==="grey"?t:e}const HR=Jn({prop:"color",themeKey:"palette",transform:Mu}),WR=Jn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Mu}),GR=Jn({prop:"backgroundColor",themeKey:"palette",transform:Mu});py(HR,WR,GR);function Ao(e){return e<=1&&e!==0?`${e*100}%`:e}const qR=Jn({prop:"width",transform:Ao}),Kx=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var o,c;const d=((o=e.theme)==null||(o=o.breakpoints)==null||(o=o.values)==null?void 0:o[r])||Wx[r];return d?((c=e.theme)==null||(c=c.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${d}${e.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:Ao(r)}};return La(e,e.maxWidth,t)}return null};Kx.filterProps=["maxWidth"];const ZR=Jn({prop:"minWidth",transform:Ao}),KR=Jn({prop:"height",transform:Ao}),XR=Jn({prop:"maxHeight",transform:Ao}),JR=Jn({prop:"minHeight",transform:Ao});Jn({prop:"size",cssProperty:"width",transform:Ao});Jn({prop:"size",cssProperty:"height",transform:Ao});const YR=Jn({prop:"boxSizing"});py(qR,Kx,ZR,KR,XR,JR,YR);const sd={border:{themeKey:"borders",transform:ea},borderTop:{themeKey:"borders",transform:ea},borderRight:{themeKey:"borders",transform:ea},borderBottom:{themeKey:"borders",transform:ea},borderLeft:{themeKey:"borders",transform:ea},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ea},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:fy},color:{themeKey:"palette",transform:Mu},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Mu},backgroundColor:{themeKey:"palette",transform:Mu},p:{style:Nn},pt:{style:Nn},pr:{style:Nn},pb:{style:Nn},pl:{style:Nn},px:{style:Nn},py:{style:Nn},padding:{style:Nn},paddingTop:{style:Nn},paddingRight:{style:Nn},paddingBottom:{style:Nn},paddingLeft:{style:Nn},paddingX:{style:Nn},paddingY:{style:Nn},paddingInline:{style:Nn},paddingInlineStart:{style:Nn},paddingInlineEnd:{style:Nn},paddingBlock:{style:Nn},paddingBlockStart:{style:Nn},paddingBlockEnd:{style:Nn},m:{style:Fn},mt:{style:Fn},mr:{style:Fn},mb:{style:Fn},ml:{style:Fn},mx:{style:Fn},my:{style:Fn},margin:{style:Fn},marginTop:{style:Fn},marginRight:{style:Fn},marginBottom:{style:Fn},marginLeft:{style:Fn},marginX:{style:Fn},marginY:{style:Fn},marginInline:{style:Fn},marginInlineStart:{style:Fn},marginInlineEnd:{style:Fn},marginBlock:{style:Fn},marginBlockStart:{style:Fn},marginBlockEnd:{style:Fn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:my},rowGap:{style:yy},columnGap:{style:gy},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ao},maxWidth:{style:Kx},minWidth:{transform:Ao},height:{transform:Ao},maxHeight:{transform:Ao},minHeight:{transform:Ao},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function QR(...e){const t=e.reduce((o,c)=>o.concat(Object.keys(c)),[]),r=new Set(t);return e.every(o=>r.size===Object.keys(o).length)}function eL(e,t){return typeof e=="function"?e(t):e}function pI(){function e(r,o,c,d){const m={[r]:o,theme:c},l=d[r];if(!l)return{[r]:o};const{cssProperty:b=r,themeKey:w,transform:T,style:E}=l;if(o==null)return null;if(w==="typography"&&o==="inherit")return{[r]:o};const z=xl(c,w)||{};return E?E(m):La(m,o,U=>{let V=dg(z,T,U);return U===V&&typeof U=="string"&&(V=dg(z,T,`${r}${U==="default"?"":bt(U)}`,U)),b===!1?V:{[b]:V}})}function t(r){var o;const{sx:c,theme:d={}}=r||{};if(!c)return null;const m=(o=d.unstable_sxConfig)!=null?o:sd;function l(b){let w=b;if(typeof b=="function")w=b(d);else if(typeof b!="object")return b;if(!w)return null;const T=cI(d.breakpoints),E=Object.keys(T);let z=T;return Object.keys(w).forEach(j=>{const U=eL(w[j],d);if(U!=null)if(typeof U=="object")if(m[j])z=Xh(z,e(j,U,d,m));else{const V=La({theme:d},U,K=>({[j]:K}));QR(V,U)?z[j]=t({sx:U,theme:d}):z=Xh(z,V)}else z=Xh(z,e(j,U,d,m))}),uI(E,z)}return Array.isArray(c)?c.map(l):l(c)}return t}const ld=pI();ld.filterProps=["sx"];function Xx(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const tL=["breakpoints","palette","spacing","shape"];function Up(e={},...t){const{breakpoints:r={},palette:o={},spacing:c,shape:d={}}=e,m=Wt(e,tL),l=Hx(r),b=hI(c);let w=di({breakpoints:l,direction:"ltr",components:{},palette:W({mode:"light"},o),spacing:b,shape:W({},pR,d)},m);return w.applyStyles=Xx,w=t.reduce((T,E)=>di(T,E),w),w.unstable_sxConfig=W({},sd,m==null?void 0:m.unstable_sxConfig),w.unstable_sx=function(E){return ld({sx:E,theme:this})},w}const rL=Object.freeze(Object.defineProperty({__proto__:null,default:Up,private_createBreakpoints:Hx,unstable_applyStyles:Xx},Symbol.toStringTag,{value:"Module"}));function nL(e){return Object.keys(e).length===0}function fI(e=null){const t=A.useContext(jp);return!t||nL(t)?e:t}const iL=Up();function mI(e=iL){return fI(e)}function oL({styles:e,themeId:t,defaultTheme:r={}}){const o=mI(r),c=typeof e=="function"?e(t&&o[t]||o):e;return Y.jsx(Kh,{styles:c})}const aL=["sx"],sL=e=>{var t,r;const o={systemProps:{},otherProps:{}},c=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:sd;return Object.keys(e).forEach(d=>{c[d]?o.systemProps[d]=e[d]:o.otherProps[d]=e[d]}),o};function Jx(e){const{sx:t}=e,r=Wt(e,aL),{systemProps:o,otherProps:c}=sL(r);let d;return Array.isArray(t)?d=[o,...t]:typeof t=="function"?d=(...m)=>{const l=t(...m);return ws(l)?W({},o,l):o}:d=W({},o,t),W({},c,{sx:d})}const lL=Object.freeze(Object.defineProperty({__proto__:null,default:ld,extendSxProp:Jx,unstable_createStyleFunctionSx:pI,unstable_defaultSxConfig:sd},Symbol.toStringTag,{value:"Module"})),CS=e=>e,cL=()=>{let e=CS;return{configure(t){e=t},generate(t){return e(t)},reset(){e=CS}}},uL=cL();function gI(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(r=gI(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function oi(){for(var e,t,r=0,o="",c=arguments.length;r<c;r++)(e=arguments[r])&&(t=gI(e))&&(o&&(o+=" "),o+=t);return o}const yI={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function vy(e,t,r="Mui"){const o=yI[t];return o?`${r}-${o}`:`${uL.generate(e)}-${t}`}function vI(e,t,r="Mui"){const o={};return t.forEach(c=>{o[c]=vy(e,c,r)}),o}var _I={exports:{}},on={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yx=Symbol.for("react.element"),Qx=Symbol.for("react.portal"),_y=Symbol.for("react.fragment"),xy=Symbol.for("react.strict_mode"),by=Symbol.for("react.profiler"),wy=Symbol.for("react.provider"),Sy=Symbol.for("react.context"),dL=Symbol.for("react.server_context"),Cy=Symbol.for("react.forward_ref"),ky=Symbol.for("react.suspense"),Iy=Symbol.for("react.suspense_list"),Ty=Symbol.for("react.memo"),Py=Symbol.for("react.lazy"),hL=Symbol.for("react.offscreen"),xI;xI=Symbol.for("react.module.reference");function pa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Yx:switch(e=e.type,e){case _y:case by:case xy:case ky:case Iy:return e;default:switch(e=e&&e.$$typeof,e){case dL:case Sy:case Cy:case Py:case Ty:case wy:return e;default:return t}}case Qx:return t}}}on.ContextConsumer=Sy;on.ContextProvider=wy;on.Element=Yx;on.ForwardRef=Cy;on.Fragment=_y;on.Lazy=Py;on.Memo=Ty;on.Portal=Qx;on.Profiler=by;on.StrictMode=xy;on.Suspense=ky;on.SuspenseList=Iy;on.isAsyncMode=function(){return!1};on.isConcurrentMode=function(){return!1};on.isContextConsumer=function(e){return pa(e)===Sy};on.isContextProvider=function(e){return pa(e)===wy};on.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Yx};on.isForwardRef=function(e){return pa(e)===Cy};on.isFragment=function(e){return pa(e)===_y};on.isLazy=function(e){return pa(e)===Py};on.isMemo=function(e){return pa(e)===Ty};on.isPortal=function(e){return pa(e)===Qx};on.isProfiler=function(e){return pa(e)===by};on.isStrictMode=function(e){return pa(e)===xy};on.isSuspense=function(e){return pa(e)===ky};on.isSuspenseList=function(e){return pa(e)===Iy};on.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===_y||e===by||e===xy||e===ky||e===Iy||e===hL||typeof e=="object"&&e!==null&&(e.$$typeof===Py||e.$$typeof===Ty||e.$$typeof===wy||e.$$typeof===Sy||e.$$typeof===Cy||e.$$typeof===xI||e.getModuleId!==void 0)};on.typeOf=pa;_I.exports=on;var kS=_I.exports;const pL=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function bI(e){const t=`${e}`.match(pL);return t&&t[1]||""}function wI(e,t=""){return e.displayName||e.name||bI(e)||t}function IS(e,t,r){const o=wI(t);return e.displayName||(o!==""?`${r}(${o})`:r)}function fL(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return wI(e,"Component");if(typeof e=="object")switch(e.$$typeof){case kS.ForwardRef:return IS(e,e.render,"ForwardRef");case kS.Memo:return IS(e,e.type,"memo");default:return}}}const mL=Object.freeze(Object.defineProperty({__proto__:null,default:fL,getFunctionName:bI},Symbol.toStringTag,{value:"Module"})),gL=["ownerState"],yL=["variants"],vL=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function _L(e){return Object.keys(e).length===0}function xL(e){return typeof e=="string"&&e.charCodeAt(0)>96}function b0(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const bL=Up(),wL=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function ym({defaultTheme:e,theme:t,themeId:r}){return _L(t)?e:t[r]||t}function SL(e){return e?(t,r)=>r[e]:null}function Wm(e,t){let{ownerState:r}=t,o=Wt(t,gL);const c=typeof e=="function"?e(W({ownerState:r},o)):e;if(Array.isArray(c))return c.flatMap(d=>Wm(d,W({ownerState:r},o)));if(c&&typeof c=="object"&&Array.isArray(c.variants)){const{variants:d=[]}=c;let l=Wt(c,yL);return d.forEach(b=>{let w=!0;typeof b.props=="function"?w=b.props(W({ownerState:r},o,r)):Object.keys(b.props).forEach(T=>{(r==null?void 0:r[T])!==b.props[T]&&o[T]!==b.props[T]&&(w=!1)}),w&&(Array.isArray(l)||(l=[l]),l.push(typeof b.style=="function"?b.style(W({ownerState:r},o,r)):b.style))}),l}return c}function SI(e={}){const{themeId:t,defaultTheme:r=bL,rootShouldForwardProp:o=b0,slotShouldForwardProp:c=b0}=e,d=m=>ld(W({},m,{theme:ym(W({},m,{defaultTheme:r,themeId:t}))}));return d.__mui_systemSx=!0,(m,l={})=>{sI(m,J=>J.filter(se=>!(se!=null&&se.__mui_systemSx)));const{name:b,slot:w,skipVariantsResolver:T,skipSx:E,overridesResolver:z=SL(wL(w))}=l,j=Wt(l,vL),U=T!==void 0?T:w&&w!=="Root"&&w!=="root"||!1,V=E||!1;let K,O=b0;w==="Root"||w==="root"?O=o:w?O=c:xL(m)&&(O=void 0);const L=aI(m,W({shouldForwardProp:O,label:K},j)),R=J=>typeof J=="function"&&J.__emotion_real!==J||ws(J)?se=>Wm(J,W({},se,{theme:ym({theme:se.theme,defaultTheme:r,themeId:t})})):J,re=(J,...se)=>{let ie=R(J);const Z=se?se.map(R):[];b&&z&&Z.push(Ie=>{const ze=ym(W({},Ie,{defaultTheme:r,themeId:t}));if(!ze.components||!ze.components[b]||!ze.components[b].styleOverrides)return null;const Le=ze.components[b].styleOverrides,Ye={};return Object.entries(Le).forEach(([Ge,Te])=>{Ye[Ge]=Wm(Te,W({},Ie,{theme:ze}))}),z(Ie,Ye)}),b&&!U&&Z.push(Ie=>{var ze;const Le=ym(W({},Ie,{defaultTheme:r,themeId:t})),Ye=Le==null||(ze=Le.components)==null||(ze=ze[b])==null?void 0:ze.variants;return Wm({variants:Ye},W({},Ie,{theme:Le}))}),V||Z.push(d);const ke=Z.length-se.length;if(Array.isArray(J)&&ke>0){const Ie=new Array(ke).fill("");ie=[...J,...Ie],ie.raw=[...J.raw,...Ie]}const xe=L(ie,...Z);return m.muiName&&(xe.muiName=m.muiName),xe};return L.withConfig&&(re.withConfig=L.withConfig),re}}const CL=SI();function hg(e,t){const r=W({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))r[o]=W({},e[o],r[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const c=e[o]||{},d=t[o];r[o]={},!d||!Object.keys(d)?r[o]=c:!c||!Object.keys(c)?r[o]=d:(r[o]=W({},d),Object.keys(c).forEach(m=>{r[o][m]=hg(c[m],d[m])}))}else r[o]===void 0&&(r[o]=e[o])}),r}function kL(e){const{theme:t,name:r,props:o}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?o:hg(t.components[r].defaultProps,o)}function CI({props:e,name:t,defaultTheme:r,themeId:o}){let c=mI(r);return o&&(c=c[o]||c),kL({theme:c,name:t,props:e})}const Ts=typeof window<"u"?A.useLayoutEffect:A.useEffect;function IL(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}const TL=Object.freeze(Object.defineProperty({__proto__:null,default:IL},Symbol.toStringTag,{value:"Module"}));function PL(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,c)=>c<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function kI(e){if(e.type)return e;if(e.charAt(0)==="#")return kI(PL(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(Is(9,e));let o=e.substring(t+1,e.length-1),c;if(r==="color"){if(o=o.split(" "),c=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error(Is(10,c))}else o=o.split(",");return o=o.map(d=>parseFloat(d)),{type:r,values:o,colorSpace:c}}const Yl=e=>{const t=kI(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};function TS(...e){return e.reduce((t,r)=>r==null?t:function(...c){t.apply(this,c),r.apply(this,c)},()=>{})}function e1(e,t){var r,o;return A.isValidElement(e)&&t.indexOf((r=e.type.muiName)!=null?r:(o=e.type)==null||(o=o._payload)==null||(o=o.value)==null?void 0:o.muiName)!==-1}function Ya(e){return e&&e.ownerDocument||document}function t1(e){return Ya(e).defaultView||window}function pg(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let PS=0;function EL(e){const[t,r]=A.useState(e),o=e||t;return A.useEffect(()=>{t==null&&(PS+=1,r(`mui-${PS}`))},[t]),o}const ES=cg.useId;function ko(e){if(ES!==void 0){const t=ES();return e??t}return EL(e)}function Du({controlled:e,default:t,name:r,state:o="value"}){const{current:c}=A.useRef(e!==void 0),[d,m]=A.useState(t),l=c?e:d,b=A.useCallback(w=>{c||m(w)},[]);return[l,b]}function ll(e){const t=A.useRef(e);return Ts(()=>{t.current=e}),A.useRef((...r)=>(0,t.current)(...r)).current}function tn(...e){return A.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(r=>{pg(r,t)})},e)}const zS={};function zL(e,t){const r=A.useRef(zS);return r.current===zS&&(r.current=e(t)),r}const ML=[];function DL(e){A.useEffect(e,ML)}class Hp{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new Hp}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function vm(){const e=zL(Hp.create).current;return DL(e.disposeEffect),e}let Ey=!0,__=!1;const AL=new Hp,RL={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function LL(e){const{type:t,tagName:r}=e;return!!(r==="INPUT"&&RL[t]&&!e.readOnly||r==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function $L(e){e.metaKey||e.altKey||e.ctrlKey||(Ey=!0)}function w0(){Ey=!1}function BL(){this.visibilityState==="hidden"&&__&&(Ey=!0)}function OL(e){e.addEventListener("keydown",$L,!0),e.addEventListener("mousedown",w0,!0),e.addEventListener("pointerdown",w0,!0),e.addEventListener("touchstart",w0,!0),e.addEventListener("visibilitychange",BL,!0)}function FL(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return Ey||LL(t)}function r1(){const e=A.useCallback(c=>{c!=null&&OL(c.ownerDocument)},[]),t=A.useRef(!1);function r(){return t.current?(__=!0,AL.start(100,()=>{__=!1}),t.current=!1,!0):!1}function o(c){return FL(c)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:o,onBlur:r,ref:e}}function NL(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const jL=e=>{const t=A.useRef({});return A.useEffect(()=>{t.current=e}),t.current},VL={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function Rr(e,t,r=void 0){const o={};return Object.keys(e).forEach(c=>{o[c]=e[c].reduce((d,m)=>{if(m){const l=t(m);l!==""&&d.push(l),r&&r[m]&&d.push(r[m])}return d},[]).join(" ")}),o}const II=A.createContext(null);function n1(){return A.useContext(II)}const UL=typeof Symbol=="function"&&Symbol.for,HL=UL?Symbol.for("mui.nested"):"__THEME_NESTED__";function WL(e,t){return typeof t=="function"?t(e):W({},e,t)}function GL(e){const{children:t,theme:r}=e,o=n1(),c=A.useMemo(()=>{const d=o===null?r:WL(o,r);return d!=null&&(d[HL]=o!==null),d},[r,o]);return Y.jsx(II.Provider,{value:c,children:t})}const qL=["value"],ZL=A.createContext();function KL(e){let{value:t}=e,r=Wt(e,qL);return Y.jsx(ZL.Provider,W({value:t??!0},r))}const TI=A.createContext(void 0);function XL({value:e,children:t}){return Y.jsx(TI.Provider,{value:e,children:t})}function JL(e){const{theme:t,name:r,props:o}=e;if(!t||!t.components||!t.components[r])return o;const c=t.components[r];return c.defaultProps?hg(c.defaultProps,o):!c.styleOverrides&&!c.variants?hg(c,o):o}function YL({props:e,name:t}){const r=A.useContext(TI);return JL({props:e,name:t,theme:{components:r}})}const MS={};function DS(e,t,r,o=!1){return A.useMemo(()=>{const c=e&&t[e]||t;if(typeof r=="function"){const d=r(c),m=e?W({},t,{[e]:d}):d;return o?()=>m:m}return e?W({},t,{[e]:r}):W({},t,r)},[e,t,r,o])}function QL(e){const{children:t,theme:r,themeId:o}=e,c=fI(MS),d=n1()||MS,m=DS(o,c,r),l=DS(o,d,r,!0),b=m.direction==="rtl";return Y.jsx(GL,{theme:l,children:Y.jsx(jp.Provider,{value:m,children:Y.jsx(KL,{value:b,children:Y.jsx(XL,{value:m==null?void 0:m.components,children:t})})})})}const i1="mode",o1="color-scheme",PI="data-color-scheme";function e5(e){const{defaultMode:t="light",defaultLightColorScheme:r="light",defaultDarkColorScheme:o="dark",modeStorageKey:c=i1,colorSchemeStorageKey:d=o1,attribute:m=PI,colorSchemeNode:l="document.documentElement",nonce:b}=e||{};return Y.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?b:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${c}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${d}-dark') || '${o}';
    } else {
      colorScheme = localStorage.getItem('${d}-light') || '${r}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${d}-light') || '${r}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${d}-dark') || '${o}';
  }
  if (colorScheme) {
    ${l}.setAttribute('${m}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function AS(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function EI(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function t5(e){return EI(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function S0(e,t){if(typeof window>"u")return;let r;try{r=localStorage.getItem(e)||void 0,r||localStorage.setItem(e,t)}catch{}return r||t}function r5(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:o,supportedColorSchemes:c=[],modeStorageKey:d=i1,colorSchemeStorageKey:m=o1,storageWindow:l=typeof window>"u"?void 0:window}=e,b=c.join(","),[w,T]=A.useState(()=>{const K=S0(d,t),O=S0(`${m}-light`,r),L=S0(`${m}-dark`,o);return{mode:K,systemMode:AS(K),lightColorScheme:O,darkColorScheme:L}}),E=t5(w),z=A.useCallback(K=>{T(O=>{if(K===O.mode)return O;const L=K??t;try{localStorage.setItem(d,L)}catch{}return W({},O,{mode:L,systemMode:AS(L)})})},[d,t]),j=A.useCallback(K=>{K?typeof K=="string"?K&&!b.includes(K)?console.error(`\`${K}\` does not exist in \`theme.colorSchemes\`.`):T(O=>{const L=W({},O);return EI(O,R=>{try{localStorage.setItem(`${m}-${R}`,K)}catch{}R==="light"&&(L.lightColorScheme=K),R==="dark"&&(L.darkColorScheme=K)}),L}):T(O=>{const L=W({},O),R=K.light===null?r:K.light,re=K.dark===null?o:K.dark;if(R)if(!b.includes(R))console.error(`\`${R}\` does not exist in \`theme.colorSchemes\`.`);else{L.lightColorScheme=R;try{localStorage.setItem(`${m}-light`,R)}catch{}}if(re)if(!b.includes(re))console.error(`\`${re}\` does not exist in \`theme.colorSchemes\`.`);else{L.darkColorScheme=re;try{localStorage.setItem(`${m}-dark`,re)}catch{}}return L}):T(O=>{try{localStorage.setItem(`${m}-light`,r),localStorage.setItem(`${m}-dark`,o)}catch{}return W({},O,{lightColorScheme:r,darkColorScheme:o})})},[b,m,r,o]),U=A.useCallback(K=>{w.mode==="system"&&T(O=>{const L=K!=null&&K.matches?"dark":"light";return O.systemMode===L?O:W({},O,{systemMode:L})})},[w.mode]),V=A.useRef(U);return V.current=U,A.useEffect(()=>{const K=(...L)=>V.current(...L),O=window.matchMedia("(prefers-color-scheme: dark)");return O.addListener(K),K(O),()=>{O.removeListener(K)}},[]),A.useEffect(()=>{if(l){const K=O=>{const L=O.newValue;typeof O.key=="string"&&O.key.startsWith(m)&&(!L||b.match(L))&&(O.key.endsWith("light")&&j({light:L}),O.key.endsWith("dark")&&j({dark:L})),O.key===d&&(!L||["light","dark","system"].includes(L))&&z(L||t)};return l.addEventListener("storage",K),()=>{l.removeEventListener("storage",K)}}},[j,z,d,m,b,t,l]),W({},w,{colorScheme:E,setMode:z,setColorScheme:j})}const n5=["colorSchemes","components","generateCssVars","cssVarPrefix"],i5="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function o5(e){const{themeId:t,theme:r={},attribute:o=PI,modeStorageKey:c=i1,colorSchemeStorageKey:d=o1,defaultMode:m="light",defaultColorScheme:l,disableTransitionOnChange:b=!1,resolveTheme:w,excludeVariablesFromRoot:T}=e;(!r.colorSchemes||typeof l=="string"&&!r.colorSchemes[l]||typeof l=="object"&&!r.colorSchemes[l==null?void 0:l.light]||typeof l=="object"&&!r.colorSchemes[l==null?void 0:l.dark])&&console.error(`MUI: \`${l}\` does not exist in \`theme.colorSchemes\`.`);const E=A.createContext(void 0),z=()=>{const O=A.useContext(E);if(!O)throw new Error(Is(19));return O};function j(O){const{children:L,theme:R=r,modeStorageKey:re=c,colorSchemeStorageKey:J=d,attribute:se=o,defaultMode:ie=m,defaultColorScheme:Z=l,disableTransitionOnChange:ke=b,storageWindow:xe=typeof window>"u"?void 0:window,documentNode:Ie=typeof document>"u"?void 0:document,colorSchemeNode:ze=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:Le=":root",disableNestedContext:Ye=!1,disableStyleSheetGeneration:Ge=!1}=O,Te=A.useRef(!1),Fe=n1(),$e=A.useContext(E),Oe=!!$e&&!Ye,Qe=R[t],at=Qe||R,{colorSchemes:ut={},components:Pt={},generateCssVars:wt=()=>({vars:{},css:{}}),cssVarPrefix:zt}=at,er=Wt(at,n5),lt=Object.keys(ut),qe=typeof Z=="string"?Z:Z.light,pt=typeof Z=="string"?Z:Z.dark,{mode:yt,setMode:or,systemMode:Kt,lightColorScheme:Mr,darkColorScheme:lr,colorScheme:Vt,setColorScheme:Et}=r5({supportedColorSchemes:lt,defaultLightColorScheme:qe,defaultDarkColorScheme:pt,modeStorageKey:re,colorSchemeStorageKey:J,defaultMode:ie,storageWindow:xe});let ur=yt,Mt=Vt;Oe&&(ur=$e.mode,Mt=$e.colorScheme);const Er=ur||(ie==="system"?m:ie),Ve=Mt||(Er==="dark"?pt:qe),{css:Sr,vars:Dr}=wt(),qt=W({},er,{components:Pt,colorSchemes:ut,cssVarPrefix:zt,vars:Dr,getColorSchemeSelector:Gt=>`[${se}="${Gt}"] &`}),rr={},Or={};Object.entries(ut).forEach(([Gt,sr])=>{const{css:Tr,vars:Be}=wt(Gt);qt.vars=di(qt.vars,Be),Gt===Ve&&(Object.keys(sr).forEach(St=>{sr[St]&&typeof sr[St]=="object"?qt[St]=W({},qt[St],sr[St]):qt[St]=sr[St]}),qt.palette&&(qt.palette.colorScheme=Gt));const xt=typeof Z=="string"?Z:ie==="dark"?Z.dark:Z.light;if(Gt===xt){if(T){const St={};T(zt).forEach(tr=>{St[tr]=Tr[tr],delete Tr[tr]}),rr[`[${se}="${Gt}"]`]=St}rr[`${Le}, [${se}="${Gt}"]`]=Tr}else Or[`${Le===":root"?"":Le}[${se}="${Gt}"]`]=Tr}),qt.vars=di(qt.vars,Dr),A.useEffect(()=>{Mt&&ze&&ze.setAttribute(se,Mt)},[Mt,se,ze]),A.useEffect(()=>{let Gt;if(ke&&Te.current&&Ie){const sr=Ie.createElement("style");sr.appendChild(Ie.createTextNode(i5)),Ie.head.appendChild(sr),window.getComputedStyle(Ie.body),Gt=setTimeout(()=>{Ie.head.removeChild(sr)},1)}return()=>{clearTimeout(Gt)}},[Mt,ke,Ie]),A.useEffect(()=>(Te.current=!0,()=>{Te.current=!1}),[]);const Hr=A.useMemo(()=>({allColorSchemes:lt,colorScheme:Mt,darkColorScheme:lr,lightColorScheme:Mr,mode:ur,setColorScheme:Et,setMode:or,systemMode:Kt}),[lt,Mt,lr,Mr,ur,Et,or,Kt]);let dr=!0;(Ge||Oe&&(Fe==null?void 0:Fe.cssVarPrefix)===zt)&&(dr=!1);const cr=Y.jsxs(A.Fragment,{children:[dr&&Y.jsxs(A.Fragment,{children:[Y.jsx(Kh,{styles:{[Le]:Sr}}),Y.jsx(Kh,{styles:rr}),Y.jsx(Kh,{styles:Or})]}),Y.jsx(QL,{themeId:Qe?t:void 0,theme:w?w(qt):qt,children:L})]});return Oe?cr:Y.jsx(E.Provider,{value:Hr,children:cr})}const U=typeof l=="string"?l:l.light,V=typeof l=="string"?l:l.dark;return{CssVarsProvider:j,useColorScheme:z,getInitColorSchemeScript:O=>e5(W({attribute:o,colorSchemeStorageKey:d,defaultMode:m,defaultLightColorScheme:U,defaultDarkColorScheme:V,modeStorageKey:c},O))}}function a1(e=""){function t(...o){if(!o.length)return"";const c=o[0];return typeof c=="string"&&!c.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${c}${t(...o.slice(1))})`:`, ${c}`}return(o,...c)=>`var(--${e?`${e}-`:""}${o}${t(...c)})`}const RS=(e,t,r,o=[])=>{let c=e;t.forEach((d,m)=>{m===t.length-1?Array.isArray(c)?c[Number(d)]=r:c&&typeof c=="object"&&(c[d]=r):c&&typeof c=="object"&&(c[d]||(c[d]=o.includes(d)?[]:{}),c=c[d])})},a5=(e,t,r)=>{function o(c,d=[],m=[]){Object.entries(c).forEach(([l,b])=>{(!r||r&&!r([...d,l]))&&b!=null&&(typeof b=="object"&&Object.keys(b).length>0?o(b,[...d,l],Array.isArray(b)?[...m,l]:m):t([...d,l],b,m))})}o(e)},s5=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(o=>e.includes(o))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function C0(e,t){const{prefix:r,shouldSkipGeneratingVar:o}=t||{},c={},d={},m={};return a5(e,(l,b,w)=>{if((typeof b=="string"||typeof b=="number")&&(!o||!o(l,b))){const T=`--${r?`${r}-`:""}${l.join("-")}`;Object.assign(c,{[T]:s5(l,b)}),RS(d,l,`var(${T})`,w),RS(m,l,`var(${T}, ${b})`,w)}},l=>l[0]==="vars"),{css:c,vars:d,varsWithDefaults:m}}function fp(e){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}function l5(e,t){if(fp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t);if(fp(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function c5(e){var t=l5(e,"string");return fp(t)=="symbol"?t:t+""}const u5=["colorSchemes","components","defaultColorScheme"];function d5(e,t){const{colorSchemes:r={},defaultColorScheme:o="light"}=e,c=Wt(e,u5),{vars:d,css:m,varsWithDefaults:l}=C0(c,t);let b=l;const w={},{[o]:T}=r,E=Wt(r,[o].map(c5));if(Object.entries(E||{}).forEach(([j,U])=>{const{vars:V,css:K,varsWithDefaults:O}=C0(U,t);b=di(b,O),w[j]={css:K,vars:V}}),T){const{css:j,vars:U,varsWithDefaults:V}=C0(T,t);b=di(b,V),w[o]={css:j,vars:U}}return{vars:b,generateCssVars:j=>{var U;if(!j){var V;const O=W({},m);return{css:O,vars:d,selector:(t==null||(V=t.getSelector)==null?void 0:V.call(t,j,O))||":root"}}const K=W({},w[j].css);return{css:K,vars:w[j].vars,selector:(t==null||(U=t.getSelector)==null?void 0:U.call(t,j,K))||":root"}}}}const h5=["component","direction","spacing","divider","children","className","useFlexGap"],p5=Up(),f5=CL("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function m5(e){return CI({props:e,name:"MuiStack",defaultTheme:p5})}function g5(e,t){const r=A.Children.toArray(e).filter(Boolean);return r.reduce((o,c,d)=>(o.push(c),d<r.length-1&&o.push(A.cloneElement(t,{key:`separator-${d}`})),o),[])}const y5=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],v5=({ownerState:e,theme:t})=>{let r=W({display:"flex",flexDirection:"column"},La({theme:t},x0({values:e.direction,breakpoints:t.breakpoints.values}),o=>({flexDirection:o})));if(e.spacing){const o=Zx(t),c=Object.keys(t.breakpoints.values).reduce((b,w)=>((typeof e.spacing=="object"&&e.spacing[w]!=null||typeof e.direction=="object"&&e.direction[w]!=null)&&(b[w]=!0),b),{}),d=x0({values:e.direction,base:c}),m=x0({values:e.spacing,base:c});typeof d=="object"&&Object.keys(d).forEach((b,w,T)=>{if(!d[b]){const z=w>0?d[T[w-1]]:"column";d[b]=z}}),r=di(r,La({theme:t},m,(b,w)=>e.useFlexGap?{gap:pc(o,b)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${y5(w?d[w]:e.direction)}`]:pc(o,b)}}))}return r=fR(t.breakpoints,r),r};function _5(e={}){const{createStyledComponent:t=f5,useThemeProps:r=m5,componentName:o="MuiStack"}=e,c=()=>Rr({root:["root"]},b=>vy(o,b),{}),d=t(v5);return A.forwardRef(function(b,w){const T=r(b),E=Jx(T),{component:z="div",direction:j="column",spacing:U=0,divider:V,children:K,className:O,useFlexGap:L=!1}=E,R=Wt(E,h5),re={direction:j,spacing:U,useFlexGap:L},J=c();return Y.jsx(d,W({as:z,ownerState:re,ref:w,className:oi(J.root,O)},R,{children:V?g5(K,V):K}))})}const x5=W({},sd,{borderRadius:{themeKey:"radius"},boxShadow:{themeKey:"shadow"},fontFamily:{themeKey:"fontFamily"},fontSize:{themeKey:"fontSize"},fontWeight:{themeKey:"fontWeight"},letterSpacing:{themeKey:"letterSpacing"},lineHeight:{themeKey:"lineHeight"}});function b5(e){var t;return!!e[0].match(/^(typography|variants|breakpoints)$/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/^(mode)$/))||e[0]==="focus"&&e[1]!=="thickness"}const Vr=(e,t)=>vy(e,t,"Mui"),Lr=(e,t)=>vI(e,t,"Mui"),w5=e=>e&&typeof e=="object"&&Object.keys(e).some(t=>{var r;return(r=t.match)==null?void 0:r.call(t,/^(plain(Hover|Active|Disabled)?(Color|Bg)|outlined(Hover|Active|Disabled)?(Color|Border|Bg)|soft(Hover|Active|Disabled)?(Color|Bg)|solid(Hover|Active|Disabled)?(Color|Bg))$/)}),LS=(e,t,r)=>{t.includes("Color")&&(e.color=r),t.includes("Bg")&&(e.backgroundColor=r),t.includes("Border")&&(e.borderColor=r)},$S=(e,t,r)=>{const o={};return Object.entries(t||{}).forEach(([c,d])=>{if(c.match(new RegExp(`${e}(color|bg|border)`,"i"))&&d){const m=r?r(c):d;c.includes("Disabled")&&(o.pointerEvents="none",o.cursor="default",o["--Icon-color"]="currentColor"),c.match(/(Hover|Active|Disabled)/)||(o["--variant-borderWidth"]||(o["--variant-borderWidth"]="0px"),c.includes("Border")&&(o["--variant-borderWidth"]="1px",o.border="var(--variant-borderWidth) solid")),LS(o,c,m)}}),o},ji=(e,t)=>{let r={};if(t){const{getCssVar:o,palette:c}=t;Object.entries(c).forEach(d=>{const[m,l]=d;w5(l)&&typeof l=="object"&&(r=W({},r,{[m]:$S(e,l,b=>`var(--variant-${b}, ${o(`palette-${m}-${b}`,c[m][b])})`)}))})}return r.context=$S(e,{plainColor:"var(--variant-plainColor)",plainHoverColor:"var(--variant-plainHoverColor)",plainHoverBg:"var(--variant-plainHoverBg)",plainActiveBg:"var(--variant-plainActiveBg)",plainDisabledColor:"var(--variant-plainDisabledColor)",outlinedColor:"var(--variant-outlinedColor)",outlinedBorder:"var(--variant-outlinedBorder)",outlinedHoverColor:"var(--variant-outlinedHoverColor)",outlinedHoverBorder:"var(--variant-outlinedHoverBorder)",outlinedHoverBg:"var(--variant-outlinedHoverBg)",outlinedActiveBg:"var(--variant-outlinedActiveBg)",outlinedDisabledColor:"var(--variant-outlinedDisabledColor)",outlinedDisabledBorder:"var(--variant-outlinedDisabledBorder)",softColor:"var(--variant-softColor)",softBg:"var(--variant-softBg)",softHoverColor:"var(--variant-softHoverColor)",softHoverBg:"var(--variant-softHoverBg)",softActiveBg:"var(--variant-softActiveBg)",softDisabledColor:"var(--variant-softDisabledColor)",softDisabledBg:"var(--variant-softDisabledBg)",solidColor:"var(--variant-solidColor)",solidBg:"var(--variant-solidBg)",solidHoverBg:"var(--variant-solidHoverBg)",solidActiveBg:"var(--variant-solidActiveBg)",solidDisabledColor:"var(--variant-solidDisabledColor)",solidDisabledBg:"var(--variant-solidDisabledBg)"}),r},S5=["cssVarPrefix","breakpoints","spacing","components","variants","shouldSkipGeneratingVar"],C5=["colorSchemes"],k5=(e="joy")=>a1(e);function zI(e){var t,r,o,c,d,m,l,b,w,T;const E=e||{},{cssVarPrefix:z="joy",breakpoints:j,spacing:U,components:V,variants:K,shouldSkipGeneratingVar:O=b5}=E,L=Wt(E,S5),R=k5(z),re={primary:Ch.blue,neutral:Ch.grey,danger:Ch.red,success:Ch.green,warning:Ch.yellow,common:{white:"#FFF",black:"#000"}},J=qe=>{var pt;const yt=qe.split("-"),or=yt[1],Kt=yt[2];return R(qe,(pt=re[or])==null?void 0:pt[Kt])},se=qe=>({plainColor:J(`palette-${qe}-500`),plainHoverBg:J(`palette-${qe}-100`),plainActiveBg:J(`palette-${qe}-200`),plainDisabledColor:J("palette-neutral-400"),outlinedColor:J(`palette-${qe}-500`),outlinedBorder:J(`palette-${qe}-300`),outlinedHoverBg:J(`palette-${qe}-100`),outlinedActiveBg:J(`palette-${qe}-200`),outlinedDisabledColor:J("palette-neutral-400"),outlinedDisabledBorder:J("palette-neutral-200"),softColor:J(`palette-${qe}-700`),softBg:J(`palette-${qe}-100`),softHoverBg:J(`palette-${qe}-200`),softActiveColor:J(`palette-${qe}-800`),softActiveBg:J(`palette-${qe}-300`),softDisabledColor:J("palette-neutral-400"),softDisabledBg:J("palette-neutral-50"),solidColor:J("palette-common-white"),solidBg:J(`palette-${qe}-500`),solidHoverBg:J(`palette-${qe}-600`),solidActiveBg:J(`palette-${qe}-700`),solidDisabledColor:J("palette-neutral-400"),solidDisabledBg:J("palette-neutral-100")}),ie=qe=>({plainColor:J(`palette-${qe}-300`),plainHoverBg:J(`palette-${qe}-800`),plainActiveBg:J(`palette-${qe}-700`),plainDisabledColor:J("palette-neutral-500"),outlinedColor:J(`palette-${qe}-200`),outlinedBorder:J(`palette-${qe}-700`),outlinedHoverBg:J(`palette-${qe}-800`),outlinedActiveBg:J(`palette-${qe}-700`),outlinedDisabledColor:J("palette-neutral-500"),outlinedDisabledBorder:J("palette-neutral-800"),softColor:J(`palette-${qe}-200`),softBg:J(`palette-${qe}-800`),softHoverBg:J(`palette-${qe}-700`),softActiveColor:J(`palette-${qe}-100`),softActiveBg:J(`palette-${qe}-600`),softDisabledColor:J("palette-neutral-500"),softDisabledBg:J("palette-neutral-800"),solidColor:J("palette-common-white"),solidBg:J(`palette-${qe}-500`),solidHoverBg:J(`palette-${qe}-600`),solidActiveBg:J(`palette-${qe}-700`),solidDisabledColor:J("palette-neutral-500"),solidDisabledBg:J("palette-neutral-800")}),Z={palette:{mode:"light",primary:W({},re.primary,se("primary")),neutral:W({},re.neutral,se("neutral"),{plainColor:J("palette-neutral-700"),plainHoverColor:J("palette-neutral-900"),outlinedColor:J("palette-neutral-700")}),danger:W({},re.danger,se("danger")),success:W({},re.success,se("success")),warning:W({},re.warning,se("warning")),common:{white:"#FFF",black:"#000"},text:{primary:J("palette-neutral-800"),secondary:J("palette-neutral-700"),tertiary:J("palette-neutral-600"),icon:J("palette-neutral-500")},background:{body:J("palette-common-white"),surface:J("palette-neutral-50"),popup:J("palette-common-white"),level1:J("palette-neutral-100"),level2:J("palette-neutral-200"),level3:J("palette-neutral-300"),tooltip:J("palette-neutral-500"),backdrop:`rgba(${R("palette-neutral-darkChannel",Yl(re.neutral[900]))} / 0.25)`},divider:`rgba(${R("palette-neutral-mainChannel",Yl(re.neutral[500]))} / 0.2)`,focusVisible:J("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"21 21 21",shadowOpacity:"0.08"},ke={palette:{mode:"dark",primary:W({},re.primary,ie("primary")),neutral:W({},re.neutral,ie("neutral"),{plainColor:J("palette-neutral-300"),plainHoverColor:J("palette-neutral-300")}),danger:W({},re.danger,ie("danger")),success:W({},re.success,ie("success")),warning:W({},re.warning,ie("warning")),common:{white:"#FFF",black:"#000"},text:{primary:J("palette-neutral-100"),secondary:J("palette-neutral-300"),tertiary:J("palette-neutral-400"),icon:J("palette-neutral-400")},background:{body:J("palette-common-black"),surface:J("palette-neutral-900"),popup:J("palette-common-black"),level1:J("palette-neutral-800"),level2:J("palette-neutral-700"),level3:J("palette-neutral-600"),tooltip:J("palette-neutral-600"),backdrop:`rgba(${R("palette-neutral-darkChannel",Yl(re.neutral[50]))} / 0.25)`},divider:`rgba(${R("palette-neutral-mainChannel",Yl(re.neutral[500]))} / 0.16)`,focusVisible:J("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"0 0 0",shadowOpacity:"0.6"},xe='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',Ie=W({body:`"Inter", ${R(`fontFamily-fallback, ${xe}`)}`,display:`"Inter", ${R(`fontFamily-fallback, ${xe}`)}`,code:"Source Code Pro,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace",fallback:xe},L.fontFamily),ze=W({sm:300,md:500,lg:600,xl:700},L.fontWeight),Le=W({xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem",xl2:"1.5rem",xl3:"1.875rem",xl4:"2.25rem"},L.fontSize),Ye=W({xs:"1.33334",sm:"1.42858",md:"1.5",lg:"1.55556",xl:"1.66667"},L.lineHeight),Ge=(t=(r=L.colorSchemes)==null||(r=r.light)==null?void 0:r.shadowRing)!=null?t:Z.shadowRing,Te=(o=(c=L.colorSchemes)==null||(c=c.light)==null?void 0:c.shadowChannel)!=null?o:Z.shadowChannel,Fe=(d=(m=L.colorSchemes)==null||(m=m.light)==null?void 0:m.shadowOpacity)!=null?d:Z.shadowOpacity,$e={colorSchemes:{light:Z,dark:ke},fontSize:Le,fontFamily:Ie,fontWeight:ze,focus:{thickness:"2px",selector:`&.${Vr("","focusVisible")}, &:focus-visible`,default:{outlineOffset:`var(--focus-outline-offset, ${R("focus-thickness",(l=(b=L.focus)==null?void 0:b.thickness)!=null?l:"2px")})`,outline:`${R("focus-thickness",(w=(T=L.focus)==null?void 0:T.thickness)!=null?w:"2px")} solid ${R("palette-focusVisible",re.primary[500])}`}},lineHeight:Ye,radius:{xs:"2px",sm:"6px",md:"8px",lg:"12px",xl:"16px"},shadow:{xs:`${R("shadowRing",Ge)}, 0px 1px 2px 0px rgba(${R("shadowChannel",Te)} / ${R("shadowOpacity",Fe)})`,sm:`${R("shadowRing",Ge)}, 0px 1px 2px 0px rgba(${R("shadowChannel",Te)} / ${R("shadowOpacity",Fe)}), 0px 2px 4px 0px rgba(${R("shadowChannel",Te)} / ${R("shadowOpacity",Fe)})`,md:`${R("shadowRing",Ge)}, 0px 2px 8px -2px rgba(${R("shadowChannel",Te)} / ${R("shadowOpacity",Fe)}), 0px 6px 12px -2px rgba(${R("shadowChannel",Te)} / ${R("shadowOpacity",Fe)})`,lg:`${R("shadowRing",Ge)}, 0px 2px 8px -2px rgba(${R("shadowChannel",Te)} / ${R("shadowOpacity",Fe)}), 0px 12px 16px -4px rgba(${R("shadowChannel",Te)} / ${R("shadowOpacity",Fe)})`,xl:`${R("shadowRing",Ge)}, 0px 2px 8px -2px rgba(${R("shadowChannel",Te)} / ${R("shadowOpacity",Fe)}), 0px 20px 24px -4px rgba(${R("shadowChannel",Te)} / ${R("shadowOpacity",Fe)})`},zIndex:{badge:1,table:10,popup:1e3,modal:1300,snackbar:1400,tooltip:1500},typography:{h1:{fontFamily:R(`fontFamily-display, ${Ie.display}`),fontWeight:R(`fontWeight-xl, ${ze.xl}`),fontSize:R(`fontSize-xl4, ${Le.xl4}`),lineHeight:R(`lineHeight-xs, ${Ye.xs}`),letterSpacing:"-0.025em",color:R(`palette-text-primary, ${Z.palette.text.primary}`)},h2:{fontFamily:R(`fontFamily-display, ${Ie.display}`),fontWeight:R(`fontWeight-xl, ${ze.xl}`),fontSize:R(`fontSize-xl3, ${Le.xl3}`),lineHeight:R(`lineHeight-xs, ${Ye.xs}`),letterSpacing:"-0.025em",color:R(`palette-text-primary, ${Z.palette.text.primary}`)},h3:{fontFamily:R(`fontFamily-display, ${Ie.display}`),fontWeight:R(`fontWeight-lg, ${ze.lg}`),fontSize:R(`fontSize-xl2, ${Le.xl2}`),lineHeight:R(`lineHeight-xs, ${Ye.xs}`),letterSpacing:"-0.025em",color:R(`palette-text-primary, ${Z.palette.text.primary}`)},h4:{fontFamily:R(`fontFamily-display, ${Ie.display}`),fontWeight:R(`fontWeight-lg, ${ze.lg}`),fontSize:R(`fontSize-xl, ${Le.xl}`),lineHeight:R(`lineHeight-md, ${Ye.md}`),letterSpacing:"-0.025em",color:R(`palette-text-primary, ${Z.palette.text.primary}`)},"title-lg":{fontFamily:R(`fontFamily-body, ${Ie.body}`),fontWeight:R(`fontWeight-lg, ${ze.lg}`),fontSize:R(`fontSize-lg, ${Le.lg}`),lineHeight:R(`lineHeight-xs, ${Ye.xs}`),color:R(`palette-text-primary, ${Z.palette.text.primary}`)},"title-md":{fontFamily:R(`fontFamily-body, ${Ie.body}`),fontWeight:R(`fontWeight-md, ${ze.md}`),fontSize:R(`fontSize-md, ${Le.md}`),lineHeight:R(`lineHeight-md, ${Ye.md}`),color:R(`palette-text-primary, ${Z.palette.text.primary}`)},"title-sm":{fontFamily:R(`fontFamily-body, ${Ie.body}`),fontWeight:R(`fontWeight-md, ${ze.md}`),fontSize:R(`fontSize-sm, ${Le.sm}`),lineHeight:R(`lineHeight-sm, ${Ye.sm}`),color:R(`palette-text-primary, ${Z.palette.text.primary}`)},"body-lg":{fontFamily:R(`fontFamily-body, ${Ie.body}`),fontSize:R(`fontSize-lg, ${Le.lg}`),lineHeight:R(`lineHeight-md, ${Ye.md}`),color:R(`palette-text-secondary, ${Z.palette.text.secondary}`)},"body-md":{fontFamily:R(`fontFamily-body, ${Ie.body}`),fontSize:R(`fontSize-md, ${Le.md}`),lineHeight:R(`lineHeight-md, ${Ye.md}`),color:R(`palette-text-secondary, ${Z.palette.text.secondary}`)},"body-sm":{fontFamily:R(`fontFamily-body, ${Ie.body}`),fontSize:R(`fontSize-sm, ${Le.sm}`),lineHeight:R(`lineHeight-md, ${Ye.md}`),color:R(`palette-text-tertiary, ${Z.palette.text.tertiary}`)},"body-xs":{fontFamily:R(`fontFamily-body, ${Ie.body}`),fontWeight:R(`fontWeight-md, ${ze.md}`),fontSize:R(`fontSize-xs, ${Le.xs}`),lineHeight:R(`lineHeight-md, ${Ye.md}`),color:R(`palette-text-tertiary, ${Z.palette.text.tertiary}`)}}},Oe=L?di($e,L):$e,{colorSchemes:Qe}=Oe,at=Wt(Oe,C5),ut=W({colorSchemes:Qe},at,{breakpoints:Hx(j??{}),components:di({MuiSvgIcon:{defaultProps:{fontSize:"xl2"},styleOverrides:{root:({ownerState:qe,theme:pt})=>{var yt;const or=qe.instanceFontSize;return W({margin:"var(--Icon-margin)"},qe.fontSize&&qe.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${pt.vars.fontSize[qe.fontSize]})`},!qe.htmlColor&&W({color:`var(--Icon-color, ${ut.vars.palette.text.icon})`},qe.color&&qe.color!=="inherit"&&pt.vars.palette[qe.color]&&{color:`rgba(${(yt=pt.vars.palette[qe.color])==null?void 0:yt.mainChannel} / 1)`}),or&&or!=="inherit"&&{"--Icon-fontSize":pt.vars.fontSize[or]})}}}},V),cssVarPrefix:z,getCssVar:R,spacing:hI(U)});function Pt(qe,pt){Object.keys(pt).forEach(yt=>{const or={main:"500",light:"200",dark:"700"};qe==="dark"&&(or.main=400),!pt[yt].mainChannel&&pt[yt][or.main]&&(pt[yt].mainChannel=Yl(pt[yt][or.main])),!pt[yt].lightChannel&&pt[yt][or.light]&&(pt[yt].lightChannel=Yl(pt[yt][or.light])),!pt[yt].darkChannel&&pt[yt][or.dark]&&(pt[yt].darkChannel=Yl(pt[yt][or.dark]))})}Object.entries(ut.colorSchemes).forEach(([qe,pt])=>{Pt(qe,pt.palette)});const wt={prefix:z,shouldSkipGeneratingVar:O},{vars:zt,generateCssVars:er}=d5(W({colorSchemes:Qe},at),wt);ut.vars=zt,ut.generateCssVars=er,ut.unstable_sxConfig=W({},x5,e==null?void 0:e.unstable_sxConfig),ut.unstable_sx=function(pt){return ld({sx:pt,theme:this})},ut.getColorSchemeSelector=qe=>qe==="light"?"&":`&[data-joy-color-scheme="${qe}"], [data-joy-color-scheme="${qe}"] &`;const lt={getCssVar:R,palette:ut.colorSchemes.light.palette};return ut.variants=di({plain:ji("plain",lt),plainHover:ji("plainHover",lt),plainActive:ji("plainActive",lt),plainDisabled:ji("plainDisabled",lt),outlined:ji("outlined",lt),outlinedHover:ji("outlinedHover",lt),outlinedActive:ji("outlinedActive",lt),outlinedDisabled:ji("outlinedDisabled",lt),soft:ji("soft",lt),softHover:ji("softHover",lt),softActive:ji("softActive",lt),softDisabled:ji("softDisabled",lt),solid:ji("solid",lt),solidHover:ji("solidHover",lt),solidActive:ji("solidActive",lt),solidDisabled:ji("solidDisabled",lt)},K),ut.palette=W({},ut.colorSchemes.light.palette,{colorScheme:"light"}),ut.shouldSkipGeneratingVar=O,ut.applyStyles=Xx,ut}const Wp=zI(),Ih={attribute:"data-joy-color-scheme",colorSchemeStorageKey:"joy-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"joy-mode"},{CssVarsProvider:I5,useColorScheme:s1,getInitColorSchemeScript:tH}=o5({themeId:Qg,theme:Wp,attribute:Ih.attribute,modeStorageKey:Ih.modeStorageKey,colorSchemeStorageKey:Ih.colorSchemeStorageKey,defaultColorScheme:{light:Ih.defaultLightColorScheme,dark:Ih.defaultDarkColorScheme}}),ht=SI({defaultTheme:Wp,themeId:Qg});function Ur({props:e,name:t}){return CI({props:e,name:t,defaultTheme:W({},Wp,{components:{}}),themeId:Qg})}function T5(e){return Y.jsx(oL,W({},e,{defaultTheme:Wp,themeId:Qg}))}function P5(e){return typeof e=="string"}function MI(e,t,r){return e===void 0||P5(e)?t:W({},t,{ownerState:W({},t.ownerState,r)})}function BS(e,t,r=(o,c)=>o===c){return e.length===t.length&&e.every((o,c)=>r(o,t[c]))}const E5={disableDefaultClasses:!1},z5=A.createContext(E5);function M5(e){const{disableDefaultClasses:t}=A.useContext(z5);return r=>t?"":e(r)}function Ei(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(o=>o.match(/^on[A-Z]/)&&typeof e[o]=="function"&&!t.includes(o)).forEach(o=>{r[o]=e[o]}),r}function DI(e,t,r){return typeof e=="function"?e(t,r):e}function D5(e){const{rootElementName:t="",componentName:r}=e,[o,c]=A.useState(t.toUpperCase()),d=A.useCallback(m=>{var l;c((l=m==null?void 0:m.tagName)!=null?l:"")},[]);return[o,d]}function OS(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function AI(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:o,externalForwardedProps:c,className:d}=e;if(!t){const j=oi(r==null?void 0:r.className,d,c==null?void 0:c.className,o==null?void 0:o.className),U=W({},r==null?void 0:r.style,c==null?void 0:c.style,o==null?void 0:o.style),V=W({},r,c,o);return j.length>0&&(V.className=j),Object.keys(U).length>0&&(V.style=U),{props:V,internalRef:void 0}}const m=Ei(W({},c,o)),l=OS(o),b=OS(c),w=t(m),T=oi(w==null?void 0:w.className,r==null?void 0:r.className,d,c==null?void 0:c.className,o==null?void 0:o.className),E=W({},w==null?void 0:w.style,r==null?void 0:r.style,c==null?void 0:c.style,o==null?void 0:o.style),z=W({},w,r,b,l);return T.length>0&&(z.className=T),Object.keys(E).length>0&&(z.style=E),{props:z,internalRef:w.ref}}const A5=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function RI(e){var t;const{elementType:r,externalSlotProps:o,ownerState:c,skipResolvingSlotProps:d=!1}=e,m=Wt(e,A5),l=d?{}:DI(o,c),{props:b,internalRef:w}=AI(W({},m,{externalSlotProps:l})),T=tn(w,l==null?void 0:l.ref,(t=e.additionalProps)==null?void 0:t.ref);return MI(r,W({},b,{ref:T}),c)}const LI="base";function R5(e){return`${LI}--${e}`}function L5(e,t){return`${LI}-${e}-${t}`}function $I(e,t){const r=yI[t];return r?R5(r):L5(e,t)}function $5(e,t){const r={};return t.forEach(o=>{r[o]=$I(e,o)}),r}function ns(e={}){const{disabled:t=!1,focusableWhenDisabled:r,href:o,rootRef:c,tabIndex:d,to:m,type:l,rootElementName:b}=e,w=A.useRef(),[T,E]=A.useState(!1),{isFocusVisibleRef:z,onFocus:j,onBlur:U,ref:V}=r1(),[K,O]=A.useState(!1);t&&!r&&K&&O(!1),A.useEffect(()=>{z.current=K},[K,z]);const[L,R]=D5({rootElementName:b??(o||m?"a":void 0),componentName:"Button"}),re=Ge=>Te=>{var Fe;K&&Te.preventDefault(),(Fe=Ge.onMouseLeave)==null||Fe.call(Ge,Te)},J=Ge=>Te=>{var Fe;U(Te),z.current===!1&&O(!1),(Fe=Ge.onBlur)==null||Fe.call(Ge,Te)},se=Ge=>Te=>{var Fe;if(w.current||(w.current=Te.currentTarget),j(Te),z.current===!0){var $e;O(!0),($e=Ge.onFocusVisible)==null||$e.call(Ge,Te)}(Fe=Ge.onFocus)==null||Fe.call(Ge,Te)},ie=()=>{const Ge=w.current;return L==="BUTTON"||L==="INPUT"&&["button","submit","reset"].includes(Ge==null?void 0:Ge.type)||L==="A"&&(Ge==null?void 0:Ge.href)},Z=Ge=>Te=>{if(!t){var Fe;(Fe=Ge.onClick)==null||Fe.call(Ge,Te)}},ke=Ge=>Te=>{var Fe;t||(E(!0),document.addEventListener("mouseup",()=>{E(!1)},{once:!0})),(Fe=Ge.onMouseDown)==null||Fe.call(Ge,Te)},xe=Ge=>Te=>{var Fe;if((Fe=Ge.onKeyDown)==null||Fe.call(Ge,Te),!Te.defaultMuiPrevented&&(Te.target===Te.currentTarget&&!ie()&&Te.key===" "&&Te.preventDefault(),Te.target===Te.currentTarget&&Te.key===" "&&!t&&E(!0),Te.target===Te.currentTarget&&!ie()&&Te.key==="Enter"&&!t)){var $e;($e=Ge.onClick)==null||$e.call(Ge,Te),Te.preventDefault()}},Ie=Ge=>Te=>{var Fe;if(Te.target===Te.currentTarget&&E(!1),(Fe=Ge.onKeyUp)==null||Fe.call(Ge,Te),Te.target===Te.currentTarget&&!ie()&&!t&&Te.key===" "&&!Te.defaultMuiPrevented){var $e;($e=Ge.onClick)==null||$e.call(Ge,Te)}},ze=tn(R,c,V,w),Le={};return d!==void 0&&(Le.tabIndex=d),L==="BUTTON"?(Le.type=l??"button",r?Le["aria-disabled"]=t:Le.disabled=t):L==="INPUT"?l&&["button","submit","reset"].includes(l)&&(r?Le["aria-disabled"]=t:Le.disabled=t):L!==""&&(!o&&!m&&(Le.role="button",Le.tabIndex=d??0),t&&(Le["aria-disabled"]=t,Le.tabIndex=r?d??0:-1)),{getRootProps:(Ge={})=>{const Te=W({},Ei(e),Ei(Ge)),Fe=W({type:l},Te,Le,Ge,{onBlur:J(Te),onClick:Z(Te),onFocus:se(Te),onKeyDown:xe(Te),onKeyUp:Ie(Te),onMouseDown:ke(Te),onMouseLeave:re(Te),ref:ze});return delete Fe.onFocusVisible,Fe},focusVisible:K,setFocusVisible:O,active:T,rootRef:ze}}const zy=A.createContext(null);function B5(e,t){return e===t}const k0={},FS=()=>{};function x_(e,t){const r=W({},e);return Object.keys(t).forEach(o=>{t[o]!==void 0&&(r[o]=t[o])}),r}function O5(e){const{nextState:t,initialState:r,stateComparers:o,onStateChange:c,controlledProps:d,lastActionRef:m}=e,l=A.useRef(r);A.useEffect(()=>{if(m.current===null)return;const b=x_(l.current,d);Object.keys(t).forEach(w=>{var T;const E=(T=o[w])!=null?T:B5,z=t[w],j=b[w];if(j==null&&z!=null||j!=null&&z==null||j!=null&&z!=null&&!E(z,j)){var U,V;c==null||c((U=m.current.event)!=null?U:null,w,z,(V=m.current.type)!=null?V:"",t)}}),l.current=t,m.current=null},[l,t,m,c,o,d])}function BI(e){const t=A.useRef(null),{reducer:r,initialState:o,controlledProps:c=k0,stateComparers:d=k0,onStateChange:m=FS,actionContext:l,componentName:b=""}=e;A.useRef(c);const w=A.useCallback((j,U)=>{t.current=U;const V=x_(j,c);return r(V,U)},[c,r]),[T,E]=A.useReducer(w,o),z=A.useCallback(j=>{E(W({},j,{context:l}))},[l]);return O5({nextState:T,initialState:o,stateComparers:d??k0,onStateChange:m??FS,controlledProps:c,lastActionRef:t}),[x_(T,c),z]}const Da={blur:"dropdown:blur",escapeKeyDown:"dropdown:escapeKeyDown",toggle:"dropdown:toggle",open:"dropdown:open",close:"dropdown:close"};function F5(e,t){switch(t.type){case Da.blur:return{open:!1,changeReason:t.event};case Da.escapeKeyDown:return{open:!1,changeReason:t.event};case Da.toggle:return{open:!e.open,changeReason:t.event};case Da.open:return{open:!0,changeReason:t.event};case Da.close:return{open:!1,changeReason:t.event};default:throw new Error("Unhandled action")}}function N5(e={}){const{defaultOpen:t,onOpenChange:r,open:o,componentName:c="useDropdown"}=e,[d,m]=A.useState(""),[l,b]=A.useState(null),w=A.useRef(null),T=A.useCallback((V,K,O,L)=>{K==="open"&&(r==null||r(V,O)),w.current=L},[r]),E=A.useMemo(()=>o!==void 0?{open:o}:{},[o]),[z,j]=BI({controlledProps:E,initialState:t?{open:!0,changeReason:null}:{open:!1,changeReason:null},onStateChange:T,reducer:F5,componentName:c});return A.useEffect(()=>{!z.open&&w.current!==null&&w.current!==Da.blur&&(l==null||l.focus())},[z.open,l]),{contextValue:{state:z,dispatch:j,popupId:d,registerPopup:m,registerTrigger:b,triggerElement:l},open:z.open}}function j5(e){const{children:t,open:r,defaultOpen:o,onOpenChange:c}=e,{contextValue:d}=N5({defaultOpen:o,onOpenChange:c,open:r});return Y.jsx(zy.Provider,{value:d,children:t})}const V5=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function U5(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function H5(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=o=>e.ownerDocument.querySelector(`input[type="radio"]${o}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function W5(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||H5(e))}function G5(e){const t=[],r=[];return Array.from(e.querySelectorAll(V5)).forEach((o,c)=>{const d=U5(o);d===-1||!W5(o)||(d===0?t.push(o):r.push({documentOrder:c,tabIndex:d,node:o}))}),r.sort((o,c)=>o.tabIndex===c.tabIndex?o.documentOrder-c.documentOrder:o.tabIndex-c.tabIndex).map(o=>o.node).concat(t)}function q5(){return!0}function Z5(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:o=!1,disableRestoreFocus:c=!1,getTabbable:d=G5,isEnabled:m=q5,open:l}=e,b=A.useRef(!1),w=A.useRef(null),T=A.useRef(null),E=A.useRef(null),z=A.useRef(null),j=A.useRef(!1),U=A.useRef(null),V=tn(t.ref,U),K=A.useRef(null);A.useEffect(()=>{!l||!U.current||(j.current=!r)},[r,l]),A.useEffect(()=>{if(!l||!U.current)return;const R=Ya(U.current);return U.current.contains(R.activeElement)||(U.current.hasAttribute("tabIndex")||U.current.setAttribute("tabIndex","-1"),j.current&&U.current.focus()),()=>{c||(E.current&&E.current.focus&&(b.current=!0,E.current.focus()),E.current=null)}},[l]),A.useEffect(()=>{if(!l||!U.current)return;const R=Ya(U.current),re=ie=>{K.current=ie,!(o||!m()||ie.key!=="Tab")&&R.activeElement===U.current&&ie.shiftKey&&(b.current=!0,T.current&&T.current.focus())},J=()=>{const ie=U.current;if(ie===null)return;if(!R.hasFocus()||!m()||b.current){b.current=!1;return}if(ie.contains(R.activeElement)||o&&R.activeElement!==w.current&&R.activeElement!==T.current)return;if(R.activeElement!==z.current)z.current=null;else if(z.current!==null)return;if(!j.current)return;let Z=[];if((R.activeElement===w.current||R.activeElement===T.current)&&(Z=d(U.current)),Z.length>0){var ke,xe;const Ie=!!((ke=K.current)!=null&&ke.shiftKey&&((xe=K.current)==null?void 0:xe.key)==="Tab"),ze=Z[0],Le=Z[Z.length-1];typeof ze!="string"&&typeof Le!="string"&&(Ie?Le.focus():ze.focus())}else ie.focus()};R.addEventListener("focusin",J),R.addEventListener("keydown",re,!0);const se=setInterval(()=>{R.activeElement&&R.activeElement.tagName==="BODY"&&J()},50);return()=>{clearInterval(se),R.removeEventListener("focusin",J),R.removeEventListener("keydown",re,!0)}},[r,o,c,m,l,d]);const O=R=>{E.current===null&&(E.current=R.relatedTarget),j.current=!0,z.current=R.target;const re=t.props.onFocus;re&&re(R)},L=R=>{E.current===null&&(E.current=R.relatedTarget),j.current=!0};return Y.jsxs(A.Fragment,{children:[Y.jsx("div",{tabIndex:l?0:-1,onFocus:L,ref:w,"data-testid":"sentinelStart"}),A.cloneElement(t,{ref:V,onFocus:O}),Y.jsx("div",{tabIndex:l?0:-1,onFocus:L,ref:T,"data-testid":"sentinelEnd"})]})}const K5=A.createContext(void 0);function X5(){return A.useContext(K5)}function J5(e={}){const{defaultValue:t,disabled:r=!1,error:o=!1,onBlur:c,onChange:d,onFocus:m,required:l=!1,value:b,inputRef:w}=e,T=X5();let E,z,j,U,V;if(T){var K,O,L;E=void 0,z=(K=T.disabled)!=null?K:!1,j=(O=T.error)!=null?O:!1,U=(L=T.required)!=null?L:!1,V=T.value}else E=t,z=r,j=o,U=l,V=b;const{current:R}=A.useRef(V!=null),re=A.useCallback(Ge=>{},[]),J=A.useRef(null),se=tn(J,w,re),[ie,Z]=A.useState(!1);A.useEffect(()=>{!T&&z&&ie&&(Z(!1),c==null||c())},[T,z,ie,c]);const ke=Ge=>Te=>{var Fe;if(T!=null&&T.disabled){Te.stopPropagation();return}if((Fe=Ge.onFocus)==null||Fe.call(Ge,Te),T&&T.onFocus){var $e;T==null||($e=T.onFocus)==null||$e.call(T)}else Z(!0)},xe=Ge=>Te=>{var Fe;(Fe=Ge.onBlur)==null||Fe.call(Ge,Te),T&&T.onBlur?T.onBlur():Z(!1)},Ie=Ge=>(Te,...Fe)=>{var $e,Oe;if(!R&&(Te.target||J.current)==null)throw new Error(Is(17));T==null||($e=T.onChange)==null||$e.call(T,Te),(Oe=Ge.onChange)==null||Oe.call(Ge,Te,...Fe)},ze=Ge=>Te=>{var Fe;J.current&&Te.currentTarget===Te.target&&J.current.focus(),(Fe=Ge.onClick)==null||Fe.call(Ge,Te)};return{disabled:z,error:j,focused:ie,formControlContext:T,getInputProps:(Ge={})=>{const Fe=W({},{onBlur:c,onChange:d,onFocus:m},Ei(Ge)),$e=W({},Fe,{onBlur:xe(Fe),onChange:Ie(Fe),onFocus:ke(Fe)});return W({},$e,{"aria-invalid":j||void 0,defaultValue:E,value:V,required:U,disabled:z},Ge,{ref:se},$e)},getRootProps:(Ge={})=>{const Te=Ei(e,["onBlur","onChange","onFocus"]),Fe=W({},Te,Ei(Ge));return W({},Ge,Fe,{onClick:ze(Fe)})},inputRef:se,required:U,value:V}}const un={blur:"list:blur",focus:"list:focus",itemClick:"list:itemClick",itemHover:"list:itemHover",itemsChange:"list:itemsChange",keyDown:"list:keyDown",resetHighlight:"list:resetHighlight",highlightLast:"list:highlightLast",textNavigation:"list:textNavigation",clearSelection:"list:clearSelection"};function Y5(e,t,r,o,c,d){if(r.length===0||!o&&r.every((l,b)=>c(l,b)))return-1;let m=e;for(;;){if(!d&&t==="next"&&m===r.length||!d&&t==="previous"&&m===-1)return-1;if(o?!1:c(r[m],m))m+=t==="next"?1:-1,d&&(m=(m+r.length)%r.length);else return m}}function gi(e,t,r){var o;const{items:c,isItemDisabled:d,disableListWrap:m,disabledItemsFocusable:l,itemComparer:b,focusManagement:w}=r,T=w==="DOM"?0:-1,E=c.length-1,z=e==null?-1:c.findIndex(O=>b(O,e));let j,U,V=!m;switch(t){case"reset":if(T===-1)return null;j=0,U="next",V=!1;break;case"start":j=0,U="next",V=!1;break;case"end":j=E,U="previous",V=!1;break;default:{const O=z+t;O<0?!V&&z!==-1||Math.abs(t)>1?(j=0,U="next"):(j=E,U="previous"):O>E?!V||Math.abs(t)>1?(j=E,U="previous"):(j=0,U="next"):(j=O,U=t>=0?"next":"previous")}}const K=Y5(j,U,c,l,d,V);return K===-1&&e!==null&&!d(e,z)?e:(o=c[K])!=null?o:null}function Q5(e,t,r,o){return r==="none"?[]:r==="single"?o(t[0],e)?t:[e]:t.some(c=>o(c,e))?t.filter(c=>!o(c,e)):[...t,e]}function l1(e,t,r){const{itemComparer:o,isItemDisabled:c,selectionMode:d,items:m}=r,{selectedValues:l}=t,b=m.findIndex(T=>o(e,T));if(c(e,b))return t;const w=Q5(e,l,d,o);return W({},t,{selectedValues:w,highlightedValue:e})}function e3(e,t,r){const o=t.highlightedValue,{orientation:c,pageSize:d}=r;switch(e){case"Home":return W({},t,{highlightedValue:gi(o,"start",r)});case"End":return W({},t,{highlightedValue:gi(o,"end",r)});case"PageUp":return W({},t,{highlightedValue:gi(o,-d,r)});case"PageDown":return W({},t,{highlightedValue:gi(o,d,r)});case"ArrowUp":if(c!=="vertical")break;return W({},t,{highlightedValue:gi(o,-1,r)});case"ArrowDown":if(c!=="vertical")break;return W({},t,{highlightedValue:gi(o,1,r)});case"ArrowLeft":{if(c==="vertical")break;return W({},t,{highlightedValue:gi(o,c==="horizontal-ltr"?-1:1,r)})}case"ArrowRight":{if(c==="vertical")break;return W({},t,{highlightedValue:gi(o,c==="horizontal-ltr"?1:-1,r)})}case"Enter":case" ":return t.highlightedValue===null?t:l1(t.highlightedValue,t,r)}return t}function t3(e,t){return t.focusManagement==="DOM"?e:W({},e,{highlightedValue:null})}function r3(e,t,r){var o;const c=(o=r(e))==null?void 0:o.trim().toLowerCase();return!c||c.length===0?!1:c.indexOf(t)===0}function n3(e,t,r){const{items:o,isItemDisabled:c,disabledItemsFocusable:d,getItemAsString:m}=r,l=t.length>1;let b=l?e.highlightedValue:gi(e.highlightedValue,1,r);for(let w=0;w<o.length;w+=1){if(!b||!l&&e.highlightedValue===b)return e;if(r3(b,t,m)&&(!c(b,o.indexOf(b))||d))return W({},e,{highlightedValue:b});b=gi(b,1,r)}return e}function i3(e,t,r,o){var c;const{itemComparer:d,focusManagement:m}=o;let l=null;if(r.highlightedValue!=null){var b;l=(b=e.find(E=>d(E,r.highlightedValue)))!=null?b:null}else m==="DOM"&&t.length===0&&(l=gi(null,"reset",o));const T=((c=r.selectedValues)!=null?c:[]).filter(E=>e.some(z=>d(z,E)));return W({},r,{highlightedValue:l,selectedValues:T})}function o3(e,t){return W({},e,{highlightedValue:gi(null,"reset",t)})}function a3(e,t){return W({},e,{highlightedValue:gi(null,"end",t)})}function s3(e,t){return W({},e,{selectedValues:[],highlightedValue:gi(null,"reset",t)})}function My(e,t){const{type:r,context:o}=t;switch(r){case un.keyDown:return e3(t.key,e,o);case un.itemClick:return l1(t.item,e,o);case un.blur:return t3(e,o);case un.textNavigation:return n3(e,t.searchString,o);case un.itemsChange:return i3(t.items,t.previousItems,e,o);case un.resetHighlight:return o3(e,o);case un.highlightLast:return a3(e,o);case un.clearSelection:return s3(e,o);default:return e}}const l3=500;function c3(e){const t=A.useRef({searchString:"",lastTime:null});return A.useCallback(r=>{if(r.key.length===1&&r.key!==" "){const o=t.current,c=r.key.toLowerCase(),d=performance.now();o.searchString.length>0&&o.lastTime&&d-o.lastTime>l3?o.searchString=c:(o.searchString.length!==1||c!==o.searchString)&&(o.searchString+=c),o.lastTime=d,e(o.searchString,r)}},[e])}const NS={},u3=()=>{},d3=(e,t)=>e===t,h3=()=>!1,p3=e=>typeof e=="string"?e:String(e),f3=()=>({highlightedValue:null,selectedValues:[]});function c1(e){const{controlledProps:t=NS,disabledItemsFocusable:r=!1,disableListWrap:o=!1,focusManagement:c="activeDescendant",getInitialState:d=f3,getItemDomElement:m,getItemId:l,isItemDisabled:b=h3,rootRef:w,onStateChange:T=u3,items:E,itemComparer:z=d3,getItemAsString:j=p3,onChange:U,onHighlightChange:V,onItemsChange:K,orientation:O="vertical",pageSize:L=5,reducerActionContext:R=NS,selectionMode:re="single",stateReducer:J,componentName:se="useList"}=e,ie=A.useRef(null),Z=tn(w,ie),ke=A.useCallback((lt,qe,pt)=>{if(V==null||V(lt,qe,pt),c==="DOM"&&qe!=null&&(pt===un.itemClick||pt===un.keyDown||pt===un.textNavigation)){var yt;m==null||(yt=m(qe))==null||yt.focus()}},[m,V,c]),xe=A.useMemo(()=>({highlightedValue:z,selectedValues:(lt,qe)=>BS(lt,qe,z)}),[z]),Ie=A.useCallback((lt,qe,pt,yt,or)=>{switch(T==null||T(lt,qe,pt,yt,or),qe){case"highlightedValue":ke(lt,pt,yt);break;case"selectedValues":U==null||U(lt,pt,yt);break}},[ke,U,T]),ze=A.useMemo(()=>({disabledItemsFocusable:r,disableListWrap:o,focusManagement:c,isItemDisabled:b,itemComparer:z,items:E,getItemAsString:j,onHighlightChange:ke,orientation:O,pageSize:L,selectionMode:re,stateComparers:xe}),[r,o,c,b,z,E,j,ke,O,L,re,xe]),Le=d(),Ye=J??My,Ge=A.useMemo(()=>W({},R,ze),[R,ze]),[Te,Fe]=BI({reducer:Ye,actionContext:Ge,initialState:Le,controlledProps:t,stateComparers:xe,onStateChange:Ie,componentName:se}),{highlightedValue:$e,selectedValues:Oe}=Te,Qe=c3((lt,qe)=>Fe({type:un.textNavigation,event:qe,searchString:lt})),at=A.useRef([]);A.useEffect(()=>{BS(at.current,E,z)||(Fe({type:un.itemsChange,event:null,items:E,previousItems:at.current}),at.current=E,K==null||K(E))},[E,z,Fe,K]);const ut=lt=>qe=>{var pt;if((pt=lt.onKeyDown)==null||pt.call(lt,qe),qe.defaultMuiPrevented)return;const yt=["Home","End","PageUp","PageDown"];O==="vertical"?yt.push("ArrowUp","ArrowDown"):yt.push("ArrowLeft","ArrowRight"),c==="activeDescendant"&&yt.push(" ","Enter"),yt.includes(qe.key)&&qe.preventDefault(),Fe({type:un.keyDown,key:qe.key,event:qe}),Qe(qe)},Pt=lt=>qe=>{var pt,yt;(pt=lt.onBlur)==null||pt.call(lt,qe),!qe.defaultMuiPrevented&&((yt=ie.current)!=null&&yt.contains(qe.relatedTarget)||Fe({type:un.blur,event:qe}))},wt=(lt={})=>{const qe=Ei(lt);return W({},lt,{"aria-activedescendant":c==="activeDescendant"&&$e!=null?l($e):void 0,tabIndex:c==="DOM"?-1:0,ref:Z},qe,{onBlur:Pt(qe),onKeyDown:ut(qe)})},zt=A.useCallback(lt=>{const qe=(Oe??[]).some(or=>or!=null&&z(lt,or)),pt=$e!=null&&z(lt,$e);return{focusable:c==="DOM",highlighted:pt,selected:qe}},[z,Oe,$e,c]),er=A.useMemo(()=>({dispatch:Fe,getItemState:zt}),[Fe,zt]);return A.useDebugValue({state:Te}),{contextValue:er,dispatch:Fe,getRootProps:wt,rootRef:Z,state:Te}}const Cl=A.createContext(null);function u1(e){const{handlePointerOverEvents:t=!1,item:r}=e,o=A.useContext(Cl);if(!o)throw new Error("useListItem must be used within a ListProvider");const{dispatch:c,getItemState:d}=o,{highlighted:m,selected:l,focusable:b}=d(r),w=A.useCallback(j=>U=>{var V;(V=j.onClick)==null||V.call(j,U),!U.defaultPrevented&&c({type:un.itemClick,item:r,event:U})},[c,r]),T=A.useCallback(j=>U=>{var V;(V=j.onMouseOver)==null||V.call(j,U),!U.defaultPrevented&&c({type:un.itemHover,item:r,event:U})},[c,r]);let E;return b&&(E=m?0:-1),{getRootProps:(j={})=>{const U=Ei(j);return W({},j,{onClick:w(U),onPointerOver:t?T(U):void 0,tabIndex:E})},highlighted:m,selected:l}}function m3(e,t){if(t.type===un.itemHover)return W({},e,{highlightedValue:t.item});const r=My(e,t);if(r.highlightedValue===null&&t.context.items.length>0)return W({},r,{highlightedValue:t.context.items[0]});if(t.type===un.keyDown&&t.event.key==="Escape")return W({},r,{open:!1});if(t.type===un.blur){var o;if(!((o=t.context.listboxRef.current)!=null&&o.contains(t.event.relatedTarget))){var c,d;const m=(c=t.context.listboxRef.current)==null?void 0:c.getAttribute("id"),l=(d=t.event.relatedTarget)==null?void 0:d.getAttribute("aria-controls");return m&&l&&m===l?r:W({},r,{open:!1,highlightedValue:t.context.items[0]})}}return r}const Gp=A.createContext(null);function g3(e){const t=Array.from(e.keys()).map(r=>{const o=e.get(r);return{key:r,subitem:o}});return t.sort((r,o)=>{const c=r.subitem.ref.current,d=o.subitem.ref.current;return c===null||d===null||c===d?0:c.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_PRECEDING?1:-1}),new Map(t.map(r=>[r.key,r.subitem]))}function Dy(){const[e,t]=A.useState(new Map),r=A.useRef(new Set),o=A.useCallback(function(w){r.current.delete(w),t(T=>{const E=new Map(T);return E.delete(w),E})},[]),c=A.useCallback(function(w,T){let E;return typeof w=="function"?E=w(r.current):E=w,r.current.add(E),t(z=>{const j=new Map(z);return j.set(E,T),j}),{id:E,deregister:()=>o(E)}},[o]),d=A.useMemo(()=>g3(e),[e]),m=A.useCallback(function(w){return Array.from(d.keys()).indexOf(w)},[d]);return{contextValue:A.useMemo(()=>({getItemIndex:m,registerItem:c,totalSubitemCount:e.size}),[m,c,e.size]),subitems:d}}function Ay(e,t){const r=A.useContext(Gp);if(r===null)throw new Error("useCompoundItem must be used within a useCompoundParent");const{registerItem:o}=r,[c,d]=A.useState(typeof e=="function"?void 0:e);return Ts(()=>{const{id:m,deregister:l}=o(e,t);return d(m),l},[o,t,e]),{id:c,index:c!==void 0?r.getItemIndex(c):-1,totalItemCount:r.totalSubitemCount}}function Ps(e,t){return function(o={}){const c=W({},o,e(o));return W({},c,t(c))}}const y3={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function v3(e={}){var t,r;const{listboxRef:o,onItemsChange:c,id:d,disabledItemsFocusable:m=!0,disableListWrap:l=!1,autoFocus:b=!0,componentName:w="useMenu"}=e,T=A.useRef(null),E=tn(T,o),z=(t=ko(d))!=null?t:"",{state:{open:j,changeReason:U},dispatch:V,triggerElement:K,registerPopup:O}=(r=A.useContext(zy))!=null?r:y3,L=A.useRef(j),{subitems:R,contextValue:re}=Dy(),J=A.useMemo(()=>Array.from(R.keys()),[R]),se=A.useCallback(Oe=>{var Qe,at;return Oe==null?null:(Qe=(at=R.get(Oe))==null?void 0:at.ref.current)!=null?Qe:null},[R]),ie=A.useCallback(Oe=>{var Qe;return(R==null||(Qe=R.get(Oe))==null?void 0:Qe.disabled)||!1},[R]),Z=A.useCallback(Oe=>{var Qe,at;return((Qe=R.get(Oe))==null?void 0:Qe.label)||((at=R.get(Oe))==null||(at=at.ref.current)==null?void 0:at.innerText)},[R]),ke=A.useMemo(()=>({listboxRef:T}),[T]),{dispatch:xe,getRootProps:Ie,contextValue:ze,state:{highlightedValue:Le},rootRef:Ye}=c1({disabledItemsFocusable:m,disableListWrap:l,focusManagement:"DOM",getItemDomElement:se,getInitialState:()=>({selectedValues:[],highlightedValue:null}),isItemDisabled:ie,items:J,getItemAsString:Z,rootRef:E,onItemsChange:c,reducerActionContext:ke,selectionMode:"none",stateReducer:m3,componentName:w});Ts(()=>{O(z)},[z,O]),Ts(()=>{j&&(U==null?void 0:U.type)==="keydown"&&U.key==="ArrowUp"&&xe({type:un.highlightLast,event:U})},[j,U,xe]),A.useEffect(()=>{if(j&&b&&Le&&!L.current){var Oe;(Oe=R.get(Le))==null||(Oe=Oe.ref)==null||(Oe=Oe.current)==null||Oe.focus()}},[j,b,Le,R,J]),A.useEffect(()=>{var Oe;if((Oe=T.current)!=null&&Oe.contains(document.activeElement)&&Le!==null){var Qe;R==null||(Qe=R.get(Le))==null||(Qe=Qe.ref.current)==null||Qe.focus()}},[Le,R]);const Ge=Oe=>Qe=>{var at,ut;(at=Oe.onBlur)==null||at.call(Oe,Qe),!Qe.defaultMuiPrevented&&((ut=T.current)!=null&&ut.contains(Qe.relatedTarget)||Qe.relatedTarget===K||V({type:Da.blur,event:Qe}))},Te=Oe=>Qe=>{var at;(at=Oe.onKeyDown)==null||at.call(Oe,Qe),!Qe.defaultMuiPrevented&&Qe.key==="Escape"&&V({type:Da.escapeKeyDown,event:Qe})},Fe=(Oe={})=>({onBlur:Ge(Oe),onKeyDown:Te(Oe)}),$e=(Oe={})=>{const Qe=Ps(Fe,Ie),at=Ei(Oe);return W({},Oe,at,Qe(at),{id:z,role:"menu"})};return A.useDebugValue({subitems:R,highlightedValue:Le}),{contextValue:W({},re,ze),dispatch:xe,getListboxProps:$e,highlightedValue:Le,listboxRef:Ye,menuItems:R,open:j,triggerElement:K}}function _3(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:c,getItemState:d,registerItem:m,totalSubitemCount:l}=t,b=A.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:c}),[o,c,d]),w=A.useMemo(()=>({getItemIndex:c,registerItem:m,totalSubitemCount:l}),[m,c,l]);return Y.jsx(Gp.Provider,{value:w,children:Y.jsx(Cl.Provider,{value:b,children:r})})}var OI={exports:{}},Vo={},FI={exports:{}},NI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($e,Oe){var Qe=$e.length;$e.push(Oe);e:for(;0<Qe;){var at=Qe-1>>>1,ut=$e[at];if(0<c(ut,Oe))$e[at]=Oe,$e[Qe]=ut,Qe=at;else break e}}function r($e){return $e.length===0?null:$e[0]}function o($e){if($e.length===0)return null;var Oe=$e[0],Qe=$e.pop();if(Qe!==Oe){$e[0]=Qe;e:for(var at=0,ut=$e.length,Pt=ut>>>1;at<Pt;){var wt=2*(at+1)-1,zt=$e[wt],er=wt+1,lt=$e[er];if(0>c(zt,Qe))er<ut&&0>c(lt,zt)?($e[at]=lt,$e[er]=Qe,at=er):($e[at]=zt,$e[wt]=Qe,at=wt);else if(er<ut&&0>c(lt,Qe))$e[at]=lt,$e[er]=Qe,at=er;else break e}}return Oe}function c($e,Oe){var Qe=$e.sortIndex-Oe.sortIndex;return Qe!==0?Qe:$e.id-Oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var m=Date,l=m.now();e.unstable_now=function(){return m.now()-l}}var b=[],w=[],T=1,E=null,z=3,j=!1,U=!1,V=!1,K=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R($e){for(var Oe=r(w);Oe!==null;){if(Oe.callback===null)o(w);else if(Oe.startTime<=$e)o(w),Oe.sortIndex=Oe.expirationTime,t(b,Oe);else break;Oe=r(w)}}function re($e){if(V=!1,R($e),!U)if(r(b)!==null)U=!0,Te(J);else{var Oe=r(w);Oe!==null&&Fe(re,Oe.startTime-$e)}}function J($e,Oe){U=!1,V&&(V=!1,O(Z),Z=-1),j=!0;var Qe=z;try{for(R(Oe),E=r(b);E!==null&&(!(E.expirationTime>Oe)||$e&&!Ie());){var at=E.callback;if(typeof at=="function"){E.callback=null,z=E.priorityLevel;var ut=at(E.expirationTime<=Oe);Oe=e.unstable_now(),typeof ut=="function"?E.callback=ut:E===r(b)&&o(b),R(Oe)}else o(b);E=r(b)}if(E!==null)var Pt=!0;else{var wt=r(w);wt!==null&&Fe(re,wt.startTime-Oe),Pt=!1}return Pt}finally{E=null,z=Qe,j=!1}}var se=!1,ie=null,Z=-1,ke=5,xe=-1;function Ie(){return!(e.unstable_now()-xe<ke)}function ze(){if(ie!==null){var $e=e.unstable_now();xe=$e;var Oe=!0;try{Oe=ie(!0,$e)}finally{Oe?Le():(se=!1,ie=null)}}else se=!1}var Le;if(typeof L=="function")Le=function(){L(ze)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,Ge=Ye.port2;Ye.port1.onmessage=ze,Le=function(){Ge.postMessage(null)}}else Le=function(){K(ze,0)};function Te($e){ie=$e,se||(se=!0,Le())}function Fe($e,Oe){Z=K(function(){$e(e.unstable_now())},Oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($e){$e.callback=null},e.unstable_continueExecution=function(){U||j||(U=!0,Te(J))},e.unstable_forceFrameRate=function($e){0>$e||125<$e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ke=0<$e?Math.floor(1e3/$e):5},e.unstable_getCurrentPriorityLevel=function(){return z},e.unstable_getFirstCallbackNode=function(){return r(b)},e.unstable_next=function($e){switch(z){case 1:case 2:case 3:var Oe=3;break;default:Oe=z}var Qe=z;z=Oe;try{return $e()}finally{z=Qe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($e,Oe){switch($e){case 1:case 2:case 3:case 4:case 5:break;default:$e=3}var Qe=z;z=$e;try{return Oe()}finally{z=Qe}},e.unstable_scheduleCallback=function($e,Oe,Qe){var at=e.unstable_now();switch(typeof Qe=="object"&&Qe!==null?(Qe=Qe.delay,Qe=typeof Qe=="number"&&0<Qe?at+Qe:at):Qe=at,$e){case 1:var ut=-1;break;case 2:ut=250;break;case 5:ut=1073741823;break;case 4:ut=1e4;break;default:ut=5e3}return ut=Qe+ut,$e={id:T++,callback:Oe,priorityLevel:$e,startTime:Qe,expirationTime:ut,sortIndex:-1},Qe>at?($e.sortIndex=Qe,t(w,$e),r(b)===null&&$e===r(w)&&(V?(O(Z),Z=-1):V=!0,Fe(re,Qe-at))):($e.sortIndex=ut,t(b,$e),U||j||(U=!0,Te(J))),$e},e.unstable_shouldYield=Ie,e.unstable_wrapCallback=function($e){var Oe=z;return function(){var Qe=z;z=Oe;try{return $e.apply(this,arguments)}finally{z=Qe}}}})(NI);FI.exports=NI;var x3=FI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b3=A,Fo=x3;function mt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jI=new Set,mp={};function xc(e,t){Vu(e,t),Vu(e+"Capture",t)}function Vu(e,t){for(mp[e]=t,e=0;e<t.length;e++)jI.add(t[e])}var Es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),b_=Object.prototype.hasOwnProperty,w3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jS={},VS={};function S3(e){return b_.call(VS,e)?!0:b_.call(jS,e)?!1:w3.test(e)?VS[e]=!0:(jS[e]=!0,!1)}function C3(e,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function k3(e,t,r,o){if(t===null||typeof t>"u"||C3(e,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function co(e,t,r,o,c,d,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=m}var Mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mi[e]=new co(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mi[t]=new co(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mi[e]=new co(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mi[e]=new co(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mi[e]=new co(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mi[e]=new co(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mi[e]=new co(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mi[e]=new co(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mi[e]=new co(e,5,!1,e.toLowerCase(),null,!1,!1)});var d1=/[\-:]([a-z])/g;function h1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(d1,h1);Mi[t]=new co(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(d1,h1);Mi[t]=new co(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(d1,h1);Mi[t]=new co(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mi[e]=new co(e,1,!1,e.toLowerCase(),null,!1,!1)});Mi.xlinkHref=new co("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mi[e]=new co(e,1,!1,e.toLowerCase(),null,!0,!0)});function p1(e,t,r,o){var c=Mi.hasOwnProperty(t)?Mi[t]:null;(c!==null?c.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(k3(t,r,c,o)&&(r=null),o||c===null?S3(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,o=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}var Ls=b3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_m=Symbol.for("react.element"),yu=Symbol.for("react.portal"),vu=Symbol.for("react.fragment"),f1=Symbol.for("react.strict_mode"),w_=Symbol.for("react.profiler"),VI=Symbol.for("react.provider"),UI=Symbol.for("react.context"),m1=Symbol.for("react.forward_ref"),S_=Symbol.for("react.suspense"),C_=Symbol.for("react.suspense_list"),g1=Symbol.for("react.memo"),nl=Symbol.for("react.lazy"),HI=Symbol.for("react.offscreen"),US=Symbol.iterator;function Th(e){return e===null||typeof e!="object"?null:(e=US&&e[US]||e["@@iterator"],typeof e=="function"?e:null)}var $n=Object.assign,I0;function Uh(e){if(I0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);I0=t&&t[1]||""}return`
`+I0+e}var T0=!1;function P0(e,t){if(!e||T0)return"";T0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var o=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){o=w}e.call(t.prototype)}else{try{throw Error()}catch(w){o=w}e()}}catch(w){if(w&&o&&typeof w.stack=="string"){for(var c=w.stack.split(`
`),d=o.stack.split(`
`),m=c.length-1,l=d.length-1;1<=m&&0<=l&&c[m]!==d[l];)l--;for(;1<=m&&0<=l;m--,l--)if(c[m]!==d[l]){if(m!==1||l!==1)do if(m--,l--,0>l||c[m]!==d[l]){var b=`
`+c[m].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=m&&0<=l);break}}}finally{T0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Uh(e):""}function I3(e){switch(e.tag){case 5:return Uh(e.type);case 16:return Uh("Lazy");case 13:return Uh("Suspense");case 19:return Uh("SuspenseList");case 0:case 2:case 15:return e=P0(e.type,!1),e;case 11:return e=P0(e.type.render,!1),e;case 1:return e=P0(e.type,!0),e;default:return""}}function k_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vu:return"Fragment";case yu:return"Portal";case w_:return"Profiler";case f1:return"StrictMode";case S_:return"Suspense";case C_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case UI:return(e.displayName||"Context")+".Consumer";case VI:return(e._context.displayName||"Context")+".Provider";case m1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case g1:return t=e.displayName||null,t!==null?t:k_(e.type)||"Memo";case nl:t=e._payload,e=e._init;try{return k_(e(t))}catch{}}return null}function T3(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return k_(t);case 8:return t===f1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function WI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function P3(e){var t=WI(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){o=""+m,d.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(m){o=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xm(e){e._valueTracker||(e._valueTracker=P3(e))}function GI(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=WI(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function fg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function I_(e,t){var r=t.checked;return $n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function HS(e,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=bl(t.value!=null?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qI(e,t){t=t.checked,t!=null&&p1(e,"checked",t,!1)}function T_(e,t){qI(e,t);var r=bl(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?P_(e,t.type,r):t.hasOwnProperty("defaultValue")&&P_(e,t.type,bl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function WS(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function P_(e,t,r){(t!=="number"||fg(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Hh=Array.isArray;function Au(e,t,r,o){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&o&&(e[r].defaultSelected=!0)}else{for(r=""+bl(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function E_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(mt(91));return $n({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function GS(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(mt(92));if(Hh(r)){if(1<r.length)throw Error(mt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:bl(r)}}function ZI(e,t){var r=bl(t.value),o=bl(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),o!=null&&(e.defaultValue=""+o)}function qS(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function KI(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function z_(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?KI(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var bm,XI=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,o,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,o,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(bm=bm||document.createElement("div"),bm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=bm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Jh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},E3=["Webkit","ms","Moz","O"];Object.keys(Jh).forEach(function(e){E3.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jh[t]=Jh[e]})});function JI(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Jh.hasOwnProperty(e)&&Jh[e]?(""+t).trim():t+"px"}function YI(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,c=JI(r,t[r],o);r==="float"&&(r="cssFloat"),o?e.setProperty(r,c):e[r]=c}}var z3=$n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function M_(e,t){if(t){if(z3[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(mt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(mt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(mt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(mt(62))}}function D_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var A_=null;function y1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var R_=null,Ru=null,Lu=null;function ZS(e){if(e=Kp(e)){if(typeof R_!="function")throw Error(mt(280));var t=e.stateNode;t&&(t=Oy(t),R_(e.stateNode,e.type,t))}}function QI(e){Ru?Lu?Lu.push(e):Lu=[e]:Ru=e}function eT(){if(Ru){var e=Ru,t=Lu;if(Lu=Ru=null,ZS(e),t)for(e=0;e<t.length;e++)ZS(t[e])}}function tT(e,t){return e(t)}function rT(){}var E0=!1;function nT(e,t,r){if(E0)return e(t,r);E0=!0;try{return tT(e,t,r)}finally{E0=!1,(Ru!==null||Lu!==null)&&(rT(),eT())}}function yp(e,t){var r=e.stateNode;if(r===null)return null;var o=Oy(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(mt(231,t,typeof r));return r}var L_=!1;if(Es)try{var Ph={};Object.defineProperty(Ph,"passive",{get:function(){L_=!0}}),window.addEventListener("test",Ph,Ph),window.removeEventListener("test",Ph,Ph)}catch{L_=!1}function M3(e,t,r,o,c,d,m,l,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(r,w)}catch(T){this.onError(T)}}var Yh=!1,mg=null,gg=!1,$_=null,D3={onError:function(e){Yh=!0,mg=e}};function A3(e,t,r,o,c,d,m,l,b){Yh=!1,mg=null,M3.apply(D3,arguments)}function R3(e,t,r,o,c,d,m,l,b){if(A3.apply(this,arguments),Yh){if(Yh){var w=mg;Yh=!1,mg=null}else throw Error(mt(198));gg||(gg=!0,$_=w)}}function bc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function iT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function KS(e){if(bc(e)!==e)throw Error(mt(188))}function L3(e){var t=e.alternate;if(!t){if(t=bc(e),t===null)throw Error(mt(188));return t!==e?null:e}for(var r=e,o=t;;){var c=r.return;if(c===null)break;var d=c.alternate;if(d===null){if(o=c.return,o!==null){r=o;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===r)return KS(c),e;if(d===o)return KS(c),t;d=d.sibling}throw Error(mt(188))}if(r.return!==o.return)r=c,o=d;else{for(var m=!1,l=c.child;l;){if(l===r){m=!0,r=c,o=d;break}if(l===o){m=!0,o=c,r=d;break}l=l.sibling}if(!m){for(l=d.child;l;){if(l===r){m=!0,r=d,o=c;break}if(l===o){m=!0,o=d,r=c;break}l=l.sibling}if(!m)throw Error(mt(189))}}if(r.alternate!==o)throw Error(mt(190))}if(r.tag!==3)throw Error(mt(188));return r.stateNode.current===r?e:t}function oT(e){return e=L3(e),e!==null?aT(e):null}function aT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=aT(e);if(t!==null)return t;e=e.sibling}return null}var sT=Fo.unstable_scheduleCallback,XS=Fo.unstable_cancelCallback,$3=Fo.unstable_shouldYield,B3=Fo.unstable_requestPaint,Xn=Fo.unstable_now,O3=Fo.unstable_getCurrentPriorityLevel,v1=Fo.unstable_ImmediatePriority,lT=Fo.unstable_UserBlockingPriority,yg=Fo.unstable_NormalPriority,F3=Fo.unstable_LowPriority,cT=Fo.unstable_IdlePriority,Ry=null,Qa=null;function N3(e){if(Qa&&typeof Qa.onCommitFiberRoot=="function")try{Qa.onCommitFiberRoot(Ry,e,void 0,(e.current.flags&128)===128)}catch{}}var Aa=Math.clz32?Math.clz32:U3,j3=Math.log,V3=Math.LN2;function U3(e){return e>>>=0,e===0?32:31-(j3(e)/V3|0)|0}var wm=64,Sm=4194304;function Wh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vg(e,t){var r=e.pendingLanes;if(r===0)return 0;var o=0,c=e.suspendedLanes,d=e.pingedLanes,m=r&268435455;if(m!==0){var l=m&~c;l!==0?o=Wh(l):(d&=m,d!==0&&(o=Wh(d)))}else m=r&~c,m!==0?o=Wh(m):d!==0&&(o=Wh(d));if(o===0)return 0;if(t!==0&&t!==o&&!(t&c)&&(c=o&-o,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(o&4&&(o|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)r=31-Aa(t),c=1<<r,o|=e[r],t&=~c;return o}function H3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W3(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var m=31-Aa(d),l=1<<m,b=c[m];b===-1?(!(l&r)||l&o)&&(c[m]=H3(l,t)):b<=t&&(e.expiredLanes|=l),d&=~l}}function B_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function uT(){var e=wm;return wm<<=1,!(wm&4194240)&&(wm=64),e}function z0(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function qp(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Aa(t),e[t]=r}function G3(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var c=31-Aa(r),d=1<<c;t[c]=0,o[c]=-1,e[c]=-1,r&=~d}}function _1(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-Aa(r),c=1<<o;c&t|e[o]&t&&(e[o]|=t),r&=~c}}var rn=0;function dT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hT,x1,pT,fT,mT,O_=!1,Cm=[],dl=null,hl=null,pl=null,vp=new Map,_p=new Map,ol=[],q3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function JS(e,t){switch(e){case"focusin":case"focusout":dl=null;break;case"dragenter":case"dragleave":hl=null;break;case"mouseover":case"mouseout":pl=null;break;case"pointerover":case"pointerout":vp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_p.delete(t.pointerId)}}function Eh(e,t,r,o,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:d,targetContainers:[c]},t!==null&&(t=Kp(t),t!==null&&x1(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Z3(e,t,r,o,c){switch(t){case"focusin":return dl=Eh(dl,e,t,r,o,c),!0;case"dragenter":return hl=Eh(hl,e,t,r,o,c),!0;case"mouseover":return pl=Eh(pl,e,t,r,o,c),!0;case"pointerover":var d=c.pointerId;return vp.set(d,Eh(vp.get(d)||null,e,t,r,o,c)),!0;case"gotpointercapture":return d=c.pointerId,_p.set(d,Eh(_p.get(d)||null,e,t,r,o,c)),!0}return!1}function gT(e){var t=ic(e.target);if(t!==null){var r=bc(t);if(r!==null){if(t=r.tag,t===13){if(t=iT(r),t!==null){e.blockedOn=t,mT(e.priority,function(){pT(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=F_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);A_=o,r.target.dispatchEvent(o),A_=null}else return t=Kp(r),t!==null&&x1(t),e.blockedOn=r,!1;t.shift()}return!0}function YS(e,t,r){Gm(e)&&r.delete(t)}function K3(){O_=!1,dl!==null&&Gm(dl)&&(dl=null),hl!==null&&Gm(hl)&&(hl=null),pl!==null&&Gm(pl)&&(pl=null),vp.forEach(YS),_p.forEach(YS)}function zh(e,t){e.blockedOn===t&&(e.blockedOn=null,O_||(O_=!0,Fo.unstable_scheduleCallback(Fo.unstable_NormalPriority,K3)))}function xp(e){function t(c){return zh(c,e)}if(0<Cm.length){zh(Cm[0],e);for(var r=1;r<Cm.length;r++){var o=Cm[r];o.blockedOn===e&&(o.blockedOn=null)}}for(dl!==null&&zh(dl,e),hl!==null&&zh(hl,e),pl!==null&&zh(pl,e),vp.forEach(t),_p.forEach(t),r=0;r<ol.length;r++)o=ol[r],o.blockedOn===e&&(o.blockedOn=null);for(;0<ol.length&&(r=ol[0],r.blockedOn===null);)gT(r),r.blockedOn===null&&ol.shift()}var $u=Ls.ReactCurrentBatchConfig,_g=!0;function X3(e,t,r,o){var c=rn,d=$u.transition;$u.transition=null;try{rn=1,b1(e,t,r,o)}finally{rn=c,$u.transition=d}}function J3(e,t,r,o){var c=rn,d=$u.transition;$u.transition=null;try{rn=4,b1(e,t,r,o)}finally{rn=c,$u.transition=d}}function b1(e,t,r,o){if(_g){var c=F_(e,t,r,o);if(c===null)N0(e,t,o,xg,r),JS(e,o);else if(Z3(c,e,t,r,o))o.stopPropagation();else if(JS(e,o),t&4&&-1<q3.indexOf(e)){for(;c!==null;){var d=Kp(c);if(d!==null&&hT(d),d=F_(e,t,r,o),d===null&&N0(e,t,o,xg,r),d===c)break;c=d}c!==null&&o.stopPropagation()}else N0(e,t,o,null,r)}}var xg=null;function F_(e,t,r,o){if(xg=null,e=y1(o),e=ic(e),e!==null)if(t=bc(e),t===null)e=null;else if(r=t.tag,r===13){if(e=iT(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xg=e,null}function yT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(O3()){case v1:return 1;case lT:return 4;case yg:case F3:return 16;case cT:return 536870912;default:return 16}default:return 16}}var cl=null,w1=null,qm=null;function vT(){if(qm)return qm;var e,t=w1,r=t.length,o,c="value"in cl?cl.value:cl.textContent,d=c.length;for(e=0;e<r&&t[e]===c[e];e++);var m=r-e;for(o=1;o<=m&&t[r-o]===c[d-o];o++);return qm=c.slice(e,1<o?1-o:void 0)}function Zm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function km(){return!0}function QS(){return!1}function Uo(e){function t(r,o,c,d,m){this._reactName=r,this._targetInst=c,this.type=o,this.nativeEvent=d,this.target=m,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(d):d[l]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?km:QS,this.isPropagationStopped=QS,this}return $n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=km)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=km)},persist:function(){},isPersistent:km}),t}var cd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},S1=Uo(cd),Zp=$n({},cd,{view:0,detail:0}),Y3=Uo(Zp),M0,D0,Mh,Ly=$n({},Zp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:C1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mh&&(Mh&&e.type==="mousemove"?(M0=e.screenX-Mh.screenX,D0=e.screenY-Mh.screenY):D0=M0=0,Mh=e),M0)},movementY:function(e){return"movementY"in e?e.movementY:D0}}),e2=Uo(Ly),Q3=$n({},Ly,{dataTransfer:0}),e$=Uo(Q3),t$=$n({},Zp,{relatedTarget:0}),A0=Uo(t$),r$=$n({},cd,{animationName:0,elapsedTime:0,pseudoElement:0}),n$=Uo(r$),i$=$n({},cd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),o$=Uo(i$),a$=$n({},cd,{data:0}),t2=Uo(a$),s$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},l$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u$(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=c$[e])?!!t[e]:!1}function C1(){return u$}var d$=$n({},Zp,{key:function(e){if(e.key){var t=s$[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Zm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?l$[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:C1,charCode:function(e){return e.type==="keypress"?Zm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Zm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),h$=Uo(d$),p$=$n({},Ly,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r2=Uo(p$),f$=$n({},Zp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:C1}),m$=Uo(f$),g$=$n({},cd,{propertyName:0,elapsedTime:0,pseudoElement:0}),y$=Uo(g$),v$=$n({},Ly,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_$=Uo(v$),x$=[9,13,27,32],k1=Es&&"CompositionEvent"in window,Qh=null;Es&&"documentMode"in document&&(Qh=document.documentMode);var b$=Es&&"TextEvent"in window&&!Qh,_T=Es&&(!k1||Qh&&8<Qh&&11>=Qh),n2=" ",i2=!1;function xT(e,t){switch(e){case"keyup":return x$.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _u=!1;function w$(e,t){switch(e){case"compositionend":return bT(t);case"keypress":return t.which!==32?null:(i2=!0,n2);case"textInput":return e=t.data,e===n2&&i2?null:e;default:return null}}function S$(e,t){if(_u)return e==="compositionend"||!k1&&xT(e,t)?(e=vT(),qm=w1=cl=null,_u=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _T&&t.locale!=="ko"?null:t.data;default:return null}}var C$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!C$[e.type]:t==="textarea"}function wT(e,t,r,o){QI(o),t=bg(t,"onChange"),0<t.length&&(r=new S1("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var ep=null,bp=null;function k$(e){AT(e,0)}function $y(e){var t=wu(e);if(GI(t))return e}function I$(e,t){if(e==="change")return t}var ST=!1;if(Es){var R0;if(Es){var L0="oninput"in document;if(!L0){var a2=document.createElement("div");a2.setAttribute("oninput","return;"),L0=typeof a2.oninput=="function"}R0=L0}else R0=!1;ST=R0&&(!document.documentMode||9<document.documentMode)}function s2(){ep&&(ep.detachEvent("onpropertychange",CT),bp=ep=null)}function CT(e){if(e.propertyName==="value"&&$y(bp)){var t=[];wT(t,bp,e,y1(e)),nT(k$,t)}}function T$(e,t,r){e==="focusin"?(s2(),ep=t,bp=r,ep.attachEvent("onpropertychange",CT)):e==="focusout"&&s2()}function P$(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $y(bp)}function E$(e,t){if(e==="click")return $y(t)}function z$(e,t){if(e==="input"||e==="change")return $y(t)}function M$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $a=typeof Object.is=="function"?Object.is:M$;function wp(e,t){if($a(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var c=r[o];if(!b_.call(t,c)||!$a(e[c],t[c]))return!1}return!0}function l2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function c2(e,t){var r=l2(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=l2(r)}}function kT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function IT(){for(var e=window,t=fg();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=fg(e.document)}return t}function I1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function D$(e){var t=IT(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&kT(r.ownerDocument.documentElement,r)){if(o!==null&&I1(r)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=r.textContent.length,d=Math.min(o.start,c);o=o.end===void 0?d:Math.min(o.end,c),!e.extend&&d>o&&(c=o,o=d,d=c),c=c2(r,d);var m=c2(r,o);c&&m&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>o?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var A$=Es&&"documentMode"in document&&11>=document.documentMode,xu=null,N_=null,tp=null,j_=!1;function u2(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;j_||xu==null||xu!==fg(o)||(o=xu,"selectionStart"in o&&I1(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),tp&&wp(tp,o)||(tp=o,o=bg(N_,"onSelect"),0<o.length&&(t=new S1("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=xu)))}function Im(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var bu={animationend:Im("Animation","AnimationEnd"),animationiteration:Im("Animation","AnimationIteration"),animationstart:Im("Animation","AnimationStart"),transitionend:Im("Transition","TransitionEnd")},$0={},TT={};Es&&(TT=document.createElement("div").style,"AnimationEvent"in window||(delete bu.animationend.animation,delete bu.animationiteration.animation,delete bu.animationstart.animation),"TransitionEvent"in window||delete bu.transitionend.transition);function By(e){if($0[e])return $0[e];if(!bu[e])return e;var t=bu[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in TT)return $0[e]=t[r];return e}var PT=By("animationend"),ET=By("animationiteration"),zT=By("animationstart"),MT=By("transitionend"),DT=new Map,d2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kl(e,t){DT.set(e,t),xc(t,[e])}for(var B0=0;B0<d2.length;B0++){var O0=d2[B0],R$=O0.toLowerCase(),L$=O0[0].toUpperCase()+O0.slice(1);kl(R$,"on"+L$)}kl(PT,"onAnimationEnd");kl(ET,"onAnimationIteration");kl(zT,"onAnimationStart");kl("dblclick","onDoubleClick");kl("focusin","onFocus");kl("focusout","onBlur");kl(MT,"onTransitionEnd");Vu("onMouseEnter",["mouseout","mouseover"]);Vu("onMouseLeave",["mouseout","mouseover"]);Vu("onPointerEnter",["pointerout","pointerover"]);Vu("onPointerLeave",["pointerout","pointerover"]);xc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xc("onBeforeInput",["compositionend","keypress","textInput","paste"]);xc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gh));function h2(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,R3(o,t,void 0,e),e.currentTarget=null}function AT(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],c=o.event;o=o.listeners;e:{var d=void 0;if(t)for(var m=o.length-1;0<=m;m--){var l=o[m],b=l.instance,w=l.currentTarget;if(l=l.listener,b!==d&&c.isPropagationStopped())break e;h2(c,l,w),d=b}else for(m=0;m<o.length;m++){if(l=o[m],b=l.instance,w=l.currentTarget,l=l.listener,b!==d&&c.isPropagationStopped())break e;h2(c,l,w),d=b}}}if(gg)throw e=$_,gg=!1,$_=null,e}function wn(e,t){var r=t[G_];r===void 0&&(r=t[G_]=new Set);var o=e+"__bubble";r.has(o)||(RT(t,e,2,!1),r.add(o))}function F0(e,t,r){var o=0;t&&(o|=4),RT(r,e,o,t)}var Tm="_reactListening"+Math.random().toString(36).slice(2);function Sp(e){if(!e[Tm]){e[Tm]=!0,jI.forEach(function(r){r!=="selectionchange"&&($$.has(r)||F0(r,!1,e),F0(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tm]||(t[Tm]=!0,F0("selectionchange",!1,t))}}function RT(e,t,r,o){switch(yT(t)){case 1:var c=X3;break;case 4:c=J3;break;default:c=b1}r=c.bind(null,t,r,e),c=void 0,!L_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function N0(e,t,r,o,c){var d=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var m=o.tag;if(m===3||m===4){var l=o.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(m===4)for(m=o.return;m!==null;){var b=m.tag;if((b===3||b===4)&&(b=m.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;m=m.return}for(;l!==null;){if(m=ic(l),m===null)return;if(b=m.tag,b===5||b===6){o=d=m;continue e}l=l.parentNode}}o=o.return}nT(function(){var w=d,T=y1(r),E=[];e:{var z=DT.get(e);if(z!==void 0){var j=S1,U=e;switch(e){case"keypress":if(Zm(r)===0)break e;case"keydown":case"keyup":j=h$;break;case"focusin":U="focus",j=A0;break;case"focusout":U="blur",j=A0;break;case"beforeblur":case"afterblur":j=A0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=e2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=e$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=m$;break;case PT:case ET:case zT:j=n$;break;case MT:j=y$;break;case"scroll":j=Y3;break;case"wheel":j=_$;break;case"copy":case"cut":case"paste":j=o$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=r2}var V=(t&4)!==0,K=!V&&e==="scroll",O=V?z!==null?z+"Capture":null:z;V=[];for(var L=w,R;L!==null;){R=L;var re=R.stateNode;if(R.tag===5&&re!==null&&(R=re,O!==null&&(re=yp(L,O),re!=null&&V.push(Cp(L,re,R)))),K)break;L=L.return}0<V.length&&(z=new j(z,U,null,r,T),E.push({event:z,listeners:V}))}}if(!(t&7)){e:{if(z=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",z&&r!==A_&&(U=r.relatedTarget||r.fromElement)&&(ic(U)||U[zs]))break e;if((j||z)&&(z=T.window===T?T:(z=T.ownerDocument)?z.defaultView||z.parentWindow:window,j?(U=r.relatedTarget||r.toElement,j=w,U=U?ic(U):null,U!==null&&(K=bc(U),U!==K||U.tag!==5&&U.tag!==6)&&(U=null)):(j=null,U=w),j!==U)){if(V=e2,re="onMouseLeave",O="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(V=r2,re="onPointerLeave",O="onPointerEnter",L="pointer"),K=j==null?z:wu(j),R=U==null?z:wu(U),z=new V(re,L+"leave",j,r,T),z.target=K,z.relatedTarget=R,re=null,ic(T)===w&&(V=new V(O,L+"enter",U,r,T),V.target=R,V.relatedTarget=K,re=V),K=re,j&&U)t:{for(V=j,O=U,L=0,R=V;R;R=su(R))L++;for(R=0,re=O;re;re=su(re))R++;for(;0<L-R;)V=su(V),L--;for(;0<R-L;)O=su(O),R--;for(;L--;){if(V===O||O!==null&&V===O.alternate)break t;V=su(V),O=su(O)}V=null}else V=null;j!==null&&p2(E,z,j,V,!1),U!==null&&K!==null&&p2(E,K,U,V,!0)}}e:{if(z=w?wu(w):window,j=z.nodeName&&z.nodeName.toLowerCase(),j==="select"||j==="input"&&z.type==="file")var J=I$;else if(o2(z))if(ST)J=z$;else{J=P$;var se=T$}else(j=z.nodeName)&&j.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(J=E$);if(J&&(J=J(e,w))){wT(E,J,r,T);break e}se&&se(e,z,w),e==="focusout"&&(se=z._wrapperState)&&se.controlled&&z.type==="number"&&P_(z,"number",z.value)}switch(se=w?wu(w):window,e){case"focusin":(o2(se)||se.contentEditable==="true")&&(xu=se,N_=w,tp=null);break;case"focusout":tp=N_=xu=null;break;case"mousedown":j_=!0;break;case"contextmenu":case"mouseup":case"dragend":j_=!1,u2(E,r,T);break;case"selectionchange":if(A$)break;case"keydown":case"keyup":u2(E,r,T)}var ie;if(k1)e:{switch(e){case"compositionstart":var Z="onCompositionStart";break e;case"compositionend":Z="onCompositionEnd";break e;case"compositionupdate":Z="onCompositionUpdate";break e}Z=void 0}else _u?xT(e,r)&&(Z="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Z="onCompositionStart");Z&&(_T&&r.locale!=="ko"&&(_u||Z!=="onCompositionStart"?Z==="onCompositionEnd"&&_u&&(ie=vT()):(cl=T,w1="value"in cl?cl.value:cl.textContent,_u=!0)),se=bg(w,Z),0<se.length&&(Z=new t2(Z,e,null,r,T),E.push({event:Z,listeners:se}),ie?Z.data=ie:(ie=bT(r),ie!==null&&(Z.data=ie)))),(ie=b$?w$(e,r):S$(e,r))&&(w=bg(w,"onBeforeInput"),0<w.length&&(T=new t2("onBeforeInput","beforeinput",null,r,T),E.push({event:T,listeners:w}),T.data=ie))}AT(E,t)})}function Cp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function bg(e,t){for(var r=t+"Capture",o=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=yp(e,r),d!=null&&o.unshift(Cp(e,d,c)),d=yp(e,t),d!=null&&o.push(Cp(e,d,c))),e=e.return}return o}function su(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function p2(e,t,r,o,c){for(var d=t._reactName,m=[];r!==null&&r!==o;){var l=r,b=l.alternate,w=l.stateNode;if(b!==null&&b===o)break;l.tag===5&&w!==null&&(l=w,c?(b=yp(r,d),b!=null&&m.unshift(Cp(r,b,l))):c||(b=yp(r,d),b!=null&&m.push(Cp(r,b,l)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}var B$=/\r\n?/g,O$=/\u0000|\uFFFD/g;function f2(e){return(typeof e=="string"?e:""+e).replace(B$,`
`).replace(O$,"")}function Pm(e,t,r){if(t=f2(t),f2(e)!==t&&r)throw Error(mt(425))}function wg(){}var V_=null,U_=null;function H_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var W_=typeof setTimeout=="function"?setTimeout:void 0,F$=typeof clearTimeout=="function"?clearTimeout:void 0,m2=typeof Promise=="function"?Promise:void 0,N$=typeof queueMicrotask=="function"?queueMicrotask:typeof m2<"u"?function(e){return m2.resolve(null).then(e).catch(j$)}:W_;function j$(e){setTimeout(function(){throw e})}function j0(e,t){var r=t,o=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(o===0){e.removeChild(c),xp(t);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=c}while(r);xp(t)}function fl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function g2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ud=Math.random().toString(36).slice(2),Xa="__reactFiber$"+ud,kp="__reactProps$"+ud,zs="__reactContainer$"+ud,G_="__reactEvents$"+ud,V$="__reactListeners$"+ud,U$="__reactHandles$"+ud;function ic(e){var t=e[Xa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zs]||r[Xa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=g2(e);e!==null;){if(r=e[Xa])return r;e=g2(e)}return t}e=r,r=e.parentNode}return null}function Kp(e){return e=e[Xa]||e[zs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(mt(33))}function Oy(e){return e[kp]||null}var q_=[],Su=-1;function Il(e){return{current:e}}function Cn(e){0>Su||(e.current=q_[Su],q_[Su]=null,Su--)}function yn(e,t){Su++,q_[Su]=e.current,e.current=t}var wl={},Zi=Il(wl),_o=Il(!1),fc=wl;function Uu(e,t){var r=e.type.contextTypes;if(!r)return wl;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in r)c[d]=t[d];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function xo(e){return e=e.childContextTypes,e!=null}function Sg(){Cn(_o),Cn(Zi)}function y2(e,t,r){if(Zi.current!==wl)throw Error(mt(168));yn(Zi,t),yn(_o,r)}function LT(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var c in o)if(!(c in t))throw Error(mt(108,T3(e)||"Unknown",c));return $n({},r,o)}function Cg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wl,fc=Zi.current,yn(Zi,e),yn(_o,_o.current),!0}function v2(e,t,r){var o=e.stateNode;if(!o)throw Error(mt(169));r?(e=LT(e,t,fc),o.__reactInternalMemoizedMergedChildContext=e,Cn(_o),Cn(Zi),yn(Zi,e)):Cn(_o),yn(_o,r)}var bs=null,Fy=!1,V0=!1;function $T(e){bs===null?bs=[e]:bs.push(e)}function H$(e){Fy=!0,$T(e)}function Tl(){if(!V0&&bs!==null){V0=!0;var e=0,t=rn;try{var r=bs;for(rn=1;e<r.length;e++){var o=r[e];do o=o(!0);while(o!==null)}bs=null,Fy=!1}catch(c){throw bs!==null&&(bs=bs.slice(e+1)),sT(v1,Tl),c}finally{rn=t,V0=!1}}return null}var Cu=[],ku=0,kg=null,Ig=0,ta=[],ra=0,mc=null,Ss=1,Cs="";function Ql(e,t){Cu[ku++]=Ig,Cu[ku++]=kg,kg=e,Ig=t}function BT(e,t,r){ta[ra++]=Ss,ta[ra++]=Cs,ta[ra++]=mc,mc=e;var o=Ss;e=Cs;var c=32-Aa(o)-1;o&=~(1<<c),r+=1;var d=32-Aa(t)+c;if(30<d){var m=c-c%5;d=(o&(1<<m)-1).toString(32),o>>=m,c-=m,Ss=1<<32-Aa(t)+c|r<<c|o,Cs=d+e}else Ss=1<<d|r<<c|o,Cs=e}function T1(e){e.return!==null&&(Ql(e,1),BT(e,1,0))}function P1(e){for(;e===kg;)kg=Cu[--ku],Cu[ku]=null,Ig=Cu[--ku],Cu[ku]=null;for(;e===mc;)mc=ta[--ra],ta[ra]=null,Cs=ta[--ra],ta[ra]=null,Ss=ta[--ra],ta[ra]=null}var Oo=null,$o=null,En=!1,Ma=null;function OT(e,t){var r=na(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function _2(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Oo=e,$o=fl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Oo=e,$o=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=mc!==null?{id:Ss,overflow:Cs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=na(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Oo=e,$o=null,!0):!1;default:return!1}}function Z_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function K_(e){if(En){var t=$o;if(t){var r=t;if(!_2(e,t)){if(Z_(e))throw Error(mt(418));t=fl(r.nextSibling);var o=Oo;t&&_2(e,t)?OT(o,r):(e.flags=e.flags&-4097|2,En=!1,Oo=e)}}else{if(Z_(e))throw Error(mt(418));e.flags=e.flags&-4097|2,En=!1,Oo=e}}}function x2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Oo=e}function Em(e){if(e!==Oo)return!1;if(!En)return x2(e),En=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!H_(e.type,e.memoizedProps)),t&&(t=$o)){if(Z_(e))throw FT(),Error(mt(418));for(;t;)OT(e,t),t=fl(t.nextSibling)}if(x2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(mt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){$o=fl(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}$o=null}}else $o=Oo?fl(e.stateNode.nextSibling):null;return!0}function FT(){for(var e=$o;e;)e=fl(e.nextSibling)}function Hu(){$o=Oo=null,En=!1}function E1(e){Ma===null?Ma=[e]:Ma.push(e)}var W$=Ls.ReactCurrentBatchConfig;function Dh(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(mt(309));var o=r.stateNode}if(!o)throw Error(mt(147,e));var c=o,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(m){var l=c.refs;m===null?delete l[d]:l[d]=m},t._stringRef=d,t)}if(typeof e!="string")throw Error(mt(284));if(!r._owner)throw Error(mt(290,e))}return e}function zm(e,t){throw e=Object.prototype.toString.call(t),Error(mt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function b2(e){var t=e._init;return t(e._payload)}function NT(e){function t(O,L){if(e){var R=O.deletions;R===null?(O.deletions=[L],O.flags|=16):R.push(L)}}function r(O,L){if(!e)return null;for(;L!==null;)t(O,L),L=L.sibling;return null}function o(O,L){for(O=new Map;L!==null;)L.key!==null?O.set(L.key,L):O.set(L.index,L),L=L.sibling;return O}function c(O,L){return O=vl(O,L),O.index=0,O.sibling=null,O}function d(O,L,R){return O.index=R,e?(R=O.alternate,R!==null?(R=R.index,R<L?(O.flags|=2,L):R):(O.flags|=2,L)):(O.flags|=1048576,L)}function m(O){return e&&O.alternate===null&&(O.flags|=2),O}function l(O,L,R,re){return L===null||L.tag!==6?(L=K0(R,O.mode,re),L.return=O,L):(L=c(L,R),L.return=O,L)}function b(O,L,R,re){var J=R.type;return J===vu?T(O,L,R.props.children,re,R.key):L!==null&&(L.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===nl&&b2(J)===L.type)?(re=c(L,R.props),re.ref=Dh(O,L,R),re.return=O,re):(re=tg(R.type,R.key,R.props,null,O.mode,re),re.ref=Dh(O,L,R),re.return=O,re)}function w(O,L,R,re){return L===null||L.tag!==4||L.stateNode.containerInfo!==R.containerInfo||L.stateNode.implementation!==R.implementation?(L=X0(R,O.mode,re),L.return=O,L):(L=c(L,R.children||[]),L.return=O,L)}function T(O,L,R,re,J){return L===null||L.tag!==7?(L=uc(R,O.mode,re,J),L.return=O,L):(L=c(L,R),L.return=O,L)}function E(O,L,R){if(typeof L=="string"&&L!==""||typeof L=="number")return L=K0(""+L,O.mode,R),L.return=O,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case _m:return R=tg(L.type,L.key,L.props,null,O.mode,R),R.ref=Dh(O,null,L),R.return=O,R;case yu:return L=X0(L,O.mode,R),L.return=O,L;case nl:var re=L._init;return E(O,re(L._payload),R)}if(Hh(L)||Th(L))return L=uc(L,O.mode,R,null),L.return=O,L;zm(O,L)}return null}function z(O,L,R,re){var J=L!==null?L.key:null;if(typeof R=="string"&&R!==""||typeof R=="number")return J!==null?null:l(O,L,""+R,re);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case _m:return R.key===J?b(O,L,R,re):null;case yu:return R.key===J?w(O,L,R,re):null;case nl:return J=R._init,z(O,L,J(R._payload),re)}if(Hh(R)||Th(R))return J!==null?null:T(O,L,R,re,null);zm(O,R)}return null}function j(O,L,R,re,J){if(typeof re=="string"&&re!==""||typeof re=="number")return O=O.get(R)||null,l(L,O,""+re,J);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case _m:return O=O.get(re.key===null?R:re.key)||null,b(L,O,re,J);case yu:return O=O.get(re.key===null?R:re.key)||null,w(L,O,re,J);case nl:var se=re._init;return j(O,L,R,se(re._payload),J)}if(Hh(re)||Th(re))return O=O.get(R)||null,T(L,O,re,J,null);zm(L,re)}return null}function U(O,L,R,re){for(var J=null,se=null,ie=L,Z=L=0,ke=null;ie!==null&&Z<R.length;Z++){ie.index>Z?(ke=ie,ie=null):ke=ie.sibling;var xe=z(O,ie,R[Z],re);if(xe===null){ie===null&&(ie=ke);break}e&&ie&&xe.alternate===null&&t(O,ie),L=d(xe,L,Z),se===null?J=xe:se.sibling=xe,se=xe,ie=ke}if(Z===R.length)return r(O,ie),En&&Ql(O,Z),J;if(ie===null){for(;Z<R.length;Z++)ie=E(O,R[Z],re),ie!==null&&(L=d(ie,L,Z),se===null?J=ie:se.sibling=ie,se=ie);return En&&Ql(O,Z),J}for(ie=o(O,ie);Z<R.length;Z++)ke=j(ie,O,Z,R[Z],re),ke!==null&&(e&&ke.alternate!==null&&ie.delete(ke.key===null?Z:ke.key),L=d(ke,L,Z),se===null?J=ke:se.sibling=ke,se=ke);return e&&ie.forEach(function(Ie){return t(O,Ie)}),En&&Ql(O,Z),J}function V(O,L,R,re){var J=Th(R);if(typeof J!="function")throw Error(mt(150));if(R=J.call(R),R==null)throw Error(mt(151));for(var se=J=null,ie=L,Z=L=0,ke=null,xe=R.next();ie!==null&&!xe.done;Z++,xe=R.next()){ie.index>Z?(ke=ie,ie=null):ke=ie.sibling;var Ie=z(O,ie,xe.value,re);if(Ie===null){ie===null&&(ie=ke);break}e&&ie&&Ie.alternate===null&&t(O,ie),L=d(Ie,L,Z),se===null?J=Ie:se.sibling=Ie,se=Ie,ie=ke}if(xe.done)return r(O,ie),En&&Ql(O,Z),J;if(ie===null){for(;!xe.done;Z++,xe=R.next())xe=E(O,xe.value,re),xe!==null&&(L=d(xe,L,Z),se===null?J=xe:se.sibling=xe,se=xe);return En&&Ql(O,Z),J}for(ie=o(O,ie);!xe.done;Z++,xe=R.next())xe=j(ie,O,Z,xe.value,re),xe!==null&&(e&&xe.alternate!==null&&ie.delete(xe.key===null?Z:xe.key),L=d(xe,L,Z),se===null?J=xe:se.sibling=xe,se=xe);return e&&ie.forEach(function(ze){return t(O,ze)}),En&&Ql(O,Z),J}function K(O,L,R,re){if(typeof R=="object"&&R!==null&&R.type===vu&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case _m:e:{for(var J=R.key,se=L;se!==null;){if(se.key===J){if(J=R.type,J===vu){if(se.tag===7){r(O,se.sibling),L=c(se,R.props.children),L.return=O,O=L;break e}}else if(se.elementType===J||typeof J=="object"&&J!==null&&J.$$typeof===nl&&b2(J)===se.type){r(O,se.sibling),L=c(se,R.props),L.ref=Dh(O,se,R),L.return=O,O=L;break e}r(O,se);break}else t(O,se);se=se.sibling}R.type===vu?(L=uc(R.props.children,O.mode,re,R.key),L.return=O,O=L):(re=tg(R.type,R.key,R.props,null,O.mode,re),re.ref=Dh(O,L,R),re.return=O,O=re)}return m(O);case yu:e:{for(se=R.key;L!==null;){if(L.key===se)if(L.tag===4&&L.stateNode.containerInfo===R.containerInfo&&L.stateNode.implementation===R.implementation){r(O,L.sibling),L=c(L,R.children||[]),L.return=O,O=L;break e}else{r(O,L);break}else t(O,L);L=L.sibling}L=X0(R,O.mode,re),L.return=O,O=L}return m(O);case nl:return se=R._init,K(O,L,se(R._payload),re)}if(Hh(R))return U(O,L,R,re);if(Th(R))return V(O,L,R,re);zm(O,R)}return typeof R=="string"&&R!==""||typeof R=="number"?(R=""+R,L!==null&&L.tag===6?(r(O,L.sibling),L=c(L,R),L.return=O,O=L):(r(O,L),L=K0(R,O.mode,re),L.return=O,O=L),m(O)):r(O,L)}return K}var Wu=NT(!0),jT=NT(!1),Tg=Il(null),Pg=null,Iu=null,z1=null;function M1(){z1=Iu=Pg=null}function D1(e){var t=Tg.current;Cn(Tg),e._currentValue=t}function X_(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function Bu(e,t){Pg=e,z1=Iu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(vo=!0),e.firstContext=null)}function sa(e){var t=e._currentValue;if(z1!==e)if(e={context:e,memoizedValue:t,next:null},Iu===null){if(Pg===null)throw Error(mt(308));Iu=e,Pg.dependencies={lanes:0,firstContext:e}}else Iu=Iu.next=e;return t}var oc=null;function A1(e){oc===null?oc=[e]:oc.push(e)}function VT(e,t,r,o){var c=t.interleaved;return c===null?(r.next=r,A1(t)):(r.next=c.next,c.next=r),t.interleaved=r,Ms(e,o)}function Ms(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var il=!1;function R1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ks(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ml(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,Gr&2){var c=o.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),o.pending=t,Ms(e,r)}return c=o.interleaved,c===null?(t.next=t,A1(o)):(t.next=c.next,c.next=t),o.interleaved=t,Ms(e,r)}function Km(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,_1(e,r)}}function w2(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var c=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?c=d=m:d=d.next=m,r=r.next}while(r!==null);d===null?c=d=t:d=d.next=t}else c=d=t;r={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:o.shared,effects:o.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Eg(e,t,r,o){var c=e.updateQueue;il=!1;var d=c.firstBaseUpdate,m=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var b=l,w=b.next;b.next=null,m===null?d=w:m.next=w,m=b;var T=e.alternate;T!==null&&(T=T.updateQueue,l=T.lastBaseUpdate,l!==m&&(l===null?T.firstBaseUpdate=w:l.next=w,T.lastBaseUpdate=b))}if(d!==null){var E=c.baseState;m=0,T=w=b=null,l=d;do{var z=l.lane,j=l.eventTime;if((o&z)===z){T!==null&&(T=T.next={eventTime:j,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var U=e,V=l;switch(z=t,j=r,V.tag){case 1:if(U=V.payload,typeof U=="function"){E=U.call(j,E,z);break e}E=U;break e;case 3:U.flags=U.flags&-65537|128;case 0:if(U=V.payload,z=typeof U=="function"?U.call(j,E,z):U,z==null)break e;E=$n({},E,z);break e;case 2:il=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,z=c.effects,z===null?c.effects=[l]:z.push(l))}else j={eventTime:j,lane:z,tag:l.tag,payload:l.payload,callback:l.callback,next:null},T===null?(w=T=j,b=E):T=T.next=j,m|=z;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;z=l,l=z.next,z.next=null,c.lastBaseUpdate=z,c.shared.pending=null}}while(!0);if(T===null&&(b=E),c.baseState=b,c.firstBaseUpdate=w,c.lastBaseUpdate=T,t=c.shared.interleaved,t!==null){c=t;do m|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);yc|=m,e.lanes=m,e.memoizedState=E}}function S2(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],c=o.callback;if(c!==null){if(o.callback=null,o=r,typeof c!="function")throw Error(mt(191,c));c.call(o)}}}var Xp={},es=Il(Xp),Ip=Il(Xp),Tp=Il(Xp);function ac(e){if(e===Xp)throw Error(mt(174));return e}function L1(e,t){switch(yn(Tp,t),yn(Ip,e),yn(es,Xp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:z_(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=z_(t,e)}Cn(es),yn(es,t)}function Gu(){Cn(es),Cn(Ip),Cn(Tp)}function HT(e){ac(Tp.current);var t=ac(es.current),r=z_(t,e.type);t!==r&&(yn(Ip,e),yn(es,r))}function $1(e){Ip.current===e&&(Cn(es),Cn(Ip))}var Rn=Il(0);function zg(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var U0=[];function B1(){for(var e=0;e<U0.length;e++)U0[e]._workInProgressVersionPrimary=null;U0.length=0}var Xm=Ls.ReactCurrentDispatcher,H0=Ls.ReactCurrentBatchConfig,gc=0,Ln=null,ci=null,yi=null,Mg=!1,rp=!1,Pp=0,G$=0;function Vi(){throw Error(mt(321))}function O1(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!$a(e[r],t[r]))return!1;return!0}function F1(e,t,r,o,c,d){if(gc=d,Ln=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xm.current=e===null||e.memoizedState===null?X$:J$,e=r(o,c),rp){d=0;do{if(rp=!1,Pp=0,25<=d)throw Error(mt(301));d+=1,yi=ci=null,t.updateQueue=null,Xm.current=Y$,e=r(o,c)}while(rp)}if(Xm.current=Dg,t=ci!==null&&ci.next!==null,gc=0,yi=ci=Ln=null,Mg=!1,t)throw Error(mt(300));return e}function N1(){var e=Pp!==0;return Pp=0,e}function qa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yi===null?Ln.memoizedState=yi=e:yi=yi.next=e,yi}function la(){if(ci===null){var e=Ln.alternate;e=e!==null?e.memoizedState:null}else e=ci.next;var t=yi===null?Ln.memoizedState:yi.next;if(t!==null)yi=t,ci=e;else{if(e===null)throw Error(mt(310));ci=e,e={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},yi===null?Ln.memoizedState=yi=e:yi=yi.next=e}return yi}function Ep(e,t){return typeof t=="function"?t(e):t}function W0(e){var t=la(),r=t.queue;if(r===null)throw Error(mt(311));r.lastRenderedReducer=e;var o=ci,c=o.baseQueue,d=r.pending;if(d!==null){if(c!==null){var m=c.next;c.next=d.next,d.next=m}o.baseQueue=c=d,r.pending=null}if(c!==null){d=c.next,o=o.baseState;var l=m=null,b=null,w=d;do{var T=w.lane;if((gc&T)===T)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),o=w.hasEagerState?w.eagerState:e(o,w.action);else{var E={lane:T,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(l=b=E,m=o):b=b.next=E,Ln.lanes|=T,yc|=T}w=w.next}while(w!==null&&w!==d);b===null?m=o:b.next=l,$a(o,t.memoizedState)||(vo=!0),t.memoizedState=o,t.baseState=m,t.baseQueue=b,r.lastRenderedState=o}if(e=r.interleaved,e!==null){c=e;do d=c.lane,Ln.lanes|=d,yc|=d,c=c.next;while(c!==e)}else c===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function G0(e){var t=la(),r=t.queue;if(r===null)throw Error(mt(311));r.lastRenderedReducer=e;var o=r.dispatch,c=r.pending,d=t.memoizedState;if(c!==null){r.pending=null;var m=c=c.next;do d=e(d,m.action),m=m.next;while(m!==c);$a(d,t.memoizedState)||(vo=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,o]}function WT(){}function GT(e,t){var r=Ln,o=la(),c=t(),d=!$a(o.memoizedState,c);if(d&&(o.memoizedState=c,vo=!0),o=o.queue,j1(KT.bind(null,r,o,e),[e]),o.getSnapshot!==t||d||yi!==null&&yi.memoizedState.tag&1){if(r.flags|=2048,zp(9,ZT.bind(null,r,o,c,t),void 0,null),vi===null)throw Error(mt(349));gc&30||qT(r,t,c)}return c}function qT(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ln.updateQueue,t===null?(t={lastEffect:null,stores:null},Ln.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ZT(e,t,r,o){t.value=r,t.getSnapshot=o,XT(t)&&JT(e)}function KT(e,t,r){return r(function(){XT(t)&&JT(e)})}function XT(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!$a(e,r)}catch{return!0}}function JT(e){var t=Ms(e,1);t!==null&&Ra(t,e,1,-1)}function C2(e){var t=qa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ep,lastRenderedState:e},t.queue=e,e=e.dispatch=K$.bind(null,Ln,e),[t.memoizedState,e]}function zp(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},t=Ln.updateQueue,t===null?(t={lastEffect:null,stores:null},Ln.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e)),e}function YT(){return la().memoizedState}function Jm(e,t,r,o){var c=qa();Ln.flags|=e,c.memoizedState=zp(1|t,r,void 0,o===void 0?null:o)}function Ny(e,t,r,o){var c=la();o=o===void 0?null:o;var d=void 0;if(ci!==null){var m=ci.memoizedState;if(d=m.destroy,o!==null&&O1(o,m.deps)){c.memoizedState=zp(t,r,d,o);return}}Ln.flags|=e,c.memoizedState=zp(1|t,r,d,o)}function k2(e,t){return Jm(8390656,8,e,t)}function j1(e,t){return Ny(2048,8,e,t)}function QT(e,t){return Ny(4,2,e,t)}function eP(e,t){return Ny(4,4,e,t)}function tP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rP(e,t,r){return r=r!=null?r.concat([e]):null,Ny(4,4,tP.bind(null,t,e),r)}function V1(){}function nP(e,t){var r=la();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&O1(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function iP(e,t){var r=la();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&O1(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function oP(e,t,r){return gc&21?($a(r,t)||(r=uT(),Ln.lanes|=r,yc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=r)}function q$(e,t){var r=rn;rn=r!==0&&4>r?r:4,e(!0);var o=H0.transition;H0.transition={};try{e(!1),t()}finally{rn=r,H0.transition=o}}function aP(){return la().memoizedState}function Z$(e,t,r){var o=yl(e);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},sP(e))lP(t,r);else if(r=VT(e,t,r,o),r!==null){var c=so();Ra(r,e,o,c),cP(r,t,o)}}function K$(e,t,r){var o=yl(e),c={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(sP(e))lP(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var m=t.lastRenderedState,l=d(m,r);if(c.hasEagerState=!0,c.eagerState=l,$a(l,m)){var b=t.interleaved;b===null?(c.next=c,A1(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}r=VT(e,t,c,o),r!==null&&(c=so(),Ra(r,e,o,c),cP(r,t,o))}}function sP(e){var t=e.alternate;return e===Ln||t!==null&&t===Ln}function lP(e,t){rp=Mg=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function cP(e,t,r){if(r&4194240){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,_1(e,r)}}var Dg={readContext:sa,useCallback:Vi,useContext:Vi,useEffect:Vi,useImperativeHandle:Vi,useInsertionEffect:Vi,useLayoutEffect:Vi,useMemo:Vi,useReducer:Vi,useRef:Vi,useState:Vi,useDebugValue:Vi,useDeferredValue:Vi,useTransition:Vi,useMutableSource:Vi,useSyncExternalStore:Vi,useId:Vi,unstable_isNewReconciler:!1},X$={readContext:sa,useCallback:function(e,t){return qa().memoizedState=[e,t===void 0?null:t],e},useContext:sa,useEffect:k2,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Jm(4194308,4,tP.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Jm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jm(4,2,e,t)},useMemo:function(e,t){var r=qa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=qa();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=Z$.bind(null,Ln,e),[o.memoizedState,e]},useRef:function(e){var t=qa();return e={current:e},t.memoizedState=e},useState:C2,useDebugValue:V1,useDeferredValue:function(e){return qa().memoizedState=e},useTransition:function(){var e=C2(!1),t=e[0];return e=q$.bind(null,e[1]),qa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=Ln,c=qa();if(En){if(r===void 0)throw Error(mt(407));r=r()}else{if(r=t(),vi===null)throw Error(mt(349));gc&30||qT(o,t,r)}c.memoizedState=r;var d={value:r,getSnapshot:t};return c.queue=d,k2(KT.bind(null,o,d,e),[e]),o.flags|=2048,zp(9,ZT.bind(null,o,d,r,t),void 0,null),r},useId:function(){var e=qa(),t=vi.identifierPrefix;if(En){var r=Cs,o=Ss;r=(o&~(1<<32-Aa(o)-1)).toString(32)+r,t=":"+t+"R"+r,r=Pp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=G$++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},J$={readContext:sa,useCallback:nP,useContext:sa,useEffect:j1,useImperativeHandle:rP,useInsertionEffect:QT,useLayoutEffect:eP,useMemo:iP,useReducer:W0,useRef:YT,useState:function(){return W0(Ep)},useDebugValue:V1,useDeferredValue:function(e){var t=la();return oP(t,ci.memoizedState,e)},useTransition:function(){var e=W0(Ep)[0],t=la().memoizedState;return[e,t]},useMutableSource:WT,useSyncExternalStore:GT,useId:aP,unstable_isNewReconciler:!1},Y$={readContext:sa,useCallback:nP,useContext:sa,useEffect:j1,useImperativeHandle:rP,useInsertionEffect:QT,useLayoutEffect:eP,useMemo:iP,useReducer:G0,useRef:YT,useState:function(){return G0(Ep)},useDebugValue:V1,useDeferredValue:function(e){var t=la();return ci===null?t.memoizedState=e:oP(t,ci.memoizedState,e)},useTransition:function(){var e=G0(Ep)[0],t=la().memoizedState;return[e,t]},useMutableSource:WT,useSyncExternalStore:GT,useId:aP,unstable_isNewReconciler:!1};function Pa(e,t){if(e&&e.defaultProps){t=$n({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function J_(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:$n({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var jy={isMounted:function(e){return(e=e._reactInternals)?bc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=so(),c=yl(e),d=ks(o,c);d.payload=t,r!=null&&(d.callback=r),t=ml(e,d,c),t!==null&&(Ra(t,e,c,o),Km(t,e,c))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=so(),c=yl(e),d=ks(o,c);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=ml(e,d,c),t!==null&&(Ra(t,e,c,o),Km(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=so(),o=yl(e),c=ks(r,o);c.tag=2,t!=null&&(c.callback=t),t=ml(e,c,o),t!==null&&(Ra(t,e,o,r),Km(t,e,o))}};function I2(e,t,r,o,c,d,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,d,m):t.prototype&&t.prototype.isPureReactComponent?!wp(r,o)||!wp(c,d):!0}function uP(e,t,r){var o=!1,c=wl,d=t.contextType;return typeof d=="object"&&d!==null?d=sa(d):(c=xo(t)?fc:Zi.current,o=t.contextTypes,d=(o=o!=null)?Uu(e,c):wl),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jy,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function T2(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&jy.enqueueReplaceState(t,t.state,null)}function Y_(e,t,r,o){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs={},R1(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=sa(d):(d=xo(t)?fc:Zi.current,c.context=Uu(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(J_(e,t,d,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&jy.enqueueReplaceState(c,c.state,null),Eg(e,r,c,o),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function qu(e,t){try{var r="",o=t;do r+=I3(o),o=o.return;while(o);var c=r}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function q0(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Q_(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Q$=typeof WeakMap=="function"?WeakMap:Map;function dP(e,t,r){r=ks(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){Rg||(Rg=!0,cx=o),Q_(e,t)},r}function hP(e,t,r){r=ks(-1,r),r.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var c=t.value;r.payload=function(){return o(c)},r.callback=function(){Q_(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){Q_(e,t),typeof o!="function"&&(gl===null?gl=new Set([this]):gl.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}function P2(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new Q$;var c=new Set;o.set(t,c)}else c=o.get(t),c===void 0&&(c=new Set,o.set(t,c));c.has(r)||(c.add(r),e=p4.bind(null,e,t,r),t.then(e,e))}function E2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function z2(e,t,r,o,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ks(-1,1),t.tag=2,ml(r,t,1))),r.lanes|=1),e)}var e4=Ls.ReactCurrentOwner,vo=!1;function ao(e,t,r,o){t.child=e===null?jT(t,null,r,o):Wu(t,e.child,r,o)}function M2(e,t,r,o,c){r=r.render;var d=t.ref;return Bu(t,c),o=F1(e,t,r,o,d,c),r=N1(),e!==null&&!vo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ds(e,t,c)):(En&&r&&T1(t),t.flags|=1,ao(e,t,o,c),t.child)}function D2(e,t,r,o,c){if(e===null){var d=r.type;return typeof d=="function"&&!X1(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,pP(e,t,d,o,c)):(e=tg(r.type,null,o,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var m=d.memoizedProps;if(r=r.compare,r=r!==null?r:wp,r(m,o)&&e.ref===t.ref)return Ds(e,t,c)}return t.flags|=1,e=vl(d,o),e.ref=t.ref,e.return=t,t.child=e}function pP(e,t,r,o,c){if(e!==null){var d=e.memoizedProps;if(wp(d,o)&&e.ref===t.ref)if(vo=!1,t.pendingProps=o=d,(e.lanes&c)!==0)e.flags&131072&&(vo=!0);else return t.lanes=e.lanes,Ds(e,t,c)}return ex(e,t,r,o,c)}function fP(e,t,r){var o=t.pendingProps,c=o.children,d=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yn(Pu,zo),zo|=r;else{if(!(r&1073741824))return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yn(Pu,zo),zo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=d!==null?d.baseLanes:r,yn(Pu,zo),zo|=o}else d!==null?(o=d.baseLanes|r,t.memoizedState=null):o=r,yn(Pu,zo),zo|=o;return ao(e,t,c,r),t.child}function mP(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ex(e,t,r,o,c){var d=xo(r)?fc:Zi.current;return d=Uu(t,d),Bu(t,c),r=F1(e,t,r,o,d,c),o=N1(),e!==null&&!vo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ds(e,t,c)):(En&&o&&T1(t),t.flags|=1,ao(e,t,r,c),t.child)}function A2(e,t,r,o,c){if(xo(r)){var d=!0;Cg(t)}else d=!1;if(Bu(t,c),t.stateNode===null)Ym(e,t),uP(t,r,o),Y_(t,r,o,c),o=!0;else if(e===null){var m=t.stateNode,l=t.memoizedProps;m.props=l;var b=m.context,w=r.contextType;typeof w=="object"&&w!==null?w=sa(w):(w=xo(r)?fc:Zi.current,w=Uu(t,w));var T=r.getDerivedStateFromProps,E=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function";E||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(l!==o||b!==w)&&T2(t,m,o,w),il=!1;var z=t.memoizedState;m.state=z,Eg(t,o,m,c),b=t.memoizedState,l!==o||z!==b||_o.current||il?(typeof T=="function"&&(J_(t,r,T,o),b=t.memoizedState),(l=il||I2(t,r,l,o,z,b,w))?(E||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=b),m.props=o,m.state=b,m.context=w,o=l):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{m=t.stateNode,UT(e,t),l=t.memoizedProps,w=t.type===t.elementType?l:Pa(t.type,l),m.props=w,E=t.pendingProps,z=m.context,b=r.contextType,typeof b=="object"&&b!==null?b=sa(b):(b=xo(r)?fc:Zi.current,b=Uu(t,b));var j=r.getDerivedStateFromProps;(T=typeof j=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(l!==E||z!==b)&&T2(t,m,o,b),il=!1,z=t.memoizedState,m.state=z,Eg(t,o,m,c);var U=t.memoizedState;l!==E||z!==U||_o.current||il?(typeof j=="function"&&(J_(t,r,j,o),U=t.memoizedState),(w=il||I2(t,r,w,o,z,U,b)||!1)?(T||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,U,b),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,U,b)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=U),m.props=o,m.state=U,m.context=b,o=w):(typeof m.componentDidUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),o=!1)}return tx(e,t,r,o,d,c)}function tx(e,t,r,o,c,d){mP(e,t);var m=(t.flags&128)!==0;if(!o&&!m)return c&&v2(t,r,!1),Ds(e,t,d);o=t.stateNode,e4.current=t;var l=m&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&m?(t.child=Wu(t,e.child,null,d),t.child=Wu(t,null,l,d)):ao(e,t,l,d),t.memoizedState=o.state,c&&v2(t,r,!0),t.child}function gP(e){var t=e.stateNode;t.pendingContext?y2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&y2(e,t.context,!1),L1(e,t.containerInfo)}function R2(e,t,r,o,c){return Hu(),E1(c),t.flags|=256,ao(e,t,r,o),t.child}var rx={dehydrated:null,treeContext:null,retryLane:0};function nx(e){return{baseLanes:e,cachePool:null,transitions:null}}function yP(e,t,r){var o=t.pendingProps,c=Rn.current,d=!1,m=(t.flags&128)!==0,l;if((l=m)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),yn(Rn,c&1),e===null)return K_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(m=o.children,e=o.fallback,d?(o=t.mode,d=t.child,m={mode:"hidden",children:m},!(o&1)&&d!==null?(d.childLanes=0,d.pendingProps=m):d=Hy(m,o,0,null),e=uc(e,o,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=nx(r),t.memoizedState=rx,e):U1(t,m));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return t4(e,t,m,o,l,c,r);if(d){d=o.fallback,m=t.mode,c=e.child,l=c.sibling;var b={mode:"hidden",children:o.children};return!(m&1)&&t.child!==c?(o=t.child,o.childLanes=0,o.pendingProps=b,t.deletions=null):(o=vl(c,b),o.subtreeFlags=c.subtreeFlags&14680064),l!==null?d=vl(l,d):(d=uc(d,m,r,null),d.flags|=2),d.return=t,o.return=t,o.sibling=d,t.child=o,o=d,d=t.child,m=e.child.memoizedState,m=m===null?nx(r):{baseLanes:m.baseLanes|r,cachePool:null,transitions:m.transitions},d.memoizedState=m,d.childLanes=e.childLanes&~r,t.memoizedState=rx,o}return d=e.child,e=d.sibling,o=vl(d,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=r),o.return=t,o.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function U1(e,t){return t=Hy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Mm(e,t,r,o){return o!==null&&E1(o),Wu(t,e.child,null,r),e=U1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function t4(e,t,r,o,c,d,m){if(r)return t.flags&256?(t.flags&=-257,o=q0(Error(mt(422))),Mm(e,t,m,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=o.fallback,c=t.mode,o=Hy({mode:"visible",children:o.children},c,0,null),d=uc(d,c,m,null),d.flags|=2,o.return=t,d.return=t,o.sibling=d,t.child=o,t.mode&1&&Wu(t,e.child,null,m),t.child.memoizedState=nx(m),t.memoizedState=rx,d);if(!(t.mode&1))return Mm(e,t,m,null);if(c.data==="$!"){if(o=c.nextSibling&&c.nextSibling.dataset,o)var l=o.dgst;return o=l,d=Error(mt(419)),o=q0(d,o,void 0),Mm(e,t,m,o)}if(l=(m&e.childLanes)!==0,vo||l){if(o=vi,o!==null){switch(m&-m){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(o.suspendedLanes|m)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Ms(e,c),Ra(o,e,c,-1))}return K1(),o=q0(Error(mt(421))),Mm(e,t,m,o)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=f4.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,$o=fl(c.nextSibling),Oo=t,En=!0,Ma=null,e!==null&&(ta[ra++]=Ss,ta[ra++]=Cs,ta[ra++]=mc,Ss=e.id,Cs=e.overflow,mc=t),t=U1(t,o.children),t.flags|=4096,t)}function L2(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),X_(e.return,t,r)}function Z0(e,t,r,o,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=r,d.tailMode=c)}function vP(e,t,r){var o=t.pendingProps,c=o.revealOrder,d=o.tail;if(ao(e,t,o.children,r),o=Rn.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&L2(e,r,t);else if(e.tag===19)L2(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(yn(Rn,o),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&zg(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),Z0(t,!1,c,r,d);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&zg(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}Z0(t,!0,r,null,d);break;case"together":Z0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ym(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ds(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),yc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(mt(153));if(t.child!==null){for(e=t.child,r=vl(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=vl(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function r4(e,t,r){switch(t.tag){case 3:gP(t),Hu();break;case 5:HT(t);break;case 1:xo(t.type)&&Cg(t);break;case 4:L1(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,c=t.memoizedProps.value;yn(Tg,o._currentValue),o._currentValue=c;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(yn(Rn,Rn.current&1),t.flags|=128,null):r&t.child.childLanes?yP(e,t,r):(yn(Rn,Rn.current&1),e=Ds(e,t,r),e!==null?e.sibling:null);yn(Rn,Rn.current&1);break;case 19:if(o=(r&t.childLanes)!==0,e.flags&128){if(o)return vP(e,t,r);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),yn(Rn,Rn.current),o)break;return null;case 22:case 23:return t.lanes=0,fP(e,t,r)}return Ds(e,t,r)}var _P,ix,xP,bP;_P=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ix=function(){};xP=function(e,t,r,o){var c=e.memoizedProps;if(c!==o){e=t.stateNode,ac(es.current);var d=null;switch(r){case"input":c=I_(e,c),o=I_(e,o),d=[];break;case"select":c=$n({},c,{value:void 0}),o=$n({},o,{value:void 0}),d=[];break;case"textarea":c=E_(e,c),o=E_(e,o),d=[];break;default:typeof c.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=wg)}M_(r,o);var m;r=null;for(w in c)if(!o.hasOwnProperty(w)&&c.hasOwnProperty(w)&&c[w]!=null)if(w==="style"){var l=c[w];for(m in l)l.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(mp.hasOwnProperty(w)?d||(d=[]):(d=d||[]).push(w,null));for(w in o){var b=o[w];if(l=c!=null?c[w]:void 0,o.hasOwnProperty(w)&&b!==l&&(b!=null||l!=null))if(w==="style")if(l){for(m in l)!l.hasOwnProperty(m)||b&&b.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in b)b.hasOwnProperty(m)&&l[m]!==b[m]&&(r||(r={}),r[m]=b[m])}else r||(d||(d=[]),d.push(w,r)),r=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,l=l?l.__html:void 0,b!=null&&l!==b&&(d=d||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(d=d||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(mp.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&wn("scroll",e),d||l===b||(d=[])):(d=d||[]).push(w,b))}r&&(d=d||[]).push("style",r);var w=d;(t.updateQueue=w)&&(t.flags|=4)}};bP=function(e,t,r,o){r!==o&&(t.flags|=4)};function Ah(e,t){if(!En)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ui(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags&14680064,o|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function n4(e,t,r){var o=t.pendingProps;switch(P1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ui(t),null;case 1:return xo(t.type)&&Sg(),Ui(t),null;case 3:return o=t.stateNode,Gu(),Cn(_o),Cn(Zi),B1(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Em(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ma!==null&&(hx(Ma),Ma=null))),ix(e,t),Ui(t),null;case 5:$1(t);var c=ac(Tp.current);if(r=t.type,e!==null&&t.stateNode!=null)xP(e,t,r,o,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(mt(166));return Ui(t),null}if(e=ac(es.current),Em(t)){o=t.stateNode,r=t.type;var d=t.memoizedProps;switch(o[Xa]=t,o[kp]=d,e=(t.mode&1)!==0,r){case"dialog":wn("cancel",o),wn("close",o);break;case"iframe":case"object":case"embed":wn("load",o);break;case"video":case"audio":for(c=0;c<Gh.length;c++)wn(Gh[c],o);break;case"source":wn("error",o);break;case"img":case"image":case"link":wn("error",o),wn("load",o);break;case"details":wn("toggle",o);break;case"input":HS(o,d),wn("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!d.multiple},wn("invalid",o);break;case"textarea":GS(o,d),wn("invalid",o)}M_(r,d),c=null;for(var m in d)if(d.hasOwnProperty(m)){var l=d[m];m==="children"?typeof l=="string"?o.textContent!==l&&(d.suppressHydrationWarning!==!0&&Pm(o.textContent,l,e),c=["children",l]):typeof l=="number"&&o.textContent!==""+l&&(d.suppressHydrationWarning!==!0&&Pm(o.textContent,l,e),c=["children",""+l]):mp.hasOwnProperty(m)&&l!=null&&m==="onScroll"&&wn("scroll",o)}switch(r){case"input":xm(o),WS(o,d,!0);break;case"textarea":xm(o),qS(o);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(o.onclick=wg)}o=c,t.updateQueue=o,o!==null&&(t.flags|=4)}else{m=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=KI(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=m.createElement(r,{is:o.is}):(e=m.createElement(r),r==="select"&&(m=e,o.multiple?m.multiple=!0:o.size&&(m.size=o.size))):e=m.createElementNS(e,r),e[Xa]=t,e[kp]=o,_P(e,t,!1,!1),t.stateNode=e;e:{switch(m=D_(r,o),r){case"dialog":wn("cancel",e),wn("close",e),c=o;break;case"iframe":case"object":case"embed":wn("load",e),c=o;break;case"video":case"audio":for(c=0;c<Gh.length;c++)wn(Gh[c],e);c=o;break;case"source":wn("error",e),c=o;break;case"img":case"image":case"link":wn("error",e),wn("load",e),c=o;break;case"details":wn("toggle",e),c=o;break;case"input":HS(e,o),c=I_(e,o),wn("invalid",e);break;case"option":c=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},c=$n({},o,{value:void 0}),wn("invalid",e);break;case"textarea":GS(e,o),c=E_(e,o),wn("invalid",e);break;default:c=o}M_(r,c),l=c;for(d in l)if(l.hasOwnProperty(d)){var b=l[d];d==="style"?YI(e,b):d==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&XI(e,b)):d==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&gp(e,b):typeof b=="number"&&gp(e,""+b):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(mp.hasOwnProperty(d)?b!=null&&d==="onScroll"&&wn("scroll",e):b!=null&&p1(e,d,b,m))}switch(r){case"input":xm(e),WS(e,o,!1);break;case"textarea":xm(e),qS(e);break;case"option":o.value!=null&&e.setAttribute("value",""+bl(o.value));break;case"select":e.multiple=!!o.multiple,d=o.value,d!=null?Au(e,!!o.multiple,d,!1):o.defaultValue!=null&&Au(e,!!o.multiple,o.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=wg)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ui(t),null;case 6:if(e&&t.stateNode!=null)bP(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(mt(166));if(r=ac(Tp.current),ac(es.current),Em(t)){if(o=t.stateNode,r=t.memoizedProps,o[Xa]=t,(d=o.nodeValue!==r)&&(e=Oo,e!==null))switch(e.tag){case 3:Pm(o.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Pm(o.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[Xa]=t,t.stateNode=o}return Ui(t),null;case 13:if(Cn(Rn),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(En&&$o!==null&&t.mode&1&&!(t.flags&128))FT(),Hu(),t.flags|=98560,d=!1;else if(d=Em(t),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(mt(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(mt(317));d[Xa]=t}else Hu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ui(t),d=!1}else Ma!==null&&(hx(Ma),Ma=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||Rn.current&1?ui===0&&(ui=3):K1())),t.updateQueue!==null&&(t.flags|=4),Ui(t),null);case 4:return Gu(),ix(e,t),e===null&&Sp(t.stateNode.containerInfo),Ui(t),null;case 10:return D1(t.type._context),Ui(t),null;case 17:return xo(t.type)&&Sg(),Ui(t),null;case 19:if(Cn(Rn),d=t.memoizedState,d===null)return Ui(t),null;if(o=(t.flags&128)!==0,m=d.rendering,m===null)if(o)Ah(d,!1);else{if(ui!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(m=zg(e),m!==null){for(t.flags|=128,Ah(d,!1),o=m.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;r!==null;)d=r,e=o,d.flags&=14680066,m=d.alternate,m===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=m.childLanes,d.lanes=m.lanes,d.child=m.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=m.memoizedProps,d.memoizedState=m.memoizedState,d.updateQueue=m.updateQueue,d.type=m.type,e=m.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return yn(Rn,Rn.current&1|2),t.child}e=e.sibling}d.tail!==null&&Xn()>Zu&&(t.flags|=128,o=!0,Ah(d,!1),t.lanes=4194304)}else{if(!o)if(e=zg(m),e!==null){if(t.flags|=128,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ah(d,!0),d.tail===null&&d.tailMode==="hidden"&&!m.alternate&&!En)return Ui(t),null}else 2*Xn()-d.renderingStartTime>Zu&&r!==1073741824&&(t.flags|=128,o=!0,Ah(d,!1),t.lanes=4194304);d.isBackwards?(m.sibling=t.child,t.child=m):(r=d.last,r!==null?r.sibling=m:t.child=m,d.last=m)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Xn(),t.sibling=null,r=Rn.current,yn(Rn,o?r&1|2:r&1),t):(Ui(t),null);case 22:case 23:return Z1(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?zo&1073741824&&(Ui(t),t.subtreeFlags&6&&(t.flags|=8192)):Ui(t),null;case 24:return null;case 25:return null}throw Error(mt(156,t.tag))}function i4(e,t){switch(P1(t),t.tag){case 1:return xo(t.type)&&Sg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Gu(),Cn(_o),Cn(Zi),B1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $1(t),null;case 13:if(Cn(Rn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(mt(340));Hu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Cn(Rn),null;case 4:return Gu(),null;case 10:return D1(t.type._context),null;case 22:case 23:return Z1(),null;case 24:return null;default:return null}}var Dm=!1,Gi=!1,o4=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function Tu(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){jn(e,t,o)}else r.current=null}function ox(e,t,r){try{r()}catch(o){jn(e,t,o)}}var $2=!1;function a4(e,t){if(V_=_g,e=IT(),I1(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var c=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var m=0,l=-1,b=-1,w=0,T=0,E=e,z=null;t:for(;;){for(var j;E!==r||c!==0&&E.nodeType!==3||(l=m+c),E!==d||o!==0&&E.nodeType!==3||(b=m+o),E.nodeType===3&&(m+=E.nodeValue.length),(j=E.firstChild)!==null;)z=E,E=j;for(;;){if(E===e)break t;if(z===r&&++w===c&&(l=m),z===d&&++T===o&&(b=m),(j=E.nextSibling)!==null)break;E=z,z=E.parentNode}E=j}r=l===-1||b===-1?null:{start:l,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(U_={focusedElem:e,selectionRange:r},_g=!1,Ht=t;Ht!==null;)if(t=Ht,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ht=e;else for(;Ht!==null;){t=Ht;try{var U=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var V=U.memoizedProps,K=U.memoizedState,O=t.stateNode,L=O.getSnapshotBeforeUpdate(t.elementType===t.type?V:Pa(t.type,V),K);O.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var R=t.stateNode.containerInfo;R.nodeType===1?R.textContent="":R.nodeType===9&&R.documentElement&&R.removeChild(R.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(mt(163))}}catch(re){jn(t,t.return,re)}if(e=t.sibling,e!==null){e.return=t.return,Ht=e;break}Ht=t.return}return U=$2,$2=!1,U}function np(e,t,r){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&ox(t,r,d)}c=c.next}while(c!==o)}}function Vy(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function ax(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function wP(e){var t=e.alternate;t!==null&&(e.alternate=null,wP(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xa],delete t[kp],delete t[G_],delete t[V$],delete t[U$])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function SP(e){return e.tag===5||e.tag===3||e.tag===4}function B2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||SP(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sx(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=wg));else if(o!==4&&(e=e.child,e!==null))for(sx(e,t,r),e=e.sibling;e!==null;)sx(e,t,r),e=e.sibling}function lx(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(lx(e,t,r),e=e.sibling;e!==null;)lx(e,t,r),e=e.sibling}var Ti=null,Ea=!1;function el(e,t,r){for(r=r.child;r!==null;)CP(e,t,r),r=r.sibling}function CP(e,t,r){if(Qa&&typeof Qa.onCommitFiberUnmount=="function")try{Qa.onCommitFiberUnmount(Ry,r)}catch{}switch(r.tag){case 5:Gi||Tu(r,t);case 6:var o=Ti,c=Ea;Ti=null,el(e,t,r),Ti=o,Ea=c,Ti!==null&&(Ea?(e=Ti,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ti.removeChild(r.stateNode));break;case 18:Ti!==null&&(Ea?(e=Ti,r=r.stateNode,e.nodeType===8?j0(e.parentNode,r):e.nodeType===1&&j0(e,r),xp(e)):j0(Ti,r.stateNode));break;case 4:o=Ti,c=Ea,Ti=r.stateNode.containerInfo,Ea=!0,el(e,t,r),Ti=o,Ea=c;break;case 0:case 11:case 14:case 15:if(!Gi&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){c=o=o.next;do{var d=c,m=d.destroy;d=d.tag,m!==void 0&&(d&2||d&4)&&ox(r,t,m),c=c.next}while(c!==o)}el(e,t,r);break;case 1:if(!Gi&&(Tu(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(l){jn(r,t,l)}el(e,t,r);break;case 21:el(e,t,r);break;case 22:r.mode&1?(Gi=(o=Gi)||r.memoizedState!==null,el(e,t,r),Gi=o):el(e,t,r);break;default:el(e,t,r)}}function O2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new o4),t.forEach(function(o){var c=m4.bind(null,e,o);r.has(o)||(r.add(o),o.then(c,c))})}}function ka(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];try{var d=e,m=t,l=m;e:for(;l!==null;){switch(l.tag){case 5:Ti=l.stateNode,Ea=!1;break e;case 3:Ti=l.stateNode.containerInfo,Ea=!0;break e;case 4:Ti=l.stateNode.containerInfo,Ea=!0;break e}l=l.return}if(Ti===null)throw Error(mt(160));CP(d,m,c),Ti=null,Ea=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(w){jn(c,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kP(t,e),t=t.sibling}function kP(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ka(t,e),Ga(e),o&4){try{np(3,e,e.return),Vy(3,e)}catch(V){jn(e,e.return,V)}try{np(5,e,e.return)}catch(V){jn(e,e.return,V)}}break;case 1:ka(t,e),Ga(e),o&512&&r!==null&&Tu(r,r.return);break;case 5:if(ka(t,e),Ga(e),o&512&&r!==null&&Tu(r,r.return),e.flags&32){var c=e.stateNode;try{gp(c,"")}catch(V){jn(e,e.return,V)}}if(o&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,m=r!==null?r.memoizedProps:d,l=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{l==="input"&&d.type==="radio"&&d.name!=null&&qI(c,d),D_(l,m);var w=D_(l,d);for(m=0;m<b.length;m+=2){var T=b[m],E=b[m+1];T==="style"?YI(c,E):T==="dangerouslySetInnerHTML"?XI(c,E):T==="children"?gp(c,E):p1(c,T,E,w)}switch(l){case"input":T_(c,d);break;case"textarea":ZI(c,d);break;case"select":var z=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var j=d.value;j!=null?Au(c,!!d.multiple,j,!1):z!==!!d.multiple&&(d.defaultValue!=null?Au(c,!!d.multiple,d.defaultValue,!0):Au(c,!!d.multiple,d.multiple?[]:"",!1))}c[kp]=d}catch(V){jn(e,e.return,V)}}break;case 6:if(ka(t,e),Ga(e),o&4){if(e.stateNode===null)throw Error(mt(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(V){jn(e,e.return,V)}}break;case 3:if(ka(t,e),Ga(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{xp(t.containerInfo)}catch(V){jn(e,e.return,V)}break;case 4:ka(t,e),Ga(e);break;case 13:ka(t,e),Ga(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(G1=Xn())),o&4&&O2(e);break;case 22:if(T=r!==null&&r.memoizedState!==null,e.mode&1?(Gi=(w=Gi)||T,ka(t,e),Gi=w):ka(t,e),Ga(e),o&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!T&&e.mode&1)for(Ht=e,T=e.child;T!==null;){for(E=Ht=T;Ht!==null;){switch(z=Ht,j=z.child,z.tag){case 0:case 11:case 14:case 15:np(4,z,z.return);break;case 1:Tu(z,z.return);var U=z.stateNode;if(typeof U.componentWillUnmount=="function"){o=z,r=z.return;try{t=o,U.props=t.memoizedProps,U.state=t.memoizedState,U.componentWillUnmount()}catch(V){jn(o,r,V)}}break;case 5:Tu(z,z.return);break;case 22:if(z.memoizedState!==null){N2(E);continue}}j!==null?(j.return=z,Ht=j):N2(E)}T=T.sibling}e:for(T=null,E=e;;){if(E.tag===5){if(T===null){T=E;try{c=E.stateNode,w?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(l=E.stateNode,b=E.memoizedProps.style,m=b!=null&&b.hasOwnProperty("display")?b.display:null,l.style.display=JI("display",m))}catch(V){jn(e,e.return,V)}}}else if(E.tag===6){if(T===null)try{E.stateNode.nodeValue=w?"":E.memoizedProps}catch(V){jn(e,e.return,V)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;T===E&&(T=null),E=E.return}T===E&&(T=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:ka(t,e),Ga(e),o&4&&O2(e);break;case 21:break;default:ka(t,e),Ga(e)}}function Ga(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(SP(r)){var o=r;break e}r=r.return}throw Error(mt(160))}switch(o.tag){case 5:var c=o.stateNode;o.flags&32&&(gp(c,""),o.flags&=-33);var d=B2(e);lx(e,d,c);break;case 3:case 4:var m=o.stateNode.containerInfo,l=B2(e);sx(e,l,m);break;default:throw Error(mt(161))}}catch(b){jn(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function s4(e,t,r){Ht=e,IP(e)}function IP(e,t,r){for(var o=(e.mode&1)!==0;Ht!==null;){var c=Ht,d=c.child;if(c.tag===22&&o){var m=c.memoizedState!==null||Dm;if(!m){var l=c.alternate,b=l!==null&&l.memoizedState!==null||Gi;l=Dm;var w=Gi;if(Dm=m,(Gi=b)&&!w)for(Ht=c;Ht!==null;)m=Ht,b=m.child,m.tag===22&&m.memoizedState!==null?j2(c):b!==null?(b.return=m,Ht=b):j2(c);for(;d!==null;)Ht=d,IP(d),d=d.sibling;Ht=c,Dm=l,Gi=w}F2(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,Ht=d):F2(e)}}function F2(e){for(;Ht!==null;){var t=Ht;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Gi||Vy(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Gi)if(r===null)o.componentDidMount();else{var c=t.elementType===t.type?r.memoizedProps:Pa(t.type,r.memoizedProps);o.componentDidUpdate(c,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&S2(t,d,o);break;case 3:var m=t.updateQueue;if(m!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}S2(t,m,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var T=w.memoizedState;if(T!==null){var E=T.dehydrated;E!==null&&xp(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(mt(163))}Gi||t.flags&512&&ax(t)}catch(z){jn(t,t.return,z)}}if(t===e){Ht=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ht=r;break}Ht=t.return}}function N2(e){for(;Ht!==null;){var t=Ht;if(t===e){Ht=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ht=r;break}Ht=t.return}}function j2(e){for(;Ht!==null;){var t=Ht;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Vy(4,t)}catch(b){jn(t,r,b)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var c=t.return;try{o.componentDidMount()}catch(b){jn(t,c,b)}}var d=t.return;try{ax(t)}catch(b){jn(t,d,b)}break;case 5:var m=t.return;try{ax(t)}catch(b){jn(t,m,b)}}}catch(b){jn(t,t.return,b)}if(t===e){Ht=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ht=l;break}Ht=t.return}}var l4=Math.ceil,Ag=Ls.ReactCurrentDispatcher,H1=Ls.ReactCurrentOwner,ia=Ls.ReactCurrentBatchConfig,Gr=0,vi=null,ii=null,zi=0,zo=0,Pu=Il(0),ui=0,Mp=null,yc=0,Uy=0,W1=0,ip=null,yo=null,G1=0,Zu=1/0,xs=null,Rg=!1,cx=null,gl=null,Am=!1,ul=null,Lg=0,op=0,ux=null,Qm=-1,eg=0;function so(){return Gr&6?Xn():Qm!==-1?Qm:Qm=Xn()}function yl(e){return e.mode&1?Gr&2&&zi!==0?zi&-zi:W$.transition!==null?(eg===0&&(eg=uT()),eg):(e=rn,e!==0||(e=window.event,e=e===void 0?16:yT(e.type)),e):1}function Ra(e,t,r,o){if(50<op)throw op=0,ux=null,Error(mt(185));qp(e,r,o),(!(Gr&2)||e!==vi)&&(e===vi&&(!(Gr&2)&&(Uy|=r),ui===4&&al(e,zi)),bo(e,o),r===1&&Gr===0&&!(t.mode&1)&&(Zu=Xn()+500,Fy&&Tl()))}function bo(e,t){var r=e.callbackNode;W3(e,t);var o=vg(e,e===vi?zi:0);if(o===0)r!==null&&XS(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(r!=null&&XS(r),t===1)e.tag===0?H$(V2.bind(null,e)):$T(V2.bind(null,e)),N$(function(){!(Gr&6)&&Tl()}),r=null;else{switch(dT(o)){case 1:r=v1;break;case 4:r=lT;break;case 16:r=yg;break;case 536870912:r=cT;break;default:r=yg}r=RP(r,TP.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function TP(e,t){if(Qm=-1,eg=0,Gr&6)throw Error(mt(327));var r=e.callbackNode;if(Ou()&&e.callbackNode!==r)return null;var o=vg(e,e===vi?zi:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=$g(e,o);else{t=o;var c=Gr;Gr|=2;var d=EP();(vi!==e||zi!==t)&&(xs=null,Zu=Xn()+500,cc(e,t));do try{d4();break}catch(l){PP(e,l)}while(!0);M1(),Ag.current=d,Gr=c,ii!==null?t=0:(vi=null,zi=0,t=ui)}if(t!==0){if(t===2&&(c=B_(e),c!==0&&(o=c,t=dx(e,c))),t===1)throw r=Mp,cc(e,0),al(e,o),bo(e,Xn()),r;if(t===6)al(e,o);else{if(c=e.current.alternate,!(o&30)&&!c4(c)&&(t=$g(e,o),t===2&&(d=B_(e),d!==0&&(o=d,t=dx(e,d))),t===1))throw r=Mp,cc(e,0),al(e,o),bo(e,Xn()),r;switch(e.finishedWork=c,e.finishedLanes=o,t){case 0:case 1:throw Error(mt(345));case 2:ec(e,yo,xs);break;case 3:if(al(e,o),(o&130023424)===o&&(t=G1+500-Xn(),10<t)){if(vg(e,0)!==0)break;if(c=e.suspendedLanes,(c&o)!==o){so(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=W_(ec.bind(null,e,yo,xs),t);break}ec(e,yo,xs);break;case 4:if(al(e,o),(o&4194240)===o)break;for(t=e.eventTimes,c=-1;0<o;){var m=31-Aa(o);d=1<<m,m=t[m],m>c&&(c=m),o&=~d}if(o=c,o=Xn()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*l4(o/1960))-o,10<o){e.timeoutHandle=W_(ec.bind(null,e,yo,xs),o);break}ec(e,yo,xs);break;case 5:ec(e,yo,xs);break;default:throw Error(mt(329))}}}return bo(e,Xn()),e.callbackNode===r?TP.bind(null,e):null}function dx(e,t){var r=ip;return e.current.memoizedState.isDehydrated&&(cc(e,t).flags|=256),e=$g(e,t),e!==2&&(t=yo,yo=r,t!==null&&hx(t)),e}function hx(e){yo===null?yo=e:yo.push.apply(yo,e)}function c4(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var c=r[o],d=c.getSnapshot;c=c.value;try{if(!$a(d(),c))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function al(e,t){for(t&=~W1,t&=~Uy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Aa(t),o=1<<r;e[r]=-1,t&=~o}}function V2(e){if(Gr&6)throw Error(mt(327));Ou();var t=vg(e,0);if(!(t&1))return bo(e,Xn()),null;var r=$g(e,t);if(e.tag!==0&&r===2){var o=B_(e);o!==0&&(t=o,r=dx(e,o))}if(r===1)throw r=Mp,cc(e,0),al(e,t),bo(e,Xn()),r;if(r===6)throw Error(mt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ec(e,yo,xs),bo(e,Xn()),null}function q1(e,t){var r=Gr;Gr|=1;try{return e(t)}finally{Gr=r,Gr===0&&(Zu=Xn()+500,Fy&&Tl())}}function vc(e){ul!==null&&ul.tag===0&&!(Gr&6)&&Ou();var t=Gr;Gr|=1;var r=ia.transition,o=rn;try{if(ia.transition=null,rn=1,e)return e()}finally{rn=o,ia.transition=r,Gr=t,!(Gr&6)&&Tl()}}function Z1(){zo=Pu.current,Cn(Pu)}function cc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,F$(r)),ii!==null)for(r=ii.return;r!==null;){var o=r;switch(P1(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Sg();break;case 3:Gu(),Cn(_o),Cn(Zi),B1();break;case 5:$1(o);break;case 4:Gu();break;case 13:Cn(Rn);break;case 19:Cn(Rn);break;case 10:D1(o.type._context);break;case 22:case 23:Z1()}r=r.return}if(vi=e,ii=e=vl(e.current,null),zi=zo=t,ui=0,Mp=null,W1=Uy=yc=0,yo=ip=null,oc!==null){for(t=0;t<oc.length;t++)if(r=oc[t],o=r.interleaved,o!==null){r.interleaved=null;var c=o.next,d=r.pending;if(d!==null){var m=d.next;d.next=c,o.next=m}r.pending=o}oc=null}return e}function PP(e,t){do{var r=ii;try{if(M1(),Xm.current=Dg,Mg){for(var o=Ln.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Mg=!1}if(gc=0,yi=ci=Ln=null,rp=!1,Pp=0,H1.current=null,r===null||r.return===null){ui=1,Mp=t,ii=null;break}e:{var d=e,m=r.return,l=r,b=t;if(t=zi,l.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,T=l,E=T.tag;if(!(T.mode&1)&&(E===0||E===11||E===15)){var z=T.alternate;z?(T.updateQueue=z.updateQueue,T.memoizedState=z.memoizedState,T.lanes=z.lanes):(T.updateQueue=null,T.memoizedState=null)}var j=E2(m);if(j!==null){j.flags&=-257,z2(j,m,l,d,t),j.mode&1&&P2(d,w,t),t=j,b=w;var U=t.updateQueue;if(U===null){var V=new Set;V.add(b),t.updateQueue=V}else U.add(b);break e}else{if(!(t&1)){P2(d,w,t),K1();break e}b=Error(mt(426))}}else if(En&&l.mode&1){var K=E2(m);if(K!==null){!(K.flags&65536)&&(K.flags|=256),z2(K,m,l,d,t),E1(qu(b,l));break e}}d=b=qu(b,l),ui!==4&&(ui=2),ip===null?ip=[d]:ip.push(d),d=m;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var O=dP(d,b,t);w2(d,O);break e;case 1:l=b;var L=d.type,R=d.stateNode;if(!(d.flags&128)&&(typeof L.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(gl===null||!gl.has(R)))){d.flags|=65536,t&=-t,d.lanes|=t;var re=hP(d,l,t);w2(d,re);break e}}d=d.return}while(d!==null)}MP(r)}catch(J){t=J,ii===r&&r!==null&&(ii=r=r.return);continue}break}while(!0)}function EP(){var e=Ag.current;return Ag.current=Dg,e===null?Dg:e}function K1(){(ui===0||ui===3||ui===2)&&(ui=4),vi===null||!(yc&268435455)&&!(Uy&268435455)||al(vi,zi)}function $g(e,t){var r=Gr;Gr|=2;var o=EP();(vi!==e||zi!==t)&&(xs=null,cc(e,t));do try{u4();break}catch(c){PP(e,c)}while(!0);if(M1(),Gr=r,Ag.current=o,ii!==null)throw Error(mt(261));return vi=null,zi=0,ui}function u4(){for(;ii!==null;)zP(ii)}function d4(){for(;ii!==null&&!$3();)zP(ii)}function zP(e){var t=AP(e.alternate,e,zo);e.memoizedProps=e.pendingProps,t===null?MP(e):ii=t,H1.current=null}function MP(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=i4(r,t),r!==null){r.flags&=32767,ii=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ui=6,ii=null;return}}else if(r=n4(r,t,zo),r!==null){ii=r;return}if(t=t.sibling,t!==null){ii=t;return}ii=t=e}while(t!==null);ui===0&&(ui=5)}function ec(e,t,r){var o=rn,c=ia.transition;try{ia.transition=null,rn=1,h4(e,t,r,o)}finally{ia.transition=c,rn=o}return null}function h4(e,t,r,o){do Ou();while(ul!==null);if(Gr&6)throw Error(mt(327));r=e.finishedWork;var c=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(mt(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(G3(e,d),e===vi&&(ii=vi=null,zi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Am||(Am=!0,RP(yg,function(){return Ou(),null})),d=(r.flags&15990)!==0,r.subtreeFlags&15990||d){d=ia.transition,ia.transition=null;var m=rn;rn=1;var l=Gr;Gr|=4,H1.current=null,a4(e,r),kP(r,e),D$(U_),_g=!!V_,U_=V_=null,e.current=r,s4(r),B3(),Gr=l,rn=m,ia.transition=d}else e.current=r;if(Am&&(Am=!1,ul=e,Lg=c),d=e.pendingLanes,d===0&&(gl=null),N3(r.stateNode),bo(e,Xn()),t!==null)for(o=e.onRecoverableError,r=0;r<t.length;r++)c=t[r],o(c.value,{componentStack:c.stack,digest:c.digest});if(Rg)throw Rg=!1,e=cx,cx=null,e;return Lg&1&&e.tag!==0&&Ou(),d=e.pendingLanes,d&1?e===ux?op++:(op=0,ux=e):op=0,Tl(),null}function Ou(){if(ul!==null){var e=dT(Lg),t=ia.transition,r=rn;try{if(ia.transition=null,rn=16>e?16:e,ul===null)var o=!1;else{if(e=ul,ul=null,Lg=0,Gr&6)throw Error(mt(331));var c=Gr;for(Gr|=4,Ht=e.current;Ht!==null;){var d=Ht,m=d.child;if(Ht.flags&16){var l=d.deletions;if(l!==null){for(var b=0;b<l.length;b++){var w=l[b];for(Ht=w;Ht!==null;){var T=Ht;switch(T.tag){case 0:case 11:case 15:np(8,T,d)}var E=T.child;if(E!==null)E.return=T,Ht=E;else for(;Ht!==null;){T=Ht;var z=T.sibling,j=T.return;if(wP(T),T===w){Ht=null;break}if(z!==null){z.return=j,Ht=z;break}Ht=j}}}var U=d.alternate;if(U!==null){var V=U.child;if(V!==null){U.child=null;do{var K=V.sibling;V.sibling=null,V=K}while(V!==null)}}Ht=d}}if(d.subtreeFlags&2064&&m!==null)m.return=d,Ht=m;else e:for(;Ht!==null;){if(d=Ht,d.flags&2048)switch(d.tag){case 0:case 11:case 15:np(9,d,d.return)}var O=d.sibling;if(O!==null){O.return=d.return,Ht=O;break e}Ht=d.return}}var L=e.current;for(Ht=L;Ht!==null;){m=Ht;var R=m.child;if(m.subtreeFlags&2064&&R!==null)R.return=m,Ht=R;else e:for(m=L;Ht!==null;){if(l=Ht,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Vy(9,l)}}catch(J){jn(l,l.return,J)}if(l===m){Ht=null;break e}var re=l.sibling;if(re!==null){re.return=l.return,Ht=re;break e}Ht=l.return}}if(Gr=c,Tl(),Qa&&typeof Qa.onPostCommitFiberRoot=="function")try{Qa.onPostCommitFiberRoot(Ry,e)}catch{}o=!0}return o}finally{rn=r,ia.transition=t}}return!1}function U2(e,t,r){t=qu(r,t),t=dP(e,t,1),e=ml(e,t,1),t=so(),e!==null&&(qp(e,1,t),bo(e,t))}function jn(e,t,r){if(e.tag===3)U2(e,e,r);else for(;t!==null;){if(t.tag===3){U2(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(gl===null||!gl.has(o))){e=qu(r,e),e=hP(t,e,1),t=ml(t,e,1),e=so(),t!==null&&(qp(t,1,e),bo(t,e));break}}t=t.return}}function p4(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),t=so(),e.pingedLanes|=e.suspendedLanes&r,vi===e&&(zi&r)===r&&(ui===4||ui===3&&(zi&130023424)===zi&&500>Xn()-G1?cc(e,0):W1|=r),bo(e,t)}function DP(e,t){t===0&&(e.mode&1?(t=Sm,Sm<<=1,!(Sm&130023424)&&(Sm=4194304)):t=1);var r=so();e=Ms(e,t),e!==null&&(qp(e,t,r),bo(e,r))}function f4(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),DP(e,r)}function m4(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(mt(314))}o!==null&&o.delete(t),DP(e,r)}var AP;AP=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||_o.current)vo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return vo=!1,r4(e,t,r);vo=!!(e.flags&131072)}else vo=!1,En&&t.flags&1048576&&BT(t,Ig,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;Ym(e,t),e=t.pendingProps;var c=Uu(t,Zi.current);Bu(t,r),c=F1(null,t,o,e,c,r);var d=N1();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xo(o)?(d=!0,Cg(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,R1(t),c.updater=jy,t.stateNode=c,c._reactInternals=t,Y_(t,o,e,r),t=tx(null,t,o,!0,d,r)):(t.tag=0,En&&d&&T1(t),ao(null,t,c,r),t=t.child),t;case 16:o=t.elementType;e:{switch(Ym(e,t),e=t.pendingProps,c=o._init,o=c(o._payload),t.type=o,c=t.tag=y4(o),e=Pa(o,e),c){case 0:t=ex(null,t,o,e,r);break e;case 1:t=A2(null,t,o,e,r);break e;case 11:t=M2(null,t,o,e,r);break e;case 14:t=D2(null,t,o,Pa(o.type,e),r);break e}throw Error(mt(306,o,""))}return t;case 0:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Pa(o,c),ex(e,t,o,c,r);case 1:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Pa(o,c),A2(e,t,o,c,r);case 3:e:{if(gP(t),e===null)throw Error(mt(387));o=t.pendingProps,d=t.memoizedState,c=d.element,UT(e,t),Eg(t,o,null,r);var m=t.memoizedState;if(o=m.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=qu(Error(mt(423)),t),t=R2(e,t,o,r,c);break e}else if(o!==c){c=qu(Error(mt(424)),t),t=R2(e,t,o,r,c);break e}else for($o=fl(t.stateNode.containerInfo.firstChild),Oo=t,En=!0,Ma=null,r=jT(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Hu(),o===c){t=Ds(e,t,r);break e}ao(e,t,o,r)}t=t.child}return t;case 5:return HT(t),e===null&&K_(t),o=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,m=c.children,H_(o,c)?m=null:d!==null&&H_(o,d)&&(t.flags|=32),mP(e,t),ao(e,t,m,r),t.child;case 6:return e===null&&K_(t),null;case 13:return yP(e,t,r);case 4:return L1(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Wu(t,null,o,r):ao(e,t,o,r),t.child;case 11:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Pa(o,c),M2(e,t,o,c,r);case 7:return ao(e,t,t.pendingProps,r),t.child;case 8:return ao(e,t,t.pendingProps.children,r),t.child;case 12:return ao(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,c=t.pendingProps,d=t.memoizedProps,m=c.value,yn(Tg,o._currentValue),o._currentValue=m,d!==null)if($a(d.value,m)){if(d.children===c.children&&!_o.current){t=Ds(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var l=d.dependencies;if(l!==null){m=d.child;for(var b=l.firstContext;b!==null;){if(b.context===o){if(d.tag===1){b=ks(-1,r&-r),b.tag=2;var w=d.updateQueue;if(w!==null){w=w.shared;var T=w.pending;T===null?b.next=b:(b.next=T.next,T.next=b),w.pending=b}}d.lanes|=r,b=d.alternate,b!==null&&(b.lanes|=r),X_(d.return,r,t),l.lanes|=r;break}b=b.next}}else if(d.tag===10)m=d.type===t.type?null:d.child;else if(d.tag===18){if(m=d.return,m===null)throw Error(mt(341));m.lanes|=r,l=m.alternate,l!==null&&(l.lanes|=r),X_(m,r,t),m=d.sibling}else m=d.child;if(m!==null)m.return=d;else for(m=d;m!==null;){if(m===t){m=null;break}if(d=m.sibling,d!==null){d.return=m.return,m=d;break}m=m.return}d=m}ao(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,o=t.pendingProps.children,Bu(t,r),c=sa(c),o=o(c),t.flags|=1,ao(e,t,o,r),t.child;case 14:return o=t.type,c=Pa(o,t.pendingProps),c=Pa(o.type,c),D2(e,t,o,c,r);case 15:return pP(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Pa(o,c),Ym(e,t),t.tag=1,xo(o)?(e=!0,Cg(t)):e=!1,Bu(t,r),uP(t,o,c),Y_(t,o,c,r),tx(null,t,o,!0,e,r);case 19:return vP(e,t,r);case 22:return fP(e,t,r)}throw Error(mt(156,t.tag))};function RP(e,t){return sT(e,t)}function g4(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function na(e,t,r,o){return new g4(e,t,r,o)}function X1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function y4(e){if(typeof e=="function")return X1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===m1)return 11;if(e===g1)return 14}return 2}function vl(e,t){var r=e.alternate;return r===null?(r=na(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function tg(e,t,r,o,c,d){var m=2;if(o=e,typeof e=="function")X1(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case vu:return uc(r.children,c,d,t);case f1:m=8,c|=8;break;case w_:return e=na(12,r,t,c|2),e.elementType=w_,e.lanes=d,e;case S_:return e=na(13,r,t,c),e.elementType=S_,e.lanes=d,e;case C_:return e=na(19,r,t,c),e.elementType=C_,e.lanes=d,e;case HI:return Hy(r,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case VI:m=10;break e;case UI:m=9;break e;case m1:m=11;break e;case g1:m=14;break e;case nl:m=16,o=null;break e}throw Error(mt(130,e==null?e:typeof e,""))}return t=na(m,r,t,c),t.elementType=e,t.type=o,t.lanes=d,t}function uc(e,t,r,o){return e=na(7,e,o,t),e.lanes=r,e}function Hy(e,t,r,o){return e=na(22,e,o,t),e.elementType=HI,e.lanes=r,e.stateNode={isHidden:!1},e}function K0(e,t,r){return e=na(6,e,null,t),e.lanes=r,e}function X0(e,t,r){return t=na(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function v4(e,t,r,o,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=z0(0),this.expirationTimes=z0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z0(0),this.identifierPrefix=o,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function J1(e,t,r,o,c,d,m,l,b){return e=new v4(e,t,r,l,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=na(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},R1(d),e}function _4(e,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yu,key:o==null?null:""+o,children:e,containerInfo:t,implementation:r}}function LP(e){if(!e)return wl;e=e._reactInternals;e:{if(bc(e)!==e||e.tag!==1)throw Error(mt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(mt(171))}if(e.tag===1){var r=e.type;if(xo(r))return LT(e,r,t)}return t}function $P(e,t,r,o,c,d,m,l,b){return e=J1(r,o,!0,e,c,d,m,l,b),e.context=LP(null),r=e.current,o=so(),c=yl(r),d=ks(o,c),d.callback=t??null,ml(r,d,c),e.current.lanes=c,qp(e,c,o),bo(e,o),e}function Wy(e,t,r,o){var c=t.current,d=so(),m=yl(c);return r=LP(r),t.context===null?t.context=r:t.pendingContext=r,t=ks(d,m),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=ml(c,t,m),e!==null&&(Ra(e,c,m,d),Km(e,c,m)),m}function Bg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function H2(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Y1(e,t){H2(e,t),(e=e.alternate)&&H2(e,t)}function x4(){return null}var BP=typeof reportError=="function"?reportError:function(e){console.error(e)};function Q1(e){this._internalRoot=e}Gy.prototype.render=Q1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(mt(409));Wy(e,t,null,null)};Gy.prototype.unmount=Q1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vc(function(){Wy(null,e,null,null)}),t[zs]=null}};function Gy(e){this._internalRoot=e}Gy.prototype.unstable_scheduleHydration=function(e){if(e){var t=fT();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ol.length&&t!==0&&t<ol[r].priority;r++);ol.splice(r,0,e),r===0&&gT(e)}};function eb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function W2(){}function b4(e,t,r,o,c){if(c){if(typeof o=="function"){var d=o;o=function(){var w=Bg(m);d.call(w)}}var m=$P(t,o,e,0,null,!1,!1,"",W2);return e._reactRootContainer=m,e[zs]=m.current,Sp(e.nodeType===8?e.parentNode:e),vc(),m}for(;c=e.lastChild;)e.removeChild(c);if(typeof o=="function"){var l=o;o=function(){var w=Bg(b);l.call(w)}}var b=J1(e,0,!1,null,null,!1,!1,"",W2);return e._reactRootContainer=b,e[zs]=b.current,Sp(e.nodeType===8?e.parentNode:e),vc(function(){Wy(t,b,r,o)}),b}function Zy(e,t,r,o,c){var d=r._reactRootContainer;if(d){var m=d;if(typeof c=="function"){var l=c;c=function(){var b=Bg(m);l.call(b)}}Wy(t,m,e,c)}else m=b4(r,t,e,c,o);return Bg(m)}hT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Wh(t.pendingLanes);r!==0&&(_1(t,r|1),bo(t,Xn()),!(Gr&6)&&(Zu=Xn()+500,Tl()))}break;case 13:vc(function(){var o=Ms(e,1);if(o!==null){var c=so();Ra(o,e,1,c)}}),Y1(e,1)}};x1=function(e){if(e.tag===13){var t=Ms(e,134217728);if(t!==null){var r=so();Ra(t,e,134217728,r)}Y1(e,134217728)}};pT=function(e){if(e.tag===13){var t=yl(e),r=Ms(e,t);if(r!==null){var o=so();Ra(r,e,t,o)}Y1(e,t)}};fT=function(){return rn};mT=function(e,t){var r=rn;try{return rn=e,t()}finally{rn=r}};R_=function(e,t,r){switch(t){case"input":if(T_(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var c=Oy(o);if(!c)throw Error(mt(90));GI(o),T_(o,c)}}}break;case"textarea":ZI(e,r);break;case"select":t=r.value,t!=null&&Au(e,!!r.multiple,t,!1)}};tT=q1;rT=vc;var w4={usingClientEntryPoint:!1,Events:[Kp,wu,Oy,QI,eT,q1]},Rh={findFiberByHostInstance:ic,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S4={bundleType:Rh.bundleType,version:Rh.version,rendererPackageName:Rh.rendererPackageName,rendererConfig:Rh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ls.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=oT(e),e===null?null:e.stateNode},findFiberByHostInstance:Rh.findFiberByHostInstance||x4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rm.isDisabled&&Rm.supportsFiber)try{Ry=Rm.inject(S4),Qa=Rm}catch{}}Vo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w4;Vo.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eb(t))throw Error(mt(200));return _4(e,t,null,r)};Vo.createRoot=function(e,t){if(!eb(e))throw Error(mt(299));var r=!1,o="",c=BP;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=J1(e,1,!1,null,null,r,!1,o,c),e[zs]=t.current,Sp(e.nodeType===8?e.parentNode:e),new Q1(t)};Vo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(mt(188)):(e=Object.keys(e).join(","),Error(mt(268,e)));return e=oT(t),e=e===null?null:e.stateNode,e};Vo.flushSync=function(e){return vc(e)};Vo.hydrate=function(e,t,r){if(!qy(t))throw Error(mt(200));return Zy(null,e,t,!0,r)};Vo.hydrateRoot=function(e,t,r){if(!eb(e))throw Error(mt(405));var o=r!=null&&r.hydratedSources||null,c=!1,d="",m=BP;if(r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),t=$P(t,null,e,1,r??null,c,!1,d,m),e[zs]=t.current,Sp(e),o)for(e=0;e<o.length;e++)r=o[e],c=r._getVersion,c=c(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,c]:t.mutableSourceEagerHydrationData.push(r,c);return new Gy(t)};Vo.render=function(e,t,r){if(!qy(t))throw Error(mt(200));return Zy(null,e,t,!1,r)};Vo.unmountComponentAtNode=function(e){if(!qy(e))throw Error(mt(40));return e._reactRootContainer?(vc(function(){Zy(null,null,e,!1,function(){e._reactRootContainer=null,e[zs]=null})}),!0):!1};Vo.unstable_batchedUpdates=q1;Vo.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!qy(r))throw Error(mt(200));if(e==null||e._reactInternals===void 0)throw Error(mt(38));return Zy(e,t,r,!1,o)};Vo.version="18.3.1-next-f1338f8080-20240426";function OP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OP)}catch(e){console.error(e)}}OP(),OI.exports=Vo;var dd=OI.exports;const C4=Mx(dd),k4=zx({__proto__:null,default:C4},[dd]);function I4(e){return typeof e=="function"?e():e}const FP=A.forwardRef(function(t,r){const{children:o,container:c,disablePortal:d=!1}=t,[m,l]=A.useState(null),b=tn(A.isValidElement(o)?o.ref:null,r);if(Ts(()=>{d||l(I4(c)||document.body)},[c,d]),Ts(()=>{if(m&&!d)return pg(r,m),()=>{pg(r,null)}},[r,m,d]),d){if(A.isValidElement(o)){const w={ref:b};return A.cloneElement(o,w)}return Y.jsx(A.Fragment,{children:o})}return Y.jsx(A.Fragment,{children:m&&dd.createPortal(o,m)})});function T4(e={}){const{disabled:t=!1,focusableWhenDisabled:r,rootRef:o}=e,c=A.useContext(zy);if(c===null)throw new Error("useMenuButton: no menu context available.");const{state:d,dispatch:m,registerTrigger:l,popupId:b}=c,{getRootProps:w,rootRef:T,active:E}=ns({disabled:t,focusableWhenDisabled:r,rootRef:o}),z=tn(T,l),j=O=>L=>{var R;(R=O.onClick)==null||R.call(O,L),!L.defaultMuiPrevented&&m({type:Da.toggle,event:L})},U=O=>L=>{var R;(R=O.onKeyDown)==null||R.call(O,L),!L.defaultMuiPrevented&&(L.key==="ArrowDown"||L.key==="ArrowUp")&&(L.preventDefault(),m({type:Da.open,event:L}))},V=(O={})=>({onClick:j(O),onKeyDown:U(O)});return{active:E,getRootProps:(O={})=>{const L=Ei(O),R=Ps(V,w);return W({"aria-haspopup":"menu","aria-expanded":d.open,"aria-controls":b},O,L,R(L),{tabIndex:0,ref:z})},open:d.open,rootRef:z}}function P4(e){return`menu-item-${e.size}`}const E4={dispatch:()=>{},popupId:"",registerPopup:()=>{},registerTrigger:()=>{},state:{open:!0,changeReason:null},triggerElement:null};function z4(e){var t;const{disabled:r=!1,id:o,rootRef:c,label:d,disableFocusOnHover:m=!1}=e,l=ko(o),b=A.useRef(null),w=A.useMemo(()=>({disabled:r,id:l??"",label:d,ref:b}),[r,l,d]),{dispatch:T}=(t=A.useContext(zy))!=null?t:E4,{getRootProps:E,highlighted:z}=u1({item:l,handlePointerOverEvents:!m}),{index:j,totalItemCount:U}=Ay(l??P4,w),{getRootProps:V,focusVisible:K,rootRef:O}=ns({disabled:r,focusableWhenDisabled:!0}),L=tn(O,c,b);A.useDebugValue({id:l,highlighted:z,disabled:r,label:d});const R=se=>ie=>{var Z;(Z=se.onClick)==null||Z.call(se,ie),!ie.defaultMuiPrevented&&T({type:Da.close,event:ie})},re=(se={})=>W({},se,{onClick:R(se)});function J(se={}){const ie=Ei(se),Z=Ps(re,Ps(V,E));return W({},se,ie,Z(ie),{id:l,ref:L,role:"menuitem"})}return l===void 0?{getRootProps:J,disabled:!1,focusVisible:K,highlighted:!1,index:-1,totalItemCount:0,rootRef:L}:{getRootProps:J,disabled:r,focusVisible:K,highlighted:z,index:j,totalItemCount:U,rootRef:L}}function M4(e){const t=A.useContext(Cl);if(!t)throw new Error("MenuItem: ListContext was not found.");const r=ko(e),{getItemState:o,dispatch:c}=t;let d;r!=null?d=o(r):d={focusable:!0,highlighted:!1,selected:!1};const{highlighted:m,selected:l,focusable:b}=d,w=A.useCallback(E=>{if(E!==r)throw new Error(["Base UI MenuItem: Tried to access the state of another MenuItem.",`itemValue: ${E} | id: ${r}`,"This is unsupported when the MenuItem uses the MenuItemContextStabilizer as a performance optimization."].join("/n"));return{highlighted:m,selected:l,focusable:b}},[m,l,b,r]);return{contextValue:A.useMemo(()=>({dispatch:c,getItemState:w}),[c,w]),id:r}}function D4(e){const t=Ya(e);return t.body===e?t1(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function ap(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function G2(e){return parseInt(t1(e).getComputedStyle(e).paddingRight,10)||0}function A4(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,o=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||o}function q2(e,t,r,o,c){const d=[t,r,...o];[].forEach.call(e.children,m=>{const l=d.indexOf(m)===-1,b=!A4(m);l&&b&&ap(m,c)})}function J0(e,t){let r=-1;return e.some((o,c)=>t(o)?(r=c,!0):!1),r}function R4(e,t){const r=[],o=e.container;if(!t.disableScrollLock){if(D4(o)){const m=NL(Ya(o));r.push({value:o.style.paddingRight,property:"padding-right",el:o}),o.style.paddingRight=`${G2(o)+m}px`;const l=Ya(o).querySelectorAll(".mui-fixed");[].forEach.call(l,b=>{r.push({value:b.style.paddingRight,property:"padding-right",el:b}),b.style.paddingRight=`${G2(b)+m}px`})}let d;if(o.parentNode instanceof DocumentFragment)d=Ya(o).body;else{const m=o.parentElement,l=t1(o);d=(m==null?void 0:m.nodeName)==="HTML"&&l.getComputedStyle(m).overflowY==="scroll"?m:o}r.push({value:d.style.overflow,property:"overflow",el:d},{value:d.style.overflowX,property:"overflow-x",el:d},{value:d.style.overflowY,property:"overflow-y",el:d}),d.style.overflow="hidden"}return()=>{r.forEach(({value:d,el:m,property:l})=>{d?m.style.setProperty(l,d):m.style.removeProperty(l)})}}function L4(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class $4{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,r){let o=this.modals.indexOf(t);if(o!==-1)return o;o=this.modals.length,this.modals.push(t),t.modalRef&&ap(t.modalRef,!1);const c=L4(r);q2(r,t.mount,t.modalRef,c,!0);const d=J0(this.containers,m=>m.container===r);return d!==-1?(this.containers[d].modals.push(t),o):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:c}),o)}mount(t,r){const o=J0(this.containers,d=>d.modals.indexOf(t)!==-1),c=this.containers[o];c.restore||(c.restore=R4(c,r))}remove(t,r=!0){const o=this.modals.indexOf(t);if(o===-1)return o;const c=J0(this.containers,m=>m.modals.indexOf(t)!==-1),d=this.containers[c];if(d.modals.splice(d.modals.indexOf(t),1),this.modals.splice(o,1),d.modals.length===0)d.restore&&d.restore(),t.modalRef&&ap(t.modalRef,r),q2(d.container,t.mount,t.modalRef,d.hiddenSiblings,!1),this.containers.splice(c,1);else{const m=d.modals[d.modals.length-1];m.modalRef&&ap(m.modalRef,!1)}return o}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function B4(e){return typeof e=="function"?e():e}function O4(e){return e?e.props.hasOwnProperty("in"):!1}const F4=new $4;function N4(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:o=!1,manager:c=F4,closeAfterTransition:d=!1,onTransitionEnter:m,onTransitionExited:l,children:b,onClose:w,open:T,rootRef:E}=e,z=A.useRef({}),j=A.useRef(null),U=A.useRef(null),V=tn(U,E),[K,O]=A.useState(!T),L=O4(b);let R=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(R=!1);const re=()=>Ya(j.current),J=()=>(z.current.modalRef=U.current,z.current.mount=j.current,z.current),se=()=>{c.mount(J(),{disableScrollLock:o}),U.current&&(U.current.scrollTop=0)},ie=ll(()=>{const Te=B4(t)||re().body;c.add(J(),Te),U.current&&se()}),Z=A.useCallback(()=>c.isTopModal(J()),[c]),ke=ll(Te=>{j.current=Te,Te&&(T&&Z()?se():U.current&&ap(U.current,R))}),xe=A.useCallback(()=>{c.remove(J(),R)},[R,c]);A.useEffect(()=>()=>{xe()},[xe]),A.useEffect(()=>{T?ie():(!L||!d)&&xe()},[T,xe,L,d,ie]);const Ie=Te=>Fe=>{var $e;($e=Te.onKeyDown)==null||$e.call(Te,Fe),!(Fe.key!=="Escape"||Fe.which===229||!Z())&&(r||(Fe.stopPropagation(),w&&w(Fe,"escapeKeyDown")))},ze=Te=>Fe=>{var $e;($e=Te.onClick)==null||$e.call(Te,Fe),Fe.target===Fe.currentTarget&&w&&w(Fe,"backdropClick")};return{getRootProps:(Te={})=>{const Fe=Ei(e);delete Fe.onTransitionEnter,delete Fe.onTransitionExited;const $e=W({},Fe,Te);return W({role:"presentation"},$e,{onKeyDown:Ie($e),ref:V})},getBackdropProps:(Te={})=>{const Fe=Te;return W({"aria-hidden":!0},Fe,{onClick:ze(Fe),open:T})},getTransitionProps:()=>{const Te=()=>{O(!1),m&&m()},Fe=()=>{O(!0),l&&l(),d&&xe()};return{onEnter:TS(Te,b==null?void 0:b.props.onEnter),onExited:TS(Fe,b==null?void 0:b.props.onExited)}},rootRef:V,portalRef:ke,isTopModal:Z,exited:K,hasTransition:L}}function j4(e){const{value:t,label:r,disabled:o,rootRef:c,id:d}=e,{getRootProps:m,highlighted:l,selected:b}=u1({item:t}),{getRootProps:w,rootRef:T}=ns({disabled:o,focusableWhenDisabled:!0}),E=ko(d),z=A.useRef(null),j=A.useMemo(()=>({disabled:o,label:r,value:t,ref:z,id:E}),[o,r,t,E]),{index:U}=Ay(t,j),V=tn(c,z,T),K=L=>R=>{var re;(re=L.onKeyDown)==null||re.call(L,R),!R.defaultMuiPrevented&&[" ","Enter"].includes(R.key)&&(R.defaultMuiPrevented=!0)},O=(L={})=>({onKeyDown:K(L)});return{getRootProps:(L={})=>{const R=Ei(L),re=Ps(m,Ps(w,O));return W({},L,R,re(R),{id:E,ref:V,role:"option","aria-selected":b})},highlighted:l,index:U,selected:b,rootRef:V}}function V4(e){const t=A.useContext(Cl);if(!t)throw new Error("Option: ListContext was not found.");const{getItemState:r,dispatch:o}=t,{highlighted:c,selected:d,focusable:m}=r(e),l=A.useCallback(w=>{if(w!==e)throw new Error(["Base UI Option: Tried to access the state of another Option.","This is unsupported when the Option uses the OptionContextStabilizer as a performance optimization."].join("/n"));return{highlighted:c,selected:d,focusable:m}},[c,d,m,e]);return{contextValue:A.useMemo(()=>({dispatch:o,getItemState:l}),[o,l])}}var wo="top",ca="bottom",ua="right",So="left",tb="auto",Jp=[wo,ca,ua,So],Ku="start",Dp="end",U4="clippingParents",NP="viewport",Lh="popper",H4="reference",Z2=Jp.reduce(function(e,t){return e.concat([t+"-"+Ku,t+"-"+Dp])},[]),jP=[].concat(Jp,[tb]).reduce(function(e,t){return e.concat([t,t+"-"+Ku,t+"-"+Dp])},[]),W4="beforeRead",G4="read",q4="afterRead",Z4="beforeMain",K4="main",X4="afterMain",J4="beforeWrite",Y4="write",Q4="afterWrite",eB=[W4,G4,q4,Z4,K4,X4,J4,Y4,Q4];function rs(e){return e?(e.nodeName||"").toLowerCase():null}function No(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function _c(e){var t=No(e).Element;return e instanceof t||e instanceof Element}function oa(e){var t=No(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function rb(e){if(typeof ShadowRoot>"u")return!1;var t=No(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function tB(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var o=t.styles[r]||{},c=t.attributes[r]||{},d=t.elements[r];!oa(d)||!rs(d)||(Object.assign(d.style,o),Object.keys(c).forEach(function(m){var l=c[m];l===!1?d.removeAttribute(m):d.setAttribute(m,l===!0?"":l)}))})}function rB(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(o){var c=t.elements[o],d=t.attributes[o]||{},m=Object.keys(t.styles.hasOwnProperty(o)?t.styles[o]:r[o]),l=m.reduce(function(b,w){return b[w]="",b},{});!oa(c)||!rs(c)||(Object.assign(c.style,l),Object.keys(d).forEach(function(b){c.removeAttribute(b)}))})}}const nB={name:"applyStyles",enabled:!0,phase:"write",fn:tB,effect:rB,requires:["computeStyles"]};function ts(e){return e.split("-")[0]}var dc=Math.max,Og=Math.min,Xu=Math.round;function px(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function VP(){return!/^((?!chrome|android).)*safari/i.test(px())}function Ju(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var o=e.getBoundingClientRect(),c=1,d=1;t&&oa(e)&&(c=e.offsetWidth>0&&Xu(o.width)/e.offsetWidth||1,d=e.offsetHeight>0&&Xu(o.height)/e.offsetHeight||1);var m=_c(e)?No(e):window,l=m.visualViewport,b=!VP()&&r,w=(o.left+(b&&l?l.offsetLeft:0))/c,T=(o.top+(b&&l?l.offsetTop:0))/d,E=o.width/c,z=o.height/d;return{width:E,height:z,top:T,right:w+E,bottom:T+z,left:w,x:w,y:T}}function nb(e){var t=Ju(e),r=e.offsetWidth,o=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-o)<=1&&(o=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:o}}function UP(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&rb(r)){var o=t;do{if(o&&e.isSameNode(o))return!0;o=o.parentNode||o.host}while(o)}return!1}function As(e){return No(e).getComputedStyle(e)}function iB(e){return["table","td","th"].indexOf(rs(e))>=0}function Pl(e){return((_c(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ky(e){return rs(e)==="html"?e:e.assignedSlot||e.parentNode||(rb(e)?e.host:null)||Pl(e)}function K2(e){return!oa(e)||As(e).position==="fixed"?null:e.offsetParent}function oB(e){var t=/firefox/i.test(px()),r=/Trident/i.test(px());if(r&&oa(e)){var o=As(e);if(o.position==="fixed")return null}var c=Ky(e);for(rb(c)&&(c=c.host);oa(c)&&["html","body"].indexOf(rs(c))<0;){var d=As(c);if(d.transform!=="none"||d.perspective!=="none"||d.contain==="paint"||["transform","perspective"].indexOf(d.willChange)!==-1||t&&d.willChange==="filter"||t&&d.filter&&d.filter!=="none")return c;c=c.parentNode}return null}function Yp(e){for(var t=No(e),r=K2(e);r&&iB(r)&&As(r).position==="static";)r=K2(r);return r&&(rs(r)==="html"||rs(r)==="body"&&As(r).position==="static")?t:r||oB(e)||t}function ib(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function sp(e,t,r){return dc(e,Og(t,r))}function aB(e,t,r){var o=sp(e,t,r);return o>r?r:o}function HP(){return{top:0,right:0,bottom:0,left:0}}function WP(e){return Object.assign({},HP(),e)}function GP(e,t){return t.reduce(function(r,o){return r[o]=e,r},{})}var sB=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,WP(typeof t!="number"?t:GP(t,Jp))};function lB(e){var t,r=e.state,o=e.name,c=e.options,d=r.elements.arrow,m=r.modifiersData.popperOffsets,l=ts(r.placement),b=ib(l),w=[So,ua].indexOf(l)>=0,T=w?"height":"width";if(!(!d||!m)){var E=sB(c.padding,r),z=nb(d),j=b==="y"?wo:So,U=b==="y"?ca:ua,V=r.rects.reference[T]+r.rects.reference[b]-m[b]-r.rects.popper[T],K=m[b]-r.rects.reference[b],O=Yp(d),L=O?b==="y"?O.clientHeight||0:O.clientWidth||0:0,R=V/2-K/2,re=E[j],J=L-z[T]-E[U],se=L/2-z[T]/2+R,ie=sp(re,se,J),Z=b;r.modifiersData[o]=(t={},t[Z]=ie,t.centerOffset=ie-se,t)}}function cB(e){var t=e.state,r=e.options,o=r.element,c=o===void 0?"[data-popper-arrow]":o;c!=null&&(typeof c=="string"&&(c=t.elements.popper.querySelector(c),!c)||UP(t.elements.popper,c)&&(t.elements.arrow=c))}const uB={name:"arrow",enabled:!0,phase:"main",fn:lB,effect:cB,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Yu(e){return e.split("-")[1]}var dB={top:"auto",right:"auto",bottom:"auto",left:"auto"};function hB(e,t){var r=e.x,o=e.y,c=t.devicePixelRatio||1;return{x:Xu(r*c)/c||0,y:Xu(o*c)/c||0}}function X2(e){var t,r=e.popper,o=e.popperRect,c=e.placement,d=e.variation,m=e.offsets,l=e.position,b=e.gpuAcceleration,w=e.adaptive,T=e.roundOffsets,E=e.isFixed,z=m.x,j=z===void 0?0:z,U=m.y,V=U===void 0?0:U,K=typeof T=="function"?T({x:j,y:V}):{x:j,y:V};j=K.x,V=K.y;var O=m.hasOwnProperty("x"),L=m.hasOwnProperty("y"),R=So,re=wo,J=window;if(w){var se=Yp(r),ie="clientHeight",Z="clientWidth";if(se===No(r)&&(se=Pl(r),As(se).position!=="static"&&l==="absolute"&&(ie="scrollHeight",Z="scrollWidth")),se=se,c===wo||(c===So||c===ua)&&d===Dp){re=ca;var ke=E&&se===J&&J.visualViewport?J.visualViewport.height:se[ie];V-=ke-o.height,V*=b?1:-1}if(c===So||(c===wo||c===ca)&&d===Dp){R=ua;var xe=E&&se===J&&J.visualViewport?J.visualViewport.width:se[Z];j-=xe-o.width,j*=b?1:-1}}var Ie=Object.assign({position:l},w&&dB),ze=T===!0?hB({x:j,y:V},No(r)):{x:j,y:V};if(j=ze.x,V=ze.y,b){var Le;return Object.assign({},Ie,(Le={},Le[re]=L?"0":"",Le[R]=O?"0":"",Le.transform=(J.devicePixelRatio||1)<=1?"translate("+j+"px, "+V+"px)":"translate3d("+j+"px, "+V+"px, 0)",Le))}return Object.assign({},Ie,(t={},t[re]=L?V+"px":"",t[R]=O?j+"px":"",t.transform="",t))}function pB(e){var t=e.state,r=e.options,o=r.gpuAcceleration,c=o===void 0?!0:o,d=r.adaptive,m=d===void 0?!0:d,l=r.roundOffsets,b=l===void 0?!0:l,w={placement:ts(t.placement),variation:Yu(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:c,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,X2(Object.assign({},w,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:m,roundOffsets:b})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,X2(Object.assign({},w,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:b})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const fB={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:pB,data:{}};var Lm={passive:!0};function mB(e){var t=e.state,r=e.instance,o=e.options,c=o.scroll,d=c===void 0?!0:c,m=o.resize,l=m===void 0?!0:m,b=No(t.elements.popper),w=[].concat(t.scrollParents.reference,t.scrollParents.popper);return d&&w.forEach(function(T){T.addEventListener("scroll",r.update,Lm)}),l&&b.addEventListener("resize",r.update,Lm),function(){d&&w.forEach(function(T){T.removeEventListener("scroll",r.update,Lm)}),l&&b.removeEventListener("resize",r.update,Lm)}}const gB={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:mB,data:{}};var yB={left:"right",right:"left",bottom:"top",top:"bottom"};function rg(e){return e.replace(/left|right|bottom|top/g,function(t){return yB[t]})}var vB={start:"end",end:"start"};function J2(e){return e.replace(/start|end/g,function(t){return vB[t]})}function ob(e){var t=No(e),r=t.pageXOffset,o=t.pageYOffset;return{scrollLeft:r,scrollTop:o}}function ab(e){return Ju(Pl(e)).left+ob(e).scrollLeft}function _B(e,t){var r=No(e),o=Pl(e),c=r.visualViewport,d=o.clientWidth,m=o.clientHeight,l=0,b=0;if(c){d=c.width,m=c.height;var w=VP();(w||!w&&t==="fixed")&&(l=c.offsetLeft,b=c.offsetTop)}return{width:d,height:m,x:l+ab(e),y:b}}function xB(e){var t,r=Pl(e),o=ob(e),c=(t=e.ownerDocument)==null?void 0:t.body,d=dc(r.scrollWidth,r.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),m=dc(r.scrollHeight,r.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),l=-o.scrollLeft+ab(e),b=-o.scrollTop;return As(c||r).direction==="rtl"&&(l+=dc(r.clientWidth,c?c.clientWidth:0)-d),{width:d,height:m,x:l,y:b}}function sb(e){var t=As(e),r=t.overflow,o=t.overflowX,c=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+c+o)}function qP(e){return["html","body","#document"].indexOf(rs(e))>=0?e.ownerDocument.body:oa(e)&&sb(e)?e:qP(Ky(e))}function lp(e,t){var r;t===void 0&&(t=[]);var o=qP(e),c=o===((r=e.ownerDocument)==null?void 0:r.body),d=No(o),m=c?[d].concat(d.visualViewport||[],sb(o)?o:[]):o,l=t.concat(m);return c?l:l.concat(lp(Ky(m)))}function fx(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function bB(e,t){var r=Ju(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function Y2(e,t,r){return t===NP?fx(_B(e,r)):_c(t)?bB(t,r):fx(xB(Pl(e)))}function wB(e){var t=lp(Ky(e)),r=["absolute","fixed"].indexOf(As(e).position)>=0,o=r&&oa(e)?Yp(e):e;return _c(o)?t.filter(function(c){return _c(c)&&UP(c,o)&&rs(c)!=="body"}):[]}function SB(e,t,r,o){var c=t==="clippingParents"?wB(e):[].concat(t),d=[].concat(c,[r]),m=d[0],l=d.reduce(function(b,w){var T=Y2(e,w,o);return b.top=dc(T.top,b.top),b.right=Og(T.right,b.right),b.bottom=Og(T.bottom,b.bottom),b.left=dc(T.left,b.left),b},Y2(e,m,o));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function ZP(e){var t=e.reference,r=e.element,o=e.placement,c=o?ts(o):null,d=o?Yu(o):null,m=t.x+t.width/2-r.width/2,l=t.y+t.height/2-r.height/2,b;switch(c){case wo:b={x:m,y:t.y-r.height};break;case ca:b={x:m,y:t.y+t.height};break;case ua:b={x:t.x+t.width,y:l};break;case So:b={x:t.x-r.width,y:l};break;default:b={x:t.x,y:t.y}}var w=c?ib(c):null;if(w!=null){var T=w==="y"?"height":"width";switch(d){case Ku:b[w]=b[w]-(t[T]/2-r[T]/2);break;case Dp:b[w]=b[w]+(t[T]/2-r[T]/2);break}}return b}function Ap(e,t){t===void 0&&(t={});var r=t,o=r.placement,c=o===void 0?e.placement:o,d=r.strategy,m=d===void 0?e.strategy:d,l=r.boundary,b=l===void 0?U4:l,w=r.rootBoundary,T=w===void 0?NP:w,E=r.elementContext,z=E===void 0?Lh:E,j=r.altBoundary,U=j===void 0?!1:j,V=r.padding,K=V===void 0?0:V,O=WP(typeof K!="number"?K:GP(K,Jp)),L=z===Lh?H4:Lh,R=e.rects.popper,re=e.elements[U?L:z],J=SB(_c(re)?re:re.contextElement||Pl(e.elements.popper),b,T,m),se=Ju(e.elements.reference),ie=ZP({reference:se,element:R,strategy:"absolute",placement:c}),Z=fx(Object.assign({},R,ie)),ke=z===Lh?Z:se,xe={top:J.top-ke.top+O.top,bottom:ke.bottom-J.bottom+O.bottom,left:J.left-ke.left+O.left,right:ke.right-J.right+O.right},Ie=e.modifiersData.offset;if(z===Lh&&Ie){var ze=Ie[c];Object.keys(xe).forEach(function(Le){var Ye=[ua,ca].indexOf(Le)>=0?1:-1,Ge=[wo,ca].indexOf(Le)>=0?"y":"x";xe[Le]+=ze[Ge]*Ye})}return xe}function CB(e,t){t===void 0&&(t={});var r=t,o=r.placement,c=r.boundary,d=r.rootBoundary,m=r.padding,l=r.flipVariations,b=r.allowedAutoPlacements,w=b===void 0?jP:b,T=Yu(o),E=T?l?Z2:Z2.filter(function(U){return Yu(U)===T}):Jp,z=E.filter(function(U){return w.indexOf(U)>=0});z.length===0&&(z=E);var j=z.reduce(function(U,V){return U[V]=Ap(e,{placement:V,boundary:c,rootBoundary:d,padding:m})[ts(V)],U},{});return Object.keys(j).sort(function(U,V){return j[U]-j[V]})}function kB(e){if(ts(e)===tb)return[];var t=rg(e);return[J2(e),t,J2(t)]}function IB(e){var t=e.state,r=e.options,o=e.name;if(!t.modifiersData[o]._skip){for(var c=r.mainAxis,d=c===void 0?!0:c,m=r.altAxis,l=m===void 0?!0:m,b=r.fallbackPlacements,w=r.padding,T=r.boundary,E=r.rootBoundary,z=r.altBoundary,j=r.flipVariations,U=j===void 0?!0:j,V=r.allowedAutoPlacements,K=t.options.placement,O=ts(K),L=O===K,R=b||(L||!U?[rg(K)]:kB(K)),re=[K].concat(R).reduce(function(wt,zt){return wt.concat(ts(zt)===tb?CB(t,{placement:zt,boundary:T,rootBoundary:E,padding:w,flipVariations:U,allowedAutoPlacements:V}):zt)},[]),J=t.rects.reference,se=t.rects.popper,ie=new Map,Z=!0,ke=re[0],xe=0;xe<re.length;xe++){var Ie=re[xe],ze=ts(Ie),Le=Yu(Ie)===Ku,Ye=[wo,ca].indexOf(ze)>=0,Ge=Ye?"width":"height",Te=Ap(t,{placement:Ie,boundary:T,rootBoundary:E,altBoundary:z,padding:w}),Fe=Ye?Le?ua:So:Le?ca:wo;J[Ge]>se[Ge]&&(Fe=rg(Fe));var $e=rg(Fe),Oe=[];if(d&&Oe.push(Te[ze]<=0),l&&Oe.push(Te[Fe]<=0,Te[$e]<=0),Oe.every(function(wt){return wt})){ke=Ie,Z=!1;break}ie.set(Ie,Oe)}if(Z)for(var Qe=U?3:1,at=function(zt){var er=re.find(function(lt){var qe=ie.get(lt);if(qe)return qe.slice(0,zt).every(function(pt){return pt})});if(er)return ke=er,"break"},ut=Qe;ut>0;ut--){var Pt=at(ut);if(Pt==="break")break}t.placement!==ke&&(t.modifiersData[o]._skip=!0,t.placement=ke,t.reset=!0)}}const TB={name:"flip",enabled:!0,phase:"main",fn:IB,requiresIfExists:["offset"],data:{_skip:!1}};function Q2(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function eC(e){return[wo,ua,ca,So].some(function(t){return e[t]>=0})}function PB(e){var t=e.state,r=e.name,o=t.rects.reference,c=t.rects.popper,d=t.modifiersData.preventOverflow,m=Ap(t,{elementContext:"reference"}),l=Ap(t,{altBoundary:!0}),b=Q2(m,o),w=Q2(l,c,d),T=eC(b),E=eC(w);t.modifiersData[r]={referenceClippingOffsets:b,popperEscapeOffsets:w,isReferenceHidden:T,hasPopperEscaped:E},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":T,"data-popper-escaped":E})}const EB={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:PB};function zB(e,t,r){var o=ts(e),c=[So,wo].indexOf(o)>=0?-1:1,d=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,m=d[0],l=d[1];return m=m||0,l=(l||0)*c,[So,ua].indexOf(o)>=0?{x:l,y:m}:{x:m,y:l}}function MB(e){var t=e.state,r=e.options,o=e.name,c=r.offset,d=c===void 0?[0,0]:c,m=jP.reduce(function(T,E){return T[E]=zB(E,t.rects,d),T},{}),l=m[t.placement],b=l.x,w=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=b,t.modifiersData.popperOffsets.y+=w),t.modifiersData[o]=m}const DB={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:MB};function AB(e){var t=e.state,r=e.name;t.modifiersData[r]=ZP({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const RB={name:"popperOffsets",enabled:!0,phase:"read",fn:AB,data:{}};function LB(e){return e==="x"?"y":"x"}function $B(e){var t=e.state,r=e.options,o=e.name,c=r.mainAxis,d=c===void 0?!0:c,m=r.altAxis,l=m===void 0?!1:m,b=r.boundary,w=r.rootBoundary,T=r.altBoundary,E=r.padding,z=r.tether,j=z===void 0?!0:z,U=r.tetherOffset,V=U===void 0?0:U,K=Ap(t,{boundary:b,rootBoundary:w,padding:E,altBoundary:T}),O=ts(t.placement),L=Yu(t.placement),R=!L,re=ib(O),J=LB(re),se=t.modifiersData.popperOffsets,ie=t.rects.reference,Z=t.rects.popper,ke=typeof V=="function"?V(Object.assign({},t.rects,{placement:t.placement})):V,xe=typeof ke=="number"?{mainAxis:ke,altAxis:ke}:Object.assign({mainAxis:0,altAxis:0},ke),Ie=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,ze={x:0,y:0};if(se){if(d){var Le,Ye=re==="y"?wo:So,Ge=re==="y"?ca:ua,Te=re==="y"?"height":"width",Fe=se[re],$e=Fe+K[Ye],Oe=Fe-K[Ge],Qe=j?-Z[Te]/2:0,at=L===Ku?ie[Te]:Z[Te],ut=L===Ku?-Z[Te]:-ie[Te],Pt=t.elements.arrow,wt=j&&Pt?nb(Pt):{width:0,height:0},zt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:HP(),er=zt[Ye],lt=zt[Ge],qe=sp(0,ie[Te],wt[Te]),pt=R?ie[Te]/2-Qe-qe-er-xe.mainAxis:at-qe-er-xe.mainAxis,yt=R?-ie[Te]/2+Qe+qe+lt+xe.mainAxis:ut+qe+lt+xe.mainAxis,or=t.elements.arrow&&Yp(t.elements.arrow),Kt=or?re==="y"?or.clientTop||0:or.clientLeft||0:0,Mr=(Le=Ie==null?void 0:Ie[re])!=null?Le:0,lr=Fe+pt-Mr-Kt,Vt=Fe+yt-Mr,Et=sp(j?Og($e,lr):$e,Fe,j?dc(Oe,Vt):Oe);se[re]=Et,ze[re]=Et-Fe}if(l){var ur,Mt=re==="x"?wo:So,Er=re==="x"?ca:ua,Ve=se[J],Sr=J==="y"?"height":"width",Dr=Ve+K[Mt],qt=Ve-K[Er],rr=[wo,So].indexOf(O)!==-1,Or=(ur=Ie==null?void 0:Ie[J])!=null?ur:0,Hr=rr?Dr:Ve-ie[Sr]-Z[Sr]-Or+xe.altAxis,dr=rr?Ve+ie[Sr]+Z[Sr]-Or-xe.altAxis:qt,cr=j&&rr?aB(Hr,Ve,dr):sp(j?Hr:Dr,Ve,j?dr:qt);se[J]=cr,ze[J]=cr-Ve}t.modifiersData[o]=ze}}const BB={name:"preventOverflow",enabled:!0,phase:"main",fn:$B,requiresIfExists:["offset"]};function OB(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function FB(e){return e===No(e)||!oa(e)?ob(e):OB(e)}function NB(e){var t=e.getBoundingClientRect(),r=Xu(t.width)/e.offsetWidth||1,o=Xu(t.height)/e.offsetHeight||1;return r!==1||o!==1}function jB(e,t,r){r===void 0&&(r=!1);var o=oa(t),c=oa(t)&&NB(t),d=Pl(t),m=Ju(e,c,r),l={scrollLeft:0,scrollTop:0},b={x:0,y:0};return(o||!o&&!r)&&((rs(t)!=="body"||sb(d))&&(l=FB(t)),oa(t)?(b=Ju(t,!0),b.x+=t.clientLeft,b.y+=t.clientTop):d&&(b.x=ab(d))),{x:m.left+l.scrollLeft-b.x,y:m.top+l.scrollTop-b.y,width:m.width,height:m.height}}function VB(e){var t=new Map,r=new Set,o=[];e.forEach(function(d){t.set(d.name,d)});function c(d){r.add(d.name);var m=[].concat(d.requires||[],d.requiresIfExists||[]);m.forEach(function(l){if(!r.has(l)){var b=t.get(l);b&&c(b)}}),o.push(d)}return e.forEach(function(d){r.has(d.name)||c(d)}),o}function UB(e){var t=VB(e);return eB.reduce(function(r,o){return r.concat(t.filter(function(c){return c.phase===o}))},[])}function HB(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function WB(e){var t=e.reduce(function(r,o){var c=r[o.name];return r[o.name]=c?Object.assign({},c,o,{options:Object.assign({},c.options,o.options),data:Object.assign({},c.data,o.data)}):o,r},{});return Object.keys(t).map(function(r){return t[r]})}var tC={placement:"bottom",modifiers:[],strategy:"absolute"};function rC(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(o){return!(o&&typeof o.getBoundingClientRect=="function")})}function GB(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,o=r===void 0?[]:r,c=t.defaultOptions,d=c===void 0?tC:c;return function(l,b,w){w===void 0&&(w=d);var T={placement:"bottom",orderedModifiers:[],options:Object.assign({},tC,d),modifiersData:{},elements:{reference:l,popper:b},attributes:{},styles:{}},E=[],z=!1,j={state:T,setOptions:function(O){var L=typeof O=="function"?O(T.options):O;V(),T.options=Object.assign({},d,T.options,L),T.scrollParents={reference:_c(l)?lp(l):l.contextElement?lp(l.contextElement):[],popper:lp(b)};var R=UB(WB([].concat(o,T.options.modifiers)));return T.orderedModifiers=R.filter(function(re){return re.enabled}),U(),j.update()},forceUpdate:function(){if(!z){var O=T.elements,L=O.reference,R=O.popper;if(rC(L,R)){T.rects={reference:jB(L,Yp(R),T.options.strategy==="fixed"),popper:nb(R)},T.reset=!1,T.placement=T.options.placement,T.orderedModifiers.forEach(function(xe){return T.modifiersData[xe.name]=Object.assign({},xe.data)});for(var re=0;re<T.orderedModifiers.length;re++){if(T.reset===!0){T.reset=!1,re=-1;continue}var J=T.orderedModifiers[re],se=J.fn,ie=J.options,Z=ie===void 0?{}:ie,ke=J.name;typeof se=="function"&&(T=se({state:T,options:Z,name:ke,instance:j})||T)}}}},update:HB(function(){return new Promise(function(K){j.forceUpdate(),K(T)})}),destroy:function(){V(),z=!0}};if(!rC(l,b))return j;j.setOptions(w).then(function(K){!z&&w.onFirstUpdate&&w.onFirstUpdate(K)});function U(){T.orderedModifiers.forEach(function(K){var O=K.name,L=K.options,R=L===void 0?{}:L,re=K.effect;if(typeof re=="function"){var J=re({state:T,name:O,instance:j,options:R}),se=function(){};E.push(J||se)}})}function V(){E.forEach(function(K){return K()}),E=[]}return j}}var qB=[gB,RB,fB,nB,DB,TB,BB,uB,EB],ZB=GB({defaultModifiers:qB});const KP="Popper";function KB(e){return $I(KP,e)}$5(KP,["root"]);const XB=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],JB=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function YB(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function mx(e){return typeof e=="function"?e():e}function QB(e){return e.nodeType!==void 0}const eO=()=>Rr({root:["root"]},M5(KB)),tO={},rO=A.forwardRef(function(t,r){var o;const{anchorEl:c,children:d,direction:m,disablePortal:l,modifiers:b,open:w,placement:T,popperOptions:E,popperRef:z,slotProps:j={},slots:U={},TransitionProps:V}=t,K=Wt(t,XB),O=A.useRef(null),L=tn(O,r),R=A.useRef(null),re=tn(R,z),J=A.useRef(re);Ts(()=>{J.current=re},[re]),A.useImperativeHandle(z,()=>R.current,[]);const se=YB(T,m),[ie,Z]=A.useState(se),[ke,xe]=A.useState(mx(c));A.useEffect(()=>{R.current&&R.current.forceUpdate()}),A.useEffect(()=>{c&&xe(mx(c))},[c]),Ts(()=>{if(!ke||!w)return;const Ge=$e=>{Z($e.placement)};let Te=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:$e})=>{Ge($e)}}];b!=null&&(Te=Te.concat(b)),E&&E.modifiers!=null&&(Te=Te.concat(E.modifiers));const Fe=ZB(ke,O.current,W({placement:se},E,{modifiers:Te}));return J.current(Fe),()=>{Fe.destroy(),J.current(null)}},[ke,l,b,w,E,se]);const Ie={placement:ie};V!==null&&(Ie.TransitionProps=V);const ze=eO(),Le=(o=U.root)!=null?o:"div",Ye=RI({elementType:Le,externalSlotProps:j.root,externalForwardedProps:K,additionalProps:{role:"tooltip",ref:L},ownerState:t,className:ze.root});return Y.jsx(Le,W({},Ye,{children:typeof d=="function"?d(Ie):d}))}),Xy=A.forwardRef(function(t,r){const{anchorEl:o,children:c,container:d,direction:m="ltr",disablePortal:l=!1,keepMounted:b=!1,modifiers:w,open:T,placement:E="bottom",popperOptions:z=tO,popperRef:j,style:U,transition:V=!1,slotProps:K={},slots:O={}}=t,L=Wt(t,JB),[R,re]=A.useState(!0),J=()=>{re(!1)},se=()=>{re(!0)};if(!b&&!T&&(!V||R))return null;let ie;if(d)ie=d;else if(o){const xe=mx(o);ie=xe&&QB(xe)?Ya(xe).body:Ya(null).body}const Z=!T&&b&&(!V||R)?"none":void 0,ke=V?{in:T,onEnter:J,onExited:se}:void 0;return Y.jsx(FP,{disablePortal:l,container:ie,children:Y.jsx(rO,W({anchorEl:o,direction:m,disablePortal:l,modifiers:w,ref:r,open:V?!R:T,placement:E,popperOptions:z,popperRef:j,slotProps:K,slots:O},L,{style:W({position:"fixed",top:0,left:0,display:Z},U),TransitionProps:ke,children:c}))})}),Fg={buttonClick:"buttonClick",browserAutoFill:"browserAutoFill"},nO=e=>{const{label:t,value:r}=e;return typeof t=="string"?t:typeof r=="string"?r:String(e)};function iO(e,t){const{open:r}=e,{context:{selectionMode:o}}=t;if(t.type===Fg.buttonClick){var c;const b=(c=e.selectedValues[0])!=null?c:gi(null,"start",t.context);return W({},e,{open:!r,highlightedValue:r?null:b})}if(t.type===Fg.browserAutoFill)return l1(t.item,e,t.context);const d=My(e,t);switch(t.type){case un.keyDown:if(e.open){if(t.event.key==="Escape")return W({},d,{open:!1})}else{if(t.event.key==="ArrowDown"){var m;return W({},e,{open:!0,highlightedValue:(m=e.selectedValues[0])!=null?m:gi(null,"start",t.context)})}if(t.event.key==="ArrowUp"){var l;return W({},e,{open:!0,highlightedValue:(l=e.selectedValues[0])!=null?l:gi(null,"end",t.context)})}}break;case un.itemClick:if(o==="single")return W({},d,{open:!1});break;case un.blur:return W({},d,{open:!1});default:return d}return d}function oO(e){return Array.isArray(e)?e.length===0?"":JSON.stringify(e.map(t=>t.value)):(e==null?void 0:e.value)==null?"":typeof e.value=="string"||typeof e.value=="number"?e.value:JSON.stringify(e.value)}function aO(e){const{areOptionsEqual:t,buttonRef:r,defaultOpen:o=!1,defaultValue:c,disabled:d=!1,listboxId:m,listboxRef:l,multiple:b=!1,name:w,required:T,onChange:E,onHighlightChange:z,onOpenChange:j,open:U,options:V,getOptionAsString:K=nO,getSerializedValue:O=oO,value:L,componentName:R="useSelect"}=e,re=A.useRef(null),J=tn(r,re),se=A.useRef(null),ie=ko(m);let Z;L===void 0&&c===void 0?Z=[]:c!==void 0&&(b?Z=c:Z=c==null?[]:[c]);const ke=A.useMemo(()=>{if(L!==void 0)return b?L:L==null?[]:[L]},[L,b]),{subitems:xe,contextValue:Ie}=Dy(),ze=A.useMemo(()=>V!=null?new Map(V.map((Be,xt)=>[Be.value,{value:Be.value,label:Be.label,disabled:Be.disabled,ref:A.createRef(),id:`${ie}_${xt}`}])):xe,[V,xe,ie]),Le=tn(l,se),{getRootProps:Ye,active:Ge,focusVisible:Te,rootRef:Fe}=ns({disabled:d,rootRef:J}),$e=A.useMemo(()=>Array.from(ze.keys()),[ze]),Oe=A.useCallback(Be=>{if(t!==void 0){const xt=$e.find(St=>t(St,Be));return ze.get(xt)}return ze.get(Be)},[ze,t,$e]),Qe=A.useCallback(Be=>{var xt;const St=Oe(Be);return(xt=St==null?void 0:St.disabled)!=null?xt:!1},[Oe]),at=A.useCallback(Be=>{const xt=Oe(Be);return xt?K(xt):""},[Oe,K]),ut=A.useMemo(()=>({selectedValues:ke,open:U}),[ke,U]),Pt=A.useCallback(Be=>{var xt;return(xt=ze.get(Be))==null?void 0:xt.id},[ze]),wt=A.useCallback((Be,xt)=>{if(b)E==null||E(Be,xt);else{var St;E==null||E(Be,(St=xt[0])!=null?St:null)}},[b,E]),zt=A.useCallback((Be,xt)=>{z==null||z(Be,xt??null)},[z]),er=A.useCallback((Be,xt,St)=>{if(xt==="open"&&(j==null||j(St),St===!1&&(Be==null?void 0:Be.type)!=="blur")){var tr;(tr=re.current)==null||tr.focus()}},[j]),lt=A.useCallback(Be=>{var xt,St;return Be==null?null:(xt=(St=xe.get(Be))==null?void 0:St.ref.current)!=null?xt:null},[xe]),qe={getInitialState:()=>{var Be;return{highlightedValue:null,selectedValues:(Be=Z)!=null?Be:[],open:o}},getItemId:Pt,controlledProps:ut,focusManagement:"DOM",getItemDomElement:lt,itemComparer:t,isItemDisabled:Qe,rootRef:Le,onChange:wt,onHighlightChange:zt,onStateChange:er,reducerActionContext:A.useMemo(()=>({multiple:b}),[b]),items:$e,getItemAsString:at,selectionMode:b?"multiple":"single",stateReducer:iO,componentName:R},{dispatch:pt,getRootProps:yt,contextValue:or,state:{open:Kt,highlightedValue:Mr,selectedValues:lr},rootRef:Vt}=c1(qe),Et=A.useRef(Kt);Ts(()=>{if(Kt&&Mr!==null){var Be;const xt=(Be=Oe(Mr))==null?void 0:Be.ref;if(!se.current||!(xt!=null&&xt.current))return;Et.current||xt.current.focus({preventScroll:!0});const St=se.current.getBoundingClientRect(),tr=xt.current.getBoundingClientRect();tr.top<St.top?se.current.scrollTop-=St.top-tr.top:tr.bottom>St.bottom&&(se.current.scrollTop+=tr.bottom-St.bottom)}},[Kt,Mr,Oe]);const ur=A.useCallback(Be=>Oe(Be),[Oe]),Mt=Be=>xt=>{var St;if(Be==null||(St=Be.onClick)==null||St.call(Be,xt),!xt.defaultMuiPrevented){const tr={type:Fg.buttonClick,event:xt};pt(tr)}},Er=Be=>xt=>{var St;(St=Be.onKeyDown)==null||St.call(Be,xt),!xt.defaultMuiPrevented&&(xt.key==="ArrowDown"||xt.key==="ArrowUp")&&(xt.preventDefault(),pt({type:un.keyDown,key:xt.key,event:xt}))},Ve=(Be={})=>({onClick:Mt(Be),onKeyDown:Er(Be)}),Sr=(Be={})=>W({},Be,Ve(Be),{role:"combobox","aria-expanded":Kt,"aria-controls":ie}),Dr=(Be={})=>{const xt=Ei(Be),St=Ps(Sr,Ye);return W({},Be,St(xt))},qt=Be=>xt=>{var St,tr;(St=Be.onBlur)==null||St.call(Be,xt),!xt.defaultMuiPrevented&&((tr=se.current)!=null&&tr.contains(xt.relatedTarget)||xt.relatedTarget===re.current)&&(xt.defaultMuiPrevented=!0)},rr=(Be={})=>({onBlur:qt(Be)}),Or=(Be={})=>{const xt=Ei(Be),St=Ps(rr,yt);return W({id:ie,role:"listbox","aria-multiselectable":b?"true":void 0},Be,St(xt))};A.useDebugValue({selectedOptions:lr,highlightedOption:Mr,open:Kt});const Hr=A.useMemo(()=>W({},or,Ie),[or,Ie]);let dr;e.multiple?dr=lr:dr=lr.length>0?lr[0]:null;let cr;if(b)cr=dr.map(Be=>ur(Be)).filter(Be=>Be!==void 0);else{var Gt;cr=(Gt=ur(dr))!=null?Gt:null}const sr=Be=>xt=>{var St;if(Be==null||(St=Be.onChange)==null||St.call(Be,xt),xt.defaultMuiPrevented)return;const tr=ze.get(xt.target.value);xt.target.value===""?pt({type:un.clearSelection}):tr!==void 0&&pt({type:Fg.browserAutoFill,item:tr.value,event:xt})};return{buttonActive:Ge,buttonFocusVisible:Te,buttonRef:Fe,contextValue:Hr,disabled:d,dispatch:pt,getButtonProps:Dr,getHiddenInputProps:(Be={})=>{const xt=Ei(Be);return W({name:w,tabIndex:-1,"aria-hidden":!0,required:T?!0:void 0,value:O(cr),style:VL},Be,{onChange:sr(xt)})},getListboxProps:Or,getOptionMetadata:ur,listboxRef:Vt,open:Kt,options:$e,value:dr,highlightedOption:Mr}}function sO(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:c,getItemState:d,registerItem:m,totalSubitemCount:l}=t,b=A.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:c}),[o,c,d]),w=A.useMemo(()=>({getItemIndex:c,registerItem:m,totalSubitemCount:l}),[m,c,l]);return Y.jsx(Gp.Provider,{value:w,children:Y.jsx(Cl.Provider,{value:b,children:r})})}function lO(e){const{checked:t,defaultChecked:r,disabled:o,onBlur:c,onChange:d,onFocus:m,onFocusVisible:l,readOnly:b,required:w}=e,[T,E]=Du({controlled:t,default:!!r,name:"Switch",state:"checked"}),z=Z=>ke=>{var xe;ke.nativeEvent.defaultPrevented||(E(ke.target.checked),d==null||d(ke),(xe=Z.onChange)==null||xe.call(Z,ke))},{isFocusVisibleRef:j,onBlur:U,onFocus:V,ref:K}=r1(),[O,L]=A.useState(!1);o&&O&&L(!1),A.useEffect(()=>{j.current=O},[O,j]);const R=A.useRef(null),re=Z=>ke=>{var xe;R.current||(R.current=ke.currentTarget),V(ke),j.current===!0&&(L(!0),l==null||l(ke)),m==null||m(ke),(xe=Z.onFocus)==null||xe.call(Z,ke)},J=Z=>ke=>{var xe;U(ke),j.current===!1&&L(!1),c==null||c(ke),(xe=Z.onBlur)==null||xe.call(Z,ke)},se=tn(K,R);return{checked:T,disabled:!!o,focusVisible:O,getInputProps:(Z={})=>W({checked:t,defaultChecked:r,disabled:o,readOnly:b,ref:se,required:w,type:"checkbox",role:"switch","aria-checked":t},Z,{onChange:z(Z),onFocus:re(Z),onBlur:J(Z)}),inputRef:se,readOnly:!!b}}function cO(e){const{value:t,defaultValue:r,onChange:o,orientation:c="horizontal",direction:d="ltr",selectionFollowsFocus:m=!1}=e,[l,b]=Du({controlled:t,default:r,name:"Tabs",state:"value"}),w=A.useCallback((K,O)=>{b(O),o==null||o(K,O)},[o,b]),{subitems:T,contextValue:E}=Dy(),z=A.useRef(()=>{}),j=A.useCallback(K=>{var O;return(O=T.get(K))==null?void 0:O.id},[T]),U=A.useCallback(K=>z.current(K),[]),V=A.useCallback(K=>{z.current=K},[]);return{contextValue:W({direction:d,getTabId:U,getTabPanelId:j,onSelected:w,orientation:c,registerTabIdLookup:V,selectionFollowsFocus:m,value:l},E)}}const XP=A.createContext(null);function Jy(){const e=A.useContext(XP);if(e==null)throw new Error("No TabsContext provided");return e}function uO(e){const{value:t,children:r}=e,{direction:o,getItemIndex:c,onSelected:d,orientation:m,registerItem:l,registerTabIdLookup:b,selectionFollowsFocus:w,totalSubitemCount:T,value:E,getTabId:z,getTabPanelId:j}=t,U=A.useMemo(()=>({getItemIndex:c,registerItem:l,totalSubitemCount:T}),[l,c,T]),V=A.useMemo(()=>({direction:o,getTabId:z,getTabPanelId:j,onSelected:d,orientation:m,registerTabIdLookup:b,selectionFollowsFocus:w,value:E}),[o,z,j,d,m,b,w,E]);return Y.jsx(Gp.Provider,{value:U,children:Y.jsx(XP.Provider,{value:V,children:r})})}function dO(e){return e.size}function hO(e){const{value:t,id:r,rootRef:o}=e,c=Jy();if(c===null)throw new Error("No TabContext provided");const{value:d,getTabId:m}=c,l=ko(r),b=A.useRef(null),w=tn(b,o),T=A.useMemo(()=>({id:l,ref:b}),[l]),{id:E}=Ay(t??dO,T),z=E!==d,j=E!==void 0?m(E):void 0;return{hidden:z,getRootProps:(V={})=>W({"aria-labelledby":j??void 0,hidden:z,id:l??void 0},V,{ref:w}),rootRef:w}}const JP={valueChange:"valueChange"};function pO(e,t){if(t.type===JP.valueChange)return W({},e,{highlightedValue:t.value});const r=My(e,t),{context:{selectionFollowsFocus:o}}=t;if(t.type===un.itemsChange){if(r.selectedValues.length>0)return W({},r,{highlightedValue:r.selectedValues[0]});gi(null,"reset",t.context)}return o&&r.highlightedValue!=null?W({},r,{selectedValues:[r.highlightedValue]}):r}function fO(e){var t;const{rootRef:r}=e,{direction:o="ltr",onSelected:c,orientation:d="horizontal",value:m,registerTabIdLookup:l,selectionFollowsFocus:b}=Jy(),{subitems:w,contextValue:T}=Dy(),E=A.useCallback(Ie=>{var ze;return(ze=w.get(Ie))==null?void 0:ze.id},[w]);l(E);const z=A.useMemo(()=>Array.from(w.keys()),[w]),j=A.useCallback(Ie=>{var ze,Le;return Ie==null?null:(ze=(Le=w.get(Ie))==null?void 0:Le.ref.current)!=null?ze:null},[w]),U=o==="rtl";let V;d==="vertical"?V="vertical":V=U?"horizontal-rtl":"horizontal-ltr";const K=A.useCallback((Ie,ze)=>{var Le;c(Ie,(Le=ze[0])!=null?Le:null)},[c]),O=A.useMemo(()=>m===void 0?{}:m!=null?{selectedValues:[m]}:{selectedValues:[]},[m]),L=A.useCallback(Ie=>{var ze,Le;return(ze=(Le=w.get(Ie))==null?void 0:Le.disabled)!=null?ze:!1},[w]),{contextValue:R,dispatch:re,getRootProps:J,state:{highlightedValue:se,selectedValues:ie},rootRef:Z}=c1({controlledProps:O,disabledItemsFocusable:!b,focusManagement:"DOM",getItemDomElement:j,isItemDisabled:L,items:z,rootRef:r,onChange:K,orientation:V,reducerActionContext:A.useMemo(()=>({selectionFollowsFocus:b||!1}),[b]),selectionMode:"single",stateReducer:pO});A.useEffect(()=>{m!==void 0&&m!=null&&re({type:JP.valueChange,value:m})},[re,m]);const ke=(Ie={})=>W({},Ie,J(Ie),{"aria-orientation":d==="vertical"?"vertical":void 0,role:"tablist"});return{contextValue:A.useMemo(()=>W({},T,R),[T,R]),dispatch:re,getRootProps:ke,highlightedValue:se,isRtl:U,orientation:d,rootRef:Z,selectedValue:(t=ie[0])!=null?t:null}}function mO(e){const{value:t,children:r}=e,{dispatch:o,getItemIndex:c,getItemState:d,registerItem:m,totalSubitemCount:l}=t,b=A.useMemo(()=>({dispatch:o,getItemState:d,getItemIndex:c}),[o,c,d]),w=A.useMemo(()=>({getItemIndex:c,registerItem:m,totalSubitemCount:l}),[m,c,l]);return Y.jsx(Gp.Provider,{value:w,children:Y.jsx(Cl.Provider,{value:b,children:r})})}function gO(e){return e.size}function yO(e){const{value:t,rootRef:r,disabled:o=!1,id:c}=e,d=A.useRef(null),m=ko(c),{value:l,selectionFollowsFocus:b,getTabPanelId:w}=Jy(),T=A.useMemo(()=>({disabled:o,ref:d,id:m}),[o,d,m]),{id:E,index:z,totalItemCount:j}=Ay(t??gO,T),{getRootProps:U,highlighted:V,selected:K}=u1({item:E}),{getRootProps:O,rootRef:L,active:R,focusVisible:re,setFocusVisible:J}=ns({disabled:o,focusableWhenDisabled:!b,type:"button"}),se=tn(d,r,L),ie=E!==void 0?w(E):void 0;return{getRootProps:(ke={})=>{const xe=Ei(ke),Ie=Ps(U,O);return W({},ke,Ie(xe),{role:"tab","aria-controls":ie,"aria-selected":K,id:m,ref:se})},active:R,focusVisible:re,highlighted:V,index:z,rootRef:se,selected:K||E===l,setFocusVisible:J,totalTabsCount:j}}function nC(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function lb(e={}){const{ignoreAccents:t=!0,ignoreCase:r=!0,limit:o,matchFrom:c="any",stringify:d,trim:m=!1}=e;return(l,{inputValue:b,getOptionLabel:w})=>{let T=m?b.trim():b;r&&(T=T.toLowerCase()),t&&(T=nC(T));const E=T?l.filter(z=>{let j=(d||w)(z);return r&&(j=j.toLowerCase()),t&&(j=nC(j)),c==="start"?j.indexOf(T)===0:j.indexOf(T)>-1}):l;return typeof o=="number"?E.slice(0,o):E}}function $m(e,t){for(let r=0;r<e.length;r+=1)if(t(e[r]))return r;return-1}const vO=lb(),iC=5,_O=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function xO(e){const{unstable_isActiveElementInListbox:t=_O,unstable_classNamePrefix:r="Mui",autoComplete:o=!1,autoHighlight:c=!1,autoSelect:d=!1,blurOnSelect:m=!1,clearOnBlur:l=!e.freeSolo,clearOnEscape:b=!1,componentName:w="useAutocomplete",defaultValue:T=e.multiple?[]:null,disableClearable:E=!1,disableCloseOnSelect:z=!1,disabled:j,disabledItemsFocusable:U=!1,disableListWrap:V=!1,filterOptions:K=vO,filterSelectedOptions:O=!1,freeSolo:L=!1,getOptionDisabled:R,getOptionKey:re,getOptionLabel:J=Se=>{var _e;return(_e=Se.label)!=null?_e:Se},groupBy:se,handleHomeEndKeys:ie=!e.freeSolo,id:Z,includeInputInList:ke=!1,inputValue:xe,isOptionEqualToValue:Ie=(Se,_e)=>Se===_e,multiple:ze=!1,onChange:Le,onClose:Ye,onHighlightChange:Ge,onInputChange:Te,onOpen:Fe,open:$e,openOnFocus:Oe=!1,options:Qe,readOnly:at=!1,selectOnFocus:ut=!e.freeSolo,value:Pt}=e,wt=ko(Z);let zt=J;zt=Se=>{const _e=J(Se);return typeof _e!="string"?String(_e):_e};const er=A.useRef(!1),lt=A.useRef(!0),qe=A.useRef(null),pt=A.useRef(null),[yt,or]=A.useState(null),[Kt,Mr]=A.useState(-1),lr=c?0:-1,Vt=A.useRef(lr),[Et,ur]=Du({controlled:Pt,default:T,name:w}),[Mt,Er]=Du({controlled:xe,default:"",name:w,state:"inputValue"}),[Ve,Sr]=A.useState(!1),Dr=A.useCallback((Se,_e)=>{if(!(ze?Et.length<_e.length:_e!==null)&&!l)return;let Je;if(ze)Je="";else if(_e==null)Je="";else{const ot=zt(_e);Je=typeof ot=="string"?ot:""}Mt!==Je&&(Er(Je),Te&&Te(Se,Je,"reset"))},[zt,Mt,ze,Te,Er,l,Et]),[qt,rr]=Du({controlled:$e,default:!1,name:w,state:"open"}),[Or,Hr]=A.useState(!0),dr=!ze&&Et!=null&&Mt===zt(Et),cr=qt&&!at,Gt=cr?K(Qe.filter(Se=>!(O&&(ze?Et:[Et]).some(_e=>_e!==null&&Ie(Se,_e)))),{inputValue:dr&&Or?"":Mt,getOptionLabel:zt}):[],sr=jL({filteredOptions:Gt,value:Et,inputValue:Mt});A.useEffect(()=>{const Se=Et!==sr.value;Ve&&!Se||L&&!Se||Dr(null,Et)},[Et,Dr,Ve,sr.value,L]);const Tr=qt&&Gt.length>0&&!at,Be=ll(Se=>{Se===-1?qe.current.focus():yt.querySelector(`[data-tag-index="${Se}"]`).focus()});A.useEffect(()=>{ze&&Kt>Et.length-1&&(Mr(-1),Be(-1))},[Et,ze,Kt,Be]);function xt(Se,_e){if(!pt.current||Se<0||Se>=Gt.length)return-1;let Ke=Se;for(;;){const Je=pt.current.querySelector(`[data-option-index="${Ke}"]`),ot=U?!1:!Je||Je.disabled||Je.getAttribute("aria-disabled")==="true";if(Je&&Je.hasAttribute("tabindex")&&!ot)return Ke;if(_e==="next"?Ke=(Ke+1)%Gt.length:Ke=(Ke-1+Gt.length)%Gt.length,Ke===Se)return-1}}const St=ll(({event:Se,index:_e,reason:Ke="auto"})=>{if(Vt.current=_e,_e===-1?qe.current.removeAttribute("aria-activedescendant"):qe.current.setAttribute("aria-activedescendant",`${wt}-option-${_e}`),Ge&&Ge(Se,_e===-1?null:Gt[_e],Ke),!pt.current)return;const Je=pt.current.querySelector(`[role="option"].${r}-focused`);Je&&(Je.classList.remove(`${r}-focused`),Je.classList.remove(`${r}-focusVisible`));let ot=pt.current;if(pt.current.getAttribute("role")!=="listbox"&&(ot=pt.current.parentElement.querySelector('[role="listbox"]')),!ot)return;if(_e===-1){ot.scrollTop=0;return}const Ft=pt.current.querySelector(`[data-option-index="${_e}"]`);if(Ft&&(Ft.classList.add(`${r}-focused`),Ke==="keyboard"&&Ft.classList.add(`${r}-focusVisible`),ot.scrollHeight>ot.clientHeight&&Ke!=="mouse"&&Ke!=="touch")){const Tt=Ft,Xt=ot.clientHeight+ot.scrollTop,ar=Tt.offsetTop+Tt.offsetHeight;ar>Xt?ot.scrollTop=ar-ot.clientHeight:Tt.offsetTop-Tt.offsetHeight*(se?1.3:0)<ot.scrollTop&&(ot.scrollTop=Tt.offsetTop-Tt.offsetHeight*(se?1.3:0))}}),tr=ll(({event:Se,diff:_e,direction:Ke="next",reason:Je="auto"})=>{if(!cr)return;const Ft=xt((()=>{const Tt=Gt.length-1;if(_e==="reset")return lr;if(_e==="start")return 0;if(_e==="end")return Tt;const Xt=Vt.current+_e;return Xt<0?Xt===-1&&ke?-1:V&&Vt.current!==-1||Math.abs(_e)>1?0:Tt:Xt>Tt?Xt===Tt+1&&ke?-1:V||Math.abs(_e)>1?Tt:0:Xt})(),Ke);if(St({index:Ft,reason:Je,event:Se}),o&&_e!=="reset")if(Ft===-1)qe.current.value=Mt;else{const Tt=zt(Gt[Ft]);qe.current.value=Tt,Tt.toLowerCase().indexOf(Mt.toLowerCase())===0&&Mt.length>0&&qe.current.setSelectionRange(Mt.length,Tt.length)}}),vn=()=>{const Se=(_e,Ke)=>{const Je=_e?zt(_e):"",ot=Ke?zt(Ke):"";return Je===ot};if(Vt.current!==-1&&sr.filteredOptions&&sr.filteredOptions.length!==Gt.length&&sr.inputValue===Mt&&(ze?Et.length===sr.value.length&&sr.value.every((_e,Ke)=>zt(Et[Ke])===zt(_e)):Se(sr.value,Et))){const _e=sr.filteredOptions[Vt.current];if(_e)return $m(Gt,Ke=>zt(Ke)===zt(_e))}return-1},nt=A.useCallback(()=>{if(!cr)return;const Se=vn();if(Se!==-1){Vt.current=Se;return}const _e=ze?Et[0]:Et;if(Gt.length===0||_e==null){tr({diff:"reset"});return}if(pt.current){if(_e!=null){const Ke=Gt[Vt.current];if(ze&&Ke&&$m(Et,ot=>Ie(Ke,ot))!==-1)return;const Je=$m(Gt,ot=>Ie(ot,_e));Je===-1?tr({diff:"reset"}):St({index:Je});return}if(Vt.current>=Gt.length-1){St({index:Gt.length-1});return}St({index:Vt.current})}},[Gt.length,ze?!1:Et,O,tr,St,cr,Mt,ze]),Yt=ll(Se=>{pg(pt,Se),Se&&nt()});A.useEffect(()=>{nt()},[nt]);const Ot=Se=>{qt||(rr(!0),Hr(!0),Fe&&Fe(Se))},hr=(Se,_e)=>{qt&&(rr(!1),Ye&&Ye(Se,_e))},yr=(Se,_e,Ke,Je)=>{if(ze){if(Et.length===_e.length&&Et.every((ot,Ft)=>ot===_e[Ft]))return}else if(Et===_e)return;Le&&Le(Se,_e,Ke,Je),ur(_e)},Lt=A.useRef(!1),Fr=(Se,_e,Ke="selectOption",Je="options")=>{let ot=Ke,Ft=_e;if(ze){Ft=Array.isArray(Et)?Et.slice():[];const Tt=$m(Ft,Xt=>Ie(_e,Xt));Tt===-1?Ft.push(_e):Je!=="freeSolo"&&(Ft.splice(Tt,1),ot="removeOption")}Dr(Se,Ft),yr(Se,Ft,ot,{option:_e}),!z&&(!Se||!Se.ctrlKey&&!Se.metaKey)&&hr(Se,ot),(m===!0||m==="touch"&&Lt.current||m==="mouse"&&!Lt.current)&&qe.current.blur()};function he(Se,_e){if(Se===-1)return-1;let Ke=Se;for(;;){if(_e==="next"&&Ke===Et.length||_e==="previous"&&Ke===-1)return-1;const Je=yt.querySelector(`[data-tag-index="${Ke}"]`);if(!Je||!Je.hasAttribute("tabindex")||Je.disabled||Je.getAttribute("aria-disabled")==="true")Ke+=_e==="next"?1:-1;else return Ke}}const H=(Se,_e)=>{if(!ze)return;Mt===""&&hr(Se,"toggleInput");let Ke=Kt;Kt===-1?Mt===""&&_e==="previous"&&(Ke=Et.length-1):(Ke+=_e==="next"?1:-1,Ke<0&&(Ke=0),Ke===Et.length&&(Ke=-1)),Ke=he(Ke,_e),Mr(Ke),Be(Ke)},G=Se=>{er.current=!0,Er(""),Te&&Te(Se,"","clear"),yr(Se,ze?[]:null,"clear")},te=Se=>_e=>{if(Se.onKeyDown&&Se.onKeyDown(_e),!_e.defaultMuiPrevented&&(Kt!==-1&&["ArrowLeft","ArrowRight"].indexOf(_e.key)===-1&&(Mr(-1),Be(-1)),_e.which!==229))switch(_e.key){case"Home":cr&&ie&&(_e.preventDefault(),tr({diff:"start",direction:"next",reason:"keyboard",event:_e}));break;case"End":cr&&ie&&(_e.preventDefault(),tr({diff:"end",direction:"previous",reason:"keyboard",event:_e}));break;case"PageUp":_e.preventDefault(),tr({diff:-iC,direction:"previous",reason:"keyboard",event:_e}),Ot(_e);break;case"PageDown":_e.preventDefault(),tr({diff:iC,direction:"next",reason:"keyboard",event:_e}),Ot(_e);break;case"ArrowDown":_e.preventDefault(),tr({diff:1,direction:"next",reason:"keyboard",event:_e}),Ot(_e);break;case"ArrowUp":_e.preventDefault(),tr({diff:-1,direction:"previous",reason:"keyboard",event:_e}),Ot(_e);break;case"ArrowLeft":H(_e,"previous");break;case"ArrowRight":H(_e,"next");break;case"Enter":if(Vt.current!==-1&&cr){const Ke=Gt[Vt.current],Je=R?R(Ke):!1;if(_e.preventDefault(),Je)return;Fr(_e,Ke,"selectOption"),o&&qe.current.setSelectionRange(qe.current.value.length,qe.current.value.length)}else L&&Mt!==""&&dr===!1&&(ze&&_e.preventDefault(),Fr(_e,Mt,"createOption","freeSolo"));break;case"Escape":cr?(_e.preventDefault(),_e.stopPropagation(),hr(_e,"escape")):b&&(Mt!==""||ze&&Et.length>0)&&(_e.preventDefault(),_e.stopPropagation(),G(_e));break;case"Backspace":if(ze&&!at&&Mt===""&&Et.length>0){const Ke=Kt===-1?Et.length-1:Kt,Je=Et.slice();Je.splice(Ke,1),yr(_e,Je,"removeOption",{option:Et[Ke]})}break;case"Delete":if(ze&&!at&&Mt===""&&Et.length>0&&Kt!==-1){const Ke=Kt,Je=Et.slice();Je.splice(Ke,1),yr(_e,Je,"removeOption",{option:Et[Ke]})}break}},de=Se=>{Sr(!0),Oe&&!er.current&&Ot(Se)},fe=Se=>{if(t(pt)){qe.current.focus();return}Sr(!1),lt.current=!0,er.current=!1,d&&Vt.current!==-1&&cr?Fr(Se,Gt[Vt.current],"blur"):d&&L&&Mt!==""?Fr(Se,Mt,"blur","freeSolo"):l&&Dr(Se,Et),hr(Se,"blur")},Me=Se=>{const _e=Se.target.value;Mt!==_e&&(Er(_e),Hr(!1),Te&&Te(Se,_e,"input")),_e===""?!E&&!ze&&yr(Se,null,"clear"):Ot(Se)},be=Se=>{const _e=Number(Se.currentTarget.getAttribute("data-option-index"));Vt.current!==_e&&St({event:Se,index:_e,reason:"mouse"})},ye=Se=>{St({event:Se,index:Number(Se.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Lt.current=!0},Ee=Se=>{const _e=Number(Se.currentTarget.getAttribute("data-option-index"));Fr(Se,Gt[_e],"selectOption"),Lt.current=!1},Xe=Se=>_e=>{const Ke=Et.slice();Ke.splice(Se,1),yr(_e,Ke,"removeOption",{option:Et[Se]})},ne=Se=>{qt?hr(Se,"toggleInput"):Ot(Se)},oe=Se=>{Se.currentTarget.contains(Se.target)&&Se.target.getAttribute("id")!==wt&&Se.preventDefault()},Ce=Se=>{Se.currentTarget.contains(Se.target)&&(qe.current.focus(),ut&&lt.current&&qe.current.selectionEnd-qe.current.selectionStart===0&&qe.current.select(),lt.current=!1)},je=Se=>{!j&&(Mt===""||!qt)&&ne(Se)};let Ze=L&&Mt.length>0;Ze=Ze||(ze?Et.length>0:Et!==null);let et=Gt;return se&&(et=Gt.reduce((Se,_e,Ke)=>{const Je=se(_e);return Se.length>0&&Se[Se.length-1].group===Je?Se[Se.length-1].options.push(_e):Se.push({key:Ke,index:Ke,group:Je,options:[_e]}),Se},[])),j&&Ve&&fe(),{getRootProps:(Se={})=>W({"aria-owns":Tr?`${wt}-listbox`:null},Se,{onKeyDown:te(Se),onMouseDown:oe,onClick:Ce}),getInputLabelProps:()=>({id:`${wt}-label`,htmlFor:wt}),getInputProps:()=>({id:wt,value:Mt,onBlur:fe,onFocus:de,onChange:Me,onMouseDown:je,"aria-activedescendant":cr?"":null,"aria-autocomplete":o?"both":"list","aria-controls":Tr?`${wt}-listbox`:void 0,"aria-expanded":Tr,autoComplete:"off",ref:qe,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:j}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:G}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:ne}),getTagProps:({index:Se})=>W({key:Se,"data-tag-index":Se,tabIndex:-1},!at&&{onDelete:Xe(Se)}),getListboxProps:()=>({role:"listbox",id:`${wt}-listbox`,"aria-labelledby":`${wt}-label`,ref:Yt,onMouseDown:Se=>{Se.preventDefault()}}),getOptionProps:({index:Se,option:_e})=>{var Ke;const Je=(ze?Et:[Et]).some(Ft=>Ft!=null&&Ie(_e,Ft)),ot=R?R(_e):!1;return{key:(Ke=re==null?void 0:re(_e))!=null?Ke:zt(_e),tabIndex:-1,role:"option",id:`${wt}-option-${Se}`,onMouseMove:be,onClick:Ee,onTouchStart:ye,"data-option-index":Se,"aria-disabled":ot,"aria-selected":Je}},id:wt,inputValue:Mt,value:Et,dirty:Ze,expanded:cr&&yt,popupOpen:cr,focused:Ve||Kt!==-1,anchorEl:yt,setAnchorEl:or,focusedTag:Kt,groupedOptions:et}}const bO=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],wO=["component","slots","slotProps"],SO=["component"];function At(e,t){const{className:r,elementType:o,ownerState:c,externalForwardedProps:d,getSlotOwnerState:m,internalForwardedProps:l}=t,b=Wt(t,bO),{component:w,slots:T={[e]:void 0},slotProps:E={[e]:void 0}}=d,z=Wt(d,wO),j=T[e]||o,U=DI(E[e],c),V=AI(W({className:r},b,{externalForwardedProps:e==="root"?z:void 0,externalSlotProps:U})),{props:{component:K},internalRef:O}=V,L=Wt(V.props,SO),R=tn(O,U==null?void 0:U.ref,t.ref),re=m?m(L):{},J=W({},c,re),se=e==="root"?K||w:K,ie=MI(j,W({},e==="root"&&!w&&!T[e]&&l,e!=="root"&&!T[e]&&l,L,se&&{as:se},{ref:R}),J);return Object.keys(re).forEach(Z=>{delete ie[Z]}),[j,ie]}function CO(e){return Vr("MuiListItem",e)}const Ng=Lr("MuiListItem",["root","startAction","endAction","nested","nesting","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]),jg=A.createContext(!1),hd=A.createContext(!1),YP=A.createContext(!1),cb=A.createContext(void 0),QP=A.createContext(void 0),Yy=A.createContext(void 0),kO=["component","className","children","nested","sticky","variant","color","startAction","endAction","role","slots","slotProps"],IO=e=>{const{sticky:t,nested:r,nesting:o,variant:c,color:d}=e,m={root:["root",r&&"nested",o&&"nesting",t&&"sticky",d&&`color${bt(d)}`,c&&`variant${bt(c)}`],startAction:["startAction"],endAction:["endAction"]};return Rr(m,CO,{})},TO=ht("li")(({theme:e,ownerState:t})=>{var r;return[!t.nested&&{"--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItemButton-marginBlock":"calc(-1 * var(--ListItem-paddingY))",alignItems:"center",gap:"var(--ListItem-gap)",marginInline:"var(--ListItem-marginInline)"},t.nested&&{"--NestedList-marginRight":"calc(-1 * var(--ListItem-paddingRight))","--NestedList-marginLeft":"calc(-1 * var(--ListItem-paddingLeft))","--NestedListItem-paddingLeft":"calc(var(--ListItem-paddingLeft) + var(--List-nestedInsetStart))","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItem-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))",flexDirection:"column"},W({"--unstable_actionRadius":"calc(var(--ListItem-radius) - var(--variant-borderWidth, 0px))"},t.startAction&&{"--unstable_startActionWidth":"2rem"},t.endAction&&{"--unstable_endActionWidth":"2.5rem"},{boxSizing:"border-box",borderRadius:"var(--ListItem-radius)",display:"var(--_ListItem-display)","&:not([hidden])":{"--_ListItem-display":"var(--_List-markerDisplay, flex)"},flex:"none",listStyleType:"var(--_List-markerType, disc)",position:"relative",paddingBlockStart:t.nested?0:"var(--ListItem-paddingY)",paddingBlockEnd:t.nested?0:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)"},t["data-first-child"]===void 0&&W({},t.row?{marginInlineStart:"var(--List-gap)"}:{marginBlockStart:"var(--List-gap)"}),t.row&&t.wrap&&{marginInlineStart:"var(--List-gap)",marginBlockStart:"var(--List-gap)"},{minBlockSize:"var(--ListItem-minHeight)"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:`var(--ListItem-stickyBackground, ${e.vars.palette.background.body})`},{[`.${Ng.nested} > &`]:{"--_ListItem-display":"flex"}}),(r=e.variants[t.variant])==null?void 0:r[t.color]]}),PO=ht(TO,{name:"JoyListItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),EO=ht("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",left:0,transform:"translate(var(--ListItem-startActionTranslateX), -50%)",zIndex:1})),zO=ht("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",right:0,transform:"translate(var(--ListItem-endActionTranslateX), -50%)"})),Sl=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyListItem"}),c=A.useContext(Yy),d=A.useContext(cb),m=A.useContext(hd),l=A.useContext(YP),b=A.useContext(jg),{component:w,className:T,children:E,nested:z=!1,sticky:j=!1,variant:U="plain",color:V="neutral",startAction:K,endAction:O,role:L,slots:R={},slotProps:re={}}=o,J=Wt(o,kO),[se,ie]=A.useState(""),[Z,ke]=(d==null?void 0:d.split(":"))||["",""],xe=w||(Z&&!Z.match(/^(ul|ol|menu)$/)?"div":void 0);let Ie=c==="menu"?"none":void 0;d&&(Ie={menu:"none",menubar:"none",group:"presentation"}[ke]),L&&(Ie=L);const ze=W({},o,{sticky:j,startAction:K,endAction:O,row:m,wrap:l,variant:U,color:V,nesting:b,nested:z,component:xe,role:Ie}),Le=IO(ze),Ye=W({},J,{component:xe,slots:R,slotProps:re}),[Ge,Te]=At("root",{additionalProps:{role:Ie},ref:r,className:oi(Le.root,T),elementType:PO,externalForwardedProps:Ye,ownerState:ze}),[Fe,$e]=At("startAction",{className:Le.startAction,elementType:EO,externalForwardedProps:Ye,ownerState:ze}),[Oe,Qe]=At("endAction",{className:Le.endAction,elementType:zO,externalForwardedProps:Ye,ownerState:ze});return Y.jsx(QP.Provider,{value:ie,children:Y.jsx(jg.Provider,{value:z?se||!0:!1,children:Y.jsxs(Ge,W({},Te,{children:[K&&Y.jsx(Fe,W({},$e,{children:K})),A.Children.map(E,(at,ut)=>A.isValidElement(at)?A.cloneElement(at,W({},ut===0&&{"data-first-child":""},e1(at,["ListItem"])&&{component:at.props.component||"div"})):at),O&&Y.jsx(Oe,W({},Qe,{children:O}))]}))})})});Sl.muiName="ListItem";const Qy={"--NestedList-marginRight":"0px","--NestedList-marginLeft":"0px","--NestedListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px"};function Qp(e){const{children:t,nested:r,row:o=!1,wrap:c=!1}=e,d=Y.jsx(hd.Provider,{value:o,children:Y.jsx(YP.Provider,{value:c,children:A.Children.map(t,(m,l)=>A.isValidElement(m)?A.cloneElement(m,W({},l===0&&{"data-first-child":""},l===A.Children.count(t)-1&&{"data-last-child":""})):m)})});return r===void 0?d:Y.jsx(jg.Provider,{value:r,children:d})}const pd=({theme:e,ownerState:t},r)=>{let o={};function c(d){if(typeof d=="function"){const m=d(e);c(m)}else Array.isArray(d)?d.forEach(m=>{typeof m!="boolean"&&c(m)}):typeof d=="object"&&(o=W({},o,d))}return t.sx&&(c(t.sx),r.forEach(d=>{const m=o[d];if(typeof m=="string"||typeof m=="number")if(d==="borderRadius")if(typeof m=="number")o[d]=`${m}px`;else{var l;o[d]=((l=e.vars)==null?void 0:l.radius[m])||m}else["p","padding","m","margin"].indexOf(d)!==-1&&typeof m=="number"?o[d]=e.spacing(m):o[d]=m;else typeof m=="function"?o[d]=m(e):o[d]=void 0})),o};function MO(e){return Vr("MuiList",e)}const DO=Lr("MuiList",["root","nesting","scoped","sizeSm","sizeMd","sizeLg","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","horizontal","vertical"]),AO=A.createContext(void 0),RO=["component","className","children","size","orientation","wrap","variant","color","role","slots","slotProps"],LO=e=>{const{variant:t,color:r,size:o,nesting:c,orientation:d,instanceSize:m}=e,l={root:["root",d,t&&`variant${bt(t)}`,r&&`color${bt(r)}`,!m&&!c&&o&&`size${bt(o)}`,m&&`size${bt(m)}`,c&&"nesting"]};return Rr(l,MO,{})},ef=ht("ul")(({theme:e,ownerState:t})=>{var r;const{p:o,padding:c,borderRadius:d}=pd({theme:e,ownerState:t},["p","padding","borderRadius"]);function m(l){return l==="sm"?{"--ListDivider-gap":"0.25rem","--ListItem-minHeight":"2rem","--ListItem-paddingY":"3px","--ListItem-paddingX":t.marker?"3px":"0.5rem","--ListItem-gap":"0.5rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.5rem":"2rem","--Icon-fontSize":e.vars.fontSize.lg}:l==="md"?{"--ListDivider-gap":"0.375rem","--ListItem-minHeight":"2.25rem","--ListItem-paddingY":"0.25rem","--ListItem-paddingX":t.marker?"0.25rem":"0.75rem","--ListItem-gap":"0.625rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.75rem":"2.5rem","--Icon-fontSize":e.vars.fontSize.xl}:l==="lg"?{"--ListDivider-gap":"0.5rem","--ListItem-minHeight":"2.75rem","--ListItem-paddingY":"0.375rem","--ListItem-paddingX":t.marker?"0.5rem":"1rem","--ListItem-gap":"0.75rem","--ListItemDecorator-size":t.orientation==="horizontal"?"2.25rem":"3rem","--Icon-fontSize":e.vars.fontSize.xl2}:{}}return[t.nesting&&W({},m(t.instanceSize),{"--ListItem-paddingRight":"var(--ListItem-paddingX)","--ListItem-paddingLeft":"var(--NestedListItem-paddingLeft)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px",padding:0},t.marker&&{paddingInlineStart:"calc(3ch - var(--_List-markerDeduct, 0px))"},{marginInlineStart:"var(--NestedList-marginLeft)",marginInlineEnd:"var(--NestedList-marginRight)",marginBlockStart:"var(--List-gap)",marginBlockEnd:"initial"}),!t.nesting&&W({},m(t.size),{"--List-gap":"0px","--List-nestedInsetStart":"0px","--ListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItem-paddingRight":"var(--ListItem-paddingX)"},t.marker&&{"--_List-markerDeduct":"1ch"},{"--unstable_List-childRadius":"calc(max(var(--List-radius) - var(--List-padding), min(var(--List-padding) / 2, var(--List-radius) / 2)) - var(--variant-borderWidth, 0px))","--ListItem-radius":"var(--unstable_List-childRadius)","--ListItem-startActionTranslateX":"calc(0.5 * var(--ListItem-paddingLeft))","--ListItem-endActionTranslateX":"calc(-0.5 * var(--ListItem-paddingRight))",margin:"initial"},e.typography[`body-${t.size}`],t.orientation==="horizontal"?W({},t.wrap?{padding:"var(--List-padding)",marginInlineStart:"calc(-1 * var(--List-gap))",marginBlockStart:"calc(-1 * var(--List-gap))"}:{paddingInline:"var(--List-padding, var(--ListDivider-gap))",paddingBlock:"var(--List-padding)"}):{paddingBlock:"var(--List-padding, var(--ListDivider-gap))",paddingInline:"var(--List-padding)"},t.marker&&{paddingInlineStart:"3ch"}),W({boxSizing:"border-box",borderRadius:"var(--List-radius)",listStyle:"none",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},t.wrap&&{flexWrap:"wrap"},t.marker&&{"--_List-markerDisplay":"list-item","--_List-markerType":t.marker,lineHeight:"calc(var(--ListItem-minHeight) - 2 * var(--ListItem-paddingY))"},{flexGrow:1,position:"relative"},(r=e.variants[t.variant])==null?void 0:r[t.color],{"--unstable_List-borderWidth":"var(--variant-borderWidth, 0px)"},d!==void 0&&{"--List-radius":d},o!==void 0&&{"--List-padding":o},c!==void 0&&{"--List-padding":c})]}),$O=ht(ef,{name:"JoyList",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Qu=A.forwardRef(function(t,r){var o;const c=A.useContext(jg),d=A.useContext(Yy),m=A.useContext(AO),l=Ur({props:t,name:"JoyList"}),{component:b,className:w,children:T,size:E,orientation:z="vertical",wrap:j=!1,variant:U="plain",color:V="neutral",role:K,slots:O={},slotProps:L={}}=l,R=Wt(l,RO),re=E||((o=t.size)!=null?o:"md");let J;d&&(J="group"),m&&(J="presentation"),K&&(J=K);const se=W({},l,{instanceSize:t.size,size:re,nesting:c,orientation:z,wrap:j,variant:U,color:V,role:J}),ie=LO(se),Z=W({},R,{component:b,slots:O,slotProps:L}),[ke,xe]=At("root",{ref:r,className:oi(ie.root,w),elementType:$O,externalForwardedProps:Z,ownerState:se,additionalProps:{as:b,role:J,"aria-labelledby":typeof c=="string"?c:void 0}});return Y.jsx(ke,W({},xe,{children:Y.jsx(cb.Provider,{value:`${typeof b=="string"?b:""}:${J||""}`,children:Y.jsx(Qp,{row:z==="horizontal",wrap:j,children:T})})}))}),ng=Lr("MuiListItemButton",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","variantPlain","variantSoft","variantOutlined","variantSolid"]),ub=A.createContext("horizontal"),tf=ht("div")(({theme:e,ownerState:t})=>{var r,o,c,d,m,l;return W({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",font:"inherit",display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"stretch",gap:"var(--ListItem-gap)"},t.orientation==="vertical"&&{flexDirection:"column",justifyContent:"center"},{textAlign:"initial",textDecoration:"initial",backgroundColor:"initial",cursor:"pointer",marginInline:"var(--ListItemButton-marginInline)",marginBlock:"var(--ListItemButton-marginBlock)"},t["data-first-child"]===void 0&&{marginInlineStart:t.row?"var(--List-gap)":void 0,marginBlockStart:t.row?void 0:"var(--List-gap)"},{paddingBlock:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px))",paddingInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItem-startActionWidth, var(--unstable_startActionWidth, 0px)))",paddingInlineEnd:"calc(var(--ListItem-paddingRight) + var(--ListItem-endActionWidth, var(--unstable_endActionWidth, 0px)))",minBlockSize:"var(--ListItem-minHeight)",border:"1px solid transparent",borderRadius:"var(--ListItem-radius)",flex:"var(--unstable_ListItem-flex, none)",fontSize:"inherit",lineHeight:"inherit",minInlineSize:0,[e.focus.selector]:W({},e.focus.default,{zIndex:1})},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:active":(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color],[`.${Ng.root} > &`]:{"--unstable_ListItem-flex":"1 0 0%"},[`&.${ng.selected}`]:W({},(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color],{"--Icon-color":"currentColor"}),[`&:not(.${ng.selected}, [aria-selected="true"])`]:{"&:hover":(d=e.variants[`${t.variant}Hover`])==null?void 0:d[t.color],"&:active":(m=e.variants[`${t.variant}Active`])==null?void 0:m[t.color]},[`&.${ng.disabled}`]:W({},(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color])})});ht(tf,{name:"JoyListItemButton",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>W({},!e.row&&{[`&.${ng.selected}`]:{fontWeight:t.vars.fontWeight.md}}));function BO(e){return Vr("MuiSvgIcon",e)}Lr("MuiSvgIcon",["root","colorInherit","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","fontSizeInherit","fontSizeXs","fontSizeSm","fontSizeMd","fontSizeLg","fontSizeXl","fontSizeXl2","fontSizeXl3","fontSizeXl4","sizeSm","sizeMd","sizeLg"]);const OO=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox","size","slots","slotProps"],FO=e=>{const{color:t,size:r,fontSize:o}=e,c={root:["root",t&&t!=="inherit"&&`color${bt(t)}`,r&&`size${bt(r)}`,o&&`fontSize${bt(o)}`]};return Rr(c,BO,{})},oC={sm:"xl",md:"xl2",lg:"xl3"},NO=ht("svg",{name:"JoySvgIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return W({},t.instanceSize&&{"--Icon-fontSize":e.vars.fontSize[oC[t.instanceSize]]},t.instanceFontSize&&t.instanceFontSize!=="inherit"&&{"--Icon-fontSize":e.vars.fontSize[t.instanceFontSize]},{userSelect:"none",margin:"var(--Icon-margin)",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,fontSize:`var(--Icon-fontSize, ${e.vars.fontSize[oC[t.size]]||"unset"})`},t.fontSize&&t.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${e.fontSize[t.fontSize]})`},!t.htmlColor&&W({color:`var(--Icon-color, ${e.vars.palette.text.icon})`},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&e.vars.palette[t.color]&&{color:`rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1)`}))}),aC=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoySvgIcon"}),{children:c,className:d,color:m,component:l="svg",fontSize:b,htmlColor:w,inheritViewBox:T=!1,titleAccess:E,viewBox:z="0 0 24 24",size:j="md",slots:U={},slotProps:V={}}=o,K=Wt(o,OO),O=A.isValidElement(c)&&c.type==="svg",L=W({},o,{color:m,component:l,size:j,instanceSize:t.size,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:z,hasSvgAsChild:O}),R=FO(L),re=W({},K,{component:l,slots:U,slotProps:V}),[J,se]=At("root",{ref:r,className:oi(R.root,d),elementType:NO,externalForwardedProps:re,ownerState:L,additionalProps:W({color:w,focusable:!1},E&&{role:"img"},!E&&{"aria-hidden":!0},!T&&{viewBox:z},O&&c.props)});return Y.jsxs(J,W({},se,{children:[O?c.props.children:c,E?Y.jsx("title",{children:E}):null]}))});function fd(e,t){function r(o,c){return Y.jsx(aC,W({"data-testid":`${t}Icon`,ref:c},o,{children:e}))}return r.muiName=aC.muiName,A.memo(A.forwardRef(r))}const db=e=>t=>`--${e?`${e}-`:""}${t.replace(/^--/,"")}`,ed="data-skip-inverted-colors",eE=`& :not([${ed}], [${ed}] *)`,tE=e=>{var t,r,o,c,d,m,l,b,w,T,E,z,j,U,V,K,O,L,R,re,J,se;const ie=db(e.cssVarPrefix);return{"--variant-plainColor":"var(--variant-plainColor) !important","--variant-plainHoverColor":"var(--variant-plainHoverColor) !important","--variant-plainHoverBg":"var(--variant-plainHoverBg) !important","--variant-plainActiveBg":"var(--variant-plainActiveBg) !important","--variant-plainDisabledColor":"var(--variant-plainDisabledColor) !important","--variant-outlinedColor":"var(--variant-outlinedColor) !important","--variant-outlinedBorder":"var(--variant-outlinedBorder) !important","--variant-outlinedHoverColor":"var(--variant-outlinedHoverColor) !important","--variant-outlinedHoverBorder":"var(--variant-outlinedHoverBorder) !important","--variant-outlinedHoverBg":"var(--variant-outlinedHoverBg) !important","--variant-outlinedActiveBg":"var(--variant-outlinedActiveBg) !important","--variant-outlinedDisabledColor":"var(--variant-outlinedDisabledColor) !important","--variant-outlinedDisabledBorder":"var(--variant-outlinedDisabledBorder) !important","--variant-softColor":"var(--variant-softColor) !important","--variant-softHoverColor":"var(--variant-softHoverColor) !important","--variant-softBg":"var(--variant-softBg) !important","--variant-softHoverBg":"var(--variant-softHoverBg) !important","--variant-softActiveBg":"var(--variant-softActiveBg) !important","--variant-softActiveColor":"var(--variant-softActiveColor) !important","--variant-softDisabledColor":"var(--variant-softDisabledColor) !important","--variant-softDisabledBg":"var(--variant-softDisabledBg) !important","--variant-solidColor":"var(--variant-solidColor) !important","--variant-solidBg":"var(--variant-solidBg) !important","--variant-solidHoverBg":"var(--variant-solidHoverBg) !important","--variant-solidActiveBg":"var(--variant-solidActiveBg) !important","--variant-solidDisabledColor":"var(--variant-solidDisabledColor) !important","--variant-solidDisabledBg":"var(--variant-solidDisabledBg) !important","--Badge-ringColor":"var(--Badge-ringColor) !important",colorScheme:"unset",[e.getColorSchemeSelector("light")]:{[ie("--palette-focusVisible")]:`${(t=e.colorSchemes.light)==null?void 0:t.palette.focusVisible} !important`,[ie("--palette-background-body")]:`${(r=e.colorSchemes.light)==null?void 0:r.palette.background.body} !important`,[ie("--palette-background-surface")]:`${(o=e.colorSchemes.light)==null?void 0:o.palette.background.surface} !important`,[ie("--palette-background-popup")]:`${(c=e.colorSchemes.light)==null?void 0:c.palette.background.popup} !important`,[ie("--palette-background-level1")]:`${(d=e.colorSchemes.light)==null?void 0:d.palette.background.level1} !important`,[ie("--palette-background-level2")]:`${(m=e.colorSchemes.light)==null?void 0:m.palette.background.level2} !important`,[ie("--palette-background-level3")]:`${(l=e.colorSchemes.light)==null?void 0:l.palette.background.level3} !important`,[ie("--palette-text-primary")]:`${(b=e.colorSchemes.light)==null?void 0:b.palette.text.primary} !important`,[ie("--palette-text-secondary")]:`${(w=e.colorSchemes.light)==null?void 0:w.palette.text.secondary} !important`,[ie("--palette-text-tertiary")]:`${(T=e.colorSchemes.light)==null?void 0:T.palette.text.tertiary} !important`,[ie("--palette-divider")]:`${(E=e.colorSchemes.light)==null?void 0:E.palette.divider} !important`},[e.getColorSchemeSelector("dark")]:{[ie("--palette-focusVisible")]:`${(z=e.colorSchemes.dark)==null?void 0:z.palette.focusVisible} !important`,[ie("--palette-background-body")]:`${(j=e.colorSchemes.dark)==null?void 0:j.palette.background.body} !important`,[ie("--palette-background-surface")]:`${(U=e.colorSchemes.dark)==null?void 0:U.palette.background.surface} !important`,[ie("--palette-background-popup")]:`${(V=e.colorSchemes.dark)==null?void 0:V.palette.background.popup} !important`,[ie("--palette-background-level1")]:`${(K=e.colorSchemes.dark)==null?void 0:K.palette.background.level1} !important`,[ie("--palette-background-level2")]:`${(O=e.colorSchemes.dark)==null?void 0:O.palette.background.level2} !important`,[ie("--palette-background-level3")]:`${(L=e.colorSchemes.dark)==null?void 0:L.palette.background.level3} !important`,[ie("--palette-text-primary")]:`${(R=e.colorSchemes.dark)==null?void 0:R.palette.text.primary} !important`,[ie("--palette-text-secondary")]:`${(re=e.colorSchemes.dark)==null?void 0:re.palette.text.secondary} !important`,[ie("--palette-text-tertiary")]:`${(J=e.colorSchemes.dark)==null?void 0:J.palette.text.tertiary} !important`,[ie("--palette-divider")]:`${(se=e.colorSchemes.dark)==null?void 0:se.palette.divider} !important`}}};function jO(e){return e.theme!==void 0}const ev=e=>t=>{const r=jO(t)?t.theme:t,o=a1(r.cssVarPrefix),c=db(r.cssVarPrefix),d=m=>{const l=m.split("-");return o(m,r.palette[l[1]][l[2]])};return{[eE]:{"--Badge-ringColor":d(`palette-${e}-solidBg`),"--Icon-color":"currentColor",[`${r.getColorSchemeSelector("light")}, ${r.getColorSchemeSelector("dark")}`]:{colorScheme:"dark",[c("--palette-focusVisible")]:d(`palette-${e}-200`),[c("--palette-background-body")]:"rgba(0 0 0 / 0.1)",[c("--palette-background-surface")]:"rgba(0 0 0 / 0.06)",[c("--palette-background-popup")]:d(`palette-${e}-700`),[c("--palette-background-level1")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.36)`,[c("--palette-background-level3")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.6)`,[c("--palette-text-primary")]:d("palette-common-white"),[c("--palette-text-secondary")]:d(`palette-${e}-200`),[c("--palette-text-tertiary")]:d(`palette-${e}-300`),[c("--palette-text-icon")]:d(`palette-${e}-200`),[c("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainColor":d(`palette-${e}-50`),"--variant-plainHoverColor":"#fff","--variant-plainHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedColor":d(`palette-${e}-50`),"--variant-outlinedBorder":`rgba(${d(`palette-${e}-lightChannel`)} / 0.5)`,"--variant-outlinedHoverColor":"#fff","--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":"rgba(255 255 255 / 0.2)","--variant-softColor":d("palette-common-white"),"--variant-softHoverColor":d("palette-common-white"),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.24)`,"--variant-softHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.36)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.16)`,"--variant-softActiveColor":"#fff","--variant-softDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`,"--variant-solidColor":d(`palette-${e}-${e==="neutral"?"600":"500"}`),"--variant-solidBg":d("palette-common-white"),"--variant-solidHoverBg":d("palette-common-white"),"--variant-solidActiveBg":d(`palette-${e}-100`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`}},[`&, & [${ed}]`]:tE(r)}},tv=e=>t=>{const{theme:r=t}=t,o=a1(r.cssVarPrefix),c=db(r.cssVarPrefix),d=m=>{const l=m.split("-");return o(m,r.palette[l[1]][l[2]])};return{[eE]:{"--Badge-ringColor":d(`palette-${e}-softBg`),"--Icon-color":"currentColor",[r.getColorSchemeSelector("dark")]:{[c("--palette-focusVisible")]:d(`palette-${e}-300`),[c("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[c("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[c("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,[c("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,[c("--palette-text-primary")]:d(`palette-${e}-100`),[c("--palette-text-secondary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,[c("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[c("--palette-text-icon")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[c("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.2)`,"--variant-plainColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-plainHoverColor":d(`palette-${e}-50`),"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-outlinedHoverColor":d(`palette-${e}-50`),"--variant-outlinedBg":"initial","--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverBorder":d(`palette-${e}-600`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,"--variant-softColor":d(`palette-${e}-200`),"--variant-softBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-softHoverColor":"#fff","--variant-softHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-solidColor":"#fff","--variant-solidBg":d(`palette-${e}-500`),"--variant-solidHoverColor":"#fff","--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`},[r.getColorSchemeSelector("light")]:{[c("--palette-focusVisible")]:d(`palette-${e}-500`),[c("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[c("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[c("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,[c("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,[c("--palette-text-primary")]:d(`palette-${e}-700`),[c("--palette-text-secondary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,[c("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.68)`,[c("--palette-text-icon")]:d(`palette-${e}-500`),[c("--palette-divider")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainColor":`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,"--variant-plainHoverColor":`rgba(${d(`palette-${e}-darkChannel`)} / 1)`,"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-mainChannel`)} / 1)`,"--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverColor":d(`palette-${e}-600`),"--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-softColor":d(`palette-${e}-600`),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.8)`,"--variant-softHoverColor":d(`palette-${e}-700`),"--variant-softHoverBg":d(`palette-${e}-200`),"--variant-softActiveBg":d(`palette-${e}-300`),"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,"--variant-solidColor":d("palette-common-white"),"--variant-solidBg":d(`palette-${e}-${e==="neutral"?"700":"500"}`),"--variant-solidHoverColor":d("palette-common-white"),"--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`}},[`&, & [${ed}]`]:tE(r)}},rE=fd(Y.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),VO=fd(Y.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),nE=A.createContext(void 0);function tc(e,t){let r=t,o=e;return e==="outlined"&&(r="neutral",o="plain"),e==="plain"&&(r="neutral"),{variant:o,color:r}}function rv(e,t,r=!1){const o=A.useContext(nE),[c,d]=typeof o=="string"?o.split(":"):[],m=tc(c||void 0,d||void 0);return m.variant=e||m.variant,m.color=t||(r?d:m.color),m}function nv({children:e,color:t,variant:r}){return Y.jsx(nE.Provider,{value:`${r||""}:${t||""}`,children:e})}function UO(e){return Vr("MuiIconButton",e)}Lr("MuiIconButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","loading","loadingIndicator"]);const hb=A.createContext({}),iE=A.createContext(void 0);function HO(e){return Vr("MuiCircularProgress",e)}Lr("MuiCircularProgress",["root","determinate","svg","track","progress","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);let WO=e=>e,sC;const GO=["color","backgroundColor"],qO=["children","className","color","size","variant","thickness","determinate","value","component","slots","slotProps"],ZO=oI({"0%":{transform:"rotate(-90deg)"},"100%":{transform:"rotate(270deg)"}}),KO=e=>{const{determinate:t,color:r,variant:o,size:c}=e,d={root:["root",t&&"determinate",r&&`color${bt(r)}`,o&&`variant${bt(o)}`,c&&`size${bt(c)}`],svg:["svg"],track:["track"],progress:["progress"]};return Rr(d,HO,{})};function lu(e,t){return`var(--CircularProgress-${e}Thickness, var(--CircularProgress-thickness, ${t}))`}const XO=ht("span",{name:"JoyCircularProgress",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,c,d;const m=((r=t.variants[e.variant])==null?void 0:r[e.color])||{},{color:l,backgroundColor:b}=m,w=Wt(m,GO);return W({"--Icon-fontSize":"calc(0.4 * var(--_root-size))","--CircularProgress-trackColor":b,"--CircularProgress-progressColor":l,"--CircularProgress-percent":e.value,"--CircularProgress-linecap":"round"},e.size==="sm"&&{"--_root-size":"var(--CircularProgress-size, 24px)","--_track-thickness":lu("track","3px"),"--_progress-thickness":lu("progress","3px")},e.instanceSize==="sm"&&{"--CircularProgress-size":"24px"},e.size==="md"&&{"--_track-thickness":lu("track","6px"),"--_progress-thickness":lu("progress","6px"),"--_root-size":"var(--CircularProgress-size, 40px)"},e.instanceSize==="md"&&{"--CircularProgress-size":"40px"},e.size==="lg"&&{"--_track-thickness":lu("track","8px"),"--_progress-thickness":lu("progress","8px"),"--_root-size":"var(--CircularProgress-size, 64px)"},e.instanceSize==="lg"&&{"--CircularProgress-size":"64px"},e.thickness&&{"--_track-thickness":`${e.thickness}px`,"--_progress-thickness":`${e.thickness}px`},{"--_thickness-diff":"calc(var(--_track-thickness) - var(--_progress-thickness))","--_inner-size":"calc(var(--_root-size) - 2 * var(--variant-borderWidth, 0px))","--_outlined-inset":"max(var(--_track-thickness), var(--_progress-thickness))",width:"var(--_root-size)",height:"var(--_root-size)",borderRadius:"var(--_root-size)",margin:"var(--CircularProgress-margin)",boxSizing:"border-box",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0,position:"relative",color:l},e.children&&{fontFamily:t.vars.fontFamily.body,fontWeight:t.vars.fontWeight.md,fontSize:"calc(0.2 * var(--_root-size))"},w,e.variant==="outlined"&&{"&::before":W({content:'""',display:"block",position:"absolute",borderRadius:"inherit",top:"var(--_outlined-inset)",left:"var(--_outlined-inset)",right:"var(--_outlined-inset)",bottom:"var(--_outlined-inset)"},w)},e.variant==="soft"&&{"--CircularProgress-trackColor":t.variants.soft.neutral.backgroundColor,"--CircularProgress-progressColor":(o=t.variants.solid)==null?void 0:o[e.color].backgroundColor},e.variant==="solid"&&{"--CircularProgress-trackColor":(c=t.variants.softHover)==null?void 0:c[e.color].backgroundColor,"--CircularProgress-progressColor":(d=t.variants.solid)==null?void 0:d[e.color].backgroundColor})}),JO=ht("svg",{name:"JoyCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({width:"inherit",height:"inherit",display:"inherit",boxSizing:"inherit",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))"}),YO=ht("circle",{name:"JoyCircularProgress",slot:"track",overridesResolver:(e,t)=>t.track})({cx:"50%",cy:"50%",r:"calc(var(--_inner-size) / 2 - var(--_track-thickness) / 2 + min(0px, var(--_thickness-diff) / 2))",fill:"transparent",strokeWidth:"var(--_track-thickness)",stroke:"var(--CircularProgress-trackColor)"}),QO=ht("circle",{name:"JoyCircularProgress",slot:"progress",overridesResolver:(e,t)=>t.progress})({"--_progress-radius":"calc(var(--_inner-size) / 2 - var(--_progress-thickness) / 2 - max(0px, var(--_thickness-diff) / 2))","--_progress-length":"calc(2 * 3.1415926535 * var(--_progress-radius))",cx:"50%",cy:"50%",r:"var(--_progress-radius)",fill:"transparent",strokeWidth:"var(--_progress-thickness)",stroke:"var(--CircularProgress-progressColor)",strokeLinecap:"var(--CircularProgress-linecap, round)",strokeDasharray:"var(--_progress-length)",strokeDashoffset:"calc(var(--_progress-length) - var(--CircularProgress-percent) * var(--_progress-length) / 100)",transformOrigin:"center",transform:"rotate(-90deg)"},({ownerState:e})=>!e.determinate&&Ux(sC||(sC=WO`
      animation: var(--CircularProgress-circulation, 0.8s linear 0s infinite normal none running)
        ${0};
    `),ZO)),pb=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyCircularProgress"}),{children:c,className:d,color:m="primary",size:l="md",variant:b="soft",thickness:w,determinate:T=!1,value:E=T?0:25,component:z,slots:j={},slotProps:U={}}=o,V=Wt(o,qO),K=W({},o,{color:m,size:l,variant:b,thickness:w,value:E,determinate:T,instanceSize:t.size}),O=KO(K),L=W({},V,{component:z,slots:j,slotProps:U}),[R,re]=At("root",{ref:r,className:oi(O.root,d),elementType:XO,externalForwardedProps:L,ownerState:K,additionalProps:W({role:"progressbar",style:{"--CircularProgress-percent":E}},E&&T&&{"aria-valuenow":Math.round(typeof E=="number"?E:Number(E||0))})}),[J,se]=At("svg",{className:O.svg,elementType:JO,externalForwardedProps:L,ownerState:K}),[ie,Z]=At("track",{className:O.track,elementType:YO,externalForwardedProps:L,ownerState:K}),[ke,xe]=At("progress",{className:O.progress,elementType:QO,externalForwardedProps:L,ownerState:K});return Y.jsxs(R,W({},re,{children:[Y.jsxs(J,W({},se,{children:[Y.jsx(ie,W({},Z)),Y.jsx(ke,W({},xe))]})),c]}))}),eF=["children","action","component","color","disabled","variant","loading","loadingIndicator","size","slots","slotProps"],tF=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:c,size:d,variant:m,loading:l}=e,b={root:["root",r&&"disabled",o&&"focusVisible",m&&`variant${bt(m)}`,t&&`color${bt(t)}`,d&&`size${bt(d)}`,l&&"loading"],loadingIndicator:["loadingIndicator"]},w=Rr(b,UO,{});return o&&c&&(w.root+=` ${c}`),w},rf=ht("button")(({theme:e,ownerState:t})=>{var r,o,c,d;return[W({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.instanceSize&&{"--IconButton-size":{sm:"2rem",md:"2.25rem",lg:"2.75rem"}[t.instanceSize]},t.size==="sm"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.6)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px"},t.size==="md"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.25rem) / 1.5)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2.25rem)",minHeight:"var(--IconButton-size, 2.25rem)",fontSize:e.vars.fontSize.md,paddingInline:"0.25rem"},t.size==="lg"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.75rem) / 1.571)","--CircularProgress-size":"28px","--CircularProgress-thickness":"4px",minWidth:"var(--IconButton-size, 2.75rem)",minHeight:"var(--IconButton-size, 2.75rem)",fontSize:e.vars.fontSize.lg,paddingInline:"0.375rem"},{WebkitTapHighlightColor:"transparent",paddingBlock:0,fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.md,margin:"var(--IconButton-margin)",borderRadius:`var(--IconButton-radius, ${e.vars.radius.sm})`,border:"none",boxSizing:"border-box",backgroundColor:"transparent",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",[e.focus.selector]:W({"--Icon-color":"currentColor"},e.focus.default)}),W({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":W({"--Icon-color":"currentColor"},(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color])},'&:active, &[aria-pressed="true"]':W({"--Icon-color":"currentColor"},(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color]),"&:disabled":(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]})]}),rF=ht(rf,{name:"JoyIconButton",slot:"Root",overridesResolver:(e,t)=>t.root})({}),nF=ht("span",{name:"JoyIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e,ownerState:t})=>{var r,o;return W({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color})}),iv=A.forwardRef(function(t,r){var o;const c=Ur({props:t,name:"JoyIconButton"}),{children:d,action:m,component:l="button",color:b="neutral",disabled:w,variant:T="plain",loading:E=!1,loadingIndicator:z,size:j="md",slots:U={},slotProps:V={}}=c,K=Wt(c,eF),O=A.useContext(hb),L=A.useContext(iE),R=t.variant||O.variant||T,re=t.size||O.size||j,J=t.color||O.color||b,se=(o=t.loading||t.disabled)!=null?o:O.disabled||E||w,ie=A.useRef(null),Z=tn(ie,r),{focusVisible:ke,setFocusVisible:xe,getRootProps:Ie}=ns(W({},c,{disabled:se,rootRef:Z})),ze=z??Y.jsx(pb,{color:J,thickness:{sm:2,md:3,lg:4}[re]||3});A.useImperativeHandle(m,()=>({focusVisible:()=>{var ut;xe(!0),(ut=ie.current)==null||ut.focus()}}),[xe]);const Le=W({},c,{component:l,color:J,disabled:se,variant:R,loading:E,size:re,focusVisible:ke,instanceSize:t.size}),Ye=tF(Le),Ge=ut=>{var Pt;let wt=c.onClick;if(typeof V.root=="function"?wt=V.root(Le).onClick:V.root&&(wt=V.root.onClick),(Pt=wt)==null||Pt(ut),L){var zt;(zt=L.onClick)==null||zt.call(L,ut,c.value)}};let Te=c["aria-pressed"];typeof V.root=="function"?Te=V.root(Le)["aria-pressed"]:V.root&&(Te=V.root["aria-pressed"]),L!=null&&L.value&&(Array.isArray(L.value)?Te=L.value.indexOf(c.value)!==-1:Te=L.value===c.value);const Fe=W({},K,{component:l,slots:U,slotProps:V}),[$e,Oe]=At("root",{ref:r,className:Ye.root,elementType:rF,getSlotProps:Ie,externalForwardedProps:Fe,ownerState:Le,additionalProps:{onClick:Ge,"aria-pressed":Te}}),[Qe,at]=At("loadingIndicator",{className:Ye.loadingIndicator,elementType:nF,externalForwardedProps:Fe,ownerState:Le});return Y.jsx($e,W({},Oe,{children:E?Y.jsx(Qe,W({},at,{children:ze})):d}))});iv.muiName="IconButton";function iF(e){return Vr("MuiChip",e)}const gx=Lr("MuiChip",["root","clickable","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","disabled","endDecorator","focusVisible","label","labelSm","labelMd","labelLg","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantSolid","variantSoft","variantOutlined"]),oE=A.createContext({disabled:void 0,variant:void 0,color:void 0}),oF=["children","className","color","onClick","disabled","size","variant","startDecorator","endDecorator","component","slots","slotProps"],aF=e=>{const{disabled:t,size:r,color:o,clickable:c,variant:d,focusVisible:m}=e,l={root:["root",t&&"disabled",o&&`color${bt(o)}`,r&&`size${bt(r)}`,d&&`variant${bt(d)}`,c&&"clickable"],action:["action",t&&"disabled",m&&"focusVisible"],label:["label",r&&`label${bt(r)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Rr(l,iF,{})},sF=ht("div",{name:"JoyChip",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o,c;const d=(r=e.variants[t.variant])==null?void 0:r[t.color],{borderRadius:m}=pd({theme:e,ownerState:t},["borderRadius"]);return[W({"--Chip-decoratorChildOffset":"min(calc(var(--Chip-paddingInline) - (var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2), var(--Chip-paddingInline))","--Chip-decoratorChildRadius":"max(var(--_Chip-radius) - var(--variant-borderWidth, 0px) - var(--_Chip-paddingBlock), min(var(--_Chip-paddingBlock) + var(--variant-borderWidth, 0px), var(--_Chip-radius) / 2))","--Chip-deleteRadius":"var(--Chip-decoratorChildRadius)","--Chip-deleteSize":"var(--Chip-decoratorChildHeight)","--Avatar-radius":"var(--Chip-decoratorChildRadius)","--Avatar-size":"var(--Chip-decoratorChildHeight)","--Icon-margin":"initial","--Icon-color":"currentColor","--unstable_actionRadius":"var(--_Chip-radius)"},t.size==="sm"&&{"--Chip-paddingInline":"0.375rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.sm,"--_Chip-minHeight":"var(--Chip-minHeight, 1.25rem)",gap:"3px"},t.size==="md"&&{"--Chip-paddingInline":"0.5rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.25rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.md,"--_Chip-minHeight":"var(--Chip-minHeight, 1.5rem)",gap:"0.25rem"},t.size==="lg"&&{"--Chip-paddingInline":"0.75rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.375rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.lg,"--_Chip-minHeight":"var(--Chip-minHeight, 1.75rem)",gap:"0.375rem"},{"--_Chip-radius":"var(--Chip-radius, 1.5rem)","--_Chip-paddingBlock":"max((var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2, 0px)",minHeight:"var(--_Chip-minHeight)",maxWidth:"max-content",paddingInline:"var(--Chip-paddingInline)",borderRadius:"var(--_Chip-radius)",position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",verticalAlign:"middle",boxSizing:"border-box"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[t.size]}`],{fontWeight:e.vars.fontWeight.md,[`&.${gx.disabled}`]:{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color}}),...t.clickable?[{"--variant-borderWidth":"0px",color:d==null?void 0:d.color}]:[W({backgroundColor:e.vars.palette.background.surface},d,{[`&.${gx.disabled}`]:(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color]})],m!==void 0&&{"--_Chip-radius":m}]}),lF=ht("span",{name:"JoyChip",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>W({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",order:1,minInlineSize:0,flexGrow:1},e.clickable&&{zIndex:1,pointerEvents:"none"})),cF=ht("button",{name:"JoyChip",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,o,c,d;return[{"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,position:"absolute",zIndex:0,top:0,left:0,bottom:0,right:0,width:"100%",border:"none",cursor:"pointer",padding:"initial",margin:"initial",backgroundColor:"initial",textDecoration:"none",borderRadius:"inherit",[e.focus.selector]:e.focus.default},W({backgroundColor:e.vars.palette.background.surface},(r=e.variants[t.variant])==null?void 0:r[t.color]),{"&:hover":{"@media (hover: hover)":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]}},{"&:active":(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color]},{[`&.${gx.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]}),uF=ht("span",{name:"JoyChip",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Avatar-marginInlineStart":"calc(var(--Chip-decoratorChildOffset) * -1)","--IconButton-margin":"0 calc(-1 * var(--Chip-paddingInline) / 3) 0 calc(var(--Chip-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Chip-paddingInline) / -4)",display:"inherit",order:0,zIndex:1,pointerEvents:"none"}),dF=ht("span",{name:"JoyChip",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--IconButton-margin":"0 calc(var(--Chip-decoratorChildOffset) * -1) 0 calc(-1 * var(--Chip-paddingInline) / 3)","--Icon-margin":"0 calc(var(--Chip-paddingInline) / -4) 0 0",display:"inherit",order:2,zIndex:1,pointerEvents:"none"}),hF=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyChip"}),{children:c,className:d,color:m="neutral",onClick:l,disabled:b=!1,size:w="md",variant:T="soft",startDecorator:E,endDecorator:z,component:j,slots:U={},slotProps:V={}}=o,K=Wt(o,oF),O=!!l||!!V.action,L=W({},o,{disabled:b,size:w,color:m,variant:T,clickable:O,focusVisible:!1}),R=typeof V.action=="function"?V.action(L):V.action,re=A.useRef(null),{focusVisible:J,getRootProps:se}=ns(W({},R,{disabled:b,rootRef:re}));L.focusVisible=J;const ie=aF(L),Z=W({},K,{component:j,slots:U,slotProps:V}),[ke,xe]=At("root",{ref:r,className:oi(ie.root,d),elementType:sF,externalForwardedProps:Z,ownerState:L}),[Ie,ze]=At("label",{className:ie.label,elementType:lF,externalForwardedProps:Z,ownerState:L}),Le=ko(ze.id),[Ye,Ge]=At("action",{className:ie.action,elementType:cF,externalForwardedProps:Z,ownerState:L,getSlotProps:se,additionalProps:{"aria-labelledby":Le,as:R==null?void 0:R.component,onClick:l}}),[Te,Fe]=At("startDecorator",{className:ie.startDecorator,elementType:uF,externalForwardedProps:Z,ownerState:L}),[$e,Oe]=At("endDecorator",{className:ie.endDecorator,elementType:dF,externalForwardedProps:Z,ownerState:L}),Qe=A.useMemo(()=>({disabled:b}),[b]);return Y.jsx(oE.Provider,{value:Qe,children:Y.jsx(nv,{variant:T,color:m,children:Y.jsxs(ke,W({},xe,{children:[O&&Y.jsx(Ye,W({},Ge)),Y.jsx(Ie,W({},ze,{id:Le,children:c})),E&&Y.jsx(Te,W({},Fe,{children:E})),z&&Y.jsx($e,W({},Oe,{children:z}))]}))})})}),pF=fd(Y.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Cancel");function fF(e){return Vr("MuiChipDelete",e)}Lr("MuiChipDelete",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSolid","variantSoft","variantOutlined"]);var lC;const mF=["children","variant","color","disabled","onKeyDown","onDelete","onClick","component","slots","slotProps"],gF=["onDelete"],yF=e=>{const{focusVisible:t,variant:r,color:o,disabled:c}=e,d={root:["root",c&&"disabled",t&&"focusVisible",r&&`variant${bt(r)}`,o&&`color${bt(o)}`]};return Rr(d,fF,{})},vF=ht(rf,{name:"JoyChipDelete",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({"--IconButton-size":"var(--Chip-deleteSize, 2rem)","--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.3)",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px",pointerEvents:"visible",borderRadius:"var(--Chip-deleteRadius, 50%)",zIndex:1,padding:0})),_F=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyChipDelete"}),{children:c,variant:d="plain",color:m="neutral",disabled:l,onKeyDown:b,onDelete:w,onClick:T,component:E,slots:z={},slotProps:j={}}=o,U=Wt(o,mF),V=A.useContext(oE),{variant:K=d,color:O=m}=rv(t.variant,t.color,!0),L=t.color||O,R=l??V.disabled,re=A.useRef(null),J=tn(re,r),{focusVisible:se,getRootProps:ie}=ns(W({},o,{disabled:R,rootRef:J})),Z=W({},o,{disabled:R,variant:K,color:L,focusVisible:se}),ke=yF(Z),xe=W({},U,{component:E,slots:z,slotProps:j}),Ie=Te=>{!R&&w&&w(Te),T&&T(Te)},ze=Te=>{["Backspace","Enter","Delete"].includes(Te.key)&&(Te.preventDefault(),!R&&w&&w(Te)),b&&b(Te)},[Le,Ye]=At("root",{ref:r,elementType:vF,getSlotProps:ie,externalForwardedProps:xe,ownerState:Z,additionalProps:{as:E,onKeyDown:ze,onClick:Ie},className:ke.root}),Ge=Wt(Ye,gF);return Y.jsx(Le,W({},Ge,{children:c??(lC||(lC=Y.jsx(pF,{})))}))});function xF(e){return Vr("MuiInput",e)}const aE=Lr("MuiInput",["root","input","formControl","focused","disabled","error","adornedStart","adornedEnd","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid","fullWidth","startDecorator","endDecorator"]),ov=A.createContext(void 0),bF=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoFocus","className","defaultValue","disabled","disabledInProp","error","id","name","onClick","onChange","onKeyDown","onKeyUp","onFocus","onBlur","placeholder","readOnly","required","type","value"];function wF(e,t){var r;const o=A.useContext(ov),{"aria-describedby":c,"aria-label":d,"aria-labelledby":m,autoComplete:l,autoFocus:b,className:w,defaultValue:T,disabled:E,disabledInProp:z,error:j,id:U,name:V,onClick:K,onChange:O,onKeyDown:L,onKeyUp:R,onFocus:re,onBlur:J,placeholder:se,readOnly:ie,required:Z,type:ke,value:xe}=e,Ie=Wt(e,bF),{getRootProps:ze,getInputProps:Le,focused:Ye,error:Ge,disabled:Te}=J5({disabled:(r=z??(o==null?void 0:o.disabled))!=null?r:E,defaultValue:T,error:j,onBlur:J,onClick:K,onChange:O,onFocus:re,required:Z??(o==null?void 0:o.required),value:xe}),Fe={[t.disabled]:Te,[t.error]:Ge,[t.focused]:Ye,[t.formControl]:!!o,[w]:w},$e={[t.disabled]:Te};return W({formControl:o,propsToForward:{"aria-describedby":c,"aria-label":d,"aria-labelledby":m,autoComplete:l,autoFocus:b,disabled:Te,id:U,onKeyDown:L,onKeyUp:R,name:V,placeholder:se,readOnly:ie,type:ke},rootStateClasses:Fe,inputStateClasses:$e,getRootProps:ze,getInputProps:Le,focused:Ye,error:Ge,disabled:Te},Ie)}const SF=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","fullWidth","size","color","variant","startDecorator","endDecorator","component","slots","slotProps"],CF=e=>{const{disabled:t,fullWidth:r,variant:o,color:c,size:d}=e,m={root:["root",t&&"disabled",r&&"fullWidth",o&&`variant${bt(o)}`,c&&`color${bt(c)}`,d&&`size${bt(d)}`],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Rr(m,xF,{})},sE=ht("div")(({theme:e,ownerState:t})=>{var r,o,c,d,m,l;const b=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color];return[W({"--Input-radius":e.vars.radius.sm,"--Input-gap":"0.5rem","--Input-placeholderColor":"inherit","--Input-placeholderOpacity":.64,"--Input-decoratorColor":e.vars.palette.text.icon,"--Input-focused":"0","--Input-focusedThickness":e.vars.focus.thickness,"--Input-focusedHighlight":(o=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:o[500],[`&:not([${ed}])`]:W({},t.instanceColor&&{"--_Input-focusedHighlight":(c=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:c[500]},{"--Input-focusedHighlight":`var(--_Input-focusedHighlight, ${e.vars.palette.focusVisible})`})},t.size==="sm"&&{"--Input-minHeight":"2rem","--Input-paddingInline":"0.5rem","--Input-decoratorChildHeight":"min(1.5rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Input-minHeight":"2.25rem","--Input-paddingInline":"0.75rem","--Input-decoratorChildHeight":"min(1.75rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Input-minHeight":"2.75rem","--Input-paddingInline":"1rem","--Input-gap":"0.75rem","--Input-decoratorChildHeight":"min(2.25rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Input-decoratorChildOffset":"min(calc(var(--Input-paddingInline) - (var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2), var(--Input-paddingInline))","--_Input-paddingBlock":"max((var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2, 0px)","--Input-decoratorChildRadius":"max(var(--Input-radius) - var(--variant-borderWidth, 0px) - var(--_Input-paddingBlock), min(var(--_Input-paddingBlock) + var(--variant-borderWidth, 0px), var(--Input-radius) / 2))","--Button-minHeight":"var(--Input-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Input-decoratorChildHeight)","--Button-radius":"var(--Input-decoratorChildRadius)","--IconButton-radius":"var(--Input-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Input-minHeight)"},t.fullWidth&&{width:"100%"},{cursor:"text",position:"relative",display:"flex",paddingInline:"var(--Input-paddingInline)",borderRadius:"var(--Input-radius)"},e.typography[`body-${t.size}`],b,{backgroundColor:(d=b==null?void 0:b.backgroundColor)!=null?d:e.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Input-focusedInset, inset) 0 0 0 calc(var(--Input-focused) * var(--Input-focusedThickness)) var(--Input-focusedHighlight)"}}),{"&:hover":W({},(m=e.variants[`${t.variant}Hover`])==null?void 0:m[t.color],{backgroundColor:null}),[`&.${aE.disabled}`]:(l=e.variants[`${t.variant}Disabled`])==null?void 0:l[t.color],"&:focus-within::before":{"--Input-focused":"1"}}]}),lE=ht("input")(({ownerState:e})=>({border:"none",minWidth:0,outline:0,padding:0,flex:1,color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",textOverflow:"ellipsis","&:-webkit-autofill":W({paddingInline:"var(--Input-paddingInline)"},!e.startDecorator&&{marginInlineStart:"calc(-1 * var(--Input-paddingInline))",paddingInlineStart:"var(--Input-paddingInline)",borderTopLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"},!e.endDecorator&&{marginInlineEnd:"calc(-1 * var(--Input-paddingInline))",paddingInlineEnd:"var(--Input-paddingInline)",borderTopRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"}),"&::-webkit-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"}})),cE=ht("div")({"--Button-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Input-paddingInline) / -4)",display:"inherit",alignItems:"center",paddingBlock:"var(--unstable_InputPaddingBlock)",flexWrap:"wrap",marginInlineEnd:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),uE=ht("div")({"--Button-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Input-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",marginInlineStart:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),kF=ht(sE,{name:"JoyInput",slot:"Root",overridesResolver:(e,t)=>t.root})({}),IF=ht(lE,{name:"JoyInput",slot:"Input",overridesResolver:(e,t)=>t.input})({}),TF=ht(cE,{name:"JoyInput",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),PF=ht(uE,{name:"JoyInput",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({}),EF=A.forwardRef(function(t,r){var o,c,d,m,l,b;const w=Ur({props:t,name:"JoyInput"}),T=wF(W({},w,{disabledInProp:t.disabled}),aE),{propsToForward:E,rootStateClasses:z,inputStateClasses:j,getRootProps:U,getInputProps:V,formControl:K,focused:O,error:L=!1,disabled:R,fullWidth:re=!1,size:J="md",color:se="neutral",variant:ie="outlined",startDecorator:Z,endDecorator:ke,component:xe,slots:Ie={},slotProps:ze={}}=T,Le=Wt(T,SF),Ye=(o=(c=t.error)!=null?c:K==null?void 0:K.error)!=null?o:L,Ge=(d=(m=t.size)!=null?m:K==null?void 0:K.size)!=null?d:J,Te=(l=t.color)!=null?l:Ye?"danger":(b=K==null?void 0:K.color)!=null?b:se,Fe=W({instanceColor:Ye?"danger":t.color},w,{fullWidth:re,color:Te,disabled:R,error:Ye,focused:O,size:Ge,variant:ie}),$e=CF(Fe),Oe=W({},Le,{component:xe,slots:Ie,slotProps:ze}),[Qe,at]=At("root",{ref:r,className:[$e.root,z],elementType:kF,getSlotProps:U,externalForwardedProps:Oe,ownerState:Fe}),[ut,Pt]=At("input",W({},K&&{additionalProps:{id:K.htmlFor,"aria-describedby":K["aria-describedby"]}},{className:[$e.input,j],elementType:IF,getSlotProps:V,internalForwardedProps:E,externalForwardedProps:Oe,ownerState:Fe})),[wt,zt]=At("startDecorator",{className:$e.startDecorator,elementType:TF,externalForwardedProps:Oe,ownerState:Fe}),[er,lt]=At("endDecorator",{className:$e.endDecorator,elementType:PF,externalForwardedProps:Oe,ownerState:Fe});return Y.jsxs(Qe,W({},at,{children:[Z&&Y.jsx(wt,W({},zt,{children:Z})),Y.jsx(ut,W({},Pt)),ke&&Y.jsx(er,W({},lt,{children:ke}))]}))});function zF(e){return Vr("MuiListSubheader",e)}Lr("MuiListSubheader",["root","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const MF=["component","className","children","id","sticky","variant","color","slots","slotProps"],DF=e=>{const{variant:t,color:r,sticky:o}=e,c={root:["root",o&&"sticky",r&&`color${bt(r)}`,t&&`variant${bt(t)}`]};return Rr(c,zF,{})},AF=ht("div",{name:"JoyListSubheader",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;return W({boxSizing:"border-box",display:"flex",alignItems:"center",marginInline:"var(--ListItem-marginInline)",paddingBlock:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)",minBlockSize:"var(--ListItem-minHeight)"},e.typography["body-xs"],{fontSize:"max(0.75em, 0.625rem)",textTransform:"uppercase",letterSpacing:"0.1em"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:"var(--ListItem-stickyBackground)"},{color:t.color?`var(--_Link-color, rgba(${(r=e.vars.palette[t.color])==null?void 0:r.mainChannel} / 1))`:e.vars.palette.text.tertiary},t.instanceColor&&{[`&:not([${ed}])`]:{"--_Link-color":e.vars.palette.text.secondary}},(o=e.variants[t.variant])==null?void 0:o[t.color])}),RF=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyListSubheader"}),{component:c,className:d,children:m,id:l,sticky:b=!1,variant:w,color:T,slots:E={},slotProps:z={}}=o,j=Wt(o,MF),U=ko(l),V=A.useContext(QP);A.useEffect(()=>{V&&V(U||"")},[V,U]);const K=W({instanceColor:t.color},o,{id:U,sticky:b,variant:w,color:w?T??"neutral":T}),O=DF(K),L=W({},j,{component:c,slots:E,slotProps:z}),[R,re]=At("root",{ref:r,className:oi(O.root,d),elementType:AF,externalForwardedProps:L,ownerState:K,additionalProps:{as:c,id:U}});return Y.jsx(R,W({},re,{children:m}))});function LF(e){return Vr("MuiAutocomplete",e)}const sl=Lr("MuiAutocomplete",["root","wrapper","input","startDecorator","endDecorator","formControl","focused","disabled","error","multiple","limitTag","hasPopupIcon","hasClearIcon","clearIndicator","popupIndicator","popupIndicatorOpen","listbox","option","loading","noOptions","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]),dE=ht(ef)(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[t.variant])==null?void 0:r[t.color];return W({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(o==null?void 0:o.backgroundColor)||(o==null?void 0:o.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Qy,{boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`},!(o!=null&&o.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},{zIndex:e.vars.zIndex.popup,overflow:"auto",maxHeight:"40vh",position:"relative","&:empty":{visibility:"hidden"},[`& .${Ng.nested}, & .${Ng.nested} .${DO.root}`]:{position:"initial"}})});ht(dE,{name:"JoyAutocompleteListbox",slot:"Root",overridesResolver:(e,t)=>t.root})({});function $F(e){return Vr("MuiAutocompleteOption",e)}Lr("MuiAutocompleteOption",["root","focused","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const BF=["children","component","color","variant","className","slots","slotProps"],OF=e=>{const{color:t,variant:r}=e,o={root:["root",t&&`color${bt(t)}`,r&&`variant${bt(r)}`]};return Rr(o,$F,{})},hE=ht(tf)(({theme:e,ownerState:t})=>{var r,o;return{'&[aria-disabled="true"]':(r=e.variants[`${t.variant}Disabled`])==null?void 0:r[t.color],'&[aria-selected="true"]':W({},(o=e.variants[`${t.variant}Active`])==null?void 0:o[t.color],{fontWeight:e.vars.fontWeight.md})}}),FF=ht(hE,{name:"JoyAutocompleteOption",slot:"Root",overridesResolver:(e,t)=>t.root})({}),NF=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyAutocompleteOption"}),{children:c,component:d="li",color:m="neutral",variant:l="plain",className:b,slots:w={},slotProps:T={}}=o,E=Wt(o,BF),{variant:z=l,color:j=m}=rv(t.variant,t.color),U=W({},o,{component:d,color:j,variant:z}),V=OF(U),K=W({},E,{component:d,slots:w,slotProps:T}),[O,L]=At("root",{ref:r,className:oi(V.root,b),elementType:FF,externalForwardedProps:K,ownerState:U,additionalProps:{as:d,role:"option"}});return Y.jsx(O,W({},L,{children:c}))});var cC,uC;const jF=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoHighlight","autoSelect","autoFocus","blurOnSelect","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","defaultValue","disableCloseOnSelect","disabledItemsFocusable","disableListWrap","disableClearable","disabled","endDecorator","error","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","handleHomeEndKeys","includeInputInList","isOptionEqualToValue","groupBy","id","inputValue","limitTags","loading","loadingText","multiple","name","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","placeholder","popupIcon","readOnly","renderGroup","renderOption","renderTags","required","type","startDecorator","size","color","variant","value","component","selectOnFocus","slots","slotProps"],VF=["onDelete"],UF=["key"],HF=["onBlur","onFocus","onMouseDown"],WF=["key"],GF=e=>e.current!==null&&e.current.contains(document.activeElement),qF=e=>{var t;return(t=e.label)!=null?t:e},ZF=e=>`+${e}`,KF=e=>Y.jsxs(Sl,{nested:!0,children:[Y.jsx(RF,{sticky:!0,children:e.group}),Y.jsx(Qu,{children:e.children})]},e.key),XF=e=>{const{disabled:t,focused:r,hasClearIcon:o,hasPopupIcon:c,popupOpen:d,variant:m,color:l,size:b,multiple:w}=e,T={root:["root",r&&"focused",o&&"hasClearIcon",c&&"hasPopupIcon",m&&`variant${bt(m)}`,l&&`color${bt(l)}`,b&&`size${bt(b)}`],wrapper:["wrapper",w&&"multiple"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",d&&"popupIndicatorOpen",t&&"disabled"],listbox:["listbox"],option:["option"],loading:["loading"],noOptions:["noOptions"],limitTag:["limitTag"]};return Rr(T,LF,{})},JF=ht(sE,{name:"JoyAutocomplete",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>W({},e.size==="sm"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="md"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="lg"&&{"--Autocomplete-wrapperGap":"4px"},{"@media (pointer: fine)":{[`&:hover .${sl.clearIndicator}`]:{visibility:"visible"}}},e.multiple&&!e.startDecorator&&{paddingInlineStart:0})),YF=ht("div",{name:"JoyAutocomplete",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>({flex:1,minWidth:0,display:"flex",alignItems:"center",flexWrap:"wrap",gap:"var(--Autocomplete-wrapperGap)",[`&.${sl.multiple}`]:W({paddingBlock:"var(--Autocomplete-wrapperGap)"},!e.startDecorator&&{paddingInlineStart:"var(--Autocomplete-wrapperGap)"},!e.endDecorator&&{paddingInlineEnd:"var(--Autocomplete-wrapperGap)"})})),QF=ht(lE,{name:"JoyAutocomplete",slot:"Input",overridesResolver:(e,t)=>t.input})(({ownerState:e})=>W({minWidth:30,minHeight:"var(--Chip-minHeight)"},e.multiple&&{marginInlineStart:"calc(var(--Autocomplete-wrapperGap) * 2.5)"})),e6=ht(cE,{name:"JoyAutocomplete",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),t6=ht(uE,{name:"JoyAutocomplete",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})(({ownerState:e})=>W({},(e.hasClearIcon||e.hasPopupIcon)&&{"--Button-margin":"0px","--IconButton-margin":"0px","--Icon-margin":"0px"})),r6=ht(rf,{name:"JoyAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})(({ownerState:e})=>W({alignSelf:"center"},!e.hasPopupIcon&&{marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)"},{marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",visibility:e.focused?"visible":"hidden"})),n6=ht(rf,{name:"JoyAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>t.popupIndicator})({alignSelf:"center",marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)",[`&.${sl.popupIndicatorOpen}`]:{transform:"rotate(180deg)","--Icon-color":"currentColor"}}),i6=ht(dE,{name:"JoyAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`})),o6=ht(hE,{name:"JoyAutocomplete",slot:"Option",overridesResolver:(e,t)=>t.option})({}),a6=ht(Sl,{name:"JoyAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),s6=ht(Sl,{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),l6=ht("div",{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})({marginInlineStart:"calc(var(--Input-paddingInline) / 2)",marginBlockStart:"var(--_Input-paddingBlock)"}),Vg=A.forwardRef(function(t,r){var o,c,d,m,l,b,w;const T=Ur({props:t,name:"JoyAutocomplete"}),{"aria-describedby":E,"aria-label":z,"aria-labelledby":j,autoFocus:U,clearIcon:V=cC||(cC=Y.jsx(rE,{fontSize:"md"})),clearText:K="Clear",closeText:O="Close",disableClearable:L=!1,disabled:R,endDecorator:re,error:J=!1,forcePopupIcon:se="auto",freeSolo:ie=!1,getLimitTagsText:Z=ZF,getOptionLabel:ke=qF,groupBy:xe,id:Ie,limitTags:ze=-1,loading:Le=!1,loadingText:Ye="Loading…",multiple:Ge=!1,name:Te,noOptionsText:Fe="No options",openText:$e="Open",placeholder:Oe,popupIcon:Qe=uC||(uC=Y.jsx(VO,{})),readOnly:at=!1,renderGroup:ut=KF,renderOption:Pt,renderTags:wt,required:zt,type:er,startDecorator:lt,size:qe="md",color:pt="neutral",variant:yt="outlined",component:or,slots:Kt={},slotProps:Mr={}}=T,lr=Wt(T,jF),Vt=A.useContext(ov),Et=(o=(c=t.error)!=null?c:Vt==null?void 0:Vt.error)!=null?o:J,ur=(d=(m=t.size)!=null?m:Vt==null?void 0:Vt.size)!=null?d:qe,Mt=(l=t.color)!=null?l:Et?"danger":(b=Vt==null?void 0:Vt.color)!=null?b:pt,Er=(w=R??(Vt==null?void 0:Vt.disabled))!=null?w:!1,{getRootProps:Ve,getInputProps:Sr,getPopupIndicatorProps:Dr,getClearProps:qt,getTagProps:rr,getListboxProps:Or,getOptionProps:Hr,value:dr,dirty:cr,popupOpen:Gt,focused:sr,focusedTag:Tr,anchorEl:Be,setAnchorEl:xt,inputValue:St,groupedOptions:tr}=xO(W({},T,{id:Ie??(Vt==null?void 0:Vt.htmlFor),componentName:"Autocomplete",unstable_classNamePrefix:"Mui",unstable_isActiveElementInListbox:GF})),{onMouseDown:vn}=Sr(),{onClick:nt}=Ve(),Yt=!L&&!Er&&cr&&!at,Ot=(!ie||se===!0)&&se!==!1,hr=W({instanceColor:t.color},T,{value:dr,disabled:Er,focused:sr,getOptionLabel:ke,hasOptions:!!tr.length,hasClearIcon:Yt,hasPopupIcon:Ot,inputFocused:Tr===-1,popupOpen:Gt,size:ur,color:Mt,variant:yt}),yr=XF(hr),Lt=W({},lr,{component:or,slots:Kt,slotProps:Mr});let Fr;if(Ge&&dr.length>0){const Qt=$r=>{const Pr=rr($r),{onDelete:ei}=Pr,Zt=Wt(Pr,VF);return W({disabled:Er,size:ur,onClick:ei},Zt)};wt?Fr=wt(dr,Qt,hr):Fr=dr.map(($r,Pr)=>{const ei=Qt({index:Pr}),{key:Zt}=ei,fr=Wt(ei,UF);return Y.jsx(hF,{size:ur,variant:"soft",color:"neutral",endDecorator:Y.jsx(_F,W({},fr),Zt),sx:{minWidth:0},children:ke($r)},Pr)})}const he=tn(r,xt),H={[sl.disabled]:Er,[sl.error]:Et,[sl.focused]:sr,[sl.formControl]:!!Vt},[G,te]=At("root",{ref:he,className:[yr.root,H],elementType:JF,externalForwardedProps:Lt,ownerState:hr,getSlotProps:Ve,additionalProps:{onClick:Qt=>{nt&&nt(Qt),Qt.currentTarget===Qt.target&&vn&&vn(Qt)}}}),[de,fe]=At("wrapper",{className:yr.wrapper,elementType:YF,externalForwardedProps:Lt,ownerState:hr}),Me={[sl.disabled]:Er},[be,ye]=At("input",{className:[yr.input,Me],elementType:QF,getSlotProps:Qt=>{const $r=Sr(),{onBlur:Pr,onFocus:ei,onMouseDown:Zt}=$r,fr=Wt($r,HF);return W({},fr,{onBlur:Qr=>{var _r;Pr==null||Pr(Qr),(_r=Qt.onBlur)==null||_r.call(Qt,Qr)},onFocus:Qr=>{var _r;ei==null||ei(Qr),(_r=Qt.onFocus)==null||_r.call(Qt,Qr)},onMouseDown:Qr=>{var _r;Zt==null||Zt(Qr),(_r=Qt.onMouseDown)==null||_r.call(Qt,Qr)}})},externalForwardedProps:Lt,ownerState:hr,additionalProps:{autoFocus:U,placeholder:Oe,name:Te,readOnly:at,disabled:Er,required:zt??(Vt==null?void 0:Vt.required),type:er,"aria-invalid":Et||void 0,"aria-label":z,"aria-labelledby":j,"aria-describedby":E??(Vt==null?void 0:Vt["aria-describedby"])}}),[Ee,Xe]=At("startDecorator",{className:yr.startDecorator,elementType:e6,externalForwardedProps:Lt,ownerState:hr}),[ne,oe]=At("endDecorator",{className:yr.endDecorator,elementType:t6,externalForwardedProps:Lt,ownerState:hr}),[Ce,je]=At("clearIndicator",{className:yr.clearIndicator,elementType:r6,getSlotProps:qt,externalForwardedProps:Lt,ownerState:hr,getSlotOwnerState:Qt=>({size:Qt.size||ur,variant:Qt.variant||tc(yt,Mt).variant||"plain",color:Qt.color||tc(yt,Mt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{"aria-label":K,title:K}}),[Ze,et]=At("popupIndicator",{className:yr.popupIndicator,elementType:n6,getSlotProps:Dr,externalForwardedProps:Lt,ownerState:hr,getSlotOwnerState:Qt=>({size:Qt.size||ur,variant:Qt.variant||tc(yt,Mt).variant||"plain",color:Qt.color||tc(yt,Mt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{disabled:Er,"aria-label":Gt?O:$e,title:Gt?O:$e,type:"button"}}),[Se,_e]=At("listbox",{className:yr.listbox,elementType:i6,getSlotProps:Or,externalForwardedProps:Lt,ownerState:hr,getSlotOwnerState:Qt=>({size:Qt.size||ur,variant:Qt.variant||yt,color:Qt.color||Mt,disableColorInversion:!Qt.disablePortal}),additionalProps:{anchorEl:Be,open:Gt,style:Be?{width:Be.clientWidth}:{}}}),[Ke,Je]=At("loading",{className:yr.loading,elementType:a6,externalForwardedProps:Lt,ownerState:hr}),[ot,Ft]=At("noOptions",{className:yr.noOptions,elementType:s6,externalForwardedProps:Lt,ownerState:hr,additionalProps:{role:"presentation",onMouseDown:Qt=>{Qt.preventDefault()}}}),[Tt,Xt]=At("limitTag",{className:yr.limitTag,elementType:l6,externalForwardedProps:Lt,ownerState:hr});if(ze>-1&&Array.isArray(Fr)){const Qt=Fr.length-ze;!sr&&Qt>0&&(Fr=Fr.splice(0,ze),Fr.push(Y.jsx(Tt,W({},Xt,{children:Z(Qt)}),Fr.length)))}const[ar,Wr]=At("option",{className:yr.option,elementType:o6,externalForwardedProps:Lt,ownerState:hr,getSlotOwnerState:Qt=>({variant:Qt.variant||tc(yt,Mt).variant||"plain",color:Qt.color||tc(yt,Mt).color||"neutral",disableColorInversion:!_e.disablePortal}),additionalProps:{as:"li"}}),Di=Pt||((Qt,$r)=>{const{key:Pr}=Qt,ei=Wt(Qt,WF);return Y.jsx(ar,W({},ei,{children:ke($r)}),Pr)}),Qn=(Qt,$r)=>{const Pr=Hr({option:Qt,index:$r});return Di(W({},Wr,Pr),Qt,{selected:!!Pr["aria-selected"],inputValue:St,ownerState:hr})},Ho=A.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},..._e.modifiers||[]],[_e.modifiers]);let vr=null;if(Be){var Ki;vr=Y.jsx(nv,{variant:yt,color:Mt,children:Y.jsx(Qp,{nested:!0,children:Y.jsxs(Se,W({},_e,{className:oi(_e.className),modifiers:Ho},!((Ki=T.slots)!=null&&Ki.listbox)&&{as:Xy,slots:{root:_e.as||"ul"}},{children:[tr.map((Qt,$r)=>{if(xe){const Pr=Qt;return ut({key:String(Pr.key),group:Pr.group,children:Pr.options.map((ei,Zt)=>Qn(ei,Pr.index+Zt))})}return Qn(Qt,$r)}),Le&&tr.length===0?Y.jsx(Ke,W({},Je,{children:Ye})):null,tr.length===0&&!ie&&!Le?Y.jsx(ot,W({},Ft,{children:Fe})):null]}))})})}return Y.jsxs(A.Fragment,{children:[Y.jsxs(G,W({},te,{children:[lt&&Y.jsx(Ee,W({},Xe,{children:lt})),Y.jsxs(de,W({},fe,{children:[Fr,Y.jsx(be,W({},ye))]})),re&&Y.jsx(ne,W({},oe,{children:re})),Yt?Y.jsx(Ce,W({},je,{children:V})):null,Ot?Y.jsx(Ze,W({},et,{children:Qe})):null]})),vr]})});function c6(e){return Vr("MuiTypography",e)}Lr("MuiTypography",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","noWrap","gutterBottom","startDecorator","endDecorator","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const u6=["color","textColor"],d6=["component","gutterBottom","noWrap","level","levelMapping","children","endDecorator","startDecorator","variant","slots","slotProps"],yx=A.createContext(!1),h6=A.createContext(!1),p6=e=>{const{gutterBottom:t,noWrap:r,level:o,color:c,variant:d}=e,m={root:["root",o,t&&"gutterBottom",r&&"noWrap",c&&`color${bt(c)}`,d&&`variant${bt(d)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return Rr(m,c6,{})},f6=ht("span",{name:"JoyTypography",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),m6=ht("span",{name:"JoyTypography",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),g6=ht("span",{name:"JoyTypography",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o,c,d,m;const l=t.level!=="inherit"?(r=e.typography[t.level])==null?void 0:r.lineHeight:"1";return W({"--Icon-fontSize":`calc(1em * ${l})`},t.color&&{"--Icon-color":"currentColor"},{margin:"var(--Typography-margin, 0px)"},t.nesting?{display:"inline"}:W({display:"block"},t.unstable_hasSkeleton&&{position:"relative"}),(t.startDecorator||t.endDecorator)&&W({display:"flex",alignItems:"center"},t.nesting&&W({display:"inline-flex"},t.startDecorator&&{verticalAlign:"bottom"})),t.level&&t.level!=="inherit"&&e.typography[t.level],{fontSize:`var(--Typography-fontSize, ${t.level&&t.level!=="inherit"&&(o=(c=e.typography[t.level])==null?void 0:c.fontSize)!=null?o:"inherit"})`},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.color&&{color:`var(--variant-plainColor, rgba(${(d=e.vars.palette[t.color])==null?void 0:d.mainChannel} / 1))`},t.variant&&W({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"},(m=e.variants[t.variant])==null?void 0:m[t.color]))}),dC={h1:"h1",h2:"h2",h3:"h3",h4:"h4","title-lg":"p","title-md":"p","title-sm":"p","body-lg":"p","body-md":"p","body-sm":"p","body-xs":"span",inherit:"p"},aa=A.forwardRef(function(t,r){var o;const c=Ur({props:t,name:"JoyTypography"}),{color:d,textColor:m}=c,l=Wt(c,u6),b=A.useContext(yx),w=A.useContext(h6),T=Jx(W({},l,{color:m})),{component:E,gutterBottom:z=!1,noWrap:j=!1,level:U="body-md",levelMapping:V=dC,children:K,endDecorator:O,startDecorator:L,variant:R,slots:re={},slotProps:J={}}=T,se=Wt(T,d6),ie=(o=t.color)!=null?o:R?d??"neutral":d,Z=b||w?t.level||"inherit":U,ke=e1(K,["Skeleton"]),xe=E||(b?"span":V[Z]||dC[Z]||"span"),Ie=W({},T,{level:Z,component:xe,color:ie,gutterBottom:z,noWrap:j,nesting:b,variant:R,unstable_hasSkeleton:ke}),ze=p6(Ie),Le=W({},se,{component:xe,slots:re,slotProps:J}),[Ye,Ge]=At("root",{ref:r,className:ze.root,elementType:g6,externalForwardedProps:Le,ownerState:Ie}),[Te,Fe]=At("startDecorator",{className:ze.startDecorator,elementType:f6,externalForwardedProps:Le,ownerState:Ie}),[$e,Oe]=At("endDecorator",{className:ze.endDecorator,elementType:m6,externalForwardedProps:Le,ownerState:Ie});return Y.jsx(yx.Provider,{value:!0,children:Y.jsxs(Ye,W({},Ge,{children:[L&&Y.jsx(Te,W({},Fe,{children:L})),ke?A.cloneElement(K,{variant:K.props.variant||"inline"}):K,O&&Y.jsx($e,W({},Oe,{children:O}))]}))})});aa.muiName="Typography";function y6(e){return Vr("MuiButton",e)}const hC=Lr("MuiButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]),v6=["children","action","color","variant","size","fullWidth","startDecorator","endDecorator","loading","loadingPosition","loadingIndicator","disabled","component","slots","slotProps"],_6=e=>{const{color:t,disabled:r,focusVisible:o,focusVisibleClassName:c,fullWidth:d,size:m,variant:l,loading:b}=e,w={root:["root",r&&"disabled",o&&"focusVisible",d&&"fullWidth",l&&`variant${bt(l)}`,t&&`color${bt(t)}`,m&&`size${bt(m)}`,b&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]},T=Rr(w,y6,{});return o&&c&&(T.root+=` ${c}`),T},x6=ht("span",{name:"JoyButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),b6=ht("span",{name:"JoyButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),w6=ht("span",{name:"JoyButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,o;return W({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color})}),pE=({theme:e,ownerState:t})=>{var r,o,c,d;return[W({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.size==="sm"&&{"--Icon-fontSize":e.vars.fontSize.lg,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.375rem",minHeight:"var(--Button-minHeight, 2rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.25rem)",paddingInline:"0.75rem"},t.size==="md"&&{"--Icon-fontSize":e.vars.fontSize.xl,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.5rem",minHeight:"var(--Button-minHeight, 2.25rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.375rem)",paddingInline:"1rem"},t.size==="lg"&&{"--Icon-fontSize":e.vars.fontSize.xl2,"--CircularProgress-size":"28px","--CircularProgress-thickness":"4px","--Button-gap":"0.75rem",minHeight:"var(--Button-minHeight, 2.75rem)",fontSize:e.vars.fontSize.md,paddingBlock:"var(--Button-paddingBlock, 0.5rem)",paddingInline:"1.5rem"},{WebkitTapHighlightColor:"transparent",boxSizing:"border-box",borderRadius:`var(--Button-radius, ${e.vars.radius.sm})`,margin:"var(--Button-margin)",border:"none",backgroundColor:"transparent",cursor:"pointer",userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",textDecoration:"none",fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.lg,lineHeight:e.vars.lineHeight.md},t.fullWidth&&{width:"100%"},{[e.focus.selector]:e.focus.default}),W({},(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":{"@media (hover: hover)":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]},'&:active, &[aria-pressed="true"]':(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color],[`&.${hC.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]},t.loadingPosition==="center"&&{[`&.${hC.loading}`]:{color:"transparent"}})]},S6=ht("button",{name:"JoyButton",slot:"Root",overridesResolver:(e,t)=>t.root})(pE),fE=A.forwardRef(function(t,r){var o;const c=Ur({props:t,name:"JoyButton"}),{children:d,action:m,color:l="primary",variant:b="solid",size:w="md",fullWidth:T=!1,startDecorator:E,endDecorator:z,loading:j=!1,loadingPosition:U="center",loadingIndicator:V,disabled:K,component:O,slots:L={},slotProps:R={}}=c,re=Wt(c,v6),J=A.useContext(hb),se=A.useContext(iE),ie=t.variant||J.variant||b,Z=t.size||J.size||w,ke=t.color||J.color||l,xe=(o=t.loading||t.disabled)!=null?o:J.disabled||j||K,Ie=A.useRef(null),ze=tn(Ie,r),{focusVisible:Le,setFocusVisible:Ye,getRootProps:Ge}=ns(W({},c,{disabled:xe,rootRef:ze})),Te=V??Y.jsx(pb,{color:ke,thickness:{sm:2,md:3,lg:4}[Z]||3});A.useImperativeHandle(m,()=>({focusVisible:()=>{var yt;Ye(!0),(yt=Ie.current)==null||yt.focus()}}),[Ye]);const Fe=W({},c,{color:ke,fullWidth:T,variant:ie,size:Z,focusVisible:Le,loading:j,loadingPosition:U,disabled:xe}),$e=_6(Fe),Oe=yt=>{var or;let Kt=c.onClick;if(typeof R.root=="function"?Kt=R.root(Fe).onClick:R.root&&(Kt=R.root.onClick),(or=Kt)==null||or(yt),se){var Mr;(Mr=se.onClick)==null||Mr.call(se,yt,c.value)}};let Qe=c["aria-pressed"];typeof R.root=="function"?Qe=R.root(Fe)["aria-pressed"]:R.root&&(Qe=R.root["aria-pressed"]),se!=null&&se.value&&(Array.isArray(se.value)?Qe=se.value.indexOf(c.value)!==-1:Qe=se.value===c.value);const at=W({},re,{component:O,slots:L,slotProps:R}),[ut,Pt]=At("root",{ref:r,className:$e.root,elementType:S6,externalForwardedProps:at,getSlotProps:Ge,ownerState:Fe,additionalProps:{onClick:Oe,"aria-pressed":Qe}}),[wt,zt]=At("startDecorator",{className:$e.startDecorator,elementType:x6,externalForwardedProps:at,ownerState:Fe}),[er,lt]=At("endDecorator",{className:$e.endDecorator,elementType:b6,externalForwardedProps:at,ownerState:Fe}),[qe,pt]=At("loadingIndicatorCenter",{className:$e.loadingIndicatorCenter,elementType:w6,externalForwardedProps:at,ownerState:Fe});return Y.jsxs(ut,W({},Pt,{children:[(E||j&&U==="start")&&Y.jsx(wt,W({},zt,{children:j&&U==="start"?Te:E})),d,j&&U==="center"&&Y.jsx(qe,W({},pt,{children:Te})),(z||j&&U==="end")&&Y.jsx(er,W({},lt,{children:j&&U==="end"?Te:z}))]}))});fE.muiName="Button";function C6(e){return Vr("MuiCard",e)}Lr("MuiCard",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","horizontal","vertical"]);const k6=["className","color","component","invertedColors","size","variant","children","orientation","slots","slotProps"],I6=e=>{const{size:t,variant:r,color:o,orientation:c}=e,d={root:["root",c,r&&`variant${bt(r)}`,o&&`color${bt(o)}`,t&&`size${bt(t)}`]};return Rr(d,C6,{})},T6=ht("div")(({theme:e,ownerState:t})=>{var r;const{p:o,padding:c,borderRadius:d}=pd({theme:e,ownerState:t},["p","padding","borderRadius"]);return[W({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--Card-childRadius":"max((var(--Card-radius) - var(--variant-borderWidth, 0px)) - var(--Card-padding), min(var(--Card-padding) / 2, (var(--Card-radius) - var(--variant-borderWidth, 0px)) / 2))","--AspectRatio-radius":"var(--Card-childRadius)","--unstable_actionMargin":"calc(-1 * var(--variant-borderWidth, 0px))","--unstable_actionRadius":"var(--Card-radius)","--CardCover-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--CardOverflow-offset":"calc(-1 * var(--Card-padding))","--CardOverflow-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--Divider-inset":"calc(-1 * var(--Card-padding))"},t.size==="sm"&&{"--Card-radius":e.vars.radius.sm,"--Card-padding":"0.625rem",gap:"0.5rem"},t.size==="md"&&{"--Card-radius":e.vars.radius.md,"--Card-padding":"1rem",gap:"0.75rem 1rem"},t.size==="lg"&&{"--Card-radius":e.vars.radius.lg,"--Card-padding":"1.5rem",gap:"1rem 1.5rem"},{padding:"var(--Card-padding)",borderRadius:"var(--Card-radius)",backgroundColor:e.vars.palette.background.surface,position:"relative",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},e.typography[`body-${t.size}`],t.variant==="solid"&&t.color&&t.invertedColors&&ev(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&tv(t.color)(e),(r=e.variants[t.variant])==null?void 0:r[t.color]),o!==void 0&&{"--Card-padding":o},c!==void 0&&{"--Card-padding":c},d!==void 0&&{"--Card-radius":d}]}),P6=ht(T6,{name:"JoyCard",slot:"Root",overridesResolver:(e,t)=>t.root})({}),E6=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyCard"}),{className:c,color:d="neutral",component:m="div",invertedColors:l=!1,size:b="md",variant:w="outlined",children:T,orientation:E="vertical",slots:z={},slotProps:j={}}=o,U=Wt(o,k6),V=W({},o,{color:d,component:m,orientation:E,size:b,variant:w,invertedColors:l}),K=I6(V),O=W({},U,{component:m,slots:z,slotProps:j}),[L,R]=At("root",{ref:r,className:oi(K.root,c),elementType:P6,externalForwardedProps:O,ownerState:V});return Y.jsx(L,W({},R,{children:A.Children.map(T,(re,J)=>{if(!A.isValidElement(re))return re;const se={};if(e1(re,["Divider"])){se.inset="inset"in re.props?re.props.inset:"context";const ie=E==="vertical"?"horizontal":"vertical";se.orientation="orientation"in re.props?re.props.orientation:ie}return J===0&&(se["data-first-child"]=""),J===A.Children.count(T)-1&&(se["data-last-child"]=""),A.cloneElement(re,se)})}))}),mE=Lr("MuiCardOverflow",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);function z6(e){return Vr("MuiDivider",e)}Lr("MuiDivider",["root","horizontal","vertical","insetContext","insetNone"]);const gE=ht("div")(({ownerState:e})=>({display:"flex",flexDirection:e.orientation==="horizontal"?"row":"column",flex:9999,zIndex:1,columnGap:"var(--Card-padding)",rowGap:"max(2px, calc(0.1875 * var(--Card-padding)))",padding:"var(--unstable_padding)",[`.${mE.root} > &`]:{"--unstable_padding":"calc(var(--Card-padding) * 0.75) 0px"}}));ht(gE,{name:"JoyCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({});const M6=Lr("MuiModalDialog",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","layoutCenter","layoutFullscreen"]);function D6(e){return Vr("MuiCheckbox",e)}const hc=Lr("MuiCheckbox",["root","checkbox","action","input","label","checked","disabled","focusVisible","indeterminate","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid"]),A6=fd(Y.jsx("path",{d:"M9 16.17 5.53 12.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L9 16.17z"}),"Check"),R6=fd(Y.jsx("path",{d:"M19 13H5c-.55 0-1-.45-1-1s.45-1 1-1h14c.55 0 1 .45 1 1s-.45 1-1 1z"}),"HorizontalRule"),L6=["checked","uncheckedIcon","checkedIcon","label","defaultChecked","disabled","disableIcon","overlay","id","indeterminate","indeterminateIcon","name","onBlur","onChange","onFocus","onFocusVisible","readOnly","required","value","color","variant","size","component","slots","slotProps"],$6=e=>{const{checked:t,disabled:r,disableIcon:o,focusVisible:c,color:d,variant:m,size:l,indeterminate:b}=e,w={root:["root",t&&"checked",r&&"disabled",c&&"focusVisible",m&&`variant${bt(m)}`,d&&`color${bt(d)}`,l&&`size${bt(l)}`],checkbox:["checkbox",t&&"checked",b&&"indeterminate",r&&"disabled"],action:["action",t&&"checked",o&&r&&"disabled",c&&"focusVisible"],input:["input"],label:["label"]};return Rr(w,D6,{})},B6=ht("span",{name:"JoyCheckbox",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,c;return W({"--Icon-fontSize":"var(--Checkbox-size)"},e.size==="sm"&&{"--Checkbox-size":"1rem","& ~ *":{"--FormHelperText-margin":"0 0 0 1.5rem"},fontSize:t.vars.fontSize.sm,gap:"var(--Checkbox-gap, 0.5rem)"},e.size==="md"&&{"--Checkbox-size":"1.25rem","& ~ *":{"--FormHelperText-margin":"0.25rem 0 0 1.875rem"},fontSize:t.vars.fontSize.md,gap:"var(--Checkbox-gap, 0.625rem)"},e.size==="lg"&&{"--Checkbox-size":"1.5rem","& ~ *":{"--FormHelperText-margin":"0.375rem 0 0 2.25rem"},fontSize:t.vars.fontSize.lg,gap:"var(--Checkbox-gap, 0.75rem)"},{position:e.overlay?"initial":"relative",display:"inline-flex",fontFamily:t.vars.fontFamily.body,lineHeight:"var(--Checkbox-size)",color:t.vars.palette.text.primary,[`&.${hc.disabled}`]:{color:(r=t.variants.plainDisabled)==null||(r=r[e.color])==null?void 0:r.color}},e.disableIcon&&{color:(o=t.variants[e.variant])==null||(o=o[e.color])==null?void 0:o.color,[`&.${hc.disabled}`]:{color:(c=t.variants[`${e.variant}Disabled`])==null||(c=c[e.color])==null?void 0:c.color}})}),O6=ht("span",{name:"JoyCheckbox",slot:"Checkbox",overridesResolver:(e,t)=>t.checkbox})(({theme:e,ownerState:t})=>{var r,o,c,d,m;const l=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color];return[W({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,boxSizing:"border-box",borderRadius:`min(${e.vars.radius.sm}, 0.25rem)`,width:"var(--Checkbox-size)",height:"var(--Checkbox-size)",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0},t.disableIcon&&{display:"contents"},{[`&.${hc.checked}, &.${hc.indeterminate}`]:{"--Icon-color":"currentColor"}}),...t.disableIcon?[]:[W({},l,{backgroundColor:(o=l==null?void 0:l.backgroundColor)!=null?o:e.vars.palette.background.surface}),{"&:hover":{"@media (hover: hover)":(c=e.variants[`${t.variant}Hover`])==null?void 0:c[t.color]}},{"&:active":(d=e.variants[`${t.variant}Active`])==null?void 0:d[t.color]},{[`&.${hc.disabled}`]:(m=e.variants[`${t.variant}Disabled`])==null?void 0:m[t.color]}]]}),F6=ht("span",{name:"JoyCheckbox",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var r,o,c,d;return[{borderRadius:`var(--Checkbox-actionRadius, ${t.overlay?"var(--unstable_actionRadius, inherit)":"inherit"})`,textAlign:"left",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",zIndex:1,[e.focus.selector]:e.focus.default},...t.disableIcon?[(r=e.variants[t.variant])==null?void 0:r[t.color],{"&:hover":(o=e.variants[`${t.variant}Hover`])==null?void 0:o[t.color]},{"&:active":(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color]},{[`&.${hc.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]:[]]}),N6=ht("input",{name:"JoyCheckbox",slot:"Input",overridesResolver:(e,t)=>t.input})(()=>({margin:0,opacity:0,position:"absolute",width:"100%",height:"100%",cursor:"pointer"})),j6=ht("label",{name:"JoyCheckbox",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>W({flex:1,minWidth:0},e.disableIcon&&{zIndex:1,pointerEvents:"none"})),V6=Y.jsx(A6,{}),U6=Y.jsx(R6,{}),td=A.forwardRef(function(t,r){var o,c,d,m,l;const b=Ur({props:t,name:"JoyCheckbox"}),{checked:w,uncheckedIcon:T,checkedIcon:E=V6,label:z,defaultChecked:j,disabled:U,disableIcon:V=!1,overlay:K,id:O,indeterminate:L=!1,indeterminateIcon:R=U6,name:re,onBlur:J,onChange:se,onFocus:ie,onFocusVisible:Z,readOnly:ke,required:xe,value:Ie,color:ze,variant:Le,size:Ye="md",component:Ge,slots:Te={},slotProps:Fe={}}=b,$e=Wt(b,L6),Oe=A.useContext(ov),Qe=(o=(c=t.disabled)!=null?c:Oe==null?void 0:Oe.disabled)!=null?o:U,at=(d=(m=t.size)!=null?m:Oe==null?void 0:Oe.size)!=null?d:Ye,ut=ko(O??(Oe==null?void 0:Oe.htmlFor)),Pt={checked:w,defaultChecked:j,disabled:Qe,onBlur:J,onChange:se,onFocus:ie,onFocusVisible:Z},{getInputProps:wt,checked:zt,disabled:er,focusVisible:lt}=lO(Pt),qe=zt||L,or=qe?Le||"solid":Le||"outlined",Kt=t.color||(Oe!=null&&Oe.error?"danger":(l=Oe==null?void 0:Oe.color)!=null?l:ze),Vt=W({},b,{checked:zt,disabled:er,disableIcon:V,overlay:K,focusVisible:lt,color:qe?Kt||"primary":Kt||"neutral",variant:or,size:at}),Et=$6(Vt),ur=W({},$e,{component:Ge,slots:Te,slotProps:Fe}),[Mt,Er]=At("root",{ref:r,className:Et.root,elementType:B6,externalForwardedProps:ur,ownerState:Vt}),[Ve,Sr]=At("checkbox",{className:Et.checkbox,elementType:O6,externalForwardedProps:ur,ownerState:Vt}),[Dr,qt]=At("action",{className:Et.action,elementType:F6,externalForwardedProps:ur,ownerState:Vt}),[rr,Or]=At("input",{additionalProps:W({id:ut,name:re,value:Ie,readOnly:ke,role:void 0,required:xe??(Oe==null?void 0:Oe.required),"aria-describedby":Oe==null?void 0:Oe["aria-describedby"]},L&&{"aria-checked":"mixed"}),className:Et.input,elementType:N6,externalForwardedProps:ur,getSlotProps:wt,ownerState:Vt}),[Hr,dr]=At("label",{additionalProps:{htmlFor:ut},className:Et.label,elementType:j6,externalForwardedProps:ur,ownerState:Vt});let cr=T;return V?cr=null:L?cr=R:zt&&(cr=E),Y.jsxs(Mt,W({},Er,{children:[Y.jsxs(Ve,W({},Sr,{children:[Y.jsx(Dr,W({},qt,{children:Y.jsx(rr,W({},Or))})),cr]})),z&&Y.jsx(yx.Provider,{value:!0,children:Y.jsx(Hr,W({},dr,{children:z}))})]}))});function H6(e){const{children:t,disableColorScheme:r=!1}=e;return Y.jsxs(A.Fragment,{children:[Y.jsx(T5,{styles:o=>{var c,d;const m={};r||Object.entries(o.colorSchemes).forEach(([b,w])=>{var T;m[o.getColorSchemeSelector(b).replace(/\s*&/,"")]={colorScheme:(T=w.palette)==null?void 0:T.mode}});const l=(c=(d=o.components)==null||(d=d.JoyTypography)==null||(d=d.defaultProps)==null?void 0:d.level)!=null?c:"body-md";return W({html:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:o.vars.fontWeight.lg},body:W({margin:0,color:o.vars.palette.text.primary,fontFamily:o.vars.fontFamily.body},o.typography[l],{backgroundColor:o.vars.palette.background.body,"@media print":{backgroundColor:o.vars.palette.common.white},"&::backdrop":{backgroundColor:o.vars.palette.background.backdrop}})},m)},defaultTheme:Wp}),t]})}function W6(e){return Vr("MuiDialogContent",e)}Lr("MuiDialogContent",["root"]);const av=A.createContext(void 0);function G6(e){return Vr("MuiDialogTitle",e)}const yE=Lr("MuiDialogTitle",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),q6=["component","children","orientation","slots","slotProps"],Z6=()=>Rr({root:["root"]},W6,{}),K6=ht(gE,{name:"JoyDialogContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({color:`var(--DialogContent-color, ${e.vars.palette.text.tertiary})`,overflow:"auto",margin:"var(--unstable_DialogContent-margin)",[`.${M6.root} > .${yE.root} + &`]:{"--unstable_DialogContent-margin":"-0.375em 0 0 0"}})),vE=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyDialogContent"}),c=A.useContext(av),{component:d="div",children:m,orientation:l="vertical",slots:b={},slotProps:w={}}=o,T=Wt(o,q6),E=W({},T,{component:d,slots:b,slotProps:w}),z=W({},o,{component:d,orientation:l}),j=Z6(),[U,V]=At("root",{ref:r,className:j.root,elementType:K6,externalForwardedProps:E,ownerState:z,additionalProps:{id:c==null?void 0:c.describedBy}});return Y.jsx(U,W({},V,{children:m}))}),fb=A.createContext(void 0),X6=["component","children","variant","color","level","slots","slotProps"],J6=e=>{const{level:t,color:r,variant:o}=e,c={root:["root",t,r&&`color${bt(r)}`,o&&`variant${bt(o)}`]};return Rr(c,G6,{})},Y6=ht("h2",{name:"JoyDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;const c=t.level!=="inherit"?(r=e.typography[t.level])==null?void 0:r.lineHeight:"1";return W({"--Icon-fontSize":`calc(1em * ${c})`},t.color&&{"--Icon-color":"currentColor"},{display:"flex",gap:"clamp(4px, 0.375em, 0.75rem)",margin:"var(--unstable_DialogTitle-margin, 0px)"},t.level&&t.level!=="inherit"&&e.typography[t.level],{color:"inherit"},t.variant&&W({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},(o=e.variants[t.variant])==null?void 0:o[t.color]),{[`.${mE.root} > &`]:{"--unstable_DialogTitle-margin":"var(--Card-padding) 0"}})}),Q6={sm:"title-md",md:"title-lg",lg:"h4"},_E=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyDialogTitle"}),c=A.useContext(fb),d=A.useContext(av),{component:m="h2",children:l,variant:b,color:w,level:T=Q6[c||"md"],slots:E={},slotProps:z={}}=o,j=Wt(o,X6),U=t.color||(b?w??"neutral":w),V=W({},j,{component:m,slots:E,slotProps:z}),K=W({},o,{component:m,color:U,variant:b,level:T}),O=J6(K),[L,R]=At("root",{ref:r,className:O.root,elementType:Y6,externalForwardedProps:V,ownerState:K,additionalProps:{id:d==null?void 0:d.labelledBy}});return Y.jsx(L,W({},R,{children:l}))}),eN=["className","children","component","inset","orientation","role","slots","slotProps"],tN=e=>{const{orientation:t,inset:r}=e,o={root:["root",t,r&&`inset${bt(r)}`]};return Rr(o,z6,{})},xE=ht("hr",{name:"JoyDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>W({"--Divider-thickness":"1px","--Divider-lineColor":e.vars.palette.divider},t.inset==="none"&&{"--_Divider-inset":"0px"},t.inset==="context"&&{"--_Divider-inset":"var(--Divider-inset, 0px)"},{margin:"initial",marginInline:t.orientation==="vertical"?"initial":"var(--_Divider-inset)",marginBlock:t.orientation==="vertical"?"var(--_Divider-inset)":"initial",position:"relative",alignSelf:"stretch",flexShrink:0},t.children?W({"--Divider-gap":e.spacing(1),"--Divider-childPosition":"50%",display:"flex",flexDirection:t.orientation==="vertical"?"column":"row",alignItems:"center",whiteSpace:"nowrap",textAlign:"center",border:0},e.typography["body-sm"],{"&::before, &::after":{position:"relative",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)",backgroundColor:"var(--Divider-lineColor)",content:'""'},"&::before":{marginInlineEnd:t.orientation==="vertical"?"initial":"min(var(--Divider-childPosition) * 999, var(--Divider-gap))",marginBlockEnd:t.orientation==="vertical"?"min(var(--Divider-childPosition) * 999, var(--Divider-gap))":"initial",flexBasis:"var(--Divider-childPosition)"},"&::after":{marginInlineStart:t.orientation==="vertical"?"initial":"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))",marginBlockStart:t.orientation==="vertical"?"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))":"initial",flexBasis:"calc(100% - var(--Divider-childPosition))"}}):{border:"none",listStyle:"none",backgroundColor:"var(--Divider-lineColor)",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)"})),mb=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyDivider"}),{className:c,children:d,component:m=d!=null?"div":"hr",inset:l,orientation:b="horizontal",role:w=m!=="hr"?"separator":void 0,slots:T={},slotProps:E={}}=o,z=Wt(o,eN),j=W({},o,{inset:l,role:w,orientation:b,component:m}),U=tN(j),V=W({},z,{component:m,slots:T,slotProps:E}),[K,O]=At("root",{ref:r,className:oi(U.root,c),elementType:xE,externalForwardedProps:V,ownerState:j,additionalProps:W({as:m,role:w},w==="separator"&&b==="vertical"&&{"aria-orientation":"vertical"})});return Y.jsx(K,W({},O,{children:d}))});mb.muiName="Divider";const bE=A.createContext(void 0),wE=ht("div")(({ownerState:e,theme:t})=>W({"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`,'& ~ [role="listbox"]':{"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`},position:"fixed",zIndex:t.vars.zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&{visibility:"hidden"}));ht(wE,{name:"JoyModal",slot:"Root",overridesResolver:(e,t)=>t.root})({});const SE=ht("div")(({theme:e})=>({zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:e.vars.palette.background.backdrop,WebkitTapHighlightColor:"transparent",backdropFilter:"blur(8px)"}));ht(SE,{name:"JoyModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({});function rN(e){return Vr("MuiDrawer",e)}Lr("MuiDrawer",["root","hidden","backdrop","content","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const nN=["children","anchor","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","color","variant","invertedColors","size","onClose","onKeyDown","open","component","slots","slotProps"],iN=e=>{const{open:t,variant:r,color:o,size:c}=e,d={root:["root",!t&&"hidden",r&&`variant${bt(r)}`,o&&`color${bt(o)}`,c&&`size${bt(c)}`],backdrop:["backdrop"],content:["content"]};return Rr(d,rN,{})},oN=ht(wE,{name:"JoyDrawer",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>W({"--Drawer-transitionDuration":"0.3s","--Drawer-transitionFunction":"ease","--ModalClose-radius":"max((var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) - var(--ModalClose-inset), min(var(--ModalClose-inset) / 2, (var(--Drawer-contentRadius) - var(--variant-borderWidth, 0px)) / 2))"},e.size==="sm"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(350px, 30%, 100%)","--Drawer-horizontalSize":"clamp(256px, 20%, 100%)","--Drawer-titleMargin":"0.625rem 0.75rem calc(0.625rem / 2)"},e.size==="md"&&{"--ModalClose-inset":"0.5rem","--Drawer-verticalSize":"clamp(400px, 45%, 100%)","--Drawer-horizontalSize":"clamp(300px, 30%, 100%)","--Drawer-titleMargin":"0.75rem 0.75rem calc(0.75rem / 2)"},e.size==="lg"&&{"--ModalClose-inset":"0.75rem","--Drawer-verticalSize":"clamp(500px, 60%, 100%)","--Drawer-horizontalSize":"clamp(440px, 60%, 100%)","--Drawer-titleMargin":"1rem 1rem calc(1rem / 2)"},{transitionProperty:"visibility",transitionDelay:e.open?"0s":"var(--Drawer-transitionDuration)"},!e.open&&{visibility:"hidden"})),aN=ht(SE,{name:"JoyDrawer",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})(({ownerState:e})=>({opacity:e.open?1:0,transition:"opacity var(--Drawer-transitionDuration) ease-in-out"})),sN=ht("div",{name:"JoyDrawer",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>{var r;return W({},e.typography[`body-${t.size}`],{boxShadow:e.shadow.md,backgroundColor:e.vars.palette.background.surface,outline:0,display:"flex",flexDirection:"column",position:"fixed",boxSizing:"border-box",overflow:"auto"},t.anchor==="left"&&{top:0,left:0,transform:t.open?"translateX(0)":"translateX(-100%)"},t.anchor==="right"&&{top:0,right:0,transform:t.open?"translateX(0)":"translateX(100%)"},t.anchor==="top"&&{top:0,transform:t.open?"translateY(0)":"translateY(-100%)"},t.anchor==="bottom"&&{bottom:0,transform:t.open?"translateY(0)":"translateY(100%)"},{height:t.anchor.match(/(left|right)/)?"100%":"min(100vh, var(--Drawer-verticalSize))",width:t.anchor.match(/(top|bottom)/)?"100vw":"min(100vw, var(--Drawer-horizontalSize))",transition:"transform var(--Drawer-transitionDuration) var(--Drawer-transitionFunction)"},t.variant==="solid"&&t.color&&t.invertedColors&&ev(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&tv(t.color)(e),(r=e.variants[t.variant])==null?void 0:r[t.color],{[`& > .${yE.root}`]:{"--unstable_DialogTitle-margin":"var(--Drawer-titleMargin)"}})}),CE=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyDrawer"}),{children:c,anchor:d="left",container:m,disableAutoFocus:l=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:w=!1,disablePortal:T=!1,disableRestoreFocus:E=!1,disableScrollLock:z=!1,hideBackdrop:j=!1,color:U="neutral",variant:V="plain",invertedColors:K=!1,size:O="md",onClose:L,open:R,component:re,slots:J={},slotProps:se={}}=o,ie=Wt(o,nN),Z=W({},o,{anchor:d,disableAutoFocus:l,disableEnforceFocus:b,disableEscapeKeyDown:w,disablePortal:T,disableRestoreFocus:E,disableScrollLock:z,hideBackdrop:j,invertedColors:K,color:U,variant:V,size:O}),{getRootProps:ke,getBackdropProps:xe,rootRef:Ie,portalRef:ze,isTopModal:Le}=N4(W({},Z,{rootRef:r,children:null})),Ye=iN(Z),Ge=W({},ie,{component:re,slots:J,slotProps:se}),Te=ko(),Fe=ko(),$e=A.useMemo(()=>({variant:V,color:U,labelledBy:Te,describedBy:Fe}),[U,V,Te,Fe]),[Oe,Qe]=At("root",{ref:Ie,className:Ye.root,elementType:oN,externalForwardedProps:Ge,getSlotProps:ke,ownerState:Z}),[at,ut]=At("backdrop",{className:Ye.backdrop,elementType:aN,externalForwardedProps:Ge,getSlotProps:xe,ownerState:Z}),[Pt,wt]=At("content",{className:Ye.content,elementType:sN,additionalProps:{tabIndex:-1,role:"dialog","aria-modal":"true","aria-labelledby":Te,"aria-describedby":Fe},externalForwardedProps:Ge,ownerState:Z});return Y.jsx(bE.Provider,{value:L,children:Y.jsx(fb.Provider,{value:O,children:Y.jsx(av.Provider,{value:$e,children:Y.jsx(FP,{ref:ze,container:m,disablePortal:T,children:Y.jsxs(Oe,W({},Qe,{children:[j?null:Y.jsx(at,W({},ut)),Y.jsx(Z5,{disableEnforceFocus:b,disableAutoFocus:l,disableRestoreFocus:E,isEnabled:Le,open:R,children:Y.jsx(Pt,W({},wt,{children:c}))})]}))})})})})});function lN(e){return Vr("MuiListDivider",e)}Lr("MuiListDivider",["root","insetGutter","insetStartDecorator","insetStartContent","horizontal","vertical"]);const cN=["component","role","className","children","inset","orientation","slots","slotProps"],uN=e=>{const{orientation:t,inset:r}=e,o={root:["root",t,r&&r!=="context"&&`inset${bt(r)}`]};return Rr(o,lN,{})},dN=ht(xE,{name:"JoyListDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>W({},e.inset==="context"&&{"--Divider-inset":"calc(-1 * var(--List-padding))"},e.row&&W({marginInline:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginBlock:"var(--ListItem-paddingY)"},e["data-first-child"]===void 0&&{marginInlineStart:"calc(var(--List-gap) + var(--ListDivider-gap))"}),!e.row&&W({},e["data-first-child"]===void 0&&{marginBlockStart:"calc(var(--List-gap) + var(--ListDivider-gap))"},{marginBlockEnd:"var(--ListDivider-gap)"},e.inset==="gutter"&&{marginInlineStart:"var(--ListItem-paddingLeft)",marginInlineEnd:"var(--ListItem-paddingRight)"},e.inset==="startDecorator"&&{marginInlineStart:"var(--ListItem-paddingLeft)"},e.inset==="startContent"&&{marginInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItemDecorator-size))"}))),kE=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyListDivider"}),c=A.useContext(hd),d=A.useContext(cb),{component:m,role:l,className:b,children:w,inset:T="context",orientation:E,slots:z={},slotProps:j={}}=o,U=Wt(o,cN),[V]=(d==null?void 0:d.split(":"))||["",""],K=m||(V&&!V.match(/^(ul|ol|menu)$/)?"div":"li"),O=l||(K==="li"?"separator":void 0),L=E||(c?"vertical":"horizontal"),R=W({},o,{inset:T,row:c,orientation:L,component:K,role:O}),re=uN(R),J=W({},U,{component:K,slots:z,slotProps:j}),[se,ie]=At("root",{ref:r,className:oi(re.root,b),elementType:dN,externalForwardedProps:J,ownerState:R,additionalProps:W({as:K,role:O},O==="separator"&&L==="vertical"&&{"aria-orientation":"vertical"})});return Y.jsx(se,W({},ie,{children:w}))});function hN(e){return Vr("MuiListItemContent",e)}Lr("MuiListItemContent",["root"]);const pN=["component","className","children","slots","slotProps"],fN=()=>Rr({root:["root"]},hN,{}),mN=ht("div",{name:"JoyListItemContent",slot:"Root",overridesResolver:(e,t)=>t.root})({flex:"1 1 auto",minWidth:0}),gN=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyListItemContent"}),{component:c,className:d,children:m,slots:l={},slotProps:b={}}=o,w=Wt(o,pN),T=W({},o),E=fN(),z=W({},w,{component:c,slots:l,slotProps:b}),[j,U]=At("root",{ref:r,className:oi(E.root,d),elementType:mN,externalForwardedProps:z,ownerState:T});return Y.jsx(j,W({},U,{children:m}))});function yN(e){return Vr("MuiListItemDecorator",e)}Lr("MuiListItemDecorator",["root"]);const vN=["component","className","children","slots","slotProps"],_N=()=>Rr({root:["root"]},yN,{}),xN=ht("span",{name:"JoyListItemDecorator",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>W({boxSizing:"border-box",display:"inline-flex",alignItems:`var(--unstable_ListItemDecorator-alignItems, ${e.parentOrientation==="horizontal"?"center":"initial"})`},e.parentOrientation==="horizontal"?{minInlineSize:"var(--ListItemDecorator-size)",marginInlineEnd:"calc(-1 * var(--ListItem-gap))"}:{minBlockSize:"var(--ListItemDecorator-size)",justifyContent:"center",marginBlockEnd:"calc(-1 * var(--ListItem-gap))"})),ig=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyListItemDecorator"}),{component:c,className:d,children:m,slots:l={},slotProps:b={}}=o,w=Wt(o,vN),T=A.useContext(ub),E=W({parentOrientation:T},o),z=_N(),j=W({},w,{component:c,slots:l,slotProps:b}),[U,V]=At("root",{ref:r,className:oi(z.root,d),elementType:xN,externalForwardedProps:j,ownerState:E});return Y.jsx(U,W({},V,{children:m}))});function bN(e){return Vr("MuiMenu",e)}Lr("MuiMenu",["root","listbox","expanded","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const wN=["actions","children","color","component","disablePortal","keepMounted","id","invertedColors","onItemsChange","modifiers","variant","size","slots","slotProps"],SN=e=>{const{open:t,variant:r,color:o,size:c}=e,d={root:["root",t&&"expanded",r&&`variant${bt(r)}`,o&&`color${bt(o)}`,c&&`size${bt(c)}`],listbox:["listbox"]};return Rr(d,bN,{})},pC=ht(ef,{name:"JoyMenu",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;const c=(r=e.variants[t.variant])==null?void 0:r[t.color];return[W({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(c==null?void 0:c.backgroundColor)||(c==null?void 0:c.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Qy,{borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,boxShadow:e.shadow.md,overflow:"auto",zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(c!=null&&c.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},t.variant==="solid"&&t.color&&t.invertedColors&&ev(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&tv(t.color)(e),(o=e.variants[t.variant])==null?void 0:o[t.color])]}),CN=A.forwardRef(function(t,r){var o;const c=Ur({props:t,name:"JoyMenu"}),{actions:d,children:m,color:l="neutral",component:b,disablePortal:w=!1,keepMounted:T=!1,id:E,invertedColors:z=!1,onItemsChange:j,modifiers:U,variant:V="outlined",size:K="md",slots:O={},slotProps:L={}}=c,R=Wt(c,wN),{contextValue:re,getListboxProps:J,dispatch:se,open:ie,triggerElement:Z}=v3({onItemsChange:j,id:E,listboxRef:r});A.useImperativeHandle(d,()=>({dispatch:se,resetHighlight:()=>se({type:un.resetHighlight,event:null})}),[se]);const ke=W({},c,{disablePortal:w,invertedColors:z,color:l,variant:V,size:K,open:ie,nesting:!1,row:!1}),xe=SN(ke),Ie=W({},R,{component:b,slots:O,slotProps:L}),ze=A.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...U||[]],[U]),Le=RI({elementType:pC,getSlotProps:J,externalForwardedProps:Ie,externalSlotProps:{},ownerState:ke,additionalProps:{anchorEl:Z,open:ie&&Z!==null,disablePortal:w,keepMounted:T,modifiers:ze},className:xe.root});return Y.jsx(pC,W({},Le,!((o=c.slots)!=null&&o.root)&&{as:Xy,slots:{root:b||"ul"}},{children:Y.jsx(_3,{value:re,children:Y.jsx(nv,{variant:z?void 0:V,color:l,children:Y.jsx(Yy.Provider,{value:"menu",children:Y.jsx(Qp,{nested:!0,children:m})})})})}))});function kN(e){return Vr("MuiMenuButton",e)}Lr("MuiMenuButton",["root","colorPrimary","colorNeutral","colorDanger","colorInfo","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]);const IN=["children","color","component","disabled","endDecorator","loading","loadingPosition","loadingIndicator","size","slotProps","slots","startDecorator","variant"],TN=e=>{const{color:t,disabled:r,fullWidth:o,size:c,variant:d,loading:m}=e,l={root:["root",r&&"disabled",o&&"fullWidth",d&&`variant${bt(d)}`,t&&`color${bt(t)}`,c&&`size${bt(c)}`,m&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]};return Rr(l,kN,{})},PN=ht("button",{name:"JoyMenuButton",slot:"Root",overridesResolver:(e,t)=>t.root})(pE),EN=ht("span",{name:"JoyMenuButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),zN=ht("span",{name:"JoyMenuButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),MN=ht("span",{name:"JoyMenuButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var r,o;return W({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(r=e.variants[t.variant])==null||(r=r[t.color])==null?void 0:r.color},t.disabled&&{color:(o=e.variants[`${t.variant}Disabled`])==null||(o=o[t.color])==null?void 0:o.color})}),DN=A.forwardRef(function(t,r){var o;const c=Ur({props:t,name:"JoyMenuButton"}),{children:d,color:m="neutral",component:l,disabled:b=!1,endDecorator:w,loading:T=!1,loadingPosition:E="center",loadingIndicator:z,size:j="md",slotProps:U={},slots:V={},startDecorator:K,variant:O="outlined"}=c,L=Wt(c,IN),R=A.useContext(hb),re=t.variant||R.variant||O,J=t.size||R.size||j,se=(o=t.disabled)!=null?o:R.disabled||b||T,{getRootProps:ie,open:Z,active:ke}=T4({rootRef:r,disabled:se}),xe=z??Y.jsx(pb,{color:m,thickness:{sm:2,md:3,lg:4}[J]||3}),Ie=W({},c,{active:ke,color:m,disabled:se,open:Z,size:J,variant:re}),ze=TN(Ie),Le=W({},L,{component:l,slots:V,slotProps:U}),[Ye,Ge]=At("root",{elementType:PN,getSlotProps:ie,externalForwardedProps:Le,ref:r,ownerState:Ie,className:ze.root}),[Te,Fe]=At("startDecorator",{className:ze.startDecorator,elementType:EN,externalForwardedProps:Le,ownerState:Ie}),[$e,Oe]=At("endDecorator",{className:ze.endDecorator,elementType:zN,externalForwardedProps:Le,ownerState:Ie}),[Qe,at]=At("loadingIndicatorCenter",{className:ze.loadingIndicatorCenter,elementType:MN,externalForwardedProps:Le,ownerState:Ie});return Y.jsxs(Ye,W({},Ge,{children:[(K||T&&E==="start")&&Y.jsx(Te,W({},Fe,{children:T&&E==="start"?xe:K})),d,T&&E==="center"&&Y.jsx(Qe,W({},at,{children:xe})),(w||T&&E==="end")&&Y.jsx($e,W({},Oe,{children:T&&E==="end"?xe:w}))]}))});function AN(e){return Vr("MuiMenuItem",e)}Lr("MuiMenuItem",["root","focusVisible","disabled","selected","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const RN=["children","disabled","component","selected","color","orientation","variant","slots","slotProps","id"],LN=e=>{const{focusVisible:t,disabled:r,selected:o,color:c,variant:d}=e,m={root:["root",t&&"focusVisible",r&&"disabled",o&&"selected",c&&`color${bt(c)}`,d&&`variant${bt(d)}`]};return Rr(m,AN,{})},$N=ht(tf,{name:"JoyMenuItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),BN=A.memo(A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyMenuItem"}),c=A.useContext(hd),{children:d,disabled:m=!1,component:l="li",selected:b=!1,color:w="neutral",orientation:T="horizontal",variant:E="plain",slots:z={},slotProps:j={},id:U}=o,V=Wt(o,RN),{variant:K=E,color:O=w}=rv(t.variant,t.color),{getRootProps:L,disabled:R,focusVisible:re}=z4({id:U,disabled:m,rootRef:r}),J=W({},o,{component:l,color:O,disabled:R,focusVisible:re,orientation:T,selected:b,row:c,variant:K}),se=LN(J),ie=W({},V,{component:l,slots:z,slotProps:j}),[Z,ke]=At("root",{ref:r,elementType:$N,getSlotProps:L,externalForwardedProps:ie,className:se.root,ownerState:J});return Y.jsx(ub.Provider,{value:T,children:Y.jsx(Z,W({},ke,{children:d}))})})),Y0=A.forwardRef(function(t,r){const{contextValue:o,id:c}=M4(t.id);return Y.jsx(Cl.Provider,{value:o,children:Y.jsx(BN,W({},t,{id:c,ref:r}))})});function ON(e){return Vr("MuiModalClose",e)}Lr("MuiModalClose",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);var fC;const FN=["component","color","variant","size","onClick","slots","slotProps"],NN=e=>{const{variant:t,color:r,disabled:o,focusVisible:c,size:d}=e,m={root:["root",o&&"disabled",c&&"focusVisible",t&&`variant${bt(t)}`,r&&`color${bt(r)}`,d&&`size${bt(d)}`]};return Rr(m,ON,{})},jN=ht(rf,{name:"JoyModalClose",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r;return W({},e.size==="sm"&&{"--IconButton-size":"1.75rem"},e.size==="md"&&{"--IconButton-size":"2rem"},e.size==="lg"&&{"--IconButton-size":"2.25rem"},{position:"absolute",zIndex:1,top:"var(--ModalClose-inset, 0.625rem)",right:"var(--ModalClose-inset, 0.625rem)",borderRadius:`var(--ModalClose-radius, ${t.vars.radius.sm})`},!((r=t.variants[e.variant])!=null&&(r=r[e.color])!=null&&r.backgroundColor)&&{color:t.vars.palette.text.secondary})}),VN={plain:"plain",outlined:"plain",soft:"soft",solid:"solid"},IE=A.forwardRef(function(t,r){var o,c,d,m,l,b;const w=Ur({props:t,name:"JoyModalClose"}),{component:T="button",color:E="neutral",variant:z="plain",size:j="md",onClick:U,slots:V={},slotProps:K={}}=w,O=Wt(w,FN),L=A.useContext(bE),R=A.useContext(av),re=(o=(c=t.variant)!=null?c:VN[R==null?void 0:R.variant])!=null?o:z,J=(d=(m=t.color)!=null?m:R==null?void 0:R.color)!=null?d:E,se=A.useContext(fb),ie=(l=(b=t.size)!=null?b:se)!=null?l:j,{focusVisible:Z,getRootProps:ke}=ns(W({},w,{rootRef:r})),xe=W({},w,{color:J,component:T,variant:re,size:ie,focusVisible:Z}),Ie=NN(xe),[ze,Le]=At("root",{ref:r,elementType:jN,getSlotProps:ke,externalForwardedProps:W({onClick:Ye=>{L==null||L(Ye,"closeClick"),U==null||U(Ye)}},O,{component:T,slots:V,slotProps:K}),className:Ie.root,ownerState:xe});return Y.jsx(ze,W({},Le,{children:fC||(fC=Y.jsx(rE,{}))}))});function UN(e){return Vr("MuiOption",e)}const HN=Lr("MuiOption",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","highlighted","variantPlain","variantSoft","variantOutlined","variantSolid"]),WN=["component","children","disabled","value","label","variant","color","slots","slotProps"],GN=e=>{const{disabled:t,highlighted:r,selected:o}=e;return Rr({root:["root",t&&"disabled",r&&"highlighted",o&&"selected"]},UN,{})},qN=ht(tf,{name:"JoyOption",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[`${t.variant}Hover`])==null?void 0:r[t.color];return{[`&.${HN.highlighted}:not([aria-selected="true"])`]:{backgroundColor:o==null?void 0:o.backgroundColor}}}),ZN=A.memo(A.forwardRef(function(t,r){var o;const c=Ur({props:t,name:"JoyOption"}),{component:d="li",children:m,disabled:l=!1,value:b,label:w,variant:T="plain",color:E="neutral",slots:z={},slotProps:j={}}=c,U=Wt(c,WN),V=A.useContext(hd),{variant:K=T,color:O=E}=rv(t.variant,t.color),L=A.useRef(null),R=tn(L,r),re=w??(typeof m=="string"?m:(o=L.current)==null?void 0:o.innerText),{getRootProps:J,selected:se,highlighted:ie,index:Z}=j4({disabled:l,label:re,value:b,rootRef:R}),ke=W({},c,{disabled:l,selected:se,highlighted:ie,index:Z,component:d,variant:K,color:O,row:V}),xe=GN(ke),Ie=W({},U,{component:d,slots:z,slotProps:j}),[ze,Le]=At("root",{ref:r,getSlotProps:J,elementType:qN,externalForwardedProps:Ie,className:xe.root,ownerState:ke});return Y.jsx(ze,W({},Le,{children:m}))})),Q0=A.forwardRef(function(t,r){const{contextValue:o}=V4(t.value);return Y.jsx(Cl.Provider,{value:o,children:Y.jsx(ZN,W({},t,{ref:r}))})}),KN=fd(Y.jsx("path",{d:"m12 5.83 2.46 2.46c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 3.7a.9959.9959 0 0 0-1.41 0L8.12 6.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 5.83zm0 12.34-2.46-2.46a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41l3.17 3.18c.39.39 1.02.39 1.41 0l3.17-3.17c.39-.39.39-1.02 0-1.41a.9959.9959 0 0 0-1.41 0L12 18.17z"}),"Unfold");function XN(e){return Vr("MuiSelect",e)}const Fu=Lr("MuiSelect",["root","button","indicator","startDecorator","endDecorator","popper","listbox","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","focusVisible","disabled","expanded","multiple"]);var mC;const JN=["action","autoFocus","children","defaultValue","defaultListboxOpen","disabled","getSerializedValue","placeholder","listboxId","listboxOpen","onChange","onListboxOpenChange","onClose","renderValue","required","value","size","variant","color","startDecorator","endDecorator","indicator","aria-describedby","aria-label","aria-labelledby","id","name","multiple","slots","slotProps"];function YN(e){var t;return Array.isArray(e)?Y.jsx(A.Fragment,{children:e.map(r=>r.label).join(", ")}):(t=e==null?void 0:e.label)!=null?t:""}const QN=[{name:"offset",options:{offset:[0,4]}},{name:"equalWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:e})=>{e.styles.popper.width=`${e.rects.reference.width}px`}}],ej=e=>{const{color:t,disabled:r,focusVisible:o,size:c,variant:d,open:m,multiple:l}=e,b={root:["root",r&&"disabled",o&&"focusVisible",m&&"expanded",d&&`variant${bt(d)}`,t&&`color${bt(t)}`,c&&`size${bt(c)}`,l&&"multiple"],button:["button"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],indicator:["indicator",m&&"expanded"],listbox:["listbox",m&&"expanded",r&&"disabled"]};return Rr(b,XN,{})},tj=ht("div",{name:"JoySelect",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o,c,d,m;const l=(r=e.variants[`${t.variant}`])==null?void 0:r[t.color],{borderRadius:b}=pd({theme:e,ownerState:t},["borderRadius"]);return[W({"--Select-radius":e.vars.radius.sm,"--Select-gap":"0.5rem","--Select-placeholderOpacity":.64,"--Select-decoratorColor":e.vars.palette.text.icon,"--Select-focusedThickness":e.vars.focus.thickness,"--Select-focusedHighlight":(o=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:o[500],'&:not([data-inverted-colors="false"])':W({},t.instanceColor&&{"--_Select-focusedHighlight":(c=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:c[500]},{"--Select-focusedHighlight":e.vars.palette.focusVisible}),"--Select-indicatorColor":l!=null&&l.backgroundColor?l==null?void 0:l.color:e.vars.palette.text.tertiary},t.size==="sm"&&{"--Select-minHeight":"2rem","--Select-paddingInline":"0.5rem","--Select-decoratorChildHeight":"min(1.5rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Select-minHeight":"2.25rem","--Select-paddingInline":"0.75rem","--Select-decoratorChildHeight":"min(1.75rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Select-minHeight":"2.75rem","--Select-paddingInline":"1rem","--Select-decoratorChildHeight":"min(2.375rem, var(--Select-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Select-decoratorChildOffset":"min(calc(var(--Select-paddingInline) - (var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2), var(--Select-paddingInline))","--_Select-paddingBlock":"max((var(--Select-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Select-decoratorChildHeight)) / 2, 0px)","--Select-decoratorChildRadius":"max(var(--Select-radius) - var(--variant-borderWidth, 0px) - var(--_Select-paddingBlock), min(var(--_Select-paddingBlock) + var(--variant-borderWidth, 0px), var(--Select-radius) / 2))","--Button-minHeight":"var(--Select-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Select-decoratorChildHeight)","--Button-radius":"var(--Select-decoratorChildRadius)","--IconButton-radius":"var(--Select-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Select-minHeight)",position:"relative",display:"flex",alignItems:"center",borderRadius:"var(--Select-radius)",cursor:"pointer"},!(l!=null&&l.backgroundColor)&&{backgroundColor:e.vars.palette.background.surface},t.size&&{paddingBlock:{sm:2,md:3,lg:4}[t.size]},{paddingInline:"var(--Select-paddingInline)"},e.typography[`body-${t.size}`],l,{"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)"},[`&.${Fu.focusVisible}`]:{"--Select-indicatorColor":l==null?void 0:l.color,"&::before":{boxShadow:"inset 0 0 0 var(--Select-focusedThickness) var(--Select-focusedHighlight)"}},[`&.${Fu.disabled}`]:{"--Select-indicatorColor":"inherit"}}),{"&:hover":(d=e.variants[`${t.variant}Hover`])==null?void 0:d[t.color],[`&.${Fu.disabled}`]:(m=e.variants[`${t.variant}Disabled`])==null?void 0:m[t.color]},b!==void 0&&{"--Select-radius":b}]}),rj=ht("button",{name:"JoySelect",slot:"Button",overridesResolver:(e,t)=>t.button})(({ownerState:e})=>W({border:0,outline:0,background:"none",padding:0,fontSize:"inherit",color:"inherit",alignSelf:"stretch",display:"flex",alignItems:"center",flex:1,fontFamily:"inherit",cursor:"pointer",whiteSpace:"nowrap",overflow:"hidden"},(e.value===null||e.value===void 0)&&{opacity:"var(--Select-placeholderOpacity)"},{"&::before":{content:'""',display:"block",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))",right:"calc(-1 * var(--variant-borderWidth, 0px))",bottom:"calc(-1 * var(--variant-borderWidth, 0px))",borderRadius:"var(--Select-radius)"}})),nj=ht(ef,{name:"JoySelect",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[t.variant])==null?void 0:r[t.color];return W({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(o==null?void 0:o.backgroundColor)||(o==null?void 0:o.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},Qy,{minWidth:"max-content",maxHeight:"44vh",overflow:"auto",outline:0,boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`,zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`},!(o!=null&&o.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup})}),ij=ht("span",{name:"JoySelect",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Button-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Select-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Select-paddingInline) / -4)",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineEnd:"var(--Select-gap)"}),oj=ht("span",{name:"JoySelect",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Button-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Select-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Select-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",color:"var(--Select-decoratorColor)",marginInlineStart:"var(--Select-gap)"}),aj=ht("span",{name:"JoySelect",slot:"Indicator"})(({ownerState:e,theme:t})=>W({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.lg},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.xl},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl2},{"--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,display:"inherit",alignItems:"center",marginInlineStart:"var(--Select-gap)",marginInlineEnd:"calc(var(--Select-paddingInline) / -4)",[`.${Fu.endDecorator} + &`]:{marginInlineStart:"calc(var(--Select-gap) / 2)"},[`&.${Fu.expanded}, .${Fu.disabled} > &`]:{"--Icon-color":"currentColor"}})),sj=A.forwardRef(function(t,r){var o,c,d,m,l,b,w;const T=Ur({props:t,name:"JoySelect"}),E=T,{action:z,autoFocus:j,children:U,defaultValue:V,defaultListboxOpen:K=!1,disabled:O,getSerializedValue:L,placeholder:R,listboxId:re,listboxOpen:J,onChange:se,onListboxOpenChange:ie,onClose:Z,renderValue:ke,required:xe=!1,value:Ie,size:ze="md",variant:Le="outlined",color:Ye="neutral",startDecorator:Ge,endDecorator:Te,indicator:Fe=mC||(mC=Y.jsx(KN,{})),"aria-describedby":$e,"aria-label":Oe,"aria-labelledby":Qe,id:at,name:ut,multiple:Pt=!1,slots:wt={},slotProps:zt={}}=E,er=Wt(E,JN),lt=A.useContext(ov),qe=(o=(c=t.disabled)!=null?c:lt==null?void 0:lt.disabled)!=null?o:O,pt=(d=(m=t.size)!=null?m:lt==null?void 0:lt.size)!=null?d:ze,yt=(l=t.color)!=null?l:lt!=null&&lt.error?"danger":(b=lt==null?void 0:lt.color)!=null?b:Ye,or=ke??YN,[Kt,Mr]=A.useState(null),lr=A.useRef(null),Vt=A.useRef(null),Et=tn(r,lr);A.useImperativeHandle(z,()=>({focusVisible:()=>{var G;(G=Vt.current)==null||G.focus()}}),[]),A.useEffect(()=>{Mr(lr.current)},[]),A.useEffect(()=>{j&&Vt.current.focus()},[j]);const ur=A.useCallback(G=>{ie==null||ie(G),G||Z==null||Z()},[Z,ie]),{buttonActive:Mt,buttonFocusVisible:Er,contextValue:Ve,disabled:Sr,getButtonProps:Dr,getListboxProps:qt,getHiddenInputProps:rr,getOptionMetadata:Or,open:Hr,value:dr}=aO({buttonRef:Vt,defaultOpen:K,defaultValue:V,disabled:qe,getSerializedValue:L,listboxId:re,multiple:Pt,name:ut,required:xe,onChange:se,onOpenChange:ur,open:J,value:Ie}),cr=W({},T,{active:Mt,defaultListboxOpen:K,disabled:Sr,focusVisible:Er,open:Hr,renderValue:or,value:dr,size:pt,variant:Le,color:yt}),Gt=ej(cr),sr=W({},er,{slots:wt,slotProps:zt}),Tr=A.useMemo(()=>{let G;if(Pt)G=dr.map(de=>Or(de)).filter(de=>de!==void 0);else{var te;G=(te=Or(dr))!=null?te:null}return G},[Or,dr,Pt]),[Be,xt]=At("root",{ref:Et,className:Gt.root,elementType:tj,externalForwardedProps:sr,ownerState:cr}),[St,tr]=At("button",{additionalProps:{"aria-describedby":$e??(lt==null?void 0:lt["aria-describedby"]),"aria-label":Oe,"aria-labelledby":Qe??(lt==null?void 0:lt.labelId),"aria-required":xe?"true":void 0,id:at??(lt==null?void 0:lt.htmlFor),name:ut},className:Gt.button,elementType:rj,externalForwardedProps:sr,getSlotProps:Dr,ownerState:cr}),[vn,nt]=At("listbox",{additionalProps:{anchorEl:Kt,open:Hr,placement:"bottom",keepMounted:!0},className:Gt.listbox,elementType:nj,externalForwardedProps:sr,getSlotProps:qt,ownerState:W({},cr,{nesting:!1,row:!1,wrap:!1}),getSlotOwnerState:G=>({size:G.size||pt,variant:G.variant||Le,color:G.color||(G.disablePortal?yt:Ye),disableColorInversion:!G.disablePortal})}),[Yt,Ot]=At("startDecorator",{className:Gt.startDecorator,elementType:ij,externalForwardedProps:sr,ownerState:cr}),[hr,yr]=At("endDecorator",{className:Gt.endDecorator,elementType:oj,externalForwardedProps:sr,ownerState:cr}),[Lt,Fr]=At("indicator",{className:Gt.indicator,elementType:aj,externalForwardedProps:sr,ownerState:cr}),he=A.useMemo(()=>[...QN,...nt.modifiers||[]],[nt.modifiers]);let H=R;return(Array.isArray(Tr)&&Tr.length>0||!Array.isArray(Tr)&&Tr)&&(H=or(Tr)),Y.jsxs(A.Fragment,{children:[Y.jsxs(Be,W({},xt,{children:[Ge&&Y.jsx(Yt,W({},Ot,{children:Ge})),Y.jsx(St,W({},tr,{children:H})),Te&&Y.jsx(hr,W({},yr,{children:Te})),Fe&&Y.jsx(Lt,W({},Fr,{children:Fe})),Y.jsx("input",W({},rr()))]})),Kt&&Y.jsx(vn,W({},nt,{className:oi(nt.className),modifiers:he},!((w=T.slots)!=null&&w.listbox)&&{as:Xy,slots:{root:nt.as||"ul"}},{children:Y.jsx(sO,{value:Ve,children:Y.jsx(nv,{variant:Le,color:Ye,children:Y.jsx(Yy.Provider,{value:"select",children:Y.jsx(Qp,{nested:!0,children:U})})})})}))]})});function lj(e){return Vr("MuiSheet",e)}Lr("MuiSheet",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const cj=["className","color","component","variant","invertedColors","slots","slotProps"],uj=e=>{const{variant:t,color:r}=e,o={root:["root",t&&`variant${bt(t)}`,r&&`color${bt(r)}`]};return Rr(o,lj,{})},dj=ht("div",{name:"JoySheet",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r,o;const c=(r=e.variants[t.variant])==null?void 0:r[t.color],{borderRadius:d,bgcolor:m,backgroundColor:l,background:b}=pd({theme:e,ownerState:t},["borderRadius","bgcolor","backgroundColor","background"]),w=xl(e,`palette.${m}`)||m||xl(e,`palette.${l}`)||l||b||(c==null?void 0:c.backgroundColor)||(c==null?void 0:c.background)||e.vars.palette.background.surface;return[W({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--ListItem-stickyBackground":w==="transparent"?"initial":w,"--Sheet-background":w==="transparent"?"initial":w},d!==void 0&&{"--List-radius":`calc(${d} - var(--variant-borderWidth, 0px))`,"--unstable_actionRadius":`calc(${d} - var(--variant-borderWidth, 0px))`},{backgroundColor:e.vars.palette.background.surface,position:"relative"}),W({},e.typography["body-md"],t.variant==="solid"&&t.color&&t.invertedColors&&ev(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&tv(t.color)(e),(o=e.variants[t.variant])==null?void 0:o[t.color],c)]}),TE=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoySheet"}),{className:c,color:d="neutral",component:m="div",variant:l="plain",invertedColors:b=!1,slots:w={},slotProps:T={}}=o,E=Wt(o,cj),z=W({},o,{color:d,component:m,invertedColors:b,variant:l}),j=uj(z),U=W({},E,{component:m,slots:w,slotProps:T}),[V,K]=At("root",{ref:r,className:oi(j.root,c),elementType:dj,externalForwardedProps:U,ownerState:z});return Y.jsx(V,W({},K))}),nf=_5({createStyledComponent:ht("div",{name:"JoyStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>Ur({props:e,name:"JoyStack"})});function hj(e){return Vr("MuiTab",e)}const pj=Lr("MuiTab",["root","disabled","focusVisible","selected","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]),fj=["action","children","value","disabled","onChange","onClick","onFocus","component","orientation","variant","color","disableIndicator","indicatorPlacement","indicatorInset","slots","slotProps"],mj=e=>{const{selected:t,disabled:r,focusVisible:o,variant:c,color:d,orientation:m}=e,l={root:["root",m,r&&"disabled",o&&"focusVisible",t&&"selected",c&&`variant${bt(c)}`,d&&`color${bt(d)}`]};return Rr(l,hj,{})},gj=ht(tf,{name:"JoyTab",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>[{flex:"initial",justifyContent:e.row?"center":"initial","--unstable_ListItemDecorator-alignItems":"center","--unstable_offset":"min(calc(-1 * var(--variant-borderWidth, 0px)), -1px)"},!e.disableIndicator&&{'&[aria-selected="true"]':{"--Tab-indicatorColor":"currentColor",zIndex:1},"&::after":{content:'""',display:"block",position:"absolute",margin:"auto",background:"var(--Tab-indicatorColor)",borderRadius:"var(--Tab-indicatorRadius)"}},!e.disableIndicator&&e.indicatorPlacement==="bottom"&&{paddingBottom:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",bottom:"calc(-1px - var(--unstable_TabList-underlineBottom, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="top"&&{paddingTop:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorThickness)",width:"var(--Tab-indicatorSize)",left:e.indicatorInset?"var(--ListItem-paddingLeft)":"var(--unstable_offset)",right:e.indicatorInset?"var(--ListItem-paddingRight)":"var(--unstable_offset)",top:"calc(-1px - var(--unstable_TabList-underlineTop, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="right"&&{paddingRight:"calc(var(--ListItem-paddingRight) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",right:"calc(-1px - var(--unstable_TabList-underlineRight, 0px))"}},!e.disableIndicator&&e.indicatorPlacement==="left"&&{paddingLeft:"calc(var(--ListItem-paddingLeft) + var(--Tab-indicatorThickness) - 1px)","&::after":{height:"var(--Tab-indicatorSize)",width:"var(--Tab-indicatorThickness)",top:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",bottom:e.indicatorInset?"var(--ListItem-paddingY)":"var(--unstable_offset)",left:"calc(-1px - var(--unstable_TabList-underlineLeft, 0px))"}}]),e_=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyTab"}),c=A.useContext(hd),{action:d,children:m,disabled:l=!1,component:b="button",orientation:w="horizontal",variant:T="plain",color:E="neutral",disableIndicator:z=!1,indicatorPlacement:j=c?"bottom":"right",indicatorInset:U=!1,slots:V={},slotProps:K={}}=o,O=Wt(o,fj),L=A.useRef(),R=tn(L,r),{active:re,focusVisible:J,setFocusVisible:se,selected:ie,getRootProps:Z}=yO(W({},o,{rootRef:R}));A.useImperativeHandle(d,()=>({focusVisible:()=>{se(!0),L.current.focus()}}),[se]);const ke=W({},o,{disableIndicator:z,indicatorPlacement:j,indicatorInset:U,orientation:w,row:c,active:re,focusVisible:J,disabled:l,selected:ie,variant:T,color:E}),xe=mj(ke),Ie=W({},O,{component:b,slots:V,slotProps:K}),[ze,Le]=At("root",{ref:r,elementType:gj,getSlotProps:Z,externalForwardedProps:Ie,ownerState:ke,className:xe.root});return Y.jsx(ub.Provider,{value:w,children:Y.jsx(ze,W({},Le,{children:m}))})}),gb=A.createContext("md");function yj(e){return Vr("MuiTabList",e)}Lr("MuiTabList",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const vj=["component","children","variant","color","size","disableUnderline","underlinePlacement","tabFlex","sticky","slots","slotProps"],_j=e=>{const{orientation:t,size:r,variant:o,color:c}=e,d={root:["root",t,o&&`variant${bt(o)}`,c&&`color${bt(c)}`,r&&`size${bt(r)}`]};return Rr(d,yj,{})},xj=ht(ef,{name:"JoyTabList",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;const o=(r=e.variants[t.variant])==null?void 0:r[t.color];return W({"--List-gap":"0px","--ListDivider-gap":"0px","--ListItem-paddingX":"var(--Tabs-spacing)","--ListItem-gap":"0.375rem","--unstable_TabList-hasUnderline":t.disableUnderline?"var(--unknown,)":"initial"},Qy,{flexGrow:"initial",flexDirection:t.orientation==="vertical"?"column":"row",borderRadius:"var(--List-radius, 0px)",padding:"var(--List-padding, 0px)",zIndex:1},t.sticky&&{position:"sticky",top:t.sticky==="top"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",bottom:t.sticky==="bottom"?"calc(-1 * var(--Tabs-padding, 0px))":"initial",backgroundColor:(o==null?void 0:o.backgroundColor)||`var(--TabList-stickyBackground, ${e.vars.palette.background.body})`},!t.disableUnderline&&W({},t.underlinePlacement==="bottom"&&{"--unstable_TabList-underlineBottom":"1px",paddingBottom:1,boxShadow:`inset 0 -1px ${e.vars.palette.divider}`},t.underlinePlacement==="top"&&{"--unstable_TabList-underlineTop":"1px",paddingTop:1,boxShadow:`inset 0 1px ${e.vars.palette.divider}`},t.underlinePlacement==="right"&&{"--unstable_TabList-underlineRight":"1px",paddingRight:1,boxShadow:`inset -1px 0 ${e.vars.palette.divider}`},t.underlinePlacement==="left"&&{"--unstable_TabList-underlineLeft":"1px",paddingLeft:1,boxShadow:`inset 1px 0 ${e.vars.palette.divider}`}),t.tabFlex&&{[`& .${pj.root}`]:{flex:t.tabFlex}})}),bj=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyTabList"}),c=A.useContext(gb),{isRtl:d,orientation:m,getRootProps:l,contextValue:b}=fO({rootRef:r}),{component:w="div",children:T,variant:E="plain",color:z="neutral",size:j,disableUnderline:U=!1,underlinePlacement:V=m==="horizontal"?"bottom":"right",tabFlex:K,sticky:O,slots:L={},slotProps:R={}}=o,re=Wt(o,vj),se=W({},o,{isRtl:d,orientation:m,variant:E,color:z,size:j??c,sticky:O,tabFlex:K,nesting:!1,disableUnderline:U,underlinePlacement:V}),ie=_j(se),Z=W({},re,{component:w,slots:L,slotProps:R}),[ke,xe]=At("root",{ref:r,elementType:xj,getSlotProps:l,externalForwardedProps:Z,ownerState:se,className:ie.root});return Y.jsx(ke,W({},xe,{children:Y.jsx(mO,{value:b,children:Y.jsx(Qp,{row:m==="horizontal",nested:!0,children:T})})}))});function wj(e){return Vr("MuiTabPanel",e)}Lr("MuiTabPanel",["root","hidden","sizeSm","sizeMd","sizeLg","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const Sj=["children","value","component","color","variant","size","slots","slotProps","keepMounted"],Cj=e=>{const{hidden:t,size:r,variant:o,color:c,orientation:d}=e,m={root:["root",t&&"hidden",r&&`size${bt(r)}`,d,o&&`variant${bt(o)}`,c&&`color${bt(c)}`,r&&`size${bt(r)}`]};return Rr(m,wj,{})},kj=ht("div",{name:"JoyTabPanel",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var r;return W({display:t.hidden?"none":"block",padding:"var(--Tabs-spacing)",flexGrow:1,fontFamily:e.vars.fontFamily.body},e.typography[`body-${t.size}`],(r=e.variants[t.variant])==null?void 0:r[t.color])}),t_=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyTabPanel"}),{orientation:c}=Jy()||{orientation:"horizontal"},d=A.useContext(gb),{children:m,value:l=0,component:b,color:w="neutral",variant:T="plain",size:E,slots:z={},slotProps:j={},keepMounted:U=!1}=o,V=Wt(o,Sj),{hidden:K,getRootProps:O}=hO(W({},o,{value:l})),R=W({},o,{orientation:c,hidden:K,size:E??d,color:w,variant:T}),re=Cj(R),J=W({},V,{component:b,slots:z,slotProps:j}),[se,ie]=At("root",{ref:r,elementType:kj,getSlotProps:O,externalForwardedProps:J,additionalProps:{role:"tabpanel",ref:r,as:b},ownerState:R,className:re.root});return U?Y.jsx(se,W({},ie,{children:m})):Y.jsx(se,W({},ie,{children:!K&&m}))});function Ij(e){return Vr("MuiTabs",e)}Lr("MuiTabs",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);const Tj=["children","value","defaultValue","orientation","direction","component","onChange","selectionFollowsFocus","variant","color","size","slots","slotProps"],Pj=e=>{const{orientation:t,variant:r,color:o,size:c}=e,d={root:["root",t,r&&`variant${bt(r)}`,o&&`color${bt(o)}`,c&&`size${bt(c)}`]};return Rr(d,Ij,{})},Ej=ht("div",{name:"JoyTabs",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o;const c=(r=t.variants[e.variant])==null?void 0:r[e.color],{bgcolor:d,backgroundColor:m,background:l,p:b,padding:w}=pd({theme:t,ownerState:e},["bgcolor","backgroundColor","background","p","padding"]),T=xl(t,`palette.${d}`)||d||xl(t,`palette.${m}`)||m||l||(c==null?void 0:c.backgroundColor)||(c==null?void 0:c.background)||t.vars.palette.background.surface;return W({},e.size==="sm"&&{"--Tabs-spacing":"0.75rem"},e.size==="md"&&{"--Tabs-spacing":"1rem"},e.size==="lg"&&{"--Tabs-spacing":"1.25rem"},{"--Tab-indicatorThickness":"2px","--Icon-color":e.color!=="neutral"||e.variant==="solid"?"currentColor":t.vars.palette.text.icon,"--TabList-stickyBackground":T==="transparent"?"initial":T,display:"flex",flexDirection:"column"},e.orientation==="vertical"&&{flexDirection:"row"},{backgroundColor:t.vars.palette.background.surface,position:"relative"},t.typography[`body-${e.size}`],(o=t.variants[e.variant])==null?void 0:o[e.color],b!==void 0&&{"--Tabs-padding":b},w!==void 0&&{"--Tabs-padding":w})}),gC=A.forwardRef(function(t,r){const o=Ur({props:t,name:"JoyTabs"}),{children:c,value:d,defaultValue:m,orientation:l="horizontal",direction:b="ltr",component:w,variant:T="plain",color:E="neutral",size:z="md",slots:j={},slotProps:U={}}=o,V=Wt(o,Tj),K=m||(d===void 0?0:void 0),{contextValue:O}=cO(W({},o,{orientation:l,defaultValue:K})),L=W({},o,{orientation:l,direction:b,variant:T,color:E,size:z}),R=Pj(L),re=W({},V,{component:w,slots:j,slotProps:U}),[J,se]=At("root",{ref:r,elementType:Ej,externalForwardedProps:re,additionalProps:{ref:r,as:w},ownerState:L,className:R.root});return Y.jsx(J,W({},se,{children:Y.jsx(uO,{value:O,children:Y.jsx(gb.Provider,{value:z,children:c})})}))});function zj(e){return Vr("MuiTooltip",e)}Lr("MuiTooltip",["root","tooltipArrow","arrow","touch","placementLeft","placementRight","placementTop","placementBottom","colorPrimary","colorDanger","colorNeutral","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);const Mj=["children","className","component","arrow","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","disablePortal","direction","keepMounted","modifiers","placement","title","color","variant","size","slots","slotProps"],Dj=e=>{const{arrow:t,variant:r,color:o,size:c,placement:d,touch:m}=e,l={root:["root",t&&"tooltipArrow",m&&"touch",c&&`size${bt(c)}`,o&&`color${bt(o)}`,r&&`variant${bt(r)}`,`tooltipPlacement${bt(d.split("-")[0])}`],arrow:["arrow"]};return Rr(l,zj,{})},Aj=ht("div",{name:"JoyTooltip",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var r,o,c;const d=(r=t.variants[e.variant])==null?void 0:r[e.color];return W({},e.size==="sm"&&{"--Icon-fontSize":t.vars.fontSize.md,"--Tooltip-arrowSize":"8px",padding:t.spacing(.25,.625)},e.size==="md"&&{"--Icon-fontSize":t.vars.fontSize.lg,"--Tooltip-arrowSize":"10px",padding:t.spacing(.5,.75)},e.size==="lg"&&{"--Icon-fontSize":t.vars.fontSize.xl,"--Tooltip-arrowSize":"12px",padding:t.spacing(.75,1)},{zIndex:t.vars.zIndex.tooltip,borderRadius:t.vars.radius.sm,boxShadow:t.shadow.sm,wordWrap:"break-word",position:"relative"},e.disableInteractive&&{pointerEvents:"none"},t.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[e.size]}`],d,!d.backgroundColor&&{backgroundColor:t.vars.palette.background.surface},{"&::before":{content:'""',display:"block",position:"absolute",width:(o=e.placement)!=null&&o.match(/(top|bottom)/)?"100%":"calc(10px + var(--variant-borderWidth, 0px))",height:(c=e.placement)!=null&&c.match(/(top|bottom)/)?"calc(10px + var(--variant-borderWidth, 0px))":"100%"},'&[data-popper-placement*="bottom"]::before':{top:0,left:0,transform:"translateY(-100%)"},'&[data-popper-placement*="left"]::before':{top:0,right:0,transform:"translateX(100%)"},'&[data-popper-placement*="right"]::before':{top:0,left:0,transform:"translateX(-100%)"},'&[data-popper-placement*="top"]::before':{bottom:0,left:0,transform:"translateY(100%)"}})}),Rj=ht("span",{name:"JoyTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e,ownerState:t})=>{var r,o,c;const d=(r=e.variants[t.variant])==null?void 0:r[t.color];return{"--unstable_Tooltip-arrowRotation":0,width:"var(--Tooltip-arrowSize)",height:"var(--Tooltip-arrowSize)",boxSizing:"border-box","&::before":{content:'""',display:"block",position:"absolute",width:0,height:0,border:"calc(var(--Tooltip-arrowSize) / 2) solid",borderLeftColor:"transparent",borderBottomColor:"transparent",borderTopColor:(o=d==null?void 0:d.backgroundColor)!=null?o:e.vars.palette.background.surface,borderRightColor:(c=d==null?void 0:d.backgroundColor)!=null?c:e.vars.palette.background.surface,borderRadius:"0px 2px 0px 0px",boxShadow:`var(--variant-borderWidth, 0px) calc(-1 * var(--variant-borderWidth, 0px)) 0px 0px ${d.borderColor}`,transformOrigin:"center center",transform:"rotate(calc(-45deg + 90deg * var(--unstable_Tooltip-arrowRotation)))"},'[data-popper-placement*="bottom"] &':{top:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="top"] &':{"--unstable_Tooltip-arrowRotation":2,bottom:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="left"] &':{"--unstable_Tooltip-arrowRotation":1,right:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"},'[data-popper-placement*="right"] &':{"--unstable_Tooltip-arrowRotation":3,left:"calc(0.5px + var(--Tooltip-arrowSize) * -1 / 2)"}}});let Bm=!1;const yC=new Hp;let $h={x:0,y:0};function vC(e,t){return r=>{t&&t(r),e(r)}}function _C(e,t){return(r,...o)=>{t&&t(r,...o),e(r,...o)}}const Lj=A.forwardRef(function(t,r){var o;const c=Ur({props:t,name:"JoyTooltip"}),{children:d,className:m,component:l,arrow:b=!1,describeChild:w=!1,disableFocusListener:T=!1,disableHoverListener:E=!1,disableInteractive:z=!1,disableTouchListener:j=!1,enterDelay:U=100,enterNextDelay:V=0,enterTouchDelay:K=700,followCursor:O=!1,id:L,leaveDelay:R=0,leaveTouchDelay:re=1500,onClose:J,onOpen:se,open:ie,disablePortal:Z,direction:ke,keepMounted:xe,modifiers:Ie,placement:ze="bottom",title:Le,color:Ye="neutral",variant:Ge="solid",size:Te="md",slots:Fe={},slotProps:$e={}}=c,Oe=Wt(c,Mj),[Qe,at]=A.useState(),[ut,Pt]=A.useState(null),wt=A.useRef(!1),zt=z||O,er=vm(),lt=vm(),qe=vm(),pt=vm(),[yt,or]=Du({controlled:ie,default:!1,name:"Tooltip",state:"open"});let Kt=yt;const Mr=ko(L),lr=A.useRef(),Vt=ll(()=>{lr.current!==void 0&&(document.body.style.WebkitUserSelect=lr.current,lr.current=void 0),pt.clear()});A.useEffect(()=>Vt,[Vt]);const Et=te=>{yC.clear(),Bm=!0,or(!0),se&&!Kt&&se(te)},ur=ll(te=>{yC.start(800+R,()=>{Bm=!1}),or(!1),J&&Kt&&J(te),er.start(150,()=>{wt.current=!1})}),Mt=te=>{wt.current&&te.type!=="touchstart"||(Qe&&Qe.removeAttribute("title"),lt.clear(),qe.clear(),U||Bm&&V?lt.start(Bm?V:U,()=>{Et(te)}):Et(te))},Er=te=>{lt.clear(),qe.start(R,()=>{ur(te)})},{isFocusVisibleRef:Ve,onBlur:Sr,onFocus:Dr,ref:qt}=r1(),[,rr]=A.useState(!1),Or=te=>{Sr(te),Ve.current===!1&&(rr(!1),Er(te))},Hr=te=>{Qe||at(te.currentTarget),Dr(te),Ve.current===!0&&(rr(!0),Mt(te))},dr=te=>{wt.current=!0;const de=d.props;de.onTouchStart&&de.onTouchStart(te)},cr=te=>{dr(te),qe.clear(),er.clear(),Vt(),lr.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",pt.start(K,()=>{document.body.style.WebkitUserSelect=lr.current,Mt(te)})},Gt=te=>{d.props.onTouchEnd&&d.props.onTouchEnd(te),Vt(),qe.start(re,()=>{ur(te)})};A.useEffect(()=>{if(!Kt)return;function te(de){(de.key==="Escape"||de.key==="Esc")&&ur(de)}return document.addEventListener("keydown",te),()=>{document.removeEventListener("keydown",te)}},[ur,Kt]);const sr=tn(at,r),Tr=tn(qt,sr),Be=tn(d.ref,Tr);typeof Le!="number"&&!Le&&(Kt=!1);const xt=A.useRef(null),St=te=>{const de=d.props;de.onMouseMove&&de.onMouseMove(te),$h={x:te.clientX,y:te.clientY},xt.current&&xt.current.update()},tr={},vn=typeof Le=="string";w?(tr.title=!Kt&&vn&&!E?Le:null,tr["aria-describedby"]=Kt?Mr:null):(tr["aria-label"]=vn?Le:null,tr["aria-labelledby"]=Kt&&!vn?Mr:null);const nt=W({},tr,Oe,{component:l},d.props,{className:oi(m,d.props.className),onTouchStart:dr,ref:Be},O?{onMouseMove:St}:{}),Yt={};j||(nt.onTouchStart=cr,nt.onTouchEnd=Gt),E||(nt.onMouseOver=vC(Mt,nt.onMouseOver),nt.onMouseLeave=vC(Er,nt.onMouseLeave),zt||(Yt.onMouseOver=Mt,Yt.onMouseLeave=Er)),T||(nt.onFocus=_C(Hr,nt.onFocus),nt.onBlur=_C(Or,nt.onBlur),zt||(Yt.onFocus=Hr,Yt.onBlur=Or));const Ot=W({},c,{arrow:b,disableInteractive:zt,placement:ze,touch:wt.current,color:Ye,variant:Ge,size:Te}),hr=Dj(Ot),yr=W({},Oe,{component:l,slots:Fe,slotProps:$e}),Lt=A.useMemo(()=>[{name:"arrow",enabled:!!ut,options:{element:ut,padding:6}},{name:"offset",options:{offset:[0,10]}},...Ie||[]],[ut,Ie]),[Fr,he]=At("root",{additionalProps:W({id:Mr,popperRef:xt,placement:ze,anchorEl:O?{getBoundingClientRect:()=>({top:$h.y,left:$h.x,right:$h.x,bottom:$h.y,width:0,height:0})}:Qe,open:Qe?Kt:!1,disablePortal:Z,keepMounted:xe,direction:ke,modifiers:Lt},Yt),ref:null,className:hr.root,elementType:Aj,externalForwardedProps:yr,ownerState:Ot}),[H,G]=At("arrow",{ref:Pt,className:hr.arrow,elementType:Rj,externalForwardedProps:yr,ownerState:Ot});return Y.jsxs(A.Fragment,{children:[A.isValidElement(d)&&A.cloneElement(d,nt),Y.jsxs(Fr,W({},he,!((o=c.slots)!=null&&o.root)&&{as:Xy,slots:{root:l||"div"}},{children:[Le,b?Y.jsx(H,W({},G)):null]}))]})});var PE,xC=dd;PE=xC.createRoot,xC.hydrateRoot;/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function An(){return An=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},An.apply(this,arguments)}var ri;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ri||(ri={}));const bC="popstate";function $j(e){e===void 0&&(e={});function t(o,c){let{pathname:d,search:m,hash:l}=o.location;return Rp("",{pathname:d,search:m,hash:l},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function r(o,c){return typeof c=="string"?c:of(c)}return Oj(t,r,null,e)}function Ir(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function rd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Bj(){return Math.random().toString(36).substr(2,8)}function wC(e,t){return{usr:e.state,key:e.key,idx:t}}function Rp(e,t,r,o){return r===void 0&&(r=null),An({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?El(t):t,{state:r,key:t&&t.key||o||Bj()})}function of(e){let{pathname:t="/",search:r="",hash:o=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function El(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function Oj(e,t,r,o){o===void 0&&(o={});let{window:c=document.defaultView,v5Compat:d=!1}=o,m=c.history,l=ri.Pop,b=null,w=T();w==null&&(w=0,m.replaceState(An({},m.state,{idx:w}),""));function T(){return(m.state||{idx:null}).idx}function E(){l=ri.Pop;let K=T(),O=K==null?null:K-w;w=K,b&&b({action:l,location:V.location,delta:O})}function z(K,O){l=ri.Push;let L=Rp(V.location,K,O);w=T()+1;let R=wC(L,w),re=V.createHref(L);try{m.pushState(R,"",re)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;c.location.assign(re)}d&&b&&b({action:l,location:V.location,delta:1})}function j(K,O){l=ri.Replace;let L=Rp(V.location,K,O);w=T();let R=wC(L,w),re=V.createHref(L);m.replaceState(R,"",re),d&&b&&b({action:l,location:V.location,delta:0})}function U(K){let O=c.location.origin!=="null"?c.location.origin:c.location.href,L=typeof K=="string"?K:of(K);return L=L.replace(/ $/,"%20"),Ir(O,"No window.location.(origin|href) available to create URL for href: "+L),new URL(L,O)}let V={get action(){return l},get location(){return e(c,m)},listen(K){if(b)throw new Error("A history only accepts one active listener");return c.addEventListener(bC,E),b=K,()=>{c.removeEventListener(bC,E),b=null}},createHref(K){return t(c,K)},createURL:U,encodeLocation(K){let O=U(K);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:z,replace:j,go(K){return m.go(K)}};return V}var cn;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(cn||(cn={}));const Fj=new Set(["lazy","caseSensitive","path","id","index","children"]);function Nj(e){return e.index===!0}function Lp(e,t,r,o){return r===void 0&&(r=[]),o===void 0&&(o={}),e.map((c,d)=>{let m=[...r,String(d)],l=typeof c.id=="string"?c.id:m.join("-");if(Ir(c.index!==!0||!c.children,"Cannot specify children on an index route"),Ir(!o[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),Nj(c)){let b=An({},c,t(c),{id:l});return o[l]=b,b}else{let b=An({},c,t(c),{id:l,children:void 0});return o[l]=b,c.children&&(b.children=Lp(c.children,t,m,o)),b}})}function nc(e,t,r){return r===void 0&&(r="/"),og(e,t,r,!1)}function og(e,t,r,o){let c=typeof t=="string"?El(t):t,d=af(c.pathname||"/",r);if(d==null)return null;let m=EE(e);Vj(m);let l=null;for(let b=0;l==null&&b<m.length;++b){let w=Qj(d);l=Jj(m[b],w,o)}return l}function jj(e,t){let{route:r,pathname:o,params:c}=e;return{id:r.id,pathname:o,params:c,data:t[r.id],handle:r.handle}}function EE(e,t,r,o){t===void 0&&(t=[]),r===void 0&&(r=[]),o===void 0&&(o="");let c=(d,m,l)=>{let b={relativePath:l===void 0?d.path||"":l,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};b.relativePath.startsWith("/")&&(Ir(b.relativePath.startsWith(o),'Absolute route path "'+b.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),b.relativePath=b.relativePath.slice(o.length));let w=_l([o,b.relativePath]),T=r.concat(b);d.children&&d.children.length>0&&(Ir(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),EE(d.children,t,T,w)),!(d.path==null&&!d.index)&&t.push({path:w,score:Kj(w,d.index),routesMeta:T})};return e.forEach((d,m)=>{var l;if(d.path===""||!((l=d.path)!=null&&l.includes("?")))c(d,m);else for(let b of zE(d.path))c(d,m,b)}),t}function zE(e){let t=e.split("/");if(t.length===0)return[];let[r,...o]=t,c=r.endsWith("?"),d=r.replace(/\?$/,"");if(o.length===0)return c?[d,""]:[d];let m=zE(o.join("/")),l=[];return l.push(...m.map(b=>b===""?d:[d,b].join("/"))),c&&l.push(...m),l.map(b=>e.startsWith("/")&&b===""?"/":b)}function Vj(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Xj(t.routesMeta.map(o=>o.childrenIndex),r.routesMeta.map(o=>o.childrenIndex)))}const Uj=/^:[\w-]+$/,Hj=3,Wj=2,Gj=1,qj=10,Zj=-2,SC=e=>e==="*";function Kj(e,t){let r=e.split("/"),o=r.length;return r.some(SC)&&(o+=Zj),t&&(o+=Wj),r.filter(c=>!SC(c)).reduce((c,d)=>c+(Uj.test(d)?Hj:d===""?Gj:qj),o)}function Xj(e,t){return e.length===t.length&&e.slice(0,-1).every((o,c)=>o===t[c])?e[e.length-1]-t[t.length-1]:0}function Jj(e,t,r){r===void 0&&(r=!1);let{routesMeta:o}=e,c={},d="/",m=[];for(let l=0;l<o.length;++l){let b=o[l],w=l===o.length-1,T=d==="/"?t:t.slice(d.length)||"/",E=CC({path:b.relativePath,caseSensitive:b.caseSensitive,end:w},T),z=b.route;if(!E&&w&&r&&!o[o.length-1].route.index&&(E=CC({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},T)),!E)return null;Object.assign(c,E.params),m.push({params:c,pathname:_l([d,E.pathname]),pathnameBase:rV(_l([d,E.pathnameBase])),route:z}),E.pathnameBase!=="/"&&(d=_l([d,E.pathnameBase]))}return m}function CC(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,o]=Yj(e.path,e.caseSensitive,e.end),c=t.match(r);if(!c)return null;let d=c[0],m=d.replace(/(.)\/+$/,"$1"),l=c.slice(1);return{params:o.reduce((w,T,E)=>{let{paramName:z,isOptional:j}=T;if(z==="*"){let V=l[E]||"";m=d.slice(0,d.length-V.length).replace(/(.)\/+$/,"$1")}const U=l[E];return j&&!U?w[z]=void 0:w[z]=(U||"").replace(/%2F/g,"/"),w},{}),pathname:d,pathnameBase:m,pattern:e}}function Yj(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),rd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,l,b)=>(o.push({paramName:l,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),o]}function Qj(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return rd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function af(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,o=e.charAt(r);return o&&o!=="/"?null:e.slice(r)||"/"}function eV(e,t){t===void 0&&(t="/");let{pathname:r,search:o="",hash:c=""}=typeof e=="string"?El(e):e;return{pathname:r?r.startsWith("/")?r:tV(r,t):t,search:nV(o),hash:iV(c)}}function tV(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?r.length>1&&r.pop():c!=="."&&r.push(c)}),r.length>1?r.join("/"):"/"}function r_(e,t,r,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ME(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function DE(e,t){let r=ME(e);return t?r.map((o,c)=>c===r.length-1?o.pathname:o.pathnameBase):r.map(o=>o.pathnameBase)}function AE(e,t,r,o){o===void 0&&(o=!1);let c;typeof e=="string"?c=El(e):(c=An({},e),Ir(!c.pathname||!c.pathname.includes("?"),r_("?","pathname","search",c)),Ir(!c.pathname||!c.pathname.includes("#"),r_("#","pathname","hash",c)),Ir(!c.search||!c.search.includes("#"),r_("#","search","hash",c)));let d=e===""||c.pathname==="",m=d?"/":c.pathname,l;if(m==null)l=r;else{let E=t.length-1;if(!o&&m.startsWith("..")){let z=m.split("/");for(;z[0]==="..";)z.shift(),E-=1;c.pathname=z.join("/")}l=E>=0?t[E]:"/"}let b=eV(c,l),w=m&&m!=="/"&&m.endsWith("/"),T=(d||m===".")&&r.endsWith("/");return!b.pathname.endsWith("/")&&(w||T)&&(b.pathname+="/"),b}const _l=e=>e.join("/").replace(/\/\/+/g,"/"),rV=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nV=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,iV=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Ug{constructor(t,r,o,c){c===void 0&&(c=!1),this.status=t,this.statusText=r||"",this.internal=c,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}}function sv(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const RE=["post","put","patch","delete"],oV=new Set(RE),aV=["get",...RE],sV=new Set(aV),lV=new Set([301,302,303,307,308]),cV=new Set([307,308]),n_={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},uV={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Bh={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},yb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dV=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),LE="remix-router-transitions";function hV(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",o=!r;Ir(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let c;if(e.mapRouteProperties)c=e.mapRouteProperties;else if(e.detectErrorBoundary){let ne=e.detectErrorBoundary;c=oe=>({hasErrorBoundary:ne(oe)})}else c=dV;let d={},m=Lp(e.routes,c,void 0,d),l,b=e.basename||"/",w=e.unstable_dataStrategy||yV,T=e.unstable_patchRoutesOnNavigation,E=An({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),z=null,j=new Set,U=1e3,V=new Set,K=null,O=null,L=null,R=e.hydrationData!=null,re=nc(m,e.history.location,b),J=null;if(re==null&&!T){let ne=oo(404,{pathname:e.history.location.pathname}),{matches:oe,route:Ce}=RC(m);re=oe,J={[Ce.id]:ne}}re&&!e.hydrationData&&Me(re,m,e.history.location.pathname).active&&(re=null);let se;if(re)if(re.some(ne=>ne.route.lazy))se=!1;else if(!re.some(ne=>ne.route.loader))se=!0;else if(E.v7_partialHydration){let ne=e.hydrationData?e.hydrationData.loaderData:null,oe=e.hydrationData?e.hydrationData.errors:null,Ce=je=>je.route.loader?typeof je.route.loader=="function"&&je.route.loader.hydrate===!0?!1:ne&&ne[je.route.id]!==void 0||oe&&oe[je.route.id]!==void 0:!0;if(oe){let je=re.findIndex(Ze=>oe[Ze.route.id]!==void 0);se=re.slice(0,je+1).every(Ce)}else se=re.every(Ce)}else se=e.hydrationData!=null;else if(se=!1,re=[],E.v7_partialHydration){let ne=Me(null,m,e.history.location.pathname);ne.active&&ne.matches&&(re=ne.matches)}let ie,Z={historyAction:e.history.action,location:e.history.location,matches:re,initialized:se,navigation:n_,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||J,fetchers:new Map,blockers:new Map},ke=ri.Pop,xe=!1,Ie,ze=!1,Le=new Map,Ye=null,Ge=!1,Te=!1,Fe=[],$e=new Set,Oe=new Map,Qe=0,at=-1,ut=new Map,Pt=new Set,wt=new Map,zt=new Map,er=new Set,lt=new Map,qe=new Map,pt=new Map,yt=!1;function or(){if(z=e.history.listen(ne=>{let{action:oe,location:Ce,delta:je}=ne;if(yt){yt=!1;return}rd(qe.size===0||je!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ze=Lt({currentLocation:Z.location,nextLocation:Ce,historyAction:oe});if(Ze&&je!=null){yt=!0,e.history.go(je*-1),yr(Ze,{state:"blocked",location:Ce,proceed(){yr(Ze,{state:"proceeding",proceed:void 0,reset:void 0,location:Ce}),e.history.go(je)},reset(){let et=new Map(Z.blockers);et.set(Ze,Bh),lr({blockers:et})}});return}return Mt(oe,Ce)}),r){zV(t,Le);let ne=()=>MV(t,Le);t.addEventListener("pagehide",ne),Ye=()=>t.removeEventListener("pagehide",ne)}return Z.initialized||Mt(ri.Pop,Z.location,{initialHydration:!0}),ie}function Kt(){z&&z(),Ye&&Ye(),j.clear(),Ie&&Ie.abort(),Z.fetchers.forEach((ne,oe)=>xt(oe)),Z.blockers.forEach((ne,oe)=>hr(oe))}function Mr(ne){return j.add(ne),()=>j.delete(ne)}function lr(ne,oe){oe===void 0&&(oe={}),Z=An({},Z,ne);let Ce=[],je=[];E.v7_fetcherPersist&&Z.fetchers.forEach((Ze,et)=>{Ze.state==="idle"&&(er.has(et)?je.push(et):Ce.push(et))}),[...j].forEach(Ze=>Ze(Z,{deletedFetchers:je,unstable_viewTransitionOpts:oe.viewTransitionOpts,unstable_flushSync:oe.flushSync===!0})),E.v7_fetcherPersist&&(Ce.forEach(Ze=>Z.fetchers.delete(Ze)),je.forEach(Ze=>xt(Ze)))}function Vt(ne,oe,Ce){var je,Ze;let{flushSync:et}=Ce===void 0?{}:Ce,Se=Z.actionData!=null&&Z.navigation.formMethod!=null&&za(Z.navigation.formMethod)&&Z.navigation.state==="loading"&&((je=ne.state)==null?void 0:je._isRedirect)!==!0,_e;oe.actionData?Object.keys(oe.actionData).length>0?_e=oe.actionData:_e=null:Se?_e=Z.actionData:_e=null;let Ke=oe.loaderData?DC(Z.loaderData,oe.loaderData,oe.matches||[],oe.errors):Z.loaderData,Je=Z.blockers;Je.size>0&&(Je=new Map(Je),Je.forEach((Tt,Xt)=>Je.set(Xt,Bh)));let ot=xe===!0||Z.navigation.formMethod!=null&&za(Z.navigation.formMethod)&&((Ze=ne.state)==null?void 0:Ze._isRedirect)!==!0;l&&(m=l,l=void 0),Ge||ke===ri.Pop||(ke===ri.Push?e.history.push(ne,ne.state):ke===ri.Replace&&e.history.replace(ne,ne.state));let Ft;if(ke===ri.Pop){let Tt=Le.get(Z.location.pathname);Tt&&Tt.has(ne.pathname)?Ft={currentLocation:Z.location,nextLocation:ne}:Le.has(ne.pathname)&&(Ft={currentLocation:ne,nextLocation:Z.location})}else if(ze){let Tt=Le.get(Z.location.pathname);Tt?Tt.add(ne.pathname):(Tt=new Set([ne.pathname]),Le.set(Z.location.pathname,Tt)),Ft={currentLocation:Z.location,nextLocation:ne}}lr(An({},oe,{actionData:_e,loaderData:Ke,historyAction:ke,location:ne,initialized:!0,navigation:n_,revalidation:"idle",restoreScrollPosition:fe(ne,oe.matches||Z.matches),preventScrollReset:ot,blockers:Je}),{viewTransitionOpts:Ft,flushSync:et===!0}),ke=ri.Pop,xe=!1,ze=!1,Ge=!1,Te=!1,Fe=[]}async function Et(ne,oe){if(typeof ne=="number"){e.history.go(ne);return}let Ce=vx(Z.location,Z.matches,b,E.v7_prependBasename,ne,E.v7_relativeSplatPath,oe==null?void 0:oe.fromRouteId,oe==null?void 0:oe.relative),{path:je,submission:Ze,error:et}=kC(E.v7_normalizeFormMethod,!1,Ce,oe),Se=Z.location,_e=Rp(Z.location,je,oe&&oe.state);_e=An({},_e,e.history.encodeLocation(_e));let Ke=oe&&oe.replace!=null?oe.replace:void 0,Je=ri.Push;Ke===!0?Je=ri.Replace:Ke===!1||Ze!=null&&za(Ze.formMethod)&&Ze.formAction===Z.location.pathname+Z.location.search&&(Je=ri.Replace);let ot=oe&&"preventScrollReset"in oe?oe.preventScrollReset===!0:void 0,Ft=(oe&&oe.unstable_flushSync)===!0,Tt=Lt({currentLocation:Se,nextLocation:_e,historyAction:Je});if(Tt){yr(Tt,{state:"blocked",location:_e,proceed(){yr(Tt,{state:"proceeding",proceed:void 0,reset:void 0,location:_e}),Et(ne,oe)},reset(){let Xt=new Map(Z.blockers);Xt.set(Tt,Bh),lr({blockers:Xt})}});return}return await Mt(Je,_e,{submission:Ze,pendingError:et,preventScrollReset:ot,replace:oe&&oe.replace,enableViewTransition:oe&&oe.unstable_viewTransition,flushSync:Ft})}function ur(){if(Gt(),lr({revalidation:"loading"}),Z.navigation.state!=="submitting"){if(Z.navigation.state==="idle"){Mt(Z.historyAction,Z.location,{startUninterruptedRevalidation:!0});return}Mt(ke||Z.historyAction,Z.navigation.location,{overrideNavigation:Z.navigation})}}async function Mt(ne,oe,Ce){Ie&&Ie.abort(),Ie=null,ke=ne,Ge=(Ce&&Ce.startUninterruptedRevalidation)===!0,de(Z.location,Z.matches),xe=(Ce&&Ce.preventScrollReset)===!0,ze=(Ce&&Ce.enableViewTransition)===!0;let je=l||m,Ze=Ce&&Ce.overrideNavigation,et=nc(je,oe,b),Se=(Ce&&Ce.flushSync)===!0,_e=Me(et,je,oe.pathname);if(_e.active&&_e.matches&&(et=_e.matches),!et){let{error:ar,notFoundMatches:Wr,route:pn}=Fr(oe.pathname);Vt(oe,{matches:Wr,loaderData:{},errors:{[pn.id]:ar}},{flushSync:Se});return}if(Z.initialized&&!Te&&SV(Z.location,oe)&&!(Ce&&Ce.submission&&za(Ce.submission.formMethod))){Vt(oe,{matches:et},{flushSync:Se});return}Ie=new AbortController;let Ke=cu(e.history,oe,Ie.signal,Ce&&Ce.submission),Je;if(Ce&&Ce.pendingError)Je=[Eu(et).route.id,{type:cn.error,error:Ce.pendingError}];else if(Ce&&Ce.submission&&za(Ce.submission.formMethod)){let ar=await Er(Ke,oe,Ce.submission,et,_e.active,{replace:Ce.replace,flushSync:Se});if(ar.shortCircuited)return;if(ar.pendingActionResult){let[Wr,pn]=ar.pendingActionResult;if(Do(pn)&&sv(pn.error)&&pn.error.status===404){Ie=null,Vt(oe,{matches:ar.matches,loaderData:{},errors:{[Wr]:pn.error}});return}}et=ar.matches||et,Je=ar.pendingActionResult,Ze=i_(oe,Ce.submission),Se=!1,_e.active=!1,Ke=cu(e.history,Ke.url,Ke.signal)}let{shortCircuited:ot,matches:Ft,loaderData:Tt,errors:Xt}=await Ve(Ke,oe,et,_e.active,Ze,Ce&&Ce.submission,Ce&&Ce.fetcherSubmission,Ce&&Ce.replace,Ce&&Ce.initialHydration===!0,Se,Je);ot||(Ie=null,Vt(oe,An({matches:Ft||et},AC(Je),{loaderData:Tt,errors:Xt})))}async function Er(ne,oe,Ce,je,Ze,et){et===void 0&&(et={}),Gt();let Se=PV(oe,Ce);if(lr({navigation:Se},{flushSync:et.flushSync===!0}),Ze){let Je=await be(je,oe.pathname,ne.signal);if(Je.type==="aborted")return{shortCircuited:!0};if(Je.type==="error"){let{boundaryId:ot,error:Ft}=he(oe.pathname,Je);return{matches:Je.partialMatches,pendingActionResult:[ot,{type:cn.error,error:Ft}]}}else if(Je.matches)je=Je.matches;else{let{notFoundMatches:ot,error:Ft,route:Tt}=Fr(oe.pathname);return{matches:ot,pendingActionResult:[Tt.id,{type:cn.error,error:Ft}]}}}let _e,Ke=qh(je,oe);if(!Ke.route.action&&!Ke.route.lazy)_e={type:cn.error,error:oo(405,{method:ne.method,pathname:oe.pathname,routeId:Ke.route.id})};else if(_e=(await dr("action",ne,[Ke],je))[0],ne.signal.aborted)return{shortCircuited:!0};if(lc(_e)){let Je;return et&&et.replace!=null?Je=et.replace:Je=EC(_e.response.headers.get("Location"),new URL(ne.url),b)===Z.location.pathname+Z.location.search,await Hr(ne,_e,{submission:Ce,replace:Je}),{shortCircuited:!0}}if(sc(_e))throw oo(400,{type:"defer-action"});if(Do(_e)){let Je=Eu(je,Ke.route.id);return(et&&et.replace)!==!0&&(ke=ri.Push),{matches:je,pendingActionResult:[Je.route.id,_e]}}return{matches:je,pendingActionResult:[Ke.route.id,_e]}}async function Ve(ne,oe,Ce,je,Ze,et,Se,_e,Ke,Je,ot){let Ft=Ze||i_(oe,et),Tt=et||Se||OC(Ft),Xt=!Ge&&(!E.v7_partialHydration||!Ke);if(je){if(Xt){let fr=Sr(ot);lr(An({navigation:Ft},fr!==void 0?{actionData:fr}:{}),{flushSync:Je})}let Zt=await be(Ce,oe.pathname,ne.signal);if(Zt.type==="aborted")return{shortCircuited:!0};if(Zt.type==="error"){let{boundaryId:fr,error:Qr}=he(oe.pathname,Zt);return{matches:Zt.partialMatches,loaderData:{},errors:{[fr]:Qr}}}else if(Zt.matches)Ce=Zt.matches;else{let{error:fr,notFoundMatches:Qr,route:_r}=Fr(oe.pathname);return{matches:Qr,loaderData:{},errors:{[_r.id]:fr}}}}let ar=l||m,[Wr,pn]=IC(e.history,Z,Ce,Tt,oe,E.v7_partialHydration&&Ke===!0,E.v7_skipActionErrorRevalidation,Te,Fe,$e,er,wt,Pt,ar,b,ot);if(H(Zt=>!(Ce&&Ce.some(fr=>fr.route.id===Zt))||Wr&&Wr.some(fr=>fr.route.id===Zt)),at=++Qe,Wr.length===0&&pn.length===0){let Zt=nt();return Vt(oe,An({matches:Ce,loaderData:{},errors:ot&&Do(ot[1])?{[ot[0]]:ot[1].error}:null},AC(ot),Zt?{fetchers:new Map(Z.fetchers)}:{}),{flushSync:Je}),{shortCircuited:!0}}if(Xt){let Zt={};if(!je){Zt.navigation=Ft;let fr=Sr(ot);fr!==void 0&&(Zt.actionData=fr)}pn.length>0&&(Zt.fetchers=Dr(pn)),lr(Zt,{flushSync:Je})}pn.forEach(Zt=>{Oe.has(Zt.key)&&tr(Zt.key),Zt.controller&&Oe.set(Zt.key,Zt.controller)});let Di=()=>pn.forEach(Zt=>tr(Zt.key));Ie&&Ie.signal.addEventListener("abort",Di);let{loaderResults:Qn,fetcherResults:Ho}=await cr(Z.matches,Ce,Wr,pn,ne);if(ne.signal.aborted)return{shortCircuited:!0};Ie&&Ie.signal.removeEventListener("abort",Di),pn.forEach(Zt=>Oe.delete(Zt.key));let vr=LC([...Qn,...Ho]);if(vr){if(vr.idx>=Wr.length){let Zt=pn[vr.idx-Wr.length].key;Pt.add(Zt)}return await Hr(ne,vr.result,{replace:_e}),{shortCircuited:!0}}let{loaderData:Ki,errors:Qt}=MC(Z,Ce,Wr,Qn,ot,pn,Ho,lt);lt.forEach((Zt,fr)=>{Zt.subscribe(Qr=>{(Qr||Zt.done)&&lt.delete(fr)})}),E.v7_partialHydration&&Ke&&Z.errors&&Object.entries(Z.errors).filter(Zt=>{let[fr]=Zt;return!Wr.some(Qr=>Qr.route.id===fr)}).forEach(Zt=>{let[fr,Qr]=Zt;Qt=Object.assign(Qt||{},{[fr]:Qr})});let $r=nt(),Pr=Yt(at),ei=$r||Pr||pn.length>0;return An({matches:Ce,loaderData:Ki,errors:Qt},ei?{fetchers:new Map(Z.fetchers)}:{})}function Sr(ne){if(ne&&!Do(ne[1]))return{[ne[0]]:ne[1].data};if(Z.actionData)return Object.keys(Z.actionData).length===0?null:Z.actionData}function Dr(ne){return ne.forEach(oe=>{let Ce=Z.fetchers.get(oe.key),je=Oh(void 0,Ce?Ce.data:void 0);Z.fetchers.set(oe.key,je)}),new Map(Z.fetchers)}function qt(ne,oe,Ce,je){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Oe.has(ne)&&tr(ne);let Ze=(je&&je.unstable_flushSync)===!0,et=l||m,Se=vx(Z.location,Z.matches,b,E.v7_prependBasename,Ce,E.v7_relativeSplatPath,oe,je==null?void 0:je.relative),_e=nc(et,Se,b),Ke=Me(_e,et,Se);if(Ke.active&&Ke.matches&&(_e=Ke.matches),!_e){Tr(ne,oe,oo(404,{pathname:Se}),{flushSync:Ze});return}let{path:Je,submission:ot,error:Ft}=kC(E.v7_normalizeFormMethod,!0,Se,je);if(Ft){Tr(ne,oe,Ft,{flushSync:Ze});return}let Tt=qh(_e,Je);if(xe=(je&&je.preventScrollReset)===!0,ot&&za(ot.formMethod)){rr(ne,oe,Je,Tt,_e,Ke.active,Ze,ot);return}wt.set(ne,{routeId:oe,path:Je}),Or(ne,oe,Je,Tt,_e,Ke.active,Ze,ot)}async function rr(ne,oe,Ce,je,Ze,et,Se,_e){Gt(),wt.delete(ne);function Ke(_r){if(!_r.route.action&&!_r.route.lazy){let Br=oo(405,{method:_e.formMethod,pathname:Ce,routeId:oe});return Tr(ne,oe,Br,{flushSync:Se}),!0}return!1}if(!et&&Ke(je))return;let Je=Z.fetchers.get(ne);sr(ne,EV(_e,Je),{flushSync:Se});let ot=new AbortController,Ft=cu(e.history,Ce,ot.signal,_e);if(et){let _r=await be(Ze,Ce,Ft.signal);if(_r.type==="aborted")return;if(_r.type==="error"){let{error:Br}=he(Ce,_r);Tr(ne,oe,Br,{flushSync:Se});return}else if(_r.matches){if(Ze=_r.matches,je=qh(Ze,Ce),Ke(je))return}else{Tr(ne,oe,oo(404,{pathname:Ce}),{flushSync:Se});return}}Oe.set(ne,ot);let Tt=Qe,ar=(await dr("action",Ft,[je],Ze))[0];if(Ft.signal.aborted){Oe.get(ne)===ot&&Oe.delete(ne);return}if(E.v7_fetcherPersist&&er.has(ne)){if(lc(ar)||Do(ar)){sr(ne,tl(void 0));return}}else{if(lc(ar))if(Oe.delete(ne),at>Tt){sr(ne,tl(void 0));return}else return Pt.add(ne),sr(ne,Oh(_e)),Hr(Ft,ar,{fetcherSubmission:_e});if(Do(ar)){Tr(ne,oe,ar.error);return}}if(sc(ar))throw oo(400,{type:"defer-action"});let Wr=Z.navigation.location||Z.location,pn=cu(e.history,Wr,ot.signal),Di=l||m,Qn=Z.navigation.state!=="idle"?nc(Di,Z.navigation.location,b):Z.matches;Ir(Qn,"Didn't find any matches after fetcher action");let Ho=++Qe;ut.set(ne,Ho);let vr=Oh(_e,ar.data);Z.fetchers.set(ne,vr);let[Ki,Qt]=IC(e.history,Z,Qn,_e,Wr,!1,E.v7_skipActionErrorRevalidation,Te,Fe,$e,er,wt,Pt,Di,b,[je.route.id,ar]);Qt.filter(_r=>_r.key!==ne).forEach(_r=>{let Br=_r.key,zr=Z.fetchers.get(Br),fa=Oh(void 0,zr?zr.data:void 0);Z.fetchers.set(Br,fa),Oe.has(Br)&&tr(Br),_r.controller&&Oe.set(Br,_r.controller)}),lr({fetchers:new Map(Z.fetchers)});let $r=()=>Qt.forEach(_r=>tr(_r.key));ot.signal.addEventListener("abort",$r);let{loaderResults:Pr,fetcherResults:ei}=await cr(Z.matches,Qn,Ki,Qt,pn);if(ot.signal.aborted)return;ot.signal.removeEventListener("abort",$r),ut.delete(ne),Oe.delete(ne),Qt.forEach(_r=>Oe.delete(_r.key));let Zt=LC([...Pr,...ei]);if(Zt){if(Zt.idx>=Ki.length){let _r=Qt[Zt.idx-Ki.length].key;Pt.add(_r)}return Hr(pn,Zt.result)}let{loaderData:fr,errors:Qr}=MC(Z,Z.matches,Ki,Pr,void 0,Qt,ei,lt);if(Z.fetchers.has(ne)){let _r=tl(ar.data);Z.fetchers.set(ne,_r)}Yt(Ho),Z.navigation.state==="loading"&&Ho>at?(Ir(ke,"Expected pending action"),Ie&&Ie.abort(),Vt(Z.navigation.location,{matches:Qn,loaderData:fr,errors:Qr,fetchers:new Map(Z.fetchers)})):(lr({errors:Qr,loaderData:DC(Z.loaderData,fr,Qn,Qr),fetchers:new Map(Z.fetchers)}),Te=!1)}async function Or(ne,oe,Ce,je,Ze,et,Se,_e){let Ke=Z.fetchers.get(ne);sr(ne,Oh(_e,Ke?Ke.data:void 0),{flushSync:Se});let Je=new AbortController,ot=cu(e.history,Ce,Je.signal);if(et){let ar=await be(Ze,Ce,ot.signal);if(ar.type==="aborted")return;if(ar.type==="error"){let{error:Wr}=he(Ce,ar);Tr(ne,oe,Wr,{flushSync:Se});return}else if(ar.matches)Ze=ar.matches,je=qh(Ze,Ce);else{Tr(ne,oe,oo(404,{pathname:Ce}),{flushSync:Se});return}}Oe.set(ne,Je);let Ft=Qe,Xt=(await dr("loader",ot,[je],Ze))[0];if(sc(Xt)&&(Xt=await NE(Xt,ot.signal,!0)||Xt),Oe.get(ne)===Je&&Oe.delete(ne),!ot.signal.aborted){if(er.has(ne)){sr(ne,tl(void 0));return}if(lc(Xt))if(at>Ft){sr(ne,tl(void 0));return}else{Pt.add(ne),await Hr(ot,Xt);return}if(Do(Xt)){Tr(ne,oe,Xt.error);return}Ir(!sc(Xt),"Unhandled fetcher deferred data"),sr(ne,tl(Xt.data))}}async function Hr(ne,oe,Ce){let{submission:je,fetcherSubmission:Ze,replace:et}=Ce===void 0?{}:Ce;oe.response.headers.has("X-Remix-Revalidate")&&(Te=!0);let Se=oe.response.headers.get("Location");Ir(Se,"Expected a Location header on the redirect Response"),Se=EC(Se,new URL(ne.url),b);let _e=Rp(Z.location,Se,{_isRedirect:!0});if(r){let Xt=!1;if(oe.response.headers.has("X-Remix-Reload-Document"))Xt=!0;else if(yb.test(Se)){const ar=e.history.createURL(Se);Xt=ar.origin!==t.location.origin||af(ar.pathname,b)==null}if(Xt){et?t.location.replace(Se):t.location.assign(Se);return}}Ie=null;let Ke=et===!0||oe.response.headers.has("X-Remix-Replace")?ri.Replace:ri.Push,{formMethod:Je,formAction:ot,formEncType:Ft}=Z.navigation;!je&&!Ze&&Je&&ot&&Ft&&(je=OC(Z.navigation));let Tt=je||Ze;if(cV.has(oe.response.status)&&Tt&&za(Tt.formMethod))await Mt(Ke,_e,{submission:An({},Tt,{formAction:Se}),preventScrollReset:xe});else{let Xt=i_(_e,je);await Mt(Ke,_e,{overrideNavigation:Xt,fetcherSubmission:Ze,preventScrollReset:xe})}}async function dr(ne,oe,Ce,je){try{let Ze=await vV(w,ne,oe,Ce,je,d,c);return await Promise.all(Ze.map((et,Se)=>{if(kV(et)){let _e=et.result;return{type:cn.redirect,response:bV(_e,oe,Ce[Se].route.id,je,b,E.v7_relativeSplatPath)}}return xV(et)}))}catch(Ze){return Ce.map(()=>({type:cn.error,error:Ze}))}}async function cr(ne,oe,Ce,je,Ze){let[et,...Se]=await Promise.all([Ce.length?dr("loader",Ze,Ce,oe):[],...je.map(_e=>{if(_e.matches&&_e.match&&_e.controller){let Ke=cu(e.history,_e.path,_e.controller.signal);return dr("loader",Ke,[_e.match],_e.matches).then(Je=>Je[0])}else return Promise.resolve({type:cn.error,error:oo(404,{pathname:_e.path})})})]);return await Promise.all([BC(ne,Ce,et,et.map(()=>Ze.signal),!1,Z.loaderData),BC(ne,je.map(_e=>_e.match),Se,je.map(_e=>_e.controller?_e.controller.signal:null),!0)]),{loaderResults:et,fetcherResults:Se}}function Gt(){Te=!0,Fe.push(...H()),wt.forEach((ne,oe)=>{Oe.has(oe)&&($e.add(oe),tr(oe))})}function sr(ne,oe,Ce){Ce===void 0&&(Ce={}),Z.fetchers.set(ne,oe),lr({fetchers:new Map(Z.fetchers)},{flushSync:(Ce&&Ce.flushSync)===!0})}function Tr(ne,oe,Ce,je){je===void 0&&(je={});let Ze=Eu(Z.matches,oe);xt(ne),lr({errors:{[Ze.route.id]:Ce},fetchers:new Map(Z.fetchers)},{flushSync:(je&&je.flushSync)===!0})}function Be(ne){return E.v7_fetcherPersist&&(zt.set(ne,(zt.get(ne)||0)+1),er.has(ne)&&er.delete(ne)),Z.fetchers.get(ne)||uV}function xt(ne){let oe=Z.fetchers.get(ne);Oe.has(ne)&&!(oe&&oe.state==="loading"&&ut.has(ne))&&tr(ne),wt.delete(ne),ut.delete(ne),Pt.delete(ne),er.delete(ne),$e.delete(ne),Z.fetchers.delete(ne)}function St(ne){if(E.v7_fetcherPersist){let oe=(zt.get(ne)||0)-1;oe<=0?(zt.delete(ne),er.add(ne)):zt.set(ne,oe)}else xt(ne);lr({fetchers:new Map(Z.fetchers)})}function tr(ne){let oe=Oe.get(ne);Ir(oe,"Expected fetch controller: "+ne),oe.abort(),Oe.delete(ne)}function vn(ne){for(let oe of ne){let Ce=Be(oe),je=tl(Ce.data);Z.fetchers.set(oe,je)}}function nt(){let ne=[],oe=!1;for(let Ce of Pt){let je=Z.fetchers.get(Ce);Ir(je,"Expected fetcher: "+Ce),je.state==="loading"&&(Pt.delete(Ce),ne.push(Ce),oe=!0)}return vn(ne),oe}function Yt(ne){let oe=[];for(let[Ce,je]of ut)if(je<ne){let Ze=Z.fetchers.get(Ce);Ir(Ze,"Expected fetcher: "+Ce),Ze.state==="loading"&&(tr(Ce),ut.delete(Ce),oe.push(Ce))}return vn(oe),oe.length>0}function Ot(ne,oe){let Ce=Z.blockers.get(ne)||Bh;return qe.get(ne)!==oe&&qe.set(ne,oe),Ce}function hr(ne){Z.blockers.delete(ne),qe.delete(ne)}function yr(ne,oe){let Ce=Z.blockers.get(ne)||Bh;Ir(Ce.state==="unblocked"&&oe.state==="blocked"||Ce.state==="blocked"&&oe.state==="blocked"||Ce.state==="blocked"&&oe.state==="proceeding"||Ce.state==="blocked"&&oe.state==="unblocked"||Ce.state==="proceeding"&&oe.state==="unblocked","Invalid blocker state transition: "+Ce.state+" -> "+oe.state);let je=new Map(Z.blockers);je.set(ne,oe),lr({blockers:je})}function Lt(ne){let{currentLocation:oe,nextLocation:Ce,historyAction:je}=ne;if(qe.size===0)return;qe.size>1&&rd(!1,"A router only supports one blocker at a time");let Ze=Array.from(qe.entries()),[et,Se]=Ze[Ze.length-1],_e=Z.blockers.get(et);if(!(_e&&_e.state==="proceeding")&&Se({currentLocation:oe,nextLocation:Ce,historyAction:je}))return et}function Fr(ne){let oe=oo(404,{pathname:ne}),Ce=l||m,{matches:je,route:Ze}=RC(Ce);return H(),{notFoundMatches:je,route:Ze,error:oe}}function he(ne,oe){return{boundaryId:Eu(oe.partialMatches).route.id,error:oo(400,{type:"route-discovery",pathname:ne,message:oe.error!=null&&"message"in oe.error?oe.error:String(oe.error)})}}function H(ne){let oe=[];return lt.forEach((Ce,je)=>{(!ne||ne(je))&&(Ce.cancel(),oe.push(je),lt.delete(je))}),oe}function G(ne,oe,Ce){if(K=ne,L=oe,O=Ce||null,!R&&Z.navigation===n_){R=!0;let je=fe(Z.location,Z.matches);je!=null&&lr({restoreScrollPosition:je})}return()=>{K=null,L=null,O=null}}function te(ne,oe){return O&&O(ne,oe.map(je=>jj(je,Z.loaderData)))||ne.key}function de(ne,oe){if(K&&L){let Ce=te(ne,oe);K[Ce]=L()}}function fe(ne,oe){if(K){let Ce=te(ne,oe),je=K[Ce];if(typeof je=="number")return je}return null}function Me(ne,oe,Ce){if(T){if(V.has(Ce))return{active:!1,matches:ne};if(ne){if(Object.keys(ne[0].params).length>0)return{active:!0,matches:og(oe,Ce,b,!0)}}else return{active:!0,matches:og(oe,Ce,b,!0)||[]}}return{active:!1,matches:null}}async function be(ne,oe,Ce){let je=ne;for(;;){let Ze=l==null,et=l||m;try{await gV(T,oe,je,et,d,c,pt,Ce)}catch(Ke){return{type:"error",error:Ke,partialMatches:je}}finally{Ze&&(m=[...m])}if(Ce.aborted)return{type:"aborted"};let Se=nc(et,oe,b);if(Se)return ye(oe,V),{type:"success",matches:Se};let _e=og(et,oe,b,!0);if(!_e||je.length===_e.length&&je.every((Ke,Je)=>Ke.route.id===_e[Je].route.id))return ye(oe,V),{type:"success",matches:null};je=_e}}function ye(ne,oe){if(oe.size>=U){let Ce=oe.values().next().value;oe.delete(Ce)}oe.add(ne)}function Ee(ne){d={},l=Lp(ne,c,void 0,d)}function Xe(ne,oe){let Ce=l==null;BE(ne,oe,l||m,d,c),Ce&&(m=[...m],lr({}))}return ie={get basename(){return b},get future(){return E},get state(){return Z},get routes(){return m},get window(){return t},initialize:or,subscribe:Mr,enableScrollRestoration:G,navigate:Et,fetch:qt,revalidate:ur,createHref:ne=>e.history.createHref(ne),encodeLocation:ne=>e.history.encodeLocation(ne),getFetcher:Be,deleteFetcher:St,dispose:Kt,getBlocker:Ot,deleteBlocker:hr,patchRoutes:Xe,_internalFetchControllers:Oe,_internalActiveDeferreds:lt,_internalSetRoutes:Ee},ie}function pV(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function vx(e,t,r,o,c,d,m,l){let b,w;if(m){b=[];for(let E of t)if(b.push(E),E.route.id===m){w=E;break}}else b=t,w=t[t.length-1];let T=AE(c||".",DE(b,d),af(e.pathname,r)||e.pathname,l==="path");return c==null&&(T.search=e.search,T.hash=e.hash),(c==null||c===""||c===".")&&w&&w.route.index&&!vb(T.search)&&(T.search=T.search?T.search.replace(/^\?/,"?index&"):"?index"),o&&r!=="/"&&(T.pathname=T.pathname==="/"?r:_l([r,T.pathname])),of(T)}function kC(e,t,r,o){if(!o||!pV(o))return{path:r};if(o.formMethod&&!TV(o.formMethod))return{path:r,error:oo(405,{method:o.formMethod})};let c=()=>({path:r,error:oo(400,{type:"invalid-body"})}),d=o.formMethod||"get",m=e?d.toUpperCase():d.toLowerCase(),l=OE(r);if(o.body!==void 0){if(o.formEncType==="text/plain"){if(!za(m))return c();let z=typeof o.body=="string"?o.body:o.body instanceof FormData||o.body instanceof URLSearchParams?Array.from(o.body.entries()).reduce((j,U)=>{let[V,K]=U;return""+j+V+"="+K+`
`},""):String(o.body);return{path:r,submission:{formMethod:m,formAction:l,formEncType:o.formEncType,formData:void 0,json:void 0,text:z}}}else if(o.formEncType==="application/json"){if(!za(m))return c();try{let z=typeof o.body=="string"?JSON.parse(o.body):o.body;return{path:r,submission:{formMethod:m,formAction:l,formEncType:o.formEncType,formData:void 0,json:z,text:void 0}}}catch{return c()}}}Ir(typeof FormData=="function","FormData is not available in this environment");let b,w;if(o.formData)b=_x(o.formData),w=o.formData;else if(o.body instanceof FormData)b=_x(o.body),w=o.body;else if(o.body instanceof URLSearchParams)b=o.body,w=zC(b);else if(o.body==null)b=new URLSearchParams,w=new FormData;else try{b=new URLSearchParams(o.body),w=zC(b)}catch{return c()}let T={formMethod:m,formAction:l,formEncType:o&&o.formEncType||"application/x-www-form-urlencoded",formData:w,json:void 0,text:void 0};if(za(T.formMethod))return{path:r,submission:T};let E=El(r);return t&&E.search&&vb(E.search)&&b.append("index",""),E.search="?"+b,{path:of(E),submission:T}}function fV(e,t){let r=e;if(t){let o=e.findIndex(c=>c.route.id===t);o>=0&&(r=e.slice(0,o))}return r}function IC(e,t,r,o,c,d,m,l,b,w,T,E,z,j,U,V){let K=V?Do(V[1])?V[1].error:V[1].data:void 0,O=e.createURL(t.location),L=e.createURL(c),R=V&&Do(V[1])?V[0]:void 0,re=R?fV(r,R):r,J=V?V[1].statusCode:void 0,se=m&&J&&J>=400,ie=re.filter((ke,xe)=>{let{route:Ie}=ke;if(Ie.lazy)return!0;if(Ie.loader==null)return!1;if(d)return typeof Ie.loader!="function"||Ie.loader.hydrate?!0:t.loaderData[Ie.id]===void 0&&(!t.errors||t.errors[Ie.id]===void 0);if(mV(t.loaderData,t.matches[xe],ke)||b.some(Ye=>Ye===ke.route.id))return!0;let ze=t.matches[xe],Le=ke;return TC(ke,An({currentUrl:O,currentParams:ze.params,nextUrl:L,nextParams:Le.params},o,{actionResult:K,actionStatus:J,defaultShouldRevalidate:se?!1:l||O.pathname+O.search===L.pathname+L.search||O.search!==L.search||$E(ze,Le)}))}),Z=[];return E.forEach((ke,xe)=>{if(d||!r.some(Ge=>Ge.route.id===ke.routeId)||T.has(xe))return;let Ie=nc(j,ke.path,U);if(!Ie){Z.push({key:xe,routeId:ke.routeId,path:ke.path,matches:null,match:null,controller:null});return}let ze=t.fetchers.get(xe),Le=qh(Ie,ke.path),Ye=!1;z.has(xe)?Ye=!1:w.has(xe)?(w.delete(xe),Ye=!0):ze&&ze.state!=="idle"&&ze.data===void 0?Ye=l:Ye=TC(Le,An({currentUrl:O,currentParams:t.matches[t.matches.length-1].params,nextUrl:L,nextParams:r[r.length-1].params},o,{actionResult:K,actionStatus:J,defaultShouldRevalidate:se?!1:l})),Ye&&Z.push({key:xe,routeId:ke.routeId,path:ke.path,matches:Ie,match:Le,controller:new AbortController})}),[ie,Z]}function mV(e,t,r){let o=!t||r.route.id!==t.route.id,c=e[r.route.id]===void 0;return o||c}function $E(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function TC(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function gV(e,t,r,o,c,d,m,l){let b=[t,...r.map(w=>w.route.id)].join("-");try{let w=m.get(b);w||(w=e({path:t,matches:r,patch:(T,E)=>{l.aborted||BE(T,E,o,c,d)}}),m.set(b,w)),w&&CV(w)&&await w}finally{m.delete(b)}}function BE(e,t,r,o,c){if(e){var d;let m=o[e];Ir(m,"No route found to patch children into: routeId = "+e);let l=Lp(t,c,[e,"patch",String(((d=m.children)==null?void 0:d.length)||"0")],o);m.children?m.children.push(...l):m.children=l}else{let m=Lp(t,c,["patch",String(r.length||"0")],o);r.push(...m)}}async function PC(e,t,r){if(!e.lazy)return;let o=await e.lazy();if(!e.lazy)return;let c=r[e.id];Ir(c,"No route found in manifest");let d={};for(let m in o){let b=c[m]!==void 0&&m!=="hasErrorBoundary";rd(!b,'Route "'+c.id+'" has a static property "'+m+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+m+'" will be ignored.')),!b&&!Fj.has(m)&&(d[m]=o[m])}Object.assign(c,d),Object.assign(c,An({},t(c),{lazy:void 0}))}function yV(e){return Promise.all(e.matches.map(t=>t.resolve()))}async function vV(e,t,r,o,c,d,m,l){let b=o.reduce((E,z)=>E.add(z.route.id),new Set),w=new Set,T=await e({matches:c.map(E=>{let z=b.has(E.route.id);return An({},E,{shouldLoad:z,resolve:U=>(w.add(E.route.id),z?_V(t,r,E,d,m,U,l):Promise.resolve({type:cn.data,result:void 0}))})}),request:r,params:c[0].params,context:l});return c.forEach(E=>Ir(w.has(E.route.id),'`match.resolve()` was not called for route id "'+E.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),T.filter((E,z)=>b.has(c[z].route.id))}async function _V(e,t,r,o,c,d,m){let l,b,w=T=>{let E,z=new Promise((V,K)=>E=K);b=()=>E(),t.signal.addEventListener("abort",b);let j=V=>typeof T!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):T({request:t,params:r.params,context:m},...V!==void 0?[V]:[]),U;return d?U=d(V=>j(V)):U=(async()=>{try{return{type:"data",result:await j()}}catch(V){return{type:"error",result:V}}})(),Promise.race([U,z])};try{let T=r.route[e];if(r.route.lazy)if(T){let E,[z]=await Promise.all([w(T).catch(j=>{E=j}),PC(r.route,c,o)]);if(E!==void 0)throw E;l=z}else if(await PC(r.route,c,o),T=r.route[e],T)l=await w(T);else if(e==="action"){let E=new URL(t.url),z=E.pathname+E.search;throw oo(405,{method:t.method,pathname:z,routeId:r.route.id})}else return{type:cn.data,result:void 0};else if(T)l=await w(T);else{let E=new URL(t.url),z=E.pathname+E.search;throw oo(404,{pathname:z})}Ir(l.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(T){return{type:cn.error,result:T}}finally{b&&t.signal.removeEventListener("abort",b)}return l}async function xV(e){let{result:t,type:r}=e;if(FE(t)){let w;try{let T=t.headers.get("Content-Type");T&&/\bapplication\/json\b/.test(T)?t.body==null?w=null:w=await t.json():w=await t.text()}catch(T){return{type:cn.error,error:T}}return r===cn.error?{type:cn.error,error:new Ug(t.status,t.statusText,w),statusCode:t.status,headers:t.headers}:{type:cn.data,data:w,statusCode:t.status,headers:t.headers}}if(r===cn.error){if($C(t)){var o;if(t.data instanceof Error){var c;return{type:cn.error,error:t.data,statusCode:(c=t.init)==null?void 0:c.status}}t=new Ug(((o=t.init)==null?void 0:o.status)||500,void 0,t.data)}return{type:cn.error,error:t,statusCode:sv(t)?t.status:void 0}}if(IV(t)){var d,m;return{type:cn.deferred,deferredData:t,statusCode:(d=t.init)==null?void 0:d.status,headers:((m=t.init)==null?void 0:m.headers)&&new Headers(t.init.headers)}}if($C(t)){var l,b;return{type:cn.data,data:t.data,statusCode:(l=t.init)==null?void 0:l.status,headers:(b=t.init)!=null&&b.headers?new Headers(t.init.headers):void 0}}return{type:cn.data,data:t}}function bV(e,t,r,o,c,d){let m=e.headers.get("Location");if(Ir(m,"Redirects returned/thrown from loaders/actions must have a Location header"),!yb.test(m)){let l=o.slice(0,o.findIndex(b=>b.route.id===r)+1);m=vx(new URL(t.url),l,c,!0,m,d),e.headers.set("Location",m)}return e}function EC(e,t,r){if(yb.test(e)){let o=e,c=o.startsWith("//")?new URL(t.protocol+o):new URL(o),d=af(c.pathname,r)!=null;if(c.origin===t.origin&&d)return c.pathname+c.search+c.hash}return e}function cu(e,t,r,o){let c=e.createURL(OE(t)).toString(),d={signal:r};if(o&&za(o.formMethod)){let{formMethod:m,formEncType:l}=o;d.method=m.toUpperCase(),l==="application/json"?(d.headers=new Headers({"Content-Type":l}),d.body=JSON.stringify(o.json)):l==="text/plain"?d.body=o.text:l==="application/x-www-form-urlencoded"&&o.formData?d.body=_x(o.formData):d.body=o.formData}return new Request(c,d)}function _x(e){let t=new URLSearchParams;for(let[r,o]of e.entries())t.append(r,typeof o=="string"?o:o.name);return t}function zC(e){let t=new FormData;for(let[r,o]of e.entries())t.append(r,o);return t}function wV(e,t,r,o,c,d){let m={},l=null,b,w=!1,T={},E=o&&Do(o[1])?o[1].error:void 0;return r.forEach((z,j)=>{let U=t[j].route.id;if(Ir(!lc(z),"Cannot handle redirect results in processLoaderData"),Do(z)){let V=z.error;E!==void 0&&(V=E,E=void 0),l=l||{};{let K=Eu(e,U);l[K.route.id]==null&&(l[K.route.id]=V)}m[U]=void 0,w||(w=!0,b=sv(z.error)?z.error.status:500),z.headers&&(T[U]=z.headers)}else sc(z)?(c.set(U,z.deferredData),m[U]=z.deferredData.data,z.statusCode!=null&&z.statusCode!==200&&!w&&(b=z.statusCode),z.headers&&(T[U]=z.headers)):(m[U]=z.data,z.statusCode&&z.statusCode!==200&&!w&&(b=z.statusCode),z.headers&&(T[U]=z.headers))}),E!==void 0&&o&&(l={[o[0]]:E},m[o[0]]=void 0),{loaderData:m,errors:l,statusCode:b||200,loaderHeaders:T}}function MC(e,t,r,o,c,d,m,l){let{loaderData:b,errors:w}=wV(t,r,o,c,l);for(let T=0;T<d.length;T++){let{key:E,match:z,controller:j}=d[T];Ir(m!==void 0&&m[T]!==void 0,"Did not find corresponding fetcher result");let U=m[T];if(!(j&&j.signal.aborted))if(Do(U)){let V=Eu(e.matches,z==null?void 0:z.route.id);w&&w[V.route.id]||(w=An({},w,{[V.route.id]:U.error})),e.fetchers.delete(E)}else if(lc(U))Ir(!1,"Unhandled fetcher revalidation redirect");else if(sc(U))Ir(!1,"Unhandled fetcher deferred data");else{let V=tl(U.data);e.fetchers.set(E,V)}}return{loaderData:b,errors:w}}function DC(e,t,r,o){let c=An({},t);for(let d of r){let m=d.route.id;if(t.hasOwnProperty(m)?t[m]!==void 0&&(c[m]=t[m]):e[m]!==void 0&&d.route.loader&&(c[m]=e[m]),o&&o.hasOwnProperty(m))break}return c}function AC(e){return e?Do(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Eu(e,t){return(t?e.slice(0,e.findIndex(o=>o.route.id===t)+1):[...e]).reverse().find(o=>o.route.hasErrorBoundary===!0)||e[0]}function RC(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function oo(e,t){let{pathname:r,routeId:o,method:c,type:d,message:m}=t===void 0?{}:t,l="Unknown Server Error",b="Unknown @remix-run/router error";return e===400?(l="Bad Request",d==="route-discovery"?b='Unable to match URL "'+r+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+m):c&&r&&o?b="You made a "+c+' request to "'+r+'" but '+('did not provide a `loader` for route "'+o+'", ')+"so there is no way to handle the request.":d==="defer-action"?b="defer() is not supported in actions":d==="invalid-body"&&(b="Unable to encode submission body")):e===403?(l="Forbidden",b='Route "'+o+'" does not match URL "'+r+'"'):e===404?(l="Not Found",b='No route matches URL "'+r+'"'):e===405&&(l="Method Not Allowed",c&&r&&o?b="You made a "+c.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+o+'", ')+"so there is no way to handle the request.":c&&(b='Invalid request method "'+c.toUpperCase()+'"')),new Ug(e||500,l,new Error(b),!0)}function LC(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(lc(r))return{result:r,idx:t}}}function OE(e){let t=typeof e=="string"?El(e):e;return of(An({},t,{hash:""}))}function SV(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function CV(e){return typeof e=="object"&&e!=null&&"then"in e}function kV(e){return FE(e.result)&&lV.has(e.result.status)}function sc(e){return e.type===cn.deferred}function Do(e){return e.type===cn.error}function lc(e){return(e&&e.type)===cn.redirect}function $C(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function IV(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function FE(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function TV(e){return sV.has(e.toLowerCase())}function za(e){return oV.has(e.toLowerCase())}async function BC(e,t,r,o,c,d){for(let m=0;m<r.length;m++){let l=r[m],b=t[m];if(!b)continue;let w=e.find(E=>E.route.id===b.route.id),T=w!=null&&!$E(w,b)&&(d&&d[b.route.id])!==void 0;if(sc(l)&&(c||T)){let E=o[m];Ir(E,"Expected an AbortSignal for revalidating fetcher deferred result"),await NE(l,E,c).then(z=>{z&&(r[m]=z||r[m])})}}}async function NE(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:cn.data,data:e.deferredData.unwrappedData}}catch(c){return{type:cn.error,error:c}}return{type:cn.data,data:e.deferredData.data}}}function vb(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function qh(e,t){let r=typeof t=="string"?El(t).search:t.search;if(e[e.length-1].route.index&&vb(r||""))return e[e.length-1];let o=ME(e);return o[o.length-1]}function OC(e){let{formMethod:t,formAction:r,formEncType:o,text:c,formData:d,json:m}=e;if(!(!t||!r||!o)){if(c!=null)return{formMethod:t,formAction:r,formEncType:o,formData:void 0,json:void 0,text:c};if(d!=null)return{formMethod:t,formAction:r,formEncType:o,formData:d,json:void 0,text:void 0};if(m!==void 0)return{formMethod:t,formAction:r,formEncType:o,formData:void 0,json:m,text:void 0}}}function i_(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function PV(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Oh(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function EV(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function tl(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function zV(e,t){try{let r=e.sessionStorage.getItem(LE);if(r){let o=JSON.parse(r);for(let[c,d]of Object.entries(o||{}))d&&Array.isArray(d)&&t.set(c,new Set(d||[]))}}catch{}}function MV(e,t){if(t.size>0){let r={};for(let[o,c]of t)r[o]=[...c];try{e.sessionStorage.setItem(LE,JSON.stringify(r))}catch(o){rd(!1,"Failed to save applied view transitions in sessionStorage ("+o+").")}}}/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hg(){return Hg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Hg.apply(this,arguments)}const lv=A.createContext(null),jE=A.createContext(null),cv=A.createContext(null),_b=A.createContext(null),md=A.createContext({outlet:null,matches:[],isDataRoute:!1}),VE=A.createContext(null);function uv(){return A.useContext(_b)!=null}function xb(){return uv()||Ir(!1),A.useContext(_b).location}function UE(e){A.useContext(cv).static||A.useLayoutEffect(e)}function DV(){let{isDataRoute:e}=A.useContext(md);return e?HV():AV()}function AV(){uv()||Ir(!1);let e=A.useContext(lv),{basename:t,future:r,navigator:o}=A.useContext(cv),{matches:c}=A.useContext(md),{pathname:d}=xb(),m=JSON.stringify(DE(c,r.v7_relativeSplatPath)),l=A.useRef(!1);return UE(()=>{l.current=!0}),A.useCallback(function(w,T){if(T===void 0&&(T={}),!l.current)return;if(typeof w=="number"){o.go(w);return}let E=AE(w,JSON.parse(m),d,T.relative==="path");e==null&&t!=="/"&&(E.pathname=E.pathname==="/"?t:_l([t,E.pathname])),(T.replace?o.replace:o.push)(E,T.state,T)},[t,o,m,d,e])}function RV(e,t,r,o){uv()||Ir(!1);let{navigator:c}=A.useContext(cv),{matches:d}=A.useContext(md),m=d[d.length-1],l=m?m.params:{};m&&m.pathname;let b=m?m.pathnameBase:"/";m&&m.route;let w=xb(),T;T=w;let E=T.pathname||"/",z=E;if(b!=="/"){let V=b.replace(/^\//,"").split("/");z="/"+E.replace(/^\//,"").split("/").slice(V.length).join("/")}let j=nc(e,{pathname:z});return FV(j&&j.map(V=>Object.assign({},V,{params:Object.assign({},l,V.params),pathname:_l([b,c.encodeLocation?c.encodeLocation(V.pathname).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?b:_l([b,c.encodeLocation?c.encodeLocation(V.pathnameBase).pathname:V.pathnameBase])})),d,r,o)}function LV(){let e=UV(),t=sv(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),r?A.createElement("pre",{style:c},r):null,null)}const $V=A.createElement(LV,null);class BV extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?A.createElement(md.Provider,{value:this.props.routeContext},A.createElement(VE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OV(e){let{routeContext:t,match:r,children:o}=e,c=A.useContext(lv);return c&&c.static&&c.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=r.route.id),A.createElement(md.Provider,{value:t},o)}function FV(e,t,r,o){var c;if(t===void 0&&(t=[]),r===void 0&&(r=null),o===void 0&&(o=null),e==null){var d;if(!r)return null;if(r.errors)e=r.matches;else if((d=o)!=null&&d.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let m=e,l=(c=r)==null?void 0:c.errors;if(l!=null){let T=m.findIndex(E=>E.route.id&&(l==null?void 0:l[E.route.id])!==void 0);T>=0||Ir(!1),m=m.slice(0,Math.min(m.length,T+1))}let b=!1,w=-1;if(r&&o&&o.v7_partialHydration)for(let T=0;T<m.length;T++){let E=m[T];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(w=T),E.route.id){let{loaderData:z,errors:j}=r,U=E.route.loader&&z[E.route.id]===void 0&&(!j||j[E.route.id]===void 0);if(E.route.lazy||U){b=!0,w>=0?m=m.slice(0,w+1):m=[m[0]];break}}}return m.reduceRight((T,E,z)=>{let j,U=!1,V=null,K=null;r&&(j=l&&E.route.id?l[E.route.id]:void 0,V=E.route.errorElement||$V,b&&(w<0&&z===0?(U=!0,K=null):w===z&&(U=!0,K=E.route.hydrateFallbackElement||null)));let O=t.concat(m.slice(0,z+1)),L=()=>{let R;return j?R=V:U?R=K:E.route.Component?R=A.createElement(E.route.Component,null):E.route.element?R=E.route.element:R=T,A.createElement(OV,{match:E,routeContext:{outlet:T,matches:O,isDataRoute:r!=null},children:R})};return r&&(E.route.ErrorBoundary||E.route.errorElement||z===0)?A.createElement(BV,{location:r.location,revalidation:r.revalidation,component:V,error:j,children:L(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):L()},null)}var HE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(HE||{}),Wg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Wg||{});function NV(e){let t=A.useContext(lv);return t||Ir(!1),t}function jV(e){let t=A.useContext(jE);return t||Ir(!1),t}function VV(e){let t=A.useContext(md);return t||Ir(!1),t}function WE(e){let t=VV(),r=t.matches[t.matches.length-1];return r.route.id||Ir(!1),r.route.id}function UV(){var e;let t=A.useContext(VE),r=jV(Wg.UseRouteError),o=WE(Wg.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[o]}function HV(){let{router:e}=NV(HE.UseNavigateStable),t=WE(Wg.UseNavigateStable),r=A.useRef(!1);return UE(()=>{r.current=!0}),A.useCallback(function(c,d){d===void 0&&(d={}),r.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,Hg({fromRouteId:t},d)))},[e,t])}function xx(e){Ir(!1)}function WV(e){let{basename:t="/",children:r=null,location:o,navigationType:c=ri.Pop,navigator:d,static:m=!1,future:l}=e;uv()&&Ir(!1);let b=t.replace(/^\/*/,"/"),w=A.useMemo(()=>({basename:b,navigator:d,static:m,future:Hg({v7_relativeSplatPath:!1},l)}),[b,l,d,m]);typeof o=="string"&&(o=El(o));let{pathname:T="/",search:E="",hash:z="",state:j=null,key:U="default"}=o,V=A.useMemo(()=>{let K=af(T,b);return K==null?null:{location:{pathname:K,search:E,hash:z,state:j,key:U},navigationType:c}},[b,T,E,z,j,U,c]);return V==null?null:A.createElement(cv.Provider,{value:w},A.createElement(_b.Provider,{children:r,value:V}))}new Promise(()=>{});function bx(e,t){t===void 0&&(t=[]);let r=[];return A.Children.forEach(e,(o,c)=>{if(!A.isValidElement(o))return;let d=[...t,c];if(o.type===A.Fragment){r.push.apply(r,bx(o.props.children,d));return}o.type!==xx&&Ir(!1),!o.props.index||!o.props.children||Ir(!1);let m={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(m.children=bx(o.props.children,d)),r.push(m)}),r}function GV(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:A.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:A.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:A.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gg(){return Gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Gg.apply(this,arguments)}function wx(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let o=e[r];return t.concat(Array.isArray(o)?o.map(c=>[r,c]):[[r,o]])},[]))}function qV(e,t){let r=wx(e);return t&&t.forEach((o,c)=>{r.has(c)||t.getAll(c).forEach(d=>{r.append(c,d)})}),r}const ZV="6";try{window.__reactRouterVersion=ZV}catch{}function KV(e,t){return hV({basename:void 0,future:Gg({},void 0,{v7_prependBasename:!0}),history:$j({window:void 0}),hydrationData:XV(),routes:e,mapRouteProperties:GV,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function XV(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Gg({},t,{errors:JV(t.errors)})),t}function JV(e){if(!e)return null;let t=Object.entries(e),r={};for(let[o,c]of t)if(c&&c.__type==="RouteErrorResponse")r[o]=new Ug(c.status,c.statusText,c.data,c.internal===!0);else if(c&&c.__type==="Error"){if(c.__subType){let d=window[c.__subType];if(typeof d=="function")try{let m=new d(c.message);m.stack="",r[o]=m}catch{}}if(r[o]==null){let d=new Error(c.message);d.stack="",r[o]=d}}else r[o]=c;return r}const YV=A.createContext({isTransitioning:!1}),QV=A.createContext(new Map),e8="startTransition",FC=cg[e8],t8="flushSync",NC=k4[t8];function r8(e){FC?FC(e):e()}function Fh(e){NC?NC(e):e()}class n8{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",t(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",r(o))}})}}function i8(e){let{fallbackElement:t,router:r,future:o}=e,[c,d]=A.useState(r.state),[m,l]=A.useState(),[b,w]=A.useState({isTransitioning:!1}),[T,E]=A.useState(),[z,j]=A.useState(),[U,V]=A.useState(),K=A.useRef(new Map),{v7_startTransition:O}=o||{},L=A.useCallback(Z=>{O?r8(Z):Z()},[O]),R=A.useCallback((Z,ke)=>{let{deletedFetchers:xe,unstable_flushSync:Ie,unstable_viewTransitionOpts:ze}=ke;xe.forEach(Ye=>K.current.delete(Ye)),Z.fetchers.forEach((Ye,Ge)=>{Ye.data!==void 0&&K.current.set(Ge,Ye.data)});let Le=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!ze||Le){Ie?Fh(()=>d(Z)):L(()=>d(Z));return}if(Ie){Fh(()=>{z&&(T&&T.resolve(),z.skipTransition()),w({isTransitioning:!0,flushSync:!0,currentLocation:ze.currentLocation,nextLocation:ze.nextLocation})});let Ye=r.window.document.startViewTransition(()=>{Fh(()=>d(Z))});Ye.finished.finally(()=>{Fh(()=>{E(void 0),j(void 0),l(void 0),w({isTransitioning:!1})})}),Fh(()=>j(Ye));return}z?(T&&T.resolve(),z.skipTransition(),V({state:Z,currentLocation:ze.currentLocation,nextLocation:ze.nextLocation})):(l(Z),w({isTransitioning:!0,flushSync:!1,currentLocation:ze.currentLocation,nextLocation:ze.nextLocation}))},[r.window,z,T,K,L]);A.useLayoutEffect(()=>r.subscribe(R),[r,R]),A.useEffect(()=>{b.isTransitioning&&!b.flushSync&&E(new n8)},[b]),A.useEffect(()=>{if(T&&m&&r.window){let Z=m,ke=T.promise,xe=r.window.document.startViewTransition(async()=>{L(()=>d(Z)),await ke});xe.finished.finally(()=>{E(void 0),j(void 0),l(void 0),w({isTransitioning:!1})}),j(xe)}},[L,m,T,r.window]),A.useEffect(()=>{T&&m&&c.location.key===m.location.key&&T.resolve()},[T,z,c.location,m]),A.useEffect(()=>{!b.isTransitioning&&U&&(l(U.state),w({isTransitioning:!0,flushSync:!1,currentLocation:U.currentLocation,nextLocation:U.nextLocation}),V(void 0))},[b.isTransitioning,U]),A.useEffect(()=>{},[]);let re=A.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:Z=>r.navigate(Z),push:(Z,ke,xe)=>r.navigate(Z,{state:ke,preventScrollReset:xe==null?void 0:xe.preventScrollReset}),replace:(Z,ke,xe)=>r.navigate(Z,{replace:!0,state:ke,preventScrollReset:xe==null?void 0:xe.preventScrollReset})}),[r]),J=r.basename||"/",se=A.useMemo(()=>({router:r,navigator:re,static:!1,basename:J}),[r,re,J]),ie=A.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return A.createElement(A.Fragment,null,A.createElement(lv.Provider,{value:se},A.createElement(jE.Provider,{value:c},A.createElement(QV.Provider,{value:K.current},A.createElement(YV.Provider,{value:b},A.createElement(WV,{basename:J,location:c.location,navigationType:c.historyAction,navigator:re,future:ie},c.initialized||r.future.v7_partialHydration?A.createElement(o8,{routes:r.routes,future:r.future,state:c}):t))))),null)}const o8=A.memo(a8);function a8(e){let{routes:t,future:r,state:o}=e;return RV(t,void 0,o,r)}var jC;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(jC||(jC={}));var VC;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(VC||(VC={}));function s8(e){let t=A.useRef(wx(e)),r=A.useRef(!1),o=xb(),c=A.useMemo(()=>qV(o.search,r.current?null:t.current),[o.search]),d=DV(),m=A.useCallback((l,b)=>{const w=wx(typeof l=="function"?l(c):l);r.current=!0,d("?"+w,b)},[d,c]);return[c,m]}function Sn(e,t){if(e==null)throw new Error(t);return e}function l8(e,t){if(!e)throw new Error(`assertion failed: ${t}`);return e}var Wi=(e=>(e[e.Arizona=0]="Arizona",e[e.Arkansas=1]="Arkansas",e[e.Colorado=2]="Colorado",e[e.Idaho=3]="Idaho",e[e.Kansas=4]="Kansas",e[e.Montana=5]="Montana",e[e.Nebraska=6]="Nebraska",e[e.Nevada=7]="Nevada",e[e.NewMexico=8]="NewMexico",e[e.Oklahoma=9]="Oklahoma",e[e.Oregon=10]="Oregon",e[e.Texas=11]="Texas",e[e.Utah=12]="Utah",e[e.Washington=13]="Washington",e[e.Wyoming=14]="Wyoming",e))(Wi||{});const $p=new Set([7,0,8,10,13,12,3,2,14,5,11,9,4,6,1]),c8={7:"Nevada",0:"Arizona",8:"New Mexico",10:"Oregon",13:"Washington",12:"Utah",3:"Idaho",2:"Colorado",14:"Wyoming",5:"Montana",11:"Texas",9:"Oklahoma",4:"Kansas",6:"Nebraska",1:"Arkansas"},GE={0:new Set,1:new Set([7]),2:new Set([0]),3:new Set([8]),4:new Set([10]),5:new Set([13]),6:new Set([13,10]),7:new Set([12]),8:new Set([12,8]),9:new Set([3]),10:new Set([3,10]),11:new Set([3,12]),12:new Set([3,13]),13:new Set([2]),14:new Set([2,8]),15:new Set([2,12]),16:new Set([14]),17:new Set([14,2]),18:new Set([14,3]),19:new Set([14,12]),20:new Set([11]),21:new Set([11,8]),22:new Set([5]),23:new Set([5,3]),24:new Set([5,14]),25:new Set([9]),26:new Set([9,2]),27:new Set([9,8]),28:new Set([9,11]),29:new Set([4]),30:new Set([4,2]),31:new Set([4,9]),32:new Set([6]),33:new Set([6,2]),34:new Set([6,4]),35:new Set([6,14]),36:new Set([1]),37:new Set([1,9]),38:new Set([1,11])},u8={1:0,2:1,3:2,7:13,13:9,31:3,37:4,43:20,44:7,47:5,17:29,27:22,36:25,50:16,18:32,19:36};for(const e of Object.values(u8))e!==0&&l8(GE[e].size===1);function dv(e){const t=new Set;for(const[r,o]of Object.entries(GE))[...o].every(c=>e.has(c))&&t.add(Number(r));return t}const d8=new Set([]);var qE=(e=>(e[e.Road=0]="Road",e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.Green=3]="Green",e))(qE||{});const h8="modulepreload",p8=function(e){return"/"+e},UC={},f8=function(t,r,o){let c=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),l=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));c=Promise.allSettled(r.map(b=>{if(b=p8(b),b in UC)return;UC[b]=!0;const w=b.endsWith(".css"),T=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${T}`))return;const E=document.createElement("link");if(E.rel=w?"stylesheet":h8,w||(E.as="script"),E.crossOrigin="",E.href=b,l&&E.setAttribute("nonce",l),document.head.appendChild(E),w)return new Promise((z,j)=>{E.addEventListener("load",z),E.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${b}`)))})}))}function d(m){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=m,window.dispatchEvent(l),!l.defaultPrevented)throw m}return c.then(m=>{for(const l of m||[])l.status==="rejected"&&d(l.reason);return t().catch(d)})},ZE=A.createContext(null);function m8(){var e;const t=(e=A.useContext(ZE))===null||e===void 0?void 0:e.maps,r=A.useContext(wc);return A.useMemo(()=>({...t,current:r==null?void 0:r.map}),[t,r])}function g8(e,t){const r=Array.isArray(e)?e[0]:e?e.x:0,o=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return r===c&&o===d}function Ro(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Ro(e[r],t[r]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(const c of r)if(!t.hasOwnProperty(c)||!Ro(e[c],t[c]))return!1;return!0}return!1}function y8(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function HC(e,t){if(!e.getProjection)return;const r=e.getProjection(),o=t.getProjection();Ro(r,o)||t.setProjection(r)}function WC(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function GC(e,t){const r=t.viewState||t;let o=!1;if("longitude"in r&&"latitude"in r){const c=e.center;e.center=new c.constructor(r.longitude,r.latitude),o=o||c!==e.center}if("zoom"in r){const c=e.zoom;e.zoom=r.zoom,o=o||c!==e.zoom}if("bearing"in r){const c=e.bearing;e.bearing=r.bearing,o=o||c!==e.bearing}if("pitch"in r){const c=e.pitch;e.pitch=r.pitch,o=o||c!==e.pitch}return r.padding&&!e.isPaddingEqual(r.padding)&&(o=!0,e.padding=r.padding),o}const v8=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function qC(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const o of e.layers)t[o.id]=o;const r=e.layers.map(o=>{let c=null;"interactive"in o&&(c=Object.assign({},o),delete c.interactive);const d=t[o.ref];if(d){c=c||Object.assign({},o),delete c.ref;for(const m of v8)m in d&&(c[m]=d[m])}return c||o});return{...e,layers:r}}var ZC={};const KC={version:8,sources:{},layers:[]},XC={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},o_={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},JC={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},_8=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],x8=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class nd{constructor(t,r,o){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const d=this.props[JC[c.type]];d?d(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const d=this.props[XC[c.type]];d&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),d(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const d=this.props[o_[c.type]];d&&d(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=r,this._initialize(o)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const r=this.props;this.props=t;const o=this._updateSettings(t,r);o&&this._createShadowTransform(this._map);const c=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,r),this._updateStyleComponents(t,r),this._updateHandlers(t,r),(o||c||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,r){const o=nd.savedMaps.pop();if(!o)return null;const c=o.map,d=c.getContainer();for(r.className=d.className;d.childNodes.length>0;)r.appendChild(d.childNodes[0]);c._container=r;const m=c._resizeObserver;m&&(m.disconnect(),m.observe(r)),o.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:l}=t;return l&&(l.bounds?c.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):o._updateViewState(l,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),o}_initialize(t){const{props:r}=this,{mapStyle:o=KC}=r,c={...r,...r.initialViewState,accessToken:r.mapboxAccessToken||b8()||null,container:t,style:qC(o)},d=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[d.longitude||0,d.latitude||0],zoom:d.zoom||0,pitch:d.pitch||0,bearing:d.bearing||0}),r.gl){const T=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=T,r.gl)}const m=new this._MapClass(c);d.padding&&m.setPadding(d.padding),r.cursor&&(m.getCanvas().style.cursor=r.cursor),this._createShadowTransform(m);const l=m._render;m._render=T=>{this._inRender=!0,l.call(m,T),this._inRender=!1};const b=m._renderTaskQueue.run;m._renderTaskQueue.run=T=>{b.call(m._renderTaskQueue,T),this._onBeforeRepaint()},m.on("render",()=>this._onAfterRepaint());const w=m.fire;m.fire=this._fireEvent.bind(this,w),m.on("resize",()=>{this._renderTransform.resize(m.transform.width,m.transform.height)}),m.on("styledata",()=>{this._updateStyleComponents(this.props,{}),HC(m.transform,this._renderTransform)}),m.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const T in XC)m.on(T,this._onPointerEvent);for(const T in o_)m.on(T,this._onCameraEvent);for(const T in JC)m.on(T,this._onEvent);this._map=m}recycle(){const r=this.map.getContainer().querySelector("[mapboxgl-children]");r==null||r.remove(),nd.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const r=y8(t.transform);t.painter.transform=r,this._renderTransform=r}_updateSize(t){const{viewState:r}=t;if(r){const o=this._map;if(r.width!==o.transform.width||r.height!==o.transform.height)return o.resize(),!0}return!1}_updateViewState(t,r){if(this._internalUpdate)return!1;const o=this._map,c=this._renderTransform,{zoom:d,pitch:m,bearing:l}=c,b=o.isMoving();b&&(c.cameraElevationReference="sea");const w=GC(c,{...WC(o.transform),...t});if(b&&(c.cameraElevationReference="ground"),w&&r){const T=this._deferredEvents;T.move=!0,T.zoom||(T.zoom=d!==c.zoom),T.rotate||(T.rotate=l!==c.bearing),T.pitch||(T.pitch=m!==c.pitch)}return b||GC(o.transform,t),w}_updateSettings(t,r){const o=this._map;let c=!1;for(const d of _8)if(d in t&&!Ro(t[d],r[d])){c=!0;const m=o[`set${d[0].toUpperCase()}${d.slice(1)}`];m==null||m.call(o,t[d])}return c}_updateStyle(t,r){if(t.cursor!==r.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==r.mapStyle){const{mapStyle:o=KC,styleDiffing:c=!0}=t,d={diff:c};return"localIdeographFontFamily"in t&&(d.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(qC(o),d),!0}return!1}_updateStyleComponents(t,r){const o=this._map;let c=!1;return o.isStyleLoaded()&&("light"in t&&o.setLight&&!Ro(t.light,r.light)&&(c=!0,o.setLight(t.light)),"fog"in t&&o.setFog&&!Ro(t.fog,r.fog)&&(c=!0,o.setFog(t.fog)),"terrain"in t&&o.setTerrain&&!Ro(t.terrain,r.terrain)&&(!t.terrain||o.getSource(t.terrain.source))&&(c=!0,o.setTerrain(t.terrain))),c}_updateHandlers(t,r){var o,c;const d=this._map;let m=!1;for(const l of x8){const b=(o=t[l])!==null&&o!==void 0?o:!0,w=(c=r[l])!==null&&c!==void 0?c:!0;Ro(b,w)||(m=!0,b?d[l].enable(b):d[l].disable())}return m}_queryRenderedFeatures(t){const r=this._map,o=r.transform,{interactiveLayerIds:c=[]}=this.props;try{return r.transform=this._renderTransform,r.queryRenderedFeatures(t,{layers:c.filter(r.getLayer.bind(r))})}catch{return[]}finally{r.transform=o}}_updateHover(t){var r;const{props:o}=this;if(o.interactiveLayerIds&&(o.onMouseMove||o.onMouseEnter||o.onMouseLeave)){const d=t.type,m=((r=this._hoveredFeatures)===null||r===void 0?void 0:r.length)>0,l=this._queryRenderedFeatures(t.point),b=l.length>0;!b&&m&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,b&&!m&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,r,o){const c=this._map,d=c.transform,m=typeof r=="string"?r:r.type;return m==="move"&&this._updateViewState(this.props,!1),m in o_&&(typeof r=="object"&&(r.viewState=WC(d)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,r,o),c.transform=d,c):(t.call(c,r,o),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const o in this._deferredEvents)this._deferredEvents[o]&&t.fire(o);this._internalUpdate=!1;const r=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{HC(this._renderTransform,r),t.transform=r}}}nd.savedMaps=[];function b8(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||ZC.MapboxAccessToken}catch{}try{e=e||ZC.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const w8=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function S8(e){if(!e)return null;const t=e.map,r={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:o=>{const c=t.transform;t.transform=e.transform;const d=t.project(o);return t.transform=c,d},unproject:o=>{const c=t.transform;t.transform=e.transform;const d=t.unproject(o);return t.transform=c,d},queryTerrainElevation:(o,c)=>{const d=t.transform;t.transform=e.transform;const m=t.queryTerrainElevation(o,c);return t.transform=d,m},queryRenderedFeatures:(o,c)=>{const d=t.transform;t.transform=e.transform;const m=t.queryRenderedFeatures(o,c);return t.transform=d,m}};for(const o of C8(t))!(o in r)&&!w8.includes(o)&&(r[o]=t[o].bind(t));return r}function C8(e){const t=new Set;let r=e;for(;r;){for(const o of Object.getOwnPropertyNames(r))o[0]!=="_"&&typeof e[o]=="function"&&o!=="fire"&&o!=="setEventedParent"&&t.add(o);r=Object.getPrototypeOf(r)}return Array.from(t)}const k8=typeof document<"u"?A.useLayoutEffect:A.useEffect,I8=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function T8(e,t){for(const o of I8)o in t&&(e[o]=t[o]);const{RTLTextPlugin:r="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;r&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(r,o=>{o&&console.error(o)},!0)}const wc=A.createContext(null);function P8(e,t,r){const o=A.useContext(ZE),[c,d]=A.useState(null),m=A.useRef(),{current:l}=A.useRef({mapLib:null,map:null});A.useEffect(()=>{const T=e.mapLib;let E=!0,z;return Promise.resolve(T||r).then(j=>{if(!E)return;if(!j)throw new Error("Invalid mapLib");const U="Map"in j?j:j.default;if(!U.Map)throw new Error("Invalid mapLib");if(T8(U,e),!U.supported||U.supported(e))e.reuseMaps&&(z=nd.reuse(e,m.current)),z||(z=new nd(U.Map,e,m.current)),l.map=S8(z),l.mapLib=U,d(z),o==null||o.onMapMount(l.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(j=>{const{onError:U}=e;U?U({type:"error",target:null,originalEvent:null,error:j}):console.error(j)}),()=>{E=!1,z&&(o==null||o.onMapUnmount(e.id),e.reuseMaps?z.recycle():z.destroy())}},[]),k8(()=>{c&&c.setProps(e)}),A.useImperativeHandle(t,()=>l.map,[c]);const b=A.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),w={height:"100%"};return A.createElement("div",{id:e.id,ref:m,style:b},c&&A.createElement(wc.Provider,{value:l},A.createElement("div",{"mapboxgl-children":"",style:w},e.children)))}const E8=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Sc(e,t){if(!e||!t)return;const r=e.style;for(const o in t){const c=t[o];Number.isFinite(c)&&!E8.test(o)?r[o]=`${c}px`:r[o]=c}}function z8(e,t){const{map:r,mapLib:o}=A.useContext(wc),c=A.useRef({props:e});c.current.props=e;const d=A.useMemo(()=>{let V=!1;A.Children.forEach(e.children,L=>{L&&(V=!0)});const K={...e,element:V?document.createElement("div"):null},O=new o.Marker(K);return O.setLngLat([e.longitude,e.latitude]),O.getElement().addEventListener("click",L=>{var R,re;(re=(R=c.current.props).onClick)===null||re===void 0||re.call(R,{type:"click",target:O,originalEvent:L})}),O.on("dragstart",L=>{var R,re;const J=L;J.lngLat=d.getLngLat(),(re=(R=c.current.props).onDragStart)===null||re===void 0||re.call(R,J)}),O.on("drag",L=>{var R,re;const J=L;J.lngLat=d.getLngLat(),(re=(R=c.current.props).onDrag)===null||re===void 0||re.call(R,J)}),O.on("dragend",L=>{var R,re;const J=L;J.lngLat=d.getLngLat(),(re=(R=c.current.props).onDragEnd)===null||re===void 0||re.call(R,J)}),O},[]);A.useEffect(()=>(d.addTo(r.getMap()),()=>{d.remove()}),[]);const{longitude:m,latitude:l,offset:b,style:w,draggable:T=!1,popup:E=null,rotation:z=0,rotationAlignment:j="auto",pitchAlignment:U="auto"}=e;return A.useEffect(()=>{Sc(d.getElement(),w)},[w]),A.useImperativeHandle(t,()=>d,[]),(d.getLngLat().lng!==m||d.getLngLat().lat!==l)&&d.setLngLat([m,l]),b&&!g8(d.getOffset(),b)&&d.setOffset(b),d.isDraggable()!==T&&d.setDraggable(T),d.getRotation()!==z&&d.setRotation(z),d.getRotationAlignment()!==j&&d.setRotationAlignment(j),d.getPitchAlignment()!==U&&d.setPitchAlignment(U),d.getPopup()!==E&&d.setPopup(E),dd.createPortal(e.children,d.getElement())}const M8=A.memo(A.forwardRef(z8));function YC(e){return new Set(e?e.trim().split(/\s+/):[])}function D8(e,t){const{map:r,mapLib:o}=A.useContext(wc),c=A.useMemo(()=>document.createElement("div"),[]),d=A.useRef({props:e});d.current.props=e;const m=A.useMemo(()=>{const l={...e},b=new o.Popup(l);return b.setLngLat([e.longitude,e.latitude]),b.once("open",w=>{var T,E;(E=(T=d.current.props).onOpen)===null||E===void 0||E.call(T,w)}),b},[]);if(A.useEffect(()=>{const l=b=>{var w,T;(T=(w=d.current.props).onClose)===null||T===void 0||T.call(w,b)};return m.on("close",l),m.setDOMContent(c).addTo(r.getMap()),()=>{m.off("close",l),m.isOpen()&&m.remove()}},[]),A.useEffect(()=>{Sc(m.getElement(),e.style)},[e.style]),A.useImperativeHandle(t,()=>m,[]),m.isOpen()&&((m.getLngLat().lng!==e.longitude||m.getLngLat().lat!==e.latitude)&&m.setLngLat([e.longitude,e.latitude]),e.offset&&!Ro(m.options.offset,e.offset)&&m.setOffset(e.offset),(m.options.anchor!==e.anchor||m.options.maxWidth!==e.maxWidth)&&(m.options.anchor=e.anchor,m.setMaxWidth(e.maxWidth)),m.options.className!==e.className)){const l=YC(m.options.className),b=YC(e.className);for(const w of l)b.has(w)||m.removeClassName(w);for(const w of b)l.has(w)||m.addClassName(w);m.options.className=e.className}return dd.createPortal(e.children,c)}A.memo(A.forwardRef(D8));function $s(e,t,r,o){const c=A.useContext(wc),d=A.useMemo(()=>e(c),[]);return A.useEffect(()=>{const m=t,l=typeof t=="function"&&typeof r=="function"?t:null,b=typeof t=="function"?t:null,{map:w}=c;return w.hasControl(d)||(w.addControl(d,m==null?void 0:m.position),l&&l(c)),()=>{b&&b(c),w.hasControl(d)&&w.removeControl(d)}},[]),d}function A8(e){const t=$s(({mapLib:r})=>new r.AttributionControl(e),{position:e.position});return A.useEffect(()=>{Sc(t._container,e.style)},[e.style]),null}const R8=A.memo(A8);function L8(e){const t=$s(({mapLib:r})=>new r.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return A.useEffect(()=>{Sc(t._controlContainer,e.style)},[e.style]),null}const $8=A.memo(L8);function B8(e,t){const r=A.useRef({props:e}),o=$s(({mapLib:c})=>{const d=new c.GeolocateControl(e),m=d._setupUI;return d._setupUI=l=>{d._container.hasChildNodes()||m(l)},d.on("geolocate",l=>{var b,w;(w=(b=r.current.props).onGeolocate)===null||w===void 0||w.call(b,l)}),d.on("error",l=>{var b,w;(w=(b=r.current.props).onError)===null||w===void 0||w.call(b,l)}),d.on("outofmaxbounds",l=>{var b,w;(w=(b=r.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(b,l)}),d.on("trackuserlocationstart",l=>{var b,w;(w=(b=r.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(b,l)}),d.on("trackuserlocationend",l=>{var b,w;(w=(b=r.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(b,l)}),d},{position:e.position});return r.current.props=e,A.useImperativeHandle(t,()=>o,[]),A.useEffect(()=>{Sc(o._container,e.style)},[e.style]),null}A.memo(A.forwardRef(B8));function O8(e){const t=$s(({mapLib:r})=>new r.NavigationControl(e),{position:e.position});return A.useEffect(()=>{Sc(t._container,e.style)},[e.style]),null}const F8=A.memo(O8);function N8(e){const t=$s(({mapLib:d})=>new d.ScaleControl(e),{position:e.position}),r=A.useRef(e),o=r.current;r.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==o.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==o.unit&&t.setUnit(e.unit),A.useEffect(()=>{Sc(t._container,c)},[c]),null}A.memo(N8);function qg(e,t){if(!e)throw new Error(t)}function j8(e,t,r,o){if(qg(r.id===o.id,"layer id changed"),qg(r.type===o.type,"layer type changed"),r.type==="custom"||o.type==="custom")return;const{layout:c={},paint:d={},filter:m,minzoom:l,maxzoom:b,beforeId:w}=r;if(w!==o.beforeId&&e.moveLayer(t,w),c!==o.layout){const T=o.layout||{};for(const E in c)Ro(c[E],T[E])||e.setLayoutProperty(t,E,c[E]);for(const E in T)c.hasOwnProperty(E)||e.setLayoutProperty(t,E,void 0)}if(d!==o.paint){const T=o.paint||{};for(const E in d)Ro(d[E],T[E])||e.setPaintProperty(t,E,d[E]);for(const E in T)d.hasOwnProperty(E)||e.setPaintProperty(t,E,void 0)}Ro(m,o.filter)||e.setFilter(t,m),(l!==o.minzoom||b!==o.maxzoom)&&e.setLayerZoomRange(t,l,b)}function V8(e,t,r){if(e.style&&e.style._loaded&&(!("source"in r)||e.getSource(r.source))){const o={...r,id:t};delete o.beforeId,e.addLayer(o,r.beforeId)}}let U8=0;function H8(e){const t=A.useContext(wc).map.getMap(),r=A.useRef(e),[,o]=A.useState(0),c=A.useMemo(()=>e.id||`jsx-layer-${U8++}`,[]);if(A.useEffect(()=>{if(t){const m=()=>o(l=>l+1);return t.on("styledata",m),m(),()=>{t.off("styledata",m),t.style&&t.style._loaded&&t.getLayer(c)&&t.removeLayer(c)}}},[t]),t&&t.style&&t.getLayer(c))try{j8(t,c,e,r.current)}catch(m){console.warn(m)}else V8(t,c,e);return r.current=e,null}let W8=0;function G8(e,t,r){if(e.style&&e.style._loaded){const o={...r};return delete o.id,delete o.children,e.addSource(t,o),e.getSource(t)}return null}function q8(e,t,r){qg(t.id===r.id,"source id changed"),qg(t.type===r.type,"source type changed");let o="",c=0;for(const m in t)m!=="children"&&m!=="id"&&!Ro(r[m],t[m])&&(o=m,c++);if(!c)return;const d=t.type;if(d==="geojson")e.setData(t.data);else if(d==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&c===1&&o==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(o){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${o}`)}function Z8(e){const t=A.useContext(wc).map.getMap(),r=A.useRef(e),[,o]=A.useState(0),c=A.useMemo(()=>e.id||`jsx-source-${W8++}`,[]);A.useEffect(()=>{if(t){const m=()=>setTimeout(()=>o(l=>l+1),0);return t.on("styledata",m),m(),()=>{var l;if(t.off("styledata",m),t.style&&t.style._loaded&&t.getSource(c)){const b=(l=t.getStyle())===null||l===void 0?void 0:l.layers;if(b)for(const w of b)w.source===c&&t.removeLayer(w.id);t.removeSource(c)}}}},[t]);let d=t&&t.style&&t.getSource(c);return d?q8(d,e,r.current):d=G8(t,c,e),r.current=e,d&&A.Children.map(e.children,m=>m&&A.cloneElement(m,{source:c}))||null}function bb(){return m8()}const K8=f8(()=>Promise.resolve().then(()=>Q8),void 0),KE=A.forwardRef(function(t,r){return P8(t,r,K8)}),X8=M8,XE=R8,JE=$8,YE=F8,Jr=H8,gd=Z8,J8={"text-color":"hsl(42, 10%, 14%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 100%)"},Y8={"text-color":"hsl(42, 10%, 86%)","text-halo-width":2,"text-halo-color":"hsl(42, 10%, 0%)"},wb={light:{water:"#b2cdfb",land:"#f8f8f8",stateBorder:"#aaa",countryBorder:"#ccc",baseTextPaint:J8,hiddenRoad:"#e9e9e8",footprint:"#e9e9e8",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#eeeeffcc",trainLine:"#aaa",trainLabel:"#555c",trainHalo:"#eefc",mapAreaOutline:"#999a"},dark:{water:"#36415d",land:"#1a1a1a",stateBorder:"#555",countryBorder:"#333",baseTextPaint:Y8,hiddenRoad:"#404038",footprint:"#30302f88",ferryLine:"#6c90ff88",ferryLabel:"#6c80ff",ferryHalo:"#303028cc",trainLine:"#888",trainLabel:"#eeec",trainHalo:"#303028cc",mapAreaOutline:"#777a"}};var QE={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(AD,function(){var r,o,c;function d(l,b){if(!r)r=b;else if(!o)o=b;else{var w="var sharedChunk = {}; ("+r+")(sharedChunk); ("+o+")(sharedChunk);",T={};r(T),c=b(T),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}d(["exports"],function(l){function b(a,n,s,h){return new(s||(s=Promise))(function(f,v){function x(M){try{I(h.next(M))}catch($){v($)}}function S(M){try{I(h.throw(M))}catch($){v($)}}function I(M){var $;M.done?f(M.value):($=M.value,$ instanceof s?$:new s(function(N){N($)})).then(x,S)}I((h=h.apply(a,n||[])).next())})}function w(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var T=E;function E(a,n){this.x=a,this.y=n}E.prototype={clone:function(){return new E(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,n){return this.clone()._rotateAround(a,n)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var n=a.x-this.x,s=a.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,n){return Math.atan2(this.x*n-this.y*a,this.x*a+this.y*n)},_matMult:function(a){var n=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=n,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var n=Math.cos(a),s=Math.sin(a),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(a,n){var s=Math.cos(a),h=Math.sin(a),f=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},E.convert=function(a){return a instanceof E?a:Array.isArray(a)?new E(a[0],a[1]):a};var z=w(T),j=U;function U(a,n,s,h){this.cx=3*a,this.bx=3*(s-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=n,this.p2x=s,this.p2y=h}U.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,n){if(n===void 0&&(n=1e-6),a<0)return 0;if(a>1)return 1;for(var s=a,h=0;h<8;h++){var f=this.sampleCurveX(s)-a;if(Math.abs(f)<n)return s;var v=this.sampleCurveDerivativeX(s);if(Math.abs(v)<1e-6)break;s-=f/v}var x=0,S=1;for(s=a,h=0;h<20&&(f=this.sampleCurveX(s),!(Math.abs(f-a)<n));h++)a>f?x=s:S=s,s=.5*(S-x)+x;return s},solve:function(a,n){return this.sampleCurveY(this.solveCurveX(a,n))}};var V=w(j);let K,O;function L(){return K==null&&(K=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),K}function R(){if(O==null&&(O=!1,L())){const n=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(n){for(let h=0;h<5*5;h++){const f=4*h;n.fillStyle=`rgb(${f},${f+1},${f+2})`,n.fillRect(h%5,Math.floor(h/5),1,1)}const s=n.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){O=!0;break}}}return O||!1}function re(a,n,s,h){const f=new V(a,n,s,h);return function(v){return f.solve(v)}}const J=re(.25,.1,.25,1);function se(a,n,s){return Math.min(s,Math.max(n,a))}function ie(a,n,s){const h=s-n,f=((a-n)%h+h)%h+n;return f===n?s:f}function Z(a,...n){for(const s of n)for(const h in s)a[h]=s[h];return a}let ke=1;function xe(a,n,s){const h={};for(const f in a)h[f]=n.call(s||this,a[f],f,a);return h}function Ie(a,n,s){const h={};for(const f in a)n.call(s||this,a[f],f,a)&&(h[f]=a[f]);return h}function ze(a){return Array.isArray(a)?a.map(ze):typeof a=="object"&&a?xe(a,ze):a}const Le={};function Ye(a){Le[a]||(typeof console<"u"&&console.warn(a),Le[a]=!0)}function Ge(a,n,s){return(s.y-a.y)*(n.x-a.x)>(n.y-a.y)*(s.x-a.x)}function Te(a){let n=0;for(let s,h,f=0,v=a.length,x=v-1;f<v;x=f++)s=a[f],h=a[x],n+=(h.x-s.x)*(s.y+h.y);return n}function Fe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}let $e=null;function Oe(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const Qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function at(a,n,s,h,f){return b(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(a,{timestamp:0});try{const x=v==null?void 0:v.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),I=new Uint8ClampedArray(h*f*4);if(yield v.copyTo(I,function(M,$,N,q,Q){const ee=4*Math.max(-$,0),le=(Math.max(0,N)-N)*q*4+ee,me=4*q,ve=Math.max(0,$),Ae=Math.max(0,N);return{rect:{x:ve,y:Ae,width:Math.min(M.width,$+q)-ve,height:Math.min(M.height,N+Q)-Ae},layout:[{offset:le,stride:me}]}}(a,n,s,h,f)),S)for(let M=0;M<I.length;M+=4){const $=I[M];I[M]=I[M+2],I[M+2]=$}return I}finally{v.close()}})}let ut,Pt,wt,zt;const er={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(a){const n=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(a,n=0){return this.getImageCanvasContext(a).getImageData(-n,-n,a.width+2*n,a.height+2*n)},getImageCanvasContext(a){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=a.width,n.height=a.height,s.drawImage(a,0,0,a.width,a.height),s},resolveURL:a=>(wt||(wt=document.createElement("a")),wt.href=a,wt.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(zt==null&&(zt=matchMedia("(prefers-reduced-motion: reduce)")),zt.matches)}},lt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};class qe extends Error{constructor(n,s,h,f){super(`AJAXError: ${s} (${n}): ${h}`),this.status=n,this.statusText=s,this.url=h,this.body=f}}const pt=Fe()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,yt=a=>lt.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))];function or(a,n){const s=new AbortController,h=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,cache:a.cache,referrer:pt(),signal:s.signal});let f=!1,v=!1;return a.type==="json"&&h.headers.set("Accept","application/json"),v||fetch(h).then(x=>x.ok?(S=>{(a.type==="arrayBuffer"||a.type==="image"?S.arrayBuffer():a.type==="json"?S.json():S.text()).then(I=>{v||(f=!0,n(null,I,S.headers.get("Cache-Control"),S.headers.get("Expires")))}).catch(I=>{v||n(new Error(I.message))})})(x):x.blob().then(S=>n(new qe(x.status,x.statusText,a.url,S)))).catch(x=>{x.code!==20&&n(new Error(x.message))}),{cancel:()=>{v=!0,f||s.abort()}}}const Kt=function(a,n){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(Fe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n);if(!Fe())return(yt(a.url)||or)(a,n)}if(!(/^file:/.test(s=a.url)||/^file:/.test(pt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return or(a,n);if(Fe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n,void 0,!0)}var s;return function(h,f){const v=new XMLHttpRequest;v.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(v.responseType="arraybuffer");for(const x in h.headers)v.setRequestHeader(x,h.headers[x]);return h.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=h.credentials==="include",v.onerror=()=>{f(new Error(v.statusText))},v.onload=()=>{if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let x=v.response;if(h.type==="json")try{x=JSON.parse(v.response)}catch(S){return f(S)}f(null,x,v.getResponseHeader("Cache-Control"),v.getResponseHeader("Expires"))}else{const x=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});f(new qe(v.status,v.statusText,h.url,x))}},v.send(h.body),{cancel:()=>v.abort()}}(a,n)},Mr=function(a,n){return Kt(Z(a,{type:"arrayBuffer"}),n)};function lr(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const n=new URL(a),s=window.location;return n.protocol===s.protocol&&n.host===s.host}function Vt(a,n,s){s[a]&&s[a].indexOf(n)!==-1||(s[a]=s[a]||[],s[a].push(n))}function Et(a,n,s){if(s&&s[a]){const h=s[a].indexOf(n);h!==-1&&s[a].splice(h,1)}}class ur{constructor(n,s={}){Z(this,s),this.type=n}}class Mt extends ur{constructor(n,s={}){super("error",Z({error:n},s))}}class Er{on(n,s){return this._listeners=this._listeners||{},Vt(n,s,this._listeners),this}off(n,s){return Et(n,s,this._listeners),Et(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Vt(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new ur(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const f=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const S of f)S.call(this,n);const v=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const S of v)Et(h,S,this._oneTimeListeners),S.call(this,n);const x=this._eventedParent;x&&(Z(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof Mt&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Sr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Dr(a,n){const s={};for(const h in a)h!=="ref"&&(s[h]=a[h]);return Sr.forEach(h=>{h in n&&(s[h]=n[h])}),s}function qt(a,n){if(Array.isArray(a)){if(!Array.isArray(n)||a.length!==n.length)return!1;for(let s=0;s<a.length;s++)if(!qt(a[s],n[s]))return!1;return!0}if(typeof a=="object"&&a!==null&&n!==null){if(typeof n!="object"||Object.keys(a).length!==Object.keys(n).length)return!1;for(const s in a)if(!qt(a[s],n[s]))return!1;return!0}return a===n}const rr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Or(a,n,s){s.push({command:rr.addSource,args:[a,n[a]]})}function Hr(a,n,s){n.push({command:rr.removeSource,args:[a]}),s[a]=!0}function dr(a,n,s,h){Hr(a,s,h),Or(a,n,s)}function cr(a,n,s){let h;for(h in a[s])if(Object.prototype.hasOwnProperty.call(a[s],h)&&h!=="data"&&!qt(a[s][h],n[s][h]))return!1;for(h in n[s])if(Object.prototype.hasOwnProperty.call(n[s],h)&&h!=="data"&&!qt(a[s][h],n[s][h]))return!1;return!0}function Gt(a,n,s,h,f,v){let x;for(x in n=n||{},a=a||{})Object.prototype.hasOwnProperty.call(a,x)&&(qt(a[x],n[x])||s.push({command:v,args:[h,x,n[x],f]}));for(x in n)Object.prototype.hasOwnProperty.call(n,x)&&!Object.prototype.hasOwnProperty.call(a,x)&&(qt(a[x],n[x])||s.push({command:v,args:[h,x,n[x],f]}))}function sr(a){return a.id}function Tr(a,n){return a[n.id]=n,a}class Be{constructor(n,s,h,f){this.message=(n?`${n}: `:"")+h,f&&(this.identifier=f),s!=null&&s.__line__&&(this.line=s.__line__)}}function xt(a,...n){for(const s of n)for(const h in s)a[h]=s[h];return a}class St extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class tr{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,f]of s)this.bindings[h]=f}concat(n){return new tr(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const vn={kind:"null"},nt={kind:"number"},Yt={kind:"string"},Ot={kind:"boolean"},hr={kind:"color"},yr={kind:"object"},Lt={kind:"value"},Fr={kind:"collator"},he={kind:"formatted"},H={kind:"padding"},G={kind:"resolvedImage"},te={kind:"variableAnchorOffsetCollection"};function de(a,n){return{kind:"array",itemType:a,N:n}}function fe(a){if(a.kind==="array"){const n=fe(a.itemType);return typeof a.N=="number"?`array<${n}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${n}>`}return a.kind}const Me=[vn,nt,Yt,Ot,hr,he,yr,de(Lt),H,G,te];function be(a,n){if(n.kind==="error")return null;if(a.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!be(a.itemType,n.itemType))&&(typeof a.N!="number"||a.N===n.N))return null}else{if(a.kind===n.kind)return null;if(a.kind==="value"){for(const s of Me)if(!be(s,n))return null}}return`Expected ${fe(a)} but found ${fe(n)} instead.`}function ye(a,n){return n.some(s=>s.kind===a.kind)}function Ee(a,n){return n.some(s=>s==="null"?a===null:s==="array"?Array.isArray(a):s==="object"?a&&!Array.isArray(a)&&typeof a=="object":s===typeof a)}function Xe(a,n){return a.kind==="array"&&n.kind==="array"?a.itemType.kind===n.itemType.kind&&typeof a.N=="number":a.kind===n.kind}const ne=.96422,oe=.82521,Ce=4/29,je=6/29,Ze=3*je*je,et=je*je*je,Se=Math.PI/180,_e=180/Math.PI;function Ke(a){return(a%=360)<0&&(a+=360),a}function Je([a,n,s,h]){let f,v;const x=Ft((.2225045*(a=ot(a))+.7168786*(n=ot(n))+.0606169*(s=ot(s)))/1);a===n&&n===s?f=v=x:(f=Ft((.4360747*a+.3850649*n+.1430804*s)/ne),v=Ft((.0139322*a+.0971045*n+.7141733*s)/oe));const S=116*x-16;return[S<0?0:S,500*(f-x),200*(x-v),h]}function ot(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Ft(a){return a>et?Math.pow(a,1/3):a/Ze+Ce}function Tt([a,n,s,h]){let f=(a+16)/116,v=isNaN(n)?f:f+n/500,x=isNaN(s)?f:f-s/200;return f=1*ar(f),v=ne*ar(v),x=oe*ar(x),[Xt(3.1338561*v-1.6168667*f-.4906146*x),Xt(-.9787684*v+1.9161415*f+.033454*x),Xt(.0719453*v-.2289914*f+1.4052427*x),h]}function Xt(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function ar(a){return a>je?a*a*a:Ze*(a-Ce)}function Wr(a){return parseInt(a.padEnd(2,a),16)/255}function pn(a,n){return Di(n?a/100:a,0,1)}function Di(a,n,s){return Math.min(Math.max(n,a),s)}function Qn(a){return!a.some(Number.isNaN)}const Ho={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class vr{constructor(n,s,h,f=1,v=!0){this.r=n,this.g=s,this.b=h,this.a=f,v||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[n,s,h,f]))}static parse(n){if(n instanceof vr)return n;if(typeof n!="string")return;const s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=Ho[h];if(f){const[x,S,I]=f;return[x/255,S/255,I/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let S=1;return[Wr(h.slice(S,S+=x)),Wr(h.slice(S,S+=x)),Wr(h.slice(S,S+=x)),Wr(h.slice(S,S+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,I,M,$,N,q,Q,ee,le,me,ve,Ae]=x,we=[$||" ",Q||" ",me].join("");if(we==="  "||we==="  /"||we===",,"||we===",,,"){const Re=[M,q,le].join(""),Ue=Re==="%%%"?100:Re===""?255:0;if(Ue){const rt=[Di(+I/Ue,0,1),Di(+N/Ue,0,1),Di(+ee/Ue,0,1),ve?pn(+ve,Ae):1];if(Qn(rt))return rt}}return}}const v=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[x,S,I,M,$,N,q,Q,ee]=v,le=[I||" ",$||" ",q].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const me=[+S,Di(+M,0,100),Di(+N,0,100),Q?pn(+Q,ee):1];if(Qn(me))return function([ve,Ae,we,Re]){function Ue(rt){const It=(rt+ve/30)%12,Bt=Ae*Math.min(we,1-we);return we-Bt*Math.max(-1,Math.min(It-3,9-It,1))}return ve=Ke(ve),Ae/=100,we/=100,[Ue(0),Ue(8),Ue(4),Re]}(me)}}}(n);return s?new vr(...s,!1):void 0}get rgb(){const{r:n,g:s,b:h,a:f}=this,v=f||1/0;return this.overwriteGetter("rgb",[n/v,s/v,h/v,f])}get hcl(){return this.overwriteGetter("hcl",function(n){const[s,h,f,v]=Je(n),x=Math.sqrt(h*h+f*f);return[Math.round(1e4*x)?Ke(Math.atan2(f,h)*_e):NaN,x,s,v]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Je(this.rgb))}overwriteGetter(n,s){return Object.defineProperty(this,n,{value:s}),s}toString(){const[n,s,h,f]=this.rgb;return`rgba(${[n,s,h].map(v=>Math.round(255*v)).join(",")},${f})`}}vr.black=new vr(0,0,0,1),vr.white=new vr(1,1,1,1),vr.transparent=new vr(0,0,0,0),vr.red=new vr(1,0,0,1);class Ki{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Qt{constructor(n,s,h,f,v){this.text=n,this.image=s,this.scale=h,this.fontStack=f,this.textColor=v}}class $r{constructor(n){this.sections=n}static fromString(n){return new $r([new Qt(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof $r?n:$r.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class Pr{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Pr)return n;if(typeof n=="number")return new Pr([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new Pr(n)}}toString(){return JSON.stringify(this.values)}}const ei=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Zt{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof Zt)return n;if(Array.isArray(n)&&!(n.length<1)&&n.length%2==0){for(let s=0;s<n.length;s+=2){const h=n[s],f=n[s+1];if(typeof h!="string"||!ei.has(h)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Zt(n)}}toString(){return JSON.stringify(this.values)}}class fr{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new fr({name:n,available:!1}):null}}function Qr(a,n,s,h){return typeof a=="number"&&a>=0&&a<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[a,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[a,n,s,h]:[a,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function _r(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof vr||a instanceof Ki||a instanceof $r||a instanceof Pr||a instanceof Zt||a instanceof fr)return!0;if(Array.isArray(a)){for(const n of a)if(!_r(n))return!1;return!0}if(typeof a=="object"){for(const n in a)if(!_r(a[n]))return!1;return!0}return!1}function Br(a){if(a===null)return vn;if(typeof a=="string")return Yt;if(typeof a=="boolean")return Ot;if(typeof a=="number")return nt;if(a instanceof vr)return hr;if(a instanceof Ki)return Fr;if(a instanceof $r)return he;if(a instanceof Pr)return H;if(a instanceof Zt)return te;if(a instanceof fr)return G;if(Array.isArray(a)){const n=a.length;let s;for(const h of a){const f=Br(h);if(s){if(s===f)continue;s=Lt;break}s=f}return de(s||Lt,n)}return yr}function zr(a){const n=typeof a;return a===null?"":n==="string"||n==="number"||n==="boolean"?String(a):a instanceof vr||a instanceof $r||a instanceof Pr||a instanceof Zt||a instanceof fr?a.toString():JSON.stringify(a)}class fa{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!_r(n[1]))return s.error("invalid value");const h=n[1];let f=Br(h);const v=s.expectedType;return f.kind!=="array"||f.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(f=v),new fa(f,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class _n{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const Cc={string:Yt,number:nt,boolean:Ot,object:yr};class uo{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,f=1;const v=n[0];if(v==="array"){let S,I;if(n.length>2){const M=n[1];if(typeof M!="string"||!(M in Cc)||M==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);S=Cc[M],f++}else S=Lt;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);I=n[2],f++}h=de(S,I)}else{if(!Cc[v])throw new Error(`Types doesn't contain name = ${v}`);h=Cc[v]}const x=[];for(;f<n.length;f++){const S=s.parse(n[f],f,Lt);if(!S)return null;x.push(S)}return new uo(h,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!be(this.type,Br(h)))return h;if(s===this.args.length-1)throw new _n(`Expected value to be of type ${fe(this.type)}, but found ${fe(Br(h))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const _d={"to-boolean":Ot,"to-color":hr,"to-number":nt,"to-string":Yt};class Ba{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if(!_d[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const f=_d[h],v=[];for(let x=1;x<n.length;x++){const S=s.parse(n[x],x,Lt);if(!S)return null;v.push(S)}return new Ba(f,v)}evaluate(n){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(n);case"color":{let s,h;for(const f of this.args){if(s=f.evaluate(n),h=null,s instanceof vr)return s;if(typeof s=="string"){const v=n.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Qr(s[0],s[1],s[2],s[3]),!h))return new vr(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new _n(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const h of this.args){s=h.evaluate(n);const f=Pr.parse(s);if(f)return f}throw new _n(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const h of this.args){s=h.evaluate(n);const f=Zt.parse(s);if(f)return f}throw new _n(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const f=Number(s);if(!isNaN(f))return f}throw new _n(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return $r.fromString(zr(this.args[0].evaluate(n)));case"resolvedImage":return fr.fromString(zr(this.args[0].evaluate(n)));default:return zr(this.args[0].evaluate(n))}}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const cf=["Unknown","Point","LineString","Polygon"];class xd{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?cf[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=vr.parse(n)),s}}class kc{constructor(n,s,h=[],f,v=new tr,x=[]){this.registry=n,this.path=h,this.key=h.map(S=>`[${S}]`).join(""),this.scope=v,this.errors=x,this.expectedType=f,this._isConstant=s}parse(n,s,h,f,v={}){return s?this.concat(s,h,f)._parse(n,v):this._parse(n,v)}_parse(n,s){function h(f,v,x){return x==="assert"?new uo(v,[f]):x==="coerce"?new Ba(v,[f]):f}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=n[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[f];if(v){let x=v.parse(n,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,I=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||I.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||I.kind!=="value"&&I.kind!=="string")if(S.kind!=="padding"||I.kind!=="value"&&I.kind!=="number"&&I.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||I.kind!=="value"&&I.kind!=="array"){if(this.checkSubtype(S,I))return null}else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"coerce");else x=h(x,S,s.typeAnnotation||"assert")}if(!(x instanceof fa)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new xd;try{x=new fa(x.type,x.evaluate(S))}catch(I){return this.error(I.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const f=typeof n=="number"?this.path.concat(n):this.path,v=h?this.scope.concat(h):this.scope;return new kc(this.registry,this._isConstant,f,s||null,v,this.errors)}error(n,...s){const h=`${this.key}${s.map(f=>`[${f}]`).join("")}`;this.errors.push(new St(h,n))}checkSubtype(n,s){const h=be(n,s);return h&&this.error(h),h}}class Ic{constructor(n,s,h){this.type=Fr,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const f=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Ot);if(!f)return null;const v=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Ot);if(!v)return null;let x=null;return h.locale&&(x=s.parse(h.locale,1,Yt),!x)?null:new Ic(f,v,x)}evaluate(n){return new Ki(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const Oa=8192;function bd(a,n){a[0]=Math.min(a[0],n[0]),a[1]=Math.min(a[1],n[1]),a[2]=Math.max(a[2],n[0]),a[3]=Math.max(a[3],n[1])}function Ml(a,n){return!(a[0]<=n[0]||a[2]>=n[2]||a[1]<=n[1]||a[3]>=n[3])}function uf(a,n){const s=(180+a[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,f=Math.pow(2,n.z);return[Math.round(s*f*Oa),Math.round(h*f*Oa)]}function pv(a,n,s){const h=a[0]-n[0],f=a[1]-n[1],v=a[0]-s[0],x=a[1]-s[1];return h*x-v*f==0&&h*v<=0&&f*x<=0}function wd(a,n){let s=!1;for(let x=0,S=n.length;x<S;x++){const I=n[x];for(let M=0,$=I.length;M<$-1;M++){if(pv(a,I[M],I[M+1]))return!1;(f=I[M])[1]>(h=a)[1]!=(v=I[M+1])[1]>h[1]&&h[0]<(v[0]-f[0])*(h[1]-f[1])/(v[1]-f[1])+f[0]&&(s=!s)}}var h,f,v;return s}function Sd(a,n){for(let s=0;s<n.length;s++)if(wd(a,n[s]))return!0;return!1}function df(a,n,s,h){const f=h[0]-s[0],v=h[1]-s[1],x=(a[0]-s[0])*v-f*(a[1]-s[1]),S=(n[0]-s[0])*v-f*(n[1]-s[1]);return x>0&&S<0||x<0&&S>0}function fv(a,n,s){for(const M of s)for(let $=0;$<M.length-1;++$)if((S=[(x=M[$+1])[0]-(v=M[$])[0],x[1]-v[1]])[0]*(I=[(f=n)[0]-(h=a)[0],f[1]-h[1]])[1]-S[1]*I[0]!=0&&df(h,f,v,x)&&df(v,x,h,f))return!0;var h,f,v,x,S,I;return!1}function hf(a,n){for(let s=0;s<a.length;++s)if(!wd(a[s],n))return!1;for(let s=0;s<a.length-1;++s)if(fv(a[s],a[s+1],n))return!1;return!0}function pf(a,n){for(let s=0;s<n.length;s++)if(hf(a,n[s]))return!0;return!1}function Tc(a,n,s){const h=[];for(let f=0;f<a.length;f++){const v=[];for(let x=0;x<a[f].length;x++){const S=uf(a[f][x],s);bd(n,S),v.push(S)}h.push(v)}return h}function ff(a,n,s){const h=[];for(let f=0;f<a.length;f++){const v=Tc(a[f],n,s);h.push(v)}return h}function mf(a,n,s,h){if(a[0]<s[0]||a[0]>s[2]){const f=.5*h;let v=a[0]-s[0]>f?-h:s[0]-a[0]>f?h:0;v===0&&(v=a[0]-s[2]>f?-h:s[2]-a[0]>f?h:0),a[0]+=v}bd(n,a)}function Cd(a,n,s,h){const f=Math.pow(2,h.z)*Oa,v=[h.x*Oa,h.y*Oa],x=[];for(const S of a)for(const I of S){const M=[I.x+v[0],I.y+v[1]];mf(M,n,s,f),x.push(M)}return x}function kd(a,n,s,h){const f=Math.pow(2,h.z)*Oa,v=[h.x*Oa,h.y*Oa],x=[];for(const I of a){const M=[];for(const $ of I){const N=[$.x+v[0],$.y+v[1]];bd(n,N),M.push(N)}x.push(M)}if(n[2]-n[0]<=f/2){(S=n)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const I of x)for(const M of I)mf(M,n,s,f)}var S;return x}class is{constructor(n,s){this.type=Ot,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(_r(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let f=0;f<h.features.length;++f){const v=h.features[f].geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new is(h,h.features[f].geometry)}else if(h.type==="Feature"){const f=h.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new is(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new is(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Tc(h.coordinates,v,x),I=Cd(s.geometry(),f,v,x);if(!Ml(f,v))return!1;for(const M of I)if(!wd(M,S))return!1}if(h.type==="MultiPolygon"){const S=ff(h.coordinates,v,x),I=Cd(s.geometry(),f,v,x);if(!Ml(f,v))return!1;for(const M of I)if(!Sd(M,S))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const f=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(h.type==="Polygon"){const S=Tc(h.coordinates,v,x),I=kd(s.geometry(),f,v,x);if(!Ml(f,v))return!1;for(const M of I)if(!hf(M,S))return!1}if(h.type==="MultiPolygon"){const S=ff(h.coordinates,v,x),I=kd(s.geometry(),f,v,x);if(!Ml(f,v))return!1;for(const M of I)if(!pf(M,S))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class Pc{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new Pc(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class ho{constructor(n,s,h,f){this.name=n,this.type=s,this._evaluate=h,this.args=f}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const h=n[0],f=ho.definitions[h];if(!f)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,S=x.filter(([M])=>!Array.isArray(M)||M.length===n.length-1);let I=null;for(const[M,$]of S){I=new kc(s.registry,Ec,s.path,null,s.scope);const N=[];let q=!1;for(let Q=1;Q<n.length;Q++){const ee=n[Q],le=Array.isArray(M)?M[Q-1]:M.type,me=I.parse(ee,1+N.length,le);if(!me){q=!0;break}N.push(me)}if(!q)if(Array.isArray(M)&&M.length!==N.length)I.error(`Expected ${M.length} arguments, but found ${N.length} instead.`);else{for(let Q=0;Q<N.length;Q++){const ee=Array.isArray(M)?M[Q]:M.type,le=N[Q];I.concat(Q+1).checkSubtype(ee,le.type)}if(I.errors.length===0)return new ho(h,v,$,N)}}if(S.length===1)s.errors.push(...I.errors);else{const M=(S.length?S:x).map(([N])=>{return q=N,Array.isArray(q)?`(${q.map(fe).join(", ")})`:`(${fe(q.type)}...)`;var q}).join(" | "),$=[];for(let N=1;N<n.length;N++){const q=s.parse(n[N],1+$.length);if(!q)return null;$.push(fe(q.type))}s.error(`Expected arguments of type ${M}, but found (${$.join(", ")}) instead.`)}return null}static register(n,s){ho.definitions=s;for(const h in s)n[h]=ho}}function Ec(a){if(a instanceof Pc)return Ec(a.boundExpression);if(a instanceof ho&&a.name==="error"||a instanceof Ic||a instanceof is)return!1;const n=a instanceof Ba||a instanceof uo;let s=!0;return a.eachChild(h=>{s=n?s&&Ec(h):s&&h instanceof fa}),!!s&&zc(a)&&Mc(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function zc(a){if(a instanceof ho&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof is)return!1;let n=!0;return a.eachChild(s=>{n&&!zc(s)&&(n=!1)}),n}function Dl(a){if(a instanceof ho&&a.name==="feature-state")return!1;let n=!0;return a.eachChild(s=>{n&&!Dl(s)&&(n=!1)}),n}function Mc(a,n){if(a instanceof ho&&n.indexOf(a.name)>=0)return!1;let s=!0;return a.eachChild(h=>{s&&!Mc(h,n)&&(s=!1)}),s}function Bs(a,n){const s=a.length-1;let h,f,v=0,x=s,S=0;for(;v<=x;)if(S=Math.floor((v+x)/2),h=a[S],f=a[S+1],h<=n){if(S===s||n<f)return S;v=S+1}else{if(!(h>n))throw new _n("Input is not a number.");x=S-1}return 0}class Fa{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[f,v]of h)this.labels.push(f),this.outputs.push(v)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,nt);if(!h)return null;const f=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let x=1;x<n.length;x+=2){const S=x===1?-1/0:n[x],I=n[x+1],M=x,$=x+1;if(typeof S!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(f.length&&f[f.length-1][0]>=S)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);const N=s.parse(I,$,v);if(!N)return null;v=v||N.type,f.push([S,N])}return new Fa(v,h,f)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return h[0].evaluate(n);const v=s.length;return f>=s[v-1]?h[v-1].evaluate(n):h[Bs(s,f)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Cr(a,n,s){return a+s*(n-a)}function Dc(a,n,s){return a.map((h,f)=>Cr(h,n[f],s))}const Xi={number:Cr,color:function(a,n,s,h="rgb"){switch(h){case"rgb":{const[f,v,x,S]=Dc(a.rgb,n.rgb,s);return new vr(f,v,x,S,!1)}case"hcl":{const[f,v,x,S]=a.hcl,[I,M,$,N]=n.hcl;let q,Q;if(isNaN(f)||isNaN(I))isNaN(f)?isNaN(I)?q=NaN:(q=I,x!==1&&x!==0||(Q=M)):(q=f,$!==1&&$!==0||(Q=v));else{let Ae=I-f;I>f&&Ae>180?Ae-=360:I<f&&f-I>180&&(Ae+=360),q=f+s*Ae}const[ee,le,me,ve]=function([Ae,we,Re,Ue]){return Ae=isNaN(Ae)?0:Ae*Se,Tt([Re,Math.cos(Ae)*we,Math.sin(Ae)*we,Ue])}([q,Q??Cr(v,M,s),Cr(x,$,s),Cr(S,N,s)]);return new vr(ee,le,me,ve,!1)}case"lab":{const[f,v,x,S]=Tt(Dc(a.lab,n.lab,s));return new vr(f,v,x,S,!1)}}},array:Dc,padding:function(a,n,s){return new Pr(Dc(a.values,n.values,s))},variableAnchorOffsetCollection:function(a,n,s){const h=a.values,f=n.values;if(h.length!==f.length)throw new _n(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${n.toString()}`);const v=[];for(let x=0;x<h.length;x+=2){if(h[x]!==f[x])throw new _n(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${h[x]}, to[${x}]: ${f[x]}`);v.push(h[x]);const[S,I]=h[x+1],[M,$]=f[x+1];v.push([Cr(S,M,s),Cr(I,$,s)])}return new Zt(v)}};class Ji{constructor(n,s,h,f,v){this.type=n,this.operator=s,this.interpolation=h,this.input=f,this.labels=[],this.outputs=[];for(const[x,S]of v)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(n,s,h,f){let v=0;if(n.name==="exponential")v=Id(s,n.base,h,f);else if(n.name==="linear")v=Id(s,1,h,f);else if(n.name==="cubic-bezier"){const x=n.controlPoints;v=new V(x[0],x[1],x[2],x[3]).solve(Id(s,1,h,f))}return v}static parse(n,s){let[h,f,v,...x]=n;if(!Array.isArray(f)||f.length===0)return s.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const M=f[1];if(typeof M!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:M}}else{if(f[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const M=f.slice(1);if(M.length!==4||M.some($=>typeof $!="number"||$<0||$>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:M}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,nt),!v)return null;const S=[];let I=null;h==="interpolate-hcl"||h==="interpolate-lab"?I=hr:s.expectedType&&s.expectedType.kind!=="value"&&(I=s.expectedType);for(let M=0;M<x.length;M+=2){const $=x[M],N=x[M+1],q=M+3,Q=M+4;if(typeof $!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(S.length&&S[S.length-1][0]>=$)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',q);const ee=s.parse(N,Q,I);if(!ee)return null;I=I||ee.type,S.push([$,ee])}return Xe(I,nt)||Xe(I,hr)||Xe(I,H)||Xe(I,te)||Xe(I,de(nt))?new Ji(I,h,f,v,S):s.error(`Type ${fe(I)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const f=this.input.evaluate(n);if(f<=s[0])return h[0].evaluate(n);const v=s.length;if(f>=s[v-1])return h[v-1].evaluate(n);const x=Bs(s,f),S=Ji.interpolationFactor(this.interpolation,f,s[x],s[x+1]),I=h[x].evaluate(n),M=h[x+1].evaluate(n);switch(this.operator){case"interpolate":return Xi[this.type.kind](I,M,S);case"interpolate-hcl":return Xi.color(I,M,S,"hcl");case"interpolate-lab":return Xi.color(I,M,S,"lab")}}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Id(a,n,s,h){const f=h-s,v=a-s;return f===0?0:n===1?v/f:(Math.pow(n,v)-1)/(Math.pow(n,f)-1)}class Ac{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const f=s.expectedType;f&&f.kind!=="value"&&(h=f);const v=[];for(const S of n.slice(1)){const I=s.parse(S,1+v.length,h,void 0,{typeAnnotation:"omit"});if(!I)return null;h=h||I.type,v.push(I)}if(!h)throw new Error("No output type");const x=f&&v.some(S=>be(f,S.type));return new Ac(x?Lt:h,v)}evaluate(n){let s,h=null,f=0;for(const v of this.args)if(f++,h=v.evaluate(n),h&&h instanceof fr&&!h.available&&(s||(s=h.name),h=null,f===this.args.length&&(h=s)),h!==null)break;return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Rc{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let v=1;v<n.length-1;v+=2){const x=n[v];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,v);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const S=s.parse(n[v+1],v+1);if(!S)return null;h.push([x,S])}const f=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return f?new Rc(h,f):null}outputDefined(){return this.result.outputDefined()}}class Td{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,nt),f=s.parse(n[2],2,de(s.expectedType||Lt));return h&&f?new Td(f.type.itemType,h,f):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new _n(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new _n(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new _n(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Pd{constructor(n,s){this.type=Ot,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Lt),f=s.parse(n[2],2,Lt);return h&&f?ye(h.type,[Ot,Yt,nt,vn,Lt])?new Pd(h,f):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${fe(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!h)return!1;if(!Ee(s,["boolean","string","number","null"]))throw new _n(`Expected first argument to be of type boolean, string, number or null, but found ${fe(Br(s))} instead.`);if(!Ee(h,["string","array"]))throw new _n(`Expected second argument to be of type array or string, but found ${fe(Br(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class Lc{constructor(n,s,h){this.type=nt,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Lt),f=s.parse(n[2],2,Lt);if(!h||!f)return null;if(!ye(h.type,[Ot,Yt,nt,vn,Lt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${fe(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,nt);return v?new Lc(h,f,v):null}return new Lc(h,f)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Ee(s,["boolean","string","number","null"]))throw new _n(`Expected first argument to be of type boolean, string, number or null, but found ${fe(Br(s))} instead.`);if(!Ee(h,["string","array"]))throw new _n(`Expected second argument to be of type array or string, but found ${fe(Br(h))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(n);return h.indexOf(s,f)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Ed{constructor(n,s,h,f,v,x){this.inputType=n,this.type=s,this.input=h,this.cases=f,this.outputs=v,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,f;s.expectedType&&s.expectedType.kind!=="value"&&(f=s.expectedType);const v={},x=[];for(let M=2;M<n.length-1;M+=2){let $=n[M];const N=n[M+1];Array.isArray($)||($=[$]);const q=s.concat(M);if($.length===0)return q.error("Expected at least one branch label.");for(const ee of $){if(typeof ee!="number"&&typeof ee!="string")return q.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return q.error("Numeric branch labels must be integer values.");if(h){if(q.checkSubtype(h,Br(ee)))return null}else h=Br(ee);if(v[String(ee)]!==void 0)return q.error("Branch labels must be unique.");v[String(ee)]=x.length}const Q=s.parse(N,M,f);if(!Q)return null;f=f||Q.type,x.push(Q)}const S=s.parse(n[1],1,Lt);if(!S)return null;const I=s.parse(n[n.length-1],n.length-1,f);return I?S.type.kind!=="value"&&s.concat(1).checkSubtype(h,S.type)?null:new Ed(h,f,S,v,x,I):null}evaluate(n){const s=this.input.evaluate(n);return(Br(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class zd{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const f=[];for(let x=1;x<n.length-1;x+=2){const S=s.parse(n[x],x,Ot);if(!S)return null;const I=s.parse(n[x+1],x+1,h);if(!I)return null;f.push([S,I]),h=h||I.type}const v=s.parse(n[n.length-1],n.length-1,h);if(!v)return null;if(!h)throw new Error("Can't infer output type");return new zd(h,f,v)}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class $c{constructor(n,s,h,f){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=f}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,Lt),f=s.parse(n[2],2,nt);if(!h||!f)return null;if(!ye(h.type,[de(Lt),Yt,Lt]))return s.error(`Expected first argument to be of type array or string, but found ${fe(h.type)} instead`);if(n.length===4){const v=s.parse(n[3],3,nt);return v?new $c(h.type,h,f,v):null}return new $c(h.type,h,f)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!Ee(s,["string","array"]))throw new _n(`Expected first argument to be of type array or string, but found ${fe(Br(s))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(n);return s.slice(h,f)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function gf(a,n){return a==="=="||a==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function yf(a,n,s,h){return h.compare(n,s)===0}function Os(a,n,s){const h=a!=="=="&&a!=="!=";return class ez{constructor(v,x,S){this.type=Ot,this.lhs=v,this.rhs=x,this.collator=S,this.hasUntypedArgument=v.type.kind==="value"||x.type.kind==="value"}static parse(v,x){if(v.length!==3&&v.length!==4)return x.error("Expected two or three arguments.");const S=v[0];let I=x.parse(v[1],1,Lt);if(!I)return null;if(!gf(S,I.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${fe(I.type)}'.`);let M=x.parse(v[2],2,Lt);if(!M)return null;if(!gf(S,M.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${fe(M.type)}'.`);if(I.type.kind!==M.type.kind&&I.type.kind!=="value"&&M.type.kind!=="value")return x.error(`Cannot compare types '${fe(I.type)}' and '${fe(M.type)}'.`);h&&(I.type.kind==="value"&&M.type.kind!=="value"?I=new uo(M.type,[I]):I.type.kind!=="value"&&M.type.kind==="value"&&(M=new uo(I.type,[M])));let $=null;if(v.length===4){if(I.type.kind!=="string"&&M.type.kind!=="string"&&I.type.kind!=="value"&&M.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if($=x.parse(v[3],3,Fr),!$)return null}return new ez(I,M,$)}evaluate(v){const x=this.lhs.evaluate(v),S=this.rhs.evaluate(v);if(h&&this.hasUntypedArgument){const I=Br(x),M=Br(S);if(I.kind!==M.kind||I.kind!=="string"&&I.kind!=="number")throw new _n(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${I.kind}, ${M.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const I=Br(x),M=Br(S);if(I.kind!=="string"||M.kind!=="string")return n(v,x,S)}return this.collator?s(v,x,S,this.collator.evaluate(v)):n(v,x,S)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const mv=Os("==",function(a,n,s){return n===s},yf),gv=Os("!=",function(a,n,s){return n!==s},function(a,n,s,h){return!yf(0,n,s,h)}),yv=Os("<",function(a,n,s){return n<s},function(a,n,s,h){return h.compare(n,s)<0}),vv=Os(">",function(a,n,s){return n>s},function(a,n,s,h){return h.compare(n,s)>0}),_v=Os("<=",function(a,n,s){return n<=s},function(a,n,s,h){return h.compare(n,s)<=0}),xv=Os(">=",function(a,n,s){return n>=s},function(a,n,s,h){return h.compare(n,s)>=0});class Md{constructor(n,s,h,f,v){this.type=Yt,this.number=n,this.locale=s,this.currency=h,this.minFractionDigits=f,this.maxFractionDigits=v}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,nt);if(!h)return null;const f=n[2];if(typeof f!="object"||Array.isArray(f))return s.error("NumberFormat options argument must be an object.");let v=null;if(f.locale&&(v=s.parse(f.locale,1,Yt),!v))return null;let x=null;if(f.currency&&(x=s.parse(f.currency,1,Yt),!x))return null;let S=null;if(f["min-fraction-digits"]&&(S=s.parse(f["min-fraction-digits"],1,nt),!S))return null;let I=null;return f["max-fraction-digits"]&&(I=s.parse(f["max-fraction-digits"],1,nt),!I)?null:new Md(h,v,x,S,I)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Bc{constructor(n){this.type=he,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const f=[];let v=!1;for(let x=1;x<=n.length-1;++x){const S=n[x];if(v&&typeof S=="object"&&!Array.isArray(S)){v=!1;let I=null;if(S["font-scale"]&&(I=s.parse(S["font-scale"],1,nt),!I))return null;let M=null;if(S["text-font"]&&(M=s.parse(S["text-font"],1,de(Yt)),!M))return null;let $=null;if(S["text-color"]&&($=s.parse(S["text-color"],1,hr),!$))return null;const N=f[f.length-1];N.scale=I,N.font=M,N.textColor=$}else{const I=s.parse(n[x],1,Lt);if(!I)return null;const M=I.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,f.push({content:I,scale:null,font:null,textColor:null})}}return new Bc(f)}evaluate(n){return new $r(this.sections.map(s=>{const h=s.content.evaluate(n);return Br(h)===G?new Qt("",h,null,null,null):new Qt(zr(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class Dd{constructor(n){this.type=G,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Yt);return h?new Dd(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=fr.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}}class Ad{constructor(n){this.type=nt,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${fe(h.type)} instead.`):new Ad(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new _n(`Expected value to be of type string or array, but found ${fe(Br(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const Fs={"==":mv,"!=":gv,">":vv,"<":yv,">=":xv,"<=":_v,array:uo,at:Td,boolean:uo,case:zd,coalesce:Ac,collator:Ic,format:Bc,image:Dd,in:Pd,"index-of":Lc,interpolate:Ji,"interpolate-hcl":Ji,"interpolate-lab":Ji,length:Ad,let:Rc,literal:fa,match:Ed,number:uo,"number-format":Md,object:uo,slice:$c,step:Fa,string:uo,"to-boolean":Ba,"to-color":Ba,"to-number":Ba,"to-string":Ba,var:Pc,within:is};function vf(a,[n,s,h,f]){n=n.evaluate(a),s=s.evaluate(a),h=h.evaluate(a);const v=f?f.evaluate(a):1,x=Qr(n,s,h,v);if(x)throw new _n(x);return new vr(n/255,s/255,h/255,v,!1)}function _f(a,n){return a in n}function Rd(a,n){const s=n[a];return s===void 0?null:s}function os(a){return{type:a}}function xf(a){return{result:"success",value:a}}function Na(a){return{result:"error",value:a}}function Ns(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function bf(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Ld(a){return!!a.expression&&a.expression.interpolated}function Nr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function fn(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function bv(a){return a}function kr(a,n){const s=n.type==="color",h=a.stops&&typeof a.stops[0][0]=="object",f=h||!(h||a.property!==void 0),v=a.type||(Ld(n)?"exponential":"interval");if(s||n.type==="padding"){const $=s?vr.parse:Pr.parse;(a=xt({},a)).stops&&(a.stops=a.stops.map(N=>[N[0],$(N[1])])),a.default=$(a.default?a.default:n.default)}if(a.colorSpace&&(x=a.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var x;let S,I,M;if(v==="exponential")S=Al;else if(v==="interval")S=dn;else if(v==="categorical"){S=mn,I=Object.create(null);for(const $ of a.stops)I[$[0]]=$[1];M=typeof a.stops[0][0]}else{if(v!=="identity")throw new Error(`Unknown function type "${v}"`);S=wf}if(h){const $={},N=[];for(let ee=0;ee<a.stops.length;ee++){const le=a.stops[ee],me=le[0].zoom;$[me]===void 0&&($[me]={zoom:me,type:a.type,property:a.property,default:a.default,stops:[]},N.push(me)),$[me].stops.push([le[0].value,le[1]])}const q=[];for(const ee of N)q.push([$[ee].zoom,kr($[ee],n)]);const Q={name:"linear"};return{kind:"composite",interpolationType:Q,interpolationFactor:Ji.interpolationFactor.bind(void 0,Q),zoomStops:q.map(ee=>ee[0]),evaluate:({zoom:ee},le)=>Al({stops:q,base:a.base},n,ee).evaluate(ee,le)}}if(f){const $=v==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:$,interpolationFactor:Ji.interpolationFactor.bind(void 0,$),zoomStops:a.stops.map(N=>N[0]),evaluate:({zoom:N})=>S(a,n,N,I,M)}}return{kind:"source",evaluate($,N){const q=N&&N.properties?N.properties[a.property]:void 0;return q===void 0?as(a.default,n.default):S(a,n,q,I,M)}}}function as(a,n,s){return a!==void 0?a:n!==void 0?n:s!==void 0?s:void 0}function mn(a,n,s,h,f){return as(typeof s===f?h[s]:void 0,a.default,n.default)}function dn(a,n,s){if(Nr(s)!=="number")return as(a.default,n.default);const h=a.stops.length;if(h===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[h-1][0])return a.stops[h-1][1];const f=Bs(a.stops.map(v=>v[0]),s);return a.stops[f][1]}function Al(a,n,s){const h=a.base!==void 0?a.base:1;if(Nr(s)!=="number")return as(a.default,n.default);const f=a.stops.length;if(f===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[f-1][0])return a.stops[f-1][1];const v=Bs(a.stops.map($=>$[0]),s),x=function($,N,q,Q){const ee=Q-q,le=$-q;return ee===0?0:N===1?le/ee:(Math.pow(N,le)-1)/(Math.pow(N,ee)-1)}(s,h,a.stops[v][0],a.stops[v+1][0]),S=a.stops[v][1],I=a.stops[v+1][1],M=Xi[n.type]||bv;return typeof S.evaluate=="function"?{evaluate(...$){const N=S.evaluate.apply(void 0,$),q=I.evaluate.apply(void 0,$);if(N!==void 0&&q!==void 0)return M(N,q,x,a.colorSpace)}}:M(S,I,x,a.colorSpace)}function wf(a,n,s){switch(n.type){case"color":s=vr.parse(s);break;case"formatted":s=$r.fromString(s.toString());break;case"resolvedImage":s=fr.fromString(s.toString());break;case"padding":s=Pr.parse(s);break;default:Nr(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return as(s,a.default,n.default)}ho.register(Fs,{error:[{kind:"error"},[Yt],(a,[n])=>{throw new _n(n.evaluate(a))}],typeof:[Yt,[Lt],(a,[n])=>fe(Br(n.evaluate(a)))],"to-rgba":[de(nt,4),[hr],(a,[n])=>{const[s,h,f,v]=n.evaluate(a).rgb;return[255*s,255*h,255*f,v]}],rgb:[hr,[nt,nt,nt],vf],rgba:[hr,[nt,nt,nt,nt],vf],has:{type:Ot,overloads:[[[Yt],(a,[n])=>_f(n.evaluate(a),a.properties())],[[Yt,yr],(a,[n,s])=>_f(n.evaluate(a),s.evaluate(a))]]},get:{type:Lt,overloads:[[[Yt],(a,[n])=>Rd(n.evaluate(a),a.properties())],[[Yt,yr],(a,[n,s])=>Rd(n.evaluate(a),s.evaluate(a))]]},"feature-state":[Lt,[Yt],(a,[n])=>Rd(n.evaluate(a),a.featureState||{})],properties:[yr,[],a=>a.properties()],"geometry-type":[Yt,[],a=>a.geometryType()],id:[Lt,[],a=>a.id()],zoom:[nt,[],a=>a.globals.zoom],"heatmap-density":[nt,[],a=>a.globals.heatmapDensity||0],"line-progress":[nt,[],a=>a.globals.lineProgress||0],accumulated:[Lt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[nt,os(nt),(a,n)=>{let s=0;for(const h of n)s+=h.evaluate(a);return s}],"*":[nt,os(nt),(a,n)=>{let s=1;for(const h of n)s*=h.evaluate(a);return s}],"-":{type:nt,overloads:[[[nt,nt],(a,[n,s])=>n.evaluate(a)-s.evaluate(a)],[[nt],(a,[n])=>-n.evaluate(a)]]},"/":[nt,[nt,nt],(a,[n,s])=>n.evaluate(a)/s.evaluate(a)],"%":[nt,[nt,nt],(a,[n,s])=>n.evaluate(a)%s.evaluate(a)],ln2:[nt,[],()=>Math.LN2],pi:[nt,[],()=>Math.PI],e:[nt,[],()=>Math.E],"^":[nt,[nt,nt],(a,[n,s])=>Math.pow(n.evaluate(a),s.evaluate(a))],sqrt:[nt,[nt],(a,[n])=>Math.sqrt(n.evaluate(a))],log10:[nt,[nt],(a,[n])=>Math.log(n.evaluate(a))/Math.LN10],ln:[nt,[nt],(a,[n])=>Math.log(n.evaluate(a))],log2:[nt,[nt],(a,[n])=>Math.log(n.evaluate(a))/Math.LN2],sin:[nt,[nt],(a,[n])=>Math.sin(n.evaluate(a))],cos:[nt,[nt],(a,[n])=>Math.cos(n.evaluate(a))],tan:[nt,[nt],(a,[n])=>Math.tan(n.evaluate(a))],asin:[nt,[nt],(a,[n])=>Math.asin(n.evaluate(a))],acos:[nt,[nt],(a,[n])=>Math.acos(n.evaluate(a))],atan:[nt,[nt],(a,[n])=>Math.atan(n.evaluate(a))],min:[nt,os(nt),(a,n)=>Math.min(...n.map(s=>s.evaluate(a)))],max:[nt,os(nt),(a,n)=>Math.max(...n.map(s=>s.evaluate(a)))],abs:[nt,[nt],(a,[n])=>Math.abs(n.evaluate(a))],round:[nt,[nt],(a,[n])=>{const s=n.evaluate(a);return s<0?-Math.round(-s):Math.round(s)}],floor:[nt,[nt],(a,[n])=>Math.floor(n.evaluate(a))],ceil:[nt,[nt],(a,[n])=>Math.ceil(n.evaluate(a))],"filter-==":[Ot,[Yt,Lt],(a,[n,s])=>a.properties()[n.value]===s.value],"filter-id-==":[Ot,[Lt],(a,[n])=>a.id()===n.value],"filter-type-==":[Ot,[Yt],(a,[n])=>a.geometryType()===n.value],"filter-<":[Ot,[Yt,Lt],(a,[n,s])=>{const h=a.properties()[n.value],f=s.value;return typeof h==typeof f&&h<f}],"filter-id-<":[Ot,[Lt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[Ot,[Yt,Lt],(a,[n,s])=>{const h=a.properties()[n.value],f=s.value;return typeof h==typeof f&&h>f}],"filter-id->":[Ot,[Lt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[Ot,[Yt,Lt],(a,[n,s])=>{const h=a.properties()[n.value],f=s.value;return typeof h==typeof f&&h<=f}],"filter-id-<=":[Ot,[Lt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[Ot,[Yt,Lt],(a,[n,s])=>{const h=a.properties()[n.value],f=s.value;return typeof h==typeof f&&h>=f}],"filter-id->=":[Ot,[Lt],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[Ot,[Lt],(a,[n])=>n.value in a.properties()],"filter-has-id":[Ot,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Ot,[de(Yt)],(a,[n])=>n.value.indexOf(a.geometryType())>=0],"filter-id-in":[Ot,[de(Lt)],(a,[n])=>n.value.indexOf(a.id())>=0],"filter-in-small":[Ot,[Yt,de(Lt)],(a,[n,s])=>s.value.indexOf(a.properties()[n.value])>=0],"filter-in-large":[Ot,[Yt,de(Lt)],(a,[n,s])=>function(h,f,v,x){for(;v<=x;){const S=v+x>>1;if(f[S]===h)return!0;f[S]>h?x=S-1:v=S+1}return!1}(a.properties()[n.value],s.value,0,s.value.length-1)],all:{type:Ot,overloads:[[[Ot,Ot],(a,[n,s])=>n.evaluate(a)&&s.evaluate(a)],[os(Ot),(a,n)=>{for(const s of n)if(!s.evaluate(a))return!1;return!0}]]},any:{type:Ot,overloads:[[[Ot,Ot],(a,[n,s])=>n.evaluate(a)||s.evaluate(a)],[os(Ot),(a,n)=>{for(const s of n)if(s.evaluate(a))return!0;return!1}]]},"!":[Ot,[Ot],(a,[n])=>!n.evaluate(a)],"is-supported-script":[Ot,[Yt],(a,[n])=>{const s=a.globals&&a.globals.isSupportedScript;return!s||s(n.evaluate(a))}],upcase:[Yt,[Yt],(a,[n])=>n.evaluate(a).toUpperCase()],downcase:[Yt,[Yt],(a,[n])=>n.evaluate(a).toLowerCase()],concat:[Yt,os(Lt),(a,n)=>n.map(s=>zr(s.evaluate(a))).join("")],"resolved-locale":[Yt,[Fr],(a,[n])=>n.evaluate(a).resolvedLocale()]});class $d{constructor(n,s){var h;this.expression=n,this._warningHistory={},this._evaluator=new xd,this._defaultValue=s?(h=s).type==="color"&&fn(h.default)?new vr(0,0,0,0):h.type==="color"?vr.parse(h.default)||null:h.type==="padding"?Pr.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?Zt.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,f,v,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,f,v,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=f,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new _n(`Expected value to be one of ${Object.keys(this._enumValues).map(I=>JSON.stringify(I)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Oc(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Fs}function Fc(a,n){const s=new kc(Fs,Ec,[],n?function(f){const v={color:hr,string:Yt,number:nt,enum:Yt,boolean:Ot,formatted:he,padding:H,resolvedImage:G,variableAnchorOffsetCollection:te};return f.type==="array"?de(v[f.value]||Lt,f.length):v[f.type]}(n):void 0),h=s.parse(a,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?xf(new $d(h,n)):Na(s.errors)}class Bd{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Dl(s.expression)}evaluateWithoutErrorHandling(n,s,h,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,f,v,x)}evaluate(n,s,h,f,v,x){return this._styleExpression.evaluate(n,s,h,f,v,x)}}class Nc{constructor(n,s,h,f){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Dl(s.expression),this.interpolationType=f}evaluateWithoutErrorHandling(n,s,h,f,v,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,f,v,x)}evaluate(n,s,h,f,v,x){return this._styleExpression.evaluate(n,s,h,f,v,x)}interpolationFactor(n,s,h){return this.interpolationType?Ji.interpolationFactor(this.interpolationType,n,s,h):0}}function Od(a,n){const s=Fc(a,n);if(s.result==="error")return s;const h=s.value.expression,f=zc(h);if(!f&&!Ns(n))return Na([new St("","data expressions not supported")]);const v=Mc(h,["zoom"]);if(!v&&!bf(n))return Na([new St("","zoom expressions not supported")]);const x=Ll(h);return x||v?x instanceof St?Na([x]):x instanceof Ji&&!Ld(n)?Na([new St("",'"interpolate" expressions cannot be used with this property')]):xf(x?new Nc(f?"camera":"composite",s.value,x.labels,x instanceof Ji?x.interpolation:void 0):new Bd(f?"constant":"source",s.value)):Na([new St("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Rl{constructor(n,s){this._parameters=n,this._specification=s,xt(this,kr(this._parameters,this._specification))}static deserialize(n){return new Rl(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function Ll(a){let n=null;if(a instanceof Rc)n=Ll(a.result);else if(a instanceof Ac){for(const s of a.args)if(n=Ll(s),n)break}else(a instanceof Fa||a instanceof Ji)&&a.input instanceof ho&&a.input.name==="zoom"&&(n=a);return n instanceof St||a.eachChild(s=>{const h=Ll(s);h instanceof St?n=h:!n&&h?n=new St("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new St("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function $l(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const n of a.slice(1))if(!$l(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const wv={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Fd(a){if(a==null)return{filter:()=>!0,needGeometry:!1};$l(a)||(a=jc(a));const n=Fc(a,wv);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,f)=>n.value.evaluate(s,h,{},f),needGeometry:Sf(a)}}function Sv(a,n){return a<n?-1:a>n?1:0}function Sf(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let n=1;n<a.length;n++)if(Sf(a[n]))return!0;return!1}function jc(a){if(!a)return!0;const n=a[0];return a.length<=1?n!=="any":n==="=="?Nd(a[1],a[2],"=="):n==="!="?Bl(Nd(a[1],a[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Nd(a[1],a[2],n):n==="any"?(s=a.slice(1),["any"].concat(s.map(jc))):n==="all"?["all"].concat(a.slice(1).map(jc)):n==="none"?["all"].concat(a.slice(1).map(jc).map(Bl)):n==="in"?Cf(a[1],a.slice(2)):n==="!in"?Bl(Cf(a[1],a.slice(2))):n==="has"?kf(a[1]):n==="!has"?Bl(kf(a[1])):n!=="within"||a;var s}function Nd(a,n,s){switch(a){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,a,n]}}function Cf(a,n){if(n.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",a,["literal",n.sort(Sv)]]:["filter-in-small",a,["literal",n]]}}function kf(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Bl(a){return["!",a]}function Vc(a){const n=typeof a;if(n==="number"||n==="boolean"||n==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let f="[";for(const v of a)f+=`${Vc(v)},`;return`${f}]`}const s=Object.keys(a).sort();let h="{";for(let f=0;f<s.length;f++)h+=`${JSON.stringify(s[f])}:${Vc(a[s[f]])},`;return`${h}}`}function Uc(a){let n="";for(const s of Sr)n+=`/${Vc(a[s])}`;return n}function If(a){const n=a.value;return n?[new Be(a.key,n,"constants have been deprecated as of v8")]:[]}function xn(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function ss(a){if(Array.isArray(a))return a.map(ss);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const n={};for(const s in a)n[s]=ss(a[s]);return n}return xn(a)}function Ai(a){const n=a.key,s=a.value,h=a.valueSpec||{},f=a.objectElementValidators||{},v=a.style,x=a.styleSpec,S=a.validateSpec;let I=[];const M=Nr(s);if(M!=="object")return[new Be(n,s,`object expected, ${M} found`)];for(const $ in s){const N=$.split(".")[0],q=h[N]||h["*"];let Q;if(f[N])Q=f[N];else if(h[N])Q=S;else if(f["*"])Q=f["*"];else{if(!h["*"]){I.push(new Be(n,s[$],`unknown property "${$}"`));continue}Q=S}I=I.concat(Q({key:(n&&`${n}.`)+$,value:s[$],valueSpec:q,style:v,styleSpec:x,object:s,objectKey:$,validateSpec:S},s))}for(const $ in h)f[$]||h[$].required&&h[$].default===void 0&&s[$]===void 0&&I.push(new Be(n,s,`missing required property "${$}"`));return I}function js(a){const n=a.value,s=a.valueSpec,h=a.style,f=a.styleSpec,v=a.key,x=a.arrayElementValidator||a.validateSpec;if(Nr(n)!=="array")return[new Be(v,n,`array expected, ${Nr(n)} found`)];if(s.length&&n.length!==s.length)return[new Be(v,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Be(v,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let S={type:s.value,values:s.values};f.$version<7&&(S.function=s.function),Nr(s.value)==="object"&&(S=s.value);let I=[];for(let M=0;M<n.length;M++)I=I.concat(x({array:n,arrayIndex:M,value:n[M],valueSpec:S,validateSpec:a.validateSpec,style:h,styleSpec:f,key:`${v}[${M}]`}));return I}function Ol(a){const n=a.key,s=a.value,h=a.valueSpec;let f=Nr(s);return f==="number"&&s!=s&&(f="NaN"),f!=="number"?[new Be(n,s,`number expected, ${f} found`)]:"minimum"in h&&s<h.minimum?[new Be(n,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new Be(n,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Hc(a){const n=a.valueSpec,s=xn(a.value.type);let h,f,v,x={};const S=s!=="categorical"&&a.value.property===void 0,I=!S,M=Nr(a.value.stops)==="array"&&Nr(a.value.stops[0])==="array"&&Nr(a.value.stops[0][0])==="object",$=Ai({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(Q){if(s==="identity")return[new Be(Q.key,Q.value,'identity function may not have a "stops" property')];let ee=[];const le=Q.value;return ee=ee.concat(js({key:Q.key,value:le,valueSpec:Q.valueSpec,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,arrayElementValidator:N})),Nr(le)==="array"&&le.length===0&&ee.push(new Be(Q.key,le,"array must have at least one stop")),ee},default:function(Q){return Q.validateSpec({key:Q.key,value:Q.value,valueSpec:n,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec})}}});return s==="identity"&&S&&$.push(new Be(a.key,a.value,'missing required property "property"')),s==="identity"||a.value.stops||$.push(new Be(a.key,a.value,'missing required property "stops"')),s==="exponential"&&a.valueSpec.expression&&!Ld(a.valueSpec)&&$.push(new Be(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(I&&!Ns(a.valueSpec)?$.push(new Be(a.key,a.value,"property functions not supported")):S&&!bf(a.valueSpec)&&$.push(new Be(a.key,a.value,"zoom functions not supported"))),s!=="categorical"&&!M||a.value.property!==void 0||$.push(new Be(a.key,a.value,'"property" property is required')),$;function N(Q){let ee=[];const le=Q.value,me=Q.key;if(Nr(le)!=="array")return[new Be(me,le,`array expected, ${Nr(le)} found`)];if(le.length!==2)return[new Be(me,le,`array length 2 expected, length ${le.length} found`)];if(M){if(Nr(le[0])!=="object")return[new Be(me,le,`object expected, ${Nr(le[0])} found`)];if(le[0].zoom===void 0)return[new Be(me,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new Be(me,le,"object stop key must have value")];if(v&&v>xn(le[0].zoom))return[new Be(me,le[0].zoom,"stop zoom values must appear in ascending order")];xn(le[0].zoom)!==v&&(v=xn(le[0].zoom),f=void 0,x={}),ee=ee.concat(Ai({key:`${me}[0]`,value:le[0],valueSpec:{zoom:{}},validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{zoom:Ol,value:q}}))}else ee=ee.concat(q({key:`${me}[0]`,value:le[0],valueSpec:{},validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec},le));return Oc(ss(le[1]))?ee.concat([new Be(`${me}[1]`,le[1],"expressions are not allowed in function stops.")]):ee.concat(Q.validateSpec({key:`${me}[1]`,value:le[1],valueSpec:n,validateSpec:Q.validateSpec,style:Q.style,styleSpec:Q.styleSpec}))}function q(Q,ee){const le=Nr(Q.value),me=xn(Q.value),ve=Q.value!==null?Q.value:ee;if(h){if(le!==h)return[new Be(Q.key,ve,`${le} stop domain type must match previous stop domain type ${h}`)]}else h=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new Be(Q.key,ve,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&s!=="categorical"){let Ae=`number expected, ${le} found`;return Ns(n)&&s===void 0&&(Ae+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Be(Q.key,ve,Ae)]}return s!=="categorical"||le!=="number"||isFinite(me)&&Math.floor(me)===me?s!=="categorical"&&le==="number"&&f!==void 0&&me<f?[new Be(Q.key,ve,"stop domain values must appear in ascending order")]:(f=me,s==="categorical"&&me in x?[new Be(Q.key,ve,"stop domain values must be unique")]:(x[me]=!0,[])):[new Be(Q.key,ve,`integer expected, found ${me}`)]}}function ls(a){const n=(a.expressionContext==="property"?Od:Fc)(ss(a.value),a.valueSpec);if(n.result==="error")return n.value.map(h=>new Be(`${a.key}${h.key}`,a.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!s.outputDefined())return[new Be(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Dl(s))return[new Be(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Dl(s))return[new Be(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Mc(s,["zoom","feature-state"]))return[new Be(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!zc(s))return[new Be(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Fl(a){const n=a.key,s=a.value,h=a.valueSpec,f=[];return Array.isArray(h.values)?h.values.indexOf(xn(s))===-1&&f.push(new Be(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(xn(s))===-1&&f.push(new Be(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),f}function Vs(a){return $l(ss(a.value))?ls(xt({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Tf(a)}function Tf(a){const n=a.value,s=a.key;if(Nr(n)!=="array")return[new Be(s,n,`array expected, ${Nr(n)} found`)];const h=a.styleSpec;let f,v=[];if(n.length<1)return[new Be(s,n,"filter array must have at least 1 element")];switch(v=v.concat(Fl({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:a.style,styleSpec:a.styleSpec})),xn(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&xn(n[1])==="$type"&&v.push(new Be(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&v.push(new Be(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(f=Nr(n[1]),f!=="string"&&v.push(new Be(`${s}[1]`,n[1],`string expected, ${f} found`)));for(let x=2;x<n.length;x++)f=Nr(n[x]),xn(n[1])==="$type"?v=v.concat(Fl({key:`${s}[${x}]`,value:n[x],valueSpec:h.geometry_type,style:a.style,styleSpec:a.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&v.push(new Be(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)v=v.concat(Tf({key:`${s}[${x}]`,value:n[x],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":f=Nr(n[1]),n.length!==2?v.push(new Be(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="string"&&v.push(new Be(`${s}[1]`,n[1],`string expected, ${f} found`));break;case"within":f=Nr(n[1]),n.length!==2?v.push(new Be(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):f!=="object"&&v.push(new Be(`${s}[1]`,n[1],`object expected, ${f} found`))}return v}function Pf(a,n){const s=a.key,h=a.validateSpec,f=a.style,v=a.styleSpec,x=a.value,S=a.objectKey,I=v[`${n}_${a.layerType}`];if(!I)return[];const M=S.match(/^(.*)-transition$/);if(n==="paint"&&M&&I[M[1]]&&I[M[1]].transition)return h({key:s,value:x,valueSpec:v.transition,style:f,styleSpec:v});const $=a.valueSpec||I[S];if(!$)return[new Be(s,x,`unknown property "${S}"`)];let N;if(Nr(x)==="string"&&Ns($)&&!$.tokens&&(N=/^{([^}]+)}$/.exec(x)))return[new Be(s,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(N[1])} }\`.`)];const q=[];return a.layerType==="symbol"&&(S==="text-field"&&f&&!f.glyphs&&q.push(new Be(s,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&fn(ss(x))&&xn(x.type)==="identity"&&q.push(new Be(s,x,'"text-font" does not support identity functions'))),q.concat(h({key:a.key,value:x,valueSpec:$,style:f,styleSpec:v,expressionContext:"property",propertyType:n,propertyKey:S}))}function Ef(a){return Pf(a,"paint")}function zf(a){return Pf(a,"layout")}function Mf(a){let n=[];const s=a.value,h=a.key,f=a.style,v=a.styleSpec;s.type||s.ref||n.push(new Be(h,s,'either "type" or "ref" is required'));let x=xn(s.type);const S=xn(s.ref);if(s.id){const I=xn(s.id);for(let M=0;M<a.arrayIndex;M++){const $=f.layers[M];xn($.id)===I&&n.push(new Be(h,s.id,`duplicate layer id "${s.id}", previously used at line ${$.id.__line__}`))}}if("ref"in s){let I;["type","source","source-layer","filter","layout"].forEach(M=>{M in s&&n.push(new Be(h,s[M],`"${M}" is prohibited for ref layers`))}),f.layers.forEach(M=>{xn(M.id)===S&&(I=M)}),I?I.ref?n.push(new Be(h,s.ref,"ref cannot reference another ref layer")):x=xn(I.type):n.push(new Be(h,s.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(s.source){const I=f.sources&&f.sources[s.source],M=I&&xn(I.type);I?M==="vector"&&x==="raster"?n.push(new Be(h,s.source,`layer "${s.id}" requires a raster source`)):M!=="raster-dem"&&x==="hillshade"?n.push(new Be(h,s.source,`layer "${s.id}" requires a raster-dem source`)):M==="raster"&&x!=="raster"?n.push(new Be(h,s.source,`layer "${s.id}" requires a vector source`)):M!=="vector"||s["source-layer"]?M==="raster-dem"&&x!=="hillshade"?n.push(new Be(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||M==="geojson"&&I.lineMetrics||n.push(new Be(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Be(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Be(h,s.source,`source "${s.source}" not found`))}else n.push(new Be(h,s,'missing required property "source"'));return n=n.concat(Ai({key:h,value:s,valueSpec:v.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${h}.type`,value:s.type,valueSpec:v.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:s,objectKey:"type"}),filter:Vs,layout:I=>Ai({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":M=>zf(xt({layerType:x},M))}}),paint:I=>Ai({layer:s,key:I.key,value:I.value,style:I.style,styleSpec:I.styleSpec,validateSpec:I.validateSpec,objectElementValidators:{"*":M=>Ef(xt({layerType:x},M))}})}})),n}function Wo(a){const n=a.value,s=a.key,h=Nr(n);return h!=="string"?[new Be(s,n,`string expected, ${h} found`)]:[]}const Nl={promoteId:function({key:a,value:n}){if(Nr(n)==="string")return Wo({key:a,value:n});{const s=[];for(const h in n)s.push(...Wo({key:`${a}.${h}`,value:n[h]}));return s}}};function Yi(a){const n=a.value,s=a.key,h=a.styleSpec,f=a.style,v=a.validateSpec;if(!n.type)return[new Be(s,n,'"type" is required')];const x=xn(n.type);let S;switch(x){case"vector":case"raster":return S=Ai({key:s,value:n,valueSpec:h[`source_${x.replace("-","_")}`],style:a.style,styleSpec:h,objectElementValidators:Nl,validateSpec:v}),S;case"raster-dem":return S=function(I){var M;const $=(M=I.sourceName)!==null&&M!==void 0?M:"",N=I.value,q=I.styleSpec,Q=q.source_raster_dem,ee=I.style;let le=[];const me=Nr(N);if(N===void 0)return le;if(me!=="object")return le.push(new Be("source_raster_dem",N,`object expected, ${me} found`)),le;const ve=xn(N.encoding)==="custom",Ae=["redFactor","greenFactor","blueFactor","baseShift"],we=I.value.encoding?`"${I.value.encoding}"`:"Default";for(const Re in N)!ve&&Ae.includes(Re)?le.push(new Be(Re,N[Re],`In "${$}": "${Re}" is only valid when "encoding" is set to "custom". ${we} encoding found`)):Q[Re]?le=le.concat(I.validateSpec({key:Re,value:N[Re],valueSpec:Q[Re],validateSpec:I.validateSpec,style:ee,styleSpec:q})):le.push(new Be(Re,N[Re],`unknown property "${Re}"`));return le}({sourceName:s,value:n,style:a.style,styleSpec:h,validateSpec:v}),S;case"geojson":if(S=Ai({key:s,value:n,valueSpec:h.source_geojson,style:f,styleSpec:h,validateSpec:v,objectElementValidators:Nl}),n.cluster)for(const I in n.clusterProperties){const[M,$]=n.clusterProperties[I],N=typeof M=="string"?[M,["accumulated"],["get",I]]:M;S.push(...ls({key:`${s}.${I}.map`,value:$,validateSpec:v,expressionContext:"cluster-map"})),S.push(...ls({key:`${s}.${I}.reduce`,value:N,validateSpec:v,expressionContext:"cluster-reduce"}))}return S;case"video":return Ai({key:s,value:n,valueSpec:h.source_video,style:f,validateSpec:v,styleSpec:h});case"image":return Ai({key:s,value:n,valueSpec:h.source_image,style:f,validateSpec:v,styleSpec:h});case"canvas":return[new Be(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Fl({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,validateSpec:v,styleSpec:h})}}function jl(a){const n=a.value,s=a.styleSpec,h=s.light,f=a.style;let v=[];const x=Nr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Be("light",n,`object expected, ${x} found`)]),v;for(const S in n){const I=S.match(/^(.*)-transition$/);v=v.concat(I&&h[I[1]]&&h[I[1]].transition?a.validateSpec({key:S,value:n[S],valueSpec:s.transition,validateSpec:a.validateSpec,style:f,styleSpec:s}):h[S]?a.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:a.validateSpec,style:f,styleSpec:s}):[new Be(S,n[S],`unknown property "${S}"`)])}return v}function Df(a){const n=a.value,s=a.styleSpec,h=s.terrain,f=a.style;let v=[];const x=Nr(n);if(n===void 0)return v;if(x!=="object")return v=v.concat([new Be("terrain",n,`object expected, ${x} found`)]),v;for(const S in n)v=v.concat(h[S]?a.validateSpec({key:S,value:n[S],valueSpec:h[S],validateSpec:a.validateSpec,style:f,styleSpec:s}):[new Be(S,n[S],`unknown property "${S}"`)]);return v}function Af(a){let n=[];const s=a.value,h=a.key;if(Array.isArray(s)){const f=[],v=[];for(const x in s)s[x].id&&f.includes(s[x].id)&&n.push(new Be(h,s,`all the sprites' ids must be unique, but ${s[x].id} is duplicated`)),f.push(s[x].id),s[x].url&&v.includes(s[x].url)&&n.push(new Be(h,s,`all the sprites' URLs must be unique, but ${s[x].url} is duplicated`)),v.push(s[x].url),n=n.concat(Ai({key:`${h}[${x}]`,value:s[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return n}return Wo({key:h,value:s})}const Rf={"*":()=>[],array:js,boolean:function(a){const n=a.value,s=a.key,h=Nr(n);return h!=="boolean"?[new Be(s,n,`boolean expected, ${h} found`)]:[]},number:Ol,color:function(a){const n=a.key,s=a.value,h=Nr(s);return h!=="string"?[new Be(n,s,`color expected, ${h} found`)]:vr.parse(String(s))?[]:[new Be(n,s,`color expected, "${s}" found`)]},constants:If,enum:Fl,filter:Vs,function:Hc,layer:Mf,object:Ai,source:Yi,light:jl,terrain:Df,string:Wo,formatted:function(a){return Wo(a).length===0?[]:ls(a)},resolvedImage:function(a){return Wo(a).length===0?[]:ls(a)},padding:function(a){const n=a.key,s=a.value;if(Nr(s)==="array"){if(s.length<1||s.length>4)return[new Be(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const h={type:"number"};let f=[];for(let v=0;v<s.length;v++)f=f.concat(a.validateSpec({key:`${n}[${v}]`,value:s[v],validateSpec:a.validateSpec,valueSpec:h}));return f}return Ol({key:n,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(a){const n=a.key,s=a.value,h=Nr(s),f=a.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new Be(n,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let x=0;x<s.length;x+=2)v=v.concat(Fl({key:`${n}[${x}]`,value:s[x],valueSpec:f.layout_symbol["text-anchor"]})),v=v.concat(js({key:`${n}[${x+1}]`,value:s[x+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:f}));return v},sprite:Af};function ma(a){const n=a.value,s=a.valueSpec,h=a.styleSpec;return a.validateSpec=ma,s.expression&&fn(xn(n))?Hc(a):s.expression&&Oc(ss(n))?ls(a):s.type&&Rf[s.type]?Rf[s.type](a):Ai(xt({},a,{valueSpec:s.type?h[s.type]:s}))}function Lf(a){const n=a.value,s=a.key,h=Wo(a);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Be(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new Be(s,n,'"glyphs" url must include a "{range}" token'))),h}function po(a,n=Ve){let s=[];return s=s.concat(ma({key:"",value:a,valueSpec:n.$root,styleSpec:n,style:a,validateSpec:ma,objectElementValidators:{glyphs:Lf,"*":()=>[]}})),a.constants&&(s=s.concat(If({key:"constants",value:a.constants,style:a,styleSpec:n,validateSpec:ma}))),Wc(s)}function ga(a){return function(n){return a({...n,validateSpec:ma})}}function Wc(a){return[].concat(a).sort((n,s)=>n.line-s.line)}function ya(a){return function(...n){return Wc(a.apply(this,n))}}po.source=ya(ga(Yi)),po.sprite=ya(ga(Af)),po.glyphs=ya(ga(Lf)),po.light=ya(ga(jl)),po.terrain=ya(ga(Df)),po.layer=ya(ga(Mf)),po.filter=ya(ga(Vs)),po.paintProperty=ya(ga(Ef)),po.layoutProperty=ya(ga(zf));const va=po,Cv=va.light,jd=va.paintProperty,$f=va.layoutProperty;function Gc(a,n){let s=!1;if(n&&n.length)for(const h of n)a.fire(new Mt(new Error(h.message))),s=!0;return s}class Us{constructor(n,s,h){const f=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(h=x[2]);for(let I=0;I<this.d*this.d;I++){const M=x[3+I],$=x[3+I+1];f.push(M===$?null:x.subarray(M,$))}const S=x[3+f.length+1];this.keys=x.subarray(x[3+f.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let x=0;x<this.d*this.d;x++)f.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=h,this.scale=s/n,this.uid=0;const v=h/s*n;this.min=-v,this.max=n+v}insert(n,s,h,f,v){this._forEachCell(s,h,f,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,h,f,v,x){this.cells[v].push(x)}query(n,s,h,f,v){const x=this.min,S=this.max;if(n<=x&&s<=x&&S<=h&&S<=f&&!v)return Array.prototype.slice.call(this.keys);{const I=[];return this._forEachCell(n,s,h,f,this._queryCell,I,{},v),I}}_queryCell(n,s,h,f,v,x,S,I){const M=this.cells[v];if(M!==null){const $=this.keys,N=this.bboxes;for(let q=0;q<M.length;q++){const Q=M[q];if(S[Q]===void 0){const ee=4*Q;(I?I(N[ee+0],N[ee+1],N[ee+2],N[ee+3]):n<=N[ee+2]&&s<=N[ee+3]&&h>=N[ee+0]&&f>=N[ee+1])?(S[Q]=!0,x.push($[Q])):S[Q]=!1}}}}_forEachCell(n,s,h,f,v,x,S,I){const M=this._convertToCellCoord(n),$=this._convertToCellCoord(s),N=this._convertToCellCoord(h),q=this._convertToCellCoord(f);for(let Q=M;Q<=N;Q++)for(let ee=$;ee<=q;ee++){const le=this.d*ee+Q;if((!I||I(this._convertFromCellCoord(Q),this._convertFromCellCoord(ee),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(ee+1)))&&v.call(this,n,s,h,f,le,x,S,I))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const f=new Int32Array(s+h+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let v=s;for(let x=0;x<n.length;x++){const S=n[x];f[3+x]=v,f.set(S,v),v+=S.length}return f[3+n.length]=v,f.set(this.keys,v),v+=this.keys.length,f[3+n.length+1]=v,f.set(this.bboxes,v),v+=this.bboxes.length,f.buffer}static serialize(n,s){const h=n.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(n){return new Us(n.buffer)}}const _a={};function Dt(a,n,s={}){if(_a[a])throw new Error(`${a} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:a,writeable:!1}),_a[a]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}Dt("Object",Object),Dt("TransferableGridIndex",Us),Dt("Color",vr),Dt("Error",Error),Dt("AJAXError",qe),Dt("ResolvedImage",fr),Dt("StylePropertyFunction",Rl),Dt("StyleExpression",$d,{omit:["_evaluator"]}),Dt("ZoomDependentExpression",Nc),Dt("ZoomConstantExpression",Bd),Dt("CompoundExpression",ho,{omit:["_evaluate"]});for(const a in Fs)Fs[a]._classRegistryKey||Dt(`Expression_${a}`,Fs[a]);function qc(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function ja(a,n){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob)return a;if(qc(a)||Oe(a))return n&&n.push(a),a;if(ArrayBuffer.isView(a)){const s=a;return n&&n.push(s.buffer),s}if(a instanceof ImageData)return n&&n.push(a.data.buffer),a;if(Array.isArray(a)){const s=[];for(const h of a)s.push(ja(h,n));return s}if(typeof a=="object"){const s=a.constructor,h=s._classRegistryKey;if(!h)throw new Error("can't serialize object of unregistered class");if(!_a[h])throw new Error(`${h} is not registered.`);const f=s.serialize?s.serialize(a,n):{};if(s.serialize){if(n&&f===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in a){if(!a.hasOwnProperty(v)||_a[h].omit.indexOf(v)>=0)continue;const x=a[v];f[v]=_a[h].shallow.indexOf(v)>=0?x:ja(x,n)}a instanceof Error&&(f.message=a.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(f.$name=h),f}throw new Error("can't serialize object of type "+typeof a)}function Hs(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||qc(a)||Oe(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(Hs);if(typeof a=="object"){const n=a.$name||"Object";if(!_a[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=_a[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(a);const h=Object.create(s.prototype);for(const f of Object.keys(a)){if(f==="$name")continue;const v=a[f];h[f]=_a[n].shallow.indexOf(f)>=0?v:Hs(v)}return h}throw new Error("can't deserialize object of type "+typeof a)}class Bf{constructor(){this.first=!0}update(n,s){const h=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=h,!0))}}const kt={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function Vd(a){for(const n of a)if(Hd(n.charCodeAt(0)))return!0;return!1}function Ud(a){for(const n of a)if(!kv(n.charCodeAt(0)))return!1;return!0}function kv(a){return!(kt.Arabic(a)||kt["Arabic Supplement"](a)||kt["Arabic Extended-A"](a)||kt["Arabic Presentation Forms-A"](a)||kt["Arabic Presentation Forms-B"](a))}function Hd(a){return!(a!==746&&a!==747&&(a<4352||!(kt["Bopomofo Extended"](a)||kt.Bopomofo(a)||kt["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||kt["CJK Compatibility Ideographs"](a)||kt["CJK Compatibility"](a)||kt["CJK Radicals Supplement"](a)||kt["CJK Strokes"](a)||!(!kt["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||kt["CJK Unified Ideographs Extension A"](a)||kt["CJK Unified Ideographs"](a)||kt["Enclosed CJK Letters and Months"](a)||kt["Hangul Compatibility Jamo"](a)||kt["Hangul Jamo Extended-A"](a)||kt["Hangul Jamo Extended-B"](a)||kt["Hangul Jamo"](a)||kt["Hangul Syllables"](a)||kt.Hiragana(a)||kt["Ideographic Description Characters"](a)||kt.Kanbun(a)||kt["Kangxi Radicals"](a)||kt["Katakana Phonetic Extensions"](a)||kt.Katakana(a)&&a!==12540||!(!kt["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!kt["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||kt["Unified Canadian Aboriginal Syllabics"](a)||kt["Unified Canadian Aboriginal Syllabics Extended"](a)||kt["Vertical Forms"](a)||kt["Yijing Hexagram Symbols"](a)||kt["Yi Syllables"](a)||kt["Yi Radicals"](a))))}function Of(a){return!(Hd(a)||function(n){return!!(kt["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||kt["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||kt["Letterlike Symbols"](n)||kt["Number Forms"](n)||kt["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||kt["Control Pictures"](n)&&n!==9251||kt["Optical Character Recognition"](n)||kt["Enclosed Alphanumerics"](n)||kt["Geometric Shapes"](n)||kt["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||kt["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||kt["CJK Symbols and Punctuation"](n)||kt.Katakana(n)||kt["Private Use Area"](n)||kt["CJK Compatibility Forms"](n)||kt["Small Form Variants"](n)||kt["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(a))}function Ff(a){return a>=1424&&a<=2303||kt["Arabic Presentation Forms-A"](a)||kt["Arabic Presentation Forms-B"](a)}function Nf(a,n){return!(!n&&Ff(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||kt.Khmer(a))}function Iv(a){for(const n of a)if(Ff(n.charCodeAt(0)))return!0;return!1}const Wd="deferred",Gd="loading",qd="loaded";let Zd=null,Ri="unavailable",Va=null;const Vl=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(Ri="error"),Zd&&Zd(a)};function Kd(){Ul.fire(new ur("pluginStateChange",{pluginStatus:Ri,pluginURL:Va}))}const Ul=new Er,Xd=function(){return Ri},jf=function(){if(Ri!==Wd||!Va)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ri=Gd,Kd(),Va&&Mr({url:Va},a=>{a?Vl(a):(Ri=qd,Kd())})},Qi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Ri===qd||Qi.applyArabicShaping!=null,isLoading:()=>Ri===Gd,setState(a){if(!Fe())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Ri=a.pluginStatus,Va=a.pluginURL},isParsed(){if(!Fe())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Qi.applyArabicShaping!=null&&Qi.processBidirectionalText!=null&&Qi.processStyledBidirectionalText!=null},getPluginURL(){if(!Fe())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Va}};class an{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Bf,this.transition={})}isSupportedScript(n){return function(s,h){for(const f of s)if(!Nf(f.charCodeAt(0),h))return!1;return!0}(n,Qi.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),h=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class Zc{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,f){if(fn(h))return new Rl(h,f);if(Oc(h)){const v=Od(h,f);if(v.result==="error")throw new Error(v.value.map(x=>`${x.key}: ${x.message}`).join(", "));return v.value}{let v=h;return f.type==="color"&&typeof h=="string"?v=vr.parse(h):f.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(v=Zt.parse(h)):v=Pr.parse(h),{kind:"constant",evaluate:()=>v}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class Jd{constructor(n){this.property=n,this.value=new Zc(n,void 0)}transitioned(n,s){return new Uf(this.property,this.value,s,Z({},n.transition,this.transition),n.now)}untransitioned(){return new Uf(this.property,this.value,null,{},0)}}class Vf{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return ze(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Jd(this._values[n].property)),this._values[n].value=new Zc(this._values[n].property,s===null?void 0:ze(s))}getTransition(n){return ze(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new Jd(this._values[n].property)),this._values[n].transition=ze(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const f=this.getTransition(s);f!==void 0&&(n[`${s}-transition`]=f)}return n}transitioned(n,s){const h=new Hf(this._properties);for(const f of Object.keys(this._values))h._values[f]=this._values[f].transitioned(n,s._values[f]);return h}untransitioned(){const n=new Hf(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Uf{constructor(n,s,h,f,v){this.property=n,this.value=s,this.begin=v+f.delay||0,this.end=this.begin+f.duration||0,n.specification.transition&&(f.delay||f.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const f=n.now||0,v=this.value.possiblyEvaluate(n,s,h),x=this.prior;if(x){if(f>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(f<this.begin)return x.possiblyEvaluate(n,s,h);{const S=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,h),v,function(I){if(I<=0)return 0;if(I>=1)return 1;const M=I*I,$=M*I;return 4*(I<.5?$:3*(I-M)+$-.75)}(S))}}return v}}class Hf{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const f=new Kc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,s,h);return f}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Tv{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}hasValue(n){return this._values[n].value!==void 0}getValue(n){return ze(this._values[n].value)}setValue(n,s){this._values[n]=new Zc(this._values[n].property,s===null?void 0:ze(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const f=new Kc(this._properties);for(const v of Object.keys(this._values))f._values[v]=this._values[v].possiblyEvaluate(n,s,h);return f}}class xi{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,f){return this.property.evaluate(this.value,this.parameters,n,s,h,f)}}class Kc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Ut{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,h){const f=Xi[this.specification.type];return f?f(n,s,h):n}}class nr{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,f){return new xi(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,f)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new xi(this,{kind:"constant",value:void 0},n.parameters);const f=Xi[this.specification.type];if(f){const v=f(n.value.value,s.value.value,h);return new xi(this,{kind:"constant",value:v},n.parameters)}return n}evaluate(n,s,h,f,v,x){return n.kind==="constant"?n.value:n.evaluate(s,h,f,v,x)}}class Hl extends nr{possiblyEvaluate(n,s,h,f){if(n.value===void 0)return new xi(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,f),x=n.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,S=this._calculate(x,x,x,s);return new xi(this,{kind:"constant",value:S},s)}if(n.expression.kind==="camera"){const v=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new xi(this,{kind:"constant",value:v},s)}return new xi(this,n.expression,s)}evaluate(n,s,h,f,v,x){if(n.kind==="source"){const S=n.evaluate(s,h,f,v,x);return this._calculate(S,S,S,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},h,f),n.evaluate({zoom:Math.floor(s.zoom)},h,f),n.evaluate({zoom:Math.floor(s.zoom)+1},h,f),s):n.value}_calculate(n,s,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Yd{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,f){if(n.value!==void 0){if(n.expression.kind==="constant"){const v=n.expression.evaluate(s,null,{},h,f);return this._calculate(v,v,v,s)}return this._calculate(n.expression.evaluate(new an(Math.floor(s.zoom-1),s)),n.expression.evaluate(new an(Math.floor(s.zoom),s)),n.expression.evaluate(new an(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:h,to:s}}interpolate(n){return n}}class Qd{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,f){return!!n.expression.evaluate(s,null,{},h,f)}interpolate(){return!1}}class zn{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const h=n[s];h.specification.overridable&&this.overridableProperties.push(s);const f=this.defaultPropertyValues[s]=new Zc(h,void 0),v=this.defaultTransitionablePropertyValues[s]=new Jd(h);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=f.possiblyEvaluate({})}}}Dt("DataDrivenProperty",nr),Dt("DataConstantProperty",Ut),Dt("CrossFadedDataDrivenProperty",Hl),Dt("CrossFadedProperty",Yd),Dt("ColorRampProperty",Qd);const eh="-transition";class fo extends Er{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new Tv(s.layout)),s.paint)){this._transitionablePaint=new Vf(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Kc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate($f,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(eh)?this._transitionablePaint.getTransition(n.slice(0,-11)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(jd,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(n.endsWith(eh))return this._transitionablePaint.setTransition(n.slice(0,-11),s||void 0),!1;{const f=this._transitionablePaint._values[n],v=f.property.specification["property-type"]==="cross-faded-data-driven",x=f.value.isDataDriven(),S=f.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const I=this._transitionablePaint._values[n].value;return I.isDataDriven()||x||v||this._handleOverridablePaintPropertyUpdate(n,S,I)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),Ie(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,f,v={}){return(!v||v.validate!==!1)&&Gc(this,n.call(va,{key:s,layerType:this.type,objectKey:h,value:f,styleSpec:Ve,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof xi&&Ns(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const Wf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class cs{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class bn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function gn(a,n=1){let s=0,h=0;return{members:a.map(f=>{const v=Wf[f.type].BYTES_PER_ELEMENT,x=s=Ws(s,Math.max(n,v)),S=f.components||1;return h=Math.max(h,v),s+=v*S,{name:f.name,type:f.type,components:S,offset:x}}),size:Ws(s,Math.max(h,n)),alignment:n}}function Ws(a,n){return Math.ceil(a/n)*n}class Wl extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const f=2*n;return this.int16[f+0]=s,this.int16[f+1]=h,n}}Wl.prototype.bytesPerElement=4,Dt("StructArrayLayout2i4",Wl);class Gl extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=3*n;return this.int16[v+0]=s,this.int16[v+1]=h,this.int16[v+2]=f,n}}Gl.prototype.bytesPerElement=6,Dt("StructArrayLayout3i6",Gl);class us extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,f)}emplace(n,s,h,f,v){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=h,this.int16[x+2]=f,this.int16[x+3]=v,n}}us.prototype.bytesPerElement=8,Dt("StructArrayLayout4i8",us);class th extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,f,v,x)}emplace(n,s,h,f,v,x,S){const I=6*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.int16[I+2]=f,this.int16[I+3]=v,this.int16[I+4]=x,this.int16[I+5]=S,n}}th.prototype.bytesPerElement=12,Dt("StructArrayLayout2i4i12",th);class rh extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,f,v,x)}emplace(n,s,h,f,v,x,S){const I=4*n,M=8*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.uint8[M+4]=f,this.uint8[M+5]=v,this.uint8[M+6]=x,this.uint8[M+7]=S,n}}rh.prototype.bytesPerElement=8,Dt("StructArrayLayout2i4ub8",rh);class Gs extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const f=2*n;return this.float32[f+0]=s,this.float32[f+1]=h,n}}Gs.prototype.bytesPerElement=8,Dt("StructArrayLayout2f8",Gs);class nh extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,M,$){const N=this.length;return this.resize(N+1),this.emplace(N,n,s,h,f,v,x,S,I,M,$)}emplace(n,s,h,f,v,x,S,I,M,$,N){const q=10*n;return this.uint16[q+0]=s,this.uint16[q+1]=h,this.uint16[q+2]=f,this.uint16[q+3]=v,this.uint16[q+4]=x,this.uint16[q+5]=S,this.uint16[q+6]=I,this.uint16[q+7]=M,this.uint16[q+8]=$,this.uint16[q+9]=N,n}}nh.prototype.bytesPerElement=20,Dt("StructArrayLayout10ui20",nh);class ih extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,M,$,N,q){const Q=this.length;return this.resize(Q+1),this.emplace(Q,n,s,h,f,v,x,S,I,M,$,N,q)}emplace(n,s,h,f,v,x,S,I,M,$,N,q,Q){const ee=12*n;return this.int16[ee+0]=s,this.int16[ee+1]=h,this.int16[ee+2]=f,this.int16[ee+3]=v,this.uint16[ee+4]=x,this.uint16[ee+5]=S,this.uint16[ee+6]=I,this.uint16[ee+7]=M,this.int16[ee+8]=$,this.int16[ee+9]=N,this.int16[ee+10]=q,this.int16[ee+11]=Q,n}}ih.prototype.bytesPerElement=24,Dt("StructArrayLayout4i4ui4i24",ih);class jr extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=3*n;return this.float32[v+0]=s,this.float32[v+1]=h,this.float32[v+2]=f,n}}jr.prototype.bytesPerElement=12,Dt("StructArrayLayout3f12",jr);class y extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}y.prototype.bytesPerElement=4,Dt("StructArrayLayout1ul4",y);class i extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,M){const $=this.length;return this.resize($+1),this.emplace($,n,s,h,f,v,x,S,I,M)}emplace(n,s,h,f,v,x,S,I,M,$){const N=10*n,q=5*n;return this.int16[N+0]=s,this.int16[N+1]=h,this.int16[N+2]=f,this.int16[N+3]=v,this.int16[N+4]=x,this.int16[N+5]=S,this.uint32[q+3]=I,this.uint16[N+8]=M,this.uint16[N+9]=$,n}}i.prototype.bytesPerElement=20,Dt("StructArrayLayout6i1ul2ui20",i);class u extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,n,s,h,f,v,x)}emplace(n,s,h,f,v,x,S){const I=6*n;return this.int16[I+0]=s,this.int16[I+1]=h,this.int16[I+2]=f,this.int16[I+3]=v,this.int16[I+4]=x,this.int16[I+5]=S,n}}u.prototype.bytesPerElement=12,Dt("StructArrayLayout2i2i2i12",u);class p extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,h,f,v)}emplace(n,s,h,f,v,x){const S=4*n,I=8*n;return this.float32[S+0]=s,this.float32[S+1]=h,this.float32[S+2]=f,this.int16[I+6]=v,this.int16[I+7]=x,n}}p.prototype.bytesPerElement=16,Dt("StructArrayLayout2f1f2i16",p);class g extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,f)}emplace(n,s,h,f,v){const x=12*n,S=3*n;return this.uint8[x+0]=s,this.uint8[x+1]=h,this.float32[S+1]=f,this.float32[S+2]=v,n}}g.prototype.bytesPerElement=12,Dt("StructArrayLayout2ub2f12",g);class _ extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=3*n;return this.uint16[v+0]=s,this.uint16[v+1]=h,this.uint16[v+2]=f,n}}_.prototype.bytesPerElement=6,Dt("StructArrayLayout3ui6",_);class C extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,M,$,N,q,Q,ee,le,me,ve){const Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,n,s,h,f,v,x,S,I,M,$,N,q,Q,ee,le,me,ve)}emplace(n,s,h,f,v,x,S,I,M,$,N,q,Q,ee,le,me,ve,Ae){const we=24*n,Re=12*n,Ue=48*n;return this.int16[we+0]=s,this.int16[we+1]=h,this.uint16[we+2]=f,this.uint16[we+3]=v,this.uint32[Re+2]=x,this.uint32[Re+3]=S,this.uint32[Re+4]=I,this.uint16[we+10]=M,this.uint16[we+11]=$,this.uint16[we+12]=N,this.float32[Re+7]=q,this.float32[Re+8]=Q,this.uint8[Ue+36]=ee,this.uint8[Ue+37]=le,this.uint8[Ue+38]=me,this.uint32[Re+10]=ve,this.int16[we+22]=Ae,n}}C.prototype.bytesPerElement=48,Dt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",C);class k extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f,v,x,S,I,M,$,N,q,Q,ee,le,me,ve,Ae,we,Re,Ue,rt,It,Bt,Ct,_t,ft,Rt){const gt=this.length;return this.resize(gt+1),this.emplace(gt,n,s,h,f,v,x,S,I,M,$,N,q,Q,ee,le,me,ve,Ae,we,Re,Ue,rt,It,Bt,Ct,_t,ft,Rt)}emplace(n,s,h,f,v,x,S,I,M,$,N,q,Q,ee,le,me,ve,Ae,we,Re,Ue,rt,It,Bt,Ct,_t,ft,Rt,gt){const ct=32*n,Jt=16*n;return this.int16[ct+0]=s,this.int16[ct+1]=h,this.int16[ct+2]=f,this.int16[ct+3]=v,this.int16[ct+4]=x,this.int16[ct+5]=S,this.int16[ct+6]=I,this.int16[ct+7]=M,this.uint16[ct+8]=$,this.uint16[ct+9]=N,this.uint16[ct+10]=q,this.uint16[ct+11]=Q,this.uint16[ct+12]=ee,this.uint16[ct+13]=le,this.uint16[ct+14]=me,this.uint16[ct+15]=ve,this.uint16[ct+16]=Ae,this.uint16[ct+17]=we,this.uint16[ct+18]=Re,this.uint16[ct+19]=Ue,this.uint16[ct+20]=rt,this.uint16[ct+21]=It,this.uint16[ct+22]=Bt,this.uint32[Jt+12]=Ct,this.float32[Jt+13]=_t,this.float32[Jt+14]=ft,this.uint16[ct+30]=Rt,this.uint16[ct+31]=gt,n}}k.prototype.bytesPerElement=64,Dt("StructArrayLayout8i15ui1ul2f2ui64",k);class P extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}P.prototype.bytesPerElement=4,Dt("StructArrayLayout1f4",P);class D extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=3*n;return this.uint16[6*n+0]=s,this.float32[v+1]=h,this.float32[v+2]=f,n}}D.prototype.bytesPerElement=12,Dt("StructArrayLayout1ui2f12",D);class B extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const f=this.length;return this.resize(f+1),this.emplace(f,n,s,h)}emplace(n,s,h,f){const v=4*n;return this.uint32[2*n+0]=s,this.uint16[v+2]=h,this.uint16[v+3]=f,n}}B.prototype.bytesPerElement=8,Dt("StructArrayLayout1ul2ui8",B);class F extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const f=2*n;return this.uint16[f+0]=s,this.uint16[f+1]=h,n}}F.prototype.bytesPerElement=4,Dt("StructArrayLayout2ui4",F);class X extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}X.prototype.bytesPerElement=2,Dt("StructArrayLayout1ui2",X);class ue extends bn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,f){const v=this.length;return this.resize(v+1),this.emplace(v,n,s,h,f)}emplace(n,s,h,f,v){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=f,this.float32[x+3]=v,n}}ue.prototype.bytesPerElement=16,Dt("StructArrayLayout4f16",ue);class ce extends cs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new z(this.anchorPointX,this.anchorPointY)}}ce.prototype.size=20;class pe extends i{get(n){return new ce(this,n)}}Dt("CollisionBoxArray",pe);class ae extends cs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ae.prototype.size=48;class Pe extends C{get(n){return new ae(this,n)}}Dt("PlacedSymbolArray",Pe);class Ne extends cs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ne.prototype.size=64;class ge extends k{get(n){return new Ne(this,n)}}Dt("SymbolInstanceArray",ge);class De extends P{getoffsetX(n){return this.float32[1*n+0]}}Dt("GlyphOffsetArray",De);class He extends Gl{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Dt("SymbolLineVertexArray",He);class We extends cs{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}We.prototype.size=12;class tt extends D{get(n){return new We(this,n)}}Dt("TextAnchorOffsetArray",tt);class st extends cs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}st.prototype.size=8;class it extends B{get(n){return new st(this,n)}}Dt("FeatureIndexArray",it);class dt extends Wl{}class $t extends Wl{}class xr extends Wl{}class vt extends th{}class ir extends rh{}class Nt extends Gs{}class qr extends nh{}class gr extends ih{}class pr extends jr{}class br extends y{}class kn extends u{}class en extends g{}class ai extends _{}class Vn extends F{}const Mn=gn([{name:"a_pos",components:2,type:"Int16"}],4),{members:eo}=Mn;class sn{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,f){let v=this.segments[this.segments.length-1];return n>sn.MAX_VERTEX_ARRAY_LENGTH&&Ye(`Max vertices per segment is ${sn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!v||v.vertexLength+n>sn.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==f)&&(v={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},f!==void 0&&(v.sortKey=f),this.segments.push(v)),v}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,f){return new sn([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:f,vaos:{},sortKey:0}])}}function Go(a,n){return 256*(a=se(Math.floor(a),0,255))+se(Math.floor(n),0,255)}sn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Dt("SegmentVector",sn);const qo=gn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ua={exports:{}},ds={exports:{}};ds.exports=function(a,n){var s,h,f,v,x,S,I,M;for(h=a.length-(s=3&a.length),f=n,x=3432918353,S=461845907,M=0;M<h;)I=255&a.charCodeAt(M)|(255&a.charCodeAt(++M))<<8|(255&a.charCodeAt(++M))<<16|(255&a.charCodeAt(++M))<<24,++M,f=27492+(65535&(v=5*(65535&(f=(f^=I=(65535&(I=(I=(65535&I)*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*S+(((I>>>16)*S&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(I=0,s){case 3:I^=(255&a.charCodeAt(M+2))<<16;case 2:I^=(255&a.charCodeAt(M+1))<<8;case 1:f^=I=(65535&(I=(I=(65535&(I^=255&a.charCodeAt(M)))*x+(((I>>>16)*x&65535)<<16)&4294967295)<<15|I>>>17))*S+(((I>>>16)*S&65535)<<16)&4294967295}return f^=a.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var qs=ds.exports,hi={exports:{}};hi.exports=function(a,n){for(var s,h=a.length,f=n^h,v=0;h>=4;)s=1540483477*(65535&(s=255&a.charCodeAt(v)|(255&a.charCodeAt(++v))<<8|(255&a.charCodeAt(++v))<<16|(255&a.charCodeAt(++v))<<24))+((1540483477*(s>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++v;switch(h){case 3:f^=(255&a.charCodeAt(v+2))<<16;case 2:f^=(255&a.charCodeAt(v+1))<<8;case 1:f=1540483477*(65535&(f^=255&a.charCodeAt(v)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var si=qs,bi=hi.exports;Ua.exports=si,Ua.exports.murmur3=si,Ua.exports.murmur2=bi;var hs=w(Ua.exports);class In{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,f){this.ids.push(Un(n)),this.positions.push(s,h,f)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Un(n);let h=0,f=this.ids.length-1;for(;h<f;){const x=h+f>>1;this.ids[x]>=s?f=x:h=x+1}const v=[];for(;this.ids[h]===s;)v.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return v}static serialize(n,s){const h=new Float64Array(n.ids),f=new Uint32Array(n.positions);return Li(h,f,0,h.length-1),s&&s.push(h.buffer,f.buffer),{ids:h,positions:f}}static deserialize(n){const s=new In;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Un(a){const n=+a;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:hs(String(a))}function Li(a,n,s,h){for(;s<h;){const f=a[s+h>>1];let v=s-1,x=h+1;for(;;){do v++;while(a[v]<f);do x--;while(a[x]>f);if(v>=x)break;Tn(a,v,x),Tn(n,3*v,3*x),Tn(n,3*v+1,3*x+1),Tn(n,3*v+2,3*x+2)}x-s<h-x?(Li(a,n,s,x),s=x+1):(Li(a,n,x+1,h),h=x)}}function Tn(a,n,s){const h=a[n];a[n]=a[s],a[s]=h}Dt("FeaturePositionMap",In);class ps{constructor(n,s){this.gl=n.gl,this.location=s}}class Xc extends ps{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class Gf extends ps{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class qf extends ps{constructor(n,s){super(n,s),this.current=vr.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Pv=new Float32Array(16);function oh(a){return[Go(255*a.r,255*a.g),Go(255*a.b,255*a.a)]}class Zo{constructor(n,s,h){this.value=n,this.uniformNames=s.map(f=>`u_${f}`),this.type=h}setUniform(n,s,h){n.set(h.constantOr(this.value))}getBinding(n,s,h){return this.type==="color"?new qf(n,s):new Xc(n,s)}}class fs{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,h,f){const v=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&n.set(v)}getBinding(n,s,h){return h.substr(0,9)==="u_pattern"?new Gf(n,s):new Xc(n,s)}}class Ko{constructor(n,s,h,f){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(n,s,h,f,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new an(0),s,{},f,[],v);this.paintVertexArray.resize(n),this._setPaintValue(x,n,S)}updatePaintArray(n,s,h,f){const v=this.expression.evaluate({zoom:0},h,f);this._setPaintValue(n,s,v)}_setPaintValue(n,s,h){if(this.type==="color"){const f=oh(h);for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,f[0],f[1])}else{for(let f=n;f<s;f++)this.paintVertexArray.emplace(f,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class mo{constructor(n,s,h,f,v,x){this.expression=n,this.uniformNames=s.map(S=>`u_${S}_t`),this.type=h,this.useIntegerZoom=f,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map(S=>({name:`a_${S}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,h,f,v){const x=this.expression.evaluate(new an(this.zoom),s,{},f,[],v),S=this.expression.evaluate(new an(this.zoom+1),s,{},f,[],v),I=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(I,n,x,S)}updatePaintArray(n,s,h,f){const v=this.expression.evaluate({zoom:this.zoom},h,f),x=this.expression.evaluate({zoom:this.zoom+1},h,f);this._setPaintValue(n,s,v,x)}_setPaintValue(n,s,h,f){if(this.type==="color"){const v=oh(h),x=oh(f);for(let S=n;S<s;S++)this.paintVertexArray.emplace(S,v[0],v[1],x[0],x[1])}else{for(let v=n;v<s;v++)this.paintVertexArray.emplace(v,h,f);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,f=se(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);n.set(f)}getBinding(n,s,h){return new Xc(n,s)}}class Xo{constructor(n,s,h,f,v,x){this.expression=n,this.type=s,this.useIntegerZoom=h,this.zoom=f,this.layerId=x,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(n,s,h){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(f,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,f,v){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(n,s,h,f){if(!f||!h)return;const{min:v,mid:x,max:S}=h,I=f[v],M=f[x],$=f[S];if(I&&M&&$)for(let N=n;N<s;N++)this.zoomInPaintVertexArray.emplace(N,M.tl[0],M.tl[1],M.br[0],M.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],M.pixelRatio,I.pixelRatio),this.zoomOutPaintVertexArray.emplace(N,M.tl[0],M.tl[1],M.br[0],M.br[1],$.tl[0],$.tl[1],$.br[0],$.br[1],M.pixelRatio,$.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,qo.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,qo.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ah{constructor(n,s,h){this.binders={},this._buffers=[];const f=[];for(const v in n.paint._values){if(!h(v))continue;const x=n.paint.get(v);if(!(x instanceof xi&&Ns(x.property.specification)))continue;const S=Bz(v,n.type),I=x.value,M=x.property.specification.type,$=x.property.useIntegerZoom,N=x.property.specification["property-type"],q=N==="cross-faded"||N==="cross-faded-data-driven";if(I.kind==="constant")this.binders[v]=q?new fs(I.value,S):new Zo(I.value,S,M),f.push(`/u_${v}`);else if(I.kind==="source"||q){const Q=Eb(v,M,"source");this.binders[v]=q?new Xo(I,M,$,s,Q,n.id):new Ko(I,S,M,Q),f.push(`/a_${v}`)}else{const Q=Eb(v,M,"composite");this.binders[v]=new mo(I,S,M,$,s,Q),f.push(`/z_${v}`)}}this.cacheKey=f.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Ko||s instanceof mo?s.maxValue:0}populatePaintArrays(n,s,h,f,v){for(const x in this.binders){const S=this.binders[x];(S instanceof Ko||S instanceof mo||S instanceof Xo)&&S.populatePaintArray(n,s,h,f,v)}}setConstantPatternPositions(n,s){for(const h in this.binders){const f=this.binders[h];f instanceof fs&&f.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,h,f,v){let x=!1;for(const S in n){const I=s.getPositions(S);for(const M of I){const $=h.feature(M.index);for(const N in this.binders){const q=this.binders[N];if((q instanceof Ko||q instanceof mo||q instanceof Xo)&&q.expression.isStateDependent===!0){const Q=f.paint.get(N);q.expression=Q.value,q.updatePaintArray(M.start,M.end,$,n[S],v),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Zo||h instanceof fs)&&n.push(...h.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Ko||h instanceof mo)for(let f=0;f<h.paintVertexAttributes.length;f++)n.push(h.paintVertexAttributes[f].name);else if(h instanceof Xo)for(let f=0;f<qo.members.length;f++)n.push(qo.members[f].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Zo||h instanceof fs||h instanceof mo)for(const f of h.uniformNames)n.push(f)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const h=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof Zo||v instanceof fs||v instanceof mo){for(const x of v.uniformNames)if(s[x]){const S=v.getBinding(n,s[x],x);h.push({name:x,property:f,binding:S})}}}return h}setUniforms(n,s,h,f){for(const{name:v,property:x,binding:S}of s)this.binders[x].setUniform(S,f,h.get(x),v)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const h=this.binders[s];if(n&&h instanceof Xo){const f=n.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(h instanceof Ko||h instanceof mo)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof Ko||h instanceof mo||h instanceof Xo)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Ko||s instanceof mo||s instanceof Xo)&&s.destroy()}}}class xa{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const f of n)this.programConfigurations[f.id]=new ah(f,s,h);this.needsUpload=!1,this._featureMap=new In,this._bufferOffset=0}populatePaintArrays(n,s,h,f,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(n,s,f,v,x);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,f){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(n,this._featureMap,s,v,f)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Bz(a,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${n}-`,"").replace(/-/g,"_")]}function Eb(a,n,s){const h={color:{source:Gs,composite:ue},number:{source:P,composite:Gs}},f=function(v){return{"line-pattern":{source:qr,composite:qr},"fill-pattern":{source:qr,composite:qr},"fill-extrusion-pattern":{source:qr,composite:qr}}[v]}(a);return f&&f[s]||h[n][s]}Dt("ConstantBinder",Zo),Dt("CrossFadedConstantBinder",fs),Dt("SourceExpressionBinder",Ko),Dt("CrossFadedCompositeBinder",Xo),Dt("CompositeExpressionBinder",mo),Dt("ProgramConfiguration",ah,{omit:["_buffers"]}),Dt("ProgramConfigurationSet",xa);const Bn=8192,Ev=Math.pow(2,14)-1,zb=-Ev-1;function ql(a){const n=Bn/a.extent,s=a.loadGeometry();for(let h=0;h<s.length;h++){const f=s[h];for(let v=0;v<f.length;v++){const x=f[v],S=Math.round(x.x*n),I=Math.round(x.y*n);x.x=se(S,zb,Ev),x.y=se(I,zb,Ev),(S<x.x||S>x.x+1||I<x.y||I>x.y+1)&&Ye("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Zl(a,n){return{type:a.type,id:a.id,properties:a.properties,geometry:n?ql(a):[]}}function Zf(a,n,s,h,f){a.emplaceBack(2*n+(h+1)/2,2*s+(f+1)/2)}class zv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new $t,this.indexArray=new ai,this.segments=new sn,this.programConfigurations=new xa(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){const f=this.layers[0],v=[];let x=null,S=!1;f.type==="circle"&&(x=f.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:I,id:M,index:$,sourceLayerIndex:N}of n){const q=this.layers[0]._featureFilter.needGeometry,Q=Zl(I,q);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),Q,h))continue;const ee=S?x.evaluate(Q,{},h):void 0,le={id:M,properties:I.properties,type:I.type,sourceLayerIndex:N,index:$,geometry:q?Q.geometry:ql(I),patterns:{},sortKey:ee};v.push(le)}S&&v.sort((I,M)=>I.sortKey-M.sortKey);for(const I of v){const{geometry:M,index:$,sourceLayerIndex:N}=I,q=n[$].feature;this.addFeature(I,M,$,h),s.featureIndex.insert(q,M,$,N,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,eo),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,f){for(const v of s)for(const x of v){const S=x.x,I=x.y;if(S<0||S>=Bn||I<0||I>=Bn)continue;const M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),$=M.vertexLength;Zf(this.layoutVertexArray,S,I,-1,-1),Zf(this.layoutVertexArray,S,I,1,-1),Zf(this.layoutVertexArray,S,I,1,1),Zf(this.layoutVertexArray,S,I,-1,1),this.indexArray.emplaceBack($,$+1,$+2),this.indexArray.emplaceBack($,$+3,$+2),M.vertexLength+=4,M.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},f)}}function Mb(a,n){for(let s=0;s<a.length;s++)if(Jc(n,a[s]))return!0;for(let s=0;s<n.length;s++)if(Jc(a,n[s]))return!0;return!!Mv(a,n)}function Oz(a,n,s){return!!Jc(a,n)||!!Dv(n,a,s)}function Db(a,n){if(a.length===1)return Rb(n,a[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let f=0;f<h.length;f++)if(Jc(a,h[f]))return!0}for(let s=0;s<a.length;s++)if(Rb(n,a[s]))return!0;for(let s=0;s<n.length;s++)if(Mv(a,n[s]))return!0;return!1}function Fz(a,n,s){if(a.length>1){if(Mv(a,n))return!0;for(let h=0;h<n.length;h++)if(Dv(n[h],a,s))return!0}for(let h=0;h<a.length;h++)if(Dv(a[h],n,s))return!0;return!1}function Mv(a,n){if(a.length===0||n.length===0)return!1;for(let s=0;s<a.length-1;s++){const h=a[s],f=a[s+1];for(let v=0;v<n.length-1;v++)if(Nz(h,f,n[v],n[v+1]))return!0}return!1}function Nz(a,n,s,h){return Ge(a,s,h)!==Ge(n,s,h)&&Ge(a,n,s)!==Ge(a,n,h)}function Dv(a,n,s){const h=s*s;if(n.length===1)return a.distSqr(n[0])<h;for(let f=1;f<n.length;f++)if(Ab(a,n[f-1],n[f])<h)return!0;return!1}function Ab(a,n,s){const h=n.distSqr(s);if(h===0)return a.distSqr(n);const f=((a.x-n.x)*(s.x-n.x)+(a.y-n.y)*(s.y-n.y))/h;return a.distSqr(f<0?n:f>1?s:s.sub(n)._mult(f)._add(n))}function Rb(a,n){let s,h,f,v=!1;for(let x=0;x<a.length;x++){s=a[x];for(let S=0,I=s.length-1;S<s.length;I=S++)h=s[S],f=s[I],h.y>n.y!=f.y>n.y&&n.x<(f.x-h.x)*(n.y-h.y)/(f.y-h.y)+h.x&&(v=!v)}return v}function Jc(a,n){let s=!1;for(let h=0,f=a.length-1;h<a.length;f=h++){const v=a[h],x=a[f];v.y>n.y!=x.y>n.y&&n.x<(x.x-v.x)*(n.y-v.y)/(x.y-v.y)+v.x&&(s=!s)}return s}function jz(a,n,s){const h=s[0],f=s[2];if(a.x<h.x&&n.x<h.x||a.x>f.x&&n.x>f.x||a.y<h.y&&n.y<h.y||a.y>f.y&&n.y>f.y)return!1;const v=Ge(a,n,s[0]);return v!==Ge(a,n,s[1])||v!==Ge(a,n,s[2])||v!==Ge(a,n,s[3])}function sh(a,n,s){const h=n.paint.get(a).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(a)}function Kf(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Xf(a,n,s,h,f){if(!n[0]&&!n[1])return a;const v=z.convert(n)._mult(f);s==="viewport"&&v._rotate(-h);const x=[];for(let S=0;S<a.length;S++)x.push(a[S].sub(v));return x}let Lb,$b;Dt("CircleBucket",zv,{omit:["layers"]});var Vz={get paint(){return $b=$b||new zn({"circle-radius":new nr(Ve.paint_circle["circle-radius"]),"circle-color":new nr(Ve.paint_circle["circle-color"]),"circle-blur":new nr(Ve.paint_circle["circle-blur"]),"circle-opacity":new nr(Ve.paint_circle["circle-opacity"]),"circle-translate":new Ut(Ve.paint_circle["circle-translate"]),"circle-translate-anchor":new Ut(Ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ut(Ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ut(Ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new nr(Ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new nr(Ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new nr(Ve.paint_circle["circle-stroke-opacity"])})},get layout(){return Lb=Lb||new zn({"circle-sort-key":new nr(Ve.layout_circle["circle-sort-key"])})}},$i=1e-6,Yc=typeof Float32Array<"u"?Float32Array:Array;function Av(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Bb(a,n,s){var h=n[0],f=n[1],v=n[2],x=n[3],S=n[4],I=n[5],M=n[6],$=n[7],N=n[8],q=n[9],Q=n[10],ee=n[11],le=n[12],me=n[13],ve=n[14],Ae=n[15],we=s[0],Re=s[1],Ue=s[2],rt=s[3];return a[0]=we*h+Re*S+Ue*N+rt*le,a[1]=we*f+Re*I+Ue*q+rt*me,a[2]=we*v+Re*M+Ue*Q+rt*ve,a[3]=we*x+Re*$+Ue*ee+rt*Ae,a[4]=(we=s[4])*h+(Re=s[5])*S+(Ue=s[6])*N+(rt=s[7])*le,a[5]=we*f+Re*I+Ue*q+rt*me,a[6]=we*v+Re*M+Ue*Q+rt*ve,a[7]=we*x+Re*$+Ue*ee+rt*Ae,a[8]=(we=s[8])*h+(Re=s[9])*S+(Ue=s[10])*N+(rt=s[11])*le,a[9]=we*f+Re*I+Ue*q+rt*me,a[10]=we*v+Re*M+Ue*Q+rt*ve,a[11]=we*x+Re*$+Ue*ee+rt*Ae,a[12]=(we=s[12])*h+(Re=s[13])*S+(Ue=s[14])*N+(rt=s[15])*le,a[13]=we*f+Re*I+Ue*q+rt*me,a[14]=we*v+Re*M+Ue*Q+rt*ve,a[15]=we*x+Re*$+Ue*ee+rt*Ae,a}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});var lh,Uz=Bb;function Jf(a,n,s){var h=n[0],f=n[1],v=n[2],x=n[3];return a[0]=s[0]*h+s[4]*f+s[8]*v+s[12]*x,a[1]=s[1]*h+s[5]*f+s[9]*v+s[13]*x,a[2]=s[2]*h+s[6]*f+s[10]*v+s[14]*x,a[3]=s[3]*h+s[7]*f+s[11]*v+s[15]*x,a}lh=new Yc(4),Yc!=Float32Array&&(lh[0]=0,lh[1]=0,lh[2]=0,lh[3]=0);class Hz extends fo{constructor(n){super(n,Vz)}createBucket(n){return new zv(n)}queryRadius(n){const s=n;return sh("circle-radius",this,s)+sh("circle-stroke-width",this,s)+Kf(this.paint.get("circle-translate"))}queryIntersectsFeature(n,s,h,f,v,x,S,I){const M=Xf(n,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),$=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),N=this.paint.get("circle-pitch-alignment")==="map",q=N?M:function(ee,le){return ee.map(me=>Ob(me,le))}(M,I),Q=N?$*S:$;for(const ee of f)for(const le of ee){const me=N?le:Ob(le,I);let ve=Q;const Ae=Jf([],[le.x,le.y,0,1],I);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ve*=Ae[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ve*=x.cameraToCenterDistance/Ae[3]),Oz(q,me,ve))return!0}return!1}}function Ob(a,n){const s=Jf([],[a.x,a.y,0,1],n);return new z(s[0]/s[3],s[1]/s[3])}class Fb extends zv{}let Nb;Dt("HeatmapBucket",Fb,{omit:["layers"]});var Wz={get paint(){return Nb=Nb||new zn({"heatmap-radius":new nr(Ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new nr(Ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ut(Ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Qd(Ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ut(Ve.paint_heatmap["heatmap-opacity"])})}};function Rv(a,{width:n,height:s},h,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==n*s*h)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${n*s*h}`)}else f=new Uint8Array(n*s*h);return a.width=n,a.height=s,a.data=f,a}function jb(a,{width:n,height:s},h){if(n===a.width&&s===a.height)return;const f=Rv({},{width:n,height:s},h);Lv(a,f,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,n),height:Math.min(a.height,s)},h),a.width=n,a.height=s,a.data=f.data}function Lv(a,n,s,h,f,v){if(f.width===0||f.height===0)return n;if(f.width>a.width||f.height>a.height||s.x>a.width-f.width||s.y>a.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>n.width||f.height>n.height||h.x>n.width-f.width||h.y>n.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=a.data,S=n.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let I=0;I<f.height;I++){const M=((s.y+I)*a.width+s.x)*v,$=((h.y+I)*n.width+h.x)*v;for(let N=0;N<f.width*v;N++)S[$+N]=x[M+N]}return n}class ch{constructor(n,s){Rv(this,n,1,s)}resize(n){jb(this,n,1)}clone(){return new ch({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,f,v){Lv(n,s,h,f,v,1)}}class Io{constructor(n,s){Rv(this,n,4,s)}resize(n){jb(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Io({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,f,v){Lv(n,s,h,f,v,4)}}function Vb(a){const n={},s=a.resolution||256,h=a.clips?a.clips.length:1,f=a.image||new Io({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(x,S,I)=>{n[a.evaluationKey]=I;const M=a.expression.evaluate(n);f.data[x+S+0]=Math.floor(255*M.r/M.a),f.data[x+S+1]=Math.floor(255*M.g/M.a),f.data[x+S+2]=Math.floor(255*M.b/M.a),f.data[x+S+3]=Math.floor(255*M.a)};if(a.clips)for(let x=0,S=0;x<h;++x,S+=4*s)for(let I=0,M=0;I<s;I++,M+=4){const $=I/(s-1),{start:N,end:q}=a.clips[x];v(S,M,N*(1-$)+q*$)}else for(let x=0,S=0;x<s;x++,S+=4)v(0,S,x/(s-1));return f}Dt("AlphaImage",ch),Dt("RGBAImage",Io);class Gz extends fo{createBucket(n){return new Fb(n)}constructor(n){super(n,Wz),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Vb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Ub;var qz={get paint(){return Ub=Ub||new zn({"hillshade-illumination-direction":new Ut(Ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ut(Ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ut(Ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ut(Ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ut(Ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ut(Ve.paint_hillshade["hillshade-accent-color"])})}};class Zz extends fo{constructor(n){super(n,qz)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Kz=gn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Xz}=Kz;var $v={exports:{}};function Yf(a,n,s){s=s||2;var h,f,v,x,S,I,M,$=n&&n.length,N=$?n[0]*s:a.length,q=Hb(a,0,N,s,!0),Q=[];if(!q||q.next===q.prev)return Q;if($&&(q=function(le,me,ve,Ae){var we,Re,Ue,rt=[];for(we=0,Re=me.length;we<Re;we++)(Ue=Hb(le,me[we]*Ae,we<Re-1?me[we+1]*Ae:le.length,Ae,!1))===Ue.next&&(Ue.steiner=!0),rt.push(iM(Ue));for(rt.sort(tM),we=0;we<rt.length;we++)ve=rM(rt[we],ve);return ve}(a,n,q,s)),a.length>80*s){h=v=a[0],f=x=a[1];for(var ee=s;ee<N;ee+=s)(S=a[ee])<h&&(h=S),(I=a[ee+1])<f&&(f=I),S>v&&(v=S),I>x&&(x=I);M=(M=Math.max(v-h,x-f))!==0?32767/M:0}return uh(q,Q,s,h,f,M,0),Q}function Hb(a,n,s,h,f){var v,x;if(f===Fv(a,n,s,h)>0)for(v=n;v<s;v+=h)x=qb(v,a[v],a[v+1],x);else for(v=s-h;v>=n;v-=h)x=qb(v,a[v],a[v+1],x);return x&&Qf(x,x.next)&&(hh(x),x=x.next),x}function Kl(a,n){if(!a)return a;n||(n=a);var s,h=a;do if(s=!1,h.steiner||!Qf(h,h.next)&&Dn(h.prev,h,h.next)!==0)h=h.next;else{if(hh(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function uh(a,n,s,h,f,v,x){if(a){!x&&v&&function($,N,q,Q){var ee=$;do ee.z===0&&(ee.z=Bv(ee.x,ee.y,N,q,Q)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==$);ee.prevZ.nextZ=null,ee.prevZ=null,function(le){var me,ve,Ae,we,Re,Ue,rt,It,Bt=1;do{for(ve=le,le=null,Re=null,Ue=0;ve;){for(Ue++,Ae=ve,rt=0,me=0;me<Bt&&(rt++,Ae=Ae.nextZ);me++);for(It=Bt;rt>0||It>0&&Ae;)rt!==0&&(It===0||!Ae||ve.z<=Ae.z)?(we=ve,ve=ve.nextZ,rt--):(we=Ae,Ae=Ae.nextZ,It--),Re?Re.nextZ=we:le=we,we.prevZ=Re,Re=we;ve=Ae}Re.nextZ=null,Bt*=2}while(Ue>1)}(ee)}(a,h,f,v);for(var S,I,M=a;a.prev!==a.next;)if(S=a.prev,I=a.next,v?Yz(a,h,f,v):Jz(a))n.push(S.i/s|0),n.push(a.i/s|0),n.push(I.i/s|0),hh(a),a=I.next,M=I.next;else if((a=I)===M){x?x===1?uh(a=Qz(Kl(a),n,s),n,s,h,f,v,2):x===2&&eM(a,n,s,h,f,v):uh(Kl(a),n,s,h,f,v,1);break}}}function Jz(a){var n=a.prev,s=a,h=a.next;if(Dn(n,s,h)>=0)return!1;for(var f=n.x,v=s.x,x=h.x,S=n.y,I=s.y,M=h.y,$=f<v?f<x?f:x:v<x?v:x,N=S<I?S<M?S:M:I<M?I:M,q=f>v?f>x?f:x:v>x?v:x,Q=S>I?S>M?S:M:I>M?I:M,ee=h.next;ee!==n;){if(ee.x>=$&&ee.x<=q&&ee.y>=N&&ee.y<=Q&&Qc(f,S,v,I,x,M,ee.x,ee.y)&&Dn(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function Yz(a,n,s,h){var f=a.prev,v=a,x=a.next;if(Dn(f,v,x)>=0)return!1;for(var S=f.x,I=v.x,M=x.x,$=f.y,N=v.y,q=x.y,Q=S<I?S<M?S:M:I<M?I:M,ee=$<N?$<q?$:q:N<q?N:q,le=S>I?S>M?S:M:I>M?I:M,me=$>N?$>q?$:q:N>q?N:q,ve=Bv(Q,ee,n,s,h),Ae=Bv(le,me,n,s,h),we=a.prevZ,Re=a.nextZ;we&&we.z>=ve&&Re&&Re.z<=Ae;){if(we.x>=Q&&we.x<=le&&we.y>=ee&&we.y<=me&&we!==f&&we!==x&&Qc(S,$,I,N,M,q,we.x,we.y)&&Dn(we.prev,we,we.next)>=0||(we=we.prevZ,Re.x>=Q&&Re.x<=le&&Re.y>=ee&&Re.y<=me&&Re!==f&&Re!==x&&Qc(S,$,I,N,M,q,Re.x,Re.y)&&Dn(Re.prev,Re,Re.next)>=0))return!1;Re=Re.nextZ}for(;we&&we.z>=ve;){if(we.x>=Q&&we.x<=le&&we.y>=ee&&we.y<=me&&we!==f&&we!==x&&Qc(S,$,I,N,M,q,we.x,we.y)&&Dn(we.prev,we,we.next)>=0)return!1;we=we.prevZ}for(;Re&&Re.z<=Ae;){if(Re.x>=Q&&Re.x<=le&&Re.y>=ee&&Re.y<=me&&Re!==f&&Re!==x&&Qc(S,$,I,N,M,q,Re.x,Re.y)&&Dn(Re.prev,Re,Re.next)>=0)return!1;Re=Re.nextZ}return!0}function Qz(a,n,s){var h=a;do{var f=h.prev,v=h.next.next;!Qf(f,v)&&Wb(f,h,h.next,v)&&dh(f,v)&&dh(v,f)&&(n.push(f.i/s|0),n.push(h.i/s|0),n.push(v.i/s|0),hh(h),hh(h.next),h=a=v),h=h.next}while(h!==a);return Kl(h)}function eM(a,n,s,h,f,v){var x=a;do{for(var S=x.next.next;S!==x.prev;){if(x.i!==S.i&&oM(x,S)){var I=Gb(x,S);return x=Kl(x,x.next),I=Kl(I,I.next),uh(x,n,s,h,f,v,0),void uh(I,n,s,h,f,v,0)}S=S.next}x=x.next}while(x!==a)}function tM(a,n){return a.x-n.x}function rM(a,n){var s=function(f,v){var x,S=v,I=f.x,M=f.y,$=-1/0;do{if(M<=S.y&&M>=S.next.y&&S.next.y!==S.y){var N=S.x+(M-S.y)*(S.next.x-S.x)/(S.next.y-S.y);if(N<=I&&N>$&&($=N,x=S.x<S.next.x?S:S.next,N===I))return x}S=S.next}while(S!==v);if(!x)return null;var q,Q=x,ee=x.x,le=x.y,me=1/0;S=x;do I>=S.x&&S.x>=ee&&I!==S.x&&Qc(M<le?I:$,M,ee,le,M<le?$:I,M,S.x,S.y)&&(q=Math.abs(M-S.y)/(I-S.x),dh(S,f)&&(q<me||q===me&&(S.x>x.x||S.x===x.x&&nM(x,S)))&&(x=S,me=q)),S=S.next;while(S!==Q);return x}(a,n);if(!s)return n;var h=Gb(s,a);return Kl(h,h.next),Kl(s,s.next)}function nM(a,n){return Dn(a.prev,a,n.prev)<0&&Dn(n.next,a,a.next)<0}function Bv(a,n,s,h,f){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-s)*f|0)|a<<8))|a<<4))|a<<2))|a<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*f|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function iM(a){var n=a,s=a;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==a);return s}function Qc(a,n,s,h,f,v,x,S){return(f-x)*(n-S)>=(a-x)*(v-S)&&(a-x)*(h-S)>=(s-x)*(n-S)&&(s-x)*(v-S)>=(f-x)*(h-S)}function oM(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!function(s,h){var f=s;do{if(f.i!==s.i&&f.next.i!==s.i&&f.i!==h.i&&f.next.i!==h.i&&Wb(f,f.next,s,h))return!0;f=f.next}while(f!==s);return!1}(a,n)&&(dh(a,n)&&dh(n,a)&&function(s,h){var f=s,v=!1,x=(s.x+h.x)/2,S=(s.y+h.y)/2;do f.y>S!=f.next.y>S&&f.next.y!==f.y&&x<(f.next.x-f.x)*(S-f.y)/(f.next.y-f.y)+f.x&&(v=!v),f=f.next;while(f!==s);return v}(a,n)&&(Dn(a.prev,a,n.prev)||Dn(a,n.prev,n))||Qf(a,n)&&Dn(a.prev,a,a.next)>0&&Dn(n.prev,n,n.next)>0)}function Dn(a,n,s){return(n.y-a.y)*(s.x-n.x)-(n.x-a.x)*(s.y-n.y)}function Qf(a,n){return a.x===n.x&&a.y===n.y}function Wb(a,n,s,h){var f=tm(Dn(a,n,s)),v=tm(Dn(a,n,h)),x=tm(Dn(s,h,a)),S=tm(Dn(s,h,n));return f!==v&&x!==S||!(f!==0||!em(a,s,n))||!(v!==0||!em(a,h,n))||!(x!==0||!em(s,a,h))||!(S!==0||!em(s,n,h))}function em(a,n,s){return n.x<=Math.max(a.x,s.x)&&n.x>=Math.min(a.x,s.x)&&n.y<=Math.max(a.y,s.y)&&n.y>=Math.min(a.y,s.y)}function tm(a){return a>0?1:a<0?-1:0}function dh(a,n){return Dn(a.prev,a,a.next)<0?Dn(a,n,a.next)>=0&&Dn(a,a.prev,n)>=0:Dn(a,n,a.prev)<0||Dn(a,a.next,n)<0}function Gb(a,n){var s=new Ov(a.i,a.x,a.y),h=new Ov(n.i,n.x,n.y),f=a.next,v=n.prev;return a.next=n,n.prev=a,s.next=f,f.prev=s,h.next=s,s.prev=h,v.next=h,h.prev=v,h}function qb(a,n,s,h){var f=new Ov(a,n,s);return h?(f.next=h.next,f.prev=h,h.next.prev=f,h.next=f):(f.prev=f,f.next=f),f}function hh(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Ov(a,n,s){this.i=a,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Fv(a,n,s,h){for(var f=0,v=n,x=s-h;v<s;v+=h)f+=(a[x]-a[v])*(a[v+1]+a[x+1]),x=v;return f}$v.exports=Yf,$v.exports.default=Yf,Yf.deviation=function(a,n,s,h){var f=n&&n.length,v=Math.abs(Fv(a,0,f?n[0]*s:a.length,s));if(f)for(var x=0,S=n.length;x<S;x++)v-=Math.abs(Fv(a,n[x]*s,x<S-1?n[x+1]*s:a.length,s));var I=0;for(x=0;x<h.length;x+=3){var M=h[x]*s,$=h[x+1]*s,N=h[x+2]*s;I+=Math.abs((a[M]-a[N])*(a[$+1]-a[M+1])-(a[M]-a[$])*(a[N+1]-a[M+1]))}return v===0&&I===0?0:Math.abs((I-v)/v)},Yf.flatten=function(a){for(var n=a[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,f=0;f<a.length;f++){for(var v=0;v<a[f].length;v++)for(var x=0;x<n;x++)s.vertices.push(a[f][v][x]);f>0&&s.holes.push(h+=a[f-1].length)}return s};var Zb=w($v.exports);function aM(a,n,s,h,f){Kb(a,n,s,h||a.length-1,f||sM)}function Kb(a,n,s,h,f){for(;h>s;){if(h-s>600){var v=h-s+1,x=n-s+1,S=Math.log(v),I=.5*Math.exp(2*S/3),M=.5*Math.sqrt(S*I*(v-I)/v)*(x-v/2<0?-1:1);Kb(a,n,Math.max(s,Math.floor(n-x*I/v+M)),Math.min(h,Math.floor(n+(v-x)*I/v+M)),f)}var $=a[n],N=s,q=h;for(ph(a,s,n),f(a[h],$)>0&&ph(a,s,h);N<q;){for(ph(a,N,q),N++,q--;f(a[N],$)<0;)N++;for(;f(a[q],$)>0;)q--}f(a[s],$)===0?ph(a,s,q):ph(a,++q,h),q<=n&&(s=q+1),n<=q&&(h=q-1)}}function ph(a,n,s){var h=a[n];a[n]=a[s],a[s]=h}function sM(a,n){return a<n?-1:a>n?1:0}function Nv(a,n){const s=a.length;if(s<=1)return[a];const h=[];let f,v;for(let x=0;x<s;x++){const S=Te(a[x]);S!==0&&(a[x].area=Math.abs(S),v===void 0&&(v=S<0),v===S<0?(f&&h.push(f),f=[a[x]]):f.push(a[x]))}if(f&&h.push(f),n>1)for(let x=0;x<h.length;x++)h[x].length<=n||(aM(h[x],n,1,h[x].length-1,lM),h[x]=h[x].slice(0,n));return h}function lM(a,n){return n.area-a.area}function jv(a,n,s){const h=s.patternDependencies;let f=!1;for(const v of n){const x=v.paint.get(`${a}-pattern`);x.isConstant()||(f=!0);const S=x.constantOr(null);S&&(f=!0,h[S.to]=!0,h[S.from]=!0)}return f}function Vv(a,n,s,h,f){const v=f.patternDependencies;for(const x of n){const S=x.paint.get(`${a}-pattern`).value;if(S.kind!=="constant"){let I=S.evaluate({zoom:h-1},s,{},f.availableImages),M=S.evaluate({zoom:h},s,{},f.availableImages),$=S.evaluate({zoom:h+1},s,{},f.availableImages);I=I&&I.name?I.name:I,M=M&&M.name?M.name:M,$=$&&$.name?$.name:$,v[I]=!0,v[M]=!0,v[$]=!0,s.patterns[x.id]={min:I,mid:M,max:$}}}return s}class Uv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xr,this.indexArray=new ai,this.indexArray2=new Vn,this.programConfigurations=new xa(n.layers,n.zoom),this.segments=new sn,this.segments2=new sn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=jv("fill",this.layers,s);const f=this.layers[0].layout.get("fill-sort-key"),v=!f.isConstant(),x=[];for(const{feature:S,id:I,index:M,sourceLayerIndex:$}of n){const N=this.layers[0]._featureFilter.needGeometry,q=Zl(S,N);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),q,h))continue;const Q=v?f.evaluate(q,{},h,s.availableImages):void 0,ee={id:I,properties:S.properties,type:S.type,sourceLayerIndex:$,index:M,geometry:N?q.geometry:ql(S),patterns:{},sortKey:Q};x.push(ee)}v&&x.sort((S,I)=>S.sortKey-I.sortKey);for(const S of x){const{geometry:I,index:M,sourceLayerIndex:$}=S;if(this.hasPattern){const N=Vv("fill",this.layers,S,this.zoom,s);this.patternFeatures.push(N)}else this.addFeature(S,I,M,h,{});s.featureIndex.insert(n[M].feature,I,M,$,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Xz),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,f,v){for(const x of Nv(s,500)){let S=0;for(const Q of x)S+=Q.length;const I=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),M=I.vertexLength,$=[],N=[];for(const Q of x){if(Q.length===0)continue;Q!==x[0]&&N.push($.length/2);const ee=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),le=ee.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(le+Q.length-1,le),$.push(Q[0].x),$.push(Q[0].y);for(let me=1;me<Q.length;me++)this.layoutVertexArray.emplaceBack(Q[me].x,Q[me].y),this.indexArray2.emplaceBack(le+me-1,le+me),$.push(Q[me].x),$.push(Q[me].y);ee.vertexLength+=Q.length,ee.primitiveLength+=Q.length}const q=Zb($,N);for(let Q=0;Q<q.length;Q+=3)this.indexArray.emplaceBack(M+q[Q],M+q[Q+1],M+q[Q+2]);I.vertexLength+=S,I.primitiveLength+=q.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}}let Xb,Jb;Dt("FillBucket",Uv,{omit:["layers","patternFeatures"]});var cM={get paint(){return Jb=Jb||new zn({"fill-antialias":new Ut(Ve.paint_fill["fill-antialias"]),"fill-opacity":new nr(Ve.paint_fill["fill-opacity"]),"fill-color":new nr(Ve.paint_fill["fill-color"]),"fill-outline-color":new nr(Ve.paint_fill["fill-outline-color"]),"fill-translate":new Ut(Ve.paint_fill["fill-translate"]),"fill-translate-anchor":new Ut(Ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new Hl(Ve.paint_fill["fill-pattern"])})},get layout(){return Xb=Xb||new zn({"fill-sort-key":new nr(Ve.layout_fill["fill-sort-key"])})}};class uM extends fo{constructor(n){super(n,cM)}recalculate(n,s){super.recalculate(n,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Uv(n)}queryRadius(){return Kf(this.paint.get("fill-translate"))}queryIntersectsFeature(n,s,h,f,v,x,S){return Db(Xf(n,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),f)}isTileClipped(){return!0}}const dM=gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),hM=gn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:pM}=dM;var Zs={},fM=T,Yb=eu;function eu(a,n,s,h,f){this.properties={},this.extent=s,this.type=0,this._pbf=a,this._geometry=-1,this._keys=h,this._values=f,a.readFields(mM,this,n)}function mM(a,n,s){a==1?n.id=s.readVarint():a==2?function(h,f){for(var v=h.readVarint()+h.pos;h.pos<v;){var x=f._keys[h.readVarint()],S=f._values[h.readVarint()];f.properties[x]=S}}(s,n):a==3?n.type=s.readVarint():a==4&&(n._geometry=s.pos)}function gM(a){for(var n,s,h=0,f=0,v=a.length,x=v-1;f<v;x=f++)h+=((s=a[x]).x-(n=a[f]).x)*(n.y+s.y);return h}eu.types=["Unknown","Point","LineString","Polygon"],eu.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var n,s=a.readVarint()+a.pos,h=1,f=0,v=0,x=0,S=[];a.pos<s;){if(f<=0){var I=a.readVarint();h=7&I,f=I>>3}if(f--,h===1||h===2)v+=a.readSVarint(),x+=a.readSVarint(),h===1&&(n&&S.push(n),n=[]),n.push(new fM(v,x));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&S.push(n),S},eu.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var n=a.readVarint()+a.pos,s=1,h=0,f=0,v=0,x=1/0,S=-1/0,I=1/0,M=-1/0;a.pos<n;){if(h<=0){var $=a.readVarint();s=7&$,h=$>>3}if(h--,s===1||s===2)(f+=a.readSVarint())<x&&(x=f),f>S&&(S=f),(v+=a.readSVarint())<I&&(I=v),v>M&&(M=v);else if(s!==7)throw new Error("unknown command "+s)}return[x,I,S,M]},eu.prototype.toGeoJSON=function(a,n,s){var h,f,v=this.extent*Math.pow(2,s),x=this.extent*a,S=this.extent*n,I=this.loadGeometry(),M=eu.types[this.type];function $(Q){for(var ee=0;ee<Q.length;ee++){var le=Q[ee];Q[ee]=[360*(le.x+x)/v-180,360/Math.PI*Math.atan(Math.exp((180-360*(le.y+S)/v)*Math.PI/180))-90]}}switch(this.type){case 1:var N=[];for(h=0;h<I.length;h++)N[h]=I[h][0];$(I=N);break;case 2:for(h=0;h<I.length;h++)$(I[h]);break;case 3:for(I=function(Q){var ee=Q.length;if(ee<=1)return[Q];for(var le,me,ve=[],Ae=0;Ae<ee;Ae++){var we=gM(Q[Ae]);we!==0&&(me===void 0&&(me=we<0),me===we<0?(le&&ve.push(le),le=[Q[Ae]]):le.push(Q[Ae]))}return le&&ve.push(le),ve}(I),h=0;h<I.length;h++)for(f=0;f<I[h].length;f++)$(I[h][f])}I.length===1?I=I[0]:M="Multi"+M;var q={type:"Feature",geometry:{type:M,coordinates:I},properties:this.properties};return"id"in this&&(q.id=this.id),q};var yM=Yb,Qb=ew;function ew(a,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(vM,this,n),this.length=this._features.length}function vM(a,n,s){a===15?n.version=s.readVarint():a===1?n.name=s.readString():a===5?n.extent=s.readVarint():a===2?n._features.push(s.pos):a===3?n._keys.push(s.readString()):a===4&&n._values.push(function(h){for(var f=null,v=h.readVarint()+h.pos;h.pos<v;){var x=h.readVarint()>>3;f=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}return f}(s))}ew.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var n=this._pbf.readVarint()+this._pbf.pos;return new yM(this._pbf,n,this.extent,this._keys,this._values)};var _M=Qb;function xM(a,n,s){if(a===3){var h=new _M(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}Zs.VectorTile=function(a,n){this.layers=a.readFields(xM,{},n)},Zs.VectorTileFeature=Yb,Zs.VectorTileLayer=Qb;const bM=Zs.VectorTileFeature.types,Hv=Math.pow(2,13);function fh(a,n,s,h,f,v,x,S){a.emplaceBack(n,s,2*Math.floor(h*Hv)+x,f*Hv*2,v*Hv*2,Math.round(S))}class Wv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new vt,this.centroidVertexArray=new dt,this.indexArray=new ai,this.programConfigurations=new xa(n.layers,n.zoom),this.segments=new sn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.features=[],this.hasPattern=jv("fill-extrusion",this.layers,s);for(const{feature:f,id:v,index:x,sourceLayerIndex:S}of n){const I=this.layers[0]._featureFilter.needGeometry,M=Zl(f,I);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),M,h))continue;const $={id:v,sourceLayerIndex:S,index:x,geometry:I?M.geometry:ql(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(Vv("fill-extrusion",this.layers,$,this.zoom,s)):this.addFeature($,$.geometry,x,h,{}),s.featureIndex.insert(f,$.geometry,x,S,this.index,!0)}}addFeatures(n,s,h){for(const f of this.features){const{geometry:v}=f;this.addFeature(f,v,f.index,s,h)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,pM),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,hM.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,h,f,v){const x={x:0,y:0,vertexCount:0};for(const S of Nv(s,500)){let I=0;for(const ee of S)I+=ee.length;let M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ee of S){if(ee.length===0||SM(ee))continue;let le=0;for(let me=0;me<ee.length;me++){const ve=ee[me];if(me>=1){const Ae=ee[me-1];if(!wM(ve,Ae)){M.vertexLength+4>sn.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const we=ve.sub(Ae)._perp()._unit(),Re=Ae.dist(ve);le+Re>32768&&(le=0),fh(this.layoutVertexArray,ve.x,ve.y,we.x,we.y,0,0,le),fh(this.layoutVertexArray,ve.x,ve.y,we.x,we.y,0,1,le),x.x+=2*ve.x,x.y+=2*ve.y,x.vertexCount+=2,le+=Re,fh(this.layoutVertexArray,Ae.x,Ae.y,we.x,we.y,0,0,le),fh(this.layoutVertexArray,Ae.x,Ae.y,we.x,we.y,0,1,le),x.x+=2*Ae.x,x.y+=2*Ae.y,x.vertexCount+=2;const Ue=M.vertexLength;this.indexArray.emplaceBack(Ue,Ue+2,Ue+1),this.indexArray.emplaceBack(Ue+1,Ue+2,Ue+3),M.vertexLength+=4,M.primitiveLength+=2}}}}if(M.vertexLength+I>sn.MAX_VERTEX_ARRAY_LENGTH&&(M=this.segments.prepareSegment(I,this.layoutVertexArray,this.indexArray)),bM[n.type]!=="Polygon")continue;const $=[],N=[],q=M.vertexLength;for(const ee of S)if(ee.length!==0){ee!==S[0]&&N.push($.length/2);for(let le=0;le<ee.length;le++){const me=ee[le];fh(this.layoutVertexArray,me.x,me.y,0,0,1,1,0),x.x+=me.x,x.y+=me.y,x.vertexCount+=1,$.push(me.x),$.push(me.y)}}const Q=Zb($,N);for(let ee=0;ee<Q.length;ee+=3)this.indexArray.emplaceBack(q+Q[ee],q+Q[ee+2],q+Q[ee+1]);M.primitiveLength+=Q.length/3,M.vertexLength+=I}for(let S=0;S<x.vertexCount;S++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}}function wM(a,n){return a.x===n.x&&(a.x<0||a.x>Bn)||a.y===n.y&&(a.y<0||a.y>Bn)}function SM(a){return a.every(n=>n.x<0)||a.every(n=>n.x>Bn)||a.every(n=>n.y<0)||a.every(n=>n.y>Bn)}let tw;Dt("FillExtrusionBucket",Wv,{omit:["layers","features"]});var CM={get paint(){return tw=tw||new zn({"fill-extrusion-opacity":new Ut(Ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new nr(Ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ut(Ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ut(Ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Hl(Ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new nr(Ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new nr(Ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ut(Ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class kM extends fo{constructor(n){super(n,CM)}createBucket(n){return new Wv(n)}queryRadius(){return Kf(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(n,s,h,f,v,x,S,I){const M=Xf(n,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),$=this.paint.get("fill-extrusion-height").evaluate(s,h),N=this.paint.get("fill-extrusion-base").evaluate(s,h),q=function(ee,le,me,ve){const Ae=[];for(const we of ee){const Re=[we.x,we.y,0,1];Jf(Re,Re,le),Ae.push(new z(Re[0]/Re[3],Re[1]/Re[3]))}return Ae}(M,I),Q=function(ee,le,me,ve){const Ae=[],we=[],Re=ve[8]*le,Ue=ve[9]*le,rt=ve[10]*le,It=ve[11]*le,Bt=ve[8]*me,Ct=ve[9]*me,_t=ve[10]*me,ft=ve[11]*me;for(const Rt of ee){const gt=[],ct=[];for(const Jt of Rt){const jt=Jt.x,mr=Jt.y,ln=ve[0]*jt+ve[4]*mr+ve[12],hn=ve[1]*jt+ve[5]*mr+ve[13],Wn=ve[2]*jt+ve[6]*mr+ve[14],go=ve[3]*jt+ve[7]*mr+ve[15],Bi=Wn+rt,On=go+It,li=ln+Bt,fi=hn+Ct,Oi=Wn+_t,Fi=go+ft,Gn=new z((ln+Re)/On,(hn+Ue)/On);Gn.z=Bi/On,gt.push(Gn);const qn=new z(li/Fi,fi/Fi);qn.z=Oi/Fi,ct.push(qn)}Ae.push(gt),we.push(ct)}return[Ae,we]}(f,N,$,I);return function(ee,le,me){let ve=1/0;Db(me,le)&&(ve=rw(me,le[0]));for(let Ae=0;Ae<le.length;Ae++){const we=le[Ae],Re=ee[Ae];for(let Ue=0;Ue<we.length-1;Ue++){const rt=we[Ue],It=[rt,we[Ue+1],Re[Ue+1],Re[Ue],rt];Mb(me,It)&&(ve=Math.min(ve,rw(me,It)))}}return ve!==1/0&&ve}(Q[0],Q[1],q)}}function mh(a,n){return a.x*n.x+a.y*n.y}function rw(a,n){if(a.length===1){let s=0;const h=n[s++];let f;for(;!f||h.equals(f);)if(f=n[s++],!f)return 1/0;for(;s<n.length;s++){const v=n[s],x=a[0],S=f.sub(h),I=v.sub(h),M=x.sub(h),$=mh(S,S),N=mh(S,I),q=mh(I,I),Q=mh(M,S),ee=mh(M,I),le=$*q-N*N,me=(q*Q-N*ee)/le,ve=($*ee-N*Q)/le,Ae=h.z*(1-me-ve)+f.z*me+v.z*ve;if(isFinite(Ae))return Ae}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}const IM=gn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:TM}=IM,PM=gn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:EM}=PM,zM=Zs.VectorTileFeature.types,MM=Math.cos(Math.PI/180*37.5),nw=Math.pow(2,14)/.5;class Gv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new ir,this.layoutVertexArray2=new Nt,this.indexArray=new ai,this.programConfigurations=new xa(n.layers,n.zoom),this.segments=new sn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h){this.hasPattern=jv("line",this.layers,s);const f=this.layers[0].layout.get("line-sort-key"),v=!f.isConstant(),x=[];for(const{feature:S,id:I,index:M,sourceLayerIndex:$}of n){const N=this.layers[0]._featureFilter.needGeometry,q=Zl(S,N);if(!this.layers[0]._featureFilter.filter(new an(this.zoom),q,h))continue;const Q=v?f.evaluate(q,{},h):void 0,ee={id:I,properties:S.properties,type:S.type,sourceLayerIndex:$,index:M,geometry:N?q.geometry:ql(S),patterns:{},sortKey:Q};x.push(ee)}v&&x.sort((S,I)=>S.sortKey-I.sortKey);for(const S of x){const{geometry:I,index:M,sourceLayerIndex:$}=S;if(this.hasPattern){const N=Vv("line",this.layers,S,this.zoom,s);this.patternFeatures.push(N)}else this.addFeature(S,I,M,h,{});s.featureIndex.insert(n[M].feature,I,M,$,this.index)}}update(n,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h)}addFeatures(n,s,h){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,EM)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,TM),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,f,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(n,{}),I=x.get("line-cap"),M=x.get("line-miter-limit"),$=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const N of s)this.addLine(N,n,S,I,M,$);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,v,f)}addLine(n,s,h,f,v,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ve=0;ve<n.length-1;ve++)this.totalDistance+=n[ve].dist(n[ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=zM[s.type]==="Polygon";let I=n.length;for(;I>=2&&n[I-1].equals(n[I-2]);)I--;let M=0;for(;M<I-1&&n[M].equals(n[M+1]);)M++;if(I<(S?3:2))return;h==="bevel"&&(v=1.05);const $=this.overscaling<=16?15*Bn/(512*this.overscaling):0,N=this.segments.prepareSegment(10*I,this.layoutVertexArray,this.indexArray);let q,Q,ee,le,me;this.e1=this.e2=-1,S&&(q=n[I-2],me=n[M].sub(q)._unit()._perp());for(let ve=M;ve<I;ve++){if(ee=ve===I-1?S?n[M+1]:void 0:n[ve+1],ee&&n[ve].equals(ee))continue;me&&(le=me),q&&(Q=q),q=n[ve],me=ee?ee.sub(q)._unit()._perp():le,le=le||me;let Ae=le.add(me);Ae.x===0&&Ae.y===0||Ae._unit();const we=le.x*me.x+le.y*me.y,Re=Ae.x*me.x+Ae.y*me.y,Ue=Re!==0?1/Re:1/0,rt=2*Math.sqrt(2-2*Re),It=Re<MM&&Q&&ee,Bt=le.x*me.y-le.y*me.x>0;if(It&&ve>M){const ft=q.dist(Q);if(ft>2*$){const Rt=q.sub(q.sub(Q)._mult($/ft)._round());this.updateDistance(Q,Rt),this.addCurrentVertex(Rt,le,0,0,N),Q=Rt}}const Ct=Q&&ee;let _t=Ct?h:S?"butt":f;if(Ct&&_t==="round"&&(Ue<x?_t="miter":Ue<=2&&(_t="fakeround")),_t==="miter"&&Ue>v&&(_t="bevel"),_t==="bevel"&&(Ue>2&&(_t="flipbevel"),Ue<v&&(_t="miter")),Q&&this.updateDistance(Q,q),_t==="miter")Ae._mult(Ue),this.addCurrentVertex(q,Ae,0,0,N);else if(_t==="flipbevel"){if(Ue>100)Ae=me.mult(-1);else{const ft=Ue*le.add(me).mag()/le.sub(me).mag();Ae._perp()._mult(ft*(Bt?-1:1))}this.addCurrentVertex(q,Ae,0,0,N),this.addCurrentVertex(q,Ae.mult(-1),0,0,N)}else if(_t==="bevel"||_t==="fakeround"){const ft=-Math.sqrt(Ue*Ue-1),Rt=Bt?ft:0,gt=Bt?0:ft;if(Q&&this.addCurrentVertex(q,le,Rt,gt,N),_t==="fakeround"){const ct=Math.round(180*rt/Math.PI/20);for(let Jt=1;Jt<ct;Jt++){let jt=Jt/ct;if(jt!==.5){const ln=jt-.5;jt+=jt*ln*(jt-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*ln*ln+(.848013+we*(.215638*we-1.06021)))}const mr=me.sub(le)._mult(jt)._add(le)._unit()._mult(Bt?-1:1);this.addHalfVertex(q,mr.x,mr.y,!1,Bt,0,N)}}ee&&this.addCurrentVertex(q,me,-Rt,-gt,N)}else if(_t==="butt")this.addCurrentVertex(q,Ae,0,0,N);else if(_t==="square"){const ft=Q?1:-1;this.addCurrentVertex(q,Ae,ft,ft,N)}else _t==="round"&&(Q&&(this.addCurrentVertex(q,le,0,0,N),this.addCurrentVertex(q,le,1,1,N,!0)),ee&&(this.addCurrentVertex(q,me,-1,-1,N,!0),this.addCurrentVertex(q,me,0,0,N)));if(It&&ve<I-1){const ft=q.dist(ee);if(ft>2*$){const Rt=q.add(ee.sub(q)._mult($/ft)._round());this.updateDistance(q,Rt),this.addCurrentVertex(Rt,me,0,0,N),q=Rt}}}}addCurrentVertex(n,s,h,f,v,x=!1){const S=s.y*f-s.x,I=-s.y-s.x*f;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,x,!1,h,v),this.addHalfVertex(n,S,I,x,!0,-f,v),this.distance>nw/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(n,s,h,f,v,x))}addHalfVertex({x:n,y:s},h,f,v,x,S,I){const M=.5*(this.lineClips?this.scaledDistance*(nw-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(v?1:0),(s<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*f)+128,1+(S===0?0:S<0?-1:1)|(63&M)<<2,M>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const $=I.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,$),I.primitiveLength++),x?this.e2=$:this.e1=$}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}let iw,ow;Dt("LineBucket",Gv,{omit:["layers","patternFeatures"]});var aw={get paint(){return ow=ow||new zn({"line-opacity":new nr(Ve.paint_line["line-opacity"]),"line-color":new nr(Ve.paint_line["line-color"]),"line-translate":new Ut(Ve.paint_line["line-translate"]),"line-translate-anchor":new Ut(Ve.paint_line["line-translate-anchor"]),"line-width":new nr(Ve.paint_line["line-width"]),"line-gap-width":new nr(Ve.paint_line["line-gap-width"]),"line-offset":new nr(Ve.paint_line["line-offset"]),"line-blur":new nr(Ve.paint_line["line-blur"]),"line-dasharray":new Yd(Ve.paint_line["line-dasharray"]),"line-pattern":new Hl(Ve.paint_line["line-pattern"]),"line-gradient":new Qd(Ve.paint_line["line-gradient"])})},get layout(){return iw=iw||new zn({"line-cap":new Ut(Ve.layout_line["line-cap"]),"line-join":new nr(Ve.layout_line["line-join"]),"line-miter-limit":new Ut(Ve.layout_line["line-miter-limit"]),"line-round-limit":new Ut(Ve.layout_line["line-round-limit"]),"line-sort-key":new nr(Ve.layout_line["line-sort-key"])})}};class DM extends nr{possiblyEvaluate(n,s){return s=new an(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(n,s)}evaluate(n,s,h,f){return s=Z({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(n,s,h,f)}}let rm;class AM extends fo{constructor(n){super(n,aw),this.gradientVersion=0,rm||(rm=new DM(aw.paint.properties["line-width"].specification),rm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Fa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(n,s){super.recalculate(n,s),this.paint._values["line-floorwidth"]=rm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Gv(n)}queryRadius(n){const s=n,h=sw(sh("line-width",this,s),sh("line-gap-width",this,s)),f=sh("line-offset",this,s);return h/2+Math.abs(f)+Kf(this.paint.get("line-translate"))}queryIntersectsFeature(n,s,h,f,v,x,S){const I=Xf(n,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),M=S/2*sw(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),$=this.paint.get("line-offset").evaluate(s,h);return $&&(f=function(N,q){const Q=[];for(let ee=0;ee<N.length;ee++){const le=N[ee],me=[];for(let ve=0;ve<le.length;ve++){const Ae=le[ve-1],we=le[ve],Re=le[ve+1],Ue=ve===0?new z(0,0):we.sub(Ae)._unit()._perp(),rt=ve===le.length-1?new z(0,0):Re.sub(we)._unit()._perp(),It=Ue._add(rt)._unit(),Bt=It.x*rt.x+It.y*rt.y;Bt!==0&&It._mult(1/Bt),me.push(It._mult(q)._add(we))}Q.push(me)}return Q}(f,$*S)),function(N,q,Q){for(let ee=0;ee<q.length;ee++){const le=q[ee];if(N.length>=3){for(let me=0;me<le.length;me++)if(Jc(N,le[me]))return!0}if(Fz(N,le,Q))return!0}return!1}(I,f,M)}isTileClipped(){return!0}}function sw(a,n){return n>0?n+2*a:a}const RM=gn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),LM=gn([{name:"a_projected_pos",components:3,type:"Float32"}],4);gn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const $M=gn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);gn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const lw=gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),BM=gn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function OM(a,n,s){return a.sections.forEach(h=>{h.text=function(f,v,x){const S=v.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?f=f.toLocaleUpperCase():S==="lowercase"&&(f=f.toLocaleLowerCase()),Qi.applyArabicShaping&&(f=Qi.applyArabicShaping(f)),f}(h.text,n,s)}),a}gn([{name:"triangle",components:3,type:"Uint16"}]),gn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),gn([{type:"Float32",name:"offsetX"}]),gn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),gn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const gh={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Hn=24,cw=Zr,uw=function(a,n,s,h,f){var v,x,S=8*f-h-1,I=(1<<S)-1,M=I>>1,$=-7,N=f-1,q=-1,Q=a[n+N];for(N+=q,v=Q&(1<<-$)-1,Q>>=-$,$+=S;$>0;v=256*v+a[n+N],N+=q,$-=8);for(x=v&(1<<-$)-1,v>>=-$,$+=h;$>0;x=256*x+a[n+N],N+=q,$-=8);if(v===0)v=1-M;else{if(v===I)return x?NaN:1/0*(Q?-1:1);x+=Math.pow(2,h),v-=M}return(Q?-1:1)*x*Math.pow(2,v-h)},dw=function(a,n,s,h,f,v){var x,S,I,M=8*v-f-1,$=(1<<M)-1,N=$>>1,q=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,Q=0,ee=1,le=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(S=isNaN(n)?1:0,x=$):(x=Math.floor(Math.log(n)/Math.LN2),n*(I=Math.pow(2,-x))<1&&(x--,I*=2),(n+=x+N>=1?q/I:q*Math.pow(2,1-N))*I>=2&&(x++,I/=2),x+N>=$?(S=0,x=$):x+N>=1?(S=(n*I-1)*Math.pow(2,f),x+=N):(S=n*Math.pow(2,N-1)*Math.pow(2,f),x=0));f>=8;a[s+Q]=255&S,Q+=ee,S/=256,f-=8);for(x=x<<f|S,M+=f;M>0;a[s+Q]=255&x,Q+=ee,x/=256,M-=8);a[s+Q-ee]|=128*le};function Zr(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Zr.Varint=0,Zr.Fixed64=1,Zr.Bytes=2,Zr.Fixed32=5;var qv=4294967296,hw=1/qv,pw=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ms(a){return a.type===Zr.Bytes?a.readVarint()+a.pos:a.pos+1}function tu(a,n,s){return s?4294967296*n+(a>>>0):4294967296*(n>>>0)+(a>>>0)}function fw(a,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var f=s.pos-1;f>=a;f--)s.buf[f+h]=s.buf[f]}function FM(a,n){for(var s=0;s<a.length;s++)n.writeVarint(a[s])}function NM(a,n){for(var s=0;s<a.length;s++)n.writeSVarint(a[s])}function jM(a,n){for(var s=0;s<a.length;s++)n.writeFloat(a[s])}function VM(a,n){for(var s=0;s<a.length;s++)n.writeDouble(a[s])}function UM(a,n){for(var s=0;s<a.length;s++)n.writeBoolean(a[s])}function HM(a,n){for(var s=0;s<a.length;s++)n.writeFixed32(a[s])}function WM(a,n){for(var s=0;s<a.length;s++)n.writeSFixed32(a[s])}function GM(a,n){for(var s=0;s<a.length;s++)n.writeFixed64(a[s])}function qM(a,n){for(var s=0;s<a.length;s++)n.writeSFixed64(a[s])}function nm(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+16777216*a[n+3]}function ru(a,n,s){a[s]=n,a[s+1]=n>>>8,a[s+2]=n>>>16,a[s+3]=n>>>24}function mw(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+(a[n+3]<<24)}Zr.prototype={destroy:function(){this.buf=null},readFields:function(a,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),f=h>>3,v=this.pos;this.type=7&h,a(f,n,this),this.pos===v&&this.skip(h)}return n},readMessage:function(a,n){return this.readFields(a,n,this.readVarint()+this.pos)},readFixed32:function(){var a=nm(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=mw(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=nm(this.buf,this.pos)+nm(this.buf,this.pos+4)*qv;return this.pos+=8,a},readSFixed64:function(){var a=nm(this.buf,this.pos)+mw(this.buf,this.pos+4)*qv;return this.pos+=8,a},readFloat:function(){var a=uw(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=uw(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(f,v,x){var S,I,M=x.buf;if(S=(112&(I=M[x.pos++]))>>4,I<128||(S|=(127&(I=M[x.pos++]))<<3,I<128)||(S|=(127&(I=M[x.pos++]))<<10,I<128)||(S|=(127&(I=M[x.pos++]))<<17,I<128)||(S|=(127&(I=M[x.pos++]))<<24,I<128)||(S|=(1&(I=M[x.pos++]))<<31,I<128))return tu(f,S,v);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,n=this.pos;return this.pos=a,a-n>=12&&pw?function(s,h,f){return pw.decode(s.subarray(h,f))}(this.buf,n,a):function(s,h,f){for(var v="",x=h;x<f;){var S,I,M,$=s[x],N=null,q=$>239?4:$>223?3:$>191?2:1;if(x+q>f)break;q===1?$<128&&(N=$):q===2?(192&(S=s[x+1]))==128&&(N=(31&$)<<6|63&S)<=127&&(N=null):q===3?(I=s[x+2],(192&(S=s[x+1]))==128&&(192&I)==128&&((N=(15&$)<<12|(63&S)<<6|63&I)<=2047||N>=55296&&N<=57343)&&(N=null)):q===4&&(I=s[x+2],M=s[x+3],(192&(S=s[x+1]))==128&&(192&I)==128&&(192&M)==128&&((N=(15&$)<<18|(63&S)<<12|(63&I)<<6|63&M)<=65535||N>=1114112)&&(N=null)),N===null?(N=65533,q=1):N>65535&&(N-=65536,v+=String.fromCharCode(N>>>10&1023|55296),N=56320|1023&N),v+=String.fromCharCode(N),x+=q}return v}(this.buf,n,a)},readBytes:function(){var a=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,a);return this.pos=a,n},readPackedVarint:function(a,n){if(this.type!==Zr.Bytes)return a.push(this.readVarint(n));var s=ms(this);for(a=a||[];this.pos<s;)a.push(this.readVarint(n));return a},readPackedSVarint:function(a){if(this.type!==Zr.Bytes)return a.push(this.readSVarint());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Zr.Bytes)return a.push(this.readBoolean());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Zr.Bytes)return a.push(this.readFloat());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Zr.Bytes)return a.push(this.readDouble());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Zr.Bytes)return a.push(this.readFixed32());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Zr.Bytes)return a.push(this.readSFixed32());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Zr.Bytes)return a.push(this.readFixed64());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Zr.Bytes)return a.push(this.readSFixed64());var n=ms(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed64());return a},skip:function(a){var n=7&a;if(n===Zr.Varint)for(;this.buf[this.pos++]>127;);else if(n===Zr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Zr.Fixed32)this.pos+=4;else{if(n!==Zr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(a,n){this.writeVarint(a<<3|n)},realloc:function(a){for(var n=this.length||16;n<this.pos+a;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),ru(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),ru(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),ru(this.buf,-1&a,this.pos),ru(this.buf,Math.floor(a*hw),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),ru(this.buf,-1&a,this.pos),ru(this.buf,Math.floor(a*hw),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(n,s){var h,f;if(n>=0?(h=n%4294967296|0,f=n/4294967296|0):(f=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,f=f+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(v,x,S){S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,v>>>=7,S.buf[S.pos++]=127&v|128,S.buf[S.pos]=127&(v>>>=7)}(h,0,s),function(v,x){var S=(7&v)<<4;x.buf[x.pos++]|=S|((v>>>=3)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v|((v>>>=7)?128:0),v&&(x.buf[x.pos++]=127&v)))))}(f,s)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var n=this.pos;this.pos=function(h,f,v){for(var x,S,I=0;I<f.length;I++){if((x=f.charCodeAt(I))>55295&&x<57344){if(!S){x>56319||I+1===f.length?(h[v++]=239,h[v++]=191,h[v++]=189):S=x;continue}if(x<56320){h[v++]=239,h[v++]=191,h[v++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(h[v++]=239,h[v++]=191,h[v++]=189,S=null);x<128?h[v++]=x:(x<2048?h[v++]=x>>6|192:(x<65536?h[v++]=x>>12|224:(h[v++]=x>>18|240,h[v++]=x>>12&63|128),h[v++]=x>>6&63|128),h[v++]=63&x|128)}return v}(this.buf,a,this.pos);var s=this.pos-n;s>=128&&fw(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(a){this.realloc(4),dw(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),dw(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var n=a.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=a[s]},writeRawMessage:function(a,n){this.pos++;var s=this.pos;a(n,this);var h=this.pos-s;h>=128&&fw(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(a,n,s){this.writeTag(a,Zr.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(a,n){n.length&&this.writeMessage(a,FM,n)},writePackedSVarint:function(a,n){n.length&&this.writeMessage(a,NM,n)},writePackedBoolean:function(a,n){n.length&&this.writeMessage(a,UM,n)},writePackedFloat:function(a,n){n.length&&this.writeMessage(a,jM,n)},writePackedDouble:function(a,n){n.length&&this.writeMessage(a,VM,n)},writePackedFixed32:function(a,n){n.length&&this.writeMessage(a,HM,n)},writePackedSFixed32:function(a,n){n.length&&this.writeMessage(a,WM,n)},writePackedFixed64:function(a,n){n.length&&this.writeMessage(a,GM,n)},writePackedSFixed64:function(a,n){n.length&&this.writeMessage(a,qM,n)},writeBytesField:function(a,n){this.writeTag(a,Zr.Bytes),this.writeBytes(n)},writeFixed32Field:function(a,n){this.writeTag(a,Zr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(a,n){this.writeTag(a,Zr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(a,n){this.writeTag(a,Zr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(a,n){this.writeTag(a,Zr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(a,n){this.writeTag(a,Zr.Varint),this.writeVarint(n)},writeSVarintField:function(a,n){this.writeTag(a,Zr.Varint),this.writeSVarint(n)},writeStringField:function(a,n){this.writeTag(a,Zr.Bytes),this.writeString(n)},writeFloatField:function(a,n){this.writeTag(a,Zr.Fixed32),this.writeFloat(n)},writeDoubleField:function(a,n){this.writeTag(a,Zr.Fixed64),this.writeDouble(n)},writeBooleanField:function(a,n){this.writeVarintField(a,!!n)}};var Zv=w(cw);const Kv=3;function ZM(a,n,s){a===1&&s.readMessage(KM,n)}function KM(a,n,s){if(a===3){const{id:h,bitmap:f,width:v,height:x,left:S,top:I,advance:M}=s.readMessage(XM,{});n.push({id:h,bitmap:new ch({width:v+2*Kv,height:x+2*Kv},f),metrics:{width:v,height:x,left:S,top:I,advance:M}})}}function XM(a,n,s){a===1?n.id=s.readVarint():a===2?n.bitmap=s.readBytes():a===3?n.width=s.readVarint():a===4?n.height=s.readVarint():a===5?n.left=s.readSVarint():a===6?n.top=s.readSVarint():a===7&&(n.advance=s.readVarint())}const gw=Kv;function yw(a){let n=0,s=0;for(const x of a)n+=x.w*x.h,s=Math.max(s,x.w);a.sort((x,S)=>S.h-x.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let f=0,v=0;for(const x of a)for(let S=h.length-1;S>=0;S--){const I=h[S];if(!(x.w>I.w||x.h>I.h)){if(x.x=I.x,x.y=I.y,v=Math.max(v,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===I.w&&x.h===I.h){const M=h.pop();S<h.length&&(h[S]=M)}else x.h===I.h?(I.x+=x.w,I.w-=x.w):x.w===I.w?(I.y+=x.h,I.h-=x.h):(h.push({x:I.x+x.w,y:I.y,w:I.w-x.w,h:x.h}),I.y+=x.h,I.h-=x.h);break}}return{w:f,h:v,fill:n/(f*v)||0}}const to=1;class Xv{constructor(n,{pixelRatio:s,version:h,stretchX:f,stretchY:v,content:x}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=f,this.stretchY=v,this.content=x,this.version=h}get tl(){return[this.paddedRect.x+to,this.paddedRect.y+to]}get br(){return[this.paddedRect.x+this.paddedRect.w-to,this.paddedRect.y+this.paddedRect.h-to]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*to)/this.pixelRatio,(this.paddedRect.h-2*to)/this.pixelRatio]}}class vw{constructor(n,s){const h={},f={};this.haveRenderCallbacks=[];const v=[];this.addImages(n,h,v),this.addImages(s,f,v);const{w:x,h:S}=yw(v),I=new Io({width:x||1,height:S||1});for(const M in n){const $=n[M],N=h[M].paddedRect;Io.copy($.data,I,{x:0,y:0},{x:N.x+to,y:N.y+to},$.data)}for(const M in s){const $=s[M],N=f[M].paddedRect,q=N.x+to,Q=N.y+to,ee=$.data.width,le=$.data.height;Io.copy($.data,I,{x:0,y:0},{x:q,y:Q},$.data),Io.copy($.data,I,{x:0,y:le-1},{x:q,y:Q-1},{width:ee,height:1}),Io.copy($.data,I,{x:0,y:0},{x:q,y:Q+le},{width:ee,height:1}),Io.copy($.data,I,{x:ee-1,y:0},{x:q-1,y:Q},{width:1,height:le}),Io.copy($.data,I,{x:0,y:0},{x:q+ee,y:Q},{width:1,height:le})}this.image=I,this.iconPositions=h,this.patternPositions=f}addImages(n,s,h){for(const f in n){const v=n[f],x={x:0,y:0,w:v.data.width+2*to,h:v.data.height+2*to};h.push(x),s[f]=new Xv(x,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[f,v]=n.tl;h.update(s.data,void 0,{x:f,y:v})}}var Ks;Dt("ImagePosition",Xv),Dt("ImageAtlas",vw),l.ai=void 0,(Ks=l.ai||(l.ai={}))[Ks.none=0]="none",Ks[Ks.horizontal=1]="horizontal",Ks[Ks.vertical=2]="vertical",Ks[Ks.horizontalOnly=3]="horizontalOnly";const yh=-17;class vh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new vh;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new vh;return s.imageName=n,s}}class nu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new nu;for(let f=0;f<n.sections.length;f++){const v=n.sections[f];v.image?h.addImageSection(v):h.addTextSection(v,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let h=0;h<n.length;h++){const f=n.charCodeAt(h+1)||null,v=n.charCodeAt(h-1)||null;s+=f&&Of(f)&&!gh[n[h+1]]||v&&Of(v)&&!gh[n[h-1]]||!gh[n[h]]?n[h]:gh[n[h]]}return s}(this.text)}trim(){let n=0;for(let h=0;h<this.text.length&&om[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&om[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new nu;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(vh.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let f=0;f<n.text.length;++f)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void Ye("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(vh.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Ye("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function im(a,n,s,h,f,v,x,S,I,M,$,N,q,Q,ee,le){const me=nu.fromFeature(a,f);let ve;N===l.ai.vertical&&me.verticalizePunctuation();const{processBidirectionalText:Ae,processStyledBidirectionalText:we}=Qi;if(Ae&&me.sections.length===1){ve=[];const rt=Ae(me.toString(),Jv(me,M,v,n,h,Q,ee));for(const It of rt){const Bt=new nu;Bt.text=It,Bt.sections=me.sections;for(let Ct=0;Ct<It.length;Ct++)Bt.sectionIndex.push(0);ve.push(Bt)}}else if(we){ve=[];const rt=we(me.text,me.sectionIndex,Jv(me,M,v,n,h,Q,ee));for(const It of rt){const Bt=new nu;Bt.text=It[0],Bt.sectionIndex=It[1],Bt.sections=me.sections,ve.push(Bt)}}else ve=function(rt,It){const Bt=[],Ct=rt.text;let _t=0;for(const ft of It)Bt.push(rt.substring(_t,ft)),_t=ft;return _t<Ct.length&&Bt.push(rt.substring(_t,Ct.length)),Bt}(me,Jv(me,M,v,n,h,Q,ee));const Re=[],Ue={positionedLines:Re,text:me.toString(),top:$[1],bottom:$[1],left:$[0],right:$[0],writingMode:N,iconsInText:!1,verticalizable:!1};return function(rt,It,Bt,Ct,_t,ft,Rt,gt,ct,Jt,jt,mr){let ln=0,hn=yh,Wn=0,go=0;const Bi=gt==="right"?1:gt==="left"?0:.5;let On=0;for(const Gn of _t){Gn.trim();const qn=Gn.getMaxScale(),wi=(qn-1)*Hn,Ni={positionedGlyphs:[],lineOffset:0};rt.positionedLines[On]=Ni;const Si=Ni.positionedGlyphs;let ro=0;if(!Gn.length()){hn+=ft,++On;continue}for(let Zn=0;Zn<Gn.length();Zn++){const wr=Gn.getSection(Zn),Ci=Gn.getSectionIndex(Zn),mi=Gn.getCharCode(Zn);let Kn=0,Jo=null,ba=null,wa=null,gs=Hn;const Yo=!(ct===l.ai.horizontal||!jt&&!Hd(mi)||jt&&(om[mi]||(li=mi,kt.Arabic(li)||kt["Arabic Supplement"](li)||kt["Arabic Extended-A"](li)||kt["Arabic Presentation Forms-A"](li)||kt["Arabic Presentation Forms-B"](li))));if(wr.imageName){const Po=Ct[wr.imageName];if(!Po)continue;wa=wr.imageName,rt.iconsInText=rt.iconsInText||!0,ba=Po.paddedRect;const io=Po.displaySize;wr.scale=wr.scale*Hn/mr,Jo={width:io[0],height:io[1],left:to,top:-gw,advance:Yo?io[1]:io[0]},Kn=wi+(Hn-io[1]*wr.scale),gs=Jo.advance;const ys=Yo?io[0]*wr.scale-Hn*qn:io[1]*wr.scale-Hn*qn;ys>0&&ys>ro&&(ro=ys)}else{const Po=Bt[wr.fontStack],io=Po&&Po[mi];if(io&&io.rect)ba=io.rect,Jo=io.metrics;else{const ys=It[wr.fontStack],Sh=ys&&ys[mi];if(!Sh)continue;Jo=Sh.metrics}Kn=(qn-wr.scale)*Hn}Yo?(rt.verticalizable=!0,Si.push({glyph:mi,imageName:wa,x:ln,y:hn+Kn,vertical:Yo,scale:wr.scale,fontStack:wr.fontStack,sectionIndex:Ci,metrics:Jo,rect:ba}),ln+=gs*wr.scale+Jt):(Si.push({glyph:mi,imageName:wa,x:ln,y:hn+Kn,vertical:Yo,scale:wr.scale,fontStack:wr.fontStack,sectionIndex:Ci,metrics:Jo,rect:ba}),ln+=Jo.advance*wr.scale+Jt)}Si.length!==0&&(Wn=Math.max(ln-Jt,Wn),QM(Si,0,Si.length-1,Bi,ro)),ln=0;const no=ft*qn+ro;Ni.lineOffset=Math.max(ro,wi),hn+=no,go=Math.max(no,go),++On}var li;const fi=hn-yh,{horizontalAlign:Oi,verticalAlign:Fi}=Yv(Rt);(function(Gn,qn,wi,Ni,Si,ro,no,Zn,wr){const Ci=(qn-wi)*Si;let mi=0;mi=ro!==no?-Zn*Ni-yh:(-Ni*wr+.5)*no;for(const Kn of Gn)for(const Jo of Kn.positionedGlyphs)Jo.x+=Ci,Jo.y+=mi})(rt.positionedLines,Bi,Oi,Fi,Wn,go,ft,fi,_t.length),rt.top+=-Fi*fi,rt.bottom=rt.top+fi,rt.left+=-Oi*Wn,rt.right=rt.left+Wn}(Ue,n,s,h,ve,x,S,I,N,M,q,le),!function(rt){for(const It of rt)if(It.positionedGlyphs.length!==0)return!1;return!0}(Re)&&Ue}const om={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},JM={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function _w(a,n,s,h,f,v){if(n.imageName){const x=h[n.imageName];return x?x.displaySize[0]*n.scale*Hn/v+f:0}{const x=s[n.fontStack],S=x&&x[a];return S?S.metrics.advance*n.scale+f:0}}function xw(a,n,s,h){const f=Math.pow(a-n,2);return h?a<n?f/2:2*f:f+Math.abs(s)*s}function YM(a,n,s){let h=0;return a===10&&(h-=1e4),s&&(h+=150),a!==40&&a!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function bw(a,n,s,h,f,v){let x=null,S=xw(n,s,f,v);for(const I of h){const M=xw(n-I.x,s,f,v)+I.badness;M<=S&&(x=I,S=M)}return{index:a,x:n,priorBreak:x,badness:S}}function ww(a){return a?ww(a.priorBreak).concat(a.index):[]}function Jv(a,n,s,h,f,v,x){if(v!=="point")return[];if(!a)return[];const S=[],I=function(q,Q,ee,le,me,ve){let Ae=0;for(let we=0;we<q.length();we++){const Re=q.getSection(we);Ae+=_w(q.getCharCode(we),Re,le,me,Q,ve)}return Ae/Math.max(1,Math.ceil(Ae/ee))}(a,n,s,h,f,x),M=a.text.indexOf("​")>=0;let $=0;for(let q=0;q<a.length();q++){const Q=a.getSection(q),ee=a.getCharCode(q);if(om[ee]||($+=_w(ee,Q,h,f,n,x)),q<a.length()-1){const le=!((N=ee)<11904||!(kt["Bopomofo Extended"](N)||kt.Bopomofo(N)||kt["CJK Compatibility Forms"](N)||kt["CJK Compatibility Ideographs"](N)||kt["CJK Compatibility"](N)||kt["CJK Radicals Supplement"](N)||kt["CJK Strokes"](N)||kt["CJK Symbols and Punctuation"](N)||kt["CJK Unified Ideographs Extension A"](N)||kt["CJK Unified Ideographs"](N)||kt["Enclosed CJK Letters and Months"](N)||kt["Halfwidth and Fullwidth Forms"](N)||kt.Hiragana(N)||kt["Ideographic Description Characters"](N)||kt["Kangxi Radicals"](N)||kt["Katakana Phonetic Extensions"](N)||kt.Katakana(N)||kt["Vertical Forms"](N)||kt["Yi Radicals"](N)||kt["Yi Syllables"](N)));(JM[ee]||le||Q.imageName)&&S.push(bw(q+1,$,I,S,YM(ee,a.getCharCode(q+1),le&&M),!1))}}var N;return ww(bw(a.length(),$,I,S,0,!0))}function Yv(a){let n=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function QM(a,n,s,h,f){if(!h&&!f)return;const v=a[s],x=(a[s].x+v.metrics.advance*v.scale)*h;for(let S=n;S<=s;S++)a[S].x-=x,a[S].y+=f}function eD(a,n,s){const{horizontalAlign:h,verticalAlign:f}=Yv(s),v=n[0]-a.displaySize[0]*h,x=n[1]-a.displaySize[1]*f;return{image:a,top:x,bottom:x+a.displaySize[1],left:v,right:v+a.displaySize[0]}}function Sw(a,n,s,h,f,v){const x=a.image;let S;if(x.content){const me=x.content,ve=x.pixelRatio||1;S=[me[0]/ve,me[1]/ve,x.displaySize[0]-me[2]/ve,x.displaySize[1]-me[3]/ve]}const I=n.left*v,M=n.right*v;let $,N,q,Q;s==="width"||s==="both"?(Q=f[0]+I-h[3],N=f[0]+M+h[1]):(Q=f[0]+(I+M-x.displaySize[0])/2,N=Q+x.displaySize[0]);const ee=n.top*v,le=n.bottom*v;return s==="height"||s==="both"?($=f[1]+ee-h[0],q=f[1]+le+h[2]):($=f[1]+(ee+le-x.displaySize[1])/2,q=$+x.displaySize[1]),{image:x,top:$,right:N,bottom:q,left:Q,collisionPadding:S}}const _h=255,Ha=128,Xs=_h*Ha;function Cw(a,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new an(a+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:f}=s;let v=0;for(;v<h.length&&h[v]<=a;)v++;v=Math.max(0,v-1);let x=v;for(;x<h.length&&h[x]<a+1;)x++;x=Math.min(h.length-1,x);const S=h[v],I=h[x];return s.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:I,interpolationType:f}:{kind:"camera",minZoom:S,maxZoom:I,minSize:s.evaluate(new an(S)),maxSize:s.evaluate(new an(I)),interpolationType:f}}}function Qv(a,n,s){let h="never";const f=a.get(n);return f?h=f:a.get(s)&&(h="always"),h}const tD=Zs.VectorTileFeature.types,rD=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function am(a,n,s,h,f,v,x,S,I,M,$,N,q){const Q=S?Math.min(Xs,Math.round(S[0])):0,ee=S?Math.min(Xs,Math.round(S[1])):0;a.emplaceBack(n,s,Math.round(32*h),Math.round(32*f),v,x,(Q<<1)+(I?1:0),ee,16*M,16*$,256*N,256*q)}function e0(a,n,s){a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s)}function nD(a){for(const n of a.sections)if(Iv(n.text))return!0;return!1}class t0{constructor(n){this.layoutVertexArray=new gr,this.indexArray=new ai,this.programConfigurations=n,this.segments=new sn,this.dynamicLayoutVertexArray=new pr,this.opacityVertexArray=new br,this.hasVisibleVertices=!1,this.placedSymbolArray=new Pe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,f){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,RM.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,LM.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,rD,!0),this.opacityVertexBuffer.itemSize=1),(h||f)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Dt("SymbolBuffers",t0);class r0{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new sn,this.collisionVertexArray=new en}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,$M.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Dt("CollisionBuffers",r0);class iu{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Av([]),this.placementViewportMatrix=Av([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Cw(this.zoom,s["text-size"]),this.iconSizeData=Cw(this.zoom,s["icon-size"]);const h=this.layers[0].layout,f=h.get("symbol-sort-key"),v=h.get("symbol-z-order");this.canOverlap=Qv(h,"text-overlap","text-allow-overlap")!=="never"||Qv(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(x=>l.ai[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new t0(new xa(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new t0(new xa(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new De,this.lineVertexArray=new He,this.symbolInstances=new ge,this.textAnchorOffsets=new tt}calculateGlyphDependencies(n,s,h,f,v){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(h||f)&&v){const S=gh[n.charAt(x)];S&&(s[S.charCodeAt(0)]=!0)}}populate(n,s,h){const f=this.layers[0],v=f.layout,x=v.get("text-font"),S=v.get("text-field"),I=v.get("icon-image"),M=(S.value.kind!=="constant"||S.value.value instanceof $r&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),$=I.value.kind!=="constant"||!!I.value.value||Object.keys(I.parameters).length>0,N=v.get("symbol-sort-key");if(this.features=[],!M&&!$)return;const q=s.iconDependencies,Q=s.glyphDependencies,ee=s.availableImages,le=new an(this.zoom);for(const{feature:me,id:ve,index:Ae,sourceLayerIndex:we}of n){const Re=f._featureFilter.needGeometry,Ue=Zl(me,Re);if(!f._featureFilter.filter(le,Ue,h))continue;let rt,It;if(Re||(Ue.geometry=ql(me)),M){const Ct=f.getValueAndResolveTokens("text-field",Ue,h,ee),_t=$r.factory(Ct);nD(_t)&&(this.hasRTLText=!0),(!this.hasRTLText||Xd()==="unavailable"||this.hasRTLText&&Qi.isParsed())&&(rt=OM(_t,f,Ue))}if($){const Ct=f.getValueAndResolveTokens("icon-image",Ue,h,ee);It=Ct instanceof fr?Ct:fr.fromString(Ct)}if(!rt&&!It)continue;const Bt=this.sortFeaturesByKey?N.evaluate(Ue,{},h):void 0;if(this.features.push({id:ve,text:rt,icon:It,index:Ae,sourceLayerIndex:we,geometry:Ue.geometry,properties:me.properties,type:tD[me.type],sortKey:Bt}),It&&(q[It.name]=!0),rt){const Ct=x.evaluate(Ue,{},h).join(","),_t=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ai.vertical)>=0;for(const ft of rt.sections)if(ft.image)q[ft.image.name]=!0;else{const Rt=Vd(rt.toString()),gt=ft.fontStack||Ct,ct=Q[gt]=Q[gt]||{};this.calculateGlyphDependencies(ft.text,ct,_t,this.allowVerticalPlacement,Rt)}}}v.get("symbol-placement")==="line"&&(this.features=function(me){const ve={},Ae={},we=[];let Re=0;function Ue(Ct){we.push(me[Ct]),Re++}function rt(Ct,_t,ft){const Rt=Ae[Ct];return delete Ae[Ct],Ae[_t]=Rt,we[Rt].geometry[0].pop(),we[Rt].geometry[0]=we[Rt].geometry[0].concat(ft[0]),Rt}function It(Ct,_t,ft){const Rt=ve[_t];return delete ve[_t],ve[Ct]=Rt,we[Rt].geometry[0].shift(),we[Rt].geometry[0]=ft[0].concat(we[Rt].geometry[0]),Rt}function Bt(Ct,_t,ft){const Rt=ft?_t[0][_t[0].length-1]:_t[0][0];return`${Ct}:${Rt.x}:${Rt.y}`}for(let Ct=0;Ct<me.length;Ct++){const _t=me[Ct],ft=_t.geometry,Rt=_t.text?_t.text.toString():null;if(!Rt){Ue(Ct);continue}const gt=Bt(Rt,ft),ct=Bt(Rt,ft,!0);if(gt in Ae&&ct in ve&&Ae[gt]!==ve[ct]){const Jt=It(gt,ct,ft),jt=rt(gt,ct,we[Jt].geometry);delete ve[gt],delete Ae[ct],Ae[Bt(Rt,we[jt].geometry,!0)]=jt,we[Jt].geometry=null}else gt in Ae?rt(gt,ct,ft):ct in ve?It(gt,ct,ft):(Ue(Ct),ve[gt]=Re-1,Ae[ct]=Re-1)}return we.filter(Ct=>Ct.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((me,ve)=>me.sortKey-ve.sortKey)}update(n,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0){let f=n.dist(s[n.segment+1]),v=n.dist(s[n.segment]);const x={};for(let S=n.segment+1;S<s.length;S++)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:f},S<s.length-1&&(f+=s[S+1].dist(s[S]));for(let S=n.segment||0;S>=0;S--)x[S]={x:s[S].x,y:s[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=s[S-1].dist(s[S]));for(let S=0;S<s.length;S++){const I=x[S];this.lineVertexArray.emplaceBack(I.x,I.y,I.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,f,v,x,S,I,M,$,N,q){const Q=n.indexArray,ee=n.layoutVertexArray,le=n.segments.prepareSegment(4*s.length,ee,Q,this.canOverlap?x.sortKey:void 0),me=this.glyphOffsetArray.length,ve=le.vertexLength,Ae=this.allowVerticalPlacement&&S===l.ai.vertical?Math.PI/2:0,we=x.text&&x.text.sections;for(let Re=0;Re<s.length;Re++){const{tl:Ue,tr:rt,bl:It,br:Bt,tex:Ct,pixelOffsetTL:_t,pixelOffsetBR:ft,minFontScaleX:Rt,minFontScaleY:gt,glyphOffset:ct,isSDF:Jt,sectionIndex:jt}=s[Re],mr=le.vertexLength,ln=ct[1];am(ee,I.x,I.y,Ue.x,ln+Ue.y,Ct.x,Ct.y,h,Jt,_t.x,_t.y,Rt,gt),am(ee,I.x,I.y,rt.x,ln+rt.y,Ct.x+Ct.w,Ct.y,h,Jt,ft.x,_t.y,Rt,gt),am(ee,I.x,I.y,It.x,ln+It.y,Ct.x,Ct.y+Ct.h,h,Jt,_t.x,ft.y,Rt,gt),am(ee,I.x,I.y,Bt.x,ln+Bt.y,Ct.x+Ct.w,Ct.y+Ct.h,h,Jt,ft.x,ft.y,Rt,gt),e0(n.dynamicLayoutVertexArray,I,Ae),Q.emplaceBack(mr,mr+1,mr+2),Q.emplaceBack(mr+1,mr+2,mr+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ct[0]),Re!==s.length-1&&jt===s[Re+1].sectionIndex||n.programConfigurations.populatePaintArrays(ee.length,x,x.index,{},q,we&&we[jt])}n.placedSymbolArray.emplaceBack(I.x,I.y,me,this.glyphOffsetArray.length-me,ve,M,$,I.segment,h?h[0]:0,h?h[1]:0,f[0],f[1],S,0,!1,0,N)}_addCollisionDebugVertex(n,s,h,f,v,x){return s.emplaceBack(0,0),n.emplaceBack(h.x,h.y,f,v,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,h,f,v,x,S){const I=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),M=I.vertexLength,$=v.layoutVertexArray,N=v.collisionVertexArray,q=S.anchorX,Q=S.anchorY;this._addCollisionDebugVertex($,N,x,q,Q,new z(n,s)),this._addCollisionDebugVertex($,N,x,q,Q,new z(h,s)),this._addCollisionDebugVertex($,N,x,q,Q,new z(h,f)),this._addCollisionDebugVertex($,N,x,q,Q,new z(n,f)),I.vertexLength+=4;const ee=v.indexArray;ee.emplaceBack(M,M+1),ee.emplaceBack(M+1,M+2),ee.emplaceBack(M+2,M+3),ee.emplaceBack(M+3,M),I.primitiveLength+=4}addDebugCollisionBoxes(n,s,h,f){for(let v=n;v<s;v++){const x=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,f?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new r0(kn,lw.members,Vn),this.iconCollisionBox=new r0(kn,lw.members,Vn);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,h,f,v,x,S,I,M){const $={};for(let N=s;N<h;N++){const q=n.get(N);$.textBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},$.textFeatureIndex=q.featureIndex;break}for(let N=f;N<v;N++){const q=n.get(N);$.verticalTextBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},$.verticalTextFeatureIndex=q.featureIndex;break}for(let N=x;N<S;N++){const q=n.get(N);$.iconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},$.iconFeatureIndex=q.featureIndex;break}for(let N=I;N<M;N++){const q=n.get(N);$.verticalIconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},$.verticalIconFeatureIndex=q.featureIndex;break}return $}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),f=h.vertexStartIndex+4*h.numGlyphs;for(let v=h.vertexStartIndex;v<f;v+=4)n.indexArray.emplaceBack(v,v+1,v+2),n.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),f=[],v=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const I=this.symbolInstances.get(S);f.push(0|Math.round(s*I.anchorX+h*I.anchorY)),v.push(I.featureIndex)}return x.sort((S,I)=>f[S]-f[I]||v[I]-v[S]),x}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((f,v,x)=>{f>=0&&x.indexOf(f)===v&&this.addIndicesForPlacedSymbol(this.text,f)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let kw,Iw;Dt("SymbolBucket",iu,{omit:["layers","collisionBoxArray","features","compareText"]}),iu.MAX_GLYPHS=65535,iu.addDynamicAttributes=e0;var n0={get paint(){return Iw=Iw||new zn({"icon-opacity":new nr(Ve.paint_symbol["icon-opacity"]),"icon-color":new nr(Ve.paint_symbol["icon-color"]),"icon-halo-color":new nr(Ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new nr(Ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new nr(Ve.paint_symbol["icon-halo-blur"]),"icon-translate":new Ut(Ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ut(Ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new nr(Ve.paint_symbol["text-opacity"]),"text-color":new nr(Ve.paint_symbol["text-color"],{runtimeType:hr,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new nr(Ve.paint_symbol["text-halo-color"]),"text-halo-width":new nr(Ve.paint_symbol["text-halo-width"]),"text-halo-blur":new nr(Ve.paint_symbol["text-halo-blur"]),"text-translate":new Ut(Ve.paint_symbol["text-translate"]),"text-translate-anchor":new Ut(Ve.paint_symbol["text-translate-anchor"])})},get layout(){return kw=kw||new zn({"symbol-placement":new Ut(Ve.layout_symbol["symbol-placement"]),"symbol-spacing":new Ut(Ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ut(Ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new nr(Ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ut(Ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ut(Ve.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Ut(Ve.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Ut(Ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ut(Ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ut(Ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new nr(Ve.layout_symbol["icon-size"]),"icon-text-fit":new Ut(Ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ut(Ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new nr(Ve.layout_symbol["icon-image"]),"icon-rotate":new nr(Ve.layout_symbol["icon-rotate"]),"icon-padding":new nr(Ve.layout_symbol["icon-padding"]),"icon-keep-upright":new Ut(Ve.layout_symbol["icon-keep-upright"]),"icon-offset":new nr(Ve.layout_symbol["icon-offset"]),"icon-anchor":new nr(Ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ut(Ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ut(Ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ut(Ve.layout_symbol["text-rotation-alignment"]),"text-field":new nr(Ve.layout_symbol["text-field"]),"text-font":new nr(Ve.layout_symbol["text-font"]),"text-size":new nr(Ve.layout_symbol["text-size"]),"text-max-width":new nr(Ve.layout_symbol["text-max-width"]),"text-line-height":new Ut(Ve.layout_symbol["text-line-height"]),"text-letter-spacing":new nr(Ve.layout_symbol["text-letter-spacing"]),"text-justify":new nr(Ve.layout_symbol["text-justify"]),"text-radial-offset":new nr(Ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ut(Ve.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new nr(Ve.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new nr(Ve.layout_symbol["text-anchor"]),"text-max-angle":new Ut(Ve.layout_symbol["text-max-angle"]),"text-writing-mode":new Ut(Ve.layout_symbol["text-writing-mode"]),"text-rotate":new nr(Ve.layout_symbol["text-rotate"]),"text-padding":new Ut(Ve.layout_symbol["text-padding"]),"text-keep-upright":new Ut(Ve.layout_symbol["text-keep-upright"]),"text-transform":new nr(Ve.layout_symbol["text-transform"]),"text-offset":new nr(Ve.layout_symbol["text-offset"]),"text-allow-overlap":new Ut(Ve.layout_symbol["text-allow-overlap"]),"text-overlap":new Ut(Ve.layout_symbol["text-overlap"]),"text-ignore-placement":new Ut(Ve.layout_symbol["text-ignore-placement"]),"text-optional":new Ut(Ve.layout_symbol["text-optional"])})}};class Tw{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:vn,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Dt("FormatSectionOverride",Tw,{omit:["defaultValue"]});class sm extends fo{constructor(n){super(n,n0)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const f=[];for(const v of h)f.indexOf(v)<0&&f.push(v);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,f){const v=this.layout.get(n).evaluate(s,{},h,f),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Oc(x.value)||!v?v:function(S,I){return I.replace(/{([^{}]+)}/g,(M,$)=>S&&$ in S?String(S[$]):"")}(s.properties,v)}createBucket(n){return new iu(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of n0.paint.overridableProperties){if(!sm.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new Tw(s),f=new $d(h,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new Bd("source",f):new Nc("composite",f,s.value.zoomStops),this.paint._values[n]=new xi(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&sm.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),f=n0.paint.properties[s];let v=!1;const x=S=>{for(const I of S)if(f.overrides&&f.overrides.hasOverride(I))return void(v=!0)};if(h.value.kind==="constant"&&h.value.value instanceof $r)x(h.value.value.sections);else if(h.value.kind==="source"){const S=M=>{v||(M instanceof fa&&Br(M.value)===he?x(M.value.sections):M instanceof Bc?x(M.sections):M.eachChild(S))},I=h.value;I._styleExpression&&S(I._styleExpression.expression)}return v}}let Pw;var iD={get paint(){return Pw=Pw||new zn({"background-color":new Ut(Ve.paint_background["background-color"]),"background-pattern":new Yd(Ve.paint_background["background-pattern"]),"background-opacity":new Ut(Ve.paint_background["background-opacity"])})}};class oD extends fo{constructor(n){super(n,iD)}}let Ew;var aD={get paint(){return Ew=Ew||new zn({"raster-opacity":new Ut(Ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ut(Ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ut(Ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ut(Ve.paint_raster["raster-brightness-max"]),"raster-saturation":new Ut(Ve.paint_raster["raster-saturation"]),"raster-contrast":new Ut(Ve.paint_raster["raster-contrast"]),"raster-resampling":new Ut(Ve.paint_raster["raster-resampling"]),"raster-fade-duration":new Ut(Ve.paint_raster["raster-fade-duration"])})}};class sD extends fo{constructor(n){super(n,aD)}}class lD extends fo{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class cD{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const i0=63710088e-1;class Js{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Js(ie(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,f=n.lat*s,v=Math.sin(h)*Math.sin(f)+Math.cos(h)*Math.cos(f)*Math.cos((n.lng-this.lng)*s);return i0*Math.acos(Math.min(v,1))}static convert(n){if(n instanceof Js)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Js(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Js(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const zw=2*Math.PI*i0;function Mw(a){return zw*Math.cos(a*Math.PI/180)}function Dw(a){return(180+a)/360}function Aw(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function Rw(a,n){return a/Mw(n)}function Lw(a){return 360*a-180}function o0(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class lm{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Js.convert(n);return new lm(Dw(h.lng),Aw(h.lat),Rw(s,h.lat))}toLngLat(){return new Js(Lw(this.x),o0(this.y))}toAltitude(){return this.z*Mw(o0(this.y))}meterInMercatorCoordinateUnits(){return 1/zw*(n=o0(this.y),1/Math.cos(n*Math.PI/180));var n}}function $w(a,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[a*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class a0{constructor(n,s,h){if(n<0||n>25||h<0||h>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${h}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=h,this.key=xh(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,h){const f=(x=this.y,S=this.z,I=$w(256*(v=this.x),256*(x=Math.pow(2,S)-x-1),S),M=$w(256*(v+1),256*(x+1),S),I[0]+","+I[1]+","+M[0]+","+M[1]);var v,x,S,I,M;const $=function(N,q,Q){let ee,le="";for(let me=N;me>0;me--)ee=1<<me-1,le+=(q&ee?1:0)+(Q&ee?2:0);return le}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,$).replace(/{bbox-epsg-3857}/g,f)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new z((n.x*s-this.x)*Bn,(n.y*s-this.y)*Bn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Bw{constructor(n,s){this.wrap=n,this.canonical=s,this.key=xh(n,s.z,s.z,s.x,s.y)}}class To{constructor(n,s,h,f,v){if(n<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${h}`);this.overscaledZ=n,this.wrap=s,this.canonical=new a0(h,+f,+v),this.key=xh(s,n,h,f,v)}clone(){return new To(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new To(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new To(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-n;return n>this.canonical.z?xh(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):xh(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new To(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,f=2*this.canonical.y;return[new To(s,this.wrap,s,h,f),new To(s,this.wrap,s,h+1,f),new To(s,this.wrap,s,h,f+1),new To(s,this.wrap,s,h+1,f+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new To(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new To(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Bw(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new lm(n.x-this.wrap,n.y))}}function xh(a,n,s,h,f){(a*=2)<0&&(a=-1*a-1);const v=1<<s;return(v*v*a+v*f+h).toString(36)+s.toString(36)+n.toString(36)}Dt("CanonicalTileID",a0),Dt("OverscaledTileID",To,{omit:["posMatrix"]});class Ow{constructor(n,s,h,f=1,v=1,x=1,S=0){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Ye(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const I=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=v,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let M=0;M<I;M++)this.data[this._idx(-1,M)]=this.data[this._idx(0,M)],this.data[this._idx(I,M)]=this.data[this._idx(I-1,M)],this.data[this._idx(M,-1)]=this.data[this._idx(M,0)],this.data[this._idx(M,I)]=this.data[this._idx(M,I-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(I,-1)]=this.data[this._idx(I-1,0)],this.data[this._idx(-1,I)]=this.data[this._idx(0,I-1)],this.data[this._idx(I,I)]=this.data[this._idx(I-1,I-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let M=0;M<I;M++)for(let $=0;$<I;$++){const N=this.get(M,$);N>this.max&&(this.max=N),N<this.min&&(this.min=N)}}get(n,s){const h=new Uint8Array(this.data.buffer),f=4*this._idx(n,s);return this.unpack(h[f],h[f+1],h[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}unpack(n,s,h){return n*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Io({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let f=s*this.dim,v=s*this.dim+this.dim,x=h*this.dim,S=h*this.dim+this.dim;switch(s){case-1:f=v-1;break;case 1:v=f+1}switch(h){case-1:x=S-1;break;case 1:S=x+1}const I=-s*this.dim,M=-h*this.dim;for(let $=x;$<S;$++)for(let N=f;N<v;N++)this.data[this._idx(N,$)]=n.data[this._idx(N+I,$+M)]}}Dt("DEMData",Ow);class Fw{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Nw{constructor(n,s,h,f,v){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=h,n._y=f,this.properties=n.properties,this.id=v}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class jw{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Us(Bn,16,0),this.grid3D=new Us(Bn,16,0),this.featureIndexArray=new it,this.promoteId=s}insert(n,s,h,f,v,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,f,v);const I=x?this.grid3D:this.grid;for(let M=0;M<s.length;M++){const $=s[M],N=[1/0,1/0,-1/0,-1/0];for(let q=0;q<$.length;q++){const Q=$[q];N[0]=Math.min(N[0],Q.x),N[1]=Math.min(N[1],Q.y),N[2]=Math.max(N[2],Q.x),N[3]=Math.max(N[3],Q.y)}N[0]<Bn&&N[1]<Bn&&N[2]>=0&&N[3]>=0&&I.insert(S,N[0],N[1],N[2],N[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Zs.VectorTile(new Zv(this.rawTileData)).layers,this.sourceLayerCoder=new Fw(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,h,f){this.loadVTLayers();const v=n.params||{},x=Bn/n.tileSize/n.scale,S=Fd(v.filter),I=n.queryGeometry,M=n.queryPadding*x,$=Uw(I),N=this.grid.query($.minX-M,$.minY-M,$.maxX+M,$.maxY+M),q=Uw(n.cameraQueryGeometry),Q=this.grid3D.query(q.minX-M,q.minY-M,q.maxX+M,q.maxY+M,(me,ve,Ae,we)=>function(Re,Ue,rt,It,Bt){for(const _t of Re)if(Ue<=_t.x&&rt<=_t.y&&It>=_t.x&&Bt>=_t.y)return!0;const Ct=[new z(Ue,rt),new z(Ue,Bt),new z(It,Bt),new z(It,rt)];if(Re.length>2){for(const _t of Ct)if(Jc(Re,_t))return!0}for(let _t=0;_t<Re.length-1;_t++)if(jz(Re[_t],Re[_t+1],Ct))return!0;return!1}(n.cameraQueryGeometry,me-M,ve-M,Ae+M,we+M));for(const me of Q)N.push(me);N.sort(uD);const ee={};let le;for(let me=0;me<N.length;me++){const ve=N[me];if(ve===le)continue;le=ve;const Ae=this.featureIndexArray.get(ve);let we=null;this.loadMatchingFeature(ee,Ae.bucketIndex,Ae.sourceLayerIndex,Ae.featureIndex,S,v.layers,v.availableImages,s,h,f,(Re,Ue,rt)=>(we||(we=ql(Re)),Ue.queryIntersectsFeature(I,Re,rt,we,this.z,n.transform,x,n.pixelPosMatrix)))}return ee}loadMatchingFeature(n,s,h,f,v,x,S,I,M,$,N){const q=this.bucketLayerIDs[s];if(x&&!function(me,ve){for(let Ae=0;Ae<me.length;Ae++)if(ve.indexOf(me[Ae])>=0)return!0;return!1}(x,q))return;const Q=this.sourceLayerCoder.decode(h),ee=this.vtLayers[Q].feature(f);if(v.needGeometry){const me=Zl(ee,!0);if(!v.filter(new an(this.tileID.overscaledZ),me,this.tileID.canonical))return}else if(!v.filter(new an(this.tileID.overscaledZ),ee))return;const le=this.getId(ee,Q);for(let me=0;me<q.length;me++){const ve=q[me];if(x&&x.indexOf(ve)<0)continue;const Ae=I[ve];if(!Ae)continue;let we={};le&&$&&(we=$.getState(Ae.sourceLayer||"_geojsonTileLayer",le));const Re=Z({},M[ve]);Re.paint=Vw(Re.paint,Ae.paint,ee,we,S),Re.layout=Vw(Re.layout,Ae.layout,ee,we,S);const Ue=!N||N(ee,Ae,we);if(!Ue)continue;const rt=new Nw(ee,this.z,this.x,this.y,le);rt.layer=Re;let It=n[ve];It===void 0&&(It=n[ve]=[]),It.push({featureIndex:f,feature:rt,intersectionZ:Ue})}}lookupSymbolFeatures(n,s,h,f,v,x,S,I){const M={};this.loadVTLayers();const $=Fd(v);for(const N of n)this.loadMatchingFeature(M,h,f,N,$,x,S,I,s);return M}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;return this.promoteId&&(h=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function Vw(a,n,s,h,f){return xe(a,(v,x)=>{const S=n instanceof Kc?n.get(x):null;return S&&S.evaluate?S.evaluate(s,h,f):S})}function Uw(a){let n=1/0,s=1/0,h=-1/0,f=-1/0;for(const v of a)n=Math.min(n,v.x),s=Math.min(s,v.y),h=Math.max(h,v.x),f=Math.max(f,v.y);return{minX:n,minY:s,maxX:h,maxY:f}}function uD(a,n){return n-a}function Hw(a,n,s,h,f){const v=[];for(let x=0;x<a.length;x++){const S=a[x];let I;for(let M=0;M<S.length-1;M++){let $=S[M],N=S[M+1];$.x<n&&N.x<n||($.x<n?$=new z(n,$.y+(n-$.x)/(N.x-$.x)*(N.y-$.y))._round():N.x<n&&(N=new z(n,$.y+(n-$.x)/(N.x-$.x)*(N.y-$.y))._round()),$.y<s&&N.y<s||($.y<s?$=new z($.x+(s-$.y)/(N.y-$.y)*(N.x-$.x),s)._round():N.y<s&&(N=new z($.x+(s-$.y)/(N.y-$.y)*(N.x-$.x),s)._round()),$.x>=h&&N.x>=h||($.x>=h?$=new z(h,$.y+(h-$.x)/(N.x-$.x)*(N.y-$.y))._round():N.x>=h&&(N=new z(h,$.y+(h-$.x)/(N.x-$.x)*(N.y-$.y))._round()),$.y>=f&&N.y>=f||($.y>=f?$=new z($.x+(f-$.y)/(N.y-$.y)*(N.x-$.x),f)._round():N.y>=f&&(N=new z($.x+(f-$.y)/(N.y-$.y)*(N.x-$.x),f)._round()),I&&$.equals(I[I.length-1])||(I=[$],v.push(I)),I.push(N)))))}}return v}Dt("FeatureIndex",jw,{omit:["rawTileData","sourceLayerCoder"]});class Ys extends z{constructor(n,s,h,f){super(n,s),this.angle=h,f!==void 0&&(this.segment=f)}clone(){return new Ys(this.x,this.y,this.angle,this.segment)}}function Ww(a,n,s,h,f){if(n.segment===void 0||s===0)return!0;let v=n,x=n.segment+1,S=0;for(;S>-s/2;){if(x--,x<0)return!1;S-=a[x].dist(v),v=a[x]}S+=a[x].dist(a[x+1]),x++;const I=[];let M=0;for(;S<s/2;){const $=a[x],N=a[x+1];if(!N)return!1;let q=a[x-1].angleTo($)-$.angleTo(N);for(q=Math.abs((q+3*Math.PI)%(2*Math.PI)-Math.PI),I.push({distance:S,angleDelta:q}),M+=q;S-I[0].distance>h;)M-=I.shift().angleDelta;if(M>f)return!1;x++,S+=$.dist(N)}return!0}function Gw(a){let n=0;for(let s=0;s<a.length-1;s++)n+=a[s].dist(a[s+1]);return n}function qw(a,n,s){return a?.6*n*s:0}function Zw(a,n){return Math.max(a?a.right-a.left:0,n?n.right-n.left:0)}function dD(a,n,s,h,f,v){const x=qw(s,f,v),S=Zw(s,h)*v;let I=0;const M=Gw(a)/2;for(let $=0;$<a.length-1;$++){const N=a[$],q=a[$+1],Q=N.dist(q);if(I+Q>M){const ee=(M-I)/Q,le=Xi.number(N.x,q.x,ee),me=Xi.number(N.y,q.y,ee),ve=new Ys(le,me,q.angleTo(N),$);return ve._round(),!x||Ww(a,ve,S,x,n)?ve:void 0}I+=Q}}function hD(a,n,s,h,f,v,x,S,I){const M=qw(h,v,x),$=Zw(h,f),N=$*x,q=a[0].x===0||a[0].x===I||a[0].y===0||a[0].y===I;return n-N<n/4&&(n=N+n/4),Kw(a,q?n/2*S%n:($/2+2*v)*x*S%n,n,M,s,N,q,!1,I)}function Kw(a,n,s,h,f,v,x,S,I){const M=v/2,$=Gw(a);let N=0,q=n-s,Q=[];for(let ee=0;ee<a.length-1;ee++){const le=a[ee],me=a[ee+1],ve=le.dist(me),Ae=me.angleTo(le);for(;q+s<N+ve;){q+=s;const we=(q-N)/ve,Re=Xi.number(le.x,me.x,we),Ue=Xi.number(le.y,me.y,we);if(Re>=0&&Re<I&&Ue>=0&&Ue<I&&q-M>=0&&q+M<=$){const rt=new Ys(Re,Ue,Ae,ee);rt._round(),h&&!Ww(a,rt,v,h,f)||Q.push(rt)}}N+=ve}return S||Q.length||x||(Q=Kw(a,N/2,s,h,f,v,x,!0,I)),Q}Dt("Anchor",Ys);const ou=to;function Xw(a,n,s,h){const f=[],v=a.image,x=v.pixelRatio,S=v.paddedRect.w-2*ou,I=v.paddedRect.h-2*ou,M=a.right-a.left,$=a.bottom-a.top,N=v.stretchX||[[0,S]],q=v.stretchY||[[0,I]],Q=(ft,Rt)=>ft+Rt[1]-Rt[0],ee=N.reduce(Q,0),le=q.reduce(Q,0),me=S-ee,ve=I-le;let Ae=0,we=ee,Re=0,Ue=le,rt=0,It=me,Bt=0,Ct=ve;if(v.content&&h){const ft=v.content;Ae=cm(N,0,ft[0]),Re=cm(q,0,ft[1]),we=cm(N,ft[0],ft[2]),Ue=cm(q,ft[1],ft[3]),rt=ft[0]-Ae,Bt=ft[1]-Re,It=ft[2]-ft[0]-we,Ct=ft[3]-ft[1]-Ue}const _t=(ft,Rt,gt,ct)=>{const Jt=um(ft.stretch-Ae,we,M,a.left),jt=dm(ft.fixed-rt,It,ft.stretch,ee),mr=um(Rt.stretch-Re,Ue,$,a.top),ln=dm(Rt.fixed-Bt,Ct,Rt.stretch,le),hn=um(gt.stretch-Ae,we,M,a.left),Wn=dm(gt.fixed-rt,It,gt.stretch,ee),go=um(ct.stretch-Re,Ue,$,a.top),Bi=dm(ct.fixed-Bt,Ct,ct.stretch,le),On=new z(Jt,mr),li=new z(hn,mr),fi=new z(hn,go),Oi=new z(Jt,go),Fi=new z(jt/x,ln/x),Gn=new z(Wn/x,Bi/x),qn=n*Math.PI/180;if(qn){const Si=Math.sin(qn),ro=Math.cos(qn),no=[ro,-Si,Si,ro];On._matMult(no),li._matMult(no),Oi._matMult(no),fi._matMult(no)}const wi=ft.stretch+ft.fixed,Ni=Rt.stretch+Rt.fixed;return{tl:On,tr:li,bl:Oi,br:fi,tex:{x:v.paddedRect.x+ou+wi,y:v.paddedRect.y+ou+Ni,w:gt.stretch+gt.fixed-wi,h:ct.stretch+ct.fixed-Ni},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Fi,pixelOffsetBR:Gn,minFontScaleX:It/x/M,minFontScaleY:Ct/x/$,isSDF:s}};if(h&&(v.stretchX||v.stretchY)){const ft=Jw(N,me,ee),Rt=Jw(q,ve,le);for(let gt=0;gt<ft.length-1;gt++){const ct=ft[gt],Jt=ft[gt+1];for(let jt=0;jt<Rt.length-1;jt++)f.push(_t(ct,Rt[jt],Jt,Rt[jt+1]))}}else f.push(_t({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:I+1}));return f}function cm(a,n,s){let h=0;for(const f of a)h+=Math.max(n,Math.min(s,f[1]))-Math.max(n,Math.min(s,f[0]));return h}function Jw(a,n,s){const h=[{fixed:-ou,stretch:0}];for(const[f,v]of a){const x=h[h.length-1];h.push({fixed:f-x.stretch,stretch:x.stretch}),h.push({fixed:f-x.stretch,stretch:x.stretch+(v-f)})}return h.push({fixed:n+ou,stretch:s}),h}function um(a,n,s,h){return a/n*s+h}function dm(a,n,s,h){return a-n*s/h}class hm{constructor(n,s,h,f,v,x,S,I,M,$){if(this.boxStartIndex=n.length,M){let N=x.top,q=x.bottom;const Q=x.collisionPadding;Q&&(N-=Q[1],q+=Q[3]);let ee=q-N;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{let N=x.top*S-I[0],q=x.bottom*S+I[2],Q=x.left*S-I[3],ee=x.right*S+I[1];const le=x.collisionPadding;if(le&&(Q-=le[0]*S,N-=le[1]*S,ee+=le[2]*S,q+=le[3]*S),$){const me=new z(Q,N),ve=new z(ee,N),Ae=new z(Q,q),we=new z(ee,q),Re=$*Math.PI/180;me._rotate(Re),ve._rotate(Re),Ae._rotate(Re),we._rotate(Re),Q=Math.min(me.x,ve.x,Ae.x,we.x),ee=Math.max(me.x,ve.x,Ae.x,we.x),N=Math.min(me.y,ve.y,Ae.y,we.y),q=Math.max(me.y,ve.y,Ae.y,we.y)}n.emplaceBack(s.x,s.y,Q,N,ee,q,h,f,v)}this.boxEndIndex=n.length}}class pD{constructor(n=[],s=fD){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,f=s[n];for(;n>0;){const v=n-1>>1,x=s[v];if(h(f,x)>=0)break;s[n]=x,n=v}s[n]=f}_down(n){const{data:s,compare:h}=this,f=this.length>>1,v=s[n];for(;n<f;){let x=1+(n<<1),S=s[x];const I=x+1;if(I<this.length&&h(s[I],S)<0&&(x=I,S=s[I]),h(S,v)>=0)break;s[n]=S,n=x}s[n]=v}}function fD(a,n){return a<n?-1:a>n?1:0}function mD(a,n=1,s=!1){let h=1/0,f=1/0,v=-1/0,x=-1/0;const S=a[0];for(let Q=0;Q<S.length;Q++){const ee=S[Q];(!Q||ee.x<h)&&(h=ee.x),(!Q||ee.y<f)&&(f=ee.y),(!Q||ee.x>v)&&(v=ee.x),(!Q||ee.y>x)&&(x=ee.y)}const I=Math.min(v-h,x-f);let M=I/2;const $=new pD([],gD);if(I===0)return new z(h,f);for(let Q=h;Q<v;Q+=I)for(let ee=f;ee<x;ee+=I)$.push(new au(Q+M,ee+M,M,a));let N=function(Q){let ee=0,le=0,me=0;const ve=Q[0];for(let Ae=0,we=ve.length,Re=we-1;Ae<we;Re=Ae++){const Ue=ve[Ae],rt=ve[Re],It=Ue.x*rt.y-rt.x*Ue.y;le+=(Ue.x+rt.x)*It,me+=(Ue.y+rt.y)*It,ee+=3*It}return new au(le/ee,me/ee,0,Q)}(a),q=$.length;for(;$.length;){const Q=$.pop();(Q.d>N.d||!N.d)&&(N=Q,s&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,q)),Q.max-N.d<=n||(M=Q.h/2,$.push(new au(Q.p.x-M,Q.p.y-M,M,a)),$.push(new au(Q.p.x+M,Q.p.y-M,M,a)),$.push(new au(Q.p.x-M,Q.p.y+M,M,a)),$.push(new au(Q.p.x+M,Q.p.y+M,M,a)),q+=4)}return s&&(console.log(`num probes: ${q}`),console.log(`best distance: ${N.d}`)),N.p}function gD(a,n){return n.max-a.max}function au(a,n,s,h){this.p=new z(a,n),this.h=s,this.d=function(f,v){let x=!1,S=1/0;for(let I=0;I<v.length;I++){const M=v[I];for(let $=0,N=M.length,q=N-1;$<N;q=$++){const Q=M[$],ee=M[q];Q.y>f.y!=ee.y>f.y&&f.x<(ee.x-Q.x)*(f.y-Q.y)/(ee.y-Q.y)+Q.x&&(x=!x),S=Math.min(S,Ab(f,Q,ee))}}return(x?1:-1)*Math.sqrt(S)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var pi;l.aq=void 0,(pi=l.aq||(l.aq={}))[pi.center=1]="center",pi[pi.left=2]="left",pi[pi.right=3]="right",pi[pi.top=4]="top",pi[pi.bottom=5]="bottom",pi[pi["top-left"]=6]="top-left",pi[pi["top-right"]=7]="top-right",pi[pi["bottom-left"]=8]="bottom-left",pi[pi["bottom-right"]=9]="bottom-right";const Qs=7,s0=Number.POSITIVE_INFINITY;function Yw(a,n){return n[1]!==s0?function(s,h,f){let v=0,x=0;switch(h=Math.abs(h),f=Math.abs(f),s){case"top-right":case"top-left":case"top":x=f-Qs;break;case"bottom-right":case"bottom-left":case"bottom":x=-f+Qs}switch(s){case"top-right":case"bottom-right":case"right":v=-h;break;case"top-left":case"bottom-left":case"left":v=h}return[v,x]}(a,n[0],n[1]):function(s,h){let f=0,v=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(s){case"top-right":case"top-left":v=x-Qs;break;case"bottom-right":case"bottom-left":v=-x+Qs;break;case"bottom":v=-h+Qs;break;case"top":v=h-Qs}switch(s){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=h;break;case"right":f=-h}return[f,v]}(a,n[0])}function Qw(a,n,s){var h;const f=a.layout,v=(h=f.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(n,{},s);if(v){const S=v.values,I=[];for(let M=0;M<S.length;M+=2){const $=I[M]=S[M],N=S[M+1].map(q=>q*Hn);$.startsWith("top")?N[1]-=Qs:$.startsWith("bottom")&&(N[1]+=Qs),I[M+1]=N}return new Zt(I)}const x=f.get("text-variable-anchor");if(x){let S;S=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(n,{},s)*Hn,s0]:f.get("text-offset").evaluate(n,{},s).map(M=>M*Hn);const I=[];for(const M of x)I.push(M,Yw(M,S));return new Zt(I)}return null}function l0(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function yD(a,n,s,h,f,v,x,S,I,M,$){let N=v.textMaxSize.evaluate(n,{});N===void 0&&(N=x);const q=a.layers[0].layout,Q=q.get("icon-offset").evaluate(n,{},$),ee=tS(s.horizontal),le=x/24,me=a.tilePixelRatio*le,ve=a.tilePixelRatio*N/24,Ae=a.tilePixelRatio*S,we=a.tilePixelRatio*q.get("symbol-spacing"),Re=q.get("text-padding")*a.tilePixelRatio,Ue=function(ct,Jt,jt,mr=1){const ln=ct.get("icon-padding").evaluate(Jt,{},jt),hn=ln&&ln.values;return[hn[0]*mr,hn[1]*mr,hn[2]*mr,hn[3]*mr]}(q,n,$,a.tilePixelRatio),rt=q.get("text-max-angle")/180*Math.PI,It=q.get("text-rotation-alignment")!=="viewport"&&q.get("symbol-placement")!=="point",Bt=q.get("icon-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",Ct=q.get("symbol-placement"),_t=we/2,ft=q.get("icon-text-fit");let Rt;h&&ft!=="none"&&(a.allowVerticalPlacement&&s.vertical&&(Rt=Sw(h,s.vertical,ft,q.get("icon-text-fit-padding"),Q,le)),ee&&(h=Sw(h,ee,ft,q.get("icon-text-fit-padding"),Q,le)));const gt=(ct,Jt)=>{Jt.x<0||Jt.x>=Bn||Jt.y<0||Jt.y>=Bn||function(jt,mr,ln,hn,Wn,go,Bi,On,li,fi,Oi,Fi,Gn,qn,wi,Ni,Si,ro,no,Zn,wr,Ci,mi,Kn,Jo){const ba=jt.addToLineVertexArray(mr,ln);let wa,gs,Yo,Po,io=0,ys=0,Sh=0,oS=0,g0=-1,y0=-1;const vs={};let aS=hs("");if(jt.allowVerticalPlacement&&hn.vertical){const ki=On.layout.get("text-rotate").evaluate(wr,{},Kn)+90;Yo=new hm(li,mr,fi,Oi,Fi,hn.vertical,Gn,qn,wi,ki),Bi&&(Po=new hm(li,mr,fi,Oi,Fi,Bi,Si,ro,wi,ki))}if(Wn){const ki=On.layout.get("icon-rotate").evaluate(wr,{}),Eo=On.layout.get("icon-text-fit")!=="none",Xl=Xw(Wn,ki,mi,Eo),Ca=Bi?Xw(Bi,ki,mi,Eo):void 0;gs=new hm(li,mr,fi,Oi,Fi,Wn,Si,ro,!1,ki),io=4*Xl.length;const Jl=jt.iconSizeData;let Wa=null;Jl.kind==="source"?(Wa=[Ha*On.layout.get("icon-size").evaluate(wr,{})],Wa[0]>Xs&&Ye(`${jt.layerIds[0]}: Value for "icon-size" is >= ${_h}. Reduce your "icon-size".`)):Jl.kind==="composite"&&(Wa=[Ha*Ci.compositeIconSizes[0].evaluate(wr,{},Kn),Ha*Ci.compositeIconSizes[1].evaluate(wr,{},Kn)],(Wa[0]>Xs||Wa[1]>Xs)&&Ye(`${jt.layerIds[0]}: Value for "icon-size" is >= ${_h}. Reduce your "icon-size".`)),jt.addSymbols(jt.icon,Xl,Wa,Zn,no,wr,l.ai.none,mr,ba.lineStartIndex,ba.lineLength,-1,Kn),g0=jt.icon.placedSymbolArray.length-1,Ca&&(ys=4*Ca.length,jt.addSymbols(jt.icon,Ca,Wa,Zn,no,wr,l.ai.vertical,mr,ba.lineStartIndex,ba.lineLength,-1,Kn),y0=jt.icon.placedSymbolArray.length-1)}const sS=Object.keys(hn.horizontal);for(const ki of sS){const Eo=hn.horizontal[ki];if(!wa){aS=hs(Eo.text);const Ca=On.layout.get("text-rotate").evaluate(wr,{},Kn);wa=new hm(li,mr,fi,Oi,Fi,Eo,Gn,qn,wi,Ca)}const Xl=Eo.positionedLines.length===1;if(Sh+=eS(jt,mr,Eo,go,On,wi,wr,Ni,ba,hn.vertical?l.ai.horizontal:l.ai.horizontalOnly,Xl?sS:[ki],vs,g0,Ci,Kn),Xl)break}hn.vertical&&(oS+=eS(jt,mr,hn.vertical,go,On,wi,wr,Ni,ba,l.ai.vertical,["vertical"],vs,y0,Ci,Kn));const xD=wa?wa.boxStartIndex:jt.collisionBoxArray.length,bD=wa?wa.boxEndIndex:jt.collisionBoxArray.length,wD=Yo?Yo.boxStartIndex:jt.collisionBoxArray.length,SD=Yo?Yo.boxEndIndex:jt.collisionBoxArray.length,CD=gs?gs.boxStartIndex:jt.collisionBoxArray.length,kD=gs?gs.boxEndIndex:jt.collisionBoxArray.length,ID=Po?Po.boxStartIndex:jt.collisionBoxArray.length,TD=Po?Po.boxEndIndex:jt.collisionBoxArray.length;let Sa=-1;const fm=(ki,Eo)=>ki&&ki.circleDiameter?Math.max(ki.circleDiameter,Eo):Eo;Sa=fm(wa,Sa),Sa=fm(Yo,Sa),Sa=fm(gs,Sa),Sa=fm(Po,Sa);const lS=Sa>-1?1:0;lS&&(Sa*=Jo/Hn),jt.glyphOffsetArray.length>=iu.MAX_GLYPHS&&Ye("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),wr.sortKey!==void 0&&jt.addToSortKeyRanges(jt.symbolInstances.length,wr.sortKey);const PD=Qw(On,wr,Kn),[ED,zD]=function(ki,Eo){const Xl=ki.length,Ca=Eo==null?void 0:Eo.values;if((Ca==null?void 0:Ca.length)>0)for(let Jl=0;Jl<Ca.length;Jl+=2){const Wa=Ca[Jl+1];ki.emplaceBack(l.aq[Ca[Jl]],Wa[0],Wa[1])}return[Xl,ki.length]}(jt.textAnchorOffsets,PD);jt.symbolInstances.emplaceBack(mr.x,mr.y,vs.right>=0?vs.right:-1,vs.center>=0?vs.center:-1,vs.left>=0?vs.left:-1,vs.vertical||-1,g0,y0,aS,xD,bD,wD,SD,CD,kD,ID,TD,fi,Sh,oS,io,ys,lS,0,Gn,Sa,ED,zD)}(a,Jt,ct,s,h,f,Rt,a.layers[0],a.collisionBoxArray,n.index,n.sourceLayerIndex,a.index,me,[Re,Re,Re,Re],It,I,Ae,Ue,Bt,Q,n,v,M,$,x)};if(Ct==="line")for(const ct of Hw(n.geometry,0,0,Bn,Bn)){const Jt=hD(ct,we,rt,s.vertical||ee,h,24,ve,a.overscaling,Bn);for(const jt of Jt)ee&&vD(a,ee.text,_t,jt)||gt(ct,jt)}else if(Ct==="line-center"){for(const ct of n.geometry)if(ct.length>1){const Jt=dD(ct,rt,s.vertical||ee,h,24,ve);Jt&&gt(ct,Jt)}}else if(n.type==="Polygon")for(const ct of Nv(n.geometry,0)){const Jt=mD(ct,16);gt(ct[0],new Ys(Jt.x,Jt.y,0))}else if(n.type==="LineString")for(const ct of n.geometry)gt(ct,new Ys(ct[0].x,ct[0].y,0));else if(n.type==="Point")for(const ct of n.geometry)for(const Jt of ct)gt([Jt],new Ys(Jt.x,Jt.y,0))}function eS(a,n,s,h,f,v,x,S,I,M,$,N,q,Q,ee){const le=function(Ae,we,Re,Ue,rt,It,Bt,Ct){const _t=Ue.layout.get("text-rotate").evaluate(It,{})*Math.PI/180,ft=[];for(const Rt of we.positionedLines)for(const gt of Rt.positionedGlyphs){if(!gt.rect)continue;const ct=gt.rect||{};let Jt=gw+1,jt=!0,mr=1,ln=0;const hn=(rt||Ct)&&gt.vertical,Wn=gt.metrics.advance*gt.scale/2;if(Ct&&we.verticalizable&&(ln=Rt.lineOffset/2-(gt.imageName?-(Hn-gt.metrics.width*gt.scale)/2:(gt.scale-1)*Hn)),gt.imageName){const Zn=Bt[gt.imageName];jt=Zn.sdf,mr=Zn.pixelRatio,Jt=to/mr}const go=rt?[gt.x+Wn,gt.y]:[0,0];let Bi=rt?[0,0]:[gt.x+Wn+Re[0],gt.y+Re[1]-ln],On=[0,0];hn&&(On=Bi,Bi=[0,0]);const li=gt.metrics.isDoubleResolution?2:1,fi=(gt.metrics.left-Jt)*gt.scale-Wn+Bi[0],Oi=(-gt.metrics.top-Jt)*gt.scale+Bi[1],Fi=fi+ct.w/li*gt.scale/mr,Gn=Oi+ct.h/li*gt.scale/mr,qn=new z(fi,Oi),wi=new z(Fi,Oi),Ni=new z(fi,Gn),Si=new z(Fi,Gn);if(hn){const Zn=new z(-Wn,Wn-yh),wr=-Math.PI/2,Ci=Hn/2-Wn,mi=new z(5-yh-Ci,-(gt.imageName?Ci:0)),Kn=new z(...On);qn._rotateAround(wr,Zn)._add(mi)._add(Kn),wi._rotateAround(wr,Zn)._add(mi)._add(Kn),Ni._rotateAround(wr,Zn)._add(mi)._add(Kn),Si._rotateAround(wr,Zn)._add(mi)._add(Kn)}if(_t){const Zn=Math.sin(_t),wr=Math.cos(_t),Ci=[wr,-Zn,Zn,wr];qn._matMult(Ci),wi._matMult(Ci),Ni._matMult(Ci),Si._matMult(Ci)}const ro=new z(0,0),no=new z(0,0);ft.push({tl:qn,tr:wi,bl:Ni,br:Si,tex:ct,writingMode:we.writingMode,glyphOffset:go,sectionIndex:gt.sectionIndex,isSDF:jt,pixelOffsetTL:ro,pixelOffsetBR:no,minFontScaleX:0,minFontScaleY:0})}return ft}(0,s,S,f,v,x,h,a.allowVerticalPlacement),me=a.textSizeData;let ve=null;me.kind==="source"?(ve=[Ha*f.layout.get("text-size").evaluate(x,{})],ve[0]>Xs&&Ye(`${a.layerIds[0]}: Value for "text-size" is >= ${_h}. Reduce your "text-size".`)):me.kind==="composite"&&(ve=[Ha*Q.compositeTextSizes[0].evaluate(x,{},ee),Ha*Q.compositeTextSizes[1].evaluate(x,{},ee)],(ve[0]>Xs||ve[1]>Xs)&&Ye(`${a.layerIds[0]}: Value for "text-size" is >= ${_h}. Reduce your "text-size".`)),a.addSymbols(a.text,le,ve,S,v,x,M,n,I.lineStartIndex,I.lineLength,q,ee);for(const Ae of $)N[Ae]=a.text.placedSymbolArray.length-1;return 4*le.length}function tS(a){for(const n in a)return a[n];return null}function vD(a,n,s,h){const f=a.compareText;if(n in f){const v=f[n];for(let x=v.length-1;x>=0;x--)if(h.dist(v[x])<s)return!0}else f[n]=[];return f[n].push(h),!1}const rS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class c0{static from(n){if(!(n instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,h]=new Uint8Array(n,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=h>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const v=rS[15&h];if(!v)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(n,2,1),[S]=new Uint32Array(n,4,1);return new c0(S,x,v,n)}constructor(n,s=64,h=Float64Array,f){if(isNaN(n)||n<0)throw new Error(`Unpexpected numItems value: ${n}.`);this.numItems=+n,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=n<65536?Uint16Array:Uint32Array;const v=rS.indexOf(this.ArrayType),x=2*n*this.ArrayType.BYTES_PER_ELEMENT,S=n*this.IndexArrayType.BYTES_PER_ELEMENT,I=(8-S%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${h}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+I,2*n),this._pos=2*n,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+I),this.ids=new this.IndexArrayType(this.data,8,n),this.coords=new this.ArrayType(this.data,8+S+I,2*n),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=n)}add(n,s){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=n,this.coords[this._pos++]=s,h}finish(){const n=this._pos>>1;if(n!==this.numItems)throw new Error(`Added ${n} items when expected ${this.numItems}.`);return u0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(n,s,h,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:x,nodeSize:S}=this,I=[0,v.length-1,0],M=[];for(;I.length;){const $=I.pop()||0,N=I.pop()||0,q=I.pop()||0;if(N-q<=S){for(let me=q;me<=N;me++){const ve=x[2*me],Ae=x[2*me+1];ve>=n&&ve<=h&&Ae>=s&&Ae<=f&&M.push(v[me])}continue}const Q=q+N>>1,ee=x[2*Q],le=x[2*Q+1];ee>=n&&ee<=h&&le>=s&&le<=f&&M.push(v[Q]),($===0?n<=ee:s<=le)&&(I.push(q),I.push(Q-1),I.push(1-$)),($===0?h>=ee:f>=le)&&(I.push(Q+1),I.push(N),I.push(1-$))}return M}within(n,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:v,nodeSize:x}=this,S=[0,f.length-1,0],I=[],M=h*h;for(;S.length;){const $=S.pop()||0,N=S.pop()||0,q=S.pop()||0;if(N-q<=x){for(let me=q;me<=N;me++)iS(v[2*me],v[2*me+1],n,s)<=M&&I.push(f[me]);continue}const Q=q+N>>1,ee=v[2*Q],le=v[2*Q+1];iS(ee,le,n,s)<=M&&I.push(f[Q]),($===0?n-h<=ee:s-h<=le)&&(S.push(q),S.push(Q-1),S.push(1-$)),($===0?n+h>=ee:s+h>=le)&&(S.push(Q+1),S.push(N),S.push(1-$))}return I}}function u0(a,n,s,h,f,v){if(f-h<=s)return;const x=h+f>>1;nS(a,n,x,h,f,v),u0(a,n,s,h,x-1,1-v),u0(a,n,s,x+1,f,1-v)}function nS(a,n,s,h,f,v){for(;f>h;){if(f-h>600){const M=f-h+1,$=s-h+1,N=Math.log(M),q=.5*Math.exp(2*N/3),Q=.5*Math.sqrt(N*q*(M-q)/M)*($-M/2<0?-1:1);nS(a,n,s,Math.max(h,Math.floor(s-$*q/M+Q)),Math.min(f,Math.floor(s+(M-$)*q/M+Q)),v)}const x=n[2*s+v];let S=h,I=f;for(bh(a,n,h,s),n[2*f+v]>x&&bh(a,n,h,f);S<I;){for(bh(a,n,S,I),S++,I--;n[2*S+v]<x;)S++;for(;n[2*I+v]>x;)I--}n[2*h+v]===x?bh(a,n,h,I):(I++,bh(a,n,I,f)),I<=s&&(h=I+1),s<=I&&(f=I-1)}}function bh(a,n,s,h){d0(a,s,h),d0(n,2*s,2*h),d0(n,2*s+1,2*h+1)}function d0(a,n,s){const h=a[n];a[n]=a[s],a[s]=h}function iS(a,n,s,h){const f=a-s,v=n-h;return f*f+v*v}var h0;l.bh=void 0,(h0=l.bh||(l.bh={})).create="create",h0.load="load",h0.fullLoad="fullLoad";let pm=null,wh=[];const p0=1e3/60,f0="loadTime",m0="fullLoadTime",_D={mark(a){performance.mark(a)},frame(a){const n=a;pm!=null&&wh.push(n-pm),pm=n},clearMetrics(){pm=null,wh=[],performance.clearMeasures(f0),performance.clearMeasures(m0);for(const a in l.bh)performance.clearMarks(l.bh[a])},getPerformanceMetrics(){performance.measure(f0,l.bh.create,l.bh.load),performance.measure(m0,l.bh.create,l.bh.fullLoad);const a=performance.getEntriesByName(f0)[0].duration,n=performance.getEntriesByName(m0)[0].duration,s=wh.length,h=1/(wh.reduce((v,x)=>v+x,0)/s/1e3),f=wh.filter(v=>v>p0).reduce((v,x)=>v+(x-p0)/p0,0);return{loadTime:a,fullLoadTime:n,fps:h,percentDroppedFrames:f/(s+f)*100,totalFrames:s}}};l.$=function(a,n,s){var h,f,v,x,S,I,M,$,N,q,Q,ee,le=s[0],me=s[1],ve=s[2];return n===a?(a[12]=n[0]*le+n[4]*me+n[8]*ve+n[12],a[13]=n[1]*le+n[5]*me+n[9]*ve+n[13],a[14]=n[2]*le+n[6]*me+n[10]*ve+n[14],a[15]=n[3]*le+n[7]*me+n[11]*ve+n[15]):(f=n[1],v=n[2],x=n[3],S=n[4],I=n[5],M=n[6],$=n[7],N=n[8],q=n[9],Q=n[10],ee=n[11],a[0]=h=n[0],a[1]=f,a[2]=v,a[3]=x,a[4]=S,a[5]=I,a[6]=M,a[7]=$,a[8]=N,a[9]=q,a[10]=Q,a[11]=ee,a[12]=h*le+S*me+N*ve+n[12],a[13]=f*le+I*me+q*ve+n[13],a[14]=v*le+M*me+Q*ve+n[14],a[15]=x*le+$*me+ee*ve+n[15]),a},l.A=Yc,l.B=Xi,l.C=class{constructor(a,n,s){this.receive=h=>{const f=h.data,v=f.id;if(v&&(!f.targetMapId||this.mapId===f.targetMapId))if(f.type==="<cancel>"){delete this.tasks[v];const x=this.cancelCallbacks[v];delete this.cancelCallbacks[v],x&&x()}else Fe()||f.mustQueue?(this.tasks[v]=f,this.taskQueue.push(v),this.invoker.trigger()):this.processTask(v,f)},this.process=()=>{if(!this.taskQueue.length)return;const h=this.taskQueue.shift(),f=this.tasks[h];delete this.tasks[h],this.taskQueue.length&&this.invoker.trigger(),f&&this.processTask(h,f)},this.target=a,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},this.invoker=new cD(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Fe()?a:window}send(a,n,s,h,f=!1){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[v]=s);const x=[],S={id:v,type:a,hasCallback:!!s,targetMapId:h,mustQueue:f,sourceMapId:this.mapId,data:ja(n,x)};return this.target.postMessage(S,{transfer:x}),{cancel:()=>{s&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}processTask(a,n){if(n.type==="<response>"){const s=this.callbacks[a];delete this.callbacks[a],s&&(n.error?s(Hs(n.error)):s(null,Hs(n.data)))}else{let s=!1;const h=[],f=n.hasCallback?(S,I)=>{s=!0,delete this.cancelCallbacks[a];const M={id:a,type:"<response>",sourceMapId:this.mapId,error:S?ja(S):null,data:ja(I,h)};this.target.postMessage(M,{transfer:h})}:S=>{s=!0};let v=null;const x=Hs(n.data);if(this.parent[n.type])v=this.parent[n.type](n.sourceMapId,x,f);else if("getWorkerSource"in this.parent){const S=n.type.split(".");v=this.parent.getWorkerSource(n.sourceMapId,S[0],x.source)[S[1]](x,f)}else f(new Error(`Could not find function ${n.type}`));!s&&v&&v.cancel&&(this.cancelCallbacks[a]=v.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.D=Ut,l.E=Er,l.F=function(a,n){const s={};for(let h=0;h<n.length;h++){const f=n[h];f in a&&(s[f]=a[f])}return s},l.G=Dw,l.H=Aw,l.I=Xv,l.J=L,l.K=R,l.L=Js,l.M=at,l.N=Bn,l.O=To,l.P=z,l.Q=gn,l.R=Io,l.S=sn,l.T=Vf,l.U=lm,l.V=class extends us{},l.W=a0,l.X=function(a,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let h=0;h<a.length;h++){const f=window.document.createElement("source");lr(a[h])||(s.crossOrigin="Anonymous"),f.src=a[h],s.appendChild(f)}return{cancel:()=>{}}},l.Y=Be,l.Z=function(){var a=new Yc(16);return Yc!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},l._=b,l.a=Oe,l.a$=class extends X{},l.a0=function(a,n,s){var h=s[0],f=s[1],v=s[2];return a[0]=n[0]*h,a[1]=n[1]*h,a[2]=n[2]*h,a[3]=n[3]*h,a[4]=n[4]*f,a[5]=n[5]*f,a[6]=n[6]*f,a[7]=n[7]*f,a[8]=n[8]*v,a[9]=n[9]*v,a[10]=n[10]*v,a[11]=n[11]*v,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},l.a1=Bb,l.a2=function(){return ke++},l.a3=pe,l.a4=iu,l.a5=function(){Qi.isLoading()||Qi.isLoaded()||Xd()!=="deferred"||jf()},l.a6=Fd,l.a7=Zl,l.a8=an,l.a9=Nw,l.aA=Vl,l.aB=function(a){a=a.slice();const n=Object.create(null);for(let s=0;s<a.length;s++)n[a[s].id]=a[s];for(let s=0;s<a.length;s++)"ref"in a[s]&&(a[s]=Dr(a[s],n[a[s].ref]));return a},l.aC=function(a){if(a.type==="custom")return new lD(a);switch(a.type){case"background":return new oD(a);case"circle":return new Hz(a);case"fill":return new uM(a);case"fill-extrusion":return new kM(a);case"heatmap":return new Gz(a);case"hillshade":return new Zz(a);case"line":return new AM(a);case"raster":return new sD(a);case"symbol":return new sm(a)}},l.aD=ze,l.aE=function(a,n){if(!a)return[{command:rr.setStyle,args:[n]}];let s=[];try{if(!qt(a.version,n.version))return[{command:rr.setStyle,args:[n]}];qt(a.center,n.center)||s.push({command:rr.setCenter,args:[n.center]}),qt(a.zoom,n.zoom)||s.push({command:rr.setZoom,args:[n.zoom]}),qt(a.bearing,n.bearing)||s.push({command:rr.setBearing,args:[n.bearing]}),qt(a.pitch,n.pitch)||s.push({command:rr.setPitch,args:[n.pitch]}),qt(a.sprite,n.sprite)||s.push({command:rr.setSprite,args:[n.sprite]}),qt(a.glyphs,n.glyphs)||s.push({command:rr.setGlyphs,args:[n.glyphs]}),qt(a.transition,n.transition)||s.push({command:rr.setTransition,args:[n.transition]}),qt(a.light,n.light)||s.push({command:rr.setLight,args:[n.light]});const h={},f=[];(function(x,S,I,M){let $;for($ in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,$)&&(Object.prototype.hasOwnProperty.call(S,$)||Hr($,I,M));for($ in S)Object.prototype.hasOwnProperty.call(S,$)&&(Object.prototype.hasOwnProperty.call(x,$)?qt(x[$],S[$])||(x[$].type==="geojson"&&S[$].type==="geojson"&&cr(x,S,$)?I.push({command:rr.setGeoJSONSourceData,args:[$,S[$].data]}):dr($,S,I,M)):Or($,S,I))})(a.sources,n.sources,f,h);const v=[];a.layers&&a.layers.forEach(x=>{h[x.source]?s.push({command:rr.removeLayer,args:[x.id]}):v.push(x)}),s=s.concat(f),function(x,S,I){S=S||[];const M=(x=x||[]).map(sr),$=S.map(sr),N=x.reduce(Tr,{}),q=S.reduce(Tr,{}),Q=M.slice(),ee=Object.create(null);let le,me,ve,Ae,we,Re,Ue;for(le=0,me=0;le<M.length;le++)ve=M[le],Object.prototype.hasOwnProperty.call(q,ve)?me++:(I.push({command:rr.removeLayer,args:[ve]}),Q.splice(Q.indexOf(ve,me),1));for(le=0,me=0;le<$.length;le++)ve=$[$.length-1-le],Q[Q.length-1-le]!==ve&&(Object.prototype.hasOwnProperty.call(N,ve)?(I.push({command:rr.removeLayer,args:[ve]}),Q.splice(Q.lastIndexOf(ve,Q.length-me),1)):me++,Re=Q[Q.length-le],I.push({command:rr.addLayer,args:[q[ve],Re]}),Q.splice(Q.length-le,0,ve),ee[ve]=!0);for(le=0;le<$.length;le++)if(ve=$[le],Ae=N[ve],we=q[ve],!ee[ve]&&!qt(Ae,we))if(qt(Ae.source,we.source)&&qt(Ae["source-layer"],we["source-layer"])&&qt(Ae.type,we.type)){for(Ue in Gt(Ae.layout,we.layout,I,ve,null,rr.setLayoutProperty),Gt(Ae.paint,we.paint,I,ve,null,rr.setPaintProperty),qt(Ae.filter,we.filter)||I.push({command:rr.setFilter,args:[ve,we.filter]}),qt(Ae.minzoom,we.minzoom)&&qt(Ae.maxzoom,we.maxzoom)||I.push({command:rr.setLayerZoomRange,args:[ve,we.minzoom,we.maxzoom]}),Ae)Object.prototype.hasOwnProperty.call(Ae,Ue)&&Ue!=="layout"&&Ue!=="paint"&&Ue!=="filter"&&Ue!=="metadata"&&Ue!=="minzoom"&&Ue!=="maxzoom"&&(Ue.indexOf("paint.")===0?Gt(Ae[Ue],we[Ue],I,ve,Ue.slice(6),rr.setPaintProperty):qt(Ae[Ue],we[Ue])||I.push({command:rr.setLayerProperty,args:[ve,Ue,we[Ue]]}));for(Ue in we)Object.prototype.hasOwnProperty.call(we,Ue)&&!Object.prototype.hasOwnProperty.call(Ae,Ue)&&Ue!=="layout"&&Ue!=="paint"&&Ue!=="filter"&&Ue!=="metadata"&&Ue!=="minzoom"&&Ue!=="maxzoom"&&(Ue.indexOf("paint.")===0?Gt(Ae[Ue],we[Ue],I,ve,Ue.slice(6),rr.setPaintProperty):qt(Ae[Ue],we[Ue])||I.push({command:rr.setLayerProperty,args:[ve,Ue,we[Ue]]}))}else I.push({command:rr.removeLayer,args:[ve]}),Re=Q[Q.lastIndexOf(ve)+1],I.push({command:rr.addLayer,args:[we,Re]})}(v,n.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:rr.setStyle,args:[n]}]}return s},l.aF=function(a){const n=[],s=a.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),a.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},l.aG=function a(n,s){if(Array.isArray(n)){if(!Array.isArray(s)||n.length!==s.length)return!1;for(let h=0;h<n.length;h++)if(!a(n[h],s[h]))return!1;return!0}if(typeof n=="object"&&n!==null&&s!==null){if(typeof s!="object"||Object.keys(n).length!==Object.keys(s).length)return!1;for(const h in n)if(!a(n[h],s[h]))return!1;return!0}return n===s},l.aH=xe,l.aI=Ie,l.aJ=Ul,l.aK=function(a){return a({pluginStatus:Ri,pluginURL:Va}),Ul.on("pluginStateChange",a),a},l.aL=class extends ps{constructor(a,n){super(a,n),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},l.aM=Xc,l.aN=class extends ps{constructor(a,n){super(a,n),this.current=Pv}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let n=1;n<16;n++)if(a[n]!==this.current[n]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},l.aO=Gf,l.aP=class extends ps{constructor(a,n){super(a,n),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},l.aQ=class extends ps{constructor(a,n){super(a,n),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},l.aR=qf,l.aS=function(a,n,s,h,f,v,x){var S=1/(n-s),I=1/(h-f),M=1/(v-x);return a[0]=-2*S,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*I,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*M,a[11]=0,a[12]=(n+s)*S,a[13]=(f+h)*I,a[14]=(x+v)*M,a[15]=1,a},l.aT=vr,l.aU=Uz,l.aV=class extends p{},l.aW=BM,l.aX=class extends _{},l.aY=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},l.aZ=Vb,l.a_=dt,l.aa=function(a){const n={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,f,v)=>{const x=f||v;return n[h]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n},l.ab=function(a,n){const s=[];for(const h in a)h in n||s.push(h);return s},l.ac=function(a){if($e==null){const n=a.navigator?a.navigator.userAgent:null;$e=!!a.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return $e},l.ad=se,l.ae=function(a,n,s){var h=Math.sin(s),f=Math.cos(s),v=n[0],x=n[1],S=n[2],I=n[3],M=n[4],$=n[5],N=n[6],q=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=v*f+M*h,a[1]=x*f+$*h,a[2]=S*f+N*h,a[3]=I*f+q*h,a[4]=M*f-v*h,a[5]=$*f-x*h,a[6]=N*f-S*h,a[7]=q*f-I*h,a},l.af=function(a){var n=new Yc(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},l.ag=Jf,l.ah=function(a,n){let s=0,h=0;if(a.kind==="constant")h=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:f,minZoom:v,maxZoom:x}=a,S=f?se(Ji.interpolationFactor(f,n,v,x),0,1):0;a.kind==="camera"?h=Xi.number(a.minSize,a.maxSize,S):s=S}return{uSizeT:s,uSize:h}},l.aj=function(a,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:f}){return a.kind==="source"?h/Ha:a.kind==="composite"?Xi.number(h/Ha,f/Ha,s):n},l.ak=e0,l.al=function(a,n,s,h){const f=n.y-a.y,v=n.x-a.x,x=h.y-s.y,S=h.x-s.x,I=x*v-S*f;if(I===0)return null;const M=(S*(a.y-s.y)-x*(a.x-s.x))/I;return new z(a.x+M*v,a.y+M*f)},l.am=Hw,l.an=Mb,l.ao=Av,l.ap=Hn,l.ar=Qv,l.as=function(a,n){var s=n[0],h=n[1],f=n[2],v=n[3],x=n[4],S=n[5],I=n[6],M=n[7],$=n[8],N=n[9],q=n[10],Q=n[11],ee=n[12],le=n[13],me=n[14],ve=n[15],Ae=s*S-h*x,we=s*I-f*x,Re=s*M-v*x,Ue=h*I-f*S,rt=h*M-v*S,It=f*M-v*I,Bt=$*le-N*ee,Ct=$*me-q*ee,_t=$*ve-Q*ee,ft=N*me-q*le,Rt=N*ve-Q*le,gt=q*ve-Q*me,ct=Ae*gt-we*Rt+Re*ft+Ue*_t-rt*Ct+It*Bt;return ct?(a[0]=(S*gt-I*Rt+M*ft)*(ct=1/ct),a[1]=(f*Rt-h*gt-v*ft)*ct,a[2]=(le*It-me*rt+ve*Ue)*ct,a[3]=(q*rt-N*It-Q*Ue)*ct,a[4]=(I*_t-x*gt-M*Ct)*ct,a[5]=(s*gt-f*_t+v*Ct)*ct,a[6]=(me*Re-ee*It-ve*we)*ct,a[7]=($*It-q*Re+Q*we)*ct,a[8]=(x*Rt-S*_t+M*Bt)*ct,a[9]=(h*_t-s*Rt-v*Bt)*ct,a[10]=(ee*rt-le*Re+ve*Ae)*ct,a[11]=(N*Re-$*rt-Q*Ae)*ct,a[12]=(S*Ct-x*ft-I*Bt)*ct,a[13]=(s*ft-h*Ct+f*Bt)*ct,a[14]=(le*we-ee*Ue-me*Ae)*ct,a[15]=($*Ue-N*we+q*Ae)*ct,a):null},l.at=l0,l.au=Yv,l.av=c0,l.aw=function(){const a={},n=Ve.$version;for(const s in Ve.$root){const h=Ve.$root[s];if(h.required){let f=null;f=s==="version"?n:h.type==="array"?[]:{},f!=null&&(a[s]=f)}}return a},l.ax=rr,l.ay=Bf,l.az=pt,l.b=function(a,n){const s=new Blob([new Uint8Array(a)],{type:"image/png"});createImageBitmap(s).then(h=>{n(null,h)}).catch(h=>{n(new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})},l.b0=ai,l.b1=function(a,n){var s=a[0],h=a[1],f=a[2],v=a[3],x=a[4],S=a[5],I=a[6],M=a[7],$=a[8],N=a[9],q=a[10],Q=a[11],ee=a[12],le=a[13],me=a[14],ve=a[15],Ae=n[0],we=n[1],Re=n[2],Ue=n[3],rt=n[4],It=n[5],Bt=n[6],Ct=n[7],_t=n[8],ft=n[9],Rt=n[10],gt=n[11],ct=n[12],Jt=n[13],jt=n[14],mr=n[15];return Math.abs(s-Ae)<=$i*Math.max(1,Math.abs(s),Math.abs(Ae))&&Math.abs(h-we)<=$i*Math.max(1,Math.abs(h),Math.abs(we))&&Math.abs(f-Re)<=$i*Math.max(1,Math.abs(f),Math.abs(Re))&&Math.abs(v-Ue)<=$i*Math.max(1,Math.abs(v),Math.abs(Ue))&&Math.abs(x-rt)<=$i*Math.max(1,Math.abs(x),Math.abs(rt))&&Math.abs(S-It)<=$i*Math.max(1,Math.abs(S),Math.abs(It))&&Math.abs(I-Bt)<=$i*Math.max(1,Math.abs(I),Math.abs(Bt))&&Math.abs(M-Ct)<=$i*Math.max(1,Math.abs(M),Math.abs(Ct))&&Math.abs($-_t)<=$i*Math.max(1,Math.abs($),Math.abs(_t))&&Math.abs(N-ft)<=$i*Math.max(1,Math.abs(N),Math.abs(ft))&&Math.abs(q-Rt)<=$i*Math.max(1,Math.abs(q),Math.abs(Rt))&&Math.abs(Q-gt)<=$i*Math.max(1,Math.abs(Q),Math.abs(gt))&&Math.abs(ee-ct)<=$i*Math.max(1,Math.abs(ee),Math.abs(ct))&&Math.abs(le-Jt)<=$i*Math.max(1,Math.abs(le),Math.abs(Jt))&&Math.abs(me-jt)<=$i*Math.max(1,Math.abs(me),Math.abs(jt))&&Math.abs(ve-mr)<=$i*Math.max(1,Math.abs(ve),Math.abs(mr))},l.b2=function(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},l.b3=function(a,n,s){return a[0]=n[0]*s[0],a[1]=n[1]*s[1],a[2]=n[2]*s[2],a[3]=n[3]*s[3],a},l.b4=function(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]},l.b5=ie,l.b6=Bw,l.b7=Rw,l.b8=function(a,n,s,h,f){var v,x=1/Math.tan(n/2);return a[0]=x/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=x,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,f!=null&&f!==1/0?(a[10]=(f+h)*(v=1/(h-f)),a[14]=2*f*h*v):(a[10]=-1,a[14]=-2*h),a},l.b9=function(a,n,s){var h=Math.sin(s),f=Math.cos(s),v=n[4],x=n[5],S=n[6],I=n[7],M=n[8],$=n[9],N=n[10],q=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=v*f+M*h,a[5]=x*f+$*h,a[6]=S*f+N*h,a[7]=I*f+q*h,a[8]=M*f-v*h,a[9]=$*f-x*h,a[10]=N*f-S*h,a[11]=q*f-I*h,a},l.bA=T,l.bB=cw,l.bC=Fc,l.bD=Qi,l.ba=re,l.bb=J,l.bc=function(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},l.bd=class extends Gl{},l.be=i0,l.bf=Lw,l.bg=_D,l.bi=qe,l.bj=function(a,n,s=!1){if(Ri===Wd||Ri===Gd||Ri===qd)throw new Error("setRTLTextPlugin cannot be called multiple times.");Va=er.resolveURL(a),Ri=Wd,Zd=n,Kd(),s||jf()},l.bk=Xd,l.bl=function(a,n){const s={};for(let f=0;f<a.length;f++){const v=n&&n[a[f].id]||Uc(a[f]);n&&(n[a[f].id]=v);let x=s[v];x||(x=s[v]=[]),x.push(a[f])}const h=[];for(const f in s)h.push(s[f]);return h},l.bm=Dt,l.bn=Fw,l.bo=jw,l.bp=vw,l.bq=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=Bn/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const n=a.bucket.layers[0],s=n.layout,h=n._unevaluatedLayout._values,f={layoutIconSize:h["icon-size"].possiblyEvaluate(new an(a.bucket.zoom+1),a.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new an(a.bucket.zoom+1),a.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new an(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:M,maxZoom:$}=a.bucket.textSizeData;f.compositeTextSizes=[h["text-size"].possiblyEvaluate(new an(M),a.canonical),h["text-size"].possiblyEvaluate(new an($),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:M,maxZoom:$}=a.bucket.iconSizeData;f.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new an(M),a.canonical),h["icon-size"].possiblyEvaluate(new an($),a.canonical)]}const v=s.get("text-line-height")*Hn,x=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",S=s.get("text-keep-upright"),I=s.get("text-size");for(const M of a.bucket.features){const $=s.get("text-font").evaluate(M,{},a.canonical).join(","),N=I.evaluate(M,{},a.canonical),q=f.layoutTextSize.evaluate(M,{},a.canonical),Q=f.layoutIconSize.evaluate(M,{},a.canonical),ee={horizontal:{},vertical:void 0},le=M.text;let me,ve=[0,0];if(le){const Re=le.toString(),Ue=s.get("text-letter-spacing").evaluate(M,{},a.canonical)*Hn,rt=Ud(Re)?Ue:0,It=s.get("text-anchor").evaluate(M,{},a.canonical),Bt=Qw(n,M,a.canonical);if(!Bt){const gt=s.get("text-radial-offset").evaluate(M,{},a.canonical);ve=gt?Yw(It,[gt*Hn,s0]):s.get("text-offset").evaluate(M,{},a.canonical).map(ct=>ct*Hn)}let Ct=x?"center":s.get("text-justify").evaluate(M,{},a.canonical);const _t=s.get("symbol-placement"),ft=_t==="point"?s.get("text-max-width").evaluate(M,{},a.canonical)*Hn:0,Rt=()=>{a.bucket.allowVerticalPlacement&&Vd(Re)&&(ee.vertical=im(le,a.glyphMap,a.glyphPositions,a.imagePositions,$,ft,v,It,"left",rt,ve,l.ai.vertical,!0,_t,q,N))};if(!x&&Bt){const gt=new Set;if(Ct==="auto")for(let Jt=0;Jt<Bt.values.length;Jt+=2)gt.add(l0(Bt.values[Jt]));else gt.add(Ct);let ct=!1;for(const Jt of gt)if(!ee.horizontal[Jt])if(ct)ee.horizontal[Jt]=ee.horizontal[0];else{const jt=im(le,a.glyphMap,a.glyphPositions,a.imagePositions,$,ft,v,"center",Jt,rt,ve,l.ai.horizontal,!1,_t,q,N);jt&&(ee.horizontal[Jt]=jt,ct=jt.positionedLines.length===1)}Rt()}else{Ct==="auto"&&(Ct=l0(It));const gt=im(le,a.glyphMap,a.glyphPositions,a.imagePositions,$,ft,v,It,Ct,rt,ve,l.ai.horizontal,!1,_t,q,N);gt&&(ee.horizontal[Ct]=gt),Rt(),Vd(Re)&&x&&S&&(ee.vertical=im(le,a.glyphMap,a.glyphPositions,a.imagePositions,$,ft,v,It,Ct,rt,ve,l.ai.vertical,!1,_t,q,N))}}let Ae=!1;if(M.icon&&M.icon.name){const Re=a.imageMap[M.icon.name];Re&&(me=eD(a.imagePositions[M.icon.name],s.get("icon-offset").evaluate(M,{},a.canonical),s.get("icon-anchor").evaluate(M,{},a.canonical)),Ae=!!Re.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=Ae:a.bucket.sdfIcons!==Ae&&Ye("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Re.pixelRatio!==a.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const we=tS(ee.horizontal)||ee.vertical;a.bucket.iconsInText=!!we&&we.iconsInText,(we||me)&&yD(a.bucket,M,ee,me,a.imageMap,f,q,Q,ve,Ae,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},l.br=Gv,l.bs=Uv,l.bt=Wv,l.bu=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},l.bv=Zv,l.bw=Zs,l.bx=function(a,n,s,h,f){return b(this,void 0,void 0,function*(){if(R())try{return yield at(a,n,s,h,f)}catch{}return function(v,x,S,I,M){const $=v.width,N=v.height;ut&&Pt||(ut=new OffscreenCanvas($,N),Pt=ut.getContext("2d",{willReadFrequently:!0})),ut.width=$,ut.height=N,Pt.drawImage(v,0,0,$,N);const q=Pt.getImageData(x,S,I,M);return Pt.clearRect(0,0,$,N),q.data}(a,n,s,h,f)})},l.by=Ow,l.bz=w,l.c=lt,l.d=function(a,n){const s=new Image;s.onload=()=>{n(null,s),URL.revokeObjectURL(s.src),s.onload=null,window.requestAnimationFrame(()=>{s.src=Qe})},s.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(a)],{type:"image/png"});s.src=a.byteLength?URL.createObjectURL(h):Qe},l.e=Z,l.f=function(a,n){return Kt(Z(a,{type:"json"}),n)},l.g=yt,l.h=er,l.i=Fe,l.j=Mt,l.k=ur,l.l=Mr,l.m=Kt,l.n=function(a){return new Zv(a).readFields(ZM,[])},l.o=function(a,n,s){if(!a.length)return s(null,[]);let h=a.length;const f=new Array(a.length);let v=null;a.forEach((x,S)=>{n(x,(I,M)=>{I&&(v=I),f[S]=M,--h==0&&s(v,f)})})},l.p=yw,l.q=ch,l.r=zn,l.s=lr,l.t=Cv,l.u=kt,l.v=Ve,l.w=Ye,l.x=Gc,l.y=va,l.z=function([a,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:a*Math.cos(n)*Math.sin(s),y:a*Math.sin(n)*Math.sin(s),z:a*Math.cos(s)}}}),d(["./shared"],function(l){class b{constructor(H){this.keyCache={},H&&this.replace(H)}replace(H){this._layerConfigs={},this._layers={},this.update(H,[])}update(H,G){for(const de of H){this._layerConfigs[de.id]=de;const fe=this._layers[de.id]=l.aC(de);fe._featureFilter=l.a6(fe.filter),this.keyCache[de.id]&&delete this.keyCache[de.id]}for(const de of G)delete this.keyCache[de],delete this._layerConfigs[de],delete this._layers[de];this.familiesBySource={};const te=l.bl(Object.values(this._layerConfigs),this.keyCache);for(const de of te){const fe=de.map(ne=>this._layers[ne.id]),Me=fe[0];if(Me.visibility==="none")continue;const be=Me.source||"";let ye=this.familiesBySource[be];ye||(ye=this.familiesBySource[be]={});const Ee=Me.sourceLayer||"_geojsonTileLayer";let Xe=ye[Ee];Xe||(Xe=ye[Ee]=[]),Xe.push(fe)}}}class w{constructor(H){const G={},te=[];for(const be in H){const ye=H[be],Ee=G[be]={};for(const Xe in ye){const ne=ye[+Xe];if(!ne||ne.bitmap.width===0||ne.bitmap.height===0)continue;const oe={x:0,y:0,w:ne.bitmap.width+2,h:ne.bitmap.height+2};te.push(oe),Ee[Xe]={rect:oe,metrics:ne.metrics}}}const{w:de,h:fe}=l.p(te),Me=new l.q({width:de||1,height:fe||1});for(const be in H){const ye=H[be];for(const Ee in ye){const Xe=ye[+Ee];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;const ne=G[be][Ee].rect;l.q.copy(Xe.bitmap,Me,{x:0,y:0},{x:ne.x+1,y:ne.y+1},Xe.bitmap)}}this.image=Me,this.positions=G}}l.bm("GlyphAtlas",w);class T{constructor(H){this.tileID=new l.O(H.tileID.overscaledZ,H.tileID.wrap,H.tileID.canonical.z,H.tileID.canonical.x,H.tileID.canonical.y),this.uid=H.uid,this.zoom=H.zoom,this.pixelRatio=H.pixelRatio,this.tileSize=H.tileSize,this.source=H.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=H.showCollisionBoxes,this.collectResourceTiming=!!H.collectResourceTiming,this.returnDependencies=!!H.returnDependencies,this.promoteId=H.promoteId,this.inFlightDependencies=[],this.dependencySentinel=-1}parse(H,G,te,de,fe){this.status="parsing",this.data=H,this.collisionBoxArray=new l.a3;const Me=new l.bn(Object.keys(H.layers).sort()),be=new l.bo(this.tileID,this.promoteId);be.bucketLayerIDs=[];const ye={},Ee={featureIndex:be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:te},Xe=G.familiesBySource[this.source];for(const Je in Xe){const ot=H.layers[Je];if(!ot)continue;ot.version===1&&l.w(`Vector tile source "${this.source}" layer "${Je}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ft=Me.encode(Je),Tt=[];for(let Xt=0;Xt<ot.length;Xt++){const ar=ot.feature(Xt),Wr=be.getId(ar,Je);Tt.push({feature:ar,id:Wr,index:Xt,sourceLayerIndex:Ft})}for(const Xt of Xe[Je]){const ar=Xt[0];ar.source!==this.source&&l.w(`layer.source = ${ar.source} does not equal this.source = ${this.source}`),ar.minzoom&&this.zoom<Math.floor(ar.minzoom)||ar.maxzoom&&this.zoom>=ar.maxzoom||ar.visibility!=="none"&&(E(Xt,this.zoom,te),(ye[ar.id]=ar.createBucket({index:be.bucketLayerIDs.length,layers:Xt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ft,sourceID:this.source})).populate(Tt,Ee,this.tileID.canonical),be.bucketLayerIDs.push(Xt.map(Wr=>Wr.id)))}}let ne,oe,Ce,je;const Ze=l.aH(Ee.glyphDependencies,Je=>Object.keys(Je).map(Number));this.inFlightDependencies.forEach(Je=>Je==null?void 0:Je.cancel()),this.inFlightDependencies=[];const et=++this.dependencySentinel;Object.keys(Ze).length?this.inFlightDependencies.push(de.send("getGlyphs",{uid:this.uid,stacks:Ze,source:this.source,tileID:this.tileID,type:"glyphs"},(Je,ot)=>{et===this.dependencySentinel&&(ne||(ne=Je,oe=ot,Ke.call(this)))})):oe={};const Se=Object.keys(Ee.iconDependencies);Se.length?this.inFlightDependencies.push(de.send("getImages",{icons:Se,source:this.source,tileID:this.tileID,type:"icons"},(Je,ot)=>{et===this.dependencySentinel&&(ne||(ne=Je,Ce=ot,Ke.call(this)))})):Ce={};const _e=Object.keys(Ee.patternDependencies);function Ke(){if(ne)return fe(ne);if(oe&&Ce&&je){const Je=new w(oe),ot=new l.bp(Ce,je);for(const Ft in ye){const Tt=ye[Ft];Tt instanceof l.a4?(E(Tt.layers,this.zoom,te),l.bq({bucket:Tt,glyphMap:oe,glyphPositions:Je.positions,imageMap:Ce,imagePositions:ot.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Tt.hasPattern&&(Tt instanceof l.br||Tt instanceof l.bs||Tt instanceof l.bt)&&(E(Tt.layers,this.zoom,te),Tt.addFeatures(Ee,this.tileID.canonical,ot.patternPositions))}this.status="done",fe(null,{buckets:Object.values(ye).filter(Ft=>!Ft.isEmpty()),featureIndex:be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Je.image,imageAtlas:ot,glyphMap:this.returnDependencies?oe:null,iconMap:this.returnDependencies?Ce:null,glyphPositions:this.returnDependencies?Je.positions:null})}}_e.length?this.inFlightDependencies.push(de.send("getImages",{icons:_e,source:this.source,tileID:this.tileID,type:"patterns"},(Je,ot)=>{et===this.dependencySentinel&&(ne||(ne=Je,je=ot,Ke.call(this)))})):je={},Ke.call(this)}}function E(he,H,G){const te=new l.a8(H);for(const de of he)de.recalculate(te,G)}function z(he,H){const G=l.l(he.request,(te,de,fe,Me)=>{if(te)H(te);else if(de)try{const be=new l.bw.VectorTile(new l.bv(de));H(null,{vectorTile:be,rawData:de,cacheControl:fe,expires:Me})}catch(be){const ye=new Uint8Array(de);let Ee=`Unable to parse the tile at ${he.request.url}, `;Ee+=ye[0]===31&&ye[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${be.messge}`,H(new Error(Ee))}});return()=>{G.cancel(),H()}}class j{constructor(H,G,te,de){this.actor=H,this.layerIndex=G,this.availableImages=te,this.loadVectorData=de||z,this.fetching={},this.loading={},this.loaded={}}loadTile(H,G){const te=H.uid;this.loading||(this.loading={});const de=!!(H&&H.request&&H.request.collectResourceTiming)&&new l.bu(H.request),fe=this.loading[te]=new T(H);fe.abort=this.loadVectorData(H,(Me,be)=>{if(delete this.loading[te],Me||!be)return fe.status="done",this.loaded[te]=fe,G(Me);const ye=be.rawData,Ee={};be.expires&&(Ee.expires=be.expires),be.cacheControl&&(Ee.cacheControl=be.cacheControl);const Xe={};if(de){const ne=de.finish();ne&&(Xe.resourceTiming=JSON.parse(JSON.stringify(ne)))}fe.vectorTile=be.vectorTile,fe.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,(ne,oe)=>{if(delete this.fetching[te],ne||!oe)return G(ne);G(null,l.e({rawTileData:ye.slice(0)},oe,Ee,Xe))}),this.loaded=this.loaded||{},this.loaded[te]=fe,this.fetching[te]={rawTileData:ye,cacheControl:Ee,resourceTiming:Xe}})}reloadTile(H,G){const te=this.loaded,de=H.uid;if(te&&te[de]){const fe=te[de];fe.showCollisionBoxes=H.showCollisionBoxes,fe.status==="parsing"?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Me,be)=>{if(Me||!be)return G(Me,be);let ye;if(this.fetching[de]){const{rawTileData:Ee,cacheControl:Xe,resourceTiming:ne}=this.fetching[de];delete this.fetching[de],ye=l.e({rawTileData:Ee.slice(0)},be,Xe,ne)}else ye=be;G(null,ye)}):fe.status==="done"&&(fe.vectorTile?fe.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor,G):G())}}abortTile(H,G){const te=this.loading,de=H.uid;te&&te[de]&&te[de].abort&&(te[de].abort(),delete te[de]),G()}removeTile(H,G){const te=this.loaded,de=H.uid;te&&te[de]&&delete te[de],G()}}class U{constructor(){this.loaded={}}loadTile(H,G){return l._(this,void 0,void 0,function*(){const{uid:te,encoding:de,rawImageData:fe,redFactor:Me,greenFactor:be,blueFactor:ye,baseShift:Ee}=H,Xe=fe.width+2,ne=fe.height+2,oe=l.a(fe)?new l.R({width:Xe,height:ne},yield l.bx(fe,-1,-1,Xe,ne)):fe,Ce=new l.by(te,oe,de,Me,be,ye,Ee);this.loaded=this.loaded||{},this.loaded[te]=Ce,G(null,Ce)})}removeTile(H){const G=this.loaded,te=H.uid;G&&G[te]&&delete G[te]}}function V(he,H){if(he.length!==0){K(he[0],H);for(var G=1;G<he.length;G++)K(he[G],!H)}}function K(he,H){for(var G=0,te=0,de=0,fe=he.length,Me=fe-1;de<fe;Me=de++){var be=(he[de][0]-he[Me][0])*(he[Me][1]+he[de][1]),ye=G+be;te+=Math.abs(G)>=Math.abs(be)?G-ye+be:be-ye+G,G=ye}G+te>=0!=!!H&&he.reverse()}var O=l.bz(function he(H,G){var te,de=H&&H.type;if(de==="FeatureCollection")for(te=0;te<H.features.length;te++)he(H.features[te],G);else if(de==="GeometryCollection")for(te=0;te<H.geometries.length;te++)he(H.geometries[te],G);else if(de==="Feature")he(H.geometry,G);else if(de==="Polygon")V(H.coordinates,G);else if(de==="MultiPolygon")for(te=0;te<H.coordinates.length;te++)V(H.coordinates[te],G);return H});const L=l.bw.VectorTileFeature.prototype.toGeoJSON;var R={exports:{}},re=l.bA,J=l.bw.VectorTileFeature,se=ie;function ie(he,H){this.options=H||{},this.features=he,this.length=he.length}function Z(he,H){this.id=typeof he.id=="number"?he.id:void 0,this.type=he.type,this.rawGeometry=he.type===1?[he.geometry]:he.geometry,this.properties=he.tags,this.extent=H||4096}ie.prototype.feature=function(he){return new Z(this.features[he],this.options.extent)},Z.prototype.loadGeometry=function(){var he=this.rawGeometry;this.geometry=[];for(var H=0;H<he.length;H++){for(var G=he[H],te=[],de=0;de<G.length;de++)te.push(new re(G[de][0],G[de][1]));this.geometry.push(te)}return this.geometry},Z.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var he=this.geometry,H=1/0,G=-1/0,te=1/0,de=-1/0,fe=0;fe<he.length;fe++)for(var Me=he[fe],be=0;be<Me.length;be++){var ye=Me[be];H=Math.min(H,ye.x),G=Math.max(G,ye.x),te=Math.min(te,ye.y),de=Math.max(de,ye.y)}return[H,te,G,de]},Z.prototype.toGeoJSON=J.prototype.toGeoJSON;var ke=l.bB,xe=se;function Ie(he){var H=new ke;return function(G,te){for(var de in G.layers)te.writeMessage(3,ze,G.layers[de])}(he,H),H.finish()}function ze(he,H){var G;H.writeVarintField(15,he.version||1),H.writeStringField(1,he.name||""),H.writeVarintField(5,he.extent||4096);var te={keys:[],values:[],keycache:{},valuecache:{}};for(G=0;G<he.length;G++)te.feature=he.feature(G),H.writeMessage(2,Le,te);var de=te.keys;for(G=0;G<de.length;G++)H.writeStringField(3,de[G]);var fe=te.values;for(G=0;G<fe.length;G++)H.writeMessage(4,$e,fe[G])}function Le(he,H){var G=he.feature;G.id!==void 0&&H.writeVarintField(1,G.id),H.writeMessage(2,Ye,he),H.writeVarintField(3,G.type),H.writeMessage(4,Fe,G)}function Ye(he,H){var G=he.feature,te=he.keys,de=he.values,fe=he.keycache,Me=he.valuecache;for(var be in G.properties){var ye=G.properties[be],Ee=fe[be];if(ye!==null){Ee===void 0&&(te.push(be),fe[be]=Ee=te.length-1),H.writeVarint(Ee);var Xe=typeof ye;Xe!=="string"&&Xe!=="boolean"&&Xe!=="number"&&(ye=JSON.stringify(ye));var ne=Xe+":"+ye,oe=Me[ne];oe===void 0&&(de.push(ye),Me[ne]=oe=de.length-1),H.writeVarint(oe)}}}function Ge(he,H){return(H<<3)+(7&he)}function Te(he){return he<<1^he>>31}function Fe(he,H){for(var G=he.loadGeometry(),te=he.type,de=0,fe=0,Me=G.length,be=0;be<Me;be++){var ye=G[be],Ee=1;te===1&&(Ee=ye.length),H.writeVarint(Ge(1,Ee));for(var Xe=te===3?ye.length-1:ye.length,ne=0;ne<Xe;ne++){ne===1&&te!==1&&H.writeVarint(Ge(2,Xe-1));var oe=ye[ne].x-de,Ce=ye[ne].y-fe;H.writeVarint(Te(oe)),H.writeVarint(Te(Ce)),de+=oe,fe+=Ce}te===3&&H.writeVarint(Ge(7,1))}}function $e(he,H){var G=typeof he;G==="string"?H.writeStringField(1,he):G==="boolean"?H.writeBooleanField(7,he):G==="number"&&(he%1!=0?H.writeDoubleField(3,he):he<0?H.writeSVarintField(6,he):H.writeVarintField(5,he))}R.exports=Ie,R.exports.fromVectorTileJs=Ie,R.exports.fromGeojsonVt=function(he,H){H=H||{};var G={};for(var te in he)G[te]=new xe(he[te].features,H),G[te].name=te,G[te].version=H.version,G[te].extent=H.extent;return Ie({layers:G})},R.exports.GeoJSONWrapper=xe;var Oe=l.bz(R.exports);const Qe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:he=>he},at=Math.fround||(ut=new Float32Array(1),he=>(ut[0]=+he,ut[0]));var ut;const Pt=3,wt=5,zt=6;class er{constructor(H){this.options=Object.assign(Object.create(Qe),H),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(H){const{log:G,minZoom:te,maxZoom:de}=this.options;G&&console.time("total time");const fe=`prepare ${H.length} points`;G&&console.time(fe),this.points=H;const Me=[];for(let ye=0;ye<H.length;ye++){const Ee=H[ye];if(!Ee.geometry)continue;const[Xe,ne]=Ee.geometry.coordinates,oe=at(pt(Xe)),Ce=at(yt(ne));Me.push(oe,Ce,1/0,ye,-1,1),this.options.reduce&&Me.push(0)}let be=this.trees[de+1]=this._createTree(Me);G&&console.timeEnd(fe);for(let ye=de;ye>=te;ye--){const Ee=+Date.now();be=this.trees[ye]=this._createTree(this._cluster(be,ye)),G&&console.log("z%d: %d clusters in %dms",ye,be.numItems,+Date.now()-Ee)}return G&&console.timeEnd("total time"),this}getClusters(H,G){let te=((H[0]+180)%360+360)%360-180;const de=Math.max(-90,Math.min(90,H[1]));let fe=H[2]===180?180:((H[2]+180)%360+360)%360-180;const Me=Math.max(-90,Math.min(90,H[3]));if(H[2]-H[0]>=360)te=-180,fe=180;else if(te>fe){const ne=this.getClusters([te,de,180,Me],G),oe=this.getClusters([-180,de,fe,Me],G);return ne.concat(oe)}const be=this.trees[this._limitZoom(G)],ye=be.range(pt(te),yt(Me),pt(fe),yt(de)),Ee=be.data,Xe=[];for(const ne of ye){const oe=this.stride*ne;Xe.push(Ee[oe+wt]>1?lt(Ee,oe,this.clusterProps):this.points[Ee[oe+Pt]])}return Xe}getChildren(H){const G=this._getOriginId(H),te=this._getOriginZoom(H),de="No cluster with the specified id.",fe=this.trees[te];if(!fe)throw new Error(de);const Me=fe.data;if(G*this.stride>=Me.length)throw new Error(de);const be=this.options.radius/(this.options.extent*Math.pow(2,te-1)),ye=fe.within(Me[G*this.stride],Me[G*this.stride+1],be),Ee=[];for(const Xe of ye){const ne=Xe*this.stride;Me[ne+4]===H&&Ee.push(Me[ne+wt]>1?lt(Me,ne,this.clusterProps):this.points[Me[ne+Pt]])}if(Ee.length===0)throw new Error(de);return Ee}getLeaves(H,G,te){const de=[];return this._appendLeaves(de,H,G=G||10,te=te||0,0),de}getTile(H,G,te){const de=this.trees[this._limitZoom(H)],fe=Math.pow(2,H),{extent:Me,radius:be}=this.options,ye=be/Me,Ee=(te-ye)/fe,Xe=(te+1+ye)/fe,ne={features:[]};return this._addTileFeatures(de.range((G-ye)/fe,Ee,(G+1+ye)/fe,Xe),de.data,G,te,fe,ne),G===0&&this._addTileFeatures(de.range(1-ye/fe,Ee,1,Xe),de.data,fe,te,fe,ne),G===fe-1&&this._addTileFeatures(de.range(0,Ee,ye/fe,Xe),de.data,-1,te,fe,ne),ne.features.length?ne:null}getClusterExpansionZoom(H){let G=this._getOriginZoom(H)-1;for(;G<=this.options.maxZoom;){const te=this.getChildren(H);if(G++,te.length!==1)break;H=te[0].properties.cluster_id}return G}_appendLeaves(H,G,te,de,fe){const Me=this.getChildren(G);for(const be of Me){const ye=be.properties;if(ye&&ye.cluster?fe+ye.point_count<=de?fe+=ye.point_count:fe=this._appendLeaves(H,ye.cluster_id,te,de,fe):fe<de?fe++:H.push(be),H.length===te)break}return fe}_createTree(H){const G=new l.av(H.length/this.stride|0,this.options.nodeSize,Float32Array);for(let te=0;te<H.length;te+=this.stride)G.add(H[te],H[te+1]);return G.finish(),G.data=H,G}_addTileFeatures(H,G,te,de,fe,Me){for(const be of H){const ye=be*this.stride,Ee=G[ye+wt]>1;let Xe,ne,oe;if(Ee)Xe=qe(G,ye,this.clusterProps),ne=G[ye],oe=G[ye+1];else{const Ze=this.points[G[ye+Pt]];Xe=Ze.properties;const[et,Se]=Ze.geometry.coordinates;ne=pt(et),oe=yt(Se)}const Ce={type:1,geometry:[[Math.round(this.options.extent*(ne*fe-te)),Math.round(this.options.extent*(oe*fe-de))]],tags:Xe};let je;je=Ee||this.options.generateId?G[ye+Pt]:this.points[G[ye+Pt]].id,je!==void 0&&(Ce.id=je),Me.features.push(Ce)}}_limitZoom(H){return Math.max(this.options.minZoom,Math.min(Math.floor(+H),this.options.maxZoom+1))}_cluster(H,G){const{radius:te,extent:de,reduce:fe,minPoints:Me}=this.options,be=te/(de*Math.pow(2,G)),ye=H.data,Ee=[],Xe=this.stride;for(let ne=0;ne<ye.length;ne+=Xe){if(ye[ne+2]<=G)continue;ye[ne+2]=G;const oe=ye[ne],Ce=ye[ne+1],je=H.within(ye[ne],ye[ne+1],be),Ze=ye[ne+wt];let et=Ze;for(const Se of je){const _e=Se*Xe;ye[_e+2]>G&&(et+=ye[_e+wt])}if(et>Ze&&et>=Me){let Se,_e=oe*Ze,Ke=Ce*Ze,Je=-1;const ot=((ne/Xe|0)<<5)+(G+1)+this.points.length;for(const Ft of je){const Tt=Ft*Xe;if(ye[Tt+2]<=G)continue;ye[Tt+2]=G;const Xt=ye[Tt+wt];_e+=ye[Tt]*Xt,Ke+=ye[Tt+1]*Xt,ye[Tt+4]=ot,fe&&(Se||(Se=this._map(ye,ne,!0),Je=this.clusterProps.length,this.clusterProps.push(Se)),fe(Se,this._map(ye,Tt)))}ye[ne+4]=ot,Ee.push(_e/et,Ke/et,1/0,ot,-1,et),fe&&Ee.push(Je)}else{for(let Se=0;Se<Xe;Se++)Ee.push(ye[ne+Se]);if(et>1)for(const Se of je){const _e=Se*Xe;if(!(ye[_e+2]<=G)){ye[_e+2]=G;for(let Ke=0;Ke<Xe;Ke++)Ee.push(ye[_e+Ke])}}}}return Ee}_getOriginId(H){return H-this.points.length>>5}_getOriginZoom(H){return(H-this.points.length)%32}_map(H,G,te){if(H[G+wt]>1){const Me=this.clusterProps[H[G+zt]];return te?Object.assign({},Me):Me}const de=this.points[H[G+Pt]].properties,fe=this.options.map(de);return te&&fe===de?Object.assign({},fe):fe}}function lt(he,H,G){return{type:"Feature",id:he[H+Pt],properties:qe(he,H,G),geometry:{type:"Point",coordinates:[(te=he[H],360*(te-.5)),or(he[H+1])]}};var te}function qe(he,H,G){const te=he[H+wt],de=te>=1e4?`${Math.round(te/1e3)}k`:te>=1e3?Math.round(te/100)/10+"k":te,fe=he[H+zt],Me=fe===-1?{}:Object.assign({},G[fe]);return Object.assign(Me,{cluster:!0,cluster_id:he[H+Pt],point_count:te,point_count_abbreviated:de})}function pt(he){return he/360+.5}function yt(he){const H=Math.sin(he*Math.PI/180),G=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return G<0?0:G>1?1:G}function or(he){const H=(180-360*he)*Math.PI/180;return 360*Math.atan(Math.exp(H))/Math.PI-90}function Kt(he,H,G,te){for(var de,fe=te,Me=G-H>>1,be=G-H,ye=he[H],Ee=he[H+1],Xe=he[G],ne=he[G+1],oe=H+3;oe<G;oe+=3){var Ce=Mr(he[oe],he[oe+1],ye,Ee,Xe,ne);if(Ce>fe)de=oe,fe=Ce;else if(Ce===fe){var je=Math.abs(oe-Me);je<be&&(de=oe,be=je)}}fe>te&&(de-H>3&&Kt(he,H,de,te),he[de+2]=fe,G-de>3&&Kt(he,de,G,te))}function Mr(he,H,G,te,de,fe){var Me=de-G,be=fe-te;if(Me!==0||be!==0){var ye=((he-G)*Me+(H-te)*be)/(Me*Me+be*be);ye>1?(G=de,te=fe):ye>0&&(G+=Me*ye,te+=be*ye)}return(Me=he-G)*Me+(be=H-te)*be}function lr(he,H,G,te){var de={id:he===void 0?null:he,type:H,geometry:G,tags:te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(fe){var Me=fe.geometry,be=fe.type;if(be==="Point"||be==="MultiPoint"||be==="LineString")Vt(fe,Me);else if(be==="Polygon"||be==="MultiLineString")for(var ye=0;ye<Me.length;ye++)Vt(fe,Me[ye]);else if(be==="MultiPolygon")for(ye=0;ye<Me.length;ye++)for(var Ee=0;Ee<Me[ye].length;Ee++)Vt(fe,Me[ye][Ee])}(de),de}function Vt(he,H){for(var G=0;G<H.length;G+=3)he.minX=Math.min(he.minX,H[G]),he.minY=Math.min(he.minY,H[G+1]),he.maxX=Math.max(he.maxX,H[G]),he.maxY=Math.max(he.maxY,H[G+1])}function Et(he,H,G,te){if(H.geometry){var de=H.geometry.coordinates,fe=H.geometry.type,Me=Math.pow(G.tolerance/((1<<G.maxZoom)*G.extent),2),be=[],ye=H.id;if(G.promoteId?ye=H.properties[G.promoteId]:G.generateId&&(ye=te||0),fe==="Point")ur(de,be);else if(fe==="MultiPoint")for(var Ee=0;Ee<de.length;Ee++)ur(de[Ee],be);else if(fe==="LineString")Mt(de,be,Me,!1);else if(fe==="MultiLineString"){if(G.lineMetrics){for(Ee=0;Ee<de.length;Ee++)Mt(de[Ee],be=[],Me,!1),he.push(lr(ye,"LineString",be,H.properties));return}Er(de,be,Me,!1)}else if(fe==="Polygon")Er(de,be,Me,!0);else{if(fe!=="MultiPolygon"){if(fe==="GeometryCollection"){for(Ee=0;Ee<H.geometry.geometries.length;Ee++)Et(he,{id:ye,geometry:H.geometry.geometries[Ee],properties:H.properties},G,te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ee=0;Ee<de.length;Ee++){var Xe=[];Er(de[Ee],Xe,Me,!0),be.push(Xe)}}he.push(lr(ye,fe,be,H.properties))}}function ur(he,H){H.push(Ve(he[0])),H.push(Sr(he[1])),H.push(0)}function Mt(he,H,G,te){for(var de,fe,Me=0,be=0;be<he.length;be++){var ye=Ve(he[be][0]),Ee=Sr(he[be][1]);H.push(ye),H.push(Ee),H.push(0),be>0&&(Me+=te?(de*Ee-ye*fe)/2:Math.sqrt(Math.pow(ye-de,2)+Math.pow(Ee-fe,2))),de=ye,fe=Ee}var Xe=H.length-3;H[2]=1,Kt(H,0,Xe,G),H[Xe+2]=1,H.size=Math.abs(Me),H.start=0,H.end=H.size}function Er(he,H,G,te){for(var de=0;de<he.length;de++){var fe=[];Mt(he[de],fe,G,te),H.push(fe)}}function Ve(he){return he/360+.5}function Sr(he){var H=Math.sin(he*Math.PI/180),G=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return G<0?0:G>1?1:G}function Dr(he,H,G,te,de,fe,Me,be){if(te/=H,fe>=(G/=H)&&Me<te)return he;if(Me<G||fe>=te)return null;for(var ye=[],Ee=0;Ee<he.length;Ee++){var Xe=he[Ee],ne=Xe.geometry,oe=Xe.type,Ce=de===0?Xe.minX:Xe.minY,je=de===0?Xe.maxX:Xe.maxY;if(Ce>=G&&je<te)ye.push(Xe);else if(!(je<G||Ce>=te)){var Ze=[];if(oe==="Point"||oe==="MultiPoint")qt(ne,Ze,G,te,de);else if(oe==="LineString")rr(ne,Ze,G,te,de,!1,be.lineMetrics);else if(oe==="MultiLineString")Hr(ne,Ze,G,te,de,!1);else if(oe==="Polygon")Hr(ne,Ze,G,te,de,!0);else if(oe==="MultiPolygon")for(var et=0;et<ne.length;et++){var Se=[];Hr(ne[et],Se,G,te,de,!0),Se.length&&Ze.push(Se)}if(Ze.length){if(be.lineMetrics&&oe==="LineString"){for(et=0;et<Ze.length;et++)ye.push(lr(Xe.id,oe,Ze[et],Xe.tags));continue}oe!=="LineString"&&oe!=="MultiLineString"||(Ze.length===1?(oe="LineString",Ze=Ze[0]):oe="MultiLineString"),oe!=="Point"&&oe!=="MultiPoint"||(oe=Ze.length===3?"Point":"MultiPoint"),ye.push(lr(Xe.id,oe,Ze,Xe.tags))}}}return ye.length?ye:null}function qt(he,H,G,te,de){for(var fe=0;fe<he.length;fe+=3){var Me=he[fe+de];Me>=G&&Me<=te&&(H.push(he[fe]),H.push(he[fe+1]),H.push(he[fe+2]))}}function rr(he,H,G,te,de,fe,Me){for(var be,ye,Ee=Or(he),Xe=de===0?cr:Gt,ne=he.start,oe=0;oe<he.length-3;oe+=3){var Ce=he[oe],je=he[oe+1],Ze=he[oe+2],et=he[oe+3],Se=he[oe+4],_e=de===0?Ce:je,Ke=de===0?et:Se,Je=!1;Me&&(be=Math.sqrt(Math.pow(Ce-et,2)+Math.pow(je-Se,2))),_e<G?Ke>G&&(ye=Xe(Ee,Ce,je,et,Se,G),Me&&(Ee.start=ne+be*ye)):_e>te?Ke<te&&(ye=Xe(Ee,Ce,je,et,Se,te),Me&&(Ee.start=ne+be*ye)):dr(Ee,Ce,je,Ze),Ke<G&&_e>=G&&(ye=Xe(Ee,Ce,je,et,Se,G),Je=!0),Ke>te&&_e<=te&&(ye=Xe(Ee,Ce,je,et,Se,te),Je=!0),!fe&&Je&&(Me&&(Ee.end=ne+be*ye),H.push(Ee),Ee=Or(he)),Me&&(ne+=be)}var ot=he.length-3;Ce=he[ot],je=he[ot+1],Ze=he[ot+2],(_e=de===0?Ce:je)>=G&&_e<=te&&dr(Ee,Ce,je,Ze),ot=Ee.length-3,fe&&ot>=3&&(Ee[ot]!==Ee[0]||Ee[ot+1]!==Ee[1])&&dr(Ee,Ee[0],Ee[1],Ee[2]),Ee.length&&H.push(Ee)}function Or(he){var H=[];return H.size=he.size,H.start=he.start,H.end=he.end,H}function Hr(he,H,G,te,de,fe){for(var Me=0;Me<he.length;Me++)rr(he[Me],H,G,te,de,fe,!1)}function dr(he,H,G,te){he.push(H),he.push(G),he.push(te)}function cr(he,H,G,te,de,fe){var Me=(fe-H)/(te-H);return he.push(fe),he.push(G+(de-G)*Me),he.push(1),Me}function Gt(he,H,G,te,de,fe){var Me=(fe-G)/(de-G);return he.push(H+(te-H)*Me),he.push(fe),he.push(1),Me}function sr(he,H){for(var G=[],te=0;te<he.length;te++){var de,fe=he[te],Me=fe.type;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")de=Tr(fe.geometry,H);else if(Me==="MultiLineString"||Me==="Polygon"){de=[];for(var be=0;be<fe.geometry.length;be++)de.push(Tr(fe.geometry[be],H))}else if(Me==="MultiPolygon")for(de=[],be=0;be<fe.geometry.length;be++){for(var ye=[],Ee=0;Ee<fe.geometry[be].length;Ee++)ye.push(Tr(fe.geometry[be][Ee],H));de.push(ye)}G.push(lr(fe.id,Me,de,fe.tags))}return G}function Tr(he,H){var G=[];G.size=he.size,he.start!==void 0&&(G.start=he.start,G.end=he.end);for(var te=0;te<he.length;te+=3)G.push(he[te]+H,he[te+1],he[te+2]);return G}function Be(he,H){if(he.transformed)return he;var G,te,de,fe=1<<he.z,Me=he.x,be=he.y;for(G=0;G<he.features.length;G++){var ye=he.features[G],Ee=ye.geometry,Xe=ye.type;if(ye.geometry=[],Xe===1)for(te=0;te<Ee.length;te+=2)ye.geometry.push(xt(Ee[te],Ee[te+1],H,fe,Me,be));else for(te=0;te<Ee.length;te++){var ne=[];for(de=0;de<Ee[te].length;de+=2)ne.push(xt(Ee[te][de],Ee[te][de+1],H,fe,Me,be));ye.geometry.push(ne)}}return he.transformed=!0,he}function xt(he,H,G,te,de,fe){return[Math.round(G*(he*te-de)),Math.round(G*(H*te-fe))]}function St(he,H,G,te,de){for(var fe=H===de.maxZoom?0:de.tolerance/((1<<H)*de.extent),Me={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:G,y:te,z:H,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},be=0;be<he.length;be++){Me.numFeatures++,tr(Me,he[be],fe,de);var ye=he[be].minX,Ee=he[be].minY,Xe=he[be].maxX,ne=he[be].maxY;ye<Me.minX&&(Me.minX=ye),Ee<Me.minY&&(Me.minY=Ee),Xe>Me.maxX&&(Me.maxX=Xe),ne>Me.maxY&&(Me.maxY=ne)}return Me}function tr(he,H,G,te){var de=H.geometry,fe=H.type,Me=[];if(fe==="Point"||fe==="MultiPoint")for(var be=0;be<de.length;be+=3)Me.push(de[be]),Me.push(de[be+1]),he.numPoints++,he.numSimplified++;else if(fe==="LineString")vn(Me,de,he,G,!1,!1);else if(fe==="MultiLineString"||fe==="Polygon")for(be=0;be<de.length;be++)vn(Me,de[be],he,G,fe==="Polygon",be===0);else if(fe==="MultiPolygon")for(var ye=0;ye<de.length;ye++){var Ee=de[ye];for(be=0;be<Ee.length;be++)vn(Me,Ee[be],he,G,!0,be===0)}if(Me.length){var Xe=H.tags||null;if(fe==="LineString"&&te.lineMetrics){for(var ne in Xe={},H.tags)Xe[ne]=H.tags[ne];Xe.mapbox_clip_start=de.start/de.size,Xe.mapbox_clip_end=de.end/de.size}var oe={geometry:Me,type:fe==="Polygon"||fe==="MultiPolygon"?3:fe==="LineString"||fe==="MultiLineString"?2:1,tags:Xe};H.id!==null&&(oe.id=H.id),he.features.push(oe)}}function vn(he,H,G,te,de,fe){var Me=te*te;if(te>0&&H.size<(de?Me:te))G.numPoints+=H.length/3;else{for(var be=[],ye=0;ye<H.length;ye+=3)(te===0||H[ye+2]>Me)&&(G.numSimplified++,be.push(H[ye]),be.push(H[ye+1])),G.numPoints++;de&&function(Ee,Xe){for(var ne=0,oe=0,Ce=Ee.length,je=Ce-2;oe<Ce;je=oe,oe+=2)ne+=(Ee[oe]-Ee[je])*(Ee[oe+1]+Ee[je+1]);if(ne>0===Xe)for(oe=0,Ce=Ee.length;oe<Ce/2;oe+=2){var Ze=Ee[oe],et=Ee[oe+1];Ee[oe]=Ee[Ce-2-oe],Ee[oe+1]=Ee[Ce-1-oe],Ee[Ce-2-oe]=Ze,Ee[Ce-1-oe]=et}}(be,fe),he.push(be)}}function nt(he,H){var G=(H=this.options=function(de,fe){for(var Me in fe)de[Me]=fe[Me];return de}(Object.create(this.options),H)).debug;if(G&&console.time("preprocess data"),H.maxZoom<0||H.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(H.promoteId&&H.generateId)throw new Error("promoteId and generateId cannot be used together.");var te=function(de,fe){var Me=[];if(de.type==="FeatureCollection")for(var be=0;be<de.features.length;be++)Et(Me,de.features[be],fe,be);else Et(Me,de.type==="Feature"?de:{geometry:de},fe);return Me}(he,H);this.tiles={},this.tileCoords=[],G&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",H.indexMaxZoom,H.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),te=function(de,fe){var Me=fe.buffer/fe.extent,be=de,ye=Dr(de,1,-1-Me,Me,0,-1,2,fe),Ee=Dr(de,1,1-Me,2+Me,0,-1,2,fe);return(ye||Ee)&&(be=Dr(de,1,-Me,1+Me,0,-1,2,fe)||[],ye&&(be=sr(ye,1).concat(be)),Ee&&(be=be.concat(sr(Ee,-1)))),be}(te,H),te.length&&this.splitTile(te,0,0,0),G&&(te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Yt(he,H,G){return 32*((1<<he)*G+H)+he}function Ot(he,H){return H?he.properties[H]:he.id}function hr(he,H){if(he==null)return!0;if(he.type==="Feature")return Ot(he,H)!=null;if(he.type==="FeatureCollection"){const G=new Set;for(const te of he.features){const de=Ot(te,H);if(de==null||G.has(de))return!1;G.add(de)}return!0}return!1}function yr(he,H){const G=new Map;if(he!=null)if(he.type==="Feature")G.set(Ot(he,H),he);else for(const te of he.features)G.set(Ot(te,H),te);return G}nt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},nt.prototype.splitTile=function(he,H,G,te,de,fe,Me){for(var be=[he,H,G,te],ye=this.options,Ee=ye.debug;be.length;){te=be.pop(),G=be.pop(),H=be.pop(),he=be.pop();var Xe=1<<H,ne=Yt(H,G,te),oe=this.tiles[ne];if(!oe&&(Ee>1&&console.time("creation"),oe=this.tiles[ne]=St(he,H,G,te,ye),this.tileCoords.push({z:H,x:G,y:te}),Ee)){Ee>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",H,G,te,oe.numFeatures,oe.numPoints,oe.numSimplified),console.timeEnd("creation"));var Ce="z"+H;this.stats[Ce]=(this.stats[Ce]||0)+1,this.total++}if(oe.source=he,de){if(H===ye.maxZoom||H===de)continue;var je=1<<de-H;if(G!==Math.floor(fe/je)||te!==Math.floor(Me/je))continue}else if(H===ye.indexMaxZoom||oe.numPoints<=ye.indexMaxPoints)continue;if(oe.source=null,he.length!==0){Ee>1&&console.time("clipping");var Ze,et,Se,_e,Ke,Je,ot=.5*ye.buffer/ye.extent,Ft=.5-ot,Tt=.5+ot,Xt=1+ot;Ze=et=Se=_e=null,Ke=Dr(he,Xe,G-ot,G+Tt,0,oe.minX,oe.maxX,ye),Je=Dr(he,Xe,G+Ft,G+Xt,0,oe.minX,oe.maxX,ye),he=null,Ke&&(Ze=Dr(Ke,Xe,te-ot,te+Tt,1,oe.minY,oe.maxY,ye),et=Dr(Ke,Xe,te+Ft,te+Xt,1,oe.minY,oe.maxY,ye),Ke=null),Je&&(Se=Dr(Je,Xe,te-ot,te+Tt,1,oe.minY,oe.maxY,ye),_e=Dr(Je,Xe,te+Ft,te+Xt,1,oe.minY,oe.maxY,ye),Je=null),Ee>1&&console.timeEnd("clipping"),be.push(Ze||[],H+1,2*G,2*te),be.push(et||[],H+1,2*G,2*te+1),be.push(Se||[],H+1,2*G+1,2*te),be.push(_e||[],H+1,2*G+1,2*te+1)}}},nt.prototype.getTile=function(he,H,G){var te=this.options,de=te.extent,fe=te.debug;if(he<0||he>24)return null;var Me=1<<he,be=Yt(he,H=(H%Me+Me)%Me,G);if(this.tiles[be])return Be(this.tiles[be],de);fe>1&&console.log("drilling down to z%d-%d-%d",he,H,G);for(var ye,Ee=he,Xe=H,ne=G;!ye&&Ee>0;)Ee--,Xe=Math.floor(Xe/2),ne=Math.floor(ne/2),ye=this.tiles[Yt(Ee,Xe,ne)];return ye&&ye.source?(fe>1&&console.log("found parent tile z%d-%d-%d",Ee,Xe,ne),fe>1&&console.time("drilling down"),this.splitTile(ye.source,Ee,Xe,ne,he,H,G),fe>1&&console.timeEnd("drilling down"),this.tiles[be]?Be(this.tiles[be],de):null):null};class Lt extends j{constructor(H,G,te,de){super(H,G,te),this._dataUpdateable=new Map,this.loadGeoJSON=(fe,Me)=>{const{promoteId:be}=fe;if(fe.request)return l.f(fe.request,(ye,Ee,Xe,ne)=>{this._dataUpdateable=hr(Ee,be)?yr(Ee,be):void 0,Me(ye,Ee,Xe,ne)});if(typeof fe.data=="string")try{const ye=JSON.parse(fe.data);this._dataUpdateable=hr(ye,be)?yr(ye,be):void 0,Me(null,ye)}catch{Me(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`))}else fe.dataDiff?this._dataUpdateable?(function(ye,Ee,Xe){var ne,oe,Ce,je;if(Ee.removeAll&&ye.clear(),Ee.remove)for(const Ze of Ee.remove)ye.delete(Ze);if(Ee.add)for(const Ze of Ee.add){const et=Ot(Ze,Xe);et!=null&&ye.set(et,Ze)}if(Ee.update)for(const Ze of Ee.update){let et=ye.get(Ze.id);if(et==null)continue;const Se=!Ze.removeAllProperties&&(((ne=Ze.removeProperties)===null||ne===void 0?void 0:ne.length)>0||((oe=Ze.addOrUpdateProperties)===null||oe===void 0?void 0:oe.length)>0);if((Ze.newGeometry||Ze.removeAllProperties||Se)&&(et=Object.assign({},et),ye.set(Ze.id,et),Se&&(et.properties=Object.assign({},et.properties))),Ze.newGeometry&&(et.geometry=Ze.newGeometry),Ze.removeAllProperties)et.properties={};else if(((Ce=Ze.removeProperties)===null||Ce===void 0?void 0:Ce.length)>0)for(const _e of Ze.removeProperties)Object.prototype.hasOwnProperty.call(et.properties,_e)&&delete et.properties[_e];if(((je=Ze.addOrUpdateProperties)===null||je===void 0?void 0:je.length)>0)for(const{key:_e,value:Ke}of Ze.addOrUpdateProperties)et.properties[_e]=Ke}}(this._dataUpdateable,fe.dataDiff,be),Me(null,{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())})):Me(new Error(`Cannot update existing geojson data in ${fe.source}`)):Me(new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}},this.loadVectorData=this.loadGeoJSONTile,de&&(this.loadGeoJSON=de)}loadGeoJSONTile(H,G){const te=H.tileID.canonical;if(!this._geoJSONIndex)return G(null,null);const de=this._geoJSONIndex.getTile(te.z,te.x,te.y);if(!de)return G(null,null);const fe=new class{constructor(be){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.N,this.length=be.length,this._features=be}feature(be){return new class{constructor(ye){this._feature=ye,this.extent=l.N,this.type=ye.type,this.properties=ye.tags,"id"in ye&&!isNaN(ye.id)&&(this.id=parseInt(ye.id,10))}loadGeometry(){if(this._feature.type===1){const ye=[];for(const Ee of this._feature.geometry)ye.push([new l.P(Ee[0],Ee[1])]);return ye}{const ye=[];for(const Ee of this._feature.geometry){const Xe=[];for(const ne of Ee)Xe.push(new l.P(ne[0],ne[1]));ye.push(Xe)}return ye}}toGeoJSON(ye,Ee,Xe){return L.call(this,ye,Ee,Xe)}}(this._features[be])}}(de.features);let Me=Oe(fe);Me.byteOffset===0&&Me.byteLength===Me.buffer.byteLength||(Me=new Uint8Array(Me)),G(null,{vectorTile:fe,rawData:Me.buffer})}loadData(H,G){var te;(te=this._pendingRequest)===null||te===void 0||te.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const de=!!(H&&H.request&&H.request.collectResourceTiming)&&new l.bu(H.request);this._pendingCallback=G,this._pendingRequest=this.loadGeoJSON(H,(fe,Me)=>{if(delete this._pendingCallback,delete this._pendingRequest,fe||!Me)return G(fe);if(typeof Me!="object")return G(new Error(`Input data given to '${H.source}' is not a valid GeoJSON object.`));{O(Me,!0);try{if(H.filter){const ye=l.bC(H.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ye.result==="error")throw new Error(ye.value.map(Xe=>`${Xe.key}: ${Xe.message}`).join(", "));Me={type:"FeatureCollection",features:Me.features.filter(Xe=>ye.value.evaluate({zoom:0},Xe))}}this._geoJSONIndex=H.cluster?new er(function({superclusterOptions:ye,clusterProperties:Ee}){if(!Ee||!ye)return ye;const Xe={},ne={},oe={accumulated:null,zoom:0},Ce={properties:null},je=Object.keys(Ee);for(const Ze of je){const[et,Se]=Ee[Ze],_e=l.bC(Se),Ke=l.bC(typeof et=="string"?[et,["accumulated"],["get",Ze]]:et);Xe[Ze]=_e.value,ne[Ze]=Ke.value}return ye.map=Ze=>{Ce.properties=Ze;const et={};for(const Se of je)et[Se]=Xe[Se].evaluate(oe,Ce);return et},ye.reduce=(Ze,et)=>{Ce.properties=et;for(const Se of je)oe.accumulated=Ze[Se],Ze[Se]=ne[Se].evaluate(oe,Ce)},ye}(H)).load(Me.features):function(ye,Ee){return new nt(ye,Ee)}(Me,H.geojsonVtOptions)}catch(ye){return G(ye)}this.loaded={};const be={};if(de){const ye=de.finish();ye&&(be.resourceTiming={},be.resourceTiming[H.source]=JSON.parse(JSON.stringify(ye)))}G(null,be)}})}reloadTile(H,G){const te=this.loaded;return te&&te[H.uid]?super.reloadTile(H,G):this.loadTile(H,G)}removeSource(H,G){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),G()}getClusterExpansionZoom(H,G){try{G(null,this._geoJSONIndex.getClusterExpansionZoom(H.clusterId))}catch(te){G(te)}}getClusterChildren(H,G){try{G(null,this._geoJSONIndex.getChildren(H.clusterId))}catch(te){G(te)}}getClusterLeaves(H,G){try{G(null,this._geoJSONIndex.getLeaves(H.clusterId,H.limit,H.offset))}catch(te){G(te)}}}class Fr{constructor(H){this.self=H,this.actor=new l.C(H,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:j,geojson:Lt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(G,te)=>{if(this.workerSourceTypes[G])throw new Error(`Worker source with name "${G}" already registered.`);this.workerSourceTypes[G]=te},this.self.registerRTLTextPlugin=G=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.applyArabicShaping=G.applyArabicShaping,l.bD.processBidirectionalText=G.processBidirectionalText,l.bD.processStyledBidirectionalText=G.processStyledBidirectionalText}}setReferrer(H,G){this.referrer=G}setImages(H,G,te){this.availableImages[H]=G;for(const de in this.workerSources[H]){const fe=this.workerSources[H][de];for(const Me in fe)fe[Me].availableImages=G}te()}setLayers(H,G,te){this.getLayerIndex(H).replace(G),te()}updateLayers(H,G,te){this.getLayerIndex(H).update(G.layers,G.removedIds),te()}loadTile(H,G,te){this.getWorkerSource(H,G.type,G.source).loadTile(G,te)}loadDEMTile(H,G,te){this.getDEMWorkerSource(H,G.source).loadTile(G,te)}reloadTile(H,G,te){this.getWorkerSource(H,G.type,G.source).reloadTile(G,te)}abortTile(H,G,te){this.getWorkerSource(H,G.type,G.source).abortTile(G,te)}removeTile(H,G,te){this.getWorkerSource(H,G.type,G.source).removeTile(G,te)}removeDEMTile(H,G){this.getDEMWorkerSource(H,G.source).removeTile(G)}removeSource(H,G,te){if(!this.workerSources[H]||!this.workerSources[H][G.type]||!this.workerSources[H][G.type][G.source])return;const de=this.workerSources[H][G.type][G.source];delete this.workerSources[H][G.type][G.source],de.removeSource!==void 0?de.removeSource(G,te):te()}loadWorkerSource(H,G,te){try{this.self.importScripts(G.url),te()}catch(de){te(de.toString())}}syncRTLPluginState(H,G,te){try{l.bD.setState(G);const de=l.bD.getPluginURL();if(l.bD.isLoaded()&&!l.bD.isParsed()&&de!=null){this.self.importScripts(de);const fe=l.bD.isParsed();te(fe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${de}`),fe)}}catch(de){te(de.toString())}}getAvailableImages(H){let G=this.availableImages[H];return G||(G=[]),G}getLayerIndex(H){let G=this.layerIndexes[H];return G||(G=this.layerIndexes[H]=new b),G}getWorkerSource(H,G,te){return this.workerSources[H]||(this.workerSources[H]={}),this.workerSources[H][G]||(this.workerSources[H][G]={}),this.workerSources[H][G][te]||(this.workerSources[H][G][te]=new this.workerSourceTypes[G]({send:(de,fe,Me)=>{this.actor.send(de,fe,Me,H)}},this.getLayerIndex(H),this.getAvailableImages(H))),this.workerSources[H][G][te]}getDEMWorkerSource(H,G){return this.demWorkerSources[H]||(this.demWorkerSources[H]={}),this.demWorkerSources[H][G]||(this.demWorkerSources[H][G]=new U),this.demWorkerSources[H][G]}}return l.i()&&(self.worker=new Fr(self)),Fr}),d(["./shared"],function(l){var b="3.6.2";class w{static testProp(i){if(!w.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in w.docStyle)return i[u];return i[0]}static create(i,u,p){const g=window.document.createElement(i);return u!==void 0&&(g.className=u),p&&p.appendChild(g),g}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(i,u){i.style[w.transformProp]=u}static addEventListener(i,u,p,g={}){i.addEventListener(u,p,"passive"in g?g:g.capture)}static removeEventListener(i,u,p,g={}){i.removeEventListener(u,p,"passive"in g?g:g.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(i,u){const p=i.getBoundingClientRect();return new l.P(u.clientX-p.left-i.clientLeft,u.clientY-p.top-i.clientTop)}static touchPos(i,u){const p=i.getBoundingClientRect(),g=[];for(let _=0;_<u.length;_++)g.push(new l.P(u[_].clientX-p.left-i.clientLeft,u[_].clientY-p.top-i.clientTop));return g}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);const T={supported:!1,testSupport:function(y){!j&&z&&(U?V(y):E=y)}};let E,z,j=!1,U=!1;function V(y){const i=y.createTexture();y.bindTexture(y.TEXTURE_2D,i);try{if(y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,z),y.isContextLost())return;T.supported=!0}catch{}y.deleteTexture(i),j=!0}var K,O;typeof document<"u"&&(z=document.createElement("img"),z.onload=function(){E&&V(E),E=null,U=!0},z.onerror=function(){j=!0,E=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(y){let i,u,p,g;y.resetRequestQueue=()=>{i=[],u=0,p=0,g={}},y.addThrottleControl=D=>{const B=p++;return g[B]=D,B},y.removeThrottleControl=D=>{delete g[D],k()},y.getImage=(D,B,F=!0)=>{T.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*");const X={requestParameters:D,supportImageRefresh:F,callback:B,cancelled:!1,completed:!1,cancel:()=>{X.completed||X.cancelled||(X.cancelled=!0,X.innerRequest&&(X.innerRequest.cancel(),u--),k())}};return i.push(X),k(),X};const _=D=>{const{requestParameters:B,supportImageRefresh:F,callback:X}=D;return l.e(B,{type:"image"}),(F!==!1||l.i()||l.g(B.url)||B.headers&&!Object.keys(B.headers).reduce((ue,ce)=>ue&&ce==="accept",!0)?l.m:P)(B,(ue,ce,pe,ae)=>{C(D,X,ue,ce,pe,ae)})},C=(D,B,F,X,ue,ce)=>{F?B(F):X instanceof HTMLImageElement||l.a(X)?B(null,X):X&&((pe,ae)=>{typeof createImageBitmap=="function"?l.b(pe,ae):l.d(pe,ae)})(X,(pe,ae)=>{pe!=null?B(pe):ae!=null&&B(null,ae,{cacheControl:ue,expires:ce})}),D.cancelled||(D.completed=!0,u--,k())},k=()=>{const D=(()=>{const B=Object.keys(g);let F=!1;if(B.length>0){for(const X of B)if(F=g[X](),F)break}return F})()?l.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let B=u;B<D&&i.length>0;B++){const F=i.shift();if(F.cancelled){B--;continue}const X=_(F);u++,F.innerRequest=X}},P=(D,B)=>{const F=new Image,X=D.url;let ue=!1;const ce=D.credentials;return ce&&ce==="include"?F.crossOrigin="use-credentials":(ce&&ce==="same-origin"||!l.s(X))&&(F.crossOrigin="anonymous"),F.fetchPriority="high",F.onload=()=>{B(null,F),F.onerror=F.onload=null},F.onerror=()=>{ue||B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")),F.onerror=F.onload=null},F.src=X,{cancel:()=>{ue=!0,F.src=""}}}}(K||(K={})),K.resetRequestQueue(),function(y){y.Glyphs="Glyphs",y.Image="Image",y.Source="Source",y.SpriteImage="SpriteImage",y.SpriteJSON="SpriteJSON",y.Style="Style",y.Tile="Tile",y.Unknown="Unknown"}(O||(O={}));class L{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,p){const g=function(_){const C=_.match(R);if(!C)throw new Error(`Unable to parse URL "${_}"`);return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}(i);return g.path+=`${u}${p}`,function(_){const C=_.params.length?`?${_.params.join("&")}`:"";return`${_.protocol}://${_.authority}${_.path}${C}`}(g)}setTransformRequest(i){this._transformRequestFn=i}}const R=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function re(y){var i=new l.A(3);return i[0]=y[0],i[1]=y[1],i[2]=y[2],i}var J,se=function(y,i,u){return y[0]=i[0]-u[0],y[1]=i[1]-u[1],y[2]=i[2]-u[2],y};J=new l.A(3),l.A!=Float32Array&&(J[0]=0,J[1]=0,J[2]=0);var ie=function(y){var i=y[0],u=y[1];return i*i+u*u};function Z(y){const i=[];if(typeof y=="string")i.push({id:"default",url:y});else if(y&&y.length>0){const u=[];for(const{id:p,url:g}of y){const _=`${p}${g}`;u.indexOf(_)===-1&&(u.push(_),i.push({id:p,url:g}))}}return i}function ke(y,i,u,p,g){if(p)return void y(p);if(g!==Object.values(i).length||g!==Object.values(u).length)return;const _={};for(const C in i){_[C]={};const k=l.h.getImageCanvasContext(u[C]),P=i[C];for(const D in P){const{width:B,height:F,x:X,y:ue,sdf:ce,pixelRatio:pe,stretchX:ae,stretchY:Pe,content:Ne}=P[D];_[C][D]={data:null,pixelRatio:pe,sdf:ce,stretchX:ae,stretchY:Pe,content:Ne,spriteData:{width:B,height:F,x:X,y:ue,context:k}}}}y(null,_)}(function(){var y=new l.A(2);l.A!=Float32Array&&(y[0]=0,y[1]=0)})();class xe{constructor(i,u,p,g){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(u,g)}update(i,u,p){const{width:g,height:_}=i,C=!(this.size&&this.size[0]===g&&this.size[1]===_||p),{context:k}=this,{gl:P}=k;if(this.useMipmap=!!(u&&u.useMipmap),P.bindTexture(P.TEXTURE_2D,this.texture),k.pixelStoreUnpackFlipY.set(!1),k.pixelStoreUnpack.set(1),k.pixelStoreUnpackPremultiplyAlpha.set(this.format===P.RGBA&&(!u||u.premultiply!==!1)),C)this.size=[g,_],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.a(i)?P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,P.UNSIGNED_BYTE,i):P.texImage2D(P.TEXTURE_2D,0,this.format,g,_,0,this.format,P.UNSIGNED_BYTE,i.data);else{const{x:D,y:B}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.a(i)?P.texSubImage2D(P.TEXTURE_2D,0,D,B,P.RGBA,P.UNSIGNED_BYTE,i):P.texSubImage2D(P.TEXTURE_2D,0,D,B,g,_,P.RGBA,P.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&P.generateMipmap(P.TEXTURE_2D)}bind(i,u,p){const{context:g}=this,{gl:_}=g;_.bindTexture(_.TEXTURE_2D,this.texture),p!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=_.LINEAR),i!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,i),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,p||i),this.filter=i),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Ie(y){const{userImage:i}=y;return!!(i&&i.render&&i.render())&&(y.data.replace(new Uint8Array(i.data.buffer)),!0)}class ze extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:p}of this.requestors)this._notify(u,p);this.requestors=[]}}getImage(i){const u=this.images[i];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new l.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let p=!0;const g=u.data||u.spriteData;return this._validateStretch(u.stretchX,g&&g.width)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,g&&g.height)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,u){if(!i)return!0;let p=0;for(const g of i){if(g[0]<p||g[1]<g[0]||u<g[1])return!1;p=g[1]}return!0}_validateContent(i,u){if(!i)return!0;if(i.length!==4)return!1;const p=u.spriteData,g=p&&p.width||u.data.width,_=p&&p.height||u.data.height;return!(i[0]<0||g<i[0]||i[1]<0||_<i[1]||i[2]<0||g<i[2]||i[3]<0||_<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,u,p=!0){const g=this.getImage(i);if(p&&(g.data.width!==u.data.width||g.data.height!==u.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=g.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let p=!0;if(!this.isLoaded())for(const g of i)this.images[g]||(p=!1);this.isLoaded()||p?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const p={};for(const g of i){let _=this.getImage(g);_||(this.fire(new l.k("styleimagemissing",{id:g})),_=this.getImage(g)),_?p[g]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:l.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,p)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],p=this.getImage(i);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const g={w:p.data.width+2,h:p.data.height+2,x:0,y:0},_=new l.I(g,p);this.patterns[i]={bin:g,position:_}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new xe(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const _ in this.patterns)i.push(this.patterns[_].bin);const{w:u,h:p}=l.p(i),g=this.atlasImage;g.resize({width:u||1,height:p||1});for(const _ in this.patterns){const{bin:C}=this.patterns[_],k=C.x+1,P=C.y+1,D=this.getImage(_).data,B=D.width,F=D.height;l.R.copy(D,g,{x:0,y:0},{x:k,y:P},{width:B,height:F}),l.R.copy(D,g,{x:0,y:F-1},{x:k,y:P-1},{width:B,height:1}),l.R.copy(D,g,{x:0,y:0},{x:k,y:P+F},{width:B,height:1}),l.R.copy(D,g,{x:B-1,y:0},{x:k-1,y:P},{width:1,height:F}),l.R.copy(D,g,{x:0,y:0},{x:k+B,y:P},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||l.w(`Image with ID: "${u}" was not found`),Ie(p)&&this.updateImage(u,p)}}}const Le=1e20;function Ye(y,i,u,p,g,_,C,k,P){for(let D=i;D<i+p;D++)Ge(y,u*_+D,_,g,C,k,P);for(let D=u;D<u+g;D++)Ge(y,D*_+i,1,p,C,k,P)}function Ge(y,i,u,p,g,_,C){_[0]=0,C[0]=-Le,C[1]=Le,g[0]=y[i];for(let k=1,P=0,D=0;k<p;k++){g[k]=y[i+k*u];const B=k*k;do{const F=_[P];D=(g[k]-g[F]+B-F*F)/(k-F)/2}while(D<=C[P]&&--P>-1);P++,_[P]=k,C[P]=D,C[P+1]=Le}for(let k=0,P=0;k<p;k++){for(;C[P+1]<k;)P++;const D=_[P],B=k-D;y[i+k*u]=g[D]+B*B}}class Te{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const p=[];for(const g in i)for(const _ of i[g])p.push({stack:g,id:_});l.o(p,({stack:g,id:_},C)=>{let k=this.entries[g];k||(k=this.entries[g]={glyphs:{},requests:{},ranges:{}});let P=k.glyphs[_];if(P!==void 0)return void C(null,{stack:g,id:_,glyph:P});if(P=this._tinySDF(k,g,_),P)return k.glyphs[_]=P,void C(null,{stack:g,id:_,glyph:P});const D=Math.floor(_/256);if(256*D>65535)return void C(new Error("glyphs > 65535 not supported"));if(k.ranges[D])return void C(null,{stack:g,id:_,glyph:P});if(!this.url)return void C(new Error("glyphsUrl is not set"));let B=k.requests[D];B||(B=k.requests[D]=[],Te.loadGlyphRange(g,D,this.url,this.requestManager,(F,X)=>{if(X){for(const ue in X)this._doesCharSupportLocalGlyph(+ue)||(k.glyphs[+ue]=X[+ue]);k.ranges[D]=!0}for(const ue of B)ue(F,X);delete k.requests[D]})),B.push((F,X)=>{F?C(F):X&&C(null,{stack:g,id:_,glyph:X[_]||null})})},(g,_)=>{if(g)u(g);else if(_){const C={};for(const{stack:k,id:P,glyph:D}of _)(C[k]||(C[k]={}))[P]=D&&{id:D.id,bitmap:D.bitmap.clone(),metrics:D.metrics};u(null,C)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(l.u["CJK Unified Ideographs"](i)||l.u["Hangul Syllables"](i)||l.u.Hiragana(i)||l.u.Katakana(i))}_tinySDF(i,u,p){const g=this.localIdeographFontFamily;if(!g||!this._doesCharSupportLocalGlyph(p))return;let _=i.tinySDF;if(!_){let k="400";/bold/i.test(u)?k="900":/medium/i.test(u)?k="500":/light/i.test(u)&&(k="200"),_=i.tinySDF=new Te.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:k})}const C=_.draw(String.fromCharCode(p));return{id:p,bitmap:new l.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}Te.loadGlyphRange=function(y,i,u,p,g){const _=256*i,C=_+255,k=p.transformRequest(u.replace("{fontstack}",y).replace("{range}",`${_}-${C}`),O.Glyphs);l.l(k,(P,D)=>{if(P)g(P);else if(D){const B={};for(const F of l.n(D))B[F.id]=F;g(null,B)}})},Te.TinySDF=class{constructor({fontSize:y=24,buffer:i=3,radius:u=8,cutoff:p=.25,fontFamily:g="sans-serif",fontWeight:_="normal",fontStyle:C="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=u;const k=this.size=y+4*i,P=this._createCanvas(k),D=this.ctx=P.getContext("2d",{willReadFrequently:!0});D.font=`${C} ${_} ${y}px ${g}`,D.textBaseline="alphabetic",D.textAlign="left",D.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Uint16Array(k)}_createCanvas(y){const i=document.createElement("canvas");return i.width=i.height=y,i}draw(y){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:g,actualBoundingBoxRight:_}=this.ctx.measureText(y),C=Math.ceil(u),k=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-g))),P=Math.min(this.size-this.buffer,C+Math.ceil(p)),D=k+2*this.buffer,B=P+2*this.buffer,F=Math.max(D*B,0),X=new Uint8ClampedArray(F),ue={data:X,width:D,height:B,glyphWidth:k,glyphHeight:P,glyphTop:C,glyphLeft:0,glyphAdvance:i};if(k===0||P===0)return ue;const{ctx:ce,buffer:pe,gridInner:ae,gridOuter:Pe}=this;ce.clearRect(pe,pe,k,P),ce.fillText(y,pe,pe+C);const Ne=ce.getImageData(pe,pe,k,P);Pe.fill(Le,0,F),ae.fill(0,0,F);for(let ge=0;ge<P;ge++)for(let De=0;De<k;De++){const He=Ne.data[4*(ge*k+De)+3]/255;if(He===0)continue;const We=(ge+pe)*D+De+pe;if(He===1)Pe[We]=0,ae[We]=Le;else{const tt=.5-He;Pe[We]=tt>0?tt*tt:0,ae[We]=tt<0?tt*tt:0}}Ye(Pe,0,0,D,B,D,this.f,this.v,this.z),Ye(ae,pe,pe,k,P,D,this.f,this.v,this.z);for(let ge=0;ge<F;ge++){const De=Math.sqrt(Pe[ge])-Math.sqrt(ae[ge]);X[ge]=Math.round(255-255*(De/this.radius+this.cutoff))}return ue}};class Fe{constructor(){this.specification=l.v.light.position}possiblyEvaluate(i,u){return l.z(i.expression.evaluate(u))}interpolate(i,u,p){return{x:l.B.number(i.x,u.x,p),y:l.B.number(i.y,u.y,p),z:l.B.number(i.z,u.z,p)}}}let $e;class Oe extends l.E{constructor(i){super(),$e=$e||new l.r({anchor:new l.D(l.v.light.anchor),position:new Fe,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T($e),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(l.t,i,u))for(const p in i){const g=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),g):this._transitionable.setValue(p,g)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p){return(!p||p.validate!==!1)&&l.x(this,i.call(l.y,l.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}}class Qe{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const p=i.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,u)),this.dashEntry[p]}getDashRanges(i,u,p){const g=[];let _=i.length%2==1?-i[i.length-1]*p:0,C=i[0]*p,k=!0;g.push({left:_,right:C,isDash:k,zeroLength:i[0]===0});let P=i[0];for(let D=1;D<i.length;D++){k=!k;const B=i[D];_=P*p,P+=B,C=P*p,g.push({left:_,right:C,isDash:k,zeroLength:B===0})}return g}addRoundDash(i,u,p){const g=u/2;for(let _=-p;_<=p;_++){const C=this.width*(this.nextRow+p+_);let k=0,P=i[k];for(let D=0;D<this.width;D++){D/P.right>1&&(P=i[++k]);const B=Math.abs(D-P.left),F=Math.abs(D-P.right),X=Math.min(B,F);let ue;const ce=_/p*(g+1);if(P.isDash){const pe=g-Math.abs(ce);ue=Math.sqrt(X*X+pe*pe)}else ue=g-Math.sqrt(X*X+ce*ce);this.data[C+D]=Math.max(0,Math.min(255,ue+128))}}}addRegularDash(i){for(let k=i.length-1;k>=0;--k){const P=i[k],D=i[k+1];P.zeroLength?i.splice(k,1):D&&D.isDash===P.isDash&&(D.left=P.left,i.splice(k,1))}const u=i[0],p=i[i.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const g=this.width*this.nextRow;let _=0,C=i[_];for(let k=0;k<this.width;k++){k/C.right>1&&(C=i[++_]);const P=Math.abs(k-C.left),D=Math.abs(k-C.right),B=Math.min(P,D);this.data[g+k]=Math.max(0,Math.min(255,(C.isDash?B:-B)+128))}}addDash(i,u){const p=u?7:0,g=2*p+1;if(this.nextRow+g>this.height)return l.w("LineAtlas out of space"),null;let _=0;for(let k=0;k<i.length;k++)_+=i[k];if(_!==0){const k=this.width/_,P=this.getDashRanges(i,this.width,k);u?this.addRoundDash(P,k,p):this.addRegularDash(P)}const C={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:_};return this.nextRow+=g,this.dirty=!0,C}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class at{constructor(i,u,p){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=p;const g=this.workerPool.acquire(p);for(let _=0;_<g.length;_++){const C=new l.C(g[_],u,p);C.name=`Worker ${_}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,p){l.o(this.actors,(g,_)=>{g.send(i,u,_)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}}function ut(y,i,u){const p=function(g,_){if(g)return u(g);if(_){const C=l.F(l.e(_,y),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);_.vector_layers&&(C.vectorLayers=_.vector_layers,C.vectorLayerIds=C.vectorLayers.map(k=>k.id)),u(null,C)}};return y.url?l.f(i.transformRequest(y.url,O.Source),p):l.h.frame(()=>p(null,y))}class Pt{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof l.L?new l.L(i.lng,i.lat):l.L.convert(i),this}setSouthWest(i){return this._sw=i instanceof l.L?new l.L(i.lng,i.lat):l.L.convert(i),this}extend(i){const u=this._sw,p=this._ne;let g,_;if(i instanceof l.L)g=i,_=i;else{if(!(i instanceof Pt))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Pt.convert(i)):this.extend(l.L.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(l.L.convert(i)):this;if(g=i._sw,_=i._ne,!g||!_)return this}return u||p?(u.lng=Math.min(g.lng,u.lng),u.lat=Math.min(g.lat,u.lat),p.lng=Math.max(_.lng,p.lng),p.lat=Math.max(_.lat,p.lat)):(this._sw=new l.L(g.lng,g.lat),this._ne=new l.L(_.lng,_.lat)),this}getCenter(){return new l.L((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.L(this.getWest(),this.getNorth())}getSouthEast(){return new l.L(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:p}=l.L.convert(i);let g=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&g}static convert(i){return i instanceof Pt?i:i&&new Pt(i)}static fromLngLat(i,u=0){const p=360*u/40075017,g=p/Math.cos(Math.PI/180*i.lat);return new Pt(new l.L(i.lng-g,i.lat-p),new l.L(i.lng+g,i.lat+p))}}class wt{constructor(i,u,p){this.bounds=Pt.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),p=Math.floor(l.G(this.bounds.getWest())*u),g=Math.floor(l.H(this.bounds.getNorth())*u),_=Math.ceil(l.G(this.bounds.getEast())*u),C=Math.ceil(l.H(this.bounds.getSouth())*u);return i.x>=p&&i.x<_&&i.y>=g&&i.y<C}}class zt extends l.E{constructor(i,u,p,g){if(super(),this.load=()=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ut(this._options,this.map._requestManager,(_,C)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),_?this.fire(new l.j(_)):C&&(l.e(this,C),C.bounds&&(this.tileBounds=new wt(C.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})},this.serialize=()=>l.e({},this._options),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.F(u,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(p,O.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _(C,k){return delete i.request,i.aborted?u(null):C&&C.status!==404?u(C):(k&&k.resourceTiming&&(i.resourceTiming=k.resourceTiming),this.map._refreshExpiredTiles&&k&&i.setExpiryData(k),i.loadVectorData(k,this.map.painter),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}g.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",g,_.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",g,_.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class er extends l.E{constructor(i,u,p,g){super(),this.id=i,this.dispatcher=p,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},u),l.e(this,l.F(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=ut(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new l.j(i)):u&&(l.e(this,u),u.bounds&&(this.tileBounds=new wt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}serialize(){return l.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=K.getImage(this.map._requestManager.transformRequest(p,O.Tile),(g,_,C)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(g)i.state="errored",u(g);else if(_){this.map._refreshExpiredTiles&&C&&i.setExpiryData(C);const k=this.map.painter.context,P=k.gl;i.texture=this.map.painter.getTileTexture(_.width),i.texture?i.texture.update(_,{useMipmap:!0}):(i.texture=new xe(k,_,P.RGBA,{useMipmap:!0}),i.texture.bind(P.LINEAR,P.CLAMP_TO_EDGE,P.LINEAR_MIPMAP_NEAREST),k.extTextureFilterAnisotropic&&P.texParameterf(P.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax)),i.state="loaded",u(null)}},this.map._refreshExpiredTiles)}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}class lt extends er{constructor(i,u,p,g){super(i,u,p,g),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(i,u){const p=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(p,O.Tile);function _(C,k){C&&(i.state="errored",u(C)),k&&(i.dem=k,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.request=K.getImage(g,(C,k,P)=>l._(this,void 0,void 0,function*(){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(C)i.state="errored",u(C);else if(k){this.map._refreshExpiredTiles&&i.setExpiryData(P);const D=l.a(k)&&l.J()?k:yield function(F){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.K()){const X=F.width+2,ue=F.height+2;try{return new l.R({width:X,height:ue},yield l.M(F,-1,-1,X,ue))}catch{}}return l.h.getImageData(F,1)})}(k),B={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:D,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",B,_))}}),this.map._refreshExpiredTiles)}_getNeighboringTiles(i){const u=i.canonical,p=Math.pow(2,u.z),g=(u.x-1+p)%p,_=u.x===0?i.wrap-1:i.wrap,C=(u.x+1+p)%p,k=u.x+1===p?i.wrap+1:i.wrap,P={};return P[new l.O(i.overscaledZ,_,u.z,g,u.y).key]={backfilled:!1},P[new l.O(i.overscaledZ,k,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(P[new l.O(i.overscaledZ,_,u.z,g,u.y-1).key]={backfilled:!1},P[new l.O(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},P[new l.O(i.overscaledZ,k,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<p&&(P[new l.O(i.overscaledZ,_,u.z,g,u.y+1).key]={backfilled:!1},P[new l.O(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},P[new l.O(i.overscaledZ,k,u.z,C,u.y+1).key]={backfilled:!1}),P}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class qe extends l.E{constructor(i,u,p,g){super(),this.load=()=>{this._updateWorkerData()},this.serialize=()=>l.e({},this._options,{type:this.type,data:this._data}),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(g),this._data=u.data,this._options=l.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const _=l.N/this.tileSize;this.workerOptions=l.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*_,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*_,extent:l.N,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.N,radius:(u.clusterRadius||50)*_,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,p,g){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:p},g),this}_updateWorkerData(i){const u=l.e({},this.workerOptions);i?u.dataDiff=i:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(l.h.resolveURL(this._data),O.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(p,g)=>{if(this._pendingLoads--,this._removed||g&&g.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let _=null;if(g&&g.resourceTiming&&g.resourceTiming[this.id]&&(_=g.resourceTiming[this.id].slice(0)),p)return void this.fire(new l.j(p));const C={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&l.e(C,{resourceTiming:_}),this.fire(new l.k("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const p=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const g={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(p,g,(_,C)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):_?u(_):(i.loadVectorData(C,this.map.painter,p==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}hasTransition(){return!1}}var pt=l.Q([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class yt extends l.E{constructor(i,u,p,g){super(),this.load=(_,C)=>{this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=K.getImage(this.map._requestManager.transformRequest(this.url,O.Image),(k,P)=>{this._request=null,this._loaded=!0,k?this.fire(new l.j(k)):P&&(this.image=P,_&&(this.coordinates=_),C&&C(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||!this.image)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,pt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture||(this.texture=new xe(_,this.image,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let k=!1;for(const P in this.tiles){const D=this.tiles[P];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,k=!0)}k&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"image",url:this.options.url,coordinates:this.coordinates}),this.id=i,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=u}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.cancel(),this._request=null),this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.cancel(),this._request=null)}setCoordinates(i){this.coordinates=i;const u=i.map(l.U.fromLngLat);this.tileID=function(g){let _=1/0,C=1/0,k=-1/0,P=-1/0;for(const X of g)_=Math.min(_,X.x),C=Math.min(C,X.y),k=Math.max(k,X.x),P=Math.max(P,X.y);const D=Math.max(k-_,P-C),B=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),F=Math.pow(2,B);return new l.W(B,Math.floor((_+k)/2*F),Math.floor((C+P)/2*F))}(u),this.minzoom=this.maxzoom=this.tileID.z;const p=u.map(g=>this.tileID.getTilePoint(g)._round());return this._boundsArray=new l.V,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,l.N,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,l.N),this._boundsArray.emplaceBack(p[2].x,p[2].y,l.N,l.N),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}hasTransition(){return!1}}class or extends yt{constructor(i,u,p,g){super(i,u,p,g),this.load=()=>{this._loaded=!1;const _=this.options;this.urls=[];for(const C of _.urls)this.urls.push(this.map._requestManager.transformRequest(C,O.Source).url);l.X(this.urls,(C,k)=>{this._loaded=!0,C?this.fire(new l.j(C)):k&&(this.video=k,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})},this.prepare=()=>{if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const _=this.map.painter.context,C=_.gl;this.boundsBuffer||(this.boundsBuffer=_.createVertexBuffer(this._boundsArray,pt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE),C.texSubImage2D(C.TEXTURE_2D,0,0,0,C.RGBA,C.UNSIGNED_BYTE,this.video)):(this.texture=new xe(_,this.video,C.RGBA),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE));let k=!1;for(const P in this.tiles){const D=this.tiles[P];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,k=!0)}k&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"video",urls:this.urls,coordinates:this.coordinates}),this.roundZoom=!0,this.type="video",this.options=u}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new l.j(new l.Y(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}hasTransition(){return this.video&&!this.video.paused}}class Kt extends yt{constructor(i,u,p,g){super(i,u,p,g),this.load=()=>{this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},this.prepare=()=>{let _=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,_=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,_=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const C=this.map.painter.context,k=C.gl;this.boundsBuffer||(this.boundsBuffer=C.createVertexBuffer(this._boundsArray,pt.members)),this.boundsSegments||(this.boundsSegments=l.S.simpleSegment(0,0,4,2)),this.texture?(_||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new xe(C,this.canvas,k.RGBA,{premultiply:!0});let P=!1;for(const D in this.tiles){const B=this.tiles[D];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,P=!0)}P&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))},this.serialize=()=>({type:"canvas",coordinates:this.coordinates}),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(C=>typeof C!="number"))||this.fire(new l.j(new l.Y(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.Y(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.j(new l.Y(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.Y(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.Y(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Mr={},lr=y=>{switch(y){case"geojson":return qe;case"image":return yt;case"raster":return er;case"raster-dem":return lt;case"vector":return zt;case"video":return or;case"canvas":return Kt}return Mr[y]};function Vt(y,i){const u=l.Z();return l.$(u,u,[1,1,0]),l.a0(u,u,[.5*y.width,.5*y.height,1]),l.a1(u,u,y.calculatePosMatrix(i.toUnwrapped()))}function Et(y,i,u,p,g,_){const C=function(F,X,ue){if(F)for(const ce of F){const pe=X[ce];if(pe&&pe.source===ue&&pe.type==="fill-extrusion")return!0}else for(const ce in X){const pe=X[ce];if(pe.source===ue&&pe.type==="fill-extrusion")return!0}return!1}(g&&g.layers,i,y.id),k=_.maxPitchScaleFactor(),P=y.tilesIn(p,k,C);P.sort(ur);const D=[];for(const F of P)D.push({wrappedTileID:F.tileID.wrapped().key,queryResults:F.tile.queryRenderedFeatures(i,u,y._state,F.queryGeometry,F.cameraQueryGeometry,F.scale,g,_,k,Vt(y.transform,F.tileID))});const B=function(F){const X={},ue={};for(const ce of F){const pe=ce.queryResults,ae=ce.wrappedTileID,Pe=ue[ae]=ue[ae]||{};for(const Ne in pe){const ge=pe[Ne],De=Pe[Ne]=Pe[Ne]||{},He=X[Ne]=X[Ne]||[];for(const We of ge)De[We.featureIndex]||(De[We.featureIndex]=!0,He.push(We))}}return X}(D);for(const F in B)B[F].forEach(X=>{const ue=X.feature,ce=y.getFeatureState(ue.layer["source-layer"],ue.id);ue.source=ue.layer.source,ue.layer["source-layer"]&&(ue.sourceLayer=ue.layer["source-layer"]),ue.state=ce});return B}function ur(y,i){const u=y.tileID,p=i.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}class Mt{constructor(i,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=l.a2(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(g,_){const C={};if(!_)return C;for(const k of g){const P=k.layerIds.map(D=>_.getLayer(D)).filter(Boolean);if(P.length!==0){k.layers=P,k.stateDependentLayerIds&&(k.stateDependentLayers=k.stateDependentLayerIds.map(D=>P.filter(B=>B.id===D)[0]));for(const D of P)C[D.id]=k}}return C}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof l.a4){if(this.hasSymbolBuckets=!0,!p)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const _=this.buckets[g];if(_ instanceof l.a4&&_.hasRTLText){this.hasRTLText=!0,l.a5();break}}this.queryPadding=0;for(const g in this.buckets){const _=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(g).queryRadius(_))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new l.a3}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const g=this.buckets[p];g.uploadPending()&&g.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new xe(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new xe(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,p,g,_,C,k,P,D,B){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:_,scale:C,tileSize:this.tileSize,pixelPosMatrix:B,transform:P,params:k,queryPadding:this.queryPadding*D},i,u,p):{}}querySourceFeatures(i,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const g=p.loadVTLayers(),_=u&&u.sourceLayer?u.sourceLayer:"",C=g._geojsonTileLayer||g[_];if(!C)return;const k=l.a6(u&&u.filter),{z:P,x:D,y:B}=this.tileID.canonical,F={z:P,x:D,y:B};for(let X=0;X<C.length;X++){const ue=C.feature(X);if(k.needGeometry){const ae=l.a7(ue,!0);if(!k.filter(new l.a8(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!k.filter(new l.a8(this.tileID.overscaledZ),ue))continue;const ce=p.getId(ue,_),pe=new l.a9(ue,P,D,B,ce);pe.tile=F,i.push(pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const p=l.aa(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let g=!1;if(this.expirationTime>p)g=!1;else if(u)if(this.expirationTime<u)g=!0;else{const _=this.expirationTime-u;_?this.expirationTime=p+Math.max(_,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!u.style.hasLayer(g))continue;const _=this.buckets[g],C=_.layers[0].sourceLayer||"_geojsonTileLayer",k=p[C],P=i[C];if(!k||!P||Object.keys(P).length===0)continue;_.update(P,k,this.imageAtlas&&this.imageAtlas.patternPositions||{});const D=u&&u.style&&u.style.getLayer(g);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=l.h.now()+i}setDependencies(i,u){const p={};for(const g of u)p[g]=!0;this.dependencies[i]=p}hasDependency(i,u){for(const p of i){const g=this.dependencies[p];if(g){for(const _ of u)if(g[_])return!0}}return!1}}class Er{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,p){const g=i.wrapped().key;this.data[g]===void 0&&(this.data[g]=[]);const _={value:u,timeout:void 0};if(p!==void 0&&(_.timeout=setTimeout(()=>{this.remove(i,_)},p)),this.data[g].push(_),this.order.push(g),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const p=i.wrapped().key,g=u===void 0?0:this.data[p].indexOf(u),_=this.data[p][g];return this.data[p].splice(g,1),_.timeout&&clearTimeout(_.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(_.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const p in this.data)for(const g of this.data[p])i(g.value)||u.push(g);for(const p of u)this.remove(p.value.tileID,p)}}class Ve{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,p){const g=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][g]=this.stateChanges[i][g]||{},l.e(this.stateChanges[i][g],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const _ in this.state[i])_!==g&&(this.deletedStates[i][_]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][g]===null){this.deletedStates[i][g]={};for(const _ in this.state[i][g])p[_]||(this.deletedStates[i][g][_]=null)}else for(const _ in p)this.deletedStates[i]&&this.deletedStates[i][g]&&this.deletedStates[i][g][_]===null&&delete this.deletedStates[i][g][_]}removeFeatureState(i,u,p){if(this.deletedStates[i]===null)return;const g=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&u!==void 0)this.deletedStates[i][g]!==null&&(this.deletedStates[i][g]=this.deletedStates[i][g]||{},this.deletedStates[i][g][p]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][g])for(p in this.deletedStates[i][g]={},this.stateChanges[i][g])this.deletedStates[i][g][p]=null;else this.deletedStates[i][g]=null;else this.deletedStates[i]=null}getState(i,u){const p=String(u),g=l.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const _=this.deletedStates[i][u];if(_===null)return{};for(const C in _)delete g[C]}return g}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const p={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const _={};for(const C in this.stateChanges[g])this.state[g][C]||(this.state[g][C]={}),l.e(this.state[g][C],this.stateChanges[g][C]),_[C]=this.state[g][C];p[g]=_}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const _={};if(this.deletedStates[g]===null)for(const C in this.state[g])_[C]={},this.state[g][C]={};else for(const C in this.deletedStates[g]){if(this.deletedStates[g][C]===null)this.state[g][C]={};else for(const k of Object.keys(this.deletedStates[g][C]))delete this.state[g][C][k];_[C]=this.state[g][C]}p[g]=p[g]||{},l.e(p[g],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const g in i)i[g].setFeatureState(p,u)}}class Sr extends l.E{constructor(i,u,p){super(),this.id=i,this.dispatcher=p,this.on("data",g=>{g.dataType==="source"&&g.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&g.dataType==="source"&&g.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((g,_,C,k)=>{const P=new(lr(_.type))(g,_,C,k);if(P.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${P.id}`);return P})(i,u,p,this),this._tiles={},this._cache=new Er(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ve,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new l.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Dr).map(i=>i.key)}getRenderableIds(i){const u=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&u.push(this._tiles[p]);return i?u.sort((p,g)=>{const _=p.tileID,C=g.tileID,k=new l.P(_.canonical.x,_.canonical.y)._rotate(this.transform.angle),P=new l.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return _.overscaledZ-C.overscaledZ||P.y-k.y||P.x-k.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(Dr).map(p=>p.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=u),this._loadTile(p,this._tileLoaded.bind(this,p,i,u)))}_tileLoaded(i,u,p,g){if(g)return i.state="errored",void(g.status!==404?this._source.fire(new l.j(g,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=l.h.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let g=0;g<u.length;g++){const _=u[g];if(i.neighboringTiles&&i.neighboringTiles[_]){const C=this.getTileByID(_);p(i,C),p(C,i)}}function p(g,_){g.needsHillshadePrepare=!0,g.needsTerrainPrepare=!0;let C=_.tileID.canonical.x-g.tileID.canonical.x;const k=_.tileID.canonical.y-g.tileID.canonical.y,P=Math.pow(2,g.tileID.canonical.z),D=_.tileID.key;C===0&&k===0||Math.abs(k)>1||(Math.abs(C)>1&&(Math.abs(C+P)===1?C+=P:Math.abs(C-P)===1&&(C-=P)),_.dem&&g.dem&&(g.dem.backfillBorder(_.dem,C,k),g.neighboringTiles&&g.neighboringTiles[D]&&(g.neighboringTiles[D].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,p,g){for(const _ in this._tiles){let C=this._tiles[_];if(g[_]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>p)continue;let k=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){const D=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[D.key],C&&C.hasData()&&(k=D)}let P=k;for(;P.overscaledZ>u;)if(P=P.scaledTo(P.overscaledZ-1),i[P.key]){g[k.key]=k;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=i.overscaledZ-1;p>=u;p--){const g=i.scaledTo(p),_=this._getLoadedTile(g);if(_)return _}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,g=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?l.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(_)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const p={};for(const g in this._tiles){const _=this._tiles[g];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+u),p[_.tileID.key]=_}this._tiles=p;for(const g in this._timers)clearTimeout(this._timers[g]),delete this._timers[g];for(const g in this._tiles)this._setTileReloadTimer(g,this._tiles[g])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let p;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(B=>new l.O(B.canonical.z,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y)):(p=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(p=p.filter(B=>this._source.hasTile(B)))):p=[];const g=i.coveringZoomLevel(this._source),_=Math.max(g-Sr.maxOverzooming,this._source.minzoom),C=Math.max(g+Sr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const B={};for(const F of p)if(F.canonical.z>this._source.minzoom){const X=F.scaledTo(F.canonical.z-1);B[X.key]=X;const ue=F.scaledTo(Math.max(this._source.minzoom,Math.min(F.canonical.z,5)));B[ue.key]=ue}p=p.concat(Object.values(B))}const k=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,k&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const P=this._updateRetainedTiles(p,g);if(qt(this._source.type)){const B={},F={},X=Object.keys(P),ue=l.h.now();for(const ce of X){const pe=P[ce],ae=this._tiles[ce];if(!ae||ae.fadeEndTime!==0&&ae.fadeEndTime<=ue)continue;const Pe=this.findLoadedParent(pe,_);Pe&&(this._addTile(Pe.tileID),B[Pe.tileID.key]=Pe.tileID),F[ce]=pe}this._retainLoadedChildren(F,g,C,P);for(const ce in B)P[ce]||(this._coveredTiles[ce]=!0,P[ce]=B[ce]);if(u){const ce={},pe={};for(const ae of p)this._tiles[ae.key].hasData()?ce[ae.key]=ae:pe[ae.key]=ae;for(const ae in pe){const Pe=pe[ae].children(this._source.maxzoom);this._tiles[Pe[0].key]&&this._tiles[Pe[1].key]&&this._tiles[Pe[2].key]&&this._tiles[Pe[3].key]&&(ce[Pe[0].key]=P[Pe[0].key]=Pe[0],ce[Pe[1].key]=P[Pe[1].key]=Pe[1],ce[Pe[2].key]=P[Pe[2].key]=Pe[2],ce[Pe[3].key]=P[Pe[3].key]=Pe[3],delete pe[ae])}for(const ae in pe){const Pe=this.findLoadedParent(pe[ae],this._source.minzoom);if(Pe){ce[Pe.tileID.key]=P[Pe.tileID.key]=Pe.tileID;for(const Ne in ce)ce[Ne].isChildOf(Pe.tileID)&&delete ce[Ne]}}for(const ae in this._tiles)ce[ae]||(this._coveredTiles[ae]=!0)}}for(const B in P)this._tiles[B].clearFadeHold();const D=l.ab(this._tiles,P);for(const B of D){const F=this._tiles[B];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(B)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const p={},g={},_=Math.max(u-Sr.maxOverzooming,this._source.minzoom),C=Math.max(u+Sr.maxUnderzooming,this._source.minzoom),k={};for(const P of i){const D=this._addTile(P);p[P.key]=P,D.hasData()||u<this._source.maxzoom&&(k[P.key]=P)}this._retainLoadedChildren(k,u,C,p);for(const P of i){let D=this._tiles[P.key];if(D.hasData())continue;if(u+1>this._source.maxzoom){const F=P.children(this._source.maxzoom)[0],X=this.getTile(F);if(X&&X.hasData()){p[F.key]=F;continue}}else{const F=P.children(this._source.maxzoom);if(p[F[0].key]&&p[F[1].key]&&p[F[2].key]&&p[F[3].key])continue}let B=D.wasRequested();for(let F=P.overscaledZ-1;F>=_;--F){const X=P.scaledTo(F);if(g[X.key])break;if(g[X.key]=!0,D=this.getTile(X),!D&&B&&(D=this._addTile(X)),D){const ue=D.hasData();if((B||ue)&&(p[X.key]=X),B=D.wasRequested(),ue)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let p,g=this._tiles[i].tileID;for(;g.overscaledZ>0;){if(g.key in this._loadedParentTiles){p=this._loadedParentTiles[g.key];break}u.push(g.key);const _=g.scaledTo(g.overscaledZ-1);if(p=this._getLoadedTile(_),p)break;g=_}for(const _ of u)this._loadedParentTiles[_]=p}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const p=u;return u||(u=new Mt(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,p||this._source.fire(new l.k("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=u.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,p){const g=[],_=this.transform;if(!_)return g;const C=p?_.getCameraQueryGeometry(i):i,k=i.map(ce=>_.pointCoordinate(ce,this.terrain)),P=C.map(ce=>_.pointCoordinate(ce,this.terrain)),D=this.getIds();let B=1/0,F=1/0,X=-1/0,ue=-1/0;for(const ce of P)B=Math.min(B,ce.x),F=Math.min(F,ce.y),X=Math.max(X,ce.x),ue=Math.max(ue,ce.y);for(let ce=0;ce<D.length;ce++){const pe=this._tiles[D[ce]];if(pe.holdingForFade())continue;const ae=pe.tileID,Pe=Math.pow(2,_.zoom-pe.tileID.overscaledZ),Ne=u*pe.queryPadding*l.N/pe.tileSize/Pe,ge=[ae.getTilePoint(new l.U(B,F)),ae.getTilePoint(new l.U(X,ue))];if(ge[0].x-Ne<l.N&&ge[0].y-Ne<l.N&&ge[1].x+Ne>=0&&ge[1].y+Ne>=0){const De=k.map(We=>ae.getTilePoint(We)),He=P.map(We=>ae.getTilePoint(We));g.push({tile:pe,tileID:ae,queryGeometry:De,cameraQueryGeometry:He,scale:Pe})}}return g}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);for(const p of u)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(qt(this._source.type)){const i=l.h.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=i)return!0}return!1}setFeatureState(i,u,p){this._state.updateState(i=i||"_geojsonTileLayer",u,p)}removeFeatureState(i,u,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,p)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,p){const g=this._tiles[i];g&&g.setDependencies(u,p)}reloadTilesForDependencies(i,u){for(const p in this._tiles)this._tiles[p].hasDependency(i,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,u))}}function Dr(y,i){const u=Math.abs(2*y.wrap)-+(y.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return y.overscaledZ-i.overscaledZ||p-u||i.canonical.y-y.canonical.y||i.canonical.x-y.canonical.x}function qt(y){return y==="raster"||y==="image"||y==="video"}Sr.maxOverzooming=10,Sr.maxUnderzooming=3;const rr="mapboxgl_preloaded_worker_pool";class Or{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Or.workerCount;)this.workers.push(new Worker(l.c.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[rr]}numActive(){return Object.keys(this.active).length}}const Hr=Math.floor(l.h.hardwareConcurrency/2);let dr;function cr(){return dr||(dr=new Or),dr}Or.workerCount=l.ac(globalThis)?Math.max(Math.min(Hr,3),1):1;class Gt{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=l.ad(i,0,1);let u=1,p=this._distances[u];const g=i*this.paddedLength+this.padding;for(;p<g&&u<this._distances.length;)p=this._distances[++u];const _=u-1,C=this._distances[_],k=p-C,P=k>0?(g-C)/k:0;return this.points[_].mult(1-P).add(this.points[u].mult(P))}}function sr(y,i){let u=!0;return y==="always"||y!=="never"&&i!=="never"||(u=!1),u}class Tr{constructor(i,u,p){const g=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(u/p);for(let C=0;C<this.xCellCount*this.yCellCount;C++)g.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,p,g,_){this._forEachCell(u,p,g,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(_)}insertCircle(i,u,p,g){this._forEachCell(u-g,p-g,u+g,p+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(p),this.circles.push(g)}_insertBoxCell(i,u,p,g,_,C){this.boxCells[_].push(C)}_insertCircleCell(i,u,p,g,_,C){this.circleCells[_].push(C)}_query(i,u,p,g,_,C,k){if(p<0||i>this.width||g<0||u>this.height)return[];const P=[];if(i<=0&&u<=0&&this.width<=p&&this.height<=g){if(_)return[{key:null,x1:i,y1:u,x2:p,y2:g}];for(let D=0;D<this.boxKeys.length;D++)P.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const B=this.circles[3*D],F=this.circles[3*D+1],X=this.circles[3*D+2];P.push({key:this.circleKeys[D],x1:B-X,y1:F-X,x2:B+X,y2:F+X})}}else this._forEachCell(i,u,p,g,this._queryCell,P,{hitTest:_,overlapMode:C,seenUids:{box:{},circle:{}}},k);return P}query(i,u,p,g){return this._query(i,u,p,g,!1,null)}hitTest(i,u,p,g,_,C){return this._query(i,u,p,g,!0,_,C).length>0}hitTestCircle(i,u,p,g,_){const C=i-p,k=i+p,P=u-p,D=u+p;if(k<0||C>this.width||D<0||P>this.height)return!1;const B=[];return this._forEachCell(C,P,k,D,this._queryCellCircle,B,{hitTest:!0,overlapMode:g,circle:{x:i,y:u,radius:p},seenUids:{box:{},circle:{}}},_),B.length>0}_queryCell(i,u,p,g,_,C,k,P){const{seenUids:D,hitTest:B,overlapMode:F}=k,X=this.boxCells[_];if(X!==null){const ce=this.bboxes;for(const pe of X)if(!D.box[pe]){D.box[pe]=!0;const ae=4*pe,Pe=this.boxKeys[pe];if(i<=ce[ae+2]&&u<=ce[ae+3]&&p>=ce[ae+0]&&g>=ce[ae+1]&&(!P||P(Pe))&&(!B||!sr(F,Pe.overlapMode))&&(C.push({key:Pe,x1:ce[ae],y1:ce[ae+1],x2:ce[ae+2],y2:ce[ae+3]}),B))return!0}}const ue=this.circleCells[_];if(ue!==null){const ce=this.circles;for(const pe of ue)if(!D.circle[pe]){D.circle[pe]=!0;const ae=3*pe,Pe=this.circleKeys[pe];if(this._circleAndRectCollide(ce[ae],ce[ae+1],ce[ae+2],i,u,p,g)&&(!P||P(Pe))&&(!B||!sr(F,Pe.overlapMode))){const Ne=ce[ae],ge=ce[ae+1],De=ce[ae+2];if(C.push({key:Pe,x1:Ne-De,y1:ge-De,x2:Ne+De,y2:ge+De}),B)return!0}}}return!1}_queryCellCircle(i,u,p,g,_,C,k,P){const{circle:D,seenUids:B,overlapMode:F}=k,X=this.boxCells[_];if(X!==null){const ce=this.bboxes;for(const pe of X)if(!B.box[pe]){B.box[pe]=!0;const ae=4*pe,Pe=this.boxKeys[pe];if(this._circleAndRectCollide(D.x,D.y,D.radius,ce[ae+0],ce[ae+1],ce[ae+2],ce[ae+3])&&(!P||P(Pe))&&!sr(F,Pe.overlapMode))return C.push(!0),!0}}const ue=this.circleCells[_];if(ue!==null){const ce=this.circles;for(const pe of ue)if(!B.circle[pe]){B.circle[pe]=!0;const ae=3*pe,Pe=this.circleKeys[pe];if(this._circlesCollide(ce[ae],ce[ae+1],ce[ae+2],D.x,D.y,D.radius)&&(!P||P(Pe))&&!sr(F,Pe.overlapMode))return C.push(!0),!0}}}_forEachCell(i,u,p,g,_,C,k,P){const D=this._convertToXCellCoord(i),B=this._convertToYCellCoord(u),F=this._convertToXCellCoord(p),X=this._convertToYCellCoord(g);for(let ue=D;ue<=F;ue++)for(let ce=B;ce<=X;ce++)if(_.call(this,i,u,p,g,this.xCellCount*ce+ue,C,k,P))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,p,g,_,C){const k=g-i,P=_-u,D=p+C;return D*D>k*k+P*P}_circleAndRectCollide(i,u,p,g,_,C,k){const P=(C-g)/2,D=Math.abs(i-(g+P));if(D>P+p)return!1;const B=(k-_)/2,F=Math.abs(u-(_+B));if(F>B+p)return!1;if(D<=P||F<=B)return!0;const X=D-P,ue=F-B;return X*X+ue*ue<=p*p}}function Be(y,i,u,p,g){const _=l.Z();return i?(l.a0(_,_,[1/g,1/g,1]),u||l.ae(_,_,p.angle)):l.a1(_,p.labelPlaneMatrix,y),_}function xt(y,i,u,p,g){if(i){const _=l.af(y);return l.a0(_,_,[g,g,1]),u||l.ae(_,_,-p.angle),_}return p.glCoordMatrix}function St(y,i,u){let p;u?(p=[y.x,y.y,u(y.x,y.y),1],l.ag(p,p,i)):(p=[y.x,y.y,0,1],de(p,p,i));const g=p[3];return{point:new l.P(p[0]/g,p[1]/g),signedDistanceFromCamera:g}}function tr(y,i){return .5+y/i*.5}function vn(y,i){const u=y[0]/y[3],p=y[1]/y[3];return u>=-i[0]&&u<=i[0]&&p>=-i[1]&&p<=i[1]}function nt(y,i,u,p,g,_,C,k,P,D){const B=p?y.textSizeData:y.iconSizeData,F=l.ah(B,u.transform.zoom),X=[256/u.width*2+1,256/u.height*2+1],ue=p?y.text.dynamicLayoutVertexArray:y.icon.dynamicLayoutVertexArray;ue.clear();const ce=y.lineVertexArray,pe=p?y.text.placedSymbolArray:y.icon.placedSymbolArray,ae=u.transform.width/u.transform.height;let Pe=!1;for(let Ne=0;Ne<pe.length;Ne++){const ge=pe.get(Ne);if(ge.hidden||ge.writingMode===l.ai.vertical&&!Pe){te(ge.numGlyphs,ue);continue}let De;if(Pe=!1,D?(De=[ge.anchorX,ge.anchorY,D(ge.anchorX,ge.anchorY),1],l.ag(De,De,i)):(De=[ge.anchorX,ge.anchorY,0,1],de(De,De,i)),!vn(De,X)){te(ge.numGlyphs,ue);continue}const He=tr(u.transform.cameraToCenterDistance,De[3]),We=l.aj(B,F,ge),tt=C?We/He:We*He,st=new l.P(ge.anchorX,ge.anchorY),it=St(st,g,D).point,dt={projections:{},offsets:{}},$t=hr(ge,tt,!1,k,i,g,_,y.glyphOffsetArray,ce,ue,it,st,dt,ae,P,D);Pe=$t.useVertical,($t.notEnoughRoom||Pe||$t.needsFlipping&&hr(ge,tt,!0,k,i,g,_,y.glyphOffsetArray,ce,ue,it,st,dt,ae,P,D).notEnoughRoom)&&te(ge.numGlyphs,ue)}p?y.text.dynamicLayoutVertexBuffer.updateData(ue):y.icon.dynamicLayoutVertexBuffer.updateData(ue)}function Yt(y,i,u,p,g,_,C,k,P,D,B,F,X){const ue=k.glyphStartIndex+k.numGlyphs,ce=k.lineStartIndex,pe=k.lineStartIndex+k.lineLength,ae=i.getoffsetX(k.glyphStartIndex),Pe=i.getoffsetX(ue-1),Ne=H(y*ae,u,p,g,_,C,k.segment,ce,pe,P,D,B,F,X);if(!Ne)return null;const ge=H(y*Pe,u,p,g,_,C,k.segment,ce,pe,P,D,B,F,X);return ge?{first:Ne,last:ge}:null}function Ot(y,i,u,p){return y===l.ai.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*p?{useVertical:!0}:(y===l.ai.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function hr(y,i,u,p,g,_,C,k,P,D,B,F,X,ue,ce,pe){const ae=i/24,Pe=y.lineOffsetX*ae,Ne=y.lineOffsetY*ae;let ge;if(y.numGlyphs>1){const De=y.glyphStartIndex+y.numGlyphs,He=y.lineStartIndex,We=y.lineStartIndex+y.lineLength,tt=Yt(ae,k,Pe,Ne,u,B,F,y,P,_,X,ce,pe);if(!tt)return{notEnoughRoom:!0};const st=St(tt.first.point,C,pe).point,it=St(tt.last.point,C,pe).point;if(p&&!u){const dt=Ot(y.writingMode,st,it,ue);if(dt)return dt}ge=[tt.first];for(let dt=y.glyphStartIndex+1;dt<De-1;dt++)ge.push(H(ae*k.getoffsetX(dt),Pe,Ne,u,B,F,y.segment,He,We,P,_,X,ce,pe));ge.push(tt.last)}else{if(p&&!u){const He=St(F,g,pe).point,We=y.lineStartIndex+y.segment+1,tt=new l.P(P.getx(We),P.gety(We)),st=St(tt,g,pe),it=st.signedDistanceFromCamera>0?st.point:yr(F,tt,He,1,g,pe),dt=Ot(y.writingMode,He,it,ue);if(dt)return dt}const De=H(ae*k.getoffsetX(y.glyphStartIndex),Pe,Ne,u,B,F,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,P,_,X,ce,pe);if(!De)return{notEnoughRoom:!0};ge=[De]}for(const De of ge)l.ak(D,De.point,De.angle);return{}}function yr(y,i,u,p,g,_){const C=St(y.add(y.sub(i)._unit()),g,_).point,k=u.sub(C);return u.add(k._mult(p/k.mag()))}function Lt(y,i){const{projectionCache:u,lineVertexArray:p,labelPlaneMatrix:g,tileAnchorPoint:_,distanceFromAnchor:C,getElevation:k,previousVertex:P,direction:D,absOffsetX:B}=i;if(u.projections[y])return u.projections[y];const F=new l.P(p.getx(y),p.gety(y)),X=St(F,g,k);if(X.signedDistanceFromCamera>0)return u.projections[y]=X.point,X.point;const ue=y-D;return yr(C===0?_:new l.P(p.getx(ue),p.gety(ue)),F,P,B-C+1,g,k)}function Fr(y,i,u){return y._unit()._perp()._mult(i*u)}function he(y,i,u,p,g,_,C,k){const{projectionCache:P,direction:D}=k;if(P.offsets[y])return P.offsets[y];const B=u.add(i);if(y+D<p||y+D>=g)return P.offsets[y]=B,B;const F=Lt(y+D,k),X=Fr(F.sub(u),C,D),ue=u.add(X),ce=F.add(X);return P.offsets[y]=l.al(_,B,ue,ce)||B,P.offsets[y]}function H(y,i,u,p,g,_,C,k,P,D,B,F,X,ue){const ce=p?y-i:y+i;let pe=ce>0?1:-1,ae=0;p&&(pe*=-1,ae=Math.PI),pe<0&&(ae+=Math.PI);let Pe,Ne,ge=pe>0?k+C:k+C+1,De=g,He=g,We=0,tt=0;const st=Math.abs(ce),it=[];let dt;for(;We+tt<=st;){if(ge+=pe,ge<k||ge>=P)return null;We+=tt,He=De,Ne=Pe;const vt={projectionCache:F,lineVertexArray:D,labelPlaneMatrix:B,tileAnchorPoint:_,distanceFromAnchor:We,getElevation:ue,previousVertex:He,direction:pe,absOffsetX:st};if(De=Lt(ge,vt),u===0)it.push(He),dt=De.sub(He);else{let ir;const Nt=De.sub(He);ir=Nt.mag()===0?Fr(Lt(ge+pe,vt).sub(De),u,pe):Fr(Nt,u,pe),Ne||(Ne=He.add(ir)),Pe=he(ge,ir,De,k,P,Ne,u,vt),it.push(Ne),dt=Pe.sub(Ne)}tt=dt.mag()}const $t=dt._mult((st-We)/tt)._add(Ne||He),xr=ae+Math.atan2(De.y-He.y,De.x-He.x);return it.push($t),{point:$t,angle:X?xr:0,path:it}}const G=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function te(y,i){for(let u=0;u<y;u++){const p=i.length;i.resize(p+4),i.float32.set(G,3*p)}}function de(y,i,u){const p=i[0],g=i[1];return y[0]=u[0]*p+u[4]*g+u[12],y[1]=u[1]*p+u[5]*g+u[13],y[3]=u[3]*p+u[7]*g+u[15],y}const fe=100;class Me{constructor(i,u=new Tr(i.width+200,i.height+200,25),p=new Tr(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=p,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+fe,this.screenBottomBoundary=i.height+fe,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,p,g,_,C){const k=this.projectAndGetPerspectiveRatio(g,i.anchorPointX,i.anchorPointY,C),P=p*k.perspectiveRatio,D=i.x1*P+k.point.x,B=i.y1*P+k.point.y,F=i.x2*P+k.point.x,X=i.y2*P+k.point.y;return!this.isInsideGrid(D,B,F,X)||u!=="always"&&this.grid.hitTest(D,B,F,X,u,_)||k.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[D,B,F,X],offscreen:this.isOffscreen(D,B,F,X)}}placeCollisionCircles(i,u,p,g,_,C,k,P,D,B,F,X,ue,ce){const pe=[],ae=new l.P(u.anchorX,u.anchorY),Pe=St(ae,C,ce),Ne=tr(this.transform.cameraToCenterDistance,Pe.signedDistanceFromCamera),ge=(B?_/Ne:_*Ne)/l.ap,De=St(ae,k,ce).point,He=Yt(ge,g,u.lineOffsetX*ge,u.lineOffsetY*ge,!1,De,ae,u,p,k,{projections:{},offsets:{}},!1,ce);let We=!1,tt=!1,st=!0;if(He){const it=.5*X*Ne+ue,dt=new l.P(-100,-100),$t=new l.P(this.screenRightBoundary,this.screenBottomBoundary),xr=new Gt,vt=He.first,ir=He.last;let Nt=[];for(let pr=vt.path.length-1;pr>=1;pr--)Nt.push(vt.path[pr]);for(let pr=1;pr<ir.path.length;pr++)Nt.push(ir.path[pr]);const qr=2.5*it;if(P){const pr=Nt.map(br=>St(br,P,ce));Nt=pr.some(br=>br.signedDistanceFromCamera<=0)?[]:pr.map(br=>br.point)}let gr=[];if(Nt.length>0){const pr=Nt[0].clone(),br=Nt[0].clone();for(let kn=1;kn<Nt.length;kn++)pr.x=Math.min(pr.x,Nt[kn].x),pr.y=Math.min(pr.y,Nt[kn].y),br.x=Math.max(br.x,Nt[kn].x),br.y=Math.max(br.y,Nt[kn].y);gr=pr.x>=dt.x&&br.x<=$t.x&&pr.y>=dt.y&&br.y<=$t.y?[Nt]:br.x<dt.x||pr.x>$t.x||br.y<dt.y||pr.y>$t.y?[]:l.am([Nt],dt.x,dt.y,$t.x,$t.y)}for(const pr of gr){xr.reset(pr,.25*it);let br=0;br=xr.length<=.5*it?1:Math.ceil(xr.paddedLength/qr)+1;for(let kn=0;kn<br;kn++){const en=kn/Math.max(br-1,1),ai=xr.lerp(en),Vn=ai.x+fe,Mn=ai.y+fe;pe.push(Vn,Mn,it,0);const eo=Vn-it,sn=Mn-it,Go=Vn+it,qo=Mn+it;if(st=st&&this.isOffscreen(eo,sn,Go,qo),tt=tt||this.isInsideGrid(eo,sn,Go,qo),i!=="always"&&this.grid.hitTestCircle(Vn,Mn,it,i,F)&&(We=!0,!D))return{circles:[],offscreen:!1,collisionDetected:We}}}}return{circles:!D&&We||!tt||Ne<this.perspectiveRatioCutoff?[]:pe,offscreen:st,collisionDetected:We}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let p=1/0,g=1/0,_=-1/0,C=-1/0;for(const B of i){const F=new l.P(B.x+fe,B.y+fe);p=Math.min(p,F.x),g=Math.min(g,F.y),_=Math.max(_,F.x),C=Math.max(C,F.y),u.push(F)}const k=this.grid.query(p,g,_,C).concat(this.ignoredGrid.query(p,g,_,C)),P={},D={};for(const B of k){const F=B.key;if(P[F.bucketInstanceId]===void 0&&(P[F.bucketInstanceId]={}),P[F.bucketInstanceId][F.featureIndex])continue;const X=[new l.P(B.x1,B.y1),new l.P(B.x2,B.y1),new l.P(B.x2,B.y2),new l.P(B.x1,B.y2)];l.an(u,X)&&(P[F.bucketInstanceId][F.featureIndex]=!0,D[F.bucketInstanceId]===void 0&&(D[F.bucketInstanceId]=[]),D[F.bucketInstanceId].push(F.featureIndex))}return D}insertCollisionBox(i,u,p,g,_,C){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,p,g,_,C){const k=p?this.ignoredGrid:this.grid,P={bucketInstanceId:g,featureIndex:_,collisionGroupID:C,overlapMode:u};for(let D=0;D<i.length;D+=4)k.insertCircle(P,i[D],i[D+1],i[D+2])}projectAndGetPerspectiveRatio(i,u,p,g){let _;return g?(_=[u,p,g(u,p),1],l.ag(_,_,i)):(_=[u,p,0,1],de(_,_,i)),{point:new l.P((_[0]/_[3]+1)/2*this.transform.width+fe,(-_[1]/_[3]+1)/2*this.transform.height+fe),perspectiveRatio:.5+this.transform.cameraToCenterDistance/_[3]*.5}}isOffscreen(i,u,p,g){return p<fe||i>=this.screenRightBoundary||g<fe||u>this.screenBottomBoundary}isInsideGrid(i,u,p,g){return p>=0&&i<this.gridRightBoundary&&g>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=l.ao([]);return l.$(i,i,[-100,-100,0]),i}}function be(y,i,u){return i*(l.N/(y.tileSize*Math.pow(2,u-y.tileID.overscaledZ)))}class ye{constructor(i,u,p,g){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):g&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Ee{constructor(i,u,p,g,_){this.text=new ye(i?i.text:null,u,p,_),this.icon=new ye(i?i.icon:null,u,g,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Xe{constructor(i,u,p){this.text=i,this.icon=u,this.skipFade=p}}class ne{constructor(){this.invProjMatrix=l.Z(),this.viewportMatrix=l.Z(),this.circles=[]}}class oe{constructor(i,u,p,g,_){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=g,this.tileID=_}}class Ce{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[i]}}function je(y,i,u,p,g){const{horizontalAlign:_,verticalAlign:C}=l.au(y);return new l.P(-(_-.5)*i+p[0]*g,-(C-.5)*u+p[1]*g)}function Ze(y,i,u,p,g,_){const{x1:C,x2:k,y1:P,y2:D,anchorPointX:B,anchorPointY:F}=y,X=new l.P(i,u);return p&&X._rotate(g?_:-_),{x1:C+X.x,y1:P+X.y,x2:k+X.x,y2:D+X.y,anchorPointX:B,anchorPointY:F}}class et{constructor(i,u,p,g,_){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new Me(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Ce(g),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,p,g){const _=p.getBucket(u),C=p.latestFeatureIndex;if(!_||!C||u.id!==_.layerIds[0])return;const k=p.collisionBoxArray,P=_.layers[0].layout,D=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),B=p.tileSize/l.N,F=this.transform.calculatePosMatrix(p.tileID.toUnwrapped()),X=P.get("text-pitch-alignment")==="map",ue=P.get("text-rotation-alignment")==="map",ce=be(p,1,this.transform.zoom),pe=Be(F,X,ue,this.transform,ce);let ae=null;if(X){const Ne=xt(F,X,ue,this.transform,ce);ae=l.a1([],this.transform.labelPlaneMatrix,Ne)}this.retainedQueryData[_.bucketInstanceId]=new oe(_.bucketInstanceId,C,_.sourceLayerIndex,_.index,p.tileID);const Pe={bucket:_,layout:P,posMatrix:F,textLabelPlaneMatrix:pe,labelToScreenMatrix:ae,scale:D,textPixelRatio:B,holdingForFade:p.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:l.ah(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(g)for(const Ne of _.sortKeyRanges){const{sortKey:ge,symbolInstanceStart:De,symbolInstanceEnd:He}=Ne;i.push({sortKey:ge,symbolInstanceStart:De,symbolInstanceEnd:He,parameters:Pe})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:Pe})}attemptAnchorPlacement(i,u,p,g,_,C,k,P,D,B,F,X,ue,ce,pe,ae){const Pe=l.aq[i.textAnchor],Ne=[i.textOffset0,i.textOffset1],ge=je(Pe,p,g,Ne,_),De=this.collisionIndex.placeCollisionBox(Ze(u,ge.x,ge.y,C,k,this.transform.angle),F,P,D,B.predicate,ae);if((!pe||this.collisionIndex.placeCollisionBox(Ze(pe,ge.x,ge.y,C,k,this.transform.angle),F,P,D,B.predicate,ae).box.length!==0)&&De.box.length>0){let He;if(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(He=this.prevPlacement.variableOffsets[X.crossTileID].anchor),X.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[X.crossTileID]={textOffset:Ne,width:p,height:g,anchor:Pe,textBoxScale:_,prevAnchor:He},this.markUsedJustification(ue,Pe,X,ce),ue.allowVerticalPlacement&&(this.markUsedOrientation(ue,ce,X),this.placedOrientations[X.crossTileID]=ce),{shift:ge,placedGlyphBoxes:De}}}placeLayerBucketPart(i,u,p){const{bucket:g,layout:_,posMatrix:C,textLabelPlaneMatrix:k,labelToScreenMatrix:P,textPixelRatio:D,holdingForFade:B,collisionBoxArray:F,partiallyEvaluatedTextSize:X,collisionGroup:ue}=i.parameters,ce=_.get("text-optional"),pe=_.get("icon-optional"),ae=l.ar(_,"text-overlap","text-allow-overlap"),Pe=ae==="always",Ne=l.ar(_,"icon-overlap","icon-allow-overlap"),ge=Ne==="always",De=_.get("text-rotation-alignment")==="map",He=_.get("text-pitch-alignment")==="map",We=_.get("icon-text-fit")!=="none",tt=_.get("symbol-z-order")==="viewport-y",st=Pe&&(ge||!g.hasIconData()||pe),it=ge&&(Pe||!g.hasTextData()||ce);!g.collisionArrays&&F&&g.deserializeCollisionBoxes(F);const dt=this.retainedQueryData[g.bucketInstanceId].tileID,$t=this.terrain?(vt,ir)=>this.terrain.getElevation(dt,vt,ir):null,xr=(vt,ir)=>{var Nt,qr;if(u[vt.crossTileID])return;if(B)return void(this.placements[vt.crossTileID]=new Xe(!1,!1,!1));let gr=!1,pr=!1,br=!0,kn=null,en={box:null,offscreen:null},ai={box:null,offscreen:null},Vn=null,Mn=null,eo=null,sn=0,Go=0,qo=0;ir.textFeatureIndex?sn=ir.textFeatureIndex:vt.useRuntimeCollisionCircles&&(sn=vt.featureIndex),ir.verticalTextFeatureIndex&&(Go=ir.verticalTextFeatureIndex);const Ua=ir.textBox;if(Ua){const hi=In=>{let Un=l.ai.horizontal;if(g.allowVerticalPlacement&&!In&&this.prevPlacement){const Li=this.prevPlacement.placedOrientations[vt.crossTileID];Li&&(this.placedOrientations[vt.crossTileID]=Li,Un=Li,this.markUsedOrientation(g,Un,vt))}return Un},si=(In,Un)=>{if(g.allowVerticalPlacement&&vt.numVerticalGlyphVertices>0&&ir.verticalTextBox){for(const Li of g.writingModes)if(Li===l.ai.vertical?(en=Un(),ai=en):en=In(),en&&en.box&&en.box.length)break}else en=In()},bi=vt.textAnchorOffsetStartIndex,hs=vt.textAnchorOffsetEndIndex;if(hs===bi){const In=(Un,Li)=>{const Tn=this.collisionIndex.placeCollisionBox(Un,ae,D,C,ue.predicate,$t);return Tn&&Tn.box&&Tn.box.length&&(this.markUsedOrientation(g,Li,vt),this.placedOrientations[vt.crossTileID]=Li),Tn};si(()=>In(Ua,l.ai.horizontal),()=>{const Un=ir.verticalTextBox;return g.allowVerticalPlacement&&vt.numVerticalGlyphVertices>0&&Un?In(Un,l.ai.vertical):{box:null,offscreen:null}}),hi(en&&en.box&&en.box.length)}else{let In=l.aq[(qr=(Nt=this.prevPlacement)===null||Nt===void 0?void 0:Nt.variableOffsets[vt.crossTileID])===null||qr===void 0?void 0:qr.anchor];const Un=(Tn,ps,Xc)=>{const Gf=Tn.x2-Tn.x1,qf=Tn.y2-Tn.y1,Pv=vt.textBoxScale,oh=We&&Ne==="never"?ps:null;let Zo={box:[],offscreen:!1},fs=ae==="never"?1:2,Ko="never";In&&fs++;for(let mo=0;mo<fs;mo++){for(let Xo=bi;Xo<hs;Xo++){const ah=g.textAnchorOffsets.get(Xo);if(In&&ah.textAnchor!==In)continue;const xa=this.attemptAnchorPlacement(ah,Tn,Gf,qf,Pv,De,He,D,C,ue,Ko,vt,g,Xc,oh,$t);if(xa&&(Zo=xa.placedGlyphBoxes,Zo&&Zo.box&&Zo.box.length))return gr=!0,kn=xa.shift,Zo}In?In=null:Ko=ae}return Zo};si(()=>Un(Ua,ir.iconBox,l.ai.horizontal),()=>{const Tn=ir.verticalTextBox;return g.allowVerticalPlacement&&!(en&&en.box&&en.box.length)&&vt.numVerticalGlyphVertices>0&&Tn?Un(Tn,ir.verticalIconBox,l.ai.vertical):{box:null,offscreen:null}}),en&&(gr=en.box,br=en.offscreen);const Li=hi(en&&en.box);if(!gr&&this.prevPlacement){const Tn=this.prevPlacement.variableOffsets[vt.crossTileID];Tn&&(this.variableOffsets[vt.crossTileID]=Tn,this.markUsedJustification(g,Tn.anchor,vt,Li))}}}if(Vn=en,gr=Vn&&Vn.box&&Vn.box.length>0,br=Vn&&Vn.offscreen,vt.useRuntimeCollisionCircles){const hi=g.text.placedSymbolArray.get(vt.centerJustifiedTextSymbolIndex),si=l.aj(g.textSizeData,X,hi),bi=_.get("text-padding");Mn=this.collisionIndex.placeCollisionCircles(ae,hi,g.lineVertexArray,g.glyphOffsetArray,si,C,k,P,p,He,ue.predicate,vt.collisionCircleDiameter,bi,$t),Mn.circles.length&&Mn.collisionDetected&&!p&&l.w("Collisions detected, but collision boxes are not shown"),gr=Pe||Mn.circles.length>0&&!Mn.collisionDetected,br=br&&Mn.offscreen}if(ir.iconFeatureIndex&&(qo=ir.iconFeatureIndex),ir.iconBox){const hi=si=>{const bi=We&&kn?Ze(si,kn.x,kn.y,De,He,this.transform.angle):si;return this.collisionIndex.placeCollisionBox(bi,Ne,D,C,ue.predicate,$t)};ai&&ai.box&&ai.box.length&&ir.verticalIconBox?(eo=hi(ir.verticalIconBox),pr=eo.box.length>0):(eo=hi(ir.iconBox),pr=eo.box.length>0),br=br&&eo.offscreen}const ds=ce||vt.numHorizontalGlyphVertices===0&&vt.numVerticalGlyphVertices===0,qs=pe||vt.numIconVertices===0;if(ds||qs?qs?ds||(pr=pr&&gr):gr=pr&&gr:pr=gr=pr&&gr,gr&&Vn&&Vn.box&&this.collisionIndex.insertCollisionBox(Vn.box,ae,_.get("text-ignore-placement"),g.bucketInstanceId,ai&&ai.box&&Go?Go:sn,ue.ID),pr&&eo&&this.collisionIndex.insertCollisionBox(eo.box,Ne,_.get("icon-ignore-placement"),g.bucketInstanceId,qo,ue.ID),Mn&&(gr&&this.collisionIndex.insertCollisionCircles(Mn.circles,ae,_.get("text-ignore-placement"),g.bucketInstanceId,sn,ue.ID),p)){const hi=g.bucketInstanceId;let si=this.collisionCircleArrays[hi];si===void 0&&(si=this.collisionCircleArrays[hi]=new ne);for(let bi=0;bi<Mn.circles.length;bi+=4)si.circles.push(Mn.circles[bi+0]),si.circles.push(Mn.circles[bi+1]),si.circles.push(Mn.circles[bi+2]),si.circles.push(Mn.collisionDetected?1:0)}if(vt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[vt.crossTileID]=new Xe(gr||st,pr||it,br||g.justReloaded),u[vt.crossTileID]=!0};if(tt){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const vt=g.getSortedSymbolIndexes(this.transform.angle);for(let ir=vt.length-1;ir>=0;--ir){const Nt=vt[ir];xr(g.symbolInstances.get(Nt),g.collisionArrays[Nt])}}else for(let vt=i.symbolInstanceStart;vt<i.symbolInstanceEnd;vt++)xr(g.symbolInstances.get(vt),g.collisionArrays[vt]);if(p&&g.bucketInstanceId in this.collisionCircleArrays){const vt=this.collisionCircleArrays[g.bucketInstanceId];l.as(vt.invProjMatrix,C),vt.viewportMatrix=this.collisionIndex.getViewportMatrix()}g.justReloaded=!1}markUsedJustification(i,u,p,g){let _;_=g===l.ai.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[l.at(u)];const C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const k of C)k>=0&&(i.text.placedSymbolArray.get(k).crossTileID=_>=0&&k!==_?0:p.crossTileID)}markUsedOrientation(i,u,p){const g=u===l.ai.horizontal||u===l.ai.horizontalOnly?u:0,_=u===l.ai.vertical?u:0,C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const k of C)i.text.placedSymbolArray.get(k).placedOrientation=g;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const g=u?u.symbolFadeChange(i):1,_=u?u.opacities:{},C=u?u.variableOffsets:{},k=u?u.placedOrientations:{};for(const P in this.placements){const D=this.placements[P],B=_[P];B?(this.opacities[P]=new Ee(B,g,D.text,D.icon),p=p||D.text!==B.text.placed||D.icon!==B.icon.placed):(this.opacities[P]=new Ee(null,g,D.text,D.icon,D.skipFade),p=p||D.text||D.icon)}for(const P in _){const D=_[P];if(!this.opacities[P]){const B=new Ee(D,g,!1,!1);B.isHidden()||(this.opacities[P]=B,p=p||D.text.placed||D.icon.placed)}}for(const P in C)this.variableOffsets[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.variableOffsets[P]=C[P]);for(const P in k)this.placedOrientations[P]||!this.opacities[P]||this.opacities[P].isHidden()||(this.placedOrientations[P]=k[P]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const p={};for(const g of u){const _=g.getBucket(i);_&&g.latestFeatureIndex&&i.id===_.layerIds[0]&&this.updateBucketOpacities(_,p,g.collisionBoxArray)}}updateBucketOpacities(i,u,p){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const g=i.layers[0],_=g.layout,C=new Ee(null,0,!1,!1,!0),k=_.get("text-allow-overlap"),P=_.get("icon-allow-overlap"),D=g._unevaluatedLayout.hasValue("text-variable-anchor")||g._unevaluatedLayout.hasValue("text-variable-anchor-offset"),B=_.get("text-rotation-alignment")==="map",F=_.get("text-pitch-alignment")==="map",X=_.get("icon-text-fit")!=="none",ue=new Ee(null,0,k&&(P||!i.hasIconData()||_.get("icon-optional")),P&&(k||!i.hasTextData()||_.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const ce=(pe,ae,Pe)=>{for(let Ne=0;Ne<ae/4;Ne++)pe.opacityVertexArray.emplaceBack(Pe);pe.hasVisibleVertices=pe.hasVisibleVertices||Pe!==Wr};for(let pe=0;pe<i.symbolInstances.length;pe++){const ae=i.symbolInstances.get(pe),{numHorizontalGlyphVertices:Pe,numVerticalGlyphVertices:Ne,crossTileID:ge}=ae;let De=this.opacities[ge];u[ge]?De=C:De||(De=ue,this.opacities[ge]=De),u[ge]=!0;const He=ae.numIconVertices>0,We=this.placedOrientations[ae.crossTileID],tt=We===l.ai.vertical,st=We===l.ai.horizontal||We===l.ai.horizontalOnly;if(Pe>0||Ne>0){const it=ar(De.text);ce(i.text,Pe,tt?Wr:it),ce(i.text,Ne,st?Wr:it);const dt=De.text.isHidden();[ae.rightJustifiedTextSymbolIndex,ae.centerJustifiedTextSymbolIndex,ae.leftJustifiedTextSymbolIndex].forEach(vt=>{vt>=0&&(i.text.placedSymbolArray.get(vt).hidden=dt||tt?1:0)}),ae.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ae.verticalPlacedTextSymbolIndex).hidden=dt||st?1:0);const $t=this.variableOffsets[ae.crossTileID];$t&&this.markUsedJustification(i,$t.anchor,ae,We);const xr=this.placedOrientations[ae.crossTileID];xr&&(this.markUsedJustification(i,"left",ae,xr),this.markUsedOrientation(i,xr,ae))}if(He){const it=ar(De.icon),dt=!(X&&ae.verticalPlacedIconSymbolIndex&&tt);ae.placedIconSymbolIndex>=0&&(ce(i.icon,ae.numIconVertices,dt?it:Wr),i.icon.placedSymbolArray.get(ae.placedIconSymbolIndex).hidden=De.icon.isHidden()),ae.verticalPlacedIconSymbolIndex>=0&&(ce(i.icon,ae.numVerticalIconVertices,dt?Wr:it),i.icon.placedSymbolArray.get(ae.verticalPlacedIconSymbolIndex).hidden=De.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const it=i.collisionArrays[pe];if(it){let dt=new l.P(0,0);if(it.textBox||it.verticalTextBox){let xr=!0;if(D){const vt=this.variableOffsets[ge];vt?(dt=je(vt.anchor,vt.width,vt.height,vt.textOffset,vt.textBoxScale),B&&dt._rotate(F?this.transform.angle:-this.transform.angle)):xr=!1}it.textBox&&Se(i.textCollisionBox.collisionVertexArray,De.text.placed,!xr||tt,dt.x,dt.y),it.verticalTextBox&&Se(i.textCollisionBox.collisionVertexArray,De.text.placed,!xr||st,dt.x,dt.y)}const $t=!!(!st&&it.verticalIconBox);it.iconBox&&Se(i.iconCollisionBox.collisionVertexArray,De.icon.placed,$t,X?dt.x:0,X?dt.y:0),it.verticalIconBox&&Se(i.iconCollisionBox.collisionVertexArray,De.icon.placed,!$t,X?dt.x:0,X?dt.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const pe=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=pe.invProjMatrix,i.placementViewportMatrix=pe.viewportMatrix,i.collisionCircleArray=pe.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function Se(y,i,u,p,g){y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0),y.emplaceBack(i?1:0,u?1:0,p||0,g||0)}const _e=Math.pow(2,25),Ke=Math.pow(2,24),Je=Math.pow(2,17),ot=Math.pow(2,16),Ft=Math.pow(2,9),Tt=Math.pow(2,8),Xt=Math.pow(2,1);function ar(y){if(y.opacity===0&&!y.placed)return 0;if(y.opacity===1&&y.placed)return 4294967295;const i=y.placed?1:0,u=Math.floor(127*y.opacity);return u*_e+i*Ke+u*Je+i*ot+u*Ft+i*Tt+u*Xt+i}const Wr=0;class pn{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,p,g,_){const C=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(C,g,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((k,P)=>k.sortKey-P.sortKey));this._currentPartIndex<C.length;)if(u.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,_())return!0;return!1}}class Di{constructor(i,u,p,g,_,C,k,P){this.placement=new et(i,u,C,k,P),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(i,u,p){const g=l.h.now(),_=()=>!this._forceFullPlacement&&l.h.now()-g>2;for(;this._currentPlacementIndex>=0;){const C=u[i[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=k)&&(!C.maxzoom||C.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new pn(C)),this._inProgressLayer.continuePlacement(p[C.source],this.placement,this._showCollisionBoxes,C,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Qn=512/l.N/2;class Ho{constructor(i,u,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};const g=new Map;for(let _=0;_<u.length;_++){const C=u.get(_),k=C.key,P=g.get(k);P?P.push(C):g.set(k,[C])}for(const[_,C]of g){const k={positions:C.map(P=>({x:Math.floor(P.anchorX*Qn),y:Math.floor(P.anchorY*Qn)})),crossTileIDs:C.map(P=>P.crossTileID)};if(k.positions.length>128){const P=new l.av(k.positions.length,16,Uint16Array);for(const{x:D,y:B}of k.positions)P.add(D,B);P.finish(),delete k.positions,k.index=P}this._symbolsByKey[_]=k}}getScaledCoordinates(i,u){const{x:p,y:g,z:_}=this.tileID.canonical,{x:C,y:k,z:P}=u.canonical,D=Qn/Math.pow(2,P-_),B=(k*l.N+i.anchorY)*D,F=g*l.N*Qn;return{x:Math.floor((C*l.N+i.anchorX)*D-p*l.N*Qn),y:Math.floor(B-F)}}findMatches(i,u,p){const g=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let _=0;_<i.length;_++){const C=i.get(_);if(C.crossTileID)continue;const k=this._symbolsByKey[C.key];if(!k)continue;const P=this.getScaledCoordinates(C,u);if(k.index){const D=k.index.range(P.x-g,P.y-g,P.x+g,P.y+g).sort();for(const B of D){const F=k.crossTileIDs[B];if(!p[F]){p[F]=!0,C.crossTileID=F;break}}}else if(k.positions)for(let D=0;D<k.positions.length;D++){const B=k.positions[D],F=k.crossTileIDs[D];if(Math.abs(B.x-P.x)<=g&&Math.abs(B.y-P.y)<=g&&!p[F]){p[F]=!0,C.crossTileID=F;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class vr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ki{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const p in this.indexes){const g=this.indexes[p],_={};for(const C in g){const k=g[C];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+u),_[k.tileID.key]=k}this.indexes[p]=_}this.lng=i}addBucket(i,u,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let _=0;_<u.symbolInstances.length;_++)u.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const g=this.usedCrossTileIDs[i.overscaledZ];for(const _ in this.indexes){const C=this.indexes[_];if(Number(_)>i.overscaledZ)for(const k in C){const P=C[k];P.tileID.isChildOf(i)&&P.findMatches(u.symbolInstances,i,g)}else{const k=C[i.scaledTo(Number(_)).key];k&&k.findMatches(u.symbolInstances,i,g)}}for(let _=0;_<u.symbolInstances.length;_++){const C=u.symbolInstances.get(_);C.crossTileID||(C.crossTileID=p.generate(),g[C.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Ho(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const p of u.getCrossTileIDsLists())for(const g of p)delete this.usedCrossTileIDs[i][g]}removeStaleBuckets(i){let u=!1;for(const p in this.indexes){const g=this.indexes[p];for(const _ in g)i[g[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,g[_]),delete g[_],u=!0)}return u}}class Qt{constructor(){this.layerIndexes={},this.crossTileIDs=new vr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,p){let g=this.layerIndexes[i.id];g===void 0&&(g=this.layerIndexes[i.id]=new Ki);let _=!1;const C={};g.handleWrapJump(p);for(const k of u){const P=k.getBucket(i);P&&i.id===P.layerIds[0]&&(P.bucketInstanceId||(P.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(k.tileID,P,this.crossTileIDs)&&(_=!0),C[P.bucketInstanceId]=!0)}return g.removeStaleBuckets(C)&&(_=!0),_}pruneUnusedLayers(i){const u={};i.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}const $r=(y,i)=>l.x(y,i&&i.filter(u=>u.identifier!=="source.canvas")),Pr=l.F(l.ax,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setGlyphs","setSprite"]),ei=l.F(l.ax,["setCenter","setZoom","setBearing","setPitch"]),Zt=l.aw();class fr extends l.E{constructor(i,u={}){super(),this.map=i,this.dispatcher=new at(cr(),this,i._getMapId()),this.imageManager=new ze,this.imageManager.setEventedParent(this),this.glyphManager=new Te(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Qe(256,512),this.crossTileSymbolIndex=new Qt,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ay,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.az());const p=this;this._rtlTextPluginCallback=fr.registerForPluginStateChange(g=>{p.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:g.pluginStatus,pluginURL:g.pluginURL},(_,C)=>{if(l.aA(_),C&&C.every(k=>k))for(const k in p.sourceCaches){const P=p.sourceCaches[k].getSource().type;P!=="vector"&&P!=="geojson"||p.sourceCaches[k].reload()}})}),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;const _=this.sourceCaches[g.sourceId];if(!_)return;const C=_.getSource();if(C&&C.vectorLayerIds)for(const k in this._layers){const P=this._layers[k];P.source===C.id&&this._validateLayer(P)}})}loadURL(i,u={},p){this.fire(new l.k("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const g=this.map._requestManager.transformRequest(i,O.Style);this._request=l.f(g,(_,C)=>{this._request=null,_?this.fire(new l.j(_)):C&&this._load(C,u,p)})}loadJSON(i,u={},p){this.fire(new l.k("dataloading",{dataType:"style"})),this._request=l.h.frame(()=>{this._request=null,u.validate=u.validate!==!1,this._load(i,u,p)})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(Zt,{validate:!1})}_load(i,u,p){var g;const _=u.transformStyle?u.transformStyle(p,i):i;if(!u.validate||!$r(this,l.y(_))){this._loaded=!0,this.stylesheet=_;for(const C in _.sources)this.addSource(C,_.sources[C],{validate:!1});_.sprite?this._loadSprite(_.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(_.glyphs),this._createLayers(),this.light=new Oe(this.stylesheet.light),this.map.setTerrain((g=this.stylesheet.terrain)!==null&&g!==void 0?g:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const i=l.aB(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",i),this._order=i.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of i){const p=l.aC(u);p.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=p}}_loadSprite(i,u=!1,p=void 0){this.imageManager.setLoaded(!1),this._spriteRequest=function(g,_,C,k){const P=Z(g),D=P.length,B=C>1?"@2x":"",F={},X={},ue={};for(const{id:ce,url:pe}of P){const ae=_.transformRequest(_.normalizeSpriteURL(pe,B,".json"),O.SpriteJSON),Pe=`${ce}_${ae.url}`;F[Pe]=l.f(ae,(De,He)=>{delete F[Pe],X[ce]=He,ke(k,X,ue,De,D)});const Ne=_.transformRequest(_.normalizeSpriteURL(pe,B,".png"),O.SpriteImage),ge=`${ce}_${Ne.url}`;F[ge]=K.getImage(Ne,(De,He)=>{delete F[ge],ue[ce]=He,ke(k,X,ue,De,D)})}return{cancel(){for(const ce of Object.values(F))ce.cancel()}}}(i,this.map._requestManager,this.map.getPixelRatio(),(g,_)=>{if(this._spriteRequest=null,g)this.fire(new l.j(g));else if(_)for(const C in _){this._spritesImagesIds[C]=[];const k=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(P=>!(P in _)):[];for(const P of k)this.imageManager.removeImage(P),this._changedImages[P]=!0;for(const P in _[C]){const D=C==="default"?P:`${C}:${P}`;this._spritesImagesIds[C].push(D),D in this.imageManager.images?this.imageManager.updateImage(D,_[C][P],!1):this.imageManager.addImage(D,_[C][P]),u&&(this._changedImages[D]=!0)}}this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),p&&p(g)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const p=i.sourceLayer;if(!p)return;const g=u.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(p)===-1)&&this.fire(new l.j(new Error(`Source layer "${p}" does not exist on source "${g.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const u=this._serializedAllLayers();if(!i||i.length===0)return Object.values(u);const p=[];for(const g of i)u[g]&&p.push(u[g]);return p}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const g=this._layers[p];g.type!=="custom"&&(i[p]=g.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const g=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(g.length||_.length)&&this._updateWorkerLayers(g,_);for(const C in this._updatedSources){const k=this._updatedSources[C];if(k==="reload")this._reloadSource(C);else{if(k!=="clear")throw new Error(`Invalid action ${k}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const p={};for(const g in this.sourceCaches){const _=this.sourceCaches[g];p[g]=_.used,_.used=!1}for(const g of this._order){const _=this._layers[g];_.recalculate(i,this._availableImages),!_.isHidden(i.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const g in p){const _=this.sourceCaches[g];p[g]!==_.used&&_.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,u={}){this._checkLoaded();const p=this.serialize();if(i=u.transformStyle?u.transformStyle(p,i):i,$r(this,l.y(i)))return!1;(i=l.aD(i)).layers=l.aB(i.layers);const g=l.aE(p,i).filter(C=>!(C.command in ei));if(g.length===0)return!1;const _=g.filter(C=>!(C.command in Pr));if(_.length>0)throw new Error(`Unimplemented: ${_.map(C=>C.command).join(", ")}.`);for(const C of g)C.command!=="setTransition"&&this[C.command].apply(this,C.args);return this.stylesheet=i,this._serializedLayers=null,!0}addImage(i,u){if(this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.y.source,`sources.${i}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const g=this.sourceCaches[i]=new Sr(i,u,this.dispatcher);g.style=this,g.setEventedParent(this,()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:i})),g.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new l.j(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,p={}){this._checkLoaded();const g=i.id;if(this.getLayer(g))return void this.fire(new l.j(new Error(`Layer "${g}" already exists on this map.`)));let _;if(i.type==="custom"){if($r(this,l.aF(i)))return;_=l.aC(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(g,i.source),i=l.aD(i),i=l.e(i,{source:g})),this._validate(l.y.layer,`layers.${g}`,i,{arrayIndex:-1},p))return;_=l.aC(i),this._validateLayer(_),_.setEventedParent(this,{layer:{id:g}})}const C=u?this._order.indexOf(u):this._order.length;if(u&&C===-1)this.fire(new l.j(new Error(`Cannot add layer "${g}" before non-existing layer "${u}".`)));else{if(this._order.splice(C,0,g),this._layerOrderChanged=!0,this._layers[g]=_,this._removedLayers[g]&&_.source&&_.type!=="custom"){const k=this._removedLayers[g];delete this._removedLayers[g],k.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new l.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const p=this._order.indexOf(i);this._order.splice(p,1);const g=u?this._order.indexOf(u):this._order.length;u&&g===-1?this.fire(new l.j(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(g,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,p){this._checkLoaded();const g=this.getLayer(i);g?g.minzoom===u&&g.maxzoom===p||(u!=null&&(g.minzoom=u),p!=null&&(g.maxzoom=p),this._updateLayer(g)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,p={}){this._checkLoaded();const g=this.getLayer(i);if(g){if(!l.aG(g.filter,u))return u==null?(g.filter=void 0,void this._updateLayer(g)):void(this._validate(l.y.filter,`layers.${g.id}.filter`,u,null,p)||(g.filter=l.aD(u),this._updateLayer(g)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return l.aD(this.getLayer(i).filter)}setLayoutProperty(i,u,p,g={}){this._checkLoaded();const _=this.getLayer(i);_?l.aG(_.getLayoutProperty(u),p)||(_.setLayoutProperty(u,p,g),this._updateLayer(_)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const p=this.getLayer(i);if(p)return p.getLayoutProperty(u);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,p,g={}){this._checkLoaded();const _=this.getLayer(i);_?l.aG(_.getPaintProperty(u),p)||(_.setPaintProperty(u,p,g)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const p=i.source,g=i.sourceLayer,_=this.sourceCaches[p];if(_===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const C=_.getSource().type;C==="geojson"&&g?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||g?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),_.setFeatureState(g,i.id,u)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const p=i.source,g=this.sourceCaches[p];if(g===void 0)return void this.fire(new l.j(new Error(`The source '${p}' does not exist in the map's style.`)));const _=g.getSource().type,C=_==="vector"?i.sourceLayer:void 0;_!=="vector"||C?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(C,i.id,u):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,p=i.sourceLayer,g=this.sourceCaches[u];if(g!==void 0)return g.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),g.getFeatureState(p,i.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=l.aH(this.sourceCaches,_=>_.serialize()),u=this._serializeByIds(this._order),p=this.map.getTerrain()||void 0,g=this.stylesheet;return l.aI({version:g.version,name:g.name,metadata:g.metadata,light:g.light,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,sources:i,layers:u,terrain:p},_=>_!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=C=>this._layers[C].type==="fill-extrusion",p={},g=[];for(let C=this._order.length-1;C>=0;C--){const k=this._order[C];if(u(k)){p[k]=C;for(const P of i){const D=P[k];if(D)for(const B of D)g.push(B)}}}g.sort((C,k)=>k.intersectionZ-C.intersectionZ);const _=[];for(let C=this._order.length-1;C>=0;C--){const k=this._order[C];if(u(k))for(let P=g.length-1;P>=0;P--){const D=g[P].feature;if(p[D.layer.id]<C)break;_.push(D),g.pop()}else for(const P of i){const D=P[k];if(D)for(const B of D)_.push(B.feature)}}return _}queryRenderedFeatures(i,u,p){u&&u.filter&&this._validate(l.y.filter,"queryRenderedFeatures.filter",u.filter,null,u);const g={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const k of u.layers){const P=this._layers[k];if(!P)return this.fire(new l.j(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];g[P.source]=!0}}const _=[];u.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const k in this.sourceCaches)u.layers&&!g[k]||_.push(Et(this.sourceCaches[k],this._layers,C,i,u,p));return this.placement&&_.push(function(k,P,D,B,F,X,ue){const ce={},pe=X.queryRenderedSymbols(B),ae=[];for(const Pe of Object.keys(pe).map(Number))ae.push(ue[Pe]);ae.sort(ur);for(const Pe of ae){const Ne=Pe.featureIndex.lookupSymbolFeatures(pe[Pe.bucketInstanceId],P,Pe.bucketIndex,Pe.sourceLayerIndex,F.filter,F.layers,F.availableImages,k);for(const ge in Ne){const De=ce[ge]=ce[ge]||[],He=Ne[ge];He.sort((We,tt)=>{const st=Pe.featureSortOrder;if(st){const it=st.indexOf(We.featureIndex);return st.indexOf(tt.featureIndex)-it}return tt.featureIndex-We.featureIndex});for(const We of He)De.push(We)}}for(const Pe in ce)ce[Pe].forEach(Ne=>{const ge=Ne.feature,De=D[k[Pe].source].getFeatureState(ge.layer["source-layer"],ge.id);ge.source=ge.layer.source,ge.layer["source-layer"]&&(ge.sourceLayer=ge.layer["source-layer"]),ge.state=De});return ce}(this._layers,C,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(i,u){u&&u.filter&&this._validate(l.y.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[i];return p?function(g,_){const C=g.getRenderableIds().map(D=>g.getTileByID(D)),k=[],P={};for(let D=0;D<C.length;D++){const B=C[D],F=B.tileID.canonical.key;P[F]||(P[F]=!0,B.querySourceFeatures(k,_))}return k}(p,u):[]}addSourceType(i,u,p){return lr(i)?p(new Error(`A source type called "${i}" already exists.`)):(((g,_)=>{Mr[g]=_})(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},p):p(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const p=this.light.getLight();let g=!1;for(const C in i)if(!l.aG(i[C],p[C])){g=!0;break}if(!g)return;const _={now:l.h.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(_)}_validate(i,u,p,g,_={}){return(!_||_.validate!==!1)&&$r(this,i.call(l.y,l.e({key:u,style:this.serialize(),value:p,styleSpec:l.v},g)))}_remove(i=!0){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.aJ.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,p,g,_=!1){let C=!1,k=!1;const P={};for(const D of this._order){const B=this._layers[D];if(B.type!=="symbol")continue;if(!P[B.source]){const X=this.sourceCaches[B.source];P[B.source]=X.getRenderableIds(!0).map(ue=>X.getTileByID(ue)).sort((ue,ce)=>ce.tileID.overscaledZ-ue.tileID.overscaledZ||(ue.tileID.isLessThan(ce.tileID)?-1:1))}const F=this.crossTileSymbolIndex.addLayer(B,P[B.source],i.center.lng);C=C||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.h.now(),i.zoom))&&(this.pauseablePlacement=new Di(i,this.map.terrain,this._order,_,u,p,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,P),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.h.now()),k=!0),C&&this.pauseablePlacement.placement.setStale()),k||C)for(const D of this._order){const B=this._layers[D];B.type==="symbol"&&this.placement.updateLayerOpacities(B,P[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.h.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,p){this.imageManager.getImages(u.icons,p),this._updateTilesForChangedImages();const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,p){this.glyphManager.getGlyphs(u.stacks,p);const g=this.sourceCaches[u.source];g&&g.setDependencies(u.tileID.key,u.type,[""])}getResource(i,u,p){return l.m(u,p)}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,u={}){this._checkLoaded(),i&&this._validate(l.y.glyphs,"glyphs",i,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,u,p={},g){this._checkLoaded();const _=[{id:i,url:u}],C=[...Z(this.stylesheet.sprite),..._];this._validate(l.y.sprite,"sprite",C,null,p)||(this.stylesheet.sprite=C,this._loadSprite(_,!0,g))}removeSprite(i){this._checkLoaded();const u=Z(this.stylesheet.sprite);if(u.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(const p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===i),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Z(this.stylesheet.sprite)}setSprite(i,u={},p){this._checkLoaded(),i&&this._validate(l.y.sprite,"sprite",i,null,u)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}fr.registerForPluginStateChange=l.aK;var Qr=l.Q([{name:"a_pos",type:"Int16",components:2}]),_r="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Br={prelude:zr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:zr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:zr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:zr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:zr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:zr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:zr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:zr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:zr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:zr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:zr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:zr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:zr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:zr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:zr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:zr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:zr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:zr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:zr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:zr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:zr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:zr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:zr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:zr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:zr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",_r),terrainDepth:zr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",_r),terrainCoords:zr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",_r)};function zr(y,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/attribute ([\w]+) ([\w]+)/g),g=y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=_?_.concat(g):g,k={};return{fragmentSource:y=y.replace(u,(P,D,B,F,X)=>(k[X]=!0,D==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${B} ${F} ${X};
#else
uniform ${B} ${F} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${B} ${F} ${X} = u_${X};
#endif
`)),vertexSource:i=i.replace(u,(P,D,B,F,X)=>{const ue=F==="float"?"vec2":"vec4",ce=X.match(/color/)?"color":ue;return k[X]?D==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${B} ${ue} a_${X};
varying ${B} ${F} ${X};
#else
uniform ${B} ${F} u_${X};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${B} ${F} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${ce}(a_${X}, u_${X}_t);
#else
    ${B} ${F} ${X} = u_${X};
#endif
`:D==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${B} ${ue} a_${X};
#else
uniform ${B} ${F} u_${X};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${B} ${F} ${X} = a_${X};
#else
    ${B} ${F} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${B} ${F} ${X} = unpack_mix_${ce}(a_${X}, u_${X}_t);
#else
    ${B} ${F} ${X} = u_${X};
#endif
`}),staticAttributes:p,staticUniforms:C}}class fa{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,p,g,_,C,k,P,D){this.context=i;let B=this.boundPaintVertexBuffers.length!==g.length;for(let F=0;!B&&F<g.length;F++)this.boundPaintVertexBuffers[F]!==g[F]&&(B=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||B||this.boundIndexBuffer!==_||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==k||this.boundDynamicVertexBuffer2!==P||this.boundDynamicVertexBuffer3!==D?this.freshBind(u,p,g,_,C,k,P,D):(i.bindVertexArray.set(this.vao),k&&k.bind(),_&&_.dynamicDraw&&_.bind(),P&&P.bind(),D&&D.bind())}freshBind(i,u,p,g,_,C,k,P){const D=i.numAttributes,B=this.context,F=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=g,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=k,this.boundDynamicVertexBuffer3=P,u.enableAttributes(F,i);for(const X of p)X.enableAttributes(F,i);C&&C.enableAttributes(F,i),k&&k.enableAttributes(F,i),P&&P.enableAttributes(F,i),u.bind(),u.setVertexAttribPointers(F,i,_);for(const X of p)X.bind(),X.setVertexAttribPointers(F,i,_);C&&(C.bind(),C.setVertexAttribPointers(F,i,_)),g&&g.bind(),k&&(k.bind(),k.setVertexAttribPointers(F,i,_)),P&&(P.bind(),P.setVertexAttribPointers(F,i,_)),B.currentNumAttributes=D}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function _n(y){const i=[];for(let u=0;u<y.length;u++){if(y[u]===null)continue;const p=y[u].split(" ");i.push(p.pop())}return i}class Cc{constructor(i,u,p,g,_,C){const k=i.gl;this.program=k.createProgram();const P=_n(u.staticAttributes),D=p?p.getBinderAttributes():[],B=P.concat(D),F=Br.prelude.staticUniforms?_n(Br.prelude.staticUniforms):[],X=u.staticUniforms?_n(u.staticUniforms):[],ue=p?p.getBinderUniforms():[],ce=F.concat(X).concat(ue),pe=[];for(const We of ce)pe.indexOf(We)<0&&pe.push(We);const ae=p?p.defines():[];_&&ae.push("#define OVERDRAW_INSPECTOR;"),C&&ae.push("#define TERRAIN3D;");const Pe=ae.concat(Br.prelude.fragmentSource,u.fragmentSource).join(`
`),Ne=ae.concat(Br.prelude.vertexSource,u.vertexSource).join(`
`),ge=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(ge,Pe),k.compileShader(ge),!k.getShaderParameter(ge,k.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${k.getShaderInfoLog(ge)}`);k.attachShader(this.program,ge);const De=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(De,Ne),k.compileShader(De),!k.getShaderParameter(De,k.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${k.getShaderInfoLog(De)}`);k.attachShader(this.program,De),this.attributes={};const He={};this.numAttributes=B.length;for(let We=0;We<this.numAttributes;We++)B[We]&&(k.bindAttribLocation(this.program,We,B[We]),this.attributes[B[We]]=We);if(k.linkProgram(this.program),!k.getProgramParameter(this.program,k.LINK_STATUS))throw new Error(`Program failed to link: ${k.getProgramInfoLog(this.program)}`);k.deleteShader(De),k.deleteShader(ge);for(let We=0;We<pe.length;We++){const tt=pe[We];if(tt&&!He[tt]){const st=k.getUniformLocation(this.program,tt);st&&(He[tt]=st)}}this.fixedUniforms=g(i,He),this.terrainUniforms=((We,tt)=>({u_depth:new l.aL(We,tt.u_depth),u_terrain:new l.aL(We,tt.u_terrain),u_terrain_dim:new l.aM(We,tt.u_terrain_dim),u_terrain_matrix:new l.aN(We,tt.u_terrain_matrix),u_terrain_unpack:new l.aO(We,tt.u_terrain_unpack),u_terrain_exaggeration:new l.aM(We,tt.u_terrain_exaggeration)}))(i,He),this.binderUniforms=p?p.getUniforms(i,He):[]}draw(i,u,p,g,_,C,k,P,D,B,F,X,ue,ce,pe,ae,Pe,Ne){const ge=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(g),i.setColorMode(_),i.setCullFace(C),P){i.activeTexture.set(ge.TEXTURE2),ge.bindTexture(ge.TEXTURE_2D,P.depthTexture),i.activeTexture.set(ge.TEXTURE3),ge.bindTexture(ge.TEXTURE_2D,P.texture);for(const He in this.terrainUniforms)this.terrainUniforms[He].set(P[He])}for(const He in this.fixedUniforms)this.fixedUniforms[He].set(k[He]);pe&&pe.setUniforms(i,this.binderUniforms,ue,{zoom:ce});let De=0;switch(u){case ge.LINES:De=2;break;case ge.TRIANGLES:De=3;break;case ge.LINE_STRIP:De=1}for(const He of X.get()){const We=He.vaos||(He.vaos={});(We[D]||(We[D]=new fa)).bind(i,this,B,pe?pe.getPaintVertexBuffers():[],F,He.vertexOffset,ae,Pe,Ne),ge.drawElements(u,He.primitiveLength*De,ge.UNSIGNED_SHORT,He.primitiveOffset*De*2)}}}function uo(y,i,u){const p=1/be(u,1,i.transform.tileZoom),g=Math.pow(2,u.tileID.overscaledZ),_=u.tileSize*Math.pow(2,i.transform.tileZoom)/g,C=_*(u.tileID.canonical.x+u.tileID.wrap*g),k=_*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,y.fromScale,y.toScale],u_fade:y.t,u_pixel_coord_upper:[C>>16,k>>16],u_pixel_coord_lower:[65535&C,65535&k]}}const _d=(y,i,u,p)=>{const g=i.style.light,_=g.properties.get("position"),C=[_.x,_.y,_.z],k=function(){var D=new l.A(9);return l.A!=Float32Array&&(D[1]=0,D[2]=0,D[3]=0,D[5]=0,D[6]=0,D[7]=0),D[0]=1,D[4]=1,D[8]=1,D}();g.properties.get("anchor")==="viewport"&&function(D,B){var F=Math.sin(B),X=Math.cos(B);D[0]=X,D[1]=F,D[2]=0,D[3]=-F,D[4]=X,D[5]=0,D[6]=0,D[7]=0,D[8]=1}(k,-i.transform.angle),function(D,B,F){var X=B[0],ue=B[1],ce=B[2];D[0]=X*F[0]+ue*F[3]+ce*F[6],D[1]=X*F[1]+ue*F[4]+ce*F[7],D[2]=X*F[2]+ue*F[5]+ce*F[8]}(C,C,k);const P=g.properties.get("color");return{u_matrix:y,u_lightpos:C,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[P.r,P.g,P.b],u_vertical_gradient:+u,u_opacity:p}},Ba=(y,i,u,p,g,_,C)=>l.e(_d(y,i,u,p),uo(_,i,C),{u_height_factor:-Math.pow(2,g.overscaledZ)/C.tileSize/8}),cf=y=>({u_matrix:y}),xd=(y,i,u,p)=>l.e(cf(y),uo(u,i,p)),kc=(y,i)=>({u_matrix:y,u_world:i}),Ic=(y,i,u,p,g)=>l.e(xd(y,i,u,p),{u_world:g}),Oa=(y,i,u,p)=>{const g=y.transform;let _,C;if(p.paint.get("circle-pitch-alignment")==="map"){const k=be(u,1,g.zoom);_=!0,C=[k,k]}else _=!1,C=g.pixelsToGLUnits;return{u_camera_to_center_distance:g.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:y.translatePosMatrix(i.posMatrix,u,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+_,u_device_pixel_ratio:y.pixelRatio,u_extrude_scale:C}},bd=(y,i,u)=>{const p=be(u,1,i.zoom),g=Math.pow(2,i.zoom-u.tileID.overscaledZ),_=u.tileID.overscaleFactor();return{u_matrix:y,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:p,u_extrude_scale:[i.pixelsToGLUnits[0]/(p*g),i.pixelsToGLUnits[1]/(p*g)],u_overscale_factor:_}},Ml=(y,i,u=1)=>({u_matrix:y,u_color:i,u_overlay:0,u_overlay_scale:u}),uf=y=>({u_matrix:y}),pv=(y,i,u,p)=>({u_matrix:y,u_extrude_scale:be(i,1,u),u_intensity:p});function wd(y,i){const u=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new l.U(0,p/u).toLngLat().lat,new l.U(0,(p+1)/u).toLngLat().lat]}const Sd=(y,i,u,p)=>{const g=y.transform;return{u_matrix:Tc(y,i,u,p),u_ratio:1/be(i,1,g.zoom),u_device_pixel_ratio:y.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},df=(y,i,u,p,g)=>l.e(Sd(y,i,u,g),{u_image:0,u_image_height:p}),fv=(y,i,u,p,g)=>{const _=y.transform,C=pf(i,_);return{u_matrix:Tc(y,i,u,g),u_texsize:i.imageAtlasTexture.size,u_ratio:1/be(i,1,_.zoom),u_device_pixel_ratio:y.pixelRatio,u_image:0,u_scale:[C,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},hf=(y,i,u,p,g,_)=>{const C=y.lineAtlas,k=pf(i,y.transform),P=u.layout.get("line-cap")==="round",D=C.getDash(p.from,P),B=C.getDash(p.to,P),F=D.width*g.fromScale,X=B.width*g.toScale;return l.e(Sd(y,i,u,_),{u_patternscale_a:[k/F,-D.height/2],u_patternscale_b:[k/X,-B.height/2],u_sdfgamma:C.width/(256*Math.min(F,X)*y.pixelRatio)/2,u_image:0,u_tex_y_a:D.y,u_tex_y_b:B.y,u_mix:g.t})};function pf(y,i){return 1/be(y,1,i.tileZoom)}function Tc(y,i,u,p){return y.translatePosMatrix(p?p.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const ff=(y,i,u,p,g)=>{return{u_matrix:y,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(C=g.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(_=g.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:mf(g.paint.get("raster-hue-rotate"))};var _,C};function mf(y){y*=Math.PI/180;const i=Math.sin(y),u=Math.cos(y);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const Cd=(y,i,u,p,g,_,C,k,P,D)=>{const B=g.transform;return{u_is_size_zoom_constant:+(y==="constant"||y==="source"),u_is_size_feature_constant:+(y==="constant"||y==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:B.cameraToCenterDistance,u_pitch:B.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:B.width/B.height,u_fade_change:g.options.fadeDuration?g.symbolFadeChange:1,u_matrix:_,u_label_plane_matrix:C,u_coord_matrix:k,u_is_text:+P,u_pitch_with_map:+p,u_texsize:D,u_texture:0}},kd=(y,i,u,p,g,_,C,k,P,D,B)=>{const F=g.transform;return l.e(Cd(y,i,u,p,g,_,C,k,P,D),{u_gamma_scale:p?Math.cos(F._pitch)*F.cameraToCenterDistance:1,u_device_pixel_ratio:g.pixelRatio,u_is_halo:+B})},is=(y,i,u,p,g,_,C,k,P,D)=>l.e(kd(y,i,u,p,g,_,C,k,!0,P,!0),{u_texsize_icon:D,u_texture_icon:1}),Pc=(y,i,u)=>({u_matrix:y,u_opacity:i,u_color:u}),ho=(y,i,u,p,g,_)=>l.e(function(C,k,P,D){const B=P.imageManager.getPattern(C.from.toString()),F=P.imageManager.getPattern(C.to.toString()),{width:X,height:ue}=P.imageManager.getPixelSize(),ce=Math.pow(2,D.tileID.overscaledZ),pe=D.tileSize*Math.pow(2,P.transform.tileZoom)/ce,ae=pe*(D.tileID.canonical.x+D.tileID.wrap*ce),Pe=pe*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:B.tl,u_pattern_br_a:B.br,u_pattern_tl_b:F.tl,u_pattern_br_b:F.br,u_texsize:[X,ue],u_mix:k.t,u_pattern_size_a:B.displaySize,u_pattern_size_b:F.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/be(D,1,P.transform.tileZoom),u_pixel_coord_upper:[ae>>16,Pe>>16],u_pixel_coord_lower:[65535&ae,65535&Pe]}}(p,_,u,g),{u_matrix:y,u_opacity:i}),Ec={fillExtrusion:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_lightpos:new l.aP(y,i.u_lightpos),u_lightintensity:new l.aM(y,i.u_lightintensity),u_lightcolor:new l.aP(y,i.u_lightcolor),u_vertical_gradient:new l.aM(y,i.u_vertical_gradient),u_opacity:new l.aM(y,i.u_opacity)}),fillExtrusionPattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_lightpos:new l.aP(y,i.u_lightpos),u_lightintensity:new l.aM(y,i.u_lightintensity),u_lightcolor:new l.aP(y,i.u_lightcolor),u_vertical_gradient:new l.aM(y,i.u_vertical_gradient),u_height_factor:new l.aM(y,i.u_height_factor),u_image:new l.aL(y,i.u_image),u_texsize:new l.aQ(y,i.u_texsize),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade),u_opacity:new l.aM(y,i.u_opacity)}),fill:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix)}),fillPattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_image:new l.aL(y,i.u_image),u_texsize:new l.aQ(y,i.u_texsize),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade)}),fillOutline:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_world:new l.aQ(y,i.u_world)}),fillOutlinePattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_world:new l.aQ(y,i.u_world),u_image:new l.aL(y,i.u_image),u_texsize:new l.aQ(y,i.u_texsize),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade)}),circle:(y,i)=>({u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_scale_with_map:new l.aL(y,i.u_scale_with_map),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_extrude_scale:new l.aQ(y,i.u_extrude_scale),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_matrix:new l.aN(y,i.u_matrix)}),collisionBox:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pixels_to_tile_units:new l.aM(y,i.u_pixels_to_tile_units),u_extrude_scale:new l.aQ(y,i.u_extrude_scale),u_overscale_factor:new l.aM(y,i.u_overscale_factor)}),collisionCircle:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_inv_matrix:new l.aN(y,i.u_inv_matrix),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_viewport_size:new l.aQ(y,i.u_viewport_size)}),debug:(y,i)=>({u_color:new l.aR(y,i.u_color),u_matrix:new l.aN(y,i.u_matrix),u_overlay:new l.aL(y,i.u_overlay),u_overlay_scale:new l.aM(y,i.u_overlay_scale)}),clippingMask:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix)}),heatmap:(y,i)=>({u_extrude_scale:new l.aM(y,i.u_extrude_scale),u_intensity:new l.aM(y,i.u_intensity),u_matrix:new l.aN(y,i.u_matrix)}),heatmapTexture:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_world:new l.aQ(y,i.u_world),u_image:new l.aL(y,i.u_image),u_color_ramp:new l.aL(y,i.u_color_ramp),u_opacity:new l.aM(y,i.u_opacity)}),hillshade:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_image:new l.aL(y,i.u_image),u_latrange:new l.aQ(y,i.u_latrange),u_light:new l.aQ(y,i.u_light),u_shadow:new l.aR(y,i.u_shadow),u_highlight:new l.aR(y,i.u_highlight),u_accent:new l.aR(y,i.u_accent)}),hillshadePrepare:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_image:new l.aL(y,i.u_image),u_dimension:new l.aQ(y,i.u_dimension),u_zoom:new l.aM(y,i.u_zoom),u_unpack:new l.aO(y,i.u_unpack)}),line:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels)}),lineGradient:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels),u_image:new l.aL(y,i.u_image),u_image_height:new l.aM(y,i.u_image_height)}),linePattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_texsize:new l.aQ(y,i.u_texsize),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_image:new l.aL(y,i.u_image),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels),u_scale:new l.aP(y,i.u_scale),u_fade:new l.aM(y,i.u_fade)}),lineSDF:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ratio:new l.aM(y,i.u_ratio),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_units_to_pixels:new l.aQ(y,i.u_units_to_pixels),u_patternscale_a:new l.aQ(y,i.u_patternscale_a),u_patternscale_b:new l.aQ(y,i.u_patternscale_b),u_sdfgamma:new l.aM(y,i.u_sdfgamma),u_image:new l.aL(y,i.u_image),u_tex_y_a:new l.aM(y,i.u_tex_y_a),u_tex_y_b:new l.aM(y,i.u_tex_y_b),u_mix:new l.aM(y,i.u_mix)}),raster:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_tl_parent:new l.aQ(y,i.u_tl_parent),u_scale_parent:new l.aM(y,i.u_scale_parent),u_buffer_scale:new l.aM(y,i.u_buffer_scale),u_fade_t:new l.aM(y,i.u_fade_t),u_opacity:new l.aM(y,i.u_opacity),u_image0:new l.aL(y,i.u_image0),u_image1:new l.aL(y,i.u_image1),u_brightness_low:new l.aM(y,i.u_brightness_low),u_brightness_high:new l.aM(y,i.u_brightness_high),u_saturation_factor:new l.aM(y,i.u_saturation_factor),u_contrast_factor:new l.aM(y,i.u_contrast_factor),u_spin_weights:new l.aP(y,i.u_spin_weights)}),symbolIcon:(y,i)=>({u_is_size_zoom_constant:new l.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,i.u_is_size_feature_constant),u_size_t:new l.aM(y,i.u_size_t),u_size:new l.aM(y,i.u_size),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pitch:new l.aM(y,i.u_pitch),u_rotate_symbol:new l.aL(y,i.u_rotate_symbol),u_aspect_ratio:new l.aM(y,i.u_aspect_ratio),u_fade_change:new l.aM(y,i.u_fade_change),u_matrix:new l.aN(y,i.u_matrix),u_label_plane_matrix:new l.aN(y,i.u_label_plane_matrix),u_coord_matrix:new l.aN(y,i.u_coord_matrix),u_is_text:new l.aL(y,i.u_is_text),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_texsize:new l.aQ(y,i.u_texsize),u_texture:new l.aL(y,i.u_texture)}),symbolSDF:(y,i)=>({u_is_size_zoom_constant:new l.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,i.u_is_size_feature_constant),u_size_t:new l.aM(y,i.u_size_t),u_size:new l.aM(y,i.u_size),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pitch:new l.aM(y,i.u_pitch),u_rotate_symbol:new l.aL(y,i.u_rotate_symbol),u_aspect_ratio:new l.aM(y,i.u_aspect_ratio),u_fade_change:new l.aM(y,i.u_fade_change),u_matrix:new l.aN(y,i.u_matrix),u_label_plane_matrix:new l.aN(y,i.u_label_plane_matrix),u_coord_matrix:new l.aN(y,i.u_coord_matrix),u_is_text:new l.aL(y,i.u_is_text),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_texsize:new l.aQ(y,i.u_texsize),u_texture:new l.aL(y,i.u_texture),u_gamma_scale:new l.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_is_halo:new l.aL(y,i.u_is_halo)}),symbolTextAndIcon:(y,i)=>({u_is_size_zoom_constant:new l.aL(y,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aL(y,i.u_is_size_feature_constant),u_size_t:new l.aM(y,i.u_size_t),u_size:new l.aM(y,i.u_size),u_camera_to_center_distance:new l.aM(y,i.u_camera_to_center_distance),u_pitch:new l.aM(y,i.u_pitch),u_rotate_symbol:new l.aL(y,i.u_rotate_symbol),u_aspect_ratio:new l.aM(y,i.u_aspect_ratio),u_fade_change:new l.aM(y,i.u_fade_change),u_matrix:new l.aN(y,i.u_matrix),u_label_plane_matrix:new l.aN(y,i.u_label_plane_matrix),u_coord_matrix:new l.aN(y,i.u_coord_matrix),u_is_text:new l.aL(y,i.u_is_text),u_pitch_with_map:new l.aL(y,i.u_pitch_with_map),u_texsize:new l.aQ(y,i.u_texsize),u_texsize_icon:new l.aQ(y,i.u_texsize_icon),u_texture:new l.aL(y,i.u_texture),u_texture_icon:new l.aL(y,i.u_texture_icon),u_gamma_scale:new l.aM(y,i.u_gamma_scale),u_device_pixel_ratio:new l.aM(y,i.u_device_pixel_ratio),u_is_halo:new l.aL(y,i.u_is_halo)}),background:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_opacity:new l.aM(y,i.u_opacity),u_color:new l.aR(y,i.u_color)}),backgroundPattern:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_opacity:new l.aM(y,i.u_opacity),u_image:new l.aL(y,i.u_image),u_pattern_tl_a:new l.aQ(y,i.u_pattern_tl_a),u_pattern_br_a:new l.aQ(y,i.u_pattern_br_a),u_pattern_tl_b:new l.aQ(y,i.u_pattern_tl_b),u_pattern_br_b:new l.aQ(y,i.u_pattern_br_b),u_texsize:new l.aQ(y,i.u_texsize),u_mix:new l.aM(y,i.u_mix),u_pattern_size_a:new l.aQ(y,i.u_pattern_size_a),u_pattern_size_b:new l.aQ(y,i.u_pattern_size_b),u_scale_a:new l.aM(y,i.u_scale_a),u_scale_b:new l.aM(y,i.u_scale_b),u_pixel_coord_upper:new l.aQ(y,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aQ(y,i.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aM(y,i.u_tile_units_to_pixels)}),terrain:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_texture:new l.aL(y,i.u_texture),u_ele_delta:new l.aM(y,i.u_ele_delta)}),terrainDepth:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_ele_delta:new l.aM(y,i.u_ele_delta)}),terrainCoords:(y,i)=>({u_matrix:new l.aN(y,i.u_matrix),u_texture:new l.aL(y,i.u_texture),u_terrain_coords_id:new l.aM(y,i.u_terrain_coords_id),u_ele_delta:new l.aM(y,i.u_ele_delta)})};class zc{constructor(i,u,p){this.context=i;const g=i.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Dl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Mc{constructor(i,u,p,g){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=g,this.context=i;const _=i.gl;this.buffer=_.createBuffer(),i.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let p=0;p<this.attributes.length;p++){const g=u.attributes[this.attributes[p].name];g!==void 0&&i.enableVertexAttribArray(g)}}setVertexAttribPointers(i,u,p){for(let g=0;g<this.attributes.length;g++){const _=this.attributes[g],C=u.attributes[_.name];C!==void 0&&i.vertexAttribPointer(C,_.components,i[Dl[_.type]],!1,this.itemSize,_.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Bs=new WeakMap;function Fa(y){var i;if(Bs.has(y))return Bs.get(y);{const u=(i=y.getParameter(y.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Bs.set(y,u),u}}class Cr{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Dc extends Cr{getDefault(){return l.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Xi extends Cr{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Ji extends Cr{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Id extends Cr{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ac extends Cr{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Rc extends Cr{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Td extends Cr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class Pd extends Cr{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Lc extends Cr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class Ed extends Cr{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class zd extends Cr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class $c extends Cr{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class gf extends Cr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class yf extends Cr{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Os extends Cr{getDefault(){return l.aT.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class mv extends Cr{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class gv extends Cr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class yv extends Cr{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class vv extends Cr{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class _v extends Cr{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class xv extends Cr{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class Md extends Cr{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Bc extends Cr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Dd extends Cr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Ad extends Cr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Fs extends Cr{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class vf extends Cr{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class _f extends Cr{getDefault(){return null}set(i){var u;if(i===this.current&&!this.dirty)return;const p=this.gl;Fa(p)?p.bindVertexArray(i):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Rd extends Cr{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class os extends Cr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class xf extends Cr{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Na extends Cr{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class Ns extends Na{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class bf extends Na{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Ld extends Na{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Nr{constructor(i,u,p,g,_){this.context=i,this.width=u,this.height=p;const C=i.gl,k=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new Ns(i,k),g)this.depthAttachment=_?new Ld(i,k):new bf(i,k);else if(_)throw new Error("Stencil cannot be setted without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class fn{constructor(i,u,p){this.blendFunction=i,this.blendColor=u,this.mask=p}}fn.Replace=[1,0],fn.disabled=new fn(fn.Replace,l.aT.transparent,[!1,!1,!1,!1]),fn.unblended=new fn(fn.Replace,l.aT.transparent,[!0,!0,!0,!0]),fn.alphaBlended=new fn([1,771],l.aT.transparent,[!0,!0,!0,!0]);class bv{constructor(i){var u,p;if(this.gl=i,this.clearColor=new Dc(this),this.clearDepth=new Xi(this),this.clearStencil=new Ji(this),this.colorMask=new Id(this),this.depthMask=new Ac(this),this.stencilMask=new Rc(this),this.stencilFunc=new Td(this),this.stencilOp=new Pd(this),this.stencilTest=new Lc(this),this.depthRange=new Ed(this),this.depthTest=new zd(this),this.depthFunc=new $c(this),this.blend=new gf(this),this.blendFunc=new yf(this),this.blendColor=new Os(this),this.blendEquation=new mv(this),this.cullFace=new gv(this),this.cullFaceSide=new yv(this),this.frontFace=new vv(this),this.program=new _v(this),this.activeTexture=new xv(this),this.viewport=new Md(this),this.bindFramebuffer=new Bc(this),this.bindRenderbuffer=new Dd(this),this.bindTexture=new Ad(this),this.bindVertexBuffer=new Fs(this),this.bindElementBuffer=new vf(this),this.bindVertexArray=new _f(this),this.pixelStoreUnpack=new Rd(this),this.pixelStoreUnpackPremultiplyAlpha=new os(this),this.pixelStoreUnpackFlipY=new xf(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),Fa(i)){this.HALF_FLOAT=i.HALF_FLOAT;const g=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=i.RGBA16F)!==null&&u!==void 0?u:g==null?void 0:g.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:g==null?void 0:g.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const g=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=g==null?void 0:g.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new zc(this,i,u)}createVertexBuffer(i,u,p){return new Mc(this,i,u,p)}createRenderbuffer(i,u,p){const g=this.gl,_=g.createRenderbuffer();return this.bindRenderbuffer.set(_),g.renderbufferStorage(g.RENDERBUFFER,i,u,p),this.bindRenderbuffer.set(null),_}createFramebuffer(i,u,p,g){return new Nr(this,i,u,p,g)}clear({color:i,depth:u,stencil:p}){const g=this.gl;let _=0;i&&(_|=g.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(_|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(_|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),g.clear(_)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){l.aG(i.blendFunction,fn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return Fa(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var u;return Fa(this.gl)?this.gl.deleteVertexArray(i):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class kr{constructor(i,u,p){this.func=i,this.mask=u,this.range=p}}kr.ReadOnly=!1,kr.ReadWrite=!0,kr.disabled=new kr(519,kr.ReadOnly,[0,1]);const as=7680;class mn{constructor(i,u,p,g,_,C){this.test=i,this.ref=u,this.mask=p,this.fail=g,this.depthFail=_,this.pass=C}}mn.disabled=new mn({func:519,mask:0},0,0,as,as,as);class dn{constructor(i,u,p){this.enable=i,this.mode=u,this.frontFace=p}}let Al;function wf(y,i,u,p,g,_,C){const k=y.context,P=k.gl,D=y.useProgram("collisionBox"),B=[];let F=0,X=0;for(let ge=0;ge<p.length;ge++){const De=p[ge],He=i.getTile(De),We=He.getBucket(u);if(!We)continue;let tt=De.posMatrix;g[0]===0&&g[1]===0||(tt=y.translatePosMatrix(De.posMatrix,He,g,_));const st=C?We.textCollisionBox:We.iconCollisionBox,it=We.collisionCircleArray;if(it.length>0){const dt=l.Z(),$t=tt;l.aU(dt,We.placementInvProjMatrix,y.transform.glCoordMatrix),l.aU(dt,dt,We.placementViewportMatrix),B.push({circleArray:it,circleOffset:X,transform:$t,invTransform:dt,coord:De}),F+=it.length/4,X=F}st&&D.draw(k,P.LINES,kr.disabled,mn.disabled,y.colorModeForRenderPass(),dn.disabled,bd(tt,y.transform,He),y.style.map.terrain&&y.style.map.terrain.getTerrainData(De),u.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,null,y.transform.zoom,null,null,st.collisionVertexBuffer)}if(!C||!B.length)return;const ue=y.useProgram("collisionCircle"),ce=new l.aV;ce.resize(4*F),ce._trim();let pe=0;for(const ge of B)for(let De=0;De<ge.circleArray.length/4;De++){const He=4*De,We=ge.circleArray[He+0],tt=ge.circleArray[He+1],st=ge.circleArray[He+2],it=ge.circleArray[He+3];ce.emplace(pe++,We,tt,st,it,0),ce.emplace(pe++,We,tt,st,it,1),ce.emplace(pe++,We,tt,st,it,2),ce.emplace(pe++,We,tt,st,it,3)}(!Al||Al.length<2*F)&&(Al=function(ge){const De=2*ge,He=new l.aX;He.resize(De),He._trim();for(let We=0;We<De;We++){const tt=6*We;He.uint16[tt+0]=4*We+0,He.uint16[tt+1]=4*We+1,He.uint16[tt+2]=4*We+2,He.uint16[tt+3]=4*We+2,He.uint16[tt+4]=4*We+3,He.uint16[tt+5]=4*We+0}return He}(F));const ae=k.createIndexBuffer(Al,!0),Pe=k.createVertexBuffer(ce,l.aW.members,!0);for(const ge of B){const De={u_matrix:ge.transform,u_inv_matrix:ge.invTransform,u_camera_to_center_distance:(Ne=y.transform).cameraToCenterDistance,u_viewport_size:[Ne.width,Ne.height]};ue.draw(k,P.TRIANGLES,kr.disabled,mn.disabled,y.colorModeForRenderPass(),dn.disabled,De,y.style.map.terrain&&y.style.map.terrain.getTerrainData(ge.coord),u.id,Pe,ae,l.S.simpleSegment(0,2*ge.circleOffset,ge.circleArray.length,ge.circleArray.length/2),null,y.transform.zoom,null,null,null)}var Ne;Pe.destroy(),ae.destroy()}dn.disabled=new dn(!1,1029,2305),dn.backCCW=new dn(!0,1029,2305);const $d=l.ao(new Float32Array(16));function Oc(y,i,u,p,g,_){const{horizontalAlign:C,verticalAlign:k}=l.au(y);return new l.P((-(C-.5)*i/g+p[0])*_,(-(k-.5)*u/g+p[1])*_)}function Fc(y,i,u,p,g,_,C,k,P,D,B){const F=y.text.placedSymbolArray,X=y.text.dynamicLayoutVertexArray,ue=y.icon.dynamicLayoutVertexArray,ce={};X.clear();for(let pe=0;pe<F.length;pe++){const ae=F.get(pe),Pe=ae.hidden||!ae.crossTileID||y.allowVerticalPlacement&&!ae.placedOrientation?null:p[ae.crossTileID];if(Pe){const Ne=new l.P(ae.anchorX,ae.anchorY),ge=St(Ne,u?C:_,B),De=tr(g.cameraToCenterDistance,ge.signedDistanceFromCamera);let He=l.aj(y.textSizeData,P,ae)*De/l.ap;u&&(He*=y.tilePixelRatio/k);const{width:We,height:tt,anchor:st,textOffset:it,textBoxScale:dt}=Pe,$t=Oc(st,We,tt,it,dt,He),xr=u?St(Ne.add($t),_,B).point:ge.point.add(i?$t.rotate(-g.angle):$t),vt=y.allowVerticalPlacement&&ae.placedOrientation===l.ai.vertical?Math.PI/2:0;for(let ir=0;ir<ae.numGlyphs;ir++)l.ak(X,xr,vt);D&&ae.associatedIconIndex>=0&&(ce[ae.associatedIconIndex]={shiftedAnchor:xr,angle:vt})}else te(ae.numGlyphs,X)}if(D){ue.clear();const pe=y.icon.placedSymbolArray;for(let ae=0;ae<pe.length;ae++){const Pe=pe.get(ae);if(Pe.hidden)te(Pe.numGlyphs,ue);else{const Ne=ce[ae];if(Ne)for(let ge=0;ge<Pe.numGlyphs;ge++)l.ak(ue,Ne.shiftedAnchor,Ne.angle);else te(Pe.numGlyphs,ue)}}y.icon.dynamicLayoutVertexBuffer.updateData(ue)}y.text.dynamicLayoutVertexBuffer.updateData(X)}function Bd(y,i,u){return u.iconsInText&&i?"symbolTextAndIcon":y?"symbolSDF":"symbolIcon"}function Nc(y,i,u,p,g,_,C,k,P,D,B,F){const X=y.context,ue=X.gl,ce=y.transform,pe=k==="map",ae=P==="map",Pe=k!=="viewport"&&u.layout.get("symbol-placement")!=="point",Ne=pe&&!ae&&!Pe,ge=!u.layout.get("symbol-sort-key").isConstant();let De=!1;const He=y.depthModeForSublayer(0,kr.ReadOnly),We=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),tt=[];for(const st of p){const it=i.getTile(st),dt=it.getBucket(u);if(!dt)continue;const $t=g?dt.text:dt.icon;if(!$t||!$t.segments.get().length||!$t.hasVisibleVertices)continue;const xr=$t.programConfigurations.get(u.id),vt=g||dt.sdfIcons,ir=g?dt.textSizeData:dt.iconSizeData,Nt=ae||ce.pitch!==0,qr=y.useProgram(Bd(vt,g,dt),xr),gr=l.ah(ir,ce.zoom),pr=y.style.map.terrain&&y.style.map.terrain.getTerrainData(st);let br,kn,en,ai,Vn=[0,0],Mn=null;if(g)kn=it.glyphAtlasTexture,en=ue.LINEAR,br=it.glyphAtlasTexture.size,dt.iconsInText&&(Vn=it.imageAtlasTexture.size,Mn=it.imageAtlasTexture,ai=Nt||y.options.rotating||y.options.zooming||ir.kind==="composite"||ir.kind==="camera"?ue.LINEAR:ue.NEAREST);else{const In=u.layout.get("icon-size").constantOr(0)!==1||dt.iconsNeedLinear;kn=it.imageAtlasTexture,en=vt||y.options.rotating||y.options.zooming||In||Nt?ue.LINEAR:ue.NEAREST,br=it.imageAtlasTexture.size}const eo=be(it,1,y.transform.zoom),sn=Be(st.posMatrix,ae,pe,y.transform,eo),Go=xt(st.posMatrix,ae,pe,y.transform,eo),qo=We&&dt.hasTextData(),Ua=u.layout.get("icon-text-fit")!=="none"&&qo&&dt.hasIconData();if(Pe){const In=y.style.map.terrain?(Li,Tn)=>y.style.map.terrain.getElevation(st,Li,Tn):null,Un=u.layout.get("text-rotation-alignment")==="map";nt(dt,st.posMatrix,y,g,sn,Go,ae,D,Un,In)}const ds=y.translatePosMatrix(st.posMatrix,it,_,C),qs=Pe||g&&We||Ua?$d:sn,hi=y.translatePosMatrix(Go,it,_,C,!0),si=vt&&u.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let bi;bi=vt?dt.iconsInText?is(ir.kind,gr,Ne,ae,y,ds,qs,hi,br,Vn):kd(ir.kind,gr,Ne,ae,y,ds,qs,hi,g,br,!0):Cd(ir.kind,gr,Ne,ae,y,ds,qs,hi,g,br);const hs={program:qr,buffers:$t,uniformValues:bi,atlasTexture:kn,atlasTextureIcon:Mn,atlasInterpolation:en,atlasInterpolationIcon:ai,isSDF:vt,hasHalo:si};if(ge&&dt.canOverlap){De=!0;const In=$t.segments.get();for(const Un of In)tt.push({segments:new l.S([Un]),sortKey:Un.sortKey,state:hs,terrainData:pr})}else tt.push({segments:$t.segments,sortKey:0,state:hs,terrainData:pr})}De&&tt.sort((st,it)=>st.sortKey-it.sortKey);for(const st of tt){const it=st.state;if(X.activeTexture.set(ue.TEXTURE0),it.atlasTexture.bind(it.atlasInterpolation,ue.CLAMP_TO_EDGE),it.atlasTextureIcon&&(X.activeTexture.set(ue.TEXTURE1),it.atlasTextureIcon&&it.atlasTextureIcon.bind(it.atlasInterpolationIcon,ue.CLAMP_TO_EDGE)),it.isSDF){const dt=it.uniformValues;it.hasHalo&&(dt.u_is_halo=1,Od(it.buffers,st.segments,u,y,it.program,He,B,F,dt,st.terrainData)),dt.u_is_halo=0}Od(it.buffers,st.segments,u,y,it.program,He,B,F,it.uniformValues,st.terrainData)}}function Od(y,i,u,p,g,_,C,k,P,D){const B=p.context;g.draw(B,B.gl.TRIANGLES,_,C,k,dn.disabled,P,D,u.id,y.layoutVertexBuffer,y.indexBuffer,i,u.paint,p.transform.zoom,y.programConfigurations.get(u.id),y.dynamicLayoutVertexBuffer,y.opacityVertexBuffer)}function Rl(y,i,u,p,g){if(!u||!p||!p.imageAtlas)return;const _=p.imageAtlas.patternPositions;let C=_[u.to.toString()],k=_[u.from.toString()];if(!C&&k&&(C=k),!k&&C&&(k=C),!C||!k){const P=g.getPaintProperty(i);C=_[P],k=_[P]}C&&k&&y.setConstantPatternPositions(C,k)}function Ll(y,i,u,p,g,_,C){const k=y.context.gl,P="fill-pattern",D=u.paint.get(P),B=D&&D.constantOr(1),F=u.getCrossfadeParameters();let X,ue,ce,pe,ae;C?(ue=B&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=k.LINES):(ue=B?"fillPattern":"fill",X=k.TRIANGLES);const Pe=D.constantOr(null);for(const Ne of p){const ge=i.getTile(Ne);if(B&&!ge.patternsLoaded())continue;const De=ge.getBucket(u);if(!De)continue;const He=De.programConfigurations.get(u.id),We=y.useProgram(ue,He),tt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ne);B&&(y.context.activeTexture.set(k.TEXTURE0),ge.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),He.updatePaintBuffers(F)),Rl(He,P,Pe,ge,u);const st=tt?Ne:null,it=y.translatePosMatrix(st?st.posMatrix:Ne.posMatrix,ge,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(C){pe=De.indexBuffer2,ae=De.segments2;const dt=[k.drawingBufferWidth,k.drawingBufferHeight];ce=ue==="fillOutlinePattern"&&B?Ic(it,y,F,ge,dt):kc(it,dt)}else pe=De.indexBuffer,ae=De.segments,ce=B?xd(it,y,F,ge):cf(it);We.draw(y.context,X,g,y.stencilModeForClipping(Ne),_,dn.disabled,ce,tt,u.id,De.layoutVertexBuffer,pe,ae,u.paint,y.transform.zoom,He)}}function $l(y,i,u,p,g,_,C){const k=y.context,P=k.gl,D="fill-extrusion-pattern",B=u.paint.get(D),F=B.constantOr(1),X=u.getCrossfadeParameters(),ue=u.paint.get("fill-extrusion-opacity"),ce=B.constantOr(null);for(const pe of p){const ae=i.getTile(pe),Pe=ae.getBucket(u);if(!Pe)continue;const Ne=y.style.map.terrain&&y.style.map.terrain.getTerrainData(pe),ge=Pe.programConfigurations.get(u.id),De=y.useProgram(F?"fillExtrusionPattern":"fillExtrusion",ge);F&&(y.context.activeTexture.set(P.TEXTURE0),ae.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),ge.updatePaintBuffers(X)),Rl(ge,D,ce,ae,u);const He=y.translatePosMatrix(pe.posMatrix,ae,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),We=u.paint.get("fill-extrusion-vertical-gradient"),tt=F?Ba(He,y,We,ue,pe,X,ae):_d(He,y,We,ue);De.draw(k,k.gl.TRIANGLES,g,_,C,dn.backCCW,tt,Ne,u.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,u.paint,y.transform.zoom,ge,y.style.map.terrain&&Pe.centroidVertexBuffer)}}function wv(y,i,u,p,g,_,C){const k=y.context,P=k.gl,D=u.fbo;if(!D)return;const B=y.useProgram("hillshade"),F=y.style.map.terrain&&y.style.map.terrain.getTerrainData(i);k.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,D.colorAttachment.get()),B.draw(k,P.TRIANGLES,g,_,C,dn.disabled,((X,ue,ce,pe)=>{const ae=ce.paint.get("hillshade-shadow-color"),Pe=ce.paint.get("hillshade-highlight-color"),Ne=ce.paint.get("hillshade-accent-color");let ge=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(ge-=X.transform.angle);const De=!X.options.moving;return{u_matrix:pe?pe.posMatrix:X.transform.calculatePosMatrix(ue.tileID.toUnwrapped(),De),u_image:0,u_latrange:wd(0,ue.tileID),u_light:[ce.paint.get("hillshade-exaggeration"),ge],u_shadow:ae,u_highlight:Pe,u_accent:Ne}})(y,u,p,F?i:null),F,p.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}function Fd(y,i,u,p,g,_){const C=y.context,k=C.gl,P=i.dem;if(P&&P.data){const D=P.dim,B=P.stride,F=P.getPixels();if(C.activeTexture.set(k.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||y.getTileTexture(B),i.demTexture){const ue=i.demTexture;ue.update(F,{premultiply:!1}),ue.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else i.demTexture=new xe(C,F,k.RGBA,{premultiply:!1}),i.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);C.activeTexture.set(k.TEXTURE0);let X=i.fbo;if(!X){const ue=new xe(C,{width:D,height:D,data:null},k.RGBA);ue.bind(k.LINEAR,k.CLAMP_TO_EDGE),X=i.fbo=C.createFramebuffer(D,D,!0,!1),X.colorAttachment.set(ue.texture)}C.bindFramebuffer.set(X.framebuffer),C.viewport.set([0,0,D,D]),y.useProgram("hillshadePrepare").draw(C,k.TRIANGLES,p,g,_,dn.disabled,((ue,ce)=>{const pe=ce.stride,ae=l.Z();return l.aS(ae,0,l.N,-l.N,0,0,1),l.$(ae,ae,[0,-l.N,0]),{u_matrix:ae,u_image:1,u_dimension:[pe,pe],u_zoom:ue.overscaledZ,u_unpack:ce.getUnpackVector()}})(i.tileID,P),null,u.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Sv(y,i,u,p,g,_){const C=p.paint.get("raster-fade-duration");if(!_&&C>0){const k=l.h.now(),P=(k-y.timeAdded)/C,D=i?(k-i.timeAdded)/C:-1,B=u.getSource(),F=g.coveringZoomLevel({tileSize:B.tileSize,roundZoom:B.roundZoom}),X=!i||Math.abs(i.tileID.overscaledZ-F)>Math.abs(y.tileID.overscaledZ-F),ue=X&&y.refreshedUponExpiration?1:l.ad(X?P:1-D,0,1);return y.refreshedUponExpiration&&P>=1&&(y.refreshedUponExpiration=!1),i?{opacity:1,mix:1-ue}:{opacity:ue,mix:0}}return{opacity:1,mix:0}}const Sf=new l.aT(1,0,0,1),jc=new l.aT(0,1,0,1),Nd=new l.aT(0,0,1,1),Cf=new l.aT(1,0,1,1),kf=new l.aT(0,1,1,1);function Bl(y,i,u,p){Uc(y,0,i+u/2,y.transform.width,u,p)}function Vc(y,i,u,p){Uc(y,i-u/2,0,u,y.transform.height,p)}function Uc(y,i,u,p,g,_){const C=y.context,k=C.gl;k.enable(k.SCISSOR_TEST),k.scissor(i*y.pixelRatio,u*y.pixelRatio,p*y.pixelRatio,g*y.pixelRatio),C.clear({color:_}),k.disable(k.SCISSOR_TEST)}function If(y,i,u){const p=y.context,g=p.gl,_=u.posMatrix,C=y.useProgram("debug"),k=kr.disabled,P=mn.disabled,D=y.colorModeForRenderPass(),B="$debug",F=y.style.map.terrain&&y.style.map.terrain.getTerrainData(u);p.activeTexture.set(g.TEXTURE0);const X=i.getTileByID(u.key).latestRawTileData,ue=Math.floor((X&&X.byteLength||0)/1024),ce=i.getTile(u).tileSize,pe=512/Math.min(ce,512)*(u.overscaledZ/y.transform.zoom)*.5;let ae=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ae+=` => ${u.overscaledZ}`),function(Pe,Ne){Pe.initDebugOverlayCanvas();const ge=Pe.debugOverlayCanvas,De=Pe.context.gl,He=Pe.debugOverlayCanvas.getContext("2d");He.clearRect(0,0,ge.width,ge.height),He.shadowColor="white",He.shadowBlur=2,He.lineWidth=1.5,He.strokeStyle="white",He.textBaseline="top",He.font="bold 36px Open Sans, sans-serif",He.fillText(Ne,5,5),He.strokeText(Ne,5,5),Pe.debugOverlayTexture.update(ge),Pe.debugOverlayTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE)}(y,`${ae} ${ue}kB`),C.draw(p,g.TRIANGLES,k,P,fn.alphaBlended,dn.disabled,Ml(_,l.aT.transparent,pe),null,B,y.debugBuffer,y.quadTriangleIndexBuffer,y.debugSegments),C.draw(p,g.LINE_STRIP,k,P,D,dn.disabled,Ml(_,l.aT.red),F,B,y.debugBuffer,y.tileBorderIndexBuffer,y.debugSegments)}function xn(y,i,u){const p=y.context,g=p.gl,_=y.colorModeForRenderPass(),C=new kr(g.LEQUAL,kr.ReadWrite,y.depthRangeFor3D),k=y.useProgram("terrain"),P=i.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,y.width,y.height]);for(const D of u){const B=y.renderToTexture.getTexture(D),F=i.getTerrainData(D.tileID);p.activeTexture.set(g.TEXTURE0),g.bindTexture(g.TEXTURE_2D,B.texture);const X={u_matrix:y.transform.calculatePosMatrix(D.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(y.transform.zoom)};k.draw(p,g.TRIANGLES,C,mn.disabled,_,dn.backCCW,X,F,"terrain",P.vertexBuffer,P.indexBuffer,P.segments)}}class ss{constructor(i,u){this.context=new bv(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.Z(),renderTime:0},this.setup(),this.numSublayers=Sr.maxUnderzooming+Sr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qt}resize(i,u,p){if(this.width=Math.floor(i*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const i=this.context,u=new l.a_;u.emplaceBack(0,0),u.emplaceBack(l.N,0),u.emplaceBack(0,l.N),u.emplaceBack(l.N,l.N),this.tileExtentBuffer=i.createVertexBuffer(u,Qr.members),this.tileExtentSegments=l.S.simpleSegment(0,0,4,2);const p=new l.a_;p.emplaceBack(0,0),p.emplaceBack(l.N,0),p.emplaceBack(0,l.N),p.emplaceBack(l.N,l.N),this.debugBuffer=i.createVertexBuffer(p,Qr.members),this.debugSegments=l.S.simpleSegment(0,0,4,5);const g=new l.V;g.emplaceBack(0,0,0,0),g.emplaceBack(l.N,0,l.N,0),g.emplaceBack(0,l.N,0,l.N),g.emplaceBack(l.N,l.N,l.N,l.N),this.rasterBoundsBuffer=i.createVertexBuffer(g,pt.members),this.rasterBoundsSegments=l.S.simpleSegment(0,0,4,2);const _=new l.a_;_.emplaceBack(0,0),_.emplaceBack(1,0),_.emplaceBack(0,1),_.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(_,Qr.members),this.viewportSegments=l.S.simpleSegment(0,0,4,2);const C=new l.a$;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(C);const k=new l.b0;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(k);const P=this.context.gl;this.stencilClearMode=new mn({func:P.ALWAYS,mask:0},0,255,P.ZERO,P.ZERO,P.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=l.Z();l.aS(p,0,this.width,this.height,0,0,1),l.a0(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,kr.disabled,this.stencilClearMode,fn.disabled,dn.disabled,uf(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const p=this.context,g=p.gl;this.nextStencilID+u.length>256&&this.clearStencil(),p.setColorMode(fn.disabled),p.setDepthMode(kr.disabled);const _=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of u){const k=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,P=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);_.draw(p,g.TRIANGLES,kr.disabled,new mn({func:g.ALWAYS,mask:0},k,255,g.KEEP,g.KEEP,g.REPLACE),fn.disabled,dn.disabled,uf(C.posMatrix),P,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new mn({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new mn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,p=i.sort((C,k)=>k.overscaledZ-C.overscaledZ),g=p[p.length-1].overscaledZ,_=p[0].overscaledZ-g+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const C={};for(let k=0;k<_;k++)C[k+g]=new mn({func:u.GEQUAL,mask:255},k+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=_,[C,p]}return[{[g]:mn.disabled},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new fn([i.CONSTANT_COLOR,i.ONE],new l.aT(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?fn.unblended:fn.alphaBlended}depthModeForSublayer(i,u,p){if(!this.opaquePassEnabledForLayer())return kr.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new kr(p||this.context.gl.LEQUAL,u,[g,g])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(l.h.now()),this.imageManager.beginFrame();const p=this.style._order,g=this.style.sourceCaches,_={},C={},k={};for(const P in g){const D=g[P];D.used&&D.prepare(this.context),_[P]=D.getVisibleCoordinates(),C[P]=_[P].slice().reverse(),k[P]=D.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let P=0;P<p.length;P++)if(this.style._layers[p[P]].is3D()){this.opaquePassCutoff=P;break}if(this.renderToTexture){this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0;const P=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.b1(this.terrainFacilitator.matrix,this.transform.projMatrix)||P.length)&&(l.b2(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(D,B){const F=D.context,X=F.gl,ue=fn.unblended,ce=new kr(X.LEQUAL,kr.ReadWrite,[0,1]),pe=B.getTerrainMesh(),ae=B.sourceCache.getRenderableTiles(),Pe=D.useProgram("terrainDepth");F.bindFramebuffer.set(B.getFramebuffer("depth").framebuffer),F.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),F.clear({color:l.aT.transparent,depth:1});for(const Ne of ae){const ge=B.getTerrainData(Ne.tileID),De={u_matrix:D.transform.calculatePosMatrix(Ne.tileID.toUnwrapped()),u_ele_delta:B.getMeshFrameDelta(D.transform.zoom)};Pe.draw(F,X.TRIANGLES,ce,mn.disabled,ue,dn.backCCW,De,ge,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}F.bindFramebuffer.set(null),F.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain),function(D,B){const F=D.context,X=F.gl,ue=fn.unblended,ce=new kr(X.LEQUAL,kr.ReadWrite,[0,1]),pe=B.getTerrainMesh(),ae=B.getCoordsTexture(),Pe=B.sourceCache.getRenderableTiles(),Ne=D.useProgram("terrainCoords");F.bindFramebuffer.set(B.getFramebuffer("coords").framebuffer),F.viewport.set([0,0,D.width/devicePixelRatio,D.height/devicePixelRatio]),F.clear({color:l.aT.transparent,depth:1}),B.coordsIndex=[];for(const ge of Pe){const De=B.getTerrainData(ge.tileID);F.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,ae.texture);const He={u_matrix:D.transform.calculatePosMatrix(ge.tileID.toUnwrapped()),u_terrain_coords_id:(255-B.coordsIndex.length)/255,u_texture:0,u_ele_delta:B.getMeshFrameDelta(D.transform.zoom)};Ne.draw(F,X.TRIANGLES,ce,mn.disabled,ue,dn.backCCW,He,De,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),B.coordsIndex.push(ge.tileID.key)}F.bindFramebuffer.set(null),F.viewport.set([0,0,D.width,D.height])}(this,this.style.map.terrain))}this.renderPass="offscreen";for(const P of p){const D=this.style._layers[P];if(!D.hasOffscreenPass()||D.isHidden(this.transform.zoom))continue;const B=C[D.source];(D.type==="custom"||B.length)&&this.renderLayer(this,g[D.source],D,B)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.aT.black:l.aT.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const P=this.style._layers[p[this.currentLayer]],D=g[P.source],B=_[P.source];this._renderTileClippingMasks(P,B),this.renderLayer(this,D,P,B)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const P=this.style._layers[p[this.currentLayer]],D=g[P.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(P))continue;const B=(P.type==="symbol"?k:C)[P.source];this._renderTileClippingMasks(P,_[P.source]),this.renderLayer(this,D,P,B)}if(this.options.showTileBoundaries){const P=function(D,B){let F=null;const X=Object.values(D._layers).flatMap(ae=>ae.source&&!ae.isHidden(B)?[D.sourceCaches[ae.source]]:[]),ue=X.filter(ae=>ae.getSource().type==="vector"),ce=X.filter(ae=>ae.getSource().type!=="vector"),pe=ae=>{(!F||F.getSource().maxzoom<ae.getSource().maxzoom)&&(F=ae)};return ue.forEach(ae=>pe(ae)),F||ce.forEach(ae=>pe(ae)),F}(this.style,this.transform.zoom);P&&function(D,B,F){for(let X=0;X<F.length;X++)If(D,B,F[X])}(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(P){const D=P.transform.padding;Bl(P,P.transform.height-(D.top||0),3,Sf),Bl(P,D.bottom||0,3,jc),Vc(P,D.left||0,3,Nd),Vc(P,P.transform.width-(D.right||0),3,Cf);const B=P.transform.centerPoint;(function(F,X,ue,ce){Uc(F,X-1,ue-10,2,20,ce),Uc(F,X-10,ue-1,20,2,ce)})(P,B.x,P.transform.height-B.y,kf)}(this),this.context.setDefault()}renderLayer(i,u,p,g){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(g||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(_,C,k,P,D){if(_.renderPass!=="translucent")return;const B=mn.disabled,F=_.colorModeForRenderPass();(k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(X,ue,ce,pe,ae,Pe,Ne){const ge=ue.transform,De=ae==="map",He=Pe==="map";for(const We of X){const tt=pe.getTile(We),st=tt.getBucket(ce);if(!st||!st.text||!st.text.segments.get().length)continue;const it=l.ah(st.textSizeData,ge.zoom),dt=be(tt,1,ue.transform.zoom),$t=Be(We.posMatrix,He,De,ue.transform,dt),xr=ce.layout.get("icon-text-fit")!=="none"&&st.hasIconData();if(it){const vt=Math.pow(2,ge.zoom-tt.tileID.overscaledZ);Fc(st,De,He,Ne,ge,$t,We.posMatrix,vt,it,xr,ue.style.map.terrain?(ir,Nt)=>ue.style.map.terrain.getElevation(We,ir,Nt):null)}}}(P,_,k,C,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),D),k.paint.get("icon-opacity").constantOr(1)!==0&&Nc(_,C,k,P,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),B,F),k.paint.get("text-opacity").constantOr(1)!==0&&Nc(_,C,k,P,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),B,F),C.map.showCollisionBoxes&&(wf(_,C,k,P,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),!0),wf(_,C,k,P,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),!1))})(i,u,p,g,this.style.placement.variableOffsets);break;case"circle":(function(_,C,k,P){if(_.renderPass!=="translucent")return;const D=k.paint.get("circle-opacity"),B=k.paint.get("circle-stroke-width"),F=k.paint.get("circle-stroke-opacity"),X=!k.layout.get("circle-sort-key").isConstant();if(D.constantOr(1)===0&&(B.constantOr(1)===0||F.constantOr(1)===0))return;const ue=_.context,ce=ue.gl,pe=_.depthModeForSublayer(0,kr.ReadOnly),ae=mn.disabled,Pe=_.colorModeForRenderPass(),Ne=[];for(let ge=0;ge<P.length;ge++){const De=P[ge],He=C.getTile(De),We=He.getBucket(k);if(!We)continue;const tt=We.programConfigurations.get(k.id),st=_.useProgram("circle",tt),it=We.layoutVertexBuffer,dt=We.indexBuffer,$t=_.style.map.terrain&&_.style.map.terrain.getTerrainData(De),xr={programConfiguration:tt,program:st,layoutVertexBuffer:it,indexBuffer:dt,uniformValues:Oa(_,De,He,k),terrainData:$t};if(X){const vt=We.segments.get();for(const ir of vt)Ne.push({segments:new l.S([ir]),sortKey:ir.sortKey,state:xr})}else Ne.push({segments:We.segments,sortKey:0,state:xr})}X&&Ne.sort((ge,De)=>ge.sortKey-De.sortKey);for(const ge of Ne){const{programConfiguration:De,program:He,layoutVertexBuffer:We,indexBuffer:tt,uniformValues:st,terrainData:it}=ge.state;He.draw(ue,ce.TRIANGLES,pe,ae,Pe,dn.disabled,st,it,k.id,We,tt,ge.segments,k.paint,_.transform.zoom,De)}})(i,u,p,g);break;case"heatmap":(function(_,C,k,P){if(k.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){const D=_.context,B=D.gl,F=mn.disabled,X=new fn([B.ONE,B.ONE],l.aT.transparent,[!0,!0,!0,!0]);(function(ue,ce,pe){const ae=ue.gl;ue.activeTexture.set(ae.TEXTURE1),ue.viewport.set([0,0,ce.width/4,ce.height/4]);let Pe=pe.heatmapFbo;if(Pe)ae.bindTexture(ae.TEXTURE_2D,Pe.colorAttachment.get()),ue.bindFramebuffer.set(Pe.framebuffer);else{const Ne=ae.createTexture();ae.bindTexture(ae.TEXTURE_2D,Ne),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.LINEAR),Pe=pe.heatmapFbo=ue.createFramebuffer(ce.width/4,ce.height/4,!1,!1),function(ge,De,He,We){var tt,st;const it=ge.gl,dt=(tt=ge.HALF_FLOAT)!==null&&tt!==void 0?tt:it.UNSIGNED_BYTE,$t=(st=ge.RGBA16F)!==null&&st!==void 0?st:it.RGBA;it.texImage2D(it.TEXTURE_2D,0,$t,De.width/4,De.height/4,0,it.RGBA,dt,null),We.colorAttachment.set(He)}(ue,ce,Ne,Pe)}})(D,_,k),D.clear({color:l.aT.transparent});for(let ue=0;ue<P.length;ue++){const ce=P[ue];if(C.hasRenderableParent(ce))continue;const pe=C.getTile(ce),ae=pe.getBucket(k);if(!ae)continue;const Pe=ae.programConfigurations.get(k.id),Ne=_.useProgram("heatmap",Pe),{zoom:ge}=_.transform;Ne.draw(D,B.TRIANGLES,kr.disabled,F,X,dn.disabled,pv(ce.posMatrix,pe,ge,k.paint.get("heatmap-intensity")),null,k.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,k.paint,_.transform.zoom,Pe)}D.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(D,B){const F=D.context,X=F.gl,ue=B.heatmapFbo;if(!ue)return;F.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,ue.colorAttachment.get()),F.activeTexture.set(X.TEXTURE1);let ce=B.colorRampTexture;ce||(ce=B.colorRampTexture=new xe(F,B.colorRamp,X.RGBA)),ce.bind(X.LINEAR,X.CLAMP_TO_EDGE),D.useProgram("heatmapTexture").draw(F,X.TRIANGLES,kr.disabled,mn.disabled,D.colorModeForRenderPass(),dn.disabled,((pe,ae,Pe,Ne)=>{const ge=l.Z();l.aS(ge,0,pe.width,pe.height,0,0,1);const De=pe.context.gl;return{u_matrix:ge,u_world:[De.drawingBufferWidth,De.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:ae.paint.get("heatmap-opacity")}})(D,B),null,B.id,D.viewportBuffer,D.quadTriangleIndexBuffer,D.viewportSegments,B.paint,D.transform.zoom)}(_,k))})(i,u,p,g);break;case"line":(function(_,C,k,P){if(_.renderPass!=="translucent")return;const D=k.paint.get("line-opacity"),B=k.paint.get("line-width");if(D.constantOr(1)===0||B.constantOr(1)===0)return;const F=_.depthModeForSublayer(0,kr.ReadOnly),X=_.colorModeForRenderPass(),ue=k.paint.get("line-dasharray"),ce=k.paint.get("line-pattern"),pe=ce.constantOr(1),ae=k.paint.get("line-gradient"),Pe=k.getCrossfadeParameters(),Ne=pe?"linePattern":ue?"lineSDF":ae?"lineGradient":"line",ge=_.context,De=ge.gl;let He=!0;for(const We of P){const tt=C.getTile(We);if(pe&&!tt.patternsLoaded())continue;const st=tt.getBucket(k);if(!st)continue;const it=st.programConfigurations.get(k.id),dt=_.context.program.get(),$t=_.useProgram(Ne,it),xr=He||$t.program!==dt,vt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(We),ir=ce.constantOr(null);if(ir&&tt.imageAtlas){const gr=tt.imageAtlas,pr=gr.patternPositions[ir.to.toString()],br=gr.patternPositions[ir.from.toString()];pr&&br&&it.setConstantPatternPositions(pr,br)}const Nt=vt?We:null,qr=pe?fv(_,tt,k,Pe,Nt):ue?hf(_,tt,k,ue,Pe,Nt):ae?df(_,tt,k,st.lineClipsArray.length,Nt):Sd(_,tt,k,Nt);if(pe)ge.activeTexture.set(De.TEXTURE0),tt.imageAtlasTexture.bind(De.LINEAR,De.CLAMP_TO_EDGE),it.updatePaintBuffers(Pe);else if(ue&&(xr||_.lineAtlas.dirty))ge.activeTexture.set(De.TEXTURE0),_.lineAtlas.bind(ge);else if(ae){const gr=st.gradients[k.id];let pr=gr.texture;if(k.gradientVersion!==gr.version){let br=256;if(k.stepInterpolant){const kn=C.getSource().maxzoom,en=We.canonical.z===kn?Math.ceil(1<<_.transform.maxZoom-We.canonical.z):1;br=l.ad(l.aY(st.maxLineLength/l.N*1024*en),256,ge.maxTextureSize)}gr.gradient=l.aZ({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:br,image:gr.gradient||void 0,clips:st.lineClipsArray}),gr.texture?gr.texture.update(gr.gradient):gr.texture=new xe(ge,gr.gradient,De.RGBA),gr.version=k.gradientVersion,pr=gr.texture}ge.activeTexture.set(De.TEXTURE0),pr.bind(k.stepInterpolant?De.NEAREST:De.LINEAR,De.CLAMP_TO_EDGE)}$t.draw(ge,De.TRIANGLES,F,_.stencilModeForClipping(We),X,dn.disabled,qr,vt,k.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,k.paint,_.transform.zoom,it,st.layoutVertexBuffer2),He=!1}})(i,u,p,g);break;case"fill":(function(_,C,k,P){const D=k.paint.get("fill-color"),B=k.paint.get("fill-opacity");if(B.constantOr(1)===0)return;const F=_.colorModeForRenderPass(),X=k.paint.get("fill-pattern"),ue=_.opaquePassEnabledForLayer()&&!X.constantOr(1)&&D.constantOr(l.aT.transparent).a===1&&B.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===ue){const ce=_.depthModeForSublayer(1,_.renderPass==="opaque"?kr.ReadWrite:kr.ReadOnly);Ll(_,C,k,P,ce,F,!1)}if(_.renderPass==="translucent"&&k.paint.get("fill-antialias")){const ce=_.depthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,kr.ReadOnly);Ll(_,C,k,P,ce,F,!0)}})(i,u,p,g);break;case"fill-extrusion":(function(_,C,k,P){const D=k.paint.get("fill-extrusion-opacity");if(D!==0&&_.renderPass==="translucent"){const B=new kr(_.context.gl.LEQUAL,kr.ReadWrite,_.depthRangeFor3D);if(D!==1||k.paint.get("fill-extrusion-pattern").constantOr(1))$l(_,C,k,P,B,mn.disabled,fn.disabled),$l(_,C,k,P,B,_.stencilModeFor3D(),_.colorModeForRenderPass());else{const F=_.colorModeForRenderPass();$l(_,C,k,P,B,mn.disabled,F)}}})(i,u,p,g);break;case"hillshade":(function(_,C,k,P){if(_.renderPass!=="offscreen"&&_.renderPass!=="translucent")return;const D=_.context,B=_.depthModeForSublayer(0,kr.ReadOnly),F=_.colorModeForRenderPass(),[X,ue]=_.renderPass==="translucent"?_.stencilConfigForOverlap(P):[{},P];for(const ce of ue){const pe=C.getTile(ce);pe.needsHillshadePrepare!==void 0&&pe.needsHillshadePrepare&&_.renderPass==="offscreen"?Fd(_,pe,k,B,mn.disabled,F):_.renderPass==="translucent"&&wv(_,ce,pe,k,B,X[ce.overscaledZ],F)}D.viewport.set([0,0,_.width,_.height])})(i,u,p,g);break;case"raster":(function(_,C,k,P){if(_.renderPass!=="translucent"||k.paint.get("raster-opacity")===0||!P.length)return;const D=_.context,B=D.gl,F=C.getSource(),X=_.useProgram("raster"),ue=_.colorModeForRenderPass(),[ce,pe]=F instanceof yt?[{},P]:_.stencilConfigForOverlap(P),ae=pe[pe.length-1].overscaledZ,Pe=!_.options.moving;for(const Ne of pe){const ge=_.depthModeForSublayer(Ne.overscaledZ-ae,k.paint.get("raster-opacity")===1?kr.ReadWrite:kr.ReadOnly,B.LESS),De=C.getTile(Ne);De.registerFadeDuration(k.paint.get("raster-fade-duration"));const He=C.findLoadedParent(Ne,0),We=Sv(De,He,C,k,_.transform,_.style.map.terrain);let tt,st;const it=k.paint.get("raster-resampling")==="nearest"?B.NEAREST:B.LINEAR;D.activeTexture.set(B.TEXTURE0),De.texture.bind(it,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),D.activeTexture.set(B.TEXTURE1),He?(He.texture.bind(it,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),tt=Math.pow(2,He.tileID.overscaledZ-De.tileID.overscaledZ),st=[De.tileID.canonical.x*tt%1,De.tileID.canonical.y*tt%1]):De.texture.bind(it,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST);const dt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Ne),$t=dt?Ne:null,xr=$t?$t.posMatrix:_.transform.calculatePosMatrix(Ne.toUnwrapped(),Pe),vt=ff(xr,st||[0,0],tt||1,We,k);F instanceof yt?X.draw(D,B.TRIANGLES,ge,mn.disabled,ue,dn.disabled,vt,dt,k.id,F.boundsBuffer,_.quadTriangleIndexBuffer,F.boundsSegments):X.draw(D,B.TRIANGLES,ge,ce[Ne.overscaledZ],ue,dn.disabled,vt,dt,k.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}})(i,u,p,g);break;case"background":(function(_,C,k,P){const D=k.paint.get("background-color"),B=k.paint.get("background-opacity");if(B===0)return;const F=_.context,X=F.gl,ue=_.transform,ce=ue.tileSize,pe=k.paint.get("background-pattern");if(_.isPatternMissing(pe))return;const ae=!pe&&D.a===1&&B===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass!==ae)return;const Pe=mn.disabled,Ne=_.depthModeForSublayer(0,ae==="opaque"?kr.ReadWrite:kr.ReadOnly),ge=_.colorModeForRenderPass(),De=_.useProgram(pe?"backgroundPattern":"background"),He=P||ue.coveringTiles({tileSize:ce,terrain:_.style.map.terrain});pe&&(F.activeTexture.set(X.TEXTURE0),_.imageManager.bind(_.context));const We=k.getCrossfadeParameters();for(const tt of He){const st=P?tt.posMatrix:_.transform.calculatePosMatrix(tt.toUnwrapped()),it=pe?ho(st,B,_,pe,{tileID:tt,tileSize:ce},We):Pc(st,B,D),dt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(tt);De.draw(F,X.TRIANGLES,Ne,Pe,ge,dn.disabled,it,dt,k.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}})(i,0,p,g);break;case"custom":(function(_,C,k){const P=_.context,D=k.implementation;if(_.renderPass==="offscreen"){const B=D.prerender;B&&(_.setCustomLayerDefaults(),P.setColorMode(_.colorModeForRenderPass()),B.call(D,P.gl,_.transform.customLayerMatrix()),P.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),P.setColorMode(_.colorModeForRenderPass()),P.setStencilMode(mn.disabled);const B=D.renderingMode==="3d"?new kr(_.context.gl.LEQUAL,kr.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,kr.ReadOnly);P.setDepthMode(B),D.render(P.gl,_.transform.customLayerMatrix()),P.setDirty(),_.setBaseState(),P.bindFramebuffer.set(null)}})(i,0,p)}}translatePosMatrix(i,u,p,g,_){if(!p[0]&&!p[1])return i;const C=_?g==="map"?this.transform.angle:0:g==="viewport"?-this.transform.angle:0;if(C){const D=Math.sin(C),B=Math.cos(C);p=[p[0]*B-p[1]*D,p[0]*D+p[1]*B]}const k=[_?p[0]:be(u,p[0],this.transform.zoom),_?p[1]:be(u,p[1],this.transform.zoom),0],P=new Float32Array(16);return l.$(P,i,k),P}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!u||!p}useProgram(i,u){this.cache=this.cache||{};const p=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new Cc(this.context,Br[i],u,Ec[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new xe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:u}=this.context.gl;return this.width!==i||this.height!==u}}class Ai{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,p){const g=Math.pow(2,p),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(k=>{const P=1/(k=l.ag([],k,i))[3]/u*g;return l.b3(k,k,[P,P,1/k[3],P])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(k=>{const P=function(X,ue){var ce=ue[0],pe=ue[1],ae=ue[2],Pe=ce*ce+pe*pe+ae*ae;return Pe>0&&(Pe=1/Math.sqrt(Pe)),X[0]=ue[0]*Pe,X[1]=ue[1]*Pe,X[2]=ue[2]*Pe,X}([],function(X,ue,ce){var pe=ue[0],ae=ue[1],Pe=ue[2],Ne=ce[0],ge=ce[1],De=ce[2];return X[0]=ae*De-Pe*ge,X[1]=Pe*Ne-pe*De,X[2]=pe*ge-ae*Ne,X}([],se([],_[k[0]],_[k[1]]),se([],_[k[2]],_[k[1]]))),D=-((B=P)[0]*(F=_[k[1]])[0]+B[1]*F[1]+B[2]*F[2]);var B,F;return P.concat(D)});return new Ai(_,C)}}class js{constructor(i,u){this.min=i,this.max=u,this.center=function(p,g,_){return p[0]=.5*g[0],p[1]=.5*g[1],p[2]=.5*g[2],p}([],function(p,g,_){return p[0]=g[0]+_[0],p[1]=g[1]+_[1],p[2]=g[2]+_[2],p}([],this.min,this.max))}quadrant(i){const u=[i%2==0,i<2],p=re(this.min),g=re(this.max);for(let _=0;_<u.length;_++)p[_]=u[_]?this.min[_]:this.center[_],g[_]=u[_]?this.center[_]:this.max[_];return g[2]=this.max[2],new js(p,g)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let g=0;g<i.planes.length;g++){const _=i.planes[g];let C=0;for(let k=0;k<u.length;k++)l.b4(_,u[k])>=0&&C++;if(C===0)return 0;C!==u.length&&(p=!1)}if(p)return 2;for(let g=0;g<3;g++){let _=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let k=0;k<i.points.length;k++){const P=i.points[k][g]-this.min[g];_=Math.min(_,P),C=Math.max(C,P)}if(C<0||_>this.max[g]-this.min[g])return 0}return 1}}class Ol{constructor(i=0,u=0,p=0,g=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=p,this.right=g}interpolate(i,u,p){return u.top!=null&&i.top!=null&&(this.top=l.B.number(i.top,u.top,p)),u.bottom!=null&&i.bottom!=null&&(this.bottom=l.B.number(i.bottom,u.bottom,p)),u.left!=null&&i.left!=null&&(this.left=l.B.number(i.left,u.left,p)),u.right!=null&&i.right!=null&&(this.right=l.B.number(i.right,u.right,p)),this}getCenter(i,u){const p=l.ad((this.left+i-this.right)/2,0,i),g=l.ad((this.top+u-this.bottom)/2,0,u);return new l.P(p,g)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Ol(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Hc{constructor(i,u,p,g,_){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=_===void 0||!!_,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=p??0,this._maxPitch=g??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.L(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ol,this._posMatrixCache={},this._alignedPosMatrixCache={},this._minEleveationForCurrentTile=0}clone(){const i=new Hc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this._minEleveationForCurrentTile=i._minEleveationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-l.b5(i,-180,180)*Math.PI/180;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=function(){var p=new l.A(4);return l.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p}(),function(p,g,_){var C=g[0],k=g[1],P=g[2],D=g[3],B=Math.sin(_),F=Math.cos(_);p[0]=C*F+P*B,p[1]=k*F+D*B,p[2]=C*-B+P*F,p[3]=k*-B+D*F}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=l.ad(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.tileZoom=Math.max(0,Math.floor(u)),this.scale=this.zoomScale(u),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,p){this._unmodified=!1,this._edgeInsets.interpolate(i,u,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new l.b6(0,i)];if(this._renderWorldCopies){const p=this.pointCoordinate(new l.P(0,0)),g=this.pointCoordinate(new l.P(this.width,0)),_=this.pointCoordinate(new l.P(this.width,this.height)),C=this.pointCoordinate(new l.P(0,this.height)),k=Math.floor(Math.min(p.x,g.x,_.x,C.x)),P=Math.floor(Math.max(p.x,g.x,_.x,C.x)),D=1;for(let B=k-D;B<=P+D;B++)B!==0&&u.push(new l.b6(B,i))}return u}coveringTiles(i){var u,p;let g=this.coveringZoomLevel(i);const _=g;if(i.minzoom!==void 0&&g<i.minzoom)return[];i.maxzoom!==void 0&&g>i.maxzoom&&(g=i.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),k=l.U.fromLngLat(this.center),P=Math.pow(2,g),D=[P*C.x,P*C.y,0],B=[P*k.x,P*k.y,0],F=Ai.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,g);let X=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=g);const ue=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,ce=ge=>({aabb:new js([ge*P,0,0],[(ge+1)*P,P,0]),zoom:0,x:0,y:0,wrap:ge,fullyVisible:!1}),pe=[],ae=[],Pe=g,Ne=i.reparseOverscaled?_:g;if(this._renderWorldCopies)for(let ge=1;ge<=3;ge++)pe.push(ce(-ge)),pe.push(ce(ge));for(pe.push(ce(0));pe.length>0;){const ge=pe.pop(),De=ge.x,He=ge.y;let We=ge.fullyVisible;if(!We){const $t=ge.aabb.intersects(F);if($t===0)continue;We=$t===2}const tt=i.terrain?D:B,st=ge.aabb.distanceX(tt),it=ge.aabb.distanceY(tt),dt=Math.max(Math.abs(st),Math.abs(it));if(ge.zoom===Pe||dt>ue+(1<<Pe-ge.zoom)-2&&ge.zoom>=X){const $t=Pe-ge.zoom,xr=D[0]-.5-(De<<$t),vt=D[1]-.5-(He<<$t);ae.push({tileID:new l.O(ge.zoom===Pe?Ne:ge.zoom,ge.wrap,ge.zoom,De,He),distanceSq:ie([B[0]-.5-De,B[1]-.5-He]),tileDistanceToCamera:Math.sqrt(xr*xr+vt*vt)})}else for(let $t=0;$t<4;$t++){const xr=(De<<1)+$t%2,vt=(He<<1)+($t>>1),ir=ge.zoom+1;let Nt=ge.aabb.quadrant($t);if(i.terrain){const qr=new l.O(ir,ge.wrap,ir,xr,vt),gr=i.terrain.getMinMaxElevation(qr),pr=(u=gr.minElevation)!==null&&u!==void 0?u:this.elevation,br=(p=gr.maxElevation)!==null&&p!==void 0?p:this.elevation;Nt=new js([Nt.min[0],Nt.min[1],pr],[Nt.max[0],Nt.max[1],br])}pe.push({aabb:Nt,zoom:ir,x:xr,y:vt,wrap:ge.wrap,fullyVisible:We})}}return ae.sort((ge,De)=>ge.distanceSq-De.distanceSq).map(ge=>ge.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=l.ad(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.P(l.G(i.lng)*this.worldSize,l.H(u)*this.worldSize)}unproject(i){return new l.U(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),p=i.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-p))return;const g=this.getCameraPosition(),_=l.U.fromLngLat(g.lngLat,g.altitude),C=l.U.fromLngLat(u,p),k=_.x-C.x,P=_.y-C.y,D=_.z-C.z,B=Math.sqrt(k*k+P*P+D*D),F=this.scaleZoom(this.cameraToCenterDistance/B/this.tileSize);this._elevation=p,this._center=u,this.zoom=F}setLocationAtPoint(i,u){const p=this.pointCoordinate(u),g=this.pointCoordinate(this.centerPoint),_=this.locationCoordinate(i),C=new l.U(_.x-(p.x-g.x),_.y-(p.y-g.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),u.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return l.U.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const X=u.pointCoordinate(i);if(X!=null)return X}const p=[i.x,i.y,0,1],g=[i.x,i.y,1,1];l.ag(p,p,this.pixelMatrixInverse),l.ag(g,g,this.pixelMatrixInverse);const _=p[3],C=g[3],k=p[1]/_,P=g[1]/C,D=p[2]/_,B=g[2]/C,F=D===B?0:(0-D)/(B-D);return new l.U(l.B.number(p[0]/_,g[0]/C,F)/this.worldSize,l.B.number(k,P,F)/this.worldSize)}coordinatePoint(i,u=0,p=this.pixelMatrix){const g=[i.x*this.worldSize,i.y*this.worldSize,u,1];return l.ag(g,g,p),new l.P(g[0]/g[3],g[1]/g[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Pt().extend(this.pointLocation(new l.P(0,i))).extend(this.pointLocation(new l.P(this.width,i))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Pt([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const p=i.key,g=u?this._alignedPosMatrixCache:this._posMatrixCache;if(g[p])return g[p];const _=i.canonical,C=this.worldSize/this.zoomScale(_.z),k=_.x+Math.pow(2,_.z)*i.wrap,P=l.ao(new Float64Array(16));return l.$(P,P,[k*C,_.y*C,0]),l.a0(P,P,[C/l.N,C/l.N,1]),l.a1(P,u?this.alignedProjMatrix:this.projMatrix,P),g[p]=new Float32Array(P),g[p]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,p,g,_=-90,C=90,k=-180,P=180;const D=this.size,B=this._unmodified;if(this.latRange){const ue=this.latRange;_=l.H(ue[1])*this.worldSize,C=l.H(ue[0])*this.worldSize,i=C-_<D.y?D.y/(C-_):0}if(this.lngRange){const ue=this.lngRange;k=l.b5(l.G(ue[0])*this.worldSize,0,this.worldSize),P=l.b5(l.G(ue[1])*this.worldSize,0,this.worldSize),P<k&&(P+=this.worldSize),u=P-k<D.x?D.x/(P-k):0}const F=this.point,X=Math.max(u||0,i||0);if(X)return this.center=this.unproject(new l.P(u?(P+k)/2:F.x,i?(C+_)/2:F.y)),this.zoom+=this.scaleZoom(X),this._unmodified=B,void(this._constraining=!1);if(this.latRange){const ue=F.y,ce=D.y/2;ue-ce<_&&(g=_+ce),ue+ce>C&&(g=C-ce)}if(this.lngRange){const ue=(k+P)/2,ce=l.b5(F.x,ue-this.worldSize/2,ue+this.worldSize/2),pe=D.x/2;ce-pe<k&&(p=k+pe),ce+pe>P&&(p=P-pe)}p===void 0&&g===void 0||(this.center=this.unproject(new l.P(p!==void 0?p:F.x,g!==void 0?g:F.y)).wrap()),this._unmodified=B,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b7(1,this.center.lat)*this.worldSize;let g=l.ao(new Float64Array(16));l.a0(g,g,[this.width/2,-this.height/2,1]),l.$(g,g,[1,-1,0]),this.labelPlaneMatrix=g,g=l.ao(new Float64Array(16)),l.a0(g,g,[1,-1,1]),l.$(g,g,[-1,-1,0]),l.a0(g,g,[2/this.width,2/this.height,1]),this.glCoordMatrix=g;const _=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this._minEleveationForCurrentTile),k=_-C*this._pixelPerMeter/Math.cos(this._pitch),P=C<0?k:_,D=Math.PI/2+this._pitch,B=this._fov*(.5+i.y/this.height),F=Math.sin(B)*P/Math.sin(l.ad(Math.PI-D-B,.01,Math.PI-.01)),X=this.getHorizon(),ue=2*Math.atan(X/this.cameraToCenterDistance)*(.5+i.y/(2*X)),ce=Math.sin(ue)*P/Math.sin(l.ad(Math.PI-D-ue,.01,Math.PI-.01)),pe=Math.min(F,ce),ae=1.01*(Math.cos(Math.PI/2-this._pitch)*pe+P),Pe=this.height/50;g=new Float64Array(16),l.b8(g,this._fov,this.width/this.height,Pe,ae),g[8]=2*-i.x/this.width,g[9]=2*i.y/this.height,l.a0(g,g,[1,-1,1]),l.$(g,g,[0,0,-this.cameraToCenterDistance]),l.b9(g,g,this._pitch),l.ae(g,g,this.angle),l.$(g,g,[-u,-p,0]),this.mercatorMatrix=l.a0([],g,[this.worldSize,this.worldSize,this.worldSize]),l.a0(g,g,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.a1(new Float64Array(16),this.labelPlaneMatrix,g),l.$(g,g,[0,0,-this.elevation]),this.projMatrix=g,this.invProjMatrix=l.as([],g),this.pixelMatrix3D=l.a1(new Float64Array(16),this.labelPlaneMatrix,g);const Ne=this.width%2/2,ge=this.height%2/2,De=Math.cos(this.angle),He=Math.sin(this.angle),We=u-Math.round(u)+De*Ne+He*ge,tt=p-Math.round(p)+De*ge+He*Ne,st=new Float64Array(g);if(l.$(st,st,[We>.5?We-1:We,tt>.5?tt-1:tt,0]),this.alignedProjMatrix=st,g=l.as(new Float64Array(16),this.pixelMatrix),!g)throw new Error("failed to invert matrix");this.pixelMatrixInverse=g,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new l.P(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return l.ag(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let p=u.x,g=u.y,_=u.x,C=u.y;for(const k of i)p=Math.min(p,k.x),g=Math.min(g,k.y),_=Math.max(_,k.x),C=Math.max(C,k.y);return[new l.P(p,g),new l.P(_,g),new l.P(_,C),new l.P(p,C),new l.P(p,g)]}}}function ls(y,i){let u,p=!1,g=null,_=null;const C=()=>{g=null,p&&(y.apply(_,u),g=setTimeout(C,i),p=!1)};return(...k)=>(p=!0,_=this,u=k,g||C(),g)}class Fl{constructor(i){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(p=g)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}},this._updateHash=ls(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,g=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,g),C=Math.round(u.lng*_)/_,k=Math.round(u.lat*_)/_,P=this._map.getBearing(),D=this._map.getPitch();let B="";if(B+=i?`/${C}/${k}/${p}`:`${p}/${k}/${C}`,(P||D)&&(B+="/"+Math.round(10*P)/10),D&&(B+=`/${Math.round(D)}`),this._hashName){const F=this._hashName;let X=!1;const ue=window.location.hash.slice(1).split("&").map(ce=>{const pe=ce.split("=")[0];return pe===F?(X=!0,`${pe}=${B}`):ce}).filter(ce=>ce);return X||ue.push(`${F}=${B}`),`#${ue.join("&")}`}return`#${B}`}}const Vs={linearity:.3,easing:l.ba(0,0,.3,1)},Tf=l.e({deceleration:2500,maxSpeed:1400},Vs),Pf=l.e({deceleration:20,maxSpeed:1400},Vs),Ef=l.e({deceleration:1e3,maxSpeed:360},Vs),zf=l.e({deceleration:1e3,maxSpeed:90},Vs);class Mf{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.h.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=l.h.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)u.zoom+=_.zoomDelta||0,u.bearing+=_.bearingDelta||0,u.pitch+=_.pitchDelta||0,_.panDelta&&u.pan._add(_.panDelta),_.around&&(u.around=_.around),_.pinchAround&&(u.pinchAround=_.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(u.pan.mag()){const _=Nl(u.pan.mag(),p,l.e({},Tf,i||{}));g.offset=u.pan.mult(_.amount/u.pan.mag()),g.center=this._map.transform.center,Wo(g,_)}if(u.zoom){const _=Nl(u.zoom,p,Pf);g.zoom=this._map.transform.zoom+_.amount,Wo(g,_)}if(u.bearing){const _=Nl(u.bearing,p,Ef);g.bearing=this._map.transform.bearing+l.ad(_.amount,-179,179),Wo(g,_)}if(u.pitch){const _=Nl(u.pitch,p,zf);g.pitch=this._map.transform.pitch+_.amount,Wo(g,_)}if(g.zoom||g.bearing){const _=u.pinchAround===void 0?u.around:u.pinchAround;g.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),l.e(g,{noMoveStart:!0})}}function Wo(y,i){(!y.duration||y.duration<i.duration)&&(y.duration=i.duration,y.easing=i.easing)}function Nl(y,i,u){const{maxSpeed:p,linearity:g,deceleration:_}=u,C=l.ad(y*g/(i/1e3),-p,p),k=Math.abs(C)/(_*g);return{easing:u.easing,duration:1e3*k,amount:C*(k/2)}}class Yi extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p,g={}){const _=w.mousePos(u.getCanvasContainer(),p),C=u.unproject(_);super(i,l.e({point:_,lngLat:C,originalEvent:p},g)),this._defaultPrevented=!1,this.target=u}}class jl extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){const g=i==="touchend"?p.changedTouches:p.touches,_=w.touchPos(u.getCanvasContainer(),g),C=_.map(P=>u.unproject(P)),k=_.reduce((P,D,B,F)=>P.add(D.div(F.length)),new l.P(0,0));super(i,{points:_,point:k,lngLats:C,lngLat:u.unproject(k),originalEvent:p}),this._defaultPrevented=!1}}class Df extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class Af{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Df(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new Yi(i.type,this._map,i))}mouseup(i){this._map.fire(new Yi(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Yi(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Yi(i.type,this._map,i))}mouseover(i){this._map.fire(new Yi(i.type,this._map,i))}mouseout(i){this._map.fire(new Yi(i.type,this._map,i))}touchstart(i){return this._firePreventable(new jl(i.type,this._map,i))}touchmove(i){this._map.fire(new jl(i.type,this._map,i))}touchend(i){this._map.fire(new jl(i.type,this._map,i))}touchcancel(i){this._map.fire(new jl(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Rf{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Yi(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Yi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Yi(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ma{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(l.P.convert(i),this._map.terrain)}}class Lf{constructor(i,u){this._map=i,this._tr=new ma(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=p,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const _=Math.min(g.x,p.x),C=Math.max(g.x,p.x),k=Math.min(g.y,p.y),P=Math.max(g.y,p.y);w.setTransform(this._box,`translate(${_}px,${k}px)`),this._box.style.width=C-_+"px",this._box.style.height=P-k+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const p=this._startPos,g=u;if(this.reset(),w.suppressClick(),p.x!==g.x||p.y!==g.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:i})),{cameraAnimation:_=>_.fitScreenCoordinates(p,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new l.k(i,{originalEvent:u}))}}function po(y,i){if(y.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${y.length}, points ${i.length}`);const u={};for(let p=0;p<y.length;p++)u[y[p].identifier]=i[p];return u}class ga{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(g){const _=new l.P(0,0);for(const C of g)_._add(C);return _.div(g.length)}(u),this.touches=po(p,u)))}touchmove(i,u,p){if(this.aborted||!this.centroid)return;const g=po(p,u);for(const _ in this.touches){const C=g[_];(!C||C.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(i,u,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Wc{constructor(i){this.singleTap=new ga(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,p){this.singleTap.touchstart(i,u,p)}touchmove(i,u,p){this.singleTap.touchmove(i,u,p)}touchend(i,u,p){const g=this.singleTap.touchend(i,u,p);if(g){const _=i.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(g)<30;if(_&&C||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class ya{constructor(i){this._tr=new ma(i),this._zoomIn=new Wc({numTouches:1,numTaps:2}),this._zoomOut=new Wc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,p){this._zoomIn.touchstart(i,u,p),this._zoomOut.touchstart(i,u,p)}touchmove(i,u,p){this._zoomIn.touchmove(i,u,p),this._zoomOut.touchmove(i,u,p)}touchend(i,u,p){const g=this._zoomIn.touchend(i,u,p),_=this._zoomOut.touchend(i,u,p),C=this._tr;return g?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(g)},{originalEvent:i})}):_?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(_)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class va{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const u=this._moveFunction(...i);if(u.bearingDelta||u.pitchDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(i,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=u.length?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const g=u.length?u[0]:u;return!this._moved&&g.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(p,g))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&w.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Cv={0:1,2:2};class jd{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const u=w.mouseButton(i);this._eventButton=u}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(u,p){const g=Cv[p];return u.buttons===void 0||(u.buttons&g)!==g}(i,this._eventButton)}isValidEndEvent(i){return w.mouseButton(i)===this._eventButton}}class $f{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const Gc=y=>{y.mousedown=y.dragStart,y.mousemoveWindow=y.dragMove,y.mouseup=y.dragEnd,y.contextmenu=function(i){i.preventDefault()}},Us=({enable:y,clickTolerance:i,bearingDegreesPerPixelMoved:u=.8})=>{const p=new jd({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new va({clickTolerance:i,move:(g,_)=>({bearingDelta:(_.x-g.x)*u}),moveStateManager:p,enable:y,assignEvents:Gc})},_a=({enable:y,clickTolerance:i,pitchDegreesPerPixelMoved:u=-.5})=>{const p=new jd({checkCorrectEvent:g=>w.mouseButton(g)===0&&g.ctrlKey||w.mouseButton(g)===2});return new va({clickTolerance:i,move:(g,_)=>({pitchDelta:(_.y-g.y)*u}),moveStateManager:p,enable:y,assignEvents:Gc})};class Dt{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,p){return this._calculateTransform(i,u,p)}touchmove(i,u,p){if(this._map._cooperativeGestures&&(this._minTouches===2&&p.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,p.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(p.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,p)}touchend(i,u,p){this._calculateTransform(i,u,p),this._active&&p.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,p){p.length>0&&(this._active=!0);const g=po(p,u),_=new l.P(0,0),C=new l.P(0,0);let k=0;for(const D in g){const B=g[D],F=this._touches[D];F&&(_._add(B),C._add(B.sub(F)),k++,g[D]=B)}if(this._touches=g,k<this._minTouches||!C.mag())return;const P=C.div(k);return this._sum._add(P),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(k),panDelta:P}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,p){if(!this._firstTwoTouches)return;i.preventDefault();const[g,_]=this._firstTwoTouches,C=ja(p,u,g),k=ja(p,u,_);if(!C||!k)return;const P=this._aroundCenter?null:C.add(k).div(2);return this._move([C,k],P,i)}touchend(i,u,p){if(!this._firstTwoTouches)return;const[g,_]=this._firstTwoTouches,C=ja(p,u,g),k=ja(p,u,_);C&&k||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ja(y,i,u){for(let p=0;p<y.length;p++)if(y[p].identifier===u)return i[p]}function Hs(y,i){return Math.log(y/i)/Math.LN2}class Bf extends qc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Hs(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Hs(this._distance,p),pinchAround:u}}}function kt(y,i){return 180*y.angleWith(i)/Math.PI}class Vd extends qc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:kt(this._vector,p),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,p=kt(i,this._startVector);return Math.abs(p)<u}}function Ud(y){return Math.abs(y.y)>Math.abs(y.x)}class kv extends qc{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,p){super.touchstart(i,u,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,Ud(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,p){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const g=i[0].sub(this._lastPoints[0]),_=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,_,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(g.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,p){if(this._valid!==void 0)return this._valid;const g=i.mag()>=2,_=u.mag()>=2;if(!g&&!_)return;if(!g||!_)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const C=i.y>0==u.y>0;return Ud(i)&&Ud(u)&&C}}const Hd={panStep:100,bearingStep:15,pitchStep:10};class Of{constructor(i){this._tr=new ma(i);const u=Hd;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,p=0,g=0,_=0,C=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),_=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),_=1);break;case 38:i.shiftKey?g=1:(i.preventDefault(),C=-1);break;case 40:i.shiftKey?g=-1:(i.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(p=0,g=0),{cameraAnimation:k=>{const P=this._tr;k.easeTo({duration:300,easeId:"keyboardHandler",easing:Ff,zoom:u?Math.round(P.zoom)+u*(i.shiftKey?2:1):P.zoom,bearing:P.bearing+p*this._bearingStep,pitch:P.pitch+g*this._pitchStep,offset:[-_*this._panStep,-C*this._panStep],center:P.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ff(y){return y*(2-y)}const Nf=4.000244140625;class Iv{constructor(i,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new ma(i),this._el=i.getCanvasContainer(),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!i[this._map._metaKey])return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=l.h.now(),g=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%Nf==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(g*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,i),p=this._tr;this._around=l.L.convert(this._aroundCenter?p.center:p.unproject(u)),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const k=this._type==="wheel"&&Math.abs(this._delta)>Nf?this._wheelZoomRate:this._defaultZoomRate;let P=2/(1+Math.exp(-Math.abs(this._delta*k)));this._delta<0&&P!==0&&(P=1/P);const D=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(D*P))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,p=this._startZoom,g=this._easing;let _,C=!1;if(this._type==="wheel"&&p&&g){const k=Math.min((l.h.now()-this._lastWheelEventTime)/200,1),P=g(k);_=l.B.number(p,u,P),k<1?this._frameId||(this._frameId=!0):C=!0}else _=u,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:_-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=l.bb;if(this._prevEase){const p=this._prevEase,g=(l.h.now()-p.start)/p.duration,_=p.easing(g+.01)-p.easing(g),C=.27/Math.sqrt(_*_+1e-4)*.01,k=Math.sqrt(.0729-C*C);u=l.ba(C,k,.25,1)}return this._prevEase={start:l.h.now(),duration:i,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Wd{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Gd{constructor(i){this._tr=new ma(i),this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qd{constructor(){this._tap=new Wc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,u,p){if(!this._swipePoint)if(this._tapTime){const g=u[0],_=i.timeStamp-this._tapTime<500,C=this._tapPoint.dist(g)<30;_&&C?p.length>0&&(this._swipePoint=g,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,u,p)}touchmove(i,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const g=u[0],_=g.y-this._swipePoint.y;return this._swipePoint=g,i.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(i,u,p)}touchend(i,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const g=this._tap.touchend(i,u,p);g&&(this._tapTime=i.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zd{constructor(i,u,p){this._el=i,this._mousePan=u,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ri{constructor(i,u,p){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Va{constructor(i,u,p,g){this._el=i,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Vl=y=>y.zoom||y.drag||y.pitch||y.rotate;class Kd extends l.k{}function Ul(y){return y.panDelta&&y.panDelta.mag()||y.zoomDelta||y.bearingDelta||y.pitchDelta}class Xd{constructor(i,u){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,_)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=g.type==="renderFrame"?void 0:g,k={needsRenderFrame:!1},P={},D={},B=g.touches,F=B?this._getMapTouches(B):void 0,X=F?w.touchPos(this._el,F):w.mousePos(this._el,g);for(const{handlerName:pe,handler:ae,allowed:Pe}of this._handlers){if(!ae.isEnabled())continue;let Ne;this._blockedByActive(D,Pe,pe)?ae.reset():ae[_||g.type]&&(Ne=ae[_||g.type](g,X,F),this.mergeHandlerResult(k,P,Ne,pe,C),Ne&&Ne.needsRenderFrame&&this._triggerRenderFrame()),(Ne||ae.isActive())&&(D[pe]=ae)}const ue={};for(const pe in this._previousActiveHandlers)D[pe]||(ue[pe]=C);this._previousActiveHandlers=D,(Object.keys(ue).length||Ul(k))&&(this._changes.push([k,P,ue]),this._triggerRenderFrame()),(Object.keys(D).length||Ul(k))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ce}=k;ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ce(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Mf(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[g,_,C]of this._listeners)w.addEventListener(g,_,g===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[i,u,p]of this._listeners)w.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Af(u,i));const g=u.boxZoom=new Lf(u,i);this._add("boxZoom",g),i.interactive&&i.boxZoom&&g.enable();const _=new ya(u),C=new Gd(u);u.doubleClickZoom=new Wd(C,_),this._add("tapZoom",_),this._add("clickZoom",C),i.interactive&&i.doubleClickZoom&&u.doubleClickZoom.enable();const k=new qd;this._add("tapDragZoom",k);const P=u.touchPitch=new kv(u);this._add("touchPitch",P),i.interactive&&i.touchPitch&&u.touchPitch.enable(i.touchPitch);const D=Us(i),B=_a(i);u.dragRotate=new Ri(i,D,B),this._add("mouseRotate",D,["mousePitch"]),this._add("mousePitch",B,["mouseRotate"]),i.interactive&&i.dragRotate&&u.dragRotate.enable();const F=(({enable:Pe,clickTolerance:Ne})=>{const ge=new jd({checkCorrectEvent:De=>w.mouseButton(De)===0&&!De.ctrlKey});return new va({clickTolerance:Ne,move:(De,He)=>({around:He,panDelta:He.sub(De)}),activateOnStart:!0,moveStateManager:ge,enable:Pe,assignEvents:Gc})})(i),X=new Dt(i,u);u.dragPan=new Zd(p,F,X),this._add("mousePan",F),this._add("touchPan",X,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&u.dragPan.enable(i.dragPan);const ue=new Vd,ce=new Bf;u.touchZoomRotate=new Va(p,ce,ue,k),this._add("touchRotate",ue,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&u.touchZoomRotate.enable(i.touchZoomRotate);const pe=u.scrollZoom=new Iv(u,()=>this._triggerRenderFrame());this._add("scrollZoom",pe,["mousePan"]),i.interactive&&i.scrollZoom&&u.scrollZoom.enable(i.scrollZoom);const ae=u.keyboard=new Of(u);this._add("keyboard",ae),i.interactive&&i.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Rf(u))}_add(i,u,p){this._handlers.push({handlerName:i,handler:u,allowed:p}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Vl(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,u,p){for(const g in i)if(g!==p&&(!u||u.indexOf(g)<0))return!0;return!1}_getMapTouches(i){const u=[];for(const p of i)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(i,u,p,g,_){if(!p)return;l.e(i,p);const C={handlerName:g,originalEvent:p.originalEvent||_};p.zoomDelta!==void 0&&(u.zoom=C),p.panDelta!==void 0&&(u.drag=C),p.pitchDelta!==void 0&&(u.pitch=C),p.bearingDelta!==void 0&&(u.rotate=C)}_applyChanges(){const i={},u={},p={};for(const[g,_,C]of this._changes)g.panDelta&&(i.panDelta=(i.panDelta||new l.P(0,0))._add(g.panDelta)),g.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+g.pitchDelta),g.around!==void 0&&(i.around=g.around),g.pinchAround!==void 0&&(i.pinchAround=g.pinchAround),g.noInertia&&(i.noInertia=g.noInertia),l.e(u,_),l.e(p,C);this._updateMapTransform(i,u,p),this._changes=[]}_updateMapTransform(i,u,p){const g=this._map,_=g._getTransformForUpdate(),C=g.terrain;if(!(Ul(i)||C&&this._terrainMovement))return this._fireEvents(u,p,!0);let{panDelta:k,zoomDelta:P,bearingDelta:D,pitchDelta:B,around:F,pinchAround:X}=i;X!==void 0&&(F=X),g._stop(!0),F=F||g.transform.centerPoint;const ue=_.pointLocation(k?F.sub(k):F);D&&(_.bearing+=D),B&&(_.pitch+=B),P&&(_.zoom+=P),C?this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?_.center=_.pointLocation(_.centerPoint.sub(k)):_.setLocationAtPoint(ue,F):(this._terrainMovement=!0,this._map._elevationFreeze=!0,_.setLocationAtPoint(ue,F),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,_.recalculateZoom(g.terrain)})):_.setLocationAtPoint(ue,F),g._applyUpdatedTransform(_),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,p,!0)}_fireEvents(i,u,p){const g=Vl(this._eventsInProgress),_=Vl(i),C={};for(const B in i){const{originalEvent:F}=i[B];this._eventsInProgress[B]||(C[`${B}start`]=F),this._eventsInProgress[B]=i[B]}!g&&_&&this._fireEvent("movestart",_.originalEvent);for(const B in C)this._fireEvent(B,C[B]);_&&this._fireEvent("move",_.originalEvent);for(const B in i){const{originalEvent:F}=i[B];this._fireEvent(B,F)}const k={};let P;for(const B in this._eventsInProgress){const{handlerName:F,originalEvent:X}=this._eventsInProgress[B];this._handlersById[F].isActive()||(delete this._eventsInProgress[B],P=u[F]||X,k[`${B}end`]=P)}for(const B in k)this._fireEvent(B,k[B]);const D=Vl(this._eventsInProgress);if(p&&(g||_)&&!D){this._updatingCamera=!0;const B=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),F=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;!B||!B.essential&&l.h.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:P})),F(this._map.getBearing())&&this._map.resetNorth()):(F(B.bearing||this._map.getBearing())&&(B.bearing=0),B.freezeElevation=!0,this._map.easeTo(B,{originalEvent:P})),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new l.k(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Kd("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class jf extends l.E{constructor(i,u){super(),this._renderFrameCallback=()=>{const p=Math.min((l.h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.L(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,p){return i=l.P.convert(i).mult(-1),this.panTo(this.transform.center,l.e({offset:i},u),p)}panTo(i,u,p){return this.easeTo(l.e({center:i},u),p)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,p){return this.easeTo(l.e({zoom:i},u),p)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,p){return this.easeTo(l.e({bearing:i},u),p)}resetNorth(i,u){return this.rotateTo(0,l.e({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=Pt.convert(i);const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,u)}_cameraForBoxAndBearing(i,u,p,g){const _={top:0,bottom:0,right:0,left:0};if(typeof(g=l.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const He=g.padding;g.padding={top:He,bottom:He,right:He,left:He}}g.padding=l.e(_,g.padding);const C=this.transform,k=C.padding,P=C.project(l.L.convert(i)),D=C.project(l.L.convert(u)),B=P.rotate(-p*Math.PI/180),F=D.rotate(-p*Math.PI/180),X=new l.P(Math.max(B.x,F.x),Math.max(B.y,F.y)),ue=new l.P(Math.min(B.x,F.x),Math.min(B.y,F.y)),ce=X.sub(ue),pe=(C.width-(k.left+k.right+g.padding.left+g.padding.right))/ce.x,ae=(C.height-(k.top+k.bottom+g.padding.top+g.padding.bottom))/ce.y;if(ae<0||pe<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Pe=Math.min(C.scaleZoom(C.scale*Math.min(pe,ae)),g.maxZoom),Ne=l.P.convert(g.offset),ge=new l.P((g.padding.left-g.padding.right)/2,(g.padding.top-g.padding.bottom)/2).rotate(p*Math.PI/180),De=Ne.add(ge).mult(C.scale/C.zoomScale(Pe));return{center:C.unproject(P.add(D).div(2).sub(De)),zoom:Pe,bearing:p}}fitBounds(i,u,p){return this._fitInternal(this.cameraForBounds(i,u),u,p)}fitScreenCoordinates(i,u,p,g,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(i)),this.transform.pointLocation(l.P.convert(u)),p,g),g,_)}_fitInternal(i,u,p){return i?(delete(u=l.e(i,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(i,u){this.stop();const p=this._getTransformForUpdate();let g=!1,_=!1,C=!1;return"zoom"in i&&p.zoom!==+i.zoom&&(g=!0,p.zoom=+i.zoom),i.center!==void 0&&(p.center=l.L.convert(i.center)),"bearing"in i&&p.bearing!==+i.bearing&&(_=!0,p.bearing=+i.bearing),"pitch"in i&&p.pitch!==+i.pitch&&(C=!0,p.pitch=+i.pitch),i.padding==null||p.isPaddingEqual(i.padding)||(p.padding=i.padding),this._applyUpdatedTransform(p),this.fire(new l.k("movestart",u)).fire(new l.k("move",u)),g&&this.fire(new l.k("zoomstart",u)).fire(new l.k("zoom",u)).fire(new l.k("zoomend",u)),_&&this.fire(new l.k("rotatestart",u)).fire(new l.k("rotate",u)).fire(new l.k("rotateend",u)),C&&this.fire(new l.k("pitchstart",u)).fire(new l.k("pitch",u)).fire(new l.k("pitchend",u)),this.fire(new l.k("moveend",u))}calculateCameraOptionsFromTo(i,u,p,g=0){const _=l.U.fromLngLat(i,u),C=l.U.fromLngLat(p,g),k=C.x-_.x,P=C.y-_.y,D=C.z-_.z,B=Math.hypot(k,P,D);if(B===0)throw new Error("Can't calculate camera options with same From and To");const F=Math.hypot(k,P),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/B/this.transform.tileSize),ue=180*Math.atan2(k,-P)/Math.PI;let ce=180*Math.acos(F/B)/Math.PI;return ce=D<0?90-ce:90+ce,{center:C.toLngLat(),zoom:X,pitch:ce,bearing:ue}}easeTo(i,u){this._stop(!1,i.easeId),((i=l.e({offset:[0,0],duration:500,easing:l.bb},i)).animate===!1||!i.essential&&l.h.prefersReducedMotion)&&(i.duration=0);const p=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),k=this.getPadding(),P="zoom"in i?+i.zoom:g,D="bearing"in i?this._normalizeBearing(i.bearing,_):_,B="pitch"in i?+i.pitch:C,F="padding"in i?i.padding:p.padding,X=l.P.convert(i.offset);let ue=p.centerPoint.add(X);const ce=p.pointLocation(ue),pe=l.L.convert(i.center||ce);this._normalizeCenter(pe);const ae=p.project(ce),Pe=p.project(pe).sub(ae),Ne=p.zoomScale(P-g);let ge,De;i.around&&(ge=l.L.convert(i.around),De=p.locationPoint(ge));const He={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||P!==g,this._rotating=this._rotating||_!==D,this._pitching=this._pitching||B!==C,this._padding=!p.isPaddingEqual(F),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,He),this.terrain&&this._prepareElevation(pe),this._ease(We=>{if(this._zooming&&(p.zoom=l.B.number(g,P,We)),this._rotating&&(p.bearing=l.B.number(_,D,We)),this._pitching&&(p.pitch=l.B.number(C,B,We)),this._padding&&(p.interpolatePadding(k,F,We),ue=p.centerPoint.add(X)),this.terrain&&!i.freezeElevation&&this._updateElevation(We),ge)p.setLocationAtPoint(ge,De);else{const tt=p.zoomScale(p.zoom-g),st=P>g?Math.min(2,Ne):Math.max(.5,Ne),it=Math.pow(st,1-We),dt=p.unproject(ae.add(Pe.mult(We*it)).mult(tt));p.setLocationAtPoint(p.renderWorldCopies?dt.wrap():dt,ue)}this._applyUpdatedTransform(p),this._fireMoveEvents(u)},We=>{this.terrain&&this._finalizeElevation(),this._afterEase(u,We)},i),this}_prepareEase(i,u,p={}){this._moving=!0,u||p.moving||this.fire(new l.k("movestart",i)),this._zooming&&!p.zooming&&this.fire(new l.k("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new l.k("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new l.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(u-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=u}this.transform.elevation=l.B.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const u=i.clone(),{center:p,zoom:g,pitch:_,bearing:C,elevation:k}=this.transformCameraUpdate(u);p&&(u.center=p),g!==void 0&&(u.zoom=g),_!==void 0&&(u.pitch=_),C!==void 0&&(u.bearing=C),k!==void 0&&(u.elevation=k),this.transform.apply(u)}_fireMoveEvents(i){this.fire(new l.k("move",i)),this._zooming&&this.fire(new l.k("zoom",i)),this._rotating&&this.fire(new l.k("rotate",i)),this._pitching&&this.fire(new l.k("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,g=this._rotating,_=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new l.k("zoomend",i)),g&&this.fire(new l.k("rotateend",i)),_&&this.fire(new l.k("pitchend",i)),this.fire(new l.k("moveend",i))}flyTo(i,u){if(!i.essential&&l.h.prefersReducedMotion){const Nt=l.F(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Nt,u)}this.stop(),i=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.bb},i);const p=this._getTransformForUpdate(),g=this.getZoom(),_=this.getBearing(),C=this.getPitch(),k=this.getPadding(),P="zoom"in i?l.ad(+i.zoom,p.minZoom,p.maxZoom):g,D="bearing"in i?this._normalizeBearing(i.bearing,_):_,B="pitch"in i?+i.pitch:C,F="padding"in i?i.padding:p.padding,X=p.zoomScale(P-g),ue=l.P.convert(i.offset);let ce=p.centerPoint.add(ue);const pe=p.pointLocation(ce),ae=l.L.convert(i.center||pe);this._normalizeCenter(ae);const Pe=p.project(pe),Ne=p.project(ae).sub(Pe);let ge=i.curve;const De=Math.max(p.width,p.height),He=De/X,We=Ne.mag();if("minZoom"in i){const Nt=l.ad(Math.min(i.minZoom,g,P),p.minZoom,p.maxZoom),qr=De/p.zoomScale(Nt-g);ge=Math.sqrt(qr/We*2)}const tt=ge*ge;function st(Nt){const qr=(He*He-De*De+(Nt?-1:1)*tt*tt*We*We)/(2*(Nt?He:De)*tt*We);return Math.log(Math.sqrt(qr*qr+1)-qr)}function it(Nt){return(Math.exp(Nt)-Math.exp(-Nt))/2}function dt(Nt){return(Math.exp(Nt)+Math.exp(-Nt))/2}const $t=st(!1);let xr=function(Nt){return dt($t)/dt($t+ge*Nt)},vt=function(Nt){return De*((dt($t)*(it(qr=$t+ge*Nt)/dt(qr))-it($t))/tt)/We;var qr},ir=(st(!0)-$t)/ge;if(Math.abs(We)<1e-6||!isFinite(ir)){if(Math.abs(De-He)<1e-6)return this.easeTo(i,u);const Nt=He<De?-1:1;ir=Math.abs(Math.log(He/De))/ge,vt=function(){return 0},xr=function(qr){return Math.exp(Nt*ge*qr)}}return i.duration="duration"in i?+i.duration:1e3*ir/("screenSpeed"in i?+i.screenSpeed/ge:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=_!==D,this._pitching=B!==C,this._padding=!p.isPaddingEqual(F),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ae),this._ease(Nt=>{const qr=Nt*ir,gr=1/xr(qr);p.zoom=Nt===1?P:g+p.scaleZoom(gr),this._rotating&&(p.bearing=l.B.number(_,D,Nt)),this._pitching&&(p.pitch=l.B.number(C,B,Nt)),this._padding&&(p.interpolatePadding(k,F,Nt),ce=p.centerPoint.add(ue)),this.terrain&&!i.freezeElevation&&this._updateElevation(Nt);const pr=Nt===1?ae:p.unproject(Pe.add(Ne.mult(vt(qr))).mult(gr));p.setLocationAtPoint(p.renderWorldCopies?pr.wrap():pr,ce),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(u)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,u)}if(!i){const p=this.handlers;p&&p.stop(!1)}return this}_ease(i,u,p){p.animate===!1||p.duration===0?(i(1),u()):(this._easeStart=l.h.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,u){i=l.b5(i,-180,180);const p=Math.abs(i-u);return Math.abs(i-360-u)<p&&(i-=360),Math.abs(i+360-u)<p&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const p=i.lng-u.center.lng;i.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(l.L.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}class Qi{constructor(i={}){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const p=this._map._getUIString(`AttributionControl.${u}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(g=>typeof g!="string"?"":g)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const u=this._map.style.sourceCaches;for(const g in u){const _=u[g];if(_.used||_.usedForTerrain){const C=_.getSource();C.attribution&&i.indexOf(C.attribution)<0&&i.push(C.attribution)}}i=i.filter(g=>String(g).trim()),i.sort((g,_)=>g.length-_.length),i=i.filter((g,_)=>{for(let C=_+1;C<i.length;C++)if(i[C].indexOf(g)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class an{constructor(i={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");const u=w.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Zc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const g of p)if(g.id===i)return void(g.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Jd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"};var Vf=l.Q([{name:"a_pos3d",type:"Int16",components:3}]);class Uf extends l.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];const p={};for(const g of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))p[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),l.aS(g.posMatrix,0,l.N,0,l.N,0,1),this._tiles[g.key]=new Mt(g,this.tileSize));for(const g in this._tiles)p[g]||delete this._tiles[g]}freeRtt(i){for(const u in this._tiles){const p=this._tiles[u];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const p of this._renderableTilesKeys){const g=this._tiles[p].tileID;if(g.canonical.equals(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16),l.aS(_.posMatrix,0,l.N,0,l.N,0,1),u[p]=_}else if(g.canonical.isChildOf(i.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=g.canonical.z-i.canonical.z,k=g.canonical.x-(g.canonical.x>>C<<C),P=g.canonical.y-(g.canonical.y>>C<<C),D=l.N>>C;l.aS(_.posMatrix,0,D,0,D,0,1),l.$(_.posMatrix,_.posMatrix,[-k*D,-P*D,0]),u[p]=_}else if(i.canonical.isChildOf(g.canonical)){const _=i.clone();_.posMatrix=new Float64Array(16);const C=i.canonical.z-g.canonical.z,k=i.canonical.x-(i.canonical.x>>C<<C),P=i.canonical.y-(i.canonical.y>>C<<C),D=l.N>>C;l.aS(_.posMatrix,0,l.N,0,l.N,0,1),l.$(_.posMatrix,_.posMatrix,[k*D,P*D,0]),l.a0(_.posMatrix,_.posMatrix,[1/2**C,1/2**C,0]),u[p]=_}}return u}getSourceTile(i,u){const p=this.sourceCache._source;let g=i.overscaledZ-this.deltaZoom;if(g>p.maxzoom&&(g=p.maxzoom),g<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(g).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!_||!_.dem)&&u)for(;g>=p.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(i.scaledTo(g--).key);return _}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeAdded>=i)}}class Hf{constructor(i,u,p){this.painter=i,this.sourceCache=new Uf(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,u,p,g=l.N){var _;if(!(u>=0&&u<g&&p>=0&&p<g))return 0;const C=this.getTerrainData(i),k=(_=C.tile)===null||_===void 0?void 0:_.dem;if(!k)return 0;const P=function(ce,pe,ae){var Pe=pe[0],Ne=pe[1];return ce[0]=ae[0]*Pe+ae[4]*Ne+ae[12],ce[1]=ae[1]*Pe+ae[5]*Ne+ae[13],ce}([],[u/g*l.N,p/g*l.N],C.u_terrain_matrix),D=[P[0]*k.dim,P[1]*k.dim],B=Math.floor(D[0]),F=Math.floor(D[1]),X=D[0]-B,ue=D[1]-F;return k.get(B,F)*(1-X)*(1-ue)+k.get(B+1,F)*X*(1-ue)+k.get(B,F+1)*(1-X)*ue+k.get(B+1,F+1)*X*ue}getElevationForLngLatZoom(i,u){const{tileID:p,mercatorX:g,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(i,u);return this.getElevation(p,g%l.N,_%l.N,l.N)}getElevation(i,u,p,g=l.N){return this.getDEMElevation(i,u,p,g)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const g=this.painter.context,_=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new xe(g,_,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new xe(g,new l.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.ao([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const g=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new xe(g,u.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),u.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){const g=this.sourceCache.sourceCache._source.maxzoom;let _=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=g?_=i.canonical.z-g:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=i.canonical.x-(i.canonical.x>>_<<_),k=i.canonical.y-(i.canonical.y>>_<<_),P=l.bc(new Float64Array(16),[1/(l.N<<_),1/(l.N<<_),0]);l.$(P,P,[C*l.N,k*l.N,0]),this._demMatrixCache[i.key]={matrix:P,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(i){const u=this.painter,p=u.width/devicePixelRatio,g=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new xe(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new xe(u.context,{width:p,height:g,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,g,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,g))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,C=0;_<this._coordsTextureSize;_++)for(let k=0;k<this._coordsTextureSize;k++,C+=4)u[C+0]=255&k,u[C+1]=255&_,u[C+2]=k>>8<<4|_>>8,u[C+3]=0;const p=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),g=new xe(i,p,i.gl.RGBA,{premultiply:!1});return g.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(i){const u=new Uint8Array(4),p=this.painter.context,g=p.gl;p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const _=u[0]+(u[2]>>4<<8),C=u[1]+((15&u[2])<<8),k=this.coordsIndex[255-u[3]],P=k&&this.sourceCache.getTileByID(k);if(!P)return null;const D=this._coordsTextureSize,B=(1<<P.tileID.canonical.z)*D;return new l.U(this._allowMercatorOverflow(i,(P.tileID.canonical.x*D+_)/B),(P.tileID.canonical.y*D+C)/B,this.getElevation(P.tileID,_,C,D))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,u=new l.bd,p=new l.b0,g=this.meshSize,_=l.N/g,C=g*g;for(let F=0;F<=g;F++)for(let X=0;X<=g;X++)u.emplaceBack(X*_,F*_,0);for(let F=0;F<C;F+=g+1)for(let X=0;X<g;X++)p.emplaceBack(X+F,g+X+F+1,g+X+F+2),p.emplaceBack(X+F,g+X+F+2,X+F+1);const k=u.length,P=k+2*(g+1);for(const F of[0,1])for(let X=0;X<=g;X++)for(const ue of[0,1])u.emplaceBack(X*_,F*l.N,ue);for(let F=0;F<2*g;F+=2)p.emplaceBack(P+F,P+F+1,P+F+3),p.emplaceBack(P+F,P+F+3,P+F+2),p.emplaceBack(k+F,k+F+3,k+F+1),p.emplaceBack(k+F,k+F+2,k+F+3);const D=u.length,B=D+2*(g+1);for(const F of[0,1])for(let X=0;X<=g;X++)for(const ue of[0,1])u.emplaceBack(F*l.N,X*_,ue);for(let F=0;F<2*g;F+=2)p.emplaceBack(D+F,D+F+1,D+F+3),p.emplaceBack(D+F,D+F+3,D+F+2),p.emplaceBack(B+F,B+F+3,B+F+1),p.emplaceBack(B+F,B+F+2,B+F+3);return this._mesh={indexBuffer:i.createIndexBuffer(p),vertexBuffer:i.createVertexBuffer(u,Vf.members),segments:l.S.simpleSegment(0,0,u.length,p.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*l.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,u){var p;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(i,u);return(p=this.getMinMaxElevation(g).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,u){const p=l.U.fromLngLat(i.wrap()),g=(1<<u)*l.N,_=p.x*g,C=p.y*g,k=Math.floor(_/l.N),P=Math.floor(C/l.N);return{tileID:new l.O(u,0,u,k,P),mercatorX:_,mercatorY:C}}_allowMercatorOverflow(i,u){const p=i.x<this.painter.width/2;let g=l.bf(u);const _=this.painter.transform.center.lng;return p&&Math.sign(g)>0&&Math.sign(_)<0||!p&&Math.sign(g)<0&&Math.sign(_)>0?(g=360*Math.sign(_)+g,l.G(g)):u}}class Tv{constructor(i,u,p){this._context=i,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new xe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:i,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>i.id!==u),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const xi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Kc{constructor(i,u){this.painter=i,this.terrain=u,this.pool=new Tv(i.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(u)),this._coordsDescendingInv={};for(const p in i.sourceCaches){this._coordsDescendingInv[p]={};const g=i.sourceCaches[p].getVisibleCoordinates();for(const _ of g){const C=this.terrain.sourceCache.getTerrainCoords(_);for(const k in C)this._coordsDescendingInv[p][k]||(this._coordsDescendingInv[p][k]=[]),this._coordsDescendingInv[p][k].push(C[k])}}this._coordsDescendingInvStr={};for(const p of i._order){const g=i._layers[p],_=g.source;if(xi[g.type]&&!this._coordsDescendingInvStr[_]){this._coordsDescendingInvStr[_]={};for(const C in this._coordsDescendingInv[_])this._coordsDescendingInvStr[_][C]=this._coordsDescendingInv[_][C].map(k=>k.key).sort().join()}}for(const p of this._renderableTiles)for(const g in this._coordsDescendingInvStr){const _=this._coordsDescendingInvStr[g][p.tileID.key];_&&_!==p.rttCoords[g]&&(p.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const u=i.type,p=this.painter,g=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(xi[u]&&(this._prevType&&xi[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(i.id),!g))return!0;if(xi[this._prevType]||xi[u]&&g){this._prevType=u;const _=this._stacks.length-1,C=this._stacks[_]||[];for(const k of this._renderableTiles){if(this.pool.isFull()&&(xn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(k),k.rtt[_]){const D=this.pool.getObjectForId(k.rtt[_].id);if(D.stamp===k.rtt[_].stamp){this.pool.useObject(D);continue}}const P=this.pool.getOrCreateFreeObject();this.pool.useObject(P),this.pool.stampObject(P),k.rtt[_]={id:P.id,stamp:P.stamp},p.context.bindFramebuffer.set(P.fbo.framebuffer),p.context.clear({color:l.aT.transparent,stencil:0}),p.currentStencilSource=void 0;for(let D=0;D<C.length;D++){const B=p.style._layers[C[D]],F=B.source?this._coordsDescendingInv[B.source][k.tileID.key]:[k.tileID];p.context.viewport.set([0,0,P.fbo.width,P.fbo.height]),p._renderTileClippingMasks(B,F),p.renderLayer(p,p.style.sourceCaches[B.source],B,F),B.source&&(k.rttCoords[B.source]=this._coordsDescendingInvStr[B.source][k.tileID.key])}}return xn(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),xi[u]}return!1}}const Ut=b,nr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.c.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},Hl=y=>{y.touchstart=y.dragStart,y.touchmoveWindow=y.dragMove,y.touchend=y.dragEnd},Yd={showCompass:!0,showZoom:!0,visualizePitch:!1};class Qd{constructor(i,u,p=!1){this.mousedown=C=>{this.startMouse(l.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),w.mousePos(this.element,C)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,w.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const g=i.dragRotate._mouseRotate.getClickTolerance(),_=i.dragRotate._mousePitch.getClickTolerance();this.element=u,this.mouseRotate=Us({clickTolerance:g,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:k,bearingDegreesPerPixelMoved:P=.8})=>{const D=new $f;return new va({clickTolerance:k,move:(B,F)=>({bearingDelta:(F.x-B.x)*P}),moveStateManager:D,enable:C,assignEvents:Hl})})({clickTolerance:g,enable:!0}),this.map=i,p&&(this.mousePitch=_a({clickTolerance:_,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:k,pitchDegreesPerPixelMoved:P=-.5})=>{const D=new $f;return new va({clickTolerance:k,move:(B,F)=>({pitchDelta:(F.y-B.y)*P}),moveStateManager:D,enable:C,assignEvents:Hl})})({clickTolerance:_,enable:!0})),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchcancel",this.reset)}startMouse(i,u){this.mouseRotate.dragStart(i,u),this.mousePitch&&this.mousePitch.dragStart(i,u),w.disableDrag()}startTouch(i,u){this.touchRotate.dragStart(i,u),this.touchPitch&&this.touchPitch.dragStart(i,u),w.disableDrag()}moveMouse(i,u){const p=this.map,{bearingDelta:g}=this.mouseRotate.dragMove(i,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.mousePitch){const{pitchDelta:_}=this.mousePitch.dragMove(i,u)||{};_&&p.setPitch(p.getPitch()+_)}}moveTouch(i,u){const p=this.map,{bearingDelta:g}=this.touchRotate.dragMove(i,u)||{};if(g&&p.setBearing(p.getBearing()+g),this.touchPitch){const{pitchDelta:_}=this.touchPitch.dragMove(i,u)||{};_&&p.setPitch(p.getPitch()+_)}}off(){const i=this.element;w.removeEventListener(i,"mousedown",this.mousedown),w.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let zn;function eh(y,i,u){if(y=new l.L(y.lng,y.lat),i){const p=new l.L(y.lng-360,y.lat),g=new l.L(y.lng+360,y.lat),_=u.locationPoint(y).distSqr(i);u.locationPoint(p).distSqr(i)<_?y=p:u.locationPoint(g).distSqr(i)<_&&(y=g)}for(;Math.abs(y.lng-u.center.lng)>180;){const p=u.locationPoint(y);if(p.x>=0&&p.y>=0&&p.x<=u.width&&p.y<=u.height)break;y.lng>u.center.lng?y.lng-=360:y.lng+=360}return y}const fo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Wf(y,i,u){const p=y.classList;for(const g in fo)p.remove(`maplibregl-${u}-anchor-${g}`);p.add(`maplibregl-${u}-anchor-${i}`)}class cs extends l.E{constructor(i){if(super(),this._onKeyPress=u=>{const p=u.code,g=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,g=this._element;this._popup&&(p===g||g.contains(p))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!p)&&this._map.once("render",this._update),this._map.transform.renderWorldCopies&&(this._lngLat=eh(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${fo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${g}`),this._map.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const C=this._map.unproject(this._pos),k=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=C.distanceTo(this._lngLat)>20*k?"0.2":"1.0",this._opacityTimeout=null},100))},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=l.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const u=w.createNS("http://www.w3.org/2000/svg","svg"),p=41,g=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${g}px`),u.setAttributeNS(null,"viewBox",`0 0 ${g} ${p}`);const _=w.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const C=w.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const k=w.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");const P=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Pe of P){const Ne=w.createNS("http://www.w3.org/2000/svg","ellipse");Ne.setAttributeNS(null,"opacity","0.04"),Ne.setAttributeNS(null,"cx","10.5"),Ne.setAttributeNS(null,"cy","5.80029008"),Ne.setAttributeNS(null,"rx",Pe.rx),Ne.setAttributeNS(null,"ry",Pe.ry),k.appendChild(Ne)}const D=w.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill",this._color);const B=w.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),D.appendChild(B);const F=w.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"opacity","0.25"),F.setAttributeNS(null,"fill","#000000");const X=w.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),F.appendChild(X);const ue=w.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ue.setAttributeNS(null,"fill","#FFFFFF");const ce=w.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pe=w.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#000000"),pe.setAttributeNS(null,"opacity","0.25"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962");const ae=w.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#FFFFFF"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962"),ce.appendChild(pe),ce.appendChild(ae),C.appendChild(k),C.appendChild(D),C.appendChild(F),C.appendChild(ue),C.appendChild(ce),u.appendChild(C),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(u),this._offset=l.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),Wf(this._element,this._anchor,"marker"),i&&i.className)for(const u of i.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=l.L.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const g=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}getOffset(){return this._offset}setOffset(i){return this._offset=l.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const bn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let gn=0,Ws=!1;const Wl={maxWidth:100,unit:"metric"};function Gl(y,i,u){const p=u&&u.maxWidth||100,g=y._container.clientHeight/2,_=y.unproject([0,g]),C=y.unproject([p,g]),k=_.distanceTo(C);if(u&&u.unit==="imperial"){const P=3.2808*k;P>5280?us(i,p,P/5280,y._getUIString("ScaleControl.Miles")):us(i,p,P,y._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?us(i,p,k/1852,y._getUIString("ScaleControl.NauticalMiles")):k>=1e3?us(i,p,k/1e3,y._getUIString("ScaleControl.Kilometers")):us(i,p,k,y._getUIString("ScaleControl.Meters"))}function us(y,i,u,p){const g=function(_){const C=Math.pow(10,`${Math.floor(_)}`.length-1);let k=_/C;return k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:function(P){const D=Math.pow(10,Math.ceil(-Math.log(P)/Math.LN10));return Math.round(P*D)/D}(k),C*k}(u);y.style.width=i*(g/u)+"px",y.innerHTML=`${g}&nbsp;${p}`}const th={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},rh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Gs(y){if(y){if(typeof y=="number"){const i=Math.round(Math.abs(y)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,y),"top-left":new l.P(i,i),"top-right":new l.P(-i,i),bottom:new l.P(0,-y),"bottom-left":new l.P(i,-i),"bottom-right":new l.P(-i,-i),left:new l.P(y,0),right:new l.P(-y,0)}}if(y instanceof l.P||Array.isArray(y)){const i=l.P.convert(y);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:l.P.convert(y.center||[0,0]),top:l.P.convert(y.top||[0,0]),"top-left":l.P.convert(y["top-left"]||[0,0]),"top-right":l.P.convert(y["top-right"]||[0,0]),bottom:l.P.convert(y.bottom||[0,0]),"bottom-left":l.P.convert(y["bottom-left"]||[0,0]),"bottom-right":l.P.convert(y["bottom-right"]||[0,0]),left:l.P.convert(y.left||[0,0]),right:l.P.convert(y.right||[0,0])}}return Gs(new l.P(0,0))}const nh={extend:(y,...i)=>l.e(y,...i),run(y){y()},logToElement(y,i=!1,u="log"){const p=window.document.getElementById(u);p&&(i&&(p.innerHTML=""),p.innerHTML+=`<br>${y}`)}},ih=b;class jr{static get version(){return ih}static get workerCount(){return Or.workerCount}static set workerCount(i){Or.workerCount=i}static get maxParallelImageRequests(){return l.c.MAX_PARALLEL_IMAGE_REQUESTS}static set maxParallelImageRequests(i){l.c.MAX_PARALLEL_IMAGE_REQUESTS=i}static get workerUrl(){return l.c.WORKER_URL}static set workerUrl(i){l.c.WORKER_URL=i}static addProtocol(i,u){l.c.REGISTERED_PROTOCOLS[i]=u}static removeProtocol(i){delete l.c.REGISTERED_PROTOCOLS[i]}}return jr.Map=class extends jf{constructor(y){if(l.bg.mark(l.bh.create),(y=l.e({},nr,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Hc(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies),{bearingSnap:y.bearingSnap}),this._cooperativeGesturesOnWheel=i=>{this._onCooperativeGesture(i,i[this._metaKey],1)},this._contextLost=i=>{i.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.k("webglcontextlost",{originalEvent:i}))},this._contextRestored=i=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:i}))},this._onMapScroll=i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._cooperativeGestures=y.cooperativeGestures,this._metaKey=navigator.platform.indexOf("Mac")===0?"metaKey":"ctrlKey",this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Zc,this._controls=[],this._mapId=l.a2(),this._locale=l.e({},Jd,y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this.transformCameraUpdate=y.transformCameraUpdate,this._imageQueueHandle=K.addThrottleControl(()=>this.isMoving()),this._requestManager=new L(y.transformRequest),typeof y.container=="string"){if(this._container=document.getElementById(y.container),!this._container)throw new Error(`Container '${y.container}' not found.`)}else{if(!(y.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let i=!1;const u=ls(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{i?u(p):i=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Xd(this,y),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=y.hash&&new Fl(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,l.e({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Qi({customAttribution:y.customAttribution})),y.maplibreLogo&&this.addControl(new an,y.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",i=>{this._update(i.dataType==="style"),this.fire(new l.k(`${i.dataType}data`,i))}),this.on("dataloading",i=>{this.fire(new l.k(`${i.dataType}dataloading`,i))}),this.on("dataabort",i=>{this.fire(new l.k("sourcedataabort",i))})}_getMapId(){return this._mapId}addControl(y,i){if(i===void 0&&(i=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=y.onAdd(this);this._controls.push(y);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(y){if(!y||!y.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(y);return i>-1&&this._controls.splice(i,1),y.onRemove(this),this}hasControl(y){return this._controls.indexOf(y)>-1}calculateCameraOptionsFromTo(y,i,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(y,i,u,p)}resize(y){var i;const u=this._containerDimensions(),p=u[0],g=u[1],_=this._getClampedPixelRatio(p,g);if(this._resizeCanvas(p,g,_),this.painter.resize(p,g,_),this.painter.overLimit()){const k=this.painter.context.gl;this._maxCanvasSize=[k.drawingBufferWidth,k.drawingBufferHeight];const P=this._getClampedPixelRatio(p,g);this._resizeCanvas(p,g,P),this.painter.resize(p,g,P)}this.transform.resize(p,g),(i=this._requestedCameraState)===null||i===void 0||i.resize(p,g);const C=!this._moving;return C&&(this.stop(),this.fire(new l.k("movestart",y)).fire(new l.k("move",y))),this.fire(new l.k("resize",y)),C&&this.fire(new l.k("moveend",y)),this}_getClampedPixelRatio(y,i){const{0:u,1:p}=this._maxCanvasSize,g=this.getPixelRatio(),_=y*g,C=i*g;return Math.min(_>u?u/_:1,C>p?p/C:1)*g}getPixelRatio(){var y;return(y=this._overridePixelRatio)!==null&&y!==void 0?y:devicePixelRatio}setPixelRatio(y){this._overridePixelRatio=y,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(y){return this.transform.setMaxBounds(Pt.convert(y)),this._update()}setMinZoom(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(y){if((y=y??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(y){return this.transform.renderWorldCopies=y,this._update()}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(y){return this._cooperativeGestures=y,this._cooperativeGestures?this._setupCooperativeGestures():this._destroyCooperativeGestures(),this}project(y){return this.transform.locationPoint(l.L.convert(y),this.style&&this.terrain)}unproject(y){return this.transform.pointLocation(l.P.convert(y),this.terrain)}isMoving(){var y;return this._moving||((y=this.handlers)===null||y===void 0?void 0:y.isMoving())}isZooming(){var y;return this._zooming||((y=this.handlers)===null||y===void 0?void 0:y.isZooming())}isRotating(){var y;return this._rotating||((y=this.handlers)===null||y===void 0?void 0:y.isRotating())}_createDelegatedListener(y,i,u){if(y==="mouseenter"||y==="mouseover"){let p=!1;return{layer:i,listener:u,delegates:{mousemove:_=>{const C=this.getLayer(i)?this.queryRenderedFeatures(_.point,{layers:[i]}):[];C.length?p||(p=!0,u.call(this,new Yi(y,this,_.originalEvent,{features:C}))):p=!1},mouseout:()=>{p=!1}}}}if(y==="mouseleave"||y==="mouseout"){let p=!1;return{layer:i,listener:u,delegates:{mousemove:C=>{(this.getLayer(i)?this.queryRenderedFeatures(C.point,{layers:[i]}):[]).length?p=!0:p&&(p=!1,u.call(this,new Yi(y,this,C.originalEvent)))},mouseout:C=>{p&&(p=!1,u.call(this,new Yi(y,this,C.originalEvent)))}}}}{const p=g=>{const _=this.getLayer(i)?this.queryRenderedFeatures(g.point,{layers:[i]}):[];_.length&&(g.features=_,u.call(this,g),delete g.features)};return{layer:i,listener:u,delegates:{[y]:p}}}}on(y,i,u){if(u===void 0)return super.on(y,i);const p=this._createDelegatedListener(y,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(p);for(const g in p.delegates)this.on(g,p.delegates[g]);return this}once(y,i,u){if(u===void 0)return super.once(y,i);const p=this._createDelegatedListener(y,i,u);for(const g in p.delegates)this.once(g,p.delegates[g]);return this}off(y,i,u){return u===void 0?super.off(y,i):(this._delegatedListeners&&this._delegatedListeners[y]&&(p=>{const g=this._delegatedListeners[y];for(let _=0;_<g.length;_++){const C=g[_];if(C.layer===i&&C.listener===u){for(const k in C.delegates)this.off(k,C.delegates[k]);return g.splice(_,1),this}}})(),this)}queryRenderedFeatures(y,i){if(!this.style)return[];let u;const p=y instanceof l.P||Array.isArray(y),g=p?y:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:y)||{},g instanceof l.P||typeof g[0]=="number")u=[l.P.convert(g)];else{const _=l.P.convert(g[0]),C=l.P.convert(g[1]);u=[_,new l.P(C.x,_.y),C,new l.P(_.x,C.y),_]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(y,i){return this.style.querySourceFeatures(y,i)}setStyle(y,i){return(i=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(y,i))}setTransformRequest(y){return this._requestManager.setTransformRequest(y),this}_getUIString(y){const i=this._locale[y];if(i==null)throw new Error(`Missing UI string '${y}'`);return i}_updateStyle(y,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(y,i));const u=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!y)),y?(this.style=new fr(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y,i,u):this.style.loadJSON(y,i,u),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new fr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(y,i){if(typeof y=="string"){const u=this._requestManager.transformRequest(y,O.Style);l.f(u,(p,g)=>{p?this.fire(new l.j(p)):g&&this._updateDiff(g,i)})}else typeof y=="object"&&this._updateDiff(y,i)}_updateDiff(y,i){try{this.style.setState(y,i)&&this._update(!0)}catch(u){l.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(y,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(y,i){return this._lazyInitEmptyStyle(),this.style.addSource(y,i),this._update(!0)}isSourceLoaded(y){const i=this.style&&this.style.sourceCaches[y];if(i!==void 0)return i.loaded();this.fire(new l.j(new Error(`There is no source with ID '${y}'`)))}setTerrain(y){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),y){const i=this.style.sourceCaches[y.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${y.source}`);for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===y.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Hf(this.painter,i,y),this.painter.renderToTexture=new Kc(this.painter,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=u=>{u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==y.source||this._elevationFreeze||(this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:y})),this}getTerrain(){var y,i;return(i=(y=this.terrain)===null||y===void 0?void 0:y.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const y=this.style&&this.style.sourceCaches;for(const i in y){const u=y[i]._tiles;for(const p in u){const g=u[p];if(g.state!=="loaded"&&g.state!=="errored")return!1}}return!0}addSourceType(y,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,i,u)}removeSource(y){return this.style.removeSource(y),this._update(!0)}getSource(y){return this.style.getSource(y)}addImage(y,i,u={}){const{pixelRatio:p=1,sdf:g=!1,stretchX:_,stretchY:C,content:k}=u;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||l.a(i))){if(i.width===void 0||i.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:P,height:D,data:B}=i,F=i;return this.style.addImage(y,{data:new l.R({width:P,height:D},new Uint8Array(B)),pixelRatio:p,stretchX:_,stretchY:C,content:k,sdf:g,version:0,userImage:F}),F.onAdd&&F.onAdd(this,y),this}}{const{width:P,height:D,data:B}=l.h.getImageData(i);this.style.addImage(y,{data:new l.R({width:P,height:D},B),pixelRatio:p,stretchX:_,stretchY:C,content:k,sdf:g,version:0})}}updateImage(y,i){const u=this.style.getImage(y);if(!u)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||l.a(i)?l.h.getImageData(i):i,{width:g,height:_,data:C}=p;if(g===void 0||_===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==u.data.width||_!==u.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const k=!(i instanceof HTMLImageElement||l.a(i));return u.data.replace(C,k),this.style.updateImage(y,u),this}getImage(y){return this.style.getImage(y)}hasImage(y){return y?!!this.style.getImage(y):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(y){this.style.removeImage(y)}loadImage(y,i){K.getImage(this._requestManager.transformRequest(y,O.Image),i)}listImages(){return this.style.listImages()}addLayer(y,i){return this._lazyInitEmptyStyle(),this.style.addLayer(y,i),this._update(!0)}moveLayer(y,i){return this.style.moveLayer(y,i),this._update(!0)}removeLayer(y){return this.style.removeLayer(y),this._update(!0)}getLayer(y){return this.style.getLayer(y)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(y,i,u){return this.style.setLayerZoomRange(y,i,u),this._update(!0)}setFilter(y,i,u={}){return this.style.setFilter(y,i,u),this._update(!0)}getFilter(y){return this.style.getFilter(y)}setPaintProperty(y,i,u,p={}){return this.style.setPaintProperty(y,i,u,p),this._update(!0)}getPaintProperty(y,i){return this.style.getPaintProperty(y,i)}setLayoutProperty(y,i,u,p={}){return this.style.setLayoutProperty(y,i,u,p),this._update(!0)}getLayoutProperty(y,i){return this.style.getLayoutProperty(y,i)}setGlyphs(y,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(y,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(y,i,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(y,i,u,p=>{p||this._update(!0)}),this}removeSprite(y){return this._lazyInitEmptyStyle(),this.style.removeSprite(y),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(y,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(y,i,u=>{u||this._update(!0)}),this}setLight(y,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(y,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(y,i){return this.style.setFeatureState(y,i),this._update()}removeFeatureState(y,i){return this.style.removeFeatureState(y,i),this._update()}getFeatureState(y){return this.style.getFeatureState(y)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let y=0,i=0;return this._container&&(y=this._container.clientWidth||400,i=this._container.clientHeight||300),[y,i]}_setupContainer(){const y=this._container;y.classList.add("maplibregl-map");const i=this._canvasContainer=w.create("div","maplibregl-canvas-container",y);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const g=this._controlContainer=w.create("div","maplibregl-control-container",y),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{_[C]=w.create("div",`maplibregl-ctrl-${C} `,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",this._container);let y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(y=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${y}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,this._cooperativeGesturesScreen.setAttribute("aria-hidden","true"),this._canvasContainer.addEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.add("maplibregl-cooperative-gestures")}_destroyCooperativeGestures(){w.remove(this._cooperativeGesturesScreen),this._canvasContainer.removeEventListener("wheel",this._cooperativeGesturesOnWheel,!1),this._canvasContainer.classList.remove("maplibregl-cooperative-gestures")}_resizeCanvas(y,i,u){this._canvas.width=Math.floor(u*y),this._canvas.height=Math.floor(u*i),this._canvas.style.width=`${y}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const y={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:y},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});const u=this._canvas.getContext("webgl2",y)||this._canvas.getContext("webgl",y);if(!u){const p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new ss(u,this.transform),T.testSupport(u)}_onCooperativeGesture(y,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(y){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(y){return this._update(),this._renderTaskQueue.add(y)}_cancelRenderFrame(y){this._renderTaskQueue.remove(y)}_render(y){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),this._removed)return;let u=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const g=this.transform.zoom,_=l.h.now();this.style.zoomHistory.update(g,_);const C=new l.a8(g,{now:_,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),k=C.crossFadingFactor();k===1&&k===this._crossFadingFactor||(u=!0,this._crossFadingFactor=k),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform._minEleveationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform._minEleveationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bg.mark(l.bh.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||u)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,l.bg.mark(l.bh.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){var y;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),K.removeThrottleControl(this._imageQueueHandle),(y=this._resizeObserver)===null||y===void 0||y.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&this._destroyCooperativeGestures(),this._container.classList.remove("maplibregl-map"),l.bg.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.h.frame(y=>{l.bg.frame(y),this._frame=null,this._render(y)}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())}get showPadding(){return!!this._showPadding}set showPadding(y){this._showPadding!==y&&(this._showPadding=y,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())}get repaint(){return!!this._repaint}set repaint(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(y){this._vertices=y,this._update()}get version(){return Ut}getCameraTargetElevation(){return this.transform.elevation}},jr.NavigationControl=class{constructor(y){this._updateZoomButtons=()=>{const i=this._map.getZoom(),u=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);i.title=p,i.setAttribute("aria-label",p)},this.options=l.e({},Yd,y),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(y){return this._map=y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Qd(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(y,i){const u=w.create("button",y,this._container);return u.type="button",u.addEventListener("click",i),u}},jr.GeolocateControl=class extends l.E{constructor(y){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const u=new l.L(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,g=this._map.getBearing(),_=l.e({bearing:g},this.options.fitBoundsOptions),C=Pt.fromLngLat(u,p);this._map.fitBounds(C,_,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const u=new l.L(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Ws)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new cs({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new cs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")))})}},this.options=l.e({},bn,y)}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(i,u=!1){zn===void 0||u?window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{zn=p.state!=="denied",i(zn)}).catch(()=>{zn=!!window.navigator.geolocation,i(zn)}):(zn=!!window.navigator.geolocation,i(zn)):i(zn)}(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,gn=0,Ws=!1}_isOutOfMapMaxBounds(y){const i=this._map.getMaxBounds(),u=y.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const y=this._map.getBounds(),i=y.getSouthEast(),u=y.getNorthEast(),p=i.distanceTo(u),g=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${g}px`,this._circleElement.style.height=`${g}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":gn--,Ws=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let y;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),gn++,gn>1?(y={maximumAge:6e5,timeout:0},Ws=!0):(y=this.options.positionOptions,Ws=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,y)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},jr.AttributionControl=Qi,jr.LogoControl=an,jr.ScaleControl=class{constructor(y){this._onMove=()=>{Gl(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Gl(this._map,this._container,this.options)},this.options=l.e({},Wl,y)}getDefaultPosition(){return"bottom-left"}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},jr.FullscreenControl=class extends l.E{constructor(y={}){super(),this._onFullscreenChange=()=>{(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,y&&y.container&&(y.container instanceof HTMLElement?this._container=y.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(y){return this._map=y,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const y=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",y).setAttribute("aria-hidden","true"),y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",y),this._fullscreenButton.title=y}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._map._cooperativeGestures&&(this._prevCooperativeGestures=this._map._cooperativeGestures,this._map.setCooperativeGestures())):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGestures&&(this._map.setCooperativeGestures(this._prevCooperativeGestures),delete this._prevCooperativeGestures))}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},jr.TerrainControl=class{constructor(y){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))},this.options=y}onAdd(y){return this._map=y,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},jr.Popup=class extends l.E{constructor(y){super(),this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.k("close")),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=eh(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!i)return;const u=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);let p=this.options.anchor;const g=Gs(this.options.offset);if(!p){const C=this._container.offsetWidth,k=this._container.offsetHeight;let P;P=u.y+g.bottom.y<k?["top"]:u.y>this._map.transform.height-k?["bottom"]:[],u.x<C/2?P.push("left"):u.x>this._map.transform.width-C/2&&P.push("right"),p=P.length===0?"bottom":P.join("-")}const _=u.add(g[p]).round();w.setTransform(this._container,`${fo[p]} translate(${_.x}px,${_.y}px)`),Wf(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(th),y)}addTo(y){return this._map&&this.remove(),this._map=y,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(y){return this._lngLat=l.L.convert(y),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(y){return this.setDOMContent(document.createTextNode(y))}setHTML(y){const i=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=y;p=u.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var y;return(y=this._container)===null||y===void 0?void 0:y.style.maxWidth}setMaxWidth(y){return this.options.maxWidth=y,this._update(),this}setDOMContent(y){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(y),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(y){this._container&&this._container.classList.add(y)}removeClassName(y){this._container&&this._container.classList.remove(y)}setOffset(y){return this.options.offset=y,this._update(),this}toggleClassName(y){if(this._container)return this._container.classList.toggle(y)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const y=this._container.querySelector(rh);y&&y.focus()}},jr.Marker=cs,jr.Style=fr,jr.LngLat=l.L,jr.LngLatBounds=Pt,jr.Point=l.P,jr.MercatorCoordinate=l.U,jr.Evented=l.E,jr.AJAXError=l.bi,jr.config=l.c,jr.CanvasSource=Kt,jr.GeoJSONSource=qe,jr.ImageSource=yt,jr.RasterDEMTileSource=lt,jr.RasterTileSource=er,jr.VectorTileSource=zt,jr.VideoSource=or,jr.setRTLTextPlugin=l.bj,jr.getRTLTextPluginStatus=l.bk,jr.prewarm=function(){cr().acquire(rr)},jr.clearPrewarmedResources=function(){const y=dr;y&&(y.isPreloaded()&&y.numActive()===1?(y.release(rr),dr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},nh.extend(jr,{isSafari:l.ac,getPerformanceMetrics:l.bg.getPerformanceMetrics}),jr});var m=c;return m})})(QE);var hv=QE.exports;const tz=Mx(hv),Q8=zx({__proto__:null,default:tz},[hv]);var Nu=Math.pow,qi=(e,t,r)=>new Promise((o,c)=>{var d=b=>{try{l(r.next(b))}catch(w){c(w)}},m=b=>{try{l(r.throw(b))}catch(w){c(w)}},l=b=>b.done?o(b.value):Promise.resolve(b.value).then(d,m);l((r=r.apply(e,t)).next())}),Lo=Uint8Array,cp=Uint16Array,eU=Int32Array,rz=new Lo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),nz=new Lo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tU=new Lo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iz=function(e,t){for(var r=new cp(31),o=0;o<31;++o)r[o]=t+=1<<e[o-1];for(var c=new eU(r[30]),o=1;o<30;++o)for(var d=r[o];d<r[o+1];++d)c[d]=d-r[o]<<5|o;return{b:r,r:c}},oz=iz(rz,2),az=oz.b,rU=oz.r;az[28]=258,rU[258]=28;var nU=iz(nz,0),iU=nU.b,sz=new cp(32768);for(Yr=0;Yr<32768;++Yr)_s=(Yr&43690)>>1|(Yr&21845)<<1,_s=(_s&52428)>>2|(_s&13107)<<2,_s=(_s&61680)>>4|(_s&3855)<<4,sz[Yr]=((_s&65280)>>8|(_s&255)<<8)>>1;var _s,Yr,up=function(e,t,r){for(var o=e.length,c=0,d=new cp(t);c<o;++c)e[c]&&++d[e[c]-1];var m=new cp(t);for(c=1;c<t;++c)m[c]=m[c-1]+d[c-1]<<1;var l;{l=new cp(1<<t);var b=15-t;for(c=0;c<o;++c)if(e[c])for(var w=c<<4|e[c],T=t-e[c],E=m[e[c]-1]++<<T,z=E|(1<<T)-1;E<=z;++E)l[sz[E]>>b]=w}return l},sf=new Lo(288);for(Yr=0;Yr<144;++Yr)sf[Yr]=8;var Yr;for(Yr=144;Yr<256;++Yr)sf[Yr]=9;var Yr;for(Yr=256;Yr<280;++Yr)sf[Yr]=7;var Yr;for(Yr=280;Yr<288;++Yr)sf[Yr]=8;var Yr,lz=new Lo(32);for(Yr=0;Yr<32;++Yr)lz[Yr]=5;var Yr,oU=up(sf,9),aU=up(lz,5),a_=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Ia=function(e,t,r){var o=t/8|0;return(e[o]|e[o+1]<<8)>>(t&7)&r},s_=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},sU=function(e){return(e+7)/8|0},lU=function(e,t,r){(r==null||r>e.length)&&(r=e.length);var o=new Lo(r-t);return o.set(e.subarray(t,r)),o},cU=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Mo=function(e,t,r){var o=new Error(t||cU[e]);if(o.code=e,Error.captureStackTrace&&Error.captureStackTrace(o,Mo),!r)throw o;return o},Sb=function(e,t,r,o){var c=e.length,d=0;if(!c||t.f&&!t.l)return r||new Lo(0);var m=!r||t.i!=2,l=t.i;r||(r=new Lo(c*3));var b=function(yt){var or=r.length;if(yt>or){var Kt=new Lo(Math.max(or*2,yt));Kt.set(r),r=Kt}},w=t.f||0,T=t.p||0,E=t.b||0,z=t.l,j=t.d,U=t.m,V=t.n,K=c*8;do{if(!z){w=Ia(e,T,1);var O=Ia(e,T+1,3);if(T+=3,O)if(O==1)z=oU,j=aU,U=9,V=5;else if(O==2){var J=Ia(e,T,31)+257,se=Ia(e,T+10,15)+4,ie=J+Ia(e,T+5,31)+1;T+=14;for(var Z=new Lo(ie),ke=new Lo(19),xe=0;xe<se;++xe)ke[tU[xe]]=Ia(e,T+xe*3,7);T+=se*3;for(var Ie=a_(ke),ze=(1<<Ie)-1,Le=up(ke,Ie),xe=0;xe<ie;){var Ye=Le[Ia(e,T,ze)];T+=Ye&15;var L=Ye>>4;if(L<16)Z[xe++]=L;else{var Ge=0,Te=0;for(L==16?(Te=3+Ia(e,T,3),T+=2,Ge=Z[xe-1]):L==17?(Te=3+Ia(e,T,7),T+=3):L==18&&(Te=11+Ia(e,T,127),T+=7);Te--;)Z[xe++]=Ge}}var Fe=Z.subarray(0,J),$e=Z.subarray(J);U=a_(Fe),V=a_($e),z=up(Fe,U),j=up($e,V)}else Mo(1);else{var L=sU(T)+4,R=e[L-4]|e[L-3]<<8,re=L+R;if(re>c){l&&Mo(0);break}m&&b(E+R),r.set(e.subarray(L,re),E),t.b=E+=R,t.p=T=re*8,t.f=w;continue}if(T>K){l&&Mo(0);break}}m&&b(E+131072);for(var Oe=(1<<U)-1,Qe=(1<<V)-1,at=T;;at=T){var Ge=z[s_(e,T)&Oe],ut=Ge>>4;if(T+=Ge&15,T>K){l&&Mo(0);break}if(Ge||Mo(2),ut<256)r[E++]=ut;else if(ut==256){at=T,z=null;break}else{var Pt=ut-254;if(ut>264){var xe=ut-257,wt=rz[xe];Pt=Ia(e,T,(1<<wt)-1)+az[xe],T+=wt}var zt=j[s_(e,T)&Qe],er=zt>>4;zt||Mo(3),T+=zt&15;var $e=iU[er];if(er>3){var wt=nz[er];$e+=s_(e,T)&(1<<wt)-1,T+=wt}if(T>K){l&&Mo(0);break}m&&b(E+131072);var lt=E+Pt;if(E<$e){var qe=d-$e,pt=Math.min($e,lt);for(qe+E<0&&Mo(3);E<pt;++E)r[E]=o[qe+E]}for(;E<lt;E+=4)r[E]=r[E-$e],r[E+1]=r[E+1-$e],r[E+2]=r[E+2-$e],r[E+3]=r[E+3-$e];E=lt}}t.l=z,t.p=at,t.b=E,t.f=w,z&&(w=1,t.m=U,t.d=j,t.n=V)}while(!w);return E==r.length?r:lU(r,0,E)},uU=new Lo(0),dU=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Mo(6,"invalid gzip data");var t=e[3],r=10;t&4&&(r+=(e[10]|e[11]<<8)+2);for(var o=(t>>3&1)+(t>>4&1);o>0;o-=!e[r++]);return r+(t&2)},hU=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},pU=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Mo(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Mo(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function fU(e,t){return Sb(e,{i:2},t,t)}function mU(e,t){var r=dU(e);return r+8>e.length&&Mo(6,"invalid gzip data"),Sb(e.subarray(r,-8),{i:2},new Lo(hU(e)),t)}function gU(e,t){return Sb(e.subarray(pU(e,t),-4),{i:2},t,t)}function Sx(e,t){return e[0]==31&&e[1]==139&&e[2]==8?mU(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?fU(e,t):gU(e,t)}var yU=typeof TextDecoder<"u"&&new TextDecoder,vU=0;try{yU.decode(uU,{stream:!0}),vU=1}catch{}var cz=(e,t)=>e*Nu(2,t),Nh=(e,t)=>Math.floor(e/Nu(2,t)),Zg=(e,t)=>cz(e.getUint16(t+1,!0),8)+e.getUint8(t),uz=(e,t)=>cz(e.getUint32(t+2,!0),16)+e.getUint16(t,!0),_U=(e,t,r,o,c)=>{if(e!==o.getUint8(c))return e-o.getUint8(c);const d=Zg(o,c+1);if(t!==d)return t-d;const m=Zg(o,c+4);return r!==m?r-m:0},xU=(e,t,r,o)=>{const c=dz(e,t|128,r,o);return c?{z:t,x:r,y:o,offset:c[0],length:c[1],isDir:!0}:null},QC=(e,t,r,o)=>{const c=dz(e,t,r,o);return c?{z:t,x:r,y:o,offset:c[0],length:c[1],isDir:!1}:null},dz=(e,t,r,o)=>{let c=0,d=e.byteLength/17-1;for(;c<=d;){const m=d+c>>1,l=_U(t,r,o,e,m*17);if(l>0)c=m+1;else if(l<0)d=m-1;else return[uz(e,m*17+7),e.getUint32(m*17+13,!0)]}return null},bU=(e,t)=>e.isDir&&!t.isDir?1:!e.isDir&&t.isDir?-1:e.z!==t.z?e.z-t.z:e.x!==t.x?e.x-t.x:e.y-t.y,hz=(e,t)=>{const r=e.getUint8(t*17);return{z:r&127,x:Zg(e,t*17+1),y:Zg(e,t*17+4),offset:uz(e,t*17+7),length:e.getUint32(t*17+13,!0),isDir:r>>7===1}},ek=e=>{const t=[],r=new DataView(e);for(let o=0;o<r.byteLength/17;o++)t.push(hz(r,o));return wU(t)},wU=e=>{e.sort(bU);const t=new ArrayBuffer(17*e.length),r=new Uint8Array(t);for(let o=0;o<e.length;o++){const c=e[o];let d=c.z;c.isDir&&(d=d|128),r[o*17]=d,r[o*17+1]=c.x&255,r[o*17+2]=c.x>>8&255,r[o*17+3]=c.x>>16&255,r[o*17+4]=c.y&255,r[o*17+5]=c.y>>8&255,r[o*17+6]=c.y>>16&255,r[o*17+7]=c.offset&255,r[o*17+8]=Nh(c.offset,8)&255,r[o*17+9]=Nh(c.offset,16)&255,r[o*17+10]=Nh(c.offset,24)&255,r[o*17+11]=Nh(c.offset,32)&255,r[o*17+12]=Nh(c.offset,48)&255,r[o*17+13]=c.length&255,r[o*17+14]=c.length>>8&255,r[o*17+15]=c.length>>16&255,r[o*17+16]=c.length>>24&255}return t},SU=(e,t)=>{if(e.byteLength<17)return null;const r=e.byteLength/17,o=hz(e,r-1);if(o.isDir){const c=o.z,d=t.z-c,m=Math.trunc(t.x/(1<<d)),l=Math.trunc(t.y/(1<<d));return{z:c,x:m,y:l}}return null};function CU(e){return qi(this,null,function*(){const t=yield e.getBytes(0,512e3),r=new DataView(t.data),o=r.getUint32(4,!0),c=r.getUint16(8,!0),d=new TextDecoder("utf-8"),m=JSON.parse(d.decode(new DataView(t.data,10,o)));let l=0;m.compression==="gzip"&&(l=2);let b=0;"minzoom"in m&&(b=+m.minzoom);let w=0;"maxzoom"in m&&(w=+m.maxzoom);let T=0,E=0,z=0,j=-180,U=-85,V=180,K=85;if(m.bounds){const L=m.bounds.split(",");j=+L[0],U=+L[1],V=+L[2],K=+L[3]}if(m.center){const L=m.center.split(",");T=+L[0],E=+L[1],z=+L[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+o,rootDirectoryLength:c*17,jsonMetadataOffset:10,jsonMetadataLength:o,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:l,tileType:1,minZoom:b,maxZoom:w,minLon:j,minLat:U,maxLon:V,maxLat:K,centerZoom:z,centerLon:T,centerLat:E,etag:t.etag}})}function kU(e,t,r,o,c,d,m){return qi(this,null,function*(){let l=yield r.getArrayBuffer(t,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(l=ek(l));const b=QC(new DataView(l),o,c,d);if(b){let E=(yield t.getBytes(b.offset,b.length,m)).data;const z=new DataView(E);return z.getUint8(0)===31&&z.getUint8(1)===139&&(E=Sx(new Uint8Array(E))),{data:E}}const w=SU(new DataView(l),{z:o,x:c,y:d});if(w){const T=xU(new DataView(l),w.z,w.x,w.y);if(T){let E=yield r.getArrayBuffer(t,T.offset,T.length,e);e.specVersion===1&&(E=ek(E));const z=QC(new DataView(E),o,c,d);if(z){let U=(yield t.getBytes(z.offset,z.length,m)).data;const V=new DataView(U);return V.getUint8(0)===31&&V.getUint8(1)===139&&(U=Sx(new Uint8Array(U))),{data:U}}}}})}var pz={getHeader:CU,getZxy:kU},IU=e=>(t,r)=>{if(r instanceof AbortController)return e(t,r);const o=new AbortController;return e(t,o).then(c=>r(void 0,c.data,c.cacheControl||"",c.expires||""),c=>r(c)).catch(c=>r(c)),{cancel:()=>o.abort()}},TU=class{constructor(){this.tilev4=(e,t)=>qi(this,null,function*(){if(e.type==="json"){const E=e.url.substr(10);let z=this.tiles.get(E);z||(z=new tk(E),this.tiles.set(E,z));const j=yield z.getHeader();return{data:{tiles:[`${e.url}/{z}/{x}/{y}`],minzoom:j.minZoom,maxzoom:j.maxZoom,bounds:[j.minLon,j.minLat,j.maxLon,j.maxLat]}}}const r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),o=e.url.match(r);if(!o)throw new Error("Invalid PMTiles protocol URL");const c=o[1];let d=this.tiles.get(c);d||(d=new tk(c),this.tiles.set(c,d));const m=o[2],l=o[3],b=o[4],w=yield d.getHeader(),T=yield d==null?void 0:d.getZxy(+m,+l,+b,t.signal);return T?{data:new Uint8Array(T.data),cacheControl:T.cacheControl,expires:T.expires}:w.tileType===1?{data:new Uint8Array}:{data:null}}),this.tile=IU(this.tilev4),this.tiles=new Map}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function uu(e,t){return(t>>>0)*4294967296+(e>>>0)}function PU(e,t){const r=t.buf;let o=r[t.pos++],c=(o&112)>>4;if(o<128||(o=r[t.pos++],c|=(o&127)<<3,o<128)||(o=r[t.pos++],c|=(o&127)<<10,o<128)||(o=r[t.pos++],c|=(o&127)<<17,o<128)||(o=r[t.pos++],c|=(o&127)<<24,o<128)||(o=r[t.pos++],c|=(o&1)<<31,o<128))return uu(e,c);throw new Error("Expected varint not more than 10 bytes")}function jh(e){const t=e.buf;let r=t[e.pos++],o=r&127;return r<128||(r=t[e.pos++],o|=(r&127)<<7,r<128)||(r=t[e.pos++],o|=(r&127)<<14,r<128)||(r=t[e.pos++],o|=(r&127)<<21,r<128)?o:(r=t[e.pos],o|=(r&15)<<28,PU(o,e))}function EU(e,t,r,o){if(o===0){r===1&&(t[0]=e-1-t[0],t[1]=e-1-t[1]);const c=t[0];t[0]=t[1],t[1]=c}}var zU=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function MU(e,t,r){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(t>Nu(2,e)-1||r>Nu(2,e)-1)throw Error("tile x/y outside zoom level bounds");const o=zU[e],c=Nu(2,e);let d=0,m=0,l=0;const b=[t,r];let w=c/2;for(;w>0;)d=(b[0]&w)>0?1:0,m=(b[1]&w)>0?1:0,l+=w*w*(3*d^m),EU(w,b,d,m),w=w/2;return o+l}function fz(e,t){return qi(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return Sx(new Uint8Array(e));const r=new Response(e).body;if(!r)throw Error("Failed to read response stream");const o=r.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(o).arrayBuffer()}throw Error("Compression method not supported")})}var DU=127;function AU(e,t){let r=0,o=e.length-1;for(;r<=o;){const c=o+r>>1,d=t-e[c].tileId;if(d>0)r=c+1;else if(d<0)o=c-1;else return e[c]}return o>=0&&(e[o].runLength===0||t-e[o].tileId<e[o].runLength)?e[o]:null}var RU=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,r,o){return qi(this,null,function*(){let c,d;r?d=r:(c=new AbortController,d=c.signal);const m=new Headers(this.customHeaders);m.set("range",`bytes=${e}-${e+t-1}`);let l;this.mustReload&&(l="reload");let b=yield fetch(this.url,{signal:d,cache:l,headers:m});if(e===0&&b.status===416){const z=b.headers.get("Content-Range");if(!z||!z.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const j=+z.substr(8);b=yield fetch(this.url,{signal:d,cache:"reload",headers:{range:`bytes=0-${j-1}`}})}let w=b.headers.get("Etag");if(w!=null&&w.startsWith("W/")&&(w=null),b.status===416||o&&w&&w!==o)throw this.mustReload=!0,new Cx(`Server returned non-matching ETag ${o} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(b.status>=300)throw Error(`Bad response code: ${b.status}`);const T=b.headers.get("Content-Length");if(b.status===200&&(!T||+T>t))throw c&&c.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield b.arrayBuffer(),etag:w||void 0,cacheControl:b.headers.get("Cache-Control")||void 0,expires:b.headers.get("Expires")||void 0}})}};function Ta(e,t){const r=e.getUint32(t+4,!0),o=e.getUint32(t+0,!0);return r*Nu(2,32)+o}function LU(e,t){const r=new DataView(e),o=r.getUint8(7);if(o>3)throw Error(`Archive is spec version ${o} but this library supports up to spec version 3`);return{specVersion:o,rootDirectoryOffset:Ta(r,8),rootDirectoryLength:Ta(r,16),jsonMetadataOffset:Ta(r,24),jsonMetadataLength:Ta(r,32),leafDirectoryOffset:Ta(r,40),leafDirectoryLength:Ta(r,48),tileDataOffset:Ta(r,56),tileDataLength:Ta(r,64),numAddressedTiles:Ta(r,72),numTileEntries:Ta(r,80),numTileContents:Ta(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:t}}function mz(e){const t={buf:new Uint8Array(e),pos:0},r=jh(t),o=[];let c=0;for(let d=0;d<r;d++){const m=jh(t);o.push({tileId:c+m,offset:0,length:0,runLength:1}),c+=m}for(let d=0;d<r;d++)o[d].runLength=jh(t);for(let d=0;d<r;d++)o[d].length=jh(t);for(let d=0;d<r;d++){const m=jh(t);m===0&&d>0?o[d].offset=o[d-1].offset+o[d-1].length:o[d].offset=m-1}return o}function $U(e){const t=new DataView(e);return t.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):t.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Cx=class extends Error{};function BU(e,t){return qi(this,null,function*(){const r=yield e.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if($U(r.data)<3)return[yield pz.getHeader(e)];const c=r.data.slice(0,DU),d=LU(c,r.etag),m=r.data.slice(d.rootDirectoryOffset,d.rootDirectoryOffset+d.rootDirectoryLength),l=`${e.getKey()}|${d.etag||""}|${d.rootDirectoryOffset}|${d.rootDirectoryLength}`,b=mz(yield t(m,d.internalCompression));return[d,[l,b.length,b]]})}function OU(e,t,r,o,c){return qi(this,null,function*(){const d=yield e.getBytes(r,o,void 0,c.etag),m=yield t(d.data,c.internalCompression),l=mz(m);if(l.length===0)throw new Error("Empty directory is invalid");return l})}var FU=class{constructor(e=100,t=!0,r=fz){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=r}getHeader(e){return qi(this,null,function*(){const t=e.getKey(),r=this.cache.get(t);if(r)return r.lastUsed=this.counter++,yield r.data;const o=new Promise((c,d)=>{BU(e,this.decompress).then(m=>{m[1]&&this.cache.set(m[1][0],{lastUsed:this.counter++,data:Promise.resolve(m[1][2])}),c(m[0]),this.prune()}).catch(m=>{d(m)})});return this.cache.set(t,{lastUsed:this.counter++,data:o}),o})}getDirectory(e,t,r,o){return qi(this,null,function*(){const c=`${e.getKey()}|${o.etag||""}|${t}|${r}`,d=this.cache.get(c);if(d)return d.lastUsed=this.counter++,yield d.data;const m=new Promise((l,b)=>{OU(e,this.decompress,t,r,o).then(w=>{l(w),this.prune()}).catch(w=>{b(w)})});return this.cache.set(c,{lastUsed:this.counter++,data:m}),m})}getArrayBuffer(e,t,r,o){return qi(this,null,function*(){const c=`${e.getKey()}|${o.etag||""}|${t}|${r}`,d=this.cache.get(c);if(d)return d.lastUsed=this.counter++,yield d.data;const m=new Promise((l,b)=>{e.getBytes(t,r,void 0,o.etag).then(w=>{l(w.data),this.cache.has(c),this.prune()}).catch(w=>{b(w)})});return this.cache.set(c,{lastUsed:this.counter++,data:m}),m})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((r,o)=>{r.lastUsed<e&&(e=r.lastUsed,t=o)}),t&&this.cache.delete(t)}}invalidate(e){return qi(this,null,function*(){const t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());const r=new Promise((o,c)=>{this.getHeader(e).then(d=>{o(),this.invalidations.delete(t)}).catch(d=>{c(d)})});this.invalidations.set(t,r)})}},tk=class{constructor(e,t,r){typeof e=="string"?this.source=new RU(e):this.source=e,r?this.decompress=r:this.decompress=fz,t?this.cache=t:this.cache=new FU}getHeader(){return qi(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,r,o){return qi(this,null,function*(){const c=MU(e,t,r),d=yield this.cache.getHeader(this.source);if(d.specVersion<3)return pz.getZxy(d,this.source,this.cache,e,t,r,o);if(e<d.minZoom||e>d.maxZoom)return;let m=d.rootDirectoryOffset,l=d.rootDirectoryLength;for(let b=0;b<=3;b++){const w=yield this.cache.getDirectory(this.source,m,l,d),T=AU(w,c);if(T){if(T.runLength>0){const E=yield this.source.getBytes(d.tileDataOffset+T.offset,T.length,o,d.etag);return{data:yield this.decompress(E.data,d.tileCompression),cacheControl:E.cacheControl,expires:E.expires}}m=d.leafDirectoryOffset+T.offset,l=T.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,r,o){return qi(this,null,function*(){try{return yield this.getZxyAttempt(e,t,r,o)}catch(c){if(c instanceof Cx)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,r,o);throw c}})}getMetadataAttempt(){return qi(this,null,function*(){const e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),r=yield this.decompress(t.data,e.internalCompression),o=new TextDecoder("utf-8");return JSON.parse(o.decode(r))})}getMetadata(){return qi(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof Cx)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}};let rk=!1;function Cb(){if(rk)return;const e=new TU;tz.addProtocol("pmtiles",e.tile),rk=!0}const gz=e=>{Cb();const{mode:t="light",children:r}=e,o=wb[t];return Y.jsxs(Y.Fragment,{children:[Y.jsx(Jr,{id:"background",type:"background",paint:{"background-color":o.water}}),Y.jsxs(gd,{id:"world",type:"vector",url:"pmtiles:///world.pmtiles",children:[Y.jsx(Jr,{"source-layer":"land",type:"fill",paint:{"fill-color":o.land}}),r,Y.jsx(Jr,{"source-layer":"states",type:"line",paint:{"line-color":o.stateBorder,"line-width":1,"line-opacity":1,"line-dasharray":[2,2]}}),Y.jsx(Jr,{"source-layer":"countries",type:"line",paint:{"line-color":o.countryBorder,"line-width":1,"line-opacity":1}}),Y.jsx(Jr,{"source-layer":"lakes",type:"fill",paint:{"fill-color":o.water}})]})]})},kx=e=>(Cb(),Y.jsx(gd,{type:"vector",url:`pmtiles:///${e.game}-contours.pmtiles`,children:Y.jsx(Jr,{"source-layer":"contours",type:"fill",layout:{"fill-sort-key":["get","elevation"],visibility:e.showContours?"visible":"none"},paint:{"fill-color":["interpolate",["linear"],["get","elevation"],-200,"#77c571",0,"#77c571",100,"#afd35f",150,"#ece75b",200,"#decb4c",250,"#d2b446",300,"#bf9c4a",400,"#ba8839",500,"#ac792d"]}})}));class yz extends Error{constructor(t){super("unreachable value "+JSON.stringify(t))}}class id{static checkArgument(t,r){if(!t)throw new Error(r)}static checkState(t,r){if(!t)throw new Error(r)}static checkExists(t,r){return Sn(t,r)}}var ti=(e=>(e[e.FuelStation=0]="FuelStation",e[e.Toll=1]="Toll",e[e.Parking=2]="Parking",e[e.RecruitmentAgency=3]="RecruitmentAgency",e[e.Service=4]="Service",e[e.TruckDealer=5]="TruckDealer",e[e.Port=6]="Port",e[e.Train=7]="Train",e[e.Viewpoint=8]="Viewpoint",e[e.PhotoSight=9]="PhotoSight",e[e.AgricultureCheck=10]="AgricultureCheck",e[e.BorderCheck=11]="BorderCheck",e[e.Garage=12]="Garage",e[e.WeighStation=13]="WeighStation",e[e.CityNames=14]="CityNames",e[e.Company=15]="Company",e[e.RoadNumber=16]="RoadNumber",e))(ti||{});const Bp=new Set(Array.from({length:17},(e,t)=>t)),Ix=e=>{const{game:t,visibleIcons:r=Bp,enableIconAutoHide:o=!0,mode:c="light"}=e,d=t==="ats"?ik(t,e.dlcs??$p):ik(t,e.dlcs??d8),m=wb[c];return Cb(),Y.jsxs(gd,{id:t,type:"vector",url:`pmtiles:///${t}.pmtiles`,children:[Y.jsx(Jr,{id:t+"mapAreas","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"mapArea"],d],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":c_(c),"fill-outline-color":["case",["==",["get","color"],qE.Road],m.mapAreaOutline,c_(c)]}}),Y.jsx(Jr,{id:t+"prefabs","source-layer":t,type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"prefab"],d],layout:{"fill-sort-key":["get","zIndex"]},paint:{"fill-color":c_(c)}}),Y.jsx(NU,{game:t,mode:c,color:m.footprint}),Y.jsx(Jr,{id:t+"hidden-roads","source-layer":t,type:"line",minzoom:9,filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","hidden"],!0],d],paint:{"line-color":m.hiddenRoad,"line-width":1,"line-opacity":.7}}),Y.jsx(Jr,{id:t+"visible-roads-case","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],d],layout:ok,paint:{"line-color":WU(c),"line-gap-width":ak,"line-width":["interpolate",["exponential",1.5],["zoom"],10,1,14,2,16,3]}}),Y.jsx(Jr,{id:t+"visible-roads","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["!=",["get","roadType"],"train"],["==",["get","hidden"],!1],d],layout:ok,paint:{"line-color":HU(c),"line-width":ak}}),Y.jsx(Jr,{id:t+"ferries","source-layer":t,type:"line",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],paint:{"line-color":m.ferryLine,"line-width":1,"line-opacity":.8,"line-dasharray":[2,2]}}),Y.jsx(Jr,{id:t+"trains-a","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":m.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,-6]}}),Y.jsx(Jr,{id:t+"trains-b","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":m.trainLine,"line-width":2,"line-opacity":.8,"line-offset":["interpolate",["exponential",1.5],["zoom"],9,0,14,6]}}),Y.jsx(Jr,{id:t+"train-hatch","source-layer":t,type:"line",filter:["any",["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"road"],["==",["get","roadType"],"train"],["==",["get","hidden"],!1]]],paint:{"line-color":m.trainLine,"line-width":10,"line-opacity":.8,"line-dasharray":[.1,1]}}),Y.jsx(Jr,{id:t+"ferry-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"ferry"]],layout:{...rc,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":m.ferryHalo,"text-color":m.ferryLabel}}),Y.jsx(Jr,{id:t+"train-labels","source-layer":t,minzoom:7.5,type:"symbol",filter:["all",["==",["geometry-type"],"LineString"],["==",["get","type"],"train"]],layout:{...rc,"symbol-placement":"line-center","text-field":"{name}","text-size":12},paint:{"text-halo-width":2,"text-halo-color":m.trainHalo,"text-color":m.trainLabel}}),r.has(15)&&Y.jsx(Jr,{id:t+"company-icons","source-layer":t,type:"symbol",minzoom:o?8:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"company"],d],layout:du(o,1,1.25,3.5)}),t==="ets2"&&r.has(16)&&Y.jsx(Jr,{id:"euro-road-overlays","source-layer":t,minzoom:o?4.5:0,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["!",["in",["get","sprite"],["literal",nk]]]],layout:du(o,.4*1.25,.75*1.25,1.25*1.25)}),t==="ats"&&r.has(16)&&Y.jsx(Jr,{id:t+"road-interstate-overlays","source-layer":t,type:"symbol",filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","is",["get","sprite"]],0],d],layout:du(o,.4,.75,1.25)}),t==="ats"&&r.has(16)&&Y.jsx(Jr,{id:t+"road-us-route-overlays","source-layer":t,type:"symbol",minzoom:o?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],["==",["index-of","us",["get","sprite"]],0],d],layout:du(o,.4,.75,1.25)}),t==="ats"&&r.has(16)&&Y.jsx(Jr,{id:t+"road-state-route-overlays","source-layer":t,type:"symbol",minzoom:o?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],["==",["get","poiType"],"road"],d,["!",["any",["==",["index-of","is",["get","sprite"]],0],["==",["index-of","us",["get","sprite"]],0],["in",["get","sprite"],["literal",nk]]]]],layout:du(o,.4,.75,1.25)}),r.has(14)&&Y.jsx(Jr,{id:t+"city-labels-small","source-layer":t,type:"symbol",minzoom:o?6:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],[">",["get","scaleRank"],6],d],layout:{...rc,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Zh,"text-size":12,"icon-image":l_,"icon-allow-overlap":!o,"icon-size":.6},paint:m.baseTextPaint}),r.has(14)&&Y.jsx(Jr,{id:t+"city-labels-medium","source-layer":t,type:"symbol",minzoom:o?5:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],6],[">",["get","scaleRank"],3],d],layout:{...rc,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Zh,"text-size":13,"icon-image":l_,"icon-allow-overlap":!o,"icon-size":.6},paint:m.baseTextPaint}),r.has(14)&&Y.jsx(Jr,{id:t+"city-labels-big","source-layer":t,type:"symbol",minzoom:o?4:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"city"],["<=",["get","scaleRank"],3],d],layout:{...rc,"text-field":"{name}","text-allow-overlap":!o,"text-variable-anchor":Zh,"text-size":14,"icon-image":l_,"icon-allow-overlap":!o,"icon-size":.8},paint:m.baseTextPaint}),t==="ets2"&&r.has(14)&&Y.jsx(Jr,{id:t+"country-labels","source-layer":t,type:"symbol",minzoom:4,maxzoom:6.5,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"country"]],layout:{...rc,"text-font":["Klokantech Noto Sans Bold"],"text-field":"{name}","text-variable-anchor":Zh,"text-size":14},paint:m.baseTextPaint}),vz(r)&&Y.jsx(Jr,{id:t+"poi-icons","source-layer":t,type:"symbol",minzoom:o?7:0,filter:["all",["==",["geometry-type"],"Point"],["==",["get","type"],"poi"],VU(r),d],layout:du(o,.6,1.25,2.5,{vertical:2,horizontal:2})})]})},NU=({game:e,color:t,mode:r})=>Y.jsxs(gd,{id:e+"footprints",type:"vector",url:`pmtiles:///${e}-footprints.pmtiles`,children:[Y.jsx(Jr,{id:e+"footprints","source-layer":"footprints",type:"fill",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-color":t,"fill-opacity":["step",["zoom"],1,9,.8]}}),Y.jsx(Jr,{id:e+"extrusions",minzoom:9,"source-layer":"footprints",type:"fill-extrusion",filter:["all",["==",["geometry-type"],"Polygon"],["==",["get","type"],"footprint"]],paint:{"fill-extrusion-color":t,"fill-extrusion-height":["interpolate",["exponential",1.5],["zoom"],9,["*",10,["get","height"]],13,["*",20,["get","height"]]],"fill-extrusion-opacity":r==="light"?.33:.67}})]});function du(e,t,r,o,c={vertical:10,horizontal:30}){const d=["literal",[c.vertical,c.horizontal]];return{"icon-image":"{sprite}","icon-allow-overlap":!e,"icon-padding":d,"icon-size":["interpolate",["exponential",1.5],["zoom"],4,t,9,r,13,o]}}const l_=["step",["zoom"],["case",["==",["get","capital"],2],"dotdot","dot"],8,""],jU=[9,8,6,7,2,0,4,5,12,3,13,1,10,11],nk=["weigh_ico","toll_ico","agri_check","border_ico"];function vz(e){return jU.some(t=>e.has(t))}function VU(e){id.checkArgument(vz(e));const t=[];e.has(9)&&t.push("landmark"),e.has(8)&&t.push("viewpoint"),e.has(6)&&t.push("ferry"),e.has(7)&&t.push("train");const r=[];e.has(0)&&r.push("gas_ico"),e.has(4)&&r.push("service_ico"),e.has(13)&&r.push("weigh_station_ico"),e.has(5)&&r.push("dealer_ico"),e.has(12)&&r.push("garage_large_ico"),e.has(3)&&r.push("recruitment_ico"),e.has(2)&&r.push("parking_ico");const o=[];e.has(13)&&o.push("weigh_ico"),e.has(1)&&o.push("toll_ico"),e.has(10)&&o.push("agri_check"),e.has(11)&&o.push("border_ico");const c=t.length>0?["in",["get","poiType"],["literal",t]]:!1,d=r.length>0?["all",["==",["get","poiType"],"facility"],["in",["get","sprite"],["literal",r]]]:!1,m=o.length>0?["all",["==",["get","poiType"],"road"],["in",["get","sprite"],["literal",o]]]:!1;return["any",c,d,m]}function ik(e,t){if(e!=="ats")return["boolean",!0];const r=dv(t);return["in",["get","dlcGuard"],["literal",[...r]]]}const Zh=["step",["zoom"],["literal",["top","bottom","right","left"]],7,["literal",["center"]]],rc={"text-radial-offset":.5,"text-justify":"auto","text-font":["Klokantech Noto Sans Regular"]},ok={"line-cap":"round","line-join":"bevel"},ak=["interpolate",["exponential",1.5],["zoom"],3,.8,14,30,16,150],_z={light:{freeway:["#fde293","#f8c248"],divided:["#ffffff","#dddddd"],no_vehicles:["#aaaaaa","#888888"],local:["#f1f3f4","#dddddd"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]},dark:{freeway:["#95813e","#372f21"],divided:["#3c4043","#4c5043"],no_vehicles:["#606166","#888888"],local:["#606166","#333"],train:["#ff0000","#f8c248"],tram:["#00ff00","#f8c248"],unknown:["#f0f","#f0f"]}},UU={light:{0:"hsl(200, 8%, 92%)",1:"hsl(38, 59%, 76%)",2:"hsl(38, 64%, 58%)",3:"hsl(92, 31%, 70%)"},dark:{0:"hsl(200, 2%, 36%)",1:"hsl(38, 25%, 35%)",2:"hsl(38, 25%, 25%)",3:"hsl(143, 20%, 25%)"}},HU=e=>["match",["get","roadType"],...Object.entries(_z[e]).flatMap(([t,[r]])=>[t,r]),"#f0f"],WU=e=>["match",["get","roadType"],...Object.entries(_z[e]).flatMap(([t,[r,o]])=>[t,o]),"#b0b"],c_=e=>["match",["get","color"],...Object.entries(UU[e]).flatMap(([t,r])=>[Number(t),r]),"#b0b"],xz="https://raw.githubusercontent.com/nautofon/ats-towns/arkansas/all-towns.geojson",bz="/ets2-villages.geojson";var Ii=(e=>(e.AR="AR",e.AZ="AZ",e.CA="CA",e.CO="CO",e.ID="ID",e.KS="KS",e.MT="MT",e.NE="NE",e.NM="NM",e.NV="NV",e.OK="OK",e.OR="OR",e.TX="TX",e.UT="UT",e.WA="WA",e.WY="WY",e))(Ii||{});const GU={AR:void 0,AZ:void 0,CA:void 0,CO:void 0,ID:void 0,KS:void 0,MT:void 0,NE:void 0,NM:void 0,NV:void 0,OK:void 0,OR:void 0,TX:void 0,UT:void 0,WA:void 0,WY:void 0},qU=new Set(Object.keys(GU)),Tx=e=>{const{game:t,enableAutoHide:r=!0,mode:o="light"}=e,c=t==="ats"?xz:bz,d=t==="ats"?["in",["get","state"],["literal",[...e.enabledStates??qU]]]:["boolean",!0],m=wb[o];return Y.jsx(gd,{id:`${t}-scenery-towns`,type:"geojson",data:c,children:Y.jsx(Jr,{id:`${t}-scenery-towns`,type:"symbol",minzoom:r?7:0,filter:d,layout:{...rc,"text-field":"{name}","text-allow-overlap":!r,"text-variable-anchor":Zh,"text-size":10.5},paint:m.baseTextPaint})})},wz={version:8,sprite:"https://truckermudgeon.github.io/sprites",glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf",sources:{},layers:[]};function ZU(e){return YL(e)}var lf={},Sz={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Sz);var Cz=Sz.exports;const KU=Rs(rA);var u_={exports:{}},sk;function XU(){return sk||(sk=1,function(e){function t(r,o){if(r==null)return{};var c={};for(var d in r)if({}.hasOwnProperty.call(r,d)){if(o.includes(d))continue;c[d]=r[d]}return c}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(u_)),u_.exports}const JU=Rs(cR),YU=Rs(uR),QU=Rs(gR),e9=Rs(mL),t9=Rs(rL),r9=Rs(lL);var yd=Cz;Object.defineProperty(lf,"__esModule",{value:!0});var n9=lf.default=g9;lf.shouldForwardProp=ag;lf.systemDefaultTheme=void 0;var Qo=yd(KU),Px=yd(XU()),lk=u9(JU),i9=YU;yd(QU);yd(e9);var o9=yd(t9),a9=yd(r9);const s9=["ownerState"],l9=["variants"],c9=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function kz(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(kz=function(o){return o?r:t})(e)}function u9(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=kz(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var m=c?Object.getOwnPropertyDescriptor(e,d):null;m&&(m.get||m.set)?Object.defineProperty(o,d,m):o[d]=e[d]}return o.default=e,r&&r.set(e,o),o}function d9(e){return Object.keys(e).length===0}function h9(e){return typeof e=="string"&&e.charCodeAt(0)>96}function ag(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const p9=lf.systemDefaultTheme=(0,o9.default)(),f9=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Om({defaultTheme:e,theme:t,themeId:r}){return d9(t)?e:t[r]||t}function m9(e){return e?(t,r)=>r[e]:null}function sg(e,t){let{ownerState:r}=t,o=(0,Px.default)(t,s9);const c=typeof e=="function"?e((0,Qo.default)({ownerState:r},o)):e;if(Array.isArray(c))return c.flatMap(d=>sg(d,(0,Qo.default)({ownerState:r},o)));if(c&&typeof c=="object"&&Array.isArray(c.variants)){const{variants:d=[]}=c;let l=(0,Px.default)(c,l9);return d.forEach(b=>{let w=!0;typeof b.props=="function"?w=b.props((0,Qo.default)({ownerState:r},o,r)):Object.keys(b.props).forEach(T=>{(r==null?void 0:r[T])!==b.props[T]&&o[T]!==b.props[T]&&(w=!1)}),w&&(Array.isArray(l)||(l=[l]),l.push(typeof b.style=="function"?b.style((0,Qo.default)({ownerState:r},o,r)):b.style))}),l}return c}function g9(e={}){const{themeId:t,defaultTheme:r=p9,rootShouldForwardProp:o=ag,slotShouldForwardProp:c=ag}=e,d=m=>(0,a9.default)((0,Qo.default)({},m,{theme:Om((0,Qo.default)({},m,{defaultTheme:r,themeId:t}))}));return d.__mui_systemSx=!0,(m,l={})=>{(0,lk.internal_processStyles)(m,J=>J.filter(se=>!(se!=null&&se.__mui_systemSx)));const{name:b,slot:w,skipVariantsResolver:T,skipSx:E,overridesResolver:z=m9(f9(w))}=l,j=(0,Px.default)(l,c9),U=T!==void 0?T:w&&w!=="Root"&&w!=="root"||!1,V=E||!1;let K,O=ag;w==="Root"||w==="root"?O=o:w?O=c:h9(m)&&(O=void 0);const L=(0,lk.default)(m,(0,Qo.default)({shouldForwardProp:O,label:K},j)),R=J=>typeof J=="function"&&J.__emotion_real!==J||(0,i9.isPlainObject)(J)?se=>sg(J,(0,Qo.default)({},se,{theme:Om({theme:se.theme,defaultTheme:r,themeId:t})})):J,re=(J,...se)=>{let ie=R(J);const Z=se?se.map(R):[];b&&z&&Z.push(Ie=>{const ze=Om((0,Qo.default)({},Ie,{defaultTheme:r,themeId:t}));if(!ze.components||!ze.components[b]||!ze.components[b].styleOverrides)return null;const Le=ze.components[b].styleOverrides,Ye={};return Object.entries(Le).forEach(([Ge,Te])=>{Ye[Ge]=sg(Te,(0,Qo.default)({},Ie,{theme:ze}))}),z(Ie,Ye)}),b&&!U&&Z.push(Ie=>{var ze;const Le=Om((0,Qo.default)({},Ie,{defaultTheme:r,themeId:t})),Ye=Le==null||(ze=Le.components)==null||(ze=ze[b])==null?void 0:ze.variants;return sg({variants:Ye},(0,Qo.default)({},Ie,{theme:Le}))}),V||Z.push(d);const ke=Z.length-se.length;if(Array.isArray(J)&&ke>0){const Ie=new Array(ke).fill("");ie=[...J,...Ie],ie.raw=[...J.raw,...Ie]}const xe=L(ie,...Z);return m.muiName&&(xe.muiName=m.muiName),xe};return L.withConfig&&(re.withConfig=L.withConfig),re}}function y9(e,t){return W({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Yn={};const v9=Rs(tA),_9=Rs(TL);var Iz=Cz;Object.defineProperty(Yn,"__esModule",{value:!0});Yn.alpha=zz;Yn.blend=D9;Yn.colorChannel=void 0;var x9=Yn.darken=Ib;Yn.decomposeColor=da;Yn.emphasize=Mz;var b9=Yn.getContrastRatio=T9;Yn.getLuminance=Kg;Yn.hexToRgb=Tz;Yn.hslToRgb=Ez;var w9=Yn.lighten=Tb;Yn.private_safeAlpha=P9;Yn.private_safeColorChannel=void 0;Yn.private_safeDarken=E9;Yn.private_safeEmphasize=M9;Yn.private_safeLighten=z9;Yn.recomposeColor=vd;Yn.rgbToHex=I9;var ck=Iz(v9),S9=Iz(_9);function kb(e,t=0,r=1){return(0,S9.default)(e,t,r)}function Tz(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,c)=>c<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function C9(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function da(e){if(e.type)return e;if(e.charAt(0)==="#")return da(Tz(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error((0,ck.default)(9,e));let o=e.substring(t+1,e.length-1),c;if(r==="color"){if(o=o.split(" "),c=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error((0,ck.default)(10,c))}else o=o.split(",");return o=o.map(d=>parseFloat(d)),{type:r,values:o,colorSpace:c}}const Pz=e=>{const t=da(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};Yn.colorChannel=Pz;const k9=(e,t)=>{try{return Pz(e)}catch{return e}};Yn.private_safeColorChannel=k9;function vd(e){const{type:t,colorSpace:r}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((c,d)=>d<3?parseInt(c,10):c):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${r} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function I9(e){if(e.indexOf("#")===0)return e;const{values:t}=da(e);return`#${t.map((r,o)=>C9(o===3?Math.round(255*r):r)).join("")}`}function Ez(e){e=da(e);const{values:t}=e,r=t[0],o=t[1]/100,c=t[2]/100,d=o*Math.min(c,1-c),m=(w,T=(w+r/30)%12)=>c-d*Math.max(Math.min(T-3,9-T,1),-1);let l="rgb";const b=[Math.round(m(0)*255),Math.round(m(8)*255),Math.round(m(4)*255)];return e.type==="hsla"&&(l+="a",b.push(t[3])),vd({type:l,values:b})}function Kg(e){e=da(e);let t=e.type==="hsl"||e.type==="hsla"?da(Ez(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function T9(e,t){const r=Kg(e),o=Kg(t);return(Math.max(r,o)+.05)/(Math.min(r,o)+.05)}function zz(e,t){return e=da(e),t=kb(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,vd(e)}function P9(e,t,r){try{return zz(e,t)}catch{return e}}function Ib(e,t){if(e=da(e),t=kb(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return vd(e)}function E9(e,t,r){try{return Ib(e,t)}catch{return e}}function Tb(e,t){if(e=da(e),t=kb(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return vd(e)}function z9(e,t,r){try{return Tb(e,t)}catch{return e}}function Mz(e,t=.15){return Kg(e)>.5?Ib(e,t):Tb(e,t)}function M9(e,t,r){try{return Mz(e,t)}catch{return e}}function D9(e,t,r,o=1){const c=(b,w)=>Math.round((b**(1/o)*(1-r)+w**(1/o)*r)**o),d=da(e),m=da(t),l=[c(d.values[0],m.values[0]),c(d.values[1],m.values[1]),c(d.values[2],m.values[2])];return vd({type:"rgb",values:l})}const Op={black:"#000",white:"#fff"},A9={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},hu={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},pu={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Vh={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},fu={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},mu={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},gu={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},R9=["mode","contrastThreshold","tonalOffset"],uk={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Op.white,default:Op.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},d_={text:{primary:Op.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Op.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function dk(e,t,r,o){const c=o.light||o,d=o.dark||o*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=w9(e.main,c):t==="dark"&&(e.dark=x9(e.main,d)))}function L9(e="light"){return e==="dark"?{main:fu[200],light:fu[50],dark:fu[400]}:{main:fu[700],light:fu[400],dark:fu[800]}}function $9(e="light"){return e==="dark"?{main:hu[200],light:hu[50],dark:hu[400]}:{main:hu[500],light:hu[300],dark:hu[700]}}function B9(e="light"){return e==="dark"?{main:pu[500],light:pu[300],dark:pu[700]}:{main:pu[700],light:pu[400],dark:pu[800]}}function O9(e="light"){return e==="dark"?{main:mu[400],light:mu[300],dark:mu[700]}:{main:mu[700],light:mu[500],dark:mu[900]}}function F9(e="light"){return e==="dark"?{main:gu[400],light:gu[300],dark:gu[700]}:{main:gu[800],light:gu[500],dark:gu[900]}}function N9(e="light"){return e==="dark"?{main:Vh[400],light:Vh[300],dark:Vh[700]}:{main:"#ed6c02",light:Vh[500],dark:Vh[900]}}function j9(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:o=.2}=e,c=Wt(e,R9),d=e.primary||L9(t),m=e.secondary||$9(t),l=e.error||B9(t),b=e.info||O9(t),w=e.success||F9(t),T=e.warning||N9(t);function E(V){return b9(V,d_.text.primary)>=r?d_.text.primary:uk.text.primary}const z=({color:V,name:K,mainShade:O=500,lightShade:L=300,darkShade:R=700})=>{if(V=W({},V),!V.main&&V[O]&&(V.main=V[O]),!V.hasOwnProperty("main"))throw new Error(Is(11,K?` (${K})`:"",O));if(typeof V.main!="string")throw new Error(Is(12,K?` (${K})`:"",JSON.stringify(V.main)));return dk(V,"light",L,o),dk(V,"dark",R,o),V.contrastText||(V.contrastText=E(V.main)),V},j={dark:d_,light:uk};return di(W({common:W({},Op),mode:t,primary:z({color:d,name:"primary"}),secondary:z({color:m,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:z({color:l,name:"error"}),warning:z({color:T,name:"warning"}),info:z({color:b,name:"info"}),success:z({color:w,name:"success"}),grey:A9,contrastThreshold:r,getContrastText:E,augmentColor:z,tonalOffset:o},j[t]),c)}const V9=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function U9(e){return Math.round(e*1e5)/1e5}const hk={textTransform:"uppercase"},pk='"Roboto", "Helvetica", "Arial", sans-serif';function H9(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:o=pk,fontSize:c=14,fontWeightLight:d=300,fontWeightRegular:m=400,fontWeightMedium:l=500,fontWeightBold:b=700,htmlFontSize:w=16,allVariants:T,pxToRem:E}=r,z=Wt(r,V9),j=c/14,U=E||(O=>`${O/w*j}rem`),V=(O,L,R,re,J)=>W({fontFamily:o,fontWeight:O,fontSize:U(L),lineHeight:R},o===pk?{letterSpacing:`${U9(re/L)}em`}:{},J,T),K={h1:V(d,96,1.167,-1.5),h2:V(d,60,1.2,-.5),h3:V(m,48,1.167,0),h4:V(m,34,1.235,.25),h5:V(m,24,1.334,0),h6:V(l,20,1.6,.15),subtitle1:V(m,16,1.75,.15),subtitle2:V(l,14,1.57,.1),body1:V(m,16,1.5,.15),body2:V(m,14,1.43,.15),button:V(l,14,1.75,.4,hk),caption:V(m,12,1.66,.4),overline:V(m,12,2.66,1,hk),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return di(W({htmlFontSize:w,pxToRem:U,fontFamily:o,fontSize:c,fontWeightLight:d,fontWeightRegular:m,fontWeightMedium:l,fontWeightBold:b},K),z,{clone:!1})}const W9=.2,G9=.14,q9=.12;function Pn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${W9})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${G9})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${q9})`].join(",")}const Z9=["none",Pn(0,2,1,-1,0,1,1,0,0,1,3,0),Pn(0,3,1,-2,0,2,2,0,0,1,5,0),Pn(0,3,3,-2,0,3,4,0,0,1,8,0),Pn(0,2,4,-1,0,4,5,0,0,1,10,0),Pn(0,3,5,-1,0,5,8,0,0,1,14,0),Pn(0,3,5,-1,0,6,10,0,0,1,18,0),Pn(0,4,5,-2,0,7,10,1,0,2,16,1),Pn(0,5,5,-3,0,8,10,1,0,3,14,2),Pn(0,5,6,-3,0,9,12,1,0,3,16,2),Pn(0,6,6,-3,0,10,14,1,0,4,18,3),Pn(0,6,7,-4,0,11,15,1,0,4,20,3),Pn(0,7,8,-4,0,12,17,2,0,5,22,4),Pn(0,7,8,-4,0,13,19,2,0,5,24,4),Pn(0,7,9,-4,0,14,21,2,0,5,26,4),Pn(0,8,9,-5,0,15,22,2,0,6,28,5),Pn(0,8,10,-5,0,16,24,2,0,6,30,5),Pn(0,8,11,-5,0,17,26,2,0,6,32,5),Pn(0,9,11,-5,0,18,28,2,0,7,34,6),Pn(0,9,12,-6,0,19,29,2,0,7,36,6),Pn(0,10,13,-6,0,20,31,3,0,8,38,7),Pn(0,10,13,-6,0,21,33,3,0,8,40,7),Pn(0,10,14,-6,0,22,35,3,0,8,42,7),Pn(0,11,14,-7,0,23,36,3,0,9,44,8),Pn(0,11,15,-7,0,24,38,3,0,9,46,8)],K9=["duration","easing","delay"],X9={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},J9={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function fk(e){return`${Math.round(e)}ms`}function Y9(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Q9(e){const t=W({},X9,e.easing),r=W({},J9,e.duration);return W({getAutoHeightDuration:Y9,create:(c=["all"],d={})=>{const{duration:m=r.standard,easing:l=t.easeInOut,delay:b=0}=d;return Wt(d,K9),(Array.isArray(c)?c:[c]).map(w=>`${w} ${typeof m=="string"?m:fk(m)} ${l} ${typeof b=="string"?b:fk(b)}`).join(",")}},e,{easing:t,duration:r})}const e7={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},t7=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function r7(e={},...t){const{mixins:r={},palette:o={},transitions:c={},typography:d={}}=e,m=Wt(e,t7);if(e.vars)throw new Error(Is(18));const l=j9(o),b=Up(e);let w=di(b,{mixins:y9(b.breakpoints,r),palette:l,shadows:Z9.slice(),typography:H9(l,d),transitions:Q9(c),zIndex:W({},e7)});return w=di(w,m),w=t.reduce((T,E)=>di(T,E),w),w.unstable_sxConfig=W({},sd,m==null?void 0:m.unstable_sxConfig),w.unstable_sx=function(E){return ld({sx:E,theme:this})},w}const n7=r7(),i7="$$material";function o7(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const a7=e=>o7(e)&&e!=="classes",s7=n9({themeId:i7,defaultTheme:n7,rootShouldForwardProp:a7});function l7(e){return vy("MuiSvgIcon",e)}vI("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const c7=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],u7=e=>{const{color:t,fontSize:r,classes:o}=e,c={root:["root",t!=="inherit"&&`color${bt(t)}`,`fontSize${bt(r)}`]};return Rr(c,l7,o)},d7=s7("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${bt(r.color)}`],t[`fontSize${bt(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,o,c,d,m,l,b,w,T,E,z,j,U;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(o=r.create)==null?void 0:o.call(r,"fill",{duration:(c=e.transitions)==null||(c=c.duration)==null?void 0:c.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(m=d.pxToRem)==null?void 0:m.call(d,20))||"1.25rem",medium:((l=e.typography)==null||(b=l.pxToRem)==null?void 0:b.call(l,24))||"1.5rem",large:((w=e.typography)==null||(T=w.pxToRem)==null?void 0:T.call(w,35))||"2.1875rem"}[t.fontSize],color:(E=(z=(e.vars||e).palette)==null||(z=z[t.color])==null?void 0:z.main)!=null?E:{action:(j=(e.vars||e).palette)==null||(j=j.action)==null?void 0:j.active,disabled:(U=(e.vars||e).palette)==null||(U=U.action)==null?void 0:U.disabled,inherit:void 0}[t.color]}}),Ex=A.forwardRef(function(t,r){const o=ZU({props:t,name:"MuiSvgIcon"}),{children:c,className:d,color:m="inherit",component:l="svg",fontSize:b="medium",htmlColor:w,inheritViewBox:T=!1,titleAccess:E,viewBox:z="0 0 24 24"}=o,j=Wt(o,c7),U=A.isValidElement(c)&&c.type==="svg",V=W({},o,{color:m,component:l,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:T,viewBox:z,hasSvgAsChild:U}),K={};T||(K.viewBox=z);const O=u7(V);return Y.jsxs(d7,W({as:l,className:oi(O.root,d),focusable:"false",color:w,"aria-hidden":E?void 0:!0,role:E?"img":void 0,ref:r},K,j,U&&c.props,{ownerState:V,children:[U?c.props.children:c,E?Y.jsx("title",{children:E}):null]}))});Ex.muiName="SvgIcon";function zl(e,t){function r(o,c){return Y.jsx(Ex,W({"data-testid":`${t}Icon`,ref:c},o,{children:e}))}return r.muiName=Ex.muiName,A.memo(A.forwardRef(r))}const h7=zl(Y.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness6"),p7=zl(Y.jsx("path",{d:"M10.85 12.65h2.3L12 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM14.3 16l-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9z"}),"BrightnessAuto"),f7=zl(Y.jsx("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"BrightnessHigh"),m7=zl(Y.jsx("path",{d:"M20 15.31 23.31 12 20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6"}),"BrightnessLow"),mk=zl(Y.jsx("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEvents"),g7=zl(Y.jsx("path",{d:"m16 5-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2"}),"IosShare"),y7=zl(Y.jsx("path",{d:"M19 5v14H5V5zm1.1-2H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z"}),"ListAlt"),h_=zl(Y.jsx("path",{d:"M15 11V5l-3-3-3 3v2H3v14h18V11zm-8 8H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm6 8h-2v-2h2zm0-4h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm6 12h-2v-2h2zm0-4h-2v-2h2z"}),"LocationCity"),Dz={[ti.FuelStation]:{iconName:"gas_ico",label:"Fuel station"},[ti.Toll]:{iconName:"toll_ico",label:"Toll gate"},[ti.Parking]:{iconName:"parking_ico",label:"Rest stop"},[ti.RecruitmentAgency]:{iconName:"recruitment_ico",label:"Recruitment agency"},[ti.Service]:{iconName:"service_ico",label:"Service"},[ti.TruckDealer]:{iconName:"dealer_ico",label:"Truck dealer"},[ti.Port]:{iconName:"port_overlay",label:"Port"},[ti.Train]:{iconName:"train_ico",label:"Train"},[ti.Viewpoint]:{iconName:"viewpoint",label:"Viewpoint"},[ti.PhotoSight]:{iconName:"photo_sight_captured",label:"Photo trophy"},[ti.AgricultureCheck]:{iconName:"agri_check",label:"Agricultural inspection"},[ti.BorderCheck]:{iconName:"border_ico",label:"Border inspection"},[ti.Garage]:{iconName:"garage_large_ico",label:"Garage"},[ti.WeighStation]:{iconName:"weigh_station_ico",label:"Weigh station"},[ti.CityNames]:{iconName:"city_names_ico",label:"City names"},[ti.Company]:{iconName:"companies_ico",label:"Companies"},[ti.RoadNumber]:{iconName:"road_numbers_ico",label:"Road numbers"}},gk=new Map(Object.entries(Dz).map(([e,t])=>[Number(e),t.label])),yk=new Map(Object.entries(c8).map(([e,t])=>[Number(e),t]));function Xg(e,t,r){return{selectedItems:e,onSelectAllToggle:o=>t(new Set(o?r:[])),onItemToggle:(o,c)=>{t(d=>{const m=new Set(d);return c?m.add(o):m.delete(o),m})}}}const Az=e=>{const t=A.useRef(null),[r,o]=A.useState(!1),[c,d]=A.useState(0);return $s(()=>({onAdd:()=>Sn(t.current),onRemove:()=>Sn(t.current).remove()}),{position:"bottom-left"}),Y.jsxs("div",{ref:t,className:"maplibregl-ctrl maplibregl-ctrl-group",children:[Y.jsx(iv,{title:"Map Options",sx:{minWidth:0,minHeight:0,borderRadius:0},onClick:()=>o(!0),children:Y.jsx(y7,{})}),Y.jsx(CE,{open:r,onClose:()=>o(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",justifyContent:"end"}}},children:Y.jsxs(TE,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,height:"80%",overflow:"auto"},children:[Y.jsx(_E,{children:"Map Options"}),Y.jsx(IE,{}),Y.jsx(gC,{onChange:(m,l)=>d(Number(l)),children:Y.jsxs(bj,{tabFlex:1,sx:{borderRadius:0},children:[Y.jsx(e_,{children:"Icons"}),Y.jsx(e_,{children:"ATS DLC"}),Y.jsx(e_,{children:"Advanced"})]})}),Y.jsx(vE,{sx:{overflowX:"hidden"},children:Y.jsxs(gC,{value:c,children:[Y.jsx(t_,{sx:{p:0},value:0,children:Y.jsx(vk,{items:gk,selectedItems:e.icons.selectedItems,onItemToggle:e.icons.onItemToggle,icon:m=>Y.jsx("img",{style:{marginLeft:-3},width:32,height:32,src:`map-icons/${Dz[m].iconName}.png`})})}),Y.jsx(t_,{sx:{p:0},value:1,children:Y.jsx(vk,{items:yk,selectedItems:e.atsDlcs.selectedItems,onItemToggle:e.atsDlcs.onItemToggle})}),Y.jsx(t_,{sx:{p:0},value:2,children:Y.jsx(b7,{showContours:e.advanced.showContours,onContoursToggle:e.advanced.onContoursToggle})})]})}),Y.jsx(mb,{}),c===0&&Y.jsx(v7,{enableAutoHiding:e.icons.enableAutoHiding,enableSelectAll:e.icons.selectedItems.size===gk.size,onAutoHidingToggle:e.icons.onAutoHidingToggle,onSelectAllToggle:e.icons.onSelectAllToggle}),c===1&&Y.jsx(x7,{enableSelectAll:e.atsDlcs.selectedItems.size===yk.size,onSelectAllToggle:e.atsDlcs.onSelectAllToggle})]})})]})},v7=A.memo(e=>Y.jsxs(nf,{direction:"row",justifyContent:"space-between",gap:1,mx:2,children:[Y.jsx(Lj,{enterDelay:500,title:"Enable to hide icons based on zoom and nearby icons. Disable to always show icons.",children:Y.jsx(td,{label:"Enable icon hiding",checked:e.enableAutoHiding,onChange:t=>{var r;return(r=e.onAutoHidingToggle)==null?void 0:r.call(e,t.target.checked)}})}),Y.jsx(td,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})]})),_7=e=>Y.jsx(Qu,{size:"lg",sx:{p:0,[`& .${hc.root}`]:{flexGrow:1,alignItems:"center",flexDirection:"row-reverse"}},children:[...e.items.entries()].map(([t,r])=>{var o;return Y.jsxs(Sl,{children:[(o=e.icon)==null?void 0:o.call(e,t),Y.jsx(td,{overlay:!0,label:r,checked:e.selectedItems.has(t),onChange:c=>e.onItemToggle(t,c.target.checked)})]},String(t))})}),vk=A.memo(_7),x7=A.memo(e=>Y.jsx(nf,{direction:"row",justifyContent:"end",gap:1,mx:2,children:Y.jsx(td,{sx:{flexDirection:"row-reverse",flexShrink:0},label:"Select all",checked:e.enableSelectAll,onChange:t=>{var r;return(r=e.onSelectAllToggle)==null?void 0:r.call(e,t.target.checked)}})})),b7=e=>Y.jsxs(nf,{mx:2,children:[Y.jsx(aa,{mb:2,level:"title-lg",children:"Experimental Features"}),Y.jsxs(E6,{children:[Y.jsx(td,{sx:{flexDirection:"row-reverse"},label:"Show elevation data",checked:e.showContours,onChange:t=>e.onContoursToggle(t.target.checked)}),Y.jsx(aa,{level:"body-xs",color:"warning",children:"Note: elevation data for points further away from roads is estimated and likely inaccurate."})]})]}),Rz=()=>{const e=A.useRef(null),{mode:t="light",setMode:r}=s1();return $s(()=>({onAdd:()=>Sn(e.current),onRemove:()=>Sn(e.current).remove()})),Y.jsx("div",{ref:e,className:"maplibregl-ctrl maplibregl-ctrl-group",children:Y.jsxs(j5,{children:[Y.jsx(DN,{slots:{root:iv},sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Set map theme",children:Y.jsx(h7,{})}),Y.jsxs(CN,{placement:"left",children:[Y.jsx(Sl,{sticky:!0,children:Y.jsx(aa,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:"Map theme"})}),Y.jsxs(Y0,{onClick:()=>r("light"),selected:t==="light",children:[Y.jsx(ig,{children:Y.jsx(f7,{})})," ","Light"]}),Y.jsxs(Y0,{onClick:()=>r("dark"),selected:t==="dark",children:[Y.jsx(ig,{children:Y.jsx(m7,{})})," ","Dark"]}),Y.jsxs(Y0,{onClick:()=>r("system"),selected:t==="system",children:[Y.jsx(ig,{children:Y.jsx(p7,{})})," ","Auto"]})]})]})})};function w7(e,t){return C7(e,t,(r,o,c,d)=>Math.sqrt(Math.pow(c-r,2)+Math.pow(d-o,2)))}function Lz(e){let t=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;for(const d of e)Array.isArray(d)?(t=Math.min(t,d[0]),o=Math.max(o,d[0]),r=Math.min(r,d[1]),c=Math.max(c,d[1])):(t=Math.min(t,d.x),o=Math.max(o,d.x),r=Math.min(r,d.y),c=Math.max(c,d.y));return[t,r,o,c]}function S7(e){const t=Math.PI*2;let r=e%t;return r=(r+t)%t,r<=Math.PI?r:r-t}function _k(e){return S7(e*Math.PI/180)}function C7(e,t,r){let o,c;Array.isArray(e)?(id.checkArgument(e.length>=2),o=e[0],c=e[1]):(o=e.x,c=e.y);let d,m;return Array.isArray(t)?(id.checkArgument(t.length>=2),d=t[0],m=t[1]):(d=t.x,m=t.y),r(o,c,d,m)}function k7(e,t,r){let o=r.get(e);return o==null&&(o=t,r.set(e,o)),o}const I7=e=>{const{map:t,selectDecorator:r,onSelect:o}=e,[c,d]=A.useState([]);A.useEffect(()=>{Promise.all([fetch("ats-achievements.json").then(b=>b.json()),fetch("ats-achievements.geojson").then(b=>b.json())]).then(([b,w])=>{const T=new Map;for(const z of w.features)k7(z.properties.name,[],T).push({coordinates:z.geometry.coordinates,dlcGuard:z.properties.dlcGuard});const E=new Set(w.features.map(z=>z.properties.name));d([...b.data.filter(z=>E.has(z.id)).map(z=>({...z,label:z.title,value:z.id,map:"usa",features:Sn(T.get(z.id))})).sort((z,j)=>z.label.localeCompare(j.label))])},()=>console.error("could not load achievements json."))},[]);const m=c.filter(b=>{const w=b.map===t;if(t==="europe")return w;const T=dv(e.visibleStateDlcs);return w&&b.features.some(E=>T.has(E.dlcGuard))}),l=lb({stringify:b=>[b.label,b.desc].join(" ")});return Y.jsx(Vg,{onChange:(b,w)=>o(w),placeholder:"Search achievements...",options:m,filterOptions:l,blurOnSelect:!0,autoComplete:!0,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:r,renderOption:(b,w)=>Y.jsxs(NF,{...b,children:[Y.jsx(ig,{sx:{border:"2px solid var(--joy-palette-neutral-outlinedBorder)",borderRadius:6,overflow:"hidden",minWidth:"fit-content",mr:.5},children:Y.jsx("img",{loading:"lazy",width:"48",height:"48",src:w.imgUrl,alt:""})}),Y.jsxs(gN,{children:[Y.jsx(aa,{level:"title-md",children:w.label}),Y.jsx(aa,{level:"body-xs",children:w.desc})]})]})},t)},T7=e=>{const{map:t,selectDecorator:r,onSelect:o}=e,[c,d]=A.useState([]);A.useEffect(()=>{Promise.all([fetch("cities.geojson").then(b=>b.json()),fetch(xz).then(b=>b.json()),fetch(bz).then(b=>b.json())]).then(([b,w,T])=>{d(E7(b,w,T))},()=>console.error("could not load cities/towns geojson."))},[]);const m=c.filter(b=>{const w=b.map===t;return t==="europe"?w:w&&e.visibleStates.has(b.stateCode)}),l=lb({stringify:b=>[b.state,b.label].join(" ")});return Y.jsx(Vg,{onChange:(b,w)=>w&&o(w),placeholder:"Search cities...",options:m,filterOptions:l,groupBy:b=>b.state,blurOnSelect:!0,autoComplete:!0,renderGroup:P7,sx:{paddingInlineStart:0,flexBasis:"28em"},startDecorator:r},t)};function P7(e){return Y.jsxs(A.Fragment,{children:[Y.jsx(aa,{m:1,level:"body-xs",textTransform:"uppercase",fontWeight:"lg",children:e.group}),Y.jsx(Qu,{children:e.children}),Y.jsx(kE,{})]},e.key)}function E7(e,t,r){const o=[],c=new Map;for(const d of e.features)if(d.properties.type==="city")o.push(d);else if(d.properties.type==="country")c.set(d.properties.code,d.properties.name);else throw new Error;for(const d of t.features)o.push({type:"Feature",geometry:d.geometry,properties:{type:"city",map:"usa",countryCode:d.properties.state,name:d.properties.name}});for(const d of r.features)o.push({type:"Feature",geometry:d.geometry,properties:{type:"city",map:"europe",countryCode:d.properties.state,name:d.properties.name}});return o.map(({properties:d,geometry:m})=>({map:d.map,state:Sn(c.get(d.countryCode)),stateCode:d.countryCode,label:d.name,value:m.coordinates})).sort((d,m)=>d.state!==m.state?d.state.localeCompare(m.state):d.label.localeCompare(m.label))}const rl=[{label:"ATS",value:{map:"usa",search:"cities"}},{label:"ATS",value:{map:"usa",search:"achievements"}},{label:"ETS2",value:{map:"europe",search:"cities"}},{label:"ETS2",value:{map:"europe",search:"achievements"}}],p_=(e,t)=>id.checkExists(rl.find(r=>r.value.map===e&&r.value.search===t)),xk=({selected:e,onSelect:t})=>(console.log("rendering search select component",e),Y.jsxs(sj,{sx:{paddingBlock:0,minWidth:"fit-content"},variant:"plain",size:"sm",slotProps:{listbox:{placement:"bottom-start"}},value:e,onChange:(r,o)=>{r&&t(Sn(rl.find(c=>c.value===o)))},renderValue:r=>{if(r)return Y.jsxs(nf,{direction:"row",gap:1,sx:{alignItems:"center"},children:[Y.jsx(aa,{level:"body-xs",fontWeight:"lg",children:r.value.map==="usa"?"ATS":"ETS2"}),r.value.search==="cities"?Y.jsx(h_,{}):Y.jsx(mk,{})]})},children:[Y.jsxs(Qu,{children:[Y.jsx(Sl,{children:Y.jsx(aa,{level:"body-xs",fontWeight:"lg",children:"ATS"})}),Y.jsxs(Q0,{value:rl[0].value,sx:{px:"1em",textTransform:"capitalize"},children:[Y.jsx(h_,{}),rl[0].value.search]}),Y.jsxs(Q0,{value:rl[1].value,sx:{px:"1em",textTransform:"capitalize"},children:[Y.jsx(mk,{}),rl[1].value.search]})]}),Y.jsxs(Qu,{children:[Y.jsx(Sl,{children:Y.jsx(aa,{level:"body-xs",fontWeight:"lg",children:"ETS2"})}),Y.jsxs(Q0,{value:rl[2].value,sx:{px:"1em",textTransform:"capitalize"},children:[Y.jsx(h_,{}),rl[2].value.search]})]})]})),lg={usa:{longitude:-108,latitude:39},europe:{longitude:12,latitude:51}},z7=e=>{const t=A.useRef(null);$s(()=>({onAdd:()=>Sn(t.current),onRemove:()=>Sn(t.current).remove()}),{position:"top-left"});const{current:r}=bb(),[o,c]=A.useState(p_(localStorage.getItem("tm-map")==="europe"?"europe":"usa",localStorage.getItem("tm-search")==="achievements"?"achievements":"cities")),d=jm.useCallback(z=>{if(z==null||(c(z),localStorage.setItem("tm-map",z.value.map),localStorage.setItem("tm-search",z.value.search),!r||z.value.map===o.value.map))return;const{longitude:j,latitude:U}=lg[z.value.map];r.easeTo({zoom:4,center:[j,U]})},[r,o]);A.useEffect(()=>{if(!r)return;const z=()=>{const j=r.getCenter().lng,U=bk(j,lg.usa.longitude),V=bk(j,lg.europe.longitude);U<V&&o.value.map!=="usa"?(c(p_("usa",o.value.search)),localStorage.setItem("tm-map","usa")):V<U&&o.value.map!=="europe"&&(c(p_("europe",o.value.search)),localStorage.setItem("tm-map","europe"))};return r.on("moveend",z),()=>void r.off("moveend",z)},[r,o,c]);const m=jm.useCallback(z=>{r==null||z==null||(r.flyTo({curve:1,zoom:9,center:z.value.map(j=>Number(j.toFixed(3)))}),r.once("moveend",j=>{const{lat:U,lng:V}=j.target.getCenter(),K=j.target.getZoom(),O=Number(j.target.getBearing().toFixed(1)),L=Math.round(j.target.getPitch());L?window.location.hash=`${K}/${U.toFixed(3)}/${V.toFixed(3)}/${O}/${L}`:O?window.location.hash=`${K}/${U.toFixed(3)}/${V.toFixed(3)}/${O}`:window.location.hash=`${K}/${U.toFixed(3)}/${V.toFixed(3)}`}))},[r]),[l,b]=A.useState([]),[w,T]=A.useState(null),E=jm.useCallback((z,j={enableFitBounds:!0})=>{if(l.forEach(K=>K.remove()),T(z),r==null||z==null)return;const U=dv(e.visibleStateDlcs),V=z.features.filter(K=>U.has(K.dlcGuard)).map(({coordinates:K})=>new hv.Marker().setLngLat(K).addTo(r.getMap()));if(b(V),V.length&&j.enableFitBounds){const K=Lz(V.map(R=>R.getLngLat().toArray())),O=[K[0],K[1]],L=[K[2],K[3]];r.fitBounds([O,L],{curve:1,padding:100,maxZoom:9})}},[r,l,T,b,e.visibleStates]);return A.useEffect(()=>{E(w,{enableFitBounds:!1})},[w,e.visibleStates]),Y.jsx("div",{ref:t,className:"maplibregl-ctrl",style:{width:"calc(100svw - 64px)"},children:Y.jsx(nf,{direction:"row",gap:1,children:o.value.search==="cities"?Y.jsx(T7,{selectDecorator:Y.jsx(xk,{selected:o.value,onSelect:d}),map:o.value.map,onSelect:m,visibleStates:e.visibleStates}):Y.jsx(I7,{selectDecorator:Y.jsx(xk,{selected:o.value,onSelect:d}),map:o.value.map,onSelect:E,visibleStates:e.visibleStates,visibleStateDlcs:e.visibleStateDlcs})})})};function bk(e,t){const r=_k(e)/2,o=_k(t)/2;return Math.abs(Math.sin(r)-Math.sin(o))}const f_=(e,t)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},M7=()=>{const e=A.useRef(null),[t,r]=A.useState(!1),[o,c]=A.useState(!1),[d,m]=A.useState(window.location.origin),l=bb();return $s(()=>({onAdd:()=>Sn(e.current),onRemove:()=>Sn(e.current).remove()})),A.useEffect(()=>{const b=l.current;if(!b||!t)return;const w=()=>{const z=b.getCenter(),j=b.getBearing(),U=b.getPitch(),V=j||U?[j,U]:[],K=b.getZoom(),O=T?"?"+new URLSearchParams({mlat:String(f_(T.getLngLat().lat,2)),mlon:String(f_(T.getLngLat().lng,2))}).toString():"",L="#"+[K,z.lat,z.lng,...V].map(R=>f_(R,2)).join("/");m(window.location.origin+O+L)};let T,E;if(o){T=new hv.Marker,T.setLngLat(b.getCenter()).setDraggable(!0).addTo(b.getMap());let z=!0;E=()=>z&&T.setLngLat(b.getCenter()),T.on("dragend",()=>{z=!1,b.easeTo({center:T==null?void 0:T.getLngLat()}),b.once("moveend",()=>z=!0)})}return w(),b.on("moveend",w),E&&b.on("move",E),()=>{b.off("moveend",w),E&&b.off("move",E),T==null||T.remove()}},[l,t,o]),Y.jsxs("div",{ref:e,children:[Y.jsx("div",{className:"maplibregl-ctrl maplibregl-ctrl-group",children:Y.jsx(iv,{sx:{minWidth:0,minHeight:0,borderRadius:0},title:"Share",onClick:()=>r(!t),children:Y.jsx(g7,{})})}),Y.jsx(CE,{open:t,anchor:"right",onClose:()=>r(!1),variant:"plain",hideBackdrop:!0,slotProps:{root:{sx:{pointerEvents:"none"}},content:{sx:{bgcolor:"transparent",p:1,boxShadow:"none",right:t?48:0}}},children:Y.jsxs(TE,{variant:"outlined",sx:{pointerEvents:"auto",borderRadius:"md",p:2,display:"flex",flexDirection:"column",gap:2,overflow:"auto"},children:[Y.jsx(_E,{children:"Share"}),Y.jsx(IE,{}),Y.jsx(mb,{}),Y.jsxs(vE,{sx:{gap:2,overflow:"hidden",flexGrow:1,justifyContent:"center"},children:[Y.jsx(aa,{children:"Share a link to this map"}),Y.jsx(EF,{readOnly:!0,sx:{"--Input-decoratorChildHeight":"36px"},onFocus:b=>b.target.select(),value:d,endDecorator:Y.jsx(fE,{sx:{borderTopLeftRadius:0,borderBottomLeftRadius:0},onClick:()=>void navigator.clipboard.writeText(d).catch(()=>alert("Could not copy to clipboard 🙁")),children:"Copy"})}),Y.jsx(td,{label:"Include marker",checked:o,onChange:b=>c(b.target.checked)})]})]})})]})};function $z(e){return new Set([...e].map(D7).concat(Ii.CA))}function D7(e){switch(e){case Wi.Arizona:return Ii.AZ;case Wi.Arkansas:return Ii.AR;case Wi.Colorado:return Ii.CO;case Wi.Idaho:return Ii.ID;case Wi.Kansas:return Ii.KS;case Wi.Montana:return Ii.MT;case Wi.Nebraska:return Ii.NE;case Wi.Nevada:return Ii.NV;case Wi.NewMexico:return Ii.NM;case Wi.Oklahoma:return Ii.OK;case Wi.Oregon:return Ii.OR;case Wi.Texas:return Ii.TX;case Wi.Utah:return Ii.UT;case Wi.Washington:return Ii.WA;case Wi.Wyoming:return Ii.WY;default:throw new yz(e)}}const wk=(e,[t,r])=>!isNaN(e)&&t<=e&&e<=r,A7=()=>{const{mode:e,systemMode:t}=s1(),r=e==="system"?t:e,{longitude:o,latitude:c}=lg[R7(localStorage.getItem("tm-map"))],[d]=s8(),m=Number(d.get("mlat")),l=Number(d.get("mlon")),b=wk(m,[-90,90])&&wk(l,[-180,180])?{lat:m,lon:l}:void 0,[w,T]=A.useState(!0),[E,z]=A.useState(new Set(Bp)),[j,U]=A.useState(new Set($p)),V=$z(j),K=Xg(E,z,Bp),O=Xg(j,U,$p),[L,R]=A.useState(!1);return Y.jsxs(KE,{style:{width:"100svw",height:"100svh"},hash:!0,minZoom:4,maxZoom:15,mapStyle:wz,initialViewState:{longitude:o,latitude:c,zoom:4},children:[b&&Y.jsx(X8,{longitude:b.lon,latitude:b.lat}),Y.jsxs(gz,{mode:r,children:[Y.jsx(kx,{game:"ats",showContours:L}),Y.jsx(kx,{game:"ets2",showContours:L})]}),Y.jsx(Ix,{game:"ats",mode:r,enableIconAutoHide:w,visibleIcons:E,dlcs:j}),Y.jsx(Ix,{game:"ets2",mode:r,enableIconAutoHide:w,visibleIcons:E}),E.has(ti.CityNames)&&Y.jsx(Tx,{game:"ats",mode:r,enableAutoHide:w,enabledStates:V}),E.has(ti.CityNames)&&Y.jsx(Tx,{game:"ets2",mode:r,enableAutoHide:w}),Y.jsx(YE,{visualizePitch:!0}),Y.jsx(JE,{containerId:"fsElem"}),Y.jsx(M7,{}),Y.jsx(Rz,{}),Y.jsx(XE,{compact:!0,style:{marginLeft:54},customAttribution:"© Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a> and <a href='https://forum.scssoft.com/viewtopic.php?p=1946956#p1946956'>krmarci</a>."}),Y.jsx(z7,{visibleStates:V,visibleStateDlcs:j}),Y.jsx(Az,{icons:{...K,enableAutoHiding:w,onAutoHidingToggle:T},advanced:{showContours:L,onContoursToggle:R},atsDlcs:O})]})};function R7(e){return e==="europe"?e:"usa"}var L7=Object.defineProperty,$7=(e,t,r)=>t in e?L7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,B7=(e,t,r)=>($7(e,t+"",r),r);class O7{constructor(t){B7(this,"_kind"),this._kind=t}}function F7(e,t){const r=e.toString(),o=t.toString();return r>o?1:r<o?-1:0}const N7=F7;var j7=Object.defineProperty,V7=(e,t,r)=>t in e?j7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Sk=(e,t,r)=>(V7(e,typeof t!="symbol"?t+"":t,r),r);function U7(e,t,r){const o=t*2,c=t*2+1;let d=t;return o<e.length&&r(e[d],e[o])<0&&(d=o),c<e.length&&r(e[d],e[c])<0&&(d=c),d}function Pb(e,t,r){const o=U7(e,t,r);if(o!==t){const c=e[t];e[t]=e[o],e[o]=c,Pb(e,o,r)}}function Ck(e){for(let t=Math.floor(e.collection.length/2)-1;t>=0;--t)Pb(e.collection,t,e.comparator)}class Jg extends O7{constructor({comparator:t=N7}={}){super("BinaryHeap"),Sk(this,"comparator"),Sk(this,"collection",[]),this.comparator=t}static from(t,r={}){const o=new Jg(r);return o.collection=Array.from(t),Ck(o),o}clear(){this.collection.length=0}toArray(){return[...this.collection].sort(this.comparator)}get length(){return this.collection.length}top(){if(this.length===0)throw new Error("invalid operation: top() called for empty BinaryHeap");return this.collection[0]}pop(){if(this.length===0)throw new Error("invalid operation: pop() called for empty BinaryHeap");const t=this.collection[0];return this.collection.length>1?(this.collection[0]=this.collection.pop(),Pb(this.collection,0,this.comparator)):this.collection.pop(),t}push(t){this.collection.push(t);const r=this.collection;for(let o=r.length-1,c=Math.floor(o/2);o>0&&this.comparator(r[c],r[o])<0;o=c,c=Math.floor(c/2)){const d=r[o];r[o]=r[c],r[c]=d}}merge(t){t instanceof Jg?this.collection=this.collection.concat(t.collection):this.collection=this.collection.concat(t.toArray()),Ck(this),t.clear()}isEmpty(){return!this.collection.length}}function H7(e,t,r,o,c){const d=`${e}-${t}-${r}-${o}`,{nodeLUT:m,graph:l}=c,b=Sn(m.get(e)),w=Sn(m.get(t)),T=new G7({comparator:(L,R)=>{const re=K.get(L)??1/0;return(K.get(R)??1/0)-re}}),E={nodeId:e,distance:0,direction:r,dlcGuard:-1};T.push(E);const z=new Map,j=new Map;j.set(E,0);const U=L=>w7(L,w),V=(L,R)=>{switch(o){case"shortest":return R.distance;case"smallRoads":return R.isOneLaneRoad?R.distance:R.distance*10;default:throw new yz(o)}},K=new Map;K.set(E,U(b));let O=0;for(;!T.isEmpty();){O++;const L=T.pop();if(L.nodeId===t)return{success:!0,key:d,mode:o,...W7(z,L)};const R=l.get(L.nodeId);if(!R)continue;const re=L.direction==="forward"?R.forward:R.backward;for(const J of re){if(!c.enabledDlcGuards.has(J.dlcGuard))continue;const se=(j.get(L)??1/0)+V(L,J);se<(j.get(J)??1/0)&&(z.set(J,L),j.set(J,se),K.set(J,se+U(Sn(m.get(J.nodeId)))),T.has(J)||T.push(J))}}return{success:!1,key:d,mode:o,numIters:O}}function W7(e,t){let r=0;const o=[t];for(;e.has(t);)t=e.get(t),o.unshift(t),r+=t.distance;return o.length===1&&o.push(o[0]),{route:o,distance:r}}class G7 extends Jg{constructor(r){super(r);cS(this,"items",new Set)}has(r){return this.items.has(r)}push(r){id.checkState(!this.items.has(r)),super.push(r),this.items.add(r)}pop(){const r=super.pop();return id.checkState(this.items.has(r)),this.items.delete(r),r}clear(){super.clear(),this.items.clear()}merge(r){super.merge(r);for(const o of this.collection)this.items.add(o)}}const q7=()=>{const{mode:e,systemMode:t}=s1(),r=e==="system"?t:e,[o,c]=A.useState(!0),[d,m]=A.useState(new Set(Bp)),[l,b]=A.useState(new Set($p)),w=$z(l),T=Xg(d,m,Bp),E=Xg(l,b,$p),[z,j]=A.useState(!1);return Y.jsxs(KE,{style:{width:"100vw",height:"100vh"},minZoom:4,maxZoom:15,maxBounds:[[-135,21],[-84,54]],mapStyle:wz,initialViewState:{longitude:-115,latitude:36,zoom:9},children:[Y.jsx(gz,{mode:r,children:Y.jsx(kx,{game:"ats",showContours:z})}),Y.jsx(Ix,{game:"ats",mode:r,enableIconAutoHide:o,visibleIcons:d,dlcs:l}),Y.jsx(Tx,{game:"ats",mode:r,enableAutoHide:o,enabledStates:w}),Y.jsx(gd,{id:"route1",type:"geojson",data:{type:"FeatureCollection",features:[]},children:Y.jsx(Jr,{type:"line",paint:{"line-color":["match",["get","mode"],"shortest","#f00","smallRoads","#0f0","#f0f"],"line-width":3,"line-opacity":.7}})}),Y.jsx(YE,{visualizePitch:!0}),Y.jsx(JE,{}),Y.jsx(Rz,{}),Y.jsx(XE,{compact:!0,customAttribution:"© Trucker Mudgeon. scenery town data by <a href='https://github.com/nautofon/ats-towns'>nautofon</a>."}),Y.jsx(Z7,{dlcs:l}),Y.jsx(Az,{icons:{...T,enableAutoHiding:o,onAutoHidingToggle:c},advanced:{showContours:z,onContoursToggle:j},atsDlcs:E})]})},Z7=e=>{const{current:t}=bb(),r=dv(e.dlcs),[o,c]=A.useState(void 0),[d,m]=A.useState(void 0),[l,b]=A.useState([]),[w,T]=A.useState([]);A.useEffect(()=>{fetch("usa-graph-demo.json").then(ie=>ie.json()).then(ie=>{b(ie.demoCompanies.map(Tk)),m(K7(ie)),c(ie)},()=>console.error("could not load usa-graph-demo.json"))},[]);const[E,z]=A.useState(void 0),[j,U]=A.useState(void 0),V=A.useCallback(ie=>{ie=Sn(ie),z(ie.value);let Z;if(o!=null){Z=Sn(o.demoCompanies.find(Ie=>Ie.n===ie.value));const ke=Sn(o.demoCompanyDefs.find(Ie=>Ie.t===Z.t)),xe=new Set(ke.d);T(o.demoCompanies.filter(Ie=>xe.has(Ie.t)).map(Tk))}if(!(t==null||d==null)&&(j!=null&&(Sn(t.getSource("route1")).setData({type:"FeatureCollection",features:[]}),U(void 0)),Z)){const ke=Sn(d.nodeLUT.get(Z.n));t.flyTo({curve:1,zoom:9,center:[ke.x,ke.y]})}},[t,j,d,o]),K=A.useCallback(ie=>{ie=Sn(ie),U(ie.value),!(t==null||d==null)&&O(Sn(E),ie.value,t,{...d,enabledDlcGuards:r})},[t,E,d,e.dlcs]),O=(ie,Z,ke,xe)=>{Promise.all([Pk(ie,Z,"shortest",xe),Pk(ie,Z,"smallRoads",xe)]).then(Ie=>{const ze=Sn(ke.getSource("route1"));if(Ie.some(Ye=>Ye==null)){alert("Cannot calculate a route 🙁"),ze.setData({type:"FeatureCollection",features:[]});return}const Le=Ie;ze.setData({type:"FeatureCollection",features:Le}),ke.fitBounds(Lz(Le.flatMap(Ye=>Ye.geometry.coordinates)),{padding:150,curve:1,duration:2500})},Ie=>{console.error("error finding route",Ie)})},L=new Map;if(o)for(const[,ie]of o.demoGraph)for(const Z of[...ie.b??[],...ie.f??[]]){const ke=L.get(Z.n)??0;L.set(Z.n,ke||Z.g)}const R=ie=>{if(d==null)return!0;const Z=Sn(L.get(ie.value));return r.has(Z)},re=(ie,Z)=>ie.city!==Z.city?ie.city.localeCompare(Z.city):ie.label.localeCompare(Z.label),J=l.filter(R).sort(re),se=w.filter(R).sort(re);return Y.jsxs("div",{style:{width:300,margin:20,display:"grid",position:"relative",gridTemplateColumns:"100px auto",alignItems:"center"},children:[Y.jsx("h2",{children:"Start"}),Y.jsx(Vg,{options:J,onChange:(ie,Z)=>Z&&V(Z),groupBy:ie=>ie.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,renderGroup:kk}),Y.jsx("h2",{children:"End"}),Y.jsx(Vg,{options:se,onChange:(ie,Z)=>Z&&K(Z),groupBy:ie=>ie.city,placeholder:"Select...",blurOnSelect:!0,autoComplete:!0,disableClearable:!0,disabled:E==null,renderGroup:kk},E)]})};function kk(e){return Y.jsxs(Y.Fragment,{children:[Y.jsx(aa,{m:1,level:"body-xs",textTransform:"uppercase",children:e.group}),Y.jsx(Qu,{children:e.children}),Y.jsx(kE,{})]})}function K7(e){const t=new Map,r=new Map;for(const[o,c]of e.demoGraph)t.set(o,{forward:(c.f??[]).map(Ik),backward:(c.b??[]).map(Ik)});for(const[o,c]of e.demoNodes)r.set(o,{x:c[0],y:c[1]});return{graph:t,nodeLUT:r}}function Ik(e){return{nodeId:e.n,distance:e.l,isOneLaneRoad:e.o,direction:e.d==="f"?"forward":"backward",dlcGuard:e.g}}function Tk(e){return{label:e.t,city:e.c,value:e.n}}function Pk(e,t,r,o){return new Promise(c=>{const d=H7(e,t,"forward",r,o);if(!d.success){c(void 0);return}c({type:"Feature",geometry:{type:"LineString",coordinates:d.route.map(m=>{const l=Sn(o.nodeLUT.get(m.nodeId));return[l.x,l.y]})},properties:{distance:d.distance,mode:r}})})}const X7=KV(bx([Y.jsx(xx,{path:"/",element:Y.jsx(A7,{})}),Y.jsx(xx,{path:"routes",element:Y.jsx(q7,{})})])),J7=zI({components:{JoyIconButton:{styleOverrides:{root:{backgroundColor:"var(--joy-palette-background-surface)"}}}}}),Y7=document.getElementById("root"),Q7=PE(Y7);Q7.render(Y.jsx(A.StrictMode,{children:Y.jsxs(I5,{defaultMode:"system",modeStorageKey:"tm-mode",theme:J7,children:[Y.jsx(H6,{}),Y.jsx(i8,{router:X7})]})}));
